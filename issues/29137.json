{
  "type": "issue",
  "issue": {
    "id": 2054649573,
    "node_id": "I_kwDOABII5856d3bl",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29137",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29137/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29137/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29137/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/29137",
    "number": 29137,
    "state": "closed",
    "state_reason": "not_planned",
    "title": "Spam Filter Code in Tx Relay & Mempool Acceptance Ignores OFAC SDN Sanctions",
    "body": "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Current behaviour\n\nAs an American Bitcoin miner,\r\nNew transactions' inputs and outputs are not checked for OFAC SDN Sanctions against XBT,\r\nTherefore I am exposed to the risk of imprisonment should I mine a block containing txns for specially designated nationals and blocked persons.\n\n### Expected behaviour\n\nAs an American Bitcoin miner,\r\nI should be able to configure my node to check incoming transactions for OFAC SDN Sanctions against XBT,\r\nBecause I cannot legally mine a block containing txns for specially designated nationals and blocked persons.\n\n### Steps to reproduce\n\n1. Submit a standard transaction involving a specially designated national or blocked person\r\n2. Watch it be accepted by any and all Bitcoin nodes\r\n3. ???\r\n4. PROFIT!\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nmaster@c840dea27e\n\n### Operating system and version\n\nMINGW64 MSYS2\n\n### Machine specifications\n\nSurface Laptop Go 2",
    "user": {
      "login": "derekm",
      "id": 379469,
      "node_id": "MDQ6VXNlcjM3OTQ2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/379469?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/derekm",
      "html_url": "https://github.com/derekm",
      "followers_url": "https://api.github.com/users/derekm/followers",
      "following_url": "https://api.github.com/users/derekm/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/derekm/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/derekm/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/derekm/subscriptions",
      "organizations_url": "https://api.github.com/users/derekm/orgs",
      "repos_url": "https://api.github.com/users/derekm/repos",
      "events_url": "https://api.github.com/users/derekm/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/derekm/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "assignees": [],
    "author_association": "NONE",
    "locked": false,
    "comments": 3,
    "closed_at": "2023-12-23T09:24:08Z",
    "created_at": "2023-12-23T03:52:23Z",
    "updated_at": "2023-12-23T14:39:16Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 1868196209,
      "node_id": "IC_kwDOABII585vWmlx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1868196209",
      "actor": {
        "login": "derekm",
        "id": 379469,
        "node_id": "MDQ6VXNlcjM3OTQ2OQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/379469?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/derekm",
        "html_url": "https://github.com/derekm",
        "followers_url": "https://api.github.com/users/derekm/followers",
        "following_url": "https://api.github.com/users/derekm/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/derekm/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/derekm/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/derekm/subscriptions",
        "organizations_url": "https://api.github.com/users/derekm/orgs",
        "repos_url": "https://api.github.com/users/derekm/repos",
        "events_url": "https://api.github.com/users/derekm/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/derekm/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-23T04:05:29Z",
      "updated_at": "2023-12-23T04:15:23Z",
      "author_association": "NONE",
      "body": "What XBT sanctions [all U.S. persons, and foreign persons in possession of U.S.-origin goods, must implement](https://ofac.treasury.gov/faqs/1) can be found here: https://www.treasury.gov/ofac/downloads/sanctions/1.0/sdn_advanced.xml",
      "user": {
        "login": "derekm",
        "id": 379469,
        "node_id": "MDQ6VXNlcjM3OTQ2OQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/379469?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/derekm",
        "html_url": "https://github.com/derekm",
        "followers_url": "https://api.github.com/users/derekm/followers",
        "following_url": "https://api.github.com/users/derekm/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/derekm/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/derekm/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/derekm/subscriptions",
        "organizations_url": "https://api.github.com/users/derekm/orgs",
        "repos_url": "https://api.github.com/users/derekm/repos",
        "events_url": "https://api.github.com/users/derekm/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/derekm/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/29137#issuecomment-1868196209",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29137"
    },
    {
      "event": "commented",
      "id": 1868221065,
      "node_id": "IC_kwDOABII585vWsqJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1868221065",
      "actor": {
        "login": "tshev",
        "id": 1584402,
        "node_id": "MDQ6VXNlcjE1ODQ0MDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1584402?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tshev",
        "html_url": "https://github.com/tshev",
        "followers_url": "https://api.github.com/users/tshev/followers",
        "following_url": "https://api.github.com/users/tshev/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tshev/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tshev/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tshev/subscriptions",
        "organizations_url": "https://api.github.com/users/tshev/orgs",
        "repos_url": "https://api.github.com/users/tshev/repos",
        "events_url": "https://api.github.com/users/tshev/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tshev/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-23T06:29:32Z",
      "updated_at": "2023-12-23T06:29:32Z",
      "author_association": "NONE",
      "body": "Thank you for highlighting the issue!",
      "user": {
        "login": "tshev",
        "id": 1584402,
        "node_id": "MDQ6VXNlcjE1ODQ0MDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1584402?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tshev",
        "html_url": "https://github.com/tshev",
        "followers_url": "https://api.github.com/users/tshev/followers",
        "following_url": "https://api.github.com/users/tshev/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tshev/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tshev/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tshev/subscriptions",
        "organizations_url": "https://api.github.com/users/tshev/orgs",
        "repos_url": "https://api.github.com/users/tshev/repos",
        "events_url": "https://api.github.com/users/tshev/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tshev/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/29137#issuecomment-1868221065",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29137"
    },
    {
      "event": "closed",
      "id": 11330651340,
      "node_id": "CE_lADOABII5856d3blzwAAAAKjXATM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11330651340",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-23T09:24:09Z"
    },
    {
      "event": "commented",
      "id": 1868306547,
      "node_id": "IC_kwDOABII585vXBhz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1868306547",
      "actor": {
        "login": "derekm",
        "id": 379469,
        "node_id": "MDQ6VXNlcjM3OTQ2OQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/379469?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/derekm",
        "html_url": "https://github.com/derekm",
        "followers_url": "https://api.github.com/users/derekm/followers",
        "following_url": "https://api.github.com/users/derekm/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/derekm/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/derekm/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/derekm/subscriptions",
        "organizations_url": "https://api.github.com/users/derekm/orgs",
        "repos_url": "https://api.github.com/users/derekm/repos",
        "events_url": "https://api.github.com/users/derekm/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/derekm/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-23T14:35:01Z",
      "updated_at": "2023-12-23T14:39:16Z",
      "author_association": "NONE",
      "body": "@fanquake -- Bitcoin Core's spam filter code already has this `Solver` utility which provides a `vSolutionsRet` output parameter that contains exactly the data that needs to be matched against OFAC SDN sactions against XBT: https://github.com/bitcoin/bitcoin/blob/master/src/script/solver.cpp#L140\r\n\r\nI am working on a PR to implement enforcement of these Sanctions, which enforcement is required of every U.S. person and every foreign person working for U.S. persons.\r\n\r\nWith this Issue being posted to the official repository for Bitcoin and with this Issue being closed/dismissed by an official representative of Bitcoin Core, sanctions violations on Bitcoin have now moved from \"negligent\" to \"culpable mental state greater than negligence.\" Thank you for your service.",
      "user": {
        "login": "derekm",
        "id": 379469,
        "node_id": "MDQ6VXNlcjM3OTQ2OQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/379469?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/derekm",
        "html_url": "https://github.com/derekm",
        "followers_url": "https://api.github.com/users/derekm/followers",
        "following_url": "https://api.github.com/users/derekm/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/derekm/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/derekm/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/derekm/subscriptions",
        "organizations_url": "https://api.github.com/users/derekm/orgs",
        "repos_url": "https://api.github.com/users/derekm/repos",
        "events_url": "https://api.github.com/users/derekm/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/derekm/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/29137#issuecomment-1868306547",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29137"
    },
    {
      "event": "mentioned",
      "id": 11331015514,
      "node_id": "MEE_lADOABII5856d3blzwAAAAKjYZNa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11331015514",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-23T14:35:01Z"
    },
    {
      "event": "subscribed",
      "id": 11331015516,
      "node_id": "SE_lADOABII5856d3blzwAAAAKjYZNc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11331015516",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-23T14:35:01Z"
    }
  ]
}