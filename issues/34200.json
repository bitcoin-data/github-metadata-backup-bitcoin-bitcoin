{
  "type": "issue",
  "issue": {
    "id": 3780118205,
    "node_id": "I_kwDOABII587hUAa9",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34200",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34200/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34200/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34200/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/34200",
    "number": 34200,
    "state": "closed",
    "state_reason": "completed",
    "title": "Full Blockchain Node pruned without permission",
    "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nrunning 30.1 and just noticed the entire blockchain on ssd went from having the entire 800gb+ synced to only having 6 .dat files after recently updating. bitcoin.conf has not had any prune setting configured.\n\nexcerpts of note from debug log\n\n2026-01-05T03:13:12Z Prune configured to target 953 MiB on disk for block and undo files.\n2026-01-05T03:13:18Z Loading block index db: last block file = 5324\n2026-01-05T03:13:18Z Loading block index db: last block file info: CBlockFileInfo(blocks=89, size=132165834, heights=930862...930950, time=2026-01-04...2026-01-05)\n2026-01-05T03:13:18Z Checking all blk files are present...\n2026-01-05T03:13:18Z Loading block index db: Block files have previously been pruned\n2026-01-05T03:13:20Z Initializing chainstate Chainstate [ibd] @ height -1 (null)\n\n2026-01-05T03:13:21Z Block index and chainstate loaded\n2026-01-05T03:13:21Z init message: Pruning blockstoreâ€¦\n2026-01-05T03:13:21Z block tree size = 930952\n2026-01-05T03:13:21Z nBestHeight = 930950\n\nunusual outputs after connecting another instance of bitcoin gui on another local network computer and directly connecting via 192.168.1.210:8333 which i did use a prune setting on bitcoin.conf as i just wanted to sync the wallet. i first noticed the oddity as it wouldnt sync and did not label the full node it was connecting to as a full relay\n\n2026-01-05T03:48:30Z [ipc:info] {bitcoin-node-9205/b-capnp-loop-9209} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2026-01-05T03:48:30Z [ipc:info] {bitcoin-node-9205/b-capnp-loop-9209} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2026-01-05T03:48:30Z [ipc:info] {bitcoin-node-9205/b-capnp-loop-9209} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2026-01-05T03:48:30Z [ipc:info] {bitcoin-node-9205/b-capnp-loop-9209} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n\ni am running a stratum 2 protocol mining pool so could possibly be coming from that but it is operating without any errors. \n\n### Expected behaviour\n\nto not prune the blockchain\n\n### Steps to reproduce\n\nnot sure\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nPre-built binaries\n\n### What version of Bitcoin Core are you using?\n\n30.1\n\n### Operating system and version\n\narm linux \n\n### Machine specifications\n\nradxa rock 5b+ armbian debian 13\n\n\nedit- found issue, i opened the gui and entered a prune value. after immediately closing it added the value to the settings.json file and pruned the blockchain after running the daemon via command line. that setting value should not easily prune the blockchain without confirmation. should be more steps in place to prevent that from happening. ",
    "user": {
      "login": "ary111",
      "id": 82274391,
      "node_id": "MDQ6VXNlcjgyMjc0Mzkx",
      "avatar_url": "https://avatars.githubusercontent.com/u/82274391?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ary111",
      "html_url": "https://github.com/ary111",
      "followers_url": "https://api.github.com/users/ary111/followers",
      "following_url": "https://api.github.com/users/ary111/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/ary111/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/ary111/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/ary111/subscriptions",
      "organizations_url": "https://api.github.com/users/ary111/orgs",
      "repos_url": "https://api.github.com/users/ary111/repos",
      "events_url": "https://api.github.com/users/ary111/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/ary111/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "labels": [],
    "assignees": [],
    "author_association": "NONE",
    "locked": false,
    "comments": 0,
    "closed_at": "2026-01-05T04:50:12Z",
    "closed_by": {
      "login": "ary111",
      "id": 82274391,
      "node_id": "MDQ6VXNlcjgyMjc0Mzkx",
      "avatar_url": "https://avatars.githubusercontent.com/u/82274391?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ary111",
      "html_url": "https://github.com/ary111",
      "followers_url": "https://api.github.com/users/ary111/followers",
      "following_url": "https://api.github.com/users/ary111/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/ary111/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/ary111/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/ary111/subscriptions",
      "organizations_url": "https://api.github.com/users/ary111/orgs",
      "repos_url": "https://api.github.com/users/ary111/repos",
      "events_url": "https://api.github.com/users/ary111/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/ary111/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "created_at": "2026-01-05T04:21:48Z",
    "updated_at": "2026-01-05T05:04:41Z"
  },
  "events": [
    {
      "event": "closed",
      "id": 21846185285,
      "node_id": "CE_lADOABII587hUAa9zwAAAAUWIlVF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21846185285",
      "actor": {
        "login": "ary111",
        "id": 82274391,
        "node_id": "MDQ6VXNlcjgyMjc0Mzkx",
        "avatar_url": "https://avatars.githubusercontent.com/u/82274391?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ary111",
        "html_url": "https://github.com/ary111",
        "followers_url": "https://api.github.com/users/ary111/followers",
        "following_url": "https://api.github.com/users/ary111/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ary111/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ary111/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ary111/subscriptions",
        "organizations_url": "https://api.github.com/users/ary111/orgs",
        "repos_url": "https://api.github.com/users/ary111/repos",
        "events_url": "https://api.github.com/users/ary111/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ary111/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-05T04:50:12Z"
    }
  ]
}