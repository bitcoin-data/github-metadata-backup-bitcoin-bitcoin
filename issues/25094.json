{
  "type": "issue",
  "issue": {
    "id": 1229884098,
    "node_id": "I_kwDOABII585JTorC",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25094",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25094/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25094/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25094/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/25094",
    "number": 25094,
    "state": "open",
    "state_reason": null,
    "title": "Hidden service created by `--torcontrol` does not accept connections (General SOCKS server failure)",
    "body": "<!-- This issue tracker is only for technical issues related to Bitcoin Core.\r\n\r\nGeneral bitcoin questions and/or support requests are best directed to the Bitcoin StackExchange at https://bitcoin.stackexchange.com.\r\n\r\nFor reporting security issues, please read instructions at https://bitcoincore.org/en/contact/.\r\n\r\nIf the node is \"stuck\" during sync or giving \"block checksum mismatch\" errors, please ensure your hardware is stable by running memtest and observe CPU temperature with a load-test tool such as linpack before creating an issue! -->\r\n\r\n<!-- Describe the issue -->\r\n\r\nI'm using the `--torcontrol` feature to automatically create a tor hidden service. From the logs, the control connection is established and authenticated, and the hidden service added, and correct onionv3 address assigned. However:\r\n\r\n- There are no incoming P2P connections via Tor (they fail to connect, see below).\r\n- If I try to connect manually, it fails (General SOCKS server failure)\r\n\r\nHere is an excerpt of the failure on the tor side:\r\n\r\n```\r\ntor_1               | May 09 14:44:44.000 [debug] connection_exit_begin_conn(): Creating new exit connection.\r\ntor_1               | May 09 14:44:44.000 [debug] circuit_get_by_circid_channel_impl(): circuit_get_by_circid_channel_impl() returning circuit 0x7f5274f0c200 for circ_id 3666618028, channel ID 5 (0x7f527505dda0)\r\ntor_1               | May 09 14:44:44.000 [debug] handle_hs_exit_conn(): Connecting the hidden service rendezvous circuit to the service destination.\r\ntor_1               | May 09 14:44:44.000 [debug] circuit_get_by_circid_channel_impl(): circuit_get_by_circid_channel_impl() returning circuit 0x7f5274f0c200 for circ_id 3666618028, channel ID 5 (0x7f527505dda0)\r\ntor_1               | May 09 14:44:44.000 [debug] connection_exit_connect(): about to try connecting\r\ntor_1               | May 09 14:44:44.000 [debug] connection_connect(): Connecting to \"(rendezvous)\":38334.\r\ntor_1               | May 09 14:44:44.000 [debug] connection_connect_sockaddr(): Connection to socket in progress (sock 12).\r\ntor_1               | May 09 14:44:44.000 [debug] connection_add_impl(): new conn type Exit, socket 12, address (rendezvous), n_conns 14.\r\ntor_1               | May 09 14:44:44.000 [debug] connection_or_process_cells_from_inbuf(): 15: starting, inbuf_datalen 0 (0 pending in tls object).\r\ntor_1               | May 09 14:44:44.000 [debug] conn_write_callback(): socket 12 wants to write.\r\ntor_1               | May 09 14:44:44.000 [info] connection_handle_write_impl(): in-progress connect failed. Removing. (Connection refused)\r\ntor_1               | May 09 14:44:44.000 [debug] connection_edge_end(): Sending end on conn (fd 12).\r\n```\r\n\r\nI specifically wonder why address \"(rendezvous)\", and why address 38334? Both are wrong.\r\n\r\nI used `nc -v -x 127.0.0.1:9050 sxvxellncmexkds7h3kjy62vl67xwvrccqiigrdybbc4jutjf6amtuad.onion 38333` to connect to the hidden service, which yields `nc: connection failed, SOCKSv5 error: General SOCKS server failure`.\r\n@jonatack used `bitcoin-cli addnode sxvxellncmexkds7h3kjy62vl67xwvrccqiigrdybbc4jutjf6amtuad.onion onetry` on his bitcoin node to the same error message.\r\n\r\nMy bitcoind options are (env vars are resolved by docker-compose):\r\n```\r\n      -signet=1\r\n      -disablewallet=1\r\n      -txindex=1\r\n      -blockfilterindex=basic\r\n      -peerbloomfilters=1\r\n      -peerblockfilters=1\r\n      -logtimestamps=0\r\n      -maxconnections=32\r\n      -listen=1\r\n      -discover=1\r\n      -dnsseed=0\r\n      -onlynet=i2p\r\n      -i2psam=i2pd:${I2PD_PORT}\r\n      -i2pacceptincoming=1\r\n      -onlynet=onion\r\n      -listenonion=1\r\n      -onion=tor:${TOR_SOCKS_PORT}\r\n      -torcontrol=tor:${TOR_CONTROL_PORT}\r\n      -torpassword=xxx\r\n      -rpcbind=0.0.0.0:${BITCOIND_RPC_PORT}\r\n      -rpcallowip=0.0.0.0/0\r\n      -rpcauth=xxx\r\n      -rpcthreads=2\r\n      -par=2\r\n      -debug=tor\r\n```\r\n\r\nMy torrc is pretty default, but I'm using these command line options on top:\r\n\r\n```\r\nControlPort 0.0.0.0:9051 HashedControlPassword xxx Log \"debug stdout\" SafeLogging 0\r\n```\r\n\r\nI'm attaching full logs of bitcoind and tor.\r\n[log-bitcoind.txt](https://github.com/bitcoin/bitcoin/files/8652829/log-bitcoind.txt)\r\n[log-tor.txt.gz](https://github.com/bitcoin/bitcoin/files/8652882/log-tor.txt.gz)\r\n\r\n<!--- What behavior did you expect? -->\r\n\r\nI would expect bitcoind to automatically configure the hidden service for me (as documented in tor.md) and listen for incoming tor connections. As a side note, I've migrated from the configuration variant that manages the hidden service within tor.\r\n\r\n**System information**\r\n\r\n- Bitcoin Core 23.0 within Docker version 20.10.12 under Ubuntu 22.04 LTS\r\n- Tor 0.4.7.7 within Docker version 20.10.12 under Ubuntu 22.04 LTS\r\n- All on an Intel Celeron home server.\r\n ",
    "user": {
      "login": "schildbach",
      "id": 743306,
      "node_id": "MDQ6VXNlcjc0MzMwNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/743306?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/schildbach",
      "html_url": "https://github.com/schildbach",
      "followers_url": "https://api.github.com/users/schildbach/followers",
      "following_url": "https://api.github.com/users/schildbach/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/schildbach/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/schildbach/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/schildbach/subscriptions",
      "organizations_url": "https://api.github.com/users/schildbach/orgs",
      "repos_url": "https://api.github.com/users/schildbach/repos",
      "events_url": "https://api.github.com/users/schildbach/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/schildbach/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 64585,
        "node_id": "MDU6TGFiZWw2NDU4NQ==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug",
        "name": "Bug",
        "color": "FBBAAB",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "locked": false,
    "comments": 7,
    "created_at": "2022-05-09T15:16:14Z",
    "updated_at": "2022-11-11T18:19:04Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 6574099226,
      "node_id": "LE_lADOABII585JTorCzwAAAAGH2Msa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6574099226",
      "actor": {
        "login": "schildbach",
        "id": 743306,
        "node_id": "MDQ6VXNlcjc0MzMwNg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/743306?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/schildbach",
        "html_url": "https://github.com/schildbach",
        "followers_url": "https://api.github.com/users/schildbach/followers",
        "following_url": "https://api.github.com/users/schildbach/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/schildbach/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/schildbach/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/schildbach/subscriptions",
        "organizations_url": "https://api.github.com/users/schildbach/orgs",
        "repos_url": "https://api.github.com/users/schildbach/repos",
        "events_url": "https://api.github.com/users/schildbach/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/schildbach/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-09T15:16:14Z",
      "label": {
        "name": "Bug",
        "color": "FBBAAB"
      }
    },
    {
      "event": "mentioned",
      "id": 6574099271,
      "node_id": "MEE_lADOABII585JTorCzwAAAAGH2MtH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6574099271",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-09T15:16:14Z"
    },
    {
      "event": "subscribed",
      "id": 6574099283,
      "node_id": "SE_lADOABII585JTorCzwAAAAGH2MtT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6574099283",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-09T15:16:14Z"
    },
    {
      "event": "renamed",
      "id": 6574107781,
      "node_id": "RTE_lADOABII585JTorCzwAAAAGH2OyF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6574107781",
      "actor": {
        "login": "schildbach",
        "id": 743306,
        "node_id": "MDQ6VXNlcjc0MzMwNg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/743306?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/schildbach",
        "html_url": "https://github.com/schildbach",
        "followers_url": "https://api.github.com/users/schildbach/followers",
        "following_url": "https://api.github.com/users/schildbach/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/schildbach/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/schildbach/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/schildbach/subscriptions",
        "organizations_url": "https://api.github.com/users/schildbach/orgs",
        "repos_url": "https://api.github.com/users/schildbach/repos",
        "events_url": "https://api.github.com/users/schildbach/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/schildbach/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-09T15:17:09Z",
      "rename": {
        "from": "Hiden service created by `--torcontrol` does not accept connections (General SOCKS server failure)",
        "to": "Hidden service created by `--torcontrol` does not accept connections (General SOCKS server failure)"
      }
    },
    {
      "event": "commented",
      "id": 1310448086,
      "node_id": "IC_kwDOABII585OG9nW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1310448086",
      "actor": {
        "login": "schildbach",
        "id": 743306,
        "node_id": "MDQ6VXNlcjc0MzMwNg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/743306?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/schildbach",
        "html_url": "https://github.com/schildbach",
        "followers_url": "https://api.github.com/users/schildbach/followers",
        "following_url": "https://api.github.com/users/schildbach/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/schildbach/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/schildbach/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/schildbach/subscriptions",
        "organizations_url": "https://api.github.com/users/schildbach/orgs",
        "repos_url": "https://api.github.com/users/schildbach/repos",
        "events_url": "https://api.github.com/users/schildbach/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/schildbach/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-10T15:18:59Z",
      "updated_at": "2022-11-10T15:19:16Z",
      "author_association": "CONTRIBUTOR",
      "body": "I retested this using 24.0rc5, and I also set up a second bitcoind instance just for testing my hidden service. Similar setup, but I use\r\n\r\n```\r\n-connect=xxx.onion:8333\r\n```\r\n\r\nto specifically only connect to my hidden server (address redacted). However, all I get in the log of the connecting bitcoind is:\r\n\r\n```\r\nSocks5() connect to xxx.onion:8333 failed: general failure\r\n```\r\n\r\nNote that if I configure a hidden service manually (in the tor container), I can connect. So my test setup seems to be fine.\r\n\r\nIt would be great if I could somehow see in the logs what bitcoind tells tor via the control port. For example, does it perhaps tell to connect to localhost rather than bitcoind? Does such a tracelog exist?",
      "user": {
        "login": "schildbach",
        "id": 743306,
        "node_id": "MDQ6VXNlcjc0MzMwNg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/743306?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/schildbach",
        "html_url": "https://github.com/schildbach",
        "followers_url": "https://api.github.com/users/schildbach/followers",
        "following_url": "https://api.github.com/users/schildbach/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/schildbach/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/schildbach/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/schildbach/subscriptions",
        "organizations_url": "https://api.github.com/users/schildbach/orgs",
        "repos_url": "https://api.github.com/users/schildbach/repos",
        "events_url": "https://api.github.com/users/schildbach/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/schildbach/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/25094#issuecomment-1310448086",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25094"
    },
    {
      "event": "commented",
      "id": 1311481256,
      "node_id": "IC_kwDOABII585OK52o",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1311481256",
      "actor": {
        "login": "schildbach",
        "id": 743306,
        "node_id": "MDQ6VXNlcjc0MzMwNg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/743306?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/schildbach",
        "html_url": "https://github.com/schildbach",
        "followers_url": "https://api.github.com/users/schildbach/followers",
        "following_url": "https://api.github.com/users/schildbach/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/schildbach/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/schildbach/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/schildbach/subscriptions",
        "organizations_url": "https://api.github.com/users/schildbach/orgs",
        "repos_url": "https://api.github.com/users/schildbach/repos",
        "events_url": "https://api.github.com/users/schildbach/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/schildbach/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-11T09:57:26Z",
      "updated_at": "2022-11-11T09:57:26Z",
      "author_association": "CONTRIBUTOR",
      "body": "I'm now pretty confident that the hidden service configuration of bitcoind via control port is broken in the following way:\r\n\r\nIf you bind the port for incoming onion connections via wildcard, like this\r\n\r\n```\r\n-bind=[::]:8334=onion\r\n```\r\n\r\nit uses that wildcard address as a target address for the hidden service. Which will fail, because a wildcard has a different meaning to the container that has Tor. The result is zero incoming connections via hidden service, and the above errors on the client side of the hidden service.\r\n",
      "user": {
        "login": "schildbach",
        "id": 743306,
        "node_id": "MDQ6VXNlcjc0MzMwNg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/743306?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/schildbach",
        "html_url": "https://github.com/schildbach",
        "followers_url": "https://api.github.com/users/schildbach/followers",
        "following_url": "https://api.github.com/users/schildbach/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/schildbach/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/schildbach/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/schildbach/subscriptions",
        "organizations_url": "https://api.github.com/users/schildbach/orgs",
        "repos_url": "https://api.github.com/users/schildbach/repos",
        "events_url": "https://api.github.com/users/schildbach/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/schildbach/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/25094#issuecomment-1311481256",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25094"
    },
    {
      "event": "commented",
      "id": 1311552077,
      "node_id": "IC_kwDOABII585OLLJN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1311552077",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-11T11:02:52Z",
      "updated_at": "2022-11-11T11:03:27Z",
      "author_association": "MEMBER",
      "body": "The default for signet is `-bind=127.0.0.1:38334=onion`. From your attached `log-bitcoind.txt`:\r\n\r\n> Bound to 127.0.0.1:38334\r\n\r\nThen `bitcoind` is telling the tor daemon to redirect connections destined to the `.onion` address to `127.0.0.1:38334`. This obviously does not work when Tor is running on a different machine than `bitcoind`. You need to modify the default to something like `-bind=a.b.c.d:38334=onion` such that `bitcoind` can bind to `a.b.c.d` and the tor daemon can connect to it. `[::]` fulfills the first but not the second :(\r\n\r\nIs it not possible to have the docker-assigned IP address of the machine in an environment variable, like e.g. `${TOR_SOCKS_PORT}` from above?",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/25094#issuecomment-1311552077",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25094"
    },
    {
      "event": "commented",
      "id": 1311624897,
      "node_id": "IC_kwDOABII585OLc7B",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1311624897",
      "actor": {
        "login": "schildbach",
        "id": 743306,
        "node_id": "MDQ6VXNlcjc0MzMwNg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/743306?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/schildbach",
        "html_url": "https://github.com/schildbach",
        "followers_url": "https://api.github.com/users/schildbach/followers",
        "following_url": "https://api.github.com/users/schildbach/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/schildbach/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/schildbach/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/schildbach/subscriptions",
        "organizations_url": "https://api.github.com/users/schildbach/orgs",
        "repos_url": "https://api.github.com/users/schildbach/repos",
        "events_url": "https://api.github.com/users/schildbach/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/schildbach/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-11T12:14:39Z",
      "updated_at": "2022-11-11T12:15:06Z",
      "author_association": "CONTRIBUTOR",
      "body": "Sorry for the signet/mainnet mismatch between my May and current configurations. Btw. the hidden service address from May also doesn't exist any more, I think.\r\n\r\n> Then bitcoind is telling the tor daemon to redirect connections destined to the .onion address to 127.0.0.1:38334.\r\n\r\nIt probably shouldn't do that and instead print a message to the log? And, like I suggested in the other issue, maybe a configuration option for what address to use in this case would make sense?\r\n\r\n> Is it not possible to have the docker-assigned IP address of the machine in an environment variable, like e.g. ${TOR_SOCKS_PORT} from above?\r\n\r\nAfaik no. Docker recommends using hostnames.\r\n\r\n\r\n",
      "user": {
        "login": "schildbach",
        "id": 743306,
        "node_id": "MDQ6VXNlcjc0MzMwNg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/743306?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/schildbach",
        "html_url": "https://github.com/schildbach",
        "followers_url": "https://api.github.com/users/schildbach/followers",
        "following_url": "https://api.github.com/users/schildbach/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/schildbach/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/schildbach/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/schildbach/subscriptions",
        "organizations_url": "https://api.github.com/users/schildbach/orgs",
        "repos_url": "https://api.github.com/users/schildbach/repos",
        "events_url": "https://api.github.com/users/schildbach/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/schildbach/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/25094#issuecomment-1311624897",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25094"
    },
    {
      "event": "commented",
      "id": 1311700853,
      "node_id": "IC_kwDOABII585OLvd1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1311700853",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-11T13:32:18Z",
      "updated_at": "2022-11-11T13:32:18Z",
      "author_association": "MEMBER",
      "body": "> It probably shouldn't do that and instead print a message to the log?\r\n\r\nWhy? It works well in the default case when tor is on the same machine and `-bind=127.0.0.1:8334=onion` and `-torcontrol=127.0.0.1:9051` (these are the default values). You have changed `-torcontrol`, but not `-bind=...=onion`. If you change the latter, then it will work too.\r\n\r\nThe only problem is that you want to use a hostname instead of an IP address for `-bind`, right?",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/25094#issuecomment-1311700853",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25094"
    },
    {
      "event": "commented",
      "id": 1311760237,
      "node_id": "IC_kwDOABII585OL99t",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1311760237",
      "actor": {
        "login": "schildbach",
        "id": 743306,
        "node_id": "MDQ6VXNlcjc0MzMwNg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/743306?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/schildbach",
        "html_url": "https://github.com/schildbach",
        "followers_url": "https://api.github.com/users/schildbach/followers",
        "following_url": "https://api.github.com/users/schildbach/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/schildbach/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/schildbach/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/schildbach/subscriptions",
        "organizations_url": "https://api.github.com/users/schildbach/orgs",
        "repos_url": "https://api.github.com/users/schildbach/repos",
        "events_url": "https://api.github.com/users/schildbach/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/schildbach/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-11T14:25:57Z",
      "updated_at": "2022-11-11T18:19:04Z",
      "author_association": "CONTRIBUTOR",
      "body": "What I meant is it should probably not silently convert `[::]` to `127.0.0.1`. Yes, if you bind to `127.0.0.1` then it's expected to use `127.0.0.1` for the hidden service target. Of course running bitcoind and tor in the same container is not really recommended.\r\n\r\nAn elegant way to support the container isolated case would be\r\n\r\n```\r\n-torcontrol=tor:9051\r\n-bind=bitcoind:8334=onion\r\n```\r\n\r\nor\r\n\r\n```\r\n-torcontrol=tor:9051\r\n-bind=[::]:8334=onion\r\n-hiddenservicetarget=bitcoind:8334\r\n```\r\n\r\n\"hiddenservicetarget\" being a new option that would separate the bind address from the target address. If it exists, bitcoind would not try to derive the target address from the onion bind address and instead use the value of the option.\r\n\r\nI think one of these two ways should be considered in order to support container isolation.\r\n",
      "user": {
        "login": "schildbach",
        "id": 743306,
        "node_id": "MDQ6VXNlcjc0MzMwNg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/743306?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/schildbach",
        "html_url": "https://github.com/schildbach",
        "followers_url": "https://api.github.com/users/schildbach/followers",
        "following_url": "https://api.github.com/users/schildbach/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/schildbach/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/schildbach/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/schildbach/subscriptions",
        "organizations_url": "https://api.github.com/users/schildbach/orgs",
        "repos_url": "https://api.github.com/users/schildbach/repos",
        "events_url": "https://api.github.com/users/schildbach/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/schildbach/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/25094#issuecomment-1311760237",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25094"
    },
    {
      "event": "commented",
      "id": 1311789124,
      "node_id": "IC_kwDOABII585OMFBE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1311789124",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-11T14:55:19Z",
      "updated_at": "2022-11-11T14:55:19Z",
      "author_association": "MEMBER",
      "body": "> What I meant is it should probably not silently convert [::] to 127.0.0.1\r\n\r\nYes, probably it makes sense to print something like \"tor control returned an invalid address for the socks5 proxy: [::]:9050, falling back to the default 127.0.0.1:9050`.\r\n\r\n> I think one of these two ways should be considered in order to support container isolation.\r\n\r\nI agree.",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/25094#issuecomment-1311789124",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25094"
    }
  ]
}