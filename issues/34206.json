{
  "type": "issue",
  "issue": {
    "id": 3784743931,
    "node_id": "I_kwDOABII587hlpv7",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34206",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34206/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34206/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34206/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/34206",
    "number": 34206,
    "state": "open",
    "state_reason": null,
    "title": "wallet: Assertion `!wtx.truc_child_in_mempool.has_value()' failed",
    "body": "The following `Assume` in the wallet will fail (triggered through rpc) under certain reorg conditions:\nhttps://github.com/bitcoin/bitcoin/blob/114901c0655d1dea3024a1daa362716c948bbde3/src/wallet/spend.cpp#L413\n\n\n<details>\n\n<summary>Vibe coded functional test patch to demonstrate (`-DABORT_ON_FAILED_ASSUME` is required):</summary>\n\n\n```patch\nFrom 54aea28e6439be5645267f0344a6337d9798ba14 Mon Sep 17 00:00:00 2001\nFrom: dergoegge <n.goeggi@gmail.com>\nDate: Tue, 6 Jan 2026 10:49:02 +0000\nSubject: [PATCH] truc wallet reorg bug\n\n---\n test/functional/mempool_truc.py | 163 +++++++++++++++++++++++++-------\n 1 file changed, 127 insertions(+), 36 deletions(-)\n\ndiff --git a/test/functional/mempool_truc.py b/test/functional/mempool_truc.py\nindex 2586308e4d..a155d57b68 100755\n--- a/test/functional/mempool_truc.py\n+++ b/test/functional/mempool_truc.py\n@@ -47,6 +47,36 @@ class MempoolTRUC(BitcoinTestFramework):\n         self.extra_args = [[]]\n         self.setup_clean_chain = True\n\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def create_tx(self, wallet, inputs, outputs, version, prevtxs=None):\n+        \"\"\"Create a signed transaction using the real wallet.\n+\n+        Args:\n+            wallet: The wallet RPC to use\n+            inputs: List of inputs (empty to let fundrawtransaction pick)\n+            outputs: Dict of address -> amount\n+            version: Transaction version\n+            prevtxs: Optional list of previous transaction info for signing\n+                     unbroadcast transactions. Each entry should have:\n+                     {\"txid\": ..., \"vout\": ..., \"scriptPubKey\": ..., \"amount\": ...}\n+        \"\"\"\n+        raw_tx = wallet.createrawtransaction(inputs=inputs, outputs=outputs, version=version)\n+        if inputs == []:\n+            raw_tx = wallet.fundrawtransaction(raw_tx, {'include_unsafe': True})[\"hex\"]\n+        if prevtxs:\n+            signed_tx = wallet.signrawtransactionwithwallet(raw_tx, prevtxs)\n+        else:\n+            signed_tx = wallet.signrawtransactionwithwallet(raw_tx)\n+        return signed_tx[\"hex\"]\n+\n+    def send_tx(self, wallet, inputs, outputs, version, prevtxs=None):\n+        \"\"\"Create and broadcast a transaction using the real wallet.\"\"\"\n+        tx_hex = self.create_tx(wallet, inputs, outputs, version, prevtxs)\n+        txid = wallet.sendrawtransaction(tx_hex)\n+        return txid\n+\n     def check_mempool(self, txids):\n         \"\"\"Assert exact contents of the node's mempool (by txid).\"\"\"\n         mempool_contents = self.nodes[0].getrawmempool()\n@@ -173,41 +203,102 @@ class MempoolTRUC(BitcoinTestFramework):\n     @cleanup()\n     def test_truc_reorg(self):\n         node = self.nodes[0]\n+        self.log.info(\"Test TRUC transactions survive reorg correctly\")\n+\n+        # Create a wallet for this test\n+        node.createwallet(\"truc_reorg_wallet\")\n+        wallet = node.get_wallet_rpc(\"truc_reorg_wallet\")\n+\n+        # Fund the wallet\n+        funding_addr = wallet.getnewaddress()\n+        self.generatetoaddress(node, 1, funding_addr)\n+        self.generate(node, 100)  # Mature the coinbase\n\n         # Prep for fork\n         fork_blocks = create_empty_fork(node)\n-        self.log.info(\"Test that, during a reorg, TRUC rules are not enforced\")\n         self.check_mempool([])\n\n-        # Testing 2<-3 versions allowed\n-        tx_v2_block = self.wallet.create_self_transfer(version=2)\n+        # tx_chain_1: v2 transaction with 2 outputs\n+        addr1 = wallet.getnewaddress()\n+        addr2 = wallet.getnewaddress()\n+        tx_chain_1_hex = self.create_tx(wallet, [], {addr1: 10, addr2: 10}, version=2)\n+        tx_chain_1_decoded = node.decoderawtransaction(tx_chain_1_hex)\n+        tx_chain_1_txid = tx_chain_1_decoded[\"txid\"]\n+\n+        # Find which vout corresponds to which address and get scriptPubKey info\n+        vout_for_addr1 = None\n+        vout_for_addr2 = None\n+        scriptpubkey_addr1 = None\n+        scriptpubkey_addr2 = None\n+        for vout in tx_chain_1_decoded[\"vout\"]:\n+            if vout[\"scriptPubKey\"].get(\"address\") == addr1:\n+                vout_for_addr1 = vout[\"n\"]\n+                scriptpubkey_addr1 = vout[\"scriptPubKey\"][\"hex\"]\n+            elif vout[\"scriptPubKey\"].get(\"address\") == addr2:\n+                vout_for_addr2 = vout[\"n\"]\n+                scriptpubkey_addr2 = vout[\"scriptPubKey\"][\"hex\"]\n+\n+        # tx_chain_2: v3 transaction spending first output of tx_chain_1\n+        addr3 = wallet.getnewaddress()\n+        prevtxs_chain_2 = [{\n+            \"txid\": tx_chain_1_txid,\n+            \"vout\": vout_for_addr1,\n+            \"scriptPubKey\": scriptpubkey_addr1,\n+            \"amount\": Decimal(\"10\")\n+        }]\n+        tx_chain_2_hex = self.create_tx(\n+            wallet,\n+            [{\"txid\": tx_chain_1_txid, \"vout\": vout_for_addr1}],\n+            {addr3: Decimal(\"9.99999\")},\n+            version=3,\n+            prevtxs=prevtxs_chain_2\n+        )\n+        tx_chain_2_decoded = node.decoderawtransaction(tx_chain_2_hex)\n+        tx_chain_2_txid = tx_chain_2_decoded[\"txid\"]\n+\n+        # Get scriptPubKey for tx_chain_2 output\n+        scriptpubkey_addr3 = tx_chain_2_decoded[\"vout\"][0][\"scriptPubKey\"][\"hex\"]\n+\n+        # tx_chain_3: v3 transaction spending output of tx_chain_2\n+        addr4 = wallet.getnewaddress()\n+        prevtxs_chain_3 = [{\n+            \"txid\": tx_chain_2_txid,\n+            \"vout\": 0,\n+            \"scriptPubKey\": scriptpubkey_addr3,\n+            \"amount\": Decimal(\"9.99999\")\n+        }]\n+        tx_chain_3_hex = self.create_tx(\n+            wallet,\n+            [{\"txid\": tx_chain_2_txid, \"vout\": 0}],\n+            {addr4: Decimal(\"9.99998\")},\n+            version=3,\n+            prevtxs=prevtxs_chain_3\n+        )\n+        tx_chain_3_decoded = node.decoderawtransaction(tx_chain_3_hex)\n+        tx_chain_3_txid = tx_chain_3_decoded[\"txid\"]\n\n-        # Testing 3<-2 versions allowed\n-        tx_v3_block = self.wallet.create_self_transfer(version=3)\n+        tx_to_mine = [tx_chain_1_hex, tx_chain_2_hex, tx_chain_3_hex]\n+        self.generateblock(node, output=\"raw(42)\", transactions=tx_to_mine)\n\n-        # Testing overly-large child size\n-        tx_v3_block2 = self.wallet.create_self_transfer(version=3)\n+        self.check_mempool([])\n\n-        # Also create a linear chain of 3 TRUC transactions that will be directly mined, followed by one v2 in-mempool after block is made\n-        tx_chain_1 = self.wallet.create_self_transfer(version=3)\n-        tx_chain_2 = self.wallet.create_self_transfer(utxo_to_spend=tx_chain_1[\"new_utxo\"], version=3)\n-        tx_chain_3 = self.wallet.create_self_transfer(utxo_to_spend=tx_chain_2[\"new_utxo\"], version=3)\n+        self.trigger_reorg(fork_blocks)\n\n-        tx_to_mine = [tx_v3_block[\"hex\"], tx_v2_block[\"hex\"], tx_v3_block2[\"hex\"], tx_chain_1[\"hex\"], tx_chain_2[\"hex\"], tx_chain_3[\"hex\"]]\n-        self.generateblock(node, output=\"raw(42)\", transactions=tx_to_mine)\n+        self.check_mempool([tx_chain_1_txid, tx_chain_2_txid, tx_chain_3_txid])\n\n-        self.check_mempool([])\n+        # tx_chain_4: v2 transaction funded by the wallet (spending unconfirmed outputs from tx_chain_1)\n+        addr5 = wallet.getnewaddress()\n+        self.log.info(\"Creating tx_chain_4 spending from unconfirmed tx_chain_1\")\n+        tx_chain_4_txid = self.send_tx(\n+            wallet,\n+            [],  # Let fundrawtransaction pick inputs\n+            {addr5: Decimal(\"9.99\")},\n+            version=2\n+        )\n\n-        tx_v2_from_v3 = self.wallet.send_self_transfer(from_node=node, utxo_to_spend=tx_v3_block[\"new_utxo\"], version=2)\n-        tx_v3_from_v2 = self.wallet.send_self_transfer(from_node=node, utxo_to_spend=tx_v2_block[\"new_utxo\"], version=3)\n-        tx_v3_child_large = self.wallet.send_self_transfer(from_node=node, utxo_to_spend=tx_v3_block2[\"new_utxo\"], target_vsize=1250, version=3)\n-        assert_greater_than(node.getmempoolentry(tx_v3_child_large[\"txid\"])[\"vsize\"], TRUC_CHILD_MAX_VSIZE)\n-        tx_chain_4 = self.wallet.send_self_transfer(from_node=node, utxo_to_spend=tx_chain_3[\"new_utxo\"], version=2)\n-        self.check_mempool([tx_v2_from_v3[\"txid\"], tx_v3_from_v2[\"txid\"], tx_v3_child_large[\"txid\"], tx_chain_4[\"txid\"]])\n+        self.check_mempool([tx_chain_1_txid, tx_chain_2_txid, tx_chain_3_txid, tx_chain_4_txid])\n\n-        # Reorg should have all block transactions re-accepted, ignoring TRUC enforcement\n-        self.trigger_reorg(fork_blocks)\n-        self.check_mempool([tx_v3_block[\"txid\"], tx_v2_block[\"txid\"], tx_v3_block2[\"txid\"], tx_v2_from_v3[\"txid\"], tx_v3_from_v2[\"txid\"], tx_v3_child_large[\"txid\"], tx_chain_1[\"txid\"], tx_chain_2[\"txid\"], tx_chain_3[\"txid\"], tx_chain_4[\"txid\"]])\n+        wallet.unloadwallet()\n\n     @cleanup(extra_args=[\"-limitclustercount=1\"])\n     def test_nondefault_package_limits(self):\n@@ -658,20 +749,20 @@ class MempoolTRUC(BitcoinTestFramework):\n         node = self.nodes[0]\n         self.wallet = MiniWallet(node)\n         self.generate(self.wallet, 200)\n-        self.test_truc_max_vsize()\n-        self.test_truc_acceptance()\n-        self.test_truc_replacement()\n+        #self.test_truc_max_vsize()\n+        #self.test_truc_acceptance()\n+        #self.test_truc_replacement()\n         self.test_truc_reorg()\n-        self.test_nondefault_package_limits()\n-        self.test_truc_ancestors_package()\n-        self.test_truc_ancestors_package_and_mempool()\n-        self.test_sibling_eviction_package()\n-        self.test_truc_package_inheritance()\n-        self.test_truc_in_testmempoolaccept()\n-        self.test_reorg_2child_rbf()\n-        self.test_truc_sibling_eviction()\n-        self.test_reorg_sibling_eviction_1p2c()\n-        self.test_minrelay_in_package_combos()\n+        #self.test_nondefault_package_limits()\n+        #self.test_truc_ancestors_package()\n+        #self.test_truc_ancestors_package_and_mempool()\n+        #self.test_sibling_eviction_package()\n+        #self.test_truc_package_inheritance()\n+        #self.test_truc_in_testmempoolaccept()\n+        #self.test_reorg_2child_rbf()\n+        #self.test_truc_sibling_eviction()\n+        #self.test_reorg_sibling_eviction_1p2c()\n+        #self.test_minrelay_in_package_combos()\n\n\n if __name__ == \"__main__\":\n--\n2.50.1\n```\n\n</details>\n\nAssertion was added in #32896",
    "user": {
      "login": "dergoegge",
      "id": 8077169,
      "node_id": "MDQ6VXNlcjgwNzcxNjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dergoegge",
      "html_url": "https://github.com/dergoegge",
      "followers_url": "https://api.github.com/users/dergoegge/followers",
      "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
      "organizations_url": "https://api.github.com/users/dergoegge/orgs",
      "repos_url": "https://api.github.com/users/dergoegge/repos",
      "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/dergoegge/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "labels": [
      {
        "id": 149424,
        "node_id": "MDU6TGFiZWwxNDk0MjQ=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
        "name": "Wallet",
        "color": "08a781",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "MEMBER",
    "locked": false,
    "comments": 3,
    "created_at": "2026-01-06T11:02:14Z",
    "updated_at": "2026-01-06T14:15:47Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 3714311520,
      "node_id": "IC_kwDOABII587dY-Vg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3714311520",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-06T11:13:58Z",
      "updated_at": "2026-01-06T11:13:58Z",
      "author_association": "MEMBER",
      "body": "cc @glozow @instagibbs ",
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/34206#issuecomment-3714311520",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34206"
    },
    {
      "event": "mentioned",
      "id": 21874435127,
      "node_id": "MEE_lADOABII587hlpv7zwAAAAUX0WQ3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21874435127",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-06T11:13:59Z"
    },
    {
      "event": "subscribed",
      "id": 21874435153,
      "node_id": "SE_lADOABII587hlpv7zwAAAAUX0WRR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21874435153",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-06T11:13:59Z"
    },
    {
      "event": "mentioned",
      "id": 21874435167,
      "node_id": "MEE_lADOABII587hlpv7zwAAAAUX0WRf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21874435167",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-06T11:13:59Z"
    },
    {
      "event": "subscribed",
      "id": 21874435180,
      "node_id": "SE_lADOABII587hlpv7zwAAAAUX0WRs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21874435180",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-06T11:13:59Z"
    },
    {
      "event": "labeled",
      "id": 21874435696,
      "node_id": "LE_lADOABII587hlpv7zwAAAAUX0WZw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21874435696",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-06T11:14:02Z",
      "label": {
        "name": "Wallet",
        "color": "08a781"
      }
    },
    {
      "event": "commented",
      "id": 3714854363,
      "node_id": "IC_kwDOABII587dbC3b",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3714854363",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-06T14:13:55Z",
      "updated_at": "2026-01-06T14:13:55Z",
      "author_association": "MEMBER",
      "body": "I'm less familiar with the wallet code these days, but I think an ok response may be to consider the coin not available in this case?",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/34206#issuecomment-3714854363",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34206"
    },
    {
      "event": "commented",
      "id": 3714858234,
      "node_id": "IC_kwDOABII587dbDz6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3714858234",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-06T14:15:01Z",
      "updated_at": "2026-01-06T14:15:47Z",
      "author_association": "MEMBER",
      "body": "I think I understand the issue. The `Assume` is what's wrong there, and it should be deleted. \n\nA simpler case  could also trigger this:\nBlock 100 - has tx A (non-TRUC)\nBlock 101 - has tx B spending A (TRUC)\nA reorg happens with a new chain at blocks 100, 101, and 102, where in the alternate chain both tx A and tx B are not mined, so they end up in the mempool.\nWhen you try to spend an output of A, we assume that A has no TRUC children. That's correct if a reorg did not happen, but when a reorg happens, that's an incorrect assumption.\nThe correct fix here is to just get rid of the assumption",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/34206#issuecomment-3714858234",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34206"
    }
  ]
}