{
  "type": "issue",
  "issue": {
    "id": 1779407019,
    "node_id": "I_kwDOABII585qD5ir",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27995",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27995/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27995/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27995/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/27995",
    "number": 27995,
    "state": "open",
    "state_reason": null,
    "title": "Improving fee estimation accuracy",
    "body": "The current fee estimation algorithm suffers from a number of issues that make it hard to use in the real world:\r\n* Because it's solely based on historical data (looking at how long mempool transactions take to confirm), it cannot react quickly to changing conditions.\r\n* Because it's aiming to match seen behavior rather than requirement, if some non-negligible fraction of users keeps paying a certain high feerate, it may try to match that, even if unnecessary for confirmation.\r\n\r\nThere exist alternative sources of information which could mitigate some of these issues, but they are not used for various reasons:\r\n* We could look at the feerate histogram of the current mempool, which can react much faster, though lacks information about the rate/feerate of transactions being added. It is not used, because in the presence of diverging network policy, it may give permanently and wildly wrong results. For example, a pre-taproot node won't see taproot transactions entirely, and thus miss any feerate pressure they provide. In the other direction, If local policy is more lax than the network's, our mempool may contain unconfirmable high-fee things that incorrectly are accounted for.\r\n* We could look at the rate and feerate of transactions entering the mempool currently, rather than only account for them when they confirm. This gives better predictive value, but suffers from the same problems as the previous point when policies differ.\r\n* We could look at the feerate of transactions in blocks, but this is trivially gameable by miners.\r\n\r\nI wonder if it wouldn't be possible to take the mempool-based approaches into account, but subjecting them to a sanity checks based on confirmation. More concretely:\r\n* We can look at what percentage of high-feerate mempool transactions confirm within a reasonable period of time. If that percentage is high, it's unlikely we have a significantly diverging policy from the network's aggregate policy. If it is too low, we may want to disable mempool-based fee estimation entirely.\r\n* We can keep a counter on transactions in the mempool that tracks how often we'd have expected it to be seen in a block, but didn't. If that counter goes too high for a certain transaction, we could exclude it from feerate calculations. This can reduce issues with too lax local policy, but not the other way around.\r\n\r\nEven with these safeguards, I don't think it's reasonable to use as a default feerate estimate (at least not for automatic feerate decisions without human intervention, like `sendtoaddress` and friends), but it could be a separately selectable estimation mode.\r\n\r\nThis issue is the result of a discussion with @Xekyo, @achow101, @adamjonas, and @mzumsande.\r\n",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 64584,
        "node_id": "MDU6TGFiZWw2NDU4NA==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Brainstorming",
        "name": "Brainstorming",
        "color": "ebd775",
        "default": false
      },
      {
        "id": 82428251,
        "node_id": "MDU6TGFiZWw4MjQyODI1MQ==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/TX%20fees%20and%20policy",
        "name": "TX fees and policy",
        "color": "5319e7",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "MEMBER",
    "locked": false,
    "comments": 7,
    "created_at": "2023-06-28T17:36:12Z",
    "updated_at": "2024-04-25T14:52:49Z"
  },
  "events": [
    {
      "event": "mentioned",
      "id": 9667524200,
      "node_id": "MEE_lADOABII585qD5irzwAAAAJAOrZo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9667524200",
      "actor": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-28T17:36:13Z"
    },
    {
      "event": "subscribed",
      "id": 9667524208,
      "node_id": "SE_lADOABII585qD5irzwAAAAJAOrZw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9667524208",
      "actor": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-28T17:36:13Z"
    },
    {
      "event": "mentioned",
      "id": 9667524214,
      "node_id": "MEE_lADOABII585qD5irzwAAAAJAOrZ2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9667524214",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-28T17:36:13Z"
    },
    {
      "event": "subscribed",
      "id": 9667524222,
      "node_id": "SE_lADOABII585qD5irzwAAAAJAOrZ-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9667524222",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-28T17:36:13Z"
    },
    {
      "event": "mentioned",
      "id": 9667524242,
      "node_id": "MEE_lADOABII585qD5irzwAAAAJAOraS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9667524242",
      "actor": {
        "login": "adamjonas",
        "id": 755825,
        "node_id": "MDQ6VXNlcjc1NTgyNQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/755825?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/adamjonas",
        "html_url": "https://github.com/adamjonas",
        "followers_url": "https://api.github.com/users/adamjonas/followers",
        "following_url": "https://api.github.com/users/adamjonas/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/adamjonas/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/adamjonas/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/adamjonas/subscriptions",
        "organizations_url": "https://api.github.com/users/adamjonas/orgs",
        "repos_url": "https://api.github.com/users/adamjonas/repos",
        "events_url": "https://api.github.com/users/adamjonas/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/adamjonas/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-28T17:36:13Z"
    },
    {
      "event": "subscribed",
      "id": 9667524262,
      "node_id": "SE_lADOABII585qD5irzwAAAAJAOram",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9667524262",
      "actor": {
        "login": "adamjonas",
        "id": 755825,
        "node_id": "MDQ6VXNlcjc1NTgyNQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/755825?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/adamjonas",
        "html_url": "https://github.com/adamjonas",
        "followers_url": "https://api.github.com/users/adamjonas/followers",
        "following_url": "https://api.github.com/users/adamjonas/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/adamjonas/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/adamjonas/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/adamjonas/subscriptions",
        "organizations_url": "https://api.github.com/users/adamjonas/orgs",
        "repos_url": "https://api.github.com/users/adamjonas/repos",
        "events_url": "https://api.github.com/users/adamjonas/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/adamjonas/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-28T17:36:13Z"
    },
    {
      "event": "mentioned",
      "id": 9667524280,
      "node_id": "MEE_lADOABII585qD5irzwAAAAJAOra4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9667524280",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-28T17:36:13Z"
    },
    {
      "event": "subscribed",
      "id": 9667524294,
      "node_id": "SE_lADOABII585qD5irzwAAAAJAOrbG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9667524294",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-28T17:36:13Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-28T17:47:41Z",
      "updated_at": "2023-06-28T17:47:41Z",
      "source": {
        "issue": {
          "id": 829979688,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NTkxNTU5MTg5",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21422",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21422/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21422/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21422/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/21422",
          "number": 21422,
          "state": "closed",
          "state_reason": null,
          "title": "Add feerate histogram to getmempoolinfo",
          "body": "This PR is a slightly modified version of #15836 (jonasschnelli):\r\n\r\n> This follows the approach of adding statistical information to Bitcoin Core that would otherwise be inefficient to calculate outside of the codebase.\r\n> \r\n> Adds an optional feerate histogram to `getmempoolinfo`.\r\n> \r\n> The concept and code is heavily inspired by the stats jhoenicke runs (https://github.com/jhoenicke/mempool, http://bitcoin-mempool.info).\r\n> \r\n> If someone has a good idea how to make the feerate-groups dynamic but also semi-constant for similar fee environments, please comment.\r\n> \r\n> If this is feature we'd like to have in master (concept ACKs), I'd continue this with writing tests.\r\n> \r\n> A simple plot of the data is [here](https://bitcointools.jonasschnelli.ch/mempool-histogram/).\r\n> RPC output sample is [here](https://gist.github.com/jonasschnelli/f5b8a701375c280b65842f44e4f6c046).\r\n\r\n<s>My attempts to contact jonasschnelli were, unfortunately, unsuccessful so I decided to create this PR in an attempt to move this forward. If this is somehow problematic, please let me know to work it out.</s> **edit:** Jonas is happy the work continues.\r\n\r\n### This PR\r\n\r\nNote that REST support which is in #15836 is not included in this PR. It can be improved in this PR or in a follow-up one if it is deemed useful/required/etc.\r\n\r\n#### Applied review comments from the old PR\r\n\r\n* https://github.com/bitcoin/bitcoin/pull/15836#discussion_r304327165 - \"Remove these files and maybe update .gitignore?\"\r\n* https://github.com/bitcoin/bitcoin/pull/15836#discussion_r304346834 - \"This must be before the above line (order is important) otherwise `rest_mempool_info_with_fee_histogram` is never called.\"\r\n* https://github.com/bitcoin/bitcoin/pull/15836#issuecomment-499886548 - \"This gives me a new warning on build: [...]\" This is already addressed, I believe.\r\n* https://github.com/bitcoin/bitcoin/pull/15836#discussion_r588927756 - Simplify `if (feeperbyte >= feelimits[i] && (i == feelimits.size() - 1 || feeperbyte < feelimits[i + 1])) {`\r\n* https://github.com/bitcoin/bitcoin/commit/0b6ba66238c377116bc6c21e19cffbf1b6dfc788 - Added test proposed by promag\r\n* https://github.com/bitcoin/bitcoin/pull/15836#discussion_r437788703 - `std::to_string(...)` replaced with `ToString(...) as done in #18134\r\n\r\n#### Test commands\r\n\r\n```bash\r\n$ ./bitcoin-cli -testnet getmempoolinfo \"[0, 1, 2, 3, 4, 5, 6, 7, 8, 10, 12, 14, 17, 20, 25, 30, 40, 50, 60, 70, 80, 100, 120, 140, 170, 200]\" # To test the new behavior\r\n```\r\n\r\n```bash\r\n$ test/functional/test_runner.py mempool_fee_histogram.py # To run the new test\r\n```\r\n\r\n```bash\r\n$ ./bitcoin-cli -testnet -rpcuser=test -rpcpassword=test help getmempoolinfo\r\ngetmempoolinfo ( [fee_rate,...] )\r\n\r\nReturns details on the active state of the TX memory pool.\r\n\r\nArguments:\r\n1. fee_histogram    (json array, optional) Fee statistics grouped by fee rate ranges\r\n     [\r\n       fee_rate,    (numeric, required) Fee rate (in sat/vB) to group the fees by\r\n       ...\r\n     ]\r\n\r\nResult:\r\n{                               (json object)\r\n  \"loaded\" : true|false,        (boolean) True if the mempool is fully loaded\r\n  \"size\" : n,                   (numeric) Current tx count\r\n  \"bytes\" : n,                  (numeric) Sum of all virtual transaction sizes as defined in BIP 141. Differs from actual serialized size because witness data is discounted\r\n  \"usage\" : n,                  (numeric) Total memory usage for the mempool\r\n  \"total_fee\" : n,              (numeric) Total fees for the mempool in BTC, ignoring modified fees through prioritizetransaction\r\n  \"maxmempool\" : n,             (numeric) Maximum memory usage for the mempool\r\n  \"mempoolminfee\" : n,          (numeric) Minimum fee rate in BTC/kvB for tx to be accepted. Is the maximum of minrelaytxfee and minimum mempool fee\r\n  \"minrelaytxfee\" : n,          (numeric) Current minimum relay fee for transactions\r\n  \"unbroadcastcount\" : n,       (numeric) Current number of transactions that haven't passed initial broadcast yet\r\n  \"fee_histogram\" : {           (json object)\r\n    \"fee_rate_groups\" : {       (json object)\r\n      \"<fee_rate_group>\" : {    (json object) Fee rate group named by its lower bound (in sat/vB), identical to the \"from\" field below\r\n        \"size\" : n,             (numeric) Cumulative size of all transactions in the fee rate group (in vBytes)\r\n        \"count\" : n,            (numeric) Number of transactions in the fee rate group\r\n        \"fees\" : n,             (numeric) Cumulative fees of all transactions in the fee rate group (in sat)\r\n        \"from\" : n             (numeric) Group contains transactions with fee rates equal or greater than this value (in sat/vB)\r\n      },\r\n      ...\r\n    },\r\n    \"total_fees\" : n            (numeric) Total available fees in mempool (in sat)\r\n  }\r\n}\r\n\r\nExamples:\r\n> bitcoin-cli getmempoolinfo\r\n> bitcoin-cli getmempoolinfo \"[0, 1, 2, 3, 4, 5, 6, 7, 8, 10, 12, 14, 17, 20, 25, 30, 40, 50, 60, 70, 80, 100, 120, 140, 170, 200]\"\r\n> curl --user myusername --data-binary '{\"jsonrpc\": \"1.0\", \"id\": \"curltest\", \"method\": \"getmempoolinfo\", \"params\": []}' -H 'content-type: text/plain;' http://127.0.0.1:8332/\r\n> curl --user myusername --data-binary '{\"jsonrpc\": \"1.0\", \"id\": \"curltest\", \"method\": \"getmempoolinfo\", \"params\": [[0, 1, 2, 3, 4, 5, 6, 7, 8, 10, 12, 14, 17, 20, 25, 30, 40, 50, 60, 70, 80, 100, 120, 140, 170, 200]]}' -H 'content-type: text/plain;' http://127.0.0.1:8332/\r\n```\r\n\r\n#### Output on testnet (2022-07-09)\r\n\r\n```bash\r\n./bitcoin-cli -testnet -rpcuser=test -rpcpassword=test getmempoolinfo \"[0, 1, 2, 3, 4, 5, 6, 7, 8, 10, 12, 14, 17, 20, 25, 30, 40, 50, 60, 70, 80, 100, 120, 140, 170, 200]\"\r\n```\r\n\r\n<details>\r\n  <summary>JSON output</summary>\r\n\r\n  ```json\r\n{\r\n  \"loaded\": true,\r\n  \"size\": 10,\r\n  \"bytes\": 2652,\r\n  \"usage\": 13504,\r\n  \"total_fee\": 0.00363010,\r\n  \"maxmempool\": 300000000,\r\n  \"mempoolminfee\": 0.00001000,\r\n  \"minrelaytxfee\": 0.00001000,\r\n  \"unbroadcastcount\": 0,\r\n  \"fee_histogram\": {\r\n    \"fee_rate_groups\": {\r\n      \"0\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 0\r\n      },\r\n      \"1\": {\r\n        \"size\": 403,\r\n        \"count\": 2,\r\n        \"fees\": 403,\r\n        \"from\": 1\r\n      },\r\n      \"2\": {\r\n        \"size\": 554,\r\n        \"count\": 2,\r\n        \"fees\": 561,\r\n        \"from\": 2\r\n      },\r\n      \"3\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 3\r\n      },\r\n      \"4\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 4\r\n      },\r\n      \"5\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 5\r\n      },\r\n      \"6\": {\r\n        \"size\": 255,\r\n        \"count\": 1,\r\n        \"fees\": 1345,\r\n        \"from\": 6\r\n      },\r\n      \"7\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 7\r\n      },\r\n      \"8\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 8\r\n      },\r\n      \"10\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 10\r\n      },\r\n      \"12\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 12\r\n      },\r\n      \"14\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 14\r\n      },\r\n      \"17\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 17\r\n      },\r\n      \"20\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 20\r\n      },\r\n      \"25\": {\r\n        \"size\": 352,\r\n        \"count\": 1,\r\n        \"fees\": 9505,\r\n        \"from\": 25\r\n      },\r\n      \"30\": {\r\n        \"size\": 144,\r\n        \"count\": 1,\r\n        \"fees\": 4520,\r\n        \"from\": 30\r\n      },\r\n      \"40\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 40\r\n      },\r\n      \"50\": {\r\n        \"size\": 374,\r\n        \"count\": 1,\r\n        \"fees\": 20000,\r\n        \"from\": 50\r\n      },\r\n      \"60\": {\r\n        \"size\": 351,\r\n        \"count\": 1,\r\n        \"fees\": 23937,\r\n        \"from\": 60\r\n      },\r\n      \"70\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 70\r\n      },\r\n      \"80\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 80\r\n      },\r\n      \"100\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 100\r\n      },\r\n      \"120\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 120\r\n      },\r\n      \"140\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 140\r\n      },\r\n      \"170\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 170\r\n      },\r\n      \"200\": {\r\n        \"size\": 219,\r\n        \"count\": 1,\r\n        \"fees\": 302739,\r\n        \"from\": 200\r\n      }\r\n    },\r\n    \"total_fees\": 363010\r\n  }\r\n}\r\n```\r\n</details>\r\n\r\n#### Various inputs\r\n\r\n```bash\r\n./bitcoin-cli -testnet -rpcuser=test -rpcpassword=test getmempoolinfo \"[0]\"       # OK, one fee rate group covering all possible transaction fee rates (i.e. `>=0`); total_fee = fee_histogram.total_fees\r\n./bitcoin-cli -testnet -rpcuser=test -rpcpassword=test getmempoolinfo \"[-1]\"      # reports: Non-negative values are expected\r\n./bitcoin-cli -testnet -rpcuser=test -rpcpassword=test getmempoolinfo \"[0,0]\"     # reports: Strictly increasing values are expected\r\n./bitcoin-cli -testnet -rpcuser=test -rpcpassword=test getmempoolinfo \"[0,1,0]\"   # reports: Strictly increasing values are expected\r\n./bitcoin-cli -testnet -rpcuser=test -rpcpassword=test getmempoolinfo \"[0, 1000000000000000000000000000000000]\" # reports: JSON integer out of range\r\n./bitcoin-cli -testnet -rpcuser=test -rpcpassword=test getmempoolinfo '[1.2,2,3]' # reports: JSON integer out of range\r\n./bitcoin-cli -testnet -rpcuser=test -rpcpassword=test getmempoolinfo '[\"2\"]'     # reports: Error parsing JSON: ['2']\r\n```",
          "user": {
            "login": "kiminuo",
            "id": 58662979,
            "node_id": "MDQ6VXNlcjU4NjYyOTc5",
            "avatar_url": "https://avatars.githubusercontent.com/u/58662979?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/kiminuo",
            "html_url": "https://github.com/kiminuo",
            "followers_url": "https://api.github.com/users/kiminuo/followers",
            "following_url": "https://api.github.com/users/kiminuo/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/kiminuo/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/kiminuo/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/kiminuo/subscriptions",
            "organizations_url": "https://api.github.com/users/kiminuo/orgs",
            "repos_url": "https://api.github.com/users/kiminuo/repos",
            "events_url": "https://api.github.com/users/kiminuo/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/kiminuo/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 71,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21422",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/21422",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/21422.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/21422.patch"
          },
          "closed_at": "2023-03-20T14:42:45Z",
          "created_at": "2021-03-12T10:32:00Z",
          "updated_at": "2023-07-08T08:02:40Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1611989703,
      "node_id": "IC_kwDOABII585gFQLH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1611989703",
      "actor": {
        "login": "lontivero",
        "id": 127973,
        "node_id": "MDQ6VXNlcjEyNzk3Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127973?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/lontivero",
        "html_url": "https://github.com/lontivero",
        "followers_url": "https://api.github.com/users/lontivero/followers",
        "following_url": "https://api.github.com/users/lontivero/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/lontivero/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/lontivero/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/lontivero/subscriptions",
        "organizations_url": "https://api.github.com/users/lontivero/orgs",
        "repos_url": "https://api.github.com/users/lontivero/repos",
        "events_url": "https://api.github.com/users/lontivero/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/lontivero/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-28T19:31:41Z",
      "updated_at": "2023-06-28T19:31:41Z",
      "author_association": "CONTRIBUTOR",
      "body": "Given the current fee rate estimation algorithm has no prediction power when the mempool conditions change, it is common to pay too little or too much, what is especially true while we increase the confirmation target.  \r\n   \r\nIn Wasabi we use the feerate histogram to \"correct\" the fee rate estimations provided by our node and to keep them between an acceptable range. There are many things that can be done but we just want to be sure our users participating in coinjoins don't pay more than everybody else and also that they don't pay too little and are among the top 200Mb txs, just to reduce the chances of been purged.\r\n\r\nhttps://github.com/zkSNACKs/WalletWasabi/blob/6a7c8965cec291f41aab328a684ab8105653a8ac/WalletWasabi/Extensions/RPCClientExtensions.cs#L147\r\n\r\nI think that something like this is not risky and it can improves the estimations by making them \"safer\". Basically, the idea is to mimic what we humans do: look at the mempool and if the txs that pay more are paying 50s/b don't pay 100s/b because it makes no sense, or at least it doesn't in most of the cases. ",
      "user": {
        "login": "lontivero",
        "id": 127973,
        "node_id": "MDQ6VXNlcjEyNzk3Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127973?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/lontivero",
        "html_url": "https://github.com/lontivero",
        "followers_url": "https://api.github.com/users/lontivero/followers",
        "following_url": "https://api.github.com/users/lontivero/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/lontivero/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/lontivero/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/lontivero/subscriptions",
        "organizations_url": "https://api.github.com/users/lontivero/orgs",
        "repos_url": "https://api.github.com/users/lontivero/repos",
        "events_url": "https://api.github.com/users/lontivero/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/lontivero/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/27995#issuecomment-1611989703",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27995"
    },
    {
      "event": "subscribed",
      "id": 9669120985,
      "node_id": "SE_lADOABII585qD5irzwAAAAJAUxPZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9669120985",
      "actor": {
        "login": "MarnixCroes",
        "id": 93143998,
        "node_id": "U_kgDOBY1Dvg",
        "avatar_url": "https://avatars.githubusercontent.com/u/93143998?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarnixCroes",
        "html_url": "https://github.com/MarnixCroes",
        "followers_url": "https://api.github.com/users/MarnixCroes/followers",
        "following_url": "https://api.github.com/users/MarnixCroes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarnixCroes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarnixCroes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarnixCroes/subscriptions",
        "organizations_url": "https://api.github.com/users/MarnixCroes/orgs",
        "repos_url": "https://api.github.com/users/MarnixCroes/repos",
        "events_url": "https://api.github.com/users/MarnixCroes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarnixCroes/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-28T19:55:18Z"
    },
    {
      "event": "unsubscribed",
      "id": 9669175496,
      "node_id": "UE_lADOABII585qD5irzwAAAAJAU-jI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9669175496",
      "actor": {
        "login": "joostjager",
        "id": 4638168,
        "node_id": "MDQ6VXNlcjQ2MzgxNjg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4638168?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/joostjager",
        "html_url": "https://github.com/joostjager",
        "followers_url": "https://api.github.com/users/joostjager/followers",
        "following_url": "https://api.github.com/users/joostjager/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/joostjager/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/joostjager/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/joostjager/subscriptions",
        "organizations_url": "https://api.github.com/users/joostjager/orgs",
        "repos_url": "https://api.github.com/users/joostjager/repos",
        "events_url": "https://api.github.com/users/joostjager/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/joostjager/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-28T20:00:40Z"
    },
    {
      "event": "commented",
      "id": 1614527967,
      "node_id": "IC_kwDOABII585gO73f",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1614527967",
      "actor": {
        "login": "ErikDeSmedt",
        "id": 2528683,
        "node_id": "MDQ6VXNlcjI1Mjg2ODM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2528683?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ErikDeSmedt",
        "html_url": "https://github.com/ErikDeSmedt",
        "followers_url": "https://api.github.com/users/ErikDeSmedt/followers",
        "following_url": "https://api.github.com/users/ErikDeSmedt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ErikDeSmedt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ErikDeSmedt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ErikDeSmedt/subscriptions",
        "organizations_url": "https://api.github.com/users/ErikDeSmedt/orgs",
        "repos_url": "https://api.github.com/users/ErikDeSmedt/repos",
        "events_url": "https://api.github.com/users/ErikDeSmedt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ErikDeSmedt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-30T11:35:55Z",
      "updated_at": "2023-06-30T11:35:55Z",
      "author_association": "NONE",
      "body": "The highest paying transactions that are 'stuck' in the mempool are useful for fee estimation. For reasonably small transactions the fee is just below what you need to pay to get included.\r\n\r\nThis method isn't affected by users who are over-paying and is robust against miners being paid out-of-band.\r\n\r\nHowever, it does respond slowly to changes in mempool conditions",
      "user": {
        "login": "ErikDeSmedt",
        "id": 2528683,
        "node_id": "MDQ6VXNlcjI1Mjg2ODM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2528683?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ErikDeSmedt",
        "html_url": "https://github.com/ErikDeSmedt",
        "followers_url": "https://api.github.com/users/ErikDeSmedt/followers",
        "following_url": "https://api.github.com/users/ErikDeSmedt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ErikDeSmedt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ErikDeSmedt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ErikDeSmedt/subscriptions",
        "organizations_url": "https://api.github.com/users/ErikDeSmedt/orgs",
        "repos_url": "https://api.github.com/users/ErikDeSmedt/repos",
        "events_url": "https://api.github.com/users/ErikDeSmedt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ErikDeSmedt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/27995#issuecomment-1614527967",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27995"
    },
    {
      "event": "commented",
      "id": 1614639756,
      "node_id": "IC_kwDOABII585gPXKM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1614639756",
      "actor": {
        "login": "lontivero",
        "id": 127973,
        "node_id": "MDQ6VXNlcjEyNzk3Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127973?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/lontivero",
        "html_url": "https://github.com/lontivero",
        "followers_url": "https://api.github.com/users/lontivero/followers",
        "following_url": "https://api.github.com/users/lontivero/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/lontivero/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/lontivero/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/lontivero/subscriptions",
        "organizations_url": "https://api.github.com/users/lontivero/orgs",
        "repos_url": "https://api.github.com/users/lontivero/repos",
        "events_url": "https://api.github.com/users/lontivero/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/lontivero/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-30T13:17:09Z",
      "updated_at": "2023-06-30T13:17:09Z",
      "author_association": "CONTRIBUTOR",
      "body": "Fee rates are a everyday discussion in many teams I guess. This is from today's internal discussion about a problem in our UI regarding fees:\r\n![image](https://github.com/bitcoin/bitcoin/assets/127973/78b99290-9620-419c-9cf0-6c47817d6003)\r\n",
      "user": {
        "login": "lontivero",
        "id": 127973,
        "node_id": "MDQ6VXNlcjEyNzk3Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127973?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/lontivero",
        "html_url": "https://github.com/lontivero",
        "followers_url": "https://api.github.com/users/lontivero/followers",
        "following_url": "https://api.github.com/users/lontivero/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/lontivero/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/lontivero/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/lontivero/subscriptions",
        "organizations_url": "https://api.github.com/users/lontivero/orgs",
        "repos_url": "https://api.github.com/users/lontivero/repos",
        "events_url": "https://api.github.com/users/lontivero/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/lontivero/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/27995#issuecomment-1614639756",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27995"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "kristapsk",
        "id": 4500994,
        "node_id": "MDQ6VXNlcjQ1MDA5OTQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4500994?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kristapsk",
        "html_url": "https://github.com/kristapsk",
        "followers_url": "https://api.github.com/users/kristapsk/followers",
        "following_url": "https://api.github.com/users/kristapsk/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kristapsk/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kristapsk/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kristapsk/subscriptions",
        "organizations_url": "https://api.github.com/users/kristapsk/orgs",
        "repos_url": "https://api.github.com/users/kristapsk/repos",
        "events_url": "https://api.github.com/users/kristapsk/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kristapsk/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-03T14:36:26Z",
      "updated_at": "2023-07-03T14:36:26Z",
      "source": {
        "issue": {
          "id": 1786286692,
          "node_id": "I_kwDOA0xxnc5qeJJk",
          "url": "https://api.github.com/repos/zkSNACKs/WalletWasabi/issues/10969",
          "repository_url": "https://api.github.com/repos/zkSNACKs/WalletWasabi",
          "labels_url": "https://api.github.com/repos/zkSNACKs/WalletWasabi/issues/10969/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/zkSNACKs/WalletWasabi/issues/10969/comments",
          "events_url": "https://api.github.com/repos/zkSNACKs/WalletWasabi/issues/10969/events",
          "html_url": "https://github.com/zkSNACKs/WalletWasabi/issues/10969",
          "number": 10969,
          "state": "open",
          "state_reason": null,
          "title": "Not enough fee rate options",
          "body": "The backend sometimes returns only one or two few rate options for different priorities. Unless the mempool is very empty, there should be always more.",
          "user": {
            "login": "MaxHillebrand",
            "id": 30683012,
            "node_id": "MDQ6VXNlcjMwNjgzMDEy",
            "avatar_url": "https://avatars.githubusercontent.com/u/30683012?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/MaxHillebrand",
            "html_url": "https://github.com/MaxHillebrand",
            "followers_url": "https://api.github.com/users/MaxHillebrand/followers",
            "following_url": "https://api.github.com/users/MaxHillebrand/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/MaxHillebrand/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/MaxHillebrand/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/MaxHillebrand/subscriptions",
            "organizations_url": "https://api.github.com/users/MaxHillebrand/orgs",
            "repos_url": "https://api.github.com/users/MaxHillebrand/repos",
            "events_url": "https://api.github.com/users/MaxHillebrand/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/MaxHillebrand/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 4,
          "created_at": "2023-07-03T14:23:51Z",
          "updated_at": "2023-09-19T20:25:45Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1627397920,
      "node_id": "IC_kwDOABII585hAB8g",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1627397920",
      "actor": {
        "login": "WaynePerth74",
        "id": 65166064,
        "node_id": "MDQ6VXNlcjY1MTY2MDY0",
        "avatar_url": "https://avatars.githubusercontent.com/u/65166064?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/WaynePerth74",
        "html_url": "https://github.com/WaynePerth74",
        "followers_url": "https://api.github.com/users/WaynePerth74/followers",
        "following_url": "https://api.github.com/users/WaynePerth74/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/WaynePerth74/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/WaynePerth74/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/WaynePerth74/subscriptions",
        "organizations_url": "https://api.github.com/users/WaynePerth74/orgs",
        "repos_url": "https://api.github.com/users/WaynePerth74/repos",
        "events_url": "https://api.github.com/users/WaynePerth74/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/WaynePerth74/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-08T16:47:21Z",
      "updated_at": "2023-07-08T16:47:21Z",
      "author_association": "NONE",
      "body": "free rate meed to be in union or better tet need to be unifited  i would recomend dev team implament  someting simulor to mempool.spoce \r\n\r\nall so on asidenote i request dev team to reintraduce mining funchion to bitcoin core but have it mainly used for asic miners as cpu and gpu mining of bitcoin isnt safisent \r\n",
      "user": {
        "login": "WaynePerth74",
        "id": 65166064,
        "node_id": "MDQ6VXNlcjY1MTY2MDY0",
        "avatar_url": "https://avatars.githubusercontent.com/u/65166064?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/WaynePerth74",
        "html_url": "https://github.com/WaynePerth74",
        "followers_url": "https://api.github.com/users/WaynePerth74/followers",
        "following_url": "https://api.github.com/users/WaynePerth74/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/WaynePerth74/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/WaynePerth74/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/WaynePerth74/subscriptions",
        "organizations_url": "https://api.github.com/users/WaynePerth74/orgs",
        "repos_url": "https://api.github.com/users/WaynePerth74/repos",
        "events_url": "https://api.github.com/users/WaynePerth74/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/WaynePerth74/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/27995#issuecomment-1627397920",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27995"
    },
    {
      "event": "labeled",
      "id": 9901014791,
      "node_id": "LE_lADOABII585qD5irzwAAAAJOJX8H",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9901014791",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-24T14:30:53Z",
      "label": {
        "name": "Brainstorming",
        "color": "ebd775"
      }
    },
    {
      "event": "labeled",
      "id": 9901014807,
      "node_id": "LE_lADOABII585qD5irzwAAAAJOJX8X",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9901014807",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-24T14:30:53Z",
      "label": {
        "name": "TX fees and policy",
        "color": "5319e7"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-31T08:36:28Z",
      "updated_at": "2023-08-31T08:36:28Z",
      "source": {
        "issue": {
          "id": 1873415502,
          "node_id": "PR_kwDOABII585ZIF0m",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28368",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28368/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28368/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28368/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28368",
          "number": 28368,
          "state": "closed",
          "state_reason": null,
          "title": "Fee Estimator updates from Validation Interface/CScheduler thread",
          "body": "This is an attempt to  #11775 \r\n\r\nThis Pr will enable fee estimator to listen to ValidationInterface notifications to process new transactions added and removed from the mempool.\r\n\r\nThis PR includes the following changes:\r\n\r\n- Added a new callback to the Validation Interface `MempoolTransactionsRemovedForConnectedBlock`, which notifies listeners about the transactions that have been removed due to a new block being connected, along with the height at which the transactions were removed.\r\n- Modified the `TransactionAddedToMempool` callback parameter to include additional information about the transaction needed for fee estimation.\r\n- Updated `CBlockPolicyEstimator` to process transactions using` CTransactionRef` instead of `CTxMempoolEntry.`\r\n- Implemented the `CValidationInterface` interface in `CBlockPolicyEstimater` and overridden the `TransactionAddedToMempool`, `TransactionRemovedFromMempool`, and `MempoolTransactionsRemovedForConnectedBlock` methods to receive updates from their notifications.\r\n\r\nPrior to this PR, the fee estimator updates from the mempool, i.e whenever a new block is connected all transactions in the block that are in our mempool are going to be removed using the `removeForBlock` function in `txmempool.cpp`. \r\n\r\nThis removal triggered updates to the fee estimator. As a result, the fee estimator would block mempool's `cs` until it finished updating every time a new block was connected.\r\nInstead of being blocked only on mempool tx removal, we were blocking on both tx removal and fee estimator updating.\r\nIf we want to further improve fee estimation, or add heavy-calulation steps to it, it is currently not viable as we would be slowing down block relay in the process\r\n\r\nThis PR is smaller in terms of the changes made compared to #11775, as it focuses solely on enabling fee estimator updates from the validationInterface/cscheduler thread notifications.\r\n\r\nI have not split the validation interface because, as I understand it, the rationale behind the split in #11775 was to have `MempoolInterface` signals come from the mempool and `CValidationInterface` events come from validation. I believe this separation can be achieved in a separate refactoring PR when the need arises.\r\n\r\nAlso left out some commits from #11775\r\n- Some refactoring which are no longer needed.\r\n- Handle reorgs much better in fee estimator. \r\n- Track witness hash malleation in fee estimator \r\n\r\nI believe they are a separate change that can come in a follow-up after this.\r\n\r\n",
          "user": {
            "login": "ismaelsadeeq",
            "id": 48946461,
            "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
            "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ismaelsadeeq",
            "html_url": "https://github.com/ismaelsadeeq",
            "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
            "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
            "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
            "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
            "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 82428251,
              "node_id": "MDU6TGFiZWw4MjQyODI1MQ==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/TX%20fees%20and%20policy",
              "name": "TX fees and policy",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 1648013533,
              "node_id": "MDU6TGFiZWwxNjQ4MDEzNTMz",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Review%20club",
              "name": "Review club",
              "description": "",
              "color": "0052cc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 15,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28368",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28368",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28368.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28368.patch"
          },
          "closed_at": "2023-12-01T20:07:35Z",
          "created_at": "2023-08-30T10:45:22Z",
          "updated_at": "2023-12-05T02:15:30Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1742684817,
      "node_id": "IC_kwDOABII585n30KR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1742684817",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-02T09:26:07Z",
      "updated_at": "2023-11-06T11:58:52Z",
      "author_association": "MEMBER",
      "body": "Concept ACK\r\n\r\nOne approach to implementing a package-aware mempool-based fee estimator (Edit after #28762)\r\n\r\n### Process\r\nWhenever we want to estimate fees for a confirmation target we:\r\n1. Generate the fee rate histogram with the mempool transactions.\r\n2. Aggregate the fee rates and their respective vsize values until reaching the desired confirmation target in terms of blocks:\r\n    i) For a 1 block confirmation target, aggregate the highest fee rates until the sum of their vsize's equals the maximum block weight.\r\n    e.g For a 3-block confirmation target, do the step above thrice using the third aggregated fee rates.\r\n3. Calculate the median fee rate of the confirmation target aggregated fee rates.\r\n4. Take the median fee rate as the confirmation target fee rate.\r\n\r\n### Sanity check\r\n* Whenever a new block is connected, we create a new block template which will give us the list of transactions we expect to be included in the new block. This can be used for comparison (as a sanity check) vs miner-generated blocks, to give us more confidence that our mempool somewhat-closely resembles miner mempools and can be somewhat relied upon for fee estimation:\r\n\r\n    * Tracking the number of times we expect a transaction to be mined and it's not.\r\n    * Track the number of times a high fee rate transaction is not confirmed. A transaction will be eligible to be high fee only if it's greater than e.g. the median fee rate of transactions in the newly connected block?\r\n\r\n* To determine whether node policy diverges from the network's aggregate policy we will:\r\n    1. Check that transactions we expect to be confirmed and are not (e.g. for up to three blocks) are below an as-yet undetermined threshold (10%?).\r\n    2. Check our mempool has seen another as-yet undetermined threshold % of the transactions in the last `n` (3?) blocks.\r\n\r\n    If both conditions are met, high fee-rate transactions in our mempool are getting confirmed, our mempool has likely not diverged from the global network aggregate policy.\r\n\r\n* Before generating any fee rate histogram we will:\r\n    1. exclude high fee rate transactions that failed to be included in block (e.g., three times) with all their descendants.\r\n\r\n\r\n## Implementation\r\n\r\n* Modify the `mini_miner` block-building algorithm to generate a fee rate histogram after building a block template (fee rate histogram is an array of fee rates along with their corresponding sizes, arranged in descending order, the higher fee rate listed first with their corresponding vsize)\r\n\r\n#### Naive approach of generating fee rate histogram\r\n\r\n* Manually generate mempool transactions `manual_entries` and their descendants `descendant_caches` from `CTxMempool`, this has the downside of locking and `mempool_cs` while we go through the whole mempool transactions and their descendant.\r\n\r\n* Use `manual_entries` and `descendant_caches` to get fee rate histogram with mini miner.\r\n\r\n### Improved approach of generating fee rate histogram\r\n\r\n* Implement a mempool-based fee estimator that will subscribe to the validation interface (similar to the one done in `CBlockPolicyEstimator` #28368)\r\n\r\n* Create a parallel (lightweight) \"mempool\" of unconfirmed transactions with their fee rates, and descendants.\r\n\r\n* Use the lightweight mempool to get fee rate histogram from mini miner.\r\n\r\n\r\n* Modify mini miner to build a block template with a target visize and return the transactions of the block template it built.\r\n\r\n* We can use either the [Naive](#naive-approach-of-generating-fee-rate-histogram) or [Improved](#improved-approach-of-generating-fee-rate-histogram)  appraoch to get the mempool transactions `manual_entries` and their descendants `descendant_caches` and generate a `DEFAULT_BLOCK_MAX_WEIGHT` block template.\r\n\r\n## Questions\r\n\r\n1. Whenever we estimate fees with the naive approach we generate a fee rate histogram with the whole mempool, we are locking mempool `cs` and creating `manual_entries` and `descendant_caches`, is that efficient?\r\n\r\n2. Every time a new block is connected we generate a block template to perform a sanity check with the naive approach this locks mempool `cs` to create `manual_entries` and `descendant_caches`, is that efficient? \r\n\r\nWe are building a normal block template with the default limit for this, the sanity checks execute in the background.\r\n\r\nIf this locking issue is a concern, to solve it I think the mempool-based fee estimator will have to implement the improved approach, which has the downside of creating another lightweight mempool, for a resource-constrained node, we can provide the option of turning it off?\r\n\r\nThe lightweight mempool DS might just be the cache of the mini miner constructor\r\n\r\n```\r\nconst std::vector<MiniMinerMempoolEntry>& manual_entries,\r\nconst std::map<Txid, std::set<Txid>>& descendant_caches\r\n```\r\n\r\nMiniMinerMempoolEntry DS https://github.com/bitcoin/bitcoin/blob/f2cc718e6920b8c45be107e2eb5ac84c4b839e50/src/node/mini_miner.h#L25\r\n\r\n\r\nThis work is the result of some discussions with @willcl-ark @glozow\r\n\r\nI would like to have feedback on the approaches before creating a PR.",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/27995#issuecomment-1742684817",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27995"
    },
    {
      "event": "mentioned",
      "id": 10523888005,
      "node_id": "MEE_lADOABII585qD5irzwAAAAJzRcmF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10523888005",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-02T09:26:08Z"
    },
    {
      "event": "subscribed",
      "id": 10523888011,
      "node_id": "SE_lADOABII585qD5irzwAAAAJzRcmL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10523888011",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-02T09:26:08Z"
    },
    {
      "event": "mentioned",
      "id": 10523888027,
      "node_id": "MEE_lADOABII585qD5irzwAAAAJzRcmb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10523888027",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-02T09:26:08Z"
    },
    {
      "event": "subscribed",
      "id": 10523888036,
      "node_id": "SE_lADOABII585qD5irzwAAAAJzRcmk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10523888036",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-02T09:26:08Z"
    },
    {
      "event": "mentioned",
      "id": 10523888051,
      "node_id": "MEE_lADOABII585qD5irzwAAAAJzRcmz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10523888051",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-02T09:26:08Z"
    },
    {
      "event": "subscribed",
      "id": 10523888064,
      "node_id": "SE_lADOABII585qD5irzwAAAAJzRcnA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10523888064",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-02T09:26:08Z"
    },
    {
      "event": "commented",
      "id": 1856162406,
      "node_id": "IC_kwDOABII585uospm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1856162406",
      "actor": {
        "login": "LaurentMT",
        "id": 5204318,
        "node_id": "MDQ6VXNlcjUyMDQzMTg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5204318?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LaurentMT",
        "html_url": "https://github.com/LaurentMT",
        "followers_url": "https://api.github.com/users/LaurentMT/followers",
        "following_url": "https://api.github.com/users/LaurentMT/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LaurentMT/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LaurentMT/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LaurentMT/subscriptions",
        "organizations_url": "https://api.github.com/users/LaurentMT/orgs",
        "repos_url": "https://api.github.com/users/LaurentMT/repos",
        "events_url": "https://api.github.com/users/LaurentMT/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LaurentMT/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-14T16:28:47Z",
      "updated_at": "2023-12-14T16:28:47Z",
      "author_association": "NONE",
      "body": "A minimalist implementation of the second idea (\"look at the rate and feerate of transactions entering the mempool currently\"): https://code.samourai.io/oxt/one_dollar_fee_estimator\r\n\r\nFrom our observations, the estimator behaves rather well under current network conditions but as noted in the original post, no fee estimator should be used automatically without safeguards put in place. \r\n",
      "user": {
        "login": "LaurentMT",
        "id": 5204318,
        "node_id": "MDQ6VXNlcjUyMDQzMTg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5204318?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LaurentMT",
        "html_url": "https://github.com/LaurentMT",
        "followers_url": "https://api.github.com/users/LaurentMT/followers",
        "following_url": "https://api.github.com/users/LaurentMT/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LaurentMT/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LaurentMT/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LaurentMT/subscriptions",
        "organizations_url": "https://api.github.com/users/LaurentMT/orgs",
        "repos_url": "https://api.github.com/users/LaurentMT/repos",
        "events_url": "https://api.github.com/users/LaurentMT/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LaurentMT/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/27995#issuecomment-1856162406",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27995"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "kiminuo",
        "id": 58662979,
        "node_id": "MDQ6VXNlcjU4NjYyOTc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/58662979?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kiminuo",
        "html_url": "https://github.com/kiminuo",
        "followers_url": "https://api.github.com/users/kiminuo/followers",
        "following_url": "https://api.github.com/users/kiminuo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kiminuo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kiminuo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kiminuo/subscriptions",
        "organizations_url": "https://api.github.com/users/kiminuo/orgs",
        "repos_url": "https://api.github.com/users/kiminuo/repos",
        "events_url": "https://api.github.com/users/kiminuo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kiminuo/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-22T07:57:35Z",
      "updated_at": "2024-04-22T07:57:35Z",
      "source": {
        "issue": {
          "id": 2255683825,
          "node_id": "PR_kwDOA0xxnc5tTi4n",
          "url": "https://api.github.com/repos/zkSNACKs/WalletWasabi/issues/12912",
          "repository_url": "https://api.github.com/repos/zkSNACKs/WalletWasabi",
          "labels_url": "https://api.github.com/repos/zkSNACKs/WalletWasabi/issues/12912/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/zkSNACKs/WalletWasabi/issues/12912/comments",
          "events_url": "https://api.github.com/repos/zkSNACKs/WalletWasabi/issues/12912/events",
          "html_url": "https://github.com/zkSNACKs/WalletWasabi/pull/12912",
          "number": 12912,
          "state": "open",
          "state_reason": null,
          "title": "[draft] 10 minute confirmation target",
          "body": "Fixes #11358\r\nDepends on #12910\r\n\r\n## Introduction\r\n\r\nThe problem here is that `conf_target` in `estimatesmartfee conf_target ( \"estimate_mode\" )` [cannot be](https://github.com/bitcoin/bitcoin/blob/67c0d93982ad214f5e0c9509e9dc3d6d792ad97c/src/policy/fees.cpp#L884-L885) `1` because:\r\n\r\n>  The request target will be clamped between 2 and the highest target fee estimation is able to return based on how long it has been running.\r\n\r\n\\[[Source](https://developer.bitcoin.org/reference/rpc/estimatesmartfee.html)\\]\r\n\r\n\r\n## Testing\r\n\r\nGiven that RegTest does not really have history and thus it is handles [specially](https://github.com/zkSNACKs/WalletWasabi/blob/9786a249e3685978a823eb891831f00062fe3dc9/WalletWasabi/Extensions/RPCClientExtensions.cs#L66-L68), we need to test `RegTest` as well.\r\n\r\n## Resources\r\n\r\n* For anyone wondering why `smart` in `estimatesmartfee`. There used to be `estimatefee` which was superseded by `estimatesmartfee` in https://github.com/bitcoin/bitcoin/pull/11031.\r\n* https://github.com/bitcoin/bitcoin/issues/27995 - *Improving fee estimation accuracy*\r\n* https://bitcoin.stackexchange.com/questions/121384/why-does-bitcoin-cores-estimatesmartfee-return-a-higher-feerate-than-necessar\r\n    > The Bitcoin Core fee estimator does not aim to provide the minimum possible feerate to be included within `N` blocks. It aims to provide the minimum feerate such as one has a high degree of confidence the transactions will be mined within `N` blocks.\r\n    >\r\n    > It therefore tends to often give a higher estimate than appears to have been necessary on any particular transaction. But it also provides a guarantee that over time a high percentage of the transactions created with the recommended feerate will have been mined within the required N blocks.\r\n* https://github.com/bitcoin/bitcoin/issues/27995 - *Improving fee estimation accuracy*\r\n    > [The estimator] is solely based on historical data (looking at how long mempool transactions take to confirm), it cannot react quickly to changing conditions.",
          "user": {
            "login": "kiminuo",
            "id": 58662979,
            "node_id": "MDQ6VXNlcjU4NjYyOTc5",
            "avatar_url": "https://avatars.githubusercontent.com/u/58662979?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/kiminuo",
            "html_url": "https://github.com/kiminuo",
            "followers_url": "https://api.github.com/users/kiminuo/followers",
            "following_url": "https://api.github.com/users/kiminuo/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/kiminuo/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/kiminuo/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/kiminuo/subscriptions",
            "organizations_url": "https://api.github.com/users/kiminuo/orgs",
            "repos_url": "https://api.github.com/users/kiminuo/repos",
            "events_url": "https://api.github.com/users/kiminuo/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/kiminuo/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 1811763363,
              "node_id": "MDU6TGFiZWwxODExNzYzMzYz",
              "url": "https://api.github.com/repos/zkSNACKs/WalletWasabi/labels/size/S",
              "name": "size/S",
              "color": "5D9801",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "COLLABORATOR",
          "locked": false,
          "comments": 2,
          "pull_request": {
            "url": "https://api.github.com/repos/zkSNACKs/WalletWasabi/pulls/12912",
            "html_url": "https://github.com/zkSNACKs/WalletWasabi/pull/12912",
            "diff_url": "https://github.com/zkSNACKs/WalletWasabi/pull/12912.diff",
            "patch_url": "https://github.com/zkSNACKs/WalletWasabi/pull/12912.patch"
          },
          "created_at": "2024-04-22T06:23:45Z",
          "updated_at": "2024-04-25T14:16:04Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 2077440875,
      "node_id": "IC_kwDOABII58570ztr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2077440875",
      "actor": {
        "login": "npslaney",
        "id": 80235663,
        "node_id": "MDQ6VXNlcjgwMjM1NjYz",
        "avatar_url": "https://avatars.githubusercontent.com/u/80235663?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/npslaney",
        "html_url": "https://github.com/npslaney",
        "followers_url": "https://api.github.com/users/npslaney/followers",
        "following_url": "https://api.github.com/users/npslaney/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/npslaney/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/npslaney/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/npslaney/subscriptions",
        "organizations_url": "https://api.github.com/users/npslaney/orgs",
        "repos_url": "https://api.github.com/users/npslaney/repos",
        "events_url": "https://api.github.com/users/npslaney/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/npslaney/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-25T14:52:48Z",
      "updated_at": "2024-04-25T14:52:48Z",
      "author_association": "NONE",
      "body": "Bitcoin's fee estimator is outdated for sure. For lightning channels, where some functionality depends on accurate fee estimation, fee spikes like what we had last week can make small channels that are typically usable unusable, and that effect lasts longer due to bitcoind's fee estimation lagging what it actually takes to get into the next block.\r\n\r\nLightning peers have to agree on fees to an extent to function. We would love to pipe in our own fee estimation, but we are stuck in a lowest common denominator problem with bitcoind's fee estimation the way it is currently. Making this better in bitcoind would go a long way to help (I understand not everyone will upgrade at once, but the incentive to upgrade will be great.)\r\n\r\nRight now mempool.space's fee estimation is very simple and open source, and is becoming the de facto standard for people sending one-off bitcoin transactions who have the ability / know to set a custom fee rate.\r\n\r\nIn the pre-taproot node example, a pre-taproot node is already on a previous version right? Or is not using mempool fee rates a hedge against future network policy divergence? I would support getting any of this more advanced estimation into bitcoin core, I may not be fully grasping the reasons to not make it default. ",
      "user": {
        "login": "npslaney",
        "id": 80235663,
        "node_id": "MDQ6VXNlcjgwMjM1NjYz",
        "avatar_url": "https://avatars.githubusercontent.com/u/80235663?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/npslaney",
        "html_url": "https://github.com/npslaney",
        "followers_url": "https://api.github.com/users/npslaney/followers",
        "following_url": "https://api.github.com/users/npslaney/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/npslaney/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/npslaney/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/npslaney/subscriptions",
        "organizations_url": "https://api.github.com/users/npslaney/orgs",
        "repos_url": "https://api.github.com/users/npslaney/repos",
        "events_url": "https://api.github.com/users/npslaney/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/npslaney/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/27995#issuecomment-2077440875",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27995"
    }
  ]
}