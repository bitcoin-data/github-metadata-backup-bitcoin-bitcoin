{
  "type": "issue",
  "issue": {
    "id": 3655407908,
    "node_id": "I_kwDOABII587Z4Rkk",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33928",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33928/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33928/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33928/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/33928",
    "number": 33928,
    "state": "closed",
    "state_reason": "completed",
    "title": "Fresh install version 30.0 bitcoin-cli kicks me out if adding rpc creds",
    "body": "I have already read this other [issue](https://github.com/bitcoin/bitcoin/issues/14627) and could not determine if it was relevant to mine.\n\nThis is a fresh install of Bitcoin Core 30.0 and I am using the conf file from Ministry of Nodes 2024 [guide](https://www.youtube.com/watch?v=l-JJzodH2l8&list=PLCRbH-IWlcW0g0HCrtI06_ZdVVolUWr39&index=6) MINUS the rpc creds because I am too lazy at the moment to do the rpcauth.py stuff and found that I can use the node normally until I add lines for rpcuser= and rpcpassword=, after which I lose the ability to run bitcoin-cli because my user doesn't have the rpc creds to access bitcoin-cli. I can delete the two lines, save the file and immediately regain access to bitcoin-cli. At no point have I stopped and started the node, just modifying the file. In the past, I know you are supposed to restart the node for changes to take effect so I'm really not sure what's going on. Can someone enlighten me to the new behavior?\n\nRunning on Debian 13.\n\nCurrent conf file:\n```\nserver=1\ntxindex=1\ndaemon=1\nrpcport=8332\nrpcbind=0.0.0.0\nrpcallowip=127.0.0.1\nrpcallowip=10.0.0.0/8\nrpcallowip=172.0.0.0/8\nrpcallowip=192.0.0.0/8\nzmqpubrawblock=tcp://0.0.0.0:28332\nzmqpubrawtx=tcp://0.0.0.0:28333\nzmqpubhashblock=tcp://0.0.0.0:28334\nwhitelist=127.0.0.1\ndisablewallet=1\ndbcache=2048\nmaxconnections=125\n```\n\n*Edit: did rpcauth.py and everything works as expected. I assume this means that the old user and pass lines are fully deprecated?",
    "user": {
      "login": "SeaSquared24",
      "id": 84783719,
      "node_id": "MDQ6VXNlcjg0NzgzNzE5",
      "avatar_url": "https://avatars.githubusercontent.com/u/84783719?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SeaSquared24",
      "html_url": "https://github.com/SeaSquared24",
      "followers_url": "https://api.github.com/users/SeaSquared24/followers",
      "following_url": "https://api.github.com/users/SeaSquared24/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/SeaSquared24/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/SeaSquared24/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/SeaSquared24/subscriptions",
      "organizations_url": "https://api.github.com/users/SeaSquared24/orgs",
      "repos_url": "https://api.github.com/users/SeaSquared24/repos",
      "events_url": "https://api.github.com/users/SeaSquared24/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/SeaSquared24/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "labels": [],
    "assignees": [],
    "author_association": "NONE",
    "locked": false,
    "comments": 1,
    "closed_at": "2025-11-23T07:59:29Z",
    "closed_by": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "created_at": "2025-11-23T02:33:27Z",
    "updated_at": "2025-11-23T08:00:50Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 3567596771,
      "node_id": "IC_kwDOABII587UpTTj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3567596771",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-23T07:59:29Z",
      "updated_at": "2025-11-23T08:00:50Z",
      "author_association": "MEMBER",
      "body": "Without `rpcuser` and `rpcpassword`, the RPC server creates an ephemeral user and password saved in `.cookie` in the datadir. `bitcoin-cli` will parse your `bitcoin.conf` for `rpcuser` and `rpcpassword` first, and if it doesn't find them, then it looks at `.cookie`. Since you haven't restarted Bitcoin Core yet, your new credentials aren't being used by the RPC server, but `bitcoin-cli` is trying to use them, hence an unauthorized error.\n\nWhen you use `rpcauth`, the password is not included directly in the `bitcoin.conf` so the RPC server still creates the cookie file which `bitcoin-cli` still uses in that mode. If you tried to specify the `rpcauth` credentials with `bitcoin-cli -rpcuser=<user> -rpcpassword=<password>`, it would also fail until you restart Bitcoin Core.",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/33928#issuecomment-3567596771",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33928"
    },
    {
      "event": "closed",
      "id": 21120224019,
      "node_id": "CE_lADOABII587Z4RkkzwAAAATq3QsT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21120224019",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-23T07:59:29Z"
    }
  ]
}