{
  "type": "issue",
  "issue": {
    "id": 3672835414,
    "node_id": "I_kwDOABII587a6wVW",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33964",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33964/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33964/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33964/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/33964",
    "number": 33964,
    "state": "closed",
    "state_reason": "completed",
    "title": "Startup crash on macOS with GCC 15.2: `std::source_location::file_name()` is `nullptr`",
    "body": "### Summary\n\n`bitcoind` crashes on startup when built with Homebrew `GCC 15.2.0 `on macOS (arm64).\nThe crash occurs inside `SourceLocationHasher::operator()` when constructing a `std::basic_string_view` from `std::source_location::file_name()`.\n\nThe same commit runs successfully when built with the default `AppleClang` toolchain.\n\n### Versions\n\n* Bitcoin Core: `master` at `808f1d972be35f4c66bdc30ab0f4060dab0c43c0`\n* Platform: macOS 26.1 (25B78), Apple M4 Pro (arm64)\n* CMake: `cmake version 4.2.0`\n* GCC: `gcc (Homebrew GCC 15.2.0) 15.2.0`\n* AppleClang: `AppleClang 17.0.0.17000404`\n\n### Build configuration (GCC 15.2, Debug)\n\n```sh\ngit checkout 808f1d972be35f4c66bdc30ab0f4060dab0c43c0\nrm -rfd build && cmake -B build -DENABLE_IPC=OFF -DCMAKE_BUILD_TYPE=Debug -DCMAKE_C_COMPILER=gcc -DCMAKE_CXX_COMPILER=g++ && cmake --build build -j$(nproc)             \nlldb ./build/bin/bitcoind -- -datadir=\"$HOME/Library/Application Support/Bitcoin\" -stopatheight=21129 -dbcache=1000 -printtoconsole=1\n```\n\n### Crash session\n\n```gdb\n(lldb) run\nProcess 4126 launched: '/Users/lorinc/IdeaProjects/bitcoin/build/bin/bitcoind' (arm64)\n2025-11-27T19:01:48Z Bitcoin Core version v30.99.0-b3e2ae7aaee5 (debug build)\n2025-11-27T19:01:48Z Using the 'arm_shani(1way;2way)' SHA256 implementation\n2025-11-27T19:01:48Z Default data directory /Users/lorinc/Library/Application Support/Bitcoin\n2025-11-27T19:01:48Z Using data directory /Users/lorinc/Library/Application Support/Bitcoin\n2025-11-27T19:01:48Z Config file: /Users/lorinc/Library/Application Support/Bitcoin/bitcoin.conf (not found, skipping)\n2025-11-27T19:01:48Z Command-line arg: datadir=\"/Users/lorinc/Library/Application Support/Bitcoin\"\n2025-11-27T19:01:48Z Command-line arg: dbcache=\"1000\"\n2025-11-27T19:01:48Z Command-line arg: printtoconsole=\"1\"\n2025-11-27T19:01:48Z Command-line arg: stopatheight=\"21129\"\n2025-11-27T19:01:48Z Using at most 125 automatic connections (1024 file descriptors available)\n2025-11-27T19:01:48Z scheduler thread start\n2025-11-27T19:01:48Z Binding RPC on address ::1 port 8332\n2025-11-27T19:01:48Z Binding RPC on address 127.0.0.1 port 8332\n2025-11-27T19:01:48Z Generated RPC authentication cookie /Users/lorinc/Library/Application Support/Bitcoin/.cookie\n2025-11-27T19:01:48Z Permissions used for cookie: rw-------\n2025-11-27T19:01:48Z Using random cookie authentication.\n2025-11-27T19:01:48Z Starting HTTP server with 16 worker threads\nProcess 4126 stopped\n* thread #1, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=1, address=0x0)\n    frame #0: 0x000000019fb3ca84 libsystem_platform.dylib`_platform_strlen + 4\nlibsystem_platform.dylib`_platform_strlen:\n->  0x19fb3ca84 <+4>:  ldr    q0, [x1]\n    0x19fb3ca88 <+8>:  adr    x3, 0x19fb3c9c0 ; ___lldb_unnamed_symbol_1804e09c0\n    0x19fb3ca8c <+12>: ldr    q2, [x3], #0x10\n    0x19fb3ca90 <+16>: and    x2, x0, #0xf\n(lldb) bt\nerror: libbitcoin_util.a(logging.cpp.o) 0x4000ec000000034a: DW_TAG_member '_M_local_buf' refers to type 0x00000000000fed84 which extends beyond the bounds of 0x4000ec0000000340\n* thread #1, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=1, address=0x0)\n  * frame #0: 0x000000019fb3ca84 libsystem_platform.dylib`_platform_strlen + 4\n    frame #1: 0x0000000100002600 bitcoind`std::char_traits<char>::length(__s=0x0000000000000000) at char_traits.h:393:25\n    frame #2: 0x00000001000086d0 bitcoind`std::basic_string_view<char, std::char_traits<char>>::basic_string_view(this=0x000000016fdfa1b8, __str=0x0000000000000000) at string_view:145:35\n    frame #3: 0x0000000100f43634 bitcoind`SourceLocationHasher::operator()(this=0x000000081286d8a0, s=0x000000016fdfa820) const at logging.h:52:74\n    frame #4: 0x0000000100f554c0 bitcoind`std::__detail::_Hash_code_base<std::source_location, std::pair<std::source_location const, BCLog::LogRateLimiter::Stats>, std::__detail::_Select1st, SourceLocationHasher, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, false>::_M_hash_code(this=0x000000081286d8a0, __k=0x000000016fdfa820) const at hashtable_policy.h:1071:23\n    frame #5: 0x0000000100f50a08 bitcoind`std::_Hashtable<std::source_location, std::pair<std::source_location const, BCLog::LogRateLimiter::Stats>, std::allocator<std::pair<std::source_location const, BCLog::LogRateLimiter::Stats>>, std::__detail::_Select1st, SourceLocationEqual, SourceLocationHasher, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>>::_M_locate(this=0x000000081286d8a0, __k=0x000000016fdfa820) const at hashtable.h:2279:46\n    frame #6: 0x0000000100f4d3ec bitcoind`std::pair<std::__detail::_Node_iterator<std::pair<std::source_location const, BCLog::LogRateLimiter::Stats>, false, false>, bool> std::_Hashtable<std::source_location, std::pair<std::source_location const, BCLog::LogRateLimiter::Stats>, std::allocator<std::pair<std::source_location const, BCLog::LogRateLimiter::Stats>>, std::__detail::_Select1st, SourceLocationEqual, SourceLocationHasher, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>>::try_emplace<std::source_location const&, unsigned long long const&>(this=0x000000081286d8a0, (null)=std::_Hashtable<std::source_location, std::pair<const std::source_location, BCLog::LogRateLimiter::Stats>, std::allocator<std::pair<const std::source_location, BCLog::LogRateLimiter::Stats> >, std::__detail::_Select1st, SourceLocationEqual, SourceLocationHasher, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::const_iterator @ 0x000000016fdfa2a0, __k=0x000000016fdfa820, (null)=0x000000081286d8e0) at hashtable.h:1088:30\n    frame #7: 0x0000000100f4ac1c bitcoind`std::pair<std::__detail::_Node_iterator<std::pair<std::source_location const, BCLog::LogRateLimiter::Stats>, false, false>, bool> std::unordered_map<std::source_location, BCLog::LogRateLimiter::Stats, SourceLocationHasher, SourceLocationEqual, std::allocator<std::pair<std::source_location const, BCLog::LogRateLimiter::Stats>>>::try_emplace<unsigned long long const&>(this=size=0, __k=0x000000016fdfa820, (null)=0x000000081286d8e0) at unordered_map.h:527:27\n    frame #8: 0x0000000100f47510 bitcoind`BCLog::LogRateLimiter::Consume(this=0x000000081286d860, source_loc=0x000000016fdfa820, str=\"2025-11-27T19:01:48Z Using wallet directory /Users/lorinc/Library/Application Support/Bitcoin/wallets\\n\") at logging.cpp:395:47\n    frame #9: 0x0000000100f47e20 bitcoind`BCLog::Logger::LogPrintStr_(this=0x0000000812820c80, str=(_M_len = 80, _M_str = \"Using wallet directory /Users/lorinc/Library/Application Support/Bitcoin/wallets\"), source_loc=0x000000016fdfa820, category=ALL, level=Info, should_ratelimit=true) at logging.cpp:465:39\n    frame #10: 0x0000000100f47a24 bitcoind`BCLog::Logger::LogPrintStr(this=0x0000000812820c80, str=(_M_len = 80, _M_str = \"Using wallet directory /Users/lorinc/Library/Application Support/Bitcoin/wallets\"), source_loc=0x000000016fdfa820, category=ALL, level=Info, should_ratelimit=true) at logging.cpp:426:24\n    frame #11: 0x000000010001daec bitcoind`void LogPrintFormatInternal<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>>(source_loc=0x000000016fdfa820, flag=ALL, level=Info, should_ratelimit=true, fmt=(fmt = \"Using wallet directory %s\"), (null)=\"/Users/lorinc/Library/Application Support/Bitcoin/wallets\") at logging.h:358:34\n    frame #12: 0x000000010098b85c bitcoind`wallet::VerifyWallets(context=0x00000008130101c8) at load.cpp:53:5\n    frame #13: 0x0000000100931d4c bitcoind`wallet::(anonymous namespace)::WalletLoaderImpl::verify(this=0x00000008130101c0) const at interfaces.cpp:558:50\n    frame #14: 0x0000000100173c10 bitcoind`AppInitMain(node=0x000000016fdfea08, tip_info=0x0000000000000000) at init.cpp:1523:28\n    frame #15: 0x0000000100009820 bitcoind`AppInit(node=0x000000016fdfea08) at bitcoind.cpp:242:54\n    frame #16: 0x0000000100009c54 bitcoind`main(argc=5, argv=0x000000016fdff1c0) at bitcoind.cpp:283:17\n    frame #17: 0x000000019f76dd54 dyld`start + 7184\n```\n\nOn this toolchain, `file_name()` returns a null pointer, so `std::basic_string_view` calls `std::char_traits<char>::length(__s = 0x0)` â†’ `strlen(nullptr)`, which triggers `EXC_BAD_ACCESS`.\n\n---\n\nAccording to [cppreference for `std::source_location::file_name`](https://en.cppreference.com/w/cpp/utility/source_location/file_name), the function is specified to:\n\n> Return the name of the current source file represented by this object, represented as a null-terminated byte string.",
    "user": {
      "login": "l0rinc",
      "id": 1841944,
      "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/l0rinc",
      "html_url": "https://github.com/l0rinc",
      "followers_url": "https://api.github.com/users/l0rinc/followers",
      "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
      "organizations_url": "https://api.github.com/users/l0rinc/orgs",
      "repos_url": "https://api.github.com/users/l0rinc/repos",
      "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/l0rinc/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "labels": [
      {
        "id": 234879,
        "node_id": "MDU6TGFiZWwyMzQ4Nzk=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/macOS",
        "name": "macOS",
        "description": "",
        "color": "660000",
        "default": false
      },
      {
        "id": 159815356,
        "node_id": "MDU6TGFiZWwxNTk4MTUzNTY=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Upstream",
        "name": "Upstream",
        "color": "bfd4f2",
        "default": false
      },
      {
        "id": 477890092,
        "node_id": "MDU6TGFiZWw0Nzc4OTAwOTI=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Questions%20and%20Help",
        "name": "Questions and Help",
        "color": "006688",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "locked": false,
    "comments": 5,
    "closed_at": "2025-12-01T09:53:21Z",
    "closed_by": {
      "login": "l0rinc",
      "id": 1841944,
      "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/l0rinc",
      "html_url": "https://github.com/l0rinc",
      "followers_url": "https://api.github.com/users/l0rinc/followers",
      "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
      "organizations_url": "https://api.github.com/users/l0rinc/orgs",
      "repos_url": "https://api.github.com/users/l0rinc/repos",
      "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/l0rinc/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "created_at": "2025-11-27T19:44:15Z",
    "updated_at": "2025-12-01T09:53:21Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 3587213137,
      "node_id": "IC_kwDOABII587V0IdR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3587213137",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-27T20:33:33Z",
      "updated_at": "2025-11-27T20:33:33Z",
      "author_association": "MEMBER",
      "body": "Your toolchain clearly violates the C++ standard (https://eel.is/c++draft/support.srcloc#class.general-2), so you'll have to report this upstream via a minimal reproducer.",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/33964#issuecomment-3587213137",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33964"
    },
    {
      "event": "labeled",
      "id": 21229515715,
      "node_id": "LE_lADOABII587a6wVWzwAAAATxYLPD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21229515715",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-27T20:33:38Z",
      "label": {
        "name": "macOS",
        "color": "660000"
      }
    },
    {
      "event": "labeled",
      "id": 21229515727,
      "node_id": "LE_lADOABII587a6wVWzwAAAATxYLPP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21229515727",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-27T20:33:39Z",
      "label": {
        "name": "Upstream",
        "color": "bfd4f2"
      }
    },
    {
      "event": "labeled",
      "id": 21229516208,
      "node_id": "LE_lADOABII587a6wVWzwAAAATxYLWw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21229516208",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-27T20:33:42Z",
      "label": {
        "name": "Questions and Help",
        "color": "006688"
      }
    },
    {
      "event": "commented",
      "id": 3592487964,
      "node_id": "IC_kwDOABII587WIQQc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3592487964",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-30T11:53:21Z",
      "updated_at": "2025-11-30T13:26:31Z",
      "author_association": "CONTRIBUTOR",
      "body": "Tried getting to the bottom of it, something's really off here, two consecutive calls to `std::source_location::current()` return very different and suspicious values:\n<img width=\"902\" height=\"584\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/cbd0798c-c86a-44f2-8874-618a2676dff8\" />\n\nWhat does `BTC` file name and `sat` function name refer to and why do we have millions of lines :/?\n\nThey seem to come from (modifying these strings updates the file and method names):\nhttps://github.com/bitcoin/bitcoin/blob/966666de9a6211b8748f43d682490c924e132e58/src/policy/feerate.h#L18-L19\n\n<details>\n<summary>source_location::current() manual instrumentation</summary>\n\n```patch\ndiff --git a/src/bitcoind.cpp b/src/bitcoind.cpp\nindex 37cacb2a7e..19a9523322 100644\n--- a/src/bitcoind.cpp\n+++ b/src/bitcoind.cpp\n@@ -239,6 +239,10 @@ static bool AppInit(NodeContext& node)\n             // If locking a directory failed, exit immediately\n             return false;\n         }\n+\n+        auto x = std::source_location::current();\n+        std::cout << \"AppInit called from \" << x.file_name() << \":\" << x.line() << \"\\n\";\n+\n         fRet = AppInitInterfaces(node) && AppInitMain(node);\n     }\n     catch (const std::exception& e) {\n@@ -279,6 +283,9 @@ MAIN_FUNCTION\n     // Process early info return commands such as -help or -version\n     if (ProcessInitCommands(*init, args)) return EXIT_SUCCESS;\n \n+    auto x = std::source_location::current();\n+    std::cout << \"main called from \" << x.file_name() << \":\" << x.line() << \"\\n\";\n+\n     // Start application\n     if (!AppInit(node) || !Assert(node.shutdown_signal)->wait()) {\n         node.exit_status = EXIT_FAILURE;\ndiff --git a/src/init.cpp b/src/init.cpp\nindex d1c6a5cad0..2c446785b0 100644\n--- a/src/init.cpp\n+++ b/src/init.cpp\n@@ -1518,6 +1518,10 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n             return InitError(_(\"Unable to start HTTP server. See debug log for details.\"));\n     }\n \n+    auto x = std::source_location::current();\n+    std::cout << \"AppInitMain called from \" << x.file_name() << \":\" << x.line() << \"\\n\";\n+\n+\n     // ********************************************************* Step 5: verify wallet database integrity\n     for (const auto& client : node.chain_clients) {\n         if (!client->verify()) {\ndiff --git a/src/wallet/interfaces.cpp b/src/wallet/interfaces.cpp\nindex 2cda1ba299..b353b51f28 100644\n--- a/src/wallet/interfaces.cpp\n+++ b/src/wallet/interfaces.cpp\n@@ -555,7 +555,13 @@ public:\n             m_rpc_handlers.emplace_back(m_context.chain->handleRpc(m_rpc_commands.back()));\n         }\n     }\n-    bool verify() override { return VerifyWallets(m_context); }\n+    bool verify() override\n+    {\n+        auto x = std::source_location::current();\n+        std::cout << \"verify called from \" << x.file_name() << \":\" << x.line() << \"\\n\";\n+\n+        return VerifyWallets(m_context);\n+    }\n     bool load() override { return LoadWallets(m_context); }\n     void start(CScheduler& scheduler) override\n     {\ndiff --git a/src/wallet/load.cpp b/src/wallet/load.cpp\nindex f362064473..8a6a237d1d 100644\n--- a/src/wallet/load.cpp\n+++ b/src/wallet/load.cpp\n@@ -26,6 +26,12 @@ using util::Join;\n namespace wallet {\n bool VerifyWallets(WalletContext& context)\n {\n+    auto x1 = std::source_location::current();\n+    std::cout << \"VerifyWallets1 called from \" << x1.file_name() << \":\" << x1.line() << \"\\n\";\n+\n+    auto x = std::source_location::current();\n+    std::cout << \"VerifyWallets called from \" << x.file_name() << \":\" << x.line() << \"\\n\";\n+\n     interfaces::Chain& chain = *context.chain;\n     ArgsManager& args = *Assert(context.args);\n\n```\n\n</details>\n\nThe stack parents seem to be evaluated correctly, but `VerifyWallets` starts returning weird values from the start:\n```\nmain called from ./bitcoind.cpp:286\nAppInit called from ./bitcoind.cpp:243\nAppInitMain called from ./init.cpp:1521\nverify called from ./wallet/interfaces.cpp:560\nVerifyWallets1 called from BTC:4412482\n```\n\n\n-----\n\nDoing the same with default AppleClang works correctly:\n\n<img width=\"1111\" height=\"585\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/e941f630-ff1e-4c47-9076-a93839912570\" />\n\n-----\n\nI'm not sure how to create a reproducer for this...",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/33964#issuecomment-3592487964",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33964"
    },
    {
      "event": "commented",
      "id": 3595267273,
      "node_id": "IC_kwDOABII587WS2zJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3595267273",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-01T08:35:22Z",
      "updated_at": "2025-12-01T08:35:22Z",
      "author_association": "MEMBER",
      "body": "> I'm not sure how to create a reproducer for this...\n\nFor toolchain bugs, it helps to create a minimal reproducer. Often, this is easy to create in one shot, looking at the code that mis-compiled.\n\nSometimes, it is not so easy and you'll have to manually remove chunks from the full software, until you end up with something minimal. This may be tedious, when done manually. You can also use `creduce`, but this may not work in contexts where one can define a unique bug signature (https://github.com/bitcoin/bitcoin/issues/32276#issuecomment-2812024548).\n\nIn theory, it should be possible to move the runtime bug to a compile time bug with a `static_assert(std::string_view{__FILE__}== std::string_view{std::source_location::current().file_name()});`, so that it can be fed into `creduce`, but I have a feeling that the bug disappears at compile time. In that case, I don't see an easier way to reduce it. \n",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/33964#issuecomment-3595267273",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33964"
    },
    {
      "event": "commented",
      "id": 3595271169,
      "node_id": "IC_kwDOABII587WS3wB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3595271169",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-01T08:35:56Z",
      "updated_at": "2025-12-01T08:35:56Z",
      "author_association": "MEMBER",
      "body": "Unrelated, you can also try different version of your gcc package, to see if this was introduced recently.",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/33964#issuecomment-3595271169",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33964"
    },
    {
      "event": "commented",
      "id": 3595607653,
      "node_id": "IC_kwDOABII587WUJ5l",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3595607653",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-01T09:53:21Z",
      "updated_at": "2025-12-01T09:53:21Z",
      "author_association": "CONTRIBUTOR",
      "body": "Not sure how to create a reliable reproducer for this, closing for now",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/33964#issuecomment-3595607653",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33964"
    },
    {
      "event": "closed",
      "id": 21271291564,
      "node_id": "CE_lADOABII587a6wVWzwAAAATz3ias",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21271291564",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-01T09:53:21Z"
    }
  ]
}