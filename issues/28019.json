{
  "type": "issue",
  "issue": {
    "id": 1784271099,
    "node_id": "I_kwDOABII585qWdD7",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28019",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28019/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28019/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28019/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/28019",
    "number": 28019,
    "state": "closed",
    "state_reason": "completed",
    "title": "docs: \"Fuzzing the Bitcoin Core P2P layer using Honggfuzz NetDriver\" is outdated",
    "body": "Due to changes to the functions `V1TransportDeserializer::readHeader` and `V1TransportDeserializer::GetMessage`, the \"Fuzzing the Bitcoin Core P2P layer using Honggfuzz NetDriver\" section in `fuzzing.md` is outdated. The `git apply` command doesn't work.\r\n\r\n```sh\r\n$ git apply << \"EOF\"\r\ndiff --git a/src/bitcoind.cpp b/src/bitcoind.cpp\r\nindex 455a82e39..2faa3f80f 100644\r\n--- a/src/bitcoind.cpp\r\n+++ b/src/bitcoind.cpp\r\n@@ -158,7 +158,11 @@ static bool AppInit(int argc, char* argv[])\r\n     return fRet;\r\n }\r\n\r\n+#ifdef HFND_FUZZING_ENTRY_FUNCTION_CXX\r\n+HFND_FUZZING_ENTRY_FUNCTION_CXX(int argc, char* argv[])\r\n+#else\r\n int main(int argc, char* argv[])\r\n+#endif\r\n {\r\n #ifdef WIN32\r\n     util::WinCmdLineArgs winArgs;\r\ndiff --git a/src/net.cpp b/src/net.cpp\r\nindex cf987b699..636a4176a 100644\r\n--- a/src/net.cpp\r\n+++ b/src/net.cpp\r\n@@ -709,7 +709,7 @@ int V1TransportDeserializer::readHeader(const char *pch, unsigned int nBytes)\r\n     }\r\n\r\n     // Check start string, network magic\r\n-    if (memcmp(hdr.pchMessageStart, m_chain_params.MessageStart(), CMessageHeader::MESSAGE_START_SIZE) != 0) {\r\n+    if (false && memcmp(hdr.pchMessageStart, m_chain_params.MessageStart(), CMessageHeader::MESSAGE_START_SIZE) != 0) { // skip network magic checking\r\n         LogPrint(BCLog::NET, \"HEADER ERROR - MESSAGESTART (%s, %u bytes), received %s, peer=%d\\n\", hdr.GetCommand(), hdr.nMessageSize, HexStr(hdr.pchMessageStart), m_node_id);\r\n         return -1;\r\n     }\r\n@@ -768,7 +768,7 @@ Optional<CNetMessage> V1TransportDeserializer::GetMessage(const std::chrono::mic\r\n     RandAddEvent(ReadLE32(hash.begin()));\r\n\r\n     // Check checksum and header command string\r\n-    if (memcmp(hash.begin(), hdr.pchChecksum, CMessageHeader::CHECKSUM_SIZE) != 0) {\r\n+    if (false && memcmp(hash.begin(), hdr.pchChecksum, CMessageHeader::CHECKSUM_SIZE) != 0) { // skip checksum checking\r\n         LogPrint(BCLog::NET, \"CHECKSUM ERROR (%s, %u bytes), expected %s was %s, peer=%d\\n\",\r\n                  SanitizeString(msg->m_command), msg->m_message_size,\r\n                  HexStr(Span<uint8_t>(hash.begin(), hash.begin() + CMessageHeader::CHECKSUM_SIZE)),\r\nEOF\r\n```",
    "user": {
      "login": "brunoerg",
      "id": 19480819,
      "node_id": "MDQ6VXNlcjE5NDgwODE5",
      "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brunoerg",
      "html_url": "https://github.com/brunoerg",
      "followers_url": "https://api.github.com/users/brunoerg/followers",
      "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
      "organizations_url": "https://api.github.com/users/brunoerg/orgs",
      "repos_url": "https://api.github.com/users/brunoerg/repos",
      "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/brunoerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "locked": true,
    "comments": 0,
    "closed_at": "2023-07-03T10:45:04Z",
    "created_at": "2023-07-01T21:39:21Z",
    "updated_at": "2024-07-02T12:58:15Z"
  },
  "events": [
    {
      "event": "unsubscribed",
      "id": 9699322906,
      "node_id": "UE_lADOABII585qWdD7zwAAAAJCH-wa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9699322906",
      "actor": {
        "login": "joostjager",
        "id": 4638168,
        "node_id": "MDQ6VXNlcjQ2MzgxNjg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4638168?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/joostjager",
        "html_url": "https://github.com/joostjager",
        "followers_url": "https://api.github.com/users/joostjager/followers",
        "following_url": "https://api.github.com/users/joostjager/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/joostjager/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/joostjager/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/joostjager/subscriptions",
        "organizations_url": "https://api.github.com/users/joostjager/orgs",
        "repos_url": "https://api.github.com/users/joostjager/repos",
        "events_url": "https://api.github.com/users/joostjager/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/joostjager/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-02T09:28:21Z"
    },
    {
      "event": "referenced",
      "id": 9705779464,
      "node_id": "REFE_lADOABII585qWdD7zwAAAAJCgnEI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9705779464",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "87df084ecb5e581d4e8cd058e45039016df46ae7",
      "commit_url": "https://api.github.com/repos/fanquake/bitcoin/commits/87df084ecb5e581d4e8cd058e45039016df46ae7",
      "created_at": "2023-07-03T08:27:05Z"
    },
    {
      "event": "referenced",
      "id": 9706083062,
      "node_id": "REFE_lADOABII585qWdD7zwAAAAJChxL2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9706083062",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "1a0958eeba63e30e4a25d3b6b0cf85a685deeb6c",
      "commit_url": "https://api.github.com/repos/fanquake/bitcoin/commits/1a0958eeba63e30e4a25d3b6b0cf85a685deeb6c",
      "created_at": "2023-07-03T08:52:11Z"
    },
    {
      "event": "referenced",
      "id": 9706937124,
      "node_id": "REFE_lADOABII585qWdD7zwAAAAJClBsk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9706937124",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "c1247c3746d4b9ea88a0f9cfb7e71904267b3cd3",
      "commit_url": "https://api.github.com/repos/fanquake/bitcoin/commits/c1247c3746d4b9ea88a0f9cfb7e71904267b3cd3",
      "created_at": "2023-07-03T10:01:30Z"
    },
    {
      "event": "closed",
      "id": 9707438363,
      "node_id": "CE_lADOABII585qWdD7zwAAAAJCm8Eb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9707438363",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "c1247c3746d4b9ea88a0f9cfb7e71904267b3cd3",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c1247c3746d4b9ea88a0f9cfb7e71904267b3cd3",
      "created_at": "2023-07-03T10:45:04Z"
    },
    {
      "event": "referenced",
      "id": 9707438412,
      "node_id": "REFE_lADOABII585qWdD7zwAAAAJCm8FM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9707438412",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "600c595b8d2f4bf049b9182d4a0aa88e4b34458d",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/600c595b8d2f4bf049b9182d4a0aa88e4b34458d",
      "created_at": "2023-07-03T10:45:05Z"
    },
    {
      "event": "locked",
      "id": 13365713357,
      "node_id": "LOE_lADOABII585qWdD7zwAAAAMcqJnN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13365713357",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-02T12:58:15Z"
    }
  ]
}