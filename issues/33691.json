{
  "type": "issue",
  "issue": {
    "id": 3545450511,
    "node_id": "I_kwDOABII587TU0gP",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33691",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33691/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33691/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33691/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/33691",
    "number": 33691,
    "state": "open",
    "state_reason": null,
    "title": "SENDTEMPLATE Tracking Issue",
    "body": "Plan:\n\n * Protocol specification [BIN25-2](https://github.com/bitcoin-inquisition/binana/blob/master/2025/BIN-2025-0002.md) and [BIP153 PR#1937](https://github.com/bitcoin/bips/pull/1937)\n * Implementation:\n   * [PR#33191](https://github.com/bitcoin/bitcoin/pull/33191) - Providing templates to peers\n   * [sendtemplate3 branch](https://github.com/ajtowns/bitcoin/tree/202508-sendtemplate3) - Using templates from peers\n * Live tests\n   * [x] signet: inquisition 29.x ([#96](https://github.com/bitcoin-inquisition/bitcoin/pull/96)) nodes provide templates, eg inquisition.bitcoin-signet.net\n   * [x] mainnet: cornflower.erisian.com.au provides templates currently\n   * [ ] warnet simulation?\n * Discussion:\n   * https://delvingbitcoin.org/t/sharing-block-templates/1906\n * Potential benefits: (tick with data confirming benefit)\n   * [ ] Quick population of mempool on initial start\n   * [ ] Quicker relay of top-of-mempool transactions \n   * [ ] Improved compact block propagation with diverse mempool policies\n   * [ ] Transaction rebroadcast without participation of sender/receiver\n * Future ideas:\n   * [x] Include 2MvB of transactions, not just the next block\n   * [ ] Send templates shortly after construction\n   * [ ] Coordinate template construction with INV announcements better\n   * [ ] Send diffs since prior templates to reduce bandwidth\n   * [ ] Use set reconciliation to improve compact block reconstruction (see delving discussion)\n   * [ ] Use reduced siphash to make compact block calculations faster?\n",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "labels": [
      {
        "id": 9432466570,
        "node_id": "LA_kwDOABII588AAAACMjgEig",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tracking%20Issue",
        "name": "Tracking Issue",
        "description": "Tracks longer-running projects and releases. Gathers TODOs, issues, PRs, and status updates.",
        "color": "dda2a6",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "locked": false,
    "comments": 1,
    "created_at": "2025-10-23T16:11:55Z",
    "updated_at": "2025-12-04T14:53:26Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 20458975577,
      "node_id": "LE_lADOABII587TU0gPzwAAAATDczFZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20458975577",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-23T16:11:57Z",
      "label": {
        "name": "Tracking Issue",
        "color": "dda2a6"
      }
    },
    {
      "event": "comment_deleted",
      "id": 20499379255,
      "node_id": "CDE_lADOABII587TU0gPzwAAAATF27Q3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20499379255",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-25T07:28:20Z"
    },
    {
      "event": "subscribed",
      "id": 20553778173,
      "node_id": "SE_lADOABII587TU0gPzwAAAATJGcP9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20553778173",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-28T13:20:58Z"
    },
    {
      "event": "subscribed",
      "id": 20579329329,
      "node_id": "SE_lADOABII587TU0gPzwAAAATKn6Ux",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20579329329",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-29T13:12:03Z"
    },
    {
      "event": "commented",
      "id": 3612640676,
      "node_id": "IC_kwDOABII587XVIWk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3612640676",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-04T14:53:25Z",
      "updated_at": "2025-12-04T14:53:25Z",
      "author_association": "CONTRIBUTOR",
      "body": "It looks like reusing compact block messages doesn't make sense -- including two blocks' worth of data seems pretty useful, but that could result in an ~8MB `blocktxns` data if your mempool was empty and the top of the mempool was full of inscriptions, which would in turn [exceed the 4MB maximum message size we have](https://github.com/bitcoin/bitcoin/pull/33191#pullrequestreview-3383627846). We could expand the maximum message size, but large messages can be a DoS vector, so splitting the template response up probably makes more sense. That also provides the opportunity to describe the block template more directly, rather than pretending it's a block with a header committing to the txids and perhaps a coinbase committing to the wtxids. So current work is on redesigning the p2p messages and making template reconstruction an iterative thing (\"here's the first batch of missing transactions\", ..., \"here's the next batch of missing transactions\") rather than a one shot (\"here's all the missing transactions, you now have a template!\")",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/33691#issuecomment-3612640676",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33691"
    }
  ]
}