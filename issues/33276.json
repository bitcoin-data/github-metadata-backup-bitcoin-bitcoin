{
  "type": "issue",
  "issue": {
    "id": 3373829732,
    "node_id": "I_kwDOABII587JGI5k",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33276",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33276/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33276/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33276/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/33276",
    "number": 33276,
    "state": "open",
    "state_reason": null,
    "title": "InitError() doesn't always halt node startup when blockchain state exists",
    "body": "As described in https://github.com/bitcoin/bitcoin/pull/33231#discussion_r2305592114, when `InitError()` is triggered during initialization, the node prints the error but sometimes continues running, if blockchain data already exists in the datadir.\n\n```bash\nrm -rfd demo build && mkdir -p demo && cmake -B build && cmake --build build -j$(nproc)\n# empty state fails with error\nbuild/bin/bitcoind -datadir=demo -stopatheight=100 -i2psam=invalid_addr\n# init state with 10 blocks\nbuild/bin/bitcoind -datadir=demo -stopatheight=1000\n# error is shown but doesn't stop execution\nbuild/bin/bitcoind -datadir=demo -i2psam=invalid_addr\n```\n\nthe last command does usually stop, but it seems that if the validation is happening too late, it doesn't prevent startup:\n```\n2025-09-01T21:46:54Z Bitcoin Core version v29.99.0-7cc9a087069b (release build)\n2025-09-01T21:46:54Z Using the 'arm_shani(1way,2way)' SHA256 implementation\n2025-09-01T21:46:54Z Default data directory /Users/lorinc/Library/Application Support/Bitcoin\n2025-09-01T21:46:54Z Using data directory /Users/lorinc/IdeaProjects/bitcoin/demo\n2025-09-01T21:46:54Z Config file: /Users/lorinc/IdeaProjects/bitcoin/demo/bitcoin.conf (not found, skipping)\n2025-09-01T21:46:54Z Command-line arg: datadir=\"demo\"\n2025-09-01T21:46:54Z Command-line arg: i2psam=\"invalid_addr\"\n2025-09-01T21:46:54Z Using at most 125 automatic connections (1024 file descriptors available)\n2025-09-01T21:46:54Z Warning: relative datadir option 'demo' specified, which will be interpreted relative to the current working directory '/Users/lorinc/IdeaProjects/bitcoin'. This is fragile, because if bitcoin is started in the future from a different location, it will be unable to locate the current data files. There could also be data loss if bitcoin is started while in a temporary directory.\n2025-09-01T21:46:54Z scheduler thread start\n2025-09-01T21:46:54Z Binding RPC on address ::1 port 8332\n2025-09-01T21:46:54Z Binding RPC on address 127.0.0.1 port 8332\n2025-09-01T21:46:54Z Generated RPC authentication cookie /Users/lorinc/IdeaProjects/bitcoin/demo/.cookie\n2025-09-01T21:46:54Z Permissions used for cookie: rw-------\n2025-09-01T21:46:54Z Using random cookie authentication.\n2025-09-01T21:46:54Z Starting HTTP server with 16 worker threads\n2025-09-01T21:46:54Z Using wallet directory /Users/lorinc/IdeaProjects/bitcoin/demo\n2025-09-01T21:46:54Z init message: Verifying wallet(s)…\n2025-09-01T21:46:54Z Using /16 prefix for IP bucketing\n2025-09-01T21:46:54Z init message: Loading P2P addresses…\n2025-09-01T21:46:54Z Loaded 7172 addresses from peers.dat  9ms\n2025-09-01T21:46:54Z init message: Loading banlist…\n2025-09-01T21:46:54Z SetNetworkActive: true\n2025-09-01T21:46:54Z Cache configuration:\n2025-09-01T21:46:54Z * Using 2.0 MiB for block index database\n2025-09-01T21:46:54Z * Using 8.0 MiB for chain state database\n2025-09-01T21:46:54Z * Using 440.0 MiB for in-memory UTXO set (plus up to 286.1 MiB of unused mempool space)\n2025-09-01T21:46:54Z Script verification uses 15 additional threads\n2025-09-01T21:46:54Z Using obfuscation key for blocksdir *.dat files (/Users/lorinc/IdeaProjects/bitcoin/demo/blocks): 'b3658ca56bdb3f0c'\n2025-09-01T21:46:54Z Opening LevelDB in /Users/lorinc/IdeaProjects/bitcoin/demo/blocks/index\n2025-09-01T21:46:54Z Opened LevelDB successfully\n2025-09-01T21:46:54Z Using obfuscation key for /Users/lorinc/IdeaProjects/bitcoin/demo/blocks/index: 0000000000000000\n2025-09-01T21:46:54Z Using 16 MiB out of 16 MiB requested for signature cache, able to store 524288 elements\n2025-09-01T21:46:54Z Using 16 MiB out of 16 MiB requested for script execution cache, able to store 524288 elements\n2025-09-01T21:46:54Z init message: Loading block index…\n2025-09-01T21:46:54Z Assuming ancestors of block 00000000000000000001b658dd1120e82e66d2790811f89ede9742ada3ed6d77 have valid signatures.\n2025-09-01T21:46:54Z Setting nMinimumChainWork=0000000000000000000000000000000000000000b1f3b93b65b16d035a82be84\n2025-09-01T21:46:56Z Loading block index db: last block file = 0\n2025-09-01T21:46:56Z Loading block index db: last block file info: CBlockFileInfo(blocks=1030, size=236546, heights=0...1041, time=2009-01-03...2009-01-19)\n2025-09-01T21:46:56Z Checking all blk files are present...\n2025-09-01T21:46:57Z Initializing chainstate Chainstate [ibd] @ height -1 (null)\n2025-09-01T21:46:57Z Opening LevelDB in /Users/lorinc/IdeaProjects/bitcoin/demo/chainstate\n2025-09-01T21:46:57Z Opened LevelDB successfully\n2025-09-01T21:46:57Z Using obfuscation key for /Users/lorinc/IdeaProjects/bitcoin/demo/chainstate: 49bb7fb91842528b\n2025-09-01T21:46:57Z Loaded best chain: hashBestChain=00000000c937983704a73af28acdec37b049d214adbda81d7e2a3dd146f6ed09 height=1000 date=2009-01-19T06:34:42Z progress=0.000001\n2025-09-01T21:46:57Z init message: Verifying blocks…\n2025-09-01T21:46:57Z Verifying last 6 blocks at level 3\n2025-09-01T21:46:57Z Verification progress: 0%\n2025-09-01T21:46:57Z Verification progress: 16%\n2025-09-01T21:46:57Z Verification progress: 33%\n2025-09-01T21:46:57Z Verification progress: 50%\n2025-09-01T21:46:57Z Verification progress: 66%\n2025-09-01T21:46:57Z Verification progress: 83%\n2025-09-01T21:46:57Z Verification progress: 99%\n2025-09-01T21:46:57Z Verification: No coin database inconsistencies in last 6 blocks (6 transactions)\n2025-09-01T21:46:57Z Block index and chainstate loaded\n2025-09-01T21:46:57Z Setting NODE_NETWORK on non-prune mode\n2025-09-01T21:46:57Z block tree size = 912759\n2025-09-01T21:46:57Z nBestHeight = 1000\n2025-09-01T21:46:57Z initload thread start\n2025-09-01T21:46:57Z mapport thread start\n2025-09-01T21:46:57Z torcontrol thread start\n2025-09-01T21:46:57Z Disabling signature validations at block #1001 (00000000a2887344f8db859e372e7e4bc26b23b9de340f725afbf2edb265b4c6).\n2025-09-01T21:46:57Z UpdateTip: new best=00000000a2887344f8db859e372e7e4bc26b23b9de340f725afbf2edb265b4c6 height=1001 version=0x00000001 log2_work=41.968689 tx=1021 date='2009-01-19T06:49:46Z' progress=0.000001 cache=0.3MiB(1txo)\n2025-09-01T21:46:57Z UpdateTip: new best=00000000430a20b3f4f658c153168b6615512dfe1a8362602e44a5e11e83011a height=1002 version=0x00000001 log2_work=41.970128 tx=1022 date='2009-01-19T07:08:26Z' progress=0.000001 cache=0.3MiB(2txo)\n2025-09-01T21:46:57Z UpdateTip: new best=000000002d5d8c3264d9c6e352b76430cda7a1edac661a515dd1445c15168de5 height=1003 version=0x00000001 log2_work=41.971566 tx=1023 date='2009-01-19T07:26:12Z' progress=0.000001 cache=0.3MiB(3txo)\n2025-09-01T21:46:57Z UpdateTip: new best=00000000aded3a9953bb6acd0f51a99ac433369696116a6b72754c672a350a65 height=1004 version=0x00000001 log2_work=41.973002 tx=1024 date='2009-01-19T07:29:12Z' progress=0.000001 cache=0.3MiB(4txo)\n2025-09-01T21:46:57Z UpdateTip: new best=000000006659f6eed8840da4336211802af29eb04453e7e92d0f80a98f3e833c height=1005 version=0x00000001 log2_work=41.974437 tx=1025 date='2009-01-19T07:52:03Z' progress=0.000001 cache=0.3MiB(5txo)\n2025-09-01T21:46:57Z UpdateTip: new best=00000000c88cb61c8093f11df65dbc6633ae783e6f51be9aa8bbc6c624a994e2 height=1006 version=0x00000001 log2_work=41.975870 tx=1026 date='2009-01-19T08:11:43Z' progress=0.000001 cache=0.3MiB(6txo)\n2025-09-01T21:46:57Z UpdateTip: new best=0000000037b9be6143407617d34d7dd70a09aeb68e5da5a092bf5d19d7a06da6 height=1007 version=0x00000001 log2_work=41.977302 tx=1027 date='2009-01-19T08:27:46Z' progress=0.000001 cache=0.3MiB(7txo)\n2025-09-01T21:46:57Z UpdateTip: new best=000000005f7e442c07d918a1f2cd4f594f5e1946c22b06ffd7dfe378f59f70e8 height=1008 version=0x00000001 log2_work=41.978732 tx=1028 date='2009-01-19T08:40:20Z' progress=0.000001 cache=0.3MiB(8txo)\n2025-09-01T21:46:57Z UpdateTip: new best=000000008bb80b928343bc65ea33b2c97b722d7b85f0470d32a7519d2b7e5550 height=1009 version=0x00000001 log2_work=41.980162 tx=1029 date='2009-01-19T08:52:17Z' progress=0.000001 cache=0.3MiB(9txo)\n2025-09-01T21:46:57Z UpdateTip: new best=0000000074679515061a7e8272f315ca6735ee18105e3d4e867cbc87988e2759 height=1010 version=0x00000001 log2_work=41.981589 tx=1030 date='2009-01-19T08:55:07Z' progress=0.000001 cache=0.3MiB(10txo)\n2025-09-01T21:46:57Z UpdateTip: new best=00000000bbafcd3677dc5f3c713f464996e0253a2457828d3e775c83191abefc height=1011 version=0x00000001 log2_work=41.983016 tx=1031 date='2009-01-19T09:09:28Z' progress=0.000001 cache=0.3MiB(11txo)\n2025-09-01T21:46:57Z UpdateTip: new best=000000002048a8c44e5fcc9b0f19b2ed1fe2c63842ef88c9a29f54607087dc32 height=1012 version=0x00000001 log2_work=41.984440 tx=1032 date='2009-01-19T09:31:02Z' progress=0.000001 cache=0.3MiB(12txo)\n2025-09-01T21:46:57Z UpdateTip: new best=00000000f9c20fdda7029f3d5eda156b6b7d4d2b3b8b850b9dea839483e145b6 height=1013 version=0x00000001 log2_work=41.985864 tx=1033 date='2009-01-19T09:46:28Z' progress=0.000001 cache=0.3MiB(13txo)\n2025-09-01T21:46:57Z Loading 0 mempool transactions from file...\n2025-09-01T21:46:57Z Imported mempool transactions from file: 0 succeeded, 0 failed, 0 expired, 0 already there, 0 waiting for initial broadcast\n2025-09-01T21:46:57Z initload thread exit\n2025-09-01T21:46:57Z [error] Invalid -i2psam address or hostname: 'invalid_addr'\nError: Invalid -i2psam address or hostname: 'invalid_addr'\n2025-09-01T21:46:57Z tor: Thread interrupt\n2025-09-01T21:46:57Z Shutdown in progress...\n2025-09-01T21:46:57Z torcontrol thread exit\n2025-09-01T21:47:00Z mapport thread exit\n2025-09-01T21:47:00Z scheduler thread exit\n2025-09-01T21:47:00Z Writing 0 mempool transactions to file...\n2025-09-01T21:47:00Z Writing 0 unbroadcast transactions to file.\n2025-09-01T21:47:00Z Dumped mempool: 0.000s to copy, 0.009s to dump, 27 bytes dumped to file\n2025-09-01T21:47:00Z Flushed fee estimates to fee_estimates.dat.\n2025-09-01T21:47:00Z Shutdown done\n```",
    "user": {
      "login": "l0rinc",
      "id": 1841944,
      "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/l0rinc",
      "html_url": "https://github.com/l0rinc",
      "followers_url": "https://api.github.com/users/l0rinc/followers",
      "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
      "organizations_url": "https://api.github.com/users/l0rinc/orgs",
      "repos_url": "https://api.github.com/users/l0rinc/repos",
      "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/l0rinc/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "labels": [
      {
        "id": 118379652,
        "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
        "name": "Validation",
        "color": "6060aa",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "locked": false,
    "comments": 4,
    "created_at": "2025-09-01T21:54:52Z",
    "updated_at": "2026-01-15T09:10:30Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 3243949312,
      "node_id": "IC_kwDOABII587BWr0A",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3243949312",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-02T06:23:32Z",
      "updated_at": "2025-09-02T06:23:32Z",
      "author_association": "MEMBER",
      "body": "I can't reproduce this locally, but I guess you are referring to the `initload` thread doing its work? If yes, I presume the only fix would be to validate the args before starting the initload thread?",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/33276#issuecomment-3243949312",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33276"
    },
    {
      "event": "commented",
      "id": 3257139172,
      "node_id": "IC_kwDOABII587CI__k",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3257139172",
      "actor": {
        "login": "yuvicc",
        "id": 92994932,
        "node_id": "U_kgDOBYr9dA",
        "avatar_url": "https://avatars.githubusercontent.com/u/92994932?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/yuvicc",
        "html_url": "https://github.com/yuvicc",
        "followers_url": "https://api.github.com/users/yuvicc/followers",
        "following_url": "https://api.github.com/users/yuvicc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/yuvicc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/yuvicc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/yuvicc/subscriptions",
        "organizations_url": "https://api.github.com/users/yuvicc/orgs",
        "repos_url": "https://api.github.com/users/yuvicc/repos",
        "events_url": "https://api.github.com/users/yuvicc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/yuvicc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-05T05:43:24Z",
      "updated_at": "2025-09-05T05:43:24Z",
      "author_association": "CONTRIBUTOR",
      "body": "Tried on my local system, I was able to reproduce that.\n\n```\n2025-09-05T05:39:58Z UpdateTip: new best=000000004b6da5bbb89d6602b47021c817837330c94c92ffdf0fe7a3fc65fa57 height=1057 version=0x00000001 log2_work=42.047146 tx=1079 date='2009-01-19T19:36:59Z' progress=0.000001 cache=0.3MiB(74txo)\n2025-09-05T05:39:58Z UpdateTip: new best=00000000d357309918e1e2586ca15141650f39b8097169274ccdba05991a87b3 height=1058 version=0x00000001 log2_work=42.048509 tx=1080 date='2009-01-19T19:43:41Z' progress=0.000001 cache=0.3MiB(75txo)\n2025-09-05T05:39:58Z UpdateTip: new best=00000000f6e758bff279b5d6c6c557dd1b90511eac1df10652a2a782aa5733b5 height=1059 version=0x00000001 log2_work=42.049871 tx=1081 date='2009-01-19T20:06:49Z' progress=0.000001 cache=0.3MiB(76txo)\n2025-09-05T05:39:58Z UpdateTip: new best=00000000a396bda7ddfea736dc41dc1ff82ab99b391da8b8d8a24147bae0fe51 height=1060 version=0x00000001 log2_work=42.051231 tx=1082 date='2009-01-19T20:08:35Z' progress=0.000001 cache=0.3MiB(77txo)\n2025-09-05T05:39:58Z UpdateTip: new best=0000000062499825b027659fceb5959e09bfb6c2b856533941f6a090a02ce433 height=1061 version=0x00000001 log2_work=42.052590 tx=1083 date='2009-01-19T20:22:32Z' progress=0.000001 cache=0.3MiB(78txo)\n2025-09-05T05:39:58Z UpdateTip: new best=00000000813a89c779e6d6649c4e8f3ccfd4bfd188d7608f8f652f6b4f28d1f3 height=1062 version=0x00000001 log2_work=42.053948 tx=1084 date='2009-01-19T20:27:20Z' progress=0.000001 cache=0.3MiB(79txo)\n2025-09-05T05:39:58Z UpdateTip: new best=000000002d878e299ee9592fa673e49c36fc1b38a5a8021eb3daf19cf85aec07 height=1063 version=0x00000001 log2_work=42.055304 tx=1085 date='2009-01-19T20:30:12Z' progress=0.000001 cache=0.3MiB(80txo)\n2025-09-05T05:39:58Z Loading 0 mempool transactions from file...\n2025-09-05T05:39:58Z Imported mempool transactions from file: 0 succeeded, 0 failed, 0 expired, 0 already there, 0 waiting for initial broadcast\n2025-09-05T05:39:58Z initload thread exit\n2025-09-05T05:39:58Z mapport thread exit\n2025-09-05T05:39:58Z scheduler thread exit\n2025-09-05T05:39:58Z Writing 0 mempool transactions to file...\n2025-09-05T05:39:58Z Writing 0 unbroadcast transactions to file.\n2025-09-05T05:39:58Z Dumped mempool: 0.000s to copy, 0.001s to dump, 27 bytes dumped to file\n2025-09-05T05:39:58Z Flushed fee estimates to fee_estimates.dat.\n2025-09-05T05:39:59Z Shutdown done\n```",
      "user": {
        "login": "yuvicc",
        "id": 92994932,
        "node_id": "U_kgDOBYr9dA",
        "avatar_url": "https://avatars.githubusercontent.com/u/92994932?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/yuvicc",
        "html_url": "https://github.com/yuvicc",
        "followers_url": "https://api.github.com/users/yuvicc/followers",
        "following_url": "https://api.github.com/users/yuvicc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/yuvicc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/yuvicc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/yuvicc/subscriptions",
        "organizations_url": "https://api.github.com/users/yuvicc/orgs",
        "repos_url": "https://api.github.com/users/yuvicc/repos",
        "events_url": "https://api.github.com/users/yuvicc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/yuvicc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/33276#issuecomment-3257139172",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33276"
    },
    {
      "event": "commented",
      "id": 3258423195,
      "node_id": "IC_kwDOABII587CN5eb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3258423195",
      "actor": {
        "login": "yuvicc",
        "id": 92994932,
        "node_id": "U_kgDOBYr9dA",
        "avatar_url": "https://avatars.githubusercontent.com/u/92994932?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/yuvicc",
        "html_url": "https://github.com/yuvicc",
        "followers_url": "https://api.github.com/users/yuvicc/followers",
        "following_url": "https://api.github.com/users/yuvicc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/yuvicc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/yuvicc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/yuvicc/subscriptions",
        "organizations_url": "https://api.github.com/users/yuvicc/orgs",
        "repos_url": "https://api.github.com/users/yuvicc/repos",
        "events_url": "https://api.github.com/users/yuvicc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/yuvicc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-05T13:49:33Z",
      "updated_at": "2025-09-05T13:49:33Z",
      "author_association": "CONTRIBUTOR",
      "body": "I dug into this issue and found that this behavior lies with the `-stopatheight` argument. This argument only stops validation of blocks until that height but doesn't stop further downloading of blocks. That might be the reason we see that it validates the remaining blocks from the index and updates the current height next time when it starts.\n\n\nRunning the same command `build/bin/bitcoind -datadir=demo -stopatheight=1000`, I see it has blocks till 1520 in the db.\n```\n2025-09-05T13:32:14Z Loading block index db: last block file = 0\n2025-09-05T13:32:14Z Loading block index db: last block file info: CBlockFileInfo(blocks=1461, size=337438, heights=0...1520, time=2009-01-03...2009-01-24)\n```",
      "user": {
        "login": "yuvicc",
        "id": 92994932,
        "node_id": "U_kgDOBYr9dA",
        "avatar_url": "https://avatars.githubusercontent.com/u/92994932?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/yuvicc",
        "html_url": "https://github.com/yuvicc",
        "followers_url": "https://api.github.com/users/yuvicc/followers",
        "following_url": "https://api.github.com/users/yuvicc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/yuvicc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/yuvicc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/yuvicc/subscriptions",
        "organizations_url": "https://api.github.com/users/yuvicc/orgs",
        "repos_url": "https://api.github.com/users/yuvicc/repos",
        "events_url": "https://api.github.com/users/yuvicc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/yuvicc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/33276#issuecomment-3258423195",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33276"
    },
    {
      "event": "commented",
      "id": 3258705593,
      "node_id": "IC_kwDOABII587CO-a5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3258705593",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-05T15:09:25Z",
      "updated_at": "2025-09-05T15:09:25Z",
      "author_association": "CONTRIBUTOR",
      "body": "Is this maybe more about wording/definitions? I'd say node startup is finished when RPC is enabled and we log \"[Done Loading](https://github.com/bitcoin/bitcoin/blob/37c21ebe4078d5a7b9d8a91aca2ab8b118b9d69f/src/init.cpp#L2157C4-L2157C48)\" - in the log, the node does halt before that would happen.\n\nIt's true (and could be unexpected) that `initload` may do some work connecting blocks before that, but is there a downside to that? It's not possible to simply delay the initload start without other changes, because `initload` also connects the Genesis block, which we wait for [here](https://github.com/bitcoin/bitcoin/blob/37c21ebe4078d5a7b9d8a91aca2ab8b118b9d69f/src/init.cpp#L1961) - I think to avoid clients like the GUI from crashing that assume a chain exists.",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/33276#issuecomment-3258705593",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33276"
    },
    {
      "event": "labeled",
      "id": 22064293110,
      "node_id": "LE_lADOABII587JGI5kzwAAAAUjImT2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22064293110",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-15T09:10:30Z",
      "label": {
        "name": "Validation",
        "color": "6060aa"
      }
    }
  ]
}