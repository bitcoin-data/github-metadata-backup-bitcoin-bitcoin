{
  "type": "issue",
  "issue": {
    "id": 2182772229,
    "node_id": "I_kwDOABII586CGnYF",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29643",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29643/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29643/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29643/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/29643",
    "number": 29643,
    "state": "open",
    "state_reason": null,
    "title": "[tests] Race between test code and code in net thread",
    "body": "### Is there an existing issue for this?\r\n\r\n- [X] I have searched the existing issues\r\n\r\n### Current behaviour\r\n\r\nI opened a PR and the functional test failed \r\nhttps://github.com/bitcoin/bitcoin/pull/29500/checks?check_run_id=22324979545\r\n\r\nrandom seed: 2149187499175826776\r\n\r\nhttps://github.com/bitcoin/bitcoin/pull/29500#issuecomment-1987892121\r\n\r\n### Expected behaviour\r\n\r\nI expected the test runner to pass\r\n\r\n### Steps to reproduce\r\n\r\nNot sure how to reproduce other than running the test runner multiple times till it occurs\r\n\r\n### Relevant log output\r\n\r\nhttps://github.com/bitcoin/bitcoin/pull/29500/checks?check_run_id=22324979545\r\n\r\n### How did you obtain Bitcoin Core\r\n\r\nCompiled from source\r\n\r\n### What version of Bitcoin Core are you using?\r\n\r\nmaster@f9ba6fd46d454d0a56662db751675a6520e1c9f6\r\n\r\n### Operating system and version\r\n\r\nCirrus CI / ASan + LSan + UBSan + integer, no depends, USDT\r\n\r\n### Machine specifications\r\n\r\nThis happened in the ci/cd",
    "user": {
      "login": "kevkevinpal",
      "id": 15950706,
      "node_id": "MDQ6VXNlcjE1OTUwNzA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/15950706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevkevinpal",
      "html_url": "https://github.com/kevkevinpal",
      "followers_url": "https://api.github.com/users/kevkevinpal/followers",
      "following_url": "https://api.github.com/users/kevkevinpal/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/kevkevinpal/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/kevkevinpal/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/kevkevinpal/subscriptions",
      "organizations_url": "https://api.github.com/users/kevkevinpal/orgs",
      "repos_url": "https://api.github.com/users/kevkevinpal/repos",
      "events_url": "https://api.github.com/users/kevkevinpal/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/kevkevinpal/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 62963516,
        "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
        "name": "Tests",
        "color": "d4c5f9",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "locked": false,
    "comments": 2,
    "created_at": "2024-03-12T22:06:27Z",
    "updated_at": "2024-04-27T21:18:41Z"
  },
  "events": [
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "kevkevinpal",
        "id": 15950706,
        "node_id": "MDQ6VXNlcjE1OTUwNzA2",
        "avatar_url": "https://avatars.githubusercontent.com/u/15950706?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kevkevinpal",
        "html_url": "https://github.com/kevkevinpal",
        "followers_url": "https://api.github.com/users/kevkevinpal/followers",
        "following_url": "https://api.github.com/users/kevkevinpal/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kevkevinpal/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kevkevinpal/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kevkevinpal/subscriptions",
        "organizations_url": "https://api.github.com/users/kevkevinpal/orgs",
        "repos_url": "https://api.github.com/users/kevkevinpal/repos",
        "events_url": "https://api.github.com/users/kevkevinpal/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kevkevinpal/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-12T22:07:32Z",
      "updated_at": "2024-03-12T22:07:32Z",
      "source": {
        "issue": {
          "id": 2157984412,
          "node_id": "PR_kwDOABII585oHrjX",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29500",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29500/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29500/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29500/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/29500",
          "number": 29500,
          "state": "open",
          "state_reason": null,
          "title": "test: create assert_not_equal util",
          "body": "In the functional tests there are lots of cases where we assert != which we now swap with assert_not_equal to be more readable\r\n\r\nThis is motivated/uses logic from this PR which was closed https://github.com/bitcoin/bitcoin/pull/28528\r\nThis partially helps https://github.com/bitcoin/bitcoin/issues/23119\r\n\r\nI've broken it up to just `assert_not_equal` to keep the PR smaller as suggested in https://github.com/bitcoin/bitcoin/pull/28528#issuecomment-1959945805\r\n\r\nI can create follow up PR's if this is wanted",
          "user": {
            "login": "kevkevinpal",
            "id": 15950706,
            "node_id": "MDQ6VXNlcjE1OTUwNzA2",
            "avatar_url": "https://avatars.githubusercontent.com/u/15950706?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/kevkevinpal",
            "html_url": "https://github.com/kevkevinpal",
            "followers_url": "https://api.github.com/users/kevkevinpal/followers",
            "following_url": "https://api.github.com/users/kevkevinpal/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/kevkevinpal/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/kevkevinpal/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/kevkevinpal/subscriptions",
            "organizations_url": "https://api.github.com/users/kevkevinpal/orgs",
            "repos_url": "https://api.github.com/users/kevkevinpal/repos",
            "events_url": "https://api.github.com/users/kevkevinpal/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/kevkevinpal/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 62963516,
              "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
              "name": "Tests",
              "color": "d4c5f9",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 9,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29500",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/29500",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/29500.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/29500.patch"
          },
          "created_at": "2024-02-28T02:55:22Z",
          "updated_at": "2024-04-23T14:28:58Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1993761793,
      "node_id": "IC_kwDOABII58521mQB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1993761793",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-13T07:57:55Z",
      "updated_at": "2024-03-13T07:57:55Z",
      "author_association": "CONTRIBUTOR",
      "body": "If the process (`bitcoind`) is expected/allowed to open/close any files or sockets at any time, then this code is racy:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/1105aa46dd1008c556b8c435f1efcb9be09a1644/test/functional/test_framework/netutil.py#L39-L40\r\n\r\nIt may happen that `listdir()` will show an existent fd but by the time `readlink()` is called on it, it gets closed and is not in `/proc` anymore.\r\n\r\nTentative fix, I did not try it as this is Linux specific:\r\n\r\n```diff\r\n--- i/test/functional/test_framework/netutil.py\r\n+++ w/test/functional/test_framework/netutil.py\r\n@@ -34,13 +34,16 @@ def get_socket_inodes(pid):\r\n     '''\r\n     Get list of socket inodes for process pid.\r\n     '''\r\n     base = '/proc/%i/fd' % pid\r\n     inodes = []\r\n     for item in os.listdir(base):\r\n-        target = os.readlink(os.path.join(base, item))\r\n+        try:\r\n+            target = os.readlink(os.path.join(base, item))\r\n+        except FileNotFoundError:\r\n+            continue\r\n         if target.startswith('socket:'):\r\n             inodes.append(int(target[8:-1]))\r\n     return inodes\r\n \r\n def _remove_empty(array):\r\n     return [x for x in array if x !='']\r\n```",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/29643#issuecomment-1993761793",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29643"
    },
    {
      "event": "commented",
      "id": 1993781751,
      "node_id": "IC_kwDOABII58521rH3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1993781751",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-13T08:11:32Z",
      "updated_at": "2024-03-13T08:11:32Z",
      "author_association": "MEMBER",
      "body": "Excerpt (so it does not go away, when deleted on Cirrus in 90 days)\r\n\r\nhttps://cirrus-ci.com/task/5017383576797184?logs=ci#L3228\r\n\r\n```\r\n test  2024-03-06T03:49:39.220000Z TestFramework (INFO): Bind test for [] \r\n test  2024-03-06T03:49:39.225000Z TestFramework.node0 (DEBUG): bitcoind started, waiting for RPC to come up \r\n node0 2024-03-06T03:49:40.194381Z [init] [init/common.cpp:155] [LogPackageVersion] Bitcoin Core version v26.99.0-229a72cef4ba-dirty (release build) \r\n node0 2024-03-06T03:49:40.194766Z [init] [init.cpp:772] [InitParameterInteraction] InitParameterInteraction: parameter interaction: -listen=0 -> setting -i2pacceptincoming=0 \r\n node0 2024-03-06T03:49:40.197231Z [init] [node/chainstatemanager_args.cpp:54] [ApplyArgsManOptions] Script verification uses 3 additional threads \r\n node0 2024-03-06T03:49:40.197342Z [init] [kernel/context.cpp:20] [Context] Using the 'x86_shani(1way,2way)' SHA256 implementation \r\n node0 2024-03-06T03:49:40.197403Z [init] [random.cpp:105] [ReportHardwareRand] Using RdSeed as an additional entropy source \r\n node0 2024-03-06T03:49:40.197424Z [init] [random.cpp:108] [ReportHardwareRand] Using RdRand as an additional entropy source \r\n node0 2024-03-06T03:49:40.235555Z [init] [init/common.cpp:126] [StartLogging] Default data directory /root/.bitcoin \r\n node0 2024-03-06T03:49:40.235618Z [init] [init/common.cpp:127] [StartLogging] Using data directory /ci_container_base/ci/scratch/test_runner/test_runner_‚Çø_üèÉ_20240306_034415/rpc_bind_254/node0/regtest \r\n node0 2024-03-06T03:49:40.235660Z [init] [init/common.cpp:132] [StartLogging] Config file: /ci_container_base/ci/scratch/test_runner/test_runner_‚Çø_üèÉ_20240306_034415/rpc_bind_254/node0/bitcoin.conf \r\n node0 2024-03-06T03:49:40.235708Z [init] [common/args.cpp:803] [logArgsPrefix] Config file arg: regtest=\"1\" \r\n node0 2024-03-06T03:49:40.235746Z [init] [common/args.cpp:803] [logArgsPrefix] Config file arg: [regtest] connect=\"0\" \r\n node0 2024-03-06T03:49:40.235775Z [init] [common/args.cpp:803] [logArgsPrefix] Config file arg: [regtest] deprecatedrpc=\"create_bdb\" \r\n node0 2024-03-06T03:49:40.235799Z [init] [common/args.cpp:803] [logArgsPrefix] Config file arg: [regtest] discover=\"0\" \r\n node0 2024-03-06T03:49:40.235821Z [init] [common/args.cpp:803] [logArgsPrefix] Config file arg: [regtest] dnsseed=\"0\" \r\n node0 2024-03-06T03:49:40.235852Z [init] [common/args.cpp:803] [logArgsPrefix] Config file arg: [regtest] fallbackfee=\"0.0002\" \r\n node0 2024-03-06T03:49:40.235874Z [init] [common/args.cpp:803] [logArgsPrefix] Config file arg: [regtest] fixedseeds=\"0\" \r\n node0 2024-03-06T03:49:40.235894Z [init] [common/args.cpp:803] [logArgsPrefix] Config file arg: [regtest] keypool=\"1\" \r\n node0 2024-03-06T03:49:40.235915Z [init] [common/args.cpp:803] [logArgsPrefix] Config file arg: [regtest] listenonion=\"0\" \r\n node0 2024-03-06T03:49:40.235944Z [init] [common/args.cpp:803] [logArgsPrefix] Config file arg: [regtest] natpmp=\"0\" \r\n node0 2024-03-06T03:49:40.235968Z [init] [common/args.cpp:803] [logArgsPrefix] Config file arg: [regtest] peertimeout=\"999999999\" \r\n node0 2024-03-06T03:49:40.235990Z [init] [common/args.cpp:803] [logArgsPrefix] Config file arg: [regtest] port=\"17048\" \r\n node0 2024-03-06T03:49:40.236025Z [init] [common/args.cpp:803] [logArgsPrefix] Config file arg: [regtest] printtoconsole=\"0\" \r\n node0 2024-03-06T03:49:40.236077Z [init] [common/args.cpp:803] [logArgsPrefix] Config file arg: [regtest] rpcdoccheck=\"1\" \r\n node0 2024-03-06T03:49:40.236105Z [init] [common/args.cpp:803] [logArgsPrefix] Config file arg: [regtest] rpcport=\"22048\" \r\n node0 2024-03-06T03:49:40.236139Z [init] [common/args.cpp:803] [logArgsPrefix] Config file arg: [regtest] rpcservertimeout=\"99000\" \r\n node0 2024-03-06T03:49:40.236167Z [init] [common/args.cpp:803] [logArgsPrefix] Config file arg: [regtest] server=\"1\" \r\n node0 2024-03-06T03:49:40.236205Z [init] [common/args.cpp:803] [logArgsPrefix] Config file arg: [regtest] shrinkdebugfile=\"0\" \r\n node0 2024-03-06T03:49:40.236238Z [init] [common/args.cpp:803] [logArgsPrefix] Config file arg: [regtest] unsafesqlitesync=\"1\" \r\n node0 2024-03-06T03:49:40.236262Z [init] [common/args.cpp:803] [logArgsPrefix] Config file arg: [regtest] upnp=\"0\" \r\n node0 2024-03-06T03:49:40.236296Z [init] [common/args.cpp:803] [logArgsPrefix] Command-line arg: datadir=\"/ci_container_base/ci/scratch/test_runner/test_runner_‚Çø_üèÉ_20240306_034415/rpc_bind_254/node0\" \r\n node0 2024-03-06T03:49:40.236326Z [init] [common/args.cpp:803] [logArgsPrefix] Command-line arg: debug=\"\" \r\n node0 2024-03-06T03:49:40.236352Z [init] [common/args.cpp:803] [logArgsPrefix] Command-line arg: debugexclude=\"libevent\" \r\n node0 2024-03-06T03:49:40.236375Z [init] [common/args.cpp:803] [logArgsPrefix] Command-line arg: debugexclude=\"leveldb\" \r\n node0 2024-03-06T03:49:40.236395Z [init] [common/args.cpp:803] [logArgsPrefix] Command-line arg: debugexclude=\"rand\" \r\n node0 2024-03-06T03:49:40.236421Z [init] [common/args.cpp:803] [logArgsPrefix] Command-line arg: disablewallet=\"\" \r\n node0 2024-03-06T03:49:40.236464Z [init] [common/args.cpp:803] [logArgsPrefix] Command-line arg: disablewallet=\"\" \r\n node0 2024-03-06T03:49:40.236485Z [init] [common/args.cpp:803] [logArgsPrefix] Command-line arg: listen=false \r\n node0 2024-03-06T03:49:40.236526Z [init] [common/args.cpp:803] [logArgsPrefix] Command-line arg: loglevel=\"trace\" \r\n node0 2024-03-06T03:49:40.236549Z [init] [common/args.cpp:803] [logArgsPrefix] Command-line arg: logsourcelocations=\"\" \r\n node0 2024-03-06T03:49:40.236569Z [init] [common/args.cpp:803] [logArgsPrefix] Command-line arg: logthreadnames=\"\" \r\n node0 2024-03-06T03:49:40.236588Z [init] [common/args.cpp:803] [logArgsPrefix] Command-line arg: logtimemicros=\"\" \r\n node0 2024-03-06T03:49:40.236608Z [init] [common/args.cpp:803] [logArgsPrefix] Command-line arg: rpcallowip=\"127.0.0.1\" \r\n node0 2024-03-06T03:49:40.236629Z [init] [common/args.cpp:803] [logArgsPrefix] Command-line arg: uacomment=\"testnode0\" \r\n node0 2024-03-06T03:49:40.236648Z [init] [common/args.cpp:803] [logArgsPrefix] Command-line arg: v2transport=\"0\" \r\n node0 2024-03-06T03:49:40.236672Z [init] [init.cpp:1120] [AppInitMain] Using at most 125 automatic connections (1048576 file descriptors available) \r\n node0 2024-03-06T03:49:40.286467Z [init] [script/sigcache.cpp:104] [InitSignatureCache] Using 16 MiB out of 16 MiB requested for signature cache, able to store 524288 elements \r\n node0 2024-03-06T03:49:40.325665Z [init] [validation.cpp:1885] [InitScriptExecutionCache] Using 16 MiB out of 16 MiB requested for script execution cache, able to store 524288 elements \r\n node0 2024-03-06T03:49:40.325868Z [init] [wallet/init.cpp:130] [Construct] Wallet disabled! \r\n node0 2024-03-06T03:49:40.335387Z [scheduler] [util/thread.cpp:20] [TraceThread] scheduler thread start \r\n node0 2024-03-06T03:49:40.381330Z [init] [httpserver.cpp:239] [InitHTTPAllowList] [http] Allowing HTTP connections from: 127.0.0.0/8 ::1/128 127.0.0.1/32 \r\n node0 2024-03-06T03:49:40.381441Z [init] [httpserver.cpp:369] [HTTPBindAddresses] WARNING: option -rpcallowip was specified without -rpcbind; this doesn't usually make sense \r\n node0 2024-03-06T03:49:40.381477Z [init] [httpserver.cpp:385] [HTTPBindAddresses] Binding RPC on address ::1 port 22048 \r\n node0 2024-03-06T03:49:40.381613Z [init] [httpserver.cpp:385] [HTTPBindAddresses] Binding RPC on address 127.0.0.1 port 22048 \r\n node0 2024-03-06T03:49:40.381670Z [init] [httpserver.cpp:464] [InitHTTPServer] [http] Initialized HTTP server \r\n node0 2024-03-06T03:49:40.381696Z [init] [httpserver.cpp:466] [InitHTTPServer] [http] creating work queue of depth 16 \r\n node0 2024-03-06T03:49:40.381718Z [init] [rpc/server.cpp:298] [StartRPC] [rpc] Starting RPC \r\n node0 2024-03-06T03:49:40.381811Z [init] [httprpc.cpp:298] [StartHTTPRPC] [rpc] Starting HTTP RPC server \r\n node0 2024-03-06T03:49:40.381834Z [init] [httprpc.cpp:247] [InitRPCAuthentication] Using random cookie authentication. \r\n node0 2024-03-06T03:49:40.383438Z [init] [rpc/request.cpp:111] [GenerateAuthCookie] Generated RPC authentication cookie /ci_container_base/ci/scratch/test_runner/test_runner_‚Çø_üèÉ_20240306_034415/rpc_bind_254/node0/regtest/.cookie \r\n node0 2024-03-06T03:49:40.383487Z [init] [httpserver.cpp:746] [RegisterHTTPHandler] [http] Registering HTTP handler for / (exactmatch 1) \r\n node0 2024-03-06T03:49:40.383521Z [init] [httpserver.cpp:746] [RegisterHTTPHandler] [http] Registering HTTP handler for /wallet/ (exactmatch 0) \r\n node0 2024-03-06T03:49:40.383549Z [init] [httpserver.cpp:489] [StartHTTPServer] Starting HTTP server with 4 worker threads \r\n node0 2024-03-06T03:49:40.384719Z [init] [init.cpp:1232] [AppInitMain] Using /16 prefix for IP bucketing \r\n node0 2024-03-06T03:49:40.384755Z [init] [noui.cpp:56] [noui_InitMessage] init message: Loading P2P addresses‚Ä¶ \r\n node0 2024-03-06T03:49:40.394533Z [init] [logging/timer.h:58] [Log] [addrman] CheckAddrman: new 0, tried 0, total 0 started \r\n node0 2024-03-06T03:49:40.395315Z [init] [logging/timer.h:58] [Log] [addrman] CheckAddrman: completed (0.74ms) \r\n node0 2024-03-06T03:49:40.395364Z [init] [addrdb.cpp:198] [LoadAddrman] Loaded 0 addresses from peers.dat  2ms \r\n node0 2024-03-06T03:49:40.395865Z [init] [noui.cpp:56] [noui_InitMessage] init message: Loading banlist‚Ä¶ \r\n node0 2024-03-06T03:49:40.395994Z [init] [banman.cpp:40] [LoadBanlist] [net] Loaded 0 banned node addresses/subnets  0ms \r\n node0 2024-03-06T03:49:40.396182Z [init] [net.cpp:2337] [SetTryNewOutboundPeer] [net] setting try another outbound peer=false \r\n node0 2024-03-06T03:49:40.396218Z [init] [net.cpp:3101] [SetNetworkActive] SetNetworkActive: true \r\n node0 2024-03-06T03:49:40.404107Z [http] [httpserver.cpp:352] [ThreadHTTP] [http] Entering http event loop \r\n node0 2024-03-06T03:49:40.405789Z [init] [policy/fees.cpp:470] [Read] [estimatefee] Reading estimates: 190 buckets counting confirms up to 48 blocks \r\n node0 2024-03-06T03:49:40.406141Z [init] [policy/fees.cpp:470] [Read] [estimatefee] Reading estimates: 190 buckets counting confirms up to 12 blocks \r\n node0 2024-03-06T03:49:40.417490Z [init] [policy/fees.cpp:470] [Read] [estimatefee] Reading estimates: 190 buckets counting confirms up to 1008 blocks \r\n node0 2024-03-06T03:49:40.421476Z [init] [node/chainstatemanager_args.cpp:54] [ApplyArgsManOptions] Script verification uses 3 additional threads \r\n node0 2024-03-06T03:49:40.421529Z [init] [init.cpp:1465] [AppInitMain] Cache configuration: \r\n node0 2024-03-06T03:49:40.421852Z [init] [init.cpp:1466] [AppInitMain] * Using 2.0 MiB for block index database \r\n node0 2024-03-06T03:49:40.421884Z [init] [init.cpp:1474] [AppInitMain] * Using 8.0 MiB for chain state database \r\n node0 2024-03-06T03:49:40.421968Z [init] [init.cpp:1492] [AppInitMain] * Using 440.0 MiB for in-memory UTXO set (plus up to 286.1 MiB of unused mempool space) \r\n node0 2024-03-06T03:49:40.435895Z [init] [noui.cpp:56] [noui_InitMessage] init message: Loading block index‚Ä¶ \r\n node0 2024-03-06T03:49:40.435946Z [init] [node/chainstate.cpp:168] [LoadChainstate] Validating signatures for all blocks. \r\n node0 2024-03-06T03:49:40.435979Z [init] [node/chainstate.cpp:170] [LoadChainstate] Setting nMinimumChainWork=0000000000000000000000000000000000000000000000000000000000000000 \r\n node0 2024-03-06T03:49:40.438766Z [init] [dbwrapper.cpp:241] [CDBWrapper] Opening LevelDB in /ci_container_base/ci/scratch/test_runner/test_runner_‚Çø_üèÉ_20240306_034415/rpc_bind_254/node0/regtest/blocks/index \r\n node0 2024-03-06T03:49:40.442581Z [init] [dbwrapper.cpp:249] [CDBWrapper] Opened LevelDB successfully \r\n node0 2024-03-06T03:49:40.442671Z [init] [dbwrapper.cpp:274] [CDBWrapper] Using obfuscation key for /ci_container_base/ci/scratch/test_runner/test_runner_‚Çø_üèÉ_20240306_034415/rpc_bind_254/node0/regtest/blocks/index: 0000000000000000 \r\n node0 2024-03-06T03:49:40.443112Z [init] [node/blockstorage.cpp:505] [LoadBlockIndexDB] LoadBlockIndexDB: last block file = 0 \r\n node0 2024-03-06T03:49:40.443167Z [init] [node/blockstorage.cpp:509] [LoadBlockIndexDB] LoadBlockIndexDB: last block file info: CBlockFileInfo(blocks=1, size=293, heights=0...0, time=2011-02-02...2011-02-02) \r\n node0 2024-03-06T03:49:40.443198Z [init] [node/blockstorage.cpp:520] [LoadBlockIndexDB] Checking all blk files are present... \r\n node0 2024-03-06T03:49:40.443324Z [init] [node/chainstate.cpp:108] [CompleteChainstateInitialization] Initializing chainstate Chainstate [ibd] @ height -1 (null) \r\n node0 2024-03-06T03:49:40.443408Z [init] [dbwrapper.cpp:241] [CDBWrapper] Opening LevelDB in /ci_container_base/ci/scratch/test_runner/test_runner_‚Çø_üèÉ_20240306_034415/rpc_bind_254/node0/regtest/chainstate \r\n node0 2024-03-06T03:49:40.447283Z [init] [dbwrapper.cpp:249] [CDBWrapper] Opened LevelDB successfully \r\n node0 2024-03-06T03:49:40.447491Z [init] [dbwrapper.cpp:274] [CDBWrapper] Using obfuscation key for /ci_container_base/ci/scratch/test_runner/test_runner_‚Çø_üèÉ_20240306_034415/rpc_bind_254/node0/regtest/chainstate: 42c84b7dbf200f1f \r\n node0 2024-03-06T03:49:40.448393Z [init] [validation.cpp:4395] [LoadChainTip] Loaded best chain: hashBestChain=0f9188f13cb7b2c71f2a335e3a4fc328bf5beb436012afca590b1a11466e2206 height=0 date=2011-02-02T23:16:42Z progress=1.000000 \r\n node0 2024-03-06T03:49:40.450345Z [init] [dbwrapper.cpp:241] [CDBWrapper] Opening LevelDB in /ci_container_base/ci/scratch/test_runner/test_runner_‚Çø_üèÉ_20240306_034415/rpc_bind_254/node0/regtest/chainstate \r\n node0 2024-03-06T03:49:40.451012Z [init] [dbwrapper.cpp:249] [CDBWrapper] Opened LevelDB successfully \r\n node0 2024-03-06T03:49:40.451299Z [init] [dbwrapper.cpp:274] [CDBWrapper] Using obfuscation key for /ci_container_base/ci/scratch/test_runner/test_runner_‚Çø_üèÉ_20240306_034415/rpc_bind_254/node0/regtest/chainstate: 42c84b7dbf200f1f \r\n node0 2024-03-06T03:49:40.451339Z [init] [validation.cpp:5196] [ResizeCoinsCaches] [Chainstate [ibd] @ height 0 (0f9188f13cb7b2c71f2a335e3a4fc328bf5beb436012afca590b1a11466e2206)] resized coinsdb cache to 8.0 MiB \r\n node0 2024-03-06T03:49:40.451368Z [init] [validation.cpp:5198] [ResizeCoinsCaches] [Chainstate [ibd] @ height 0 (0f9188f13cb7b2c71f2a335e3a4fc328bf5beb436012afca590b1a11466e2206)] resized coinstip cache to 440.0 MiB \r\n node0 2024-03-06T03:49:40.451426Z [init] [noui.cpp:56] [noui_InitMessage] init message: Verifying blocks‚Ä¶ \r\n node0 2024-03-06T03:49:40.451498Z [init] [init.cpp:1553] [AppInitMain]  block index              15ms \r\n node0 2024-03-06T03:49:40.455465Z [init] [init.cpp:1639] [AppInitMain] Setting NODE_NETWORK on non-prune mode \r\n node0 2024-03-06T03:49:40.456195Z [init] [init.cpp:1748] [AppInitMain] block tree size = 1 \r\n node0 2024-03-06T03:49:40.456511Z [init] [init.cpp:1761] [AppInitMain] nBestHeight = 0 \r\n node0 2024-03-06T03:49:40.456685Z [init] [noui.cpp:56] [noui_InitMessage] init message: Starting network threads‚Ä¶ \r\n node0 2024-03-06T03:49:40.456770Z [init] [net.cpp:3250] [Start] DNS seeding disabled \r\n node0 2024-03-06T03:49:40.456881Z [init] [noui.cpp:56] [noui_InitMessage] init message: Done loading \r\n node0 2024-03-06T03:49:40.462476Z [addcon] [util/thread.cpp:20] [TraceThread] addcon thread start \r\n node0 2024-03-06T03:49:40.466856Z [initload] [util/thread.cpp:20] [TraceThread] initload thread start \r\n node0 2024-03-06T03:49:40.467771Z [initload] [kernel/mempool_persist.cpp:73] [LoadMempool] Loading 0 mempool transactions from disk... \r\n node0 2024-03-06T03:49:40.467829Z [initload] [kernel/mempool_persist.cpp:145] [LoadMempool] Imported mempool transactions from disk: 0 succeeded, 0 failed, 0 expired, 0 already there, 0 waiting for initial broadcast \r\n node0 2024-03-06T03:49:40.467864Z [initload] [util/thread.cpp:22] [TraceThread] initload thread exit \r\n node0 2024-03-06T03:49:40.476575Z [msghand] [util/thread.cpp:20] [TraceThread] msghand thread start \r\n node0 2024-03-06T03:49:40.478057Z [http] [httpserver.cpp:306] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:58838 \r\n node0 2024-03-06T03:49:40.478371Z [httpworker.1] [rpc/request.cpp:187] [parse] [rpc] ThreadRPCServer method=getblockcount user=__cookie__ \r\n test  2024-03-06T03:49:40.479000Z TestFramework.node0 (DEBUG): RPC successfully started \r\n node0 2024-03-06T03:49:40.479166Z [http] [httpserver.cpp:306] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:58838 \r\n node0 2024-03-06T03:49:40.479318Z [httpworker.3] [rpc/request.cpp:187] [parse] [rpc] ThreadRPCServer method=getmempoolinfo user=__cookie__ \r\n test  2024-03-06T03:49:40.480000Z TestFramework (ERROR): Unexpected exception caught during testing \r\n                                   Traceback (most recent call last):\r\n                                     File \"/ci_container_base/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/test/functional/test_framework/test_framework.py\", line 131, in main\r\n                                       self.run_test()\r\n                                     File \"/ci_container_base/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/test/functional/rpc_bind.py\", line 86, in run_test\r\n                                       self._run_loopback_tests()\r\n                                     File \"/ci_container_base/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/test/functional/rpc_bind.py\", line 106, in _run_loopback_tests\r\n                                       self.run_bind_test(['127.0.0.1'], '127.0.0.1', [],\r\n                                     File \"/ci_container_base/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/test/functional/rpc_bind.py\", line 45, in run_bind_test\r\n                                       assert_equal(set(get_bind_addrs(pid)), set(expected))\r\n                                                        ^^^^^^^^^^^^^^^^^^^\r\n                                     File \"/ci_container_base/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/test/functional/test_framework/netutil.py\", line 84, in get_bind_addrs\r\n                                       inodes = get_socket_inodes(pid)\r\n                                                ^^^^^^^^^^^^^^^^^^^^^^\r\n                                     File \"/ci_container_base/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/test/functional/test_framework/netutil.py\", line 40, in get_socket_inodes\r\n                                       target = os.readlink(os.path.join(base, item))\r\n                                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n                                   FileNotFoundError: [Errno 2] No such file or directory: '/proc/34007/fd/23'\r\n test  2024-03-06T03:49:40.481000Z TestFramework (DEBUG): Closing down network thread \r\n node0 2024-03-06T03:49:40.481555Z [net] [util/thread.cpp:20] [TraceThread] net thread start \r\n test  2024-03-06T03:49:40.531000Z TestFramework (INFO): Stopping nodes \r\n test  2024-03-06T03:49:40.531000Z TestFramework.node0 (DEBUG): Stopping node \r\n node0 2024-03-06T03:49:40.532204Z [http] [httpserver.cpp:306] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:58838 \r\n node0 2024-03-06T03:49:40.532461Z [httpworker.0] [rpc/request.cpp:187] [parse] [rpc] ThreadRPCServer method=stop user=__cookie__ ",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/29643#issuecomment-1993781751",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29643"
    },
    {
      "event": "labeled",
      "id": 12191729005,
      "node_id": "LE_lADOABII586CGnYFzwAAAALWrwVt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12191729005",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-20T21:44:38Z",
      "label": {
        "name": "Tests",
        "color": "d4c5f9"
      }
    }
  ]
}