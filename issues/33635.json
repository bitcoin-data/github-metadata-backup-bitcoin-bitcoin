{
  "type": "issue",
  "issue": {
    "id": 3519267236,
    "node_id": "I_kwDOABII587Rw8Gk",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33635",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33635/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33635/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33635/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/33635",
    "number": 33635,
    "state": "open",
    "state_reason": "reopened",
    "title": "Intermittent issue in feature_assumeutxo.py\", line 629, in run_test                                        assert not self.has_blockfile(n1, \"00002\"), \"too many blockfiles\"",
    "body": "Seen locally in https://drahtbot.space/temp_scratch/feature_assumeutxo_265.tar.zstd:\n\ncommit should be roughly 40e7d4cd0d7f1d922b92b0c640d3d89eef059411 and the command was `RUN_UNIT_TESTS=false MAKEJOBS=\"-j8\" FILE_ENV=\"./ci/test/00_setup_env_native_nowallet_libbitcoinkernel.sh\" ./ci/test_run_all.sh`\n\n```\n node1 2025-10-15T18:56:48.763939Z [shutoff] [txdb.cpp:151] [virtual bool CCoinsViewDB::BatchWrite(CoinsViewCacheCursor &, const uint256 &)] [coindb] Writing final batch of 0.00 MiB \n node1 2025-10-15T18:56:48.763948Z [shutoff] [txdb.cpp:153] [virtual bool CCoinsViewDB::BatchWrite(CoinsViewCacheCursor &, const uint256 &)] [coindb] Committed 0 changed transaction outputs (out of 0) to coin database... \n node1 2025-10-15T18:56:48.763958Z [shutoff] [logging/timer.h:58] [void BCLog::Timer<std::chrono::duration<long long, std::ratio<1, 1000>>>::Log(const std::string &) [TimeType = std::chrono::duration<long long, std::ratio<1, 1000>>]] [bench] FlushStateToDisk: write coins cache to disk (0 coins, 256KiB) completed (0.02ms) \n node1 2025-10-15T18:56:48.763966Z [shutoff] [validationinterface.cpp:246] [void ValidationSignals::ChainStateFlushed(ChainstateRole, const CBlockLocator &)] [validation] Enqueuing ChainStateFlushed: block hash=5d3144f90878dbabd3a42352be3294df923c93198e1399b93d07292c9cd1e1ce \n node1 2025-10-15T18:56:48.763997Z [shutoff] [validation.cpp:2837] [bool Chainstate::FlushStateToDisk(BlockValidationState &, FlushStateMode, int)] [coindb] Writing chainstate to disk: flush mode=ALWAYS, prune=0, large=0, critical=0, periodic=0 \n node1 2025-10-15T18:56:48.764007Z [shutoff] [logging/timer.h:58] [void BCLog::Timer<std::chrono::duration<long long, std::ratio<1, 1000>>>::Log(const std::string &) [TimeType = std::chrono::duration<long long, std::ratio<1, 1000>>]] [bench] FlushStateToDisk: write block and undo data to disk started \n node1 2025-10-15T18:56:48.764041Z [shutoff] [logging/timer.h:58] [void BCLog::Timer<std::chrono::duration<long long, std::ratio<1, 1000>>>::Log(const std::string &) [TimeType = std::chrono::duration<long long, std::ratio<1, 1000>>]] [bench] FlushStateToDisk: write block and undo data to disk completed (0.03ms) \n node1 2025-10-15T18:56:48.764050Z [shutoff] [logging/timer.h:58] [void BCLog::Timer<std::chrono::duration<long long, std::ratio<1, 1000>>>::Log(const std::string &) [TimeType = std::chrono::duration<long long, std::ratio<1, 1000>>]] [bench] FlushStateToDisk: write block index to disk started \n node1 2025-10-15T18:56:48.764061Z [shutoff] [logging/timer.h:58] [void BCLog::Timer<std::chrono::duration<long long, std::ratio<1, 1000>>>::Log(const std::string &) [TimeType = std::chrono::duration<long long, std::ratio<1, 1000>>]] [bench] FlushStateToDisk: write block index to disk completed (0.01ms) \n node1 2025-10-15T18:56:48.764067Z [shutoff] [logging/timer.h:58] [void BCLog::Timer<std::chrono::duration<long long, std::ratio<1, 1000>>>::Log(const std::string &) [TimeType = std::chrono::duration<long long, std::ratio<1, 1000>>]] [bench] FlushStateToDisk: write coins cache to disk (0 coins, 256KiB) started \n node1 2025-10-15T18:56:48.764076Z [shutoff] [txdb.cpp:151] [virtual bool CCoinsViewDB::BatchWrite(CoinsViewCacheCursor &, const uint256 &)] [coindb] Writing final batch of 0.00 MiB \n node1 2025-10-15T18:56:48.764083Z [shutoff] [txdb.cpp:153] [virtual bool CCoinsViewDB::BatchWrite(CoinsViewCacheCursor &, const uint256 &)] [coindb] Committed 0 changed transaction outputs (out of 0) to coin database... \n node1 2025-10-15T18:56:48.764092Z [shutoff] [logging/timer.h:58] [void BCLog::Timer<std::chrono::duration<long long, std::ratio<1, 1000>>>::Log(const std::string &) [TimeType = std::chrono::duration<long long, std::ratio<1, 1000>>]] [bench] FlushStateToDisk: write coins cache to disk (0 coins, 256KiB) completed (0.02ms) \n node1 2025-10-15T18:56:48.764100Z [shutoff] [validationinterface.cpp:246] [void ValidationSignals::ChainStateFlushed(ChainstateRole, const CBlockLocator &)] [validation] Enqueuing ChainStateFlushed: block hash=6d9186a0db6df121d2006c40c7827c447afe6329b705666bca1744b72c71f0ad \n node1 2025-10-15T18:56:48.767027Z [shutoff] [init.cpp:410] [void Shutdown(NodeContext &)] Shutdown done \n test  2025-10-15T18:56:48.791717Z TestFramework.node1 (DEBUG): Node stopped \n test  2025-10-15T18:56:48.791816Z TestFramework (INFO): Checking that blocks are segmented on disk \n test  2025-10-15T18:56:48.791990Z TestFramework (ERROR): Unexpected exception \n                                   Traceback (most recent call last):\n                                     File \"/ci_container_base/test/functional/test_framework/test_framework.py\", line 198, in main\n                                       self.run_test()\n                                     File \"/ci_container_base/ci/scratch/build-x86_64-pc-linux-gnu/test/functional/feature_assumeutxo.py\", line 629, in run_test\n                                       assert not self.has_blockfile(n1, \"00002\"), \"too many blockfiles\"\n                                   AssertionError: too many blockfiles\n",
    "user": {
      "login": "maflcko",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/maflcko",
      "html_url": "https://github.com/maflcko",
      "followers_url": "https://api.github.com/users/maflcko/followers",
      "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
      "organizations_url": "https://api.github.com/users/maflcko/orgs",
      "repos_url": "https://api.github.com/users/maflcko/repos",
      "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/maflcko/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "labels": [
      {
        "id": 5334691551,
        "node_id": "LA_kwDOABII588AAAABPfju3w",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
        "name": "CI failed",
        "description": "",
        "color": "cccccc",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "MEMBER",
    "locked": false,
    "comments": 7,
    "closed_by": {
      "login": "maflcko",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/maflcko",
      "html_url": "https://github.com/maflcko",
      "followers_url": "https://api.github.com/users/maflcko/followers",
      "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
      "organizations_url": "https://api.github.com/users/maflcko/orgs",
      "repos_url": "https://api.github.com/users/maflcko/repos",
      "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/maflcko/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "created_at": "2025-10-15T19:15:40Z",
    "updated_at": "2026-01-30T14:51:34Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 20303674381,
      "node_id": "LE_lADOABII587Rw8GkzwAAAAS6MXwN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20303674381",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-15T19:15:47Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3799899091,
      "node_id": "IC_kwDOABII587ifdvT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3799899091",
      "actor": {
        "login": "b-l-u-e",
        "id": 32414660,
        "node_id": "MDQ6VXNlcjMyNDE0NjYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/32414660?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/b-l-u-e",
        "html_url": "https://github.com/b-l-u-e",
        "followers_url": "https://api.github.com/users/b-l-u-e/followers",
        "following_url": "https://api.github.com/users/b-l-u-e/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/b-l-u-e/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/b-l-u-e/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/b-l-u-e/subscriptions",
        "organizations_url": "https://api.github.com/users/b-l-u-e/orgs",
        "repos_url": "https://api.github.com/users/b-l-u-e/repos",
        "events_url": "https://api.github.com/users/b-l-u-e/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/b-l-u-e/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-26T14:30:58Z",
      "updated_at": "2026-01-26T14:30:58Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Seen locally in https://drahtbot.space/temp_scratch/feature_assumeutxo_265.tar.zstd:\n> \ni tried studying from the report shared above realized that maybe the assertion `assert not self.has_blockfile(n1, \"00002\")` was too strict perhaps maybe we can condition it  because segmentation works as  expected\n\ncoz with `-fastprune` it does 64KB blockfiles... coz node1 runs two chainstates concurrently NORMAL and ASSUMED...so this segmentation keeps their blocks separate\n\nso when NORMAL syncs enough blocks to fill blk00000.dat it creates blk00002.dat\n\nfrom node1/regtest/debug.log\n```\n[assumed] initializing blockfile cursor to BlockfileCursor(file_num=1)\n...\nLeaving block file 0: CBlockFileInfo(blocks=242, size=65331, heights=0...240) (onto 2) (height 241)\n```\ni think or rather maybe test should verify segmentation works blk00001.dat exists for ASSUMED blocks not just limit to 2 files",
      "user": {
        "login": "b-l-u-e",
        "id": 32414660,
        "node_id": "MDQ6VXNlcjMyNDE0NjYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/32414660?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/b-l-u-e",
        "html_url": "https://github.com/b-l-u-e",
        "followers_url": "https://api.github.com/users/b-l-u-e/followers",
        "following_url": "https://api.github.com/users/b-l-u-e/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/b-l-u-e/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/b-l-u-e/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/b-l-u-e/subscriptions",
        "organizations_url": "https://api.github.com/users/b-l-u-e/orgs",
        "repos_url": "https://api.github.com/users/b-l-u-e/repos",
        "events_url": "https://api.github.com/users/b-l-u-e/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/b-l-u-e/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/33635#issuecomment-3799899091",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33635"
    },
    {
      "event": "commented",
      "id": 3806783779,
      "node_id": "IC_kwDOABII587i5ukj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3806783779",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-27T18:23:41Z",
      "updated_at": "2026-01-27T18:23:41Z",
      "author_association": "MEMBER",
      "body": "I think this is  `-stopatheight` not working?",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/33635#issuecomment-3806783779",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33635"
    },
    {
      "event": "commented",
      "id": 3806798344,
      "node_id": "IC_kwDOABII587i5yII",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3806798344",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-27T18:26:48Z",
      "updated_at": "2026-01-27T18:26:48Z",
      "author_association": "MEMBER",
      "body": "Hmmm, maybe not, because this diff is passing:\n\n```diff\ndiff --git a/test/functional/feature_assumeutxo.py b/test/functional/feature_assumeutxo.py\nindex 20ebd823d1..959b3bbd9a 100755\n--- a/test/functional/feature_assumeutxo.py\n+++ b/test/functional/feature_assumeutxo.py\n@@ -606,7 +606,7 @@ class AssumeutxoTest(BitcoinTestFramework):\n         assert signed_txid in n1.getrawmempool()\n         assert not n1.gettxout(prev_tx['txid'], 0)\n \n-        PAUSE_HEIGHT = FINAL_HEIGHT - 40\n+        PAUSE_HEIGHT = FINAL_HEIGHT \n \n         self.log.info(\"Restarting node to stop at height %d\", PAUSE_HEIGHT)\n         self.restart_node(1, extra_args=[\n",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/33635#issuecomment-3806798344",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33635"
    },
    {
      "event": "commented",
      "id": 3816554151,
      "node_id": "IC_kwDOABII587je_6n",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3816554151",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-29T09:42:55Z",
      "updated_at": "2026-01-29T09:42:55Z",
      "author_association": "MEMBER",
      "body": "I tried to reproduce this with the command below, but failed. I guess this fixed itself?\n\n`while ( TEST_RUNNER_EXTRA=\"$( for i in {1..400}; do echo -n \"feature_assumeutxo.py \"; done )\" RUN_UNIT_TESTS=false MAKEJOBS=\"-j8\" FILE_ENV=\"./ci/test/00_setup_env_native_nowallet.sh\" ./ci/test_run_all.sh ) ; do echo _ >> /tmp/runs ; done`",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/33635#issuecomment-3816554151",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33635"
    },
    {
      "event": "closed",
      "id": 22371271910,
      "node_id": "CE_lADOABII587Rw8GkzwAAAAU1boTm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22371271910",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-29T09:42:59Z"
    },
    {
      "event": "commented",
      "id": 3816638768,
      "node_id": "IC_kwDOABII587jfUkw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3816638768",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-29T10:00:28Z",
      "updated_at": "2026-01-29T10:00:28Z",
      "author_association": "MEMBER",
      "body": "Nvm. It happened again after a few thousand iterations:\n\n\nhttps://drahtbot.space/temp_scratch/feature_assumeutxo_201.tar.zstd",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/33635#issuecomment-3816638768",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33635"
    },
    {
      "event": "reopened",
      "id": 22371795360,
      "node_id": "REE_lADOABII587Rw8GkzwAAAAU1doGg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22371795360",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-29T10:00:32Z"
    },
    {
      "event": "commented",
      "id": 3824033117,
      "node_id": "IC_kwDOABII587j7h1d",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3824033117",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-30T14:22:55Z",
      "updated_at": "2026-01-30T14:22:55Z",
      "author_association": "MEMBER",
      "body": "> i tried studying from the report shared above realized that maybe the assertion `assert not self.has_blockfile(n1, \"00002\")` was too strict perhaps maybe we can condition it because segmentation works as expected\n> \n> coz with `-fastprune` it does 64KB blockfiles... coz node1 runs two chainstates concurrently NORMAL and ASSUMED...so this segmentation keeps their blocks separate\n> \n> so when NORMAL syncs enough blocks to fill blk00000.dat it creates blk00002.dat\n> \n> from node1/regtest/debug.log\n> \n> ```\n> [assumed] initializing blockfile cursor to BlockfileCursor(file_num=1)\n> ...\n> Leaving block file 0: CBlockFileInfo(blocks=242, size=65331, heights=0...240) (onto 2) (height 241)\n> ```\n\nThanks for taking a look. I am primarily interested in why this is happening intermittently. Usually this happens due to one thread being slower than another. For example in https://github.com/bitcoin/bitcoin/pull/34425, a sleep added in the right place will make a particular intermittent issue appear more deterministically:\n\n```\ndiff --git a/src/net.cpp b/src/net.cpp\nindex 6b79e913e8..32bd061500 100644\n--- a/src/net.cpp\n+++ b/src/net.cpp\n@@ -2200,2 +2200,3 @@ void CConnman::SocketHandlerConnected(const std::vector<CNode*>& nodes,\n                 }\n+            UninterruptibleSleep(599ms);\n                 pnode->CloseSocketDisconnect();\n```\n\nI'd be great to find a diff to make this one reproduce deterministically as well.",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/33635#issuecomment-3824033117",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33635"
    },
    {
      "event": "commented",
      "id": 3824159995,
      "node_id": "IC_kwDOABII587j8Az7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3824159995",
      "actor": {
        "login": "b-l-u-e",
        "id": 32414660,
        "node_id": "MDQ6VXNlcjMyNDE0NjYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/32414660?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/b-l-u-e",
        "html_url": "https://github.com/b-l-u-e",
        "followers_url": "https://api.github.com/users/b-l-u-e/followers",
        "following_url": "https://api.github.com/users/b-l-u-e/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/b-l-u-e/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/b-l-u-e/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/b-l-u-e/subscriptions",
        "organizations_url": "https://api.github.com/users/b-l-u-e/orgs",
        "repos_url": "https://api.github.com/users/b-l-u-e/repos",
        "events_url": "https://api.github.com/users/b-l-u-e/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/b-l-u-e/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-30T14:51:34Z",
      "updated_at": "2026-01-30T14:51:34Z",
      "author_association": "CONTRIBUTOR",
      "body": "> > i tried studying from the report shared above realized that maybe the assertion `assert not self.has_blockfile(n1, \"00002\")` was too strict perhaps maybe we can condition it because segmentation works as expected\n> > coz with `-fastprune` it does 64KB blockfiles... coz node1 runs two chainstates concurrently NORMAL and ASSUMED...so this segmentation keeps their blocks separate\n> > so when NORMAL syncs enough blocks to fill blk00000.dat it creates blk00002.dat\n> > from node1/regtest/debug.log\n> > ```\n> > [assumed] initializing blockfile cursor to BlockfileCursor(file_num=1)\n> > ...\n> > Leaving block file 0: CBlockFileInfo(blocks=242, size=65331, heights=0...240) (onto 2) (height 241)\n> > ```\n> \n> Thanks for taking a look. I am primarily interested in why this is happening intermittently. Usually this happens due to one thread being slower than another. For example in [#34425](https://github.com/bitcoin/bitcoin/pull/34425), a sleep added in the right place will make a particular intermittent issue appear more deterministically:\n> \n> ```\n> diff --git a/src/net.cpp b/src/net.cpp\n> index 6b79e913e8..32bd061500 100644\n> --- a/src/net.cpp\n> +++ b/src/net.cpp\n> @@ -2200,2 +2200,3 @@ void CConnman::SocketHandlerConnected(const std::vector<CNode*>& nodes,\n>                  }\n> +            UninterruptibleSleep(599ms);\n>                  pnode->CloseSocketDisconnect();\n> ```\n> \n> I'd be great to find a diff to make this one reproduce deterministically as well.\n \nLet me try to add  a sleep between when NORMAL and ASSUMED chainstates start the syncing\n ",
      "user": {
        "login": "b-l-u-e",
        "id": 32414660,
        "node_id": "MDQ6VXNlcjMyNDE0NjYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/32414660?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/b-l-u-e",
        "html_url": "https://github.com/b-l-u-e",
        "followers_url": "https://api.github.com/users/b-l-u-e/followers",
        "following_url": "https://api.github.com/users/b-l-u-e/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/b-l-u-e/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/b-l-u-e/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/b-l-u-e/subscriptions",
        "organizations_url": "https://api.github.com/users/b-l-u-e/orgs",
        "repos_url": "https://api.github.com/users/b-l-u-e/repos",
        "events_url": "https://api.github.com/users/b-l-u-e/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/b-l-u-e/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/33635#issuecomment-3824159995",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33635"
    }
  ]
}