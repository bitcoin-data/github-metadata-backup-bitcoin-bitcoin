{
  "type": "issue",
  "issue": {
    "id": 1895568140,
    "node_id": "I_kwDOABII585w_BMM",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28475",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28475/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28475/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28475/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/28475",
    "number": 28475,
    "state": "open",
    "state_reason": null,
    "title": "Allow creating and injecting a custom coinbase into a block template",
    "body": "### Please describe the feature you'd like to see added.\r\n\r\nI would like a command in bitcoin core for creating a raw coinbase transaction and another command for injecting it into a block template.\r\n\r\n### Is your feature related to a problem, if so please describe it.\r\n\r\nI am working on a project that lets users purchase coinbase utxos directly from miners, who are expected to send their customers these utxos in whatever block they mine next. It is difficult to test my software on regtest because I can't specify what outputs coinbase transactions should create. The console commands \"generateblock,\" \"generatetoaddress,\" and \"generatetodescriptor\" all automatically create a coinbase transaction that sends the block subsidy plus fees to a single address which you must specify as an argument. They do not, however, let you customize your coinbase transaction.\r\n\r\n### Describe the solution you'd like\r\n\r\nI would love to use the \"createrawtransaction\" method to create a coinbase transaction with several outputs where I send most of the subsidy as well as a final output that lets me specify a value of \"remainder\" or something like that to catch whatever is left over after the initial outputs are created.\r\n\r\nWith this custom coinbase transaction in hand, I'd love to put it in an array of transactions and pass that array to the \"generateblock\" command. The latter command would need to \"notice\" that the first transaction in the array is a coinbase transaction and use it as a replacement for whatever coinbase transaction it was going to create automatically.\r\n\r\n### Describe any alternatives you've considered\r\n\r\nI could reach out to a miner and ask them to send me whatever software they use to create custom coinbase transactions but I fear their professional setups would be vastly more complex than mine and it just wouldn't work.\r\n\r\n### Please leave any additional context\r\n\r\nI checked on stack overflow and found [this q-and-a](https://bitcoin.stackexchange.com/questions/97076/how-create-coinbase-transaction-with-createrawtransaction/98334) which says, in part, \"It is not possible to create a coinbase transaction using createrawtransaction. ... Miners must use software that can independently create the coinbase transaction. Miners actually prefer doing this because they want to be able to modify the coinbase to use as an extra nonce...\" Miners may already have software for independently creating custom coinbase transactions, but as someone who just wants to do it on my local regtest environment, it's frustrating that there are no good methods for this.",
    "user": {
      "login": "supertestnet",
      "id": 58400631,
      "node_id": "MDQ6VXNlcjU4NDAwNjMx",
      "avatar_url": "https://avatars.githubusercontent.com/u/58400631?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/supertestnet",
      "html_url": "https://github.com/supertestnet",
      "followers_url": "https://api.github.com/users/supertestnet/followers",
      "following_url": "https://api.github.com/users/supertestnet/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/supertestnet/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/supertestnet/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/supertestnet/subscriptions",
      "organizations_url": "https://api.github.com/users/supertestnet/orgs",
      "repos_url": "https://api.github.com/users/supertestnet/repos",
      "events_url": "https://api.github.com/users/supertestnet/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/supertestnet/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 64583,
        "node_id": "MDU6TGFiZWw2NDU4Mw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature",
        "name": "Feature",
        "color": "7cf575",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "NONE",
    "locked": false,
    "comments": 1,
    "created_at": "2023-09-14T02:56:13Z",
    "updated_at": "2024-07-31T14:50:29Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 10366539853,
      "node_id": "LE_lADOABII585w_BMMzwAAAAJp5NhN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10366539853",
      "actor": {
        "login": "supertestnet",
        "id": 58400631,
        "node_id": "MDQ6VXNlcjU4NDAwNjMx",
        "avatar_url": "https://avatars.githubusercontent.com/u/58400631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/supertestnet",
        "html_url": "https://github.com/supertestnet",
        "followers_url": "https://api.github.com/users/supertestnet/followers",
        "following_url": "https://api.github.com/users/supertestnet/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/supertestnet/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/supertestnet/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/supertestnet/subscriptions",
        "organizations_url": "https://api.github.com/users/supertestnet/orgs",
        "repos_url": "https://api.github.com/users/supertestnet/repos",
        "events_url": "https://api.github.com/users/supertestnet/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/supertestnet/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-14T02:56:13Z",
      "label": {
        "name": "Feature",
        "color": "7cf575"
      }
    },
    {
      "event": "commented",
      "id": 2260695876,
      "node_id": "IC_kwDOABII586Gv3tE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2260695876",
      "actor": {
        "login": "levantah",
        "id": 155245829,
        "node_id": "U_kgDOCUDdBQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/155245829?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/levantah",
        "html_url": "https://github.com/levantah",
        "followers_url": "https://api.github.com/users/levantah/followers",
        "following_url": "https://api.github.com/users/levantah/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/levantah/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/levantah/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/levantah/subscriptions",
        "organizations_url": "https://api.github.com/users/levantah/orgs",
        "repos_url": "https://api.github.com/users/levantah/repos",
        "events_url": "https://api.github.com/users/levantah/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/levantah/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-31T14:45:44Z",
      "updated_at": "2024-07-31T14:50:29Z",
      "author_association": "NONE",
      "body": "Make it raw in hex. [Read](https://en.bitcoin.it/wiki/Raw_transactions) and try (UNIX shell with tools like `fold` and `printf` is enough).\r\n\r\nhttps://x.com/AnyoneOReally1/status/1818658150439919827",
      "user": {
        "login": "levantah",
        "id": 155245829,
        "node_id": "U_kgDOCUDdBQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/155245829?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/levantah",
        "html_url": "https://github.com/levantah",
        "followers_url": "https://api.github.com/users/levantah/followers",
        "following_url": "https://api.github.com/users/levantah/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/levantah/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/levantah/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/levantah/subscriptions",
        "organizations_url": "https://api.github.com/users/levantah/orgs",
        "repos_url": "https://api.github.com/users/levantah/repos",
        "events_url": "https://api.github.com/users/levantah/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/levantah/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/28475#issuecomment-2260695876",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28475"
    }
  ]
}