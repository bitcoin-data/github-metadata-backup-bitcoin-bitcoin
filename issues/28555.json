{
  "type": "issue",
  "issue": {
    "id": 1921556090,
    "node_id": "I_kwDOABII585yiJ56",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28555",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28555/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28555/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28555/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/28555",
    "number": 28555,
    "state": "open",
    "state_reason": null,
    "title": "gettransaction details does not include send to myself balance changes for imported addresses",
    "body": "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Current behaviour\n\nAt first, thanks for your work, Bitcoin Core team.\r\n\r\nAFAIK, if I send some amount to myself (retrieved with `getnewaddress`), it should include both `send` and `receive` elements with the same negative and positive amount respectively. This behavior is described e.g. in github issue [#4807](https://github.com/bitcoin/bitcoin/issues/4807#issuecomment-54081380) and I can confirm that it's a fact in *some* cases.\r\n\r\nHovewer, the `.details` array does not include neither `send` nor `receive` elements _sometimes_. It's omitted from the output as if nothing had been sent or received.\r\n\r\nExample:\r\n\r\n```\r\n$ bitcoin-cli gettransaction XXX...\r\n{\r\n  \"amount\": -0.1,\r\n  \"fee\": -0.00002,\r\n  \"confirmations\": 7967,\r\n  \"txid\": \"XXX...\",\r\n  ...,\r\n  \"details\": [\r\n    {\r\n      \"address\": \"SOME_RECIPIENT\",\r\n      \"category\": \"send\",\r\n      \"amount\": -0.1,\r\n      \"vout\": 0,\r\n      \"fee\": -0.00002,\r\n      \"abandoned\": false\r\n    }\r\n  ],\r\n  \"hex\": \"...\"\r\n}\r\n```\r\n\r\nThe transaction in mempool.space or other blockchain explorers shows other outputs as well. \r\n\r\n```\r\n[\r\n  {\r\n    \"value\": 0.1,\r\n    \"n\": 0,\r\n    \"address\": \"SOME_RECIPIENT\",\r\n    ...\r\n  },\r\n  {\r\n    \"value\": 0.05,\r\n    \"n\": 0,\r\n    \"address\": \"MY_ANOTHER_ADDRESS_1\",\r\n    ...\r\n  },\r\n  {\r\n    \"value\": 0.04,\r\n    \"n\": 0,\r\n    \"address\": \"MY_ANOTHER_ADDRESS_2\",\r\n    ...\r\n  }\r\n]\r\n```\r\n\r\nRaw transaction in `.hex` element includes these of course but they are missing in the `.details` element.\r\n\r\nPlease note that both `MY_ANOTHER_ADDRESS_n` is tracked as `.mine == true` when I call `getaddressinfo MY_ANOTHER_ADDRESS_n`.\r\n\r\n\r\n\n\n### Expected behaviour\n\nBoth `send` and `receive` balance changes with the same amount appears in the `details` section of `gettransaction` output.\n\n### Steps to reproduce\n\nThese transactions are constructed with `sendmany` RPC call, but I am not able to reproduce them. (I tried it on testnet).\n\n### Relevant log output\n\nI am not sure if it is relevant, but these are log lines about that transaction:\r\n\r\n```\r\n2023-09-29T19:37:16Z [default] Fee Calculation: Fee:10233 Bytes:393 Tgt:0 (requested 0) Reason:\"PayTxFee set\" Decay 0.00000: Estimation: (-1 - -1) 0.00% 0.0/(0.0 0 mem 0.0 out) Fail: (-1 - -1) 0.00% 0.0/(0.0 0 mem 0.0 out)\r\n2023-09-29T19:37:41Z [default] Fee Calculation: Fee:10233 Bytes:393 Tgt:0 (requested 0) Reason:\"PayTxFee set\" Decay 0.00000: Estimation: (-1 - -1) 0.00% 0.0/(0.0 0 mem 0.0 out) Fail: (-1 - -1) 0.00% 0.0/(0.0 0 mem 0.0 out)\r\n2023-09-29T19:37:41Z [default] Fee non-grouped = 10233, grouped = 10233, using grouped\r\n2023-09-29T19:37:41Z [default] CommitTransaction:\r\nCTransaction(hash=XXX, ver=2, vin.size=5, vout.size=1, nLockTime=809912)\r\n    CTxIn(COutPoint(..., 30), scriptSig=, nSequence=4294967293)\r\n    CTxIn(COutPoint(..., 7), scriptSig=, nSequence=4294967293)\r\n    CTxIn(COutPoint(..., 11), scriptSig=, nSequence=4294967293)\r\n    CTxIn(COutPoint(..., 0), scriptSig=, nSequence=4294967293)\r\n    CTxIn(COutPoint(..., 19), scriptSig=, nSequence=4294967293)\r\n    CScriptWitness(...., ...)\r\n    CScriptWitness(...., ...)\r\n    CScriptWitness(...., ...)\r\n    CScriptWitness(...., ...)\r\n    CScriptWitness(...., ...)\r\n    CTxOut(nValue=0.14500000, scriptPubKey=...)\r\n2023-09-29T19:37:41Z [default] AddToWallet XXX...  newupdate\r\n2023-09-29T19:37:41Z [default] Submitting wtx XXX... to mempool for relay\r\n2023-09-29T19:37:41Z [default] MarkUnusedAddresses: Detected a used keypool item at index 121340, mark all keypool items up to this item as used\r\n2023-09-29T19:37:41Z [default] AddToWallet XXX...  \r\n```\n\n### How did you obtain Bitcoin Core\n\nPre-built binaries\n\n### What version of Bitcoin Core are you using?\n\nv25.0.0\n\n### Operating system and version\n\nDebian 11 bullseye (oldstable)\n\n### Machine specifications\n\n_No response_",
    "user": {
      "login": "VojtechMyslivec",
      "id": 11145995,
      "node_id": "MDQ6VXNlcjExMTQ1OTk1",
      "avatar_url": "https://avatars.githubusercontent.com/u/11145995?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/VojtechMyslivec",
      "html_url": "https://github.com/VojtechMyslivec",
      "followers_url": "https://api.github.com/users/VojtechMyslivec/followers",
      "following_url": "https://api.github.com/users/VojtechMyslivec/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/VojtechMyslivec/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/VojtechMyslivec/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/VojtechMyslivec/subscriptions",
      "organizations_url": "https://api.github.com/users/VojtechMyslivec/orgs",
      "repos_url": "https://api.github.com/users/VojtechMyslivec/repos",
      "events_url": "https://api.github.com/users/VojtechMyslivec/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/VojtechMyslivec/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 149424,
        "node_id": "MDU6TGFiZWwxNDk0MjQ=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
        "name": "Wallet",
        "color": "08a781",
        "default": false
      },
      {
        "id": 98279177,
        "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
        "name": "RPC/REST/ZMQ",
        "color": "0052cc",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "NONE",
    "locked": false,
    "comments": 8,
    "created_at": "2023-10-02T09:26:36Z",
    "updated_at": "2024-07-18T11:29:12Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 1742990860,
      "node_id": "IC_kwDOABII585n4-4M",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1742990860",
      "actor": {
        "login": "VojtechMyslivec",
        "id": 11145995,
        "node_id": "MDQ6VXNlcjExMTQ1OTk1",
        "avatar_url": "https://avatars.githubusercontent.com/u/11145995?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/VojtechMyslivec",
        "html_url": "https://github.com/VojtechMyslivec",
        "followers_url": "https://api.github.com/users/VojtechMyslivec/followers",
        "following_url": "https://api.github.com/users/VojtechMyslivec/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/VojtechMyslivec/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/VojtechMyslivec/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/VojtechMyslivec/subscriptions",
        "organizations_url": "https://api.github.com/users/VojtechMyslivec/orgs",
        "repos_url": "https://api.github.com/users/VojtechMyslivec/repos",
        "events_url": "https://api.github.com/users/VojtechMyslivec/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/VojtechMyslivec/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-02T13:11:49Z",
      "updated_at": "2023-10-02T20:45:08Z",
      "author_association": "NONE",
      "body": "I have just reproduced the issue. The problem is with destination addresses that were derived from _imported descriptors_. These transaction and addresses behaves correctly as \"mine\" addresses, but `details` section is missing for balance changes in `gettransaction` RPC output.\r\n\r\n### Steps to reproduce\r\n\r\n1. Create new wallet and generate an address from it\r\n    ```bash\r\n    read -rs passphrase\r\n\r\n    bitcoin-cli -named createwallet wallet_name='tmp_to_export' passphrase=\"$passphrase\" load_on_startup=false\r\n    problematic_address=$(bitcoin-cli getnewaddress)\r\n   ```\r\n\r\n2. Export descriptors and unload the wallet\r\n\r\n    _edit_: (private keys included)\r\n\r\n    ```bash\r\n    bitcoin-cli -named walletpassphrase passphrase=\"$passphrase\" timeout=20\r\n    bitcoin-cli -named listdescriptors private=true | jq '.descriptors' > 'descriptors-to-import.json'\r\n    bitcoin-cli unloadwallet 'tmp_to_export'\r\n    ```\r\n\r\n3. Load another wallet and import descriptors\r\n\r\n    ```bash\r\n    read -rs passphrase\r\n\r\n    bitcoin-cli loadwallet default\r\n    bitcoin-cli -named walletpassphrase passphrase=\"$passphrase\" timeout=20\r\n    bitcoin-cli importdescriptors \"$(< 'descriptors-to-import.json')\"\r\n    ```\r\n\r\n4. Send some funds to the address derived from imported descriptors\r\n\r\n    ```bash\r\n    bitcoin-cli -named walletpassphrase passphrase=\"$passphrase\" timeout=20\r\n    bitcoin-cli send \"{\\\"$problematic_address\\\": 0.1}\"\r\n    ```\r\n\r\n5. See missing `details` in `gettransaction` output:\r\n\r\n    ```bash\r\n    bitcoin-cli gettransaction 'dc082c830c05e9600cf32d8c4484c3acffe7d85cd3e578d50b68e1c4fef53750'\r\n    ```\r\n    ```json\r\n    {\r\n      \"amount\": 0.00000000,\r\n      \"fee\": -0.00012425,\r\n      \"confirmations\": 0,\r\n      \"trusted\": false,\r\n      \"txid\": \"dc082c830c05e9600cf32d8c4484c3acffe7d85cd3e578d50b68e1c4fef53750\",\r\n      \"wtxid\": \"1bb51ec89915bf8c3a01144ffa4c2d2d1688ab3a0b59134cbbac73b160b0704a\",\r\n      \"walletconflicts\": [\r\n      ],\r\n      \"time\": 1696251182,\r\n      \"timereceived\": 1696251182,\r\n      \"bip125-replaceable\": \"yes\",\r\n      \"details\": [\r\n      ],\r\n      \"hex\": \"0200000000010387bfd79defdeb70b68cbf09cb03e613053e8aa2963074bdd67e9467672cd76810100000000fdffffff74de2418e3145b0ffbb0dc31878dcca40c158987b47996afea3c6073cc3cc41d0100000000fdffffff87bfd79defdeb70b68cbf09cb03e613053e8aa2963074bdd67e9467672cd76810000000000fdffffff0246179900000000002251206d18596b999dc4781f3de5e9f8e2eb6f1beeff8b5d83be0b3c1322cd863997fd8096980000000000225120460e9f7581f18cd79fccd4c4f86ae86a6e5ca469f1a845a240cd0b7d84f7e63d0140dfd690ed01e7a1f014c49aa750d29ea43f4ddc44a4393b43ba080c24f63787fa2ffaa8cea26f522f0a954fbf04e32edac6ec920f312d3f22cdf8c58d3532b2030140cde1904f21d760c0fb2d2f3bd1fc11e7cca60e24a4f5071fe76a184d71e542577b0d3ba8a1189aec4e31fdbe4bed014f55f12b961fffa9634fdfd6e2d6db8ebd0140716fa018e07bae6ac29bad3803957f5a5cae9cee6c720805c0ed657c59312d460392218d5ea14f99ad7364d8cd99880aa8363289938ec38c554a3c91954eacec00000000\"\r\n    }\r\n    ```\r\n\r\nFYI: this is a real TX on testnet: [mempool.space/testnet](https://mempool.space/testnet/tx/dc082c830c05e9600cf32d8c4484c3acffe7d85cd3e578d50b68e1c4fef53750)",
      "user": {
        "login": "VojtechMyslivec",
        "id": 11145995,
        "node_id": "MDQ6VXNlcjExMTQ1OTk1",
        "avatar_url": "https://avatars.githubusercontent.com/u/11145995?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/VojtechMyslivec",
        "html_url": "https://github.com/VojtechMyslivec",
        "followers_url": "https://api.github.com/users/VojtechMyslivec/followers",
        "following_url": "https://api.github.com/users/VojtechMyslivec/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/VojtechMyslivec/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/VojtechMyslivec/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/VojtechMyslivec/subscriptions",
        "organizations_url": "https://api.github.com/users/VojtechMyslivec/orgs",
        "repos_url": "https://api.github.com/users/VojtechMyslivec/repos",
        "events_url": "https://api.github.com/users/VojtechMyslivec/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/VojtechMyslivec/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/28555#issuecomment-1742990860",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28555"
    },
    {
      "event": "renamed",
      "id": 10526040430,
      "node_id": "RTE_lADOABII585yiJ56zwAAAAJzZqFu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10526040430",
      "actor": {
        "login": "VojtechMyslivec",
        "id": 11145995,
        "node_id": "MDQ6VXNlcjExMTQ1OTk1",
        "avatar_url": "https://avatars.githubusercontent.com/u/11145995?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/VojtechMyslivec",
        "html_url": "https://github.com/VojtechMyslivec",
        "followers_url": "https://api.github.com/users/VojtechMyslivec/followers",
        "following_url": "https://api.github.com/users/VojtechMyslivec/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/VojtechMyslivec/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/VojtechMyslivec/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/VojtechMyslivec/subscriptions",
        "organizations_url": "https://api.github.com/users/VojtechMyslivec/orgs",
        "repos_url": "https://api.github.com/users/VojtechMyslivec/repos",
        "events_url": "https://api.github.com/users/VojtechMyslivec/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/VojtechMyslivec/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-02T13:21:35Z",
      "rename": {
        "from": "gettransaction details does not include send to myself balance changes",
        "to": "gettransaction details does not include send to myself balance changes for imported addresses"
      }
    },
    {
      "event": "commented",
      "id": 1743024655,
      "node_id": "IC_kwDOABII585n5HIP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1743024655",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-02T13:32:12Z",
      "updated_at": "2023-10-02T13:32:12Z",
      "author_association": "MEMBER",
      "body": "Thanks for the report @VojtechMyslivec.\r\n\r\nCan you try running `gettransaction` with `include_watchonly=true`?\r\n\r\nI guess since you only imported the pubkey descriptor into \"default\" wallet, it might consider this a `watchonly` wallet, and so be (correctly) skipping those outputs from the details field.\r\n\r\nside note: I thought mixing privkey and watchonly wallets was prohibited, so not sure how the import of your descriptors to `default`, which then seems able to send transactions, is currently permitted...",
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/28555#issuecomment-1743024655",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28555"
    },
    {
      "event": "mentioned",
      "id": 10526166320,
      "node_id": "MEE_lADOABII585yiJ56zwAAAAJzaI0w",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10526166320",
      "actor": {
        "login": "VojtechMyslivec",
        "id": 11145995,
        "node_id": "MDQ6VXNlcjExMTQ1OTk1",
        "avatar_url": "https://avatars.githubusercontent.com/u/11145995?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/VojtechMyslivec",
        "html_url": "https://github.com/VojtechMyslivec",
        "followers_url": "https://api.github.com/users/VojtechMyslivec/followers",
        "following_url": "https://api.github.com/users/VojtechMyslivec/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/VojtechMyslivec/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/VojtechMyslivec/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/VojtechMyslivec/subscriptions",
        "organizations_url": "https://api.github.com/users/VojtechMyslivec/orgs",
        "repos_url": "https://api.github.com/users/VojtechMyslivec/repos",
        "events_url": "https://api.github.com/users/VojtechMyslivec/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/VojtechMyslivec/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-02T13:32:12Z"
    },
    {
      "event": "subscribed",
      "id": 10526166335,
      "node_id": "SE_lADOABII585yiJ56zwAAAAJzaI0_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10526166335",
      "actor": {
        "login": "VojtechMyslivec",
        "id": 11145995,
        "node_id": "MDQ6VXNlcjExMTQ1OTk1",
        "avatar_url": "https://avatars.githubusercontent.com/u/11145995?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/VojtechMyslivec",
        "html_url": "https://github.com/VojtechMyslivec",
        "followers_url": "https://api.github.com/users/VojtechMyslivec/followers",
        "following_url": "https://api.github.com/users/VojtechMyslivec/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/VojtechMyslivec/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/VojtechMyslivec/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/VojtechMyslivec/subscriptions",
        "organizations_url": "https://api.github.com/users/VojtechMyslivec/orgs",
        "repos_url": "https://api.github.com/users/VojtechMyslivec/repos",
        "events_url": "https://api.github.com/users/VojtechMyslivec/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/VojtechMyslivec/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-02T13:32:12Z"
    },
    {
      "event": "commented",
      "id": 1743040609,
      "node_id": "IC_kwDOABII585n5LBh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1743040609",
      "actor": {
        "login": "VojtechMyslivec",
        "id": 11145995,
        "node_id": "MDQ6VXNlcjExMTQ1OTk1",
        "avatar_url": "https://avatars.githubusercontent.com/u/11145995?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/VojtechMyslivec",
        "html_url": "https://github.com/VojtechMyslivec",
        "followers_url": "https://api.github.com/users/VojtechMyslivec/followers",
        "following_url": "https://api.github.com/users/VojtechMyslivec/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/VojtechMyslivec/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/VojtechMyslivec/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/VojtechMyslivec/subscriptions",
        "organizations_url": "https://api.github.com/users/VojtechMyslivec/orgs",
        "repos_url": "https://api.github.com/users/VojtechMyslivec/repos",
        "events_url": "https://api.github.com/users/VojtechMyslivec/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/VojtechMyslivec/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-02T13:41:36Z",
      "updated_at": "2023-10-02T13:41:36Z",
      "author_association": "NONE",
      "body": "Thanks for your response Will!\r\n\r\nI am really sorry for the confusion. I exported description _including private keys_, so these addresses should not be in `watchonly` mode. I forgot to mention `private=true` parameter in the commands above (which I have just corrected).\r\n\r\nRunning with `include_watchonly=true` does not make any difference.",
      "user": {
        "login": "VojtechMyslivec",
        "id": 11145995,
        "node_id": "MDQ6VXNlcjExMTQ1OTk1",
        "avatar_url": "https://avatars.githubusercontent.com/u/11145995?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/VojtechMyslivec",
        "html_url": "https://github.com/VojtechMyslivec",
        "followers_url": "https://api.github.com/users/VojtechMyslivec/followers",
        "following_url": "https://api.github.com/users/VojtechMyslivec/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/VojtechMyslivec/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/VojtechMyslivec/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/VojtechMyslivec/subscriptions",
        "organizations_url": "https://api.github.com/users/VojtechMyslivec/orgs",
        "repos_url": "https://api.github.com/users/VojtechMyslivec/repos",
        "events_url": "https://api.github.com/users/VojtechMyslivec/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/VojtechMyslivec/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/28555#issuecomment-1743040609",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28555"
    },
    {
      "event": "commented",
      "id": 1743067410,
      "node_id": "IC_kwDOABII585n5RkS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1743067410",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-02T13:57:10Z",
      "updated_at": "2023-10-02T13:57:10Z",
      "author_association": "MEMBER",
      "body": "`gettransaction` result does not include change outputs. The functionality could be added if needed.\r\nMeanwhile, could use `listsinceblock` setting the `include_change` arg to true.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/28555#issuecomment-1743067410",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28555"
    },
    {
      "event": "commented",
      "id": 1743119969,
      "node_id": "IC_kwDOABII585n5eZh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1743119969",
      "actor": {
        "login": "VojtechMyslivec",
        "id": 11145995,
        "node_id": "MDQ6VXNlcjExMTQ1OTk1",
        "avatar_url": "https://avatars.githubusercontent.com/u/11145995?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/VojtechMyslivec",
        "html_url": "https://github.com/VojtechMyslivec",
        "followers_url": "https://api.github.com/users/VojtechMyslivec/followers",
        "following_url": "https://api.github.com/users/VojtechMyslivec/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/VojtechMyslivec/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/VojtechMyslivec/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/VojtechMyslivec/subscriptions",
        "organizations_url": "https://api.github.com/users/VojtechMyslivec/orgs",
        "repos_url": "https://api.github.com/users/VojtechMyslivec/repos",
        "events_url": "https://api.github.com/users/VojtechMyslivec/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/VojtechMyslivec/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-02T14:25:09Z",
      "updated_at": "2023-12-20T13:01:07Z",
      "author_association": "NONE",
      "body": "Thank you for the reply Matias. But I am not talking about change addresses nor outputs. This TX is from my wallet to the receiving address, that is derived from the imported descriptor. There is of course some change output but I don't bother about that.\r\n\r\nAnother TX, that send funds from my wallet to another address (derived from the original descriptors), includes both `send` and `receive` items in the `details` array of `gettransaction` output. \r\n\r\nAlso, another TX, that transfer funds from the outside to the address of imported descriptor, includes `receive` item in the `details`.\r\n\r\nSo it appears to me as a bug in the \"edge\" case of sending  a TX to myself and using a destination address that is derived from an imported descriptor. ",
      "user": {
        "login": "VojtechMyslivec",
        "id": 11145995,
        "node_id": "MDQ6VXNlcjExMTQ1OTk1",
        "avatar_url": "https://avatars.githubusercontent.com/u/11145995?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/VojtechMyslivec",
        "html_url": "https://github.com/VojtechMyslivec",
        "followers_url": "https://api.github.com/users/VojtechMyslivec/followers",
        "following_url": "https://api.github.com/users/VojtechMyslivec/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/VojtechMyslivec/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/VojtechMyslivec/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/VojtechMyslivec/subscriptions",
        "organizations_url": "https://api.github.com/users/VojtechMyslivec/orgs",
        "repos_url": "https://api.github.com/users/VojtechMyslivec/repos",
        "events_url": "https://api.github.com/users/VojtechMyslivec/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/VojtechMyslivec/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/28555#issuecomment-1743119969",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28555"
    },
    {
      "event": "commented",
      "id": 1864179337,
      "node_id": "IC_kwDOABII585vHR6J",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1864179337",
      "actor": {
        "login": "VojtechMyslivec",
        "id": 11145995,
        "node_id": "MDQ6VXNlcjExMTQ1OTk1",
        "avatar_url": "https://avatars.githubusercontent.com/u/11145995?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/VojtechMyslivec",
        "html_url": "https://github.com/VojtechMyslivec",
        "followers_url": "https://api.github.com/users/VojtechMyslivec/followers",
        "following_url": "https://api.github.com/users/VojtechMyslivec/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/VojtechMyslivec/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/VojtechMyslivec/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/VojtechMyslivec/subscriptions",
        "organizations_url": "https://api.github.com/users/VojtechMyslivec/orgs",
        "repos_url": "https://api.github.com/users/VojtechMyslivec/repos",
        "events_url": "https://api.github.com/users/VojtechMyslivec/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/VojtechMyslivec/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-20T09:56:28Z",
      "updated_at": "2023-12-20T09:56:28Z",
      "author_association": "NONE",
      "body": "Is there anything more I can provide to investigate this problem?\r\n\r\nI would label this with ~bug, ~descriptors and ~wallet\r\n\r\nThanks\r\n",
      "user": {
        "login": "VojtechMyslivec",
        "id": 11145995,
        "node_id": "MDQ6VXNlcjExMTQ1OTk1",
        "avatar_url": "https://avatars.githubusercontent.com/u/11145995?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/VojtechMyslivec",
        "html_url": "https://github.com/VojtechMyslivec",
        "followers_url": "https://api.github.com/users/VojtechMyslivec/followers",
        "following_url": "https://api.github.com/users/VojtechMyslivec/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/VojtechMyslivec/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/VojtechMyslivec/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/VojtechMyslivec/subscriptions",
        "organizations_url": "https://api.github.com/users/VojtechMyslivec/orgs",
        "repos_url": "https://api.github.com/users/VojtechMyslivec/repos",
        "events_url": "https://api.github.com/users/VojtechMyslivec/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/VojtechMyslivec/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/28555#issuecomment-1864179337",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28555"
    },
    {
      "event": "labeled",
      "id": 11300428544,
      "node_id": "LE_lADOABII585yiJ56zwAAAAKhjtsA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11300428544",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-20T10:07:05Z",
      "label": {
        "name": "Wallet",
        "color": "08a781"
      }
    },
    {
      "event": "labeled",
      "id": 11300430833,
      "node_id": "LE_lADOABII585yiJ56zwAAAAKhjuPx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11300430833",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-20T10:07:18Z",
      "label": {
        "name": "RPC/REST/ZMQ",
        "color": "0052cc"
      }
    },
    {
      "event": "commented",
      "id": 2232511784,
      "node_id": "IC_kwDOABII586FEW0o",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2232511784",
      "actor": {
        "login": "meglio",
        "id": 282177,
        "node_id": "MDQ6VXNlcjI4MjE3Nw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/282177?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/meglio",
        "html_url": "https://github.com/meglio",
        "followers_url": "https://api.github.com/users/meglio/followers",
        "following_url": "https://api.github.com/users/meglio/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/meglio/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/meglio/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/meglio/subscriptions",
        "organizations_url": "https://api.github.com/users/meglio/orgs",
        "repos_url": "https://api.github.com/users/meglio/repos",
        "events_url": "https://api.github.com/users/meglio/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/meglio/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-17T06:16:17Z",
      "updated_at": "2024-07-17T06:16:17Z",
      "author_association": "CONTRIBUTOR",
      "body": "In my case, `gettransaction()` returns zero for the top-level \"amount\" key sometimes:\r\n\r\n```json\r\n{\r\n  \"result\": {\r\n    \"amount\": 0.00000000,\r\n    ...\r\n```\r\n\r\nHowever, the \"details\" have non-zero amounts in them.\r\n\r\nCan it be related?",
      "user": {
        "login": "meglio",
        "id": 282177,
        "node_id": "MDQ6VXNlcjI4MjE3Nw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/282177?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/meglio",
        "html_url": "https://github.com/meglio",
        "followers_url": "https://api.github.com/users/meglio/followers",
        "following_url": "https://api.github.com/users/meglio/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/meglio/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/meglio/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/meglio/subscriptions",
        "organizations_url": "https://api.github.com/users/meglio/orgs",
        "repos_url": "https://api.github.com/users/meglio/repos",
        "events_url": "https://api.github.com/users/meglio/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/meglio/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/28555#issuecomment-2232511784",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28555"
    },
    {
      "event": "commented",
      "id": 2236269937,
      "node_id": "IC_kwDOABII586FSsVx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2236269937",
      "actor": {
        "login": "VojtechMyslivec",
        "id": 11145995,
        "node_id": "MDQ6VXNlcjExMTQ1OTk1",
        "avatar_url": "https://avatars.githubusercontent.com/u/11145995?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/VojtechMyslivec",
        "html_url": "https://github.com/VojtechMyslivec",
        "followers_url": "https://api.github.com/users/VojtechMyslivec/followers",
        "following_url": "https://api.github.com/users/VojtechMyslivec/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/VojtechMyslivec/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/VojtechMyslivec/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/VojtechMyslivec/subscriptions",
        "organizations_url": "https://api.github.com/users/VojtechMyslivec/orgs",
        "repos_url": "https://api.github.com/users/VojtechMyslivec/repos",
        "events_url": "https://api.github.com/users/VojtechMyslivec/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/VojtechMyslivec/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-18T11:29:11Z",
      "updated_at": "2024-07-18T11:29:11Z",
      "author_association": "NONE",
      "body": "If you send a transaction from one of your address to another one in the same wallet, sum of `amount`s would be zero and in details, you would see one _receiving_ and one _sending_ balance change.\r\n\r\nThis is one of my example transaction:\r\n\r\n```\r\n{\r\n  \"amount\": 0.00000000,\r\n  \"fee\": -0.00004200,\r\n  ...\r\n  \"txid\": \"...\",\r\n  ...\r\n  \"details\": [\r\n    {\r\n      \"address\": \"...y\",\r\n      \"category\": \"send\",\r\n      \"amount\": -0.00012000,\r\n      \"fee\": -0.00004200,\r\n      ...\r\n    },\r\n    {\r\n      \"address\": \"...x\",\r\n      \"category\": \"receive\",\r\n      \"amount\": 0.00012000,\r\n      ...\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nThis is expected behavior.\r\n\r\nIn this issue I reported, that for imported descriptors, these `details` items are missing.",
      "user": {
        "login": "VojtechMyslivec",
        "id": 11145995,
        "node_id": "MDQ6VXNlcjExMTQ1OTk1",
        "avatar_url": "https://avatars.githubusercontent.com/u/11145995?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/VojtechMyslivec",
        "html_url": "https://github.com/VojtechMyslivec",
        "followers_url": "https://api.github.com/users/VojtechMyslivec/followers",
        "following_url": "https://api.github.com/users/VojtechMyslivec/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/VojtechMyslivec/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/VojtechMyslivec/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/VojtechMyslivec/subscriptions",
        "organizations_url": "https://api.github.com/users/VojtechMyslivec/orgs",
        "repos_url": "https://api.github.com/users/VojtechMyslivec/repos",
        "events_url": "https://api.github.com/users/VojtechMyslivec/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/VojtechMyslivec/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/28555#issuecomment-2236269937",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28555"
    }
  ]
}