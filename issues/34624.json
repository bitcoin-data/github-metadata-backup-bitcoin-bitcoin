{
  "type": "issue",
  "issue": {
    "id": 3963276355,
    "node_id": "I_kwDOABII587sOsxD",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34624",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34624/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34624/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34624/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/34624",
    "number": 34624,
    "state": "open",
    "state_reason": null,
    "title": "Intermittent shutdown deadlock (in wallet_multiwallet.py; AssertionError: [node 0] bitcoind should have exited within 4800s with expected error Error: Specified -walletdir \"wallets\" is a relative path)",
    "body": "Not sure how this could happen https://github.com/bitcoin/bitcoin/actions/runs/22177363139/job/64129376799?pr=34533#step:9:6127\n\nIt looks like the error is properly printed, and the node starts to shut down, but it deadlocks after `[http] [httpserver.cpp:299] [ThreadHTTP] [http] Exited http event loop`:\n\n```\nnode0 2026-02-19T10:43:28.250836Z [init] [httpserver.cpp:435] [StartHTTPServer] Starting HTTP server with 2 worker threads \nError:  node0 2026-02-19T10:43:28.250951Z [init] [noui.cpp:31] [noui_ThreadSafeMessageBox] [error] Specified -walletdir \"wallets\" is a relative path \n node0 2026-02-19T10:43:28.250982Z [init] [httpserver.cpp:442] [InterruptHTTPServer] [http] Interrupting HTTP server \n node0 2026-02-19T10:43:28.250988Z [init] [httprpc.cpp:349] [InterruptHTTPRPC] [rpc] Interrupting HTTP RPC server \n node0 2026-02-19T10:43:28.250993Z [init] [rpc/server.cpp:284] [operator()] [rpc] Interrupting RPC \n node0 2026-02-19T10:43:28.251002Z [init] [init.cpp:292] [Shutdown] Shutdown in progress... \n node0 2026-02-19T10:43:28.251009Z [shutoff] [httprpc.cpp:354] [StopHTTPRPC] [rpc] Stopping HTTP RPC server \n node0 2026-02-19T10:43:28.251016Z [shutoff] [httpserver.cpp:699] [UnregisterHTTPHandler] [http] Unregistering HTTP handler for / (exactmatch 1) \n node0 2026-02-19T10:43:28.251021Z [shutoff] [httpserver.cpp:699] [UnregisterHTTPHandler] [http] Unregistering HTTP handler for /wallet/ (exactmatch 0) \n node0 2026-02-19T10:43:28.251027Z [shutoff] [rpc/server.cpp:296] [operator()] [rpc] Stopping RPC \n node0 2026-02-19T10:43:28.251076Z [http_pool_0] [util/thread.cpp:20] [TraceThread] http_pool_0 thread start \n node0 2026-02-19T10:43:28.251083Z [http_pool_0] [util/thread.cpp:22] [TraceThread] http_pool_0 thread exit \n node0 2026-02-19T10:43:28.251106Z [http] [httpserver.cpp:296] [ThreadHTTP] [http] Entering http event loop \n node0 2026-02-19T10:43:28.251158Z [http_pool_1] [util/thread.cpp:20] [TraceThread] http_pool_1 thread start \n node0 2026-02-19T10:43:28.251167Z [http_pool_1] [util/thread.cpp:22] [TraceThread] http_pool_1 thread exit \n node0 2026-02-19T10:43:28.251344Z [shutoff] [rpc/server.cpp:298] [operator()] [rpc] RPC stopped. \n node0 2026-02-19T10:43:28.251350Z [shutoff] [httpserver.cpp:453] [StopHTTPServer] [http] Stopping HTTP server \n node0 2026-02-19T10:43:28.251355Z [shutoff] [httpserver.cpp:455] [StopHTTPServer] [http] Waiting for HTTP worker threads to exit \n node0 2026-02-19T10:43:28.251502Z [http] [httpserver.cpp:299] [ThreadHTTP] [http] Exited http event loop \n test  2026-02-19T12:03:28.189795Z TestFramework (ERROR): Unexpected exception: \n                                   Traceback (most recent call last):\n                                     File \"/Users/runner/work/bitcoin/bitcoin/repo_archive/test/functional/test_framework/test_framework.py\", line 142, in main\n                                       self.run_test()\n                                       ~~~~~~~~~~~~~^^\n                                     File \"/Users/runner/work/bitcoin/bitcoin/repo_archive/ci/scratch/build-aarch64-apple-darwin24.6.0/test/functional/wallet_multiwallet.py\", line 168, in run_test\n                                       self.nodes[0].assert_start_raises_init_error(['-walletdir=wallets'], 'Error: Specified -walletdir \"wallets\" is a relative path', cwd=data_dir())\n                                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/Users/runner/work/bitcoin/bitcoin/repo_archive/test/functional/test_framework/test_node.py\", line 762, in assert_start_raises_init_error\n                                       self._raise_assertion_error(assert_msg)\n                                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n                                     File \"/Users/runner/work/bitcoin/bitcoin/repo_archive/test/functional/test_framework/test_node.py\", line 229, in _raise_assertion_error\n                                       raise AssertionError(self._node_msg(msg))\n                                   AssertionError: [node 0] bitcoind should have exited within 4800s with expected error Error: Specified -walletdir \"wallets\" is a relative path (cmd: ['bitcoin', '-m', 'node', '-datadir=/Users/runner/work/bitcoin/bitcoin/repo_archive/ci/scratch/test_runner/test_runner_‚Çø_üèÉ_20260219_103433/wallet_multiwallet_253/node0', '-logtimemicros', '-debug', '-debugexclude=libevent', '-debugexclude=leveldb', '-debugexclude=rand', '-uacomment=testnode0', '-logthreadnames', '-logsourcelocations', '-loglevel=trace', '-nologratelimit', '-v2transport=0', '-walletdir=wallets'])",
    "user": {
      "login": "maflcko",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/maflcko",
      "html_url": "https://github.com/maflcko",
      "followers_url": "https://api.github.com/users/maflcko/followers",
      "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
      "organizations_url": "https://api.github.com/users/maflcko/orgs",
      "repos_url": "https://api.github.com/users/maflcko/repos",
      "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/maflcko/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "labels": [
      {
        "id": 149424,
        "node_id": "MDU6TGFiZWwxNDk0MjQ=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
        "name": "Wallet",
        "color": "08a781",
        "default": false
      },
      {
        "id": 234879,
        "node_id": "MDU6TGFiZWwyMzQ4Nzk=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/macOS",
        "name": "macOS",
        "description": "",
        "color": "660000",
        "default": false
      },
      {
        "id": 98279177,
        "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
        "name": "RPC/REST/ZMQ",
        "color": "0052cc",
        "default": false
      },
      {
        "id": 5334691551,
        "node_id": "LA_kwDOABII588AAAABPfju3w",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
        "name": "CI failed",
        "description": "",
        "color": "cccccc",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "MEMBER",
    "milestone": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/74",
      "html_url": "https://github.com/bitcoin/bitcoin/milestone/74",
      "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/74/labels",
      "id": 12610874,
      "node_id": "MI_kwDOABII584AwG06",
      "number": 74,
      "state": "open",
      "title": "31.0",
      "creator": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "open_issues": 25,
      "closed_issues": 49,
      "created_at": "2025-03-25T18:44:16Z",
      "updated_at": "2026-02-19T14:59:23Z"
    },
    "locked": false,
    "comments": 0,
    "created_at": "2026-02-19T14:29:23Z",
    "updated_at": "2026-02-19T14:59:23Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 22917971530,
      "node_id": "LE_lADOABII587sOsxDzwAAAAVWBH5K",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22917971530",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-19T14:29:30Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 22917973932,
      "node_id": "LE_lADOABII587sOsxDzwAAAAVWBIes",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22917973932",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-19T14:29:35Z",
      "label": {
        "name": "Wallet",
        "color": "08a781"
      }
    },
    {
      "event": "labeled",
      "id": 22917973958,
      "node_id": "LE_lADOABII587sOsxDzwAAAAVWBIfG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22917973958",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-19T14:29:35Z",
      "label": {
        "name": "RPC/REST/ZMQ",
        "color": "0052cc"
      }
    },
    {
      "event": "labeled",
      "id": 22917976563,
      "node_id": "LE_lADOABII587sOsxDzwAAAAVWBJHz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22917976563",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-19T14:29:38Z",
      "label": {
        "name": "macOS",
        "color": "660000"
      }
    },
    {
      "event": "milestoned",
      "id": 22918865665,
      "node_id": "MIE_lADOABII587sOsxDzwAAAAVWEiMB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22918865665",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-19T14:59:23Z",
      "milestone": {
        "title": "31.0"
      }
    }
  ]
}