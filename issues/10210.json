{
  "type": "issue",
  "issue": {
    "id": 221795412,
    "node_id": "MDU6SXNzdWUyMjE3OTU0MTI=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10210",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10210/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10210/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10210/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/10210",
    "number": 10210,
    "state": "closed",
    "state_reason": "completed",
    "title": "Frozen (for 15 minutes) on shutdown [dnsseed thread]",
    "body": "Built the 0.14 branch (ccb47bf83036f60dbef04f90aa06dd0f9c1917ac - well, I really built from a UASF fork, b0c9b332340341d7aa67cdc3c0cd5eb50dc72582, but it is functionally the same as that revision for now I think), without wallet support. It hung when I tried to shutdown.\r\n\r\nHere's the end of `debug.log`:\r\n\r\n    2017-04-14 11:33:50 UpdateTip: new best=0000000000000000017ae4b096e8c04705269760db371dfa10c7bc29108351d5 height=461466 version=0x20000000 log2_work=86.267575 tx=212456868 date='2017-04-11 18:02:48' progress=0.996460 cache=17.3MiB(17113tx)\r\n    2017-04-14 11:33:51 connect() to [2001:0:9d38:6ab8:c32:3462:e763:4c90]:8333 failed: Network is unreachable (101)\r\n    2017-04-14 11:33:51 connect() to 81.169.150.217:8333 failed after select(): Connection refused (111)\r\n    2017-04-14 11:33:53 tor: Thread interrupt\r\n    2017-04-14 11:33:53 addcon thread exit\r\n    2017-04-14 11:33:53 torcontrol thread exit\r\n    2017-04-14 11:33:53 net thread exit\r\n    2017-04-14 11:34:00 scheduler thread interrupt\r\n    2017-04-14 11:34:27 UpdateTip: new best=000000000000000001b4904ab88cb6f13b1f8ccbb9f183db51894cc521fabf23 height=461467 version=0x20000002 log2_work=86.267608 tx=212458675 date='2017-04-11 18:23:05' progress=0.996478 cache=18.5MiB(21415tx)\r\n    2017-04-14 11:34:27 Shutdown: In progress...\r\n    2017-04-14 11:34:27 opencon thread exit\r\n    2017-04-14 11:34:27 msghand thread exit\r\n\r\nAnd the stack traces:\r\n\r\n    (gdb) thread apply all where\r\n\r\n    Thread 3 (Thread 0x7fbdf8ff9700 (LWP 21708)):\r\n    #0  pthread_cond_wait@@GLIBC_2.3.2 () at ../nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185\r\n    #1  0x00005626d2e807fb in BGThread (this=0x5626d3a33980) at leveldb/util/env_posix.cc:574\r\n    #2  leveldb::(anonymous namespace)::PosixEnv::BGThreadWrapper (arg=0x5626d3a33980) at leveldb/util/env_posix.cc:521\r\n    #3  0x00007fbe059e7184 in start_thread (arg=0x7fbdf8ff9700) at pthread_create.c:312\r\n    #4  0x00007fbe0571437d in __ecvt_r (value=9.532824124368238e-130, ndigit=0, decpt=0x0, sign=0x0, buf=0x7fbdf8ff99c0 \"\\220\\202\\277\\005\\276\\177\", len=140453903046400) at efgcvt_r.c:218\r\n    #5  0x0000000000000000 in ?? ()\r\n\r\n    Thread 2 (Thread 0x7fbdc3093700 (LWP 21739)):\r\n    #0  0x00007fbe059ee73d in connect () at ../sysdeps/unix/syscall-template.S:81\r\n    #1  0x00007fbdd40fe306 in send_vc (statp=statp@entry=0x7fbdc3093db8, buf=buf@entry=0x7fbdc3090cb0 \"m0\\001\", buflen=buflen@entry=42, buf2=buf2@entry=0x7fbdc3090cdc \"\\016L\\001\", buflen2=buflen2@entry=42, ansp=ansp@entry=0x7fbdc3090b38, anssizp=anssizp@entry=0x7fbdc3090c80, terrno=terrno@entry=0x7fbdc3090b40, ns=ns@entry=0, anscp=anscp@entry=0x7fbdc3092130, ansp2=ansp2@entry=0x7fbdc3092140, anssizp2=anssizp2@entry=0x7fbdc30920f0, resplen2=resplen2@entry=0x7fbdc3092100, ansp2_malloced=ansp2_malloced@entry=0x7fbdc3092110) at res_send.c:793\r\n    #2  0x00007fbdd40ff7a7 in __libc_res_nsend (statp=statp@entry=0x7fbdc3093db8, buf=buf@entry=0x7fbdc3090cb0 \"m0\\001\", buflen=42, buf2=buf2@entry=0x7fbdc3090cdc \"\\016L\\001\", buflen2=buflen2@entry=42, ans=ans@entry=0x7fbdc30918c0 \"\\016L\\203\\200\", anssiz=anssiz@entry=2048, ansp=ansp@entry=0x7fbdc3092130, ansp2=ansp2@entry=0x7fbdc3092140, nansp2=nansp2@entry=0x7fbdc30920f0, resplen2=resplen2@entry=0x7fbdc3092100, ansp2_malloced=ansp2_malloced@entry=0x7fbdc3092110) at res_send.c:566\r\n    #3  0x00007fbdd40fce2c in __GI___libc_res_nquery (statp=statp@entry=0x7fbdc3093db8, name=0x7fbda4000ff8 \"x9.seed.bitcoinstats.com\", class=class@entry=1, type=type@entry=62321, answer=answer@entry=0x7fbdc30918c0 \"\\016L\\203\\200\", anslen=anslen@entry=2048, answerp=answerp@entry=0x7fbdc3092130, answerp2=answerp2@entry=0x7fbdc3092140, nanswerp2=nanswerp2@entry=0x7fbdc30920f0, resplen2=resplen2@entry=0x7fbdc3092100, answerp2_malloced=answerp2_malloced@entry=0x7fbdc3092110) at res_query.c:227\r\n    #4  0x00007fbdd40fd863 in __libc_res_nquerydomain (domain=0x0, answerp2_malloced=0x7fbdc3092110, resplen2=0x7fbdc3092100, nanswerp2=0x7fbdc30920f0, answerp2=0x7fbdc3092140, answerp=0x7fbdc3092130, anslen=2048, answer=0x7fbdc30918c0 \"\\016L\\203\\200\", type=62321, class=1, name=0x7fbda4000ff8 \"x9.seed.bitcoinstats.com\", statp=0x7fbdc3093db8) at res_query.c:591\r\n    #5  __GI___libc_res_nsearch (statp=0x7fbdc3093db8, name=name@entry=0x7fbda4000ff8 \"x9.seed.bitcoinstats.com\", class=class@entry=1, type=type@entry=62321, answer=answer@entry=0x7fbdc30918c0 \"\\016L\\203\\200\", anslen=anslen@entry=2048, answerp=answerp@entry=0x7fbdc3092130, answerp2=answerp2@entry=0x7fbdc3092140, nanswerp2=nanswerp2@entry=0x7fbdc30920f0, resplen2=resplen2@entry=0x7fbdc3092100, answerp2_malloced=answerp2_malloced@entry=0x7fbdc3092110) at res_query.c:381\r\n    #6  0x00007fbdf80ddc73 in _nss_dns_gethostbyname4_r (name=0x7fbda4000ff8 \"x9.seed.bitcoinstats.com\", pat=0x7fbdc3092780, buffer=0x7fbdc30921e0 \"4\\036\\261\\060\", buflen=1064, errnop=0x7fbdc3092750, herrnop=0x7fbdc30927a0, ttlp=0x0) at nss_dns/dns-host.c:315\r\n    #7  0x00007fbe056e6607 in gaih_inet (name=0x5 <error: Cannot access memory at address 0x5>, service=0x7fbda4000d00, req=0x7fbdf80ddb70 <_nss_dns_gethostbyname4_r>, pai=0x7fbdc30927a0, naddrs=0x2a) at ../sysdeps/posix/getaddrinfo.c:321\r\n    #8  0x00007fbe056e9cbd in match_prefix (default_val=2147483647, list=0x5bc30927d0, in6=0x7fbdc3090b38) at ../sysdeps/posix/getaddrinfo.c:1499\r\n    #9  get_label (in6=0x9) at ../sysdeps/posix/getaddrinfo.c:1525\r\n    #10 rfc3484_sort (p1=<optimized out>, p2=<optimized out>, arg=0x7fbda4000ff8) at ../sysdeps/posix/getaddrinfo.c:1618\r\n    #11 0x00007fbda4000020 in ?? ()\r\n    #12 0x0000000000000000 in ?? ()\r\n\r\n    Thread 1 (Thread 0x7fbe078f1780 (LWP 21696)):\r\n    #0  0x00007fbe059e865b in pthread_join (threadid=140452997707520, thread_return=0x0) at pthread_join.c:92\r\n    #1  0x00007fbe061ca857 in std::thread::join() () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\r\n    #2  0x00005626d2c87e3d in CConnman::Stop (this=this@entry=0x5626d38a6490) at net.cpp:2343\r\n    #3  0x00005626d2c87eea in CConnman::~CConnman (this=0x5626d38a6490, __in_chrg=<optimized out>) at net.cpp:2390\r\n    #4  0x00005626d2c4ceb3 in operator() (this=<optimized out>, __ptr=0x5626d38a6490) at /usr/include/c++/4.8/bits/unique_ptr.h:67\r\n    #5  reset (__p=0x5626d38a6490, this=0x5626d3225570 <g_connman>) at /usr/include/c++/4.8/bits/unique_ptr.h:262\r\n    #6  Shutdown () at init.cpp:209\r\n    #7  0x00005626d2c41587 in AppInit (argc=<optimized out>, argv=<optimized out>) at bitcoind.cpp:184\r\n    #8  0x00005626d2c3875f in main (argc=1, argv=0x7ffde3d1fe88) at bitcoind.cpp:196\r\n    (gdb) \r\n",
    "user": {
      "login": "dooglus",
      "id": 573356,
      "node_id": "MDQ6VXNlcjU3MzM1Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/573356?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dooglus",
      "html_url": "https://github.com/dooglus",
      "followers_url": "https://api.github.com/users/dooglus/followers",
      "following_url": "https://api.github.com/users/dooglus/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/dooglus/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/dooglus/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/dooglus/subscriptions",
      "organizations_url": "https://api.github.com/users/dooglus/orgs",
      "repos_url": "https://api.github.com/users/dooglus/repos",
      "events_url": "https://api.github.com/users/dooglus/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/dooglus/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 64585,
        "node_id": "MDU6TGFiZWw2NDU4NQ==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug",
        "name": "Bug",
        "color": "FBBAAB",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "locked": true,
    "active_lock_reason": "resolved",
    "comments": 9,
    "closed_at": "2020-12-17T07:59:45Z",
    "created_at": "2017-04-14T11:51:45Z",
    "updated_at": "2022-02-15T11:05:06Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 294141666,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI5NDE0MTY2Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/294141666",
      "actor": {
        "login": "dooglus",
        "id": 573356,
        "node_id": "MDQ6VXNlcjU3MzM1Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/573356?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dooglus",
        "html_url": "https://github.com/dooglus",
        "followers_url": "https://api.github.com/users/dooglus/followers",
        "following_url": "https://api.github.com/users/dooglus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dooglus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dooglus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dooglus/subscriptions",
        "organizations_url": "https://api.github.com/users/dooglus/orgs",
        "repos_url": "https://api.github.com/users/dooglus/repos",
        "events_url": "https://api.github.com/users/dooglus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dooglus/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-04-14T11:53:50Z",
      "updated_at": "2017-04-14T11:53:50Z",
      "author_association": "CONTRIBUTOR",
      "body": "Oh. 15 minutes later it shut down!\r\n\r\n    2017-04-14 11:34:27 UpdateTip: new best=000000000000000001b4904ab88cb6f13b1f8ccbb9f183db51894cc521fabf23 height=461467 version=0x20000002 log2_work=86.267608 tx=212458675 date='2017-04-11 18:23:05' progress=0.996478 cache=18.5MiB(21415tx)\r\n    2017-04-14 11:34:27 Shutdown: In progress...\r\n    2017-04-14 11:34:27 opencon thread exit\r\n    2017-04-14 11:34:27 msghand thread exit\r\n    2017-04-14 11:49:50 119 addresses found from DNS seeds\r\n    2017-04-14 11:49:50 dnsseed thread exit\r\n    2017-04-14 11:49:51 Shutdown: done",
      "user": {
        "login": "dooglus",
        "id": 573356,
        "node_id": "MDQ6VXNlcjU3MzM1Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/573356?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dooglus",
        "html_url": "https://github.com/dooglus",
        "followers_url": "https://api.github.com/users/dooglus/followers",
        "following_url": "https://api.github.com/users/dooglus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dooglus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dooglus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dooglus/subscriptions",
        "organizations_url": "https://api.github.com/users/dooglus/orgs",
        "repos_url": "https://api.github.com/users/dooglus/repos",
        "events_url": "https://api.github.com/users/dooglus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dooglus/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/10210#issuecomment-294141666",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10210"
    },
    {
      "event": "renamed",
      "id": 1043245068,
      "node_id": "MDE3OlJlbmFtZWRUaXRsZUV2ZW50MTA0MzI0NTA2OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1043245068",
      "actor": {
        "login": "dooglus",
        "id": 573356,
        "node_id": "MDQ6VXNlcjU3MzM1Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/573356?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dooglus",
        "html_url": "https://github.com/dooglus",
        "followers_url": "https://api.github.com/users/dooglus/followers",
        "following_url": "https://api.github.com/users/dooglus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dooglus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dooglus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dooglus/subscriptions",
        "organizations_url": "https://api.github.com/users/dooglus/orgs",
        "repos_url": "https://api.github.com/users/dooglus/repos",
        "events_url": "https://api.github.com/users/dooglus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dooglus/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-04-14T11:56:09Z",
      "rename": {
        "from": "Frozen on shutdown",
        "to": "Frozen (for 15 minutes) on shutdown"
      }
    },
    {
      "event": "commented",
      "id": 294142238,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI5NDE0MjIzOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/294142238",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-04-14T11:58:50Z",
      "updated_at": "2017-04-14T11:58:50Z",
      "author_association": "MEMBER",
      "body": "Looks like a duplicate of #10209.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/10210#issuecomment-294142238",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10210"
    },
    {
      "event": "commented",
      "id": 294142454,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI5NDE0MjQ1NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/294142454",
      "actor": {
        "login": "dooglus",
        "id": 573356,
        "node_id": "MDQ6VXNlcjU3MzM1Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/573356?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dooglus",
        "html_url": "https://github.com/dooglus",
        "followers_url": "https://api.github.com/users/dooglus/followers",
        "following_url": "https://api.github.com/users/dooglus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dooglus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dooglus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dooglus/subscriptions",
        "organizations_url": "https://api.github.com/users/dooglus/orgs",
        "repos_url": "https://api.github.com/users/dooglus/repos",
        "events_url": "https://api.github.com/users/dooglus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dooglus/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-04-14T12:00:25Z",
      "updated_at": "2017-04-14T12:00:25Z",
      "author_association": "CONTRIBUTOR",
      "body": "Possibly, though the stack traces look quite different.",
      "user": {
        "login": "dooglus",
        "id": 573356,
        "node_id": "MDQ6VXNlcjU3MzM1Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/573356?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dooglus",
        "html_url": "https://github.com/dooglus",
        "followers_url": "https://api.github.com/users/dooglus/followers",
        "following_url": "https://api.github.com/users/dooglus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dooglus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dooglus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dooglus/subscriptions",
        "organizations_url": "https://api.github.com/users/dooglus/orgs",
        "repos_url": "https://api.github.com/users/dooglus/repos",
        "events_url": "https://api.github.com/users/dooglus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dooglus/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/10210#issuecomment-294142454",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10210"
    },
    {
      "event": "commented",
      "id": 294142674,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI5NDE0MjY3NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/294142674",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-04-14T12:02:25Z",
      "updated_at": "2017-04-14T12:02:25Z",
      "author_association": "MEMBER",
      "body": "This one is on the 0.14 branch. Jonas saw it on master.",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/10210#issuecomment-294142674",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10210"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-04-14T20:34:56Z",
      "updated_at": "2017-04-14T20:34:56Z",
      "source": {
        "issue": {
          "id": 221886328,
          "node_id": "MDExOlB1bGxSZXF1ZXN0MTE1OTg1ODky",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10215",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10215/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10215/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10215/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/10215",
          "number": 10215,
          "state": "closed",
          "state_reason": null,
          "title": "Check interruptNet during dnsseed lookups",
          "body": "Since #9229 we no longer can break out of a DNS lookup midway through, and have to wait for libc to time out. In most places we check for interrupt immediately before/after, so this is not a huge deal, except in the dnsseed lookup thread. In that thread, we loop over all dnsseeds and will have to wait for each to timeout. This appears to be the cause of the long wait in #10210.\r\n\r\nUntil upstream glibc fixes the issue (https://sourceware.org/bugzilla/show_bug.cgi?id=20874) with getaddrinfo_a or we move to libevent's DNS lookup library, the best we can do is insert more agressive checks between lookups, which we do here.",
          "user": {
            "login": "TheBlueMatt",
            "id": 649246,
            "node_id": "MDQ6VXNlcjY0OTI0Ng==",
            "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/TheBlueMatt",
            "html_url": "https://github.com/TheBlueMatt",
            "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
            "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
            "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
            "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
            "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "milestone": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/28",
            "html_url": "https://github.com/bitcoin/bitcoin/milestone/28",
            "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/28/labels",
            "id": 2458077,
            "node_id": "MDk6TWlsZXN0b25lMjQ1ODA3Nw==",
            "number": 28,
            "state": "closed",
            "title": "0.14.2",
            "creator": {
              "login": "MarcoFalke",
              "id": 6399679,
              "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
              "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/MarcoFalke",
              "html_url": "https://github.com/MarcoFalke",
              "followers_url": "https://api.github.com/users/MarcoFalke/followers",
              "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
              "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
              "repos_url": "https://api.github.com/users/MarcoFalke/repos",
              "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 0,
            "closed_issues": 5,
            "created_at": "2017-04-14T21:40:02Z",
            "updated_at": "2017-06-27T01:54:37Z",
            "closed_at": "2017-06-27T01:54:37Z"
          },
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 4,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10215",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/10215",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/10215.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/10215.patch"
          },
          "closed_at": "2017-04-17T12:16:09Z",
          "created_at": "2017-04-14T20:34:56Z",
          "updated_at": "2021-09-08T11:25:02Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 294231685,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI5NDIzMTY4NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/294231685",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-04-14T20:35:53Z",
      "updated_at": "2017-04-14T20:35:53Z",
      "author_association": "CONTRIBUTOR",
      "body": "The hanging thread here is the dnsseed thread. Because glibc's async dns lookup is horribly broken (see https://sourceware.org/bugzilla/show_bug.cgi?id=20874), we stopped using it in #9229. #10215 will make the dnsseed thread exit a bit faster, but until we move to libevent's dns lookup, we're stuck with this as the best we can do.",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/10210#issuecomment-294231685",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10210"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-04-17T20:25:19Z",
      "updated_at": "2017-04-17T20:25:19Z",
      "source": {
        "issue": {
          "id": 221760741,
          "node_id": "MDU6SXNzdWUyMjE3NjA3NDE=",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10209",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10209/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10209/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10209/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/10209",
          "number": 10209,
          "state": "closed",
          "state_reason": "completed",
          "title": "Stalled shutdown",
          "body": "Not sure if this is a real issue but just had a stalled shutdown on a node:\r\n\r\nThe node is running the master at `c7e73eafa139c29a38f73ab697e2e967a386908d`  from Wed Apr 5 11:29:19 2017.\r\n\r\nAs you can see, it took > 7 mins from a requested shutdown to a net thread exit.\r\nDebug log:\r\n```shell\r\n2017-04-14 07:34:12 Shutdown: In progress...\r\n2017-04-14 07:41:47 net thread exit\r\n2017-04-14 07:41:47 sending version (103 bytes) peer=193\r\n2017-04-14 07:41:47 msghand thread exit\r\n2017-04-14 07:41:47 send version message: version 70015, blocks=461809, us=[::]:0, peer=193\r\n2017-04-14 07:41:47 opencon thread exit\r\n2017-04-14 07:41:47 Flushed 69008 addresses to peers.dat  109ms\r\n2017-04-14 07:41:47 disconnecting peer=0\r\n2017-04-14 07:41:47 disconnecting peer=1\r\n2017-04-14 07:41:47 disconnecting peer=5\r\n2017-04-14 07:41:47 disconnecting peer=7\r\n2017-04-14 07:41:47 disconnecting peer=19\r\n2017-04-14 07:41:47 disconnecting peer=24\r\n2017-04-14 07:41:47 disconnecting peer=25\r\n2017-04-14 07:41:47 disconnecting peer=38\r\n2017-04-14 07:41:47 disconnecting peer=58\r\n2017-04-14 07:41:47 disconnecting peer=137\r\n2017-04-14 07:41:47 disconnecting peer=169\r\n2017-04-14 07:41:47 disconnecting peer=178\r\n2017-04-14 07:41:47 disconnecting peer=183\r\n2017-04-14 07:41:47 disconnecting peer=185\r\n2017-04-14 07:41:47 disconnecting peer=190\r\n2017-04-14 07:41:47 disconnecting peer=193\r\n2017-04-14 07:41:48 Dumped mempool: 0.046245s to copy, 0.174033s to dump\r\n2017-04-14 07:41:48 Shutdown: done\r\n```\r\n\r\nThe backtraces during the stalling are:\r\n\r\n```cpp\r\n(gdb) thread apply all bt\r\n\r\nThread 5 (Thread 0x7f777ffff700 (LWP 2034)):\r\n#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185\r\n#1  0x00007f77b76419eb in BGThread (this=0x7f77b8dd94b0) at leveldb/util/env_posix.cc:574\r\n#2  leveldb::(anonymous namespace)::PosixEnv::BGThreadWrapper (arg=0x7f77b8dd94b0) at leveldb/util/env_posix.cc:521\r\n#3  0x00007f77b4a93064 in start_thread (arg=0x7f777ffff700) at pthread_create.c:309\r\n#4  0x00007f77b47c862d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\r\n\r\nThread 4 (Thread 0x7f7767fff700 (LWP 2038)):\r\n#0  __lll_lock_wait () at ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:135\r\n#1  0x00007f77b4a95494 in _L_lock_952 () from /lib/x86_64-linux-gnu/libpthread.so.0\r\n#2  0x00007f77b4a952f6 in __GI___pthread_mutex_lock (mutex=0x7f775c1d12e8) at ../nptl/pthread_mutex_lock.c:114\r\n#3  0x00007f77b730fd2d in lock (this=<optimized out>) at /usr/include/boost/thread/pthread/recursive_mutex.hpp:110\r\n#4  lock (this=<optimized out>) at sync.h:60\r\n#5  lock (this=0x7f7767feeb50) at /usr/include/boost/thread/lock_types.hpp:346\r\n#6  Enter (pszName=<optimized out>, pszFile=<optimized out>, nLine=<optimized out>, this=0x7f7767feeb50) at sync.h:124\r\n#7  CMutexLock<CCriticalSection>::CMutexLock (this=0x7f7767feeb50, mutexIn=..., pszName=<optimized out>, pszFile=<optimized out>, nLine=<optimized out>, fTry=<optimized out>) at sync.h:145\r\n#8  0x00007f77b733bcfa in CConnman::ThreadSocketHandler (this=0x7f77b8ddc010) at net.cpp:1293\r\n#9  0x00007f77b730c68d in operator() (this=0x7f7767ffeeb0) at /usr/include/c++/4.9/functional:2439\r\n#10 TraceThread<std::function<void ()> >(char const*, std::function<void ()>) (name=0x7f77b76c9cfc \"net\", func=...) at util.h:266\r\n#11 0x00007f77b733f95b in _M_invoke<0ul, 1ul> (this=<optimized out>) at /usr/include/c++/4.9/functional:1700\r\n#12 operator() (this=<optimized out>) at /usr/include/c++/4.9/functional:1688\r\n#13 std::thread::_Impl<std::_Bind_simple<void (*(char const*, std::function<void ()>))(char const*, std::function<void ()>)> >::_M_run() (this=<optimized out>) at /usr/include/c++/4.9/thread:115\r\n#14 0x00007f77b5275970 in ?? () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\r\n#15 0x00007f77b4a93064 in start_thread (arg=0x7f7767fff700) at pthread_create.c:309\r\n#16 0x00007f77b47c862d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\r\n\r\nThread 3 (Thread 0x7f77667fc700 (LWP 2041)):\r\n#0  __lll_lock_wait () at ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:135\r\n#1  0x00007f77b4a95494 in _L_lock_952 () from /lib/x86_64-linux-gnu/libpthread.so.0\r\n#2  0x00007f77b4a952f6 in __GI___pthread_mutex_lock (mutex=0x7f77b7a73880 <cs_main>) at ../nptl/pthread_mutex_lock.c:114\r\n#3  0x00007f77b730fd2d in lock (this=<optimized out>) at /usr/include/boost/thread/pthread/recursive_mutex.hpp:110\r\n#4  lock (this=<optimized out>) at sync.h:60\r\n---Type <return> to continue, or q <return> to quit---\r\n#5  lock (this=0x7f77667fb690) at /usr/include/boost/thread/lock_types.hpp:346\r\n#6  Enter (pszName=<optimized out>, pszFile=<optimized out>, nLine=<optimized out>, this=0x7f77667fb690) at sync.h:124\r\n#7  CMutexLock<CCriticalSection>::CMutexLock (this=0x7f77667fb690, mutexIn=..., pszName=<optimized out>, pszFile=<optimized out>, nLine=<optimized out>, fTry=<optimized out>) at sync.h:145\r\n#8  0x00007f77b735e512 in (anonymous namespace)::InitializeNode (pnode=0x7f774c2ba150, connman=...) at net_processing.cpp:271\r\n#9  0x00007f77b7353e36 in operator() (a1=..., a0=<optimized out>, this=<optimized out>) at /usr/include/boost/function/function_template.hpp:767\r\n#10 m_invoke<boost::function<void(CNode*, CConnman&)>, 0u, 1u, CNode*&, CConnman&> (args=..., func=..., this=<optimized out>) at /usr/include/boost/signals2/detail/variadic_slot_invoker.hpp:92\r\n#11 operator()<boost::function<void(CNode*, CConnman&)>, CNode*&, CConnman&, 2ul> (args=..., func=..., this=<optimized out>) at /usr/include/boost/signals2/detail/variadic_slot_invoker.hpp:81\r\n#12 m_invoke<boost::shared_ptr<boost::signals2::detail::connection_body<std::pair<boost::signals2::detail::slot_meta_group, boost::optional<int> >, boost::signals2::slot<void(CNode*, CConnman&), boost::function<void(CNode*, CConnman&)> >, boost::signals2::mutex> > > (connectionBody=..., this=<optimized out>) at /usr/include/boost/signals2/detail/variadic_slot_invoker.hpp:117\r\n#13 operator()<boost::shared_ptr<boost::signals2::detail::connection_body<std::pair<boost::signals2::detail::slot_meta_group, boost::optional<int> >, boost::signals2::slot<void(CNode*, CConnman&), boost::function<void(CNode*, CConnman&)> >, boost::signals2::mutex> > > (connectionBody=..., this=<optimized out>) at /usr/include/boost/signals2/detail/variadic_slot_invoker.hpp:110\r\n#14 dereference (this=0x7f77667fb7d0) at /usr/include/boost/signals2/detail/slot_call_iterator.hpp:82\r\n#15 dereference<boost::signals2::detail::slot_call_iterator_t<boost::signals2::detail::variadic_slot_invoker<boost::signals2::detail::void_type, CNode*, CConnman&>, std::_List_iterator<boost::shared_ptr<boost::signals2::detail::connection_body<std::pair<boost::signals2::detail::slot_meta_group, boost::optional<int> >, boost::signals2::slot<void(CNode*, CConnman&), boost::function<void(CNode*, CConnman&)> >, boost::signals2::mutex> > >, boost::signals2::detail::connection_body<std::pair<boost::signals2::detail::slot_meta_group, boost::optional<int> >, boost::signals2::slot<void(CNode*, CConnman&), boost::function<void(CNode*, CConnman&)> >, boost::signals2::mutex> > > (f=...) at /usr/include/boost/iterator/iterator_facade.hpp:514\r\n#16 operator* (this=0x7f77667fb7d0) at /usr/include/boost/iterator/iterator_facade.hpp:639\r\n#17 operator()<boost::signals2::detail::slot_call_iterator_t<boost::signals2::detail::variadic_slot_invoker<boost::signals2::detail::void_type, CNode*, CConnman&>, std::_List_iterator<boost::shared_ptr<boost::signals2::detail::connection_body<std::pair<boost::signals2::detail::slot_meta_group, boost::optional<int> >, boost::signals2::slot<void(CNode*, CConnman&), boost::function<void(CNode*, CConnman&)> >, boost::signals2::mutex> > >, boost::signals2::detail::connection_body<std::pair<boost::signals2::detail::slot_meta_group, boost::optional<int> >, boost::signals2::slot<void(CNode*, CConnman&), boost::function<void(CNode*, CConnman&)> >, boost::signals2::mutex> > > (last=..., first=..., this=<optimized out>) at /usr/include/boost/signals2/optional_last_value.hpp:55\r\n#18 operator()<boost::signals2::optional_last_value<void>, boost::signals2::detail::slot_call_iterator_t<boost::signals2::detail::variadic_slot_invoker<boost::signals2::detail::void_type, CNode*, CConnman&>, std::_List_iterator<boost::shared_ptr<boost::signals2::detail::connection_body<std::pair<boost::signals2::detail::slot_meta_group, boost::optional<int> >, boost::signals2::slot<void(CNode*, CConnman&), boost::function<void(CNode*, CConnman&)> >, boost::signals2::mutex> > >, boost::signals2::detail::connection_body<std::pair<boost::signals2::detail::slot_meta_group, boost::optional<int> >, boost::signals2::slot<void(CNode*, CConnman&), boost::function<void(CNode*, CConnman&)> >, boost::signals2::mutex> > > (last=..., first=..., combiner=..., this=<optimized out>) at /usr/include/boost/signals2/detail/result_type_wrapper.hpp:64\r\n#19 boost::signals2::detail::signal_impl<void (CNode*, CConnman&), boost::signals2::optional_last_value<void>, int, std::less<int>, boost::function<void (CNode*, CConnman&)>, boost::function<void (boost::signals2::connection const&, CNode*, CConnman&)>, boost::signals2::mutex>::operator()(CNode*, CConnman&) (this=<optimized out>, args#0=0x7f774c2ba150, args#1=...) at /usr/include/boost/signals2/detail/signal_template.hpp:246\r\n#20 0x00007f77b7334d2d in operator() (args#1=..., args#0=<optimized out>, this=0x7f77b7a718f0 <g_signals+48>) at /usr/include/boost/signals2/detail/signal_template.hpp:695\r\n#21 CConnman::OpenNetworkConnection (this=this@entry=0x7f77b8ddc010, addrConnect=..., fCountFailure=<optimized out>, grantOutbound=grantOutbound@entry=0x7f77667fbbb0, pszDest=pszDest@entry=0x0, \r\n    fOneShot=fOneShot@entry=false, fFeeler=false, fAddnode=false) at net.cpp:1940\r\n#22 0x00007f77b7335b1b in CConnman::ThreadOpenConnections (this=<optimized out>) at net.cpp:1814\r\n#23 0x00007f77b730c68d in operator() (this=0x7f77667fbeb0) at /usr/include/c++/4.9/functional:2439\r\n#24 TraceThread<std::function<void ()> >(char const*, std::function<void ()>) (name=0x7f77b768222c \"opencon\", func=...) at util.h:266\r\n---Type <return> to continue, or q <return> to quit---\r\n#25 0x00007f77b733f95b in _M_invoke<0ul, 1ul> (this=<optimized out>) at /usr/include/c++/4.9/functional:1700\r\n#26 operator() (this=<optimized out>) at /usr/include/c++/4.9/functional:1688\r\n#27 std::thread::_Impl<std::_Bind_simple<void (*(char const*, std::function<void ()>))(char const*, std::function<void ()>)> >::_M_run() (this=<optimized out>) at /usr/include/c++/4.9/thread:115\r\n#28 0x00007f77b5275970 in ?? () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\r\n#29 0x00007f77b4a93064 in start_thread (arg=0x7f77667fc700) at pthread_create.c:309\r\n#30 0x00007f77b47c862d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\r\n\r\nThread 2 (Thread 0x7f7765ffb700 (LWP 2042)):\r\n#0  0x00007f77b4a99f0b in __libc_send (fd=43, buf=0x7f77508b89b0, n=998120, flags=-1) at ../sysdeps/unix/sysv/linux/x86_64/send.c:31\r\n#1  0x00007f77b732d728 in CConnman::SocketSendData (this=this@entry=0x7f77b8ddc010, pnode=pnode@entry=0x7f775c1d1240) at net.cpp:844\r\n#2  0x00007f77b7331b64 in CConnman::PushMessage(CNode*, CSerializedNetMsg&&) (this=this@entry=0x7f77b8ddc010, pnode=pnode@entry=0x7f775c1d1240, \r\n    msg=msg@entry=<unknown type in /home/jonasschnelli/bitcoin/bitcoin/src/bitcoind, CU 0x31d41a, DIE 0x4c1e2c>) at net.cpp:2770\r\n#3  0x00007f77b7367b54 in ProcessGetData (pfrom=0x7f775c1d1240, pfrom@entry=0x7f7765ff9470, consensusParams=..., connman=..., interruptMsgProc=...) at net_processing.cpp:1045\r\n#4  0x00007f77b736cef6 in ProcessMessage (pfrom=0x7f7765ff9470, pfrom@entry=0x7f775c1d1240, strCommand=\"\", vRecv=..., nTimeReceived=<optimized out>, chainparams=..., connman=..., interruptMsgProc=...)\r\n    at net_processing.cpp:1600\r\n#5  0x00007f77b737fe29 in ProcessMessages (pfrom=0x7f775c1d1240, connman=..., interruptMsgProc=...) at net_processing.cpp:2717\r\n#6  0x00007f77b7354c54 in operator() (a2=..., a1=..., a0=<optimized out>, this=<optimized out>) at /usr/include/boost/function/function_template.hpp:767\r\n#7  m_invoke<bool, boost::function<bool(CNode*, CConnman&, std::atomic<bool>&)>, 0u, 1u, 2u, CNode*&, CConnman&, std::atomic<bool>&> (args=..., func=..., this=<optimized out>)\r\n    at /usr/include/boost/signals2/detail/variadic_slot_invoker.hpp:87\r\n#8  operator()<boost::function<bool(CNode*, CConnman&, std::atomic<bool>&)>, CNode*&, CConnman&, std::atomic<bool>&, 3ul> (args=..., func=..., this=<optimized out>)\r\n    at /usr/include/boost/signals2/detail/variadic_slot_invoker.hpp:81\r\n#9  m_invoke<boost::shared_ptr<boost::signals2::detail::connection_body<std::pair<boost::signals2::detail::slot_meta_group, boost::optional<int> >, boost::signals2::slot<bool(CNode*, CConnman&, std::atomic<bool>&), boost::function<bool(CNode*, CConnman&, std::atomic<bool>&)> >, boost::signals2::mutex> > > (connectionBody=..., this=<optimized out>) at /usr/include/boost/signals2/detail/variadic_slot_invoker.hpp:123\r\n#10 operator()<boost::shared_ptr<boost::signals2::detail::connection_body<std::pair<boost::signals2::detail::slot_meta_group, boost::optional<int> >, boost::signals2::slot<bool(CNode*, CConnman&, std::atomic<bool>&), boost::function<bool(CNode*, CConnman&, std::atomic<bool>&)> >, boost::signals2::mutex> > > (connectionBody=..., this=<optimized out>) at /usr/include/boost/signals2/detail/variadic_slot_invoker.hpp:110\r\n#11 dereference (this=0x7f7765ffab20) at /usr/include/boost/signals2/detail/slot_call_iterator.hpp:82\r\n#12 dereference<boost::signals2::detail::slot_call_iterator_t<boost::signals2::detail::variadic_slot_invoker<bool, CNode*, CConnman&, std::atomic<bool>&>, std::_List_iterator<boost::shared_ptr<boost::signals2::detail::connection_body<std::pair<boost::signals2::detail::slot_meta_group, boost::optional<int> >, boost::signals2::slot<bool(CNode*, CConnman&, std::atomic<bool>&), boost::function<bool(CNode*, CConnman&, std::atomic<bool>&)> >, boost::signals2::mutex> > >, boost::signals2::detail::connection_body<std::pair<boost::signals2::detail::slot_meta_group, boost::optional<int> >, boost::signals2::slot<bool(CNode*, CConnman&, std::atomic<bool>&), boost::function<bool(CNode*, CConnman&, std::atomic<bool>&)> >, boost::signals2::mutex> > > (f=...) at /usr/include/boost/iterator/iterator_facade.hpp:514\r\n#13 operator* (this=0x7f7765ffab20) at /usr/include/boost/iterator/iterator_facade.hpp:639\r\n#14 operator()<boost::signals2::detail::slot_call_iterator_t<boost::signals2::detail::variadic_slot_invoker<bool, CNode*, CConnman&, std::atomic<bool>&>, std::_List_iterator<boost::shared_ptr<boost::signals2::detail::connection_body<std::pair<boost::signals2::detail::slot_meta_group, boost::optional<int> >, boost::signals2::slot<bool(CNode*, CConnman&, std::atomic<bool>&), boost::function<bool(CNode*, CConnman&, std::atomic<bool>&---Type <return> to continue, or q <return> to quit---\r\n)> >, boost::signals2::mutex> > >, boost::signals2::detail::connection_body<std::pair<boost::signals2::detail::slot_meta_group, boost::optional<int> >, boost::signals2::slot<bool(CNode*, CConnman&, std::atomic<bool>&), boost::function<bool(CNode*, CConnman&, std::atomic<bool>&)> >, boost::signals2::mutex> > > (last=..., first=..., this=<optimized out>) at net.h:419\r\n#15 operator()<CombinerAll, boost::signals2::detail::slot_call_iterator_t<boost::signals2::detail::variadic_slot_invoker<bool, CNode*, CConnman&, std::atomic<bool>&>, std::_List_iterator<boost::shared_ptr<boost::signals2::detail::connection_body<std::pair<boost::signals2::detail::slot_meta_group, boost::optional<int> >, boost::signals2::slot<bool(CNode*, CConnman&, std::atomic<bool>&), boost::function<bool(CNode*, CConnman&, std::atomic<bool>&)> >, boost::signals2::mutex> > >, boost::signals2::detail::connection_body<std::pair<boost::signals2::detail::slot_meta_group, boost::optional<int> >, boost::signals2::slot<bool(CNode*, CConnman&, std::atomic<bool>&), boost::function<bool(CNode*, CConnman&, std::atomic<bool>&)> >, boost::signals2::mutex> > > (last=..., first=..., combiner=..., this=<optimized out>)\r\n    at /usr/include/boost/signals2/detail/result_type_wrapper.hpp:53\r\n#16 boost::signals2::detail::signal_impl<bool (CNode*, CConnman&, std::atomic<bool>&), CombinerAll, int, std::less<int>, boost::function<bool (CNode*, CConnman&, std::atomic<bool>&)>, boost::function<bool (boost::signals2::connection const&, CNode*, CConnman&, std::atomic<bool>&)>, boost::signals2::mutex>::operator()(CNode*, CConnman&, std::atomic<bool>&) (this=<optimized out>, args#0=args#0@entry=0x7f775c1d1240, args#1=..., \r\n    args#2=...) at /usr/include/boost/signals2/detail/signal_template.hpp:246\r\n#17 0x00007f77b7336cd8 in operator() (args#2=..., args#1=..., args#0=0x7f775c1d1240, this=0x7f77b7a718c0 <g_signals>) at /usr/include/boost/signals2/detail/signal_template.hpp:695\r\n#18 CConnman::ThreadMessageHandler (this=0x7f77b8ddc010) at net.cpp:1970\r\n#19 0x00007f77b730c68d in operator() (this=0x7f7765ffaeb0) at /usr/include/c++/4.9/functional:2439\r\n#20 TraceThread<std::function<void ()> >(char const*, std::function<void ()>) (name=0x7f77b7682234 \"msghand\", func=...) at util.h:266\r\n#21 0x00007f77b733f95b in _M_invoke<0ul, 1ul> (this=<optimized out>) at /usr/include/c++/4.9/functional:1700\r\n#22 operator() (this=<optimized out>) at /usr/include/c++/4.9/functional:1688\r\n#23 std::thread::_Impl<std::_Bind_simple<void (*(char const*, std::function<void ()>))(char const*, std::function<void ()>)> >::_M_run() (this=<optimized out>) at /usr/include/c++/4.9/thread:115\r\n#24 0x00007f77b5275970 in ?? () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\r\n#25 0x00007f77b4a93064 in start_thread (arg=0x7f7765ffb700) at pthread_create.c:309\r\n#26 0x00007f77b47c862d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\r\n\r\nThread 1 (Thread 0x7f77b7a41740 (LWP 2018)):\r\n#0  0x00007f77b4a9449b in pthread_join (threadid=140150789093120, thread_return=0x0) at pthread_join.c:92\r\n#1  0x00007f77b5275837 in std::thread::join() () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\r\n#2  0x00007f77b733dc4f in CConnman::Stop (this=this@entry=0x7f77b8ddc010) at net.cpp:2342\r\n#3  0x00007f77b733e2ac in CConnman::~CConnman (this=0x7f77b8ddc010, __in_chrg=<optimized out>) at net.cpp:2395\r\n#4  0x00007f77b72e8ec1 in operator() (this=<optimized out>, __ptr=0x7f77b8ddc010) at /usr/include/c++/4.9/bits/unique_ptr.h:76\r\n#5  reset (__p=0x7f77b8ddc010, this=0x7f77b7a715d0 <g_connman>) at /usr/include/c++/4.9/bits/unique_ptr.h:344\r\n#6  Shutdown () at init.cpp:206\r\n#7  0x00007f77b72d8073 in AppInit (argc=<optimized out>, argv=<optimized out>) at bitcoind.cpp:184\r\n#8  0x00007f77b72cac1f in main (argc=3, argv=0x7ffdf20c7978) at bitcoind.cpp:196\r\n```",
          "user": {
            "login": "jonasschnelli",
            "id": 178464,
            "node_id": "MDQ6VXNlcjE3ODQ2NA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jonasschnelli",
            "html_url": "https://github.com/jonasschnelli",
            "followers_url": "https://api.github.com/users/jonasschnelli/followers",
            "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
            "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
            "repos_url": "https://api.github.com/users/jonasschnelli/repos",
            "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 7,
          "closed_at": "2017-12-15T21:27:26Z",
          "created_at": "2017-04-14T07:46:50Z",
          "updated_at": "2021-09-08T12:43:52Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "labeled",
      "id": 1048163206,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDEwNDgxNjMyMDY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1048163206",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-04-19T09:07:29Z",
      "label": {
        "name": "Bug",
        "color": "FBBAAB"
      }
    },
    {
      "event": "commented",
      "id": 372009335,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM3MjAwOTMzNQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/372009335",
      "actor": {
        "login": "eklitzke",
        "id": 2734,
        "node_id": "MDQ6VXNlcjI3MzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2734?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/eklitzke",
        "html_url": "https://github.com/eklitzke",
        "followers_url": "https://api.github.com/users/eklitzke/followers",
        "following_url": "https://api.github.com/users/eklitzke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/eklitzke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/eklitzke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/eklitzke/subscriptions",
        "organizations_url": "https://api.github.com/users/eklitzke/orgs",
        "repos_url": "https://api.github.com/users/eklitzke/repos",
        "events_url": "https://api.github.com/users/eklitzke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/eklitzke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-03-10T07:15:36Z",
      "updated_at": "2018-03-10T07:15:36Z",
      "author_association": "CONTRIBUTOR",
      "body": "What value do you have dbcache set to?",
      "user": {
        "login": "eklitzke",
        "id": 2734,
        "node_id": "MDQ6VXNlcjI3MzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2734?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/eklitzke",
        "html_url": "https://github.com/eklitzke",
        "followers_url": "https://api.github.com/users/eklitzke/followers",
        "following_url": "https://api.github.com/users/eklitzke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/eklitzke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/eklitzke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/eklitzke/subscriptions",
        "organizations_url": "https://api.github.com/users/eklitzke/orgs",
        "repos_url": "https://api.github.com/users/eklitzke/repos",
        "events_url": "https://api.github.com/users/eklitzke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/eklitzke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/10210#issuecomment-372009335",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10210"
    },
    {
      "event": "commented",
      "id": 372035116,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM3MjAzNTExNg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/372035116",
      "actor": {
        "login": "dooglus",
        "id": 573356,
        "node_id": "MDQ6VXNlcjU3MzM1Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/573356?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dooglus",
        "html_url": "https://github.com/dooglus",
        "followers_url": "https://api.github.com/users/dooglus/followers",
        "following_url": "https://api.github.com/users/dooglus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dooglus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dooglus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dooglus/subscriptions",
        "organizations_url": "https://api.github.com/users/dooglus/orgs",
        "repos_url": "https://api.github.com/users/dooglus/repos",
        "events_url": "https://api.github.com/users/dooglus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dooglus/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-03-10T14:44:47Z",
      "updated_at": "2018-03-10T14:45:11Z",
      "author_association": "CONTRIBUTOR",
      "body": "    dbcache=4000\r\n\r\n(but I think this is a DNS timeout issue, not a Berkeley DB issue)",
      "user": {
        "login": "dooglus",
        "id": 573356,
        "node_id": "MDQ6VXNlcjU3MzM1Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/573356?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dooglus",
        "html_url": "https://github.com/dooglus",
        "followers_url": "https://api.github.com/users/dooglus/followers",
        "following_url": "https://api.github.com/users/dooglus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dooglus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dooglus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dooglus/subscriptions",
        "organizations_url": "https://api.github.com/users/dooglus/orgs",
        "repos_url": "https://api.github.com/users/dooglus/repos",
        "events_url": "https://api.github.com/users/dooglus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dooglus/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/10210#issuecomment-372035116",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10210"
    },
    {
      "event": "commented",
      "id": 372037050,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM3MjAzNzA1MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/372037050",
      "actor": {
        "login": "eklitzke",
        "id": 2734,
        "node_id": "MDQ6VXNlcjI3MzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2734?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/eklitzke",
        "html_url": "https://github.com/eklitzke",
        "followers_url": "https://api.github.com/users/eklitzke/followers",
        "following_url": "https://api.github.com/users/eklitzke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/eklitzke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/eklitzke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/eklitzke/subscriptions",
        "organizations_url": "https://api.github.com/users/eklitzke/orgs",
        "repos_url": "https://api.github.com/users/eklitzke/repos",
        "events_url": "https://api.github.com/users/eklitzke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/eklitzke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-03-10T15:11:52Z",
      "updated_at": "2018-03-10T15:11:52Z",
      "author_association": "CONTRIBUTOR",
      "body": "`dbcache=4000` is way too high and I would not recommend that setting. That means that you may need to flush up to 4GB of data to disk when shutting down. In practice the utxo cache is flushed every 24 hr, but that still works out to about 1 GB of data for a synced node. It regularly takes my cloud nodes ~5 min to shut down with `dbcache=2048`. You also have a LevelDB compaction thread in your back trace which is consistent with a flush to disk happening.\r\n\r\nIf this happens to you again more useful than a GDB backtrace would be to strace all of the threads to completion, which would make it more obvious what is blocking on what. And I would suggest lowering the `dbcache` setting anyway.",
      "user": {
        "login": "eklitzke",
        "id": 2734,
        "node_id": "MDQ6VXNlcjI3MzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2734?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/eklitzke",
        "html_url": "https://github.com/eklitzke",
        "followers_url": "https://api.github.com/users/eklitzke/followers",
        "following_url": "https://api.github.com/users/eklitzke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/eklitzke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/eklitzke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/eklitzke/subscriptions",
        "organizations_url": "https://api.github.com/users/eklitzke/orgs",
        "repos_url": "https://api.github.com/users/eklitzke/repos",
        "events_url": "https://api.github.com/users/eklitzke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/eklitzke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/10210#issuecomment-372037050",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10210"
    },
    {
      "event": "renamed",
      "id": 1571944863,
      "node_id": "MDE3OlJlbmFtZWRUaXRsZUV2ZW50MTU3MTk0NDg2Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1571944863",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-04-12T20:51:40Z",
      "rename": {
        "from": "Frozen (for 15 minutes) on shutdown",
        "to": "Frozen (for 15 minutes) on shutdown [dnsseed thread]"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "Nikolay-Po",
        "id": 54221205,
        "node_id": "MDQ6VXNlcjU0MjIxMjA1",
        "avatar_url": "https://avatars.githubusercontent.com/u/54221205?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Nikolay-Po",
        "html_url": "https://github.com/Nikolay-Po",
        "followers_url": "https://api.github.com/users/Nikolay-Po/followers",
        "following_url": "https://api.github.com/users/Nikolay-Po/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Nikolay-Po/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Nikolay-Po/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Nikolay-Po/subscriptions",
        "organizations_url": "https://api.github.com/users/Nikolay-Po/orgs",
        "repos_url": "https://api.github.com/users/Nikolay-Po/repos",
        "events_url": "https://api.github.com/users/Nikolay-Po/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Nikolay-Po/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-09-03T20:57:57Z",
      "updated_at": "2019-09-03T20:57:57Z",
      "source": {
        "issue": {
          "id": 487859064,
          "node_id": "MDU6SXNzdWU0ODc4NTkwNjQ=",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16778",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16778/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16778/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16778/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/16778",
          "number": 16778,
          "state": "open",
          "state_reason": null,
          "title": "ThreadDNSAddressSeed hangs on sk_wait_data and doesn't stop on exit",
          "body": "This is a continue of previously opened issue [Unable to stop bitcoin-qt. ThreadDNSAddressSeed hangs. #16642](https://github.com/bitcoin/bitcoin/issues/16642#issue-481935673). Now hardware problems are sorted out. Single consumer-grade HDD on USB3.0 is changed for RAID1 of HGST Ultrastar 7K4000 on SATA. Database was changed for know working archived version. Except already repaired HDD problem, hardware is stable, none failures or glitches was found for several month of operation under different operating systems.\r\n\r\nThe problem is sometimes Bitcoin Core, particularly bitcoin-qt, unable to finish it's operation on close.\r\nI'm expecting normal bitcoin-qt application finishing after clicking \"close\" sign at top right corner of main GUI window.\r\nActual behavior: after several successful application shutdowns, the application remains to hang with a message \"Bitcoin Core is shutting down... Don't shut down the computer until this window dissapears.\"\r\nNatively compiled 01 Sep 2019 for arm-linux-gnueabihf, master branch.\r\n\r\nDebug output:\r\n```\r\n2019-09-01T07:44:54Z GUI: requestShutdown : Requesting shutdown\r\n2019-09-01T07:44:54Z GUI: shutdown : Running Shutdown in thread\r\n2019-09-01T07:44:54Z Interrupting HTTP server\r\n2019-09-01T07:44:54Z Interrupting HTTP RPC server\r\n2019-09-01T07:44:54Z Interrupting RPC\r\n2019-09-01T07:44:54Z addcon thread exit\r\n2019-09-01T07:44:54Z opencon thread exit\r\n2019-09-01T07:44:54Z msghand thread exit\r\n2019-09-01T07:44:54Z Shutdown: In progress...\r\n2019-09-01T07:44:54Z Stopping HTTP RPC server\r\n2019-09-01T07:44:54Z Stopping RPC\r\n2019-09-01T07:44:54Z Stopping HTTP server\r\n2019-09-01T07:44:54Z Stopped HTTP server\r\n2019-09-01T07:44:54Z net thread exit\r\n2019-09-01T07:44:54Z BerkeleyEnvironment::Flush: [/bdb] Flush(false)\r\n2019-09-01T07:44:54Z BerkeleyEnvironment::Flush: Flushing wallet.dat (refcount = 0)...\r\n2019-09-01T07:44:55Z BerkeleyEnvironment::Flush: wallet.dat checkpoint\r\n2019-09-01T07:44:55Z BerkeleyEnvironment::Flush: wallet.dat detach\r\n2019-09-01T07:44:55Z BerkeleyEnvironment::Flush: wallet.dat closed\r\n2019-09-01T07:44:55Z BerkeleyEnvironment::Flush: Flush(false) took             271ms\r\n2019-09-01T07:58:54Z Flushed 64452 addresses to peers.dat  1854ms\r\n2019-09-01T08:13:56Z Flushed 64452 addresses to peers.dat  2216ms\r\n2019-09-01T08:22:11Z Potential stale tip detected, will try using extra outbound peer (last tip update: 2245 seconds ago)\r\n2019-09-01T08:22:11Z net: setting try another outbound peer=true\r\n2019-09-01T08:28:58Z Flushed 64452 addresses to peers.dat  1895ms\r\n\r\n```\r\n\r\nThreads after shutdown request:\r\n```\r\nrock@Debian-Desktop:~$ ps -eLl\r\n...\r\nF S   UID   PID  PPID   LWP  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD\r\n0 S  1000  3094  1336  3094  4  80   0 - 139807 poll_s pts/0   00:02:43 bitcoin-main\r\n1 S  1000  3094  1336  3095  0  80   0 - 139807 poll_s pts/0   00:00:01 QXcbEventReader\r\n1 S  1000  3094  1336  3097  0  80   0 - 139807 futex_ pts/0   00:00:00 mali-mem-purge\r\n1 S  1000  3094  1336  3098  0  80   0 - 139807 futex_ pts/0   00:00:00 mali-utility-wo\r\n1 S  1000  3094  1336  3099  0  80   0 - 139807 futex_ pts/0   00:00:00 mali-utility-wo\r\n1 S  1000  3094  1336  3100  0  80   0 - 139807 futex_ pts/0   00:00:00 mali-utility-wo\r\n1 S  1000  3094  1336  3101  0  80   0 - 139807 futex_ pts/0   00:00:00 mali-utility-wo\r\n1 S  1000  3094  1336  3102  0  80   0 - 139807 futex_ pts/0   00:00:00 mali-utility-wo\r\n1 S  1000  3094  1336  3103  0  80   0 - 139807 futex_ pts/0   00:00:00 mali-utility-wo\r\n1 S  1000  3094  1336  3104  0  80   0 - 139807 poll_s pts/0   00:00:00 mali-cmar-backe\r\n1 S  1000  3094  1336  3105  0  80   0 - 139807 futex_ pts/0   00:00:00 mali-hist-dump\r\n1 S  1000  3094  1336  3106  0  80   0 - 139807 poll_s pts/0   00:00:00 QDBusConnection\r\n1 S  1000  3094  1336  3112  3  80   0 - 139807 futex_ pts/0   00:01:54 bitcoin-shutoff\r\n1 S  1000  3094  1336  3117  0  80   0 - 139807 futex_ pts/0   00:00:26 bitcoin-scriptc\r\n1 S  1000  3094  1336  3118  0  80   0 - 139807 futex_ pts/0   00:00:17 bitcoin-schedul\r\n1 S  1000  3094  1336  3122 17  80   0 - 139807 futex_ pts/0   00:09:23 bitcoin-qt-init\r\n1 S  1000  3094  1336  3151  0  80   0 - 139807 sk_wai pts/0   00:00:00 bitcoin-dnsseed\r\n1 S  1000  3094  1336  3156  0  80   0 - 139807 poll_s pts/0   00:00:00 QThread\r\n1 S  1000  3094  1336  3157  0  80   0 - 139807 poll_s pts/0   00:00:00 Qt bearer threa\r\n...\r\n```\r\nThe issue is reproducing quite reliable. With 0.18 versions on different computers, different builds I had this problem at least three times even after DB rescan. For some time the Core works normally but at some point, usually after network disturbance, it hangs on shutdown.\r\n\r\nNow it is self-compiled from https://github.com/bitcoin/bitcoin.git\r\nBitcoin Core version v0.18.99.0-495db72ee-dirty\r\nThe machine is ROCKPro64, RK3399 CPU, 4GB RAM.\r\nConfigure command was:\r\n```\r\n./configure --enable-debug --enable-werror BDB_LIBS=\"-L${BDB_PREFIX}/lib -ldb_cxx-4.8\" BDB_CFLAGS=\"-I${BDB_PREFIX}/include\" --with-boost-libdir=/usr/lib/arm-linux-gnueabihf\r\n```\r\nThis time I compiled the Core with debug enabled. If being provided with more debug instructions I will try to investigate it deeper.\r\nAfter the compilation and installation, test_bitcoin was completed with none errors.\r\n\r\nAs I wrote in #16642 before, the problem persist not only at mine ARM CPU but on an Intel CPU too.\r\n\r\nThank you.",
          "user": {
            "login": "Nikolay-Po",
            "id": 54221205,
            "node_id": "MDQ6VXNlcjU0MjIxMjA1",
            "avatar_url": "https://avatars.githubusercontent.com/u/54221205?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Nikolay-Po",
            "html_url": "https://github.com/Nikolay-Po",
            "followers_url": "https://api.github.com/users/Nikolay-Po/followers",
            "following_url": "https://api.github.com/users/Nikolay-Po/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/Nikolay-Po/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/Nikolay-Po/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/Nikolay-Po/subscriptions",
            "organizations_url": "https://api.github.com/users/Nikolay-Po/orgs",
            "repos_url": "https://api.github.com/users/Nikolay-Po/repos",
            "events_url": "https://api.github.com/users/Nikolay-Po/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/Nikolay-Po/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            }
          ],
          "assignee": {
            "login": "pinheadmz",
            "id": 2084648,
            "node_id": "MDQ6VXNlcjIwODQ2NDg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pinheadmz",
            "html_url": "https://github.com/pinheadmz",
            "followers_url": "https://api.github.com/users/pinheadmz/followers",
            "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
            "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
            "repos_url": "https://api.github.com/users/pinheadmz/repos",
            "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
            "type": "User",
            "site_admin": false
          },
          "assignees": [
            {
              "login": "pinheadmz",
              "id": 2084648,
              "node_id": "MDQ6VXNlcjIwODQ2NDg=",
              "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/pinheadmz",
              "html_url": "https://github.com/pinheadmz",
              "followers_url": "https://api.github.com/users/pinheadmz/followers",
              "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
              "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
              "repos_url": "https://api.github.com/users/pinheadmz/repos",
              "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
              "type": "User",
              "site_admin": false
            }
          ],
          "author_association": "NONE",
          "locked": false,
          "comments": 13,
          "created_at": "2019-09-01T08:48:23Z",
          "updated_at": "2023-06-02T14:56:03Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 747073054,
      "node_id": "MDEyOklzc3VlQ29tbWVudDc0NzA3MzA1NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/747073054",
      "actor": {
        "login": "adamjonas",
        "id": 755825,
        "node_id": "MDQ6VXNlcjc1NTgyNQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/755825?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/adamjonas",
        "html_url": "https://github.com/adamjonas",
        "followers_url": "https://api.github.com/users/adamjonas/followers",
        "following_url": "https://api.github.com/users/adamjonas/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/adamjonas/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/adamjonas/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/adamjonas/subscriptions",
        "organizations_url": "https://api.github.com/users/adamjonas/orgs",
        "repos_url": "https://api.github.com/users/adamjonas/repos",
        "events_url": "https://api.github.com/users/adamjonas/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/adamjonas/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-12-16T22:15:08Z",
      "updated_at": "2020-12-16T22:15:08Z",
      "author_association": "MEMBER",
      "body": "The flurry of issues of this kind (e.g. #10209 and #10140) that popped up on 0.14 seem to have been addressed by https://github.com/bitcoin/bitcoin/pull/10215 and https://github.com/bitcoin/bitcoin/pull/10228. This can probably be closed since there haven't been any further reports.",
      "user": {
        "login": "adamjonas",
        "id": 755825,
        "node_id": "MDQ6VXNlcjc1NTgyNQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/755825?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/adamjonas",
        "html_url": "https://github.com/adamjonas",
        "followers_url": "https://api.github.com/users/adamjonas/followers",
        "following_url": "https://api.github.com/users/adamjonas/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/adamjonas/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/adamjonas/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/adamjonas/subscriptions",
        "organizations_url": "https://api.github.com/users/adamjonas/orgs",
        "repos_url": "https://api.github.com/users/adamjonas/repos",
        "events_url": "https://api.github.com/users/adamjonas/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/adamjonas/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/10210#issuecomment-747073054",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10210"
    },
    {
      "event": "closed",
      "id": 4123776738,
      "node_id": "MDExOkNsb3NlZEV2ZW50NDEyMzc3NjczOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4123776738",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-12-17T07:59:45Z"
    },
    {
      "event": "locked",
      "id": 6074020521,
      "node_id": "LOE_lADOABII584NOFRUzwAAAAFqCjKp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6074020521",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-15T11:05:06Z",
      "lock_reason": "resolved"
    }
  ]
}