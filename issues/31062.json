{
  "type": "issue",
  "issue": {
    "id": 2575786142,
    "node_id": "I_kwDOABII586Zh2Ce",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31062",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31062/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31062/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31062/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/31062",
    "number": 31062,
    "state": "open",
    "state_reason": null,
    "title": "Distribute darknet node addresses via DNS seeds using AAAA records",
    "body": "### Please describe the feature you'd like to see added.\r\n\r\nRight now, Bitcoin Core can only receive IPv4 and IPv6 node addresses from DNS seeds. Adding support for darknet addresses would bring the advantages of using DNS seeds (more privacy, faster bootstrapping, etc.) for node discovery to darknet nodes.\r\n\r\n\r\n### Is your feature related to a problem, if so please describe it.\r\n\r\n_No response_\r\n\r\n### Describe the solution you'd like\r\n\r\nBefore TorV2 addresses were deprecated, [Bitcoin Core](https://github.com/bitcoin/bitcoin/blob/5fe6878b5f7c1c97b5c8ae04be9592be73e840c1/src/netaddress.h#L64-L69) and seeds using [sipa's seeder](https://github.com/sipa/bitcoin-seeder/blob/ff482e465ff84ea6fa276d858ccb7ef32e3355d3/netbase.cpp#L535-L543) (and maybe others) supported distributing such addresses by encoding them in AAAA records: Since TorV2 addresses used only 80-bit hashes, they neatly fitted into the 128-bit data field of an AAAA record, leaving plenty of room for a 48bit prefix (from the not publicly routable fc00::/7 subnet) to signal the custom encoding.\r\n\r\nTorV3 and I2p addresses use 256-bits of data, making them too large for single AAAA records. However, such addresses can be serialized using a trimmed BIP155 format (just the net id and address), concatenated, and broken into chunks that fit into AAAA record data fields.\r\n\r\nIn addition to a prefix to signal the custom encoding, correct deserialization requires a sequence number since public resolvers may reorder records.\r\n\r\nTo get a rough estimate for the numbers, consider the following: DNS messages should be at most 512B. The header has a fixed size of 12B. The question section has variable size because it contains the query domain. 30 chars should be sufficient for most seeds, which implies a size of 36B for the question section (32B for the 30 chars, plus 2B each for query type and class). This leaves 464B for the record section. Since AAAA records are 28B each (2B each for name pointer, type, class, length, 4B for TTL, and 128b/16B for data), a DNS reply for regular-length domains can at most contain 16 AAAA records. Hence four bits are required to encode sequence numbers.\r\n\r\nThe publicly unroutable fc00::/7 prefix used in the past uses 7 bits. Extending these by e.g. five more bits for versioning to accommodate for future updates results in a signaling-prefix size of 12 bits, leaving 112 bit (or 14B) for payload:\r\n\r\n```\r\n 0         11 12       15 16                                                       127\r\n+------------+----------+------------------------------------------------------------+\r\n|  Prefix    |   Seq#   |                         Payload                            |\r\n|  (12 bits) | (4 bits) |                        (112 bits)                          |\r\n+------------+----------+------------------------------------------------------------+\r\n```\r\n\r\nAt 16 AAAA records per DNS message, 14B of payload per record and 33B per TorV3/I2P address (net id plus 256-bit data), six TorV3/I2P addresses can be encoded per message.\r\n\r\nCJDNS addresses, which are IPv6 addresses, could be encoded as well; at 17B per address (net id plus 128-bit data), 13 addresses could be encoded per message.\r\n\r\nTo avoid interfering with legacy software, darknet addresses could only be distributed via special subdomains (similar to `x` used for version bits), e.g. `ni`, where `n` stands for network id and `i` for a particular network id specified in BIP155. Example `x9.n4.seed.acme.com.`\r\n\r\nDemo implementation: https://github.com/virtu/darkseed\r\nDemo DNS seed: `dnsseed.21.ninja`\r\n\r\n### Describe any alternatives you've considered\r\n\r\nOriginally, I considered using DNS NULL records, because their data fields allow for an arbitrary amount of binary data, resulting in a much better encoding efficiency than ~50% offered by the proposed AAAA encoding (14B of overhead-including payload per 28B record).\r\n\r\nThis approach, however, has the following shortcomings (as pointed out by [sipa in the forum](https://delvingbitcoin.org/t/hardcoded-seeds-dns-seeds-and-darknet-nodes/1123/6)):\r\n- Depend on external DNS library or extra code to create DNS request with NULL query type\r\n- Public recursive resolvers might not cache DNS NULL records\r\n\r\n### Please leave any additional context\r\n\r\n_No response_",
    "user": {
      "login": "virtu",
      "id": 72414353,
      "node_id": "MDQ6VXNlcjcyNDE0MzUz",
      "avatar_url": "https://avatars.githubusercontent.com/u/72414353?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/virtu",
      "html_url": "https://github.com/virtu",
      "followers_url": "https://api.github.com/users/virtu/followers",
      "following_url": "https://api.github.com/users/virtu/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/virtu/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/virtu/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/virtu/subscriptions",
      "organizations_url": "https://api.github.com/users/virtu/orgs",
      "repos_url": "https://api.github.com/users/virtu/repos",
      "events_url": "https://api.github.com/users/virtu/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/virtu/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "labels": [
      {
        "id": 64583,
        "node_id": "MDU6TGFiZWw2NDU4Mw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature",
        "name": "Feature",
        "color": "7cf575",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "locked": false,
    "comments": 6,
    "created_at": "2024-10-09T12:27:39Z",
    "updated_at": "2024-11-29T10:53:50Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 14572117257,
      "node_id": "LE_lADOABII586Zh2CezwAAAANkkN0J",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14572117257",
      "actor": {
        "login": "virtu",
        "id": 72414353,
        "node_id": "MDQ6VXNlcjcyNDE0MzUz",
        "avatar_url": "https://avatars.githubusercontent.com/u/72414353?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/virtu",
        "html_url": "https://github.com/virtu",
        "followers_url": "https://api.github.com/users/virtu/followers",
        "following_url": "https://api.github.com/users/virtu/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/virtu/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/virtu/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/virtu/subscriptions",
        "organizations_url": "https://api.github.com/users/virtu/orgs",
        "repos_url": "https://api.github.com/users/virtu/repos",
        "events_url": "https://api.github.com/users/virtu/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/virtu/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-09T12:27:39Z",
      "label": {
        "name": "Feature",
        "color": "7cf575"
      }
    },
    {
      "event": "commented",
      "id": 2406676052,
      "node_id": "IC_kwDOABII586PcvZU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2406676052",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-11T06:57:38Z",
      "updated_at": "2024-10-11T06:57:38Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK\r\n\r\n> ... from the not publicly routable fc00::/7 subnet ...\r\n\r\nThis overlaps with CJDNS which [uses `fc00::/8`](https://github.com/cjdelisle/cjdns/blob/master/doc/Whitepaper.md#pulling-it-all-together). This should be ok since those special AAAA records are going to be server by special DNS servers that are separate from the existent ones. Whoever queries them will be aware of the special encoding. Then maybe a special prefix is not needed at all?\r\n\r\nSince this is Bitcoin P2P specific and since that needs address+port, and in the light of https://github.com/bitcoin/bitcoin/issues/31036 maybe include 2 more bytes for a port as well.",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/31062#issuecomment-2406676052",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31062"
    },
    {
      "event": "commented",
      "id": 2406707660,
      "node_id": "IC_kwDOABII586Pc3HM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2406707660",
      "actor": {
        "login": "1440000bytes",
        "id": 147166694,
        "node_id": "U_kgDOCMWV5g",
        "avatar_url": "https://avatars.githubusercontent.com/u/147166694?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1440000bytes",
        "html_url": "https://github.com/1440000bytes",
        "followers_url": "https://api.github.com/users/1440000bytes/followers",
        "following_url": "https://api.github.com/users/1440000bytes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1440000bytes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1440000bytes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1440000bytes/subscriptions",
        "organizations_url": "https://api.github.com/users/1440000bytes/orgs",
        "repos_url": "https://api.github.com/users/1440000bytes/repos",
        "events_url": "https://api.github.com/users/1440000bytes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1440000bytes/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-11T07:19:31Z",
      "updated_at": "2024-10-11T07:19:31Z",
      "author_association": "NONE",
      "body": "Concept NACK\r\n\r\nOnion and i2p nodes not dependent on DNS seeds is a feature. It's better if only IPv4 and IPv6 nodes use it.\r\n\r\nMaybe we could experiment with [GNS](https://www.gnunet.org/en/gns.html)? Or use this approach for IPv4 nodes with non default port? https://github.com/bitcoin/bitcoin/issues/30900",
      "user": {
        "login": "1440000bytes",
        "id": 147166694,
        "node_id": "U_kgDOCMWV5g",
        "avatar_url": "https://avatars.githubusercontent.com/u/147166694?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1440000bytes",
        "html_url": "https://github.com/1440000bytes",
        "followers_url": "https://api.github.com/users/1440000bytes/followers",
        "following_url": "https://api.github.com/users/1440000bytes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1440000bytes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1440000bytes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1440000bytes/subscriptions",
        "organizations_url": "https://api.github.com/users/1440000bytes/orgs",
        "repos_url": "https://api.github.com/users/1440000bytes/repos",
        "events_url": "https://api.github.com/users/1440000bytes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1440000bytes/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/31062#issuecomment-2406707660",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31062"
    },
    {
      "event": "commented",
      "id": 2418932066,
      "node_id": "IC_kwDOABII586QLfli",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2418932066",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-17T08:45:07Z",
      "updated_at": "2024-10-17T08:45:07Z",
      "author_association": "MEMBER",
      "body": "Concept NACK\r\n\r\nIt's a clever trick, but we've considered this kind of thing before and it's a really a deep rabbit hole.\r\n\r\nFrom what i heard it's not generally a good idea to stash different data in AAAA records. Caching DNS servers can have checks to assume the addresses are routable and valid. Additionally, there's also no guarantee that clients get all the addresses, so splitting the data is a bit brittle.\r\n\r\nThis would also break the assumption that a random address returned from the DNS seed is connectable (because they might get a fragment instead).  Bitcoin core peers fully behind Tor rely on this behavior.\r\n\r\nAlso wonder, like @1440000bytes, what would be the motivation to have I2P and Tor addresses returned by DNS seeds? Mind that clients behind neither can do DNS queries (well, Tor has a [SOCKS extension](https://spec.torproject.org/socks-extensions.html#name-lookup) to do a DNS query, but it cannot return more than one result), and querying through clearnet through ISP's DNS servers is a leak.\r\n\r\nOne could return arbitrary data in TXT records but they're much harder to query from C++ code, and suffer from the same above problem.",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/31062#issuecomment-2418932066",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31062"
    },
    {
      "event": "mentioned",
      "id": 14695294462,
      "node_id": "MEE_lADOABII586Zh2CezwAAAANr6GX-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14695294462",
      "actor": {
        "login": "1440000bytes",
        "id": 147166694,
        "node_id": "U_kgDOCMWV5g",
        "avatar_url": "https://avatars.githubusercontent.com/u/147166694?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1440000bytes",
        "html_url": "https://github.com/1440000bytes",
        "followers_url": "https://api.github.com/users/1440000bytes/followers",
        "following_url": "https://api.github.com/users/1440000bytes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1440000bytes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1440000bytes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1440000bytes/subscriptions",
        "organizations_url": "https://api.github.com/users/1440000bytes/orgs",
        "repos_url": "https://api.github.com/users/1440000bytes/repos",
        "events_url": "https://api.github.com/users/1440000bytes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1440000bytes/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-17T08:45:09Z"
    },
    {
      "event": "subscribed",
      "id": 14695294480,
      "node_id": "SE_lADOABII586Zh2CezwAAAANr6GYQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14695294480",
      "actor": {
        "login": "1440000bytes",
        "id": 147166694,
        "node_id": "U_kgDOCMWV5g",
        "avatar_url": "https://avatars.githubusercontent.com/u/147166694?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1440000bytes",
        "html_url": "https://github.com/1440000bytes",
        "followers_url": "https://api.github.com/users/1440000bytes/followers",
        "following_url": "https://api.github.com/users/1440000bytes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1440000bytes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1440000bytes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1440000bytes/subscriptions",
        "organizations_url": "https://api.github.com/users/1440000bytes/orgs",
        "repos_url": "https://api.github.com/users/1440000bytes/repos",
        "events_url": "https://api.github.com/users/1440000bytes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1440000bytes/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-17T08:45:09Z"
    },
    {
      "event": "commented",
      "id": 2421667923,
      "node_id": "IC_kwDOABII586QV7hT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2421667923",
      "actor": {
        "login": "virtu",
        "id": 72414353,
        "node_id": "MDQ6VXNlcjcyNDE0MzUz",
        "avatar_url": "https://avatars.githubusercontent.com/u/72414353?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/virtu",
        "html_url": "https://github.com/virtu",
        "followers_url": "https://api.github.com/users/virtu/followers",
        "following_url": "https://api.github.com/users/virtu/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/virtu/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/virtu/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/virtu/subscriptions",
        "organizations_url": "https://api.github.com/users/virtu/orgs",
        "repos_url": "https://api.github.com/users/virtu/repos",
        "events_url": "https://api.github.com/users/virtu/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/virtu/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-18T07:39:19Z",
      "updated_at": "2024-10-18T08:14:27Z",
      "author_association": "CONTRIBUTOR",
      "body": "> From what i heard it's not generally a good idea to stash different data in AAAA records. Caching DNS servers can have checks to assume the addresses are routable and valid. Additionally, there's also no guarantee that clients get all the addresses, so splitting the data is a bit brittle.\r\n>\r\n> This would also break the assumption that a random address returned from the DNS seed is connectable (because they might get a fragment instead). Bitcoin core peers fully behind Tor rely on this behavior.\r\n> \r\n\r\nI agree that all of these are problems. But I think we can work around all of them with DNSSEC (however, I'm not a DNS expert, so the following reasoning might not be entirely correct):\r\n- If this were to be though of v2 dns seeding and used dedicated subdomains (e.g. `nX` like described above), Bitcoin Core could make implicit assumptions about addresses, making the signaling prefix unnecessary; instead, one could choose a valid prefix to ensure each address is routable.\r\n- The RRSets' ordering and completeness can be enforced by mandating the use of DNSSEC, which prohibits omission and reordering after RRset canonicalization to ensure a valid signature.\r\n\r\n> Also wonder, like @1440000bytes, what would be the motivation to have I2P and Tor addresses returned by DNS seeds? Mind that clients behind neither can do DNS queries (well, Tor has a [SOCKS extension](https://spec.torproject.org/socks-extensions.html#name-lookup) to do a DNS query, but it cannot return more than one result), and querying through clearnet through ISP's DNS servers is a leak.\r\n\r\nApart from bringing the benefits of DNS seeds to non-IP nodes, this could also be a solution to https://github.com/bitcoin/bitcoin/issues/31036 if the scope were increased to also cover IP addresses and port numbers.",
      "user": {
        "login": "virtu",
        "id": 72414353,
        "node_id": "MDQ6VXNlcjcyNDE0MzUz",
        "avatar_url": "https://avatars.githubusercontent.com/u/72414353?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/virtu",
        "html_url": "https://github.com/virtu",
        "followers_url": "https://api.github.com/users/virtu/followers",
        "following_url": "https://api.github.com/users/virtu/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/virtu/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/virtu/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/virtu/subscriptions",
        "organizations_url": "https://api.github.com/users/virtu/orgs",
        "repos_url": "https://api.github.com/users/virtu/repos",
        "events_url": "https://api.github.com/users/virtu/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/virtu/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/31062#issuecomment-2421667923",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31062"
    },
    {
      "event": "mentioned",
      "id": 14713631075,
      "node_id": "MEE_lADOABII586Zh2CezwAAAANtADFj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14713631075",
      "actor": {
        "login": "1440000bytes",
        "id": 147166694,
        "node_id": "U_kgDOCMWV5g",
        "avatar_url": "https://avatars.githubusercontent.com/u/147166694?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1440000bytes",
        "html_url": "https://github.com/1440000bytes",
        "followers_url": "https://api.github.com/users/1440000bytes/followers",
        "following_url": "https://api.github.com/users/1440000bytes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1440000bytes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1440000bytes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1440000bytes/subscriptions",
        "organizations_url": "https://api.github.com/users/1440000bytes/orgs",
        "repos_url": "https://api.github.com/users/1440000bytes/repos",
        "events_url": "https://api.github.com/users/1440000bytes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1440000bytes/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-18T07:39:20Z"
    },
    {
      "event": "subscribed",
      "id": 14713631098,
      "node_id": "SE_lADOABII586Zh2CezwAAAANtADF6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14713631098",
      "actor": {
        "login": "1440000bytes",
        "id": 147166694,
        "node_id": "U_kgDOCMWV5g",
        "avatar_url": "https://avatars.githubusercontent.com/u/147166694?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1440000bytes",
        "html_url": "https://github.com/1440000bytes",
        "followers_url": "https://api.github.com/users/1440000bytes/followers",
        "following_url": "https://api.github.com/users/1440000bytes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1440000bytes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1440000bytes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1440000bytes/subscriptions",
        "organizations_url": "https://api.github.com/users/1440000bytes/orgs",
        "repos_url": "https://api.github.com/users/1440000bytes/repos",
        "events_url": "https://api.github.com/users/1440000bytes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1440000bytes/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-18T07:39:20Z"
    },
    {
      "event": "commented",
      "id": 2456901896,
      "node_id": "IC_kwDOABII586ScVkI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2456901896",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-05T11:17:22Z",
      "updated_at": "2024-11-05T11:17:22Z",
      "author_association": "CONTRIBUTOR",
      "body": "I agree with the reasoning above. I am still Concept ACK if we can have the clients get all addresses from the response, without some addresses being omitted. I see no downsides if separate DNS seeds are used for the new encoding, leaving the existent ones as they are currently.\r\n\r\nJust to clarify - Tor only nodes do not use DNS seeds and the intention here is to keep it that way. The motivation is to help multi-homed nodes that use clearnet and Tor. They are currently only getting clearnet addresses from the DNS seeds.\r\n\r\nTo include ports in the DNS seeds responses is a separate motivation for this.",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/31062#issuecomment-2456901896",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31062"
    },
    {
      "event": "commented",
      "id": 2507563863,
      "node_id": "IC_kwDOABII586VdmNX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2507563863",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-29T10:53:48Z",
      "updated_at": "2024-11-29T10:53:48Z",
      "author_association": "MEMBER",
      "body": "Might it not make more sense to avoid hacking DNS responses for this, or using DNS at all, and simply include some native Tor (/I2P/CJDNS) addresses in the `vSeeds` chainparams list? These hard-coded addresses could still point to a DNS seeder which can respond to addr_fetch requests from its hidden service (or I2P equivalent) with addresses of that type only. @achow101 [dnsseedrs](https://github.com/achow101/dnsseedrs/tree/main) already has onion, I2P and CJDNS results available to query, for example.\r\n\r\nThis avoids any requirement to use DNS over Tor (which may not be available anyway), and, whilst we may lose some of the other benefits of using DNS (like caching of addrs in the DNS itself), the marginal privacy benefits of requesting addrs via DNS seeds, which someone using a recursive resolver might get, are already included as part of connecting via an anonymity network.",
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/31062#issuecomment-2507563863",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31062"
    },
    {
      "event": "mentioned",
      "id": 15474201293,
      "node_id": "MEE_lADOABII586Zh2CezwAAAAOaVZLN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15474201293",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-29T10:53:50Z"
    },
    {
      "event": "subscribed",
      "id": 15474201304,
      "node_id": "SE_lADOABII586Zh2CezwAAAAOaVZLY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15474201304",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-29T10:53:50Z"
    }
  ]
}