{
  "type": "issue",
  "issue": {
    "id": 627919185,
    "node_id": "MDU6SXNzdWU2Mjc5MTkxODU=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19121",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19121/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19121/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19121/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/19121",
    "number": 19121,
    "state": "closed",
    "state_reason": "completed",
    "title": "Ability to recover a broken blockchain",
    "body": "**Is your feature request related to a problem? Please describe.**\r\n\r\nI'm always frustrated when almost half of a blockchain was downloaded and verified, and then happens a failure in a single block, which prevents the sync from proceeding forward…\r\n\r\n```\r\n2020-05-31T07:54:31Z Bitcoin Core version v0.19.0.1-gentoo (release build)\r\n...\r\n2020-05-31T07:54:40Z Loaded best chain: hashBestChain=000000000000000000be77bcc38cab3ec75b1918c4ce20904c9e48bacfd842c6 height=468087 date=2017-05-25T15:41:40Z progress=0.418393\r\n2020-05-31T07:54:40Z init message: Rewinding blocks...\r\n2020-05-31T07:54:41Z init message: Verifying blocks...\r\n2020-05-31T07:54:41Z Verifying last 6 blocks at level 3\r\n2020-05-31T07:54:41Z [0%]...[16%]...[33%]...[50%]...[66%]...[83%]...[99%]...[DONE].\r\n2020-05-31T07:54:42Z No coin database inconsistencies in last 6 blocks (14028 transactions)\r\n...\r\n2020-05-31T07:54:42Z init message: Loading P2P addresses...\r\n2020-05-31T07:54:42Z *** Corrupt block found indicating potential hardware failure; shutting down\r\n2020-05-31T07:54:42Z Error: A fatal internal error occurred, see debug.log for details\r\n2020-05-31T07:54:42Z ERROR: ConnectTip: ConnectBlock 0000000000000000006338960b86655b587e2bdf12655041375707807ac84c7d failed, bad-txnmrklroot, hashMerkleRoot mismatch (code 16)\r\n2020-05-31T07:54:42Z Failed to connect best block (bad-txnmrklroot, hashMerkleRoot mismatch (code 16))\r\n```\r\n\r\n**Describe the solution you'd like**\r\n\r\nI'd like to have a setting in `bitcoind` that would allow for the offending block removal and re-downloading.\r\n\r\n**Describe alternatives you've considered**\r\n\r\nManually fixing something in local LevelDB files.\r\n\r\n**Additional context**\r\n\r\n- Seems to be a common issue among bitcoin newbies\r\n- https://github.com/bitcoin/bitcoin/issues/11576\r\n- Hardware could fail\r\n- I use cheap microSD card for storing the blockchain",
    "user": {
      "login": "arbitrary-dev",
      "id": 6984946,
      "node_id": "MDQ6VXNlcjY5ODQ5NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6984946?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arbitrary-dev",
      "html_url": "https://github.com/arbitrary-dev",
      "followers_url": "https://api.github.com/users/arbitrary-dev/followers",
      "following_url": "https://api.github.com/users/arbitrary-dev/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/arbitrary-dev/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/arbitrary-dev/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/arbitrary-dev/subscriptions",
      "organizations_url": "https://api.github.com/users/arbitrary-dev/orgs",
      "repos_url": "https://api.github.com/users/arbitrary-dev/repos",
      "events_url": "https://api.github.com/users/arbitrary-dev/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/arbitrary-dev/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 64583,
        "node_id": "MDU6TGFiZWw2NDU4Mw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature",
        "name": "Feature",
        "color": "7cf575",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "NONE",
    "locked": true,
    "active_lock_reason": "resolved",
    "comments": 3,
    "closed_at": "2020-05-31T10:38:18Z",
    "created_at": "2020-05-31T08:37:17Z",
    "updated_at": "2022-02-15T10:45:25Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 3390411311,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDMzOTA0MTEzMTE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3390411311",
      "actor": {
        "login": "arbitrary-dev",
        "id": 6984946,
        "node_id": "MDQ6VXNlcjY5ODQ5NDY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6984946?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/arbitrary-dev",
        "html_url": "https://github.com/arbitrary-dev",
        "followers_url": "https://api.github.com/users/arbitrary-dev/followers",
        "following_url": "https://api.github.com/users/arbitrary-dev/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/arbitrary-dev/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/arbitrary-dev/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/arbitrary-dev/subscriptions",
        "organizations_url": "https://api.github.com/users/arbitrary-dev/orgs",
        "repos_url": "https://api.github.com/users/arbitrary-dev/repos",
        "events_url": "https://api.github.com/users/arbitrary-dev/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/arbitrary-dev/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-31T08:37:17Z",
      "label": {
        "name": "Feature",
        "color": "7cf575"
      }
    },
    {
      "event": "commented",
      "id": 636453041,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYzNjQ1MzA0MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/636453041",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-31T10:38:18Z",
      "updated_at": "2020-05-31T10:38:18Z",
      "author_association": "MEMBER",
      "body": "I don't think someone is going to write code to detect a bit flip in a block, to delete the block, then download it again. And for some other files (like wallet.dat or some parts of the utxo set) errors are not recoverable or at least not detectable without additional checksums/error correction.\r\n\r\nIf you want your wallet.dat to stay intact and run Bitcoin Core without consensus failures, I recommend using appropriate hardware.",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/19121#issuecomment-636453041",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19121"
    },
    {
      "event": "closed",
      "id": 3390489946,
      "node_id": "MDExOkNsb3NlZEV2ZW50MzM5MDQ4OTk0Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3390489946",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-31T10:38:18Z"
    },
    {
      "event": "commented",
      "id": 636458224,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYzNjQ1ODIyNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/636458224",
      "actor": {
        "login": "kantornnam",
        "id": 61786595,
        "node_id": "MDQ6VXNlcjYxNzg2NTk1",
        "avatar_url": "https://avatars.githubusercontent.com/u/61786595?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kantornnam",
        "html_url": "https://github.com/kantornnam",
        "followers_url": "https://api.github.com/users/kantornnam/followers",
        "following_url": "https://api.github.com/users/kantornnam/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kantornnam/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kantornnam/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kantornnam/subscriptions",
        "organizations_url": "https://api.github.com/users/kantornnam/orgs",
        "repos_url": "https://api.github.com/users/kantornnam/repos",
        "events_url": "https://api.github.com/users/kantornnam/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kantornnam/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-31T11:27:59Z",
      "updated_at": "2020-05-31T18:10:10Z",
      "author_association": "NONE",
      "body": "KNnam\n\nในวันที่ อา. 31 พ.ค. 2020 15:41 น. arbitrary-dev <notifications@github.com>\nเขียนว่า:\n\n> *Is your feature request related to a problem? Please describe.*\n>\n> I'm always frustrated when almost half of a blockchain was downloaded and\n> verified, and then happens a failure in a single block, which prevents the\n> sync from proceeding forward…\n>\n> 2020-05-31T07:54:31Z Bitcoin Core version v0.19.0.1-gentoo (release build)\n>\n> ...\n>\n> 2020-05-31T07:54:40Z Loaded best chain: hashBestChain=000000000000000000be77bcc38cab3ec75b1918c4ce20904c9e48bacfd842c6 height=468087 date=2017-05-25T15:41:40Z progress=0.418393\n>\n> 2020-05-31T07:54:40Z init message: Rewinding blocks...\n>\n> 2020-05-31T07:54:41Z init message: Verifying blocks...\n>\n> 2020-05-31T07:54:41Z Verifying last 6 blocks at level 3\n>\n> 2020-05-31T07:54:41Z [0%]...[16%]...[33%]...[50%]...[66%]...[83%]...[99%]...[DONE].\n>\n> 2020-05-31T07:54:42Z No coin database inconsistencies in last 6 blocks (14028 transactions)\n>\n> ...\n>\n> 2020-05-31T07:54:42Z init message: Loading P2P addresses...\n>\n> 2020-05-31T07:54:42Z *** Corrupt block found indicating potential hardware failure; shutting down\n>\n> 2020-05-31T07:54:42Z Error: A fatal internal error occurred, see debug.log for details\n>\n> 2020-05-31T07:54:42Z ERROR: ConnectTip: ConnectBlock 0000000000000000006338960b86655b587e2bdf12655041375707807ac84c7d failed, bad-txnmrklroot, hashMerkleRoot mismatch (code 16)\n>\n> 2020-05-31T07:54:42Z Failed to connect best block (bad-txnmrklroot, hashMerkleRoot mismatch (code 16))\n>\n>\n> *Describe the solution you'd like*\n>\n> I'd like to have a setting in bitcoind that would allow for local block\n> removal and re-downloading.\n>\n> *Describe alternatives you've considered*\n>\n> Manually fixing something in local LevelDB files.\n>\n> *Additional context*\n>\n>    - Seems to be a common issue among bitcoin newbies\n>    - #11576 <https://github.com/bitcoin/bitcoin/issues/11576>\n>    - Hardware could fail\n>    - I use cheap microSD card for storing the blockchain\n>\n> —\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/bitcoin/bitcoin/issues/19121>, or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AOXMTYYFOBNIIHQZTEDKQILRUIJZZANCNFSM4NPCEAYQ>\n> .\n>\n",
      "user": {
        "login": "kantornnam",
        "id": 61786595,
        "node_id": "MDQ6VXNlcjYxNzg2NTk1",
        "avatar_url": "https://avatars.githubusercontent.com/u/61786595?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kantornnam",
        "html_url": "https://github.com/kantornnam",
        "followers_url": "https://api.github.com/users/kantornnam/followers",
        "following_url": "https://api.github.com/users/kantornnam/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kantornnam/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kantornnam/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kantornnam/subscriptions",
        "organizations_url": "https://api.github.com/users/kantornnam/orgs",
        "repos_url": "https://api.github.com/users/kantornnam/repos",
        "events_url": "https://api.github.com/users/kantornnam/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kantornnam/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/19121#issuecomment-636458224",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19121"
    },
    {
      "event": "commented",
      "id": 636644653,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYzNjY0NDY1Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/636644653",
      "actor": {
        "login": "arbitrary-dev",
        "id": 6984946,
        "node_id": "MDQ6VXNlcjY5ODQ5NDY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6984946?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/arbitrary-dev",
        "html_url": "https://github.com/arbitrary-dev",
        "followers_url": "https://api.github.com/users/arbitrary-dev/followers",
        "following_url": "https://api.github.com/users/arbitrary-dev/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/arbitrary-dev/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/arbitrary-dev/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/arbitrary-dev/subscriptions",
        "organizations_url": "https://api.github.com/users/arbitrary-dev/orgs",
        "repos_url": "https://api.github.com/users/arbitrary-dev/repos",
        "events_url": "https://api.github.com/users/arbitrary-dev/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/arbitrary-dev/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-06-01T06:44:52Z",
      "updated_at": "2020-06-01T06:44:52Z",
      "author_association": "NONE",
      "body": "Very sad, 42% into the chain, and… I've done a complete FS check for data errors, and all files are reported as healthy according to their checksums. Also did an extended testing of CPU & memory on my machine and it reported 100% health :thinking: ",
      "user": {
        "login": "arbitrary-dev",
        "id": 6984946,
        "node_id": "MDQ6VXNlcjY5ODQ5NDY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6984946?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/arbitrary-dev",
        "html_url": "https://github.com/arbitrary-dev",
        "followers_url": "https://api.github.com/users/arbitrary-dev/followers",
        "following_url": "https://api.github.com/users/arbitrary-dev/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/arbitrary-dev/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/arbitrary-dev/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/arbitrary-dev/subscriptions",
        "organizations_url": "https://api.github.com/users/arbitrary-dev/orgs",
        "repos_url": "https://api.github.com/users/arbitrary-dev/repos",
        "events_url": "https://api.github.com/users/arbitrary-dev/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/arbitrary-dev/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/19121#issuecomment-636644653",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19121"
    },
    {
      "event": "locked",
      "id": 6073886683,
      "node_id": "LOE_lADOABII584lbUlRzwAAAAFqCCfb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6073886683",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-15T10:45:25Z",
      "lock_reason": "resolved"
    }
  ]
}