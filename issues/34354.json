{
  "type": "issue",
  "issue": {
    "id": 3834142125,
    "node_id": "I_kwDOABII587kiF2t",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34354",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34354/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34354/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34354/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/34354",
    "number": 34354,
    "state": "open",
    "state_reason": "reopened",
    "title": "test `wallet_assumeutxo.py` / wallet_backup.py is failing intermittently: wallet.cpp:543  RestoreWallet  Assertion `fs::is_empty(wallet_path)' failed. ",
    "body": "ISTM that the [Windows, ucrt, test cross-built CI failure](https://github.com/bitcoin/bitcoin/actions/runs/21172425203/job/60894641918?pr=33014) is unrelated, a restore wallet test case related to pruned blockchain in `wallet_assumeutxo.py` is failing.\r\n\r\n<details open>\r\n<summary>From the logs:</summary>\r\n\r\n```zsh\r\n2026-01-20T13:41:07.2385503Z 2026-01-20T13:41:04.152353Z TestFramework (INFO): Ensuring wallet can't be restored from a backup that was created before the pruneheight (pruned node)\r\n2026-01-20T13:41:07.2386535Z \r\n2026-01-20T13:41:07.2386839Z 2026-01-20T13:41:06.479889Z TestFramework (ERROR): Unexpected exception\r\n2026-01-20T13:41:07.2387306Z \r\n2026-01-20T13:41:07.2387503Z Traceback (most recent call last):\r\n2026-01-20T13:41:07.2387815Z \r\n2026-01-20T13:41:07.2388269Z   File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\util.py\", line 166, in try_rpc\r\n2026-01-20T13:41:07.2388901Z \r\n2026-01-20T13:41:07.2389049Z     fun(*args, **kwds)\r\n2026-01-20T13:41:07.2389318Z \r\n2026-01-20T13:41:07.2389432Z     ~~~^^^^^^^^^^^^^^^\r\n2026-01-20T13:41:07.2389660Z \r\n2026-01-20T13:41:07.2390180Z   File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\coverage.py\", line 50, in __call__\r\n2026-01-20T13:41:07.2390808Z \r\n2026-01-20T13:41:07.2391156Z     return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\r\n2026-01-20T13:41:07.2391651Z \r\n2026-01-20T13:41:07.2392093Z   File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\authproxy.py\", line 156, in __call__\r\n2026-01-20T13:41:07.2392771Z \r\n2026-01-20T13:41:07.2392996Z     raise JSONRPCException(response['error'], status)\r\n2026-01-20T13:41:07.2393424Z \r\n2026-01-20T13:41:07.2395532Z test_framework.authproxy.JSONRPCException: filesystem error: cannot remove: The process cannot access the file because it is being used by another process [D:\\a\\_temp\\test_runner_‚Çø_üèÉ_20260120_132914\\wallet_assumeutxo_56\\node3\\regtest\\w2\\wallet.dat] (-1)\r\n2026-01-20T13:41:07.2397271Z \r\n2026-01-20T13:41:07.2397277Z \r\n2026-01-20T13:41:07.2397281Z \r\n2026-01-20T13:41:07.2397613Z During handling of the above exception, another exception occurred:\r\n2026-01-20T13:41:07.2398102Z \r\n2026-01-20T13:41:07.2398107Z \r\n2026-01-20T13:41:07.2398112Z \r\n2026-01-20T13:41:07.2398334Z Traceback (most recent call last):\r\n2026-01-20T13:41:07.2398622Z \r\n2026-01-20T13:41:07.2399135Z   File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_framework.py\", line 142, in main\r\n2026-01-20T13:41:07.2399796Z \r\n2026-01-20T13:41:07.2399922Z     self.run_test()\r\n2026-01-20T13:41:07.2400161Z \r\n2026-01-20T13:41:07.2400286Z     ~~~~~~~~~~~~~^^\r\n2026-01-20T13:41:07.2400474Z \r\n2026-01-20T13:41:07.2400948Z   File \"D:\\a\\bitcoin\\bitcoin/test/functional/wallet_assumeutxo.py\", line 267, in run_test\r\n2026-01-20T13:41:07.2401587Z \r\n2026-01-20T13:41:07.2401827Z     self.test_restore_wallet_pruneheight(n3)\r\n2026-01-20T13:41:07.2402338Z \r\n2026-01-20T13:41:07.2402476Z     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^\r\n2026-01-20T13:41:07.2402806Z \r\n2026-01-20T13:41:07.2403384Z   File \"D:\\a\\bitcoin\\bitcoin/test/functional/wallet_assumeutxo.py\", line 99, in test_restore_wallet_pruneheight\r\n2026-01-20T13:41:07.2404151Z \r\n2026-01-20T13:41:07.2404691Z     assert_raises_rpc_error(-4, error_message, n3.restorewallet, \"w2\", \"backup_w2.dat\")\r\n2026-01-20T13:41:07.2405294Z \r\n2026-01-20T13:41:07.2405553Z     ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n2026-01-20T13:41:07.2405970Z \r\n2026-01-20T13:41:07.2406496Z   File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\util.py\", line 157, in assert_raises_rpc_error\r\n2026-01-20T13:41:07.2407238Z \r\n2026-01-20T13:41:07.2407544Z     assert try_rpc(code, message, fun, *args, **kwds), \"No exception raised\"\r\n2026-01-20T13:41:07.2408097Z \r\n2026-01-20T13:41:07.2408261Z            ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n2026-01-20T13:41:07.2408598Z \r\n2026-01-20T13:41:07.2409048Z   File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\util.py\", line 170, in try_rpc\r\n2026-01-20T13:41:07.2409645Z \r\n2026-01-20T13:41:07.2410041Z     raise AssertionError(\"Unexpected JSONRPC error code %i\" % e.error[\"code\"])\r\n2026-01-20T13:41:07.2410583Z \r\n2026-01-20T13:41:07.2410797Z AssertionError: Unexpected JSONRPC error code -1\r\n2026-01-20T13:41:07.2411215Z \r\n2026-01-20T13:41:07.2411925Z 2026-01-20T13:41:06.484138Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\r\n2026-01-20T13:41:07.2412795Z \r\n2026-01-20T13:41:07.2413676Z 2026-01-20T13:41:06.484270Z TestFramework (WARNING): Not cleaning up dir D:\\a\\_temp\\test_runner_‚Çø_üèÉ_20260120_132914\\wallet_assumeutxo_56\r\n2026-01-20T13:41:07.2414525Z \r\n2026-01-20T13:41:07.2415646Z 2026-01-20T13:41:06.484375Z TestFramework (ERROR): Test failed. Test logging available at D:\\a\\_temp\\test_runner_‚Çø_üèÉ_20260120_132914\\wallet_assumeutxo_56/test_framework.log\r\n2026-01-20T13:41:07.2416737Z \r\n\r\n2026-01-20T13:42:33.3464929Z wallet_assumeutxo.py                                                             | ‚úñ Failed  | 8 s\r\n2026-01-20T13:42:33.3465209Z \r\n2026-01-20T13:42:33.3465460Z ALL                                                                              | ‚úñ Failed  | 2893 s (accumulated) \r\n2026-01-20T13:42:33.3465784Z Runtime: 796 s\r\n\r\n```\r\n</details>\r\n\r\n_Originally posted by @rkrux in https://github.com/bitcoin/bitcoin/issues/33014#issuecomment-3773073528_\r\n            ",
    "user": {
      "login": "maflcko",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/maflcko",
      "html_url": "https://github.com/maflcko",
      "followers_url": "https://api.github.com/users/maflcko/followers",
      "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
      "organizations_url": "https://api.github.com/users/maflcko/orgs",
      "repos_url": "https://api.github.com/users/maflcko/repos",
      "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/maflcko/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "labels": [
      {
        "id": 64585,
        "node_id": "MDU6TGFiZWw2NDU4NQ==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug",
        "name": "Bug",
        "color": "FBBAAB",
        "default": false
      },
      {
        "id": 149424,
        "node_id": "MDU6TGFiZWwxNDk0MjQ=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
        "name": "Wallet",
        "color": "08a781",
        "default": false
      },
      {
        "id": 5334691551,
        "node_id": "LA_kwDOABII588AAAABPfju3w",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
        "name": "CI failed",
        "description": "",
        "color": "cccccc",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "MEMBER",
    "milestone": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/74",
      "html_url": "https://github.com/bitcoin/bitcoin/milestone/74",
      "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/74/labels",
      "id": 12610874,
      "node_id": "MI_kwDOABII584AwG06",
      "number": 74,
      "state": "open",
      "title": "31.0",
      "creator": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "open_issues": 21,
      "closed_issues": 58,
      "created_at": "2025-03-25T18:44:16Z",
      "updated_at": "2026-02-20T14:38:17Z"
    },
    "locked": false,
    "comments": 19,
    "closed_by": {
      "login": "sedited",
      "id": 8421793,
      "node_id": "MDQ6VXNlcjg0MjE3OTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sedited",
      "html_url": "https://github.com/sedited",
      "followers_url": "https://api.github.com/users/sedited/followers",
      "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
      "organizations_url": "https://api.github.com/users/sedited/orgs",
      "repos_url": "https://api.github.com/users/sedited/repos",
      "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/sedited/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "created_at": "2026-01-20T15:07:00Z",
    "updated_at": "2026-02-20T15:53:17Z"
  },
  "events": [
    {
      "event": "mentioned",
      "id": 22164099234,
      "node_id": "MEE_lADOABII587kiF2tzwAAAAUpFVCi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22164099234",
      "actor": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-20T15:07:02Z"
    },
    {
      "event": "subscribed",
      "id": 22164099254,
      "node_id": "SE_lADOABII587kiF2tzwAAAAUpFVC2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22164099254",
      "actor": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-20T15:07:02Z"
    },
    {
      "event": "labeled",
      "id": 22164122323,
      "node_id": "LE_lADOABII587kiF2tzwAAAAUpFarT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22164122323",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-20T15:07:55Z",
      "label": {
        "name": "Wallet",
        "color": "08a781"
      }
    },
    {
      "event": "labeled",
      "id": 22164122340,
      "node_id": "LE_lADOABII587kiF2tzwAAAAUpFark",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22164122340",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-20T15:07:55Z",
      "label": {
        "name": "Windows",
        "color": "884400"
      }
    },
    {
      "event": "labeled",
      "id": 22164122356,
      "node_id": "LE_lADOABII587kiF2tzwAAAAUpFar0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22164122356",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-20T15:07:55Z",
      "label": {
        "name": "Tests",
        "color": "d4c5f9"
      }
    },
    {
      "event": "labeled",
      "id": 22164122373,
      "node_id": "LE_lADOABII587kiF2tzwAAAAUpFasF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22164122373",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-20T15:07:55Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "referenced",
      "id": 22200495233,
      "node_id": "REFE_lADOABII587kiF2tzwAAAAUrQKyB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22200495233",
      "actor": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "5715748333fe41414ce72c3dcdd3420a8e6ec470",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5715748333fe41414ce72c3dcdd3420a8e6ec470",
      "created_at": "2026-01-21T22:09:38Z"
    },
    {
      "event": "commented",
      "id": 3783234678,
      "node_id": "IC_kwDOABII587hf5R2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3783234678",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-22T08:47:42Z",
      "updated_at": "2026-01-22T08:47:42Z",
      "author_association": "CONTRIBUTOR",
      "body": "I proposed a fix here: [#34377](https://github.com/bitcoin/bitcoin/pull/34377)",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/34354#issuecomment-3783234678",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34354"
    },
    {
      "event": "closed",
      "id": 22214236429,
      "node_id": "CE_lADOABII587kiF2tzwAAAAUsElkN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22214236429",
      "actor": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "691dc830c669061923a7eec677415013f75fd5d8",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/691dc830c669061923a7eec677415013f75fd5d8",
      "created_at": "2026-01-22T11:59:46Z"
    },
    {
      "event": "referenced",
      "id": 22214470015,
      "node_id": "REFE_lADOABII587kiF2tzwAAAAUsFel_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22214470015",
      "actor": {
        "login": "Fabcien",
        "id": 44533924,
        "node_id": "MDQ6VXNlcjQ0NTMzOTI0",
        "avatar_url": "https://avatars.githubusercontent.com/u/44533924?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Fabcien",
        "html_url": "https://github.com/Fabcien",
        "followers_url": "https://api.github.com/users/Fabcien/followers",
        "following_url": "https://api.github.com/users/Fabcien/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Fabcien/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Fabcien/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Fabcien/subscriptions",
        "organizations_url": "https://api.github.com/users/Fabcien/orgs",
        "repos_url": "https://api.github.com/users/Fabcien/repos",
        "events_url": "https://api.github.com/users/Fabcien/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Fabcien/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "691dc830c669061923a7eec677415013f75fd5d8",
      "commit_url": "https://api.github.com/repos/Fabcien/bitcoin/commits/691dc830c669061923a7eec677415013f75fd5d8",
      "created_at": "2026-01-22T12:11:05Z"
    },
    {
      "event": "commented",
      "id": 3790072074,
      "node_id": "IC_kwDOABII587h5-kK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3790072074",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-23T12:43:21Z",
      "updated_at": "2026-01-23T12:43:21Z",
      "author_association": "MEMBER",
      "body": "https://github.com/bitcoin/bitcoin/actions/runs/21285353740/job/61266529251?pr=34388#step:12:276:\n\n```\n398/451 - wallet_assumeutxo.py failed, Duration: 8 s\n\nstdout:\n2026-01-23T12:31:24.007821Z TestFramework (INFO): PRNG seed is: 249974898428252399\n\n2026-01-23T12:31:24.037053Z TestFramework (INFO): Initializing test directory D:\\a\\_temp\\test_runner_‚Çø_üèÉ_20260123_122001\\wallet_assumeutxo_56\n\n2026-01-23T12:31:25.327870Z TestFramework (INFO): -- Testing assumeutxo\n\n2026-01-23T12:31:25.328814Z TestFramework (INFO): Creating a UTXO snapshot at height 299\n\n2026-01-23T12:31:26.836907Z TestFramework (INFO): Loading snapshot into second node from D:\\a\\_temp\\test_runner_‚Çø_üèÉ_20260123_122001\\wallet_assumeutxo_56\\node0\\regtest\\utxos.dat\n\n2026-01-23T12:31:26.851777Z TestFramework (INFO): Backup from the snapshot height can be loaded during background sync\n\n2026-01-23T12:31:26.859014Z TestFramework (INFO): Backup from before the snapshot height can't be loaded during background sync\n\n2026-01-23T12:31:26.865502Z TestFramework (INFO): Backup from the snapshot height can be loaded during background sync (pruned node)\n\n2026-01-23T12:31:26.891211Z TestFramework (INFO): Backup from before the snapshot height can't be loaded during background sync (pruned node)\n\n2026-01-23T12:31:26.897530Z TestFramework (INFO): Test loading descriptors during background sync\n\n2026-01-23T12:31:26.919150Z TestFramework (INFO): Test that rescanning blocks from before the snapshot fails when blocks are not available from the background sync yet\n\n2026-01-23T12:31:26.919801Z TestFramework (INFO): Restarting node to stop at height 359\n\n2026-01-23T12:31:27.580649Z TestFramework (INFO): Restarted node before snapshot validation completed, reloading...\n\n2026-01-23T12:31:28.106292Z TestFramework (INFO): Ensuring wallet can be restored from a backup that was created before the snapshot height\n\n2026-01-23T12:31:28.164076Z TestFramework (INFO): Check balance of a wallet that is active during snapshot completion\n\n2026-01-23T12:31:29.773917Z TestFramework (INFO): Ensuring descriptors can be loaded after background sync\n\n2026-01-23T12:31:29.817454Z TestFramework (INFO): Ensuring wallet can't be restored from a backup that was created before the pruneheight (pruned node)\n\n2026-01-23T12:31:31.955307Z TestFramework (ERROR): Unexpected exception\n\nTraceback (most recent call last):\n\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\util.py\", line 166, in try_rpc\n\n    fun(*args, **kwds)\n\n    ~~~^^^^^^^^^^^^^^^\n\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\coverage.py\", line 50, in __call__\n\n    return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\n\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\authproxy.py\", line 156, in __call__\n\n    raise JSONRPCException(response['error'], status)\n\ntest_framework.authproxy.JSONRPCException: filesystem error: cannot remove: The process cannot access the file because it is being used by another process [D:\\a\\_temp\\test_runner_‚Çø_üèÉ_20260123_122001\\wallet_assumeutxo_56\\node3\\regtest\\w2_pruneheight\\wallet.dat] (-1)\n\n\n\nDuring handling of the above exception, another exception occurred:\n\n\n\nTraceback (most recent call last):\n\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_framework.py\", line 142, in main\n\n    self.run_test()\n\n    ~~~~~~~~~~~~~^^\n\n  File \"D:\\a\\bitcoin\\bitcoin/test/functional/wallet_assumeutxo.py\", line 267, in run_test\n\n    self.test_restore_wallet_pruneheight(n3)\n\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^\n\n  File \"D:\\a\\bitcoin\\bitcoin/test/functional/wallet_assumeutxo.py\", line 99, in test_restore_wallet_pruneheight\n\n    assert_raises_rpc_error(-4, error_message, n3.restorewallet, \"w2_pruneheight\", \"backup_w2.dat\")\n\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\util.py\", line 157, in assert_raises_rpc_error\n\n    assert try_rpc(code, message, fun, *args, **kwds), \"No exception raised\"\n\n           ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\util.py\", line 170, in try_rpc\n\n    raise AssertionError(\n\n        \"Expected substring not found in error message:\\nsubstring: '{}'\\nerror message: '{}'.\".format(\n\n            message, e.error['message']))\n\nAssertionError: Expected substring not found in error message:\n\nsubstring: 'Wallet loading failed. Prune: last wallet synchronisation goes beyond pruned data. You need to -reindex (download the whole blockchain again in case of a pruned node)'\n\nerror message: 'filesystem error: cannot remove: The process cannot access the file because it is being used by another process [D:\\a\\_temp\\test_runner_‚Çø_üèÉ_20260123_122001\\wallet_assumeutxo_56\\node3\\regtest\\w2_pruneheight\\wallet.dat]'.\n\n2026-01-23T12:31:32.009883Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n\n2026-01-23T12:31:32.010026Z TestFramework (WARNING): Not cleaning up dir D:\\a\\_temp\\test_runner_‚Çø_üèÉ_20260123_122001\\wallet_assumeutxo_56\n\n2026-01-23T12:31:32.010132Z TestFramework (ERROR): Test failed. Test logging available at D:\\a\\_temp\\test_runner_‚Çø_üèÉ_20260123_122001\\wallet_assumeutxo_56/test_framework.log\n\n2026-01-23T12:31:32.010359Z TestFramework (ERROR): \n\n2026-01-23T12:31:32.010667Z TestFramework (ERROR): Hint: Call D:\\a\\bitcoin\\bitcoin\\test\\functional\\combine_logs.py 'D:\\a\\_temp\\test_runner_‚Çø_üèÉ_20260123_122001\\wallet_assumeutxo_56' to consolidate all logs\n\n2026-01-23T12:31:32.010799Z TestFramework (ERROR): \n\n2026-01-23T12:31:32.010875Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\n\n2026-01-23T12:31:32.010978Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\n\n2026-01-23T12:31:32.011060Z TestFramework (ERROR): \n\n\n\nstderr:\n[node 3] Cleaning up leftover process\n\n[node 2] Cleaning up leftover process\n\n[node 1] Cleaning up leftover process\n\n[node 0] Cleaning up leftover process\n\n\n\nCombine the logs and print the last 99999999 lines ...\n\n============\nCombined log for D:\\a\\_temp/test_runner_‚Çø_üèÉ_20260123_122001/wallet_assumeutxo_56:\n============\n",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/34354#issuecomment-3790072074",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34354"
    },
    {
      "event": "reopened",
      "id": 22241848486,
      "node_id": "REE_lADOABII587kiF2tzwAAAAUtt6ym",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22241848486",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-23T12:43:21Z"
    },
    {
      "event": "commented",
      "id": 3790120337,
      "node_id": "IC_kwDOABII587h6KWR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3790120337",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-23T12:57:16Z",
      "updated_at": "2026-01-23T12:57:16Z",
      "author_association": "CONTRIBUTOR",
      "body": "Seems like the problem is rather internal to the `restorewallet`, probably better if someone with who has a windows enviroment can try to reproduce it, I would need to set it up first...",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/34354#issuecomment-3790120337",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34354"
    },
    {
      "event": "commented",
      "id": 3823374615,
      "node_id": "IC_kwDOABII587j5BEX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3823374615",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-30T12:05:54Z",
      "updated_at": "2026-01-30T12:05:54Z",
      "author_association": "MEMBER",
      "body": "https://github.com/bitcoin/bitcoin/actions/runs/21513900951/job/61988945140?pr=34452#step:12:221",
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/34354#issuecomment-3823374615",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34354"
    },
    {
      "event": "commented",
      "id": 3823825044,
      "node_id": "IC_kwDOABII587j6vCU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3823825044",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-30T13:41:56Z",
      "updated_at": "2026-01-30T14:50:05Z",
      "author_association": "MEMBER",
      "body": "I ran this test a couple of times on a windows machine, but couldn't reproduce. I'll let it run in a loop for a while.... Update: still no failure after 400+ runs.\n\nMaybe there's some changes I can make to increase the likeliness of failure?",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/34354#issuecomment-3823825044",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34354"
    },
    {
      "event": "commented",
      "id": 3824329163,
      "node_id": "IC_kwDOABII587j8qHL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3824329163",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-30T15:31:01Z",
      "updated_at": "2026-01-30T15:31:01Z",
      "author_association": "MEMBER",
      "body": "The following (vibe coded) patch seems to reliably reproduce the issue on my Windows machine:\n\n```diff\ndiff --git a/src/wallet/sqlite.cpp b/src/wallet/sqlite.cpp\nindex e72455a3be..c23268d30a 100644\n--- a/src/wallet/sqlite.cpp\n+++ b/src/wallet/sqlite.cpp\n@@ -20,0 +21,5 @@\n+#ifdef WIN32\n+#include <windows.h>\n+#include <thread>\n+#endif\n+\n@@ -376,0 +382,23 @@ void SQLiteDatabase::Close()\n+\n+#ifdef WIN32\n+    // TEST: Immediately after closing SQLite, grab an exclusive lock on the file.\n+    // This simulates Windows not releasing the file handle immediately after sqlite3_close().\n+    // The lock is held for 200ms, causing fs::remove() to fail if called too soon.\n+    std::wstring full_path_w = (m_dir_path / fs::PathFromString(m_file_path)).wstring();\n+    HANDLE hFile = CreateFileW(\n+        full_path_w.c_str(),\n+        GENERIC_READ | GENERIC_WRITE,\n+        0,  // No sharing - exclusive access\n+        NULL,\n+        OPEN_EXISTING,\n+        FILE_ATTRIBUTE_NORMAL,\n+        NULL\n+    );\n+    if (hFile != INVALID_HANDLE_VALUE) {\n+        // Detach a thread to hold the lock, so Close() returns immediately\n+        std::thread([hFile]() {\n+            std::this_thread::sleep_for(std::chrono::milliseconds(200));\n+            CloseHandle(hFile);\n+        }).detach();\n+    }\n+#endif\n```\n",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/34354#issuecomment-3824329163",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34354"
    },
    {
      "event": "commented",
      "id": 3824411701,
      "node_id": "IC_kwDOABII587j8-Q1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3824411701",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-30T15:50:21Z",
      "updated_at": "2026-01-30T15:56:41Z",
      "author_association": "MEMBER",
      "body": "And here's a trivial albeit not elegant fix:\n\n```diff\ndiff --git a/src/wallet/wallet.cpp b/src/wallet/wallet.cpp\nindex 64d7f191de..ba3c1d4c75 100644\n--- a/src/wallet/wallet.cpp\n+++ b/src/wallet/wallet.cpp\n@@ -538 +538,7 @@ std::shared_ptr<CWallet> RestoreWallet(WalletContext& context, const fs::path& b\n-        if (wallet_file_copied) fs::remove(wallet_file);\n+        if (wallet_file_copied) {\n+            // On Windows, and e.g. on network file systems for all platforms,\n+            // file handles may not be released immediately after closing, so\n+            // wait briefly before attempting removal.\n+            std::this_thread::sleep_for(std::chrono::seconds(1));\n+            fs::remove(wallet_file);\n+        }\n```",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/34354#issuecomment-3824411701",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34354"
    },
    {
      "event": "unlabeled",
      "id": 22737033848,
      "node_id": "UNLE_lADOABII587kiF2tzwAAAAVLO5p4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22737033848",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-12T14:23:26Z",
      "label": {
        "name": "Windows",
        "color": "884400"
      }
    },
    {
      "event": "unlabeled",
      "id": 22737037387,
      "node_id": "UNLE_lADOABII587kiF2tzwAAAAVLO6hL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22737037387",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-12T14:23:33Z",
      "label": {
        "name": "Tests",
        "color": "d4c5f9"
      }
    },
    {
      "event": "milestoned",
      "id": 22737040868,
      "node_id": "MIE_lADOABII587kiF2tzwAAAAVLO7Xk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22737040868",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-12T14:23:41Z",
      "milestone": {
        "title": "31.0"
      }
    },
    {
      "event": "renamed",
      "id": 22737141251,
      "node_id": "RTE_lADOABII587kiF2tzwAAAAVLPT4D",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22737141251",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-12T14:27:15Z",
      "rename": {
        "from": "Windows CI failure: restore wallet test case related to pruned blockchain in `wallet_assumeutxo.py` is failing.",
        "to": "test `wallet_assumeutxo.py` is failing intermittently: wallet.cpp:543  RestoreWallet  Assertion `fs::is_empty(wallet_path)' failed. "
      }
    },
    {
      "event": "commented",
      "id": 3891488420,
      "node_id": "IC_kwDOABII587n82ak",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3891488420",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-12T15:06:07Z",
      "updated_at": "2026-02-12T15:06:07Z",
      "author_association": "MEMBER",
      "body": "The same error happens on Linux, hitting an internal assert:\n\n```\n node3 stderr wallet/wallet.cpp:543 std::shared_ptr<CWallet> wallet::RestoreWallet(WalletContext &, const fs::path &, const std::string &, std::optional<bool>, DatabaseStatus &, bilingual_str &, std::vector<bilingual_str> &, bool, bool): Assertion `fs::is_empty(wallet_path)' failed. \n```\n\n\n\nTo reproduce, saturate all CPU threads of the machine at 100%, then run\ncmd to reproduce:\n\n```\nwhile ./bld-cmake/test/functional/wallet_assumeutxo.py ; do true ; done\n```\n\n\n```\n test  2026-02-12T15:02:36.624276Z TestFramework (ERROR): Unexpected exception \n                                   Traceback (most recent call last):\n                                     File \"/b-c/test/functional/test_framework/util.py\", line 166, in try_rpc\n                                       fun(*args, **kwds)\n                                       ~~~^^^^^^^^^^^^^^^\n                                     File \"/b-c/test/functional/test_framework/coverage.py\", line 50, in __call__\n                                       return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\n                                     File \"/b-c/test/functional/test_framework/authproxy.py\", line 137, in __call__\n                                       response, status = self._request('POST', self.__url.path, postdata.encode('utf-8'))\n                                                          ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/b-c/test/functional/test_framework/authproxy.py\", line 111, in _request\n                                       return self._get_response()\n                                              ~~~~~~~~~~~~~~~~~~^^\n                                     File \"/b-c/test/functional/test_framework/authproxy.py\", line 174, in _get_response\n                                       http_response = self.__conn.getresponse()\n                                     File \"/usr/lib/python3.13/http/client.py\", line 1450, in getresponse\n                                       response.begin()\n                                       ~~~~~~~~~~~~~~^^\n                                     File \"/usr/lib/python3.13/http/client.py\", line 336, in begin\n                                       version, status, reason = self._read_status()\n                                                                 ~~~~~~~~~~~~~~~~~^^\n                                     File \"/usr/lib/python3.13/http/client.py\", line 305, in _read_status\n                                       raise RemoteDisconnected(\"Remote end closed connection without\"\n                                                                \" response\")\n                                   http.client.RemoteDisconnected: Remote end closed connection without response\n                                   During handling of the above exception, another exception occurred:\n                                   Traceback (most recent call last):\n                                     File \"/b-c/test/functional/test_framework/test_framework.py\", line 142, in main\n                                       self.run_test()\n                                       ~~~~~~~~~~~~~^^\n                                     File \"/b-c/./bld-cmake/test/functional/wallet_assumeutxo.py\", line 267, in run_test\n                                       self.test_restore_wallet_pruneheight(n3)\n                                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^\n                                     File \"/b-c/./bld-cmake/test/functional/wallet_assumeutxo.py\", line 99, in test_restore_wallet_pruneheight\n                                       assert_raises_rpc_error(-4, error_message, n3.restorewallet, \"w2_pruneheight\", \"backup_w2.dat\")\n                                       ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/b-c/test/functional/test_framework/util.py\", line 157, in assert_raises_rpc_error\n                                       assert try_rpc(code, message, fun, *args, **kwds), \"No exception raised\"\n                                              ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/b-c/test/functional/test_framework/util.py\", line 177, in try_rpc\n                                       raise AssertionError(\"Unexpected exception raised: \" + type(e).__name__)\n                                   AssertionError: Unexpected exception raised: RemoteDisconnected\n test  2026-02-12T15:02:36.638897Z TestFramework (DEBUG): Closing down network thread \n test  2026-02-12T15:02:36.689925Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later. \n test  2026-02-12T15:02:36.690597Z TestFramework (WARNING): Not cleaning up dir /tmp/bitcoin_func_test_noubmcc_ \n test  2026-02-12T15:02:36.690935Z TestFramework (ERROR): Test failed. Test logging available at /tmp/bitcoin_func_test_noubmcc_/test_framework.log \n test  2026-02-12T15:02:36.691366Z TestFramework (ERROR): \n test  2026-02-12T15:02:36.691757Z TestFramework (ERROR): Hint: Call /b-c/test/functional/combine_logs.py '/tmp/bitcoin_func_test_noubmcc_' to consolidate all logs \n test  2026-02-12T15:02:36.691961Z TestFramework (ERROR): \n test  2026-02-12T15:02:36.692121Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log. \n test  2026-02-12T15:02:36.692375Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues \n test  2026-02-12T15:02:36.692613Z TestFramework (ERROR): \n\n node3 stderr wallet/wallet.cpp:543 std::shared_ptr<CWallet> wallet::RestoreWallet(WalletContext &, const fs::path &, const std::string &, std::optional<bool>, DatabaseStatus &, bilingual_str &, std::vector<bilingual_str> &, bool, bool): Assertion `fs::is_empty(wallet_path)' failed. \n",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/34354#issuecomment-3891488420",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34354"
    },
    {
      "event": "labeled",
      "id": 22738335805,
      "node_id": "LE_lADOABII587kiF2tzwAAAAVLT3g9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22738335805",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-12T15:06:15Z",
      "label": {
        "name": "Bug",
        "color": "FBBAAB"
      }
    },
    {
      "event": "commented",
      "id": 3893030510,
      "node_id": "IC_kwDOABII587oCu5u",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3893030510",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-12T19:44:40Z",
      "updated_at": "2026-02-12T19:44:40Z",
      "author_association": "MEMBER",
      "body": "Not sure if this diff helps to reproduce it faster:\n\n```diff\ndiff --git a/src/validationinterface.cpp b/src/validationinterface.cpp\nindex c7be6ab..aacb7b6 100644\n--- a/src/validationinterface.cpp\n+++ b/src/validationinterface.cpp\n@@ -14,2 +14,3 @@\n #include <primitives/transaction.h>\n+#include <random.h>\n #include <util/check.h>\n@@ -156,2 +157,4 @@ void ValidationSignals::SyncWithValidationInterfaceQueue()\n \n+static FastRandomContext g_rnd{};\n+\n // Use a macro instead of a function for conditional logging to prevent\n@@ -166,2 +169,3 @@ void ValidationSignals::SyncWithValidationInterfaceQueue()\n             LOG_EVENT(fmt, local_name, __VA_ARGS__);           \\\n+            if(g_rnd.randrange(2)<1)UninterruptibleSleep(15ms);\\\n             event();                                           \\\n",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/34354#issuecomment-3893030510",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34354"
    },
    {
      "event": "commented",
      "id": 3893570221,
      "node_id": "IC_kwDOABII587oEyqt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3893570221",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-12T21:47:13Z",
      "updated_at": "2026-02-12T21:47:13Z",
      "author_association": "CONTRIBUTOR",
      "body": "> To reproduce, saturate all CPU threads of the machine at 100%\n\nOh, do you think that is what is actually happening in the CI? Then I guess every check we have that asserts that a file was deleted could run into this issue if the circumstances are right?",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/34354#issuecomment-3893570221",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34354"
    },
    {
      "event": "commented",
      "id": 3893615398,
      "node_id": "IC_kwDOABII587oE9sm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3893615398",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-12T21:57:29Z",
      "updated_at": "2026-02-12T21:57:29Z",
      "author_association": "MEMBER",
      "body": "> Oh, do you think that is what is actually happening in the CI? Then I guess every check we have that asserts that a file was deleted could run into this issue if the circumstances are right?\n\nThe assume that fails is in the line before the remove, so I think there is a logic error somewhere",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/34354#issuecomment-3893615398",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34354"
    },
    {
      "event": "renamed",
      "id": 22865438157,
      "node_id": "RTE_lADOABII587kiF2tzwAAAAVS4uXN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22865438157",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-17T21:14:03Z",
      "rename": {
        "from": "test `wallet_assumeutxo.py` is failing intermittently: wallet.cpp:543  RestoreWallet  Assertion `fs::is_empty(wallet_path)' failed. ",
        "to": "test `wallet_assumeutxo.py` / wallet_backup.py is failing intermittently: wallet.cpp:543  RestoreWallet  Assertion `fs::is_empty(wallet_path)' failed. "
      }
    },
    {
      "event": "commented",
      "id": 3917124910,
      "node_id": "IC_kwDOABII587pepUu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3917124910",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-17T21:15:23Z",
      "updated_at": "2026-02-17T21:15:23Z",
      "author_association": "MEMBER",
      "body": "Same for wallet_backup.py:\n\n```\n node3 2026-02-17T20:40:22.128215Z [scheduler] [wallet/wallet.h:943] [WalletLogPrintf] [restore_pruned] Releasing wallet restore_pruned.. \n test  2026-02-17T20:40:22.340793Z TestFramework (ERROR): Unexpected exception \n                                   Traceback (most recent call last):\n                                     File \"/b-c/test/functional/test_framework/util.py\", line 166, in try_rpc\n                                       fun(*args, **kwds)\n                                       ~~~^^^^^^^^^^^^^^^\n                                     File \"/b-c/test/functional/test_framework/coverage.py\", line 50, in __call__\n                                       return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\n                                     File \"/b-c/test/functional/test_framework/authproxy.py\", line 137, in __call__\n                                       response, status = self._request('POST', self.__url.path, postdata.encode('utf-8'))\n                                                          ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/b-c/test/functional/test_framework/authproxy.py\", line 111, in _request\n                                       return self._get_response()\n                                              ~~~~~~~~~~~~~~~~~~^^\n                                     File \"/b-c/test/functional/test_framework/authproxy.py\", line 174, in _get_response\n                                       http_response = self.__conn.getresponse()\n                                     File \"/usr/lib/python3.13/http/client.py\", line 1450, in getresponse\n                                       response.begin()\n                                       ~~~~~~~~~~~~~~^^\n                                     File \"/usr/lib/python3.13/http/client.py\", line 336, in begin\n                                       version, status, reason = self._read_status()\n                                                                 ~~~~~~~~~~~~~~~~~^^\n                                     File \"/usr/lib/python3.13/http/client.py\", line 305, in _read_status\n                                       raise RemoteDisconnected(\"Remote end closed connection without\"\n                                                                \" response\")\n                                   http.client.RemoteDisconnected: Remote end closed connection without response\n                                   During handling of the above exception, another exception occurred:\n                                   Traceback (most recent call last):\n                                     File \"/b-c/test/functional/test_framework/test_framework.py\", line 142, in main\n                                       self.run_test()\n                                       ~~~~~~~~~~~~~^^\n                                     File \"/b-c/bld-cmake/test/functional/wallet_backup.py\", line 292, in run_test\n                                       self.test_pruned_wallet_backup()\n                                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n                                     File \"/b-c/bld-cmake/test/functional/wallet_backup.py\", line 212, in test_pruned_wallet_backup\n                                       assert_raises_rpc_error(-4, error_message, node.restorewallet, \"restore_pruned\", backup_file)\n                                       ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/b-c/test/functional/test_framework/util.py\", line 157, in assert_raises_rpc_error\n                                       assert try_rpc(code, message, fun, *args, **kwds), \"No exception raised\"\n                                              ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/b-c/test/functional/test_framework/util.py\", line 177, in try_rpc\n                                       raise AssertionError(\"Unexpected exception raised: \" + type(e).__name__)\n                                   AssertionError: Unexpected exception raised: RemoteDisconnected\n test  2026-02-17T20:40:22.344578Z TestFramework (DEBUG): Closing down network thread \n test  2026-02-17T20:40:22.394821Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later. \n test  2026-02-17T20:40:22.394967Z TestFramework (WARNING): Not cleaning up dir /tmp/test_runner_‚Çø_üèÉ_20260217_203305/wallet_backup_262 \n test  2026-02-17T20:40:22.395048Z TestFramework (ERROR): Test failed. Test logging available at /tmp/test_runner_‚Çø_üèÉ_20260217_203305/wallet_backup_262/test_framework.log \n test  2026-02-17T20:40:22.395168Z TestFramework (ERROR): \n test  2026-02-17T20:40:22.395280Z TestFramework (ERROR): Hint: Call /b-c/test/functional/combine_logs.py '/tmp/test_runner_‚Çø_üèÉ_20260217_203305/wallet_backup_262' to consolidate all logs \n test  2026-02-17T20:40:22.395334Z TestFramework (ERROR): \n test  2026-02-17T20:40:22.395375Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log. \n test  2026-02-17T20:40:22.395443Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues \n test  2026-02-17T20:40:22.395497Z TestFramework (ERROR): \n\n node3 stderr wallet/wallet.cpp:543 std::shared_ptr<CWallet> wallet::RestoreWallet(WalletContext &, const fs::path &, const std::string &, std::optional<bool>, DatabaseStatus &, bilingual_str &, std::vector<bilingual_str> &, bool, bool): Assertion `fs::is_empty(wallet_path)' failed. \n",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/34354#issuecomment-3917124910",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34354"
    },
    {
      "event": "commented",
      "id": 3922844815,
      "node_id": "IC_kwDOABII587p0dyP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3922844815",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-18T19:49:28Z",
      "updated_at": "2026-02-18T22:04:36Z",
      "author_association": "MEMBER",
      "body": "There seem to be 2 different issues reported here.\n\nThe first is `filesystem error: cannot remove: The process cannot access the file because it is being used by another process` which suggests that the wallet.dat file is still open by sqlite.\n\nThe second is `Assertion fs::is_empty(wallet_path)' failed.` which is probably caused by `wallet.dat-journal` still existing.\n\nI have a theoretical fix for the second issue. I don't have one for the first.",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/34354#issuecomment-3922844815",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34354"
    },
    {
      "event": "commented",
      "id": 3923063027,
      "node_id": "IC_kwDOABII587p1TDz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3923063027",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-18T20:31:55Z",
      "updated_at": "2026-02-18T20:33:58Z",
      "author_association": "MEMBER",
      "body": "Nice. A fix for the second issue would be helpful, and I am happy to test it, since I can reproduce it relatively easily. edit: And sorry for mixing the two unrelated issues. I'll open a new issue for the remaining issue, as soon as one is fixed.\n\nI wonder why Antithesis has not yet found this. ü§î cc @dergoegge ",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/34354#issuecomment-3923063027",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34354"
    },
    {
      "event": "mentioned",
      "id": 22895698372,
      "node_id": "MEE_lADOABII587kiF2tzwAAAAVUsKHE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22895698372",
      "actor": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-18T20:31:56Z"
    },
    {
      "event": "subscribed",
      "id": 22895698397,
      "node_id": "SE_lADOABII587kiF2tzwAAAAVUsKHd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22895698397",
      "actor": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-18T20:31:56Z"
    },
    {
      "event": "commented",
      "id": 3929236184,
      "node_id": "IC_kwDOABII587qM2LY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3929236184",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-19T18:51:34Z",
      "updated_at": "2026-02-19T18:57:40Z",
      "author_association": "MEMBER",
      "body": "Not sure if https://github.com/bitcoin/bitcoin/pull/34619 is going to fix this issue. If the journal was zero'd, the size should be small, but  I don't see such small files after the test failure:\n\n```\n# find '/tmp/test_runner_\\342\\202\\277_\\360\\237\\217\\203_20260219_175359/wallet_assumeutxo_8651' \\\n  -type f -name 'wallet.dat-journal' -exec wc -c {} +\n 25136 /tmp/test_runner_‚Çø_üèÉ_20260219_175359/wallet_assumeutxo_8651/node0/regtest/w/wallet.dat-journal\n 25136 /tmp/test_runner_‚Çø_üèÉ_20260219_175359/wallet_assumeutxo_8651/node0/regtest/w2/wallet.dat-journal\n 25136 /tmp/test_runner_‚Çø_üèÉ_20260219_175359/wallet_assumeutxo_8651/node1/regtest/w/wallet.dat-journal\n 12824 /tmp/test_runner_‚Çø_üèÉ_20260219_175359/wallet_assumeutxo_8651/node1/regtest/w1/wallet.dat-journal\n 25136 /tmp/test_runner_‚Çø_üèÉ_20260219_175359/wallet_assumeutxo_8651/node1/regtest/w2/wallet.dat-journal\n 25136 /tmp/test_runner_‚Çø_üèÉ_20260219_175359/wallet_assumeutxo_8651/node2/regtest/w/wallet.dat-journal\n 25136 /tmp/test_runner_‚Çø_üèÉ_20260219_175359/wallet_assumeutxo_8651/node3/regtest/w/wallet.dat-journal\n 12824 /tmp/test_runner_‚Çø_üèÉ_20260219_175359/wallet_assumeutxo_8651/node3/regtest/w2_pruneheight/wallet.dat-journal\n ```\n\nSee https://drahtbot.space/temp_scratch/wallet_assumeutxo_8651.tar.zstd\n\n\nAnd:\n\n```\n# find $'/tmp/test_runner_\\342\\202\\277_\\360\\237\\217\\203_20260217_203305' \\\n  -type f -name 'wallet.dat-journal' -exec wc -c {} +\n 25136 /tmp/test_runner_‚Çø_üèÉ_20260217_203305/wallet_backup_262/node0/regtest/wallets/default_wallet/wallet.dat-journal\n 25136 /tmp/test_runner_‚Çø_üèÉ_20260217_203305/wallet_backup_262/node1/regtest/wallets/default_wallet/wallet.dat-journal\n 25136 /tmp/test_runner_‚Çø_üèÉ_20260217_203305/wallet_backup_262/node2/regtest/wallets/default_wallet/wallet.dat-journal\n 29240 /tmp/test_runner_‚Çø_üèÉ_20260217_203305/wallet_backup_262/node3/regtest/wallets/default_wallet/wallet.dat-journal\n 29240 /tmp/test_runner_‚Çø_üèÉ_20260217_203305/wallet_backup_262/node3/regtest/wallets/pruned/wallet.dat-journal\n 21032 /tmp/test_runner_‚Çø_üèÉ_20260217_203305/wallet_backup_262/node3/regtest/wallets/restore_pruned/wallet.dat-journal\n\n```\n\nhttps://drahtbot.space/temp_scratch/wallet_backup_262.tar.zstd\n\n\n\n\n",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/34354#issuecomment-3929236184",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34354"
    },
    {
      "event": "commented",
      "id": 3929441550,
      "node_id": "IC_kwDOABII587qNoUO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3929441550",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-19T19:25:49Z",
      "updated_at": "2026-02-19T21:16:26Z",
      "author_association": "MEMBER",
      "body": "> If the journal was zero'd, the size should be small, but I don't see such small files after the test failure:\n\nSQLite doesn't always truncate or delete the journal file. It may only overwrite the header with 0's to invalidate the file. I believe it does this when the file is larger than the disk sector size. #34619 does handle that case though.\n\nEdit: Looking at the files provided, the journal files all have 0'd headers",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/34354#issuecomment-3929441550",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34354"
    },
    {
      "event": "commented",
      "id": 3930451868,
      "node_id": "IC_kwDOABII587qRe-c",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3930451868",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-19T22:16:08Z",
      "updated_at": "2026-02-19T22:16:08Z",
      "author_association": "MEMBER",
      "body": "It is a bit odd, that it is only me that can reproduce this. Does this diff work to reproduce?\n\n\n```diff\ndiff --git a/src/validationinterface.cpp b/src/validationinterface.cpp\nindex c7be6abc3a..aacb7b6563 100644\n--- a/src/validationinterface.cpp\n+++ b/src/validationinterface.cpp\n@@ -14,2 +14,3 @@\n #include <primitives/transaction.h>\n+#include <random.h>\n #include <util/check.h>\n@@ -156,2 +157,4 @@ void ValidationSignals::SyncWithValidationInterfaceQueue()\n \n+static FastRandomContext g_rnd{};\n+\n // Use a macro instead of a function for conditional logging to prevent\n@@ -166,2 +169,3 @@ void ValidationSignals::SyncWithValidationInterfaceQueue()\n             LOG_EVENT(fmt, local_name, __VA_ARGS__);           \\\n+            if(g_rnd.randrange(2)<1)UninterruptibleSleep(15ms);\\\n             event();                                           \\\ndiff --git a/src/wallet/wallet.cpp b/src/wallet/wallet.cpp\nindex 63dab29972..21629dd546 100644\n--- a/src/wallet/wallet.cpp\n+++ b/src/wallet/wallet.cpp\n@@ -74,2 +74,3 @@\n #include <algorithm>\n+#include <atomic>\n #include <cassert>\n@@ -77,2 +78,3 @@\n #include <exception>\n+#include <mutex>\n #include <optional>\n@@ -83,2 +85,7 @@\n \n+std::atomic<bool> g_debug_waiting{false};\n+std::atomic<bool> g_debug_continue{false};\n+std::mutex g_debug_mutex;\n+std::condition_variable g_debug_cv;\n+\n struct KeyOriginInfo;\n@@ -542,2 +549,3 @@ std::shared_ptr<CWallet> RestoreWallet(WalletContext& context, const fs::path& b\n         if (created_parent_dir) {\n+        UninterruptibleSleep(1ms);\n             Assume(fs::is_empty(wallet_path));\n@@ -1530,2 +1538,7 @@ void CWallet::blockConnected(const ChainstateRole& role, const interfaces::Block\n     }\n+    UninterruptibleSleep(20ms);\n+    if (g_debug_waiting) {\n+        g_debug_continue = true;\n+        g_debug_cv.notify_all();\n+    }\n     assert(block.data);\n@@ -3199,2 +3212,10 @@ bool CWallet::AttachChain(const std::shared_ptr<CWallet>& walletInstance, interf\n \n+    {\n+        g_debug_continue = false;\n+        g_debug_waiting = true;\n+        std::unique_lock<std::mutex> lock(g_debug_mutex);\n+        g_debug_cv.wait_for(lock, std::chrono::seconds(2), [] { return g_debug_continue.load(); });\n+        g_debug_waiting = false;\n+    }\n+\n     // If rescan_required = true, rescan_height remains equal to 0\n```\n\nWith that patch, I can reproduce the crash, even with https://github.com/bitcoin/bitcoin/pull/34619\n",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/34354#issuecomment-3930451868",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34354"
    },
    {
      "event": "commented",
      "id": 3930922504,
      "node_id": "IC_kwDOABII587qTR4I",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3930922504",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-20T00:34:44Z",
      "updated_at": "2026-02-20T00:42:45Z",
      "author_association": "MEMBER",
      "body": "> Does this diff work to reproduce?\n\nOnly for `wallet_assumeutxo.py`.\n\nI see what the problem is now. There is a race condition where the blocks that were generated and subsequently pruned are still in the validation interface queue, so when the wallet is being loaded for the restore, there are `blockConnected` signals that the wallet starts processing after `AttachChain` exits with the error about being pruned. Since `AttachChain` errors, we are expecting the wallet to be immediately destroyed once `LoadExisting` exits as the wallet shared_ptr goes out of scope. However, if it is still processing `blockConnected`s slowly, the shared_ptr still exists so the database is still open, so we get both the windows issue (the database file is still open) and the assertion (the journal file hasn't been deleted as the database has not been closed).\n\nAdding a `n3.syncwithvalidationinterfacequeue` after `self.generate` fixes the issue in the test, but the race is still actually there and that needs to be fixed.\n\nAlso I guess linux just lets us delete a file that is still open?\n\nThe `wallet_backup.py` failure may be related to this, but the diff does not cause that to fail for me. However, it is a similar failure scenario in restoring a backup to a pruned node, right after a bunch of blocks were generated. Edit: It fails if I increase the number of generated blocks. Likewise it is fixed with a `syncwithvalidationinterfacequeue()', so I believe it's the same problem.",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/34354#issuecomment-3930922504",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34354"
    },
    {
      "event": "commented",
      "id": 3935712712,
      "node_id": "IC_kwDOABII587qljXI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3935712712",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-20T15:53:17Z",
      "updated_at": "2026-02-20T15:53:17Z",
      "author_association": "MEMBER",
      "body": "For reference, the diff for wallet_backup would be:\n\n```diff\ndiff --git a/src/wallet/wallet.cpp b/src/wallet/wallet.cpp\nindex 63dab29..1bcf597 100644\n--- a/src/wallet/wallet.cpp\n+++ b/src/wallet/wallet.cpp\n@@ -74,2 +74,3 @@\n #include <algorithm>\n+#include <atomic>\n #include <cassert>\n@@ -77,2 +78,3 @@\n #include <exception>\n+#include <mutex>\n #include <optional>\n@@ -83,2 +85,7 @@\n \n+std::atomic<bool> g_debug_waiting{false};\n+std::atomic<bool> g_debug_continue{false};\n+std::mutex g_debug_mutex;\n+std::condition_variable g_debug_cv;\n+\n struct KeyOriginInfo;\n@@ -542,2 +549,3 @@ std::shared_ptr<CWallet> RestoreWallet(WalletContext& context, const fs::path& b\n         if (created_parent_dir) {\n+        UninterruptibleSleep(1ms);\n             Assume(fs::is_empty(wallet_path));\n@@ -1530,2 +1538,7 @@ void CWallet::blockConnected(const ChainstateRole& role, const interfaces::Block\n     }\n+    if (g_debug_waiting) {\n+        g_debug_continue = true;\n+        g_debug_cv.notify_all();\n+    }\n+    UninterruptibleSleep(260ms);\n     assert(block.data);\n@@ -3199,2 +3212,10 @@ bool CWallet::AttachChain(const std::shared_ptr<CWallet>& walletInstance, interf\n \n+    {\n+        g_debug_continue = false;\n+        g_debug_waiting = true;\n+        std::unique_lock<std::mutex> lock(g_debug_mutex);\n+        g_debug_cv.wait_for(lock, std::chrono::seconds(2), [] { return g_debug_continue.load(); });\n+        g_debug_waiting = false;\n+    }\n+\n     // If rescan_required = true, rescan_height remains equal to 0\n```\n\nThen,\n\n```\nwhile ( ./bld-cmake/test/functional/test_runner.py -j 12 --timeout-factor=4 $( printf \"wallet_backup %.0s\" {1..12} ) ) ; do echo >> /tmp/counter_ ; done\n```\n\nGives:\n\n```\nTEST             | STATUS    | DURATION\n\nwallet_backup.py | ‚úì Passed  | 186 s\nwallet_backup.py | ‚úì Passed  | 189 s\nwallet_backup.py | ‚úì Passed  | 190 s\nwallet_backup.py | ‚úñ Failed  | 189 s\nwallet_backup.py | ‚úñ Failed  | 190 s\nwallet_backup.py | ‚úñ Failed  | 191 s\nwallet_backup.py | ‚úñ Failed  | 191 s\nwallet_backup.py | ‚úñ Failed  | 191 s\nwallet_backup.py | ‚úñ Failed  | 192 s\nwallet_backup.py | ‚úñ Failed  | 192 s\nwallet_backup.py | ‚úñ Failed  | 192 s\nwallet_backup.py | ‚úñ Failed  | 192 s\n\nALL              | ‚úñ Failed  | 2285 s (accumulated) \nRuntime: 192 s\n",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/34354#issuecomment-3935712712",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34354"
    }
  ]
}