{
  "type": "issue",
  "issue": {
    "id": 2450230031,
    "node_id": "I_kwDOABII586SC4sP",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30593",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30593/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30593/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30593/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/30593",
    "number": 30593,
    "state": "open",
    "state_reason": null,
    "title": "docs: Windows build intructions result in a large binary",
    "body": "Following the intructions in [doc/build-windows.md](../blob/master/doc/build-windows.md) results in a `bitcoind` binary that's almost 440 MB. For comparison, the latest release binary is around 15 MB. Are the instructions perhaps missing a flag to create a release build or something like that? I'm using WSL.",
    "user": {
      "login": "vostrnad",
      "id": 43024885,
      "node_id": "MDQ6VXNlcjQzMDI0ODg1",
      "avatar_url": "https://avatars.githubusercontent.com/u/43024885?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vostrnad",
      "html_url": "https://github.com/vostrnad",
      "followers_url": "https://api.github.com/users/vostrnad/followers",
      "following_url": "https://api.github.com/users/vostrnad/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/vostrnad/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/vostrnad/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/vostrnad/subscriptions",
      "organizations_url": "https://api.github.com/users/vostrnad/orgs",
      "repos_url": "https://api.github.com/users/vostrnad/repos",
      "events_url": "https://api.github.com/users/vostrnad/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/vostrnad/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "assignees": [],
    "author_association": "NONE",
    "locked": false,
    "comments": 5,
    "created_at": "2024-08-06T08:07:59Z",
    "updated_at": "2024-08-17T09:16:57Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 2270672301,
      "node_id": "IC_kwDOABII586HV7Wt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2270672301",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-06T08:20:38Z",
      "updated_at": "2024-08-06T08:20:38Z",
      "author_association": "MEMBER",
      "body": "It's the debug symbols. If you run `strip src/bitcoind.exe` you'll end up with a ~15mb binary.",
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30593#issuecomment-2270672301",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30593"
    },
    {
      "event": "commented",
      "id": 2270672308,
      "node_id": "IC_kwDOABII586HV7W0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2270672308",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-06T08:20:38Z",
      "updated_at": "2024-08-06T08:20:38Z",
      "author_association": "MEMBER",
      "body": "> For comparison, the latest release binary is around 15 MB. \r\n\r\nThe release binaries are stripped of debug info.",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30593#issuecomment-2270672308",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30593"
    },
    {
      "event": "commented",
      "id": 2270710121,
      "node_id": "IC_kwDOABII586HWElp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2270710121",
      "actor": {
        "login": "vostrnad",
        "id": 43024885,
        "node_id": "MDQ6VXNlcjQzMDI0ODg1",
        "avatar_url": "https://avatars.githubusercontent.com/u/43024885?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vostrnad",
        "html_url": "https://github.com/vostrnad",
        "followers_url": "https://api.github.com/users/vostrnad/followers",
        "following_url": "https://api.github.com/users/vostrnad/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vostrnad/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vostrnad/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vostrnad/subscriptions",
        "organizations_url": "https://api.github.com/users/vostrnad/orgs",
        "repos_url": "https://api.github.com/users/vostrnad/repos",
        "events_url": "https://api.github.com/users/vostrnad/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vostrnad/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-06T08:39:31Z",
      "updated_at": "2024-08-06T08:39:31Z",
      "author_association": "NONE",
      "body": "Thank you, that was it. It this something worth noting in the docs?",
      "user": {
        "login": "vostrnad",
        "id": 43024885,
        "node_id": "MDQ6VXNlcjQzMDI0ODg1",
        "avatar_url": "https://avatars.githubusercontent.com/u/43024885?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vostrnad",
        "html_url": "https://github.com/vostrnad",
        "followers_url": "https://api.github.com/users/vostrnad/followers",
        "following_url": "https://api.github.com/users/vostrnad/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vostrnad/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vostrnad/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vostrnad/subscriptions",
        "organizations_url": "https://api.github.com/users/vostrnad/orgs",
        "repos_url": "https://api.github.com/users/vostrnad/repos",
        "events_url": "https://api.github.com/users/vostrnad/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vostrnad/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30593#issuecomment-2270710121",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30593"
    },
    {
      "event": "commented",
      "id": 2271304490,
      "node_id": "IC_kwDOABII586HYVsq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2271304490",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-06T13:31:43Z",
      "updated_at": "2024-08-06T13:31:43Z",
      "author_association": "MEMBER",
      "body": "In a post-cmake world this is the type of thing I would expect developers to add to their own [cmakuserpresets.json](https://cmake.org/cmake/help/latest/manual/cmake-presets.7.html), although I don't see any reason it couldn't be documented too. Compiling without debug symbols is already documented in build-unix.md:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/43740f4971f45cd5499470b6a085b3ecd8b96d28/doc/build-unix.md?plain=1#L30\r\n\r\nBut even building with `CFLAGS` and `CXXFLAGS` leaves some info `strip` is able to remove to further reduce binary size.",
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30593#issuecomment-2271304490",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30593"
    },
    {
      "event": "commented",
      "id": 2291280993,
      "node_id": "IC_kwDOABII586Ikixh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2291280993",
      "actor": {
        "login": "reverse-hash",
        "id": 11018433,
        "node_id": "MDQ6VXNlcjExMDE4NDMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/11018433?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/reverse-hash",
        "html_url": "https://github.com/reverse-hash",
        "followers_url": "https://api.github.com/users/reverse-hash/followers",
        "following_url": "https://api.github.com/users/reverse-hash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/reverse-hash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/reverse-hash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/reverse-hash/subscriptions",
        "organizations_url": "https://api.github.com/users/reverse-hash/orgs",
        "repos_url": "https://api.github.com/users/reverse-hash/repos",
        "events_url": "https://api.github.com/users/reverse-hash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/reverse-hash/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-15T13:35:53Z",
      "updated_at": "2024-08-17T09:16:57Z",
      "author_association": "NONE",
      "body": "Same issue when compiling 27.1 to build my own docker images in alpine. Same process, just switching tags.\r\n\r\n```\r\n make HOST=$(gcc -dumpmachine) NO_QT=1 NO_ZMQ=1 NO_WALLET=1 NO_BDB=1 NO_SQLITE=1 \\\r\n  && ./autogen.sh \\\r\n  && ./configure \\\r\n    --prefix=$PWD/depends/$(gcc -dumpmachine) LDFLAGS=\"-static-libstdc++\"  \\\r\n    --disable-bench \\\r\n    --disable-cli \\\r\n    --disable-debug \\\r\n    --disable-man \\\r\n    --disable-tests \\\r\n    --disable-upnp \\\r\n    --disable-wallet \\\r\n    --disable-zmq \\\r\n    --with-qrencode=no \\\r\n    --enable-fuzz-binary=no \\\r\n    --enable-strip \\\r\n    --without-gui \\\r\n    --without-bdb \\\r\n    --with-sqlite=no \\    \r\n  && make\r\n```\r\n\r\n```\r\nREPOSITORY       TAG           IMAGE ID       CREATED         SIZE\r\nbitcoind         27.1          7a14ec692f8c   2 days ago      149MB\r\nbitcoind         26.2          6fc0c7867196   4 days ago      80.1MB\r\n```\r\n\r\nJust adding the option \"-s\" or \"--strip-all\". Example: LDFLAGS=\"-static-libstdc++ -s\"  reduces the binary in 27.1 to 79 MB.",
      "user": {
        "login": "reverse-hash",
        "id": 11018433,
        "node_id": "MDQ6VXNlcjExMDE4NDMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/11018433?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/reverse-hash",
        "html_url": "https://github.com/reverse-hash",
        "followers_url": "https://api.github.com/users/reverse-hash/followers",
        "following_url": "https://api.github.com/users/reverse-hash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/reverse-hash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/reverse-hash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/reverse-hash/subscriptions",
        "organizations_url": "https://api.github.com/users/reverse-hash/orgs",
        "repos_url": "https://api.github.com/users/reverse-hash/repos",
        "events_url": "https://api.github.com/users/reverse-hash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/reverse-hash/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30593#issuecomment-2291280993",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30593"
    }
  ]
}