{
  "type": "issue",
  "issue": {
    "id": 276740896,
    "node_id": "MDU6SXNzdWUyNzY3NDA4OTY=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11767",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11767/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11767/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11767/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/11767",
    "number": 11767,
    "state": "closed",
    "state_reason": "completed",
    "title": "bitcoind assertion failed, macOS 10.13.0",
    "body": "OS version: macOS 10.13.0\r\nCore built on commit a933cb14c75b9c79a02f8de8397a8eae405a264f\r\nSteps to Reproduce:\r\n1. Standard steps to build on OSX\r\n2. `./bitcoind` does not work and spawns the following error:\r\n```\r\nAssertion failed: ((pindexFirstNeverProcessed != nullptr) == (pindex->nChainTx == 0)), function CheckBlockIndex, file validation.cpp, line 4203.\r\nAbort trap: 6\r\n```\r\nStrangely enough, `bitcoin-cli` works, so I think this might be isolated to `bitcoind` and similar.\r\n\r\nI Didn't observe this earlier, think it may have occurred recently (or I may have done something which causes this). Any help is greatly appreciated. Thanks!",
    "user": {
      "login": "Varunram",
      "id": 18598959,
      "node_id": "MDQ6VXNlcjE4NTk4OTU5",
      "avatar_url": "https://avatars.githubusercontent.com/u/18598959?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Varunram",
      "html_url": "https://github.com/Varunram",
      "followers_url": "https://api.github.com/users/Varunram/followers",
      "following_url": "https://api.github.com/users/Varunram/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/Varunram/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/Varunram/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/Varunram/subscriptions",
      "organizations_url": "https://api.github.com/users/Varunram/orgs",
      "repos_url": "https://api.github.com/users/Varunram/repos",
      "events_url": "https://api.github.com/users/Varunram/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/Varunram/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 234879,
        "node_id": "MDU6TGFiZWwyMzQ4Nzk=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/macOS",
        "name": "macOS",
        "description": "",
        "color": "660000",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "locked": true,
    "active_lock_reason": "resolved",
    "comments": 10,
    "closed_at": "2017-11-26T05:08:56Z",
    "created_at": "2017-11-25T10:24:05Z",
    "updated_at": "2021-09-08T12:48:53Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 346939110,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM0NjkzOTExMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/346939110",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-25T12:58:12Z",
      "updated_at": "2017-11-25T12:58:12Z",
      "author_association": "MEMBER",
      "body": "Do you see this assertion hit on main net?\n\nOn Nov 25, 2017 05:24, \"Varunram Ganesh\" <notifications@github.com> wrote:\n\n> OS version: macOS 10.13.0\n> Core built on commit a933cb1\n> <https://github.com/bitcoin/bitcoin/commit/a933cb14c75b9c79a02f8de8397a8eae405a264f>\n> Steps to Reproduce:\n>\n>    1. Standard steps to build on OSX\n>    2. ./bitcoind does not work and spawns the following error:\n>\n> Assertion failed: ((pindexFirstNeverProcessed != nullptr) == (pindex->nChainTx == 0)), function CheckBlockIndex, file validation.cpp, line 4203.\n> Abort trap: 6\n>\n> bitcoin-cli works though, so that's weird.\n>\n> Didn't observe this earlier, think it may have occurred recently (or I may\n> have done something which causes this). Any help is greatly appreciated.\n> Thanks!\n>\n> 窶能n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/bitcoin/bitcoin/issues/11767>, or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AGGmv8XEmX9nWqPveIID2DYsTUFUyqNjks5s5-rdgaJpZM4QqYTO>\n> .\n>\n",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/11767#issuecomment-346939110",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11767"
    },
    {
      "event": "commented",
      "id": 346940470,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM0Njk0MDQ3MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/346940470",
      "actor": {
        "login": "Varunram",
        "id": 18598959,
        "node_id": "MDQ6VXNlcjE4NTk4OTU5",
        "avatar_url": "https://avatars.githubusercontent.com/u/18598959?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Varunram",
        "html_url": "https://github.com/Varunram",
        "followers_url": "https://api.github.com/users/Varunram/followers",
        "following_url": "https://api.github.com/users/Varunram/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Varunram/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Varunram/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Varunram/subscriptions",
        "organizations_url": "https://api.github.com/users/Varunram/orgs",
        "repos_url": "https://api.github.com/users/Varunram/repos",
        "events_url": "https://api.github.com/users/Varunram/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Varunram/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-25T13:25:24Z",
      "updated_at": "2017-11-25T13:25:24Z",
      "author_association": "CONTRIBUTOR",
      "body": "Yep, same with testnet and regtest too.",
      "user": {
        "login": "Varunram",
        "id": 18598959,
        "node_id": "MDQ6VXNlcjE4NTk4OTU5",
        "avatar_url": "https://avatars.githubusercontent.com/u/18598959?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Varunram",
        "html_url": "https://github.com/Varunram",
        "followers_url": "https://api.github.com/users/Varunram/followers",
        "following_url": "https://api.github.com/users/Varunram/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Varunram/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Varunram/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Varunram/subscriptions",
        "organizations_url": "https://api.github.com/users/Varunram/orgs",
        "repos_url": "https://api.github.com/users/Varunram/repos",
        "events_url": "https://api.github.com/users/Varunram/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Varunram/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/11767#issuecomment-346940470",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11767"
    },
    {
      "event": "commented",
      "id": 346940909,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM0Njk0MDkwOQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/346940909",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-25T13:34:10Z",
      "updated_at": "2017-11-25T13:34:10Z",
      "author_association": "CONTRIBUTOR",
      "body": "Well you obviously shouldn't be seeing an assertion failure either way, but CheckBlockIndex shouldn't be called in normal runtime - it's gated by the -checkblockindex option which defaults to false on mainnet.\n\nOn November 25, 2017 2:24:10 AM PST, Varunram Ganesh <notifications@github.com> wrote:\n>OS version: macOS 10.13.0\n>Core built on commit a933cb14c75b9c79a02f8de8397a8eae405a264f\n>Steps to Reproduce:\n>1. Standard steps to build on OSX\n>2. `./bitcoind` does not work and spawns the following error:\n>```\n>Assertion failed: ((pindexFirstNeverProcessed != nullptr) ==\n>(pindex->nChainTx == 0)), function CheckBlockIndex, file\n>validation.cpp, line 4203.\n>Abort trap: 6\n>```\n>`bitcoin-cli` works though, so that's weird.\n>\n>Didn't observe this earlier, think it may have occurred recently (or I\n>may have done something which causes this). Any help is greatly\n>appreciated. Thanks!\n>\n>-- \n>You are receiving this because you are subscribed to this thread.\n>Reply to this email directly or view it on GitHub:\n>https://github.com/bitcoin/bitcoin/issues/11767\n",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/11767#issuecomment-346940909",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11767"
    },
    {
      "event": "commented",
      "id": 346942357,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM0Njk0MjM1Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/346942357",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-25T14:02:04Z",
      "updated_at": "2017-11-25T14:02:04Z",
      "author_association": "MEMBER",
      "body": "Mind to provide some further details?\n\n* The most recent date without this issue (commit or rough time).\n* The bitcoin.conf or command line args or debug.log\n\nOn Nov 25, 2017 08:25, \"Varunram Ganesh\" <notifications@github.com> wrote:\n\n> Yep, same with testnet and regtest too.\n>\n> 窶能n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/bitcoin/bitcoin/issues/11767#issuecomment-346940470>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AGGmv1SEFM-i96x_KZ3fuTVo-pHpkVkXks5s6BVYgaJpZM4QqYTO>\n> .\n>\n",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/11767#issuecomment-346942357",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11767"
    },
    {
      "event": "commented",
      "id": 346944646,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM0Njk0NDY0Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/346944646",
      "actor": {
        "login": "Varunram",
        "id": 18598959,
        "node_id": "MDQ6VXNlcjE4NTk4OTU5",
        "avatar_url": "https://avatars.githubusercontent.com/u/18598959?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Varunram",
        "html_url": "https://github.com/Varunram",
        "followers_url": "https://api.github.com/users/Varunram/followers",
        "following_url": "https://api.github.com/users/Varunram/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Varunram/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Varunram/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Varunram/subscriptions",
        "organizations_url": "https://api.github.com/users/Varunram/orgs",
        "repos_url": "https://api.github.com/users/Varunram/repos",
        "events_url": "https://api.github.com/users/Varunram/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Varunram/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-25T14:45:06Z",
      "updated_at": "2017-11-25T14:45:06Z",
      "author_association": "CONTRIBUTOR",
      "body": "I think I got the solution. I had another instance of Core, figured out\nthat would interfere and changed the data dir and boom, it worked. So I\nguess, this ain't a bug, but maybe a more helpful error message would've\nbeen great. Thanks for responding!\n",
      "user": {
        "login": "Varunram",
        "id": 18598959,
        "node_id": "MDQ6VXNlcjE4NTk4OTU5",
        "avatar_url": "https://avatars.githubusercontent.com/u/18598959?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Varunram",
        "html_url": "https://github.com/Varunram",
        "followers_url": "https://api.github.com/users/Varunram/followers",
        "following_url": "https://api.github.com/users/Varunram/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Varunram/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Varunram/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Varunram/subscriptions",
        "organizations_url": "https://api.github.com/users/Varunram/orgs",
        "repos_url": "https://api.github.com/users/Varunram/repos",
        "events_url": "https://api.github.com/users/Varunram/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Varunram/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/11767#issuecomment-346944646",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11767"
    },
    {
      "event": "commented",
      "id": 346945632,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM0Njk0NTYzMg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/346945632",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-25T15:01:46Z",
      "updated_at": "2017-11-25T15:01:46Z",
      "author_association": "MEMBER",
      "body": "I don't think we can provide helpful error messages when the datadir ends\nup in a consensus incompatible state. (Assuming that this is what happened\nhere)\n\nOn Nov 25, 2017 09:45, \"Varunram Ganesh\" <notifications@github.com> wrote:\n\n> I think I got the solution. I had another instance of Core, figured out\n> that would interfere and changed the data dir and boom, it worked. So I\n> guess, this ain't a bug, but maybe a more helpful error message would've\n> been great. Thanks for responding!\n>\n> 窶能n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/bitcoin/bitcoin/issues/11767#issuecomment-346944646>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AGGmvy0nVe0IcZ682d-bzLklVLzdwZxnks5s6CgEgaJpZM4QqYTO>\n> .\n>\n",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/11767#issuecomment-346945632",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11767"
    },
    {
      "event": "commented",
      "id": 346945746,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM0Njk0NTc0Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/346945746",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-25T15:03:36Z",
      "updated_at": "2017-11-25T15:03:36Z",
      "author_association": "CONTRIBUTOR",
      "body": "What is \"another instance of Core\"? I'm not aware of any cases that could trigger this, except possibly if you ran some other Software that wrote garbage to your chain state (eg a BCH fullnode, btc1, etc)\n\nOn November 25, 2017 6:45:11 AM PST, Varunram Ganesh <notifications@github.com> wrote:\n>I think I got the solution. I had another instance of Core, figured out\n>that would interfere and changed the data dir and boom, it worked. So I\n>guess, this ain't a bug, but maybe a more helpful error message\n>would've\n>been great. Thanks for responding!\n>\n>\n>-- \n>You are receiving this because you commented.\n>Reply to this email directly or view it on GitHub:\n>https://github.com/bitcoin/bitcoin/issues/11767#issuecomment-346944646\n",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/11767#issuecomment-346945746",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11767"
    },
    {
      "event": "commented",
      "id": 346946841,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM0Njk0Njg0MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/346946841",
      "actor": {
        "login": "Varunram",
        "id": 18598959,
        "node_id": "MDQ6VXNlcjE4NTk4OTU5",
        "avatar_url": "https://avatars.githubusercontent.com/u/18598959?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Varunram",
        "html_url": "https://github.com/Varunram",
        "followers_url": "https://api.github.com/users/Varunram/followers",
        "following_url": "https://api.github.com/users/Varunram/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Varunram/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Varunram/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Varunram/subscriptions",
        "organizations_url": "https://api.github.com/users/Varunram/orgs",
        "repos_url": "https://api.github.com/users/Varunram/repos",
        "events_url": "https://api.github.com/users/Varunram/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Varunram/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-25T15:21:42Z",
      "updated_at": "2017-11-25T15:21:42Z",
      "author_association": "CONTRIBUTOR",
      "body": "Nah, I'm not attracted to trash, so no problems there. Here's what I did:\n\n1. I currently have two clones - one on\ncommit 6157e8ce3937af3f46d3e7dd922d19d6dc272145 running at ~/bitcoin and\nanother on ~/temp/bitcoin (used to test #11731 with master in this case)\n\n2. I use the one at ~/bitcoin with the default home directory\n(~/Library/Application\\ Support/Bitcoin/) to run a regtest node. I did not\nsync any block on mainnet.\n\n3. I tried to start mainnet (and others consequently) at ~/temp/bitcoin and\nit didn't work.\n\nThis led me to the conclusion that it might be the data directory which may\nbe causing problems.\n\nOn 25 November 2017 at 20:34, Matt Corallo <notifications@github.com> wrote:\n\n> What is \"another instance of Core\"? I'm not aware of any cases that could\n> trigger this, except possibly if you ran some other Software that wrote\n> garbage to your chain state (eg a BCH fullnode, btc1, etc)\n>\n> On November 25, 2017 6:45:11 AM PST, Varunram Ganesh <\n> notifications@github.com> wrote:\n> >I think I got the solution. I had another instance of Core, figured out\n> >that would interfere and changed the data dir and boom, it worked. So I\n> >guess, this ain't a bug, but maybe a more helpful error message\n> >would've\n> >been great. Thanks for responding!\n> >\n> >\n> >--\n> >You are receiving this because you commented.\n> >Reply to this email directly or view it on GitHub:\n> >https://github.com/bitcoin/bitcoin/issues/11767#issuecomment-346944646\n>\n> 窶能n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/bitcoin/bitcoin/issues/11767#issuecomment-346945746>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ARvML7dA7dv7eeEPeJNkdsfs-eIj2NaVks5s6CxsgaJpZM4QqYTO>\n> .\n>\n",
      "user": {
        "login": "Varunram",
        "id": 18598959,
        "node_id": "MDQ6VXNlcjE4NTk4OTU5",
        "avatar_url": "https://avatars.githubusercontent.com/u/18598959?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Varunram",
        "html_url": "https://github.com/Varunram",
        "followers_url": "https://api.github.com/users/Varunram/followers",
        "following_url": "https://api.github.com/users/Varunram/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Varunram/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Varunram/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Varunram/subscriptions",
        "organizations_url": "https://api.github.com/users/Varunram/orgs",
        "repos_url": "https://api.github.com/users/Varunram/repos",
        "events_url": "https://api.github.com/users/Varunram/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Varunram/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/11767#issuecomment-346946841",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11767"
    },
    {
      "event": "labeled",
      "id": 1357929841,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDEzNTc5Mjk4NDE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1357929841",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-25T19:49:49Z",
      "label": {
        "name": "MacOSX",
        "color": "660000"
      }
    },
    {
      "event": "commented",
      "id": 346964856,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM0Njk2NDg1Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/346964856",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-25T20:41:15Z",
      "updated_at": "2017-11-25T20:41:15Z",
      "author_association": "MEMBER",
      "body": "I am still surprised that you see that on main and test net. Would you mind double checking and sharing the corresponding `debug.log` or `-printtoconsole`?",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/11767#issuecomment-346964856",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11767"
    },
    {
      "event": "commented",
      "id": 346984907,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM0Njk4NDkwNw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/346984907",
      "actor": {
        "login": "Varunram",
        "id": 18598959,
        "node_id": "MDQ6VXNlcjE4NTk4OTU5",
        "avatar_url": "https://avatars.githubusercontent.com/u/18598959?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Varunram",
        "html_url": "https://github.com/Varunram",
        "followers_url": "https://api.github.com/users/Varunram/followers",
        "following_url": "https://api.github.com/users/Varunram/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Varunram/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Varunram/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Varunram/subscriptions",
        "organizations_url": "https://api.github.com/users/Varunram/orgs",
        "repos_url": "https://api.github.com/users/Varunram/repos",
        "events_url": "https://api.github.com/users/Varunram/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Varunram/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-26T05:08:56Z",
      "updated_at": "2017-11-26T05:08:56Z",
      "author_association": "CONTRIBUTOR",
      "body": "I just checked `debug.log` and it seems that I synced till block 115000 (must've been running in the background, my bad). Still dunno about testnet, but I shall assume that something similar would've happened since cleaning the directories, recloning and building seems to work just fine. Thanks for the inputs and sorry to have taken up your time.",
      "user": {
        "login": "Varunram",
        "id": 18598959,
        "node_id": "MDQ6VXNlcjE4NTk4OTU5",
        "avatar_url": "https://avatars.githubusercontent.com/u/18598959?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Varunram",
        "html_url": "https://github.com/Varunram",
        "followers_url": "https://api.github.com/users/Varunram/followers",
        "following_url": "https://api.github.com/users/Varunram/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Varunram/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Varunram/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Varunram/subscriptions",
        "organizations_url": "https://api.github.com/users/Varunram/orgs",
        "repos_url": "https://api.github.com/users/Varunram/repos",
        "events_url": "https://api.github.com/users/Varunram/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Varunram/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/11767#issuecomment-346984907",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11767"
    },
    {
      "event": "closed",
      "id": 1358038267,
      "node_id": "MDExOkNsb3NlZEV2ZW50MTM1ODAzODI2Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1358038267",
      "actor": {
        "login": "Varunram",
        "id": 18598959,
        "node_id": "MDQ6VXNlcjE4NTk4OTU5",
        "avatar_url": "https://avatars.githubusercontent.com/u/18598959?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Varunram",
        "html_url": "https://github.com/Varunram",
        "followers_url": "https://api.github.com/users/Varunram/followers",
        "following_url": "https://api.github.com/users/Varunram/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Varunram/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Varunram/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Varunram/subscriptions",
        "organizations_url": "https://api.github.com/users/Varunram/orgs",
        "repos_url": "https://api.github.com/users/Varunram/repos",
        "events_url": "https://api.github.com/users/Varunram/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Varunram/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-26T05:08:56Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-28T15:21:09Z",
      "updated_at": "2017-11-28T15:21:09Z",
      "source": {
        "issue": {
          "id": 277336361,
          "node_id": "MDU6SXNzdWUyNzczMzYzNjE=",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11782",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11782/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11782/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11782/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/11782",
          "number": 11782,
          "state": "closed",
          "state_reason": "completed",
          "title": "Assertion failure in validation.cpp:4203 (re: pindexFirstNeverProcessed)",
          "body": "Reported by @rustyrussell on irc:\r\n\r\n    <rusty> Latest master branch, bitcoind in regtest mode:\r\n    bitcoind: validation.cpp:4203: void CheckBlockIndex(const Consensus::Params&): Assertion `(pindexFirstNeverProcessed != nullptr) == (pindex->nChainTx == 0)' failed.\r\n    <rusty> Pretty sure that was a .bitcoind dir from an older bitcoind.\r\n\r\nI can reproduce this error with the following simple test case:\r\n\r\n    class RustyAssertTest(BitcoinTestFramework):\r\n        def set_test_params(self):\r\n            self.num_nodes = 1\r\n            self.setup_clean_chain = True\r\n\r\n        def run_test(self):\r\n            self.log.info(\"initialise chain by activating segwit\")\r\n            self.restart_node(0, [\"-vbparams=segwit:0:999999999999\"])\r\n            self.nodes[0].generate(500)\r\n            assert_equal(get_bip9_status(self.nodes[0], 'segwit')['status'], 'active')\r\n\r\n            self.log.info(\"restart with segwit always active\")\r\n            self.restart_node(0)\r\n\r\nor by hand by running:\r\n\r\n    $ rm -rf ~/.bitcoin/regtest\r\n    $ ./bitcoind -regtest -vbparams=segwit:0:999999999999 -daemon\r\n    $ ./bitcoin-cli -regtest generate 500\r\n    $ ./bitcoin-cli -regtest stop\r\n    $ ./bitcoind -regtest\r\n    bitcoind: validation.cpp:4213: void CheckBlockIndex(const Consensus::Params&): Assertion `(pindexFirstNeverProcessed != nullptr) == (pindex->nChainTx == 0)' failed.\r\n    Aborted\r\n\r\nI believe what's happening is:\r\n\r\n * bitcoind is invoking RewindBlockIndex at startup, and seeing that segwit is immediately active (due to #11389), but it doesn't have witness data stored (because the blocks were generated with segwit only activating following bip9)\r\n * so the blocks are disconnected and then their validity is reduced, by setting nTx and nChainTx both to 0\r\n * once that's done, RewindBlockIndex calls CheckBlockIndex which is where the assertion fails\r\n * pindexFirstNeverProcessed gets set quickly, because nTx is mostly 0, and it stays set provided there's a subnode, of which there should be plenty\r\n * the assertion then fails when it hits a block where nChainTx != 0\r\n * and that happens as soon as it gets to a block where segwit had activated under bip9 rules: since segwit had activated, that block was stored with witness data, and the validation reduction didn't occur, leaving nChainTx as whatever it had been -- this should be block 433 on regtest i think (144 blocks of started, 144 blocks active voting, 144 blocks locked in, and 1 block active)\r\n\r\nI don't think this bug can be hit on mainnet or testnet -- running an old client will either not recognise segwit at all and never store any witness data (so nChainTx won't be non-zero), or will see segwit started at the exact same block the current client does (so won't reduce the validation of any blocks). It also shouldn't impact most future bip 9 (or similar) deployments, as most of those presumably won't need to change the storage format.\r\n\r\nSo I think this might just warrant a cleaner error message rather than handling it properly. Perhaps RewindBlockIndex's test should change from:\r\n\r\n    if (IsWitnessEnabled(pprev) && !BLOCK_OPT_WITNESS && !chainActive) { ... }\r\n\r\nto something like:\r\n\r\n    if (IsWitnessEnabled(pprev)) {\r\n        if (!BLOCK_OPT_WITNESS && !chainActive) {\r\n            ...\r\n        } else if (BLOCK_OPT_WITNESS && pprev->nChainTx == 0) {\r\n            LogPrintf(\"segwit activation height has changed, cannot reuse blockchain\");\r\n            return false;\r\n        }\r\n    }\r\n",
          "user": {
            "login": "ajtowns",
            "id": 127186,
            "node_id": "MDQ6VXNlcjEyNzE4Ng==",
            "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ajtowns",
            "html_url": "https://github.com/ajtowns",
            "followers_url": "https://api.github.com/users/ajtowns/followers",
            "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
            "organizations_url": "https://api.github.com/users/ajtowns/orgs",
            "repos_url": "https://api.github.com/users/ajtowns/repos",
            "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ajtowns/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 118379652,
              "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
              "name": "Validation",
              "color": "6060aa",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 6,
          "closed_at": "2020-04-27T00:39:04Z",
          "created_at": "2017-11-28T10:41:36Z",
          "updated_at": "2022-02-15T11:16:05Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-03-27T20:58:42Z",
      "updated_at": "2018-03-27T20:58:42Z",
      "source": {
        "issue": {
          "id": 275243821,
          "node_id": "MDU6SXNzdWUyNzUyNDM4MjE=",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11731",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11731/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11731/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11731/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/11731",
          "number": 11731,
          "state": "closed",
          "state_reason": "completed",
          "title": "'make check' fails on OSX 10.13.1",
          "body": "### Describe the issue\r\n\r\n```\r\nMaking check in src\r\n/Applications/Xcode.app/Contents/Developer/usr/bin/make  check-TESTS check-local\r\nFAIL: test/test_bitcoin\r\nPASS: qt/test/test_bitcoin-qt\r\n============================================================================\r\nTestsuite summary for Bitcoin Core 0.15.99\r\n============================================================================\r\n# TOTAL: 2\r\n# PASS:  1\r\n# SKIP:  0\r\n# XFAIL: 0\r\n# FAIL:  1\r\n# XPASS: 0\r\n# ERROR: 0\r\n============================================================================\r\nSee src/test-suite.log\r\nPlease report to https://github.com/bitcoin/bitcoin/issues\r\n============================================================================\r\nmake[4]: *** [test-suite.log] Error 1\r\nmake[3]: *** [check-TESTS] Error 2\r\nmake[2]: *** [check-am] Error 2\r\nmake[1]: *** [check-recursive] Error 1\r\nmake: *** [check-recursive] Error 1\r\n```\r\n### What version of Bitcoin Core are you using, where did you get it (website, self-compiled, etc)?\r\n\r\nMaster branch at 7293d064133aeafd9f0ae0bdbb2ed74a44d91ecc\r\n\r\n### What type of machine are you observing the error on (OS/CPU and disk type)?\r\n\r\nOSX 10.13.1\r\nXcode 9.1\r\n\r\n### Attach test-suite.log\r\n\r\n[test-suite.log](https://github.com/bitcoin/bitcoin/files/1489808/test-suite.log)\r\n",
          "user": {
            "login": "Ankarrr",
            "id": 8311552,
            "node_id": "MDQ6VXNlcjgzMTE1NTI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8311552?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Ankarrr",
            "html_url": "https://github.com/Ankarrr",
            "followers_url": "https://api.github.com/users/Ankarrr/followers",
            "following_url": "https://api.github.com/users/Ankarrr/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/Ankarrr/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/Ankarrr/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/Ankarrr/subscriptions",
            "organizations_url": "https://api.github.com/users/Ankarrr/orgs",
            "repos_url": "https://api.github.com/users/Ankarrr/repos",
            "events_url": "https://api.github.com/users/Ankarrr/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/Ankarrr/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 234879,
              "node_id": "MDU6TGFiZWwyMzQ4Nzk=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/macOS",
              "name": "macOS",
              "description": "",
              "color": "660000",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "NONE",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 9,
          "closed_at": "2018-04-20T02:08:35Z",
          "created_at": "2017-11-20T05:48:49Z",
          "updated_at": "2021-09-08T12:37:23Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "locked",
      "id": 5272092596,
      "node_id": "LOE_lADOABII584QfrsgzwAAAAE6Pb-0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5272092596",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-08T12:48:53Z",
      "lock_reason": "resolved"
    }
  ]
}