{
  "type": "issue",
  "issue": {
    "id": 3893710679,
    "node_id": "I_kwDOABII587oFU9X",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34497",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34497/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34497/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34497/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/34497",
    "number": 34497,
    "state": "open",
    "state_reason": null,
    "title": "[rfc] Disallow loading and creating wallets by paths",
    "body": "A discussion that has come up several times at the Localhost office over the past several weeks has been whether it makes sense to load wallets by paths. In particular, supporting wallets by path has been the source of a couple issues, and has also had some involvement in the recent wallet deletion issue.\n\nFor some background, the name of a wallet can always be interpreted as a path. If it is not an absolute path, then it is a path relative to the wallets directory, e.g. a wallet named `mywallet` is always located at `<walletsdir>/mywallet`. But when referring to wallets named by relative path, I mean wallets which actually include `/` in their name which turns the name into a path specifier, rather than a logical name that happens to map to a path relative to the walletsdir. Otherwise, the path is an absolute path. An important note is that with the exception of BDB files stored directly in the walletsdir, the file actually opened is always `<path>/wallet.dat`.\n\nFor absolute paths, this seems mostly ok, if just a bit odd. This has the potential to be problematic when mixing wallet names with filenames and paths. However, I don't recall any specific issues with absolute paths off the top of my head.\n\nOn the other hand, relative paths that include additional directories (e.g.` <walletdir>/<subdir>/mywallet` or `../<more path>/mywallet`) have been a major source of headaches in wallet filesystem code:\n- #32273 pointed out a flaw in how wallet names and paths were being combined in relative paths to produce nonsensical paths\n- The root issue in #31409 is searching subdirectories for additional wallets to have their name by relative path\n\nFurthermore, from a user perspective, relative path wallets are really weird in that the path is relative to the walletsdir, which itself is not always consistent relative to the datadir (excluding when set explicitly). Given that the actual location of the walletsdir is basically never surfaced to the user, I don't really see any situation where a user would want to name a wallet `../<path>`. I can see `<sub>/mywallet`, but that really doesn't need to be a path, and the wallet could actually be in a directory named `<sub>/mywallet` where the `/` is escaped so it doesn't become a path.\n\nI propose that we should remove support for wallets with by relative path, but retain support for wallets by absolute path.\n\nBut I'd like to get some feedback from contributors and users before moving forward with this.\n\n***\n\nThere has also been the suggestion that we should go all the way and just remove support for both relative and absolute paths. I push back on this a bit as I think absolute paths can still be useful, e.g. if a user has wallets both in the walletsdir and on external media, they could want to load wallets from both locations at the same time without needing to change the walletsdir by specifying wallets by absolute path. However, I am open to being convinced that remove absolute path support could be a good idea.",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "labels": [
      {
        "id": 149424,
        "node_id": "MDU6TGFiZWwxNDk0MjQ=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
        "name": "Wallet",
        "color": "08a781",
        "default": false
      },
      {
        "id": 1392286103,
        "node_id": "MDU6TGFiZWwxMzkyMjg2MTAz",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20Conceptual%20Review",
        "name": "Needs Conceptual Review",
        "description": "",
        "color": "fef2c0",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "MEMBER",
    "locked": false,
    "comments": 1,
    "created_at": "2026-02-03T23:20:47Z",
    "updated_at": "2026-02-04T09:34:56Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 22512307644,
      "node_id": "LE_lADOABII587oFU9XzwAAAAU91o28",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22512307644",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T23:20:48Z",
      "label": {
        "name": "Wallet",
        "color": "08a781"
      }
    },
    {
      "event": "labeled",
      "id": 22512307705,
      "node_id": "LE_lADOABII587oFU9XzwAAAAU91o35",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22512307705",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T23:20:48Z",
      "label": {
        "name": "Needs Conceptual Review",
        "color": "fef2c0"
      }
    },
    {
      "event": "commented",
      "id": 3846345031,
      "node_id": "IC_kwDOABII587lQpFH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3846345031",
      "actor": {
        "login": "sobitkarki1",
        "id": 87702816,
        "node_id": "MDQ6VXNlcjg3NzAyODE2",
        "avatar_url": "https://avatars.githubusercontent.com/u/87702816?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sobitkarki1",
        "html_url": "https://github.com/sobitkarki1",
        "followers_url": "https://api.github.com/users/sobitkarki1/followers",
        "following_url": "https://api.github.com/users/sobitkarki1/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sobitkarki1/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sobitkarki1/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sobitkarki1/subscriptions",
        "organizations_url": "https://api.github.com/users/sobitkarki1/orgs",
        "repos_url": "https://api.github.com/users/sobitkarki1/repos",
        "events_url": "https://api.github.com/users/sobitkarki1/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sobitkarki1/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-04T09:34:56Z",
      "updated_at": "2026-02-04T09:34:56Z",
      "author_association": "NONE",
      "body": "We should remove support for wallets by relative path, but retain support for wallets by absolute path. That's the way to go.",
      "user": {
        "login": "sobitkarki1",
        "id": 87702816,
        "node_id": "MDQ6VXNlcjg3NzAyODE2",
        "avatar_url": "https://avatars.githubusercontent.com/u/87702816?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sobitkarki1",
        "html_url": "https://github.com/sobitkarki1",
        "followers_url": "https://api.github.com/users/sobitkarki1/followers",
        "following_url": "https://api.github.com/users/sobitkarki1/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sobitkarki1/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sobitkarki1/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sobitkarki1/subscriptions",
        "organizations_url": "https://api.github.com/users/sobitkarki1/orgs",
        "repos_url": "https://api.github.com/users/sobitkarki1/repos",
        "events_url": "https://api.github.com/users/sobitkarki1/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sobitkarki1/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/34497#issuecomment-3846345031",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34497"
    }
  ]
}