{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22261",
    "id": 671631087,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NjcxNjMxMDg3",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22261",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/22261.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/22261.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22261",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22261/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22261/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22261/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/5a77abd4e657458852875a07692898982f4b1db5",
    "number": 22261,
    "state": "closed",
    "locked": true,
    "maintainer_can_modify": false,
    "title": "[p2p/mempool] Two small fixes to node broadcast logic",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "1. Only add a transaction to the unbroadcast set when it's added to the mempool\r\n    \r\n    Currently, if BroadcastTransaction() is called to rebroadcast a\r\n    transaction (e.g. by ResendWalletTransactions()), then we add the\r\n    transaction to the unbroadcast set. That transaction has already been\r\n    broadcast in the past, so peers are unlikely to request it again,\r\n    meaning RemoveUnbroadcastTx() won't be called and it won't be removed\r\n    from m_unbroadcast_txids.\r\n    \r\n    Net processing will therefore continue to attempt rebroadcast for the\r\n    transaction every 10-15 minutes. This will most likely continue until\r\n    the node connects to a new peer which hasn't yet seen the transaction\r\n    (or perhaps indefinitely).\r\n    \r\n    Fix by only adding the transaction to the broadcast set when it's added to the mempool.\r\n\r\n2. Allow rebroadcast for same-txid-different-wtxid transactions\r\n    \r\n    There is some slightly unexpected behaviour when:\r\n    \r\n    - there is already transaction in the mempool (the \"mempool tx\")\r\n    - BroadcastTransaction() is called for a transaction with the same txid\r\n      as the mempool transaction but a different witness (the \"new tx\")\r\n    \r\n    Prior to this commit, if BroadcastTransaction() is called with\r\n    relay=true, then it'll call RelayTransaction() using the txid/wtxid of\r\n    the new tx, not the txid/wtxid of the mempool tx. For wtxid relay peers,\r\n    in SendMessages(), the wtxid of the new tx will be taken from\r\n    setInventoryTxToSend, but will then be filtered out from the vector of\r\n    wtxids to announce, since m_mempool.info() won't find the transaction\r\n    (the mempool contains the mempool tx, which has a different wtxid from\r\n    the new tx).\r\n    \r\n    Fix this by calling RelayTransaction() with the wtxid of the mempool\r\n    transaction in this case.\r\n\r\nThe third commit is a comment/whitespace only change to tidy up the BroadcastTransaction() function.",
    "labels": [
      {
        "id": 64585,
        "node_id": "MDU6TGFiZWw2NDU4NQ==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug",
        "name": "Bug",
        "color": "FBBAAB",
        "default": false
      },
      {
        "id": 98298007,
        "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
        "name": "P2P",
        "color": "006b75",
        "default": false
      },
      {
        "id": 164208572,
        "node_id": "MDU6TGFiZWwxNjQyMDg1NzI=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mempool",
        "name": "Mempool",
        "color": "fef2c0",
        "default": false
      },
      {
        "id": 1648013533,
        "node_id": "MDU6TGFiZWwxNjQ4MDEzNTMz",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Review%20club",
        "name": "Review club",
        "description": "",
        "color": "0052cc",
        "default": false
      }
    ],
    "active_lock_reason": "resolved",
    "created_at": "2021-06-16T15:58:52Z",
    "updated_at": "2022-08-16T17:25:36Z",
    "closed_at": "2021-07-20T12:58:53Z",
    "mergeable_state": "unknown",
    "merged_at": "2021-07-20T12:58:53Z",
    "merge_commit_sha": "8ed8164e6f1e85dce38ceb4f4766c21718691046",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "head": {
      "label": "jnewbery:2021-06-broadcast-fixes",
      "ref": "2021-06-broadcast-fixes",
      "sha": "5a77abd4e657458852875a07692898982f4b1db5",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 68248485,
        "node_id": "MDEwOlJlcG9zaXRvcnk2ODI0ODQ4NQ==",
        "name": "bitcoin",
        "full_name": "jnewbery/bitcoin",
        "owner": {
          "login": "jnewbery",
          "id": 1063656,
          "node_id": "MDQ6VXNlcjEwNjM2NTY=",
          "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/jnewbery",
          "html_url": "https://github.com/jnewbery",
          "followers_url": "https://api.github.com/users/jnewbery/followers",
          "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
          "organizations_url": "https://api.github.com/users/jnewbery/orgs",
          "repos_url": "https://api.github.com/users/jnewbery/repos",
          "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/jnewbery/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/jnewbery/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/jnewbery/bitcoin",
        "archive_url": "https://api.github.com/repos/jnewbery/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/jnewbery/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/jnewbery/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/jnewbery/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/jnewbery/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/jnewbery/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/jnewbery/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/jnewbery/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/jnewbery/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/jnewbery/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/jnewbery/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/jnewbery/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/jnewbery/bitcoin/events",
        "forks_url": "https://api.github.com/repos/jnewbery/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/jnewbery/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/jnewbery/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/jnewbery/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/jnewbery/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/jnewbery/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/jnewbery/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/jnewbery/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/jnewbery/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/jnewbery/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/jnewbery/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/jnewbery/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/jnewbery/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/jnewbery/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/jnewbery/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/jnewbery/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:jnewbery/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/jnewbery/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/jnewbery/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/jnewbery/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/jnewbery/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/jnewbery/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/jnewbery/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/jnewbery/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/jnewbery/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/jnewbery/bitcoin/hooks",
        "svn_url": "https://github.com/jnewbery/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 1,
        "stargazers_count": 4,
        "watchers_count": 4,
        "size": 219109,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-04-21T11:07:55Z",
        "created_at": "2016-09-14T22:29:05Z",
        "updated_at": "2021-07-06T16:23:27Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "8ab0c77299a5b184a8d0edf38f26a97bf9bbed6e",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35476,
        "stargazers_count": 70608,
        "watchers_count": 70608,
        "size": 236222,
        "default_branch": "master",
        "open_issues_count": 672,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-08-02T20:20:41Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-08-02T18:21:18Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22261"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 89,
    "deletions": 53,
    "changed_files": 3,
    "commits": 5,
    "review_comments": 7,
    "comments": 19
  },
  "events": [
    {
      "event": "labeled",
      "id": 4898928173,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDQ4OTg5MjgxNzM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4898928173",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-16T15:59:08Z",
      "label": {
        "name": "Bug",
        "color": "FBBAAB"
      }
    },
    {
      "event": "labeled",
      "id": 4898928178,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDQ4OTg5MjgxNzg=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4898928178",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-16T15:59:08Z",
      "label": {
        "name": "Mempool",
        "color": "fef2c0"
      }
    },
    {
      "event": "labeled",
      "id": 4898928180,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDQ4OTg5MjgxODA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4898928180",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-16T15:59:08Z",
      "label": {
        "name": "P2P",
        "color": "006b75"
      }
    },
    {
      "event": "commented",
      "id": 862680790,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg2MjY4MDc5MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/862680790",
      "actor": {
        "login": "dunxen",
        "id": 3072149,
        "node_id": "MDQ6VXNlcjMwNzIxNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3072149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dunxen",
        "html_url": "https://github.com/dunxen",
        "followers_url": "https://api.github.com/users/dunxen/followers",
        "following_url": "https://api.github.com/users/dunxen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dunxen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dunxen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dunxen/subscriptions",
        "organizations_url": "https://api.github.com/users/dunxen/orgs",
        "repos_url": "https://api.github.com/users/dunxen/repos",
        "events_url": "https://api.github.com/users/dunxen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dunxen/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-16T20:12:18Z",
      "updated_at": "2021-06-16T20:12:18Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK.\r\n\r\nI'm wondering if it would make sense to test this behaviour in `functional/mempool_unbroadcast.py`? If so, I wouldn't mind doing a follow-up PR :)",
      "user": {
        "login": "dunxen",
        "id": 3072149,
        "node_id": "MDQ6VXNlcjMwNzIxNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3072149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dunxen",
        "html_url": "https://github.com/dunxen",
        "followers_url": "https://api.github.com/users/dunxen/followers",
        "following_url": "https://api.github.com/users/dunxen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dunxen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dunxen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dunxen/subscriptions",
        "organizations_url": "https://api.github.com/users/dunxen/orgs",
        "repos_url": "https://api.github.com/users/dunxen/repos",
        "events_url": "https://api.github.com/users/dunxen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dunxen/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#issuecomment-862680790",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22261"
    },
    {
      "event": "commented",
      "id": 862804025,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg2MjgwNDAyNQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/862804025",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-16T23:43:08Z",
      "updated_at": "2021-07-10T12:18:31Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#issuecomment-862804025",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22261"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-16T23:48:23Z",
      "updated_at": "2021-06-16T23:48:23Z",
      "source": {
        "issue": {
          "id": 921456783,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NjcwNDU2ODU5",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22253",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22253/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22253/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22253/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/22253",
          "number": 22253,
          "state": "closed",
          "state_reason": null,
          "title": "validation: distinguish between same tx and same-nonwitness-data tx in mempool",
          "body": "On master, if you submit a transaction with the same txid but different witness to the mempool, it thinks the transactions are the same. Users submitting through `BroadcastTransaction()` (i.e. `sendrawtransaction` or the wallet) don't get notified that there's a different transaction in the mempool, although it doesn't crash. Users submitting through `testmempoolaccept()` will get a \"txn-already-in-mempool\" error.\r\n\r\nThis PR simply distinguishes between `txn-already-in-mempool` and `txn-same-nonwitness-data-in-mempool`, without handling them differently: `sendrawtransaction` still will not throw, but `testmempoolaccept` will give you a different error.\r\n\r\nI believe the intention of #19645 is to allow full swaps of transactions that have different witnesses but identical nonwitness data. Returning a different error message + adding a test was suggested: https://github.com/bitcoin/bitcoin/pull/19645#issuecomment-705109193 so this is that PR.",
          "user": {
            "login": "glozow",
            "id": 25183001,
            "node_id": "MDQ6VXNlcjI1MTgzMDAx",
            "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/glozow",
            "html_url": "https://github.com/glozow",
            "followers_url": "https://api.github.com/users/glozow/followers",
            "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
            "organizations_url": "https://api.github.com/users/glozow/orgs",
            "repos_url": "https://api.github.com/users/glozow/repos",
            "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/glozow/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            },
            {
              "id": 118379652,
              "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
              "name": "Validation",
              "color": "6060aa",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": true,
          "comments": 13,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22253",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/22253",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/22253.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/22253.patch"
          },
          "closed_at": "2021-07-09T15:35:47Z",
          "created_at": "2021-06-15T14:24:27Z",
          "updated_at": "2021-08-12T03:44:55Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-16T23:49:41Z",
      "updated_at": "2021-06-16T23:49:41Z",
      "source": {
        "issue": {
          "id": 921455398,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NjcwNDU1NjU3",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22252",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22252/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22252/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22252/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/22252",
          "number": 22252,
          "state": "closed",
          "state_reason": null,
          "title": "policy: Trim Packages when transaction with same txid exists in mempool",
          "body": "[WIP] This requires #22253 and is built on top of #21800, please review them first.\r\n\r\nThis PR implements deduplication of package transactions that have the same txid as transaction(s) in the mempool. In that sense, our policy changes because it is no longer all-or-nothing. I would still call it \"atomic\" because it either decides (1) all transactions may be submitted to mempool or (2) there should be no change to the mempool. Importantly, we deduplicate by txid rather than wtxid - a transaction with the same nonwitness data should be sufficient to validate the descendants in the package.\r\n\r\nI consider this a prerequisite to _submission_ of packages to mempool, because it would be a rather annoying limitation if we couldn't tell that the package was already partially in the mempool. It could also be problematic if someone could submit the transaction with a different witness to cause the package to be rejected.",
          "user": {
            "login": "glozow",
            "id": 25183001,
            "node_id": "MDQ6VXNlcjI1MTgzMDAx",
            "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/glozow",
            "html_url": "https://github.com/glozow",
            "followers_url": "https://api.github.com/users/glozow/followers",
            "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
            "organizations_url": "https://api.github.com/users/glozow/orgs",
            "repos_url": "https://api.github.com/users/glozow/repos",
            "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/glozow/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 118379652,
              "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
              "name": "Validation",
              "color": "6060aa",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 9,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22252",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/22252",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/22252.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/22252.patch"
          },
          "closed_at": "2021-08-23T10:01:04Z",
          "created_at": "2021-06-15T14:23:08Z",
          "updated_at": "2022-08-23T12:58:48Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 685764740,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Njg1NzY0NzQw",
      "url": null,
      "actor": null,
      "commit_id": "ba99f37a51a277284c060e38651071d39dd9b42b",
      "commit_url": null,
      "created_at": null,
      "author_association": "NONE",
      "body": "",
      "user": {
        "login": "Subawit",
        "id": 83602467,
        "node_id": "MDQ6VXNlcjgzNjAyNDY3",
        "avatar_url": "https://avatars.githubusercontent.com/u/83602467?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Subawit",
        "html_url": "https://github.com/Subawit",
        "followers_url": "https://api.github.com/users/Subawit/followers",
        "following_url": "https://api.github.com/users/Subawit/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Subawit/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Subawit/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Subawit/subscriptions",
        "organizations_url": "https://api.github.com/users/Subawit/orgs",
        "repos_url": "https://api.github.com/users/Subawit/repos",
        "events_url": "https://api.github.com/users/Subawit/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Subawit/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#pullrequestreview-685764740",
      "submitted_at": "2021-06-17T00:17:37Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22261"
    },
    {
      "event": "commented",
      "id": 863131368,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg2MzEzMTM2OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/863131368",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-17T10:40:35Z",
      "updated_at": "2021-06-17T10:40:35Z",
      "author_association": "MEMBER",
      "body": "@duncandean I agree a test would be very useful here. If you want to have a go at writing it, please go ahead and I can add it to this PR. If not, I'll try to write one next week.",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#issuecomment-863131368",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22261"
    },
    {
      "event": "mentioned",
      "id": 4903407907,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDkwMzQwNzkwNw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4903407907",
      "actor": {
        "login": "dunxen",
        "id": 3072149,
        "node_id": "MDQ6VXNlcjMwNzIxNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3072149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dunxen",
        "html_url": "https://github.com/dunxen",
        "followers_url": "https://api.github.com/users/dunxen/followers",
        "following_url": "https://api.github.com/users/dunxen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dunxen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dunxen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dunxen/subscriptions",
        "organizations_url": "https://api.github.com/users/dunxen/orgs",
        "repos_url": "https://api.github.com/users/dunxen/repos",
        "events_url": "https://api.github.com/users/dunxen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dunxen/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-17T10:40:36Z"
    },
    {
      "event": "subscribed",
      "id": 4903407909,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ5MDM0MDc5MDk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4903407909",
      "actor": {
        "login": "dunxen",
        "id": 3072149,
        "node_id": "MDQ6VXNlcjMwNzIxNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3072149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dunxen",
        "html_url": "https://github.com/dunxen",
        "followers_url": "https://api.github.com/users/dunxen/followers",
        "following_url": "https://api.github.com/users/dunxen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dunxen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dunxen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dunxen/subscriptions",
        "organizations_url": "https://api.github.com/users/dunxen/orgs",
        "repos_url": "https://api.github.com/users/dunxen/repos",
        "events_url": "https://api.github.com/users/dunxen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dunxen/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-17T10:40:36Z"
    },
    {
      "event": "commented",
      "id": 863200393,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg2MzIwMDM5Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/863200393",
      "actor": {
        "login": "dunxen",
        "id": 3072149,
        "node_id": "MDQ6VXNlcjMwNzIxNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3072149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dunxen",
        "html_url": "https://github.com/dunxen",
        "followers_url": "https://api.github.com/users/dunxen/followers",
        "following_url": "https://api.github.com/users/dunxen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dunxen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dunxen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dunxen/subscriptions",
        "organizations_url": "https://api.github.com/users/dunxen/orgs",
        "repos_url": "https://api.github.com/users/dunxen/repos",
        "events_url": "https://api.github.com/users/dunxen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dunxen/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-17T12:33:50Z",
      "updated_at": "2021-06-17T12:33:50Z",
      "author_association": "CONTRIBUTOR",
      "body": "Cool! Working on it now. I've got `1` down, just busy with `2`.",
      "user": {
        "login": "dunxen",
        "id": 3072149,
        "node_id": "MDQ6VXNlcjMwNzIxNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3072149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dunxen",
        "html_url": "https://github.com/dunxen",
        "followers_url": "https://api.github.com/users/dunxen/followers",
        "following_url": "https://api.github.com/users/dunxen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dunxen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dunxen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dunxen/subscriptions",
        "organizations_url": "https://api.github.com/users/dunxen/orgs",
        "repos_url": "https://api.github.com/users/dunxen/repos",
        "events_url": "https://api.github.com/users/dunxen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dunxen/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#issuecomment-863200393",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22261"
    },
    {
      "event": "reviewed",
      "id": 686296995,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Njg2Mjk2OTk1",
      "url": null,
      "actor": null,
      "commit_id": "ba99f37a51a277284c060e38651071d39dd9b42b",
      "commit_url": null,
      "created_at": null,
      "author_association": "NONE",
      "body": "> ",
      "user": {
        "login": "Subawit",
        "id": 83602467,
        "node_id": "MDQ6VXNlcjgzNjAyNDY3",
        "avatar_url": "https://avatars.githubusercontent.com/u/83602467?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Subawit",
        "html_url": "https://github.com/Subawit",
        "followers_url": "https://api.github.com/users/Subawit/followers",
        "following_url": "https://api.github.com/users/Subawit/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Subawit/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Subawit/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Subawit/subscriptions",
        "organizations_url": "https://api.github.com/users/Subawit/orgs",
        "repos_url": "https://api.github.com/users/Subawit/repos",
        "events_url": "https://api.github.com/users/Subawit/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Subawit/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#pullrequestreview-686296995",
      "submitted_at": "2021-06-17T13:18:36Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22261"
    },
    {
      "event": "reviewed",
      "id": 686568353,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Njg2NTY4MzUz",
      "url": null,
      "actor": null,
      "commit_id": "14cf5dec17af9cc57a85dfe4910f30d8e17581d8",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept ACK. Nice, clean  fixes. The same-txid-different-wtxid bug doesn't seem terrible since nothing would happen when the wtxid isn't found in mempool, but `ResendWalletTransactions` re-adding a txid to the unbroadcast set (and causing continuous rebroadcast after initial broadcast was already successful) is a privacy leak.\r\n\r\nI was able to reproduce the bugs on [this branch](https://github.com/glozow/bitcoin/tree/test-22261) - I conveniently had a same-txid-different-wtxid test on hand that made it easy to write.",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#pullrequestreview-686568353",
      "submitted_at": "2021-06-17T16:50:21Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22261"
    },
    {
      "event": "commented",
      "id": 863906917,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg2MzkwNjkxNw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/863906917",
      "actor": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-18T09:41:16Z",
      "updated_at": "2021-06-18T09:41:16Z",
      "author_association": "MEMBER",
      "body": "Concept ACK. Nice catch! Looking forward to a test :)\r\n",
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#issuecomment-863906917",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22261"
    },
    {
      "event": "commented",
      "id": 863907149,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg2MzkwNzE0OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/863907149",
      "actor": {
        "login": "dunxen",
        "id": 3072149,
        "node_id": "MDQ6VXNlcjMwNzIxNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3072149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dunxen",
        "html_url": "https://github.com/dunxen",
        "followers_url": "https://api.github.com/users/dunxen/followers",
        "following_url": "https://api.github.com/users/dunxen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dunxen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dunxen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dunxen/subscriptions",
        "organizations_url": "https://api.github.com/users/dunxen/orgs",
        "repos_url": "https://api.github.com/users/dunxen/repos",
        "events_url": "https://api.github.com/users/dunxen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dunxen/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-18T09:41:39Z",
      "updated_at": "2021-06-18T09:41:39Z",
      "author_association": "CONTRIBUTOR",
      "body": "> I was able to reproduce the bugs on [this branch](https://github.com/glozow/bitcoin/tree/test-22261) - I conveniently had a same-txid-different-wtxid test on hand that made it easy to write.\r\n\r\nHey @glozow, the first bug was straightforward enough to write a test for. I've been struggling a bit for the same-txid-different-wtxid bug. I was able to construct a new tx with same txid and different wtxid, but I'm just having trouble with the actual checks for relay. If you have that test handy, then maybe you could add it to this PR? :) I'd be curious to see what I should be doing.",
      "user": {
        "login": "dunxen",
        "id": 3072149,
        "node_id": "MDQ6VXNlcjMwNzIxNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3072149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dunxen",
        "html_url": "https://github.com/dunxen",
        "followers_url": "https://api.github.com/users/dunxen/followers",
        "following_url": "https://api.github.com/users/dunxen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dunxen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dunxen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dunxen/subscriptions",
        "organizations_url": "https://api.github.com/users/dunxen/orgs",
        "repos_url": "https://api.github.com/users/dunxen/repos",
        "events_url": "https://api.github.com/users/dunxen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dunxen/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#issuecomment-863907149",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22261"
    },
    {
      "event": "mentioned",
      "id": 4908824612,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDkwODgyNDYxMg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4908824612",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-18T09:41:39Z"
    },
    {
      "event": "subscribed",
      "id": 4908824615,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ5MDg4MjQ2MTU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4908824615",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-18T09:41:39Z"
    },
    {
      "event": "commented",
      "id": 863971587,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg2Mzk3MTU4Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/863971587",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-18T11:31:33Z",
      "updated_at": "2021-06-18T11:31:33Z",
      "author_association": "MEMBER",
      "body": "Hi @duncandean. I think the following test should demonstrate the new functionality of _Allow rebroadcast for same-txid-different-wtxid transactions_:\r\n\r\n- submit tx A to node's mempool\r\n- Make new wtxidrelay P2PConnection to node\r\n- submit tx A' to node's mempool\r\n- wait for node to announce the wtxid from A to P2PConnection\r\n\r\nBefore the fix, the P2PConnection will never receive an announcement for the transaction. After the fix, it'll receive an announcement for the wtxid from A.\r\n\r\n@glozow's branch gives you the code you need to construct A and A'.",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#issuecomment-863971587",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22261"
    },
    {
      "event": "mentioned",
      "id": 4909313797,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDkwOTMxMzc5Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4909313797",
      "actor": {
        "login": "dunxen",
        "id": 3072149,
        "node_id": "MDQ6VXNlcjMwNzIxNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3072149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dunxen",
        "html_url": "https://github.com/dunxen",
        "followers_url": "https://api.github.com/users/dunxen/followers",
        "following_url": "https://api.github.com/users/dunxen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dunxen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dunxen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dunxen/subscriptions",
        "organizations_url": "https://api.github.com/users/dunxen/orgs",
        "repos_url": "https://api.github.com/users/dunxen/repos",
        "events_url": "https://api.github.com/users/dunxen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dunxen/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-18T11:31:35Z"
    },
    {
      "event": "subscribed",
      "id": 4909313801,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ5MDkzMTM4MDE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4909313801",
      "actor": {
        "login": "dunxen",
        "id": 3072149,
        "node_id": "MDQ6VXNlcjMwNzIxNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3072149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dunxen",
        "html_url": "https://github.com/dunxen",
        "followers_url": "https://api.github.com/users/dunxen/followers",
        "following_url": "https://api.github.com/users/dunxen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dunxen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dunxen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dunxen/subscriptions",
        "organizations_url": "https://api.github.com/users/dunxen/orgs",
        "repos_url": "https://api.github.com/users/dunxen/repos",
        "events_url": "https://api.github.com/users/dunxen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dunxen/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-18T11:31:35Z"
    },
    {
      "event": "mentioned",
      "id": 4909313810,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDkwOTMxMzgxMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4909313810",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-18T11:31:35Z"
    },
    {
      "event": "subscribed",
      "id": 4909313816,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ5MDkzMTM4MTY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4909313816",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-18T11:31:35Z"
    },
    {
      "event": "commented",
      "id": 864015702,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg2NDAxNTcwMg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/864015702",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-18T12:52:13Z",
      "updated_at": "2021-06-18T12:52:13Z",
      "author_association": "MEMBER",
      "body": "@duncandean [this commit](https://github.com/glozow/bitcoin/commit/5069a834ed06f2df5f43c416dc5a501c3b010b33) implements the test jnewbery described - feel free to put that on top of the same-txid-diff-wtxid code you've written.",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#issuecomment-864015702",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22261"
    },
    {
      "event": "mentioned",
      "id": 4909656728,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDkwOTY1NjcyOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4909656728",
      "actor": {
        "login": "dunxen",
        "id": 3072149,
        "node_id": "MDQ6VXNlcjMwNzIxNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3072149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dunxen",
        "html_url": "https://github.com/dunxen",
        "followers_url": "https://api.github.com/users/dunxen/followers",
        "following_url": "https://api.github.com/users/dunxen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dunxen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dunxen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dunxen/subscriptions",
        "organizations_url": "https://api.github.com/users/dunxen/orgs",
        "repos_url": "https://api.github.com/users/dunxen/repos",
        "events_url": "https://api.github.com/users/dunxen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dunxen/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-18T12:52:14Z"
    },
    {
      "event": "subscribed",
      "id": 4909656734,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ5MDk2NTY3MzQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4909656734",
      "actor": {
        "login": "dunxen",
        "id": 3072149,
        "node_id": "MDQ6VXNlcjMwNzIxNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3072149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dunxen",
        "html_url": "https://github.com/dunxen",
        "followers_url": "https://api.github.com/users/dunxen/followers",
        "following_url": "https://api.github.com/users/dunxen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dunxen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dunxen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dunxen/subscriptions",
        "organizations_url": "https://api.github.com/users/dunxen/orgs",
        "repos_url": "https://api.github.com/users/dunxen/repos",
        "events_url": "https://api.github.com/users/dunxen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dunxen/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-18T12:52:14Z"
    },
    {
      "event": "commented",
      "id": 864036125,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg2NDAzNjEyNQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/864036125",
      "actor": {
        "login": "dunxen",
        "id": 3072149,
        "node_id": "MDQ6VXNlcjMwNzIxNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3072149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dunxen",
        "html_url": "https://github.com/dunxen",
        "followers_url": "https://api.github.com/users/dunxen/followers",
        "following_url": "https://api.github.com/users/dunxen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dunxen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dunxen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dunxen/subscriptions",
        "organizations_url": "https://api.github.com/users/dunxen/orgs",
        "repos_url": "https://api.github.com/users/dunxen/repos",
        "events_url": "https://api.github.com/users/dunxen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dunxen/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-18T13:22:50Z",
      "updated_at": "2021-06-18T13:22:50Z",
      "author_association": "CONTRIBUTOR",
      "body": "> @duncandean [this commit](https://github.com/glozow/bitcoin/commit/5069a834ed06f2df5f43c416dc5a501c3b010b33) implements the test jnewbery described - feel free to put that on top of the same-txid-diff-wtxid code you've written.\r\n\r\n@glozow Ah, I actually got pretty close to that commit based on the previous work on your branch :D So would be good just to use your commit probably.\r\n\r\nFor `1` I think it was as simple as adding the following to the end of [`test_broadcast()`](https://github.com/bitcoin/bitcoin/blob/7fcf53f7b4524572d1d0c9a5fdc388e87eb02416/test/functional/mempool_unbroadcast.py#L30) in `mempool_unbroadcast.py`:\r\n\r\n<details>\r\n<summary></summary>\r\n\r\n```python\r\nself.log.info(\"Rebroadcast transaction & ensure it is not added to unbroadcast set when already in mempool\")\r\nrpc_tx_hsh = node.sendrawtransaction(txFS[\"hex\"])\r\nmempool = node.getrawmempool(True)\r\nassert rpc_tx_hsh in mempool\r\nfor tx in mempool:\r\n    assert_equal(mempool[tx]['unbroadcast'], False)\r\n```\r\n</details>\r\n\r\nIt fails before the fix, with the transaction being added to the unbroadcast set, and it passes after the fix.",
      "user": {
        "login": "dunxen",
        "id": 3072149,
        "node_id": "MDQ6VXNlcjMwNzIxNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3072149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dunxen",
        "html_url": "https://github.com/dunxen",
        "followers_url": "https://api.github.com/users/dunxen/followers",
        "following_url": "https://api.github.com/users/dunxen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dunxen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dunxen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dunxen/subscriptions",
        "organizations_url": "https://api.github.com/users/dunxen/orgs",
        "repos_url": "https://api.github.com/users/dunxen/repos",
        "events_url": "https://api.github.com/users/dunxen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dunxen/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#issuecomment-864036125",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22261"
    },
    {
      "event": "mentioned",
      "id": 4909806056,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDkwOTgwNjA1Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4909806056",
      "actor": {
        "login": "dunxen",
        "id": 3072149,
        "node_id": "MDQ6VXNlcjMwNzIxNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3072149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dunxen",
        "html_url": "https://github.com/dunxen",
        "followers_url": "https://api.github.com/users/dunxen/followers",
        "following_url": "https://api.github.com/users/dunxen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dunxen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dunxen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dunxen/subscriptions",
        "organizations_url": "https://api.github.com/users/dunxen/orgs",
        "repos_url": "https://api.github.com/users/dunxen/repos",
        "events_url": "https://api.github.com/users/dunxen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dunxen/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-18T13:22:50Z"
    },
    {
      "event": "subscribed",
      "id": 4909806061,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ5MDk4MDYwNjE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4909806061",
      "actor": {
        "login": "dunxen",
        "id": 3072149,
        "node_id": "MDQ6VXNlcjMwNzIxNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3072149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dunxen",
        "html_url": "https://github.com/dunxen",
        "followers_url": "https://api.github.com/users/dunxen/followers",
        "following_url": "https://api.github.com/users/dunxen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dunxen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dunxen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dunxen/subscriptions",
        "organizations_url": "https://api.github.com/users/dunxen/orgs",
        "repos_url": "https://api.github.com/users/dunxen/repos",
        "events_url": "https://api.github.com/users/dunxen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dunxen/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-18T13:22:50Z"
    },
    {
      "event": "mentioned",
      "id": 4909806067,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDkwOTgwNjA2Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4909806067",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-18T13:22:50Z"
    },
    {
      "event": "subscribed",
      "id": 4909806072,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ5MDk4MDYwNzI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4909806072",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-18T13:22:50Z"
    },
    {
      "event": "commented",
      "id": 864183446,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg2NDE4MzQ0Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/864183446",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-18T17:33:41Z",
      "updated_at": "2021-06-18T17:33:41Z",
      "author_association": "MEMBER",
      "body": "ACK ba99f37a51a277284c060e38651071d39dd9b42b",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#issuecomment-864183446",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22261"
    },
    {
      "event": "labeled",
      "id": 4915305401,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDQ5MTUzMDU0MDE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4915305401",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-21T08:22:13Z",
      "label": {
        "name": "Review club",
        "color": "0052cc"
      }
    },
    {
      "event": "reviewed",
      "id": 688861153,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Njg4ODYxMTUz",
      "url": null,
      "actor": null,
      "commit_id": "ba99f37a51a277284c060e38651071d39dd9b42b",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK https://github.com/bitcoin/bitcoin/pull/22261/commits/ba99f37a51a277284c060e38651071d39dd9b42b",
      "user": {
        "login": "lsilva01",
        "id": 84432093,
        "node_id": "MDQ6VXNlcjg0NDMyMDkz",
        "avatar_url": "https://avatars.githubusercontent.com/u/84432093?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/lsilva01",
        "html_url": "https://github.com/lsilva01",
        "followers_url": "https://api.github.com/users/lsilva01/followers",
        "following_url": "https://api.github.com/users/lsilva01/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/lsilva01/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/lsilva01/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/lsilva01/subscriptions",
        "organizations_url": "https://api.github.com/users/lsilva01/orgs",
        "repos_url": "https://api.github.com/users/lsilva01/repos",
        "events_url": "https://api.github.com/users/lsilva01/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/lsilva01/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#pullrequestreview-688861153",
      "submitted_at": "2021-06-21T21:06:17Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22261"
    },
    {
      "event": "commented",
      "id": 867447558,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg2NzQ0NzU1OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/867447558",
      "actor": {
        "login": "michaelfolkson",
        "id": 16323900,
        "node_id": "MDQ6VXNlcjE2MzIzOTAw",
        "avatar_url": "https://avatars.githubusercontent.com/u/16323900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/michaelfolkson",
        "html_url": "https://github.com/michaelfolkson",
        "followers_url": "https://api.github.com/users/michaelfolkson/followers",
        "following_url": "https://api.github.com/users/michaelfolkson/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/michaelfolkson/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/michaelfolkson/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/michaelfolkson/subscriptions",
        "organizations_url": "https://api.github.com/users/michaelfolkson/orgs",
        "repos_url": "https://api.github.com/users/michaelfolkson/repos",
        "events_url": "https://api.github.com/users/michaelfolkson/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/michaelfolkson/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-24T08:31:06Z",
      "updated_at": "2021-06-24T08:31:06Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK, Approach ACK.\r\n\r\nTook me a while to understand the two problems that were being fixed but I got there eventually in the Bitcoin Core PR review [club](https://bitcoincore.reviews/22261). Essentially 1) is unnecessary relaying and 2) causes an increased number of relay failures. \r\n\r\nSkimmed code, test(s) sounds like they are on the way.",
      "user": {
        "login": "michaelfolkson",
        "id": 16323900,
        "node_id": "MDQ6VXNlcjE2MzIzOTAw",
        "avatar_url": "https://avatars.githubusercontent.com/u/16323900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/michaelfolkson",
        "html_url": "https://github.com/michaelfolkson",
        "followers_url": "https://api.github.com/users/michaelfolkson/followers",
        "following_url": "https://api.github.com/users/michaelfolkson/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/michaelfolkson/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/michaelfolkson/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/michaelfolkson/subscriptions",
        "organizations_url": "https://api.github.com/users/michaelfolkson/orgs",
        "repos_url": "https://api.github.com/users/michaelfolkson/repos",
        "events_url": "https://api.github.com/users/michaelfolkson/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/michaelfolkson/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#issuecomment-867447558",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22261"
    },
    {
      "event": "reviewed",
      "id": 698669875,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Njk4NjY5ODc1",
      "url": null,
      "actor": null,
      "commit_id": "ba99f37a51a277284c060e38651071d39dd9b42b",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept and approach ACK ba99f37a51a277284c060e38651071d39dd9b42b\r\n\r\n> Took me a while to understand the two problems that were being fixed but I got there eventually in the Bitcoin Core PR review [club](https://bitcoincore.reviews/22261).\r\n\r\nSame here! ;)\r\nIf anyone isn't familiar with the concept of the unbroadcast set yet (like me) I can warmly recommend studying the review club log for #18038 (https://bitcoincore.reviews/18038) first in preparation before grasping the one for this PR.\r\n",
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#pullrequestreview-698669875",
      "submitted_at": "2021-07-04T12:28:33Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22261"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4987993788,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDk4Nzk5Mzc4OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4987993788",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-07T09:35:41Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4988003819,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDk4ODAwMzgxOQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4988003819",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-07T09:37:38Z"
    },
    {
      "event": "commented",
      "id": 875453104,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg3NTQ1MzEwNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/875453104",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-07T09:37:56Z",
      "updated_at": "2021-07-07T09:37:56Z",
      "author_association": "MEMBER",
      "body": "Thanks for the tests @duncandean and @glozow. I've added them as separate commits, and verified that they both fail without the fixes and pass with the fixes.\r\n\r\nAlso rebased on latest master.",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#issuecomment-875453104",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22261"
    },
    {
      "event": "mentioned",
      "id": 4988005199,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDk4ODAwNTE5OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4988005199",
      "actor": {
        "login": "dunxen",
        "id": 3072149,
        "node_id": "MDQ6VXNlcjMwNzIxNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3072149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dunxen",
        "html_url": "https://github.com/dunxen",
        "followers_url": "https://api.github.com/users/dunxen/followers",
        "following_url": "https://api.github.com/users/dunxen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dunxen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dunxen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dunxen/subscriptions",
        "organizations_url": "https://api.github.com/users/dunxen/orgs",
        "repos_url": "https://api.github.com/users/dunxen/repos",
        "events_url": "https://api.github.com/users/dunxen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dunxen/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-07T09:37:56Z"
    },
    {
      "event": "subscribed",
      "id": 4988005203,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ5ODgwMDUyMDM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4988005203",
      "actor": {
        "login": "dunxen",
        "id": 3072149,
        "node_id": "MDQ6VXNlcjMwNzIxNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3072149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dunxen",
        "html_url": "https://github.com/dunxen",
        "followers_url": "https://api.github.com/users/dunxen/followers",
        "following_url": "https://api.github.com/users/dunxen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dunxen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dunxen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dunxen/subscriptions",
        "organizations_url": "https://api.github.com/users/dunxen/orgs",
        "repos_url": "https://api.github.com/users/dunxen/repos",
        "events_url": "https://api.github.com/users/dunxen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dunxen/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-07T09:37:56Z"
    },
    {
      "event": "mentioned",
      "id": 4988005211,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDk4ODAwNTIxMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4988005211",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-07T09:37:56Z"
    },
    {
      "event": "subscribed",
      "id": 4988005216,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ5ODgwMDUyMTY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4988005216",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-07T09:37:56Z"
    },
    {
      "event": "reviewed",
      "id": 700805497,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzAwODA1NDk3",
      "url": null,
      "actor": null,
      "commit_id": "b8a976f3945283c26d1e206eabf181305d407c8a",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK b8a976f",
      "user": {
        "login": "dunxen",
        "id": 3072149,
        "node_id": "MDQ6VXNlcjMwNzIxNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3072149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dunxen",
        "html_url": "https://github.com/dunxen",
        "followers_url": "https://api.github.com/users/dunxen/followers",
        "following_url": "https://api.github.com/users/dunxen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dunxen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dunxen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dunxen/subscriptions",
        "organizations_url": "https://api.github.com/users/dunxen/orgs",
        "repos_url": "https://api.github.com/users/dunxen/repos",
        "events_url": "https://api.github.com/users/dunxen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dunxen/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#pullrequestreview-700805497",
      "submitted_at": "2021-07-07T09:50:45Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22261"
    },
    {
      "event": "commented",
      "id": 875523332,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg3NTUyMzMzMg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/875523332",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-07T11:24:07Z",
      "updated_at": "2021-07-07T11:24:07Z",
      "author_association": "MEMBER",
      "body": "This has a small conflict in the tests with #22253. @theStack @duncandean @lsilva01 do you mind looking at that PR first? It's easy enough for me to rebase this on that PR once it's been merged.",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#issuecomment-875523332",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22261"
    },
    {
      "event": "mentioned",
      "id": 4988536403,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDk4ODUzNjQwMw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4988536403",
      "actor": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-07T11:24:07Z"
    },
    {
      "event": "subscribed",
      "id": 4988536408,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ5ODg1MzY0MDg=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4988536408",
      "actor": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-07T11:24:07Z"
    },
    {
      "event": "mentioned",
      "id": 4988536416,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDk4ODUzNjQxNg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4988536416",
      "actor": {
        "login": "dunxen",
        "id": 3072149,
        "node_id": "MDQ6VXNlcjMwNzIxNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3072149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dunxen",
        "html_url": "https://github.com/dunxen",
        "followers_url": "https://api.github.com/users/dunxen/followers",
        "following_url": "https://api.github.com/users/dunxen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dunxen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dunxen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dunxen/subscriptions",
        "organizations_url": "https://api.github.com/users/dunxen/orgs",
        "repos_url": "https://api.github.com/users/dunxen/repos",
        "events_url": "https://api.github.com/users/dunxen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dunxen/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-07T11:24:07Z"
    },
    {
      "event": "subscribed",
      "id": 4988536419,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ5ODg1MzY0MTk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4988536419",
      "actor": {
        "login": "dunxen",
        "id": 3072149,
        "node_id": "MDQ6VXNlcjMwNzIxNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3072149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dunxen",
        "html_url": "https://github.com/dunxen",
        "followers_url": "https://api.github.com/users/dunxen/followers",
        "following_url": "https://api.github.com/users/dunxen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dunxen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dunxen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dunxen/subscriptions",
        "organizations_url": "https://api.github.com/users/dunxen/orgs",
        "repos_url": "https://api.github.com/users/dunxen/repos",
        "events_url": "https://api.github.com/users/dunxen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dunxen/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-07T11:24:07Z"
    },
    {
      "event": "mentioned",
      "id": 4988536426,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDk4ODUzNjQyNg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4988536426",
      "actor": {
        "login": "lsilva01",
        "id": 84432093,
        "node_id": "MDQ6VXNlcjg0NDMyMDkz",
        "avatar_url": "https://avatars.githubusercontent.com/u/84432093?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/lsilva01",
        "html_url": "https://github.com/lsilva01",
        "followers_url": "https://api.github.com/users/lsilva01/followers",
        "following_url": "https://api.github.com/users/lsilva01/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/lsilva01/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/lsilva01/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/lsilva01/subscriptions",
        "organizations_url": "https://api.github.com/users/lsilva01/orgs",
        "repos_url": "https://api.github.com/users/lsilva01/repos",
        "events_url": "https://api.github.com/users/lsilva01/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/lsilva01/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-07T11:24:07Z"
    },
    {
      "event": "subscribed",
      "id": 4988536429,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ5ODg1MzY0Mjk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4988536429",
      "actor": {
        "login": "lsilva01",
        "id": 84432093,
        "node_id": "MDQ6VXNlcjg0NDMyMDkz",
        "avatar_url": "https://avatars.githubusercontent.com/u/84432093?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/lsilva01",
        "html_url": "https://github.com/lsilva01",
        "followers_url": "https://api.github.com/users/lsilva01/followers",
        "following_url": "https://api.github.com/users/lsilva01/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/lsilva01/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/lsilva01/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/lsilva01/subscriptions",
        "organizations_url": "https://api.github.com/users/lsilva01/orgs",
        "repos_url": "https://api.github.com/users/lsilva01/repos",
        "events_url": "https://api.github.com/users/lsilva01/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/lsilva01/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-07T11:24:07Z"
    },
    {
      "event": "commented",
      "id": 875526011,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg3NTUyNjAxMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/875526011",
      "actor": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-07T11:28:33Z",
      "updated_at": "2021-07-07T11:28:33Z",
      "author_association": "MEMBER",
      "body": "ACK b8a976f3945283c26d1e206eabf181305d407c8a\r\n\r\nI'm wondering if this is a good opportunity to document same-txid-different-witness somewhere in the codebase?\r\nI can totally imagine some wallet or L2 protocol attempt to submit these kinds of transactions in a non-malicious way? And at least what we could do is to clearly set up expectations.\r\nAt the same time, not even sure what's the best place to have this knowledge.\r\n",
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#issuecomment-875526011",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22261"
    },
    {
      "event": "commented",
      "id": 875527858,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg3NTUyNzg1OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/875527858",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-07T11:31:43Z",
      "updated_at": "2021-07-07T11:31:43Z",
      "author_association": "MEMBER",
      "body": "@naumenkogs see #22253?",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#issuecomment-875527858",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22261"
    },
    {
      "event": "mentioned",
      "id": 4988571895,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDk4ODU3MTg5NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4988571895",
      "actor": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-07T11:31:43Z"
    },
    {
      "event": "subscribed",
      "id": 4988571896,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ5ODg1NzE4OTY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4988571896",
      "actor": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-07T11:31:43Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyODM3YTlmMWVhYTJjNmJmNDAyZDFkOTg5MWQ5YWE4NGM0YTU2MDMz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2837a9f1eaa2c6bf402d1d9891d9aa84c4a56033",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2837a9f1eaa2c6bf402d1d9891d9aa84c4a56033",
      "tree": {
        "sha": "5e9afdc056a180a8c83377b2d6be52cb5b847e25",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5e9afdc056a180a8c83377b2d6be52cb5b847e25"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8ab0c77299a5b184a8d0edf38f26a97bf9bbed6e",
          "sha": "8ab0c77299a5b184a8d0edf38f26a97bf9bbed6e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8ab0c77299a5b184a8d0edf38f26a97bf9bbed6e"
        }
      ],
      "message": "[mempool] Only add a transaction to the unbroadcast set when it's added to the mempool\n\nCurrently, if BroadcastTransaction() is called to rebroadcast a\ntransaction (e.g. by ResendWalletTransactions()), then we add the\ntransaction to the unbroadcast set. That transaction has already been\nbroadcast in the past, so peers are unlikely to request it again,\nmeaning RemoveUnbroadcastTx() won't be called and it won't be removed\nfrom m_unbroadcast_txids.\n\nNet processing will therefore continue to attempt rebroadcast for the\ntransaction every 10-15 minutes. This will most likely continue until\nthe node connects to a new peer which hasn't yet seen the transaction\n(or perhaps indefinitely).\n\nFix by only adding the transaction to the broadcast set when it's added\nto the mempool.",
      "committer": {
        "name": "John Newbery",
        "email": "john@johnnewbery.com",
        "date": "2021-07-09T16:24:08Z"
      },
      "author": {
        "name": "John Newbery",
        "email": "john@johnnewbery.com",
        "date": "2021-06-16T09:47:56Z"
      },
      "sha": "2837a9f1eaa2c6bf402d1d9891d9aa84c4a56033"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4NDdiNmVkNDhkN2JhY2VjOTAyNDYxODkyMmU5YjMzOWQyZDk3Njc2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/847b6ed48d7bacec9024618922e9b339d2d97676",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/847b6ed48d7bacec9024618922e9b339d2d97676",
      "tree": {
        "sha": "37e799200882df94ebef0139d001bd60e1efacba",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/37e799200882df94ebef0139d001bd60e1efacba"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2837a9f1eaa2c6bf402d1d9891d9aa84c4a56033",
          "sha": "2837a9f1eaa2c6bf402d1d9891d9aa84c4a56033",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2837a9f1eaa2c6bf402d1d9891d9aa84c4a56033"
        }
      ],
      "message": "[test] Test transactions are not re-added to unbroadcast set",
      "committer": {
        "name": "John Newbery",
        "email": "john@johnnewbery.com",
        "date": "2021-07-09T16:24:08Z"
      },
      "author": {
        "name": "Duncan Dean",
        "email": "duncangleeddean@gmail.com",
        "date": "2021-07-07T09:06:27Z"
      },
      "sha": "847b6ed48d7bacec9024618922e9b339d2d97676"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjZDQ4MzcyYjY3ZDk2MWZlNjYxOTkwYTJjNmQzY2MzZDkxNDc4OTI0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cd48372b67d961fe661990a2c6d3cc3d91478924",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/cd48372b67d961fe661990a2c6d3cc3d91478924",
      "tree": {
        "sha": "b59c707f859bb7f4ae995b3b6221d21156d14902",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b59c707f859bb7f4ae995b3b6221d21156d14902"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/847b6ed48d7bacec9024618922e9b339d2d97676",
          "sha": "847b6ed48d7bacec9024618922e9b339d2d97676",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/847b6ed48d7bacec9024618922e9b339d2d97676"
        }
      ],
      "message": "[mempool] Allow rebroadcast for same-txid-different-wtxid transactions\n\nThis commit fixes some slightly unexpected behaviour when:\n\n- there is already transaction in the mempool (the \"mempool tx\")\n- BroadcastTransaction() is called for a transaction with the same txid\n  as the mempool transaction but a different witness (the \"new tx\")\n\nPrior to this commit, if BroadcastTransaction() is called with\nrelay=true, then it'll call RelayTransaction() using the txid/wtxid of\nthe new tx, not the txid/wtxid of the mempool tx. For wtxid relay peers,\nin SendMessages(), the wtxid of the new tx will be taken from\nsetInventoryTxToSend, but will then be filtered out from the vector of\nwtxids to announce, since m_mempool.info() won't find the transaction\n(the mempool contains the mempool tx, which has a different wtxid from\nthe new tx).\n\nFix this by calling RelayTransaction() with the wtxid of the mempool\ntransaction in this case.",
      "committer": {
        "name": "John Newbery",
        "email": "john@johnnewbery.com",
        "date": "2021-07-09T16:24:08Z"
      },
      "author": {
        "name": "John Newbery",
        "email": "john@johnnewbery.com",
        "date": "2021-06-16T09:56:07Z"
      },
      "sha": "cd48372b67d961fe661990a2c6d3cc3d91478924"
    },
    {
      "event": "labeled",
      "id": 5001323855,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDUwMDEzMjM4NTU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5001323855",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-09T16:41:38Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3MjgyZDRjMDM2M2FiNTE1MmJhYTM0YWY2MjZjYjQ5YWZiZmRkYzMy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7282d4c0363ab5152baa34af626cb49afbfddc32",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/7282d4c0363ab5152baa34af626cb49afbfddc32",
      "tree": {
        "sha": "39b5194063a24e608c5bd7a817957aac7045a3f9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/39b5194063a24e608c5bd7a817957aac7045a3f9"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cd48372b67d961fe661990a2c6d3cc3d91478924",
          "sha": "cd48372b67d961fe661990a2c6d3cc3d91478924",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/cd48372b67d961fe661990a2c6d3cc3d91478924"
        }
      ],
      "message": "[test] Allow rebroadcast for same-txid-different-wtxid transactions\n\nCo-authored-by: John Newbery <john@johnnewbery.com>",
      "committer": {
        "name": "John Newbery",
        "email": "john@johnnewbery.com",
        "date": "2021-07-09T17:21:34Z"
      },
      "author": {
        "name": "glozow",
        "email": "gzhao408@berkeley.edu",
        "date": "2021-06-11T13:49:19Z"
      },
      "sha": "7282d4c0363ab5152baa34af626cb49afbfddc32"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1YTc3YWJkNGU2NTc0NTg4NTI4NzVhMDc2OTI4OTg5ODJmNGIxZGI1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5a77abd4e657458852875a07692898982f4b1db5",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/5a77abd4e657458852875a07692898982f4b1db5",
      "tree": {
        "sha": "b8b971916fb2b7eeacf8d74b4fc4e054269eb7fe",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b8b971916fb2b7eeacf8d74b4fc4e054269eb7fe"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7282d4c0363ab5152baa34af626cb49afbfddc32",
          "sha": "7282d4c0363ab5152baa34af626cb49afbfddc32",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/7282d4c0363ab5152baa34af626cb49afbfddc32"
        }
      ],
      "message": "[style] Clean up BroadcastTransaction()",
      "committer": {
        "name": "John Newbery",
        "email": "john@johnnewbery.com",
        "date": "2021-07-09T17:21:36Z"
      },
      "author": {
        "name": "John Newbery",
        "email": "john@johnnewbery.com",
        "date": "2021-06-16T11:02:00Z"
      },
      "sha": "5a77abd4e657458852875a07692898982f4b1db5"
    },
    {
      "event": "commented",
      "id": 877339000,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg3NzMzOTAwMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/877339000",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-09T17:21:52Z",
      "updated_at": "2021-07-09T17:21:52Z",
      "author_association": "MEMBER",
      "body": "Rebased. This is now ready for review again!",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#issuecomment-877339000",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22261"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 5001485622,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NTAwMTQ4NTYyMg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5001485622",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-09T17:22:02Z"
    },
    {
      "event": "unlabeled",
      "id": 5001786614,
      "node_id": "MDE0OlVubGFiZWxlZEV2ZW50NTAwMTc4NjYxNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5001786614",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-09T18:46:25Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 703351586,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzAzMzUxNTg2",
      "url": null,
      "actor": null,
      "commit_id": "5a77abd4e657458852875a07692898982f4b1db5",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "re-ACK 5a77abd4e657458852875a07692898982f4b1db5\r\n\r\nVerified via `git range-diff ba99f37a...5a77abd4` that the only change since my last ACK was adding two tests (one for each fix), which LGTM. Also tried running them in the current master branch and as expected, they failed.",
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#pullrequestreview-703351586",
      "submitted_at": "2021-07-09T19:53:27Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22261"
    },
    {
      "event": "reviewed",
      "id": 703423492,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzAzNDIzNDky",
      "url": null,
      "actor": null,
      "commit_id": "5a77abd4e657458852875a07692898982f4b1db5",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "re-ACK https://github.com/bitcoin/bitcoin/pull/22261/commits/5a77abd4e657458852875a07692898982f4b1db5\r\n\r\nTested on Ubuntu 20.04.",
      "user": {
        "login": "lsilva01",
        "id": 84432093,
        "node_id": "MDQ6VXNlcjg0NDMyMDkz",
        "avatar_url": "https://avatars.githubusercontent.com/u/84432093?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/lsilva01",
        "html_url": "https://github.com/lsilva01",
        "followers_url": "https://api.github.com/users/lsilva01/followers",
        "following_url": "https://api.github.com/users/lsilva01/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/lsilva01/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/lsilva01/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/lsilva01/subscriptions",
        "organizations_url": "https://api.github.com/users/lsilva01/orgs",
        "repos_url": "https://api.github.com/users/lsilva01/repos",
        "events_url": "https://api.github.com/users/lsilva01/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/lsilva01/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#pullrequestreview-703423492",
      "submitted_at": "2021-07-09T22:19:13Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22261"
    },
    {
      "event": "reviewed",
      "id": 703491177,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzAzNDkxMTc3",
      "url": null,
      "actor": null,
      "commit_id": "5a77abd4e657458852875a07692898982f4b1db5",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK.\r\n\r\nI understood the unbroadcast list addition change, and seems like a good idea to only add it in list if it wasn't already in the mempool. And we are saying if it already exists in mempool then its high chance that other peer already knows about it, so no need to re-boradcast, just send it once. Is that correct? \r\n\r\nhypothetical question: Is there any chance that we might have a transaction in our local mempool but not in the network? Maybe I just added it manually and forgot to broadcast? In that case the first if clause will return true and we will not add it into unbroadcast list and just relay it once. Do you think that can cause any problem.\r\n\r\nI am more confused about the second part of the bug though and below is a detailed question.\r\n\r\nLooking forward to step through the test, and may be I will be able to understand the behavior better then.     ",
      "user": {
        "login": "rajarshimaitra",
        "id": 36541669,
        "node_id": "MDQ6VXNlcjM2NTQxNjY5",
        "avatar_url": "https://avatars.githubusercontent.com/u/36541669?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rajarshimaitra",
        "html_url": "https://github.com/rajarshimaitra",
        "followers_url": "https://api.github.com/users/rajarshimaitra/followers",
        "following_url": "https://api.github.com/users/rajarshimaitra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rajarshimaitra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rajarshimaitra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rajarshimaitra/subscriptions",
        "organizations_url": "https://api.github.com/users/rajarshimaitra/orgs",
        "repos_url": "https://api.github.com/users/rajarshimaitra/repos",
        "events_url": "https://api.github.com/users/rajarshimaitra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rajarshimaitra/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#pullrequestreview-703491177",
      "submitted_at": "2021-07-10T10:50:15Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22261"
    },
    {
      "event": "commented",
      "id": 877700423,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg3NzcwMDQyMw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/877700423",
      "actor": {
        "login": "dunxen",
        "id": 3072149,
        "node_id": "MDQ6VXNlcjMwNzIxNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3072149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dunxen",
        "html_url": "https://github.com/dunxen",
        "followers_url": "https://api.github.com/users/dunxen/followers",
        "following_url": "https://api.github.com/users/dunxen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dunxen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dunxen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dunxen/subscriptions",
        "organizations_url": "https://api.github.com/users/dunxen/orgs",
        "repos_url": "https://api.github.com/users/dunxen/repos",
        "events_url": "https://api.github.com/users/dunxen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dunxen/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-10T20:34:44Z",
      "updated_at": "2021-07-10T20:34:44Z",
      "author_association": "CONTRIBUTOR",
      "body": "reACK 5a77abd",
      "user": {
        "login": "dunxen",
        "id": 3072149,
        "node_id": "MDQ6VXNlcjMwNzIxNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3072149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dunxen",
        "html_url": "https://github.com/dunxen",
        "followers_url": "https://api.github.com/users/dunxen/followers",
        "following_url": "https://api.github.com/users/dunxen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dunxen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dunxen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dunxen/subscriptions",
        "organizations_url": "https://api.github.com/users/dunxen/orgs",
        "repos_url": "https://api.github.com/users/dunxen/repos",
        "events_url": "https://api.github.com/users/dunxen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dunxen/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#issuecomment-877700423",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22261"
    },
    {
      "event": "reviewed",
      "id": 703863702,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzAzODYzNzAy",
      "url": null,
      "actor": null,
      "commit_id": "2837a9f1eaa2c6bf402d1d9891d9aa84c4a56033",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#pullrequestreview-703863702",
      "submitted_at": "2021-07-12T08:44:51Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22261"
    },
    {
      "event": "commented",
      "id": 883324641,
      "node_id": "IC_kwDOABII5840pnbh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/883324641",
      "actor": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-20T11:41:19Z",
      "updated_at": "2021-07-20T11:41:19Z",
      "author_association": "MEMBER",
      "body": "Not 100% sure I agree with all the thoughts from [this comment](https://github.com/bitcoin/bitcoin/pull/22261#discussion_r667786642), but this fix is indeed needed.\r\nACK 5a77abd4e657458852875a07692898982f4b1db5",
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#issuecomment-883324641",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22261"
    },
    {
      "event": "merged",
      "id": 5044154354,
      "node_id": "MDExOk1lcmdlZEV2ZW50NTA0NDE1NDM1NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5044154354",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "8ed8164e6f1e85dce38ceb4f4766c21718691046",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8ed8164e6f1e85dce38ceb4f4766c21718691046",
      "created_at": "2021-07-20T12:58:53Z"
    },
    {
      "event": "closed",
      "id": 5044154369,
      "node_id": "MDExOkNsb3NlZEV2ZW50NTA0NDE1NDM2OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5044154369",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-20T12:58:53Z"
    },
    {
      "event": "head_ref_deleted",
      "id": 5044167937,
      "node_id": "MDE5OkhlYWRSZWZEZWxldGVkRXZlbnQ1MDQ0MTY3OTM3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5044167937",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-20T13:01:22Z"
    },
    {
      "event": "commented",
      "id": 883377190,
      "node_id": "IC_kwDOABII5840p0Qm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/883377190",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-20T13:06:08Z",
      "updated_at": "2021-07-20T13:06:08Z",
      "author_association": "MEMBER",
      "body": "post merge ACK 5a77abd",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#issuecomment-883377190",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22261"
    },
    {
      "event": "referenced",
      "id": 5058786365,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDUwNTg3ODYzNjU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5058786365",
      "actor": {
        "login": "sidhujag",
        "id": 6238042,
        "node_id": "MDQ6VXNlcjYyMzgwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6238042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sidhujag",
        "html_url": "https://github.com/sidhujag",
        "followers_url": "https://api.github.com/users/sidhujag/followers",
        "following_url": "https://api.github.com/users/sidhujag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sidhujag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sidhujag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sidhujag/subscriptions",
        "organizations_url": "https://api.github.com/users/sidhujag/orgs",
        "repos_url": "https://api.github.com/users/sidhujag/repos",
        "events_url": "https://api.github.com/users/sidhujag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sidhujag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "8c27083d3fc1405f52ebbe3281ddc043c62450a3",
      "commit_url": "https://api.github.com/repos/syscoin/syscoin/commits/8c27083d3fc1405f52ebbe3281ddc043c62450a3",
      "created_at": "2021-07-23T01:27:01Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "JaredTate",
        "id": 13957390,
        "node_id": "MDQ6VXNlcjEzOTU3Mzkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/13957390?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JaredTate",
        "html_url": "https://github.com/JaredTate",
        "followers_url": "https://api.github.com/users/JaredTate/followers",
        "following_url": "https://api.github.com/users/JaredTate/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JaredTate/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JaredTate/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JaredTate/subscriptions",
        "organizations_url": "https://api.github.com/users/JaredTate/orgs",
        "repos_url": "https://api.github.com/users/JaredTate/repos",
        "events_url": "https://api.github.com/users/JaredTate/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JaredTate/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-10-30T22:16:44Z",
      "updated_at": "2021-10-30T22:16:44Z",
      "source": {
        "issue": {
          "id": 1034462833,
          "node_id": "I_kwDOCMh1y849qKZx",
          "url": "https://api.github.com/repos/DigiByte-Core/digibyte/issues/77",
          "repository_url": "https://api.github.com/repos/DigiByte-Core/digibyte",
          "labels_url": "https://api.github.com/repos/DigiByte-Core/digibyte/issues/77/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/DigiByte-Core/digibyte/issues/77/comments",
          "events_url": "https://api.github.com/repos/DigiByte-Core/digibyte/issues/77/events",
          "html_url": "https://github.com/DigiByte-Core/digibyte/issues/77",
          "number": 77,
          "state": "open",
          "state_reason": null,
          "title": "WIP: Feature/8.22.0 Random Crash Bug & Missing Dandelion Relay TX Code",
          "body": "Over the course of the past few weeks I have experienced a hard to track down bug where the v8.22.0 test client https://github.com/DigiByte-Core/digibyte/pull/63 randomly crashes. I have experienced this now on OS X & Ubuntu with multiple clients. After repeating the crash enough I have been able to track it down to what I believe is dandelion related issues when the client is asked to be part of a TX relay during the stem phase of a dandelion TX from a 7.17 client. The common error repeats itself 100s of time and looks like\r\n\r\n```\r\n2021-10-23T23:39:01Z received: inv (37 bytes) peer=33\r\n2021-10-23T23:39:01Z got inv: dandeliontx ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff  new peer=33\r\n2021-10-23T23:39:01Z sending getdata (36 bytes) peer=33\r\n2021-10-23T23:39:01Z sending inv (37 bytes) peer=33\r\n2021-10-23T23:39:01Z received: getdata (36 bytes) peer=33\r\n2021-10-23T23:39:01Z ProcessMessages(getdata, 36 bytes): Exception 'CDataStream::read(): end of data: iostream error' (NSt8ios_base7failureB5cxx11E) caught\r\n2021-10-23T23:39:01Z received: inv (37 bytes) peer=33\r\n2021-10-23T23:39:01Z got inv: dandeliontx ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff  new peer=33\r\n2021-10-23T23:39:01Z sending getdata (36 bytes) peer=33\r\n2021-10-23T23:39:01Z sending inv (37 bytes) peer=33\r\n2021-10-23T23:39:01Z received: getdata (36 bytes) peer=33\r\n2021-10-23T23:39:01Z ProcessMessages(getdata, 36 bytes): Exception 'CDataStream::read(): end of data: iostream error' (NSt8ios_base7failureB5cxx11E) caught\r\n```\r\nHere is a paste bin with 5000 lines of same error from DigiHash server: https://pastebin.com/buhkFkxM\r\n\r\nBasically I have watch clients crash a dozen times or more with this being the main error message: \r\n\r\n```\r\n2021-10-23T23:39:01Z received: getdata (36 bytes) peer=33\r\n2021-10-23T23:39:01Z ProcessMessages(getdata, 36 bytes): Exception 'CDataStream::read(): end of data: iostream error' (NSt8ios_base7failureB5cxx11E) caught\r\n```\r\nOnly way to make sure you actually see that error is to have debug=1 in your digibyte.conf or -debug=1 on command line startup for digibyted or digibyte-qt.\r\n\r\nWhat didn't make sense was while running 4 instances of DigiByteD on that server, only 1 at a time would randomly crash, which makes sense considering only the client involved in the relay of a dandelion tx during stem phase would be affected.\r\n\r\nTo further track down the issue we attempted to add \"disabledandelion=1\" to the DigiByte.conf only to find that no longer worked and the code to actually disable dandelion was missing.  Upon diving further in it became apparent that RelayWalletTransaction is now SubmitMemoryPoolAndRelay.\r\n\r\nSo in new 8.22 code we have:  https://github.com/DigiByte-Core/digibyte/blob/feature/8.22.0/src/wallet/wallet.cpp#L1712\r\n\r\n```\r\nbool CWalletTx::SubmitMemoryPoolAndRelay(std::string& err_string, bool relay)\r\n{\r\n    // Can't relay if wallet is not broadcasting\r\n    if (!pwallet->GetBroadcastTransactions()) return false;\r\n    // Don't relay abandoned transactions\r\n    if (isAbandoned()) return false;\r\n    // Don't try to submit coinbase transactions. These would fail anyway but would\r\n    // cause log spam.\r\n    if (IsCoinBase()) return false;\r\n    // Don't try to submit conflicted or confirmed transactions.\r\n    if (GetDepthInMainChain() != 0) return false;\r\n\r\n    // Submit transaction to mempool for relay\r\n    pwallet->WalletLogPrintf(\"Submitting wtx %s to mempool for relay\\n\", GetHash().ToString());\r\n    // We must set fInMempool here - while it will be re-set to true by the\r\n    // entered-mempool callback, if we did not there would be a race where a\r\n    // user could call sendmoney in a loop and hit spurious out of funds errors\r\n    // because we think that this newly generated transaction's change is\r\n    // unavailable as we're not yet aware that it is in the mempool.\r\n    //\r\n    // Irrespective of the failure reason, un-marking fInMempool\r\n    // out-of-order is incorrect - it should be unmarked when\r\n    // TransactionRemovedFromMempool fires.\r\n    bool ret = pwallet->chain().broadcastTransaction(tx, pwallet->m_default_max_tx_fee, relay, err_string);\r\n    fInMempool |= ret;\r\n    return ret;\r\n}\r\n```\r\nHowever 7.17.3 code reads: https://github.com/DigiByte-Core/digibyte/blob/develop/src/wallet/wallet.cpp#L1828\r\n```\r\nbool CWalletTx::RelayWalletTransaction(CConnman* connman)\r\n{\r\n    assert(pwallet->GetBroadcastTransactions());\r\n    if (!IsCoinBase() && !isAbandoned() && GetDepthInMainChain() == 0)\r\n    {\r\n        LogPrintf(\"Inside IF Test \\n\");\r\n        CValidationState state;\r\n        /* GetDepthInMainChain already catches known conflicts. */\r\n        LogPrintf(\"Transaction in memory pool: %u, Accepted To MemoryPool: %u\", InMempool(), AcceptToMemoryPool(maxTxFee, state));\r\n        if (InMempool() || AcceptToMemoryPool(maxTxFee, state)) {\r\n            pwallet->WalletLogPrintf(\"Relaying wtx %s\\n\", GetHash().ToString());\r\n            if (connman) {\r\n                if (!gArgs.GetBoolArg(\"-disabledandelion\", DEFAULT_DISABLE_DANDELION)) {\r\n                    int64_t nCurrTime = GetTimeMicros();\r\n                    int64_t nEmbargo = 1000000*DANDELION_EMBARGO_MINIMUM+PoissonNextSend(nCurrTime, DANDELION_EMBARGO_AVG_ADD);\r\n                    connman->insertDandelionEmbargo(GetHash(),nEmbargo);\r\n                    LogPrint(BCLog::DANDELION, \"dandeliontx %s embargoed for %d seconds\\n\", GetHash().ToString(), (nEmbargo-nCurrTime)/1000000);\r\n                    CInv inv(MSG_DANDELION_TX, GetHash());\r\n                    return connman->localDandelionDestinationPushInventory(inv);\r\n                } else {\r\n                    CInv inv(MSG_TX, GetHash());\r\n                    connman->ForEachNode([&inv](CNode* pnode)\r\n                    {\r\n                        pnode->PushInventory(inv);\r\n                    });\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return false;\r\n}\r\n```\r\n\r\nSo it appears the BTC devs reworked the relay TX code which breaks our dandelion implementation in an attempt to enhance privacy as seen here: https://github.com/bitcoin/bitcoin/issues/15734\r\n\r\nAnd here: https://github.com/bitcoin/bitcoin/pull/16698\r\n\r\nThe original Dandelion implementation, which can be seen here by original developers has not been reworked since their 2018 update. The entire dandelion implementation can be seen here: https://github.com/dandelion-org/bitcoin/commit/d043e36bbe9249a78cf751c80b8d876b7d9f07ea\r\n\r\nIf we can re-enable \"disabledandelion\" this should prevent the random crash bug, however we need to fully fix the dandelion relay TX feature. All help with this is much appreciated. As stated above it has taken a couple weeks to get this far into understanding the problem, as it was not apparent at all in the beginning what was triggering random crashes.\r\n\r\nThis issue most likely will go a bit deeper, but it definitely seems to be an issue with relaying txs. I just had this error locally on my Mac client right before it crashed: \r\n\r\n```\r\n\r\n2021-10-24T16:11:53Z got inv: tx a938e42a4c436db4c0bdf0c8b6dafc05d274404451e2a12070031707eb558728  new peer=1\r\n2021-10-24T16:11:53Z Requesting tx a938e42a4c436db4c0bdf0c8b6dafc05d274404451e2a12070031707eb558728 peer=1\r\n2021-10-24T16:11:53Z sending getdata (37 bytes) peer=1\r\n2021-10-24T16:11:53Z received: tx (223 bytes) peer=1\r\n2021-10-24T16:11:53Z Enqueuing TransactionAddedToMempool: txid=a938e42a4c436db4c0bdf0c8b6dafc05d274404451e2a12070031707eb558728 wtxid=a938e42a4c436db4c0bdf0c8b6dafc05d274404451e2a12070031707eb558728\r\n2021-10-24T16:11:53Z Blockpolicy error mempool tx a938e42a4c436db4c0bdf0c8b6dafc05d274404451e2a12070031707eb558728 already being tracked\r\n2021-10-24T16:11:53Z Enqueuing TransactionAddedToMempool: txid=a938e42a4c436db4c0bdf0c8b6dafc05d274404451e2a12070031707eb558728 wtxid=a938e42a4c436db4c0bdf0c8b6dafc05d274404451e2a12070031707eb558728\r\n2021-10-24T16:11:53Z AcceptToMemoryPool: peer=1: accepted a938e42a4c436db4c0bdf0c8b6dafc05d274404451e2a12070031707eb558728 (poolsz 1 txn, 1 kB)\r\n2021-10-24T16:11:53Z TransactionAddedToMempool: txid=a938e42a4c436db4c0bdf0c8b6dafc05d274404451e2a12070031707eb558728 wtxid=a938e42a4c436db4c0bdf0c8b6dafc05d274404451e2a12070031707eb558728\r\n2021-10-24T16:11:53Z TransactionAddedToMempool: txid=a938e42a4c436db4c0bdf0c8b6dafc05d274404451e2a12070031707eb558728 wtxid=a938e42a4c436db4c0bdf0c8b6dafc05d274404451e2a12070031707eb558728\r\n2021-10-24T16:11:54Z sending inv (37 bytes) peer=14\r\n2021-10-24T16:11:54Z sending inv (37 bytes) peer=4\r\n2021-10-24T16:11:54Z received: inv (37 bytes) peer=8\r\n2021-10-24T16:11:54Z got inv: tx a938e42a4c436db4c0bdf0c8b6dafc05d274404451e2a12070031707eb558728  have peer=8\r\n2021-10-24T16:11:55Z sending inv (37 bytes) peer=13\r\n2021-10-24T16:11:55Z received: ping (8 bytes) peer=1\r\n2021-10-24T16:11:55Z sending pong (8 bytes) peer=1\r\n2021-10-24T16:11:55Z sending inv (37 bytes) peer=5\r\n2021-10-24T16:11:56Z received: inv (73 bytes) peer=10\r\n2021-10-24T16:11:56Z got inv: tx a938e42a4c436db4c0bdf0c8b6dafc05d274404451e2a12070031707eb558728  have peer=10\r\n2021-10-24T16:11:56Z got inv: tx ec35e6a0b9cf38e30ee1179b21b53b099856ce648ca1ff3eb3f24ebf9b67294f  new peer=10\r\n2021-10-24T16:11:56Z Requesting tx ec35e6a0b9cf38e30ee1179b21b53b099856ce648ca1ff3eb3f24ebf9b67294f peer=10\r\n2021-10-24T16:11:56Z sending getdata (37 bytes) peer=10\r\n2021-10-24T16:11:56Z sending inv (37 bytes) peer=9\r\n2021-10-24T16:11:56Z received: tx (259 bytes) peer=10\r\n2021-10-24T16:11:56Z Enqueuing TransactionAddedToMempool: txid=ec35e6a0b9cf38e30ee1179b21b53b099856ce648ca1ff3eb3f24ebf9b67294f wtxid=ec35e6a0b9cf38e30ee1179b21b53b099856ce648ca1ff3eb3f24ebf9b67294f\r\n2021-10-24T16:11:56Z Blockpolicy error mempool tx ec35e6a0b9cf38e30ee1179b21b53b099856ce648ca1ff3eb3f24ebf9b67294f already being tracked\r\n2021-10-24T16:11:56Z Enqueuing TransactionAddedToMempool: txid=ec35e6a0b9cf38e30ee1179b21b53b099856ce648ca1ff3eb3f24ebf9b67294f wtxid=ec35e6a0b9cf38e30ee1179b21b53b099856ce648ca1ff3eb3f24ebf9b67294f\r\n2021-10-24T16:11:56Z AcceptToMemoryPool: peer=10: accepted ec35e6a0b9cf38e30ee1179b21b53b099856ce648ca1ff3eb3f24ebf9b67294f (poolsz 2 txn, 2 kB)\r\n2021-10-24T16:11:56Z TransactionAddedToMempool: txid=ec35e6a0b9cf38e30ee1179b21b53b099856ce648ca1ff3eb3f24ebf9b67294f wtxid=ec35e6a0b9cf38e30ee1179b21b53b099856ce648ca1ff3eb3f24ebf9b67294f\r\n2021-10-24T16:11:56Z TransactionAddedToMempool: txid=ec35e6a0b9cf38e30ee1179b21b53b099856ce648ca1ff3eb3f24ebf9b67294f wtxid=ec35e6a0b9cf38e30ee1179b21b53b099856ce648ca1ff3eb3f24ebf9b67294f\r\n2021-10-24T16:11:56Z received: inv (37 bytes) peer=8\r\n2021-10-24T16:11:56Z got inv: tx ec35e6a0b9cf38e30ee1179b21b53b099856ce648ca1ff3eb3f24ebf9b67294f  have peer=8\r\n2021-10-24T16:11:57Z sending inv (37 bytes) peer=13\r\n2021-10-24T16:11:57Z sending inv (37 bytes) peer=14\r\n2021-10-24T16:11:57Z received: inv (37 bytes) peer=9\r\n2021-10-24T16:11:57Z got inv: tx ec35e6a0b9cf38e30ee1179b21b53b099856ce648ca1ff3eb3f24ebf9b67294f  have peer=9\r\n2021-10-24T16:11:58Z sending inv (37 bytes) peer=4\r\n2021-10-24T16:11:58Z received: getdata (37 bytes) peer=13\r\n2021-10-24T16:11:58Z received getdata (1 invsz) peer=13\r\n2021-10-24T16:11:58Z received getdata for: witness-tx 8b9f8731d0337676c1c9ed56177ca175bf0e4255f4e080f73eb5774b50d14e69 peer=13\r\n\r\n```",
          "user": {
            "login": "JaredTate",
            "id": 13957390,
            "node_id": "MDQ6VXNlcjEzOTU3Mzkw",
            "avatar_url": "https://avatars.githubusercontent.com/u/13957390?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/JaredTate",
            "html_url": "https://github.com/JaredTate",
            "followers_url": "https://api.github.com/users/JaredTate/followers",
            "following_url": "https://api.github.com/users/JaredTate/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/JaredTate/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/JaredTate/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/JaredTate/subscriptions",
            "organizations_url": "https://api.github.com/users/JaredTate/orgs",
            "repos_url": "https://api.github.com/users/JaredTate/repos",
            "events_url": "https://api.github.com/users/JaredTate/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/JaredTate/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "NONE",
          "locked": false,
          "comments": 11,
          "created_at": "2021-10-24T16:55:55Z",
          "updated_at": "2021-10-30T22:22:33Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "referenced",
      "id": 6723199492,
      "node_id": "REFE_lADOABII5843AMxCzwAAAAGQu-IE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6723199492",
      "actor": {
        "login": "gwillen",
        "id": 458997,
        "node_id": "MDQ6VXNlcjQ1ODk5Nw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/458997?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gwillen",
        "html_url": "https://github.com/gwillen",
        "followers_url": "https://api.github.com/users/gwillen/followers",
        "following_url": "https://api.github.com/users/gwillen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gwillen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gwillen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gwillen/subscriptions",
        "organizations_url": "https://api.github.com/users/gwillen/orgs",
        "repos_url": "https://api.github.com/users/gwillen/repos",
        "events_url": "https://api.github.com/users/gwillen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gwillen/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "3fff335dff807c955576a8363c32000c714a5bc9",
      "commit_url": "https://api.github.com/repos/ElementsProject/elements/commits/3fff335dff807c955576a8363c32000c714a5bc9",
      "created_at": "2022-06-01T21:22:40Z"
    },
    {
      "event": "locked",
      "id": 7199156073,
      "node_id": "LOE_lADOABII5843AMxCzwAAAAGtGmdp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7199156073",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-08-16T17:25:36Z",
      "lock_reason": "resolved"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/653739094",
      "pull_request_review_id": 686568353,
      "id": 653739094,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY1MzczOTA5NA==",
      "diff_hunk": "@@ -34,7 +34,8 @@ TransactionError BroadcastTransaction(NodeContext& node, const CTransactionRef t\n     assert(node.peerman);\n     assert(node.mempool);\n     std::promise<void> promise;\n-    uint256 hashTx = tx->GetHash();\n+    uint256 txid = tx->GetHash();\n+    uint256 wtxid = tx->GetWitnessHash();",
      "path": "src/node/transaction.cpp",
      "position": 18,
      "original_position": 6,
      "commit_id": "5a77abd4e657458852875a07692898982f4b1db5",
      "original_commit_id": "14cf5dec17af9cc57a85dfe4910f30d8e17581d8",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Very smol suggestion for ease of review - This improvement in the naming is in the \"[mempol] Allow rebroadcast for same-txid-different-wtxid transactions\" commit 14cf5dec17af9cc57a85dfe4910f30d8e17581d8, but txid part would fit better in the subsequent [style] commit.",
      "created_at": "2021-06-17T16:42:57Z",
      "updated_at": "2021-06-18T13:17:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#discussion_r653739094",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/653739094"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22261"
        }
      },
      "start_line": 37,
      "original_start_line": 37,
      "start_side": "LEFT",
      "line": 40,
      "original_line": 40,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/654348595",
      "pull_request_review_id": 687299546,
      "id": 654348595,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY1NDM0ODU5NQ==",
      "diff_hunk": "@@ -34,7 +34,8 @@ TransactionError BroadcastTransaction(NodeContext& node, const CTransactionRef t\n     assert(node.peerman);\n     assert(node.mempool);\n     std::promise<void> promise;\n-    uint256 hashTx = tx->GetHash();\n+    uint256 txid = tx->GetHash();\n+    uint256 wtxid = tx->GetWitnessHash();",
      "path": "src/node/transaction.cpp",
      "position": 18,
      "original_position": 6,
      "commit_id": "5a77abd4e657458852875a07692898982f4b1db5",
      "original_commit_id": "14cf5dec17af9cc57a85dfe4910f30d8e17581d8",
      "in_reply_to_id": 653739094,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I changed the name `hashTx` -> `txid` in the same commit as adding the `wtxid` variable. It seemed to make sense to me to have the variables named `txid`/`wtxid` from the start instead of `hashTx`/`wtxid`.\r\n\r\nNot sure the ordering matters that much. I'm inclined to leave it as it is right now, but will happily reorder/split commits if that's helpful for other reviewers.",
      "created_at": "2021-06-18T11:15:53Z",
      "updated_at": "2021-06-18T11:15:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#discussion_r654348595",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/654348595"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22261"
        }
      },
      "start_line": 37,
      "original_start_line": 37,
      "start_side": "LEFT",
      "line": 40,
      "original_line": 40,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/667323286",
      "pull_request_review_id": 703491177,
      "id": 667323286,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NzMyMzI4Ng==",
      "diff_hunk": "@@ -28,65 +28,83 @@ static TransactionError HandleATMPError(const TxValidationState& state, std::str\n \n TransactionError BroadcastTransaction(NodeContext& node, const CTransactionRef tx, std::string& err_string, const CAmount& max_tx_fee, bool relay, bool wait_callback)\n {\n-    // BroadcastTransaction can be called by either sendrawtransaction RPC or wallet RPCs.\n-    // node.peerman is assigned both before chain clients and before RPC server is accepting calls,\n-    // and reset after chain clients and RPC sever are stopped. node.peerman should never be null here.\n-    assert(node.peerman);\n+    // BroadcastTransaction can be called by either sendrawtransaction RPC or the wallet.\n+    // chainman, mempool and peerman are initialized before the RPC server and wallet are started\n+    // and reset after the RPC sever and wallet are stopped.\n+    assert(node.chainman);\n     assert(node.mempool);\n+    assert(node.peerman);\n+\n     std::promise<void> promise;\n-    uint256 hashTx = tx->GetHash();\n+    uint256 txid = tx->GetHash();\n+    uint256 wtxid = tx->GetWitnessHash();\n     bool callback_set = false;\n \n-    { // cs_main scope\n-    assert(node.chainman);\n-    LOCK(cs_main);\n-    // If the transaction is already confirmed in the chain, don't do anything\n-    // and return early.\n-    CCoinsViewCache &view = node.chainman->ActiveChainstate().CoinsTip();\n-    for (size_t o = 0; o < tx->vout.size(); o++) {\n-        const Coin& existingCoin = view.AccessCoin(COutPoint(hashTx, o));\n-        // IsSpent doesn't mean the coin is spent, it means the output doesn't exist.\n-        // So if the output does exist, then this transaction exists in the chain.\n-        if (!existingCoin.IsSpent()) return TransactionError::ALREADY_IN_CHAIN;\n-    }\n-    if (!node.mempool->exists(hashTx)) {\n-        // Transaction is not already in the mempool.\n-        if (max_tx_fee > 0) {\n-            // First, call ATMP with test_accept and check the fee. If ATMP\n-            // fails here, return error immediately.\n+    {\n+        LOCK(cs_main);\n+\n+        // If the transaction is already confirmed in the chain, don't do anything\n+        // and return early.\n+        CCoinsViewCache &view = node.chainman->ActiveChainstate().CoinsTip();\n+        for (size_t o = 0; o < tx->vout.size(); o++) {\n+            const Coin& existingCoin = view.AccessCoin(COutPoint(txid, o));\n+            // IsSpent doesn't mean the coin is spent, it means the output doesn't exist.\n+            // So if the output does exist, then this transaction exists in the chain.\n+            if (!existingCoin.IsSpent()) return TransactionError::ALREADY_IN_CHAIN;\n+        }\n+\n+        if (auto mempool_tx = node.mempool->get(txid); mempool_tx) {\n+            // There's already a transaction in the mempool with this txid. Don't\n+            // try to submit this transaction to the mempool (since it'll be\n+            // rejected as a TX_CONFLICT), but do attempt to reannounce the mempool\n+            // transaction if relay=true.\n+            //\n+            // The mempool transaction may have the same or different witness (and\n+            // wtxid) as this transaction. Use the mempool's wtxid for reannouncement.\n+            wtxid = mempool_tx->GetWitnessHash();\n+        } else {",
      "path": "src/node/transaction.cpp",
      "position": 60,
      "original_position": 60,
      "commit_id": "5a77abd4e657458852875a07692898982f4b1db5",
      "original_commit_id": "5a77abd4e657458852875a07692898982f4b1db5",
      "in_reply_to_id": null,
      "user": {
        "login": "rajarshimaitra",
        "id": 36541669,
        "node_id": "MDQ6VXNlcjM2NTQxNjY5",
        "avatar_url": "https://avatars.githubusercontent.com/u/36541669?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rajarshimaitra",
        "html_url": "https://github.com/rajarshimaitra",
        "followers_url": "https://api.github.com/users/rajarshimaitra/followers",
        "following_url": "https://api.github.com/users/rajarshimaitra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rajarshimaitra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rajarshimaitra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rajarshimaitra/subscriptions",
        "organizations_url": "https://api.github.com/users/rajarshimaitra/orgs",
        "repos_url": "https://api.github.com/users/rajarshimaitra/repos",
        "events_url": "https://api.github.com/users/rajarshimaitra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rajarshimaitra/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Maybe I am confused and missing other details, but here's my doubt.\r\n\r\nIt seems here that if a new tx (with a same mempool-tx `txid` but diff `wtxid`) is passed into broadcast, then it will just check against the `txid`, see that it already exist in mempool, and then attempt to broadcast the existing `wtxid` instead of the new `wtxid`. It also wont try to add it to mempool or the unbroadcast list. But it should, as its a brand new transaction.\r\n\r\nIt seems to me that in case of `same-txid-different-wtxid` here, nothing happens with the new transaction, and we just relay the existing tx and call it a day? How is that not a problem?    ",
      "created_at": "2021-07-10T10:41:13Z",
      "updated_at": "2021-07-10T10:50:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#discussion_r667323286",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/667323286"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22261"
        }
      },
      "start_line": 56,
      "original_start_line": 56,
      "start_side": "RIGHT",
      "line": 65,
      "original_line": 65,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/667382532",
      "pull_request_review_id": 703527935,
      "id": 667382532,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NzM4MjUzMg==",
      "diff_hunk": "@@ -28,65 +28,83 @@ static TransactionError HandleATMPError(const TxValidationState& state, std::str\n \n TransactionError BroadcastTransaction(NodeContext& node, const CTransactionRef tx, std::string& err_string, const CAmount& max_tx_fee, bool relay, bool wait_callback)\n {\n-    // BroadcastTransaction can be called by either sendrawtransaction RPC or wallet RPCs.\n-    // node.peerman is assigned both before chain clients and before RPC server is accepting calls,\n-    // and reset after chain clients and RPC sever are stopped. node.peerman should never be null here.\n-    assert(node.peerman);\n+    // BroadcastTransaction can be called by either sendrawtransaction RPC or the wallet.\n+    // chainman, mempool and peerman are initialized before the RPC server and wallet are started\n+    // and reset after the RPC sever and wallet are stopped.\n+    assert(node.chainman);\n     assert(node.mempool);\n+    assert(node.peerman);\n+\n     std::promise<void> promise;\n-    uint256 hashTx = tx->GetHash();\n+    uint256 txid = tx->GetHash();\n+    uint256 wtxid = tx->GetWitnessHash();\n     bool callback_set = false;\n \n-    { // cs_main scope\n-    assert(node.chainman);\n-    LOCK(cs_main);\n-    // If the transaction is already confirmed in the chain, don't do anything\n-    // and return early.\n-    CCoinsViewCache &view = node.chainman->ActiveChainstate().CoinsTip();\n-    for (size_t o = 0; o < tx->vout.size(); o++) {\n-        const Coin& existingCoin = view.AccessCoin(COutPoint(hashTx, o));\n-        // IsSpent doesn't mean the coin is spent, it means the output doesn't exist.\n-        // So if the output does exist, then this transaction exists in the chain.\n-        if (!existingCoin.IsSpent()) return TransactionError::ALREADY_IN_CHAIN;\n-    }\n-    if (!node.mempool->exists(hashTx)) {\n-        // Transaction is not already in the mempool.\n-        if (max_tx_fee > 0) {\n-            // First, call ATMP with test_accept and check the fee. If ATMP\n-            // fails here, return error immediately.\n+    {\n+        LOCK(cs_main);\n+\n+        // If the transaction is already confirmed in the chain, don't do anything\n+        // and return early.\n+        CCoinsViewCache &view = node.chainman->ActiveChainstate().CoinsTip();\n+        for (size_t o = 0; o < tx->vout.size(); o++) {\n+            const Coin& existingCoin = view.AccessCoin(COutPoint(txid, o));\n+            // IsSpent doesn't mean the coin is spent, it means the output doesn't exist.\n+            // So if the output does exist, then this transaction exists in the chain.\n+            if (!existingCoin.IsSpent()) return TransactionError::ALREADY_IN_CHAIN;\n+        }\n+\n+        if (auto mempool_tx = node.mempool->get(txid); mempool_tx) {\n+            // There's already a transaction in the mempool with this txid. Don't\n+            // try to submit this transaction to the mempool (since it'll be\n+            // rejected as a TX_CONFLICT), but do attempt to reannounce the mempool\n+            // transaction if relay=true.\n+            //\n+            // The mempool transaction may have the same or different witness (and\n+            // wtxid) as this transaction. Use the mempool's wtxid for reannouncement.\n+            wtxid = mempool_tx->GetWitnessHash();\n+        } else {",
      "path": "src/node/transaction.cpp",
      "position": 60,
      "original_position": 60,
      "commit_id": "5a77abd4e657458852875a07692898982f4b1db5",
      "original_commit_id": "5a77abd4e657458852875a07692898982f4b1db5",
      "in_reply_to_id": 667323286,
      "user": {
        "login": "dunxen",
        "id": 3072149,
        "node_id": "MDQ6VXNlcjMwNzIxNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3072149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dunxen",
        "html_url": "https://github.com/dunxen",
        "followers_url": "https://api.github.com/users/dunxen/followers",
        "following_url": "https://api.github.com/users/dunxen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dunxen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dunxen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dunxen/subscriptions",
        "organizations_url": "https://api.github.com/users/dunxen/orgs",
        "repos_url": "https://api.github.com/users/dunxen/repos",
        "events_url": "https://api.github.com/users/dunxen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dunxen/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> But it should, as its a brand new transaction.\r\n\r\nIn terms of adding it to the mempool, it cannot since it'll be rejected as `TX_CONFLICT`. And if we cannot add it to our mempool, then we should not relay the new `wtxid` as this is not in our mempool.\r\n\r\nAFAIU with `same-txid-different-wtxid` the effect of the transaction (in terms of inputs and outputs) would be identical as it's just the witness that would be different. I don't think it would matter which one ends up being confirmed.\r\n\r\nAt least this is how I understand it to be :)",
      "created_at": "2021-07-10T20:33:41Z",
      "updated_at": "2021-07-10T20:33:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#discussion_r667382532",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/667382532"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22261"
        }
      },
      "start_line": 56,
      "original_start_line": 56,
      "start_side": "RIGHT",
      "line": 65,
      "original_line": 65,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/667412711",
      "pull_request_review_id": 703543179,
      "id": 667412711,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NzQxMjcxMQ==",
      "diff_hunk": "@@ -28,65 +28,83 @@ static TransactionError HandleATMPError(const TxValidationState& state, std::str\n \n TransactionError BroadcastTransaction(NodeContext& node, const CTransactionRef tx, std::string& err_string, const CAmount& max_tx_fee, bool relay, bool wait_callback)\n {\n-    // BroadcastTransaction can be called by either sendrawtransaction RPC or wallet RPCs.\n-    // node.peerman is assigned both before chain clients and before RPC server is accepting calls,\n-    // and reset after chain clients and RPC sever are stopped. node.peerman should never be null here.\n-    assert(node.peerman);\n+    // BroadcastTransaction can be called by either sendrawtransaction RPC or the wallet.\n+    // chainman, mempool and peerman are initialized before the RPC server and wallet are started\n+    // and reset after the RPC sever and wallet are stopped.\n+    assert(node.chainman);\n     assert(node.mempool);\n+    assert(node.peerman);\n+\n     std::promise<void> promise;\n-    uint256 hashTx = tx->GetHash();\n+    uint256 txid = tx->GetHash();\n+    uint256 wtxid = tx->GetWitnessHash();\n     bool callback_set = false;\n \n-    { // cs_main scope\n-    assert(node.chainman);\n-    LOCK(cs_main);\n-    // If the transaction is already confirmed in the chain, don't do anything\n-    // and return early.\n-    CCoinsViewCache &view = node.chainman->ActiveChainstate().CoinsTip();\n-    for (size_t o = 0; o < tx->vout.size(); o++) {\n-        const Coin& existingCoin = view.AccessCoin(COutPoint(hashTx, o));\n-        // IsSpent doesn't mean the coin is spent, it means the output doesn't exist.\n-        // So if the output does exist, then this transaction exists in the chain.\n-        if (!existingCoin.IsSpent()) return TransactionError::ALREADY_IN_CHAIN;\n-    }\n-    if (!node.mempool->exists(hashTx)) {\n-        // Transaction is not already in the mempool.\n-        if (max_tx_fee > 0) {\n-            // First, call ATMP with test_accept and check the fee. If ATMP\n-            // fails here, return error immediately.\n+    {\n+        LOCK(cs_main);\n+\n+        // If the transaction is already confirmed in the chain, don't do anything\n+        // and return early.\n+        CCoinsViewCache &view = node.chainman->ActiveChainstate().CoinsTip();\n+        for (size_t o = 0; o < tx->vout.size(); o++) {\n+            const Coin& existingCoin = view.AccessCoin(COutPoint(txid, o));\n+            // IsSpent doesn't mean the coin is spent, it means the output doesn't exist.\n+            // So if the output does exist, then this transaction exists in the chain.\n+            if (!existingCoin.IsSpent()) return TransactionError::ALREADY_IN_CHAIN;\n+        }\n+\n+        if (auto mempool_tx = node.mempool->get(txid); mempool_tx) {\n+            // There's already a transaction in the mempool with this txid. Don't\n+            // try to submit this transaction to the mempool (since it'll be\n+            // rejected as a TX_CONFLICT), but do attempt to reannounce the mempool\n+            // transaction if relay=true.\n+            //\n+            // The mempool transaction may have the same or different witness (and\n+            // wtxid) as this transaction. Use the mempool's wtxid for reannouncement.\n+            wtxid = mempool_tx->GetWitnessHash();\n+        } else {",
      "path": "src/node/transaction.cpp",
      "position": 60,
      "original_position": 60,
      "commit_id": "5a77abd4e657458852875a07692898982f4b1db5",
      "original_commit_id": "5a77abd4e657458852875a07692898982f4b1db5",
      "in_reply_to_id": 667323286,
      "user": {
        "login": "rajarshimaitra",
        "id": 36541669,
        "node_id": "MDQ6VXNlcjM2NTQxNjY5",
        "avatar_url": "https://avatars.githubusercontent.com/u/36541669?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rajarshimaitra",
        "html_url": "https://github.com/rajarshimaitra",
        "followers_url": "https://api.github.com/users/rajarshimaitra/followers",
        "following_url": "https://api.github.com/users/rajarshimaitra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rajarshimaitra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rajarshimaitra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rajarshimaitra/subscriptions",
        "organizations_url": "https://api.github.com/users/rajarshimaitra/orgs",
        "repos_url": "https://api.github.com/users/rajarshimaitra/repos",
        "events_url": "https://api.github.com/users/rajarshimaitra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rajarshimaitra/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Thanks @duncandean, that makes sense. So in the case of `same-txid-different-wtxid` transaction, we are really talking about the same transaction (input-output set) but for some reason with a different signature value.\r\n\r\nIn that case it would make sense to only handle one version of it, and yes its better to handle the version already in the mempool.  ",
      "created_at": "2021-07-11T02:56:55Z",
      "updated_at": "2021-07-11T02:56:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#discussion_r667412711",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/667412711"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22261"
        }
      },
      "start_line": 56,
      "original_start_line": 56,
      "start_side": "RIGHT",
      "line": 65,
      "original_line": 65,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/667740703",
      "pull_request_review_id": 703863702,
      "id": 667740703,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2Nzc0MDcwMw==",
      "diff_hunk": "@@ -71,6 +71,12 @@ TransactionError BroadcastTransaction(NodeContext& node, const CTransactionRef t\n \n         // Transaction was accepted to the mempool.\n \n+        if (relay) {\n+            // the mempool tracks locally submitted transactions to make a\n+            // best-effort of initial broadcast",
      "path": "src/node/transaction.cpp",
      "position": null,
      "original_position": 6,
      "commit_id": "5a77abd4e657458852875a07692898982f4b1db5",
      "original_commit_id": "2837a9f1eaa2c6bf402d1d9891d9aa84c4a56033",
      "in_reply_to_id": null,
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Previously, we would also best-effort rebroadcast (meaning not initial). After this change, best-effort applies only to the initial broadcast indeed (or the absent-from-mempool broadcast).\r\n\r\nIs this the expected rebroadcast behavior? Do we clearly communicate that software-triggered-rebroadcast (wallet or whatever) won't be assisted by the node if the node was offline at the time in the same way the node assists initial broadcast.\r\n\r\nBehavior change:\r\n1. A transaction added to the mempool initially broadcasted\r\n2. Node goes offline\r\n3. A transaction is still in the mempool, triggers rebroadcast.\r\n4. Rebroadcast fails because offline\r\n\r\nThe difference is that after this code, UnbroadcastTx won't help in step 4.\r\nIndeed, the peers are unlikely to request it again. It's still possible though, if our mempool is more persistent (e.g., deeper in size).\r\n\r\nThis applies backward too: if our mempool is less persistent, we will make useless rebroadcasts (peers won't send GETDATA because they still have it in the mempool). This part is indeed not a degradation over master, but still something to think about. Small-mempool  nodes may become are likely to become \"10-15 minutes\" rebroadcast spammers (after only one extra broadcast trigger, but because Unbroadcast set never clears)",
      "created_at": "2021-07-12T08:44:50Z",
      "updated_at": "2021-07-12T08:44:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#discussion_r667740703",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/667740703"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22261"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 76,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/667786642",
      "pull_request_review_id": 703922879,
      "id": 667786642,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2Nzc4NjY0Mg==",
      "diff_hunk": "@@ -71,6 +71,12 @@ TransactionError BroadcastTransaction(NodeContext& node, const CTransactionRef t\n \n         // Transaction was accepted to the mempool.\n \n+        if (relay) {\n+            // the mempool tracks locally submitted transactions to make a\n+            // best-effort of initial broadcast",
      "path": "src/node/transaction.cpp",
      "position": null,
      "original_position": 6,
      "commit_id": "5a77abd4e657458852875a07692898982f4b1db5",
      "original_commit_id": "2837a9f1eaa2c6bf402d1d9891d9aa84c4a56033",
      "in_reply_to_id": 667740703,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> Previously, we would also best-effort rebroadcast (meaning not initial). After this change, best-effort applies only to the initial broadcast indeed (or the absent-from-mempool broadcast).\r\n>\r\n> Is this the expected rebroadcast behavior?\r\n\r\nYes, this is the intention, and was the original intention behind the unbroadcast set. Locally submitted transactions should be tracked to make sure that at least one peer had requested them _at least once_.\r\n\r\n> Behavior change:\r\n>\r\n> 1. A transaction added to the mempool initially broadcasted\r\n> 2. Node goes offline\r\n> 3. A transaction is still in the mempool, triggers rebroadcast.\r\n> 4. Rebroadcast fails because offline\r\n>\r\n> The difference is that after this code, UnbroadcastTx won't help in step 4.\r\n\r\nCorrect. That's intentional. The eventual aim of the rebroadcast project is to remove the need for the local wallet to rebroadcast transactions in the majority of cases. I hope that eventually the default behavior is that (3) doesn't happen at all.",
      "created_at": "2021-07-12T09:48:28Z",
      "updated_at": "2021-07-12T09:48:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22261#discussion_r667786642",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/667786642"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22261"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 76,
      "side": "RIGHT"
    }
  ]
}