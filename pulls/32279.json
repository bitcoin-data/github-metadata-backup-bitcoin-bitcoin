{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279",
    "id": 2461191229,
    "node_id": "PR_kwDOABII586Sssw9",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/32279",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/32279.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/32279.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32279",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32279/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/d5104cfbaeb82081e4b00a5084516555e446dcdc",
    "number": 32279,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "[IBD] prevector: store `P2WSH`/`P2TR`/`P2PK` scripts inline",
    "user": {
      "login": "l0rinc",
      "id": 1841944,
      "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/l0rinc",
      "html_url": "https://github.com/l0rinc",
      "followers_url": "https://api.github.com/users/l0rinc/followers",
      "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
      "organizations_url": "https://api.github.com/users/l0rinc/orgs",
      "repos_url": "https://api.github.com/users/l0rinc/repos",
      "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/l0rinc/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "This change is part of [[IBD] - Tracking PR for speeding up Initial Block Download](https://github.com/bitcoin/bitcoin/pull/32043)\r\n\r\n### Summary\r\n\r\nThe current `prevector` size of 28 bytes (chosen to fill the `sizeof(CScript)` aligned size) was introduced in 2015 (https://github.com/bitcoin/bitcoin/pull/6914) before `SegWit` and `TapRoot`.\r\nHowever, the increasingly common `P2WSH` and `P2TR` scripts are both 34 bytes, and are forced to use heap (re)allocation rather than efficient inline storage.\r\n\r\nThe core trade-off of this change is to eliminate heap allocations for common 34-36 byte scripts at the cost of increasing the base memory footprint of all `CScript` objects by 8 bytes (while still respecting peak memory usage defined by `-dbcache`).\r\n\r\n### Context\r\nIncreasing the `prevector` size allows these scripts to be stored inline, avoiding heap allocations, reducing potential memory fragmentation, and improving performance during cache flushes. Massif analysis confirms a lower stable memory usage after flushing, suggesting the elimination of heap allocations outweighs the larger base size for common workloads.\r\n\r\nDue to memory alignment, increasing the prevector size to 36 bytes doesn't change the overall `sizeof(CScript)` compared to an increase to 34 bytes, allowing us to include `P2PK` scripts as well at no additional memory cost.\r\n\r\n<details>\r\n<summary>Massif measurements</summary>\r\n\r\n> dbcache=440\r\n\r\nMassif before, with a heap threshold of `28`:\r\n```bash\r\n    MB\r\n744.1^#                                                                       \r\n     |#: ::::::@: :::::::   :@:: @::::::::::::::@@                            \r\n     |#: ::::::@::::: :::   :@:::@:::::: :: ::::@                             \r\n     |#: ::::::@::::: :::   :@:::@:::::: :: ::::@                             \r\n     |#: ::::::@::::: ::: : :@:::@:::::: :: ::::@                             \r\n     |#: ::::::@::::: ::: : :@:::@:::::: :: ::::@                             \r\n     |#: ::::::@::::: ::: : :@:::@:::::: :: ::::@                             \r\n     |#::::::::@::::: ::: : :@:::@:::::: :: ::::@                             \r\n     |#::::::::@::::: ::: :::@:::@:::::: :: ::::@                             \r\n     |#::::::::@::::: ::: :::@:::@:::::: :: ::::@                             \r\n     |#::::::::@::::: ::: :::@:::@:::::: :: ::::@                             \r\n     |#::::::::@::::: ::: :::@:::@:::::: :: ::::@                             \r\n     |#::::::::@::::: :::::::@:::@:::::: :: ::::@                             \r\n     |#::::::::@::::: :::::::@:::@:::::: :: ::::@ :::::@:::::@:::::@:::::@::::\r\n     |#::::::::@::::: :::::::@:::@:::::: :: ::::@ :::::@:::::@:::::@:::::@::::\r\n     |#::::::::@::::: :::::::@:::@:::::: :: ::::@ :::::@:::::@:::::@:::::@::::\r\n     |#::::::::@::::: :::::::@:::@:::::: :: ::::@ :::::@:::::@:::::@:::::@::::\r\n     |#::::::::@::::: :::::::@:::@:::::: :: ::::@ :::::@:::::@:::::@:::::@::::\r\n     |#::::::::@::::: :::::::@:::@:::::: :: ::::@ :::::@:::::@:::::@:::::@::::\r\n     |#::::::::@::::: :::::::@:::@:::::: :: ::::@ :::::@:::::@:::::@:::::@::::\r\n   0 +----------------------------------------------------------------------->h\r\n     0                                                                   1.805\r\n```\r\n\r\nand after, with a heap threshold of `36`:\r\n```bash\r\n    MB\r\n744.2^       :                                                                \r\n     |#  :  :::::::::::   : : :: ::: @@:::::: ::  :                           \r\n     |#  :  :::: ::::::   : : :: ::: @ :: ::  :   :                           \r\n     |#  :  :::: :::::::  : :@:: ::: @ :: ::  : :::                           \r\n     |#  :  :::: :::::::  : :@:: ::: @ :: ::  : : :                           \r\n     |#  :  :::: :::::::  : :@:: ::: @ :: ::  : : :                           \r\n     |#  :  :::: :::::::  : :@:: ::: @ :: ::  : : :                           \r\n     |#  :: :::: :::::::  : :@:: ::: @ :: ::  : : :                           \r\n     |#  :: :::: :::::::  : :@:: ::::@ :: ::  : : :                           \r\n     |#:::: :::: :::::::  :::@:: ::::@ :: ::  : : :                           \r\n     |#: ::::::: :::::::  :::@:: ::::@ :: :: @: : :                           \r\n     |#: ::::::: :::::::  :::@:::::::@ :: :: @: : :                           \r\n     |#: ::::::: ::::::::::::@:::::::@ :: :: @: : :                           \r\n     |#: ::::::: :::::::: :::@:::::::@ :: :: @: : :                           \r\n     |#: ::::::: :::::::: :::@:::::::@ :: :: @: : :::@:::@::::@::::::@:::::@::\r\n     |#: ::::::: :::::::: :::@:::::::@ :: :: @: : :::@:::@::::@::::::@:::::@::\r\n     |#: ::::::: :::::::: :::@:::::::@ :: :: @: : :::@:::@::::@::::::@:::::@::\r\n     |#: ::::::: :::::::: :::@:::::::@ :: :: @: : :::@:::@::::@::::::@:::::@::\r\n     |#: ::::::: :::::::: :::@:::::::@ :: :: @: : :::@:::@::::@::::::@:::::@::\r\n     |#: ::::::: :::::::: :::@:::::::@ :: :: @: : :::@:::@::::@::::::@:::::@::\r\n   0 +----------------------------------------------------------------------->h\r\n     0                                                                   1.618\r\n```\r\n\r\n---\r\n\r\n> for `dbcache=4500`:\r\n\r\nMassif before, with a heap threshold of `28`:\r\n```bash\r\n    GB\r\n4.565^   ::                                                                   \r\n     | ##:   @@:::  :::: :@::::  :::: ::::                                    \r\n     | # :   @ ::   :::  :@: ::  : :: :::                                     \r\n     | # :   @ :: :::::  :@: ::  : :: :::                                     \r\n     | # :   @ :: : :::  :@: :: @: :: :::                                     \r\n     | # :   @ :: : :::  :@: :: @: :: :::                                     \r\n     | # :   @ :: : :::  :@: :: @: :: :::                                     \r\n     | # :   @ :: : :::  :@: :: @: :: :::                                     \r\n     | # : ::@ :: : :::  :@: :: @: :: :::                                     \r\n     | # : : @ :: : :::  :@: :: @: :: :::                                     \r\n     | # : : @ :: : :::  :@: :: @: ::::::                                     \r\n     | # : : @ :: : :::  :@: :: @: ::::::                                     \r\n     | # : : @ :: : :::  :@: :: @: ::::::                                     \r\n     | # : : @ :: : ::: ::@: :: @: ::::::                                     \r\n     | # : : @ :: : ::: ::@: :: @: ::::::                                     \r\n     | # : : @ :: : ::: ::@: :: @: ::::::                                     \r\n     | # : : @ :: : ::: ::@: :: @: :::::: @::                                 \r\n     | # : : @ :: : ::: ::@: :: @: :::::: @:                                  \r\n     | # : : @ :: : ::: ::@: :::@: :::::: @:                                  \r\n     | # : : @ :: : ::: ::@: :::@: :::::: @: :::::::::::::::::::::::::::::@:::\r\n   0 +----------------------------------------------------------------------->h\r\n     0                                                                   1.500\r\n```\r\n\r\nand after, with a heap threshold of `36`:\r\n```\r\n    GB\r\n4.640^    :                                                                   \r\n     | ##::  :::::   ::::  ::::::@  ::::                                      \r\n     | # ::  : :::   ::::  :: :::@  ::::                                      \r\n     | # :: :: :::   ::::  :: :::@  ::::                                      \r\n     | # :: :: :::  :::::  :: :::@  ::::                                      \r\n     | # :: :: :::  :::::  :: :::@  ::::                                      \r\n     | # :: :: :::  :::::  :: :::@  ::::                                      \r\n     | # :: :: :::  :::::  :: :::@  ::::                                      \r\n     | # :: :: :::  :::::  :: :::@  ::::  :@@                                 \r\n     | # :: :: :::  ::::: ::: :::@  :::::::@                                  \r\n     | # :: :: :::  ::::: ::: :::@  ::::: :@                                  \r\n     | # :: :: :::  ::::: ::: :::@::::::: :@                                  \r\n     | # ::::: :::  ::::: ::: :::@: ::::: :@                                  \r\n     | # ::::: :::  ::::: ::: :::@: ::::: :@                                  \r\n     | # ::::: :::::::::: ::: :::@: ::::: :@                                  \r\n     | # ::::: :::: ::::: ::: :::@: ::::: :@                                  \r\n     | # ::::: :::: ::::: ::: :::@: ::::: :@                                  \r\n     | # ::::: :::: ::::::::: :::@: ::::: :@                                  \r\n     | # ::::: :::: ::::::::: :::@: ::::: :@                                  \r\n     | # ::::: :::: ::::::::: :::@: ::::: :@ ::::::@:::@:::@::::@:::::@::::@::\r\n   0 +----------------------------------------------------------------------->h\r\n     0                                                                   1.360\r\n```\r\n\r\n</details>\r\n\r\n### Benchmarks and Memory\r\n\r\nPerformance benchmarks for `AssumeUTXO` load and flush show:\r\n- Small dbcache (450MB): ~1-3% performance improvement (despite more frequent flushes)\r\n- Large dbcache (4500MB): ~6-8% performance improvement due to fewer heap allocations (and basically the number of flushes)\r\n- Very large dbcache (4500MB): ~5-6% performance improvement due to fewer heap allocations (and memory limit not being reached, so there's no memory penalty)\r\n\r\nFull IBD and `-reindex-chainstate` with also show an overall ~3-4% speedup (both for smaller and larger dbcache values).\r\n\r\nWe haven't investigated using different `prevector` sizes based on script type, though this could be explored in the future if needed.\r\n\r\n### Historical explanation for the speedup (by [Anthony Towns](https://github.com/bitcoin/bitcoin/pull/32279#issuecomment-3111757079))\r\n\r\n> I think the tradeoff is something like:\r\n> \r\n> * spends of p2pk, p2sh, p2pkh coins -- these cost 8 more bytes\r\n> * spends of p2wpkh -- these cost 16 more bytes (sPK and scriptSig didn't need an allocation)\r\n> * spends of p2wsh and p2tr -- these cost ~48 fewer bytes (save 64 byte allocation on 64bit system, lose 8 bytes for both scriptSig and sPK)\r\n> * spends of nested p2wsh -- presumably save ~96 bytes, since the scriptSig would save an allocation, but I'm bundling it in the previous section\r\n> \r\n> Based on mainnet.observer stats for 2025-05-08, p2wpkh is about 55% of txs, p2tr is about 28%, p2pkh about 13%, p2wsh about 4% and the rest is noise, maybe? Those numbers net out to a saving of ~5.5 bytes per input. If p2wpkh rose from 55% to 80% and p2tr dropped to 20%, that would net to wasting ~3.2 bytes per input.",
    "labels": [],
    "created_at": "2025-04-15T16:20:13Z",
    "updated_at": "2025-07-26T06:35:26Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "c9614b01ec19b037a89bb4c49f236e7838a5100a",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "l0rinc:l0rinc/prevector-size",
      "ref": "l0rinc/prevector-size",
      "sha": "d5104cfbaeb82081e4b00a5084516555e446dcdc",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 674169038,
        "node_id": "R_kgDOKC8Azg",
        "name": "bitcoin",
        "full_name": "l0rinc/bitcoin",
        "owner": {
          "login": "l0rinc",
          "id": 1841944,
          "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
          "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/l0rinc",
          "html_url": "https://github.com/l0rinc",
          "followers_url": "https://api.github.com/users/l0rinc/followers",
          "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
          "organizations_url": "https://api.github.com/users/l0rinc/orgs",
          "repos_url": "https://api.github.com/users/l0rinc/repos",
          "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/l0rinc/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/l0rinc/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/l0rinc/bitcoin",
        "archive_url": "https://api.github.com/repos/l0rinc/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/l0rinc/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/l0rinc/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/l0rinc/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/l0rinc/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/l0rinc/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/l0rinc/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/l0rinc/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/l0rinc/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/l0rinc/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/l0rinc/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/l0rinc/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/l0rinc/bitcoin/events",
        "forks_url": "https://api.github.com/repos/l0rinc/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/l0rinc/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/l0rinc/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/l0rinc/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/l0rinc/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/l0rinc/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/l0rinc/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/l0rinc/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/l0rinc/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/l0rinc/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/l0rinc/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/l0rinc/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/l0rinc/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/l0rinc/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/l0rinc/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/l0rinc/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:l0rinc/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/l0rinc/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/l0rinc/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/l0rinc/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/l0rinc/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/l0rinc/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/l0rinc/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/l0rinc/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/l0rinc/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/l0rinc/bitcoin/hooks",
        "svn_url": "https://github.com/l0rinc/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 1,
        "watchers_count": 1,
        "size": 269536,
        "default_branch": "master",
        "open_issues_count": 5,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-07-26T05:37:48Z",
        "created_at": "2023-08-03T09:49:12Z",
        "updated_at": "2025-07-23T01:13:39Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "3b188b8b3daef4ae648e792d0ac3fd4db9c1fd36",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 37575,
        "stargazers_count": 84751,
        "watchers_count": 84751,
        "size": 289578,
        "default_branch": "master",
        "open_issues_count": 756,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-07-25T21:48:30Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-07-26T06:39:37Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 131,
    "deletions": 28,
    "changed_files": 6,
    "commits": 4,
    "review_comments": 25,
    "comments": 16
  },
  "events": [
    {
      "event": "commented",
      "id": 2806724474,
      "node_id": "IC_kwDOABII586nSzd6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2806724474",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-15T16:20:16Z",
      "updated_at": "2025-07-25T23:32:52Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32279.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Approach ACK | [ajtowns](https://github.com/bitcoin/bitcoin/pull/32279#issuecomment-3111757079) |\n| Stale ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/32279#pullrequestreview-3042653949), [achow101](https://github.com/bitcoin/bitcoin/pull/32279#issuecomment-3115094134) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#33021](https://github.com/bitcoin/bitcoin/pull/33021) (test: revive test verifying that `GetCoinsCacheSizeState` switches from OKâ†’LARGEâ†’CRITICAL by l0rinc)\n* [#28531](https://github.com/bitcoin/bitcoin/pull/28531) (improve MallocUsage() accuracy by LarryRuane)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#issuecomment-2806724474",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32279"
    },
    {
      "event": "renamed",
      "id": 17272999282,
      "node_id": "RTE_lADOABII586yoiw8zwAAAAQFjQ1y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17272999282",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-15T16:40:29Z",
      "rename": {
        "from": "prevector: allocate `P2WSH` and `P2TR` scripts on stack as well",
        "to": "[IBD] prevector: allocate `P2WSH` and `P2TR` scripts on stack as well"
      }
    },
    {
      "event": "commented",
      "id": 2806901240,
      "node_id": "IC_kwDOABII586nTen4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2806901240",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-15T17:08:21Z",
      "updated_at": "2025-04-20T07:20:37Z",
      "author_association": "CONTRIBUTOR",
      "body": "### Additional info:\r\n\r\nAdded logging to the original `prevector` destructor to measure its final size - and printed the values during an assumeutxo load & dump:\r\n<img width=\"1000\" alt=\"image\" src=\"https://github.com/user-attachments/assets/b41d216c-97f9-4e12-8cd8-bfc44e7c5cc5\" />\r\n\r\nI haven't investigated in detail why there are so many empty prevectors, can very well be just an unoptimized debug run artifact of all the Coin copies.\r\n\r\n----\r\n\r\nIf we plot the coin cache size vs height, we see that with the original prevector size, the first part of the sync fits more values initially and fewer ones later:\r\n<img width=\"1000\" alt=\"Original cache occupancy\" src=\"https://github.com/user-attachments/assets/fbb571fb-0864-4127-afe2-d18c15ea3a9b\" />\r\n\r\nAfter this change, the occupancy is more predictable:\r\n<img width=\"1000\" alt=\"New cache occupancy\" src=\"https://github.com/user-attachments/assets/9195b0f3-cbb9-470b-ba53-fd8f9246d145\" />\r\n\r\n-----\r\n\r\n### AssumeUTXO\r\n\r\nRan some AssumeUTXO benchmarks with different values (on *SSD*):\r\n\r\n<details>\r\n<summary>Benchmark</summary>\r\n\r\n```bash\r\nCOMMITS=\"847a891cdfdf9cfd69a77a8688c995e532ea29db dc0c79a46b5663eddc0a4365b9b7de22cf3fefae\"; \\\r\nCC=gcc; CXX=g++; \\\r\nBASE_DIR=\"/mnt/my_storage\"; DATA_DIR=\"$BASE_DIR/ShallowBitcoinData\"; LOG_DIR=\"$BASE_DIR/logs\"; UTXO_SNAPSHOT_PATH=\"$BASE_DIR/utxo-880000.dat\"; \\\r\n(for c in $COMMITS; do git fetch origin $c -q && git log -1 --pretty=format:'%h %s' $c || exit 1; done) && \\\r\nfor DBCACHE in 450 4500 45000; do \\\r\n  hyperfine \\\r\n  --sort 'command' \\\r\n  --runs 5 \\\r\n  --export-json \"$BASE_DIR/assumeutxo-${COMMITS// /-}-$DBCACHE-$CC.json\" \\\r\n  --parameter-list COMMIT ${COMMITS// /,} \\\r\n  --prepare \"killall bitcoind; rm -rf $DATA_DIR/chainstate $DATA_DIR/chainstate_snapshot $DATA_DIR/debug.log; git checkout {COMMIT}; git clean -fxd; git reset --hard; \\\r\n    cmake -B build -DCMAKE_BUILD_TYPE=Release -DENABLE_WALLET=OFF && cmake --build build -j$(nproc) --target bitcoind --target bitcoin-cli && \\\r\n    ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=1 -printtoconsole=0; \\\r\n    ./build/bin/bitcoind -datadir=$DATA_DIR -daemon -blocksonly=1 -connect=0 -dbcache=$DBCACHE -printtoconsole=0; sleep 10\" \\\r\n  --cleanup \"cp $DATA_DIR/debug.log $LOG_DIR/debug-assumeutxo-{COMMIT}-dbcache-$DBCACHE-$(date +%s).log; build/bin/bitcoin-cli -datadir=$DATA_DIR stop; sleep 10; killall bitcoind; sleep 10;\" \\\r\n  \"COMPILER=$CC DBCACHE=$DBCACHE COMMIT={COMMIT} ./build/bin/bitcoin-cli -datadir=$DATA_DIR -rpcclienttimeout=0 loadtxoutset $UTXO_SNAPSHOT_PATH\"; \\\r\ndone\r\n\r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n<summary>No significant difference with small cache (450MB)</summary>\r\n\r\n> 847a891cdf test: assert CScript allocation characteristics\r\n> dc0c79a46b store `P2WSH`/`P2TR`/`P2PK` scripts inline\r\n\r\n```python\r\nBenchmark 1: COMPILER=gcc DBCACHE=450 COMMIT=847a891cdfdf9cfd69a77a8688c995e532ea29db ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat\r\n  Time (mean Â± Ïƒ):     451.840 s Â±  2.255 s    [User: 0.001 s, System: 0.001 s]\r\n  Range (min â€¦ max):   448.790 s â€¦ 454.846 s    5 runs\r\n\r\nBenchmark 2: COMPILER=gcc DBCACHE=450 COMMIT=dc0c79a46b5663eddc0a4365b9b7de22cf3fefae ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat\r\n  Time (mean Â± Ïƒ):     451.480 s Â±  5.381 s    [User: 0.002 s, System: 0.001 s]\r\n  Range (min â€¦ max):   447.360 s â€¦ 459.782 s    5 runs\r\n\r\nRelative speed comparison\r\n        1.00 Â±  0.01  COMPILER=gcc DBCACHE=450 COMMIT=847a891cdfdf9cfd69a77a8688c995e532ea29db ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat\r\n        1.00          COMPILER=gcc DBCACHE=450 COMMIT=dc0c79a46b5663eddc0a4365b9b7de22cf3fefae ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat\r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n<summary>~6% faster with large cache (4500MB)</summary>\r\n\r\n> 847a891cdf test: assert CScript allocation characteristics\r\n> dc0c79a46b store `P2WSH`/`P2TR`/`P2PK` scripts inline\r\n\r\n```python\r\nBenchmark 1: COMPILER=gcc DBCACHE=4500 COMMIT=847a891cdfdf9cfd69a77a8688c995e532ea29db ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat\r\n  Time (mean Â± Ïƒ):     480.316 s Â±  2.640 s    [User: 0.001 s, System: 0.002 s]\r\n  Range (min â€¦ max):   477.157 s â€¦ 483.803 s    5 runs\r\n\r\nBenchmark 2: COMPILER=gcc DBCACHE=4500 COMMIT=dc0c79a46b5663eddc0a4365b9b7de22cf3fefae ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat\r\n  Time (mean Â± Ïƒ):     452.521 s Â±  7.533 s    [User: 0.001 s, System: 0.001 s]\r\n  Range (min â€¦ max):   445.367 s â€¦ 460.740 s    5 runs\r\n\r\nRelative speed comparison\r\n        1.06 Â±  0.02  COMPILER=gcc DBCACHE=4500 COMMIT=847a891cdfdf9cfd69a77a8688c995e532ea29db ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat\r\n        1.00          COMPILER=gcc DBCACHE=4500 COMMIT=dc0c79a46b5663eddc0a4365b9b7de22cf3fefae ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat\r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n<summary>~5% faster with very large cache (45000MB)</summary>\r\n\r\n> 847a891cdf test: assert CScript allocation characteristics\r\n> dc0c79a46b store `P2WSH`/`P2TR`/`P2PK` scripts inline\r\n\r\n```python\r\nBenchmark 1: COMPILER=gcc DBCACHE=45000 COMMIT=847a891cdfdf9cfd69a77a8688c995e532ea29db ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat\r\n  Time (mean Â± Ïƒ):     469.846 s Â±  1.583 s    [User: 0.002 s, System: 0.001 s]\r\n  Range (min â€¦ max):   467.909 s â€¦ 472.053 s    5 runs\r\n\r\nBenchmark 2: COMPILER=gcc DBCACHE=45000 COMMIT=dc0c79a46b5663eddc0a4365b9b7de22cf3fefae ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat\r\n  Time (mean Â± Ïƒ):     448.079 s Â±  1.180 s    [User: 0.002 s, System: 0.001 s]\r\n  Range (min â€¦ max):   447.280 s â€¦ 450.165 s    5 runs\r\n\r\nRelative speed comparison\r\n        1.05 Â±  0.00  COMPILER=gcc DBCACHE=45000 COMMIT=847a891cdfdf9cfd69a77a8688c995e532ea29db ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat\r\n        1.00          COMPILER=gcc DBCACHE=45000 COMMIT=dc0c79a46b5663eddc0a4365b9b7de22cf3fefae ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat\r\n```\r\n\r\n</details>\r\n\r\nAnd on *HDD*:\r\n\r\n<details>\r\n<summary>Benchmark</summary>\r\n\r\n```bash\r\nCOMMITS=\"156f9913a26598009c8356c34548002e6a6aba02 a2a3e0cfd8549e3be03fd81e75ebb7527e9345d7\"; \\\r\nCC=gcc; CXX=g++; \\\r\nBASE_DIR=\"/mnt/my_storage\"; DATA_DIR=\"$BASE_DIR/ShallowBitcoinData\"; LOG_DIR=\"$BASE_DIR/logs\"; UTXO_SNAPSHOT_PATH=\"$BASE_DIR/utxo-880000.dat\"; \\\r\n(for c in $COMMITS; do git fetch origin $c -q && git log -1 --pretty=format:'%h %s' $c || exit 1; done) && \\\r\nfor DBCACHE in 450 4500 45000; do \\\r\n  hyperfine \\\r\n  --sort 'command' \\\r\n  --runs 5 \\\r\n  --export-json \"$BASE_DIR/assumeutxo-${COMMITS// /-}-$DBCACHE-$CC.json\" \\\r\n  --parameter-list COMMIT ${COMMITS// /,} \\\r\n  --prepare \"killall bitcoind; rm -rf $DATA_DIR/chainstate $DATA_DIR/chainstate_snapshot $DATA_DIR/debug.log; git checkout {COMMIT}; git clean -fxd; git reset --hard; \\\r\n    cmake -B build -DCMAKE_BUILD_TYPE=Release -DENABLE_WALLET=OFF && cmake --build build -j$(nproc) --target bitcoind --target bitcoin-cli && \\\r\n    ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=1 -printtoconsole=0; \\\r\n    ./build/bin/bitcoind -datadir=$DATA_DIR -daemon -blocksonly=1 -connect=0 -dbcache=$DBCACHE -printtoconsole=0; sleep 10\" \\\r\n  --cleanup \"cp $DATA_DIR/debug.log $LOG_DIR/debug-assumeutxo-{COMMIT}-dbcache-$DBCACHE-$(date +%s).log; build/bin/bitcoin-cli -datadir=$DATA_DIR stop; sleep 10; killall bitcoind; sleep 10;\" \\\r\n  \"COMPILER=$CC DBCACHE=$DBCACHE COMMIT={COMMIT} ./build/bin/bitcoin-cli -datadir=$DATA_DIR -rpcclienttimeout=0 loadtxoutset $UTXO_SNAPSHOT_PATH\"; \\\r\ndone\r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n<summary>~3% faster with small dbcache (450MB)</summary>\r\n\r\n> 156f9913a2 test: assert CScript allocation characteristics\r\n> a2a3e0cfd8 store `P2WSH`/`P2TR`/`P2PK` scripts inline\r\n\r\n```python\r\nBenchmark 1: COMPILER=gcc DBCACHE=450 COMMIT=156f9913a26598009c8356c34548002e6a6aba02 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat\r\n  Time (mean Â± Ïƒ):     949.219 s Â± 24.273 s    [User: 0.002 s, System: 0.001 s]\r\n  Range (min â€¦ max):   919.208 s â€¦ 969.841 s    5 runs\r\n\r\nBenchmark 2: COMPILER=gcc DBCACHE=450 COMMIT=a2a3e0cfd8549e3be03fd81e75ebb7527e9345d7 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat\r\n  Time (mean Â± Ïƒ):     923.687 s Â± 15.431 s    [User: 0.001 s, System: 0.001 s]\r\n  Range (min â€¦ max):   909.239 s â€¦ 948.855 s    5 runs\r\n\r\nRelative speed comparison\r\n        1.03 Â±  0.03  COMPILER=gcc DBCACHE=450 COMMIT=156f9913a26598009c8356c34548002e6a6aba02 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat\r\n        1.00          COMPILER=gcc DBCACHE=450 COMMIT=a2a3e0cfd8549e3be03fd81e75ebb7527e9345d7 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat\r\n```\r\n\r\n</details>\r\n\r\n\r\n<details>\r\n<summary>~8% faster with large dbcache (4500MB)</summary>\r\n\r\n> 156f9913a2 test: assert CScript allocation characteristics\r\n> a2a3e0cfd8 store `P2WSH`/`P2TR`/`P2PK` scripts inline\r\n\r\n```python\r\nBenchmark 1: COMPILER=gcc DBCACHE=4500 COMMIT=156f9913a26598009c8356c34548002e6a6aba02 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat\r\n  Time (mean Â± Ïƒ):     778.101 s Â± 14.503 s    [User: 0.002 s, System: 0.001 s]\r\n  Range (min â€¦ max):   765.670 s â€¦ 801.459 s    5 runs\r\n\r\nBenchmark 2: COMPILER=gcc DBCACHE=4500 COMMIT=a2a3e0cfd8549e3be03fd81e75ebb7527e9345d7 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat\r\n  Time (mean Â± Ïƒ):     718.500 s Â± 17.941 s    [User: 0.001 s, System: 0.001 s]\r\n  Range (min â€¦ max):   693.273 s â€¦ 735.929 s    5 runs\r\n\r\nRelative speed comparison\r\n        1.08 Â±  0.03  COMPILER=gcc DBCACHE=4500 COMMIT=156f9913a26598009c8356c34548002e6a6aba02 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat\r\n        1.00          COMPILER=gcc DBCACHE=4500 COMMIT=a2a3e0cfd8549e3be03fd81e75ebb7527e9345d7 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat\r\n```\r\n\r\n</details>\r\n\r\n\r\n<details>\r\n<summary>~6% faster with very large dbcache (45000MB)</summary>\r\n\r\n> 156f9913a2 test: assert CScript allocation characteristics\r\n> a2a3e0cfd8 store `P2WSH`/`P2TR`/`P2PK` scripts inline\r\n\r\n```python\r\nBenchmark 1: COMPILER=gcc DBCACHE=45000 COMMIT=156f9913a26598009c8356c34548002e6a6aba02 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat\r\n  Time (mean Â± Ïƒ):     567.985 s Â±  9.220 s    [User: 0.001 s, System: 0.001 s]\r\n  Range (min â€¦ max):   556.441 s â€¦ 578.439 s    5 runs\r\n\r\nBenchmark 2: COMPILER=gcc DBCACHE=45000 COMMIT=a2a3e0cfd8549e3be03fd81e75ebb7527e9345d7 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat\r\n  Time (mean Â± Ïƒ):     535.541 s Â± 11.944 s    [User: 0.001 s, System: 0.001 s]\r\n  Range (min â€¦ max):   520.044 s â€¦ 549.775 s    5 runs\r\n\r\nRelative speed comparison\r\n        1.06 Â±  0.03  COMPILER=gcc DBCACHE=45000 COMMIT=156f9913a26598009c8356c34548002e6a6aba02 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat\r\n        1.00          COMPILER=gcc DBCACHE=45000 COMMIT=a2a3e0cfd8549e3be03fd81e75ebb7527e9345d7 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat\r\n```\r\n\r\n</details>\r\n\r\n\r\n### Reindex-chainstate\r\n\r\n<details>\r\n<summary>Benchmark with dbcache=450 on SSD</summary>\r\n\r\n```bash\r\nCOMMITS=\"156f9913a26598009c8356c34548002e6a6aba02 a2a3e0cfd8549e3be03fd81e75ebb7527e9345d7\"; \\\r\nSTOP_HEIGHT=888888; DBCACHE=450; \\\r\nCC=gcc; CXX=g++; \\\r\nBASE_DIR=\"/mnt/my_storage\"; DATA_DIR=\"$BASE_DIR/BitcoinData\"; LOG_DIR=\"$BASE_DIR/logs\"; \\\r\n(for c in $COMMITS; do git fetch origin $c -q && git log -1 --pretty=format:'%h %s' $c || exit 1; done) && \\\r\nhyperfine \\\r\n  --sort 'command' \\\r\n  --runs 2 \\\r\n  --export-json \"$BASE_DIR/rdx-${COMMITS// /-}-$STOP_HEIGHT-$DBCACHE-$CC.json\" \\\r\n  --parameter-list COMMIT ${COMMITS// /,} \\\r\n  --prepare \"killall bitcoind; rm -f $DATA_DIR/debug.log; git checkout {COMMIT}; git clean -fxd; git reset --hard; \\\r\n    cmake -B build -DCMAKE_BUILD_TYPE=Release -DENABLE_WALLET=OFF && cmake --build build -j$(nproc) --target bitcoind && \\\r\n    ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP_HEIGHT -dbcache=5000 -printtoconsole=0; sleep 100\" \\\r\n  --cleanup \"cp $DATA_DIR/debug.log $LOG_DIR/debug-{COMMIT}-$(date +%s).log\" \\\r\n  \"COMPILER=$CC ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP_HEIGHT -dbcache=$DBCACHE -blocksonly -reindex-chainstate -connect=0 -printtoconsole=0\"\r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n<summary>~2% faster with small dbcache</summary>\r\n\r\n> 156f9913a2 test: assert CScript allocation characteristics\r\n> a2a3e0cfd8 store `P2WSH`/`P2TR`/`P2PK` scripts inline\r\n\r\n```python\r\nBenchmark 1: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=888888 -dbcache=450 -blocksonly -reindex-chainstate -connect=0 -printtoconsole=0 (COMMIT = 156f9913a26598009c8356c34548002e6a6aba02)\r\n  Time (mean Â± Ïƒ):     19748.586 s Â±  3.502 s    [User: 35991.245 s, System: 2756.673 s]\r\n  Range (min â€¦ max):   19746.110 s â€¦ 19751.062 s    2 runs\r\n\r\nBenchmark 2: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=888888 -dbcache=450 -blocksonly -reindex-chainstate -connect=0 -printtoconsole=0 (COMMIT = a2a3e0cfd8549e3be03fd81e75ebb7527e9345d7)\r\n  Time (mean Â± Ïƒ):     19333.189 s Â±  6.061 s    [User: 35338.722 s, System: 2733.049 s]\r\n  Range (min â€¦ max):   19328.903 s â€¦ 19337.474 s    2 runs\r\n\r\nRelative speed comparison\r\n        1.02 Â±  0.00  COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=888888 -dbcache=450 -blocksonly -reindex-chainstate -connect=0 -printtoconsole=0 (COMMIT = 156f9913a26598009c8356c34548002e6a6aba02)\r\n        1.00          COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=888888 -dbcache=450 -blocksonly -reindex-chainstate -connect=0 -printtoconsole=0 (COMMIT = a2a3e0cfd8549e3be03fd81e75ebb7527e9345d7)\r\n```\r\n\r\n</details>\r\n\r\n### Full IBD\r\n\r\n<details>\r\n<summary>Benchmark with dbcache=450 on HDD</summary>\r\n\r\n```bash\r\nCOMMITS=\"156f9913a26598009c8356c34548002e6a6aba02 a2a3e0cfd8549e3be03fd81e75ebb7527e9345d7\"; \\\r\nSTOP_HEIGHT=888888; DBCACHE=450; \\\r\nCC=gcc; CXX=g++; \\\r\nBASE_DIR=\"/mnt/my_storage\"; DATA_DIR=\"$BASE_DIR/BitcoinData\"; LOG_DIR=\"$BASE_DIR/logs\"; \\\r\n(for c in $COMMITS; do git fetch origin $c -q && git log -1 --pretty=format:'%h %s' $c || exit 1; done) && \\\r\nhyperfine \\\r\n  --sort 'command' \\\r\n  --runs 2 \\\r\n  --export-json \"$BASE_DIR/rdx-${COMMITS// /-}-$STOP_HEIGHT-$DBCACHE-$CC.json\" \\\r\n  --parameter-list COMMIT ${COMMITS// /,} \\\r\n  --prepare \"killall bitcoind; rm -f $DATA_DIR/debug.log; git checkout {COMMIT}; git clean -fxd; git reset --hard; \\\r\n    cmake -B build -DCMAKE_BUILD_TYPE=Release -DENABLE_WALLET=OFF && cmake --build build -j$(nproc) --target bitcoind && \\\r\n    ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP_HEIGHT -dbcache=5000 -printtoconsole=0; sleep 100\" \\\r\n  --cleanup \"cp $DATA_DIR/debug.log $LOG_DIR/debug-{COMMIT}-$(date +%s).log\" \\\r\n  \"COMPILER=$CC ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP_HEIGHT -dbcache=$DBCACHE -blocksonly -reindex-chainstate -connect=0 -printtoconsole=0\"\r\n```\r\n</details>\r\n\r\n<details>\r\n<summary>~3% faster with small dbcache</summary>\r\n\r\n> 156f9913a2 test: assert CScript allocation characteristics\r\n> a2a3e0cfd8 store `P2WSH`/`P2TR`/`P2PK` scripts inline\r\n\r\n```python\r\nBenchmark 1: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=888888 -dbcache=450 -blocksonly -reindex-chainstate -connect=0 -printtoconsole=0 (COMMIT = 156f9913a26598009c8356c34548002e6a6aba02)\r\n  Time (mean Â± Ïƒ):     39873.924 s Â± 637.446 s    [User: 35537.079 s, System: 2668.529 s]\r\n  Range (min â€¦ max):   39423.182 s â€¦ 40324.667 s    2 runs\r\n\r\nBenchmark 2: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=888888 -dbcache=450 -blocksonly -reindex-chainstate -connect=0 -printtoconsole=0 (COMMI$ = a2a3e0cfd8549e3be03fd81e75ebb7527e9345d7)\r\n  Time (mean Â± Ïƒ):     38682.594 s Â±  7.327 s    [User: 34211.447 s, System: 2618.127 s]\r\n  Range (min â€¦ max):   38677.412 s â€¦ 38687.775 s    2 runs\r\n\r\nRelative speed comparison\r\n        1.03 Â±  0.02  COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=888888 -dbcache=450 -blocksonly -reindex-chainstate -connect=0 -printtoconsole=0 (COMMIT = 156f9913a26598009c8356c34548002e6a6aba02)\r\n        1.00          COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=888888 -dbcache=450 -blocksonly -reindex-chainstate -connect=0 -printtoconsole=0 (COMMIT = a2a3e0cfd8549e3be03fd81e75ebb7527e9345d7)\r\n```\r\n</details>\r\n\r\n<details>\r\n<summary>Benchmark with dbcache=45000 on HDD</summary>\r\n\r\n```bash\r\nCOMMITS=\"847a891cdfdf9cfd69a77a8688c995e532ea29db dc0c79a46b5663eddc0a4365b9b7de22cf3fefae\"; \\\r\nSTOP_HEIGHT=888888; DBCACHE=45000; \\\r\nCC=gcc; CXX=g++; \\\r\nBASE_DIR=\"/mnt/my_storage\"; DATA_DIR=\"$BASE_DIR/BitcoinData\"; LOG_DIR=\"$BASE_DIR/logs\"; \\\r\n(for c in $COMMITS; do git fetch origin $c -q && git log -1 --pretty=format:'%h %s' $c || exit 1; done) && \\\r\nhyperfine \\\r\n  --sort 'command' \\\r\n  --runs 2 \\\r\n  --export-json \"$BASE_DIR/ibd-${COMMITS// /-}-$STOP_HEIGHT-$DBCACHE-$CC.json\" \\\r\n  --parameter-list COMMIT ${COMMITS// /,} \\\r\n  --prepare \"killall bitcoind; rm -rf $DATA_DIR/*; git checkout {COMMIT}; git clean -fxd; git reset --hard; \\\r\n    cmake -B build -DCMAKE_BUILD_TYPE=Release -DENABLE_WALLET=OFF && cmake --build build -j$(nproc) --target bitcoind && \\\r\n    ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=1 -printtoconsole=0; sleep 100\" \\\r\n  --cleanup \"cp $DATA_DIR/debug.log $LOG_DIR/debug-{COMMIT}-$(date +%s).log\" \\\r\n  \"COMPILER=$CC ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP_HEIGHT -dbcache=$DBCACHE -blocksonly -printtoconsole=0\"\r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n<summary>~2% faster with very large dbcache</summary>\r\n\r\n> 847a891cdf test: assert CScript allocation characteristics\r\n> dc0c79a46b store `P2WSH`/`P2TR`/`P2PK` scripts inline\r\n\r\n```python\r\nBenchmark 1: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=888888 -dbcache=45000 -blocksonly -printtoconsole=0 (COMMIT = 847a891cdfdf9cfd69a77a8688c995e532ea29db)\r\n  Time (mean Â± Ïƒ):     39061.975 s Â± 366.257 s    [User: 37221.558 s, System: 1941.817 s]\r\n  Range (min â€¦ max):   38802.992 s â€¦ 39320.958 s    2 runs\r\n\r\nBenchmark 2: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=888888 -dbcache=45000 -blocksonly -printtoconsole=0 (COMMIT = dc0c79a46b5663eddc0a4365b9b7de22cf3fefae)\r\n  Time (mean Â± Ïƒ):     38214.234 s Â± 65.671 s    [User: 36851.441 s, System: 2103.990 s]\r\n  Range (min â€¦ max):   38167.797 s â€¦ 38260.670 s    2 runs\r\n\r\nRelative speed comparison\r\n        1.02 Â±  0.01  COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=888888 -dbcache=45000 -blocksonly -printtoconsole=0 (COMMIT = 847a891cdfdf9cfd69a77a8688c995e532ea29db)\r\n        1.00          COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=888888 -dbcache=45000 -blocksonly -printtoconsole=0 (COMMIT = dc0c79a46b5663eddc0a4365b9b7de22cf3fefae)\r\n```\r\n\r\n</details>\r\n\r\n### Memory\r\n\r\nNote that this was measured for `prevector<34>`, but should be basically the same for the current `36` as well.\r\n\r\n<details>\r\n<summary>prevector 28 massif measurement summary for assumeutxo loads</summary>\r\n\r\n```python\r\n-------------------------------------------------------------------------------\r\n  n       time(ms)         total(B)   useful-heap(B) extra-heap(B)    stacks(B)\r\n--------------------------------------------------------------------------------\r\n  0              0                0                0             0            0\r\n  1        142,755    4,881,866,480    4,646,778,126   235,088,354            0\r\n95.18% (4,646,778,126B) (heap allocation functions) malloc/new/new[], --alloc-fns, etc.\r\n->73.76% (3,600,809,984B) 0x5502B7: CCoinsViewCache::EmplaceCoinInternalDANGER(COutPoint&&, Coin&&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| ->73.76% (3,600,809,984B) 0x49DDCF: ChainstateManager::PopulateAndValidateSnapshot(Chainstate&, AutoFile&, node::SnapshotMetadata const&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|   ->73.76% (3,600,809,984B) 0x49F3CA: ChainstateManager::ActivateSnapshot(AutoFile&, node::SnapshotMetadata const&, bool) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|     ->73.76% (3,600,809,984B) 0x367A0F: loadtxoutset()::{lambda(RPCHelpMan const&, JSONRPCRequest const&)\r\n|       ->73.76% (3,600,809,984B) 0x3680F6: std::_Function_handler<UniValue (RPCHelpMan const&, JSONRPCRequest const&), loadtxoutset()::{lambda(RPCHelpMan const&, JSONRPCRequest const&)\r\n|         ->73.76% (3,600,809,984B) 0x60403B: RPCHelpMan::HandleRequest(JSONRPCRequest const&) const (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|           ->73.76% (3,600,809,984B) 0x373359: CRPCCommand::CRPCCommand(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, RPCHelpMan (*)())::{lambda(JSONRPCRequest const&, UniValue&, bool)\r\n|             ->73.76% (3,600,809,984B) 0x425F6C: ExecuteCommand(CRPCCommand const&, JSONRPCRequest const&, UniValue&, bool) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|               ->73.76% (3,600,809,984B) 0x427373: CRPCTable::execute(JSONRPCRequest const&) const (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|                 ->73.76% (3,600,809,984B) 0x4274C6: JSONRPCExec(JSONRPCRequest const&, bool) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|                   ->73.76% (3,600,809,984B) 0x4FF1C3: HTTPReq_JSONRPC(std::any const&, HTTPRequest*) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|                     ->73.76% (3,600,809,984B) 0x50CA81: WorkQueue<HTTPClosure>::Run() (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|                       ->73.76% (3,600,809,984B) 0x505F06: HTTPWorkQueueRun(WorkQueue<HTTPClosure>*, int) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|                         ->73.76% (3,600,809,984B) 0x49A6DB3: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.33)\r\n|                           ->73.76% (3,600,809,984B) 0x4CEBAA3: start_thread (pthread_create.c:447)\r\n|                             ->73.76% (3,600,809,984B) 0x4D78A33: clone (clone.S:100)\r\n|\r\n->08.19% (399,758,776B) 0x5522AC: std::__detail::_Hashtable_alloc<PoolAllocator<std::__detail::_Hash_node<std::pair<COutPoint const, CCoinsCacheEntry>, false>, 144ul, 8ul> >::_M_allocate_buckets(unsigned long) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| ->08.19% (399,758,776B) 0x5526AD: std::_Hashtable<COutPoint, std::pair<COutPoint const, CCoinsCacheEntry>, PoolAllocator<std::pair<COutPoint const, CCoinsCacheEntry>, 144ul, 8ul>, std::__detail::_Select1st, std::equal_to<COutPoint>, SaltedOutpointHasher, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|   ->08.19% (399,758,776B) 0x5528D5: std::_Hashtable<COutPoint, std::pair<COutPoint const, CCoinsCacheEntry>, PoolAllocator<std::pair<COutPoint const, CCoinsCacheEntry>, 144ul, 8ul>, std::__detail::_Select1st, std::equal_to<COutPoint>, SaltedOutpointHasher, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<COutPoint const, CCoinsCacheEntry>, false>*, unsigned long) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|     ->08.19% (399,758,776B) 0x550219: CCoinsViewCache::EmplaceCoinInternalDANGER(COutPoint&&, Coin&&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|       ->08.19% (399,758,776B) 0x49DDCF: ChainstateManager::PopulateAndValidateSnapshot(Chainstate&, AutoFile&, node::SnapshotMetadata const&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|         ->08.19% (399,758,776B) 0x49F3CA: ChainstateManager::ActivateSnapshot(AutoFile&, node::SnapshotMetadata const&, bool) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|           ->08.19% (399,758,776B) 0x367A0F: loadtxoutset()::{lambda(RPCHelpMan const&, JSONRPCRequest const&)\r\n|             ->08.19% (399,758,776B) 0x3680F6: std::_Function_handler<UniValue (RPCHelpMan const&, JSONRPCRequest const&), loadtxoutset()::{lambda(RPCHelpMan const&, JSONRPCRequest const&)\r\n|               ->08.19% (399,758,776B) 0x60403B: RPCHelpMan::HandleRequest(JSONRPCRequest const&) const (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|                 ->08.19% (399,758,776B) 0x373359: CRPCCommand::CRPCCommand(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, RPCHelpMan (*)())::{lambda(JSONRPCRequest const&, UniValue&, bool)\r\n|                   ->08.19% (399,758,776B) 0x425F6C: ExecuteCommand(CRPCCommand const&, JSONRPCRequest const&, UniValue&, bool) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|                     ->08.19% (399,758,776B) 0x427373: CRPCTable::execute(JSONRPCRequest const&) const (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|                       ->08.19% (399,758,776B) 0x4274C6: JSONRPCExec(JSONRPCRequest const&, bool) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|                         ->08.19% (399,758,776B) 0x4FF1C3: HTTPReq_JSONRPC(std::any const&, HTTPRequest*) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|                           ->08.19% (399,758,776B) 0x50CA81: WorkQueue<HTTPClosure>::Run() (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|                             ->08.19% (399,758,776B) 0x505F06: HTTPWorkQueueRun(WorkQueue<HTTPClosure>*, int) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|                               ->08.19% (399,758,776B) 0x49A6DB3: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.33)\r\n|                                 ->08.19% (399,758,776B) 0x4CEBAA3: start_thread (pthread_create.c:447)\r\n|                                   ->08.19% (399,758,776B) 0x4D78A33: clone (clone.S:100)\r\n|\r\n->07.53% (367,723,723B) 0x2F508F: prevector<28u, unsigned char, unsigned int, int>::change_capacity(unsigned int) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| ->07.53% (367,723,579B) 0x4A5D3F: prevector<28u, unsigned char, unsigned int, int>::resize(unsigned int) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| | ->07.52% (367,274,326B) 0x49DF47: ChainstateManager::PopulateAndValidateSnapshot(Chainstate&, AutoFile&, node::SnapshotMetadata const&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| | | ->07.52% (367,274,326B) 0x49F3CA: ChainstateManager::ActivateSnapshot(AutoFile&, node::SnapshotMetadata const&, bool) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| | |   ->07.52% (367,274,326B) 0x367A0F: loadtxoutset()::{lambda(RPCHelpMan const&, JSONRPCRequest const&)\r\n| | |     ->07.52% (367,274,326B) 0x3680F6: std::_Function_handler<UniValue (RPCHelpMan const&, JSONRPCRequest const&), loadtxoutset()::{lambda(RPCHelpMan const&, JSONRPCRequest const&)\r\n| | |       ->07.52% (367,274,326B) 0x60403B: RPCHelpMan::HandleRequest(JSONRPCRequest const&) const (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| | |         ->07.52% (367,274,326B) 0x373359: CRPCCommand::CRPCCommand(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, RPCHelpMan (*)())::{lambda(JSONRPCRequest const&, UniValue&, bool)\r\n| | |           ->07.52% (367,274,326B) 0x425F6C: ExecuteCommand(CRPCCommand const&, JSONRPCRequest const&, UniValue&, bool) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| | |             ->07.52% (367,274,326B) 0x427373: CRPCTable::execute(JSONRPCRequest const&) const (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| | |               ->07.52% (367,274,326B) 0x4274C6: JSONRPCExec(JSONRPCRequest const&, bool) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| | |                 ->07.52% (367,274,326B) 0x4FF1C3: HTTPReq_JSONRPC(std::any const&, HTTPRequest*) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| | |                   ->07.52% (367,274,326B) 0x50CA81: WorkQueue<HTTPClosure>::Run() (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| | |                     ->07.52% (367,274,326B) 0x505F06: HTTPWorkQueueRun(WorkQueue<HTTPClosure>*, int) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| | |                       ->07.52% (367,274,326B) 0x49A6DB3: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.33)\r\n| | |                         ->07.52% (367,274,326B) 0x4CEBAA3: start_thread (pthread_create.c:447)\r\n| | |                           ->07.52% (367,274,326B) 0x4D78A33: clone (clone.S:100)\r\n| | |\r\n| | ->00.01% (449,253B) in 1+ places, all below ms_print's threshold (01.00%)\r\n| |\r\n| ->00.00% (144B) in 1+ places, all below ms_print's threshold (01.00%)\r\n|\r\n->03.64% (177,834,800B) 0x286989: node::BlockManager::InsertBlockIndex(uint256 const&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| ->01.82% (88,980,600B) 0x28ABA8: kernel::BlockTreeDB::LoadBlockIndexGuts(Consensus::Params const&, std::function<CBlockIndex* (uint256 const&)>, util::SignalInterrupt const&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| | ->01.82% (88,980,600B) 0x28AFA8: node::BlockManager::LoadBlockIndex(std::optional<uint256> const&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| |   ->01.82% (88,980,600B) 0x28B9FE: node::BlockManager::LoadBlockIndexDB(std::optional<uint256> const&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| |     ->01.82% (88,980,600B) 0x48329F: ChainstateManager::LoadBlockIndex() (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| |       ->01.82% (88,980,600B) 0x29ABA7: node::CompleteChainstateInitialization(ChainstateManager&, node::ChainstateLoadOptions const&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| |         ->01.82% (88,980,600B) 0x29BB79: node::LoadChainstate(ChainstateManager&, kernel::CacheSizes const&, node::ChainstateLoadOptions const&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| |           ->01.82% (88,980,600B) 0x1EE0BE: InitAndLoadChainstate(node::NodeContext&, bool, bool, kernel::CacheSizes const&, ArgsManager const&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| |             ->01.82% (88,980,600B) 0x1F3C54: AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| |               ->01.82% (88,980,600B) 0x1BE757: main (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| |\r\n| ->01.82% (88,854,200B) 0x28ABC4: kernel::BlockTreeDB::LoadBlockIndexGuts(Consensus::Params const&, std::function<CBlockIndex* (uint256 const&)>, util::SignalInterrupt const&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|   ->01.82% (88,854,200B) 0x28AFA8: node::BlockManager::LoadBlockIndex(std::optional<uint256> const&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|     ->01.82% (88,854,200B) 0x28B9FE: node::BlockManager::LoadBlockIndexDB(std::optional<uint256> const&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|       ->01.82% (88,854,200B) 0x48329F: ChainstateManager::LoadBlockIndex() (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|         ->01.82% (88,854,200B) 0x29ABA7: node::CompleteChainstateInitialization(ChainstateManager&, node::ChainstateLoadOptions const&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|           ->01.82% (88,854,200B) 0x29BB79: node::LoadChainstate(ChainstateManager&, kernel::CacheSizes const&, node::ChainstateLoadOptions const&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|             ->01.82% (88,854,200B) 0x1EE0BE: InitAndLoadChainstate(node::NodeContext&, bool, bool, kernel::CacheSizes const&, ArgsManager const&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|               ->01.82% (88,854,200B) 0x1F3C54: AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|                 ->01.82% (88,854,200B) 0x1BE757: main (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|\r\n->02.06% (100,650,843B) in 1084 places, all below massif's threshold (1.00%)\r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n<summary>prevector 34 massif measurement summary for assumeutxo loads</summary>\r\n\r\n```python\r\n--------------------------------------------------------------------------------\r\n  n       time(ms)         total(B)   useful-heap(B) extra-heap(B)    stacks(B)\r\n--------------------------------------------------------------------------------\r\n  0              0                0                0             0            0\r\n  1         85,674    3,026,857,896    3,008,671,214    18,186,682            0\r\n99.40% (3,008,671,214B) (heap allocation functions) malloc/new/new[], --alloc-fns, etc.\r\n->84.57% (2,559,836,160B) 0x5511A7: CCoinsViewCache::EmplaceCoinInternalDANGER(COutPoint&&, Coin&&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| ->84.57% (2,559,836,160B) 0x49E98F: ChainstateManager::PopulateAndValidateSnapshot(Chainstate&, AutoFile&, node::SnapshotMetadata const&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|   ->84.57% (2,559,836,160B) 0x49FF9A: ChainstateManager::ActivateSnapshot(AutoFile&, node::SnapshotMetadata const&, bool) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|     ->84.57% (2,559,836,160B) 0x367FAF: loadtxoutset()::{lambda(RPCHelpMan const&, JSONRPCRequest const&)\r\n|       ->84.57% (2,559,836,160B) 0x368686: std::_Function_handler<UniValue (RPCHelpMan const&, JSONRPCRequest const&), loadtxoutset()::{lambda(RPCHelpMan const&, JSONRPCRequest const&)\r\n|         ->84.57% (2,559,836,160B) 0x60446B: RPCHelpMan::HandleRequest(JSONRPCRequest const&) const (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|           ->84.57% (2,559,836,160B) 0x373939: CRPCCommand::CRPCCommand(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, RPCHelpMan (*)())::{lambda(JSONRPCRequest const&, UniValue&, bool)\r\n|             ->84.57% (2,559,836,160B) 0x4269CC: ExecuteCommand(CRPCCommand const&, JSONRPCRequest const&, UniValue&, bool) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|               ->84.57% (2,559,836,160B) 0x427DD3: CRPCTable::execute(JSONRPCRequest const&) const (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|                 ->84.57% (2,559,836,160B) 0x427F26: JSONRPCExec(JSONRPCRequest const&, bool) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|                   ->84.57% (2,559,836,160B) 0x4FFED3: HTTPReq_JSONRPC(std::any const&, HTTPRequest*) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|                     ->84.57% (2,559,836,160B) 0x50D791: WorkQueue<HTTPClosure>::Run() (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|                       ->84.57% (2,559,836,160B) 0x506C16: HTTPWorkQueueRun(WorkQueue<HTTPClosure>*, int) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|                         ->84.57% (2,559,836,160B) 0x49A6DB3: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.33)\r\n|                           ->84.57% (2,559,836,160B) 0x4CEBAA3: start_thread (pthread_create.c:447)\r\n|                             ->84.57% (2,559,836,160B) 0x4D78A33: clone (clone.S:100)\r\n|\r\n->06.50% (196,857,944B) 0x5531FC: std::__detail::_Hashtable_alloc<PoolAllocator<std::__detail::_Hash_node<std::pair<COutPoint const, CCoinsCacheEntry>, false>, 152ul, 8ul> >::_M_allocate_buckets(unsigned long) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| ->06.50% (196,857,944B) 0x5535FD: std::_Hashtable<COutPoint, std::pair<COutPoint const, CCoinsCacheEntry>, PoolAllocator<std::pair<COutPoint const, CCoinsCacheEntry>, 152ul, 8ul>, std::__detail::_Select1st, std::equal_to<COutPoint>, SaltedOutpointHasher, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_rehash(unsigned long, unsigned long const&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|   ->06.50% (196,857,944B) 0x553825: std::_Hashtable<COutPoint, std::pair<COutPoint const, CCoinsCacheEntry>, PoolAllocator<std::pair<COutPoint const, CCoinsCacheEntry>, 152ul, 8ul>, std::__detail::_Select1st, std::equal_to<COutPoint>, SaltedOutpointHasher, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node<std::pair<COutPoint const, CCoinsCacheEntry>, false>*, unsigned long) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|     ->06.50% (196,857,944B) 0x551107: CCoinsViewCache::EmplaceCoinInternalDANGER(COutPoint&&, Coin&&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|       ->06.50% (196,857,944B) 0x49E98F: ChainstateManager::PopulateAndValidateSnapshot(Chainstate&, AutoFile&, node::SnapshotMetadata const&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|         ->06.50% (196,857,944B) 0x49FF9A: ChainstateManager::ActivateSnapshot(AutoFile&, node::SnapshotMetadata const&, bool) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|           ->06.50% (196,857,944B) 0x367FAF: loadtxoutset()::{lambda(RPCHelpMan const&, JSONRPCRequest const&)\r\n|             ->06.50% (196,857,944B) 0x368686: std::_Function_handler<UniValue (RPCHelpMan const&, JSONRPCRequest const&), loadtxoutset()::{lambda(RPCHelpMan const&, JSONRPCRequest const&)\r\n|               ->06.50% (196,857,944B) 0x60446B: RPCHelpMan::HandleRequest(JSONRPCRequest const&) const (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|                 ->06.50% (196,857,944B) 0x373939: CRPCCommand::CRPCCommand(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, RPCHelpMan (*)())::{lambda(JSONRPCRequest const&, UniValue&, bool)\r\n|                   ->06.50% (196,857,944B) 0x4269CC: ExecuteCommand(CRPCCommand const&, JSONRPCRequest const&, UniValue&, bool) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|                     ->06.50% (196,857,944B) 0x427DD3: CRPCTable::execute(JSONRPCRequest const&) const (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|                       ->06.50% (196,857,944B) 0x427F26: JSONRPCExec(JSONRPCRequest const&, bool) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|                         ->06.50% (196,857,944B) 0x4FFED3: HTTPReq_JSONRPC(std::any const&, HTTPRequest*) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|                           ->06.50% (196,857,944B) 0x50D791: WorkQueue<HTTPClosure>::Run() (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|                             ->06.50% (196,857,944B) 0x506C16: HTTPWorkQueueRun(WorkQueue<HTTPClosure>*, int) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|                               ->06.50% (196,857,944B) 0x49A6DB3: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.33)\r\n|                                 ->06.50% (196,857,944B) 0x4CEBAA3: start_thread (pthread_create.c:447)\r\n|                                   ->06.50% (196,857,944B) 0x4D78A33: clone (clone.S:100)\r\n|\r\n->05.88% (177,834,800B) 0x286859: node::BlockManager::InsertBlockIndex(uint256 const&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| ->02.94% (88,980,600B) 0x28AA78: kernel::BlockTreeDB::LoadBlockIndexGuts(Consensus::Params const&, std::function<CBlockIndex* (uint256 const&)>, util::SignalInterrupt const&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| | ->02.94% (88,980,600B) 0x28AE78: node::BlockManager::LoadBlockIndex(std::optional<uint256> const&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| |   ->02.94% (88,980,600B) 0x28B8CE: node::BlockManager::LoadBlockIndexDB(std::optional<uint256> const&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| |     ->02.94% (88,980,600B) 0x483E9F: ChainstateManager::LoadBlockIndex() (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| |       ->02.94% (88,980,600B) 0x29ABB7: node::CompleteChainstateInitialization(ChainstateManager&, node::ChainstateLoadOptions const&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| |         ->02.94% (88,980,600B) 0x29BB89: node::LoadChainstate(ChainstateManager&, kernel::CacheSizes const&, node::ChainstateLoadOptions const&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| |           ->02.94% (88,980,600B) 0x1EE0EE: InitAndLoadChainstate(node::NodeContext&, bool, bool, kernel::CacheSizes const&, ArgsManager const&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| |             ->02.94% (88,980,600B) 0x1F3C84: AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| |               ->02.94% (88,980,600B) 0x1BE717: main (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n| |\r\n| ->02.94% (88,854,200B) 0x28AA94: kernel::BlockTreeDB::LoadBlockIndexGuts(Consensus::Params const&, std::function<CBlockIndex* (uint256 const&)>, util::SignalInterrupt const&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|   ->02.94% (88,854,200B) 0x28AE78: node::BlockManager::LoadBlockIndex(std::optional<uint256> const&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|     ->02.94% (88,854,200B) 0x28B8CE: node::BlockManager::LoadBlockIndexDB(std::optional<uint256> const&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|       ->02.94% (88,854,200B) 0x483E9F: ChainstateManager::LoadBlockIndex() (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|         ->02.94% (88,854,200B) 0x29ABB7: node::CompleteChainstateInitialization(ChainstateManager&, node::ChainstateLoadOptions const&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|           ->02.94% (88,854,200B) 0x29BB89: node::LoadChainstate(ChainstateManager&, kernel::CacheSizes const&, node::ChainstateLoadOptions const&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|             ->02.94% (88,854,200B) 0x1EE0EE: InitAndLoadChainstate(node::NodeContext&, bool, bool, kernel::CacheSizes const&, ArgsManager const&) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|               ->02.94% (88,854,200B) 0x1F3C84: AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*) (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|                 ->02.94% (88,854,200B) 0x1BE717: main (in /mnt/my_storage/bitcoin/build/bin/bitcoind)\r\n|\r\n```\r\n\r\n</details>\r\n\r\nDiffing the two reveals a dramatic difference: `prevector<28u, unsigned char, unsigned int, int>::change_capacity` is 07.53% of prevector<28>, but is completely missing in prevector<34> since the P2WSH/P2TR scripts are now allocated inline and don't need any capacity change anymore.\r\n\r\nThe other difference visible directly in these peak snapshot header lines is the extra-heap(B):\r\n* prevector<28> peaks at ~235 MiB of extra-heap.\r\n* prevector<34> peaks at only ~21 MiB of extra-heap.\r\n\r\nThese explain the 7% speedup for large memory use cases: elimination of millions of small, separate heap allocations triggered when CScripts (like P2WSH/P2TR) exceed the 28-byte inline limit, each incurring overhead.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#issuecomment-2806901240",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32279"
    },
    {
      "event": "renamed",
      "id": 17276569360,
      "node_id": "RTE_lADOABII586yoiw8zwAAAAQFw4cQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17276569360",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-15T20:54:15Z",
      "rename": {
        "from": "[IBD] prevector: allocate `P2WSH` and `P2TR` scripts on stack as well",
        "to": "[IBD] prevector: allocate `P2WSH`/`P2TR`/`P2PK` scripts on stack"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17276589011,
      "node_id": "HRFPE_lADOABII586yoiw8zwAAAAQFw9PT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17276589011",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "7a5a6ac8c9532c2e009626ea6c50acf3cb61f965",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/7a5a6ac8c9532c2e009626ea6c50acf3cb61f965",
      "created_at": "2025-04-15T20:55:20Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17276983660,
      "node_id": "HRFPE_lADOABII586yoiw8zwAAAAQFydls",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17276983660",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "75888f99f81263841d45505088f2ac93e9ad1b78",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/75888f99f81263841d45505088f2ac93e9ad1b78",
      "created_at": "2025-04-15T21:18:15Z"
    },
    {
      "event": "labeled",
      "id": 17276984399,
      "node_id": "LE_lADOABII586yoiw8zwAAAAQFydxP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17276984399",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-15T21:18:21Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2807542533,
      "node_id": "IC_kwDOABII586nV7MF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2807542533",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-15T21:18:22Z",
      "updated_at": "2025-04-15T21:18:22Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/40612214686</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#issuecomment-2807542533",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32279"
    },
    {
      "event": "unlabeled",
      "id": 17277759715,
      "node_id": "UNLE_lADOABII586yoiw8zwAAAAQF1bDj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17277759715",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-15T22:27:03Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "ready_for_review",
      "id": 17277864550,
      "node_id": "RFRE_lADOABII586yoiw8zwAAAAQF10pm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17277864550",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-15T22:37:48Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17282861808,
      "node_id": "HRFPE_lADOABII586yoiw8zwAAAAQGI4rw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17282861808",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "21077a667e74d94d6171d7b57f3e45ddef93f195",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/21077a667e74d94d6171d7b57f3e45ddef93f195",
      "created_at": "2025-04-16T06:44:16Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17283066556,
      "node_id": "HRFPE_lADOABII586yoiw8zwAAAAQGJqq8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17283066556",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "f3fd198883d8284bd1fb3335c9b34338b321dee3",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/f3fd198883d8284bd1fb3335c9b34338b321dee3",
      "created_at": "2025-04-16T06:56:41Z"
    },
    {
      "event": "labeled",
      "id": 17284143522,
      "node_id": "LE_lADOABII586yoiw8zwAAAAQGNxmi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17284143522",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-16T08:01:36Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2808735694,
      "node_id": "IC_kwDOABII586naefO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2808735694",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-16T08:01:38Z",
      "updated_at": "2025-04-16T08:01:38Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/40633401176</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#issuecomment-2808735694",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32279"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17284208256,
      "node_id": "HRFPE_lADOABII586yoiw8zwAAAAQGOBaA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17284208256",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "0347061f6a53782c5ed177378e68c56a74f92ed1",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/0347061f6a53782c5ed177378e68c56a74f92ed1",
      "created_at": "2025-04-16T08:05:21Z"
    },
    {
      "event": "unlabeled",
      "id": 17285165606,
      "node_id": "UNLE_lADOABII586yoiw8zwAAAAQGRrIm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17285165606",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-16T09:05:18Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2810386877,
      "node_id": "IC_kwDOABII586ngxm9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2810386877",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-16T18:27:45Z",
      "updated_at": "2025-04-16T18:27:45Z",
      "author_association": "MEMBER",
      "body": "Since this results in more flushes, I think we should wait for the composition of the UTXO set to change to the point that this provides an improvement for nodes with default dbcache.",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#issuecomment-2810386877",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32279"
    },
    {
      "event": "commented",
      "id": 2810593017,
      "node_id": "IC_kwDOABII586nhj75",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2810593017",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-16T19:46:56Z",
      "updated_at": "2025-04-16T19:46:56Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks for the idea and comment @achow101!\r\nI'll measure IBD with default settings after the benchmarking servers free up, but so far it seems that there's barely any slowdown (if any) for default dbcache and a measurable speedup for larger memory settings. So we might already be at the point where it's either a neutral or a net positive change.\r\nAnd given that we have a few other PRs in the queue that speed up small dbcache IBDs as well (see https://github.com/bitcoin/bitcoin/pull/32043), we can cover all important scenarios via multiple focused changes.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#issuecomment-2810593017",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32279"
    },
    {
      "event": "mentioned",
      "id": 17294996874,
      "node_id": "MEE_lADOABII586yoiw8zwAAAAQG3LWK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17294996874",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-16T19:46:58Z"
    },
    {
      "event": "subscribed",
      "id": 17294996901,
      "node_id": "SE_lADOABII586yoiw8zwAAAAQG3LWl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17294996901",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-16T19:46:58Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17301655835,
      "node_id": "HRFPE_lADOABII586yoiw8zwAAAAQHQlEb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17301655835",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "a2a3e0cfd8549e3be03fd81e75ebb7527e9345d7",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/a2a3e0cfd8549e3be03fd81e75ebb7527e9345d7",
      "created_at": "2025-04-17T07:46:30Z"
    },
    {
      "event": "commented",
      "id": 2814858797,
      "node_id": "IC_kwDOABII586nx1Yt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2814858797",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-18T07:55:20Z",
      "updated_at": "2025-04-19T19:40:24Z",
      "author_association": "CONTRIBUTOR",
      "body": "A few previous measurements were done on `34` byte prevector, the latest version bumped it to `36` (which included P2PK scripts inline as well).\r\nI've rerun the `AssumeUTXO`, `reindex-chainstate` and `IBD` benchmarks (both on *SSD* and *HDD*, since they have different performance profiles) and couldn't find a single instance where `master` was any faster.\r\n\r\n> this provides an improvement for nodes with default dbcache\r\n\r\n@achow101, what other usecases do you think I should measure to make sure this is indeed the case?",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#issuecomment-2814858797",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32279"
    },
    {
      "event": "mentioned",
      "id": 17316934719,
      "node_id": "MEE_lADOABII586yoiw8zwAAAAQIK3Q_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17316934719",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-18T07:55:21Z"
    },
    {
      "event": "subscribed",
      "id": 17316934730,
      "node_id": "SE_lADOABII586yoiw8zwAAAAQIK3RK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17316934730",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-18T07:55:21Z"
    },
    {
      "event": "reviewed",
      "id": 2778469403,
      "node_id": "PRR_kwDOABII586lnBQb",
      "url": null,
      "actor": null,
      "commit_id": "a2a3e0cfd8549e3be03fd81e75ebb7527e9345d7",
      "commit_url": null,
      "created_at": null,
      "author_association": "NONE",
      "user": {
        "login": "kuegi",
        "id": 29012906,
        "node_id": "MDQ6VXNlcjI5MDEyOTA2",
        "avatar_url": "https://avatars.githubusercontent.com/u/29012906?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kuegi",
        "html_url": "https://github.com/kuegi",
        "followers_url": "https://api.github.com/users/kuegi/followers",
        "following_url": "https://api.github.com/users/kuegi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kuegi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kuegi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kuegi/subscriptions",
        "organizations_url": "https://api.github.com/users/kuegi/orgs",
        "repos_url": "https://api.github.com/users/kuegi/repos",
        "events_url": "https://api.github.com/users/kuegi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kuegi/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#pullrequestreview-2778469403",
      "submitted_at": "2025-04-18T12:35:43Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279"
    },
    {
      "event": "commented",
      "id": 2816837610,
      "node_id": "IC_kwDOABII586n5Yfq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2816837610",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-19T19:31:30Z",
      "updated_at": "2025-04-19T19:31:30Z",
      "author_association": "MEMBER",
      "body": "Nit: in title/description of the PR, I don't think it's accurate to say \"on the stack\". While there are occasionally CScript objects created on the stack, the vast majority is inside CCoinsCacheDb, where they are still heap-allocated. The benefit of the change here is that some of these would no longer need a *separate* heap allocation per CScript.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#issuecomment-2816837610",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32279"
    },
    {
      "event": "renamed",
      "id": 17329508839,
      "node_id": "RTE_lADOABII586yoiw8zwAAAAQI61Hn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17329508839",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-19T19:35:25Z",
      "rename": {
        "from": "[IBD] prevector: allocate `P2WSH`/`P2TR`/`P2PK` scripts on stack",
        "to": "[IBD] prevector: store `P2WSH`/`P2TR`/`P2PK` scripts inline"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17329513745,
      "node_id": "HRFPE_lADOABII586yoiw8zwAAAAQI62UR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17329513745",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "365f82f63eec87bde0913ccbf3ed7334903ef1b7",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/365f82f63eec87bde0913ccbf3ed7334903ef1b7",
      "created_at": "2025-04-19T19:38:44Z"
    },
    {
      "event": "commented",
      "id": 2816840182,
      "node_id": "IC_kwDOABII586n5ZH2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2816840182",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-19T19:39:44Z",
      "updated_at": "2025-04-19T19:39:44Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thank you, I have used inline/stack interchangeably - this is a lot better, appreciate the correction.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#issuecomment-2816840182",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32279"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17329519168,
      "node_id": "HRFPE_lADOABII586yoiw8zwAAAAQI63pA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17329519168",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "43e003f893d093e8825a1ba267691b437cd48347",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/43e003f893d093e8825a1ba267691b437cd48347",
      "created_at": "2025-04-19T19:42:04Z"
    },
    {
      "event": "commented",
      "id": 2817037407,
      "node_id": "IC_kwDOABII586n6JRf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2817037407",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-20T07:18:02Z",
      "updated_at": "2025-07-22T18:44:02Z",
      "author_association": "CONTRIBUTOR",
      "body": "Finished a full reindex-chainstate with default dbcache=450 on HDD\r\n\r\n<details>\r\n<summary>Benchmark</summary>\r\n\r\n```bash\r\nCOMMITS=\"156f9913a26598009c8356c34548002e6a6aba02 a2a3e0cfd8549e3be03fd81e75ebb7527e9345d7\"; \\\r\nSTOP_HEIGHT=888888; DBCACHE=450; \\\r\nCC=gcc; CXX=g++; \\\r\nBASE_DIR=\"/mnt/my_storage\"; DATA_DIR=\"$BASE_DIR/BitcoinData\"; LOG_DIR=\"$BASE_DIR/logs\"; \\\r\n(for c in $COMMITS; do git fetch origin $c -q && git log -1 --pretty=format:'%h %s' $c || exit 1; done) && \\\r\nhyperfine \\\r\n  --sort 'command' \\\r\n  --runs 2 \\\r\n  --export-json \"$BASE_DIR/rdx-${COMMITS// /-}-$STOP_HEIGHT-$DBCACHE-$CC.json\" \\\r\n  --parameter-list COMMIT ${COMMITS// /,} \\\r\n  --prepare \"killall bitcoind; rm -f $DATA_DIR/debug.log; git checkout {COMMIT}; git clean -fxd; git reset --hard; \\\r\n    cmake -B build -DCMAKE_BUILD_TYPE=Release -DENABLE_WALLET=OFF && cmake --build build -j$(nproc) --target bitcoind && \\\r\n    ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP_HEIGHT -dbcache=5000 -printtoconsole=0; sleep 100\" \\\r\n  --cleanup \"cp $DATA_DIR/debug.log $LOG_DIR/debug-{COMMIT}-$(date +%s).log\" \\\r\n  \"COMPILER=$CC ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP_HEIGHT -dbcache=$DBCACHE -blocksonly -reindex-chainstate -connect=0 -printtoconsole=0\"\r\n```\r\n</details>\r\n\r\n<details>\r\n<summary>~3% faster with small dbcache (despite more flushes)</summary>\r\n\r\n> 156f9913a2 test: assert CScript allocation characteristics\r\n> a2a3e0cfd8 store `P2WSH`/`P2TR`/`P2PK` scripts inline\r\n\r\n```python\r\nBenchmark 1: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=888888 -dbcache=450 -blocksonly -reindex-chainstate -connect=0 -printtoconsole=0 (COMMIT = 156f9913a26598009c8356c34548002e6a6aba02)\r\n  Time (mean Â± Ïƒ):     39873.924 s Â± 637.446 s    [User: 35537.079 s, System: 2668.529 s]\r\n  Range (min â€¦ max):   39423.182 s â€¦ 40324.667 s    2 runs\r\n\r\nBenchmark 2: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=888888 -dbcache=450 -blocksonly -reindex-chainstate -connect=0 -printtoconsole=0 (COMMI$ = a2a3e0cfd8549e3be03fd81e75ebb7527e9345d7)\r\n  Time (mean Â± Ïƒ):     38682.594 s Â±  7.327 s    [User: 34211.447 s, System: 2618.127 s]\r\n  Range (min â€¦ max):   38677.412 s â€¦ 38687.775 s    2 runs\r\n\r\nRelative speed comparison\r\n        1.03 Â±  0.02  COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=888888 -dbcache=450 -blocksonly -reindex-chainstate -connect=0 -printtoconsole=0 (COMMIT = 156f9913a26598009c8356c34548002e6a6aba02)\r\n        1.00          COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=888888 -dbcache=450 -blocksonly -reindex-chainstate -connect=0 -printtoconsole=0 (COMMIT = a2a3e0cfd8549e3be03fd81e75ebb7527e9345d7)\r\n```\r\n</details>",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#issuecomment-2817037407",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32279"
    },
    {
      "event": "reviewed",
      "id": 2782332374,
      "node_id": "PRR_kwDOABII586l1wXW",
      "url": null,
      "actor": null,
      "commit_id": "43e003f893d093e8825a1ba267691b437cd48347",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#pullrequestreview-2782332374",
      "submitted_at": "2025-04-21T22:10:43Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279"
    },
    {
      "event": "comment_deleted",
      "id": 17350140285,
      "node_id": "CDE_lADOABII586yoiw8zwAAAAQKJiF9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17350140285",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-22T09:03:59Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17352022089,
      "node_id": "HRFPE_lADOABII586yoiw8zwAAAAQKQthJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17352022089",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "1abeadee083e53d49df957992170298bb33c638e",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/1abeadee083e53d49df957992170298bb33c638e",
      "created_at": "2025-04-22T11:13:04Z"
    },
    {
      "event": "reviewed",
      "id": 2785603788,
      "node_id": "PRR_kwDOABII586mCPDM",
      "url": null,
      "actor": null,
      "commit_id": "1abeadee083e53d49df957992170298bb33c638e",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#pullrequestreview-2785603788",
      "submitted_at": "2025-04-22T23:38:04Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17366729307,
      "node_id": "HRFPE_lADOABII586yoiw8zwAAAAQLI0Jb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17366729307",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "306c89f725eeaab397bb952671a296c2d14eb5f3",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/306c89f725eeaab397bb952671a296c2d14eb5f3",
      "created_at": "2025-04-23T09:00:04Z"
    },
    {
      "event": "review_requested",
      "id": 17369042476,
      "node_id": "RRE_lADOABII586yoiw8zwAAAAQLRo4s",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17369042476",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-23T11:14:23Z",
      "requested_reviewer": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "labeled",
      "id": 17443604221,
      "node_id": "LE_lADOABII586yoiw8zwAAAAQPuEb9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17443604221",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-28T22:24:39Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17451675840,
      "node_id": "HRFPE_lADOABII586yoiw8zwAAAAQQM3DA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17451675840",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "3170e2c1626696ddfa8ed7ecb743f12d221e2a39",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/3170e2c1626696ddfa8ed7ecb743f12d221e2a39",
      "created_at": "2025-04-29T09:44:20Z"
    },
    {
      "event": "commented",
      "id": 2838139448,
      "node_id": "IC_kwDOABII586pKpI4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2838139448",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-29T09:44:37Z",
      "updated_at": "2025-04-29T09:44:37Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased to cover new tests to resolve new CI failure.\r\nAlso adjusted the test comments to mention heap/stack less often.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#issuecomment-2838139448",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32279"
    },
    {
      "event": "unlabeled",
      "id": 17452844689,
      "node_id": "UNLE_lADOABII586yoiw8zwAAAAQQRUaR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17452844689",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-29T11:05:40Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "referenced",
      "id": 18028072815,
      "node_id": "REFE_lADOABII586yoiw8zwAAAAQyjo9v",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18028072815",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "83bb9899c648d54af6d4cd13015d2e414504f9e6",
      "commit_url": "https://api.github.com/repos/luke-jr/bitcoin/commits/83bb9899c648d54af6d4cd13015d2e414504f9e6",
      "created_at": "2025-06-06T19:49:29Z"
    },
    {
      "event": "referenced",
      "id": 18028072828,
      "node_id": "REFE_lADOABII586yoiw8zwAAAAQyjo98",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18028072828",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "5d37f3d52df37f0d784e2a65c6ccaf34aba6ef80",
      "commit_url": "https://api.github.com/repos/luke-jr/bitcoin/commits/5d37f3d52df37f0d784e2a65c6ccaf34aba6ef80",
      "created_at": "2025-06-06T19:49:29Z"
    },
    {
      "event": "referenced",
      "id": 18028072844,
      "node_id": "REFE_lADOABII586yoiw8zwAAAAQyjo-M",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18028072844",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "5ff88009a03b93c7a02cb3c7576f4f09d1246df4",
      "commit_url": "https://api.github.com/repos/luke-jr/bitcoin/commits/5ff88009a03b93c7a02cb3c7576f4f09d1246df4",
      "created_at": "2025-06-06T19:49:29Z"
    },
    {
      "event": "reviewed",
      "id": 3037090526,
      "node_id": "PRR_kwDOABII5861BlLe",
      "url": null,
      "actor": null,
      "commit_id": "3170e2c1626696ddfa8ed7ecb743f12d221e2a39",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#pullrequestreview-3037090526",
      "submitted_at": "2025-07-21T11:26:24Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18734093013,
      "node_id": "HRFPE_lADOABII586yoiw8zwAAAARco5LV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18734093013",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "f493900af0e1791debc752c8ef796ab1dad914ea",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/f493900af0e1791debc752c8ef796ab1dad914ea",
      "created_at": "2025-07-21T17:49:01Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18734612706,
      "node_id": "HRFPE_lADOABII586yoiw8zwAAAARcq4Di",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18734612706",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "f7d9f4510d537b280808e1e8e203c9445c8ad4df",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/f7d9f4510d537b280808e1e8e203c9445c8ad4df",
      "created_at": "2025-07-21T18:22:56Z"
    },
    {
      "event": "reviewed",
      "id": 3039141524,
      "node_id": "PRR_kwDOABII5861JZ6U",
      "url": null,
      "actor": null,
      "commit_id": "f493900af0e1791debc752c8ef796ab1dad914ea",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Thanks, applied most of your comments + a few additional cleanups.\r\nThe first push was a simple rebase, [the second contains the changes](https://github.com/bitcoin/bitcoin/compare/f493900af0e1791debc752c8ef796ab1dad914ea..f7d9f4510d537b280808e1e8e203c9445c8ad4df).",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#pullrequestreview-3039141524",
      "submitted_at": "2025-07-21T18:22:57Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279"
    },
    {
      "event": "reviewed",
      "id": 3042653949,
      "node_id": "PRR_kwDOABII5861Wzb9",
      "url": null,
      "actor": null,
      "commit_id": "ec0b90e40e21ccb97c57373f7a7665ab9554acec",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "I haven't tested IBD/reindex performance.\n\nreview ACK f7d9f4510d537b280808e1e8e203c9445c8ad4df ðŸ´\n\n<details><summary>Show signature</summary>\n\nSignature:\n\n```\nuntrusted comment: signature from minisign secret key on empty file; verify via: minisign -Vm \"${path_to_any_empty_file}\" -P RWTRmVTMeKV5noAMqVlsMugDDCyyTSbA3Re5AkUrhvLVln0tSaFWglOw -x \"${path_to_this_whole_four_line_signature_blob}\"\nRUTRmVTMeKV5npGrKx1nqXCw5zeVHdtdYURB/KlyA/LMFgpNCs+SkW9a8N95d+U4AP1RJMi+krxU1A3Yux4bpwZNLvVBKy0wLgM=\ntrusted comment: review ACK f7d9f4510d537b280808e1e8e203c9445c8ad4df ðŸ´\nnXDCykVC7pudYdduUKbJSXeg0XwPp/YhNfksikOYMhOyQXyHf4x9gENBZX6FGMcUav92tl9Hna3Z5RXQAOddDQ==\n```\n\n</details>\n",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#pullrequestreview-3042653949",
      "submitted_at": "2025-07-22T12:13:06Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279"
    },
    {
      "event": "commented",
      "id": 3109808579,
      "node_id": "IC_kwDOABII5865W-nD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3109808579",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-23T19:06:26Z",
      "updated_at": "2025-07-26T00:02:05Z",
      "author_association": "CONTRIBUTOR",
      "body": "I have remeasured `-reindex-chainstate` speed by running the rebased PR (now that other optimizations were merged) until 900k blocks twice before and twice after, and the speedup is still ~4%:\r\n<img width=\"479\" height=\"296\" alt=\"image\" src=\"https://github.com/user-attachments/assets/19f2f7ee-8b0d-461a-90df-fdc610521f8b\" />\r\n\r\n<details>\r\n<summary>Details</summary>\r\n\r\n```python\r\nCOMMITS=\"7129c9ea8e950f50bdc56d88c57617c66c90bb8a f7d9f4510d537b280808e1e8e203c9445c8ad4df\"; \\                     \r\nSTOP=900000; DBCACHE=5000; \\                                                                                                                                                   \r\nCC=gcc; CXX=g++; \\                                                                                                                                                             \r\nBASE_DIR=\"/mnt/my_storage\"; DATA_DIR=\"$BASE_DIR/BitcoinData\"; LOG_DIR=\"$BASE_DIR/logs\"; \\\r\n(echo \"\"; for c in $COMMITS; do git fetch -q origin $c && git log -1 --pretty='%h %s' $c || exit 1; done; echo \"\") && \\\r\nhyperfine \\\r\n  --sort command \\\r\n  --runs 2 \\\r\n  --export-json \"$BASE_DIR/rdx-$(sed -E 's/(\\w{8})\\w+ ?/\\1-/g;s/-$//'<<<\"$COMMITS\")-$STOP-$DBCACHE-$CC.json\" \\\r\n  --parameter-list COMMIT ${COMMITS// /,} \\ \r\n  --prepare \"killall bitcoind; rm -f $DATA_DIR/debug.log; git checkout {COMMIT}; git clean -fxd; git reset --hard && \\\r\n    cmake -B build -G Ninja -DCMAKE_BUILD_TYPE=Release && ninja -C build bitcoind && \\\r\n    ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP -dbcache=1000 -printtoconsole=0; sleep 10\" \\\r\n  --cleanup \"cp $DATA_DIR/debug.log $LOG_DIR/debug-{COMMIT}-$(date +%s).log\" \\\r\n  \"COMPILER=$CC ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP -dbcache=$DBCACHE -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0\"\r\n\r\n7129c9ea8e Merge bitcoin/bitcoin#32827: mempool: Avoid needless vtx iteration during IBD\r\nf7d9f4510d prevector: store P2WSH/P2TR/P2PK scripts inline\r\n\r\nBenchmark 1: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=900000 -dbcache=5000 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 7129c9ea8e950f50bdc56d88c57617c66c90bb8a)\r\n  Time (mean Â± Ïƒ):     17108.190 s Â± 48.793 s    [User: 30728.280 s, System: 987.269 s]                                                                                        \r\n  Range (min â€¦ max):   17073.688 s â€¦ 17142.691 s    2 runs                                                                                                                     \r\n                                                                                       \r\nBenchmark 2: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=900000 -dbcache=5000 -reindex-chainstate -blocksonly -connect=0 -printtocons$le=0 (COMMIT = f7d9f4510d537b280808e1e8e203c9445c8ad4df)\r\n  Time (mean Â± Ïƒ):     16510.352 s Â± 69.453 s    [User: 29862.737 s, System: 943.983 s]\r\n  Range (min â€¦ max):   16461.241 s â€¦ 16559.463 s    2 runs\r\n  \r\nRelative speed comparison\r\n        1.04 Â±  0.01  COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=900000 -dbcache=5000 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 7129c9ea8e950f50bdc56d88c57617c66c90bb8a)\r\n        1.00          COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=900000 -dbcache=5000 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = f7d9f4510d537b280808e1e8e203c9445c8ad4df)\r\n```\r\n\r\n</details>\r\n\r\nEdit:\r\nTo show the exact behavior, I've plotted the height-vs-time (and the coins-vs-time) before and after:\r\n* 7129c9ea8e is master\r\n* f7d9f4510d is this PR\r\n<img width=\"4500\" height=\"3000\" alt=\"time_vs_height\" src=\"https://github.com/user-attachments/assets/0394ff0b-9947-497f-b658-7bb4f3d7e398\" />\r\n\r\n<img width=\"4500\" height=\"3000\" alt=\"cache_coins_vs_time\" src=\"https://github.com/user-attachments/assets/ad6f4a45-d33a-4332-ab62-162df73c454d\" />\r\n\r\n<img width=\"4500\" height=\"3000\" alt=\"cache_vs_time\" src=\"https://github.com/user-attachments/assets/4e55beac-8347-4ab2-849e-8ac7df737f96\" />\r\n\r\nEdit2:\r\nAdded bar charts by 100k blocks as requested by @ajtowns:\r\n<img width=\"4500\" height=\"3000\" alt=\"block_chunk_comparison\" src=\"https://github.com/user-attachments/assets/1f4c2d9c-e691-4bf1-a601-fdf5f38cb151\" />",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#issuecomment-3109808579",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32279"
    },
    {
      "event": "reviewed",
      "id": 3049774481,
      "node_id": "PRR_kwDOABII5861x92R",
      "url": null,
      "actor": null,
      "commit_id": "f7d9f4510d537b280808e1e8e203c9445c8ad4df",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#pullrequestreview-3049774481",
      "submitted_at": "2025-07-24T02:32:36Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279"
    },
    {
      "event": "commented",
      "id": 3111757079,
      "node_id": "IC_kwDOABII5865eaUX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3111757079",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-24T02:36:58Z",
      "updated_at": "2025-07-24T02:36:58Z",
      "author_association": "CONTRIBUTOR",
      "body": "> I haven't investigated in detail why there are so many empty prevectors, can very well be just an unoptimized debug run artifact of all the Coin copies.\r\n\r\nI think it's just that coins get cleared when they're spent, so end up as 0 size by the time they're destructed? Empty scriptSig's for witness spends might also have some impact.\r\n\r\nI think the tradeoff is something like:\r\n\r\n - spends of p2pk, p2sh, p2pkh coins -- these cost 8 more bytes\r\n - spends of p2wpkh -- these cost 16 more bytes (sPK and scriptSig didn't need an allocation)\r\n - spends of p2wsh and p2tr -- these cost ~48 fewer bytes (save 64 byte allocation on 64bit system, lose 8 bytes for both scriptSig and sPK)\r\n - spends of nested p2wsh -- presumably save ~96 bytes, since the scriptSig would save an allocation, but I'm bundling it in the previous section\r\n\r\nBased on mainnet.observer stats for 2025-05-08, p2wpkh is about 55% of txs, p2tr is about 28%,  p2pkh about 13%, p2wsh about 4% and the rest is noise, maybe? Those numbers net out to a saving of ~5.5 bytes per input. If p2wpkh rose from 55% to 80% and p2tr dropped to 20%, that would net to wasting ~3.2 bytes per input.\r\n\r\nSo I think this change seems plausible now, and certainly is in line with wanting to recommend the use of 256-bit scriptPubKeys for any sort of collaboratively held utxos (ie multisig via p2wpkh or taproot scripts, or musig via taproot), and to encourage collaboratively held utxos.\r\n\r\nApproach ACK.",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#issuecomment-3111757079",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32279"
    },
    {
      "event": "commented",
      "id": 3111760925,
      "node_id": "IC_kwDOABII5865ebQd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3111760925",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-24T02:39:58Z",
      "updated_at": "2025-07-24T02:39:58Z",
      "author_association": "CONTRIBUTOR",
      "body": "> To show the exact behavior, I've plotted the height-vs-time (and the coins-vs-time) before and after:\r\n\r\nProbably would be better to bucket the heights and do bar charts, ie: how long did the 1st, 2nd, 3rd, etc 100k blocks take with both approaches. That way it's easier to see if a large gain for this PR was temporary (eg, due to lots of inscriptions) and is not providing a benefit with current traffic.",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#issuecomment-3111760925",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32279"
    },
    {
      "event": "referenced",
      "id": 18790875171,
      "node_id": "REFE_lADOABII586yoiw8zwAAAARgBgAj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18790875171",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "59ccbb40495f15a15042156fafc0e65c8fa6fb00",
      "commit_url": "https://api.github.com/repos/bitcoinknots/bitcoin/commits/59ccbb40495f15a15042156fafc0e65c8fa6fb00",
      "created_at": "2025-07-24T08:58:40Z"
    },
    {
      "event": "referenced",
      "id": 18790875212,
      "node_id": "REFE_lADOABII586yoiw8zwAAAARgBgBM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18790875212",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "430aae56c6aae6cb270c5c313d47622a69537c9c",
      "commit_url": "https://api.github.com/repos/bitcoinknots/bitcoin/commits/430aae56c6aae6cb270c5c313d47622a69537c9c",
      "created_at": "2025-07-24T08:58:41Z"
    },
    {
      "event": "referenced",
      "id": 18790875251,
      "node_id": "REFE_lADOABII586yoiw8zwAAAARgBgBz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18790875251",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "ca2576d8cc94d53640a28f1063a5a878a92e85d4",
      "commit_url": "https://api.github.com/repos/bitcoinknots/bitcoin/commits/ca2576d8cc94d53640a28f1063a5a878a92e85d4",
      "created_at": "2025-07-24T08:58:41Z"
    },
    {
      "event": "referenced",
      "id": 18790875307,
      "node_id": "REFE_lADOABII586yoiw8zwAAAARgBgCr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18790875307",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "d02dffbd4bf6b8a1bc1182d5a40adcffbdaee700",
      "commit_url": "https://api.github.com/repos/bitcoinknots/bitcoin/commits/d02dffbd4bf6b8a1bc1182d5a40adcffbdaee700",
      "created_at": "2025-07-24T08:58:41Z"
    },
    {
      "event": "mentioned",
      "id": 18801513380,
      "node_id": "MEE_lADOABII586yoiw8zwAAAARgqFOk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18801513380",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-24T19:04:24Z"
    },
    {
      "event": "subscribed",
      "id": 18801513414,
      "node_id": "SE_lADOABII586yoiw8zwAAAARgqFPG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18801513414",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-24T19:04:24Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18801670894,
      "node_id": "HRFPE_lADOABII586yoiw8zwAAAARgqrru",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18801670894",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "ec0b90e40e21ccb97c57373f7a7665ab9554acec",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/ec0b90e40e21ccb97c57373f7a7665ab9554acec",
      "created_at": "2025-07-24T19:14:20Z"
    },
    {
      "event": "commented",
      "id": 3115094134,
      "node_id": "IC_kwDOABII5865rJB2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3115094134",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-24T21:55:30Z",
      "updated_at": "2025-07-24T21:55:30Z",
      "author_association": "MEMBER",
      "body": "ACK ec0b90e40e21ccb97c57373f7a7665ab9554acec\r\n\r\nIn a sample size of 1, this seems to provide a significant improvement in IBD time. It's surprising to me that it looks like this would have had benefit around the time that Taproot activated as previous measurements hadn't indicated that.",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#issuecomment-3115094134",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32279"
    },
    {
      "event": "review_requested",
      "id": 18804136941,
      "node_id": "RRE_lADOABII586yoiw8zwAAAARg0Fvt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18804136941",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-24T21:55:34Z",
      "requested_reviewer": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "review_requested",
      "id": 18804137065,
      "node_id": "RRE_lADOABII586yoiw8zwAAAARg0Fxp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18804137065",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-24T21:55:35Z",
      "requested_reviewer": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDc1NmRhMmE5OTRjNWY2Y2Y1NTJmMDI1YmFiNWQ2MGRhZTA1ODJiMDk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/756da2a994c5f6cf552f025bab5d60dae0582b09",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/756da2a994c5f6cf552f025bab5d60dae0582b09",
      "tree": {
        "sha": "69981f04e508c15f93ff9e77487c5d7a9f983f71",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/69981f04e508c15f93ff9e77487c5d7a9f983f71"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3b188b8b3daef4ae648e792d0ac3fd4db9c1fd36",
          "sha": "3b188b8b3daef4ae648e792d0ac3fd4db9c1fd36",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/3b188b8b3daef4ae648e792d0ac3fd4db9c1fd36"
        }
      ],
      "message": "refactor: extract `STATIC_SIZE` constant to prevector\n\nCo-authored-by: Anthony Towns <aj@erisian.com.au>",
      "committer": {
        "name": "LÅ‘rinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-07-25T23:23:37Z"
      },
      "author": {
        "name": "LÅ‘rinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-04-22T11:00:34Z"
      },
      "sha": "756da2a994c5f6cf552f025bab5d60dae0582b09"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDY1YWM3ZjZkNGQxZTI2YjdjMDY1ZWQzZGMwYTE3ZGI4MjJiMDhkNzE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/65ac7f6d4d1e26b7c065ed3dc0a17db822b08d71",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/65ac7f6d4d1e26b7c065ed3dc0a17db822b08d71",
      "tree": {
        "sha": "cc26f31d75da9c5315fd9eaed77a1e0b15e00c3f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/cc26f31d75da9c5315fd9eaed77a1e0b15e00c3f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/756da2a994c5f6cf552f025bab5d60dae0582b09",
          "sha": "756da2a994c5f6cf552f025bab5d60dae0582b09",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/756da2a994c5f6cf552f025bab5d60dae0582b09"
        }
      ],
      "message": "refactor: modernize `CScriptBase` definition",
      "committer": {
        "name": "LÅ‘rinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-07-25T23:23:38Z"
      },
      "author": {
        "name": "LÅ‘rinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-07-21T17:54:33Z"
      },
      "sha": "65ac7f6d4d1e26b7c065ed3dc0a17db822b08d71"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18823591531,
      "node_id": "HRFPE_lADOABII586yoiw8zwAAAARh-TZr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18823591531",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "44fc161634fd72375dda854e7fc5e5328e17fba3",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/44fc161634fd72375dda854e7fc5e5328e17fba3",
      "created_at": "2025-07-25T23:32:34Z"
    },
    {
      "event": "commented",
      "id": 3120688624,
      "node_id": "IC_kwDOABII5866Ae3w",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3120688624",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-25T23:39:34Z",
      "updated_at": "2025-07-25T23:39:34Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks for the recommendations, took them and extended the tests slightly to document the current behavior of `CompressedScript` (unchanged) and uncompressed P2PK as well (also unchanged).\r\nI have also rebased to make sure all new test cases are run - ready for re-review.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#issuecomment-3120688624",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32279"
    },
    {
      "event": "reviewed",
      "id": 3057692939,
      "node_id": "PRR_kwDOABII5862QLEL",
      "url": null,
      "actor": null,
      "commit_id": "44fc161634fd72375dda854e7fc5e5328e17fba3",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#pullrequestreview-3057692939",
      "submitted_at": "2025-07-26T05:22:45Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDUyMTIxNTA2YjJhMzdlZTk5MTYyYjM1ZTJkZDYxZDUxMzVhODg0M2U",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/52121506b2a37ee99162b35e2dd61d5135a8843e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/52121506b2a37ee99162b35e2dd61d5135a8843e",
      "tree": {
        "sha": "9af28af924180c293ae02a92346d1a5ab286daf5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9af28af924180c293ae02a92346d1a5ab286daf5"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/65ac7f6d4d1e26b7c065ed3dc0a17db822b08d71",
          "sha": "65ac7f6d4d1e26b7c065ed3dc0a17db822b08d71",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/65ac7f6d4d1e26b7c065ed3dc0a17db822b08d71"
        }
      ],
      "message": "test: assert `CScript` allocation characteristics\n\nVerifies that script types are correctly allocated using prevector's direct or indirect storage based on their size:\n\nDirect allocated script types (size â‰¤ 28 bytes):\n* OP_RETURN (small)\n* P2WPKH\n* P2SH\n* P2PKH\n\nIndirect allocated script types (size > 28 bytes):\n* P2WSH\n* P2TR\n* P2PK\n* MULTISIG (small)\n\nThis test provides a baseline for verifying changes to prevector's inline capacity.\n\nThe `CHECK_SCRIPT_STATIC_SIZE` and `CHECK_SCRIPT_DYNAMIC_SIZE` macros were added to differentiate the two cases - while preserving the correct source code line in case of failure.",
      "committer": {
        "name": "LÅ‘rinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-07-26T05:33:13Z"
      },
      "author": {
        "name": "LÅ‘rinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-04-15T10:31:20Z"
      },
      "sha": "52121506b2a37ee99162b35e2dd61d5135a8843e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQ1MTA0Y2ZiYWViODIwODFlNGIwMGE1MDg0NTE2NTU1ZTQ0NmRjZGM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d5104cfbaeb82081e4b00a5084516555e446dcdc",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d5104cfbaeb82081e4b00a5084516555e446dcdc",
      "tree": {
        "sha": "49441b1913d9c58228005fa095bd76f3cf715956",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/49441b1913d9c58228005fa095bd76f3cf715956"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/52121506b2a37ee99162b35e2dd61d5135a8843e",
          "sha": "52121506b2a37ee99162b35e2dd61d5135a8843e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/52121506b2a37ee99162b35e2dd61d5135a8843e"
        }
      ],
      "message": "prevector: store `P2WSH`/`P2TR`/`P2PK` scripts inline\n\nThe current `prevector` size of 28 bytes (chosen to fill the `sizeof(CScript)` aligned size) was introduced in 2015 (https://github.com/bitcoin/bitcoin/pull/6914) before SegWit and TapRoot.\nHowever, the increasingly common `P2WSH` and `P2TR` scripts are both 34 bytes, and are forced to use heap (re)allocation rather than efficient inline storage.\n\nThe core trade-off of this change is to eliminate heap allocations for common 34-36 byte scripts at the cost of increasing the base memory footprint of all `CScript` objects by 8 bytes (while still respecting peak memory usage defined by `-dbcache`).\n\nIncreasing the `prevector` size allows these scripts to be stored inline, avoiding extra heap allocations, reducing potential memory fragmentation, and improving performance during cache flushes. Massif analysis confirms a lower stable memory usage after flushing, suggesting the elimination of heap allocations outweighs the larger base size for common workloads.\n\nDue to memory alignment, increasing the `prevector` size to 36 bytes doesn't change the overall `sizeof(CScript)` compared to an increase to 34 bytes, allowing us to include `P2PK` scripts as well at no additional memory cost.\n\nPerformance benchmarks for AssumeUTXO load and flush show:\n* Small dbcache (450MB): ~1-3% performance improvement (despite more frequent flushes)\n* Large dbcache (4500MB): ~6-8% performance improvement due to fewer heap allocations (and basically the number of flushes)\n* Very large dbcache (4500MB): ~5-6% performance improvement due to fewer heap allocations (and memory limit not being reached, so there's no memory penalty)\n\nFull IBD and reindex-chainstate with larger `dbcache` values also show an overall ~3-4% speedup.\n\nCo-authored-by: Ava Chow <github@achow101.com>\nCo-authored-by: Andrew Toth <andrewstoth@gmail.com>\nCo-authored-by: maflcko <6399679+maflcko@users.noreply.github.com>",
      "committer": {
        "name": "LÅ‘rinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-07-26T05:33:50Z"
      },
      "author": {
        "name": "LÅ‘rinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-03-27T17:40:08Z"
      },
      "sha": "d5104cfbaeb82081e4b00a5084516555e446dcdc"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18827147394,
      "node_id": "HRFPE_lADOABII586yoiw8zwAAAARiL3iC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18827147394",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "d5104cfbaeb82081e4b00a5084516555e446dcdc",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/d5104cfbaeb82081e4b00a5084516555e446dcdc",
      "created_at": "2025-07-26T05:34:53Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2050565585",
      "pull_request_review_id": 2778469403,
      "id": 2050565585,
      "node_id": "PRRC_kwDOABII5856OSXR",
      "diff_hunk": "@@ -27,35 +27,35 @@ template <typename T>\n static void PrevectorDestructor(benchmark::Bench& bench)\n {\n     bench.batch(2).run([&] {\n-        prevector<28, T> t0;\n-        prevector<28, T> t1;\n-        t0.resize(28);\n-        t1.resize(29);\n+        prevector<36, T> t0;\n+        prevector<36, T> t1;\n+        t0.resize(36);\n+        t1.resize(37);",
      "path": "src/bench/prevector.cpp",
      "position": null,
      "original_position": 11,
      "commit_id": "d5104cfbaeb82081e4b00a5084516555e446dcdc",
      "original_commit_id": "a2a3e0cfd8549e3be03fd81e75ebb7527e9345d7",
      "in_reply_to_id": null,
      "user": {
        "login": "kuegi",
        "id": 29012906,
        "node_id": "MDQ6VXNlcjI5MDEyOTA2",
        "avatar_url": "https://avatars.githubusercontent.com/u/29012906?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kuegi",
        "html_url": "https://github.com/kuegi",
        "followers_url": "https://api.github.com/users/kuegi/followers",
        "following_url": "https://api.github.com/users/kuegi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kuegi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kuegi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kuegi/subscriptions",
        "organizations_url": "https://api.github.com/users/kuegi/orgs",
        "repos_url": "https://api.github.com/users/kuegi/repos",
        "events_url": "https://api.github.com/users/kuegi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kuegi/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "maybe a \"stupid\" question, but why not use a constant for the 36 in this file too? ",
      "created_at": "2025-04-18T12:35:43Z",
      "updated_at": "2025-04-18T12:35:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#discussion_r2050565585",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2050565585"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279"
        }
      },
      "start_line": null,
      "original_start_line": 30,
      "start_side": "LEFT",
      "line": null,
      "original_line": 33,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2051562712",
      "pull_request_review_id": 2780076277,
      "id": 2051562712,
      "node_id": "PRRC_kwDOABII5856SFzY",
      "diff_hunk": "@@ -27,35 +27,35 @@ template <typename T>\n static void PrevectorDestructor(benchmark::Bench& bench)\n {\n     bench.batch(2).run([&] {\n-        prevector<28, T> t0;\n-        prevector<28, T> t1;\n-        t0.resize(28);\n-        t1.resize(29);\n+        prevector<36, T> t0;\n+        prevector<36, T> t1;\n+        t0.resize(36);\n+        t1.resize(37);",
      "path": "src/bench/prevector.cpp",
      "position": null,
      "original_position": 11,
      "commit_id": "d5104cfbaeb82081e4b00a5084516555e446dcdc",
      "original_commit_id": "a2a3e0cfd8549e3be03fd81e75ebb7527e9345d7",
      "in_reply_to_id": 2050565585,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I could, of course, for now I was going for simplifying the diff, not make the code more readable. I can of course do that later, but for now I'm looking for the simplest diff which demonstrates the problem and the proposed solution, and after I'm sure there's general support for it, we can sneak in code refactors as well.",
      "created_at": "2025-04-19T19:18:12Z",
      "updated_at": "2025-04-19T19:18:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#discussion_r2051562712",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2051562712"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279"
        }
      },
      "start_line": null,
      "original_start_line": 30,
      "start_side": "LEFT",
      "line": null,
      "original_line": 33,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2053051831",
      "pull_request_review_id": 2782332374,
      "id": 2053051831,
      "node_id": "PRRC_kwDOABII5856XxW3",
      "diff_hunk": "@@ -16,7 +16,7 @@\n \n static const size_t BATCHES = 101;\n static const size_t BATCH_SIZE = 30;\n-static const int PREVECTOR_SIZE = 28;\n+static const int PREVECTOR_SIZE = 36;",
      "path": "src/bench/checkqueue.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "d5104cfbaeb82081e4b00a5084516555e446dcdc",
      "original_commit_id": "43e003f893d093e8825a1ba267691b437cd48347",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Maybe makes sense to move this to a header and reuse it everywhere else?",
      "created_at": "2025-04-21T22:10:43Z",
      "updated_at": "2025-04-21T22:10:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#discussion_r2053051831",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2053051831"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 19,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2053895857",
      "pull_request_review_id": 2783745997,
      "id": 2053895857,
      "node_id": "PRRC_kwDOABII5856a_ax",
      "diff_hunk": "@@ -27,35 +27,35 @@ template <typename T>\n static void PrevectorDestructor(benchmark::Bench& bench)\n {\n     bench.batch(2).run([&] {\n-        prevector<28, T> t0;\n-        prevector<28, T> t1;\n-        t0.resize(28);\n-        t1.resize(29);\n+        prevector<36, T> t0;\n+        prevector<36, T> t1;\n+        t0.resize(36);\n+        t1.resize(37);",
      "path": "src/bench/prevector.cpp",
      "position": null,
      "original_position": 11,
      "commit_id": "d5104cfbaeb82081e4b00a5084516555e446dcdc",
      "original_commit_id": "a2a3e0cfd8549e3be03fd81e75ebb7527e9345d7",
      "in_reply_to_id": 2050565585,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Thanks, extracted to a separate commit - as suggested by @luke-jr as well - added you both as co-authors.",
      "created_at": "2025-04-22T11:13:37Z",
      "updated_at": "2025-04-22T11:13:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#discussion_r2053895857",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2053895857"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279"
        }
      },
      "start_line": null,
      "original_start_line": 30,
      "start_side": "LEFT",
      "line": null,
      "original_line": 33,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2053896250",
      "pull_request_review_id": 2783746505,
      "id": 2053896250,
      "node_id": "PRRC_kwDOABII5856a_g6",
      "diff_hunk": "@@ -16,7 +16,7 @@\n \n static const size_t BATCHES = 101;\n static const size_t BATCH_SIZE = 30;\n-static const int PREVECTOR_SIZE = 28;\n+static const int PREVECTOR_SIZE = 36;",
      "path": "src/bench/checkqueue.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "d5104cfbaeb82081e4b00a5084516555e446dcdc",
      "original_commit_id": "43e003f893d093e8825a1ba267691b437cd48347",
      "in_reply_to_id": 2053051831,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done, thanks",
      "created_at": "2025-04-22T11:13:50Z",
      "updated_at": "2025-04-22T11:13:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#discussion_r2053896250",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2053896250"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 19,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2055030024",
      "pull_request_review_id": 2785603788,
      "id": 2055030024,
      "node_id": "PRRC_kwDOABII5856fUUI",
      "diff_hunk": "@@ -2,20 +2,22 @@\n // Distributed under the MIT software license, see the accompanying\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \n-#include <prevector.h>",
      "path": "src/bench/prevector.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "d5104cfbaeb82081e4b00a5084516555e446dcdc",
      "original_commit_id": "1abeadee083e53d49df957992170298bb33c638e",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: why moving this?",
      "created_at": "2025-04-22T23:38:04Z",
      "updated_at": "2025-04-22T23:38:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#discussion_r2055030024",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2055030024"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 5,
      "original_line": 5,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2055590028",
      "pull_request_review_id": 2786508351,
      "id": 2055590028,
      "node_id": "PRRC_kwDOABII5856hdCM",
      "diff_hunk": "@@ -2,20 +2,22 @@\n // Distributed under the MIT software license, see the accompanying\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \n-#include <prevector.h>",
      "path": "src/bench/prevector.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "d5104cfbaeb82081e4b00a5084516555e446dcdc",
      "original_commit_id": "1abeadee083e53d49df957992170298bb33c638e",
      "in_reply_to_id": 2055030024,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Just sorted the imports for consistency - but I see that the corresponding header is sometimes separated, so I've reverted this move.\r\n\r\nWhat do you think about the whole change in general, can you give me a conceptual review?",
      "created_at": "2025-04-23T09:01:40Z",
      "updated_at": "2025-04-23T09:01:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#discussion_r2055590028",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2055590028"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 5,
      "original_line": 5,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2218546827",
      "pull_request_review_id": 3037090526,
      "id": 2218546827,
      "node_id": "PRRC_kwDOABII586EPFaL",
      "diff_hunk": "@@ -406,7 +406,8 @@ class CScriptNum\n  * Tests in October 2015 showed use of this reduced dbcache memory usage by 23%\n  *  and made an initial sync 13% faster.\n  */\n-typedef prevector<28, unsigned char> CScriptBase;\n+static constexpr unsigned int PREVECTOR_SIZE{28};\n+typedef prevector<PREVECTOR_SIZE, unsigned char> CScriptBase;",
      "path": "src/script/script.h",
      "position": null,
      "original_position": 6,
      "commit_id": "d5104cfbaeb82081e4b00a5084516555e446dcdc",
      "original_commit_id": "a5f2ffa9513b964e3dee6610bca397adb09be479",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit in the first commit: could be using `using` for new code?",
      "created_at": "2025-07-21T08:45:46Z",
      "updated_at": "2025-07-21T11:26:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#discussion_r2218546827",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2218546827"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 410,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2218582070",
      "pull_request_review_id": 3037090526,
      "id": 2218582070,
      "node_id": "PRRC_kwDOABII586EPOA2",
      "diff_hunk": "@@ -406,7 +406,8 @@ class CScriptNum\n  * Tests in October 2015 showed use of this reduced dbcache memory usage by 23%\n  *  and made an initial sync 13% faster.\n  */\n-typedef prevector<28, unsigned char> CScriptBase;\n+static constexpr unsigned int PREVECTOR_SIZE{28};",
      "path": "src/script/script.h",
      "position": null,
      "original_position": 5,
      "commit_id": "d5104cfbaeb82081e4b00a5084516555e446dcdc",
      "original_commit_id": "a5f2ffa9513b964e3dee6610bca397adb09be479",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "\r\n\r\nnit in the first commit: Should this be called `script_base_size` instead? There are other uses of prevector (`CompressedScript`, netaddr, ...), so defining this globally could be confusing.",
      "created_at": "2025-07-21T09:03:16Z",
      "updated_at": "2025-07-21T11:26:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#discussion_r2218582070",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2218582070"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 409,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2218877265",
      "pull_request_review_id": 3037090526,
      "id": 2218877265,
      "node_id": "PRRC_kwDOABII586EQWFR",
      "diff_hunk": "@@ -1158,6 +1158,91 @@ BOOST_AUTO_TEST_CASE(script_CHECKMULTISIG23)\n     BOOST_CHECK_MESSAGE(err == SCRIPT_ERR_INVALID_STACK_OPERATION, ScriptErrorString(err));\n }\n \n+BOOST_AUTO_TEST_CASE(script_size_and_capacity_test)\n+{\n+    BOOST_CHECK_EQUAL(sizeof(prevector<PREVECTOR_SIZE, unsigned char>), 32);\n+    BOOST_CHECK_EQUAL(sizeof(CScriptBase), 32);\n+    BOOST_CHECK_EQUAL(sizeof(CScript), 32);\n+    BOOST_CHECK_EQUAL(sizeof(CTxOut), 40);\n+\n+    CKey dummyKey;",
      "path": "src/test/script_tests.cpp",
      "position": null,
      "original_position": 11,
      "commit_id": "d5104cfbaeb82081e4b00a5084516555e446dcdc",
      "original_commit_id": "ecc6c07e583842a2afe1a8b5bb8ec0bb9f997fdb",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit in ecc6c07e583842a2afe1a8b5bb8ec0bb9f997fdb: Use snake_case for new code?",
      "created_at": "2025-07-21T11:14:57Z",
      "updated_at": "2025-07-21T11:26:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#discussion_r2218877265",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2218877265"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1161,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2218901137",
      "pull_request_review_id": 3037090526,
      "id": 2218901137,
      "node_id": "PRRC_kwDOABII586EQb6R",
      "diff_hunk": "@@ -1158,6 +1158,91 @@ BOOST_AUTO_TEST_CASE(script_CHECKMULTISIG23)\n     BOOST_CHECK_MESSAGE(err == SCRIPT_ERR_INVALID_STACK_OPERATION, ScriptErrorString(err));\n }\n \n+BOOST_AUTO_TEST_CASE(script_size_and_capacity_test)\n+{\n+    BOOST_CHECK_EQUAL(sizeof(prevector<PREVECTOR_SIZE, unsigned char>), 32);\n+    BOOST_CHECK_EQUAL(sizeof(CScriptBase), 32);\n+    BOOST_CHECK_EQUAL(sizeof(CScript), 32);\n+    BOOST_CHECK_EQUAL(sizeof(CTxOut), 40);\n+\n+    CKey dummyKey;\n+    dummyKey.MakeNewKey(true);\n+\n+    std::vector<std::vector<uint8_t>> dummyVSolutions;",
      "path": "src/test/script_tests.cpp",
      "position": null,
      "original_position": 14,
      "commit_id": "d5104cfbaeb82081e4b00a5084516555e446dcdc",
      "original_commit_id": "ecc6c07e583842a2afe1a8b5bb8ec0bb9f997fdb",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit in https://github.com/bitcoin/bitcoin/commit/ecc6c07e583842a2afe1a8b5bb8ec0bb9f997fdb: Could add and use a small helper: `TxoutType GetTxoutType(const CScript& output_script)`? This makes the code shorter below and wraps this dummy.",
      "created_at": "2025-07-21T11:25:58Z",
      "updated_at": "2025-07-21T11:26:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#discussion_r2218901137",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2218901137"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1164,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2219879016",
      "pull_request_review_id": 3039141524,
      "id": 2219879016,
      "node_id": "PRRC_kwDOABII586EUKpo",
      "diff_hunk": "@@ -406,7 +406,8 @@ class CScriptNum\n  * Tests in October 2015 showed use of this reduced dbcache memory usage by 23%\n  *  and made an initial sync 13% faster.\n  */\n-typedef prevector<28, unsigned char> CScriptBase;\n+static constexpr unsigned int PREVECTOR_SIZE{28};\n+typedef prevector<PREVECTOR_SIZE, unsigned char> CScriptBase;",
      "path": "src/script/script.h",
      "position": null,
      "original_position": 6,
      "commit_id": "d5104cfbaeb82081e4b00a5084516555e446dcdc",
      "original_commit_id": "a5f2ffa9513b964e3dee6610bca397adb09be479",
      "in_reply_to_id": 2218546827,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Sure, modernized the definition in a separate commit",
      "created_at": "2025-07-21T17:55:51Z",
      "updated_at": "2025-07-21T18:22:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#discussion_r2219879016",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2219879016"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 410,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2219893434",
      "pull_request_review_id": 3039141524,
      "id": 2219893434,
      "node_id": "PRRC_kwDOABII586EUOK6",
      "diff_hunk": "@@ -1158,6 +1158,91 @@ BOOST_AUTO_TEST_CASE(script_CHECKMULTISIG23)\n     BOOST_CHECK_MESSAGE(err == SCRIPT_ERR_INVALID_STACK_OPERATION, ScriptErrorString(err));\n }\n \n+BOOST_AUTO_TEST_CASE(script_size_and_capacity_test)\n+{\n+    BOOST_CHECK_EQUAL(sizeof(prevector<PREVECTOR_SIZE, unsigned char>), 32);\n+    BOOST_CHECK_EQUAL(sizeof(CScriptBase), 32);\n+    BOOST_CHECK_EQUAL(sizeof(CScript), 32);\n+    BOOST_CHECK_EQUAL(sizeof(CTxOut), 40);\n+\n+    CKey dummyKey;",
      "path": "src/test/script_tests.cpp",
      "position": null,
      "original_position": 11,
      "commit_id": "d5104cfbaeb82081e4b00a5084516555e446dcdc",
      "original_commit_id": "ecc6c07e583842a2afe1a8b5bb8ec0bb9f997fdb",
      "in_reply_to_id": 2218877265,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done",
      "created_at": "2025-07-21T18:02:12Z",
      "updated_at": "2025-07-21T18:22:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#discussion_r2219893434",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2219893434"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1161,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2219911902",
      "pull_request_review_id": 3039141524,
      "id": 2219911902,
      "node_id": "PRRC_kwDOABII586EUSre",
      "diff_hunk": "@@ -1158,6 +1158,91 @@ BOOST_AUTO_TEST_CASE(script_CHECKMULTISIG23)\n     BOOST_CHECK_MESSAGE(err == SCRIPT_ERR_INVALID_STACK_OPERATION, ScriptErrorString(err));\n }\n \n+BOOST_AUTO_TEST_CASE(script_size_and_capacity_test)\n+{\n+    BOOST_CHECK_EQUAL(sizeof(prevector<PREVECTOR_SIZE, unsigned char>), 32);\n+    BOOST_CHECK_EQUAL(sizeof(CScriptBase), 32);\n+    BOOST_CHECK_EQUAL(sizeof(CScript), 32);\n+    BOOST_CHECK_EQUAL(sizeof(CTxOut), 40);\n+\n+    CKey dummyKey;\n+    dummyKey.MakeNewKey(true);\n+\n+    std::vector<std::vector<uint8_t>> dummyVSolutions;",
      "path": "src/test/script_tests.cpp",
      "position": null,
      "original_position": 14,
      "commit_id": "d5104cfbaeb82081e4b00a5084516555e446dcdc",
      "original_commit_id": "ecc6c07e583842a2afe1a8b5bb8ec0bb9f997fdb",
      "in_reply_to_id": 2218901137,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done, thanks",
      "created_at": "2025-07-21T18:08:23Z",
      "updated_at": "2025-07-21T18:22:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#discussion_r2219911902",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2219911902"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1164,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2219916340",
      "pull_request_review_id": 3039141524,
      "id": 2219916340,
      "node_id": "PRRC_kwDOABII586EUTw0",
      "diff_hunk": "@@ -406,7 +406,8 @@ class CScriptNum\n  * Tests in October 2015 showed use of this reduced dbcache memory usage by 23%\n  *  and made an initial sync 13% faster.\n  */\n-typedef prevector<28, unsigned char> CScriptBase;\n+static constexpr unsigned int PREVECTOR_SIZE{28};",
      "path": "src/script/script.h",
      "position": null,
      "original_position": 5,
      "commit_id": "d5104cfbaeb82081e4b00a5084516555e446dcdc",
      "original_commit_id": "a5f2ffa9513b964e3dee6610bca397adb09be479",
      "in_reply_to_id": 2218582070,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Makes sense, thanks",
      "created_at": "2025-07-21T18:10:58Z",
      "updated_at": "2025-07-21T18:22:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#discussion_r2219916340",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2219916340"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 409,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2222294318",
      "pull_request_review_id": 3042653949,
      "id": 2222294318,
      "node_id": "PRRC_kwDOABII586EdYUu",
      "diff_hunk": "@@ -1151,6 +1151,96 @@ BOOST_AUTO_TEST_CASE(script_CHECKMULTISIG23)\n     BOOST_CHECK_MESSAGE(err == SCRIPT_ERR_INVALID_STACK_OPERATION, ScriptErrorString(err));\n }\n \n+/** Return the TxoutType of a script without exposing Solver details. */\n+static TxoutType GetTxoutType(const CScript& output_script)\n+{\n+    std::vector<std::vector<uint8_t>> unused;\n+    return Solver(output_script, unused);\n+}\n+\n+BOOST_AUTO_TEST_CASE(script_size_and_capacity_test)\n+{\n+    BOOST_CHECK_EQUAL(sizeof(prevector<SCRIPT_BASE_SIZE, uint8_t>), 32);\n+    BOOST_CHECK_EQUAL(sizeof(CScriptBase), 32);\n+    BOOST_CHECK_EQUAL(sizeof(CScript), 32);\n+    BOOST_CHECK_EQUAL(sizeof(CTxOut), 40);\n+\n+    CKey dummy_key;\n+    dummy_key.MakeNewKey(true);\n+\n+    // Small OP_RETURN has direct allocation\n+    {\n+        const auto script{CScript() << OP_RETURN << std::vector<uint8_t>(10, 0xaa)};\n+        BOOST_CHECK_EQUAL(GetTxoutType(script), TxoutType::NULL_DATA);\n+        BOOST_CHECK_EQUAL(script.size(), 12);\n+        BOOST_CHECK_EQUAL(script.capacity(), SCRIPT_BASE_SIZE);\n+        BOOST_CHECK_EQUAL(script.allocated_memory(), 0);\n+    }\n+\n+    // P2WPKH has direct allocation\n+    {\n+        const auto script{GetScriptForDestination(WitnessV0KeyHash{PKHash{CKeyID{CPubKey{dummy_key.GetPubKey()}.GetID()}}})};",
      "path": "src/test/script_tests.cpp",
      "position": null,
      "original_position": 32,
      "commit_id": "d5104cfbaeb82081e4b00a5084516555e446dcdc",
      "original_commit_id": "3a9c80f7b4807e9abd9f2da36e8ee479ecf00d19",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit in 3a9c80f7b4807e9abd9f2da36e8ee479ecf00d19:\r\n\r\n`GetPubKey` does not need to be wrapped in `CPubKey{}`. You could just store a `dummy_pubkey` for all test cases to re-use.",
      "created_at": "2025-07-22T11:58:10Z",
      "updated_at": "2025-07-22T12:13:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#discussion_r2222294318",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2222294318"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1182,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2223414637",
      "pull_request_review_id": 3044245535,
      "id": 2223414637,
      "node_id": "PRRC_kwDOABII586Ehp1t",
      "diff_hunk": "@@ -1151,6 +1151,96 @@ BOOST_AUTO_TEST_CASE(script_CHECKMULTISIG23)\n     BOOST_CHECK_MESSAGE(err == SCRIPT_ERR_INVALID_STACK_OPERATION, ScriptErrorString(err));\n }\n \n+/** Return the TxoutType of a script without exposing Solver details. */\n+static TxoutType GetTxoutType(const CScript& output_script)\n+{\n+    std::vector<std::vector<uint8_t>> unused;\n+    return Solver(output_script, unused);\n+}\n+\n+BOOST_AUTO_TEST_CASE(script_size_and_capacity_test)\n+{\n+    BOOST_CHECK_EQUAL(sizeof(prevector<SCRIPT_BASE_SIZE, uint8_t>), 32);\n+    BOOST_CHECK_EQUAL(sizeof(CScriptBase), 32);\n+    BOOST_CHECK_EQUAL(sizeof(CScript), 32);\n+    BOOST_CHECK_EQUAL(sizeof(CTxOut), 40);\n+\n+    CKey dummy_key;\n+    dummy_key.MakeNewKey(true);\n+\n+    // Small OP_RETURN has direct allocation\n+    {\n+        const auto script{CScript() << OP_RETURN << std::vector<uint8_t>(10, 0xaa)};\n+        BOOST_CHECK_EQUAL(GetTxoutType(script), TxoutType::NULL_DATA);\n+        BOOST_CHECK_EQUAL(script.size(), 12);\n+        BOOST_CHECK_EQUAL(script.capacity(), SCRIPT_BASE_SIZE);\n+        BOOST_CHECK_EQUAL(script.allocated_memory(), 0);\n+    }\n+\n+    // P2WPKH has direct allocation\n+    {\n+        const auto script{GetScriptForDestination(WitnessV0KeyHash{PKHash{CKeyID{CPubKey{dummy_key.GetPubKey()}.GetID()}}})};",
      "path": "src/test/script_tests.cpp",
      "position": null,
      "original_position": 32,
      "commit_id": "d5104cfbaeb82081e4b00a5084516555e446dcdc",
      "original_commit_id": "3a9c80f7b4807e9abd9f2da36e8ee479ecf00d19",
      "in_reply_to_id": 2222294318,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Thanks, will do this in the next push",
      "created_at": "2025-07-22T18:06:36Z",
      "updated_at": "2025-07-22T18:08:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#discussion_r2223414637",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2223414637"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1182,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2227177932",
      "pull_request_review_id": 3049774481,
      "id": 2227177932,
      "node_id": "PRRC_kwDOABII586EwAnM",
      "diff_hunk": "@@ -1151,6 +1151,96 @@ BOOST_AUTO_TEST_CASE(script_CHECKMULTISIG23)\n     BOOST_CHECK_MESSAGE(err == SCRIPT_ERR_INVALID_STACK_OPERATION, ScriptErrorString(err));\n }\n \n+/** Return the TxoutType of a script without exposing Solver details. */\n+static TxoutType GetTxoutType(const CScript& output_script)\n+{\n+    std::vector<std::vector<uint8_t>> unused;\n+    return Solver(output_script, unused);\n+}\n+\n+BOOST_AUTO_TEST_CASE(script_size_and_capacity_test)\n+{\n+    BOOST_CHECK_EQUAL(sizeof(prevector<34, uint8_t>), sizeof(prevector<SCRIPT_BASE_SIZE, uint8_t>));",
      "path": "src/test/script_tests.cpp",
      "position": null,
      "original_position": 13,
      "commit_id": "d5104cfbaeb82081e4b00a5084516555e446dcdc",
      "original_commit_id": "f7d9f4510d537b280808e1e8e203c9445c8ad4df",
      "in_reply_to_id": null,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Could consider adding something like:\r\n\r\n```c++\r\n// SCRIPT_BASE_SIZE should be set to avoid wasting space in padding\r\nBOOST_CHECK(sizeof(CScriptBase) != sizeof(prevector<SCRIPT_BASE_SIZE+1, uint8_t>));\r\n```\r\n\r\nIt might be nicer to have prevector include a `static constexpr size_t STATIC_SIZE = N;` member, and use `CScriptBase::STATIC_SIZE` rather than `SCRIPT_BASE_SIZE`.",
      "created_at": "2025-07-24T02:32:36Z",
      "updated_at": "2025-07-24T02:32:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#discussion_r2227177932",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2227177932"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1163,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2230469671",
      "pull_request_review_id": 3054534195,
      "id": 2230469671,
      "node_id": "PRRC_kwDOABII586E8kQn",
      "diff_hunk": "@@ -1151,6 +1151,96 @@ BOOST_AUTO_TEST_CASE(script_CHECKMULTISIG23)\n     BOOST_CHECK_MESSAGE(err == SCRIPT_ERR_INVALID_STACK_OPERATION, ScriptErrorString(err));\n }\n \n+/** Return the TxoutType of a script without exposing Solver details. */\n+static TxoutType GetTxoutType(const CScript& output_script)\n+{\n+    std::vector<std::vector<uint8_t>> unused;\n+    return Solver(output_script, unused);\n+}\n+\n+BOOST_AUTO_TEST_CASE(script_size_and_capacity_test)\n+{\n+    BOOST_CHECK_EQUAL(sizeof(prevector<SCRIPT_BASE_SIZE, uint8_t>), 32);\n+    BOOST_CHECK_EQUAL(sizeof(CScriptBase), 32);\n+    BOOST_CHECK_EQUAL(sizeof(CScript), 32);\n+    BOOST_CHECK_EQUAL(sizeof(CTxOut), 40);\n+\n+    CKey dummy_key;\n+    dummy_key.MakeNewKey(true);\n+\n+    // Small OP_RETURN has direct allocation\n+    {\n+        const auto script{CScript() << OP_RETURN << std::vector<uint8_t>(10, 0xaa)};\n+        BOOST_CHECK_EQUAL(GetTxoutType(script), TxoutType::NULL_DATA);\n+        BOOST_CHECK_EQUAL(script.size(), 12);\n+        BOOST_CHECK_EQUAL(script.capacity(), SCRIPT_BASE_SIZE);\n+        BOOST_CHECK_EQUAL(script.allocated_memory(), 0);\n+    }\n+\n+    // P2WPKH has direct allocation\n+    {\n+        const auto script{GetScriptForDestination(WitnessV0KeyHash{PKHash{CKeyID{CPubKey{dummy_key.GetPubKey()}.GetID()}}})};",
      "path": "src/test/script_tests.cpp",
      "position": null,
      "original_position": 32,
      "commit_id": "d5104cfbaeb82081e4b00a5084516555e446dcdc",
      "original_commit_id": "3a9c80f7b4807e9abd9f2da36e8ee479ecf00d19",
      "in_reply_to_id": 2222294318,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> Thanks, will do this in the next push\r\n\r\nI don't think you did?",
      "created_at": "2025-07-25T08:14:04Z",
      "updated_at": "2025-07-25T08:14:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#discussion_r2230469671",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2230469671"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1182,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2232213129",
      "pull_request_review_id": 3057075270,
      "id": 2232213129,
      "node_id": "PRRC_kwDOABII586FDN6J",
      "diff_hunk": "@@ -1151,6 +1151,96 @@ BOOST_AUTO_TEST_CASE(script_CHECKMULTISIG23)\n     BOOST_CHECK_MESSAGE(err == SCRIPT_ERR_INVALID_STACK_OPERATION, ScriptErrorString(err));\n }\n \n+/** Return the TxoutType of a script without exposing Solver details. */\n+static TxoutType GetTxoutType(const CScript& output_script)\n+{\n+    std::vector<std::vector<uint8_t>> unused;\n+    return Solver(output_script, unused);\n+}\n+\n+BOOST_AUTO_TEST_CASE(script_size_and_capacity_test)\n+{\n+    BOOST_CHECK_EQUAL(sizeof(prevector<34, uint8_t>), sizeof(prevector<SCRIPT_BASE_SIZE, uint8_t>));",
      "path": "src/test/script_tests.cpp",
      "position": null,
      "original_position": 13,
      "commit_id": "d5104cfbaeb82081e4b00a5084516555e446dcdc",
      "original_commit_id": "f7d9f4510d537b280808e1e8e203c9445c8ad4df",
      "in_reply_to_id": 2227177932,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This is indeed a lot nicer, thanks!",
      "created_at": "2025-07-25T23:35:23Z",
      "updated_at": "2025-07-25T23:35:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#discussion_r2232213129",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2232213129"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1163,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2232216843",
      "pull_request_review_id": 3057082239,
      "id": 2232216843,
      "node_id": "PRRC_kwDOABII586FDO0L",
      "diff_hunk": "@@ -1151,6 +1151,96 @@ BOOST_AUTO_TEST_CASE(script_CHECKMULTISIG23)\n     BOOST_CHECK_MESSAGE(err == SCRIPT_ERR_INVALID_STACK_OPERATION, ScriptErrorString(err));\n }\n \n+/** Return the TxoutType of a script without exposing Solver details. */\n+static TxoutType GetTxoutType(const CScript& output_script)\n+{\n+    std::vector<std::vector<uint8_t>> unused;\n+    return Solver(output_script, unused);\n+}\n+\n+BOOST_AUTO_TEST_CASE(script_size_and_capacity_test)\n+{\n+    BOOST_CHECK_EQUAL(sizeof(prevector<SCRIPT_BASE_SIZE, uint8_t>), 32);\n+    BOOST_CHECK_EQUAL(sizeof(CScriptBase), 32);\n+    BOOST_CHECK_EQUAL(sizeof(CScript), 32);\n+    BOOST_CHECK_EQUAL(sizeof(CTxOut), 40);\n+\n+    CKey dummy_key;\n+    dummy_key.MakeNewKey(true);\n+\n+    // Small OP_RETURN has direct allocation\n+    {\n+        const auto script{CScript() << OP_RETURN << std::vector<uint8_t>(10, 0xaa)};\n+        BOOST_CHECK_EQUAL(GetTxoutType(script), TxoutType::NULL_DATA);\n+        BOOST_CHECK_EQUAL(script.size(), 12);\n+        BOOST_CHECK_EQUAL(script.capacity(), SCRIPT_BASE_SIZE);\n+        BOOST_CHECK_EQUAL(script.allocated_memory(), 0);\n+    }\n+\n+    // P2WPKH has direct allocation\n+    {\n+        const auto script{GetScriptForDestination(WitnessV0KeyHash{PKHash{CKeyID{CPubKey{dummy_key.GetPubKey()}.GetID()}}})};",
      "path": "src/test/script_tests.cpp",
      "position": null,
      "original_position": 32,
      "commit_id": "d5104cfbaeb82081e4b00a5084516555e446dcdc",
      "original_commit_id": "3a9c80f7b4807e9abd9f2da36e8ee479ecf00d19",
      "in_reply_to_id": 2222294318,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I quickly pushed a rebase, thinking I'll follow with applying the recommendations - but ended up in a `CompressedScript` rabbithole (which I decided to leave to a follow-up in the end).\r\n\r\nLooks like the extractions and inlines I did here ended up with lots of unnecessary casts, thanks for noticing, cleaned it up in latest push!",
      "created_at": "2025-07-25T23:37:18Z",
      "updated_at": "2025-07-25T23:37:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#discussion_r2232216843",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2232216843"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1182,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2232582690",
      "pull_request_review_id": 3057692939,
      "id": 2232582690,
      "node_id": "PRRC_kwDOABII586FEoIi",
      "diff_hunk": "@@ -1206,31 +1206,31 @@ BOOST_AUTO_TEST_CASE(script_size_and_capacity_test)\n         BOOST_CHECK_EQUAL(script.allocated_memory(), 0);\n     }\n \n-    // P2WSH needs extra allocation\n+    // P2WSH has direct allocation\n     {\n         const auto script{GetScriptForDestination(WitnessV0ScriptHash{CScript{} << OP_TRUE})};\n         BOOST_CHECK(script.IsPayToWitnessScriptHash());\n         BOOST_CHECK_EQUAL(script.size(), 34);\n-        BOOST_CHECK_EQUAL(script.capacity(), 34);\n-        BOOST_CHECK_EQUAL(script.allocated_memory(), 34);\n+        BOOST_CHECK_EQUAL(script.capacity(), CScriptBase::STATIC_SIZE);\n+        BOOST_CHECK_EQUAL(script.allocated_memory(), 0);",
      "path": "src/test/script_tests.cpp",
      "position": null,
      "original_position": 27,
      "commit_id": "d5104cfbaeb82081e4b00a5084516555e446dcdc",
      "original_commit_id": "44fc161634fd72375dda854e7fc5e5328e17fba3",
      "in_reply_to_id": null,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "```c++\r\nstatic void check_script_has_static_size(CScript& script, unsigned int size)\r\n{\r\n    BOOST_CHECK_EQUAL(script.size(), size);\r\n    BOOST_CHECK_EQUAL(script.capacity(), CScriptBase::STATIC_SIZE);\r\n    BOOST_CHECK_EQUAL(script.allocated_memory(), 0);\r\n}\r\n\r\nstatic void check_script_has_dynamic_size(CScript& script, unsigned int size)\r\n{\r\n    BOOST_CHECK_EQUAL(script.size(), size);\r\n    BOOST_CHECK_EQUAL(script.capacity(), size);\r\n    BOOST_CHECK_EQUAL(script.allocated_memory(), size);\r\n}\r\n```\r\n\r\nand\r\n\r\n```c++\r\n        BOOST_CHECK(script.IsPayToWitnessScriptHash());\r\n        check_script_has_static_size(script, 34);\r\n```\r\n\r\n?",
      "created_at": "2025-07-26T05:22:45Z",
      "updated_at": "2025-07-26T05:22:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#discussion_r2232582690",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2232582690"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1215,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2232583047",
      "pull_request_review_id": 3057693408,
      "id": 2232583047,
      "node_id": "PRRC_kwDOABII586FEoOH",
      "diff_hunk": "@@ -1206,31 +1206,31 @@ BOOST_AUTO_TEST_CASE(script_size_and_capacity_test)\n         BOOST_CHECK_EQUAL(script.allocated_memory(), 0);\n     }\n \n-    // P2WSH needs extra allocation\n+    // P2WSH has direct allocation\n     {\n         const auto script{GetScriptForDestination(WitnessV0ScriptHash{CScript{} << OP_TRUE})};\n         BOOST_CHECK(script.IsPayToWitnessScriptHash());\n         BOOST_CHECK_EQUAL(script.size(), 34);\n-        BOOST_CHECK_EQUAL(script.capacity(), 34);\n-        BOOST_CHECK_EQUAL(script.allocated_memory(), 34);\n+        BOOST_CHECK_EQUAL(script.capacity(), CScriptBase::STATIC_SIZE);\n+        BOOST_CHECK_EQUAL(script.allocated_memory(), 0);",
      "path": "src/test/script_tests.cpp",
      "position": null,
      "original_position": 27,
      "commit_id": "d5104cfbaeb82081e4b00a5084516555e446dcdc",
      "original_commit_id": "44fc161634fd72375dda854e7fc5e5328e17fba3",
      "in_reply_to_id": 2232582690,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "you think that would be easier to follow?\r\nIf it fails I would see it logged in `check_script_has_dynamic_size` - unless I make it a macro.",
      "created_at": "2025-07-26T05:24:14Z",
      "updated_at": "2025-07-26T05:24:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#discussion_r2232583047",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2232583047"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1215,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2232585256",
      "pull_request_review_id": 3057696444,
      "id": 2232585256,
      "node_id": "PRRC_kwDOABII586FEowo",
      "diff_hunk": "@@ -1206,31 +1206,31 @@ BOOST_AUTO_TEST_CASE(script_size_and_capacity_test)\n         BOOST_CHECK_EQUAL(script.allocated_memory(), 0);\n     }\n \n-    // P2WSH needs extra allocation\n+    // P2WSH has direct allocation\n     {\n         const auto script{GetScriptForDestination(WitnessV0ScriptHash{CScript{} << OP_TRUE})};\n         BOOST_CHECK(script.IsPayToWitnessScriptHash());\n         BOOST_CHECK_EQUAL(script.size(), 34);\n-        BOOST_CHECK_EQUAL(script.capacity(), 34);\n-        BOOST_CHECK_EQUAL(script.allocated_memory(), 34);\n+        BOOST_CHECK_EQUAL(script.capacity(), CScriptBase::STATIC_SIZE);\n+        BOOST_CHECK_EQUAL(script.allocated_memory(), 0);",
      "path": "src/test/script_tests.cpp",
      "position": null,
      "original_position": 27,
      "commit_id": "d5104cfbaeb82081e4b00a5084516555e446dcdc",
      "original_commit_id": "44fc161634fd72375dda854e7fc5e5328e17fba3",
      "in_reply_to_id": 2232582690,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Thanks, [pushed](https://github.com/bitcoin/bitcoin/compare/44fc161634fd72375dda854e7fc5e5328e17fba3..d5104cfbaeb82081e4b00a5084516555e446dcdc), let me know what you think!",
      "created_at": "2025-07-26T05:35:05Z",
      "updated_at": "2025-07-26T05:35:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#discussion_r2232585256",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2232585256"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1215,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2232640266",
      "pull_request_review_id": 3057768607,
      "id": 2232640266,
      "node_id": "PRRC_kwDOABII586FE2MK",
      "diff_hunk": "@@ -1206,31 +1206,31 @@ BOOST_AUTO_TEST_CASE(script_size_and_capacity_test)\n         BOOST_CHECK_EQUAL(script.allocated_memory(), 0);\n     }\n \n-    // P2WSH needs extra allocation\n+    // P2WSH has direct allocation\n     {\n         const auto script{GetScriptForDestination(WitnessV0ScriptHash{CScript{} << OP_TRUE})};\n         BOOST_CHECK(script.IsPayToWitnessScriptHash());\n         BOOST_CHECK_EQUAL(script.size(), 34);\n-        BOOST_CHECK_EQUAL(script.capacity(), 34);\n-        BOOST_CHECK_EQUAL(script.allocated_memory(), 34);\n+        BOOST_CHECK_EQUAL(script.capacity(), CScriptBase::STATIC_SIZE);\n+        BOOST_CHECK_EQUAL(script.allocated_memory(), 0);",
      "path": "src/test/script_tests.cpp",
      "position": null,
      "original_position": 27,
      "commit_id": "d5104cfbaeb82081e4b00a5084516555e446dcdc",
      "original_commit_id": "44fc161634fd72375dda854e7fc5e5328e17fba3",
      "in_reply_to_id": 2232582690,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Can get errors like:\r\n\r\n```\r\ntest/script_tests.cpp(1246): error: in \"script_tests/script_size_and_capacity_test\": check script_dynamic_alloc( script, 64, 64 ) has failed for ( CScript(size=67,cap=67), 64, 64 )\r\ntest/script_tests.cpp(1253): error: in \"script_tests/script_size_and_capacity_test\": check script_dynamic_alloc( script, 10, 1000 ) has failed for ( CScript(size=71,cap=103), 10, 1000 )\r\n```\r\n\r\nwith this approach:\r\n\r\n```diff\r\n--- a/src/test/script_tests.cpp\r\n+++ b/src/test/script_tests.cpp\r\n@@ -38,6 +38,12 @@\r\n\r\n using namespace util::hex_literals;\r\n\r\n+static std::ostream& operator<<(std::ostream& os, const CScript& script)\r\n+{\r\n+    os << strprintf(\"CScript(size=%d,cap=%d)\", script.size(), script.capacity());\r\n+    return os;\r\n+}\r\n+\r\n static const unsigned int gFlags = SCRIPT_VERIFY_P2SH | SCRIPT_VERIFY_STRICTENC;\r\n\r\n unsigned int ParseScriptFlags(std::string strFlags);\r\n@@ -1158,6 +1164,16 @@ static TxoutType GetTxoutType(const CScript& output_script)\r\n     return Solver(output_script, unused);\r\n }\r\n\r\n+static bool script_static_alloc(const CScript& script, unsigned int size)\r\n+{\r\n+    return script.size() == size && script.capacity() == script.STATIC_SIZE && script.allocated_memory() == 0;\r\n+}\r\n+\r\n+static bool script_dynamic_alloc(const CScript& script, unsigned int size, unsigned int cap)\r\n+{\r\n+    return script.size() == size && script.capacity() == cap && script.allocated_memory() == cap;\r\n+}\r\n+\r\n BOOST_AUTO_TEST_CASE(script_size_and_capacity_test)\r\n {\r\n     BOOST_CHECK_EQUAL(sizeof(CompressedScript), 40);\r\n\r\n@@ -1241,18 +1243,14 @@ BOOST_AUTO_TEST_CASE(script_size_and_capacity_test)\r\n\r\n         const auto script{GetScriptForRawPubKey(uncompressed_pubkey)};\r\n         BOOST_CHECK_EQUAL(GetTxoutType(script), TxoutType::PUBKEY);\r\n-        BOOST_CHECK_EQUAL(script.size(), 67);\r\n-        BOOST_CHECK_EQUAL(script.capacity(), 67);\r\n-        BOOST_CHECK_EQUAL(script.allocated_memory(), 67);\r\n+        BOOST_CHECK_PREDICATE(script_dynamic_alloc, (script)(67)(67));\r\n     }\r\n\r\n     // Bare multisig needs extra allocation\r\n     {\r\n         const auto script{GetScriptForMultisig(1, std::vector{2, dummy_pubkey})};\r\n         BOOST_CHECK_EQUAL(GetTxoutType(script), TxoutType::MULTISIG);\r\n-        BOOST_CHECK_EQUAL(script.size(), 71);\r\n-        BOOST_CHECK_EQUAL(script.capacity(), 103);\r\n-        BOOST_CHECK_EQUAL(script.allocated_memory(), 103);\r\n+        BOOST_CHECK_PREDICATE(script_dynamic_alloc, (script)(71)(103));\r\n     }\r\n }\r\n```",
      "created_at": "2025-07-26T06:35:26Z",
      "updated_at": "2025-07-26T06:35:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32279#discussion_r2232640266",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2232640266"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32279"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1215,
      "side": "RIGHT"
    }
  ]
}