{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31741",
    "id": 2300361238,
    "node_id": "PR_kwDOABII586JHLoW",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/31741",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/31741.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/31741.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31741/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31741/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/93ba80b3d78fa1c4e7f614df6517b9cb492d05d7",
    "number": 31741,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "multiprocess: Add libmultiprocess git subtree",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "This adds the [libmultiprocess](https://github.com/chaincodelabs/libmultiprocess) library as a subtree in `src/ipc/libmultiprocess` and allows it to be built with the cmake `-DBUILD_MULTIPROCESS` option, which is disabled by default.\r\n\r\nA cmake `-DWITH_LIBMULTIPROCESS` cmake option for building with external libmultiprocess packages is also kept, because this is needed to support cross compilation. (A cross-compiling cmake build cannot easily build and run a native code generation tool.)\r\n\r\n---\r\n\r\n**This is a draft PR because it is based on #31740** The non-base commits are:\r\n\r\n- [`99d1dc2b141c` Merge commit '520906179481e3be85d050aa2a63e3d04025eb70' as 'src/ipc/libmultiprocess'](https://github.com/bitcoin/bitcoin/pull/31741/commits/99d1dc2b141c28f5273c491185a104702d42f7e4)\r\n- [`28a7bc8f6399` depends, moveonly: split up int_get_build_id function](https://github.com/bitcoin/bitcoin/pull/31741/commits/28a7bc8f6399c71d3b455cd66ee9ccf5ae3ea8fb)\r\n- [`01452f8c0da5` depends: Switch libmultiprocess packages to use local git subtree](https://github.com/bitcoin/bitcoin/pull/31741/commits/01452f8c0da58db549bc46d0cfa7de715344efc4)\r\n- [`d70474da4d1f` cmake: Support building with libmultiprocess subtree](https://github.com/bitcoin/bitcoin/pull/31741/commits/d70474da4d1f3bc623e3167dab63a7860f99875f)\r\n- [`b8289e77aaa2` doc: Update documentation to explain BUILD_MULTIPROCESS](https://github.com/bitcoin/bitcoin/pull/31741/commits/b8289e77aaa2478828caf7c91a59fc15c96fb187)\r\n- [`93ba80b3d78f` lint: Add exclusions for libmultiprocess subtree](https://github.com/bitcoin/bitcoin/pull/31741/commits/93ba80b3d78fa1c4e7f614df6517b9cb492d05d7)\r\n\r\n",
    "labels": [],
    "created_at": "2025-01-27T16:48:43Z",
    "updated_at": "2025-01-29T12:33:48Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "9f807bf2ed5a098ea82995a74f7c25e525baa097",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": false,
    "head": {
      "label": "ryanofsky:pr/subtree",
      "ref": "pr/subtree",
      "sha": "93ba80b3d78fa1c4e7f614df6517b9cb492d05d7",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 69901633,
        "node_id": "MDEwOlJlcG9zaXRvcnk2OTkwMTYzMw==",
        "name": "bitcoin",
        "full_name": "ryanofsky/bitcoin",
        "owner": {
          "login": "ryanofsky",
          "id": 7133040,
          "node_id": "MDQ6VXNlcjcxMzMwNDA=",
          "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/ryanofsky",
          "html_url": "https://github.com/ryanofsky",
          "followers_url": "https://api.github.com/users/ryanofsky/followers",
          "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
          "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
          "repos_url": "https://api.github.com/users/ryanofsky/repos",
          "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/ryanofsky/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/ryanofsky/bitcoin",
        "archive_url": "https://api.github.com/repos/ryanofsky/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/ryanofsky/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/ryanofsky/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/ryanofsky/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/ryanofsky/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/ryanofsky/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/ryanofsky/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/ryanofsky/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/ryanofsky/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/ryanofsky/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/ryanofsky/bitcoin/events",
        "forks_url": "https://api.github.com/repos/ryanofsky/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/ryanofsky/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/ryanofsky/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/ryanofsky/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/ryanofsky/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/ryanofsky/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/ryanofsky/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/ryanofsky/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/ryanofsky/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/ryanofsky/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/ryanofsky/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/ryanofsky/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/ryanofsky/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:ryanofsky/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/ryanofsky/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/ryanofsky/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/ryanofsky/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/ryanofsky/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/ryanofsky/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/ryanofsky/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/ryanofsky/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/ryanofsky/bitcoin/hooks",
        "svn_url": "https://github.com/ryanofsky/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 9,
        "stargazers_count": 15,
        "watchers_count": 15,
        "size": 274143,
        "default_branch": "master",
        "open_issues_count": 3,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-01-27T19:07:46Z",
        "created_at": "2016-10-03T19:05:43Z",
        "updated_at": "2024-12-03T23:24:02Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "0a931a9787b196d7a620863cc143d9319ffd356d",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 36636,
        "stargazers_count": 81696,
        "watchers_count": 81696,
        "size": 274780,
        "default_branch": "master",
        "open_issues_count": 691,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-01-29T12:10:31Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-01-29T12:37:34Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31741"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": true,
    "additions": 5915,
    "deletions": 75,
    "changed_files": 83,
    "commits": 9,
    "review_comments": 2,
    "comments": 14
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDIyMjFjODgxNGQ3NjVjMWU2MTA5YTZmMGVjZWMwMGQ1YjRhZjJlYzY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2221c8814d765c1e6109a6f0ecec00d5b4af2ec6",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2221c8814d765c1e6109a6f0ecec00d5b4af2ec6",
      "tree": {
        "sha": "fb91fd1dcbeeaab5b5e63f5966dc8ec256900870",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/fb91fd1dcbeeaab5b5e63f5966dc8ec256900870"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0a931a9787b196d7a620863cc143d9319ffd356d",
          "sha": "0a931a9787b196d7a620863cc143d9319ffd356d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0a931a9787b196d7a620863cc143d9319ffd356d"
        }
      ],
      "message": "depends: Update libmultiprocess library before converting to subtree\n\nThis should be the final update to the libmultiprocess package via the depends\nsystem. It brings in the libmultiprocess cmake changes from\nhttps://github.com/chaincodelabs/libmultiprocess/pull/136 needed to support\nbuilding as subtree. After this, a followup PR will add libmultiprocess as a\ngit subtree and depends will just use the git subtree instead of hardcoding its\nown version hash.\n\nSince there have been libmultiprocess API changes since the last update, this\ncommit also updates bitcoin code to be compatible with them.\n\nThis update brings in the following changes:\n\nhttps://github.com/chaincodelabs/libmultiprocess/pull/121 ProxyClientBase: avoid static_cast to partially constructed object\nhttps://github.com/chaincodelabs/libmultiprocess/pull/120 proxy-types.h: add static_assert to detect int/enum size mismatch\nhttps://github.com/chaincodelabs/libmultiprocess/pull/127 ProxyClientBase: avoid static_cast to partially destructed object\nhttps://github.com/chaincodelabs/libmultiprocess/pull/129 Fix \"disconnected: write(m_post_fd, &buffer, 1): Broken pipe\" EventLoop shutdown races.\nhttps://github.com/chaincodelabs/libmultiprocess/pull/130 refactor: Add CleanupRun function to dedup clean list code\nhttps://github.com/chaincodelabs/libmultiprocess/pull/131 doc: fix startAsyncThread comment\nhttps://github.com/chaincodelabs/libmultiprocess/pull/133 Fix debian \"libatomic not found\" error in downstream builds\nhttps://github.com/chaincodelabs/libmultiprocess/pull/94 c++ 20 cleanups\nhttps://github.com/chaincodelabs/libmultiprocess/pull/135 refactor: proxy-types.h API cleanup\nhttps://github.com/chaincodelabs/libmultiprocess/pull/136 cmake: Support being included with add_subdirectory\nhttps://github.com/chaincodelabs/libmultiprocess/pull/137 doc: Fix broken markdown links",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2025-01-26T19:13:47Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2025-01-26T19:13:47Z"
      },
      "sha": "2221c8814d765c1e6109a6f0ecec00d5b4af2ec6"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDRlMGFhMTgzNWIzZTk4MGNlZGEyOWVjOTBlNzExNWQ3ZmVmNTNmNTE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4e0aa1835b3e980ceda29ec90e7115d7fef53f51",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4e0aa1835b3e980ceda29ec90e7115d7fef53f51",
      "tree": {
        "sha": "5155d4558693108687c105b3465f636fe1605753",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5155d4558693108687c105b3465f636fe1605753"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2221c8814d765c1e6109a6f0ecec00d5b4af2ec6",
          "sha": "2221c8814d765c1e6109a6f0ecec00d5b4af2ec6",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2221c8814d765c1e6109a6f0ecec00d5b4af2ec6"
        }
      ],
      "message": "test: Add test for IPC serialization bug\n\nAdd regression test for serialization bug in IPC mining code that is not\ncurrently being called anywhere reported:\n\nhttps://github.com/Sjors/bitcoin/issues/71\nhttps://github.com/chaincodelabs/libmultiprocess/issues/122",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2025-01-26T19:13:47Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2025-01-25T00:01:49Z"
      },
      "sha": "4e0aa1835b3e980ceda29ec90e7115d7fef53f51"
    },
    {
      "event": "commented",
      "id": 2616341516,
      "node_id": "IC_kwDOABII586b8jQM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2616341516",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-27T16:48:46Z",
      "updated_at": "2025-01-29T12:33:48Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31741.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2616720933), [Sjors](https://github.com/bitcoin/bitcoin/pull/31741#pullrequestreview-2577588200), [vasild](https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2618716545), [hebasto](https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2621519226) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#31564](https://github.com/bitcoin/bitcoin/pull/31564) (Add checkblock RPC and checkBlock() to Mining interface by Sjors)\n* [#31161](https://github.com/bitcoin/bitcoin/pull/31161) (cmake: Set top-level target output locations by hebasto)\n* [#30997](https://github.com/bitcoin/bitcoin/pull/30997) (build: Switch to Qt 6 by hebasto)\n* [#29409](https://github.com/bitcoin/bitcoin/pull/29409) (multiprocess: Add capnp wrapper for Chain interface by ryanofsky)\n* [#19461](https://github.com/bitcoin/bitcoin/pull/19461) (multiprocess: Add bitcoin-gui -ipcconnect option by ryanofsky)\n* [#19460](https://github.com/bitcoin/bitcoin/pull/19460) (multiprocess: Add bitcoin-wallet -ipcconnect option by ryanofsky)\n* [#10102](https://github.com/bitcoin/bitcoin/pull/10102) (Multiprocess bitcoin by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2616341516",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "convert_to_draft",
      "id": 16080955534,
      "node_id": "CTDE_lADOABII586nsxBLzwAAAAO-f-iO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16080955534",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-27T16:48:56Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16081126326,
      "node_id": "HRFPE_lADOABII586nsxBLzwAAAAO-goO2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16081126326",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "eb70c90b06f068816ba09481f1cf37f49c4d95ee",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/eb70c90b06f068816ba09481f1cf37f49c4d95ee",
      "created_at": "2025-01-27T17:01:09Z"
    },
    {
      "event": "commented",
      "id": 2616375047,
      "node_id": "IC_kwDOABII586b8rcH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2616375047",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-27T17:01:23Z",
      "updated_at": "2025-01-27T17:01:23Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/36237440607</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2616375047",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "labeled",
      "id": 16081129458,
      "node_id": "LE_lADOABII586nsxBLzwAAAAO-go_y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16081129458",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-27T17:01:23Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDUyMDkwNjE3OTQ4MWUzYmU4NWQwNTBhYTJhNjNlM2QwNDAyNWViNzA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/520906179481e3be85d050aa2a63e3d04025eb70",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/520906179481e3be85d050aa2a63e3d04025eb70",
      "tree": {
        "sha": "3078791ddd6e5081852a5fe581f90b3a505de0f2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3078791ddd6e5081852a5fe581f90b3a505de0f2"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [],
      "message": "Squashed 'src/ipc/libmultiprocess/' content from commit 07c917f7ca91\n\ngit-subtree-dir: src/ipc/libmultiprocess\ngit-subtree-split: 07c917f7ca910d66abc6d3873162fc9061704074",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2025-01-27T18:28:36Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2025-01-27T18:28:36Z"
      },
      "sha": "520906179481e3be85d050aa2a63e3d04025eb70"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDk5ZDFkYzJiMTQxYzI4ZjUyNzNjNDkxMTg1YTEwNDcwMmQ0MmY3ZTQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/99d1dc2b141c28f5273c491185a104702d42f7e4",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/99d1dc2b141c28f5273c491185a104702d42f7e4",
      "tree": {
        "sha": "89ff4556afef73611d677df289330aaa7dd049fc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/89ff4556afef73611d677df289330aaa7dd049fc"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4e0aa1835b3e980ceda29ec90e7115d7fef53f51",
          "sha": "4e0aa1835b3e980ceda29ec90e7115d7fef53f51",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/4e0aa1835b3e980ceda29ec90e7115d7fef53f51"
        },
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/520906179481e3be85d050aa2a63e3d04025eb70",
          "sha": "520906179481e3be85d050aa2a63e3d04025eb70",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/520906179481e3be85d050aa2a63e3d04025eb70"
        }
      ],
      "message": "Merge commit '520906179481e3be85d050aa2a63e3d04025eb70' as 'src/ipc/libmultiprocess'",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2025-01-27T18:28:36Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2025-01-27T18:28:36Z"
      },
      "sha": "99d1dc2b141c28f5273c491185a104702d42f7e4"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDI4YTdiYzhmNjM5OWM3MWQzYjQ1NWNkNjZlZTljY2Y1YWUzZWE4ZmI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/28a7bc8f6399c71d3b455cd66ee9ccf5ae3ea8fb",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/28a7bc8f6399c71d3b455cd66ee9ccf5ae3ea8fb",
      "tree": {
        "sha": "455f0ce3082fb1c56f10933f4ff89e26c0631098",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/455f0ce3082fb1c56f10933f4ff89e26c0631098"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/99d1dc2b141c28f5273c491185a104702d42f7e4",
          "sha": "99d1dc2b141c28f5273c491185a104702d42f7e4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/99d1dc2b141c28f5273c491185a104702d42f7e4"
        }
      ],
      "message": "depends, moveonly: split up int_get_build_id function\n\nMove parts of the int_get_build_id into a new int_get_build_properties\nfunction. There is no change in behavior. This just organizes assignments\nbetter so some build properties can be used to help compute build ids in the\nnext commit.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2025-01-27T18:28:36Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2025-01-25T18:29:42Z"
      },
      "sha": "28a7bc8f6399c71d3b455cd66ee9ccf5ae3ea8fb"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDAxNDUyZjhjMGRhNThkYjU0OWJjNDZkMGNmYTdkZTcxNTM0NGVmYzQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/01452f8c0da58db549bc46d0cfa7de715344efc4",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/01452f8c0da58db549bc46d0cfa7de715344efc4",
      "tree": {
        "sha": "9c79b7bc15792b8dbb28e0094ce1ca041582b60b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9c79b7bc15792b8dbb28e0094ce1ca041582b60b"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/28a7bc8f6399c71d3b455cd66ee9ccf5ae3ea8fb",
          "sha": "28a7bc8f6399c71d3b455cd66ee9ccf5ae3ea8fb",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/28a7bc8f6399c71d3b455cd66ee9ccf5ae3ea8fb"
        }
      ],
      "message": "depends: Switch libmultiprocess packages to use local git subtree\n\nWith newly introduced libmultiprocesss subtree, there's no need for depends\nsystem to download and track changes to the upstream repository.\n\nNote that adding the libmultiprocess subtree does not allow dropping\nlibmultirprocess packages from the depends build, because libmultiprocess\nincludes a code generation tool called mpgen, and in cross-compiled builds,\nbitcoin core's cmake build system doesn't have access to a native toolchain and\ncan't build mpgen itself, so the depends system (or the native environment if\nnot using depends) needs to supply it.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2025-01-27T18:28:36Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2025-01-25T18:33:44Z"
      },
      "sha": "01452f8c0da58db549bc46d0cfa7de715344efc4"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQ3MDQ3NGRhNGQxZjNiYzYyM2UzMTY3ZGFiNjNhNzg2MGY5OTg3NWY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d70474da4d1f3bc623e3167dab63a7860f99875f",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d70474da4d1f3bc623e3167dab63a7860f99875f",
      "tree": {
        "sha": "e7194a852766941677d7bc4a5beee2f0d4edd6b1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e7194a852766941677d7bc4a5beee2f0d4edd6b1"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/01452f8c0da58db549bc46d0cfa7de715344efc4",
          "sha": "01452f8c0da58db549bc46d0cfa7de715344efc4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/01452f8c0da58db549bc46d0cfa7de715344efc4"
        }
      ],
      "message": "cmake: Support building with libmultiprocess subtree\n\nReplace existing WITH_MULTIPROCESS build option which searches for an external\nlibmultiprocess installation and enables building multiprocess binaries option\nwith new, separate BUILD_MULTIPROCESS and WITH_LIBMULTIPROCESS options.\n\nThe BUILD_MULTIPROCESS option controls whether new multiprocess binaries\nbitcoin-node and bitcoin-gui will be built.\n\nThe WITH_LIBMULTIPROCESS option controls whether to search for an external\nlibmultiprocess install. If it is true, the external install will be used,\notherwise the local git subtree src/ipc/libmultiprocess subtree will be used.\nThis option does not usually need to be used except when cross-compiling.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2025-01-27T18:28:36Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2025-01-26T18:12:23Z"
      },
      "sha": "d70474da4d1f3bc623e3167dab63a7860f99875f"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGI4Mjg5ZTc3YWFhMjQ3ODgyOGNhZjdjOTFhNTlmYzE1Yzk2ZmIxODc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b8289e77aaa2478828caf7c91a59fc15c96fb187",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b8289e77aaa2478828caf7c91a59fc15c96fb187",
      "tree": {
        "sha": "861dbf50ae9a19f64b049ada4a5d646ec5610af7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/861dbf50ae9a19f64b049ada4a5d646ec5610af7"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d70474da4d1f3bc623e3167dab63a7860f99875f",
          "sha": "d70474da4d1f3bc623e3167dab63a7860f99875f",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d70474da4d1f3bc623e3167dab63a7860f99875f"
        }
      ],
      "message": "doc: Update documentation to explain BUILD_MULTIPROCESS",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2025-01-27T18:28:36Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2025-01-26T18:12:23Z"
      },
      "sha": "b8289e77aaa2478828caf7c91a59fc15c96fb187"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDkzYmE4MGIzZDc4ZmExYzRlN2Y2MTRkZjY1MTdiOWNiNDkyZDA1ZDc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/93ba80b3d78fa1c4e7f614df6517b9cb492d05d7",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/93ba80b3d78fa1c4e7f614df6517b9cb492d05d7",
      "tree": {
        "sha": "6139746a4e0cbace822548ab3ed0ac77124ed4b5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6139746a4e0cbace822548ab3ed0ac77124ed4b5"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b8289e77aaa2478828caf7c91a59fc15c96fb187",
          "sha": "b8289e77aaa2478828caf7c91a59fc15c96fb187",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b8289e77aaa2478828caf7c91a59fc15c96fb187"
        }
      ],
      "message": "lint: Add exclusions for libmultiprocess subtree\n\nWithout this change linter produces errors about:\n\n- Use of std::filesystem the libmultiprocess example program.\n- Use of locale-dependent functions in example program, in the build time code\n  generator, and in the runtime library for debug logging.\n- Include guards not beginning with BITCOIN_",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2025-01-27T18:34:49Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2025-01-27T18:34:49Z"
      },
      "sha": "93ba80b3d78fa1c4e7f614df6517b9cb492d05d7"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16082797264,
      "node_id": "HRFPE_lADOABII586nsxBLzwAAAAO-nALQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16082797264",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "9bb4bb9680b28b238ae5840f9de2963a81e01119",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/9bb4bb9680b28b238ae5840f9de2963a81e01119",
      "created_at": "2025-01-27T18:59:37Z"
    },
    {
      "event": "commented",
      "id": 2616653238,
      "node_id": "IC_kwDOABII586b9vW2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2616653238",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-27T19:01:06Z",
      "updated_at": "2025-01-27T19:08:16Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased eb70c90b06f068816ba09481f1cf37f49c4d95ee -> 9bb4bb9680b28b238ae5840f9de2963a81e01119 ([`pr/subtree.1`](https://github.com/ryanofsky/bitcoin/commits/pr/subtree.1) -> [`pr/subtree.2`](https://github.com/ryanofsky/bitcoin/commits/pr/subtree.2), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/subtree.1-rebase..pr/subtree.2)) on updated base PR to fix CI errors\r\nUpdated 9bb4bb9680b28b238ae5840f9de2963a81e01119 -> 93ba80b3d78fa1c4e7f614df6517b9cb492d05d7 ([`pr/subtree.2`](https://github.com/ryanofsky/bitcoin/commits/pr/subtree.2) -> [`pr/subtree.3`](https://github.com/ryanofsky/bitcoin/commits/pr/subtree.3), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/subtree.2..pr/subtree.3)) to fix path typo in previous push",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2616653238",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16082887239,
      "node_id": "HRFPE_lADOABII586nsxBLzwAAAAO-nWJH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16082887239",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "93ba80b3d78fa1c4e7f614df6517b9cb492d05d7",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/93ba80b3d78fa1c4e7f614df6517b9cb492d05d7",
      "created_at": "2025-01-27T19:07:47Z"
    },
    {
      "event": "commented",
      "id": 2616720933,
      "node_id": "IC_kwDOABII586b9_4l",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2616720933",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-27T19:33:56Z",
      "updated_at": "2025-01-27T19:33:56Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2616720933",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "unlabeled",
      "id": 16083776012,
      "node_id": "UNLE_lADOABII586nsxBLzwAAAAO-qvIM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16083776012",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-27T20:29:42Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2617367421,
      "node_id": "IC_kwDOABII586cAdt9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2617367421",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T01:02:58Z",
      "updated_at": "2025-01-28T01:17:40Z",
      "author_association": "MEMBER",
      "body": "@ryanofsky Please have a look here: https://github.com/theuni/bitcoin/commit/f2d74475433528c81c42af3232c257c443c1fc94\r\n\r\nIt's a quick hack to demonstrate the concept, please ignore the rough edges and consider the concept alone. I'll clean it up if you're interested.\r\n\r\nThat approach would simplify things for (I suspect) 99% of builders, who never need to regenerate the files. Let me know what you think?\r\n\r\nEdit: Note that if you're using depends, you'll need to overwrite `depends/$(host)/native/lib/cmake/Libmultiprocess/CopyOrGenerate.cmake` with `src/ipc/libmultiprocess/cmake/TargetCapnpSources.cmake`. If we take this approach, that file would be updated upstream accordingly.",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2617367421",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "mentioned",
      "id": 16086030926,
      "node_id": "MEE_lADOABII586nsxBLzwAAAAO-zVpO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16086030926",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T01:03:00Z"
    },
    {
      "event": "subscribed",
      "id": 16086030936,
      "node_id": "SE_lADOABII586nsxBLzwAAAAO-zVpY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16086030936",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T01:03:00Z"
    },
    {
      "event": "reviewed",
      "id": 2577588200,
      "node_id": "PRR_kwDOABII586Zot_o",
      "url": null,
      "actor": null,
      "commit_id": "93ba80b3d78fa1c4e7f614df6517b9cb492d05d7",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept ACK\r\n\r\nIt would be good to remind people in the PR description how one verifies a subtree: https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#subtrees (you should add `ipc/multiprocess` to the list there) and https://github.com/bitcoin/bitcoin/tree/master/test/lint#git-subtree-checksh\r\n\r\nTL&DR: \r\n\r\n```sh\r\ngit remote add --fetch libmultiprocess https://github.com/chaincodelabs/libmultiprocess.git\r\ntest/lint/git-subtree-check.sh -r src/ipc/libmultiprocess\r\n```\r\n\r\nIt would be good to have an additional CI machine cover multiprocess, using the non-depends `-DBUILD_MULTIPROCESS=1` and with `BITCOIND=bitcoin-node`. For easy rebasing in #30975,  `ci/test/00_setup_env_mac_native.sh` would have my preference.\r\n\r\n@theuni I'm all for speeding up the build, though that should probably be a followup.\r\n\r\nOn (M4) macOS 15.2 I get a flood of warnings, which means I can't use ` -DWERROR=ON`:\r\n\r\n```\r\nIn file included from /opt/homebrew/include/capnp/common.h:31:\r\n/opt/homebrew/include/kj/windows-sanity.h:39:6: warning: '_WIN32' is not defined, evaluates to 0 [-Wundef]\r\n   39 | #if !_WIN32 && !__CYGWIN__\r\n      |      ^\r\n/opt/homebrew/include/kj/windows-sanity.h:39:17: warning: '__CYGWIN__' is not defined, evaluates to 0 [-Wundef]\r\n   39 | #if !_WIN32 && !__CYGWIN__\r\n      |     \r\n\r\n/opt/homebrew/include/capnp/common.h:33:5: warning: 'CAPNP_DEBUG_TYPES' is not defined, evaluates to 0 [-Wundef]\r\n\r\n/opt/homebrew/include/capnp/raw-schema.h:26:5: warning: '_MSC_VER' is not defined, evaluates to 0 [-Wundef]\r\n\r\n/opt/homebrew/include/kj/async-prelude.h:34:6: warning: 'KJ_NO_EXCEPTIONS' is not defined, evaluates to 0 [-Wundef]\r\n```\r\n\r\nBuilding `MULTIPROCESS=1` with depends now fails:\r\n\r\n```\r\n...\r\nPostprocessing native_capnp...\r\nCaching native_capnp...\r\nFetching from\r\ncurl: (3) URL rejected: No host part in the URL\r\nFetching from https://bitcoincore.org/depends-sources\r\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\r\n                                 Dload  Upload   Total   Spent    Left  Speed\r\n  0  308k    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r\ncurl: (22) The requested URL returned error: 403\r\nmake: *** [/Users/sjors/dev/bitcoin/depends/sources/download-stamps/.stamp_fetched-native_libmultiprocess-.hash] Error 22\r\n```\r\n\r\nBefore commit 01452f8c0da58db549bc46d0cfa7de715344efc4 depends does build (as you would expect).",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#pullrequestreview-2577588200",
      "submitted_at": "2025-01-28T09:33:27Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31741"
    },
    {
      "event": "commented",
      "id": 2618716545,
      "node_id": "IC_kwDOABII586cFnGB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2618716545",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T11:21:52Z",
      "updated_at": "2025-01-28T11:21:52Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2618716545",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "commented",
      "id": 2619468899,
      "node_id": "IC_kwDOABII586cIexj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2619468899",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T16:19:28Z",
      "updated_at": "2025-01-28T16:19:28Z",
      "author_association": "CONTRIBUTOR",
      "body": "re: https://github.com/bitcoin/bitcoin/pull/31741#pullrequestreview-2577588200\r\n\r\nThanks @Sjors for the review. I'll make changes you suggested and I opened two issues https://github.com/chaincodelabs/libmultiprocess/issues/138 and https://github.com/chaincodelabs/libmultiprocess/issues/139 to debug the problems you are seeing, and I will post next steps there. Thanks for reporting these.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2619468899",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "mentioned",
      "id": 16096046104,
      "node_id": "MEE_lADOABII586nsxBLzwAAAAO_ZiwY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16096046104",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T16:19:29Z"
    },
    {
      "event": "subscribed",
      "id": 16096046122,
      "node_id": "SE_lADOABII586nsxBLzwAAAAO_Ziwq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16096046122",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T16:19:29Z"
    },
    {
      "event": "commented",
      "id": 2619623574,
      "node_id": "IC_kwDOABII586cJEiW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2619623574",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T17:22:04Z",
      "updated_at": "2025-01-28T17:30:52Z",
      "author_association": "CONTRIBUTOR",
      "body": "> @ryanofsky Please have a look here: [theuni@f2d7447](https://github.com/theuni/bitcoin/commit/f2d74475433528c81c42af3232c257c443c1fc94)\r\n> \r\n> It's a quick hack to demonstrate the concept, please ignore the rough edges and consider the concept alone. I'll clean it up if you're interested.\r\n\r\nI feel like I'm missing a lot of context which led up to that implemention, and also I wonder if files are missing from that commit because just shows a new `CopyOrGenerate.cmake` script that does not actually seem to be called anywhere.\r\n\r\nFrom what I can understand though, this script seems to be acting like a wrapper around the `mpgen` executable that avoids calling `mpgen` if cached outputs are present. If they are present they will be copied from one location to another (unclear what source location is since it is not specified in the script).\r\n\r\nSo I presume the idea behind this is that in cross-compiled builds, it will not be necessarily to have an `mpgen` utility built, because the `mpgen` outputs can be checked in to git, or downloaded from some external location, and they can be copied into the build instead of calling `mpgen`. And this will allow deleting the [`native_capnp.mk`](https://github.com/ryanofsky/bitcoin/blob/pr/subtree/depends/packages/native_libmultiprocess.mk) and [`libmultiprocess.mk`](https://github.com/ryanofsky/bitcoin/blob/pr/subtree/depends/packages/libmultiprocess.mk) packages, which I'm speculating is your ultimate goal? It is unclear what your goal is.\r\n\r\nI don't have a problem with that approach, if that's the approach you think is better. I would point out that it will have drawbacks. For one thing if the plan is to check these files into git then we will need some kind of CI rule to ensure that they are generated correctly and not just trust authors of PRs to generate them. The generated files will also be tied to a individual releases of capnproto so everybody will have to run the same capnproto version. Capnproto does not allow mixing headers generated by one version with the library of another version, and it has an explicit preprocessor check to prevent this. The generated files could also make PR review unwieldy, because a simple change to a capnp file could lead to much bigger changes in generated files (which contain binary data in C arrays and are not very friendly to diffing. Changes to generated files could be especially make PRs hard to review if they change .capnp files in multiple commits, and lead to headaches rebasing.\r\n\r\nIf you want to go down this road it seems ok, but I think it would be very helpful if you could a little time to actually review this PR. I am happy with this PR currently and think the approach it takes is elegant. It leverages fantastic work @hebasto did in https://github.com/chaincodelabs/libmultiprocess/pull/96 and later PRs to simultaneously support cmake packaging while also simplifying the libmultiprocess build.\r\n\r\nThere are two nontrivial commits in this PR. 01452f8c0da58db549bc46d0cfa7de715344efc4 adds an obvious feature to the depends system, that I'm surprised wasn't in there from the beginning: the ability to build sources from a local directory instead of requiring them to be published to an http server. The feature is simple, ergonomic, clearly documented, and implemented in literally 12 lines of code. The second commit d70474da4d1f3bc623e3167dab63a7860f99875f is nontrivial but also pretty straightforward. It adds a `add_subdirectory(libmultiprocess)` call and updates a handful of other things in the cmake build to support that call.\r\n\r\nIf I have one takeaway from implementing this PR, it is that `find_package` is great and `add_subdirectory` is terrible. `add_subdirectory`is bad because it leaks all kinds of information you don't want to leak from the parent directory to the child directory (include paths and other options) and vice versa (child targets leak into the parent build). `find_package` has standard scoping mechanisms and ways of passing information, while `add_subdirectory` is ad-hoc and requires `PARENT_SCOPE` assignments. So in terms of robustness and dealing with breakages in the future, I think keeping depends [`native_capnp.mk`](https://github.com/ryanofsky/bitcoin/blob/pr/subtree/depends/packages/native_libmultiprocess.mk) and [`libmultiprocess.mk`](https://github.com/ryanofsky/bitcoin/blob/pr/subtree/depends/packages/libmultiprocess.mk) packages, using `find_package`, and avoiding `add_subdirectory` when making releases and cross compiling will make debugging and support more straightforward. Then with `find_package` support working, additionally supporting `add_subdirectory` for local development is pretty easy and just requires a few extra lines of code (`add_subdirectory` call and some set `PARENT_SCOPE` lines).",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2619623574",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "mentioned",
      "id": 16096953703,
      "node_id": "MEE_lADOABII586nsxBLzwAAAAO_dAVn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16096953703",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T17:22:06Z"
    },
    {
      "event": "subscribed",
      "id": 16096953753,
      "node_id": "SE_lADOABII586nsxBLzwAAAAO_dAWZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16096953753",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T17:22:06Z"
    },
    {
      "event": "mentioned",
      "id": 16096953789,
      "node_id": "MEE_lADOABII586nsxBLzwAAAAO_dAW9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16096953789",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T17:22:06Z"
    },
    {
      "event": "subscribed",
      "id": 16096953822,
      "node_id": "SE_lADOABII586nsxBLzwAAAAO_dAXe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16096953822",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T17:22:06Z"
    },
    {
      "event": "commented",
      "id": 2619837571,
      "node_id": "IC_kwDOABII586cJ4yD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2619837571",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T19:04:32Z",
      "updated_at": "2025-01-28T19:04:32Z",
      "author_association": "MEMBER",
      "body": "> > @ryanofsky Please have a look here: [theuni@f2d7447](https://github.com/theuni/bitcoin/commit/f2d74475433528c81c42af3232c257c443c1fc94)\r\n> > It's a quick hack to demonstrate the concept, please ignore the rough edges and consider the concept alone. I'll clean it up if you're interested.\r\n> \r\n> I feel like I'm missing a lot of context which led up to that implemention, and also I wonder if files are missing from that commit because just shows a new `CopyOrGenerate.cmake` script that does not actually seem to be called anywhere.\r\n> \r\n\r\nYes, sorry, I missed the chunk that actually turns it on. Pushed again, see https://github.com/theuni/bitcoin/commit/274cc5598db09af687e7383979b377460a59ef94.\r\n\r\n> From what I can understand though, this script seems to be acting like a wrapper around the `mpgen` executable that avoids calling `mpgen` if cached outputs are present. If they are present they will be copied from one location to another (unclear what source location is since it is not specified in the script).\r\n> \r\n\r\nCorrect\r\n\r\n> So I presume the idea behind this is that in cross-compiled builds, it will not be necessarily to have an `mpgen` utility built, because the `mpgen` outputs can be checked in to git, or downloaded from some external location, and they can be copied into the build instead of calling `mpgen`. And this will allow deleting the [`native_capnp.mk`](https://github.com/ryanofsky/bitcoin/blob/pr/subtree/depends/packages/native_libmultiprocess.mk) and [`libmultiprocess.mk`](https://github.com/ryanofsky/bitcoin/blob/pr/subtree/depends/packages/libmultiprocess.mk) packages, which I'm speculating is your ultimate goal? It is unclear what your goal is.\r\n> \r\n\r\nCorrect. Even if it's not desirable to check these into master, it would be _very_ useful to have them in release branches so that they end up in release tarballs. It's very common for source packages to be pre-bootstrapped, and that's exactly what this would do.\r\n\r\nConsider how much simpler this would be for builders/packagers (who don't use depends) to build cross packages. \r\n\r\n> I don't have a problem with that approach, if that's the approach you think is better. I would point out that it will have drawbacks. For one thing if the plan is to check these files into git then we will need some kind of CI rule to ensure that they are generated correctly and not just trust authors of PRs to generate them.\r\n\r\nIndeed.\r\n\r\n> The generated files will also be tied to a individual releases of capnproto so everybody will have to run the same capnproto version. Capnproto does not allow mixing headers generated by one version with the library of another version, and it has an explicit preprocessor check to prevent this.\r\n\r\nI think we would want to enforce this anyway? One of the rules we decided on for CMake is \"newer build-side tools should never lead to different/better code\". For example, A newer version of CMake should produce the same code as an older one. If newer versions of capnproto produce materially different code, I think we'd want force a pinning (for everyone) to whatever we're using in guix, no?\r\n\r\n> The generated files could also make PR review unwieldy, because a simple change to a capnp file could lead to much bigger changes in generated files (which contain binary data in C arrays and are not very friendly to diffing. Changes to generated files could be especially make PRs hard to review if they change .capnp files in multiple commits, and lead to headaches rebasing.\r\n\r\nAgreed, that does sound like it could be painful.\r\n\r\n> \r\n> If you want to go down this road it seems ok, but I think it would be very helpful if you could a little time to actually review this PR. I am happy with this PR currently and think the approach it takes is elegant. It leverages fantastic work @hebasto did in [chaincodelabs/libmultiprocess#96](https://github.com/chaincodelabs/libmultiprocess/pull/96) and later PRs to simultaneously support cmake packaging while also simplifying the libmultiprocess build.\r\n> \r\n\r\nThis is my process for review :) Please don't think that just because I'm proposing a procedural change, that I'm somehow ignoring the work that has gone in. It also doesn't mean that I plan on being pushy about this approach. This is a significant change for us and I want to make sure that I understand it and its drawbacks. Maybe the pre-bootstrapped-files idea is terrible, but I wanted to see what it would take to make it happen.\r\n\r\nTo my knowledge, we've never (as part of our release builds) required any native tooling (beyond the toolchain) for pre-processing of our code. [edit: Er.. ok, that's not true. QT requires pre-processing, but its native tools are widely available]. Adding to that, CMake doesn't understand the concept of build/host split tools. So for something that is going to be a hard requirement for future builds, I'm doing my due diligence to understand how we can make this as painless for devs/packagers as possible.\r\n\r\nIt's easiest for me to review something like this by basically implementing a solution myself and seeing where we diverge. So far, I'm mostly arriving at the same conclusions as you. I wouldn't have come up with the depends-source-tarball thing though. That one's clever :)\r\n\r\n\r\n> There are two nontrivial commits in this PR. [01452f8](https://github.com/bitcoin/bitcoin/commit/01452f8c0da58db549bc46d0cfa7de715344efc4) adds an obvious feature to the depends system, that I'm surprised wasn't in there from the beginning: the ability to build sources from a local directory instead of requiring them to be published to an http server. The feature is simple, ergonomic, clearly documented, and implemented in literally 12 lines of code. The second commit [d70474d](https://github.com/bitcoin/bitcoin/commit/d70474da4d1f3bc623e3167dab63a7860f99875f) is nontrivial but also pretty straightforward. It adds a `add_subdirectory(libmultiprocess)` call and updates a handful of other things in the cmake build to support that call.\r\n> \r\n\r\nI think the depends source-package thing is elegant and neat. But in the cross-compiled case, it effectively nullifies the effect of vendoring the code. Changes to the local libmultiprocess won't be picked up without rebuilding depends. I think this could be improved by always using our internal target libmultiprocess, but selectively with an internel/external native one? In that case, I don't think the non-native libmultiprocess in depends needs to exist? Maybe that's nonsense... I'm still trying to understand how it all glues together, I'm nowhere near done yet. Again, hacking around is how I understand/review, please don't take it as a criticism.\r\n\r\n> If I have one takeaway from implementing this PR, it is that `find_package` is great and `add_subdirectory` is terrible. `add_subdirectory`is bad because it leaks all kinds of information you don't want to leak from the parent directory to the child directory (include paths and other options) and vice versa (child targets leak into the parent build). `find_package` has standard scoping mechanisms and ways of passing information, while `add_subdirectory` is ad-hoc and requires `PARENT_SCOPE` assignments. So in terms of robustness and dealing with breakages in the future, I think keeping depends [`native_capnp.mk`](https://github.com/ryanofsky/bitcoin/blob/pr/subtree/depends/packages/native_libmultiprocess.mk) and [`libmultiprocess.mk`](https://github.com/ryanofsky/bitcoin/blob/pr/subtree/depends/packages/libmultiprocess.mk) packages, using `find_package`, and avoiding `add_subdirectory` when making releases and cross compiling will make debugging and support more straightforward.\r\n\r\nThis negates many of the benefits of vendoring, though. Namely hardening/optimizations. A libmultiprocess built in depends wouldn't get the same build flags as it would if it were building from our project. So yes, while the leakiness of the subdirectory approach is annoying (see leveldb/crc32c for example, we completely ignore their CMake files), it also has its benefits.",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2619837571",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "mentioned",
      "id": 16098158963,
      "node_id": "MEE_lADOABII586nsxBLzwAAAAO_hmlz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16098158963",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T19:04:34Z"
    },
    {
      "event": "subscribed",
      "id": 16098158974,
      "node_id": "SE_lADOABII586nsxBLzwAAAAO_hml-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16098158974",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T19:04:34Z"
    },
    {
      "event": "mentioned",
      "id": 16098158993,
      "node_id": "MEE_lADOABII586nsxBLzwAAAAO_hmmR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16098158993",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T19:04:34Z"
    },
    {
      "event": "subscribed",
      "id": 16098159008,
      "node_id": "SE_lADOABII586nsxBLzwAAAAO_hmmg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16098159008",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T19:04:34Z"
    },
    {
      "event": "commented",
      "id": 2619854239,
      "node_id": "IC_kwDOABII586cJ82f",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2619854239",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T19:13:29Z",
      "updated_at": "2025-01-28T19:55:35Z",
      "author_association": "MEMBER",
      "body": "> I think the depends source-package thing is elegant and neat. But in the cross-compiled case, it effectively nullifies the effect of vendoring the code. Changes to the local libmultiprocess won't be picked up without rebuilding depends. I think this could be improved by always using our internal target libmultiprocess, but selectively with an internel/external native one? In that case, I don't think the non-native libmultiprocess in depends needs to exist?\r\n\r\nBasically (unless I'm missing something?) I think libmultiprocess needs an `EXTERNAL_MPGEN` option, same as capnproto has: https://github.com/capnproto/capnproto/blob/v2/c%2B%2B/CMakeLists.txt#L29. That would allow what I proposed above to work.\r\n\r\nI'm working on a POC for that now.\r\n\r\nEdit: wait, is mpgen not required to build libmultiprocess itself? See, this is a helpful exercise :)  ",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2619854239",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "commented",
      "id": 2620013263,
      "node_id": "IC_kwDOABII586cKjrP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2620013263",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T20:40:51Z",
      "updated_at": "2025-01-28T20:40:51Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks for the feedback and clearing things up. Will be interested to see the EXTERNAL_MPGEN option and maybe eliminate one of the depends packages.\r\n\r\n> I think the depends source-package thing is elegant and neat. But in the cross-compiled case, it effectively nullifies the effect of vendoring the code. Changes to the local libmultiprocess won't be picked up without rebuilding depends.\r\n\r\nI don't think \"effectively nullifies the effect of vendoring\" is true at all, unless you have some different goals in mind that I'm not aware of. My main goal here is to make it trivial for developers to build multiprocess binaries by running \"apt install libcapnp-dev capnproto` and `-DBUILD_MULTIPROCESS=ON` and not having to do anything else. (At some point in a followup I would also like to change default to ON so even the latter is not necessary.) I also want the depends system to use the git subtree, so I am tweaking the depends system minimally to do that.\r\n\r\nThe use-case you seem to be referencing is a more particular one where someone is using the depends system and also modifying the libmultiprocess library. The PR helps a lot with that use-case, and supports it by only requiring the developer to touch `libmultiprocess` directory and rerun their depends make command after changes to libmultiprocess code. This is much easier than what you have to do now, which is commit the changes to git, push them to github, update the version_hash and sha256_hash in the package file, and then run depends again.\r\n\r\nThis build steps in this use-case are also basically the same steps I've been using to develop libmultiprocess up to this point for years now, where after I make a change, I run \"make install\" in the libmultiprocess build and then run \"make\" in the bitcoin build. I can tell you from experience it is not too onerous.\r\n\r\n> I think this could be improved by always using our internal target libmultiprocess, but selectively with an internel/external native one?\r\n\r\nYes we could support building with an internal libmultiprocess for the library an external libmultiprocess for the code generator. This is your `EXTERNAL_MPGEN` suggestion. It would just require defining a new option and adding a few `if()` statements to the build. It could help avoid the need to rerun depends in the use-case above if only the library not code generator is being modified. It would also allow bitcoin flags to automatically propagate to the libmultiprocess library.\r\n\r\n> In that case, I don't think the non-native libmultiprocess in depends needs to exist?\r\n\r\nThat's right. Overall `EXTERNAL_MPGEN` or an equivalent is a reasonable idea that may be worth doing as a followup. The implementation would be be a superset of this change, not replace or eliminate changes already here. One drawback of using this option and eliminating the cross-compiled `libmultiprocess.mk` package would be that the library and code generator would no longer be built together in lockstep. So you could make changes to the code generator and they might not be picked up while changes to the library are, which couldn't happen with the current PR. I don't think it is a big concern though.\r\n\r\n>Maybe that's nonsense... I'm still trying to understand how it all glues together, I'm nowhere near done yet. Again, hacking around is how I understand/review, please don't take it as a criticism.\r\n\r\nNo problem at all. An `EXTERNAL_MPGEN` is potentially useful idea I didn't really think about. Just more of an add-on than a replacement for the changes here.\r\n\r\n> This negates many of the benefits of vendoring, though. Namely hardening/optimizations. A libmultiprocess built in depends wouldn't get the same build flags as it would if it were building from our project. So yes, while the leakiness of the subdirectory approach is annoying (see leveldb/crc32c for example, we completely ignore their CMake files), it also has its benefits.\r\n\r\nI can see this both ways. My inclination was that if you want flags to apply to a library you should just pass them to the library because, this broke the libmultiprocess build earlier and forced me to add [a workaround](https://github.com/chaincodelabs/libmultiprocess/blob/07c917f7ca910d66abc6d3873162fc9061704074/CMakeLists.txt#L34-L37). But I could imagine other cases where leaking flags are more helpful.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2620013263",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "commented",
      "id": 2620090133,
      "node_id": "IC_kwDOABII586cK2cV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2620090133",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T21:27:19Z",
      "updated_at": "2025-01-29T02:38:30Z",
      "author_association": "CONTRIBUTOR",
      "body": "Few other things I wanted to reply to.\r\n\r\nre: https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2619837571\r\n\r\n> Correct. Even if it's not desirable to check these into master, it would be _very_ useful to have them in release branches so that they end up in release tarballs. It's very common for source packages to be pre-bootstrapped, and that's exactly what this would do.\r\n\r\nThis is just a gut reaction, but as a long-time gentoo and nixos user, this sounds pretty bad to me. I'd want my package manager to build from human readable source code, not from pregenerated files that require a bespoke process to verify and won't be verified in practice. Maybe human readable source isn't enough either, and there are no good solutions, but if you are relying \"pre-bootstrapped\" files for convenience, it seems like you just asking for another xz backdoor to happen. (I don't remember the details there but the wikipedia [article](https://en.wikipedia.org/wiki/XZ_Utils_backdoor) says \"A modified version of build-to-host.m4 was included in the release tar file uploaded on GitHub\" which sounds exactly the the type of build cruft I would like my package manager to not trust and not use.)\r\n\r\n> Consider how much simpler this would be for builders/packagers (who don't use depends) to build cross packages.\r\n\r\nI don't have much experience with cross compiling package managers other than working a little with nix, the depends system, and buildroot a long time ago, but I don't think having pregenerated headers would simplify any of these systems. \r\n\r\nGenerated code from protobufs, flex, bison, and many other tools are commonly used, it is common to not check generated sources into git repositories, which all of these systems support in some fashion. Even in our own depends system, running native packages is not anything special and at the time I started working with it there were actually [7 other native packages](https://github.com/bitcoin/bitcoin/blob/d6306466626635e6fee44385e6a688c8dc118eb5/depends/packages) besides the two I added.\r\n\r\nI could be wrong on this point. Maybe there really are cross compiled packages that could be simplified by using pregenerated sources. But I'd want to see some actual example of that before accepting this was the case.\r\n\r\n> Capnproto does not allow mixing headers generated by one version with the library of another version, and it has an explicit preprocessor check to prevent this.\r\n> \r\n> I think we would want to enforce this anyway?\r\n\r\nWe might be saying different things here. I am saying if we check generated headers into the git development branch and they are used by default, then every revision in our git repository is hardcoded to a particular version of capnproto. You couldn't for example check out code from 3 months ago while having capnproto 1.1 installed your system, you would have to downgrade to 1.02.\r\n\r\n> One of the rules we decided on for CMake is \"newer build-side tools should never lead to different/better code\". For example, A newer version of CMake should produce the same code as an older one. If newer versions of capnproto produce materially different code, I think we'd want force a pinning (for everyone) to whatever we're using in guix, no?\r\n\r\nI can't think of what benefits that may provide. Capnproto is very backwards compatible, it just doesn't want you to use old generated headers and new library headers together or vice versa because the static code and generated code work together internally and there is not some public interface between them. If you just build from source, everything works perfectly well, but if you check pregenerated headers into git and try to use them you will have headaches. Maybe the headaches could be worth it. I don't have the answer to that.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2620090133",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "reviewed",
      "id": 2580677561,
      "node_id": "PRR_kwDOABII586Z0gO5",
      "url": null,
      "actor": null,
      "commit_id": "01452f8c0da58db549bc46d0cfa7de715344efc4",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#pullrequestreview-2580677561",
      "submitted_at": "2025-01-29T10:58:25Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31741"
    },
    {
      "event": "commented",
      "id": 2621465199,
      "node_id": "IC_kwDOABII586cQGJv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2621465199",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-29T12:07:57Z",
      "updated_at": "2025-01-29T12:07:57Z",
      "author_association": "CONTRIBUTOR",
      "body": "As an alternative to reaching into depends or committing generated files, could it be feasible to set native compilers in the toolchain file instead for compiling the code generators?",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2621465199",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "referenced",
      "id": 16107003798,
      "node_id": "REFE_lADOABII586nsxBLzwAAAAPADV-W",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16107003798",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "ad2f9324c619ae608c434ee85ad9ae1b2812877d",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ad2f9324c619ae608c434ee85ad9ae1b2812877d",
      "created_at": "2025-01-29T12:10:32Z"
    },
    {
      "event": "commented",
      "id": 2621519226,
      "node_id": "IC_kwDOABII586cQTV6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2621519226",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-29T12:33:44Z",
      "updated_at": "2025-01-29T12:33:44Z",
      "author_association": "MEMBER",
      "body": "Concept ACK.",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2621519226",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1931807802",
      "pull_request_review_id": 2577588200,
      "id": 1931807802,
      "node_id": "PRRC_kwDOABII585zJQw6",
      "diff_hunk": "@@ -25,9 +27,9 @@ build/src/bitcoin-node -regtest -printtoconsole -debug=ipc\n BITCOIND=$(pwd)/build/src/bitcoin-node build/test/functional/test_runner.py\n ```\n \n-The `cmake` build will pick up settings and library locations from the depends directory, so there is no need to pass `-DWITH_MULTIPROCESS=ON` as a separate flag when using the depends system (it's controlled by the `MULTIPROCESS=1` option).\n+The `cmake` build will pick up settings and library locations from the depends directory, so there is no need to pass `-DBUILD_MULTIPROCESS=ON` as a separate flag when using the depends system (it's controlled by the `MULTIPROCESS=1` option).\n \n-Alternately, you can install [Cap'n Proto](https://capnproto.org/) and [libmultiprocess](https://github.com/chaincodelabs/libmultiprocess) packages on your system, and just run `cmake -B build -DWITH_MULTIPROCESS=ON` without using the depends system. The `cmake` build will be able to locate the installed packages via [pkg-config](https://www.freedesktop.org/wiki/Software/pkg-config/). See [Installation](https://github.com/chaincodelabs/libmultiprocess/blob/master/doc/install.md) section of the libmultiprocess readme for install steps. See [build-unix.md](build-unix.md) and [build-osx.md](build-osx.md) for information about installing dependencies in general.\n+When not using depends, the [libmultiprocess](https://github.com/chaincodelabs/libmultiprocess) library can optionally be installed as an external dependency and enabled with the `-DWITH_LIBMULTIPROCESS=ON` option. If this is disabled, a local git submodule will be used instead. See [Installation](https://github.com/chaincodelabs/libmultiprocess/blob/master/doc/install.md) section of the libmultiprocess documentation for install steps. Installing libmultiprocess externally is only necessary when cross-compiling (to provide a code generation binary that can run on the native system). It can also be useful when developing changes meant to be submitted upstream.",
      "path": "doc/multiprocess.md",
      "position": 28,
      "original_position": 28,
      "commit_id": "93ba80b3d78fa1c4e7f614df6517b9cb492d05d7",
      "original_commit_id": "b8289e77aaa2478828caf7c91a59fc15c96fb187",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "b8289e77aaa2478828caf7c91a59fc15c96fb187: \"local git subtree\"\r\n\r\nI would first explain the default behavior, and then point out that `-DWITH_LIBMULTIPROCESS=ON` can be used to use a locally installed library instead.",
      "created_at": "2025-01-28T09:26:42Z",
      "updated_at": "2025-01-28T09:33:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#discussion_r1931807802",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1931807802"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31741"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 32,
      "original_line": 32,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1933669516",
      "pull_request_review_id": 2580677561,
      "id": 1933669516,
      "node_id": "PRRC_kwDOABII585zQXSM",
      "diff_hunk": "@@ -39,8 +39,20 @@ define fetch_file\n       $(call fetch_file_inner,$(1),$(FALLBACK_DOWNLOAD_PATH),$(3),$(4),$(5))))\n endef\n \n+define int_get_local_dir\n+$(eval $(1)_sha256_hash:=$(shell\n+    if ! [ -f $($(1)_fetched) ] || [ $($(1)_fetched) -ot $($(1)_local_dir) ]; then \\\n+        mkdir -p $(dir $($(1)_fetched)); \\\n+        $(build_TAR) -c --sort=name --mtime=0 --owner=0 --group=0 --numeric-owner -f $($(1)_source) -C $($(1)_local_dir) . && \\",
      "path": "depends/funcs.mk",
      "position": 8,
      "original_position": 8,
      "commit_id": "93ba80b3d78fa1c4e7f614df6517b9cb492d05d7",
      "original_commit_id": "01452f8c0da58db549bc46d0cfa7de715344efc4",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "01452f8c0da58db549bc46d0cfa7de715344efc4: the Apple version of tar doesn't have `--sort`, see https://github.com/chaincodelabs/libmultiprocess/issues/139#issuecomment-2621080394",
      "created_at": "2025-01-29T10:58:24Z",
      "updated_at": "2025-01-29T10:58:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#discussion_r1933669516",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1933669516"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31741"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 46,
      "original_line": 46,
      "side": "RIGHT"
    }
  ]
}