{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697",
    "id": 202099837,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MjAyMDk5ODM3",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13697",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/13697.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/13697.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13697",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13697/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
    "number": 13697,
    "state": "closed",
    "locked": true,
    "maintainer_can_modify": false,
    "title": "Support output descriptors in scantxoutset",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "As promised, here is an implementation of my output descriptor concept (https://gist.github.com/sipa/e3d23d498c430bb601c5bca83523fa82) and integration within the `scantxoutset` RPC that was just added through #12196.\r\n\r\nIt changes the RPC to use descriptors for everything; I hope the interface is simple enough to encompass all use cases. It includes support for P2PK, P2PKH, P2WPKH, P2SH, P2WSH, multisig, xpubs, xprvs, and chains of keys - combined in every possible way.",
    "labels": [
      {
        "id": 98279177,
        "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
        "name": "RPC/REST/ZMQ",
        "color": "0052cc",
        "default": false
      }
    ],
    "milestone": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/33",
      "html_url": "https://github.com/bitcoin/bitcoin/milestone/33",
      "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/33/labels",
      "id": 2931889,
      "node_id": "MDk6TWlsZXN0b25lMjkzMTg4OQ==",
      "number": 33,
      "state": "closed",
      "title": "0.17.0",
      "description": "",
      "creator": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "open_issues": 0,
      "closed_issues": 122,
      "created_at": "2017-11-22T18:54:09Z",
      "updated_at": "2018-11-28T21:03:57Z",
      "closed_at": "2018-10-14T23:21:13Z"
    },
    "active_lock_reason": "resolved",
    "created_at": "2018-07-17T23:18:13Z",
    "updated_at": "2021-12-16T13:56:14Z",
    "closed_at": "2018-08-01T18:07:24Z",
    "mergeable_state": "unknown",
    "merged_at": "2018-08-01T18:07:24Z",
    "merge_commit_sha": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "head": {
      "label": "sipa:201806_minedesc",
      "ref": "201806_minedesc",
      "sha": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 1458655,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNDU4NjU1",
        "name": "bitcoin",
        "full_name": "sipa/bitcoin",
        "owner": {
          "login": "sipa",
          "id": 548488,
          "node_id": "MDQ6VXNlcjU0ODQ4OA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/sipa",
          "html_url": "https://github.com/sipa",
          "followers_url": "https://api.github.com/users/sipa/followers",
          "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
          "organizations_url": "https://api.github.com/users/sipa/orgs",
          "repos_url": "https://api.github.com/users/sipa/repos",
          "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/sipa/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/sipa/bitcoin",
        "description": "Bitcoin integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/sipa/bitcoin",
        "archive_url": "https://api.github.com/repos/sipa/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/sipa/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/sipa/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/sipa/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/sipa/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/sipa/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/sipa/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/sipa/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/sipa/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/sipa/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/sipa/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/sipa/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/sipa/bitcoin/events",
        "forks_url": "https://api.github.com/repos/sipa/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/sipa/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/sipa/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/sipa/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/sipa/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/sipa/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/sipa/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/sipa/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/sipa/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/sipa/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/sipa/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/sipa/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/sipa/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/sipa/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/sipa/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/sipa/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:sipa/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/sipa/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/sipa/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/sipa/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/sipa/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/sipa/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/sipa/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/sipa/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/sipa/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/sipa/bitcoin/hooks",
        "svn_url": "https://github.com/sipa/bitcoin",
        "homepage": "http://www.bitcoin.org",
        "language": "TypeScript",
        "forks_count": 22,
        "stargazers_count": 84,
        "watchers_count": 84,
        "size": 218170,
        "default_branch": "lows",
        "open_issues_count": 16,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-08-01T19:30:18Z",
        "created_at": "2011-03-09T10:46:59Z",
        "updated_at": "2023-07-17T18:31:45Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "ef4fac0ea5b4891f4529e4b59dfd1f7aeb3009b5",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35475,
        "stargazers_count": 70607,
        "watchers_count": 70607,
        "size": 236222,
        "default_branch": "master",
        "open_issues_count": 670,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-08-02T17:47:04Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-08-02T16:22:48Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 994,
    "deletions": 131,
    "changed_files": 10,
    "commits": 9,
    "review_comments": 45,
    "comments": 17
  },
  "events": [
    {
      "event": "mentioned",
      "id": 1738920136,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTczODkyMDEzNg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1738920136",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-17T23:18:13Z"
    },
    {
      "event": "subscribed",
      "id": 1738920137,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDE3Mzg5MjAxMzc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1738920137",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-17T23:18:13Z"
    },
    {
      "event": "reviewed",
      "id": 138092091,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTM4MDkyMDkx",
      "url": null,
      "actor": null,
      "commit_id": "a6eba6912bdfa7e5809223b24817516c1509ce86",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#pullrequestreview-138092091",
      "submitted_at": "2018-07-18T03:26:51Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1739158205,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTczOTE1ODIwNQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1739158205",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-18T03:30:04Z"
    },
    {
      "event": "labeled",
      "id": 1740136301,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDE3NDAxMzYzMDE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1740136301",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-18T13:29:17Z",
      "label": {
        "name": "RPC/REST/ZMQ",
        "color": "0052cc"
      }
    },
    {
      "event": "reviewed",
      "id": 138248785,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTM4MjQ4Nzg1",
      "url": null,
      "actor": null,
      "commit_id": "422d08c1f907e92d8c4c216a71b6ca5ffbf05f0d",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Few nits, it this for 0.17? Is `scantxoutset` considered API experimental?",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#pullrequestreview-138248785",
      "submitted_at": "2018-07-18T13:38:54Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
    },
    {
      "event": "reviewed",
      "id": 138313440,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTM4MzEzNDQw",
      "url": null,
      "actor": null,
      "commit_id": "1b7c0c7fbd346109721197cefd4d464fc0bcae0b",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#pullrequestreview-138313440",
      "submitted_at": "2018-07-18T15:34:19Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
    },
    {
      "event": "reviewed",
      "id": 138325814,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTM4MzI1ODE0",
      "url": null,
      "actor": null,
      "commit_id": "1b7c0c7fbd346109721197cefd4d464fc0bcae0b",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#pullrequestreview-138325814",
      "submitted_at": "2018-07-18T16:01:21Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
    },
    {
      "event": "reviewed",
      "id": 138333458,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTM4MzMzNDU4",
      "url": null,
      "actor": null,
      "commit_id": "1b7c0c7fbd346109721197cefd4d464fc0bcae0b",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#pullrequestreview-138333458",
      "submitted_at": "2018-07-18T16:20:06Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
    },
    {
      "event": "reviewed",
      "id": 138333833,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTM4MzMzODMz",
      "url": null,
      "actor": null,
      "commit_id": "1b7c0c7fbd346109721197cefd4d464fc0bcae0b",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#pullrequestreview-138333833",
      "submitted_at": "2018-07-18T16:20:58Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
    },
    {
      "event": "reviewed",
      "id": 138333857,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTM4MzMzODU3",
      "url": null,
      "actor": null,
      "commit_id": "1b7c0c7fbd346109721197cefd4d464fc0bcae0b",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#pullrequestreview-138333857",
      "submitted_at": "2018-07-18T16:21:01Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
    },
    {
      "event": "reviewed",
      "id": 138337945,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTM4MzM3OTQ1",
      "url": null,
      "actor": null,
      "commit_id": "1b7c0c7fbd346109721197cefd4d464fc0bcae0b",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#pullrequestreview-138337945",
      "submitted_at": "2018-07-18T16:31:48Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
    },
    {
      "event": "reviewed",
      "id": 138338279,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTM4MzM4Mjc5",
      "url": null,
      "actor": null,
      "commit_id": "1b7c0c7fbd346109721197cefd4d464fc0bcae0b",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#pullrequestreview-138338279",
      "submitted_at": "2018-07-18T16:32:37Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1740948158,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTc0MDk0ODE1OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1740948158",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-18T19:25:42Z"
    },
    {
      "event": "commented",
      "id": 406047815,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjA0NzgxNQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/406047815",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-18T19:31:46Z",
      "updated_at": "2018-07-18T19:31:46Z",
      "author_association": "MEMBER",
      "body": "Rebased, removed future \"key origin\" support (not needed right now, ignore).\r\n\r\nAlso, I'd like people to first review the descriptor language itself (a very short summary is in the RPC help, more of a reference in script/descriptor.h, and a design document in https://gist.github.com/sipa/e3d23d498c430bb601c5bca83523fa82). In particular, I'm not convinced about the \"old\" function (which maps pubkeys to P2PK,P2PKH,P2WPKH, and P2SH-PWPKH) - it's very useful for dealing with existing Core wallets, but \"old\" doesn't really convey the right meaning. However, I don't see what else to use. \"legacy\" is confusing (as it would have a different meaning than legacy in -addresstype). \"default\" sounds like it could change over time (the intention is that it wouldn't). \"sk\" or \"singlekey\" sounds like it's encouraged and/or could change over time, ...",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#issuecomment-406047815",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13697"
    },
    {
      "event": "reviewed",
      "id": 138398176,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTM4Mzk4MTc2",
      "url": null,
      "actor": null,
      "commit_id": "1143a75c2f74335365dc62063f2fdc6c74eefcda",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept ACK",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#pullrequestreview-138398176",
      "submitted_at": "2018-07-18T20:06:55Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
    },
    {
      "event": "commented",
      "id": 406071681,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjA3MTY4MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/406071681",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-18T20:56:27Z",
      "updated_at": "2018-07-18T21:02:06Z",
      "author_association": "MEMBER",
      "body": "Regarding the \"old\" function, I think it could receive the version, for instance `default(args..., version)` â€” it should validate if args are compatible with the version specified (at the moment args should be only a pubkey).",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#issuecomment-406071681",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13697"
    },
    {
      "event": "commented",
      "id": 406074546,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjA3NDU0Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/406074546",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-18T21:06:36Z",
      "updated_at": "2018-07-18T21:08:12Z",
      "author_association": "MEMBER",
      "body": "@promag There is no intention of ever adding another of those \"defaults\". Future versions should work with specific derivations (only P2WSH directly for example, rather than a collection). It's only for compatibility with the backward way we used to derive what scriptPubKeys are ours that such a default is useful.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#issuecomment-406074546",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13697"
    },
    {
      "event": "mentioned",
      "id": 1741149620,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTc0MTE0OTYyMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1741149620",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-18T21:06:36Z"
    },
    {
      "event": "subscribed",
      "id": 1741149623,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDE3NDExNDk2MjM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1741149623",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-18T21:06:36Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1741292024,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTc0MTI5MjAyNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1741292024",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-18T22:33:08Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1741301891,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTc0MTMwMTg5MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1741301891",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-18T22:41:00Z"
    },
    {
      "event": "milestoned",
      "id": 1743321353,
      "node_id": "MDE1Ok1pbGVzdG9uZWRFdmVudDE3NDMzMjEzNTM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1743321353",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-19T19:08:32Z",
      "milestone": {
        "title": "0.17.0"
      }
    },
    {
      "event": "review_requested",
      "id": 1743564186,
      "node_id": "MDIwOlJldmlld1JlcXVlc3RlZEV2ZW50MTc0MzU2NDE4Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1743564186",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-19T21:21:59Z",
      "requested_reviewer": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1745673515,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTc0NTY3MzUxNQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1745673515",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-20T21:00:55Z"
    },
    {
      "event": "reviewed",
      "id": 139264846,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTM5MjY0ODQ2",
      "url": null,
      "actor": null,
      "commit_id": "79b8939362f8a7ebacf709c3ba3934ec731bc076",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept ACK, and lightly tested on Ledger (P2SH-P2WPKH) and Blockchain (P2PKH) xpubs.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#pullrequestreview-139264846",
      "submitted_at": "2018-07-21T18:34:39Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1746198096,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTc0NjE5ODA5Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1746198096",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-21T19:58:26Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1746204391,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTc0NjIwNDM5MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1746204391",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-21T20:25:17Z"
    },
    {
      "event": "unsubscribed",
      "id": 1746218720,
      "node_id": "MDE3OlVuc3Vic2NyaWJlZEV2ZW50MTc0NjIxODcyMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1746218720",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-21T21:23:09Z"
    },
    {
      "event": "commented",
      "id": 406866602,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjg2NjYwMg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/406866602",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-22T13:27:28Z",
      "updated_at": "2018-07-30T15:10:17Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->No more conflicts as of last run.",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#issuecomment-406866602",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13697"
    },
    {
      "event": "commented",
      "id": 407754444,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQwNzc1NDQ0NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/407754444",
      "actor": {
        "login": "flack",
        "id": 425166,
        "node_id": "MDQ6VXNlcjQyNTE2Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/425166?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/flack",
        "html_url": "https://github.com/flack",
        "followers_url": "https://api.github.com/users/flack/followers",
        "following_url": "https://api.github.com/users/flack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/flack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/flack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/flack/subscriptions",
        "organizations_url": "https://api.github.com/users/flack/orgs",
        "repos_url": "https://api.github.com/users/flack/repos",
        "events_url": "https://api.github.com/users/flack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/flack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-25T13:30:03Z",
      "updated_at": "2018-07-25T13:30:03Z",
      "author_association": "CONTRIBUTOR",
      "body": "@sipa since you write that `old` is a \"combination of P2PK, P2PKH, P2WPKH, and P2SH-P2WPKH for public key P.\", you could call it `combo` instead. Or `ck` if you want it to look more like the other things that use `P`. And potentially prepend `bc` to indicate it's for backwards compatibility (but in that case someone should check urban dictionary to make sure `bcck` isn't some newfangled swear word :-))",
      "user": {
        "login": "flack",
        "id": 425166,
        "node_id": "MDQ6VXNlcjQyNTE2Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/425166?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/flack",
        "html_url": "https://github.com/flack",
        "followers_url": "https://api.github.com/users/flack/followers",
        "following_url": "https://api.github.com/users/flack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/flack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/flack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/flack/subscriptions",
        "organizations_url": "https://api.github.com/users/flack/orgs",
        "repos_url": "https://api.github.com/users/flack/repos",
        "events_url": "https://api.github.com/users/flack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/flack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#issuecomment-407754444",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13697"
    },
    {
      "event": "mentioned",
      "id": 1752599603,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTc1MjU5OTYwMw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1752599603",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-25T13:30:03Z"
    },
    {
      "event": "subscribed",
      "id": 1752599605,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDE3NTI1OTk2MDU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1752599605",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-25T13:30:03Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-26T00:17:30Z",
      "updated_at": "2018-07-26T00:17:30Z",
      "source": {
        "issue": {
          "id": 344012462,
          "node_id": "MDExOlB1bGxSZXF1ZXN0MjAzNTA3NDk1",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13751",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13751/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13751/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13751/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/13751",
          "number": 13751,
          "state": "closed",
          "state_reason": null,
          "title": "Utils and libraries: Drops the boost/algorithm/string/split.hpp dependency",
          "body": "This pull request drops the `boost/algorithm/string/split.hpp` dependency from the project. It replaces `boost::split` with a custom template function `Split` that has a similar API and returns exactly the same results as `boost::split`.\r\n\r\nIn addition this pull request refactors an instance of `boost::algorithm::trim_right`, which was implicitly made available via the `boost/algorithm/string.hpp` dependency to prevent having to introduce a new dependency `boost/algorithm/string/trim.hpp`.\r\n\r\nThe `#include <boost/algorithm/string/predicate.hpp>` in `src/wallet/rpcdump.cpp` will be addressed in #13656 if that PR is merged after this one; or in this PR should #13656 be merged first.\r\n\r\nThe test vectors in the accompanying unit test have been validated against `boost::split`.",
          "user": {
            "login": "l2a5b1",
            "id": 13120787,
            "node_id": "MDQ6VXNlcjEzMTIwNzg3",
            "avatar_url": "https://avatars.githubusercontent.com/u/13120787?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/l2a5b1",
            "html_url": "https://github.com/l2a5b1",
            "followers_url": "https://api.github.com/users/l2a5b1/followers",
            "following_url": "https://api.github.com/users/l2a5b1/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/l2a5b1/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/l2a5b1/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/l2a5b1/subscriptions",
            "organizations_url": "https://api.github.com/users/l2a5b1/orgs",
            "repos_url": "https://api.github.com/users/l2a5b1/repos",
            "events_url": "https://api.github.com/users/l2a5b1/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/l2a5b1/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 41,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13751",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/13751",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/13751.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/13751.patch"
          },
          "closed_at": "2019-10-31T19:19:20Z",
          "created_at": "2018-07-24T12:19:56Z",
          "updated_at": "2022-02-15T11:04:10Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1755802976,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTc1NTgwMjk3Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1755802976",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-26T19:10:50Z"
    },
    {
      "event": "commented",
      "id": 408204024,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQwODIwNDAyNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/408204024",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-26T19:11:02Z",
      "updated_at": "2018-07-26T19:11:02Z",
      "author_association": "MEMBER",
      "body": "@flack Oh, I like that. Changed to \"combo\".",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#issuecomment-408204024",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13697"
    },
    {
      "event": "mentioned",
      "id": 1755803411,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTc1NTgwMzQxMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1755803411",
      "actor": {
        "login": "flack",
        "id": 425166,
        "node_id": "MDQ6VXNlcjQyNTE2Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/425166?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/flack",
        "html_url": "https://github.com/flack",
        "followers_url": "https://api.github.com/users/flack/followers",
        "following_url": "https://api.github.com/users/flack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/flack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/flack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/flack/subscriptions",
        "organizations_url": "https://api.github.com/users/flack/orgs",
        "repos_url": "https://api.github.com/users/flack/repos",
        "events_url": "https://api.github.com/users/flack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/flack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-26T19:11:02Z"
    },
    {
      "event": "subscribed",
      "id": 1755803412,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDE3NTU4MDM0MTI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1755803412",
      "actor": {
        "login": "flack",
        "id": 425166,
        "node_id": "MDQ6VXNlcjQyNTE2Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/425166?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/flack",
        "html_url": "https://github.com/flack",
        "followers_url": "https://api.github.com/users/flack/followers",
        "following_url": "https://api.github.com/users/flack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/flack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/flack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/flack/subscriptions",
        "organizations_url": "https://api.github.com/users/flack/orgs",
        "repos_url": "https://api.github.com/users/flack/repos",
        "events_url": "https://api.github.com/users/flack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/flack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-26T19:11:02Z"
    },
    {
      "event": "commented",
      "id": 408219631,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQwODIxOTYzMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/408219631",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-26T20:08:16Z",
      "updated_at": "2018-07-26T20:08:16Z",
      "author_association": "MEMBER",
      "body": "Travis failure:\r\n\r\n```\r\ntest_framework.authproxy.JSONRPCException: Invalid descriptor 'old(03abcaca414970a8d36624011628045855cb01cded780445a33688a0b905a47224)' (-5)",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#issuecomment-408219631",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13697"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1756185885,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTc1NjE4NTg4NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1756185885",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-26T23:03:06Z"
    },
    {
      "event": "commented",
      "id": 408354687,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQwODM1NDY4Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/408354687",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-27T08:47:42Z",
      "updated_at": "2018-07-27T08:47:42Z",
      "author_association": "CONTRIBUTOR",
      "body": "First two findings:\r\n\r\n* I think supporting `h` as equivalent to `'` in extended key derivation range would be great (JSON / shell / GUI). I suggest pulling in https://github.com/bitcoin/bitcoin/commit/203b4c94ce83981b0d76dd2adb778719ba868db1.\r\n\r\n* I think the `IsHardened()` function is not correct. Using `0'/0'/*` will derive all hardened keys at the * level (same as `0'/0'/*'`). Seems to be currently impossible to derive unhardened key with the asterisk.",
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#issuecomment-408354687",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13697"
    },
    {
      "event": "reviewed",
      "id": 141038847,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTQxMDM4ODQ3",
      "url": null,
      "actor": null,
      "commit_id": "852cf1f0785cf2ef6de34f0a9c426eacf39f11e8",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "",
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#pullrequestreview-141038847",
      "submitted_at": "2018-07-27T09:13:29Z",
      "state": "CHANGES_REQUESTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
    },
    {
      "event": "commented",
      "id": 408361519,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQwODM2MTUxOQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/408361519",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-27T09:14:02Z",
      "updated_at": "2018-07-27T09:14:02Z",
      "author_association": "CONTRIBUTOR",
      "body": "Additional xpub range tests can be pulled from here: https://github.com/bitcoin/bitcoin/commit/cc1ffb324b53855f7eae81a6b0df10bd677ca1a5",
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#issuecomment-408361519",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13697"
    },
    {
      "event": "commented",
      "id": 408364209,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQwODM2NDIwOQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/408364209",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-27T09:24:23Z",
      "updated_at": "2018-07-27T09:24:23Z",
      "author_association": "MEMBER",
      "body": "+1 on `h` alias\r\n\r\nI only tested unhardened derivation (`xpub/0/*`) because most wallets only export account level xpubs. @jonasschnelli maybe add a test for the `'/*)` pattern to cc1ffb3? It currently only checks `'/*')`",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#issuecomment-408364209",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13697"
    },
    {
      "event": "mentioned",
      "id": 1756858967,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTc1Njg1ODk2Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1756858967",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-27T09:24:23Z"
    },
    {
      "event": "subscribed",
      "id": 1756858968,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDE3NTY4NTg5Njg=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1756858968",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-27T09:24:23Z"
    },
    {
      "event": "commented",
      "id": 408371614,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQwODM3MTYxNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/408371614",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-27T09:54:46Z",
      "updated_at": "2018-07-27T09:54:46Z",
      "author_association": "CONTRIBUTOR",
      "body": "@Sjors: A test for `'/*` would currently fail,... but it's simple to add (keys are already prepared in \r\nhttps://github.com/bitcoin/bitcoin/commit/cc1ffb324b53855f7eae81a6b0df10bd677ca1a5), just waiting for a fix for the hardened/non-hardened mix.",
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#issuecomment-408371614",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13697"
    },
    {
      "event": "mentioned",
      "id": 1756917357,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTc1NjkxNzM1Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1756917357",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-27T09:54:46Z"
    },
    {
      "event": "subscribed",
      "id": 1756917359,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDE3NTY5MTczNTk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1756917359",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-27T09:54:46Z"
    },
    {
      "event": "commented",
      "id": 408372532,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQwODM3MjUzMg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/408372532",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-27T09:58:36Z",
      "updated_at": "2018-07-27T09:58:36Z",
      "author_association": "CONTRIBUTOR",
      "body": "Suggest pulling in the experimental warning for scantxoutset here: https://github.com/bitcoin/bitcoin/commit/3ec0958ea746d0db5edefff9f423cd2caab32857",
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#issuecomment-408372532",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13697"
    },
    {
      "event": "commented",
      "id": 408497118,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQwODQ5NzExOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/408497118",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-27T18:09:31Z",
      "updated_at": "2018-07-27T18:09:31Z",
      "author_association": "MEMBER",
      "body": "@jonasschnelli Good catch; the derivation for \"/*\" with a parent hardened step is incorrect. Fixing.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#issuecomment-408497118",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13697"
    },
    {
      "event": "mentioned",
      "id": 1757845388,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTc1Nzg0NTM4OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1757845388",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-27T18:09:31Z"
    },
    {
      "event": "subscribed",
      "id": 1757845389,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDE3NTc4NDUzODk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1757845389",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-27T18:09:31Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyOTk0M2E5MDRhMTE2MDc3ODdkMjhiMWY0Mjg4ZjUwMGJkMDc2ZGRl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/29943a904a11607787d28b1f4288f500bd076dde",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/29943a904a11607787d28b1f4288f500bd076dde",
      "tree": {
        "sha": "39f940fedeec32af5661b7ed4b453d9bb4b96aa0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/39f940fedeec32af5661b7ed4b453d9bb4b96aa0"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/365384fd9f3145e604167fcb0b7358f2c67b26f6",
          "sha": "365384fd9f3145e604167fcb0b7358f2c67b26f6",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/365384fd9f3145e604167fcb0b7358f2c67b26f6"
        }
      ],
      "message": "Add more methods to Span class\n\nThis introduces a rudimentary begin(), end(), operator[], and subspan to Span.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2018-07-27T18:52:18Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2018-04-23T19:17:29Z"
      },
      "sha": "29943a904a11607787d28b1f4288f500bd076dde"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzplNTRkNzYwNDRiM2EyYzYyNWU1M2YyMTE2YzVmNmE3YzQwMTA1ZDVk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e54d76044b3a2c625e53f2116c5f6a7c40105d5d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e54d76044b3a2c625e53f2116c5f6a7c40105d5d",
      "tree": {
        "sha": "cc37fd50595bebfdbfd4383b356e37cd115a3381",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/cc37fd50595bebfdbfd4383b356e37cd115a3381"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/29943a904a11607787d28b1f4288f500bd076dde",
          "sha": "29943a904a11607787d28b1f4288f500bd076dde",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/29943a904a11607787d28b1f4288f500bd076dde"
        }
      ],
      "message": "Add simple FlatSigningProvider",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2018-07-27T18:52:18Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2018-07-12T22:03:55Z"
      },
      "sha": "e54d76044b3a2c625e53f2116c5f6a7c40105d5d"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmZThhN2RjZDc4Y2ZlZWRjOWE3YzcwNWU5MTM4NGY3OTM4MjI5MTJi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fe8a7dcd78cfeedc9a7c705e91384f793822912b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fe8a7dcd78cfeedc9a7c705e91384f793822912b",
      "tree": {
        "sha": "28171ebfe07e5bc5b732d2866e6c732ed2bb37b0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/28171ebfe07e5bc5b732d2866e6c732ed2bb37b0"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e54d76044b3a2c625e53f2116c5f6a7c40105d5d",
          "sha": "e54d76044b3a2c625e53f2116c5f6a7c40105d5d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e54d76044b3a2c625e53f2116c5f6a7c40105d5d"
        }
      ],
      "message": "Output descriptors module",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2018-07-27T18:52:45Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2018-07-05T01:08:19Z"
      },
      "sha": "fe8a7dcd78cfeedc9a7c705e91384f793822912b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzowNjUyYzMyODRmZTEyOTQxYjI4NjI0ZGJiZjVlMDg2MmM1ZDBkYmMz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0652c3284fe12941b28624dbbf5e0862c5d0dbc3",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/0652c3284fe12941b28624dbbf5e0862c5d0dbc3",
      "tree": {
        "sha": "888043f899172c9cc70fc9adc77e4e033b88e4a4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/888043f899172c9cc70fc9adc77e4e033b88e4a4"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fe8a7dcd78cfeedc9a7c705e91384f793822912b",
          "sha": "fe8a7dcd78cfeedc9a7c705e91384f793822912b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/fe8a7dcd78cfeedc9a7c705e91384f793822912b"
        }
      ],
      "message": "Descriptor tests",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2018-07-27T18:52:45Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2018-07-16T02:32:09Z"
      },
      "sha": "0652c3284fe12941b28624dbbf5e0862c5d0dbc3"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxNTE2MDBiYjQ5NzJmN2JhYjRlZDRhMDNkMWY2N2MzOGUwODFmZWZl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/151600bb4972f7bab4ed4a03d1f67c38e081fefe",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/151600bb4972f7bab4ed4a03d1f67c38e081fefe",
      "tree": {
        "sha": "84cab52caefb1e4c965f9833dbfb3f86f81cde67",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/84cab52caefb1e4c965f9833dbfb3f86f81cde67"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0652c3284fe12941b28624dbbf5e0862c5d0dbc3",
          "sha": "0652c3284fe12941b28624dbbf5e0862c5d0dbc3",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0652c3284fe12941b28624dbbf5e0862c5d0dbc3"
        }
      ],
      "message": "Swap in descriptors support into scantxoutset",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2018-07-27T18:52:45Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2018-07-17T20:41:28Z"
      },
      "sha": "151600bb4972f7bab4ed4a03d1f67c38e081fefe"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxYWYyMzdmYWVmYzMxNmJkNzA4ZTI1ZDY5MDFlZTZmMTdiNzA2ZTU3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1af237faefc316bd708e25d6901ee6f17b706e57",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/1af237faefc316bd708e25d6901ee6f17b706e57",
      "tree": {
        "sha": "56a59abb5f7fc579f7df74570d96b65f1541f9e9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/56a59abb5f7fc579f7df74570d96b65f1541f9e9"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/151600bb4972f7bab4ed4a03d1f67c38e081fefe",
          "sha": "151600bb4972f7bab4ed4a03d1f67c38e081fefe",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/151600bb4972f7bab4ed4a03d1f67c38e081fefe"
        }
      ],
      "message": "[QA] Add xpub range tests in scantxoutset tests",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2018-07-27T18:52:45Z"
      },
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2018-07-27T09:11:01Z"
      },
      "sha": "1af237faefc316bd708e25d6901ee6f17b706e57"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2NDk1ODQ5YmZkMzYyZDZhMmYxMjhiYWM1OTgyZmE5ZTNlMmUzMzk2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6495849bfd362d6a2f128bac5982fa9e3e2e3396",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/6495849bfd362d6a2f128bac5982fa9e3e2e3396",
      "tree": {
        "sha": "08748535b6c1ff2667de56cca29d47bb19dd4197",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/08748535b6c1ff2667de56cca29d47bb19dd4197"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1af237faefc316bd708e25d6901ee6f17b706e57",
          "sha": "1af237faefc316bd708e25d6901ee6f17b706e57",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/1af237faefc316bd708e25d6901ee6f17b706e57"
        }
      ],
      "message": "[QA] Extend tests to more combinations",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2018-07-27T18:52:45Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2018-07-27T18:49:26Z"
      },
      "sha": "6495849bfd362d6a2f128bac5982fa9e3e2e3396"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmZGRlYTY3MmViOGY2MzAxMmYyZTljZTA0ZmE0NzdlNWQ0MTQwNzUw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fddea672eb8f63012f2e9ce04fa477e5d4140750",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fddea672eb8f63012f2e9ce04fa477e5d4140750",
      "tree": {
        "sha": "2ce8fcd17f8fd60a0c946c4ce973e1bb5d38621f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2ce8fcd17f8fd60a0c946c4ce973e1bb5d38621f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6495849bfd362d6a2f128bac5982fa9e3e2e3396",
          "sha": "6495849bfd362d6a2f128bac5982fa9e3e2e3396",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/6495849bfd362d6a2f128bac5982fa9e3e2e3396"
        }
      ],
      "message": "Add experimental warning to scantxoutset",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2018-07-27T18:52:45Z"
      },
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2018-07-27T09:57:14Z"
      },
      "sha": "fddea672eb8f63012f2e9ce04fa477e5d4140750"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1757926187,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTc1NzkyNjE4Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1757926187",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-27T18:53:08Z"
    },
    {
      "event": "commented",
      "id": 408508731,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQwODUwODczMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/408508731",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-27T18:53:51Z",
      "updated_at": "2018-07-27T18:53:51Z",
      "author_association": "MEMBER",
      "body": "@jonasschnelli Ok, fixed the derivation, changed the range to be max index rather than count, included your tests and experimental warning, and added a number of tests myself (generated with an independent BIP32 implementation).",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#issuecomment-408508731",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13697"
    },
    {
      "event": "mentioned",
      "id": 1757927521,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTc1NzkyNzUyMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1757927521",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-27T18:53:51Z"
    },
    {
      "event": "subscribed",
      "id": 1757927523,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDE3NTc5Mjc1MjM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1757927523",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-27T18:53:51Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmNmI3ZmMzNDljY2Y5Y2ZiZWI3ZTkxZTE5YzIwZTJhMmZjYzkwMjZm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "tree": {
        "sha": "4f5e3cb6933ef7399fb69d47b935b3ab24467c23",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4f5e3cb6933ef7399fb69d47b935b3ab24467c23"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fddea672eb8f63012f2e9ce04fa477e5d4140750",
          "sha": "fddea672eb8f63012f2e9ce04fa477e5d4140750",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/fddea672eb8f63012f2e9ce04fa477e5d4140750"
        }
      ],
      "message": "Support h instead of ' in hardened descriptor paths",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2018-07-27T19:21:12Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2018-07-27T19:21:12Z"
      },
      "sha": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f"
    },
    {
      "event": "commented",
      "id": 408515755,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQwODUxNTc1NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/408515755",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-27T19:23:00Z",
      "updated_at": "2018-07-27T19:23:00Z",
      "author_association": "MEMBER",
      "body": "@jonasschnelli Added support for h instead of ' in hardened descriptor paths as well (plus some tests for it). Serializing a descriptor will always use '.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#issuecomment-408515755",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13697"
    },
    {
      "event": "mentioned",
      "id": 1757977134,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTc1Nzk3NzEzNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1757977134",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-27T19:23:00Z"
    },
    {
      "event": "subscribed",
      "id": 1757977135,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDE3NTc5NzcxMzU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1757977135",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-27T19:23:00Z"
    },
    {
      "event": "reviewed",
      "id": 141414672,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTQxNDE0Njcy",
      "url": null,
      "actor": null,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Tested ACK f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#pullrequestreview-141414672",
      "submitted_at": "2018-07-30T07:19:31Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
    },
    {
      "event": "commented",
      "id": 409622920,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQwOTYyMjkyMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/409622920",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-08-01T15:52:39Z",
      "updated_at": "2018-08-01T15:52:39Z",
      "author_association": "MEMBER",
      "body": "Concept ACK f6b7fc3",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#issuecomment-409622920",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13697"
    },
    {
      "event": "commented",
      "id": 409643713,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQwOTY0MzcxMw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/409643713",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-08-01T16:51:07Z",
      "updated_at": "2018-08-01T16:51:07Z",
      "author_association": "MEMBER",
      "body": "utACK f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#issuecomment-409643713",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13697"
    },
    {
      "event": "merged",
      "id": 1765890410,
      "node_id": "MDExOk1lcmdlZEV2ZW50MTc2NTg5MDQxMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1765890410",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "created_at": "2018-08-01T18:07:24Z"
    },
    {
      "event": "closed",
      "id": 1765890417,
      "node_id": "MDExOkNsb3NlZEV2ZW50MTc2NTg5MDQxNw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1765890417",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-08-01T18:07:25Z"
    },
    {
      "event": "referenced",
      "id": 1765890791,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDE3NjU4OTA3OTE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1765890791",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "f030410e88f11c5ff1ce6c80b463a1c7f6d39830",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f030410e88f11c5ff1ce6c80b463a1c7f6d39830",
      "created_at": "2018-08-01T18:07:33Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-08-02T07:25:37Z",
      "updated_at": "2018-08-02T07:25:37Z",
      "source": {
        "issue": {
          "id": 346890061,
          "node_id": "MDExOlB1bGxSZXF1ZXN0MjA1NjQwODE4",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13847",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13847/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13847/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13847/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/13847",
          "number": 13847,
          "state": "closed",
          "state_reason": null,
          "title": "tests: Remove unused variable",
          "body": "Remove unused variable.",
          "user": {
            "login": "practicalswift",
            "id": 7826565,
            "node_id": "MDQ6VXNlcjc4MjY1NjU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/practicalswift",
            "html_url": "https://github.com/practicalswift",
            "followers_url": "https://api.github.com/users/practicalswift/followers",
            "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
            "organizations_url": "https://api.github.com/users/practicalswift/orgs",
            "repos_url": "https://api.github.com/users/practicalswift/repos",
            "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/practicalswift/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 2,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13847",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/13847",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/13847.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/13847.patch"
          },
          "closed_at": "2018-08-02T08:33:22Z",
          "created_at": "2018-08-02T07:23:34Z",
          "updated_at": "2022-08-16T17:16:56Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 142757687,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTQyNzU3Njg3",
      "url": null,
      "actor": null,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#pullrequestreview-142757687",
      "submitted_at": "2018-08-02T11:52:12Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "Bushstar",
        "id": 5293433,
        "node_id": "MDQ6VXNlcjUyOTM0MzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5293433?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Bushstar",
        "html_url": "https://github.com/Bushstar",
        "followers_url": "https://api.github.com/users/Bushstar/followers",
        "following_url": "https://api.github.com/users/Bushstar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Bushstar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Bushstar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Bushstar/subscriptions",
        "organizations_url": "https://api.github.com/users/Bushstar/orgs",
        "repos_url": "https://api.github.com/users/Bushstar/repos",
        "events_url": "https://api.github.com/users/Bushstar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Bushstar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-08-13T16:25:33Z",
      "updated_at": "2018-08-13T16:25:33Z",
      "source": {
        "issue": {
          "id": 350100960,
          "node_id": "MDExOlB1bGxSZXF1ZXN0MjA4MDMyNDc0",
          "url": "https://api.github.com/repos/FeatherCoin/Feathercoin/issues/358",
          "repository_url": "https://api.github.com/repos/FeatherCoin/Feathercoin",
          "labels_url": "https://api.github.com/repos/FeatherCoin/Feathercoin/issues/358/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/FeatherCoin/Feathercoin/issues/358/comments",
          "events_url": "https://api.github.com/repos/FeatherCoin/Feathercoin/issues/358/events",
          "html_url": "https://github.com/FeatherCoin/Feathercoin/pull/358",
          "number": 358,
          "state": "closed",
          "state_reason": null,
          "title": "commits from bitcoin/master",
          "body": "[wallet] Use destination groups instead of coins in coin select\r\nhttps://github.com/bitcoin/bitcoin/pull/12257\r\n\r\nRemove the boost/algorithm/string/predicate.hpp dependency\r\nhttps://github.com/bitcoin/bitcoin/pull/13656\r\n\r\nrelease: require macOS 10.10+\r\nhttps://github.com/bitcoin/bitcoin/pull/13617\r\n\r\ndepends: use MacOS friendly sed syntax in qt.mk\r\nhttps://github.com/bitcoin/bitcoin/pull/13750\r\n\r\nscripted-diff: Remove trailing whitespaces\r\nhttps://github.com/bitcoin/bitcoin/pull/13753\r\n\r\ndoc: Minor improvements to release-process.md\r\nhttps://github.com/bitcoin/bitcoin/pull/13706\r\n\r\nBugfixes for BIP 174 combining and deserialization\r\nhttps://github.com/bitcoin/bitcoin/pull/13721\r\n\r\n[moveonly] Extract RescanWallet to handle a simple rescan\r\nhttps://github.com/bitcoin/bitcoin/pull/13658\r\n\r\ncontrib: Add lxc network setup for Bionic host\r\nhttps://github.com/bitcoin/bitcoin/pull/13714\r\n\r\nbuild: update ax_boost_chrono/unit_test_framework\r\nhttps://github.com/bitcoin/bitcoin/pull/13095\r\n\r\n[net] Thread safety annotations in net_processing\r\nhttps://github.com/bitcoin/bitcoin/pull/13423\r\n\r\nwallet: Fix accidental use of the comma operator\r\nhttps://github.com/bitcoin/bitcoin/pull/13773\r\n\r\n[bench] Add benchmark for unserialize prevector\r\nhttps://github.com/bitcoin/bitcoin/pull/13711\r\n\r\ndoc: Remove newlines from error message\r\nhttps://github.com/bitcoin/bitcoin/pull/13775\r\n\r\nReturn void instead of bool for functions that cannot fail\r\nhttps://github.com/bitcoin/bitcoin/pull/13774\r\n\r\nDepends: Fix Qt's rcc determinism\r\nhttps://github.com/bitcoin/bitcoin/pull/13732\r\n\r\ncontrib: Fix test-security-check fail in Ubuntu 18.04\r\nhttps://github.com/bitcoin/bitcoin/pull/13764\r\n\r\nRemove unused function arguments\r\nhttps://github.com/bitcoin/bitcoin/pull/13554\r\n\r\ndoc: add note to contributor docs about warranted PR's\r\nhttps://github.com/bitcoin/bitcoin/pull/13803\r\n\r\nqa: Fix bench/block_assemble assert failure\r\nhttps://github.com/bitcoin/bitcoin/pull/13806\r\n\r\nFix osslsigncode compile issue in gitian-build\r\nhttps://github.com/bitcoin/bitcoin/pull/13782\r\n\r\nrefactor: Avoid locking tx pool cs thrice\r\nhttps://github.com/bitcoin/bitcoin/pull/13786\r\n\r\nAdd BIP174 to list of implemented BIPs\r\nhttps://github.com/bitcoin/bitcoin/pull/13814\r\n\r\ncontrib: Remove debian and rpm subfolder\r\nhttps://github.com/bitcoin/bitcoin/pull/13809\r\n\r\nIgnore unknown config file options; warn instead of error\r\nhttps://github.com/bitcoin/bitcoin/pull/13799\r\n\r\nnet: Add missing verification of IPv6 address in CNetAddr::GetIn6Addr(...)\r\nhttps://github.com/bitcoin/bitcoin/pull/13776\r\n\r\nbench: Make CoinSelection output groups pass eligibility filter\r\nhttps://github.com/bitcoin/bitcoin/pull/13822\r\n\r\nAdd tests to SingleThreadedSchedulerClient() and document the memory model\r\nhttps://github.com/bitcoin/bitcoin/pull/13247\r\n\r\n[wallet] Correctly limit output group size\r\nhttps://github.com/bitcoin/bitcoin/pull/13805\r\n\r\nSupport output descriptors in scantxoutset\r\nhttps://github.com/bitcoin/bitcoin/pull/13697\r\n\r\n[trivial,doc] Fix memory consistency model in comment\r\nhttps://github.com/bitcoin/bitcoin/pull/13835\r\n\r\ndoc: Remove outdated net comment\r\nhttps://github.com/bitcoin/bitcoin/pull/13824\r\n\r\ndoc: correct the help output for -prune\r\nhttps://github.com/bitcoin/bitcoin/pull/13844\r\n\r\ngui: Reject dialogs if key escape is pressed\r\nhttps://github.com/bitcoin/bitcoin/pull/13791\r\n\r\nqa: Extract rpc_timewait as test param\r\nhttps://github.com/bitcoin/bitcoin/pull/13837\r\n\r\nfix locale for lint-shell\r\nhttps://github.com/bitcoin/bitcoin/pull/13851\r\n\r\nqa: quote path in authproxy for external multiwallets\r\nhttps://github.com/bitcoin/bitcoin/pull/13823\r\n\r\ntrivial: Fixed typos and cleaned up language\r\nhttps://github.com/bitcoin/bitcoin/pull/13255\r\n\r\nAdd aarch64 qt depends support for cross compiling bitcoin-qt\r\nhttps://github.com/bitcoin/bitcoin/pull/13696\r\n\r\nqa: Add emojis to test_runner path and wallet filename\r\nhttps://github.com/bitcoin/bitcoin/pull/13859\r\n\r\ndoc: correct versions in dependencies.md\r\nhttps://github.com/bitcoin/bitcoin/pull/13853\r\n\r\n[wallet] Add wallet name to log messages\r\nhttps://github.com/bitcoin/bitcoin/pull/12992\r\n\r\n[docs] Reformat -help output for help2man\r\nhttps://github.com/bitcoin/bitcoin/pull/13872\r\n\r\nwallet: Fix backupwallet for multiwallets\r\nhttps://github.com/bitcoin/bitcoin/pull/13667\r\n\r\ndocs: Link to python style guidelines from developer notes\r\nhttps://github.com/bitcoin/bitcoin/pull/13717\r\n\r\nwallet: assert to ensure accuracy of CMerkleTx::GetBlocksToMaturity\r\nhttps://github.com/bitcoin/bitcoin/pull/13657\r\n\r\nbuild: Add format string linter\r\nhttps://github.com/bitcoin/bitcoin/pull/13705\r\n\r\npolicy: Remove promiscuousmempoolflags\r\nhttps://github.com/bitcoin/bitcoin/pull/13527\r\n\r\ndocs: fix typo in translation_process.md\r\nhttps://github.com/bitcoin/bitcoin/pull/13857\r\n\r\nDocs: fix GetWarnings docs to reflect behavior\r\nhttps://github.com/bitcoin/bitcoin/pull/13895\r\n\r\n[trivial] Add doxygen-compatible comments to CAffectedKeysVisitor\r\nhttps://github.com/bitcoin/bitcoin/pull/13843\r\n\r\nwallet: sum ancestors rather than taking max in output groups\r\nhttps://github.com/bitcoin/bitcoin/pull/13812\r\n\r\n0.17: Pre-branch maintenance\r\nhttps://github.com/bitcoin/bitcoin/pull/13780\r\n\r\nshutdown: Stop threads before resetting ptrs\r\nhttps://github.com/bitcoin/bitcoin/pull/13894\r\n\r\nwallet: Catch filesystem_error and raise InitError\r\nhttps://github.com/bitcoin/bitcoin/pull/13876\r\n\r\nqa: wait_for_verack by default\r\nhttps://github.com/bitcoin/bitcoin/pull/13916\r\n\r\ndoc: Revert translated string change, clarify wallet log messages\r\nhttps://github.com/bitcoin/bitcoin/pull/13911\r\n\r\nTests: Cleanup create_transaction implementations\r\nhttps://github.com/bitcoin/bitcoin/pull/13669\r\n\r\nMerge leveldb subtree\r\nhttps://github.com/bitcoin/bitcoin/pull/13925\r\n\r\nIntroduce a maximum size for locators.\r\nhttps://github.com/bitcoin/bitcoin/pull/13907\r\n\r\ntests: Simplify comparison in rpc_blockchain.py\r\nhttps://github.com/bitcoin/bitcoin/pull/13924\r\n\r\nrpc: Use pushKV in some new PSBT RPCs\r\nhttps://github.com/bitcoin/bitcoin/pull/13927\r\n\r\n[Docs] upgrade rescan time warning from minutes to >1 hour\r\nhttps://github.com/bitcoin/bitcoin/pull/13908\r\n\r\nqa: Remove redundant checkmempool/checkblockindex extra_args\r\nhttps://github.com/bitcoin/bitcoin/pull/13913\r\n\r\n[qa] Add test for max number of entries in locator\r\nhttps://github.com/bitcoin/bitcoin/pull/13915\r\n\r\nqa: Make extended tests pass on native Windows\r\nhttps://github.com/bitcoin/bitcoin/pull/13867\r\n\r\ntests: Port usage of deprecated optparse module to argparse module\r\nhttps://github.com/bitcoin/bitcoin/pull/13944\r\n\r\nwallet: shuffle coins before grouping, where warranted\r\nhttps://github.com/bitcoin/bitcoin/pull/13808\r\n\r\nAlways create signatures with Low R values\r\nhttps://github.com/bitcoin/bitcoin/pull/13666\r\n\r\nlint: Make format string linter understand basic template parameter syntax\r\nhttps://github.com/bitcoin/bitcoin/pull/13939\r\n\r\nrpc: Replace median fee rate with feerate percentiles in getblockstats\r\nhttps://github.com/bitcoin/bitcoin/pull/13918\r\n\r\nqa: blocktools enforce named args for amount\r\nhttps://github.com/bitcoin/bitcoin/pull/13928\r\n\r\ndocs: fixed bitcoin-cli -help output for help2man\r\nhttps://github.com/bitcoin/bitcoin/pull/13905\r\n\r\ntests: Enable automatic detection of undefined names in Python tests scripts. Remove wildcard imports.\r\nhttps://github.com/bitcoin/bitcoin/pull/13054\r\n\r\ndoc: move-only 0.17.0 release notes of individual prs\r\nhttps://github.com/bitcoin/bitcoin/pull/13950\r\n\r\nrefactoring: Cleanup StartRest()\r\nhttps://github.com/bitcoin/bitcoin/pull/13938\r\n\r\ngitian: bump descriptors for (0.)18\r\nhttps://github.com/bitcoin/bitcoin/pull/13955\r\n\r\nfix deprecation in bitcoin-util-test.py\r\nhttps://github.com/bitcoin/bitcoin/pull/13953\r\n\r\nbuild: Enable -Wredundant-decls where available. Remove redundant redeclarations.\r\nhttps://github.com/bitcoin/bitcoin/pull/13899\r\n\r\nVisual Studio build configuration for Bitcoin Core\r\nhttps://github.com/bitcoin/bitcoin/pull/11526\r\n\r\nDon't assert(foo()) where foo() has side effects\r\nhttps://github.com/bitcoin/bitcoin/pull/13534",
          "user": {
            "login": "Bushstar",
            "id": 5293433,
            "node_id": "MDQ6VXNlcjUyOTM0MzM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5293433?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Bushstar",
            "html_url": "https://github.com/Bushstar",
            "followers_url": "https://api.github.com/users/Bushstar/followers",
            "following_url": "https://api.github.com/users/Bushstar/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/Bushstar/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/Bushstar/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/Bushstar/subscriptions",
            "organizations_url": "https://api.github.com/users/Bushstar/orgs",
            "repos_url": "https://api.github.com/users/Bushstar/repos",
            "events_url": "https://api.github.com/users/Bushstar/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/Bushstar/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "COLLABORATOR",
          "locked": false,
          "comments": 0,
          "pull_request": {
            "url": "https://api.github.com/repos/FeatherCoin/Feathercoin/pulls/358",
            "html_url": "https://github.com/FeatherCoin/Feathercoin/pull/358",
            "diff_url": "https://github.com/FeatherCoin/Feathercoin/pull/358.diff",
            "patch_url": "https://github.com/FeatherCoin/Feathercoin/pull/358.patch"
          },
          "closed_at": "2018-08-13T16:27:18Z",
          "created_at": "2018-08-13T16:25:32Z",
          "updated_at": "2018-08-13T16:27:18Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "labeled",
      "id": 1788130090,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDE3ODgxMzAwOTA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1788130090",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-08-14T15:41:26Z",
      "label": {
        "name": "Needs release notes",
        "color": "00dd33"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-08-30T19:15:23Z",
      "updated_at": "2018-08-30T19:15:23Z",
      "source": {
        "issue": {
          "id": 355718503,
          "node_id": "MDU6SXNzdWUzNTU3MTg1MDM=",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14114",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14114/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14114/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14114/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/14114",
          "number": 14114,
          "state": "closed",
          "state_reason": "completed",
          "title": "scantxoutset help about descriptors refers to TODO document",
          "body": "https://github.com/bitcoin/bitcoin/blob/master/src/rpc/blockchain.cpp#L2061\r\n\r\nOverseen in #13697.\r\nI guess best would be to add a new document to the docs/ dir.",
          "user": {
            "login": "jonasschnelli",
            "id": 178464,
            "node_id": "MDQ6VXNlcjE3ODQ2NA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jonasschnelli",
            "html_url": "https://github.com/jonasschnelli",
            "followers_url": "https://api.github.com/users/jonasschnelli/followers",
            "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
            "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
            "repos_url": "https://api.github.com/users/jonasschnelli/repos",
            "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 148216,
              "node_id": "MDU6TGFiZWwxNDgyMTY=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Docs",
              "name": "Docs",
              "color": "02d7e1",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "milestone": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/33",
            "html_url": "https://github.com/bitcoin/bitcoin/milestone/33",
            "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/33/labels",
            "id": 2931889,
            "node_id": "MDk6TWlsZXN0b25lMjkzMTg4OQ==",
            "number": 33,
            "state": "closed",
            "title": "0.17.0",
            "description": "",
            "creator": {
              "login": "MarcoFalke",
              "id": 6399679,
              "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
              "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/MarcoFalke",
              "html_url": "https://github.com/MarcoFalke",
              "followers_url": "https://api.github.com/users/MarcoFalke/followers",
              "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
              "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
              "repos_url": "https://api.github.com/users/MarcoFalke/repos",
              "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 0,
            "closed_issues": 122,
            "created_at": "2017-11-22T18:54:09Z",
            "updated_at": "2018-11-28T21:03:57Z",
            "closed_at": "2018-10-14T23:21:13Z"
          },
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 2,
          "closed_at": "2018-09-06T12:54:14Z",
          "created_at": "2018-08-30T19:15:23Z",
          "updated_at": "2021-09-08T12:38:54Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-11-27T19:48:19Z",
      "updated_at": "2018-11-27T19:48:19Z",
      "source": {
        "issue": {
          "id": 384957623,
          "node_id": "MDExOlB1bGxSZXF1ZXN0MjM0MDM4MjU3",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14820",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14820/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14820/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14820/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/14820",
          "number": 14820,
          "state": "closed",
          "state_reason": null,
          "title": "test: Fix descriptor_tests not checking ToString output of public descriptors",
          "body": "This fixes a minor test bug introduced in #13697 that I noticed while reviewing #14646",
          "user": {
            "login": "ryanofsky",
            "id": 7133040,
            "node_id": "MDQ6VXNlcjcxMzMwNDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ryanofsky",
            "html_url": "https://github.com/ryanofsky",
            "followers_url": "https://api.github.com/users/ryanofsky/followers",
            "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
            "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
            "repos_url": "https://api.github.com/users/ryanofsky/repos",
            "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 62963516,
              "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
              "name": "Tests",
              "color": "d4c5f9",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 2,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/14820",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/14820",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/14820.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/14820.patch"
          },
          "closed_at": "2018-11-27T20:12:14Z",
          "created_at": "2018-11-27T19:48:19Z",
          "updated_at": "2021-09-08T12:40:11Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "referenced",
      "id": 1990644215,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDE5OTA2NDQyMTU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1990644215",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "0fa3703c17573a3cf05c73ef828f381234b456f7",
      "commit_url": "https://api.github.com/repos/MarcoFalke/b-c/commits/0fa3703c17573a3cf05c73ef828f381234b456f7",
      "created_at": "2018-11-27T20:10:32Z"
    },
    {
      "event": "unlabeled",
      "id": 2216610139,
      "node_id": "MDE0OlVubGFiZWxlZEV2ZW50MjIxNjYxMDEzOQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2216610139",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-03-20T12:15:48Z",
      "label": {
        "name": "Needs release note",
        "color": "d2db6d"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "kwvg",
        "id": 63189531,
        "node_id": "MDQ6VXNlcjYzMTg5NTMx",
        "avatar_url": "https://avatars.githubusercontent.com/u/63189531?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kwvg",
        "html_url": "https://github.com/kwvg",
        "followers_url": "https://api.github.com/users/kwvg/followers",
        "following_url": "https://api.github.com/users/kwvg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kwvg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kwvg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kwvg/subscriptions",
        "organizations_url": "https://api.github.com/users/kwvg/orgs",
        "repos_url": "https://api.github.com/users/kwvg/repos",
        "events_url": "https://api.github.com/users/kwvg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kwvg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-08T20:12:41Z",
      "updated_at": "2021-03-08T20:12:41Z",
      "source": {
        "issue": {
          "id": 824911747,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NTg3MDY5MDQ5",
          "url": "https://api.github.com/repos/dashpay/dash/issues/4025",
          "repository_url": "https://api.github.com/repos/dashpay/dash",
          "labels_url": "https://api.github.com/repos/dashpay/dash/issues/4025/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/dashpay/dash/issues/4025/comments",
          "events_url": "https://api.github.com/repos/dashpay/dash/issues/4025/events",
          "html_url": "https://github.com/dashpay/dash/pull/4025",
          "number": 4025,
          "state": "closed",
          "state_reason": null,
          "title": "partial #8149 and merge #19845, #19954: Complete the BIP155 implementation and upgrade to TORv3",
          "body": "## Overview\r\n\r\nContinuing the work from https://github.com/dashpay/dash/pull/3939 to ensure that Tor support is available after the deprecation of Torv2 ([source](https://blog.torproject.org/v2-deprecation-timeline)). More information about it is available at https://github.com/bitcoin/bitcoin/issues/18884.\r\n\r\nThis PR attempts to implement https://github.com/bitcoin/bitcoin/pull/19031 (which were split into various pull requests for ease of review) so that Torv3 support is available in Core. \r\n\r\n## Contents\r\n\r\nThe PR heavily relies upon functionality that _wasn't been implemented then, requiring multiple dependencies_. Therefore, those features have also been backported and logged accordingly.\r\n\r\n### Dependencies needed by https://github.com/bitcoin/bitcoin/pull/19031\r\n\r\n* ~~Merge https://github.com/bitcoin/bitcoin/pull/16702 (\"p2p: supplying and using asmap to improve IP bucketing in addrman\" by naumenkogs)~~\r\n\r\n* ~~Merge https://github.com/bitcoin/bitcoin/pull/17812 (\"config, net, test: asmap feature refinements and functional tests\" by fanquake)~~\r\n\r\n* ~~Merge https://github.com/bitcoin/bitcoin/pull/16730 (\"Support serialization of std::vector<bool>\" by sipa)~~\r\n\r\n  * **Segmented and available for review as https://github.com/dashpay/dash/pull/4028**\r\n\r\n* ~~Merge https://github.com/bitcoin/bitcoin/pull/13815 (\"util: Add [[nodiscard]] to all {Decode,Parse}[...](...) functions returning bool\" by practicalswift)~~\r\n\r\n  *  **Segmented and available for review as https://github.com/dashpay/dash/pull/4035**\r\n\r\n* ~~Partial merge https://github.com/bitcoin/bitcoin/pull/13697 (\"Support output descriptors in scantxoutset\" by sipa)~~\r\n* ~~Mostly merge https://github.com/bitcoin/bitcoin/pull/18591 (\"Add C++17 build to Travis\" by sipa)~~\r\n* ~~Mostly merge https://github.com/bitcoin/bitcoin/pull/19387 (\"span: update constructors to match c++20 draft spec and add lifetimebound attribute\" by theuni)~~\r\n\r\n  *  **Segmented and available for review as https://github.com/dashpay/dash/pull/4036**\r\n\r\n* ~~Mostly merge https://github.com/bitcoin/bitcoin/pull/18112 (\"Serialization improvements step 5 (blockencodings)\" by sipa)~~\r\n* ~~Partial merge https://github.com/bitcoin/bitcoin/pull/18021 (\"Serialization improvements step 4 (undo.h)\" by sipa)~~\r\n  *  **Segmented and available for review as https://github.com/dashpay/dash/pull/4037**\r\n\r\n* ~~Merge  https://github.com/bitcoin/bitcoin/pull/19660 (\"refactor: Make HexStr take a span\" by laanwj)~~\r\n* ~~Merge https://github.com/bitcoin/bitcoin/pull/19373 (\"refactor: Replace HexStr(o.begin(), o.end()) with HexStr(o)\" by laanwj, using script documented by [MarcoFalke](https://github.com/bitcoin/bitcoin/pull/19373#issuecomment-648988027))~~\r\n* ~~Merge https://github.com/bitcoin/bitcoin/pull/19841 (\"Implement Keccak and SHA3_256\" by laanwj)~~\r\n   *  **Segmented and available for review as https://github.com/dashpay/dash/pull/4164**\r\n \r\n* ~~Merge https://github.com/bitcoin/bitcoin/pull/19687 (\"refactor: make EncodeBase{32,64} consume Spans\" by theStack)~~\r\n  *  **Segmented and available for review as https://github.com/dashpay/dash/pull/4166**\r\n\r\n### As part of https://github.com/bitcoin/bitcoin/pull/19031\r\n\r\n* ~~https://github.com/bitcoin/bitcoin/pull/19954 (\"Complete the BIP155 implementation and upgrade to TORv3\" by vasild)~~\r\n* ~~https://github.com/bitcoin/bitcoin/pull/19845 (\"net: CNetAddr: add support to (un)serialize as ADDRv2\" by vasild)~~\r\n  * **Segmented and available for review as #4025 (this pull request)**\r\n\r\n* ~~https://github.com/bitcoin/bitcoin/pull/19628 (\"net: change CNetAddr::ip to have flexible size\" by vasild)~~\r\n  *  **Segmented and available for review as https://github.com/dashpay/dash/pull/4166**\r\n# Disclosures\r\n\r\n* **This is a work in progress**. Dash-specific changes have not been tested, only compilation and unit test success has been ensured. Running the client on a testnet _is_ necessary.\r\n* ~~Tests fail. I do not know why, I do not know how. They fail.~~ No, they don't :)\r\n* I am not too familiar with serialization logic and it is _possible_ that some of the code will break.\r\n\r\n## Changes that need review\r\n\r\n* `SerializationOp`'s handling of `nServices` in `CAddress` https://github.com/dashpay/dash/commit/28878d3712829c0d58d97c67d49eb745185be0b4#diff-8e2ffc8fe0e0847a6aac311a93b2faeebd2d76ddb2c81741bb8cf7448287807eR381\r\n\r\n",
          "user": {
            "login": "kwvg",
            "id": 63189531,
            "node_id": "MDQ6VXNlcjYzMTg5NTMx",
            "avatar_url": "https://avatars.githubusercontent.com/u/63189531?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/kwvg",
            "html_url": "https://github.com/kwvg",
            "followers_url": "https://api.github.com/users/kwvg/followers",
            "following_url": "https://api.github.com/users/kwvg/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/kwvg/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/kwvg/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/kwvg/subscriptions",
            "organizations_url": "https://api.github.com/users/kwvg/orgs",
            "repos_url": "https://api.github.com/users/kwvg/repos",
            "events_url": "https://api.github.com/users/kwvg/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/kwvg/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "COLLABORATOR",
          "locked": false,
          "comments": 2,
          "pull_request": {
            "url": "https://api.github.com/repos/dashpay/dash/pulls/4025",
            "html_url": "https://github.com/dashpay/dash/pull/4025",
            "diff_url": "https://github.com/dashpay/dash/pull/4025.diff",
            "patch_url": "https://github.com/dashpay/dash/pull/4025.patch"
          },
          "closed_at": "2021-05-30T05:38:54Z",
          "created_at": "2021-03-08T20:12:41Z",
          "updated_at": "2021-06-05T05:30:39Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "referenced",
      "id": 4433638263,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ0MzM2MzgyNjM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4433638263",
      "actor": {
        "login": "kwvg",
        "id": 63189531,
        "node_id": "MDQ6VXNlcjYzMTg5NTMx",
        "avatar_url": "https://avatars.githubusercontent.com/u/63189531?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kwvg",
        "html_url": "https://github.com/kwvg",
        "followers_url": "https://api.github.com/users/kwvg/followers",
        "following_url": "https://api.github.com/users/kwvg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kwvg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kwvg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kwvg/subscriptions",
        "organizations_url": "https://api.github.com/users/kwvg/orgs",
        "repos_url": "https://api.github.com/users/kwvg/repos",
        "events_url": "https://api.github.com/users/kwvg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kwvg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "a1e043a62dc698171f12ec121b7343d93af2c97e",
      "commit_url": "https://api.github.com/repos/kwvg/dash/commits/a1e043a62dc698171f12ec121b7343d93af2c97e",
      "created_at": "2021-03-10T05:46:53Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "kwvg",
        "id": 63189531,
        "node_id": "MDQ6VXNlcjYzMTg5NTMx",
        "avatar_url": "https://avatars.githubusercontent.com/u/63189531?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kwvg",
        "html_url": "https://github.com/kwvg",
        "followers_url": "https://api.github.com/users/kwvg/followers",
        "following_url": "https://api.github.com/users/kwvg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kwvg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kwvg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kwvg/subscriptions",
        "organizations_url": "https://api.github.com/users/kwvg/orgs",
        "repos_url": "https://api.github.com/users/kwvg/repos",
        "events_url": "https://api.github.com/users/kwvg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kwvg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-10T05:54:47Z",
      "updated_at": "2021-03-10T05:54:47Z",
      "source": {
        "issue": {
          "id": 827166815,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NTg5MTA1NjM5",
          "url": "https://api.github.com/repos/dashpay/dash/issues/4036",
          "repository_url": "https://api.github.com/repos/dashpay/dash",
          "labels_url": "https://api.github.com/repos/dashpay/dash/issues/4036/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/dashpay/dash/issues/4036/comments",
          "events_url": "https://api.github.com/repos/dashpay/dash/issues/4036/events",
          "html_url": "https://github.com/dashpay/dash/pull/4036",
          "number": 4036,
          "state": "closed",
          "state_reason": null,
          "title": "partial merge #13697, #18591, #19387, #18468: update constructors to match c++20 draft spec ",
          "body": "## Overview\r\n\r\nAs part of https://github.com/dashpay/dash/pull/4025, component pull requests that are required by TorV3 logic are being broken down into branches wherever feasable. This PR deals with implementation of `Span`.\r\n\r\n## Contents\r\n\r\n* Partial merge of https://github.com/bitcoin/bitcoin/pull/13697 (\"Support output descriptors in scantxoutset\" by sipa)\r\n  * Only 29943a904a11607787d28b1f4288f500bd076dde was cherry-picked for advancing `span.h`. The rest are not relevant in regards to https://github.com/dashpay/dash/pull/4025 and have been skipped.\r\n* Partial merge of https://github.com/bitcoin/bitcoin/pull/18591 (\"Add C++17 build to Travis\" by sipa)\r\n  * c31cbe7cfefc18123eb85ffb2ce509748435efde cannot be cherry-picked as it presumes a CI build structure different from Dash Core. Not relevant for https://github.com/dashpay/dash/pull/4025.\r\n* ~~Merge of https://github.com/bitcoin/bitcoin/pull/19387 (\"span: update constructors to match c++20 draft spec and add lifetimebound attribute\" by theuni)~~\r\n   * ~~e3e7446305329ce96e9cf5f5161658eb2e1ea888 has been cherry-picked as 278a71c8f960337a738d45f4f39ab8663d458817 in https://github.com/dashpay/dash/pull/4035, completing the merge~~\r\n * Mostly merged #18468 (\"Span improvements\" by sipa)\r\n   * 2676aeadfa0e43dcaaccc4720623cdfe0beed528 was not merged. Not relevant to https://github.com/dashpay/dash/pull/4025\r\n\r\n**~~EDIT: DO NOT MERGE THIS UNTIL https://github.com/dashpay/dash/pull/4035 IS MERGED. THE PR WILL BE REBASED ON TOP OF THAT AND THEN e8782af WILL BE ADDED, THEN IT IS FIT FOR MERGE~~**  Resolved with 1be361a",
          "user": {
            "login": "kwvg",
            "id": 63189531,
            "node_id": "MDQ6VXNlcjYzMTg5NTMx",
            "avatar_url": "https://avatars.githubusercontent.com/u/63189531?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/kwvg",
            "html_url": "https://github.com/kwvg",
            "followers_url": "https://api.github.com/users/kwvg/followers",
            "following_url": "https://api.github.com/users/kwvg/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/kwvg/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/kwvg/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/kwvg/subscriptions",
            "organizations_url": "https://api.github.com/users/kwvg/orgs",
            "repos_url": "https://api.github.com/users/kwvg/repos",
            "events_url": "https://api.github.com/users/kwvg/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/kwvg/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "COLLABORATOR",
          "milestone": {
            "url": "https://api.github.com/repos/dashpay/dash/milestones/28",
            "html_url": "https://github.com/dashpay/dash/milestone/28",
            "labels_url": "https://api.github.com/repos/dashpay/dash/milestones/28/labels",
            "id": 6582425,
            "node_id": "MDk6TWlsZXN0b25lNjU4MjQyNQ==",
            "number": 28,
            "state": "closed",
            "title": "18",
            "description": "https://github.com/dashpay/dash/issues/4211",
            "creator": {
              "login": "PastaPastaPasta",
              "id": 6443210,
              "node_id": "MDQ6VXNlcjY0NDMyMTA=",
              "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/PastaPastaPasta",
              "html_url": "https://github.com/PastaPastaPasta",
              "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
              "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
              "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
              "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
              "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 2,
            "closed_issues": 617,
            "created_at": "2021-03-23T15:57:06Z",
            "updated_at": "2023-04-10T15:43:17Z",
            "closed_at": "2022-12-28T18:52:24Z",
            "due_on": "2022-05-25T07:00:00Z"
          },
          "locked": false,
          "comments": 4,
          "pull_request": {
            "url": "https://api.github.com/repos/dashpay/dash/pulls/4036",
            "html_url": "https://github.com/dashpay/dash/pull/4036",
            "diff_url": "https://github.com/dashpay/dash/pull/4036.diff",
            "patch_url": "https://github.com/dashpay/dash/pull/4036.patch"
          },
          "closed_at": "2021-04-27T14:10:20Z",
          "created_at": "2021-03-10T05:54:47Z",
          "updated_at": "2023-07-18T11:38:24Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "referenced",
      "id": 4493816255,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ0OTM4MTYyNTU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4493816255",
      "actor": {
        "login": "kwvg",
        "id": 63189531,
        "node_id": "MDQ6VXNlcjYzMTg5NTMx",
        "avatar_url": "https://avatars.githubusercontent.com/u/63189531?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kwvg",
        "html_url": "https://github.com/kwvg",
        "followers_url": "https://api.github.com/users/kwvg/followers",
        "following_url": "https://api.github.com/users/kwvg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kwvg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kwvg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kwvg/subscriptions",
        "organizations_url": "https://api.github.com/users/kwvg/orgs",
        "repos_url": "https://api.github.com/users/kwvg/repos",
        "events_url": "https://api.github.com/users/kwvg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kwvg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "494d99c29e4196b6c006684a91f4a99624c9212e",
      "commit_url": "https://api.github.com/repos/kwvg/dash/commits/494d99c29e4196b6c006684a91f4a99624c9212e",
      "created_at": "2021-03-23T04:22:00Z"
    },
    {
      "event": "referenced",
      "id": 4609046345,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ2MDkwNDYzNDU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4609046345",
      "actor": {
        "login": "kwvg",
        "id": 63189531,
        "node_id": "MDQ6VXNlcjYzMTg5NTMx",
        "avatar_url": "https://avatars.githubusercontent.com/u/63189531?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kwvg",
        "html_url": "https://github.com/kwvg",
        "followers_url": "https://api.github.com/users/kwvg/followers",
        "following_url": "https://api.github.com/users/kwvg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kwvg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kwvg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kwvg/subscriptions",
        "organizations_url": "https://api.github.com/users/kwvg/orgs",
        "repos_url": "https://api.github.com/users/kwvg/repos",
        "events_url": "https://api.github.com/users/kwvg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kwvg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "10f923b82cf7199d7cf367faebd52c87244caa22",
      "commit_url": "https://api.github.com/repos/kwvg/dash/commits/10f923b82cf7199d7cf367faebd52c87244caa22",
      "created_at": "2021-04-18T12:58:24Z"
    },
    {
      "event": "referenced",
      "id": 4651105136,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ2NTExMDUxMzY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4651105136",
      "actor": {
        "login": "UdjinM6",
        "id": 1935069,
        "node_id": "MDQ6VXNlcjE5MzUwNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1935069?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/UdjinM6",
        "html_url": "https://github.com/UdjinM6",
        "followers_url": "https://api.github.com/users/UdjinM6/followers",
        "following_url": "https://api.github.com/users/UdjinM6/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/UdjinM6/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/UdjinM6/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/UdjinM6/subscriptions",
        "organizations_url": "https://api.github.com/users/UdjinM6/orgs",
        "repos_url": "https://api.github.com/users/UdjinM6/repos",
        "events_url": "https://api.github.com/users/UdjinM6/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/UdjinM6/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "bf01ed7881436bb0b126aa5443703aecb4b5cdc8",
      "commit_url": "https://api.github.com/repos/dashpay/dash/commits/bf01ed7881436bb0b126aa5443703aecb4b5cdc8",
      "created_at": "2021-04-27T14:10:30Z"
    },
    {
      "event": "referenced",
      "id": 4843635553,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ4NDM2MzU1NTM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4843635553",
      "actor": {
        "login": "kwvg",
        "id": 63189531,
        "node_id": "MDQ6VXNlcjYzMTg5NTMx",
        "avatar_url": "https://avatars.githubusercontent.com/u/63189531?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kwvg",
        "html_url": "https://github.com/kwvg",
        "followers_url": "https://api.github.com/users/kwvg/followers",
        "following_url": "https://api.github.com/users/kwvg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kwvg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kwvg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kwvg/subscriptions",
        "organizations_url": "https://api.github.com/users/kwvg/orgs",
        "repos_url": "https://api.github.com/users/kwvg/repos",
        "events_url": "https://api.github.com/users/kwvg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kwvg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "24fb4555e88ce6ef4391692a7b08eeaa2759e58c",
      "commit_url": "https://api.github.com/repos/kwvg/dash/commits/24fb4555e88ce6ef4391692a7b08eeaa2759e58c",
      "created_at": "2021-06-04T14:51:02Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "kwvg",
        "id": 63189531,
        "node_id": "MDQ6VXNlcjYzMTg5NTMx",
        "avatar_url": "https://avatars.githubusercontent.com/u/63189531?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kwvg",
        "html_url": "https://github.com/kwvg",
        "followers_url": "https://api.github.com/users/kwvg/followers",
        "following_url": "https://api.github.com/users/kwvg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kwvg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kwvg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kwvg/subscriptions",
        "organizations_url": "https://api.github.com/users/kwvg/orgs",
        "repos_url": "https://api.github.com/users/kwvg/repos",
        "events_url": "https://api.github.com/users/kwvg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kwvg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-04T15:38:11Z",
      "updated_at": "2021-06-04T15:38:11Z",
      "source": {
        "issue": {
          "id": 911628543,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NjYxODc3MTY0",
          "url": "https://api.github.com/repos/dashpay/dash/issues/4187",
          "repository_url": "https://api.github.com/repos/dashpay/dash",
          "labels_url": "https://api.github.com/repos/dashpay/dash/issues/4187/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/dashpay/dash/issues/4187/comments",
          "events_url": "https://api.github.com/repos/dashpay/dash/issues/4187/events",
          "html_url": "https://github.com/dashpay/dash/pull/4187",
          "number": 4187,
          "state": "closed",
          "state_reason": null,
          "title": "merge #12196, #13697: Add scantxoutset RPC method",
          "body": "# Overview\r\n\r\n~~**This pull request presupposes the merger of https://github.com/dashpay/dash/pull/4186 into `develop`.** Only the last two commits are meant to be reviewed.~~ This pull request introduces the `scantxoutset` RPC command without segregated witness-specific logic. ~~To actually compare `psbt` with `scantxout`, go [here](https://github.com/kittywhiskers/dash/compare/psbt...kittywhiskers:scantxout)~~\r\n\r\n## Motivation\r\n\r\nDuring initial preparation for https://github.com/bitcoin/bitcoin/pull/18242 (\"Add BIP324 encrypted p2p transport de-/serializer\" by jonasschnelli) and the backporting of https://github.com/bitcoin/bitcoin/commit/78c312c983255e15fc274de2368a2ec13ce81cbf, a difference in class and function names were noticed and that in turn lead to a series of pull requests the lead us to this one.\r\n\r\nThe motivation is to reduce future merge conflicts when backporting pull requests from Bitcoin Core.\r\n\r\n## Things To Do\r\n\r\n~~* Fix `test/descriptor_tests.cpp` / possibly readapt them for Dash~~\r\n```\r\ntest/descriptor_tests.cpp:53: error: in \"descriptor_tests/descriptor_test\": check parse_priv has failed\r\ntest/descriptor_tests.cpp:57: error: in \"descriptor_tests/descriptor_test\": check keys_priv.keys.size() has failed\r\nunknown location:0: fatal error: in \"descriptor_tests/descriptor_test\": memory access violation at address: 0x00000000: no mapping at fault address\r\ntest/descriptor_tests.cpp:58: last checkpoint\r\n```\r\n\r\n## Contents\r\n\r\n#12196, #13697\r\n\r\n\r\n# Disclosures\r\n\r\n* **This is a work in progress and needs external review**. Dash-specific changes have not been tested, only compilation has been ensured. Running the client on a testnet _may be_ necessary.\r\n* ~~Tests fail. (see \"Things To Do\") Only Python ones do but at least we know how to get around it, see comment below~~\r\n",
          "user": {
            "login": "kwvg",
            "id": 63189531,
            "node_id": "MDQ6VXNlcjYzMTg5NTMx",
            "avatar_url": "https://avatars.githubusercontent.com/u/63189531?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/kwvg",
            "html_url": "https://github.com/kwvg",
            "followers_url": "https://api.github.com/users/kwvg/followers",
            "following_url": "https://api.github.com/users/kwvg/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/kwvg/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/kwvg/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/kwvg/subscriptions",
            "organizations_url": "https://api.github.com/users/kwvg/orgs",
            "repos_url": "https://api.github.com/users/kwvg/repos",
            "events_url": "https://api.github.com/users/kwvg/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/kwvg/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 1259670433,
              "node_id": "MDU6TGFiZWwxMjU5NjcwNDMz",
              "url": "https://api.github.com/repos/dashpay/dash/labels/RPC",
              "name": "RPC",
              "description": "Some notable changes to RPC params/behaviour/descriptions",
              "color": "6c96dd",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "COLLABORATOR",
          "milestone": {
            "url": "https://api.github.com/repos/dashpay/dash/milestones/28",
            "html_url": "https://github.com/dashpay/dash/milestone/28",
            "labels_url": "https://api.github.com/repos/dashpay/dash/milestones/28/labels",
            "id": 6582425,
            "node_id": "MDk6TWlsZXN0b25lNjU4MjQyNQ==",
            "number": 28,
            "state": "closed",
            "title": "18",
            "description": "https://github.com/dashpay/dash/issues/4211",
            "creator": {
              "login": "PastaPastaPasta",
              "id": 6443210,
              "node_id": "MDQ6VXNlcjY0NDMyMTA=",
              "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/PastaPastaPasta",
              "html_url": "https://github.com/PastaPastaPasta",
              "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
              "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
              "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
              "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
              "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 2,
            "closed_issues": 617,
            "created_at": "2021-03-23T15:57:06Z",
            "updated_at": "2023-04-10T15:43:17Z",
            "closed_at": "2022-12-28T18:52:24Z",
            "due_on": "2022-05-25T07:00:00Z"
          },
          "locked": false,
          "comments": 5,
          "pull_request": {
            "url": "https://api.github.com/repos/dashpay/dash/pulls/4187",
            "html_url": "https://github.com/dashpay/dash/pull/4187",
            "diff_url": "https://github.com/dashpay/dash/pull/4187.diff",
            "patch_url": "https://github.com/dashpay/dash/pull/4187.patch"
          },
          "closed_at": "2021-07-26T00:10:11Z",
          "created_at": "2021-06-04T15:38:10Z",
          "updated_at": "2023-07-18T11:39:00Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-07T14:57:00Z",
      "updated_at": "2021-06-07T14:57:00Z",
      "source": {
        "issue": {
          "id": 913645538,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NjYzNjQ2MDcz",
          "url": "https://api.github.com/repos/PIVX-Project/PIVX/issues/2411",
          "repository_url": "https://api.github.com/repos/PIVX-Project/PIVX",
          "labels_url": "https://api.github.com/repos/PIVX-Project/PIVX/issues/2411/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/PIVX-Project/PIVX/issues/2411/comments",
          "events_url": "https://api.github.com/repos/PIVX-Project/PIVX/issues/2411/events",
          "html_url": "https://github.com/PIVX-Project/PIVX/pull/2411",
          "number": 2411,
          "state": "closed",
          "state_reason": null,
          "title": "Road to Tor v3 support (BIP155)",
          "body": "Conjunction of a large number of back ports, updates and refactorings that made with the final goal of implementing v3 Onion addresses support (BIP155 https://github.com/bitcoin/bips/blob/master/bip-0155.mediawiki) before the tor v2 addresses EOL, scheduled, by the Tor project, for (1) July 15th: v2 addr support removal from the code base, and (2) October 15th: v2 addr network disable, where **every peer in our network running under Tor will loose the connection and drop the network**.\r\n\r\nAs BIP155 describes, this is introducing a new P2P message to gossip longer node addresses over the P2P network. This is required to support new-generation Onion addresses, I2P, and potentially other networks that have longer endpoint addresses than fit in the 128 bits of the current addr message.\r\n\r\nIn order to achieve the end goal, had to:\r\n1.  Create Span class and push it up to latest Bitcoin implementation. \r\n2.  Update the whole serialization framework and every object using it up to latest Bitcoin implementation (3-4 years ahead of what we currently are in master).\r\n3.  Update the address manager implementing ASN-based bucketing of the network nodes.\r\n4.  Update and refactor the netAddress and address manager tests to latest Bitcoin implementation (4 years ahead of what we currently are in master).\r\n5.  Several util string, vector, encodings, parsing, hashing backports and more..\r\n\r\nImportant note: \r\nThis PR it is not meant to be merged as a standalone PR, will decouple smaller ones moving on. Adding on each sub-PR its own description isolated from this big monster.\r\n\r\nSecond note:\r\nThis is still a **work-in-progress**, not ready for testing yet. I'm probably missing to mention few PRs that have already adapted to our sources. Just making it public so can decouple the changes, we can start merging them and i can continue working a bit more confortable (rebase a +170 commits separate branch is not fun..).\r\n\r\n### List of back ported and adapted PRs:\r\n\r\nSpan and Serialization:\r\n----------------\r\n*  #12886.\r\n*  #12916.\r\n*  #13558.\r\n*  #13697. (Only Span's commit 29943a90)\r\n*  #17850.\r\n*  #17896.\r\n*  #12752.\r\n*  #16577.\r\n*  #16670. (without faebf627)\r\n*  #17957.\r\n*  #18021.\r\n*  #18087.\r\n*  #18112 (only from 353f3762 that we don't support).\r\n*  #18167.\r\n*  #18317.\r\n*  #18591 (only Span's commit 0fbde488)\r\n*  #18468.\r\n*  #19020.\r\n*  #19032.\r\n*  #19367.\r\n*  #19387.\r\n\r\nNet, NetAddress and AddrMan:\r\n----------------\r\n\r\n*  #7932.\r\n*  #10756.\r\n*  #10765.\r\n*  #12218.\r\n*  #12855.\r\n*  #13532.\r\n*  #13575.\r\n*  #13815.\r\n*  #14532.\r\n*  #15051.\r\n*  #15138.\r\n*  #15689.\r\n*  #16702.\r\n*  #17243.\r\n*  #17345.\r\n*  #17754.\r\n*  #17758.\r\n*  #17812.\r\n*  #18023.\r\n*  #18454.\r\n*  #18512.\r\n*  #19314.\r\n*  #19687\r\n\r\nKeys and Addresses encoding:\r\n----------------\r\n* #11372.\r\n* #17511.\r\n* #17721.\r\n\r\nUtil:\r\n----------------\r\n* #9140.\r\n* #16577.\r\n* #16889.\r\n* #19593.\r\n\r\nBench:\r\n----------------\r\n* #16299.\r\n\r\nBIP155:\r\n----------------\r\n*  #19351.\r\n*  #19360.\r\n*  #19534.\r\n*  #19628.\r\n*  #19841.\r\n*  #19845.\r\n*  #19954.\r\n*  #19991 (pending).\r\n*  #19845.\r\n*  #20000 (pending).\r\n*  #20120.\r\n*  #20284.\r\n*  #20564.\r\n*  #21157 (pending).\r\n*  #21564 (pending).\r\n*  Fully removed v2 onion addr support.\r\n*  Add hardcoded seeds.\r\n*  Add release-notes, changes to files.md and every needed documentation.\r\n\r\nI'm currently working on the PRs marked as \"pending\", this isn't over, but I'm pretty pretty close :). What a long road..",
          "user": {
            "login": "furszy",
            "id": 5377650,
            "node_id": "MDQ6VXNlcjUzNzc2NTA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/furszy",
            "html_url": "https://github.com/furszy",
            "followers_url": "https://api.github.com/users/furszy/followers",
            "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
            "organizations_url": "https://api.github.com/users/furszy/orgs",
            "repos_url": "https://api.github.com/users/furszy/repos",
            "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/furszy/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 566256651,
              "node_id": "MDU6TGFiZWw1NjYyNTY2NTE=",
              "url": "https://api.github.com/repos/PIVX-Project/PIVX/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            },
            {
              "id": 566257187,
              "node_id": "MDU6TGFiZWw1NjYyNTcxODc=",
              "url": "https://api.github.com/repos/PIVX-Project/PIVX/labels/Upstream",
              "name": "Upstream",
              "color": "bfd4f2",
              "default": false
            },
            {
              "id": 577484685,
              "node_id": "MDU6TGFiZWw1Nzc0ODQ2ODU=",
              "url": "https://api.github.com/repos/PIVX-Project/PIVX/labels/Docs%20and%20Output",
              "name": "Docs and Output",
              "color": "02d7e1",
              "default": false
            },
            {
              "id": 608273048,
              "node_id": "MDU6TGFiZWw2MDgyNzMwNDg=",
              "url": "https://api.github.com/repos/PIVX-Project/PIVX/labels/Tests",
              "name": "Tests",
              "color": "d4c5f9",
              "default": false
            },
            {
              "id": 816679263,
              "node_id": "MDU6TGFiZWw4MTY2NzkyNjM=",
              "url": "https://api.github.com/repos/PIVX-Project/PIVX/labels/Network",
              "name": "Network",
              "color": "f9d0c4",
              "default": false
            },
            {
              "id": 826053417,
              "node_id": "MDU6TGFiZWw4MjYwNTM0MTc=",
              "url": "https://api.github.com/repos/PIVX-Project/PIVX/labels/Protocol-Update",
              "name": "Protocol-Update",
              "color": "ff0000",
              "default": false
            }
          ],
          "assignee": {
            "login": "furszy",
            "id": 5377650,
            "node_id": "MDQ6VXNlcjUzNzc2NTA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/furszy",
            "html_url": "https://github.com/furszy",
            "followers_url": "https://api.github.com/users/furszy/followers",
            "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
            "organizations_url": "https://api.github.com/users/furszy/orgs",
            "repos_url": "https://api.github.com/users/furszy/repos",
            "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/furszy/received_events",
            "type": "User",
            "site_admin": false
          },
          "assignees": [
            {
              "login": "furszy",
              "id": 5377650,
              "node_id": "MDQ6VXNlcjUzNzc2NTA=",
              "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/furszy",
              "html_url": "https://github.com/furszy",
              "followers_url": "https://api.github.com/users/furszy/followers",
              "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
              "organizations_url": "https://api.github.com/users/furszy/orgs",
              "repos_url": "https://api.github.com/users/furszy/repos",
              "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/furszy/received_events",
              "type": "User",
              "site_admin": false
            }
          ],
          "author_association": "NONE",
          "milestone": {
            "url": "https://api.github.com/repos/PIVX-Project/PIVX/milestones/32",
            "html_url": "https://github.com/PIVX-Project/PIVX/milestone/32",
            "labels_url": "https://api.github.com/repos/PIVX-Project/PIVX/milestones/32/labels",
            "id": 6590958,
            "node_id": "MDk6TWlsZXN0b25lNjU5MDk1OA==",
            "number": 32,
            "state": "closed",
            "title": "5.3.0",
            "description": "",
            "creator": {
              "login": "random-zebra",
              "id": 18186894,
              "node_id": "MDQ6VXNlcjE4MTg2ODk0",
              "avatar_url": "https://avatars.githubusercontent.com/u/18186894?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/random-zebra",
              "html_url": "https://github.com/random-zebra",
              "followers_url": "https://api.github.com/users/random-zebra/followers",
              "following_url": "https://api.github.com/users/random-zebra/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/random-zebra/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/random-zebra/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/random-zebra/subscriptions",
              "organizations_url": "https://api.github.com/users/random-zebra/orgs",
              "repos_url": "https://api.github.com/users/random-zebra/repos",
              "events_url": "https://api.github.com/users/random-zebra/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/random-zebra/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 0,
            "closed_issues": 187,
            "created_at": "2021-03-25T15:12:45Z",
            "updated_at": "2021-08-30T19:28:54Z",
            "closed_at": "2021-08-30T19:28:54Z",
            "due_on": "2021-08-15T07:00:00Z"
          },
          "locked": false,
          "comments": 19,
          "pull_request": {
            "url": "https://api.github.com/repos/PIVX-Project/PIVX/pulls/2411",
            "html_url": "https://github.com/PIVX-Project/PIVX/pull/2411",
            "diff_url": "https://github.com/PIVX-Project/PIVX/pull/2411.diff",
            "patch_url": "https://github.com/PIVX-Project/PIVX/pull/2411.patch"
          },
          "closed_at": "2021-08-11T10:09:46Z",
          "created_at": "2021-06-07T14:56:59Z",
          "updated_at": "2022-11-29T15:44:51Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "referenced",
      "id": 4866744337,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ4NjY3NDQzMzc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4866744337",
      "actor": {
        "login": "kwvg",
        "id": 63189531,
        "node_id": "MDQ6VXNlcjYzMTg5NTMx",
        "avatar_url": "https://avatars.githubusercontent.com/u/63189531?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kwvg",
        "html_url": "https://github.com/kwvg",
        "followers_url": "https://api.github.com/users/kwvg/followers",
        "following_url": "https://api.github.com/users/kwvg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kwvg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kwvg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kwvg/subscriptions",
        "organizations_url": "https://api.github.com/users/kwvg/orgs",
        "repos_url": "https://api.github.com/users/kwvg/repos",
        "events_url": "https://api.github.com/users/kwvg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kwvg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "cbe19682548b32a3559e1b077915f790f1590be4",
      "commit_url": "https://api.github.com/repos/kwvg/dash/commits/cbe19682548b32a3559e1b077915f790f1590be4",
      "created_at": "2021-06-09T18:07:46Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-06T02:08:26Z",
      "updated_at": "2021-07-06T02:08:26Z",
      "source": {
        "issue": {
          "id": 937457238,
          "node_id": "MDExOlB1bGxSZXF1ZXN0Njg0MDA5MTgy",
          "url": "https://api.github.com/repos/PIVX-Project/PIVX/issues/2470",
          "repository_url": "https://api.github.com/repos/PIVX-Project/PIVX",
          "labels_url": "https://api.github.com/repos/PIVX-Project/PIVX/issues/2470/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/PIVX-Project/PIVX/issues/2470/comments",
          "events_url": "https://api.github.com/repos/PIVX-Project/PIVX/issues/2470/events",
          "html_url": "https://github.com/PIVX-Project/PIVX/pull/2470",
          "number": 2470,
          "state": "closed",
          "state_reason": null,
          "title": " Span sources updates, up-to-date with current upstream.",
          "body": "Another decouple from #2411.\r\nPurely focused on updating the Span sources to be up-to-date with current upstream.\r\n\r\nFollowing PRs/commits were back ported:\r\n\r\n* #13697 (only 29943a904a11607787d28b1f4288f500bd076dde)\r\n* 2b0fcff7f26d59fed4bcafd1602325122a206c67 (only span changes).\r\n* #18591 (only 0fbde488b24f62b4bbbde216647941dcac65c81a).\r\n* #18468 (without 2676aeadfa0e43dcaaccc4720623cdfe0beed528).\r\n* #19367.\r\n* #19387.\r\n* #19326 (only 56782504 and e63dcc3a here). \r\n* #19687 (only e2aa1a585a83971639572cd2c84565ec360deac9 here, 2bc20719 is inside #2411 and require net related commits that are introduced down the commits line there).\r\n\r\nExtra side note:\r\nSome of the current serialization compiler warnings in master will be fixed with this, other ones are coming down 2411 commits line as they need other previous PRs.",
          "user": {
            "login": "furszy",
            "id": 5377650,
            "node_id": "MDQ6VXNlcjUzNzc2NTA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/furszy",
            "html_url": "https://github.com/furszy",
            "followers_url": "https://api.github.com/users/furszy/followers",
            "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
            "organizations_url": "https://api.github.com/users/furszy/orgs",
            "repos_url": "https://api.github.com/users/furszy/repos",
            "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/furszy/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 566257187,
              "node_id": "MDU6TGFiZWw1NjYyNTcxODc=",
              "url": "https://api.github.com/repos/PIVX-Project/PIVX/labels/Upstream",
              "name": "Upstream",
              "color": "bfd4f2",
              "default": false
            },
            {
              "id": 577484685,
              "node_id": "MDU6TGFiZWw1Nzc0ODQ2ODU=",
              "url": "https://api.github.com/repos/PIVX-Project/PIVX/labels/Docs%20and%20Output",
              "name": "Docs and Output",
              "color": "02d7e1",
              "default": false
            },
            {
              "id": 592705891,
              "node_id": "MDU6TGFiZWw1OTI3MDU4OTE=",
              "url": "https://api.github.com/repos/PIVX-Project/PIVX/labels/Refactoring",
              "name": "Refactoring",
              "color": "e6f6d6",
              "default": false
            }
          ],
          "assignee": {
            "login": "furszy",
            "id": 5377650,
            "node_id": "MDQ6VXNlcjUzNzc2NTA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/furszy",
            "html_url": "https://github.com/furszy",
            "followers_url": "https://api.github.com/users/furszy/followers",
            "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
            "organizations_url": "https://api.github.com/users/furszy/orgs",
            "repos_url": "https://api.github.com/users/furszy/repos",
            "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/furszy/received_events",
            "type": "User",
            "site_admin": false
          },
          "assignees": [
            {
              "login": "furszy",
              "id": 5377650,
              "node_id": "MDQ6VXNlcjUzNzc2NTA=",
              "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/furszy",
              "html_url": "https://github.com/furszy",
              "followers_url": "https://api.github.com/users/furszy/followers",
              "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
              "organizations_url": "https://api.github.com/users/furszy/orgs",
              "repos_url": "https://api.github.com/users/furszy/repos",
              "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/furszy/received_events",
              "type": "User",
              "site_admin": false
            }
          ],
          "author_association": "NONE",
          "milestone": {
            "url": "https://api.github.com/repos/PIVX-Project/PIVX/milestones/32",
            "html_url": "https://github.com/PIVX-Project/PIVX/milestone/32",
            "labels_url": "https://api.github.com/repos/PIVX-Project/PIVX/milestones/32/labels",
            "id": 6590958,
            "node_id": "MDk6TWlsZXN0b25lNjU5MDk1OA==",
            "number": 32,
            "state": "closed",
            "title": "5.3.0",
            "description": "",
            "creator": {
              "login": "random-zebra",
              "id": 18186894,
              "node_id": "MDQ6VXNlcjE4MTg2ODk0",
              "avatar_url": "https://avatars.githubusercontent.com/u/18186894?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/random-zebra",
              "html_url": "https://github.com/random-zebra",
              "followers_url": "https://api.github.com/users/random-zebra/followers",
              "following_url": "https://api.github.com/users/random-zebra/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/random-zebra/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/random-zebra/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/random-zebra/subscriptions",
              "organizations_url": "https://api.github.com/users/random-zebra/orgs",
              "repos_url": "https://api.github.com/users/random-zebra/repos",
              "events_url": "https://api.github.com/users/random-zebra/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/random-zebra/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 0,
            "closed_issues": 187,
            "created_at": "2021-03-25T15:12:45Z",
            "updated_at": "2021-08-30T19:28:54Z",
            "closed_at": "2021-08-30T19:28:54Z",
            "due_on": "2021-08-15T07:00:00Z"
          },
          "locked": false,
          "comments": 0,
          "pull_request": {
            "url": "https://api.github.com/repos/PIVX-Project/PIVX/pulls/2470",
            "html_url": "https://github.com/PIVX-Project/PIVX/pull/2470",
            "diff_url": "https://github.com/PIVX-Project/PIVX/pull/2470.diff",
            "patch_url": "https://github.com/PIVX-Project/PIVX/pull/2470.patch"
          },
          "closed_at": "2021-07-21T14:42:28Z",
          "created_at": "2021-07-06T02:08:25Z",
          "updated_at": "2022-11-29T15:45:03Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "referenced",
      "id": 5001143389,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDUwMDExNDMzODk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5001143389",
      "actor": {
        "login": "kwvg",
        "id": 63189531,
        "node_id": "MDQ6VXNlcjYzMTg5NTMx",
        "avatar_url": "https://avatars.githubusercontent.com/u/63189531?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kwvg",
        "html_url": "https://github.com/kwvg",
        "followers_url": "https://api.github.com/users/kwvg/followers",
        "following_url": "https://api.github.com/users/kwvg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kwvg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kwvg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kwvg/subscriptions",
        "organizations_url": "https://api.github.com/users/kwvg/orgs",
        "repos_url": "https://api.github.com/users/kwvg/repos",
        "events_url": "https://api.github.com/users/kwvg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kwvg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "3a39207e5b319c70ee09b01187f7c8a0c6d0e19e",
      "commit_url": "https://api.github.com/repos/kwvg/dash/commits/3a39207e5b319c70ee09b01187f7c8a0c6d0e19e",
      "created_at": "2021-07-09T15:59:48Z"
    },
    {
      "event": "referenced",
      "id": 5012464846,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDUwMTI0NjQ4NDY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5012464846",
      "actor": {
        "login": "kwvg",
        "id": 63189531,
        "node_id": "MDQ6VXNlcjYzMTg5NTMx",
        "avatar_url": "https://avatars.githubusercontent.com/u/63189531?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kwvg",
        "html_url": "https://github.com/kwvg",
        "followers_url": "https://api.github.com/users/kwvg/followers",
        "following_url": "https://api.github.com/users/kwvg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kwvg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kwvg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kwvg/subscriptions",
        "organizations_url": "https://api.github.com/users/kwvg/orgs",
        "repos_url": "https://api.github.com/users/kwvg/repos",
        "events_url": "https://api.github.com/users/kwvg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kwvg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "572170dc85c24b8999def5157e52c2e60357cd39",
      "commit_url": "https://api.github.com/repos/kwvg/dash/commits/572170dc85c24b8999def5157e52c2e60357cd39",
      "created_at": "2021-07-13T09:21:51Z"
    },
    {
      "event": "referenced",
      "id": 5015044193,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDUwMTUwNDQxOTM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5015044193",
      "actor": {
        "login": "kwvg",
        "id": 63189531,
        "node_id": "MDQ6VXNlcjYzMTg5NTMx",
        "avatar_url": "https://avatars.githubusercontent.com/u/63189531?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kwvg",
        "html_url": "https://github.com/kwvg",
        "followers_url": "https://api.github.com/users/kwvg/followers",
        "following_url": "https://api.github.com/users/kwvg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kwvg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kwvg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kwvg/subscriptions",
        "organizations_url": "https://api.github.com/users/kwvg/orgs",
        "repos_url": "https://api.github.com/users/kwvg/repos",
        "events_url": "https://api.github.com/users/kwvg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kwvg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "30a49a94706a940db0fc6a6a5f1fa5963a5618b5",
      "commit_url": "https://api.github.com/repos/kwvg/dash/commits/30a49a94706a940db0fc6a6a5f1fa5963a5618b5",
      "created_at": "2021-07-13T16:31:47Z"
    },
    {
      "event": "referenced",
      "id": 5017435062,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDUwMTc0MzUwNjI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5017435062",
      "actor": {
        "login": "kwvg",
        "id": 63189531,
        "node_id": "MDQ6VXNlcjYzMTg5NTMx",
        "avatar_url": "https://avatars.githubusercontent.com/u/63189531?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kwvg",
        "html_url": "https://github.com/kwvg",
        "followers_url": "https://api.github.com/users/kwvg/followers",
        "following_url": "https://api.github.com/users/kwvg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kwvg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kwvg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kwvg/subscriptions",
        "organizations_url": "https://api.github.com/users/kwvg/orgs",
        "repos_url": "https://api.github.com/users/kwvg/repos",
        "events_url": "https://api.github.com/users/kwvg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kwvg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "5024e2bd97ab3bce5b80ec63111e09de99b3c8d7",
      "commit_url": "https://api.github.com/repos/kwvg/dash/commits/5024e2bd97ab3bce5b80ec63111e09de99b3c8d7",
      "created_at": "2021-07-14T04:47:35Z"
    },
    {
      "event": "referenced",
      "id": 5023079295,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDUwMjMwNzkyOTU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5023079295",
      "actor": {
        "login": "kwvg",
        "id": 63189531,
        "node_id": "MDQ6VXNlcjYzMTg5NTMx",
        "avatar_url": "https://avatars.githubusercontent.com/u/63189531?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kwvg",
        "html_url": "https://github.com/kwvg",
        "followers_url": "https://api.github.com/users/kwvg/followers",
        "following_url": "https://api.github.com/users/kwvg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kwvg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kwvg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kwvg/subscriptions",
        "organizations_url": "https://api.github.com/users/kwvg/orgs",
        "repos_url": "https://api.github.com/users/kwvg/repos",
        "events_url": "https://api.github.com/users/kwvg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kwvg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "463dca7e24e24ed5675e35be1e1afbf3e617ef27",
      "commit_url": "https://api.github.com/repos/kwvg/dash/commits/463dca7e24e24ed5675e35be1e1afbf3e617ef27",
      "created_at": "2021-07-15T04:22:15Z"
    },
    {
      "event": "referenced",
      "id": 5025711502,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDUwMjU3MTE1MDI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5025711502",
      "actor": {
        "login": "kwvg",
        "id": 63189531,
        "node_id": "MDQ6VXNlcjYzMTg5NTMx",
        "avatar_url": "https://avatars.githubusercontent.com/u/63189531?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kwvg",
        "html_url": "https://github.com/kwvg",
        "followers_url": "https://api.github.com/users/kwvg/followers",
        "following_url": "https://api.github.com/users/kwvg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kwvg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kwvg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kwvg/subscriptions",
        "organizations_url": "https://api.github.com/users/kwvg/orgs",
        "repos_url": "https://api.github.com/users/kwvg/repos",
        "events_url": "https://api.github.com/users/kwvg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kwvg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "262a770c7275b6f862cb9e0bbb29547ba442b10f",
      "commit_url": "https://api.github.com/repos/kwvg/dash/commits/262a770c7275b6f862cb9e0bbb29547ba442b10f",
      "created_at": "2021-07-15T14:14:21Z"
    },
    {
      "event": "referenced",
      "id": 5045181337,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDUwNDUxODEzMzc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5045181337",
      "actor": {
        "login": "kwvg",
        "id": 63189531,
        "node_id": "MDQ6VXNlcjYzMTg5NTMx",
        "avatar_url": "https://avatars.githubusercontent.com/u/63189531?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kwvg",
        "html_url": "https://github.com/kwvg",
        "followers_url": "https://api.github.com/users/kwvg/followers",
        "following_url": "https://api.github.com/users/kwvg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kwvg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kwvg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kwvg/subscriptions",
        "organizations_url": "https://api.github.com/users/kwvg/orgs",
        "repos_url": "https://api.github.com/users/kwvg/repos",
        "events_url": "https://api.github.com/users/kwvg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kwvg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "6113107854683de3bec6c047180c3ab70aa49b6d",
      "commit_url": "https://api.github.com/repos/kwvg/dash/commits/6113107854683de3bec6c047180c3ab70aa49b6d",
      "created_at": "2021-07-20T15:50:34Z"
    },
    {
      "event": "referenced",
      "id": 5045370732,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDUwNDUzNzA3MzI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5045370732",
      "actor": {
        "login": "kwvg",
        "id": 63189531,
        "node_id": "MDQ6VXNlcjYzMTg5NTMx",
        "avatar_url": "https://avatars.githubusercontent.com/u/63189531?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kwvg",
        "html_url": "https://github.com/kwvg",
        "followers_url": "https://api.github.com/users/kwvg/followers",
        "following_url": "https://api.github.com/users/kwvg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kwvg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kwvg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kwvg/subscriptions",
        "organizations_url": "https://api.github.com/users/kwvg/orgs",
        "repos_url": "https://api.github.com/users/kwvg/repos",
        "events_url": "https://api.github.com/users/kwvg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kwvg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "9edc8caa14511c2bf0d91d4812e2bf8265e833bc",
      "commit_url": "https://api.github.com/repos/kwvg/dash/commits/9edc8caa14511c2bf0d91d4812e2bf8265e833bc",
      "created_at": "2021-07-20T16:26:01Z"
    },
    {
      "event": "referenced",
      "id": 5045394369,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDUwNDUzOTQzNjk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5045394369",
      "actor": {
        "login": "kwvg",
        "id": 63189531,
        "node_id": "MDQ6VXNlcjYzMTg5NTMx",
        "avatar_url": "https://avatars.githubusercontent.com/u/63189531?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kwvg",
        "html_url": "https://github.com/kwvg",
        "followers_url": "https://api.github.com/users/kwvg/followers",
        "following_url": "https://api.github.com/users/kwvg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kwvg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kwvg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kwvg/subscriptions",
        "organizations_url": "https://api.github.com/users/kwvg/orgs",
        "repos_url": "https://api.github.com/users/kwvg/repos",
        "events_url": "https://api.github.com/users/kwvg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kwvg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "e3f4888b2b5095d0c3665871aea2ede0f72ffbbf",
      "commit_url": "https://api.github.com/repos/kwvg/dash/commits/e3f4888b2b5095d0c3665871aea2ede0f72ffbbf",
      "created_at": "2021-07-20T16:30:49Z"
    },
    {
      "event": "referenced",
      "id": 5048296009,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDUwNDgyOTYwMDk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5048296009",
      "actor": {
        "login": "kwvg",
        "id": 63189531,
        "node_id": "MDQ6VXNlcjYzMTg5NTMx",
        "avatar_url": "https://avatars.githubusercontent.com/u/63189531?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kwvg",
        "html_url": "https://github.com/kwvg",
        "followers_url": "https://api.github.com/users/kwvg/followers",
        "following_url": "https://api.github.com/users/kwvg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kwvg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kwvg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kwvg/subscriptions",
        "organizations_url": "https://api.github.com/users/kwvg/orgs",
        "repos_url": "https://api.github.com/users/kwvg/repos",
        "events_url": "https://api.github.com/users/kwvg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kwvg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "2bdb8540b64ab74130927c463c6202dc22474c49",
      "commit_url": "https://api.github.com/repos/kwvg/dash/commits/2bdb8540b64ab74130927c463c6202dc22474c49",
      "created_at": "2021-07-21T06:31:11Z"
    },
    {
      "event": "referenced",
      "id": 5050721284,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDUwNTA3MjEyODQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5050721284",
      "actor": {
        "login": "random-zebra",
        "id": 18186894,
        "node_id": "MDQ6VXNlcjE4MTg2ODk0",
        "avatar_url": "https://avatars.githubusercontent.com/u/18186894?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/random-zebra",
        "html_url": "https://github.com/random-zebra",
        "followers_url": "https://api.github.com/users/random-zebra/followers",
        "following_url": "https://api.github.com/users/random-zebra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/random-zebra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/random-zebra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/random-zebra/subscriptions",
        "organizations_url": "https://api.github.com/users/random-zebra/orgs",
        "repos_url": "https://api.github.com/users/random-zebra/repos",
        "events_url": "https://api.github.com/users/random-zebra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/random-zebra/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "56f10aaa5199398f04233e6a29f5580fbb9e5fba",
      "commit_url": "https://api.github.com/repos/PIVX-Project/PIVX/commits/56f10aaa5199398f04233e6a29f5580fbb9e5fba",
      "created_at": "2021-07-21T14:42:27Z"
    },
    {
      "event": "referenced",
      "id": 5065466088,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDUwNjU0NjYwODg=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5065466088",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "edf0552c0ccc80eaded8a6a5caf4c1cc21a99255",
      "commit_url": "https://api.github.com/repos/dashpay/dash/commits/edf0552c0ccc80eaded8a6a5caf4c1cc21a99255",
      "created_at": "2021-07-26T00:10:21Z"
    },
    {
      "event": "referenced",
      "id": 5088110986,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDUwODgxMTA5ODY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5088110986",
      "actor": {
        "login": "linuxsh2",
        "id": 88000383,
        "node_id": "MDQ6VXNlcjg4MDAwMzgz",
        "avatar_url": "https://avatars.githubusercontent.com/u/88000383?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/linuxsh2",
        "html_url": "https://github.com/linuxsh2",
        "followers_url": "https://api.github.com/users/linuxsh2/followers",
        "following_url": "https://api.github.com/users/linuxsh2/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/linuxsh2/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/linuxsh2/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/linuxsh2/subscriptions",
        "organizations_url": "https://api.github.com/users/linuxsh2/orgs",
        "repos_url": "https://api.github.com/users/linuxsh2/repos",
        "events_url": "https://api.github.com/users/linuxsh2/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/linuxsh2/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "d32d0e78fe794386315d335ae39243745c3c6f45",
      "commit_url": "https://api.github.com/repos/linuxsh2/dash/commits/d32d0e78fe794386315d335ae39243745c3c6f45",
      "created_at": "2021-07-29T20:12:24Z"
    },
    {
      "event": "referenced",
      "id": 5093222901,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDUwOTMyMjI5MDE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5093222901",
      "actor": {
        "login": "linuxsh2",
        "id": 88000383,
        "node_id": "MDQ6VXNlcjg4MDAwMzgz",
        "avatar_url": "https://avatars.githubusercontent.com/u/88000383?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/linuxsh2",
        "html_url": "https://github.com/linuxsh2",
        "followers_url": "https://api.github.com/users/linuxsh2/followers",
        "following_url": "https://api.github.com/users/linuxsh2/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/linuxsh2/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/linuxsh2/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/linuxsh2/subscriptions",
        "organizations_url": "https://api.github.com/users/linuxsh2/orgs",
        "repos_url": "https://api.github.com/users/linuxsh2/repos",
        "events_url": "https://api.github.com/users/linuxsh2/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/linuxsh2/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "670d090a5235e2ed002ff6f92382d09477977be9",
      "commit_url": "https://api.github.com/repos/linuxsh2/dash/commits/670d090a5235e2ed002ff6f92382d09477977be9",
      "created_at": "2021-07-30T20:11:19Z"
    },
    {
      "event": "referenced",
      "id": 5105331808,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDUxMDUzMzE4MDg=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5105331808",
      "actor": {
        "login": "linuxsh2",
        "id": 88000383,
        "node_id": "MDQ6VXNlcjg4MDAwMzgz",
        "avatar_url": "https://avatars.githubusercontent.com/u/88000383?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/linuxsh2",
        "html_url": "https://github.com/linuxsh2",
        "followers_url": "https://api.github.com/users/linuxsh2/followers",
        "following_url": "https://api.github.com/users/linuxsh2/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/linuxsh2/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/linuxsh2/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/linuxsh2/subscriptions",
        "organizations_url": "https://api.github.com/users/linuxsh2/orgs",
        "repos_url": "https://api.github.com/users/linuxsh2/repos",
        "events_url": "https://api.github.com/users/linuxsh2/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/linuxsh2/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "7603e1ce8c1823d347b92efd0ba244abe89c44a4",
      "commit_url": "https://api.github.com/repos/linuxsh2/dash/commits/7603e1ce8c1823d347b92efd0ba244abe89c44a4",
      "created_at": "2021-08-03T14:49:04Z"
    },
    {
      "event": "referenced",
      "id": 5141021281,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDUxNDEwMjEyODE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5141021281",
      "actor": {
        "login": "random-zebra",
        "id": 18186894,
        "node_id": "MDQ6VXNlcjE4MTg2ODk0",
        "avatar_url": "https://avatars.githubusercontent.com/u/18186894?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/random-zebra",
        "html_url": "https://github.com/random-zebra",
        "followers_url": "https://api.github.com/users/random-zebra/followers",
        "following_url": "https://api.github.com/users/random-zebra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/random-zebra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/random-zebra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/random-zebra/subscriptions",
        "organizations_url": "https://api.github.com/users/random-zebra/orgs",
        "repos_url": "https://api.github.com/users/random-zebra/repos",
        "events_url": "https://api.github.com/users/random-zebra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/random-zebra/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "b4751e10ce976864c5d06e56c6e6f5a8f315e167",
      "commit_url": "https://api.github.com/repos/PIVX-Project/PIVX/commits/b4751e10ce976864c5d06e56c6e6f5a8f315e167",
      "created_at": "2021-08-11T10:09:46Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-11T12:17:25Z",
      "updated_at": "2021-09-11T12:17:25Z",
      "source": {
        "issue": {
          "id": 993828229,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NzMxOTI0Mjk0",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22953",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22953/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22953/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22953/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/22953",
          "number": 22953,
          "state": "closed",
          "state_reason": null,
          "title": "refactor: introduce single-separator split helper (boost::split replacement)",
          "body": "This PR adds a simple string split helper `SplitString` that takes use of the spanparsing `Split` function that was first introduced in #13697 (commit fe8a7dcd78cfeedc9a7c705e91384f793822912b). This enables to replace most calls to `boost::split`, in the cases where only a single separator character is used. Note that while previous attempts to replace `boost::split` were controversial (e.g. #13751), this one has a trivial implementation: it merely uses an internal helper (that is unit tested and in regular use with output descriptiors) and converts its result from spans to strings. As a drawback though, not all `boost::split` instances can be tackled.\r\n\r\nAs a possible optimization, one could return a vector of `std::string_view`s (available since C++17) instead of strings, to avoid copies. This would need more carefulness on the caller sites though, to avoid potential lifetime issues, and it's probably not worth it, considering that none of the places where strings are split are really performance-critical.\r\n\r\n",
          "user": {
            "login": "theStack",
            "id": 91535,
            "node_id": "MDQ6VXNlcjkxNTM1",
            "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/theStack",
            "html_url": "https://github.com/theStack",
            "followers_url": "https://api.github.com/users/theStack/followers",
            "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
            "organizations_url": "https://api.github.com/users/theStack/orgs",
            "repos_url": "https://api.github.com/users/theStack/repos",
            "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/theStack/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "milestone": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/54",
            "html_url": "https://github.com/bitcoin/bitcoin/milestone/54",
            "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/54/labels",
            "id": 7150037,
            "node_id": "MI_kwDOABII584AbRnV",
            "number": 54,
            "state": "closed",
            "title": "24.0",
            "description": "",
            "creator": {
              "login": "laanwj",
              "id": 126646,
              "node_id": "MDQ6VXNlcjEyNjY0Ng==",
              "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/laanwj",
              "html_url": "https://github.com/laanwj",
              "followers_url": "https://api.github.com/users/laanwj/followers",
              "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
              "organizations_url": "https://api.github.com/users/laanwj/orgs",
              "repos_url": "https://api.github.com/users/laanwj/repos",
              "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/laanwj/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 0,
            "closed_issues": 159,
            "created_at": "2021-09-14T08:27:02Z",
            "updated_at": "2022-11-29T15:44:44Z",
            "closed_at": "2022-11-29T15:44:44Z"
          },
          "locked": true,
          "comments": 24,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22953",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/22953",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/22953.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/22953.patch"
          },
          "closed_at": "2022-04-26T08:55:02Z",
          "created_at": "2021-09-11T12:17:25Z",
          "updated_at": "2023-04-26T14:45:53Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "locked",
      "id": 5778521576,
      "node_id": "LOE_lADOABII584UZF7bzwAAAAFYbT3o",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5778521576",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-12-16T13:56:14Z",
      "lock_reason": "resolved"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203241841",
      "pull_request_review_id": 138092091,
      "id": 203241841,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzI0MTg0MQ==",
      "diff_hunk": "@@ -0,0 +1,615 @@\n+#include <script/descriptor.h>",
      "path": "src/script/descriptor.cpp",
      "position": 5,
      "original_position": 1,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "a6eba6912bdfa7e5809223b24817516c1509ce86",
      "in_reply_to_id": null,
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "~Missing copyright block~",
      "created_at": "2018-07-18T03:26:51Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r203241841",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203241841"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 5,
      "original_line": 5,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203242258",
      "pull_request_review_id": 138092534,
      "id": 203242258,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzI0MjI1OA==",
      "diff_hunk": "@@ -0,0 +1,615 @@\n+#include <script/descriptor.h>",
      "path": "src/script/descriptor.cpp",
      "position": 5,
      "original_position": 1,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "a6eba6912bdfa7e5809223b24817516c1509ce86",
      "in_reply_to_id": 203241841,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed.",
      "created_at": "2018-07-18T03:30:30Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r203242258",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203242258"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 5,
      "original_line": 5,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203374074",
      "pull_request_review_id": 138248785,
      "id": 203374074,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzM3NDA3NA==",
      "diff_hunk": "@@ -28,6 +28,20 @@ class SigningProvider\n \n extern const SigningProvider& DUMMY_SIGNING_PROVIDER;\n \n+struct FlatSigningProvider final : public SigningProvider\n+{\n+    std::map<CScriptID, CScript> scripts;\n+    std::map<CKeyID, CPubKey> pubkeys;\n+    std::map<CKeyID, CKey> keys;\n+\n+    bool GetCScript(const CScriptID& scriptid, CScript& script) const override;\n+    bool GetPubKey(const CKeyID& keyid, CPubKey& pubkey) const override;\n+    bool GetKey(const CKeyID& keyid, CKey& key) const override;\n+",
      "path": "src/script/sign.h",
      "position": null,
      "original_position": 13,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "422d08c1f907e92d8c4c216a71b6ca5ffbf05f0d",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit, remove empty line.",
      "created_at": "2018-07-18T13:17:58Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r203374074",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203374074"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 40,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203375847",
      "pull_request_review_id": 138248785,
      "id": 203375847,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzM3NTg0Nw==",
      "diff_hunk": "@@ -28,6 +28,20 @@ class SigningProvider\n \n extern const SigningProvider& DUMMY_SIGNING_PROVIDER;\n \n+struct FlatSigningProvider final : public SigningProvider\n+{\n+    std::map<CScriptID, CScript> scripts;\n+    std::map<CKeyID, CPubKey> pubkeys;\n+    std::map<CKeyID, CKey> keys;\n+\n+    bool GetCScript(const CScriptID& scriptid, CScript& script) const override;\n+    bool GetPubKey(const CKeyID& keyid, CPubKey& pubkey) const override;\n+    bool GetKey(const CKeyID& keyid, CKey& key) const override;\n+\n+};\n+\n+FlatSigningProvider Merge(const FlatSigningProvider& a, const FlatSigningProvider& b);",
      "path": "src/script/sign.h",
      "position": null,
      "original_position": 16,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "1b7c0c7fbd346109721197cefd4d464fc0bcae0b",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "At the moment this is only used in tests, move there?",
      "created_at": "2018-07-18T13:22:42Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r203375847",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203375847"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 57,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203379602",
      "pull_request_review_id": 138248785,
      "id": 203379602,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzM3OTYwMg==",
      "diff_hunk": "@@ -0,0 +1,619 @@\n+// Copyright (c) 2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <script/descriptor.h>\n+\n+#include <key_io.h>\n+#include <pubkey.h>\n+#include <script/script.h>\n+#include <script/standard.h>\n+\n+#include <span.h>\n+#include <util.h>\n+#include <utilstrencodings.h>\n+\n+#include <memory>\n+#include <string>\n+#include <vector>\n+\n+namespace {\n+\n+////////////////////////////////////////////////////////////////////////////\n+// Internal representation                                                //\n+////////////////////////////////////////////////////////////////////////////\n+\n+typedef std::vector<uint32_t> KeyPath;\n+\n+/** Interface for public key objects in descriptors. */\n+struct PubkeyProvider {\n+    virtual ~PubkeyProvider(){};\n+\n+    /** Derive a public key. */\n+    virtual bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const = 0;\n+\n+    /** Whether this represent multiple public keys at different positions. */\n+    virtual bool IsRange() const = 0;\n+\n+    /** Get the size of the generated public key(s) in bytes (33 or 65). */\n+    virtual size_t GetSize() const = 0;\n+\n+    /** Get the descriptor string form. */\n+    virtual std::string ToString() const = 0;\n+\n+    /** Get the descriptor string form including private data (if available in arg). */\n+    virtual bool ToPrivateString(const SigningProvider& arg, std::string& out) const = 0;\n+};\n+\n+#ifdef KEY_ORIGIN_SUPPORT\n+class OriginPubkeyProvider final : public PubkeyProvider\n+{\n+    uint32_t m_fingerprint;\n+    KeyPath m_path;\n+    std::unique_ptr<PubkeyProvider> m_provider;\n+\n+    std::string OriginString() const\n+    {\n+        std::string ret = strprintf(\"%08x\", m_fingerprint);\n+        for (uint32_t x : m_path) {\n+            if (x >> 31) {\n+                ret += strprintf(\"/%i'\", (x << 1) >> 1);\n+            } else {\n+                ret += strprintf(\"/%i\", x);\n+            }\n+        }\n+        return ret;\n+    }\n+\n+public:\n+    OriginPubkeyProvider(uint32_t fingerprint, KeyPath path, std::unique_ptr<PubkeyProvider> provider) : m_fingerprint(fingerprint), m_path(std::move(path)), m_provider(std::move(provider)) {}\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override { return m_provider->GetPubKey(pos, arg, out); }\n+    bool IsRange() const override { return m_provider->IsRange(); }\n+    size_t GetSize() const override { return m_provider->GetSize(); }\n+    std::string ToString() const override { return OriginString() + \":\" + m_provider->ToString(); }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& ret) const override\n+    {\n+        std::string sub;\n+        if (!m_provider->ToPrivateString(arg, sub)) return false;\n+        ret = OriginString() + \":\" + std::move(sub);\n+        return true;\n+    }\n+};\n+#endif",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 82,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "1b7c0c7fbd346109721197cefd4d464fc0bcae0b",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit, add `// KEY_ORIGIN_SUPPORT`.\r\n",
      "created_at": "2018-07-18T13:33:16Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r203379602",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203379602"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 82,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203379927",
      "pull_request_review_id": 138248785,
      "id": 203379927,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzM3OTkyNw==",
      "diff_hunk": "@@ -0,0 +1,619 @@\n+// Copyright (c) 2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <script/descriptor.h>\n+\n+#include <key_io.h>\n+#include <pubkey.h>\n+#include <script/script.h>\n+#include <script/standard.h>\n+\n+#include <span.h>\n+#include <util.h>\n+#include <utilstrencodings.h>\n+\n+#include <memory>\n+#include <string>\n+#include <vector>\n+\n+namespace {\n+\n+////////////////////////////////////////////////////////////////////////////\n+// Internal representation                                                //\n+////////////////////////////////////////////////////////////////////////////\n+\n+typedef std::vector<uint32_t> KeyPath;\n+\n+/** Interface for public key objects in descriptors. */\n+struct PubkeyProvider {",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 29,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "1b7c0c7fbd346109721197cefd4d464fc0bcae0b",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit, `{` in new line.",
      "created_at": "2018-07-18T13:34:13Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r203379927",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203379927"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 29,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203380024",
      "pull_request_review_id": 138248785,
      "id": 203380024,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzM4MDAyNA==",
      "diff_hunk": "@@ -0,0 +1,619 @@\n+// Copyright (c) 2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <script/descriptor.h>\n+\n+#include <key_io.h>\n+#include <pubkey.h>\n+#include <script/script.h>\n+#include <script/standard.h>\n+\n+#include <span.h>\n+#include <util.h>\n+#include <utilstrencodings.h>\n+\n+#include <memory>\n+#include <string>\n+#include <vector>\n+\n+namespace {\n+\n+////////////////////////////////////////////////////////////////////////////\n+// Internal representation                                                //\n+////////////////////////////////////////////////////////////////////////////\n+\n+typedef std::vector<uint32_t> KeyPath;\n+\n+/** Interface for public key objects in descriptors. */\n+struct PubkeyProvider {\n+    virtual ~PubkeyProvider(){};",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 30,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "1b7c0c7fbd346109721197cefd4d464fc0bcae0b",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit, `= default`?",
      "created_at": "2018-07-18T13:34:31Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r203380024",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203380024"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 30,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203426710",
      "pull_request_review_id": 138313440,
      "id": 203426710,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzQyNjcxMA==",
      "diff_hunk": "@@ -0,0 +1,619 @@\n+// Copyright (c) 2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <script/descriptor.h>\n+\n+#include <key_io.h>\n+#include <pubkey.h>\n+#include <script/script.h>\n+#include <script/standard.h>\n+\n+#include <span.h>\n+#include <util.h>\n+#include <utilstrencodings.h>\n+\n+#include <memory>\n+#include <string>\n+#include <vector>\n+\n+namespace {\n+\n+////////////////////////////////////////////////////////////////////////////\n+// Internal representation                                                //\n+////////////////////////////////////////////////////////////////////////////\n+\n+typedef std::vector<uint32_t> KeyPath;\n+\n+/** Interface for public key objects in descriptors. */\n+struct PubkeyProvider {\n+    virtual ~PubkeyProvider(){};\n+\n+    /** Derive a public key. */\n+    virtual bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const = 0;\n+\n+    /** Whether this represent multiple public keys at different positions. */\n+    virtual bool IsRange() const = 0;\n+\n+    /** Get the size of the generated public key(s) in bytes (33 or 65). */\n+    virtual size_t GetSize() const = 0;\n+\n+    /** Get the descriptor string form. */\n+    virtual std::string ToString() const = 0;\n+\n+    /** Get the descriptor string form including private data (if available in arg). */\n+    virtual bool ToPrivateString(const SigningProvider& arg, std::string& out) const = 0;\n+};\n+\n+#ifdef KEY_ORIGIN_SUPPORT\n+class OriginPubkeyProvider final : public PubkeyProvider\n+{\n+    uint32_t m_fingerprint;\n+    KeyPath m_path;\n+    std::unique_ptr<PubkeyProvider> m_provider;\n+\n+    std::string OriginString() const\n+    {\n+        std::string ret = strprintf(\"%08x\", m_fingerprint);\n+        for (uint32_t x : m_path) {\n+            if (x >> 31) {\n+                ret += strprintf(\"/%i'\", (x << 1) >> 1);\n+            } else {\n+                ret += strprintf(\"/%i\", x);\n+            }\n+        }\n+        return ret;\n+    }\n+\n+public:\n+    OriginPubkeyProvider(uint32_t fingerprint, KeyPath path, std::unique_ptr<PubkeyProvider> provider) : m_fingerprint(fingerprint), m_path(std::move(path)), m_provider(std::move(provider)) {}\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override { return m_provider->GetPubKey(pos, arg, out); }\n+    bool IsRange() const override { return m_provider->IsRange(); }\n+    size_t GetSize() const override { return m_provider->GetSize(); }\n+    std::string ToString() const override { return OriginString() + \":\" + m_provider->ToString(); }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& ret) const override\n+    {\n+        std::string sub;\n+        if (!m_provider->ToPrivateString(arg, sub)) return false;\n+        ret = OriginString() + \":\" + std::move(sub);\n+        return true;\n+    }\n+};\n+#endif\n+\n+/** An object representing a parsed constant public key in a descriptor. */\n+class ConstPubkeyProvider final : public PubkeyProvider\n+{\n+    CPubKey m_pubkey;\n+\n+public:\n+    ConstPubkeyProvider(const CPubKey& pubkey) : m_pubkey(pubkey) {}\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override\n+    {\n+        out = m_pubkey;\n+        return true;\n+    }\n+    bool IsRange() const override { return false; }\n+    size_t GetSize() const override { return m_pubkey.size(); }\n+    std::string ToString() const override { return HexStr(m_pubkey.begin(), m_pubkey.end()); }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& ret) const override\n+    {\n+        CKey key;\n+        if (!arg.GetKey(m_pubkey.GetID(), key)) return false;\n+        ret = EncodeSecret(key);\n+        return true;\n+    }\n+};\n+\n+enum class DeriveType {\n+    NO,\n+    UNHARDENED,\n+    HARDENED,\n+};\n+\n+/** An object representing a parsed extended public key in a descriptor. */\n+class BIP32PubkeyProvider final : public PubkeyProvider\n+{\n+    CExtPubKey m_extkey;\n+    KeyPath m_path;\n+    DeriveType m_derive;\n+\n+    bool GetExtKey(const SigningProvider& arg, CExtKey& ret) const\n+    {\n+        CKey key;\n+        if (!arg.GetKey(m_extkey.pubkey.GetID(), key)) return false;\n+        ret.nDepth = m_extkey.nDepth;\n+        std::copy(m_extkey.vchFingerprint, m_extkey.vchFingerprint + 4, ret.vchFingerprint);\n+        ret.nChild = m_extkey.nChild;\n+        ret.chaincode = m_extkey.chaincode;\n+        ret.key = key;\n+        return true;\n+    }\n+\n+    bool IsHardened() const\n+    {\n+        if (m_derive == DeriveType::HARDENED) return true;\n+        for (auto entry : m_path) {\n+            if (entry >> 31) return true;\n+        }\n+        return false;\n+    }\n+\n+public:\n+    BIP32PubkeyProvider(const CExtPubKey& extkey, KeyPath path, DeriveType derive) : m_extkey(extkey), m_path(std::move(path)), m_derive(derive) {}\n+    bool IsRange() const override { return m_derive != DeriveType::NO; }\n+    size_t GetSize() const override { return 33; }\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override\n+    {\n+        if (IsHardened()) {\n+            CExtKey key;\n+            if (!GetExtKey(arg, key)) return false;\n+            for (auto entry : m_path) {\n+                key.Derive(key, entry);\n+            }\n+            if (IsRange()) {\n+                key.Derive(key, pos | 0x80000000UL);\n+            }\n+            out = key.Neuter().pubkey;\n+        } else {\n+            // TODO: optimize by caching\n+            CExtPubKey key = m_extkey;\n+            for (auto entry : m_path) {\n+                key.Derive(key, entry);\n+            }\n+            if (IsRange()) {\n+                key.Derive(key, pos);\n+            }\n+            out = key.pubkey;\n+        }\n+        return true;\n+    }\n+    std::string ToString() const override\n+    {\n+        std::string ret = EncodeExtPubKey(m_extkey);\n+        for (auto entry : m_path) {\n+            ret += strprintf(\"/%i\", entry & 0x7FFFFFFFUL);\n+            if (entry >> 31) ret += '\\'';\n+        }\n+        if (IsRange()) {\n+            ret += \"/*\";\n+            if (m_derive == DeriveType::HARDENED) ret += '\\'';\n+        }\n+        return ret;\n+    }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        CExtKey key;\n+        if (!GetExtKey(arg, key)) return false;\n+        out = EncodeExtKey(key);\n+        for (auto entry : m_path) {\n+            out += strprintf(\"/%i\", entry & 0x7FFFFFFFUL);\n+            if (entry >> 31) out += '\\'';\n+        }\n+        if (IsRange()) {\n+            out += \"/*\";\n+            if (m_derive == DeriveType::HARDENED) out += '\\'';\n+        }\n+        return true;\n+    }\n+};\n+\n+/** A parsed addr(A) descriptor. */\n+class AddressDescriptor final : public Descriptor\n+{\n+    CTxDestination m_destination;\n+\n+public:\n+    AddressDescriptor(CTxDestination destination) : m_destination(std::move(destination)) {}\n+\n+    bool IsRange() const override { return false; }\n+    std::string ToString() const override { return \"addr(\" + EncodeDestination(m_destination) + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override { out = ToString(); return true; }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        output_scripts = std::vector<CScript>{GetScriptForDestination(m_destination)};\n+        return true;\n+    }\n+};\n+\n+/** A parsed raw(H) descriptor. */\n+class RawDescriptor final : public Descriptor\n+{\n+    CScript m_script;\n+\n+public:\n+    RawDescriptor(CScript script) : m_script(std::move(script)) {}\n+\n+    bool IsRange() const override { return false; }\n+    std::string ToString() const override { return \"raw(\" + HexStr(m_script.begin(), m_script.end()) + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override { out = ToString(); return true; }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        output_scripts = std::vector<CScript>{m_script};\n+        return true;\n+    }\n+};\n+\n+/** A parsed pk(P), pkh(P), or wpkh(P) descriptor. */\n+class SingleKeyDescriptor final : public Descriptor\n+{\n+    const std::function<CScript(const CPubKey&)> m_script_fn;\n+    const std::string m_fn_name;\n+    std::unique_ptr<PubkeyProvider> m_provider;\n+\n+public:\n+    SingleKeyDescriptor(std::unique_ptr<PubkeyProvider> prov, const std::function<CScript(const CPubKey&)>& fn, const std::string& name) : m_script_fn(fn), m_fn_name(name), m_provider(std::move(prov)) {}\n+\n+    bool IsRange() const override { return m_provider->IsRange(); }\n+    std::string ToString() const override { return m_fn_name + \"(\" + m_provider->ToString() + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret;\n+        if (!m_provider->ToPrivateString(arg, ret)) return false;\n+        out = m_fn_name + \"(\" + std::move(ret) + \")\";\n+        return true;\n+    }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        CPubKey key;\n+        if (!m_provider->GetPubKey(pos, arg, key)) return false;\n+        output_scripts = std::vector<CScript>{m_script_fn(key)};\n+        out.pubkeys.emplace(key.GetID(), std::move(key));\n+        return true;\n+    }\n+};\n+\n+CScript P2PKHGetScript(const CPubKey& pubkey) { return GetScriptForDestination(pubkey.GetID()); }\n+CScript P2PKGetScript(const CPubKey& pubkey) { return GetScriptForRawPubKey(pubkey); }\n+CScript P2WPKHGetScript(const CPubKey& pubkey) { return GetScriptForDestination(WitnessV0KeyHash(pubkey.GetID())); }\n+\n+/** A parsed multi(...) descriptor. */\n+class MultisigDescriptor : public Descriptor\n+{\n+    int m_threshold;\n+    std::vector<std::unique_ptr<PubkeyProvider>> m_providers;\n+\n+public:\n+    MultisigDescriptor(int threshold, std::vector<std::unique_ptr<PubkeyProvider>> providers) : m_threshold(threshold), m_providers(std::move(providers)) {}\n+\n+    bool IsRange() const override\n+    {\n+        for (const auto& p : m_providers) {\n+            if (p->IsRange()) return true;\n+        }\n+        return false;\n+    }\n+\n+    std::string ToString() const override\n+    {\n+        std::string ret = strprintf(\"multi(%i\", m_threshold);\n+        for (const auto& p : m_providers) {\n+            ret += \",\" + p->ToString();\n+        }\n+        return std::move(ret) + \")\";\n+    }\n+\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret = strprintf(\"multi(%i\", m_threshold);\n+        for (const auto& p : m_providers) {\n+            std::string sub;\n+            if (!p->ToPrivateString(arg, sub)) return false;\n+            ret += \",\" + std::move(sub);\n+        }\n+        out = std::move(ret) + \")\";\n+        return true;\n+    }\n+\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        std::vector<CPubKey> pubkeys;\n+        pubkeys.reserve(m_providers.size());\n+        for (const auto& p : m_providers) {\n+            CPubKey key;\n+            if (!p->GetPubKey(pos, arg, key)) return false;\n+            pubkeys.push_back(key);\n+        }\n+        for (const CPubKey& key : pubkeys) {\n+            out.pubkeys.emplace(key.GetID(), std::move(key));\n+        }\n+        output_scripts = std::vector<CScript>{GetScriptForMultisig(m_threshold, pubkeys)};\n+        return true;\n+    }\n+};\n+\n+/** A parsed sh(S) or wsh(S) descriptor. */\n+class ConvertorDescriptor : public Descriptor\n+{\n+    const std::function<CScript(const CScript&)> m_convert_fn;\n+    const std::string m_fn_name;\n+    std::unique_ptr<Descriptor> m_descriptor;\n+\n+public:\n+    ConvertorDescriptor(std::unique_ptr<Descriptor> descriptor, const std::function<CScript(const CScript&)>& fn, const std::string& name) : m_convert_fn(fn), m_fn_name(name), m_descriptor(std::move(descriptor)) {}\n+\n+    bool IsRange() const override { return m_descriptor->IsRange(); }\n+    std::string ToString() const override { return m_fn_name + \"(\" + m_descriptor->ToString() + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret;\n+        if (!m_descriptor->ToPrivateString(arg, ret)) return false;\n+        out = m_fn_name + \"(\" + std::move(ret) + \")\";\n+        return true;\n+    }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        std::vector<CScript> sub;\n+        if (!m_descriptor->Expand(pos, arg, sub, out)) return false;\n+        output_scripts.clear();\n+        for (const auto& script : sub) {\n+            CScriptID id(script);\n+            out.scripts.emplace(CScriptID(script), script);\n+            output_scripts.push_back(m_convert_fn(script));\n+        }\n+        return true;\n+    }\n+};\n+\n+CScript ConvertP2SH(const CScript& script) { return GetScriptForDestination(CScriptID(script)); }\n+CScript ConvertP2WSH(const CScript& script) { return GetScriptForDestination(WitnessV0ScriptHash(script)); }\n+\n+/** A parsed old(P) descriptor. */\n+class OldKeyDescriptor final : public Descriptor\n+{\n+    std::unique_ptr<PubkeyProvider> m_provider;\n+\n+public:\n+    OldKeyDescriptor(std::unique_ptr<PubkeyProvider> provider) : m_provider(std::move(provider)) {}\n+\n+    bool IsRange() const override { return m_provider->IsRange(); }\n+    std::string ToString() const override { return \"old(\" + m_provider->ToString() + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret;\n+        if (!m_provider->ToPrivateString(arg, ret)) return false;\n+        out = \"old(\" + std::move(ret) + \")\";\n+        return true;\n+    }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        CPubKey key;\n+        if (!m_provider->GetPubKey(pos, arg, key)) return false;\n+        CKeyID keyid = key.GetID();\n+        {\n+            CScript p2pk = GetScriptForRawPubKey(key);\n+            CScript p2pkh = GetScriptForDestination(keyid);\n+            output_scripts = std::vector<CScript>{std::move(p2pk), std::move(p2pkh)};\n+            out.pubkeys.emplace(keyid, key);\n+        }\n+        if (key.IsCompressed()) {\n+            CScript p2wpkh = GetScriptForDestination(WitnessV0KeyHash(keyid));\n+            CScriptID p2wpkh_id(p2wpkh);\n+            CScript p2sh_p2wpkh = GetScriptForDestination(p2wpkh_id);\n+            out.scripts.emplace(p2wpkh_id, p2wpkh);\n+            output_scripts.push_back(std::move(p2wpkh));\n+            output_scripts.push_back(std::move(p2sh_p2wpkh));\n+        }\n+        return true;\n+    }\n+};\n+\n+////////////////////////////////////////////////////////////////////////////\n+// Parser                                                                 //\n+////////////////////////////////////////////////////////////////////////////\n+\n+enum class ParseScriptContext {\n+    TOP,\n+    P2SH,\n+    P2WSH,\n+};\n+\n+/** Parse a constant. If succesful, sp is updated to skip the constant and return true. */\n+bool Const(const std::string& str, Span<const char>& sp)\n+{\n+    if ((size_t)sp.size() >= str.size() && std::equal(str.begin(), str.end(), sp.begin())) {\n+        sp = sp.subspan(str.size());\n+        return true;\n+    }\n+    return false;\n+}\n+\n+/** Parse a function call. If succesful, sp is updated to be the function's argument(s). */\n+bool Func(const std::string& str, Span<const char>& sp)\n+{\n+    if ((size_t)sp.size() >= str.size() + 2 && sp[str.size()] == '(' && sp[sp.size() - 1] == ')' && std::equal(str.begin(), str.end(), sp.begin())) {\n+        sp = sp.subspan(str.size() + 1, sp.size() - str.size() - 2);\n+        return true;\n+    }\n+    return false;\n+}\n+\n+/** Return the expression that sp begins with, and update sp to skip it. */\n+Span<const char> Expr(Span<const char>& sp)\n+{\n+    int level = 0;\n+    auto it = sp.begin();\n+    while (it != sp.end()) {\n+        if (*it == '(') {\n+            ++level;\n+        } else if (level && *it == ')') {\n+            --level;\n+        } else if (level == 0 && (*it == ')' || *it == ',')) {\n+            break;\n+        }\n+        ++it;\n+    }\n+    Span<const char> ret = sp.first(it - sp.begin());\n+    sp = sp.subspan(it - sp.begin());\n+    return ret;\n+}\n+\n+/** Split a string on every instance of sep, returning a vector. */\n+std::vector<Span<const char>> Split(const Span<const char>& sp, char sep)\n+{\n+    std::vector<Span<const char>> ret;\n+    auto it = sp.begin();\n+    auto start = it;\n+    while (it != sp.end()) {",
      "path": "src/script/descriptor.cpp",
      "position": 422,
      "original_position": 457,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "1b7c0c7fbd346109721197cefd4d464fc0bcae0b",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Add\r\n```cpp\r\nif (it == sp.end()) return ret;\r\n```\r\nfor when string is empty.",
      "created_at": "2018-07-18T15:34:18Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r203426710",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203426710"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 422,
      "original_line": 422,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203436690",
      "pull_request_review_id": 138325814,
      "id": 203436690,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzQzNjY5MA==",
      "diff_hunk": "@@ -0,0 +1,619 @@\n+// Copyright (c) 2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <script/descriptor.h>\n+\n+#include <key_io.h>\n+#include <pubkey.h>\n+#include <script/script.h>\n+#include <script/standard.h>\n+\n+#include <span.h>\n+#include <util.h>\n+#include <utilstrencodings.h>\n+\n+#include <memory>\n+#include <string>\n+#include <vector>\n+\n+namespace {\n+\n+////////////////////////////////////////////////////////////////////////////\n+// Internal representation                                                //\n+////////////////////////////////////////////////////////////////////////////\n+\n+typedef std::vector<uint32_t> KeyPath;\n+\n+/** Interface for public key objects in descriptors. */\n+struct PubkeyProvider {\n+    virtual ~PubkeyProvider(){};\n+\n+    /** Derive a public key. */\n+    virtual bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const = 0;\n+\n+    /** Whether this represent multiple public keys at different positions. */\n+    virtual bool IsRange() const = 0;\n+\n+    /** Get the size of the generated public key(s) in bytes (33 or 65). */\n+    virtual size_t GetSize() const = 0;\n+\n+    /** Get the descriptor string form. */\n+    virtual std::string ToString() const = 0;\n+\n+    /** Get the descriptor string form including private data (if available in arg). */\n+    virtual bool ToPrivateString(const SigningProvider& arg, std::string& out) const = 0;\n+};\n+\n+#ifdef KEY_ORIGIN_SUPPORT\n+class OriginPubkeyProvider final : public PubkeyProvider\n+{\n+    uint32_t m_fingerprint;\n+    KeyPath m_path;\n+    std::unique_ptr<PubkeyProvider> m_provider;\n+\n+    std::string OriginString() const\n+    {\n+        std::string ret = strprintf(\"%08x\", m_fingerprint);\n+        for (uint32_t x : m_path) {\n+            if (x >> 31) {\n+                ret += strprintf(\"/%i'\", (x << 1) >> 1);\n+            } else {\n+                ret += strprintf(\"/%i\", x);\n+            }\n+        }\n+        return ret;\n+    }\n+\n+public:\n+    OriginPubkeyProvider(uint32_t fingerprint, KeyPath path, std::unique_ptr<PubkeyProvider> provider) : m_fingerprint(fingerprint), m_path(std::move(path)), m_provider(std::move(provider)) {}\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override { return m_provider->GetPubKey(pos, arg, out); }\n+    bool IsRange() const override { return m_provider->IsRange(); }\n+    size_t GetSize() const override { return m_provider->GetSize(); }\n+    std::string ToString() const override { return OriginString() + \":\" + m_provider->ToString(); }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& ret) const override\n+    {\n+        std::string sub;\n+        if (!m_provider->ToPrivateString(arg, sub)) return false;\n+        ret = OriginString() + \":\" + std::move(sub);\n+        return true;\n+    }\n+};\n+#endif\n+\n+/** An object representing a parsed constant public key in a descriptor. */\n+class ConstPubkeyProvider final : public PubkeyProvider\n+{\n+    CPubKey m_pubkey;\n+\n+public:\n+    ConstPubkeyProvider(const CPubKey& pubkey) : m_pubkey(pubkey) {}\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override\n+    {\n+        out = m_pubkey;\n+        return true;\n+    }\n+    bool IsRange() const override { return false; }\n+    size_t GetSize() const override { return m_pubkey.size(); }\n+    std::string ToString() const override { return HexStr(m_pubkey.begin(), m_pubkey.end()); }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& ret) const override\n+    {\n+        CKey key;\n+        if (!arg.GetKey(m_pubkey.GetID(), key)) return false;\n+        ret = EncodeSecret(key);\n+        return true;\n+    }\n+};\n+\n+enum class DeriveType {\n+    NO,\n+    UNHARDENED,\n+    HARDENED,\n+};\n+\n+/** An object representing a parsed extended public key in a descriptor. */\n+class BIP32PubkeyProvider final : public PubkeyProvider\n+{\n+    CExtPubKey m_extkey;\n+    KeyPath m_path;\n+    DeriveType m_derive;\n+\n+    bool GetExtKey(const SigningProvider& arg, CExtKey& ret) const\n+    {\n+        CKey key;\n+        if (!arg.GetKey(m_extkey.pubkey.GetID(), key)) return false;\n+        ret.nDepth = m_extkey.nDepth;\n+        std::copy(m_extkey.vchFingerprint, m_extkey.vchFingerprint + 4, ret.vchFingerprint);\n+        ret.nChild = m_extkey.nChild;\n+        ret.chaincode = m_extkey.chaincode;\n+        ret.key = key;\n+        return true;\n+    }\n+\n+    bool IsHardened() const\n+    {\n+        if (m_derive == DeriveType::HARDENED) return true;\n+        for (auto entry : m_path) {\n+            if (entry >> 31) return true;\n+        }\n+        return false;\n+    }\n+\n+public:\n+    BIP32PubkeyProvider(const CExtPubKey& extkey, KeyPath path, DeriveType derive) : m_extkey(extkey), m_path(std::move(path)), m_derive(derive) {}\n+    bool IsRange() const override { return m_derive != DeriveType::NO; }\n+    size_t GetSize() const override { return 33; }\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override\n+    {\n+        if (IsHardened()) {\n+            CExtKey key;\n+            if (!GetExtKey(arg, key)) return false;\n+            for (auto entry : m_path) {\n+                key.Derive(key, entry);\n+            }\n+            if (IsRange()) {\n+                key.Derive(key, pos | 0x80000000UL);\n+            }\n+            out = key.Neuter().pubkey;\n+        } else {\n+            // TODO: optimize by caching\n+            CExtPubKey key = m_extkey;\n+            for (auto entry : m_path) {\n+                key.Derive(key, entry);\n+            }\n+            if (IsRange()) {\n+                key.Derive(key, pos);\n+            }\n+            out = key.pubkey;\n+        }\n+        return true;\n+    }\n+    std::string ToString() const override\n+    {\n+        std::string ret = EncodeExtPubKey(m_extkey);\n+        for (auto entry : m_path) {\n+            ret += strprintf(\"/%i\", entry & 0x7FFFFFFFUL);\n+            if (entry >> 31) ret += '\\'';\n+        }\n+        if (IsRange()) {\n+            ret += \"/*\";\n+            if (m_derive == DeriveType::HARDENED) ret += '\\'';\n+        }\n+        return ret;\n+    }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        CExtKey key;\n+        if (!GetExtKey(arg, key)) return false;\n+        out = EncodeExtKey(key);\n+        for (auto entry : m_path) {\n+            out += strprintf(\"/%i\", entry & 0x7FFFFFFFUL);\n+            if (entry >> 31) out += '\\'';\n+        }\n+        if (IsRange()) {\n+            out += \"/*\";\n+            if (m_derive == DeriveType::HARDENED) out += '\\'';\n+        }\n+        return true;\n+    }\n+};\n+\n+/** A parsed addr(A) descriptor. */\n+class AddressDescriptor final : public Descriptor\n+{\n+    CTxDestination m_destination;\n+\n+public:\n+    AddressDescriptor(CTxDestination destination) : m_destination(std::move(destination)) {}\n+\n+    bool IsRange() const override { return false; }\n+    std::string ToString() const override { return \"addr(\" + EncodeDestination(m_destination) + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override { out = ToString(); return true; }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        output_scripts = std::vector<CScript>{GetScriptForDestination(m_destination)};\n+        return true;\n+    }\n+};\n+\n+/** A parsed raw(H) descriptor. */\n+class RawDescriptor final : public Descriptor\n+{\n+    CScript m_script;\n+\n+public:\n+    RawDescriptor(CScript script) : m_script(std::move(script)) {}\n+\n+    bool IsRange() const override { return false; }\n+    std::string ToString() const override { return \"raw(\" + HexStr(m_script.begin(), m_script.end()) + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override { out = ToString(); return true; }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        output_scripts = std::vector<CScript>{m_script};\n+        return true;\n+    }\n+};\n+\n+/** A parsed pk(P), pkh(P), or wpkh(P) descriptor. */\n+class SingleKeyDescriptor final : public Descriptor\n+{\n+    const std::function<CScript(const CPubKey&)> m_script_fn;\n+    const std::string m_fn_name;\n+    std::unique_ptr<PubkeyProvider> m_provider;\n+\n+public:\n+    SingleKeyDescriptor(std::unique_ptr<PubkeyProvider> prov, const std::function<CScript(const CPubKey&)>& fn, const std::string& name) : m_script_fn(fn), m_fn_name(name), m_provider(std::move(prov)) {}\n+\n+    bool IsRange() const override { return m_provider->IsRange(); }\n+    std::string ToString() const override { return m_fn_name + \"(\" + m_provider->ToString() + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret;\n+        if (!m_provider->ToPrivateString(arg, ret)) return false;\n+        out = m_fn_name + \"(\" + std::move(ret) + \")\";\n+        return true;\n+    }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        CPubKey key;\n+        if (!m_provider->GetPubKey(pos, arg, key)) return false;\n+        output_scripts = std::vector<CScript>{m_script_fn(key)};\n+        out.pubkeys.emplace(key.GetID(), std::move(key));\n+        return true;\n+    }\n+};\n+\n+CScript P2PKHGetScript(const CPubKey& pubkey) { return GetScriptForDestination(pubkey.GetID()); }\n+CScript P2PKGetScript(const CPubKey& pubkey) { return GetScriptForRawPubKey(pubkey); }\n+CScript P2WPKHGetScript(const CPubKey& pubkey) { return GetScriptForDestination(WitnessV0KeyHash(pubkey.GetID())); }\n+\n+/** A parsed multi(...) descriptor. */\n+class MultisigDescriptor : public Descriptor\n+{\n+    int m_threshold;\n+    std::vector<std::unique_ptr<PubkeyProvider>> m_providers;\n+\n+public:\n+    MultisigDescriptor(int threshold, std::vector<std::unique_ptr<PubkeyProvider>> providers) : m_threshold(threshold), m_providers(std::move(providers)) {}\n+\n+    bool IsRange() const override\n+    {\n+        for (const auto& p : m_providers) {\n+            if (p->IsRange()) return true;\n+        }\n+        return false;\n+    }\n+\n+    std::string ToString() const override\n+    {\n+        std::string ret = strprintf(\"multi(%i\", m_threshold);\n+        for (const auto& p : m_providers) {\n+            ret += \",\" + p->ToString();\n+        }\n+        return std::move(ret) + \")\";\n+    }\n+\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret = strprintf(\"multi(%i\", m_threshold);\n+        for (const auto& p : m_providers) {\n+            std::string sub;\n+            if (!p->ToPrivateString(arg, sub)) return false;\n+            ret += \",\" + std::move(sub);\n+        }\n+        out = std::move(ret) + \")\";\n+        return true;\n+    }\n+\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        std::vector<CPubKey> pubkeys;\n+        pubkeys.reserve(m_providers.size());\n+        for (const auto& p : m_providers) {\n+            CPubKey key;\n+            if (!p->GetPubKey(pos, arg, key)) return false;\n+            pubkeys.push_back(key);\n+        }\n+        for (const CPubKey& key : pubkeys) {\n+            out.pubkeys.emplace(key.GetID(), std::move(key));\n+        }\n+        output_scripts = std::vector<CScript>{GetScriptForMultisig(m_threshold, pubkeys)};\n+        return true;\n+    }\n+};\n+\n+/** A parsed sh(S) or wsh(S) descriptor. */\n+class ConvertorDescriptor : public Descriptor\n+{\n+    const std::function<CScript(const CScript&)> m_convert_fn;\n+    const std::string m_fn_name;\n+    std::unique_ptr<Descriptor> m_descriptor;\n+\n+public:\n+    ConvertorDescriptor(std::unique_ptr<Descriptor> descriptor, const std::function<CScript(const CScript&)>& fn, const std::string& name) : m_convert_fn(fn), m_fn_name(name), m_descriptor(std::move(descriptor)) {}\n+\n+    bool IsRange() const override { return m_descriptor->IsRange(); }\n+    std::string ToString() const override { return m_fn_name + \"(\" + m_descriptor->ToString() + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret;\n+        if (!m_descriptor->ToPrivateString(arg, ret)) return false;\n+        out = m_fn_name + \"(\" + std::move(ret) + \")\";\n+        return true;\n+    }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        std::vector<CScript> sub;\n+        if (!m_descriptor->Expand(pos, arg, sub, out)) return false;\n+        output_scripts.clear();\n+        for (const auto& script : sub) {\n+            CScriptID id(script);\n+            out.scripts.emplace(CScriptID(script), script);\n+            output_scripts.push_back(m_convert_fn(script));\n+        }\n+        return true;\n+    }\n+};\n+\n+CScript ConvertP2SH(const CScript& script) { return GetScriptForDestination(CScriptID(script)); }\n+CScript ConvertP2WSH(const CScript& script) { return GetScriptForDestination(WitnessV0ScriptHash(script)); }\n+\n+/** A parsed old(P) descriptor. */\n+class OldKeyDescriptor final : public Descriptor\n+{\n+    std::unique_ptr<PubkeyProvider> m_provider;\n+\n+public:\n+    OldKeyDescriptor(std::unique_ptr<PubkeyProvider> provider) : m_provider(std::move(provider)) {}\n+\n+    bool IsRange() const override { return m_provider->IsRange(); }\n+    std::string ToString() const override { return \"old(\" + m_provider->ToString() + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret;\n+        if (!m_provider->ToPrivateString(arg, ret)) return false;\n+        out = \"old(\" + std::move(ret) + \")\";\n+        return true;\n+    }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        CPubKey key;\n+        if (!m_provider->GetPubKey(pos, arg, key)) return false;\n+        CKeyID keyid = key.GetID();\n+        {\n+            CScript p2pk = GetScriptForRawPubKey(key);\n+            CScript p2pkh = GetScriptForDestination(keyid);\n+            output_scripts = std::vector<CScript>{std::move(p2pk), std::move(p2pkh)};\n+            out.pubkeys.emplace(keyid, key);\n+        }\n+        if (key.IsCompressed()) {\n+            CScript p2wpkh = GetScriptForDestination(WitnessV0KeyHash(keyid));\n+            CScriptID p2wpkh_id(p2wpkh);\n+            CScript p2sh_p2wpkh = GetScriptForDestination(p2wpkh_id);\n+            out.scripts.emplace(p2wpkh_id, p2wpkh);\n+            output_scripts.push_back(std::move(p2wpkh));\n+            output_scripts.push_back(std::move(p2sh_p2wpkh));\n+        }\n+        return true;\n+    }\n+};\n+\n+////////////////////////////////////////////////////////////////////////////\n+// Parser                                                                 //\n+////////////////////////////////////////////////////////////////////////////\n+\n+enum class ParseScriptContext {\n+    TOP,\n+    P2SH,\n+    P2WSH,\n+};\n+\n+/** Parse a constant. If succesful, sp is updated to skip the constant and return true. */\n+bool Const(const std::string& str, Span<const char>& sp)\n+{\n+    if ((size_t)sp.size() >= str.size() && std::equal(str.begin(), str.end(), sp.begin())) {\n+        sp = sp.subspan(str.size());\n+        return true;\n+    }\n+    return false;\n+}\n+\n+/** Parse a function call. If succesful, sp is updated to be the function's argument(s). */\n+bool Func(const std::string& str, Span<const char>& sp)\n+{\n+    if ((size_t)sp.size() >= str.size() + 2 && sp[str.size()] == '(' && sp[sp.size() - 1] == ')' && std::equal(str.begin(), str.end(), sp.begin())) {\n+        sp = sp.subspan(str.size() + 1, sp.size() - str.size() - 2);\n+        return true;\n+    }\n+    return false;\n+}\n+\n+/** Return the expression that sp begins with, and update sp to skip it. */\n+Span<const char> Expr(Span<const char>& sp)\n+{\n+    int level = 0;\n+    auto it = sp.begin();\n+    while (it != sp.end()) {\n+        if (*it == '(') {\n+            ++level;\n+        } else if (level && *it == ')') {\n+            --level;\n+        } else if (level == 0 && (*it == ')' || *it == ',')) {\n+            break;\n+        }\n+        ++it;\n+    }\n+    Span<const char> ret = sp.first(it - sp.begin());\n+    sp = sp.subspan(it - sp.begin());\n+    return ret;\n+}\n+\n+/** Split a string on every instance of sep, returning a vector. */\n+std::vector<Span<const char>> Split(const Span<const char>& sp, char sep)\n+{\n+    std::vector<Span<const char>> ret;\n+    auto it = sp.begin();\n+    auto start = it;\n+    while (it != sp.end()) {\n+        if (*it == sep) {\n+            ret.emplace_back(start, it);\n+            start = it + 1;\n+        }\n+        ++it;\n+    }\n+    ret.emplace_back(start, it);\n+    return ret;\n+}\n+\n+/** Parse a key path, being passed a split list of elements (the first element is ignored). */\n+bool ParseKeyPath(const std::vector<Span<const char>>& split, KeyPath& out)\n+{\n+    for (size_t i = 1; i < split.size(); ++i) {\n+        Span<const char> elem = split[i];\n+        bool hardened = false;\n+        if (elem.size() > 0 && elem[elem.size() - 1] == '\\'') {\n+            elem = elem.first(elem.size() - 1);\n+            hardened = true;\n+        }\n+        uint32_t p;\n+        if (!ParseUInt32(std::string(elem.begin(), elem.end()), &p) || p > 0x7FFFFFFFUL) return false;\n+        out.push_back(p | (((uint32_t)hardened) << 31));\n+    }\n+    return true;\n+}\n+\n+/** Parse a public key that excludes origin information. */\n+std::unique_ptr<PubkeyProvider> ParsePubkeyInner(const Span<const char>& sp, bool permit_uncompressed, FlatSigningProvider& out)\n+{\n+    auto split = Split(sp, '/');\n+    std::string str(split[0].begin(), split[0].end());\n+    if (split.size() == 1) {\n+        if (IsHex(str)) {\n+            std::vector<unsigned char> data = ParseHex(str);\n+            CPubKey pubkey(data);\n+            if (pubkey.IsFullyValid() && (permit_uncompressed || pubkey.IsCompressed())) return MakeUnique<ConstPubkeyProvider>(pubkey);\n+        }\n+        CKey key = DecodeSecret(str);\n+        if (key.IsValid() && (permit_uncompressed || key.IsCompressed())) {\n+            CPubKey pubkey = key.GetPubKey();\n+            out.keys.emplace(pubkey.GetID(), key);\n+            return MakeUnique<ConstPubkeyProvider>(pubkey);\n+        }\n+    }\n+    CExtKey extkey = DecodeExtKey(str);\n+    CExtPubKey extpubkey = DecodeExtPubKey(str);\n+    if (!extkey.key.IsValid() && !extpubkey.pubkey.IsValid()) return nullptr;\n+    KeyPath path;\n+    DeriveType type = DeriveType::NO;\n+    if (split.back() == MakeSpan(\"*\").first(1)) {\n+        split.pop_back();\n+        type = DeriveType::UNHARDENED;\n+    } else if (split.back() == MakeSpan(\"*'\").first(2)) {\n+        split.pop_back();\n+        type = DeriveType::HARDENED;\n+    }\n+    if (!ParseKeyPath(split, path)) return nullptr;\n+    if (extkey.key.IsValid()) {\n+        extpubkey = extkey.Neuter();\n+        out.keys.emplace(extpubkey.pubkey.GetID(), extkey.key);\n+    }\n+    return MakeUnique<BIP32PubkeyProvider>(extpubkey, std::move(path), type);\n+}\n+\n+/** Parse a public key including origin information (if enabled). */\n+std::unique_ptr<PubkeyProvider> ParsePubkey(const Span<const char>& sp, bool permit_uncompressed, FlatSigningProvider& out)\n+{\n+    auto colon_split = Split(sp, ':');\n+    if (colon_split.size() > 2) return nullptr;\n+    if (colon_split.size() == 1) return ParsePubkeyInner(colon_split[0], permit_uncompressed, out);\n+#ifdef KEY_ORIGIN_SUPPORT\n+    auto slash_split = Split(colon_split[0], '/');\n+    if (slash_split[0].size() != 8) return nullptr;\n+    std::string fpr_hex = std::string(slash_split[0].begin(), slash_split[0].end());\n+    if (!IsHex(fpr_hex)) return nullptr;\n+    auto fpr_bytes = ParseHex(fpr_hex);\n+    uint32_t fpr = ReadBE32(fpr_bytes.data());\n+    KeyPath path;\n+    if (!ParseKeyPath(slash_split, path)) return nullptr;\n+    auto provider = ParsePubkeyInner(colon_split[1], permit_uncompressed, out);\n+    if (!provider) return nullptr;\n+    return MakeUnique<OriginPubkeyProvider>(fpr, std::move(path), std::move(provider));\n+#else\n+    return nullptr;\n+#endif\n+}\n+\n+/** Parse a script in a particular context. */\n+std::unique_ptr<Descriptor> ParseScript(Span<const char>& sp, ParseScriptContext ctx, FlatSigningProvider& out)\n+{\n+    auto expr = Expr(sp);\n+    if (Func(\"pk\", expr)) {\n+        auto pubkey = ParsePubkey(expr, ctx != ParseScriptContext::P2WSH, out);\n+        if (pubkey) return MakeUnique<SingleKeyDescriptor>(std::move(pubkey), P2PKGetScript, \"pk\");\n+    }\n+    if (Func(\"pkh\", expr)) {\n+        auto pubkey = ParsePubkey(expr, ctx != ParseScriptContext::P2WSH, out);\n+        if (pubkey) return MakeUnique<SingleKeyDescriptor>(std::move(pubkey), P2PKHGetScript, \"pkh\");\n+    }\n+    if (ctx == ParseScriptContext::TOP && Func(\"old\", expr)) {\n+        auto pubkey = ParsePubkey(expr, true, out);\n+        if (pubkey) return MakeUnique<OldKeyDescriptor>(std::move(pubkey));\n+    }\n+    if (Func(\"multi\", expr)) {\n+        auto threshold = Expr(expr);\n+        uint32_t thres;\n+        std::vector<std::unique_ptr<PubkeyProvider>> providers;\n+        if (!ParseUInt32(std::string(threshold.begin(), threshold.end()), &thres)) return nullptr;\n+        size_t script_size = 0;\n+        while (expr.size()) {\n+            if (!Const(\",\", expr)) return nullptr;\n+            auto arg = Expr(expr);\n+            auto pk = ParsePubkey(arg, ctx != ParseScriptContext::P2WSH, out);\n+            if (!pk) return nullptr;\n+            script_size += pk->GetSize() + 1;\n+            providers.emplace_back(std::move(pk));\n+        }\n+        if (providers.size() < 1 || providers.size() > 16 || thres < 1 || thres > providers.size()) return nullptr;\n+        if (ctx == ParseScriptContext::TOP) {\n+            if (providers.size() > 3) return nullptr; // Not more than 3 pubkeys for raw multisig\n+        }\n+        if (ctx == ParseScriptContext::P2SH) {\n+            if (script_size + 3 > 520) return nullptr; // Enforce P2SH script size limit\n+        }\n+        return MakeUnique<MultisigDescriptor>(thres, std::move(providers));\n+    }\n+    if (ctx != ParseScriptContext::P2WSH && Func(\"wpkh\", expr)) {\n+        auto pubkey = ParsePubkey(expr, false, out);\n+        if (pubkey) return MakeUnique<SingleKeyDescriptor>(std::move(pubkey), P2WPKHGetScript, \"wpkh\");\n+    }\n+    if (ctx == ParseScriptContext::TOP && Func(\"sh\", expr)) {\n+        auto desc = ParseScript(expr, ParseScriptContext::P2SH, out);\n+        if (desc && expr.size() == 0) return MakeUnique<ConvertorDescriptor>(std::move(desc), ConvertP2SH, \"sh\");\n+    }\n+    if (ctx != ParseScriptContext::P2WSH && Func(\"wsh\", expr)) {\n+        auto desc = ParseScript(expr, ParseScriptContext::P2WSH, out);\n+        if (desc && expr.size() == 0) return MakeUnique<ConvertorDescriptor>(std::move(desc), ConvertP2WSH, \"wsh\");\n+    }\n+    if (ctx == ParseScriptContext::TOP && Func(\"addr\", expr)) {\n+        CTxDestination dest = DecodeDestination(std::string(expr.begin(), expr.end()));\n+        if (IsValidDestination(dest)) return MakeUnique<AddressDescriptor>(std::move(dest));\n+    }\n+    if (ctx == ParseScriptContext::TOP && Func(\"raw\", expr)) {\n+        std::string str(expr.begin(), expr.end());\n+        if (IsHex(str)) {\n+            auto bytes = ParseHex(str);\n+            return MakeUnique<RawDescriptor>(CScript(bytes.begin(), bytes.end()));\n+        }\n+    }\n+    return nullptr;\n+}\n+\n+} // namespace\n+\n+std::unique_ptr<Descriptor> Parse(const std::string& descriptor, FlatSigningProvider& out)\n+{\n+    Span<const char> sp(descriptor.data(), descriptor.size());\n+    auto ret = ParseScript(sp, ParseScriptContext::TOP, out);\n+    if (sp.size() == 0 && ret) return std::move(ret);",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 617,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "1b7c0c7fbd346109721197cefd4d464fc0bcae0b",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Compiler warning:\r\n```\r\nscript/descriptor.cpp:617:39: warning: moving a local object in a return statement prevents copy elision [-Wpessimizing-move]\r\n    if (sp.size() == 0 && ret) return std::move(ret);\r\n                                      ^\r\nscript/descriptor.cpp:617:39: note: remove std::move call here\r\n    if (sp.size() == 0 && ret) return std::move(ret);\r\n                                      ^~~~~~~~~~  \r\n```",
      "created_at": "2018-07-18T16:01:21Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r203436690",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203436690"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 617,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203443145",
      "pull_request_review_id": 138333458,
      "id": 203443145,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzQ0MzE0NQ==",
      "diff_hunk": "@@ -1984,67 +1985,36 @@ class CoinsViewScanReserver\n     }\n };\n \n-static const char *g_default_scantxoutset_script_types[] = { \"P2PKH\", \"P2SH_P2WPKH\", \"P2WPKH\" };\n-\n-enum class OutputScriptType {\n-    UNKNOWN,\n-    P2PK,\n-    P2PKH,\n-    P2SH_P2WPKH,\n-    P2WPKH\n-};\n-\n-static inline OutputScriptType GetOutputScriptTypeFromString(const std::string& outputtype)\n-{\n-    if (outputtype == \"P2PK\") return OutputScriptType::P2PK;\n-    else if (outputtype == \"P2PKH\") return OutputScriptType::P2PKH;\n-    else if (outputtype == \"P2SH_P2WPKH\") return OutputScriptType::P2SH_P2WPKH;\n-    else if (outputtype == \"P2WPKH\") return OutputScriptType::P2WPKH;\n-    else return OutputScriptType::UNKNOWN;\n-}\n-\n-CTxDestination GetDestinationForKey(const CPubKey& key, OutputScriptType type)\n-{\n-    switch (type) {\n-    case OutputScriptType::P2PKH: return key.GetID();\n-    case OutputScriptType::P2SH_P2WPKH:\n-    case OutputScriptType::P2WPKH: {\n-        if (!key.IsCompressed()) return key.GetID();\n-        CTxDestination witdest = WitnessV0KeyHash(key.GetID());\n-        if (type == OutputScriptType::P2SH_P2WPKH) {\n-            CScript witprog = GetScriptForDestination(witdest);\n-            return CScriptID(witprog);\n-        } else {\n-            return witdest;\n-        }\n-    }\n-    default: assert(false);\n-    }\n-}\n-\n UniValue scantxoutset(const JSONRPCRequest& request)\n {\n     if (request.fHelp || request.params.size() < 1 || request.params.size() > 2)\n         throw std::runtime_error(\n             \"scantxoutset <action> ( <scanobjects> )\\n\"\n-            \"\\nScans the unspent transaction output set for possible entries that matches common scripts of given public keys.\\n\"\n-            \"Using addresses as scanobjects will _not_ detect unspent P2PK txouts\\n\"\n+            \"\\nScans the unspent transaction output set for entries that match certain output descriptors.\\n\"\n+            \"Examples of output descriptors are:\\n\"\n+            \"    addr(<address>)                      Outputs whose scriptPubKey corresponds to the specified address (does not include P2PK)\\n\"\n+            \"    raw(<hex script>)                    Outputs whose scriptPubKey equals the specified hex scripts\\n\"\n+            \"    old(<pubkey>)                        P2PK, P2PKH, P2WPKH, and P2SH-P2WPKH outputs for the given pubkey\\n\"\n+            \"    pkh(<pubkey>)                        P2PKH outputs for the given pubkey\\n\"\n+            \"    sh(multi(<n>,<pubkey>,<pubkey>,...)) P2SH-multisig outputs for the given threshold and pubkeys\\n\"\n+            \"\\nIn the above, <pubkey> either refers to a fixed public key in hexadecimal notation, or to an xpub/xprv optionally followed by one\\n\"\n+            \"or more path elements separated by \\\"/\\\", and optionally ending in \\\"/*\\\" or \\\"/*'\\\" to specify all unhardened or hardened child keys.\\n\"\n+            \"In the latter case, a range needs to be specified by below if different from 1000.\\n\"\n+            \"For more information on output descriptors, see the documentation at TODO\\n\"\n             \"\\nArguments:\\n\"\n             \"1. \\\"action\\\"                       (string, required) The action to execute\\n\"\n             \"                                      \\\"start\\\" for starting a scan\\n\"\n             \"                                      \\\"abort\\\" for aborting the current scan (returns true when abort was successful)\\n\"\n             \"                                      \\\"status\\\" for progress report (in %) of the current scan\\n\"\n-            \"2. \\\"scanobjects\\\"                  (array, optional) Array of scan objects (only one object type per scan object allowed)\\n\"\n-            \"      [\\n\"\n-            \"        { \\\"address\\\" : \\\"<address>\\\" },       (string, optional) Bitcoin address\\n\"\n-            \"        { \\\"script\\\"  : \\\"<scriptPubKey>\\\" },  (string, optional) HEX encoded script (scriptPubKey)\\n\"\n-            \"        { \\\"pubkey\\\"  :                      (object, optional) Public key\\n\"\n-            \"          {\\n\"\n-            \"            \\\"pubkey\\\" : \\\"<pubkey\\\">,         (string, required) HEX encoded public key\\n\"\n-            \"            \\\"script_types\\\" : [ ... ],      (array, optional) Array of script-types to derive from the pubkey (possible values: \\\"P2PK\\\", \\\"P2PKH\\\", \\\"P2SH-P2WPKH\\\", \\\"P2WPKH\\\")\\n\"\n-            \"          }\\n\"\n+            \"2. \\\"scanobjects\\\"                  (array, required) Array of scan objects\\n\"\n+            \"    [                             Every scan object is either a string descriptor or an object:\\n\"\n+            \"        \\\"descriptor\\\",             (string, optional) An output descriptor\\n\"",
      "path": "src/rpc/blockchain.cpp",
      "position": 86,
      "original_position": 84,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "1b7c0c7fbd346109721197cefd4d464fc0bcae0b",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Why give both options? `[{ \"desc\": \"...\", ...}, ...]` is enough?",
      "created_at": "2018-07-18T16:20:05Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r203443145",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203443145"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 2013,
      "original_line": 2012,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203443457",
      "pull_request_review_id": 138333833,
      "id": 203443457,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzQ0MzQ1Nw==",
      "diff_hunk": "@@ -2090,79 +2060,35 @@ UniValue scantxoutset(const JSONRPCRequest& request)\n \n         // loop through the scan objects\n         for (const UniValue& scanobject : request.params[1].get_array().getValues()) {\n-            if (!scanobject.isObject()) {\n-                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid scan object\");\n-            }\n-            UniValue address_uni = find_value(scanobject, \"address\");\n-            UniValue pubkey_uni  = find_value(scanobject, \"pubkey\");\n-            UniValue script_uni  = find_value(scanobject, \"script\");\n-\n-            // make sure only one object type is present\n-            if (1 != !address_uni.isNull() + !pubkey_uni.isNull() + !script_uni.isNull()) {\n-                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Only one object type is allowed per scan object\");\n-            } else if (!address_uni.isNull() && !address_uni.isStr()) {\n-                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Scanobject \\\"address\\\" must contain a single string as value\");\n-            } else if (!pubkey_uni.isNull() && !pubkey_uni.isObject()) {\n-                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Scanobject \\\"pubkey\\\" must contain an object as value\");\n-            } else if (!script_uni.isNull() && !script_uni.isStr()) {\n-                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Scanobject \\\"script\\\" must contain a single string as value\");\n-            } else if (address_uni.isStr()) {\n-                // type: address\n-                // decode destination and derive the scriptPubKey\n-                // add the script to the scan containers\n-                CTxDestination dest = DecodeDestination(address_uni.get_str());\n-                if (!IsValidDestination(dest)) {\n-                    throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid address\");\n-                }\n-                CScript script = GetScriptForDestination(dest);\n-                assert(!script.empty());\n-                needles.insert(script);\n-            } else if (pubkey_uni.isObject()) {\n-                // type: pubkey\n-                // derive script(s) according to the script_type parameter\n-                UniValue script_types_uni = find_value(pubkey_uni, \"script_types\");\n-                UniValue pubkeydata_uni = find_value(pubkey_uni, \"pubkey\");\n-\n-                // check the script types and use the default if not provided\n-                if (!script_types_uni.isNull() && !script_types_uni.isArray()) {\n-                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"script_types must be an array\");\n-                } else if (script_types_uni.isNull()) {\n-                    // use the default script types\n-                    script_types_uni = UniValue(UniValue::VARR);\n-                    for (const char *t : g_default_scantxoutset_script_types) {\n-                        script_types_uni.push_back(t);\n-                    }\n-                }\n-\n-                // check the acctual pubkey\n-                if (!pubkeydata_uni.isStr() || !IsHex(pubkeydata_uni.get_str())) {\n-                    throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Public key must be hex encoded\");\n-                }\n-                CPubKey pubkey(ParseHexV(pubkeydata_uni, \"pubkey\"));\n-                if (!pubkey.IsFullyValid()) {\n-                    throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid public key\");\n+            std::string desc_str;\n+            int range = 1000;\n+            if (scanobject.isStr()) {\n+                desc_str = scanobject.get_str();\n+            } else if (scanobject.isObject()) {\n+                UniValue desc_uni = find_value(scanobject, \"desc\");\n+                if (desc_uni.isNull()) throw JSONRPCError(RPC_INVALID_PARAMETER, \"Descriptor needs to be provided in scan object\");",
      "path": "src/rpc/blockchain.cpp",
      "position": 158,
      "original_position": 156,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "1b7c0c7fbd346109721197cefd4d464fc0bcae0b",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Could have a test.",
      "created_at": "2018-07-18T16:20:57Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r203443457",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203443457"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 2071,
      "original_line": 2070,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203443476",
      "pull_request_review_id": 138333857,
      "id": 203443476,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzQ0MzQ3Ng==",
      "diff_hunk": "@@ -2090,79 +2060,35 @@ UniValue scantxoutset(const JSONRPCRequest& request)\n \n         // loop through the scan objects\n         for (const UniValue& scanobject : request.params[1].get_array().getValues()) {\n-            if (!scanobject.isObject()) {\n-                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid scan object\");\n-            }\n-            UniValue address_uni = find_value(scanobject, \"address\");\n-            UniValue pubkey_uni  = find_value(scanobject, \"pubkey\");\n-            UniValue script_uni  = find_value(scanobject, \"script\");\n-\n-            // make sure only one object type is present\n-            if (1 != !address_uni.isNull() + !pubkey_uni.isNull() + !script_uni.isNull()) {\n-                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Only one object type is allowed per scan object\");\n-            } else if (!address_uni.isNull() && !address_uni.isStr()) {\n-                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Scanobject \\\"address\\\" must contain a single string as value\");\n-            } else if (!pubkey_uni.isNull() && !pubkey_uni.isObject()) {\n-                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Scanobject \\\"pubkey\\\" must contain an object as value\");\n-            } else if (!script_uni.isNull() && !script_uni.isStr()) {\n-                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Scanobject \\\"script\\\" must contain a single string as value\");\n-            } else if (address_uni.isStr()) {\n-                // type: address\n-                // decode destination and derive the scriptPubKey\n-                // add the script to the scan containers\n-                CTxDestination dest = DecodeDestination(address_uni.get_str());\n-                if (!IsValidDestination(dest)) {\n-                    throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid address\");\n-                }\n-                CScript script = GetScriptForDestination(dest);\n-                assert(!script.empty());\n-                needles.insert(script);\n-            } else if (pubkey_uni.isObject()) {\n-                // type: pubkey\n-                // derive script(s) according to the script_type parameter\n-                UniValue script_types_uni = find_value(pubkey_uni, \"script_types\");\n-                UniValue pubkeydata_uni = find_value(pubkey_uni, \"pubkey\");\n-\n-                // check the script types and use the default if not provided\n-                if (!script_types_uni.isNull() && !script_types_uni.isArray()) {\n-                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"script_types must be an array\");\n-                } else if (script_types_uni.isNull()) {\n-                    // use the default script types\n-                    script_types_uni = UniValue(UniValue::VARR);\n-                    for (const char *t : g_default_scantxoutset_script_types) {\n-                        script_types_uni.push_back(t);\n-                    }\n-                }\n-\n-                // check the acctual pubkey\n-                if (!pubkeydata_uni.isStr() || !IsHex(pubkeydata_uni.get_str())) {\n-                    throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Public key must be hex encoded\");\n-                }\n-                CPubKey pubkey(ParseHexV(pubkeydata_uni, \"pubkey\"));\n-                if (!pubkey.IsFullyValid()) {\n-                    throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid public key\");\n+            std::string desc_str;\n+            int range = 1000;\n+            if (scanobject.isStr()) {\n+                desc_str = scanobject.get_str();\n+            } else if (scanobject.isObject()) {\n+                UniValue desc_uni = find_value(scanobject, \"desc\");\n+                if (desc_uni.isNull()) throw JSONRPCError(RPC_INVALID_PARAMETER, \"Descriptor needs to be provided in scan object\");\n+                desc_str = desc_uni.get_str();\n+                UniValue range_uni = find_value(scanobject, \"range\");\n+                if (!range_uni.isNull()) {\n+                    range = range_uni.get_int();\n+                    if (range < 1 || range > 1000000) throw JSONRPCError(RPC_INVALID_PARAMETER, \"range out of range\");",
      "path": "src/rpc/blockchain.cpp",
      "position": null,
      "original_position": 161,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "1b7c0c7fbd346109721197cefd4d464fc0bcae0b",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Could have a test.",
      "created_at": "2018-07-18T16:21:01Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r203443476",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203443476"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2074,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203446922",
      "pull_request_review_id": 138337945,
      "id": 203446922,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzQ0NjkyMg==",
      "diff_hunk": "@@ -0,0 +1,619 @@\n+// Copyright (c) 2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <script/descriptor.h>\n+\n+#include <key_io.h>\n+#include <pubkey.h>\n+#include <script/script.h>\n+#include <script/standard.h>\n+\n+#include <span.h>\n+#include <util.h>\n+#include <utilstrencodings.h>\n+\n+#include <memory>\n+#include <string>\n+#include <vector>\n+\n+namespace {\n+\n+////////////////////////////////////////////////////////////////////////////\n+// Internal representation                                                //\n+////////////////////////////////////////////////////////////////////////////\n+\n+typedef std::vector<uint32_t> KeyPath;\n+\n+/** Interface for public key objects in descriptors. */\n+struct PubkeyProvider {\n+    virtual ~PubkeyProvider(){};\n+\n+    /** Derive a public key. */\n+    virtual bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const = 0;\n+\n+    /** Whether this represent multiple public keys at different positions. */\n+    virtual bool IsRange() const = 0;\n+\n+    /** Get the size of the generated public key(s) in bytes (33 or 65). */\n+    virtual size_t GetSize() const = 0;\n+\n+    /** Get the descriptor string form. */\n+    virtual std::string ToString() const = 0;\n+\n+    /** Get the descriptor string form including private data (if available in arg). */\n+    virtual bool ToPrivateString(const SigningProvider& arg, std::string& out) const = 0;\n+};\n+\n+#ifdef KEY_ORIGIN_SUPPORT\n+class OriginPubkeyProvider final : public PubkeyProvider\n+{\n+    uint32_t m_fingerprint;\n+    KeyPath m_path;\n+    std::unique_ptr<PubkeyProvider> m_provider;\n+\n+    std::string OriginString() const\n+    {\n+        std::string ret = strprintf(\"%08x\", m_fingerprint);\n+        for (uint32_t x : m_path) {\n+            if (x >> 31) {\n+                ret += strprintf(\"/%i'\", (x << 1) >> 1);\n+            } else {\n+                ret += strprintf(\"/%i\", x);\n+            }\n+        }\n+        return ret;\n+    }\n+\n+public:\n+    OriginPubkeyProvider(uint32_t fingerprint, KeyPath path, std::unique_ptr<PubkeyProvider> provider) : m_fingerprint(fingerprint), m_path(std::move(path)), m_provider(std::move(provider)) {}\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override { return m_provider->GetPubKey(pos, arg, out); }\n+    bool IsRange() const override { return m_provider->IsRange(); }\n+    size_t GetSize() const override { return m_provider->GetSize(); }\n+    std::string ToString() const override { return OriginString() + \":\" + m_provider->ToString(); }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& ret) const override\n+    {\n+        std::string sub;\n+        if (!m_provider->ToPrivateString(arg, sub)) return false;\n+        ret = OriginString() + \":\" + std::move(sub);\n+        return true;\n+    }\n+};\n+#endif\n+\n+/** An object representing a parsed constant public key in a descriptor. */\n+class ConstPubkeyProvider final : public PubkeyProvider\n+{\n+    CPubKey m_pubkey;\n+\n+public:\n+    ConstPubkeyProvider(const CPubKey& pubkey) : m_pubkey(pubkey) {}\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override\n+    {\n+        out = m_pubkey;\n+        return true;\n+    }\n+    bool IsRange() const override { return false; }\n+    size_t GetSize() const override { return m_pubkey.size(); }\n+    std::string ToString() const override { return HexStr(m_pubkey.begin(), m_pubkey.end()); }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& ret) const override\n+    {\n+        CKey key;\n+        if (!arg.GetKey(m_pubkey.GetID(), key)) return false;\n+        ret = EncodeSecret(key);\n+        return true;\n+    }\n+};\n+\n+enum class DeriveType {\n+    NO,\n+    UNHARDENED,\n+    HARDENED,\n+};\n+\n+/** An object representing a parsed extended public key in a descriptor. */\n+class BIP32PubkeyProvider final : public PubkeyProvider\n+{\n+    CExtPubKey m_extkey;\n+    KeyPath m_path;\n+    DeriveType m_derive;\n+\n+    bool GetExtKey(const SigningProvider& arg, CExtKey& ret) const\n+    {\n+        CKey key;\n+        if (!arg.GetKey(m_extkey.pubkey.GetID(), key)) return false;\n+        ret.nDepth = m_extkey.nDepth;\n+        std::copy(m_extkey.vchFingerprint, m_extkey.vchFingerprint + 4, ret.vchFingerprint);\n+        ret.nChild = m_extkey.nChild;\n+        ret.chaincode = m_extkey.chaincode;\n+        ret.key = key;\n+        return true;\n+    }\n+\n+    bool IsHardened() const\n+    {\n+        if (m_derive == DeriveType::HARDENED) return true;\n+        for (auto entry : m_path) {\n+            if (entry >> 31) return true;\n+        }\n+        return false;\n+    }\n+\n+public:\n+    BIP32PubkeyProvider(const CExtPubKey& extkey, KeyPath path, DeriveType derive) : m_extkey(extkey), m_path(std::move(path)), m_derive(derive) {}\n+    bool IsRange() const override { return m_derive != DeriveType::NO; }\n+    size_t GetSize() const override { return 33; }\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override\n+    {\n+        if (IsHardened()) {\n+            CExtKey key;\n+            if (!GetExtKey(arg, key)) return false;\n+            for (auto entry : m_path) {\n+                key.Derive(key, entry);\n+            }\n+            if (IsRange()) {\n+                key.Derive(key, pos | 0x80000000UL);\n+            }\n+            out = key.Neuter().pubkey;\n+        } else {\n+            // TODO: optimize by caching\n+            CExtPubKey key = m_extkey;\n+            for (auto entry : m_path) {\n+                key.Derive(key, entry);\n+            }\n+            if (IsRange()) {\n+                key.Derive(key, pos);\n+            }\n+            out = key.pubkey;\n+        }\n+        return true;\n+    }\n+    std::string ToString() const override\n+    {\n+        std::string ret = EncodeExtPubKey(m_extkey);\n+        for (auto entry : m_path) {\n+            ret += strprintf(\"/%i\", entry & 0x7FFFFFFFUL);\n+            if (entry >> 31) ret += '\\'';\n+        }\n+        if (IsRange()) {\n+            ret += \"/*\";\n+            if (m_derive == DeriveType::HARDENED) ret += '\\'';\n+        }\n+        return ret;\n+    }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        CExtKey key;\n+        if (!GetExtKey(arg, key)) return false;\n+        out = EncodeExtKey(key);\n+        for (auto entry : m_path) {\n+            out += strprintf(\"/%i\", entry & 0x7FFFFFFFUL);\n+            if (entry >> 31) out += '\\'';\n+        }\n+        if (IsRange()) {\n+            out += \"/*\";\n+            if (m_derive == DeriveType::HARDENED) out += '\\'';\n+        }\n+        return true;\n+    }\n+};\n+\n+/** A parsed addr(A) descriptor. */\n+class AddressDescriptor final : public Descriptor\n+{\n+    CTxDestination m_destination;\n+\n+public:\n+    AddressDescriptor(CTxDestination destination) : m_destination(std::move(destination)) {}\n+\n+    bool IsRange() const override { return false; }\n+    std::string ToString() const override { return \"addr(\" + EncodeDestination(m_destination) + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override { out = ToString(); return true; }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        output_scripts = std::vector<CScript>{GetScriptForDestination(m_destination)};\n+        return true;\n+    }\n+};\n+\n+/** A parsed raw(H) descriptor. */\n+class RawDescriptor final : public Descriptor\n+{\n+    CScript m_script;\n+\n+public:\n+    RawDescriptor(CScript script) : m_script(std::move(script)) {}\n+\n+    bool IsRange() const override { return false; }\n+    std::string ToString() const override { return \"raw(\" + HexStr(m_script.begin(), m_script.end()) + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override { out = ToString(); return true; }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        output_scripts = std::vector<CScript>{m_script};\n+        return true;\n+    }\n+};\n+\n+/** A parsed pk(P), pkh(P), or wpkh(P) descriptor. */\n+class SingleKeyDescriptor final : public Descriptor\n+{\n+    const std::function<CScript(const CPubKey&)> m_script_fn;\n+    const std::string m_fn_name;\n+    std::unique_ptr<PubkeyProvider> m_provider;\n+\n+public:\n+    SingleKeyDescriptor(std::unique_ptr<PubkeyProvider> prov, const std::function<CScript(const CPubKey&)>& fn, const std::string& name) : m_script_fn(fn), m_fn_name(name), m_provider(std::move(prov)) {}\n+\n+    bool IsRange() const override { return m_provider->IsRange(); }\n+    std::string ToString() const override { return m_fn_name + \"(\" + m_provider->ToString() + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret;\n+        if (!m_provider->ToPrivateString(arg, ret)) return false;\n+        out = m_fn_name + \"(\" + std::move(ret) + \")\";\n+        return true;\n+    }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        CPubKey key;\n+        if (!m_provider->GetPubKey(pos, arg, key)) return false;\n+        output_scripts = std::vector<CScript>{m_script_fn(key)};\n+        out.pubkeys.emplace(key.GetID(), std::move(key));\n+        return true;\n+    }\n+};\n+\n+CScript P2PKHGetScript(const CPubKey& pubkey) { return GetScriptForDestination(pubkey.GetID()); }\n+CScript P2PKGetScript(const CPubKey& pubkey) { return GetScriptForRawPubKey(pubkey); }\n+CScript P2WPKHGetScript(const CPubKey& pubkey) { return GetScriptForDestination(WitnessV0KeyHash(pubkey.GetID())); }\n+\n+/** A parsed multi(...) descriptor. */\n+class MultisigDescriptor : public Descriptor\n+{\n+    int m_threshold;\n+    std::vector<std::unique_ptr<PubkeyProvider>> m_providers;\n+\n+public:\n+    MultisigDescriptor(int threshold, std::vector<std::unique_ptr<PubkeyProvider>> providers) : m_threshold(threshold), m_providers(std::move(providers)) {}\n+\n+    bool IsRange() const override\n+    {\n+        for (const auto& p : m_providers) {\n+            if (p->IsRange()) return true;\n+        }\n+        return false;\n+    }\n+\n+    std::string ToString() const override\n+    {\n+        std::string ret = strprintf(\"multi(%i\", m_threshold);\n+        for (const auto& p : m_providers) {\n+            ret += \",\" + p->ToString();\n+        }\n+        return std::move(ret) + \")\";\n+    }\n+\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret = strprintf(\"multi(%i\", m_threshold);\n+        for (const auto& p : m_providers) {\n+            std::string sub;\n+            if (!p->ToPrivateString(arg, sub)) return false;\n+            ret += \",\" + std::move(sub);\n+        }\n+        out = std::move(ret) + \")\";\n+        return true;\n+    }\n+\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        std::vector<CPubKey> pubkeys;\n+        pubkeys.reserve(m_providers.size());\n+        for (const auto& p : m_providers) {\n+            CPubKey key;\n+            if (!p->GetPubKey(pos, arg, key)) return false;\n+            pubkeys.push_back(key);\n+        }\n+        for (const CPubKey& key : pubkeys) {\n+            out.pubkeys.emplace(key.GetID(), std::move(key));\n+        }\n+        output_scripts = std::vector<CScript>{GetScriptForMultisig(m_threshold, pubkeys)};\n+        return true;\n+    }\n+};\n+\n+/** A parsed sh(S) or wsh(S) descriptor. */\n+class ConvertorDescriptor : public Descriptor\n+{\n+    const std::function<CScript(const CScript&)> m_convert_fn;\n+    const std::string m_fn_name;\n+    std::unique_ptr<Descriptor> m_descriptor;\n+\n+public:\n+    ConvertorDescriptor(std::unique_ptr<Descriptor> descriptor, const std::function<CScript(const CScript&)>& fn, const std::string& name) : m_convert_fn(fn), m_fn_name(name), m_descriptor(std::move(descriptor)) {}\n+\n+    bool IsRange() const override { return m_descriptor->IsRange(); }\n+    std::string ToString() const override { return m_fn_name + \"(\" + m_descriptor->ToString() + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret;\n+        if (!m_descriptor->ToPrivateString(arg, ret)) return false;\n+        out = m_fn_name + \"(\" + std::move(ret) + \")\";\n+        return true;\n+    }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        std::vector<CScript> sub;\n+        if (!m_descriptor->Expand(pos, arg, sub, out)) return false;\n+        output_scripts.clear();\n+        for (const auto& script : sub) {\n+            CScriptID id(script);\n+            out.scripts.emplace(CScriptID(script), script);\n+            output_scripts.push_back(m_convert_fn(script));\n+        }\n+        return true;\n+    }\n+};\n+\n+CScript ConvertP2SH(const CScript& script) { return GetScriptForDestination(CScriptID(script)); }\n+CScript ConvertP2WSH(const CScript& script) { return GetScriptForDestination(WitnessV0ScriptHash(script)); }\n+\n+/** A parsed old(P) descriptor. */\n+class OldKeyDescriptor final : public Descriptor\n+{\n+    std::unique_ptr<PubkeyProvider> m_provider;\n+\n+public:\n+    OldKeyDescriptor(std::unique_ptr<PubkeyProvider> provider) : m_provider(std::move(provider)) {}\n+\n+    bool IsRange() const override { return m_provider->IsRange(); }\n+    std::string ToString() const override { return \"old(\" + m_provider->ToString() + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret;\n+        if (!m_provider->ToPrivateString(arg, ret)) return false;\n+        out = \"old(\" + std::move(ret) + \")\";\n+        return true;\n+    }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        CPubKey key;\n+        if (!m_provider->GetPubKey(pos, arg, key)) return false;\n+        CKeyID keyid = key.GetID();\n+        {\n+            CScript p2pk = GetScriptForRawPubKey(key);\n+            CScript p2pkh = GetScriptForDestination(keyid);\n+            output_scripts = std::vector<CScript>{std::move(p2pk), std::move(p2pkh)};\n+            out.pubkeys.emplace(keyid, key);\n+        }\n+        if (key.IsCompressed()) {\n+            CScript p2wpkh = GetScriptForDestination(WitnessV0KeyHash(keyid));\n+            CScriptID p2wpkh_id(p2wpkh);\n+            CScript p2sh_p2wpkh = GetScriptForDestination(p2wpkh_id);\n+            out.scripts.emplace(p2wpkh_id, p2wpkh);\n+            output_scripts.push_back(std::move(p2wpkh));\n+            output_scripts.push_back(std::move(p2sh_p2wpkh));\n+        }\n+        return true;\n+    }\n+};\n+\n+////////////////////////////////////////////////////////////////////////////\n+// Parser                                                                 //\n+////////////////////////////////////////////////////////////////////////////\n+\n+enum class ParseScriptContext {\n+    TOP,\n+    P2SH,\n+    P2WSH,\n+};\n+\n+/** Parse a constant. If succesful, sp is updated to skip the constant and return true. */\n+bool Const(const std::string& str, Span<const char>& sp)\n+{\n+    if ((size_t)sp.size() >= str.size() && std::equal(str.begin(), str.end(), sp.begin())) {\n+        sp = sp.subspan(str.size());\n+        return true;\n+    }\n+    return false;\n+}\n+\n+/** Parse a function call. If succesful, sp is updated to be the function's argument(s). */\n+bool Func(const std::string& str, Span<const char>& sp)\n+{\n+    if ((size_t)sp.size() >= str.size() + 2 && sp[str.size()] == '(' && sp[sp.size() - 1] == ')' && std::equal(str.begin(), str.end(), sp.begin())) {\n+        sp = sp.subspan(str.size() + 1, sp.size() - str.size() - 2);\n+        return true;\n+    }\n+    return false;\n+}\n+\n+/** Return the expression that sp begins with, and update sp to skip it. */\n+Span<const char> Expr(Span<const char>& sp)\n+{\n+    int level = 0;\n+    auto it = sp.begin();\n+    while (it != sp.end()) {\n+        if (*it == '(') {\n+            ++level;\n+        } else if (level && *it == ')') {\n+            --level;\n+        } else if (level == 0 && (*it == ')' || *it == ',')) {\n+            break;\n+        }\n+        ++it;\n+    }\n+    Span<const char> ret = sp.first(it - sp.begin());\n+    sp = sp.subspan(it - sp.begin());\n+    return ret;\n+}\n+\n+/** Split a string on every instance of sep, returning a vector. */\n+std::vector<Span<const char>> Split(const Span<const char>& sp, char sep)\n+{\n+    std::vector<Span<const char>> ret;\n+    auto it = sp.begin();\n+    auto start = it;\n+    while (it != sp.end()) {\n+        if (*it == sep) {\n+            ret.emplace_back(start, it);\n+            start = it + 1;\n+        }\n+        ++it;\n+    }\n+    ret.emplace_back(start, it);\n+    return ret;\n+}\n+\n+/** Parse a key path, being passed a split list of elements (the first element is ignored). */\n+bool ParseKeyPath(const std::vector<Span<const char>>& split, KeyPath& out)\n+{\n+    for (size_t i = 1; i < split.size(); ++i) {\n+        Span<const char> elem = split[i];\n+        bool hardened = false;\n+        if (elem.size() > 0 && elem[elem.size() - 1] == '\\'') {\n+            elem = elem.first(elem.size() - 1);\n+            hardened = true;\n+        }\n+        uint32_t p;\n+        if (!ParseUInt32(std::string(elem.begin(), elem.end()), &p) || p > 0x7FFFFFFFUL) return false;\n+        out.push_back(p | (((uint32_t)hardened) << 31));\n+    }\n+    return true;\n+}\n+\n+/** Parse a public key that excludes origin information. */\n+std::unique_ptr<PubkeyProvider> ParsePubkeyInner(const Span<const char>& sp, bool permit_uncompressed, FlatSigningProvider& out)\n+{\n+    auto split = Split(sp, '/');\n+    std::string str(split[0].begin(), split[0].end());\n+    if (split.size() == 1) {\n+        if (IsHex(str)) {\n+            std::vector<unsigned char> data = ParseHex(str);\n+            CPubKey pubkey(data);\n+            if (pubkey.IsFullyValid() && (permit_uncompressed || pubkey.IsCompressed())) return MakeUnique<ConstPubkeyProvider>(pubkey);\n+        }\n+        CKey key = DecodeSecret(str);\n+        if (key.IsValid() && (permit_uncompressed || key.IsCompressed())) {\n+            CPubKey pubkey = key.GetPubKey();\n+            out.keys.emplace(pubkey.GetID(), key);\n+            return MakeUnique<ConstPubkeyProvider>(pubkey);\n+        }\n+    }\n+    CExtKey extkey = DecodeExtKey(str);\n+    CExtPubKey extpubkey = DecodeExtPubKey(str);\n+    if (!extkey.key.IsValid() && !extpubkey.pubkey.IsValid()) return nullptr;\n+    KeyPath path;\n+    DeriveType type = DeriveType::NO;\n+    if (split.back() == MakeSpan(\"*\").first(1)) {\n+        split.pop_back();\n+        type = DeriveType::UNHARDENED;\n+    } else if (split.back() == MakeSpan(\"*'\").first(2)) {\n+        split.pop_back();\n+        type = DeriveType::HARDENED;\n+    }\n+    if (!ParseKeyPath(split, path)) return nullptr;\n+    if (extkey.key.IsValid()) {\n+        extpubkey = extkey.Neuter();\n+        out.keys.emplace(extpubkey.pubkey.GetID(), extkey.key);\n+    }\n+    return MakeUnique<BIP32PubkeyProvider>(extpubkey, std::move(path), type);\n+}\n+\n+/** Parse a public key including origin information (if enabled). */\n+std::unique_ptr<PubkeyProvider> ParsePubkey(const Span<const char>& sp, bool permit_uncompressed, FlatSigningProvider& out)\n+{\n+    auto colon_split = Split(sp, ':');\n+    if (colon_split.size() > 2) return nullptr;\n+    if (colon_split.size() == 1) return ParsePubkeyInner(colon_split[0], permit_uncompressed, out);\n+#ifdef KEY_ORIGIN_SUPPORT\n+    auto slash_split = Split(colon_split[0], '/');\n+    if (slash_split[0].size() != 8) return nullptr;\n+    std::string fpr_hex = std::string(slash_split[0].begin(), slash_split[0].end());\n+    if (!IsHex(fpr_hex)) return nullptr;\n+    auto fpr_bytes = ParseHex(fpr_hex);\n+    uint32_t fpr = ReadBE32(fpr_bytes.data());\n+    KeyPath path;\n+    if (!ParseKeyPath(slash_split, path)) return nullptr;\n+    auto provider = ParsePubkeyInner(colon_split[1], permit_uncompressed, out);\n+    if (!provider) return nullptr;\n+    return MakeUnique<OriginPubkeyProvider>(fpr, std::move(path), std::move(provider));\n+#else\n+    return nullptr;\n+#endif\n+}\n+\n+/** Parse a script in a particular context. */\n+std::unique_ptr<Descriptor> ParseScript(Span<const char>& sp, ParseScriptContext ctx, FlatSigningProvider& out)\n+{\n+    auto expr = Expr(sp);\n+    if (Func(\"pk\", expr)) {\n+        auto pubkey = ParsePubkey(expr, ctx != ParseScriptContext::P2WSH, out);\n+        if (pubkey) return MakeUnique<SingleKeyDescriptor>(std::move(pubkey), P2PKGetScript, \"pk\");\n+    }",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 553,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "1b7c0c7fbd346109721197cefd4d464fc0bcae0b",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Why not return `nullptr` in these cases?",
      "created_at": "2018-07-18T16:31:47Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r203446922",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203446922"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 495,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203447244",
      "pull_request_review_id": 138338279,
      "id": 203447244,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzQ0NzI0NA==",
      "diff_hunk": "@@ -0,0 +1,100 @@\n+// Copyright (c) 2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_SCRIPT_DESCRIPTOR_H\n+#define BITCOIN_SCRIPT_DESCRIPTOR_H\n+\n+#include <script/script.h>\n+#include <script/sign.h>\n+\n+#include <vector>\n+\n+// Descriptors are strings that describe a set of scriptPubKeys, together with\n+// all information necessary to solve them. By combining all information into\n+// one, they avoid the need to separately import keys and scripts.\n+//\n+// Descriptors may be ranged, which occurs when the public keys inside are\n+// specified in the form of HD chains (xpubs).\n+//\n+// Descriptors always represent public information - public keys and scripts -\n+// but in cases where private keys need to be conveyed along with a descriptor,\n+// they can be included inside by changing public keys to private keys (WIF\n+// format), and changing xpubs by xprvs.\n+//\n+// 1. Examples\n+//\n+// A P2PK descriptor with a fixed public key:\n+// - pk(0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798)\n+//\n+// A P2SH-P2WSH-P2PKH descriptor with a fixed public key:\n+// - sh(wsh(pkh(02e493dbf1c10d80f3581e4904930b1404cc6c13900ee0758474fa94abe8c4cd13)))\n+//\n+// A bare 1-of-2 multisig descriptor:\n+// - multi(1,022f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4,025cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc)\n+//\n+// A chain of P2PKH outputs (this needs the corresponding private key to derive):\n+// - pkh(xpub68Gmy5EdvgibQVfPdqkBBCHxA5htiqg55crXYuXoQRKfDBFA1WEjWgP6LHhwBZeNK1VTsfTFUHCdrfp1bgwQ9xv5ski8PX9rL2dZXvgGDnw/1'/2/*)\n+//\n+// 2. Grammar description:\n+//\n+// X: xpub or xprv encoded extended key\n+// I: decimal encoded integer\n+// H: Hex encoded byte array\n+// A: Address in P2PKH, P2SH, or Bech32 encoding\n+//\n+// S (Scripts):\n+// * pk(P): Pay-to-pubkey (P2PK) output for public key P.\n+// * pkh(P): Pay-to-pubkey-hash (P2PKH) output for public key P.\n+// * wpkh(P): Pay-to-witness-pubkey-hash (P2WPKH) output for public key P.\n+// * sh(S): Pay-to-script-hash (P2SH) output for script S\n+// * wsh(S): Pay-to-witness-script-hash (P2WSH) output for script S\n+// * old(P): combination of P2PK, P2PKH, P2WPKH, and P2SH-P2WPKH for public key P.\n+// * multi(I,L): k-of-n multisig for given public keys\n+// * addr(A): Output to address\n+// * raw(H): scriptPubKey with raw bytes\n+//\n+// P (Public keys):\n+// * H: fixed public key (or WIF-encoded private key)\n+// * E: extended public key\n+// * E/*: (ranged) all unhardened direct children of an extended public key\n+// * E/*': (ranged) all hardened direct children of an extended public key\n+//\n+// L (Comma-separated lists of public keys):\n+// * P\n+// * L,P\n+//\n+// E (Extended public keys):\n+// * X\n+// * E/I: unhardened child\n+// * E/I': hardened child\n+//\n+// The top level is S.\n+\n+/** Interface for parsed descriptor objects. */\n+struct Descriptor {\n+    virtual ~Descriptor() {}\n+\n+    /** Whether the expansion of this descriptor depends on the position. */\n+    virtual bool IsRange() const = 0;\n+\n+    /** Convert the descriptor back to a string, undoing parsing. */\n+    virtual std::string ToString() const = 0;\n+\n+    /** Convert the descriptor to a private string. This fails if the provided provider does not have the relevant private keys. */\n+    virtual bool ToPrivateString(const SigningProvider& provider, std::string& out) const = 0;\n+\n+    /** Expand a descriptor at a specified position.\n+     *\n+     * pos: the position at which to expand the descriptor. If IsRange() is false, this is ignored.\n+     * provider: the provider to query for private keys in case of hardened derivation.\n+     * output_script: the expanded scriptPubKeys will be put here.\n+     * out: scripts and public keys necessary for solving the expanded scriptPubKeys will be put here (may be equal to provider).\n+     */\n+    virtual bool Expand(int pos, const SigningProvider& provider, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const = 0;\n+};\n+\n+/** Parse a descriptor string. Included private keys are put in out. Returns nullptr if parsing fails. */\n+std::unique_ptr<Descriptor> Parse(const std::string& descriptor, FlatSigningProvider& out);\n+\n+#endif",
      "path": "src/script/descriptor.h",
      "position": null,
      "original_position": 100,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "1b7c0c7fbd346109721197cefd4d464fc0bcae0b",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```\r\n#endif // BITCOIN_SCRIPT_DESCRIPTOR_H\r\n```",
      "created_at": "2018-07-18T16:32:36Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r203447244",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203447244"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 100,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203496728",
      "pull_request_review_id": 138398176,
      "id": 203496728,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzQ5NjcyOA==",
      "diff_hunk": "@@ -0,0 +1,619 @@\n+// Copyright (c) 2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <script/descriptor.h>\n+\n+#include <key_io.h>\n+#include <pubkey.h>\n+#include <script/script.h>\n+#include <script/standard.h>\n+\n+#include <span.h>\n+#include <util.h>\n+#include <utilstrencodings.h>\n+\n+#include <memory>\n+#include <string>\n+#include <vector>\n+\n+namespace {\n+\n+////////////////////////////////////////////////////////////////////////////\n+// Internal representation                                                //\n+////////////////////////////////////////////////////////////////////////////\n+\n+typedef std::vector<uint32_t> KeyPath;\n+\n+/** Interface for public key objects in descriptors. */\n+struct PubkeyProvider {\n+    virtual ~PubkeyProvider(){};\n+\n+    /** Derive a public key. */\n+    virtual bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const = 0;\n+\n+    /** Whether this represent multiple public keys at different positions. */\n+    virtual bool IsRange() const = 0;\n+\n+    /** Get the size of the generated public key(s) in bytes (33 or 65). */\n+    virtual size_t GetSize() const = 0;\n+\n+    /** Get the descriptor string form. */\n+    virtual std::string ToString() const = 0;\n+\n+    /** Get the descriptor string form including private data (if available in arg). */\n+    virtual bool ToPrivateString(const SigningProvider& arg, std::string& out) const = 0;\n+};\n+\n+#ifdef KEY_ORIGIN_SUPPORT\n+class OriginPubkeyProvider final : public PubkeyProvider\n+{\n+    uint32_t m_fingerprint;\n+    KeyPath m_path;\n+    std::unique_ptr<PubkeyProvider> m_provider;\n+\n+    std::string OriginString() const\n+    {\n+        std::string ret = strprintf(\"%08x\", m_fingerprint);\n+        for (uint32_t x : m_path) {\n+            if (x >> 31) {\n+                ret += strprintf(\"/%i'\", (x << 1) >> 1);\n+            } else {\n+                ret += strprintf(\"/%i\", x);\n+            }\n+        }\n+        return ret;\n+    }\n+\n+public:\n+    OriginPubkeyProvider(uint32_t fingerprint, KeyPath path, std::unique_ptr<PubkeyProvider> provider) : m_fingerprint(fingerprint), m_path(std::move(path)), m_provider(std::move(provider)) {}\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override { return m_provider->GetPubKey(pos, arg, out); }\n+    bool IsRange() const override { return m_provider->IsRange(); }\n+    size_t GetSize() const override { return m_provider->GetSize(); }\n+    std::string ToString() const override { return OriginString() + \":\" + m_provider->ToString(); }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& ret) const override\n+    {\n+        std::string sub;\n+        if (!m_provider->ToPrivateString(arg, sub)) return false;\n+        ret = OriginString() + \":\" + std::move(sub);\n+        return true;\n+    }\n+};\n+#endif\n+\n+/** An object representing a parsed constant public key in a descriptor. */\n+class ConstPubkeyProvider final : public PubkeyProvider\n+{\n+    CPubKey m_pubkey;\n+\n+public:\n+    ConstPubkeyProvider(const CPubKey& pubkey) : m_pubkey(pubkey) {}\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override\n+    {\n+        out = m_pubkey;\n+        return true;\n+    }\n+    bool IsRange() const override { return false; }\n+    size_t GetSize() const override { return m_pubkey.size(); }\n+    std::string ToString() const override { return HexStr(m_pubkey.begin(), m_pubkey.end()); }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& ret) const override\n+    {\n+        CKey key;\n+        if (!arg.GetKey(m_pubkey.GetID(), key)) return false;\n+        ret = EncodeSecret(key);\n+        return true;\n+    }\n+};\n+\n+enum class DeriveType {\n+    NO,\n+    UNHARDENED,\n+    HARDENED,\n+};\n+\n+/** An object representing a parsed extended public key in a descriptor. */\n+class BIP32PubkeyProvider final : public PubkeyProvider\n+{\n+    CExtPubKey m_extkey;\n+    KeyPath m_path;\n+    DeriveType m_derive;\n+\n+    bool GetExtKey(const SigningProvider& arg, CExtKey& ret) const\n+    {\n+        CKey key;\n+        if (!arg.GetKey(m_extkey.pubkey.GetID(), key)) return false;\n+        ret.nDepth = m_extkey.nDepth;\n+        std::copy(m_extkey.vchFingerprint, m_extkey.vchFingerprint + 4, ret.vchFingerprint);\n+        ret.nChild = m_extkey.nChild;\n+        ret.chaincode = m_extkey.chaincode;\n+        ret.key = key;\n+        return true;\n+    }\n+\n+    bool IsHardened() const\n+    {\n+        if (m_derive == DeriveType::HARDENED) return true;\n+        for (auto entry : m_path) {\n+            if (entry >> 31) return true;\n+        }\n+        return false;\n+    }\n+\n+public:\n+    BIP32PubkeyProvider(const CExtPubKey& extkey, KeyPath path, DeriveType derive) : m_extkey(extkey), m_path(std::move(path)), m_derive(derive) {}\n+    bool IsRange() const override { return m_derive != DeriveType::NO; }\n+    size_t GetSize() const override { return 33; }\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override\n+    {\n+        if (IsHardened()) {\n+            CExtKey key;\n+            if (!GetExtKey(arg, key)) return false;\n+            for (auto entry : m_path) {\n+                key.Derive(key, entry);\n+            }\n+            if (IsRange()) {\n+                key.Derive(key, pos | 0x80000000UL);\n+            }\n+            out = key.Neuter().pubkey;\n+        } else {\n+            // TODO: optimize by caching\n+            CExtPubKey key = m_extkey;\n+            for (auto entry : m_path) {\n+                key.Derive(key, entry);\n+            }\n+            if (IsRange()) {\n+                key.Derive(key, pos);\n+            }\n+            out = key.pubkey;\n+        }\n+        return true;\n+    }\n+    std::string ToString() const override\n+    {\n+        std::string ret = EncodeExtPubKey(m_extkey);\n+        for (auto entry : m_path) {\n+            ret += strprintf(\"/%i\", entry & 0x7FFFFFFFUL);\n+            if (entry >> 31) ret += '\\'';\n+        }\n+        if (IsRange()) {\n+            ret += \"/*\";\n+            if (m_derive == DeriveType::HARDENED) ret += '\\'';\n+        }\n+        return ret;\n+    }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        CExtKey key;\n+        if (!GetExtKey(arg, key)) return false;\n+        out = EncodeExtKey(key);\n+        for (auto entry : m_path) {",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 189,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "1143a75c2f74335365dc62063f2fdc6c74eefcda",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Can the path writing be separated out into another function to avoid code duplication and so that we can use it elsewhere?",
      "created_at": "2018-07-18T19:11:07Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r203496728",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203496728"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 189,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203500757",
      "pull_request_review_id": 138403222,
      "id": 203500757,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzUwMDc1Nw==",
      "diff_hunk": "@@ -28,6 +28,20 @@ class SigningProvider\n \n extern const SigningProvider& DUMMY_SIGNING_PROVIDER;\n \n+struct FlatSigningProvider final : public SigningProvider\n+{\n+    std::map<CScriptID, CScript> scripts;\n+    std::map<CKeyID, CPubKey> pubkeys;\n+    std::map<CKeyID, CKey> keys;\n+\n+    bool GetCScript(const CScriptID& scriptid, CScript& script) const override;\n+    bool GetPubKey(const CKeyID& keyid, CPubKey& pubkey) const override;\n+    bool GetKey(const CKeyID& keyid, CKey& key) const override;\n+",
      "path": "src/script/sign.h",
      "position": null,
      "original_position": 13,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "422d08c1f907e92d8c4c216a71b6ca5ffbf05f0d",
      "in_reply_to_id": 203374074,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done.",
      "created_at": "2018-07-18T19:26:05Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r203500757",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203500757"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 40,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203500825",
      "pull_request_review_id": 138403311,
      "id": 203500825,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzUwMDgyNQ==",
      "diff_hunk": "@@ -28,6 +28,20 @@ class SigningProvider\n \n extern const SigningProvider& DUMMY_SIGNING_PROVIDER;\n \n+struct FlatSigningProvider final : public SigningProvider\n+{\n+    std::map<CScriptID, CScript> scripts;\n+    std::map<CKeyID, CPubKey> pubkeys;\n+    std::map<CKeyID, CKey> keys;\n+\n+    bool GetCScript(const CScriptID& scriptid, CScript& script) const override;\n+    bool GetPubKey(const CKeyID& keyid, CPubKey& pubkey) const override;\n+    bool GetKey(const CKeyID& keyid, CKey& key) const override;\n+\n+};\n+\n+FlatSigningProvider Merge(const FlatSigningProvider& a, const FlatSigningProvider& b);",
      "path": "src/script/sign.h",
      "position": null,
      "original_position": 16,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "1b7c0c7fbd346109721197cefd4d464fc0bcae0b",
      "in_reply_to_id": 203375847,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I'd rather not. I think more things will be able to use this.",
      "created_at": "2018-07-18T19:26:21Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r203500825",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203500825"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 57,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203500850",
      "pull_request_review_id": 138403353,
      "id": 203500850,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzUwMDg1MA==",
      "diff_hunk": "@@ -0,0 +1,619 @@\n+// Copyright (c) 2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <script/descriptor.h>\n+\n+#include <key_io.h>\n+#include <pubkey.h>\n+#include <script/script.h>\n+#include <script/standard.h>\n+\n+#include <span.h>\n+#include <util.h>\n+#include <utilstrencodings.h>\n+\n+#include <memory>\n+#include <string>\n+#include <vector>\n+\n+namespace {\n+\n+////////////////////////////////////////////////////////////////////////////\n+// Internal representation                                                //\n+////////////////////////////////////////////////////////////////////////////\n+\n+typedef std::vector<uint32_t> KeyPath;\n+\n+/** Interface for public key objects in descriptors. */\n+struct PubkeyProvider {\n+    virtual ~PubkeyProvider(){};\n+\n+    /** Derive a public key. */\n+    virtual bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const = 0;\n+\n+    /** Whether this represent multiple public keys at different positions. */\n+    virtual bool IsRange() const = 0;\n+\n+    /** Get the size of the generated public key(s) in bytes (33 or 65). */\n+    virtual size_t GetSize() const = 0;\n+\n+    /** Get the descriptor string form. */\n+    virtual std::string ToString() const = 0;\n+\n+    /** Get the descriptor string form including private data (if available in arg). */\n+    virtual bool ToPrivateString(const SigningProvider& arg, std::string& out) const = 0;\n+};\n+\n+#ifdef KEY_ORIGIN_SUPPORT\n+class OriginPubkeyProvider final : public PubkeyProvider\n+{\n+    uint32_t m_fingerprint;\n+    KeyPath m_path;\n+    std::unique_ptr<PubkeyProvider> m_provider;\n+\n+    std::string OriginString() const\n+    {\n+        std::string ret = strprintf(\"%08x\", m_fingerprint);\n+        for (uint32_t x : m_path) {\n+            if (x >> 31) {\n+                ret += strprintf(\"/%i'\", (x << 1) >> 1);\n+            } else {\n+                ret += strprintf(\"/%i\", x);\n+            }\n+        }\n+        return ret;\n+    }\n+\n+public:\n+    OriginPubkeyProvider(uint32_t fingerprint, KeyPath path, std::unique_ptr<PubkeyProvider> provider) : m_fingerprint(fingerprint), m_path(std::move(path)), m_provider(std::move(provider)) {}\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override { return m_provider->GetPubKey(pos, arg, out); }\n+    bool IsRange() const override { return m_provider->IsRange(); }\n+    size_t GetSize() const override { return m_provider->GetSize(); }\n+    std::string ToString() const override { return OriginString() + \":\" + m_provider->ToString(); }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& ret) const override\n+    {\n+        std::string sub;\n+        if (!m_provider->ToPrivateString(arg, sub)) return false;\n+        ret = OriginString() + \":\" + std::move(sub);\n+        return true;\n+    }\n+};\n+#endif",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 82,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "1b7c0c7fbd346109721197cefd4d464fc0bcae0b",
      "in_reply_to_id": 203379602,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done.",
      "created_at": "2018-07-18T19:26:28Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r203500850",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203500850"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 82,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203500890",
      "pull_request_review_id": 138403404,
      "id": 203500890,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzUwMDg5MA==",
      "diff_hunk": "@@ -0,0 +1,619 @@\n+// Copyright (c) 2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <script/descriptor.h>\n+\n+#include <key_io.h>\n+#include <pubkey.h>\n+#include <script/script.h>\n+#include <script/standard.h>\n+\n+#include <span.h>\n+#include <util.h>\n+#include <utilstrencodings.h>\n+\n+#include <memory>\n+#include <string>\n+#include <vector>\n+\n+namespace {\n+\n+////////////////////////////////////////////////////////////////////////////\n+// Internal representation                                                //\n+////////////////////////////////////////////////////////////////////////////\n+\n+typedef std::vector<uint32_t> KeyPath;\n+\n+/** Interface for public key objects in descriptors. */\n+struct PubkeyProvider {",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 29,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "1b7c0c7fbd346109721197cefd4d464fc0bcae0b",
      "in_reply_to_id": 203379927,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done.",
      "created_at": "2018-07-18T19:26:35Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r203500890",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203500890"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 29,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203500938",
      "pull_request_review_id": 138403484,
      "id": 203500938,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzUwMDkzOA==",
      "diff_hunk": "@@ -0,0 +1,619 @@\n+// Copyright (c) 2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <script/descriptor.h>\n+\n+#include <key_io.h>\n+#include <pubkey.h>\n+#include <script/script.h>\n+#include <script/standard.h>\n+\n+#include <span.h>\n+#include <util.h>\n+#include <utilstrencodings.h>\n+\n+#include <memory>\n+#include <string>\n+#include <vector>\n+\n+namespace {\n+\n+////////////////////////////////////////////////////////////////////////////\n+// Internal representation                                                //\n+////////////////////////////////////////////////////////////////////////////\n+\n+typedef std::vector<uint32_t> KeyPath;\n+\n+/** Interface for public key objects in descriptors. */\n+struct PubkeyProvider {\n+    virtual ~PubkeyProvider(){};",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 30,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "1b7c0c7fbd346109721197cefd4d464fc0bcae0b",
      "in_reply_to_id": 203380024,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done, here and elsewhere.",
      "created_at": "2018-07-18T19:26:47Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r203500938",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203500938"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 30,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203500981",
      "pull_request_review_id": 138403526,
      "id": 203500981,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzUwMDk4MQ==",
      "diff_hunk": "@@ -0,0 +1,619 @@\n+// Copyright (c) 2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <script/descriptor.h>\n+\n+#include <key_io.h>\n+#include <pubkey.h>\n+#include <script/script.h>\n+#include <script/standard.h>\n+\n+#include <span.h>\n+#include <util.h>\n+#include <utilstrencodings.h>\n+\n+#include <memory>\n+#include <string>\n+#include <vector>\n+\n+namespace {\n+\n+////////////////////////////////////////////////////////////////////////////\n+// Internal representation                                                //\n+////////////////////////////////////////////////////////////////////////////\n+\n+typedef std::vector<uint32_t> KeyPath;\n+\n+/** Interface for public key objects in descriptors. */\n+struct PubkeyProvider {\n+    virtual ~PubkeyProvider(){};\n+\n+    /** Derive a public key. */\n+    virtual bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const = 0;\n+\n+    /** Whether this represent multiple public keys at different positions. */\n+    virtual bool IsRange() const = 0;\n+\n+    /** Get the size of the generated public key(s) in bytes (33 or 65). */\n+    virtual size_t GetSize() const = 0;\n+\n+    /** Get the descriptor string form. */\n+    virtual std::string ToString() const = 0;\n+\n+    /** Get the descriptor string form including private data (if available in arg). */\n+    virtual bool ToPrivateString(const SigningProvider& arg, std::string& out) const = 0;\n+};\n+\n+#ifdef KEY_ORIGIN_SUPPORT\n+class OriginPubkeyProvider final : public PubkeyProvider\n+{\n+    uint32_t m_fingerprint;\n+    KeyPath m_path;\n+    std::unique_ptr<PubkeyProvider> m_provider;\n+\n+    std::string OriginString() const\n+    {\n+        std::string ret = strprintf(\"%08x\", m_fingerprint);\n+        for (uint32_t x : m_path) {\n+            if (x >> 31) {\n+                ret += strprintf(\"/%i'\", (x << 1) >> 1);\n+            } else {\n+                ret += strprintf(\"/%i\", x);\n+            }\n+        }\n+        return ret;\n+    }\n+\n+public:\n+    OriginPubkeyProvider(uint32_t fingerprint, KeyPath path, std::unique_ptr<PubkeyProvider> provider) : m_fingerprint(fingerprint), m_path(std::move(path)), m_provider(std::move(provider)) {}\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override { return m_provider->GetPubKey(pos, arg, out); }\n+    bool IsRange() const override { return m_provider->IsRange(); }\n+    size_t GetSize() const override { return m_provider->GetSize(); }\n+    std::string ToString() const override { return OriginString() + \":\" + m_provider->ToString(); }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& ret) const override\n+    {\n+        std::string sub;\n+        if (!m_provider->ToPrivateString(arg, sub)) return false;\n+        ret = OriginString() + \":\" + std::move(sub);\n+        return true;\n+    }\n+};\n+#endif\n+\n+/** An object representing a parsed constant public key in a descriptor. */\n+class ConstPubkeyProvider final : public PubkeyProvider\n+{\n+    CPubKey m_pubkey;\n+\n+public:\n+    ConstPubkeyProvider(const CPubKey& pubkey) : m_pubkey(pubkey) {}\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override\n+    {\n+        out = m_pubkey;\n+        return true;\n+    }\n+    bool IsRange() const override { return false; }\n+    size_t GetSize() const override { return m_pubkey.size(); }\n+    std::string ToString() const override { return HexStr(m_pubkey.begin(), m_pubkey.end()); }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& ret) const override\n+    {\n+        CKey key;\n+        if (!arg.GetKey(m_pubkey.GetID(), key)) return false;\n+        ret = EncodeSecret(key);\n+        return true;\n+    }\n+};\n+\n+enum class DeriveType {\n+    NO,\n+    UNHARDENED,\n+    HARDENED,\n+};\n+\n+/** An object representing a parsed extended public key in a descriptor. */\n+class BIP32PubkeyProvider final : public PubkeyProvider\n+{\n+    CExtPubKey m_extkey;\n+    KeyPath m_path;\n+    DeriveType m_derive;\n+\n+    bool GetExtKey(const SigningProvider& arg, CExtKey& ret) const\n+    {\n+        CKey key;\n+        if (!arg.GetKey(m_extkey.pubkey.GetID(), key)) return false;\n+        ret.nDepth = m_extkey.nDepth;\n+        std::copy(m_extkey.vchFingerprint, m_extkey.vchFingerprint + 4, ret.vchFingerprint);\n+        ret.nChild = m_extkey.nChild;\n+        ret.chaincode = m_extkey.chaincode;\n+        ret.key = key;\n+        return true;\n+    }\n+\n+    bool IsHardened() const\n+    {\n+        if (m_derive == DeriveType::HARDENED) return true;\n+        for (auto entry : m_path) {\n+            if (entry >> 31) return true;\n+        }\n+        return false;\n+    }\n+\n+public:\n+    BIP32PubkeyProvider(const CExtPubKey& extkey, KeyPath path, DeriveType derive) : m_extkey(extkey), m_path(std::move(path)), m_derive(derive) {}\n+    bool IsRange() const override { return m_derive != DeriveType::NO; }\n+    size_t GetSize() const override { return 33; }\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override\n+    {\n+        if (IsHardened()) {\n+            CExtKey key;\n+            if (!GetExtKey(arg, key)) return false;\n+            for (auto entry : m_path) {\n+                key.Derive(key, entry);\n+            }\n+            if (IsRange()) {\n+                key.Derive(key, pos | 0x80000000UL);\n+            }\n+            out = key.Neuter().pubkey;\n+        } else {\n+            // TODO: optimize by caching\n+            CExtPubKey key = m_extkey;\n+            for (auto entry : m_path) {\n+                key.Derive(key, entry);\n+            }\n+            if (IsRange()) {\n+                key.Derive(key, pos);\n+            }\n+            out = key.pubkey;\n+        }\n+        return true;\n+    }\n+    std::string ToString() const override\n+    {\n+        std::string ret = EncodeExtPubKey(m_extkey);\n+        for (auto entry : m_path) {\n+            ret += strprintf(\"/%i\", entry & 0x7FFFFFFFUL);\n+            if (entry >> 31) ret += '\\'';\n+        }\n+        if (IsRange()) {\n+            ret += \"/*\";\n+            if (m_derive == DeriveType::HARDENED) ret += '\\'';\n+        }\n+        return ret;\n+    }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        CExtKey key;\n+        if (!GetExtKey(arg, key)) return false;\n+        out = EncodeExtKey(key);\n+        for (auto entry : m_path) {\n+            out += strprintf(\"/%i\", entry & 0x7FFFFFFFUL);\n+            if (entry >> 31) out += '\\'';\n+        }\n+        if (IsRange()) {\n+            out += \"/*\";\n+            if (m_derive == DeriveType::HARDENED) out += '\\'';\n+        }\n+        return true;\n+    }\n+};\n+\n+/** A parsed addr(A) descriptor. */\n+class AddressDescriptor final : public Descriptor\n+{\n+    CTxDestination m_destination;\n+\n+public:\n+    AddressDescriptor(CTxDestination destination) : m_destination(std::move(destination)) {}\n+\n+    bool IsRange() const override { return false; }\n+    std::string ToString() const override { return \"addr(\" + EncodeDestination(m_destination) + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override { out = ToString(); return true; }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        output_scripts = std::vector<CScript>{GetScriptForDestination(m_destination)};\n+        return true;\n+    }\n+};\n+\n+/** A parsed raw(H) descriptor. */\n+class RawDescriptor final : public Descriptor\n+{\n+    CScript m_script;\n+\n+public:\n+    RawDescriptor(CScript script) : m_script(std::move(script)) {}\n+\n+    bool IsRange() const override { return false; }\n+    std::string ToString() const override { return \"raw(\" + HexStr(m_script.begin(), m_script.end()) + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override { out = ToString(); return true; }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        output_scripts = std::vector<CScript>{m_script};\n+        return true;\n+    }\n+};\n+\n+/** A parsed pk(P), pkh(P), or wpkh(P) descriptor. */\n+class SingleKeyDescriptor final : public Descriptor\n+{\n+    const std::function<CScript(const CPubKey&)> m_script_fn;\n+    const std::string m_fn_name;\n+    std::unique_ptr<PubkeyProvider> m_provider;\n+\n+public:\n+    SingleKeyDescriptor(std::unique_ptr<PubkeyProvider> prov, const std::function<CScript(const CPubKey&)>& fn, const std::string& name) : m_script_fn(fn), m_fn_name(name), m_provider(std::move(prov)) {}\n+\n+    bool IsRange() const override { return m_provider->IsRange(); }\n+    std::string ToString() const override { return m_fn_name + \"(\" + m_provider->ToString() + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret;\n+        if (!m_provider->ToPrivateString(arg, ret)) return false;\n+        out = m_fn_name + \"(\" + std::move(ret) + \")\";\n+        return true;\n+    }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        CPubKey key;\n+        if (!m_provider->GetPubKey(pos, arg, key)) return false;\n+        output_scripts = std::vector<CScript>{m_script_fn(key)};\n+        out.pubkeys.emplace(key.GetID(), std::move(key));\n+        return true;\n+    }\n+};\n+\n+CScript P2PKHGetScript(const CPubKey& pubkey) { return GetScriptForDestination(pubkey.GetID()); }\n+CScript P2PKGetScript(const CPubKey& pubkey) { return GetScriptForRawPubKey(pubkey); }\n+CScript P2WPKHGetScript(const CPubKey& pubkey) { return GetScriptForDestination(WitnessV0KeyHash(pubkey.GetID())); }\n+\n+/** A parsed multi(...) descriptor. */\n+class MultisigDescriptor : public Descriptor\n+{\n+    int m_threshold;\n+    std::vector<std::unique_ptr<PubkeyProvider>> m_providers;\n+\n+public:\n+    MultisigDescriptor(int threshold, std::vector<std::unique_ptr<PubkeyProvider>> providers) : m_threshold(threshold), m_providers(std::move(providers)) {}\n+\n+    bool IsRange() const override\n+    {\n+        for (const auto& p : m_providers) {\n+            if (p->IsRange()) return true;\n+        }\n+        return false;\n+    }\n+\n+    std::string ToString() const override\n+    {\n+        std::string ret = strprintf(\"multi(%i\", m_threshold);\n+        for (const auto& p : m_providers) {\n+            ret += \",\" + p->ToString();\n+        }\n+        return std::move(ret) + \")\";\n+    }\n+\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret = strprintf(\"multi(%i\", m_threshold);\n+        for (const auto& p : m_providers) {\n+            std::string sub;\n+            if (!p->ToPrivateString(arg, sub)) return false;\n+            ret += \",\" + std::move(sub);\n+        }\n+        out = std::move(ret) + \")\";\n+        return true;\n+    }\n+\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        std::vector<CPubKey> pubkeys;\n+        pubkeys.reserve(m_providers.size());\n+        for (const auto& p : m_providers) {\n+            CPubKey key;\n+            if (!p->GetPubKey(pos, arg, key)) return false;\n+            pubkeys.push_back(key);\n+        }\n+        for (const CPubKey& key : pubkeys) {\n+            out.pubkeys.emplace(key.GetID(), std::move(key));\n+        }\n+        output_scripts = std::vector<CScript>{GetScriptForMultisig(m_threshold, pubkeys)};\n+        return true;\n+    }\n+};\n+\n+/** A parsed sh(S) or wsh(S) descriptor. */\n+class ConvertorDescriptor : public Descriptor\n+{\n+    const std::function<CScript(const CScript&)> m_convert_fn;\n+    const std::string m_fn_name;\n+    std::unique_ptr<Descriptor> m_descriptor;\n+\n+public:\n+    ConvertorDescriptor(std::unique_ptr<Descriptor> descriptor, const std::function<CScript(const CScript&)>& fn, const std::string& name) : m_convert_fn(fn), m_fn_name(name), m_descriptor(std::move(descriptor)) {}\n+\n+    bool IsRange() const override { return m_descriptor->IsRange(); }\n+    std::string ToString() const override { return m_fn_name + \"(\" + m_descriptor->ToString() + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret;\n+        if (!m_descriptor->ToPrivateString(arg, ret)) return false;\n+        out = m_fn_name + \"(\" + std::move(ret) + \")\";\n+        return true;\n+    }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        std::vector<CScript> sub;\n+        if (!m_descriptor->Expand(pos, arg, sub, out)) return false;\n+        output_scripts.clear();\n+        for (const auto& script : sub) {\n+            CScriptID id(script);\n+            out.scripts.emplace(CScriptID(script), script);\n+            output_scripts.push_back(m_convert_fn(script));\n+        }\n+        return true;\n+    }\n+};\n+\n+CScript ConvertP2SH(const CScript& script) { return GetScriptForDestination(CScriptID(script)); }\n+CScript ConvertP2WSH(const CScript& script) { return GetScriptForDestination(WitnessV0ScriptHash(script)); }\n+\n+/** A parsed old(P) descriptor. */\n+class OldKeyDescriptor final : public Descriptor\n+{\n+    std::unique_ptr<PubkeyProvider> m_provider;\n+\n+public:\n+    OldKeyDescriptor(std::unique_ptr<PubkeyProvider> provider) : m_provider(std::move(provider)) {}\n+\n+    bool IsRange() const override { return m_provider->IsRange(); }\n+    std::string ToString() const override { return \"old(\" + m_provider->ToString() + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret;\n+        if (!m_provider->ToPrivateString(arg, ret)) return false;\n+        out = \"old(\" + std::move(ret) + \")\";\n+        return true;\n+    }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        CPubKey key;\n+        if (!m_provider->GetPubKey(pos, arg, key)) return false;\n+        CKeyID keyid = key.GetID();\n+        {\n+            CScript p2pk = GetScriptForRawPubKey(key);\n+            CScript p2pkh = GetScriptForDestination(keyid);\n+            output_scripts = std::vector<CScript>{std::move(p2pk), std::move(p2pkh)};\n+            out.pubkeys.emplace(keyid, key);\n+        }\n+        if (key.IsCompressed()) {\n+            CScript p2wpkh = GetScriptForDestination(WitnessV0KeyHash(keyid));\n+            CScriptID p2wpkh_id(p2wpkh);\n+            CScript p2sh_p2wpkh = GetScriptForDestination(p2wpkh_id);\n+            out.scripts.emplace(p2wpkh_id, p2wpkh);\n+            output_scripts.push_back(std::move(p2wpkh));\n+            output_scripts.push_back(std::move(p2sh_p2wpkh));\n+        }\n+        return true;\n+    }\n+};\n+\n+////////////////////////////////////////////////////////////////////////////\n+// Parser                                                                 //\n+////////////////////////////////////////////////////////////////////////////\n+\n+enum class ParseScriptContext {\n+    TOP,\n+    P2SH,\n+    P2WSH,\n+};\n+\n+/** Parse a constant. If succesful, sp is updated to skip the constant and return true. */\n+bool Const(const std::string& str, Span<const char>& sp)\n+{\n+    if ((size_t)sp.size() >= str.size() && std::equal(str.begin(), str.end(), sp.begin())) {\n+        sp = sp.subspan(str.size());\n+        return true;\n+    }\n+    return false;\n+}\n+\n+/** Parse a function call. If succesful, sp is updated to be the function's argument(s). */\n+bool Func(const std::string& str, Span<const char>& sp)\n+{\n+    if ((size_t)sp.size() >= str.size() + 2 && sp[str.size()] == '(' && sp[sp.size() - 1] == ')' && std::equal(str.begin(), str.end(), sp.begin())) {\n+        sp = sp.subspan(str.size() + 1, sp.size() - str.size() - 2);\n+        return true;\n+    }\n+    return false;\n+}\n+\n+/** Return the expression that sp begins with, and update sp to skip it. */\n+Span<const char> Expr(Span<const char>& sp)\n+{\n+    int level = 0;\n+    auto it = sp.begin();\n+    while (it != sp.end()) {\n+        if (*it == '(') {\n+            ++level;\n+        } else if (level && *it == ')') {\n+            --level;\n+        } else if (level == 0 && (*it == ')' || *it == ',')) {\n+            break;\n+        }\n+        ++it;\n+    }\n+    Span<const char> ret = sp.first(it - sp.begin());\n+    sp = sp.subspan(it - sp.begin());\n+    return ret;\n+}\n+\n+/** Split a string on every instance of sep, returning a vector. */\n+std::vector<Span<const char>> Split(const Span<const char>& sp, char sep)\n+{\n+    std::vector<Span<const char>> ret;\n+    auto it = sp.begin();\n+    auto start = it;\n+    while (it != sp.end()) {",
      "path": "src/script/descriptor.cpp",
      "position": 422,
      "original_position": 457,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "1b7c0c7fbd346109721197cefd4d464fc0bcae0b",
      "in_reply_to_id": 203426710,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Why?",
      "created_at": "2018-07-18T19:26:53Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r203500981",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203500981"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 422,
      "original_line": 422,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203501008",
      "pull_request_review_id": 138403563,
      "id": 203501008,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzUwMTAwOA==",
      "diff_hunk": "@@ -0,0 +1,619 @@\n+// Copyright (c) 2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <script/descriptor.h>\n+\n+#include <key_io.h>\n+#include <pubkey.h>\n+#include <script/script.h>\n+#include <script/standard.h>\n+\n+#include <span.h>\n+#include <util.h>\n+#include <utilstrencodings.h>\n+\n+#include <memory>\n+#include <string>\n+#include <vector>\n+\n+namespace {\n+\n+////////////////////////////////////////////////////////////////////////////\n+// Internal representation                                                //\n+////////////////////////////////////////////////////////////////////////////\n+\n+typedef std::vector<uint32_t> KeyPath;\n+\n+/** Interface for public key objects in descriptors. */\n+struct PubkeyProvider {\n+    virtual ~PubkeyProvider(){};\n+\n+    /** Derive a public key. */\n+    virtual bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const = 0;\n+\n+    /** Whether this represent multiple public keys at different positions. */\n+    virtual bool IsRange() const = 0;\n+\n+    /** Get the size of the generated public key(s) in bytes (33 or 65). */\n+    virtual size_t GetSize() const = 0;\n+\n+    /** Get the descriptor string form. */\n+    virtual std::string ToString() const = 0;\n+\n+    /** Get the descriptor string form including private data (if available in arg). */\n+    virtual bool ToPrivateString(const SigningProvider& arg, std::string& out) const = 0;\n+};\n+\n+#ifdef KEY_ORIGIN_SUPPORT\n+class OriginPubkeyProvider final : public PubkeyProvider\n+{\n+    uint32_t m_fingerprint;\n+    KeyPath m_path;\n+    std::unique_ptr<PubkeyProvider> m_provider;\n+\n+    std::string OriginString() const\n+    {\n+        std::string ret = strprintf(\"%08x\", m_fingerprint);\n+        for (uint32_t x : m_path) {\n+            if (x >> 31) {\n+                ret += strprintf(\"/%i'\", (x << 1) >> 1);\n+            } else {\n+                ret += strprintf(\"/%i\", x);\n+            }\n+        }\n+        return ret;\n+    }\n+\n+public:\n+    OriginPubkeyProvider(uint32_t fingerprint, KeyPath path, std::unique_ptr<PubkeyProvider> provider) : m_fingerprint(fingerprint), m_path(std::move(path)), m_provider(std::move(provider)) {}\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override { return m_provider->GetPubKey(pos, arg, out); }\n+    bool IsRange() const override { return m_provider->IsRange(); }\n+    size_t GetSize() const override { return m_provider->GetSize(); }\n+    std::string ToString() const override { return OriginString() + \":\" + m_provider->ToString(); }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& ret) const override\n+    {\n+        std::string sub;\n+        if (!m_provider->ToPrivateString(arg, sub)) return false;\n+        ret = OriginString() + \":\" + std::move(sub);\n+        return true;\n+    }\n+};\n+#endif\n+\n+/** An object representing a parsed constant public key in a descriptor. */\n+class ConstPubkeyProvider final : public PubkeyProvider\n+{\n+    CPubKey m_pubkey;\n+\n+public:\n+    ConstPubkeyProvider(const CPubKey& pubkey) : m_pubkey(pubkey) {}\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override\n+    {\n+        out = m_pubkey;\n+        return true;\n+    }\n+    bool IsRange() const override { return false; }\n+    size_t GetSize() const override { return m_pubkey.size(); }\n+    std::string ToString() const override { return HexStr(m_pubkey.begin(), m_pubkey.end()); }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& ret) const override\n+    {\n+        CKey key;\n+        if (!arg.GetKey(m_pubkey.GetID(), key)) return false;\n+        ret = EncodeSecret(key);\n+        return true;\n+    }\n+};\n+\n+enum class DeriveType {\n+    NO,\n+    UNHARDENED,\n+    HARDENED,\n+};\n+\n+/** An object representing a parsed extended public key in a descriptor. */\n+class BIP32PubkeyProvider final : public PubkeyProvider\n+{\n+    CExtPubKey m_extkey;\n+    KeyPath m_path;\n+    DeriveType m_derive;\n+\n+    bool GetExtKey(const SigningProvider& arg, CExtKey& ret) const\n+    {\n+        CKey key;\n+        if (!arg.GetKey(m_extkey.pubkey.GetID(), key)) return false;\n+        ret.nDepth = m_extkey.nDepth;\n+        std::copy(m_extkey.vchFingerprint, m_extkey.vchFingerprint + 4, ret.vchFingerprint);\n+        ret.nChild = m_extkey.nChild;\n+        ret.chaincode = m_extkey.chaincode;\n+        ret.key = key;\n+        return true;\n+    }\n+\n+    bool IsHardened() const\n+    {\n+        if (m_derive == DeriveType::HARDENED) return true;\n+        for (auto entry : m_path) {\n+            if (entry >> 31) return true;\n+        }\n+        return false;\n+    }\n+\n+public:\n+    BIP32PubkeyProvider(const CExtPubKey& extkey, KeyPath path, DeriveType derive) : m_extkey(extkey), m_path(std::move(path)), m_derive(derive) {}\n+    bool IsRange() const override { return m_derive != DeriveType::NO; }\n+    size_t GetSize() const override { return 33; }\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override\n+    {\n+        if (IsHardened()) {\n+            CExtKey key;\n+            if (!GetExtKey(arg, key)) return false;\n+            for (auto entry : m_path) {\n+                key.Derive(key, entry);\n+            }\n+            if (IsRange()) {\n+                key.Derive(key, pos | 0x80000000UL);\n+            }\n+            out = key.Neuter().pubkey;\n+        } else {\n+            // TODO: optimize by caching\n+            CExtPubKey key = m_extkey;\n+            for (auto entry : m_path) {\n+                key.Derive(key, entry);\n+            }\n+            if (IsRange()) {\n+                key.Derive(key, pos);\n+            }\n+            out = key.pubkey;\n+        }\n+        return true;\n+    }\n+    std::string ToString() const override\n+    {\n+        std::string ret = EncodeExtPubKey(m_extkey);\n+        for (auto entry : m_path) {\n+            ret += strprintf(\"/%i\", entry & 0x7FFFFFFFUL);\n+            if (entry >> 31) ret += '\\'';\n+        }\n+        if (IsRange()) {\n+            ret += \"/*\";\n+            if (m_derive == DeriveType::HARDENED) ret += '\\'';\n+        }\n+        return ret;\n+    }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        CExtKey key;\n+        if (!GetExtKey(arg, key)) return false;\n+        out = EncodeExtKey(key);\n+        for (auto entry : m_path) {\n+            out += strprintf(\"/%i\", entry & 0x7FFFFFFFUL);\n+            if (entry >> 31) out += '\\'';\n+        }\n+        if (IsRange()) {\n+            out += \"/*\";\n+            if (m_derive == DeriveType::HARDENED) out += '\\'';\n+        }\n+        return true;\n+    }\n+};\n+\n+/** A parsed addr(A) descriptor. */\n+class AddressDescriptor final : public Descriptor\n+{\n+    CTxDestination m_destination;\n+\n+public:\n+    AddressDescriptor(CTxDestination destination) : m_destination(std::move(destination)) {}\n+\n+    bool IsRange() const override { return false; }\n+    std::string ToString() const override { return \"addr(\" + EncodeDestination(m_destination) + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override { out = ToString(); return true; }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        output_scripts = std::vector<CScript>{GetScriptForDestination(m_destination)};\n+        return true;\n+    }\n+};\n+\n+/** A parsed raw(H) descriptor. */\n+class RawDescriptor final : public Descriptor\n+{\n+    CScript m_script;\n+\n+public:\n+    RawDescriptor(CScript script) : m_script(std::move(script)) {}\n+\n+    bool IsRange() const override { return false; }\n+    std::string ToString() const override { return \"raw(\" + HexStr(m_script.begin(), m_script.end()) + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override { out = ToString(); return true; }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        output_scripts = std::vector<CScript>{m_script};\n+        return true;\n+    }\n+};\n+\n+/** A parsed pk(P), pkh(P), or wpkh(P) descriptor. */\n+class SingleKeyDescriptor final : public Descriptor\n+{\n+    const std::function<CScript(const CPubKey&)> m_script_fn;\n+    const std::string m_fn_name;\n+    std::unique_ptr<PubkeyProvider> m_provider;\n+\n+public:\n+    SingleKeyDescriptor(std::unique_ptr<PubkeyProvider> prov, const std::function<CScript(const CPubKey&)>& fn, const std::string& name) : m_script_fn(fn), m_fn_name(name), m_provider(std::move(prov)) {}\n+\n+    bool IsRange() const override { return m_provider->IsRange(); }\n+    std::string ToString() const override { return m_fn_name + \"(\" + m_provider->ToString() + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret;\n+        if (!m_provider->ToPrivateString(arg, ret)) return false;\n+        out = m_fn_name + \"(\" + std::move(ret) + \")\";\n+        return true;\n+    }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        CPubKey key;\n+        if (!m_provider->GetPubKey(pos, arg, key)) return false;\n+        output_scripts = std::vector<CScript>{m_script_fn(key)};\n+        out.pubkeys.emplace(key.GetID(), std::move(key));\n+        return true;\n+    }\n+};\n+\n+CScript P2PKHGetScript(const CPubKey& pubkey) { return GetScriptForDestination(pubkey.GetID()); }\n+CScript P2PKGetScript(const CPubKey& pubkey) { return GetScriptForRawPubKey(pubkey); }\n+CScript P2WPKHGetScript(const CPubKey& pubkey) { return GetScriptForDestination(WitnessV0KeyHash(pubkey.GetID())); }\n+\n+/** A parsed multi(...) descriptor. */\n+class MultisigDescriptor : public Descriptor\n+{\n+    int m_threshold;\n+    std::vector<std::unique_ptr<PubkeyProvider>> m_providers;\n+\n+public:\n+    MultisigDescriptor(int threshold, std::vector<std::unique_ptr<PubkeyProvider>> providers) : m_threshold(threshold), m_providers(std::move(providers)) {}\n+\n+    bool IsRange() const override\n+    {\n+        for (const auto& p : m_providers) {\n+            if (p->IsRange()) return true;\n+        }\n+        return false;\n+    }\n+\n+    std::string ToString() const override\n+    {\n+        std::string ret = strprintf(\"multi(%i\", m_threshold);\n+        for (const auto& p : m_providers) {\n+            ret += \",\" + p->ToString();\n+        }\n+        return std::move(ret) + \")\";\n+    }\n+\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret = strprintf(\"multi(%i\", m_threshold);\n+        for (const auto& p : m_providers) {\n+            std::string sub;\n+            if (!p->ToPrivateString(arg, sub)) return false;\n+            ret += \",\" + std::move(sub);\n+        }\n+        out = std::move(ret) + \")\";\n+        return true;\n+    }\n+\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        std::vector<CPubKey> pubkeys;\n+        pubkeys.reserve(m_providers.size());\n+        for (const auto& p : m_providers) {\n+            CPubKey key;\n+            if (!p->GetPubKey(pos, arg, key)) return false;\n+            pubkeys.push_back(key);\n+        }\n+        for (const CPubKey& key : pubkeys) {\n+            out.pubkeys.emplace(key.GetID(), std::move(key));\n+        }\n+        output_scripts = std::vector<CScript>{GetScriptForMultisig(m_threshold, pubkeys)};\n+        return true;\n+    }\n+};\n+\n+/** A parsed sh(S) or wsh(S) descriptor. */\n+class ConvertorDescriptor : public Descriptor\n+{\n+    const std::function<CScript(const CScript&)> m_convert_fn;\n+    const std::string m_fn_name;\n+    std::unique_ptr<Descriptor> m_descriptor;\n+\n+public:\n+    ConvertorDescriptor(std::unique_ptr<Descriptor> descriptor, const std::function<CScript(const CScript&)>& fn, const std::string& name) : m_convert_fn(fn), m_fn_name(name), m_descriptor(std::move(descriptor)) {}\n+\n+    bool IsRange() const override { return m_descriptor->IsRange(); }\n+    std::string ToString() const override { return m_fn_name + \"(\" + m_descriptor->ToString() + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret;\n+        if (!m_descriptor->ToPrivateString(arg, ret)) return false;\n+        out = m_fn_name + \"(\" + std::move(ret) + \")\";\n+        return true;\n+    }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        std::vector<CScript> sub;\n+        if (!m_descriptor->Expand(pos, arg, sub, out)) return false;\n+        output_scripts.clear();\n+        for (const auto& script : sub) {\n+            CScriptID id(script);\n+            out.scripts.emplace(CScriptID(script), script);\n+            output_scripts.push_back(m_convert_fn(script));\n+        }\n+        return true;\n+    }\n+};\n+\n+CScript ConvertP2SH(const CScript& script) { return GetScriptForDestination(CScriptID(script)); }\n+CScript ConvertP2WSH(const CScript& script) { return GetScriptForDestination(WitnessV0ScriptHash(script)); }\n+\n+/** A parsed old(P) descriptor. */\n+class OldKeyDescriptor final : public Descriptor\n+{\n+    std::unique_ptr<PubkeyProvider> m_provider;\n+\n+public:\n+    OldKeyDescriptor(std::unique_ptr<PubkeyProvider> provider) : m_provider(std::move(provider)) {}\n+\n+    bool IsRange() const override { return m_provider->IsRange(); }\n+    std::string ToString() const override { return \"old(\" + m_provider->ToString() + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret;\n+        if (!m_provider->ToPrivateString(arg, ret)) return false;\n+        out = \"old(\" + std::move(ret) + \")\";\n+        return true;\n+    }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        CPubKey key;\n+        if (!m_provider->GetPubKey(pos, arg, key)) return false;\n+        CKeyID keyid = key.GetID();\n+        {\n+            CScript p2pk = GetScriptForRawPubKey(key);\n+            CScript p2pkh = GetScriptForDestination(keyid);\n+            output_scripts = std::vector<CScript>{std::move(p2pk), std::move(p2pkh)};\n+            out.pubkeys.emplace(keyid, key);\n+        }\n+        if (key.IsCompressed()) {\n+            CScript p2wpkh = GetScriptForDestination(WitnessV0KeyHash(keyid));\n+            CScriptID p2wpkh_id(p2wpkh);\n+            CScript p2sh_p2wpkh = GetScriptForDestination(p2wpkh_id);\n+            out.scripts.emplace(p2wpkh_id, p2wpkh);\n+            output_scripts.push_back(std::move(p2wpkh));\n+            output_scripts.push_back(std::move(p2sh_p2wpkh));\n+        }\n+        return true;\n+    }\n+};\n+\n+////////////////////////////////////////////////////////////////////////////\n+// Parser                                                                 //\n+////////////////////////////////////////////////////////////////////////////\n+\n+enum class ParseScriptContext {\n+    TOP,\n+    P2SH,\n+    P2WSH,\n+};\n+\n+/** Parse a constant. If succesful, sp is updated to skip the constant and return true. */\n+bool Const(const std::string& str, Span<const char>& sp)\n+{\n+    if ((size_t)sp.size() >= str.size() && std::equal(str.begin(), str.end(), sp.begin())) {\n+        sp = sp.subspan(str.size());\n+        return true;\n+    }\n+    return false;\n+}\n+\n+/** Parse a function call. If succesful, sp is updated to be the function's argument(s). */\n+bool Func(const std::string& str, Span<const char>& sp)\n+{\n+    if ((size_t)sp.size() >= str.size() + 2 && sp[str.size()] == '(' && sp[sp.size() - 1] == ')' && std::equal(str.begin(), str.end(), sp.begin())) {\n+        sp = sp.subspan(str.size() + 1, sp.size() - str.size() - 2);\n+        return true;\n+    }\n+    return false;\n+}\n+\n+/** Return the expression that sp begins with, and update sp to skip it. */\n+Span<const char> Expr(Span<const char>& sp)\n+{\n+    int level = 0;\n+    auto it = sp.begin();\n+    while (it != sp.end()) {\n+        if (*it == '(') {\n+            ++level;\n+        } else if (level && *it == ')') {\n+            --level;\n+        } else if (level == 0 && (*it == ')' || *it == ',')) {\n+            break;\n+        }\n+        ++it;\n+    }\n+    Span<const char> ret = sp.first(it - sp.begin());\n+    sp = sp.subspan(it - sp.begin());\n+    return ret;\n+}\n+\n+/** Split a string on every instance of sep, returning a vector. */\n+std::vector<Span<const char>> Split(const Span<const char>& sp, char sep)\n+{\n+    std::vector<Span<const char>> ret;\n+    auto it = sp.begin();\n+    auto start = it;\n+    while (it != sp.end()) {\n+        if (*it == sep) {\n+            ret.emplace_back(start, it);\n+            start = it + 1;\n+        }\n+        ++it;\n+    }\n+    ret.emplace_back(start, it);\n+    return ret;\n+}\n+\n+/** Parse a key path, being passed a split list of elements (the first element is ignored). */\n+bool ParseKeyPath(const std::vector<Span<const char>>& split, KeyPath& out)\n+{\n+    for (size_t i = 1; i < split.size(); ++i) {\n+        Span<const char> elem = split[i];\n+        bool hardened = false;\n+        if (elem.size() > 0 && elem[elem.size() - 1] == '\\'') {\n+            elem = elem.first(elem.size() - 1);\n+            hardened = true;\n+        }\n+        uint32_t p;\n+        if (!ParseUInt32(std::string(elem.begin(), elem.end()), &p) || p > 0x7FFFFFFFUL) return false;\n+        out.push_back(p | (((uint32_t)hardened) << 31));\n+    }\n+    return true;\n+}\n+\n+/** Parse a public key that excludes origin information. */\n+std::unique_ptr<PubkeyProvider> ParsePubkeyInner(const Span<const char>& sp, bool permit_uncompressed, FlatSigningProvider& out)\n+{\n+    auto split = Split(sp, '/');\n+    std::string str(split[0].begin(), split[0].end());\n+    if (split.size() == 1) {\n+        if (IsHex(str)) {\n+            std::vector<unsigned char> data = ParseHex(str);\n+            CPubKey pubkey(data);\n+            if (pubkey.IsFullyValid() && (permit_uncompressed || pubkey.IsCompressed())) return MakeUnique<ConstPubkeyProvider>(pubkey);\n+        }\n+        CKey key = DecodeSecret(str);\n+        if (key.IsValid() && (permit_uncompressed || key.IsCompressed())) {\n+            CPubKey pubkey = key.GetPubKey();\n+            out.keys.emplace(pubkey.GetID(), key);\n+            return MakeUnique<ConstPubkeyProvider>(pubkey);\n+        }\n+    }\n+    CExtKey extkey = DecodeExtKey(str);\n+    CExtPubKey extpubkey = DecodeExtPubKey(str);\n+    if (!extkey.key.IsValid() && !extpubkey.pubkey.IsValid()) return nullptr;\n+    KeyPath path;\n+    DeriveType type = DeriveType::NO;\n+    if (split.back() == MakeSpan(\"*\").first(1)) {\n+        split.pop_back();\n+        type = DeriveType::UNHARDENED;\n+    } else if (split.back() == MakeSpan(\"*'\").first(2)) {\n+        split.pop_back();\n+        type = DeriveType::HARDENED;\n+    }\n+    if (!ParseKeyPath(split, path)) return nullptr;\n+    if (extkey.key.IsValid()) {\n+        extpubkey = extkey.Neuter();\n+        out.keys.emplace(extpubkey.pubkey.GetID(), extkey.key);\n+    }\n+    return MakeUnique<BIP32PubkeyProvider>(extpubkey, std::move(path), type);\n+}\n+\n+/** Parse a public key including origin information (if enabled). */\n+std::unique_ptr<PubkeyProvider> ParsePubkey(const Span<const char>& sp, bool permit_uncompressed, FlatSigningProvider& out)\n+{\n+    auto colon_split = Split(sp, ':');\n+    if (colon_split.size() > 2) return nullptr;\n+    if (colon_split.size() == 1) return ParsePubkeyInner(colon_split[0], permit_uncompressed, out);\n+#ifdef KEY_ORIGIN_SUPPORT\n+    auto slash_split = Split(colon_split[0], '/');\n+    if (slash_split[0].size() != 8) return nullptr;\n+    std::string fpr_hex = std::string(slash_split[0].begin(), slash_split[0].end());\n+    if (!IsHex(fpr_hex)) return nullptr;\n+    auto fpr_bytes = ParseHex(fpr_hex);\n+    uint32_t fpr = ReadBE32(fpr_bytes.data());\n+    KeyPath path;\n+    if (!ParseKeyPath(slash_split, path)) return nullptr;\n+    auto provider = ParsePubkeyInner(colon_split[1], permit_uncompressed, out);\n+    if (!provider) return nullptr;\n+    return MakeUnique<OriginPubkeyProvider>(fpr, std::move(path), std::move(provider));\n+#else\n+    return nullptr;\n+#endif\n+}\n+\n+/** Parse a script in a particular context. */\n+std::unique_ptr<Descriptor> ParseScript(Span<const char>& sp, ParseScriptContext ctx, FlatSigningProvider& out)\n+{\n+    auto expr = Expr(sp);\n+    if (Func(\"pk\", expr)) {\n+        auto pubkey = ParsePubkey(expr, ctx != ParseScriptContext::P2WSH, out);\n+        if (pubkey) return MakeUnique<SingleKeyDescriptor>(std::move(pubkey), P2PKGetScript, \"pk\");\n+    }\n+    if (Func(\"pkh\", expr)) {\n+        auto pubkey = ParsePubkey(expr, ctx != ParseScriptContext::P2WSH, out);\n+        if (pubkey) return MakeUnique<SingleKeyDescriptor>(std::move(pubkey), P2PKHGetScript, \"pkh\");\n+    }\n+    if (ctx == ParseScriptContext::TOP && Func(\"old\", expr)) {\n+        auto pubkey = ParsePubkey(expr, true, out);\n+        if (pubkey) return MakeUnique<OldKeyDescriptor>(std::move(pubkey));\n+    }\n+    if (Func(\"multi\", expr)) {\n+        auto threshold = Expr(expr);\n+        uint32_t thres;\n+        std::vector<std::unique_ptr<PubkeyProvider>> providers;\n+        if (!ParseUInt32(std::string(threshold.begin(), threshold.end()), &thres)) return nullptr;\n+        size_t script_size = 0;\n+        while (expr.size()) {\n+            if (!Const(\",\", expr)) return nullptr;\n+            auto arg = Expr(expr);\n+            auto pk = ParsePubkey(arg, ctx != ParseScriptContext::P2WSH, out);\n+            if (!pk) return nullptr;\n+            script_size += pk->GetSize() + 1;\n+            providers.emplace_back(std::move(pk));\n+        }\n+        if (providers.size() < 1 || providers.size() > 16 || thres < 1 || thres > providers.size()) return nullptr;\n+        if (ctx == ParseScriptContext::TOP) {\n+            if (providers.size() > 3) return nullptr; // Not more than 3 pubkeys for raw multisig\n+        }\n+        if (ctx == ParseScriptContext::P2SH) {\n+            if (script_size + 3 > 520) return nullptr; // Enforce P2SH script size limit\n+        }\n+        return MakeUnique<MultisigDescriptor>(thres, std::move(providers));\n+    }\n+    if (ctx != ParseScriptContext::P2WSH && Func(\"wpkh\", expr)) {\n+        auto pubkey = ParsePubkey(expr, false, out);\n+        if (pubkey) return MakeUnique<SingleKeyDescriptor>(std::move(pubkey), P2WPKHGetScript, \"wpkh\");\n+    }\n+    if (ctx == ParseScriptContext::TOP && Func(\"sh\", expr)) {\n+        auto desc = ParseScript(expr, ParseScriptContext::P2SH, out);\n+        if (desc && expr.size() == 0) return MakeUnique<ConvertorDescriptor>(std::move(desc), ConvertP2SH, \"sh\");\n+    }\n+    if (ctx != ParseScriptContext::P2WSH && Func(\"wsh\", expr)) {\n+        auto desc = ParseScript(expr, ParseScriptContext::P2WSH, out);\n+        if (desc && expr.size() == 0) return MakeUnique<ConvertorDescriptor>(std::move(desc), ConvertP2WSH, \"wsh\");\n+    }\n+    if (ctx == ParseScriptContext::TOP && Func(\"addr\", expr)) {\n+        CTxDestination dest = DecodeDestination(std::string(expr.begin(), expr.end()));\n+        if (IsValidDestination(dest)) return MakeUnique<AddressDescriptor>(std::move(dest));\n+    }\n+    if (ctx == ParseScriptContext::TOP && Func(\"raw\", expr)) {\n+        std::string str(expr.begin(), expr.end());\n+        if (IsHex(str)) {\n+            auto bytes = ParseHex(str);\n+            return MakeUnique<RawDescriptor>(CScript(bytes.begin(), bytes.end()));\n+        }\n+    }\n+    return nullptr;\n+}\n+\n+} // namespace\n+\n+std::unique_ptr<Descriptor> Parse(const std::string& descriptor, FlatSigningProvider& out)\n+{\n+    Span<const char> sp(descriptor.data(), descriptor.size());\n+    auto ret = ParseScript(sp, ParseScriptContext::TOP, out);\n+    if (sp.size() == 0 && ret) return std::move(ret);",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 617,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "1b7c0c7fbd346109721197cefd4d464fc0bcae0b",
      "in_reply_to_id": 203436690,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed.",
      "created_at": "2018-07-18T19:27:01Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r203501008",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203501008"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 617,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203501110",
      "pull_request_review_id": 138403712,
      "id": 203501110,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzUwMTExMA==",
      "diff_hunk": "@@ -1984,67 +1985,36 @@ class CoinsViewScanReserver\n     }\n };\n \n-static const char *g_default_scantxoutset_script_types[] = { \"P2PKH\", \"P2SH_P2WPKH\", \"P2WPKH\" };\n-\n-enum class OutputScriptType {\n-    UNKNOWN,\n-    P2PK,\n-    P2PKH,\n-    P2SH_P2WPKH,\n-    P2WPKH\n-};\n-\n-static inline OutputScriptType GetOutputScriptTypeFromString(const std::string& outputtype)\n-{\n-    if (outputtype == \"P2PK\") return OutputScriptType::P2PK;\n-    else if (outputtype == \"P2PKH\") return OutputScriptType::P2PKH;\n-    else if (outputtype == \"P2SH_P2WPKH\") return OutputScriptType::P2SH_P2WPKH;\n-    else if (outputtype == \"P2WPKH\") return OutputScriptType::P2WPKH;\n-    else return OutputScriptType::UNKNOWN;\n-}\n-\n-CTxDestination GetDestinationForKey(const CPubKey& key, OutputScriptType type)\n-{\n-    switch (type) {\n-    case OutputScriptType::P2PKH: return key.GetID();\n-    case OutputScriptType::P2SH_P2WPKH:\n-    case OutputScriptType::P2WPKH: {\n-        if (!key.IsCompressed()) return key.GetID();\n-        CTxDestination witdest = WitnessV0KeyHash(key.GetID());\n-        if (type == OutputScriptType::P2SH_P2WPKH) {\n-            CScript witprog = GetScriptForDestination(witdest);\n-            return CScriptID(witprog);\n-        } else {\n-            return witdest;\n-        }\n-    }\n-    default: assert(false);\n-    }\n-}\n-\n UniValue scantxoutset(const JSONRPCRequest& request)\n {\n     if (request.fHelp || request.params.size() < 1 || request.params.size() > 2)\n         throw std::runtime_error(\n             \"scantxoutset <action> ( <scanobjects> )\\n\"\n-            \"\\nScans the unspent transaction output set for possible entries that matches common scripts of given public keys.\\n\"\n-            \"Using addresses as scanobjects will _not_ detect unspent P2PK txouts\\n\"\n+            \"\\nScans the unspent transaction output set for entries that match certain output descriptors.\\n\"\n+            \"Examples of output descriptors are:\\n\"\n+            \"    addr(<address>)                      Outputs whose scriptPubKey corresponds to the specified address (does not include P2PK)\\n\"\n+            \"    raw(<hex script>)                    Outputs whose scriptPubKey equals the specified hex scripts\\n\"\n+            \"    old(<pubkey>)                        P2PK, P2PKH, P2WPKH, and P2SH-P2WPKH outputs for the given pubkey\\n\"\n+            \"    pkh(<pubkey>)                        P2PKH outputs for the given pubkey\\n\"\n+            \"    sh(multi(<n>,<pubkey>,<pubkey>,...)) P2SH-multisig outputs for the given threshold and pubkeys\\n\"\n+            \"\\nIn the above, <pubkey> either refers to a fixed public key in hexadecimal notation, or to an xpub/xprv optionally followed by one\\n\"\n+            \"or more path elements separated by \\\"/\\\", and optionally ending in \\\"/*\\\" or \\\"/*'\\\" to specify all unhardened or hardened child keys.\\n\"\n+            \"In the latter case, a range needs to be specified by below if different from 1000.\\n\"\n+            \"For more information on output descriptors, see the documentation at TODO\\n\"\n             \"\\nArguments:\\n\"\n             \"1. \\\"action\\\"                       (string, required) The action to execute\\n\"\n             \"                                      \\\"start\\\" for starting a scan\\n\"\n             \"                                      \\\"abort\\\" for aborting the current scan (returns true when abort was successful)\\n\"\n             \"                                      \\\"status\\\" for progress report (in %) of the current scan\\n\"\n-            \"2. \\\"scanobjects\\\"                  (array, optional) Array of scan objects (only one object type per scan object allowed)\\n\"\n-            \"      [\\n\"\n-            \"        { \\\"address\\\" : \\\"<address>\\\" },       (string, optional) Bitcoin address\\n\"\n-            \"        { \\\"script\\\"  : \\\"<scriptPubKey>\\\" },  (string, optional) HEX encoded script (scriptPubKey)\\n\"\n-            \"        { \\\"pubkey\\\"  :                      (object, optional) Public key\\n\"\n-            \"          {\\n\"\n-            \"            \\\"pubkey\\\" : \\\"<pubkey\\\">,         (string, required) HEX encoded public key\\n\"\n-            \"            \\\"script_types\\\" : [ ... ],      (array, optional) Array of script-types to derive from the pubkey (possible values: \\\"P2PK\\\", \\\"P2PKH\\\", \\\"P2SH-P2WPKH\\\", \\\"P2WPKH\\\")\\n\"\n-            \"          }\\n\"\n+            \"2. \\\"scanobjects\\\"                  (array, required) Array of scan objects\\n\"\n+            \"    [                             Every scan object is either a string descriptor or an object:\\n\"\n+            \"        \\\"descriptor\\\",             (string, optional) An output descriptor\\n\"",
      "path": "src/rpc/blockchain.cpp",
      "position": 86,
      "original_position": 84,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "1b7c0c7fbd346109721197cefd4d464fc0bcae0b",
      "in_reply_to_id": 203443145,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It's pretty verbose to use the long form, and probably not all that often needed.",
      "created_at": "2018-07-18T19:27:27Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r203501110",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203501110"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 2013,
      "original_line": 2012,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203501180",
      "pull_request_review_id": 138403805,
      "id": 203501180,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzUwMTE4MA==",
      "diff_hunk": "@@ -2090,79 +2060,35 @@ UniValue scantxoutset(const JSONRPCRequest& request)\n \n         // loop through the scan objects\n         for (const UniValue& scanobject : request.params[1].get_array().getValues()) {\n-            if (!scanobject.isObject()) {\n-                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid scan object\");\n-            }\n-            UniValue address_uni = find_value(scanobject, \"address\");\n-            UniValue pubkey_uni  = find_value(scanobject, \"pubkey\");\n-            UniValue script_uni  = find_value(scanobject, \"script\");\n-\n-            // make sure only one object type is present\n-            if (1 != !address_uni.isNull() + !pubkey_uni.isNull() + !script_uni.isNull()) {\n-                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Only one object type is allowed per scan object\");\n-            } else if (!address_uni.isNull() && !address_uni.isStr()) {\n-                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Scanobject \\\"address\\\" must contain a single string as value\");\n-            } else if (!pubkey_uni.isNull() && !pubkey_uni.isObject()) {\n-                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Scanobject \\\"pubkey\\\" must contain an object as value\");\n-            } else if (!script_uni.isNull() && !script_uni.isStr()) {\n-                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Scanobject \\\"script\\\" must contain a single string as value\");\n-            } else if (address_uni.isStr()) {\n-                // type: address\n-                // decode destination and derive the scriptPubKey\n-                // add the script to the scan containers\n-                CTxDestination dest = DecodeDestination(address_uni.get_str());\n-                if (!IsValidDestination(dest)) {\n-                    throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid address\");\n-                }\n-                CScript script = GetScriptForDestination(dest);\n-                assert(!script.empty());\n-                needles.insert(script);\n-            } else if (pubkey_uni.isObject()) {\n-                // type: pubkey\n-                // derive script(s) according to the script_type parameter\n-                UniValue script_types_uni = find_value(pubkey_uni, \"script_types\");\n-                UniValue pubkeydata_uni = find_value(pubkey_uni, \"pubkey\");\n-\n-                // check the script types and use the default if not provided\n-                if (!script_types_uni.isNull() && !script_types_uni.isArray()) {\n-                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"script_types must be an array\");\n-                } else if (script_types_uni.isNull()) {\n-                    // use the default script types\n-                    script_types_uni = UniValue(UniValue::VARR);\n-                    for (const char *t : g_default_scantxoutset_script_types) {\n-                        script_types_uni.push_back(t);\n-                    }\n-                }\n-\n-                // check the acctual pubkey\n-                if (!pubkeydata_uni.isStr() || !IsHex(pubkeydata_uni.get_str())) {\n-                    throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Public key must be hex encoded\");\n-                }\n-                CPubKey pubkey(ParseHexV(pubkeydata_uni, \"pubkey\"));\n-                if (!pubkey.IsFullyValid()) {\n-                    throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid public key\");\n+            std::string desc_str;\n+            int range = 1000;\n+            if (scanobject.isStr()) {\n+                desc_str = scanobject.get_str();\n+            } else if (scanobject.isObject()) {\n+                UniValue desc_uni = find_value(scanobject, \"desc\");\n+                if (desc_uni.isNull()) throw JSONRPCError(RPC_INVALID_PARAMETER, \"Descriptor needs to be provided in scan object\");",
      "path": "src/rpc/blockchain.cpp",
      "position": 158,
      "original_position": 156,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "1b7c0c7fbd346109721197cefd4d464fc0bcae0b",
      "in_reply_to_id": 203443457,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes, will add when there's sufficient agreement about RPC.",
      "created_at": "2018-07-18T19:27:46Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r203501180",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203501180"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 2071,
      "original_line": 2070,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203501298",
      "pull_request_review_id": 138403956,
      "id": 203501298,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzUwMTI5OA==",
      "diff_hunk": "@@ -0,0 +1,619 @@\n+// Copyright (c) 2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <script/descriptor.h>\n+\n+#include <key_io.h>\n+#include <pubkey.h>\n+#include <script/script.h>\n+#include <script/standard.h>\n+\n+#include <span.h>\n+#include <util.h>\n+#include <utilstrencodings.h>\n+\n+#include <memory>\n+#include <string>\n+#include <vector>\n+\n+namespace {\n+\n+////////////////////////////////////////////////////////////////////////////\n+// Internal representation                                                //\n+////////////////////////////////////////////////////////////////////////////\n+\n+typedef std::vector<uint32_t> KeyPath;\n+\n+/** Interface for public key objects in descriptors. */\n+struct PubkeyProvider {\n+    virtual ~PubkeyProvider(){};\n+\n+    /** Derive a public key. */\n+    virtual bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const = 0;\n+\n+    /** Whether this represent multiple public keys at different positions. */\n+    virtual bool IsRange() const = 0;\n+\n+    /** Get the size of the generated public key(s) in bytes (33 or 65). */\n+    virtual size_t GetSize() const = 0;\n+\n+    /** Get the descriptor string form. */\n+    virtual std::string ToString() const = 0;\n+\n+    /** Get the descriptor string form including private data (if available in arg). */\n+    virtual bool ToPrivateString(const SigningProvider& arg, std::string& out) const = 0;\n+};\n+\n+#ifdef KEY_ORIGIN_SUPPORT\n+class OriginPubkeyProvider final : public PubkeyProvider\n+{\n+    uint32_t m_fingerprint;\n+    KeyPath m_path;\n+    std::unique_ptr<PubkeyProvider> m_provider;\n+\n+    std::string OriginString() const\n+    {\n+        std::string ret = strprintf(\"%08x\", m_fingerprint);\n+        for (uint32_t x : m_path) {\n+            if (x >> 31) {\n+                ret += strprintf(\"/%i'\", (x << 1) >> 1);\n+            } else {\n+                ret += strprintf(\"/%i\", x);\n+            }\n+        }\n+        return ret;\n+    }\n+\n+public:\n+    OriginPubkeyProvider(uint32_t fingerprint, KeyPath path, std::unique_ptr<PubkeyProvider> provider) : m_fingerprint(fingerprint), m_path(std::move(path)), m_provider(std::move(provider)) {}\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override { return m_provider->GetPubKey(pos, arg, out); }\n+    bool IsRange() const override { return m_provider->IsRange(); }\n+    size_t GetSize() const override { return m_provider->GetSize(); }\n+    std::string ToString() const override { return OriginString() + \":\" + m_provider->ToString(); }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& ret) const override\n+    {\n+        std::string sub;\n+        if (!m_provider->ToPrivateString(arg, sub)) return false;\n+        ret = OriginString() + \":\" + std::move(sub);\n+        return true;\n+    }\n+};\n+#endif\n+\n+/** An object representing a parsed constant public key in a descriptor. */\n+class ConstPubkeyProvider final : public PubkeyProvider\n+{\n+    CPubKey m_pubkey;\n+\n+public:\n+    ConstPubkeyProvider(const CPubKey& pubkey) : m_pubkey(pubkey) {}\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override\n+    {\n+        out = m_pubkey;\n+        return true;\n+    }\n+    bool IsRange() const override { return false; }\n+    size_t GetSize() const override { return m_pubkey.size(); }\n+    std::string ToString() const override { return HexStr(m_pubkey.begin(), m_pubkey.end()); }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& ret) const override\n+    {\n+        CKey key;\n+        if (!arg.GetKey(m_pubkey.GetID(), key)) return false;\n+        ret = EncodeSecret(key);\n+        return true;\n+    }\n+};\n+\n+enum class DeriveType {\n+    NO,\n+    UNHARDENED,\n+    HARDENED,\n+};\n+\n+/** An object representing a parsed extended public key in a descriptor. */\n+class BIP32PubkeyProvider final : public PubkeyProvider\n+{\n+    CExtPubKey m_extkey;\n+    KeyPath m_path;\n+    DeriveType m_derive;\n+\n+    bool GetExtKey(const SigningProvider& arg, CExtKey& ret) const\n+    {\n+        CKey key;\n+        if (!arg.GetKey(m_extkey.pubkey.GetID(), key)) return false;\n+        ret.nDepth = m_extkey.nDepth;\n+        std::copy(m_extkey.vchFingerprint, m_extkey.vchFingerprint + 4, ret.vchFingerprint);\n+        ret.nChild = m_extkey.nChild;\n+        ret.chaincode = m_extkey.chaincode;\n+        ret.key = key;\n+        return true;\n+    }\n+\n+    bool IsHardened() const\n+    {\n+        if (m_derive == DeriveType::HARDENED) return true;\n+        for (auto entry : m_path) {\n+            if (entry >> 31) return true;\n+        }\n+        return false;\n+    }\n+\n+public:\n+    BIP32PubkeyProvider(const CExtPubKey& extkey, KeyPath path, DeriveType derive) : m_extkey(extkey), m_path(std::move(path)), m_derive(derive) {}\n+    bool IsRange() const override { return m_derive != DeriveType::NO; }\n+    size_t GetSize() const override { return 33; }\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override\n+    {\n+        if (IsHardened()) {\n+            CExtKey key;\n+            if (!GetExtKey(arg, key)) return false;\n+            for (auto entry : m_path) {\n+                key.Derive(key, entry);\n+            }\n+            if (IsRange()) {\n+                key.Derive(key, pos | 0x80000000UL);\n+            }\n+            out = key.Neuter().pubkey;\n+        } else {\n+            // TODO: optimize by caching\n+            CExtPubKey key = m_extkey;\n+            for (auto entry : m_path) {\n+                key.Derive(key, entry);\n+            }\n+            if (IsRange()) {\n+                key.Derive(key, pos);\n+            }\n+            out = key.pubkey;\n+        }\n+        return true;\n+    }\n+    std::string ToString() const override\n+    {\n+        std::string ret = EncodeExtPubKey(m_extkey);\n+        for (auto entry : m_path) {\n+            ret += strprintf(\"/%i\", entry & 0x7FFFFFFFUL);\n+            if (entry >> 31) ret += '\\'';\n+        }\n+        if (IsRange()) {\n+            ret += \"/*\";\n+            if (m_derive == DeriveType::HARDENED) ret += '\\'';\n+        }\n+        return ret;\n+    }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        CExtKey key;\n+        if (!GetExtKey(arg, key)) return false;\n+        out = EncodeExtKey(key);\n+        for (auto entry : m_path) {\n+            out += strprintf(\"/%i\", entry & 0x7FFFFFFFUL);\n+            if (entry >> 31) out += '\\'';\n+        }\n+        if (IsRange()) {\n+            out += \"/*\";\n+            if (m_derive == DeriveType::HARDENED) out += '\\'';\n+        }\n+        return true;\n+    }\n+};\n+\n+/** A parsed addr(A) descriptor. */\n+class AddressDescriptor final : public Descriptor\n+{\n+    CTxDestination m_destination;\n+\n+public:\n+    AddressDescriptor(CTxDestination destination) : m_destination(std::move(destination)) {}\n+\n+    bool IsRange() const override { return false; }\n+    std::string ToString() const override { return \"addr(\" + EncodeDestination(m_destination) + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override { out = ToString(); return true; }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        output_scripts = std::vector<CScript>{GetScriptForDestination(m_destination)};\n+        return true;\n+    }\n+};\n+\n+/** A parsed raw(H) descriptor. */\n+class RawDescriptor final : public Descriptor\n+{\n+    CScript m_script;\n+\n+public:\n+    RawDescriptor(CScript script) : m_script(std::move(script)) {}\n+\n+    bool IsRange() const override { return false; }\n+    std::string ToString() const override { return \"raw(\" + HexStr(m_script.begin(), m_script.end()) + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override { out = ToString(); return true; }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        output_scripts = std::vector<CScript>{m_script};\n+        return true;\n+    }\n+};\n+\n+/** A parsed pk(P), pkh(P), or wpkh(P) descriptor. */\n+class SingleKeyDescriptor final : public Descriptor\n+{\n+    const std::function<CScript(const CPubKey&)> m_script_fn;\n+    const std::string m_fn_name;\n+    std::unique_ptr<PubkeyProvider> m_provider;\n+\n+public:\n+    SingleKeyDescriptor(std::unique_ptr<PubkeyProvider> prov, const std::function<CScript(const CPubKey&)>& fn, const std::string& name) : m_script_fn(fn), m_fn_name(name), m_provider(std::move(prov)) {}\n+\n+    bool IsRange() const override { return m_provider->IsRange(); }\n+    std::string ToString() const override { return m_fn_name + \"(\" + m_provider->ToString() + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret;\n+        if (!m_provider->ToPrivateString(arg, ret)) return false;\n+        out = m_fn_name + \"(\" + std::move(ret) + \")\";\n+        return true;\n+    }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        CPubKey key;\n+        if (!m_provider->GetPubKey(pos, arg, key)) return false;\n+        output_scripts = std::vector<CScript>{m_script_fn(key)};\n+        out.pubkeys.emplace(key.GetID(), std::move(key));\n+        return true;\n+    }\n+};\n+\n+CScript P2PKHGetScript(const CPubKey& pubkey) { return GetScriptForDestination(pubkey.GetID()); }\n+CScript P2PKGetScript(const CPubKey& pubkey) { return GetScriptForRawPubKey(pubkey); }\n+CScript P2WPKHGetScript(const CPubKey& pubkey) { return GetScriptForDestination(WitnessV0KeyHash(pubkey.GetID())); }\n+\n+/** A parsed multi(...) descriptor. */\n+class MultisigDescriptor : public Descriptor\n+{\n+    int m_threshold;\n+    std::vector<std::unique_ptr<PubkeyProvider>> m_providers;\n+\n+public:\n+    MultisigDescriptor(int threshold, std::vector<std::unique_ptr<PubkeyProvider>> providers) : m_threshold(threshold), m_providers(std::move(providers)) {}\n+\n+    bool IsRange() const override\n+    {\n+        for (const auto& p : m_providers) {\n+            if (p->IsRange()) return true;\n+        }\n+        return false;\n+    }\n+\n+    std::string ToString() const override\n+    {\n+        std::string ret = strprintf(\"multi(%i\", m_threshold);\n+        for (const auto& p : m_providers) {\n+            ret += \",\" + p->ToString();\n+        }\n+        return std::move(ret) + \")\";\n+    }\n+\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret = strprintf(\"multi(%i\", m_threshold);\n+        for (const auto& p : m_providers) {\n+            std::string sub;\n+            if (!p->ToPrivateString(arg, sub)) return false;\n+            ret += \",\" + std::move(sub);\n+        }\n+        out = std::move(ret) + \")\";\n+        return true;\n+    }\n+\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        std::vector<CPubKey> pubkeys;\n+        pubkeys.reserve(m_providers.size());\n+        for (const auto& p : m_providers) {\n+            CPubKey key;\n+            if (!p->GetPubKey(pos, arg, key)) return false;\n+            pubkeys.push_back(key);\n+        }\n+        for (const CPubKey& key : pubkeys) {\n+            out.pubkeys.emplace(key.GetID(), std::move(key));\n+        }\n+        output_scripts = std::vector<CScript>{GetScriptForMultisig(m_threshold, pubkeys)};\n+        return true;\n+    }\n+};\n+\n+/** A parsed sh(S) or wsh(S) descriptor. */\n+class ConvertorDescriptor : public Descriptor\n+{\n+    const std::function<CScript(const CScript&)> m_convert_fn;\n+    const std::string m_fn_name;\n+    std::unique_ptr<Descriptor> m_descriptor;\n+\n+public:\n+    ConvertorDescriptor(std::unique_ptr<Descriptor> descriptor, const std::function<CScript(const CScript&)>& fn, const std::string& name) : m_convert_fn(fn), m_fn_name(name), m_descriptor(std::move(descriptor)) {}\n+\n+    bool IsRange() const override { return m_descriptor->IsRange(); }\n+    std::string ToString() const override { return m_fn_name + \"(\" + m_descriptor->ToString() + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret;\n+        if (!m_descriptor->ToPrivateString(arg, ret)) return false;\n+        out = m_fn_name + \"(\" + std::move(ret) + \")\";\n+        return true;\n+    }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        std::vector<CScript> sub;\n+        if (!m_descriptor->Expand(pos, arg, sub, out)) return false;\n+        output_scripts.clear();\n+        for (const auto& script : sub) {\n+            CScriptID id(script);\n+            out.scripts.emplace(CScriptID(script), script);\n+            output_scripts.push_back(m_convert_fn(script));\n+        }\n+        return true;\n+    }\n+};\n+\n+CScript ConvertP2SH(const CScript& script) { return GetScriptForDestination(CScriptID(script)); }\n+CScript ConvertP2WSH(const CScript& script) { return GetScriptForDestination(WitnessV0ScriptHash(script)); }\n+\n+/** A parsed old(P) descriptor. */\n+class OldKeyDescriptor final : public Descriptor\n+{\n+    std::unique_ptr<PubkeyProvider> m_provider;\n+\n+public:\n+    OldKeyDescriptor(std::unique_ptr<PubkeyProvider> provider) : m_provider(std::move(provider)) {}\n+\n+    bool IsRange() const override { return m_provider->IsRange(); }\n+    std::string ToString() const override { return \"old(\" + m_provider->ToString() + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret;\n+        if (!m_provider->ToPrivateString(arg, ret)) return false;\n+        out = \"old(\" + std::move(ret) + \")\";\n+        return true;\n+    }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        CPubKey key;\n+        if (!m_provider->GetPubKey(pos, arg, key)) return false;\n+        CKeyID keyid = key.GetID();\n+        {\n+            CScript p2pk = GetScriptForRawPubKey(key);\n+            CScript p2pkh = GetScriptForDestination(keyid);\n+            output_scripts = std::vector<CScript>{std::move(p2pk), std::move(p2pkh)};\n+            out.pubkeys.emplace(keyid, key);\n+        }\n+        if (key.IsCompressed()) {\n+            CScript p2wpkh = GetScriptForDestination(WitnessV0KeyHash(keyid));\n+            CScriptID p2wpkh_id(p2wpkh);\n+            CScript p2sh_p2wpkh = GetScriptForDestination(p2wpkh_id);\n+            out.scripts.emplace(p2wpkh_id, p2wpkh);\n+            output_scripts.push_back(std::move(p2wpkh));\n+            output_scripts.push_back(std::move(p2sh_p2wpkh));\n+        }\n+        return true;\n+    }\n+};\n+\n+////////////////////////////////////////////////////////////////////////////\n+// Parser                                                                 //\n+////////////////////////////////////////////////////////////////////////////\n+\n+enum class ParseScriptContext {\n+    TOP,\n+    P2SH,\n+    P2WSH,\n+};\n+\n+/** Parse a constant. If succesful, sp is updated to skip the constant and return true. */\n+bool Const(const std::string& str, Span<const char>& sp)\n+{\n+    if ((size_t)sp.size() >= str.size() && std::equal(str.begin(), str.end(), sp.begin())) {\n+        sp = sp.subspan(str.size());\n+        return true;\n+    }\n+    return false;\n+}\n+\n+/** Parse a function call. If succesful, sp is updated to be the function's argument(s). */\n+bool Func(const std::string& str, Span<const char>& sp)\n+{\n+    if ((size_t)sp.size() >= str.size() + 2 && sp[str.size()] == '(' && sp[sp.size() - 1] == ')' && std::equal(str.begin(), str.end(), sp.begin())) {\n+        sp = sp.subspan(str.size() + 1, sp.size() - str.size() - 2);\n+        return true;\n+    }\n+    return false;\n+}\n+\n+/** Return the expression that sp begins with, and update sp to skip it. */\n+Span<const char> Expr(Span<const char>& sp)\n+{\n+    int level = 0;\n+    auto it = sp.begin();\n+    while (it != sp.end()) {\n+        if (*it == '(') {\n+            ++level;\n+        } else if (level && *it == ')') {\n+            --level;\n+        } else if (level == 0 && (*it == ')' || *it == ',')) {\n+            break;\n+        }\n+        ++it;\n+    }\n+    Span<const char> ret = sp.first(it - sp.begin());\n+    sp = sp.subspan(it - sp.begin());\n+    return ret;\n+}\n+\n+/** Split a string on every instance of sep, returning a vector. */\n+std::vector<Span<const char>> Split(const Span<const char>& sp, char sep)\n+{\n+    std::vector<Span<const char>> ret;\n+    auto it = sp.begin();\n+    auto start = it;\n+    while (it != sp.end()) {\n+        if (*it == sep) {\n+            ret.emplace_back(start, it);\n+            start = it + 1;\n+        }\n+        ++it;\n+    }\n+    ret.emplace_back(start, it);\n+    return ret;\n+}\n+\n+/** Parse a key path, being passed a split list of elements (the first element is ignored). */\n+bool ParseKeyPath(const std::vector<Span<const char>>& split, KeyPath& out)\n+{\n+    for (size_t i = 1; i < split.size(); ++i) {\n+        Span<const char> elem = split[i];\n+        bool hardened = false;\n+        if (elem.size() > 0 && elem[elem.size() - 1] == '\\'') {\n+            elem = elem.first(elem.size() - 1);\n+            hardened = true;\n+        }\n+        uint32_t p;\n+        if (!ParseUInt32(std::string(elem.begin(), elem.end()), &p) || p > 0x7FFFFFFFUL) return false;\n+        out.push_back(p | (((uint32_t)hardened) << 31));\n+    }\n+    return true;\n+}\n+\n+/** Parse a public key that excludes origin information. */\n+std::unique_ptr<PubkeyProvider> ParsePubkeyInner(const Span<const char>& sp, bool permit_uncompressed, FlatSigningProvider& out)\n+{\n+    auto split = Split(sp, '/');\n+    std::string str(split[0].begin(), split[0].end());\n+    if (split.size() == 1) {\n+        if (IsHex(str)) {\n+            std::vector<unsigned char> data = ParseHex(str);\n+            CPubKey pubkey(data);\n+            if (pubkey.IsFullyValid() && (permit_uncompressed || pubkey.IsCompressed())) return MakeUnique<ConstPubkeyProvider>(pubkey);\n+        }\n+        CKey key = DecodeSecret(str);\n+        if (key.IsValid() && (permit_uncompressed || key.IsCompressed())) {\n+            CPubKey pubkey = key.GetPubKey();\n+            out.keys.emplace(pubkey.GetID(), key);\n+            return MakeUnique<ConstPubkeyProvider>(pubkey);\n+        }\n+    }\n+    CExtKey extkey = DecodeExtKey(str);\n+    CExtPubKey extpubkey = DecodeExtPubKey(str);\n+    if (!extkey.key.IsValid() && !extpubkey.pubkey.IsValid()) return nullptr;\n+    KeyPath path;\n+    DeriveType type = DeriveType::NO;\n+    if (split.back() == MakeSpan(\"*\").first(1)) {\n+        split.pop_back();\n+        type = DeriveType::UNHARDENED;\n+    } else if (split.back() == MakeSpan(\"*'\").first(2)) {\n+        split.pop_back();\n+        type = DeriveType::HARDENED;\n+    }\n+    if (!ParseKeyPath(split, path)) return nullptr;\n+    if (extkey.key.IsValid()) {\n+        extpubkey = extkey.Neuter();\n+        out.keys.emplace(extpubkey.pubkey.GetID(), extkey.key);\n+    }\n+    return MakeUnique<BIP32PubkeyProvider>(extpubkey, std::move(path), type);\n+}\n+\n+/** Parse a public key including origin information (if enabled). */\n+std::unique_ptr<PubkeyProvider> ParsePubkey(const Span<const char>& sp, bool permit_uncompressed, FlatSigningProvider& out)\n+{\n+    auto colon_split = Split(sp, ':');\n+    if (colon_split.size() > 2) return nullptr;\n+    if (colon_split.size() == 1) return ParsePubkeyInner(colon_split[0], permit_uncompressed, out);\n+#ifdef KEY_ORIGIN_SUPPORT\n+    auto slash_split = Split(colon_split[0], '/');\n+    if (slash_split[0].size() != 8) return nullptr;\n+    std::string fpr_hex = std::string(slash_split[0].begin(), slash_split[0].end());\n+    if (!IsHex(fpr_hex)) return nullptr;\n+    auto fpr_bytes = ParseHex(fpr_hex);\n+    uint32_t fpr = ReadBE32(fpr_bytes.data());\n+    KeyPath path;\n+    if (!ParseKeyPath(slash_split, path)) return nullptr;\n+    auto provider = ParsePubkeyInner(colon_split[1], permit_uncompressed, out);\n+    if (!provider) return nullptr;\n+    return MakeUnique<OriginPubkeyProvider>(fpr, std::move(path), std::move(provider));\n+#else\n+    return nullptr;\n+#endif\n+}\n+\n+/** Parse a script in a particular context. */\n+std::unique_ptr<Descriptor> ParseScript(Span<const char>& sp, ParseScriptContext ctx, FlatSigningProvider& out)\n+{\n+    auto expr = Expr(sp);\n+    if (Func(\"pk\", expr)) {\n+        auto pubkey = ParsePubkey(expr, ctx != ParseScriptContext::P2WSH, out);\n+        if (pubkey) return MakeUnique<SingleKeyDescriptor>(std::move(pubkey), P2PKGetScript, \"pk\");\n+    }",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 553,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "1b7c0c7fbd346109721197cefd4d464fc0bcae0b",
      "in_reply_to_id": 203446922,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done,  here and elsewhere.",
      "created_at": "2018-07-18T19:28:10Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r203501298",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203501298"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 495,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203501337",
      "pull_request_review_id": 138404004,
      "id": 203501337,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzUwMTMzNw==",
      "diff_hunk": "@@ -0,0 +1,100 @@\n+// Copyright (c) 2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_SCRIPT_DESCRIPTOR_H\n+#define BITCOIN_SCRIPT_DESCRIPTOR_H\n+\n+#include <script/script.h>\n+#include <script/sign.h>\n+\n+#include <vector>\n+\n+// Descriptors are strings that describe a set of scriptPubKeys, together with\n+// all information necessary to solve them. By combining all information into\n+// one, they avoid the need to separately import keys and scripts.\n+//\n+// Descriptors may be ranged, which occurs when the public keys inside are\n+// specified in the form of HD chains (xpubs).\n+//\n+// Descriptors always represent public information - public keys and scripts -\n+// but in cases where private keys need to be conveyed along with a descriptor,\n+// they can be included inside by changing public keys to private keys (WIF\n+// format), and changing xpubs by xprvs.\n+//\n+// 1. Examples\n+//\n+// A P2PK descriptor with a fixed public key:\n+// - pk(0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798)\n+//\n+// A P2SH-P2WSH-P2PKH descriptor with a fixed public key:\n+// - sh(wsh(pkh(02e493dbf1c10d80f3581e4904930b1404cc6c13900ee0758474fa94abe8c4cd13)))\n+//\n+// A bare 1-of-2 multisig descriptor:\n+// - multi(1,022f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4,025cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc)\n+//\n+// A chain of P2PKH outputs (this needs the corresponding private key to derive):\n+// - pkh(xpub68Gmy5EdvgibQVfPdqkBBCHxA5htiqg55crXYuXoQRKfDBFA1WEjWgP6LHhwBZeNK1VTsfTFUHCdrfp1bgwQ9xv5ski8PX9rL2dZXvgGDnw/1'/2/*)\n+//\n+// 2. Grammar description:\n+//\n+// X: xpub or xprv encoded extended key\n+// I: decimal encoded integer\n+// H: Hex encoded byte array\n+// A: Address in P2PKH, P2SH, or Bech32 encoding\n+//\n+// S (Scripts):\n+// * pk(P): Pay-to-pubkey (P2PK) output for public key P.\n+// * pkh(P): Pay-to-pubkey-hash (P2PKH) output for public key P.\n+// * wpkh(P): Pay-to-witness-pubkey-hash (P2WPKH) output for public key P.\n+// * sh(S): Pay-to-script-hash (P2SH) output for script S\n+// * wsh(S): Pay-to-witness-script-hash (P2WSH) output for script S\n+// * old(P): combination of P2PK, P2PKH, P2WPKH, and P2SH-P2WPKH for public key P.\n+// * multi(I,L): k-of-n multisig for given public keys\n+// * addr(A): Output to address\n+// * raw(H): scriptPubKey with raw bytes\n+//\n+// P (Public keys):\n+// * H: fixed public key (or WIF-encoded private key)\n+// * E: extended public key\n+// * E/*: (ranged) all unhardened direct children of an extended public key\n+// * E/*': (ranged) all hardened direct children of an extended public key\n+//\n+// L (Comma-separated lists of public keys):\n+// * P\n+// * L,P\n+//\n+// E (Extended public keys):\n+// * X\n+// * E/I: unhardened child\n+// * E/I': hardened child\n+//\n+// The top level is S.\n+\n+/** Interface for parsed descriptor objects. */\n+struct Descriptor {\n+    virtual ~Descriptor() {}\n+\n+    /** Whether the expansion of this descriptor depends on the position. */\n+    virtual bool IsRange() const = 0;\n+\n+    /** Convert the descriptor back to a string, undoing parsing. */\n+    virtual std::string ToString() const = 0;\n+\n+    /** Convert the descriptor to a private string. This fails if the provided provider does not have the relevant private keys. */\n+    virtual bool ToPrivateString(const SigningProvider& provider, std::string& out) const = 0;\n+\n+    /** Expand a descriptor at a specified position.\n+     *\n+     * pos: the position at which to expand the descriptor. If IsRange() is false, this is ignored.\n+     * provider: the provider to query for private keys in case of hardened derivation.\n+     * output_script: the expanded scriptPubKeys will be put here.\n+     * out: scripts and public keys necessary for solving the expanded scriptPubKeys will be put here (may be equal to provider).\n+     */\n+    virtual bool Expand(int pos, const SigningProvider& provider, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const = 0;\n+};\n+\n+/** Parse a descriptor string. Included private keys are put in out. Returns nullptr if parsing fails. */\n+std::unique_ptr<Descriptor> Parse(const std::string& descriptor, FlatSigningProvider& out);\n+\n+#endif",
      "path": "src/script/descriptor.h",
      "position": null,
      "original_position": 100,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "1b7c0c7fbd346109721197cefd4d464fc0bcae0b",
      "in_reply_to_id": 203447244,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done.",
      "created_at": "2018-07-18T19:28:18Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r203501337",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203501337"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 100,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203517259",
      "pull_request_review_id": 138423920,
      "id": 203517259,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzUxNzI1OQ==",
      "diff_hunk": "@@ -0,0 +1,619 @@\n+// Copyright (c) 2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <script/descriptor.h>\n+\n+#include <key_io.h>\n+#include <pubkey.h>\n+#include <script/script.h>\n+#include <script/standard.h>\n+\n+#include <span.h>\n+#include <util.h>\n+#include <utilstrencodings.h>\n+\n+#include <memory>\n+#include <string>\n+#include <vector>\n+\n+namespace {\n+\n+////////////////////////////////////////////////////////////////////////////\n+// Internal representation                                                //\n+////////////////////////////////////////////////////////////////////////////\n+\n+typedef std::vector<uint32_t> KeyPath;\n+\n+/** Interface for public key objects in descriptors. */\n+struct PubkeyProvider {\n+    virtual ~PubkeyProvider(){};\n+\n+    /** Derive a public key. */\n+    virtual bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const = 0;\n+\n+    /** Whether this represent multiple public keys at different positions. */\n+    virtual bool IsRange() const = 0;\n+\n+    /** Get the size of the generated public key(s) in bytes (33 or 65). */\n+    virtual size_t GetSize() const = 0;\n+\n+    /** Get the descriptor string form. */\n+    virtual std::string ToString() const = 0;\n+\n+    /** Get the descriptor string form including private data (if available in arg). */\n+    virtual bool ToPrivateString(const SigningProvider& arg, std::string& out) const = 0;\n+};\n+\n+#ifdef KEY_ORIGIN_SUPPORT\n+class OriginPubkeyProvider final : public PubkeyProvider\n+{\n+    uint32_t m_fingerprint;\n+    KeyPath m_path;\n+    std::unique_ptr<PubkeyProvider> m_provider;\n+\n+    std::string OriginString() const\n+    {\n+        std::string ret = strprintf(\"%08x\", m_fingerprint);\n+        for (uint32_t x : m_path) {\n+            if (x >> 31) {\n+                ret += strprintf(\"/%i'\", (x << 1) >> 1);\n+            } else {\n+                ret += strprintf(\"/%i\", x);\n+            }\n+        }\n+        return ret;\n+    }\n+\n+public:\n+    OriginPubkeyProvider(uint32_t fingerprint, KeyPath path, std::unique_ptr<PubkeyProvider> provider) : m_fingerprint(fingerprint), m_path(std::move(path)), m_provider(std::move(provider)) {}\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override { return m_provider->GetPubKey(pos, arg, out); }\n+    bool IsRange() const override { return m_provider->IsRange(); }\n+    size_t GetSize() const override { return m_provider->GetSize(); }\n+    std::string ToString() const override { return OriginString() + \":\" + m_provider->ToString(); }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& ret) const override\n+    {\n+        std::string sub;\n+        if (!m_provider->ToPrivateString(arg, sub)) return false;\n+        ret = OriginString() + \":\" + std::move(sub);\n+        return true;\n+    }\n+};\n+#endif\n+\n+/** An object representing a parsed constant public key in a descriptor. */\n+class ConstPubkeyProvider final : public PubkeyProvider\n+{\n+    CPubKey m_pubkey;\n+\n+public:\n+    ConstPubkeyProvider(const CPubKey& pubkey) : m_pubkey(pubkey) {}\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override\n+    {\n+        out = m_pubkey;\n+        return true;\n+    }\n+    bool IsRange() const override { return false; }\n+    size_t GetSize() const override { return m_pubkey.size(); }\n+    std::string ToString() const override { return HexStr(m_pubkey.begin(), m_pubkey.end()); }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& ret) const override\n+    {\n+        CKey key;\n+        if (!arg.GetKey(m_pubkey.GetID(), key)) return false;\n+        ret = EncodeSecret(key);\n+        return true;\n+    }\n+};\n+\n+enum class DeriveType {\n+    NO,\n+    UNHARDENED,\n+    HARDENED,\n+};\n+\n+/** An object representing a parsed extended public key in a descriptor. */\n+class BIP32PubkeyProvider final : public PubkeyProvider\n+{\n+    CExtPubKey m_extkey;\n+    KeyPath m_path;\n+    DeriveType m_derive;\n+\n+    bool GetExtKey(const SigningProvider& arg, CExtKey& ret) const\n+    {\n+        CKey key;\n+        if (!arg.GetKey(m_extkey.pubkey.GetID(), key)) return false;\n+        ret.nDepth = m_extkey.nDepth;\n+        std::copy(m_extkey.vchFingerprint, m_extkey.vchFingerprint + 4, ret.vchFingerprint);\n+        ret.nChild = m_extkey.nChild;\n+        ret.chaincode = m_extkey.chaincode;\n+        ret.key = key;\n+        return true;\n+    }\n+\n+    bool IsHardened() const\n+    {\n+        if (m_derive == DeriveType::HARDENED) return true;\n+        for (auto entry : m_path) {\n+            if (entry >> 31) return true;\n+        }\n+        return false;\n+    }\n+\n+public:\n+    BIP32PubkeyProvider(const CExtPubKey& extkey, KeyPath path, DeriveType derive) : m_extkey(extkey), m_path(std::move(path)), m_derive(derive) {}\n+    bool IsRange() const override { return m_derive != DeriveType::NO; }\n+    size_t GetSize() const override { return 33; }\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override\n+    {\n+        if (IsHardened()) {\n+            CExtKey key;\n+            if (!GetExtKey(arg, key)) return false;\n+            for (auto entry : m_path) {\n+                key.Derive(key, entry);\n+            }\n+            if (IsRange()) {\n+                key.Derive(key, pos | 0x80000000UL);\n+            }\n+            out = key.Neuter().pubkey;\n+        } else {\n+            // TODO: optimize by caching\n+            CExtPubKey key = m_extkey;\n+            for (auto entry : m_path) {\n+                key.Derive(key, entry);\n+            }\n+            if (IsRange()) {\n+                key.Derive(key, pos);\n+            }\n+            out = key.pubkey;\n+        }\n+        return true;\n+    }\n+    std::string ToString() const override\n+    {\n+        std::string ret = EncodeExtPubKey(m_extkey);\n+        for (auto entry : m_path) {\n+            ret += strprintf(\"/%i\", entry & 0x7FFFFFFFUL);\n+            if (entry >> 31) ret += '\\'';\n+        }\n+        if (IsRange()) {\n+            ret += \"/*\";\n+            if (m_derive == DeriveType::HARDENED) ret += '\\'';\n+        }\n+        return ret;\n+    }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        CExtKey key;\n+        if (!GetExtKey(arg, key)) return false;\n+        out = EncodeExtKey(key);\n+        for (auto entry : m_path) {\n+            out += strprintf(\"/%i\", entry & 0x7FFFFFFFUL);\n+            if (entry >> 31) out += '\\'';\n+        }\n+        if (IsRange()) {\n+            out += \"/*\";\n+            if (m_derive == DeriveType::HARDENED) out += '\\'';\n+        }\n+        return true;\n+    }\n+};\n+\n+/** A parsed addr(A) descriptor. */\n+class AddressDescriptor final : public Descriptor\n+{\n+    CTxDestination m_destination;\n+\n+public:\n+    AddressDescriptor(CTxDestination destination) : m_destination(std::move(destination)) {}\n+\n+    bool IsRange() const override { return false; }\n+    std::string ToString() const override { return \"addr(\" + EncodeDestination(m_destination) + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override { out = ToString(); return true; }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        output_scripts = std::vector<CScript>{GetScriptForDestination(m_destination)};\n+        return true;\n+    }\n+};\n+\n+/** A parsed raw(H) descriptor. */\n+class RawDescriptor final : public Descriptor\n+{\n+    CScript m_script;\n+\n+public:\n+    RawDescriptor(CScript script) : m_script(std::move(script)) {}\n+\n+    bool IsRange() const override { return false; }\n+    std::string ToString() const override { return \"raw(\" + HexStr(m_script.begin(), m_script.end()) + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override { out = ToString(); return true; }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        output_scripts = std::vector<CScript>{m_script};\n+        return true;\n+    }\n+};\n+\n+/** A parsed pk(P), pkh(P), or wpkh(P) descriptor. */\n+class SingleKeyDescriptor final : public Descriptor\n+{\n+    const std::function<CScript(const CPubKey&)> m_script_fn;\n+    const std::string m_fn_name;\n+    std::unique_ptr<PubkeyProvider> m_provider;\n+\n+public:\n+    SingleKeyDescriptor(std::unique_ptr<PubkeyProvider> prov, const std::function<CScript(const CPubKey&)>& fn, const std::string& name) : m_script_fn(fn), m_fn_name(name), m_provider(std::move(prov)) {}\n+\n+    bool IsRange() const override { return m_provider->IsRange(); }\n+    std::string ToString() const override { return m_fn_name + \"(\" + m_provider->ToString() + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret;\n+        if (!m_provider->ToPrivateString(arg, ret)) return false;\n+        out = m_fn_name + \"(\" + std::move(ret) + \")\";\n+        return true;\n+    }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        CPubKey key;\n+        if (!m_provider->GetPubKey(pos, arg, key)) return false;\n+        output_scripts = std::vector<CScript>{m_script_fn(key)};\n+        out.pubkeys.emplace(key.GetID(), std::move(key));\n+        return true;\n+    }\n+};\n+\n+CScript P2PKHGetScript(const CPubKey& pubkey) { return GetScriptForDestination(pubkey.GetID()); }\n+CScript P2PKGetScript(const CPubKey& pubkey) { return GetScriptForRawPubKey(pubkey); }\n+CScript P2WPKHGetScript(const CPubKey& pubkey) { return GetScriptForDestination(WitnessV0KeyHash(pubkey.GetID())); }\n+\n+/** A parsed multi(...) descriptor. */\n+class MultisigDescriptor : public Descriptor\n+{\n+    int m_threshold;\n+    std::vector<std::unique_ptr<PubkeyProvider>> m_providers;\n+\n+public:\n+    MultisigDescriptor(int threshold, std::vector<std::unique_ptr<PubkeyProvider>> providers) : m_threshold(threshold), m_providers(std::move(providers)) {}\n+\n+    bool IsRange() const override\n+    {\n+        for (const auto& p : m_providers) {\n+            if (p->IsRange()) return true;\n+        }\n+        return false;\n+    }\n+\n+    std::string ToString() const override\n+    {\n+        std::string ret = strprintf(\"multi(%i\", m_threshold);\n+        for (const auto& p : m_providers) {\n+            ret += \",\" + p->ToString();\n+        }\n+        return std::move(ret) + \")\";\n+    }\n+\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret = strprintf(\"multi(%i\", m_threshold);\n+        for (const auto& p : m_providers) {\n+            std::string sub;\n+            if (!p->ToPrivateString(arg, sub)) return false;\n+            ret += \",\" + std::move(sub);\n+        }\n+        out = std::move(ret) + \")\";\n+        return true;\n+    }\n+\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        std::vector<CPubKey> pubkeys;\n+        pubkeys.reserve(m_providers.size());\n+        for (const auto& p : m_providers) {\n+            CPubKey key;\n+            if (!p->GetPubKey(pos, arg, key)) return false;\n+            pubkeys.push_back(key);\n+        }\n+        for (const CPubKey& key : pubkeys) {\n+            out.pubkeys.emplace(key.GetID(), std::move(key));\n+        }\n+        output_scripts = std::vector<CScript>{GetScriptForMultisig(m_threshold, pubkeys)};\n+        return true;\n+    }\n+};\n+\n+/** A parsed sh(S) or wsh(S) descriptor. */\n+class ConvertorDescriptor : public Descriptor\n+{\n+    const std::function<CScript(const CScript&)> m_convert_fn;\n+    const std::string m_fn_name;\n+    std::unique_ptr<Descriptor> m_descriptor;\n+\n+public:\n+    ConvertorDescriptor(std::unique_ptr<Descriptor> descriptor, const std::function<CScript(const CScript&)>& fn, const std::string& name) : m_convert_fn(fn), m_fn_name(name), m_descriptor(std::move(descriptor)) {}\n+\n+    bool IsRange() const override { return m_descriptor->IsRange(); }\n+    std::string ToString() const override { return m_fn_name + \"(\" + m_descriptor->ToString() + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret;\n+        if (!m_descriptor->ToPrivateString(arg, ret)) return false;\n+        out = m_fn_name + \"(\" + std::move(ret) + \")\";\n+        return true;\n+    }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        std::vector<CScript> sub;\n+        if (!m_descriptor->Expand(pos, arg, sub, out)) return false;\n+        output_scripts.clear();\n+        for (const auto& script : sub) {\n+            CScriptID id(script);\n+            out.scripts.emplace(CScriptID(script), script);\n+            output_scripts.push_back(m_convert_fn(script));\n+        }\n+        return true;\n+    }\n+};\n+\n+CScript ConvertP2SH(const CScript& script) { return GetScriptForDestination(CScriptID(script)); }\n+CScript ConvertP2WSH(const CScript& script) { return GetScriptForDestination(WitnessV0ScriptHash(script)); }\n+\n+/** A parsed old(P) descriptor. */\n+class OldKeyDescriptor final : public Descriptor\n+{\n+    std::unique_ptr<PubkeyProvider> m_provider;\n+\n+public:\n+    OldKeyDescriptor(std::unique_ptr<PubkeyProvider> provider) : m_provider(std::move(provider)) {}\n+\n+    bool IsRange() const override { return m_provider->IsRange(); }\n+    std::string ToString() const override { return \"old(\" + m_provider->ToString() + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret;\n+        if (!m_provider->ToPrivateString(arg, ret)) return false;\n+        out = \"old(\" + std::move(ret) + \")\";\n+        return true;\n+    }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        CPubKey key;\n+        if (!m_provider->GetPubKey(pos, arg, key)) return false;\n+        CKeyID keyid = key.GetID();\n+        {\n+            CScript p2pk = GetScriptForRawPubKey(key);\n+            CScript p2pkh = GetScriptForDestination(keyid);\n+            output_scripts = std::vector<CScript>{std::move(p2pk), std::move(p2pkh)};\n+            out.pubkeys.emplace(keyid, key);\n+        }\n+        if (key.IsCompressed()) {\n+            CScript p2wpkh = GetScriptForDestination(WitnessV0KeyHash(keyid));\n+            CScriptID p2wpkh_id(p2wpkh);\n+            CScript p2sh_p2wpkh = GetScriptForDestination(p2wpkh_id);\n+            out.scripts.emplace(p2wpkh_id, p2wpkh);\n+            output_scripts.push_back(std::move(p2wpkh));\n+            output_scripts.push_back(std::move(p2sh_p2wpkh));\n+        }\n+        return true;\n+    }\n+};\n+\n+////////////////////////////////////////////////////////////////////////////\n+// Parser                                                                 //\n+////////////////////////////////////////////////////////////////////////////\n+\n+enum class ParseScriptContext {\n+    TOP,\n+    P2SH,\n+    P2WSH,\n+};\n+\n+/** Parse a constant. If succesful, sp is updated to skip the constant and return true. */\n+bool Const(const std::string& str, Span<const char>& sp)\n+{\n+    if ((size_t)sp.size() >= str.size() && std::equal(str.begin(), str.end(), sp.begin())) {\n+        sp = sp.subspan(str.size());\n+        return true;\n+    }\n+    return false;\n+}\n+\n+/** Parse a function call. If succesful, sp is updated to be the function's argument(s). */\n+bool Func(const std::string& str, Span<const char>& sp)\n+{\n+    if ((size_t)sp.size() >= str.size() + 2 && sp[str.size()] == '(' && sp[sp.size() - 1] == ')' && std::equal(str.begin(), str.end(), sp.begin())) {\n+        sp = sp.subspan(str.size() + 1, sp.size() - str.size() - 2);\n+        return true;\n+    }\n+    return false;\n+}\n+\n+/** Return the expression that sp begins with, and update sp to skip it. */\n+Span<const char> Expr(Span<const char>& sp)\n+{\n+    int level = 0;\n+    auto it = sp.begin();\n+    while (it != sp.end()) {\n+        if (*it == '(') {\n+            ++level;\n+        } else if (level && *it == ')') {\n+            --level;\n+        } else if (level == 0 && (*it == ')' || *it == ',')) {\n+            break;\n+        }\n+        ++it;\n+    }\n+    Span<const char> ret = sp.first(it - sp.begin());\n+    sp = sp.subspan(it - sp.begin());\n+    return ret;\n+}\n+\n+/** Split a string on every instance of sep, returning a vector. */\n+std::vector<Span<const char>> Split(const Span<const char>& sp, char sep)\n+{\n+    std::vector<Span<const char>> ret;\n+    auto it = sp.begin();\n+    auto start = it;\n+    while (it != sp.end()) {",
      "path": "src/script/descriptor.cpp",
      "position": 422,
      "original_position": 457,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "1b7c0c7fbd346109721197cefd4d464fc0bcae0b",
      "in_reply_to_id": 203426710,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "The statement `ret.emplace_back(start, it);` below should not be executed if `sp` is empty.",
      "created_at": "2018-07-18T20:25:19Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r203517259",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203517259"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 422,
      "original_line": 422,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203517440",
      "pull_request_review_id": 138424121,
      "id": 203517440,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzUxNzQ0MA==",
      "diff_hunk": "@@ -0,0 +1,619 @@\n+// Copyright (c) 2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <script/descriptor.h>\n+\n+#include <key_io.h>\n+#include <pubkey.h>\n+#include <script/script.h>\n+#include <script/standard.h>\n+\n+#include <span.h>\n+#include <util.h>\n+#include <utilstrencodings.h>\n+\n+#include <memory>\n+#include <string>\n+#include <vector>\n+\n+namespace {\n+\n+////////////////////////////////////////////////////////////////////////////\n+// Internal representation                                                //\n+////////////////////////////////////////////////////////////////////////////\n+\n+typedef std::vector<uint32_t> KeyPath;\n+\n+/** Interface for public key objects in descriptors. */\n+struct PubkeyProvider {\n+    virtual ~PubkeyProvider(){};\n+\n+    /** Derive a public key. */\n+    virtual bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const = 0;\n+\n+    /** Whether this represent multiple public keys at different positions. */\n+    virtual bool IsRange() const = 0;\n+\n+    /** Get the size of the generated public key(s) in bytes (33 or 65). */\n+    virtual size_t GetSize() const = 0;\n+\n+    /** Get the descriptor string form. */\n+    virtual std::string ToString() const = 0;\n+\n+    /** Get the descriptor string form including private data (if available in arg). */\n+    virtual bool ToPrivateString(const SigningProvider& arg, std::string& out) const = 0;\n+};\n+\n+#ifdef KEY_ORIGIN_SUPPORT\n+class OriginPubkeyProvider final : public PubkeyProvider\n+{\n+    uint32_t m_fingerprint;\n+    KeyPath m_path;\n+    std::unique_ptr<PubkeyProvider> m_provider;\n+\n+    std::string OriginString() const\n+    {\n+        std::string ret = strprintf(\"%08x\", m_fingerprint);\n+        for (uint32_t x : m_path) {\n+            if (x >> 31) {\n+                ret += strprintf(\"/%i'\", (x << 1) >> 1);\n+            } else {\n+                ret += strprintf(\"/%i\", x);\n+            }\n+        }\n+        return ret;\n+    }\n+\n+public:\n+    OriginPubkeyProvider(uint32_t fingerprint, KeyPath path, std::unique_ptr<PubkeyProvider> provider) : m_fingerprint(fingerprint), m_path(std::move(path)), m_provider(std::move(provider)) {}\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override { return m_provider->GetPubKey(pos, arg, out); }\n+    bool IsRange() const override { return m_provider->IsRange(); }\n+    size_t GetSize() const override { return m_provider->GetSize(); }\n+    std::string ToString() const override { return OriginString() + \":\" + m_provider->ToString(); }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& ret) const override\n+    {\n+        std::string sub;\n+        if (!m_provider->ToPrivateString(arg, sub)) return false;\n+        ret = OriginString() + \":\" + std::move(sub);\n+        return true;\n+    }\n+};\n+#endif\n+\n+/** An object representing a parsed constant public key in a descriptor. */\n+class ConstPubkeyProvider final : public PubkeyProvider\n+{\n+    CPubKey m_pubkey;\n+\n+public:\n+    ConstPubkeyProvider(const CPubKey& pubkey) : m_pubkey(pubkey) {}\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override\n+    {\n+        out = m_pubkey;\n+        return true;\n+    }\n+    bool IsRange() const override { return false; }\n+    size_t GetSize() const override { return m_pubkey.size(); }\n+    std::string ToString() const override { return HexStr(m_pubkey.begin(), m_pubkey.end()); }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& ret) const override\n+    {\n+        CKey key;\n+        if (!arg.GetKey(m_pubkey.GetID(), key)) return false;\n+        ret = EncodeSecret(key);\n+        return true;\n+    }\n+};\n+\n+enum class DeriveType {\n+    NO,\n+    UNHARDENED,\n+    HARDENED,\n+};\n+\n+/** An object representing a parsed extended public key in a descriptor. */\n+class BIP32PubkeyProvider final : public PubkeyProvider\n+{\n+    CExtPubKey m_extkey;\n+    KeyPath m_path;\n+    DeriveType m_derive;\n+\n+    bool GetExtKey(const SigningProvider& arg, CExtKey& ret) const\n+    {\n+        CKey key;\n+        if (!arg.GetKey(m_extkey.pubkey.GetID(), key)) return false;\n+        ret.nDepth = m_extkey.nDepth;\n+        std::copy(m_extkey.vchFingerprint, m_extkey.vchFingerprint + 4, ret.vchFingerprint);\n+        ret.nChild = m_extkey.nChild;\n+        ret.chaincode = m_extkey.chaincode;\n+        ret.key = key;\n+        return true;\n+    }\n+\n+    bool IsHardened() const\n+    {\n+        if (m_derive == DeriveType::HARDENED) return true;\n+        for (auto entry : m_path) {\n+            if (entry >> 31) return true;\n+        }\n+        return false;\n+    }\n+\n+public:\n+    BIP32PubkeyProvider(const CExtPubKey& extkey, KeyPath path, DeriveType derive) : m_extkey(extkey), m_path(std::move(path)), m_derive(derive) {}\n+    bool IsRange() const override { return m_derive != DeriveType::NO; }\n+    size_t GetSize() const override { return 33; }\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override\n+    {\n+        if (IsHardened()) {\n+            CExtKey key;\n+            if (!GetExtKey(arg, key)) return false;\n+            for (auto entry : m_path) {\n+                key.Derive(key, entry);\n+            }\n+            if (IsRange()) {\n+                key.Derive(key, pos | 0x80000000UL);\n+            }\n+            out = key.Neuter().pubkey;\n+        } else {\n+            // TODO: optimize by caching\n+            CExtPubKey key = m_extkey;\n+            for (auto entry : m_path) {\n+                key.Derive(key, entry);\n+            }\n+            if (IsRange()) {\n+                key.Derive(key, pos);\n+            }\n+            out = key.pubkey;\n+        }\n+        return true;\n+    }\n+    std::string ToString() const override\n+    {\n+        std::string ret = EncodeExtPubKey(m_extkey);\n+        for (auto entry : m_path) {\n+            ret += strprintf(\"/%i\", entry & 0x7FFFFFFFUL);\n+            if (entry >> 31) ret += '\\'';\n+        }\n+        if (IsRange()) {\n+            ret += \"/*\";\n+            if (m_derive == DeriveType::HARDENED) ret += '\\'';\n+        }\n+        return ret;\n+    }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        CExtKey key;\n+        if (!GetExtKey(arg, key)) return false;\n+        out = EncodeExtKey(key);\n+        for (auto entry : m_path) {\n+            out += strprintf(\"/%i\", entry & 0x7FFFFFFFUL);\n+            if (entry >> 31) out += '\\'';\n+        }\n+        if (IsRange()) {\n+            out += \"/*\";\n+            if (m_derive == DeriveType::HARDENED) out += '\\'';\n+        }\n+        return true;\n+    }\n+};\n+\n+/** A parsed addr(A) descriptor. */\n+class AddressDescriptor final : public Descriptor\n+{\n+    CTxDestination m_destination;\n+\n+public:\n+    AddressDescriptor(CTxDestination destination) : m_destination(std::move(destination)) {}\n+\n+    bool IsRange() const override { return false; }\n+    std::string ToString() const override { return \"addr(\" + EncodeDestination(m_destination) + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override { out = ToString(); return true; }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        output_scripts = std::vector<CScript>{GetScriptForDestination(m_destination)};\n+        return true;\n+    }\n+};\n+\n+/** A parsed raw(H) descriptor. */\n+class RawDescriptor final : public Descriptor\n+{\n+    CScript m_script;\n+\n+public:\n+    RawDescriptor(CScript script) : m_script(std::move(script)) {}\n+\n+    bool IsRange() const override { return false; }\n+    std::string ToString() const override { return \"raw(\" + HexStr(m_script.begin(), m_script.end()) + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override { out = ToString(); return true; }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        output_scripts = std::vector<CScript>{m_script};\n+        return true;\n+    }\n+};\n+\n+/** A parsed pk(P), pkh(P), or wpkh(P) descriptor. */\n+class SingleKeyDescriptor final : public Descriptor\n+{\n+    const std::function<CScript(const CPubKey&)> m_script_fn;\n+    const std::string m_fn_name;\n+    std::unique_ptr<PubkeyProvider> m_provider;\n+\n+public:\n+    SingleKeyDescriptor(std::unique_ptr<PubkeyProvider> prov, const std::function<CScript(const CPubKey&)>& fn, const std::string& name) : m_script_fn(fn), m_fn_name(name), m_provider(std::move(prov)) {}\n+\n+    bool IsRange() const override { return m_provider->IsRange(); }\n+    std::string ToString() const override { return m_fn_name + \"(\" + m_provider->ToString() + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret;\n+        if (!m_provider->ToPrivateString(arg, ret)) return false;\n+        out = m_fn_name + \"(\" + std::move(ret) + \")\";\n+        return true;\n+    }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        CPubKey key;\n+        if (!m_provider->GetPubKey(pos, arg, key)) return false;\n+        output_scripts = std::vector<CScript>{m_script_fn(key)};\n+        out.pubkeys.emplace(key.GetID(), std::move(key));\n+        return true;\n+    }\n+};\n+\n+CScript P2PKHGetScript(const CPubKey& pubkey) { return GetScriptForDestination(pubkey.GetID()); }\n+CScript P2PKGetScript(const CPubKey& pubkey) { return GetScriptForRawPubKey(pubkey); }\n+CScript P2WPKHGetScript(const CPubKey& pubkey) { return GetScriptForDestination(WitnessV0KeyHash(pubkey.GetID())); }\n+\n+/** A parsed multi(...) descriptor. */\n+class MultisigDescriptor : public Descriptor\n+{\n+    int m_threshold;\n+    std::vector<std::unique_ptr<PubkeyProvider>> m_providers;\n+\n+public:\n+    MultisigDescriptor(int threshold, std::vector<std::unique_ptr<PubkeyProvider>> providers) : m_threshold(threshold), m_providers(std::move(providers)) {}\n+\n+    bool IsRange() const override\n+    {\n+        for (const auto& p : m_providers) {\n+            if (p->IsRange()) return true;\n+        }\n+        return false;\n+    }\n+\n+    std::string ToString() const override\n+    {\n+        std::string ret = strprintf(\"multi(%i\", m_threshold);\n+        for (const auto& p : m_providers) {\n+            ret += \",\" + p->ToString();\n+        }\n+        return std::move(ret) + \")\";\n+    }\n+\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret = strprintf(\"multi(%i\", m_threshold);\n+        for (const auto& p : m_providers) {\n+            std::string sub;\n+            if (!p->ToPrivateString(arg, sub)) return false;\n+            ret += \",\" + std::move(sub);\n+        }\n+        out = std::move(ret) + \")\";\n+        return true;\n+    }\n+\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        std::vector<CPubKey> pubkeys;\n+        pubkeys.reserve(m_providers.size());\n+        for (const auto& p : m_providers) {\n+            CPubKey key;\n+            if (!p->GetPubKey(pos, arg, key)) return false;\n+            pubkeys.push_back(key);\n+        }\n+        for (const CPubKey& key : pubkeys) {\n+            out.pubkeys.emplace(key.GetID(), std::move(key));\n+        }\n+        output_scripts = std::vector<CScript>{GetScriptForMultisig(m_threshold, pubkeys)};\n+        return true;\n+    }\n+};\n+\n+/** A parsed sh(S) or wsh(S) descriptor. */\n+class ConvertorDescriptor : public Descriptor\n+{\n+    const std::function<CScript(const CScript&)> m_convert_fn;\n+    const std::string m_fn_name;\n+    std::unique_ptr<Descriptor> m_descriptor;\n+\n+public:\n+    ConvertorDescriptor(std::unique_ptr<Descriptor> descriptor, const std::function<CScript(const CScript&)>& fn, const std::string& name) : m_convert_fn(fn), m_fn_name(name), m_descriptor(std::move(descriptor)) {}\n+\n+    bool IsRange() const override { return m_descriptor->IsRange(); }\n+    std::string ToString() const override { return m_fn_name + \"(\" + m_descriptor->ToString() + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret;\n+        if (!m_descriptor->ToPrivateString(arg, ret)) return false;\n+        out = m_fn_name + \"(\" + std::move(ret) + \")\";\n+        return true;\n+    }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        std::vector<CScript> sub;\n+        if (!m_descriptor->Expand(pos, arg, sub, out)) return false;\n+        output_scripts.clear();\n+        for (const auto& script : sub) {\n+            CScriptID id(script);\n+            out.scripts.emplace(CScriptID(script), script);\n+            output_scripts.push_back(m_convert_fn(script));\n+        }\n+        return true;\n+    }\n+};\n+\n+CScript ConvertP2SH(const CScript& script) { return GetScriptForDestination(CScriptID(script)); }\n+CScript ConvertP2WSH(const CScript& script) { return GetScriptForDestination(WitnessV0ScriptHash(script)); }\n+\n+/** A parsed old(P) descriptor. */\n+class OldKeyDescriptor final : public Descriptor\n+{\n+    std::unique_ptr<PubkeyProvider> m_provider;\n+\n+public:\n+    OldKeyDescriptor(std::unique_ptr<PubkeyProvider> provider) : m_provider(std::move(provider)) {}\n+\n+    bool IsRange() const override { return m_provider->IsRange(); }\n+    std::string ToString() const override { return \"old(\" + m_provider->ToString() + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret;\n+        if (!m_provider->ToPrivateString(arg, ret)) return false;\n+        out = \"old(\" + std::move(ret) + \")\";\n+        return true;\n+    }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        CPubKey key;\n+        if (!m_provider->GetPubKey(pos, arg, key)) return false;\n+        CKeyID keyid = key.GetID();\n+        {\n+            CScript p2pk = GetScriptForRawPubKey(key);\n+            CScript p2pkh = GetScriptForDestination(keyid);\n+            output_scripts = std::vector<CScript>{std::move(p2pk), std::move(p2pkh)};\n+            out.pubkeys.emplace(keyid, key);\n+        }\n+        if (key.IsCompressed()) {\n+            CScript p2wpkh = GetScriptForDestination(WitnessV0KeyHash(keyid));\n+            CScriptID p2wpkh_id(p2wpkh);\n+            CScript p2sh_p2wpkh = GetScriptForDestination(p2wpkh_id);\n+            out.scripts.emplace(p2wpkh_id, p2wpkh);\n+            output_scripts.push_back(std::move(p2wpkh));\n+            output_scripts.push_back(std::move(p2sh_p2wpkh));\n+        }\n+        return true;\n+    }\n+};\n+\n+////////////////////////////////////////////////////////////////////////////\n+// Parser                                                                 //\n+////////////////////////////////////////////////////////////////////////////\n+\n+enum class ParseScriptContext {\n+    TOP,\n+    P2SH,\n+    P2WSH,\n+};\n+\n+/** Parse a constant. If succesful, sp is updated to skip the constant and return true. */\n+bool Const(const std::string& str, Span<const char>& sp)\n+{\n+    if ((size_t)sp.size() >= str.size() && std::equal(str.begin(), str.end(), sp.begin())) {\n+        sp = sp.subspan(str.size());\n+        return true;\n+    }\n+    return false;\n+}\n+\n+/** Parse a function call. If succesful, sp is updated to be the function's argument(s). */\n+bool Func(const std::string& str, Span<const char>& sp)\n+{\n+    if ((size_t)sp.size() >= str.size() + 2 && sp[str.size()] == '(' && sp[sp.size() - 1] == ')' && std::equal(str.begin(), str.end(), sp.begin())) {\n+        sp = sp.subspan(str.size() + 1, sp.size() - str.size() - 2);\n+        return true;\n+    }\n+    return false;\n+}\n+\n+/** Return the expression that sp begins with, and update sp to skip it. */\n+Span<const char> Expr(Span<const char>& sp)\n+{\n+    int level = 0;\n+    auto it = sp.begin();\n+    while (it != sp.end()) {\n+        if (*it == '(') {\n+            ++level;\n+        } else if (level && *it == ')') {\n+            --level;\n+        } else if (level == 0 && (*it == ')' || *it == ',')) {\n+            break;\n+        }\n+        ++it;\n+    }\n+    Span<const char> ret = sp.first(it - sp.begin());\n+    sp = sp.subspan(it - sp.begin());\n+    return ret;\n+}\n+\n+/** Split a string on every instance of sep, returning a vector. */\n+std::vector<Span<const char>> Split(const Span<const char>& sp, char sep)\n+{\n+    std::vector<Span<const char>> ret;\n+    auto it = sp.begin();\n+    auto start = it;\n+    while (it != sp.end()) {",
      "path": "src/script/descriptor.cpp",
      "position": 422,
      "original_position": 457,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "1b7c0c7fbd346109721197cefd4d464fc0bcae0b",
      "in_reply_to_id": 203426710,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I mean, should `Split(\"\", sep)` equal `[]`?",
      "created_at": "2018-07-18T20:25:53Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r203517440",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203517440"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 422,
      "original_line": 422,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203518803",
      "pull_request_review_id": 138425789,
      "id": 203518803,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzUxODgwMw==",
      "diff_hunk": "@@ -0,0 +1,619 @@\n+// Copyright (c) 2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <script/descriptor.h>\n+\n+#include <key_io.h>\n+#include <pubkey.h>\n+#include <script/script.h>\n+#include <script/standard.h>\n+\n+#include <span.h>\n+#include <util.h>\n+#include <utilstrencodings.h>\n+\n+#include <memory>\n+#include <string>\n+#include <vector>\n+\n+namespace {\n+\n+////////////////////////////////////////////////////////////////////////////\n+// Internal representation                                                //\n+////////////////////////////////////////////////////////////////////////////\n+\n+typedef std::vector<uint32_t> KeyPath;\n+\n+/** Interface for public key objects in descriptors. */\n+struct PubkeyProvider {\n+    virtual ~PubkeyProvider(){};\n+\n+    /** Derive a public key. */\n+    virtual bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const = 0;\n+\n+    /** Whether this represent multiple public keys at different positions. */\n+    virtual bool IsRange() const = 0;\n+\n+    /** Get the size of the generated public key(s) in bytes (33 or 65). */\n+    virtual size_t GetSize() const = 0;\n+\n+    /** Get the descriptor string form. */\n+    virtual std::string ToString() const = 0;\n+\n+    /** Get the descriptor string form including private data (if available in arg). */\n+    virtual bool ToPrivateString(const SigningProvider& arg, std::string& out) const = 0;\n+};\n+\n+#ifdef KEY_ORIGIN_SUPPORT\n+class OriginPubkeyProvider final : public PubkeyProvider\n+{\n+    uint32_t m_fingerprint;\n+    KeyPath m_path;\n+    std::unique_ptr<PubkeyProvider> m_provider;\n+\n+    std::string OriginString() const\n+    {\n+        std::string ret = strprintf(\"%08x\", m_fingerprint);\n+        for (uint32_t x : m_path) {\n+            if (x >> 31) {\n+                ret += strprintf(\"/%i'\", (x << 1) >> 1);\n+            } else {\n+                ret += strprintf(\"/%i\", x);\n+            }\n+        }\n+        return ret;\n+    }\n+\n+public:\n+    OriginPubkeyProvider(uint32_t fingerprint, KeyPath path, std::unique_ptr<PubkeyProvider> provider) : m_fingerprint(fingerprint), m_path(std::move(path)), m_provider(std::move(provider)) {}\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override { return m_provider->GetPubKey(pos, arg, out); }\n+    bool IsRange() const override { return m_provider->IsRange(); }\n+    size_t GetSize() const override { return m_provider->GetSize(); }\n+    std::string ToString() const override { return OriginString() + \":\" + m_provider->ToString(); }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& ret) const override\n+    {\n+        std::string sub;\n+        if (!m_provider->ToPrivateString(arg, sub)) return false;\n+        ret = OriginString() + \":\" + std::move(sub);\n+        return true;\n+    }\n+};\n+#endif\n+\n+/** An object representing a parsed constant public key in a descriptor. */\n+class ConstPubkeyProvider final : public PubkeyProvider\n+{\n+    CPubKey m_pubkey;\n+\n+public:\n+    ConstPubkeyProvider(const CPubKey& pubkey) : m_pubkey(pubkey) {}\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override\n+    {\n+        out = m_pubkey;\n+        return true;\n+    }\n+    bool IsRange() const override { return false; }\n+    size_t GetSize() const override { return m_pubkey.size(); }\n+    std::string ToString() const override { return HexStr(m_pubkey.begin(), m_pubkey.end()); }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& ret) const override\n+    {\n+        CKey key;\n+        if (!arg.GetKey(m_pubkey.GetID(), key)) return false;\n+        ret = EncodeSecret(key);\n+        return true;\n+    }\n+};\n+\n+enum class DeriveType {\n+    NO,\n+    UNHARDENED,\n+    HARDENED,\n+};\n+\n+/** An object representing a parsed extended public key in a descriptor. */\n+class BIP32PubkeyProvider final : public PubkeyProvider\n+{\n+    CExtPubKey m_extkey;\n+    KeyPath m_path;\n+    DeriveType m_derive;\n+\n+    bool GetExtKey(const SigningProvider& arg, CExtKey& ret) const\n+    {\n+        CKey key;\n+        if (!arg.GetKey(m_extkey.pubkey.GetID(), key)) return false;\n+        ret.nDepth = m_extkey.nDepth;\n+        std::copy(m_extkey.vchFingerprint, m_extkey.vchFingerprint + 4, ret.vchFingerprint);\n+        ret.nChild = m_extkey.nChild;\n+        ret.chaincode = m_extkey.chaincode;\n+        ret.key = key;\n+        return true;\n+    }\n+\n+    bool IsHardened() const\n+    {\n+        if (m_derive == DeriveType::HARDENED) return true;\n+        for (auto entry : m_path) {\n+            if (entry >> 31) return true;\n+        }\n+        return false;\n+    }\n+\n+public:\n+    BIP32PubkeyProvider(const CExtPubKey& extkey, KeyPath path, DeriveType derive) : m_extkey(extkey), m_path(std::move(path)), m_derive(derive) {}\n+    bool IsRange() const override { return m_derive != DeriveType::NO; }\n+    size_t GetSize() const override { return 33; }\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override\n+    {\n+        if (IsHardened()) {\n+            CExtKey key;\n+            if (!GetExtKey(arg, key)) return false;\n+            for (auto entry : m_path) {\n+                key.Derive(key, entry);\n+            }\n+            if (IsRange()) {\n+                key.Derive(key, pos | 0x80000000UL);\n+            }\n+            out = key.Neuter().pubkey;\n+        } else {\n+            // TODO: optimize by caching\n+            CExtPubKey key = m_extkey;\n+            for (auto entry : m_path) {\n+                key.Derive(key, entry);\n+            }\n+            if (IsRange()) {\n+                key.Derive(key, pos);\n+            }\n+            out = key.pubkey;\n+        }\n+        return true;\n+    }\n+    std::string ToString() const override\n+    {\n+        std::string ret = EncodeExtPubKey(m_extkey);\n+        for (auto entry : m_path) {\n+            ret += strprintf(\"/%i\", entry & 0x7FFFFFFFUL);\n+            if (entry >> 31) ret += '\\'';\n+        }\n+        if (IsRange()) {\n+            ret += \"/*\";\n+            if (m_derive == DeriveType::HARDENED) ret += '\\'';\n+        }\n+        return ret;\n+    }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        CExtKey key;\n+        if (!GetExtKey(arg, key)) return false;\n+        out = EncodeExtKey(key);\n+        for (auto entry : m_path) {\n+            out += strprintf(\"/%i\", entry & 0x7FFFFFFFUL);\n+            if (entry >> 31) out += '\\'';\n+        }\n+        if (IsRange()) {\n+            out += \"/*\";\n+            if (m_derive == DeriveType::HARDENED) out += '\\'';\n+        }\n+        return true;\n+    }\n+};\n+\n+/** A parsed addr(A) descriptor. */\n+class AddressDescriptor final : public Descriptor\n+{\n+    CTxDestination m_destination;\n+\n+public:\n+    AddressDescriptor(CTxDestination destination) : m_destination(std::move(destination)) {}\n+\n+    bool IsRange() const override { return false; }\n+    std::string ToString() const override { return \"addr(\" + EncodeDestination(m_destination) + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override { out = ToString(); return true; }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        output_scripts = std::vector<CScript>{GetScriptForDestination(m_destination)};\n+        return true;\n+    }\n+};\n+\n+/** A parsed raw(H) descriptor. */\n+class RawDescriptor final : public Descriptor\n+{\n+    CScript m_script;\n+\n+public:\n+    RawDescriptor(CScript script) : m_script(std::move(script)) {}\n+\n+    bool IsRange() const override { return false; }\n+    std::string ToString() const override { return \"raw(\" + HexStr(m_script.begin(), m_script.end()) + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override { out = ToString(); return true; }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        output_scripts = std::vector<CScript>{m_script};\n+        return true;\n+    }\n+};\n+\n+/** A parsed pk(P), pkh(P), or wpkh(P) descriptor. */\n+class SingleKeyDescriptor final : public Descriptor\n+{\n+    const std::function<CScript(const CPubKey&)> m_script_fn;\n+    const std::string m_fn_name;\n+    std::unique_ptr<PubkeyProvider> m_provider;\n+\n+public:\n+    SingleKeyDescriptor(std::unique_ptr<PubkeyProvider> prov, const std::function<CScript(const CPubKey&)>& fn, const std::string& name) : m_script_fn(fn), m_fn_name(name), m_provider(std::move(prov)) {}\n+\n+    bool IsRange() const override { return m_provider->IsRange(); }\n+    std::string ToString() const override { return m_fn_name + \"(\" + m_provider->ToString() + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret;\n+        if (!m_provider->ToPrivateString(arg, ret)) return false;\n+        out = m_fn_name + \"(\" + std::move(ret) + \")\";\n+        return true;\n+    }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        CPubKey key;\n+        if (!m_provider->GetPubKey(pos, arg, key)) return false;\n+        output_scripts = std::vector<CScript>{m_script_fn(key)};\n+        out.pubkeys.emplace(key.GetID(), std::move(key));\n+        return true;\n+    }\n+};\n+\n+CScript P2PKHGetScript(const CPubKey& pubkey) { return GetScriptForDestination(pubkey.GetID()); }\n+CScript P2PKGetScript(const CPubKey& pubkey) { return GetScriptForRawPubKey(pubkey); }\n+CScript P2WPKHGetScript(const CPubKey& pubkey) { return GetScriptForDestination(WitnessV0KeyHash(pubkey.GetID())); }\n+\n+/** A parsed multi(...) descriptor. */\n+class MultisigDescriptor : public Descriptor\n+{\n+    int m_threshold;\n+    std::vector<std::unique_ptr<PubkeyProvider>> m_providers;\n+\n+public:\n+    MultisigDescriptor(int threshold, std::vector<std::unique_ptr<PubkeyProvider>> providers) : m_threshold(threshold), m_providers(std::move(providers)) {}\n+\n+    bool IsRange() const override\n+    {\n+        for (const auto& p : m_providers) {\n+            if (p->IsRange()) return true;\n+        }\n+        return false;\n+    }\n+\n+    std::string ToString() const override\n+    {\n+        std::string ret = strprintf(\"multi(%i\", m_threshold);\n+        for (const auto& p : m_providers) {\n+            ret += \",\" + p->ToString();\n+        }\n+        return std::move(ret) + \")\";\n+    }\n+\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret = strprintf(\"multi(%i\", m_threshold);\n+        for (const auto& p : m_providers) {\n+            std::string sub;\n+            if (!p->ToPrivateString(arg, sub)) return false;\n+            ret += \",\" + std::move(sub);\n+        }\n+        out = std::move(ret) + \")\";\n+        return true;\n+    }\n+\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        std::vector<CPubKey> pubkeys;\n+        pubkeys.reserve(m_providers.size());\n+        for (const auto& p : m_providers) {\n+            CPubKey key;\n+            if (!p->GetPubKey(pos, arg, key)) return false;\n+            pubkeys.push_back(key);\n+        }\n+        for (const CPubKey& key : pubkeys) {\n+            out.pubkeys.emplace(key.GetID(), std::move(key));\n+        }\n+        output_scripts = std::vector<CScript>{GetScriptForMultisig(m_threshold, pubkeys)};\n+        return true;\n+    }\n+};\n+\n+/** A parsed sh(S) or wsh(S) descriptor. */\n+class ConvertorDescriptor : public Descriptor\n+{\n+    const std::function<CScript(const CScript&)> m_convert_fn;\n+    const std::string m_fn_name;\n+    std::unique_ptr<Descriptor> m_descriptor;\n+\n+public:\n+    ConvertorDescriptor(std::unique_ptr<Descriptor> descriptor, const std::function<CScript(const CScript&)>& fn, const std::string& name) : m_convert_fn(fn), m_fn_name(name), m_descriptor(std::move(descriptor)) {}\n+\n+    bool IsRange() const override { return m_descriptor->IsRange(); }\n+    std::string ToString() const override { return m_fn_name + \"(\" + m_descriptor->ToString() + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret;\n+        if (!m_descriptor->ToPrivateString(arg, ret)) return false;\n+        out = m_fn_name + \"(\" + std::move(ret) + \")\";\n+        return true;\n+    }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        std::vector<CScript> sub;\n+        if (!m_descriptor->Expand(pos, arg, sub, out)) return false;\n+        output_scripts.clear();\n+        for (const auto& script : sub) {\n+            CScriptID id(script);\n+            out.scripts.emplace(CScriptID(script), script);\n+            output_scripts.push_back(m_convert_fn(script));\n+        }\n+        return true;\n+    }\n+};\n+\n+CScript ConvertP2SH(const CScript& script) { return GetScriptForDestination(CScriptID(script)); }\n+CScript ConvertP2WSH(const CScript& script) { return GetScriptForDestination(WitnessV0ScriptHash(script)); }\n+\n+/** A parsed old(P) descriptor. */\n+class OldKeyDescriptor final : public Descriptor\n+{\n+    std::unique_ptr<PubkeyProvider> m_provider;\n+\n+public:\n+    OldKeyDescriptor(std::unique_ptr<PubkeyProvider> provider) : m_provider(std::move(provider)) {}\n+\n+    bool IsRange() const override { return m_provider->IsRange(); }\n+    std::string ToString() const override { return \"old(\" + m_provider->ToString() + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret;\n+        if (!m_provider->ToPrivateString(arg, ret)) return false;\n+        out = \"old(\" + std::move(ret) + \")\";\n+        return true;\n+    }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        CPubKey key;\n+        if (!m_provider->GetPubKey(pos, arg, key)) return false;\n+        CKeyID keyid = key.GetID();\n+        {\n+            CScript p2pk = GetScriptForRawPubKey(key);\n+            CScript p2pkh = GetScriptForDestination(keyid);\n+            output_scripts = std::vector<CScript>{std::move(p2pk), std::move(p2pkh)};\n+            out.pubkeys.emplace(keyid, key);\n+        }\n+        if (key.IsCompressed()) {\n+            CScript p2wpkh = GetScriptForDestination(WitnessV0KeyHash(keyid));\n+            CScriptID p2wpkh_id(p2wpkh);\n+            CScript p2sh_p2wpkh = GetScriptForDestination(p2wpkh_id);\n+            out.scripts.emplace(p2wpkh_id, p2wpkh);\n+            output_scripts.push_back(std::move(p2wpkh));\n+            output_scripts.push_back(std::move(p2sh_p2wpkh));\n+        }\n+        return true;\n+    }\n+};\n+\n+////////////////////////////////////////////////////////////////////////////\n+// Parser                                                                 //\n+////////////////////////////////////////////////////////////////////////////\n+\n+enum class ParseScriptContext {\n+    TOP,\n+    P2SH,\n+    P2WSH,\n+};\n+\n+/** Parse a constant. If succesful, sp is updated to skip the constant and return true. */\n+bool Const(const std::string& str, Span<const char>& sp)\n+{\n+    if ((size_t)sp.size() >= str.size() && std::equal(str.begin(), str.end(), sp.begin())) {\n+        sp = sp.subspan(str.size());\n+        return true;\n+    }\n+    return false;\n+}\n+\n+/** Parse a function call. If succesful, sp is updated to be the function's argument(s). */\n+bool Func(const std::string& str, Span<const char>& sp)\n+{\n+    if ((size_t)sp.size() >= str.size() + 2 && sp[str.size()] == '(' && sp[sp.size() - 1] == ')' && std::equal(str.begin(), str.end(), sp.begin())) {\n+        sp = sp.subspan(str.size() + 1, sp.size() - str.size() - 2);\n+        return true;\n+    }\n+    return false;\n+}\n+\n+/** Return the expression that sp begins with, and update sp to skip it. */\n+Span<const char> Expr(Span<const char>& sp)\n+{\n+    int level = 0;\n+    auto it = sp.begin();\n+    while (it != sp.end()) {\n+        if (*it == '(') {\n+            ++level;\n+        } else if (level && *it == ')') {\n+            --level;\n+        } else if (level == 0 && (*it == ')' || *it == ',')) {\n+            break;\n+        }\n+        ++it;\n+    }\n+    Span<const char> ret = sp.first(it - sp.begin());\n+    sp = sp.subspan(it - sp.begin());\n+    return ret;\n+}\n+\n+/** Split a string on every instance of sep, returning a vector. */\n+std::vector<Span<const char>> Split(const Span<const char>& sp, char sep)\n+{\n+    std::vector<Span<const char>> ret;\n+    auto it = sp.begin();\n+    auto start = it;\n+    while (it != sp.end()) {",
      "path": "src/script/descriptor.cpp",
      "position": 422,
      "original_position": 457,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "1b7c0c7fbd346109721197cefd4d464fc0bcae0b",
      "in_reply_to_id": 203426710,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "No, it should be `[\"\"]`. Callers can rely on there always being at least one argument in the result.",
      "created_at": "2018-07-18T20:30:05Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r203518803",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203518803"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 422,
      "original_line": 422,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203520519",
      "pull_request_review_id": 138427853,
      "id": 203520519,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzUyMDUxOQ==",
      "diff_hunk": "@@ -0,0 +1,619 @@\n+// Copyright (c) 2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <script/descriptor.h>\n+\n+#include <key_io.h>\n+#include <pubkey.h>\n+#include <script/script.h>\n+#include <script/standard.h>\n+\n+#include <span.h>\n+#include <util.h>\n+#include <utilstrencodings.h>\n+\n+#include <memory>\n+#include <string>\n+#include <vector>\n+\n+namespace {\n+\n+////////////////////////////////////////////////////////////////////////////\n+// Internal representation                                                //\n+////////////////////////////////////////////////////////////////////////////\n+\n+typedef std::vector<uint32_t> KeyPath;\n+\n+/** Interface for public key objects in descriptors. */\n+struct PubkeyProvider {\n+    virtual ~PubkeyProvider(){};\n+\n+    /** Derive a public key. */\n+    virtual bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const = 0;\n+\n+    /** Whether this represent multiple public keys at different positions. */\n+    virtual bool IsRange() const = 0;\n+\n+    /** Get the size of the generated public key(s) in bytes (33 or 65). */\n+    virtual size_t GetSize() const = 0;\n+\n+    /** Get the descriptor string form. */\n+    virtual std::string ToString() const = 0;\n+\n+    /** Get the descriptor string form including private data (if available in arg). */\n+    virtual bool ToPrivateString(const SigningProvider& arg, std::string& out) const = 0;\n+};\n+\n+#ifdef KEY_ORIGIN_SUPPORT\n+class OriginPubkeyProvider final : public PubkeyProvider\n+{\n+    uint32_t m_fingerprint;\n+    KeyPath m_path;\n+    std::unique_ptr<PubkeyProvider> m_provider;\n+\n+    std::string OriginString() const\n+    {\n+        std::string ret = strprintf(\"%08x\", m_fingerprint);\n+        for (uint32_t x : m_path) {\n+            if (x >> 31) {\n+                ret += strprintf(\"/%i'\", (x << 1) >> 1);\n+            } else {\n+                ret += strprintf(\"/%i\", x);\n+            }\n+        }\n+        return ret;\n+    }\n+\n+public:\n+    OriginPubkeyProvider(uint32_t fingerprint, KeyPath path, std::unique_ptr<PubkeyProvider> provider) : m_fingerprint(fingerprint), m_path(std::move(path)), m_provider(std::move(provider)) {}\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override { return m_provider->GetPubKey(pos, arg, out); }\n+    bool IsRange() const override { return m_provider->IsRange(); }\n+    size_t GetSize() const override { return m_provider->GetSize(); }\n+    std::string ToString() const override { return OriginString() + \":\" + m_provider->ToString(); }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& ret) const override\n+    {\n+        std::string sub;\n+        if (!m_provider->ToPrivateString(arg, sub)) return false;\n+        ret = OriginString() + \":\" + std::move(sub);\n+        return true;\n+    }\n+};\n+#endif\n+\n+/** An object representing a parsed constant public key in a descriptor. */\n+class ConstPubkeyProvider final : public PubkeyProvider\n+{\n+    CPubKey m_pubkey;\n+\n+public:\n+    ConstPubkeyProvider(const CPubKey& pubkey) : m_pubkey(pubkey) {}\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override\n+    {\n+        out = m_pubkey;\n+        return true;\n+    }\n+    bool IsRange() const override { return false; }\n+    size_t GetSize() const override { return m_pubkey.size(); }\n+    std::string ToString() const override { return HexStr(m_pubkey.begin(), m_pubkey.end()); }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& ret) const override\n+    {\n+        CKey key;\n+        if (!arg.GetKey(m_pubkey.GetID(), key)) return false;\n+        ret = EncodeSecret(key);\n+        return true;\n+    }\n+};\n+\n+enum class DeriveType {\n+    NO,\n+    UNHARDENED,\n+    HARDENED,\n+};\n+\n+/** An object representing a parsed extended public key in a descriptor. */\n+class BIP32PubkeyProvider final : public PubkeyProvider\n+{\n+    CExtPubKey m_extkey;\n+    KeyPath m_path;\n+    DeriveType m_derive;\n+\n+    bool GetExtKey(const SigningProvider& arg, CExtKey& ret) const\n+    {\n+        CKey key;\n+        if (!arg.GetKey(m_extkey.pubkey.GetID(), key)) return false;\n+        ret.nDepth = m_extkey.nDepth;\n+        std::copy(m_extkey.vchFingerprint, m_extkey.vchFingerprint + 4, ret.vchFingerprint);\n+        ret.nChild = m_extkey.nChild;\n+        ret.chaincode = m_extkey.chaincode;\n+        ret.key = key;\n+        return true;\n+    }\n+\n+    bool IsHardened() const\n+    {\n+        if (m_derive == DeriveType::HARDENED) return true;\n+        for (auto entry : m_path) {\n+            if (entry >> 31) return true;\n+        }\n+        return false;\n+    }\n+\n+public:\n+    BIP32PubkeyProvider(const CExtPubKey& extkey, KeyPath path, DeriveType derive) : m_extkey(extkey), m_path(std::move(path)), m_derive(derive) {}\n+    bool IsRange() const override { return m_derive != DeriveType::NO; }\n+    size_t GetSize() const override { return 33; }\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override\n+    {\n+        if (IsHardened()) {\n+            CExtKey key;\n+            if (!GetExtKey(arg, key)) return false;\n+            for (auto entry : m_path) {\n+                key.Derive(key, entry);\n+            }\n+            if (IsRange()) {\n+                key.Derive(key, pos | 0x80000000UL);\n+            }\n+            out = key.Neuter().pubkey;\n+        } else {\n+            // TODO: optimize by caching\n+            CExtPubKey key = m_extkey;\n+            for (auto entry : m_path) {\n+                key.Derive(key, entry);\n+            }\n+            if (IsRange()) {\n+                key.Derive(key, pos);\n+            }\n+            out = key.pubkey;\n+        }\n+        return true;\n+    }\n+    std::string ToString() const override\n+    {\n+        std::string ret = EncodeExtPubKey(m_extkey);\n+        for (auto entry : m_path) {\n+            ret += strprintf(\"/%i\", entry & 0x7FFFFFFFUL);\n+            if (entry >> 31) ret += '\\'';\n+        }\n+        if (IsRange()) {\n+            ret += \"/*\";\n+            if (m_derive == DeriveType::HARDENED) ret += '\\'';\n+        }\n+        return ret;\n+    }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        CExtKey key;\n+        if (!GetExtKey(arg, key)) return false;\n+        out = EncodeExtKey(key);\n+        for (auto entry : m_path) {\n+            out += strprintf(\"/%i\", entry & 0x7FFFFFFFUL);\n+            if (entry >> 31) out += '\\'';\n+        }\n+        if (IsRange()) {\n+            out += \"/*\";\n+            if (m_derive == DeriveType::HARDENED) out += '\\'';\n+        }\n+        return true;\n+    }\n+};\n+\n+/** A parsed addr(A) descriptor. */\n+class AddressDescriptor final : public Descriptor\n+{\n+    CTxDestination m_destination;\n+\n+public:\n+    AddressDescriptor(CTxDestination destination) : m_destination(std::move(destination)) {}\n+\n+    bool IsRange() const override { return false; }\n+    std::string ToString() const override { return \"addr(\" + EncodeDestination(m_destination) + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override { out = ToString(); return true; }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        output_scripts = std::vector<CScript>{GetScriptForDestination(m_destination)};\n+        return true;\n+    }\n+};\n+\n+/** A parsed raw(H) descriptor. */\n+class RawDescriptor final : public Descriptor\n+{\n+    CScript m_script;\n+\n+public:\n+    RawDescriptor(CScript script) : m_script(std::move(script)) {}\n+\n+    bool IsRange() const override { return false; }\n+    std::string ToString() const override { return \"raw(\" + HexStr(m_script.begin(), m_script.end()) + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override { out = ToString(); return true; }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        output_scripts = std::vector<CScript>{m_script};\n+        return true;\n+    }\n+};\n+\n+/** A parsed pk(P), pkh(P), or wpkh(P) descriptor. */\n+class SingleKeyDescriptor final : public Descriptor\n+{\n+    const std::function<CScript(const CPubKey&)> m_script_fn;\n+    const std::string m_fn_name;\n+    std::unique_ptr<PubkeyProvider> m_provider;\n+\n+public:\n+    SingleKeyDescriptor(std::unique_ptr<PubkeyProvider> prov, const std::function<CScript(const CPubKey&)>& fn, const std::string& name) : m_script_fn(fn), m_fn_name(name), m_provider(std::move(prov)) {}\n+\n+    bool IsRange() const override { return m_provider->IsRange(); }\n+    std::string ToString() const override { return m_fn_name + \"(\" + m_provider->ToString() + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret;\n+        if (!m_provider->ToPrivateString(arg, ret)) return false;\n+        out = m_fn_name + \"(\" + std::move(ret) + \")\";\n+        return true;\n+    }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        CPubKey key;\n+        if (!m_provider->GetPubKey(pos, arg, key)) return false;\n+        output_scripts = std::vector<CScript>{m_script_fn(key)};\n+        out.pubkeys.emplace(key.GetID(), std::move(key));\n+        return true;\n+    }\n+};\n+\n+CScript P2PKHGetScript(const CPubKey& pubkey) { return GetScriptForDestination(pubkey.GetID()); }\n+CScript P2PKGetScript(const CPubKey& pubkey) { return GetScriptForRawPubKey(pubkey); }\n+CScript P2WPKHGetScript(const CPubKey& pubkey) { return GetScriptForDestination(WitnessV0KeyHash(pubkey.GetID())); }\n+\n+/** A parsed multi(...) descriptor. */\n+class MultisigDescriptor : public Descriptor\n+{\n+    int m_threshold;\n+    std::vector<std::unique_ptr<PubkeyProvider>> m_providers;\n+\n+public:\n+    MultisigDescriptor(int threshold, std::vector<std::unique_ptr<PubkeyProvider>> providers) : m_threshold(threshold), m_providers(std::move(providers)) {}\n+\n+    bool IsRange() const override\n+    {\n+        for (const auto& p : m_providers) {\n+            if (p->IsRange()) return true;\n+        }\n+        return false;\n+    }\n+\n+    std::string ToString() const override\n+    {\n+        std::string ret = strprintf(\"multi(%i\", m_threshold);\n+        for (const auto& p : m_providers) {\n+            ret += \",\" + p->ToString();\n+        }\n+        return std::move(ret) + \")\";\n+    }\n+\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret = strprintf(\"multi(%i\", m_threshold);\n+        for (const auto& p : m_providers) {\n+            std::string sub;\n+            if (!p->ToPrivateString(arg, sub)) return false;\n+            ret += \",\" + std::move(sub);\n+        }\n+        out = std::move(ret) + \")\";\n+        return true;\n+    }\n+\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        std::vector<CPubKey> pubkeys;\n+        pubkeys.reserve(m_providers.size());\n+        for (const auto& p : m_providers) {\n+            CPubKey key;\n+            if (!p->GetPubKey(pos, arg, key)) return false;\n+            pubkeys.push_back(key);\n+        }\n+        for (const CPubKey& key : pubkeys) {\n+            out.pubkeys.emplace(key.GetID(), std::move(key));\n+        }\n+        output_scripts = std::vector<CScript>{GetScriptForMultisig(m_threshold, pubkeys)};\n+        return true;\n+    }\n+};\n+\n+/** A parsed sh(S) or wsh(S) descriptor. */\n+class ConvertorDescriptor : public Descriptor\n+{\n+    const std::function<CScript(const CScript&)> m_convert_fn;\n+    const std::string m_fn_name;\n+    std::unique_ptr<Descriptor> m_descriptor;\n+\n+public:\n+    ConvertorDescriptor(std::unique_ptr<Descriptor> descriptor, const std::function<CScript(const CScript&)>& fn, const std::string& name) : m_convert_fn(fn), m_fn_name(name), m_descriptor(std::move(descriptor)) {}\n+\n+    bool IsRange() const override { return m_descriptor->IsRange(); }\n+    std::string ToString() const override { return m_fn_name + \"(\" + m_descriptor->ToString() + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret;\n+        if (!m_descriptor->ToPrivateString(arg, ret)) return false;\n+        out = m_fn_name + \"(\" + std::move(ret) + \")\";\n+        return true;\n+    }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        std::vector<CScript> sub;\n+        if (!m_descriptor->Expand(pos, arg, sub, out)) return false;\n+        output_scripts.clear();\n+        for (const auto& script : sub) {\n+            CScriptID id(script);\n+            out.scripts.emplace(CScriptID(script), script);\n+            output_scripts.push_back(m_convert_fn(script));\n+        }\n+        return true;\n+    }\n+};\n+\n+CScript ConvertP2SH(const CScript& script) { return GetScriptForDestination(CScriptID(script)); }\n+CScript ConvertP2WSH(const CScript& script) { return GetScriptForDestination(WitnessV0ScriptHash(script)); }\n+\n+/** A parsed old(P) descriptor. */\n+class OldKeyDescriptor final : public Descriptor\n+{\n+    std::unique_ptr<PubkeyProvider> m_provider;\n+\n+public:\n+    OldKeyDescriptor(std::unique_ptr<PubkeyProvider> provider) : m_provider(std::move(provider)) {}\n+\n+    bool IsRange() const override { return m_provider->IsRange(); }\n+    std::string ToString() const override { return \"old(\" + m_provider->ToString() + \")\"; }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        std::string ret;\n+        if (!m_provider->ToPrivateString(arg, ret)) return false;\n+        out = \"old(\" + std::move(ret) + \")\";\n+        return true;\n+    }\n+    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override\n+    {\n+        CPubKey key;\n+        if (!m_provider->GetPubKey(pos, arg, key)) return false;\n+        CKeyID keyid = key.GetID();\n+        {\n+            CScript p2pk = GetScriptForRawPubKey(key);\n+            CScript p2pkh = GetScriptForDestination(keyid);\n+            output_scripts = std::vector<CScript>{std::move(p2pk), std::move(p2pkh)};\n+            out.pubkeys.emplace(keyid, key);\n+        }\n+        if (key.IsCompressed()) {\n+            CScript p2wpkh = GetScriptForDestination(WitnessV0KeyHash(keyid));\n+            CScriptID p2wpkh_id(p2wpkh);\n+            CScript p2sh_p2wpkh = GetScriptForDestination(p2wpkh_id);\n+            out.scripts.emplace(p2wpkh_id, p2wpkh);\n+            output_scripts.push_back(std::move(p2wpkh));\n+            output_scripts.push_back(std::move(p2sh_p2wpkh));\n+        }\n+        return true;\n+    }\n+};\n+\n+////////////////////////////////////////////////////////////////////////////\n+// Parser                                                                 //\n+////////////////////////////////////////////////////////////////////////////\n+\n+enum class ParseScriptContext {\n+    TOP,\n+    P2SH,\n+    P2WSH,\n+};\n+\n+/** Parse a constant. If succesful, sp is updated to skip the constant and return true. */\n+bool Const(const std::string& str, Span<const char>& sp)\n+{\n+    if ((size_t)sp.size() >= str.size() && std::equal(str.begin(), str.end(), sp.begin())) {\n+        sp = sp.subspan(str.size());\n+        return true;\n+    }\n+    return false;\n+}\n+\n+/** Parse a function call. If succesful, sp is updated to be the function's argument(s). */\n+bool Func(const std::string& str, Span<const char>& sp)\n+{\n+    if ((size_t)sp.size() >= str.size() + 2 && sp[str.size()] == '(' && sp[sp.size() - 1] == ')' && std::equal(str.begin(), str.end(), sp.begin())) {\n+        sp = sp.subspan(str.size() + 1, sp.size() - str.size() - 2);\n+        return true;\n+    }\n+    return false;\n+}\n+\n+/** Return the expression that sp begins with, and update sp to skip it. */\n+Span<const char> Expr(Span<const char>& sp)\n+{\n+    int level = 0;\n+    auto it = sp.begin();\n+    while (it != sp.end()) {\n+        if (*it == '(') {\n+            ++level;\n+        } else if (level && *it == ')') {\n+            --level;\n+        } else if (level == 0 && (*it == ')' || *it == ',')) {\n+            break;\n+        }\n+        ++it;\n+    }\n+    Span<const char> ret = sp.first(it - sp.begin());\n+    sp = sp.subspan(it - sp.begin());\n+    return ret;\n+}\n+\n+/** Split a string on every instance of sep, returning a vector. */\n+std::vector<Span<const char>> Split(const Span<const char>& sp, char sep)\n+{\n+    std::vector<Span<const char>> ret;\n+    auto it = sp.begin();\n+    auto start = it;\n+    while (it != sp.end()) {",
      "path": "src/script/descriptor.cpp",
      "position": 422,
      "original_position": 457,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "1b7c0c7fbd346109721197cefd4d464fc0bcae0b",
      "in_reply_to_id": 203426710,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In that case ðŸ‘ ",
      "created_at": "2018-07-18T20:35:48Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r203520519",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203520519"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 422,
      "original_line": 422,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203522024",
      "pull_request_review_id": 138429780,
      "id": 203522024,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzUyMjAyNA==",
      "diff_hunk": "@@ -1984,67 +1985,36 @@ class CoinsViewScanReserver\n     }\n };\n \n-static const char *g_default_scantxoutset_script_types[] = { \"P2PKH\", \"P2SH_P2WPKH\", \"P2WPKH\" };\n-\n-enum class OutputScriptType {\n-    UNKNOWN,\n-    P2PK,\n-    P2PKH,\n-    P2SH_P2WPKH,\n-    P2WPKH\n-};\n-\n-static inline OutputScriptType GetOutputScriptTypeFromString(const std::string& outputtype)\n-{\n-    if (outputtype == \"P2PK\") return OutputScriptType::P2PK;\n-    else if (outputtype == \"P2PKH\") return OutputScriptType::P2PKH;\n-    else if (outputtype == \"P2SH_P2WPKH\") return OutputScriptType::P2SH_P2WPKH;\n-    else if (outputtype == \"P2WPKH\") return OutputScriptType::P2WPKH;\n-    else return OutputScriptType::UNKNOWN;\n-}\n-\n-CTxDestination GetDestinationForKey(const CPubKey& key, OutputScriptType type)\n-{\n-    switch (type) {\n-    case OutputScriptType::P2PKH: return key.GetID();\n-    case OutputScriptType::P2SH_P2WPKH:\n-    case OutputScriptType::P2WPKH: {\n-        if (!key.IsCompressed()) return key.GetID();\n-        CTxDestination witdest = WitnessV0KeyHash(key.GetID());\n-        if (type == OutputScriptType::P2SH_P2WPKH) {\n-            CScript witprog = GetScriptForDestination(witdest);\n-            return CScriptID(witprog);\n-        } else {\n-            return witdest;\n-        }\n-    }\n-    default: assert(false);\n-    }\n-}\n-\n UniValue scantxoutset(const JSONRPCRequest& request)\n {\n     if (request.fHelp || request.params.size() < 1 || request.params.size() > 2)\n         throw std::runtime_error(\n             \"scantxoutset <action> ( <scanobjects> )\\n\"\n-            \"\\nScans the unspent transaction output set for possible entries that matches common scripts of given public keys.\\n\"\n-            \"Using addresses as scanobjects will _not_ detect unspent P2PK txouts\\n\"\n+            \"\\nScans the unspent transaction output set for entries that match certain output descriptors.\\n\"\n+            \"Examples of output descriptors are:\\n\"\n+            \"    addr(<address>)                      Outputs whose scriptPubKey corresponds to the specified address (does not include P2PK)\\n\"\n+            \"    raw(<hex script>)                    Outputs whose scriptPubKey equals the specified hex scripts\\n\"\n+            \"    old(<pubkey>)                        P2PK, P2PKH, P2WPKH, and P2SH-P2WPKH outputs for the given pubkey\\n\"\n+            \"    pkh(<pubkey>)                        P2PKH outputs for the given pubkey\\n\"\n+            \"    sh(multi(<n>,<pubkey>,<pubkey>,...)) P2SH-multisig outputs for the given threshold and pubkeys\\n\"\n+            \"\\nIn the above, <pubkey> either refers to a fixed public key in hexadecimal notation, or to an xpub/xprv optionally followed by one\\n\"\n+            \"or more path elements separated by \\\"/\\\", and optionally ending in \\\"/*\\\" or \\\"/*'\\\" to specify all unhardened or hardened child keys.\\n\"\n+            \"In the latter case, a range needs to be specified by below if different from 1000.\\n\"\n+            \"For more information on output descriptors, see the documentation at TODO\\n\"\n             \"\\nArguments:\\n\"\n             \"1. \\\"action\\\"                       (string, required) The action to execute\\n\"\n             \"                                      \\\"start\\\" for starting a scan\\n\"\n             \"                                      \\\"abort\\\" for aborting the current scan (returns true when abort was successful)\\n\"\n             \"                                      \\\"status\\\" for progress report (in %) of the current scan\\n\"\n-            \"2. \\\"scanobjects\\\"                  (array, optional) Array of scan objects (only one object type per scan object allowed)\\n\"\n-            \"      [\\n\"\n-            \"        { \\\"address\\\" : \\\"<address>\\\" },       (string, optional) Bitcoin address\\n\"\n-            \"        { \\\"script\\\"  : \\\"<scriptPubKey>\\\" },  (string, optional) HEX encoded script (scriptPubKey)\\n\"\n-            \"        { \\\"pubkey\\\"  :                      (object, optional) Public key\\n\"\n-            \"          {\\n\"\n-            \"            \\\"pubkey\\\" : \\\"<pubkey\\\">,         (string, required) HEX encoded public key\\n\"\n-            \"            \\\"script_types\\\" : [ ... ],      (array, optional) Array of script-types to derive from the pubkey (possible values: \\\"P2PK\\\", \\\"P2PKH\\\", \\\"P2SH-P2WPKH\\\", \\\"P2WPKH\\\")\\n\"\n-            \"          }\\n\"\n+            \"2. \\\"scanobjects\\\"                  (array, required) Array of scan objects\\n\"\n+            \"    [                             Every scan object is either a string descriptor or an object:\\n\"\n+            \"        \\\"descriptor\\\",             (string, optional) An output descriptor\\n\"",
      "path": "src/rpc/blockchain.cpp",
      "position": 86,
      "original_position": 84,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "1b7c0c7fbd346109721197cefd4d464fc0bcae0b",
      "in_reply_to_id": 203443145,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> It's pretty verbose\r\n\r\nOn the client side I think it doesn't matter (unless it's a human making the call).",
      "created_at": "2018-07-18T20:41:04Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r203522024",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203522024"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 2013,
      "original_line": 2012,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203551841",
      "pull_request_review_id": 138465633,
      "id": 203551841,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzU1MTg0MQ==",
      "diff_hunk": "@@ -1984,67 +1985,36 @@ class CoinsViewScanReserver\n     }\n };\n \n-static const char *g_default_scantxoutset_script_types[] = { \"P2PKH\", \"P2SH_P2WPKH\", \"P2WPKH\" };\n-\n-enum class OutputScriptType {\n-    UNKNOWN,\n-    P2PK,\n-    P2PKH,\n-    P2SH_P2WPKH,\n-    P2WPKH\n-};\n-\n-static inline OutputScriptType GetOutputScriptTypeFromString(const std::string& outputtype)\n-{\n-    if (outputtype == \"P2PK\") return OutputScriptType::P2PK;\n-    else if (outputtype == \"P2PKH\") return OutputScriptType::P2PKH;\n-    else if (outputtype == \"P2SH_P2WPKH\") return OutputScriptType::P2SH_P2WPKH;\n-    else if (outputtype == \"P2WPKH\") return OutputScriptType::P2WPKH;\n-    else return OutputScriptType::UNKNOWN;\n-}\n-\n-CTxDestination GetDestinationForKey(const CPubKey& key, OutputScriptType type)\n-{\n-    switch (type) {\n-    case OutputScriptType::P2PKH: return key.GetID();\n-    case OutputScriptType::P2SH_P2WPKH:\n-    case OutputScriptType::P2WPKH: {\n-        if (!key.IsCompressed()) return key.GetID();\n-        CTxDestination witdest = WitnessV0KeyHash(key.GetID());\n-        if (type == OutputScriptType::P2SH_P2WPKH) {\n-            CScript witprog = GetScriptForDestination(witdest);\n-            return CScriptID(witprog);\n-        } else {\n-            return witdest;\n-        }\n-    }\n-    default: assert(false);\n-    }\n-}\n-\n UniValue scantxoutset(const JSONRPCRequest& request)\n {\n     if (request.fHelp || request.params.size() < 1 || request.params.size() > 2)\n         throw std::runtime_error(\n             \"scantxoutset <action> ( <scanobjects> )\\n\"\n-            \"\\nScans the unspent transaction output set for possible entries that matches common scripts of given public keys.\\n\"\n-            \"Using addresses as scanobjects will _not_ detect unspent P2PK txouts\\n\"\n+            \"\\nScans the unspent transaction output set for entries that match certain output descriptors.\\n\"\n+            \"Examples of output descriptors are:\\n\"\n+            \"    addr(<address>)                      Outputs whose scriptPubKey corresponds to the specified address (does not include P2PK)\\n\"\n+            \"    raw(<hex script>)                    Outputs whose scriptPubKey equals the specified hex scripts\\n\"\n+            \"    old(<pubkey>)                        P2PK, P2PKH, P2WPKH, and P2SH-P2WPKH outputs for the given pubkey\\n\"\n+            \"    pkh(<pubkey>)                        P2PKH outputs for the given pubkey\\n\"\n+            \"    sh(multi(<n>,<pubkey>,<pubkey>,...)) P2SH-multisig outputs for the given threshold and pubkeys\\n\"\n+            \"\\nIn the above, <pubkey> either refers to a fixed public key in hexadecimal notation, or to an xpub/xprv optionally followed by one\\n\"\n+            \"or more path elements separated by \\\"/\\\", and optionally ending in \\\"/*\\\" or \\\"/*'\\\" to specify all unhardened or hardened child keys.\\n\"\n+            \"In the latter case, a range needs to be specified by below if different from 1000.\\n\"\n+            \"For more information on output descriptors, see the documentation at TODO\\n\"\n             \"\\nArguments:\\n\"\n             \"1. \\\"action\\\"                       (string, required) The action to execute\\n\"\n             \"                                      \\\"start\\\" for starting a scan\\n\"\n             \"                                      \\\"abort\\\" for aborting the current scan (returns true when abort was successful)\\n\"\n             \"                                      \\\"status\\\" for progress report (in %) of the current scan\\n\"\n-            \"2. \\\"scanobjects\\\"                  (array, optional) Array of scan objects (only one object type per scan object allowed)\\n\"\n-            \"      [\\n\"\n-            \"        { \\\"address\\\" : \\\"<address>\\\" },       (string, optional) Bitcoin address\\n\"\n-            \"        { \\\"script\\\"  : \\\"<scriptPubKey>\\\" },  (string, optional) HEX encoded script (scriptPubKey)\\n\"\n-            \"        { \\\"pubkey\\\"  :                      (object, optional) Public key\\n\"\n-            \"          {\\n\"\n-            \"            \\\"pubkey\\\" : \\\"<pubkey\\\">,         (string, required) HEX encoded public key\\n\"\n-            \"            \\\"script_types\\\" : [ ... ],      (array, optional) Array of script-types to derive from the pubkey (possible values: \\\"P2PK\\\", \\\"P2PKH\\\", \\\"P2SH-P2WPKH\\\", \\\"P2WPKH\\\")\\n\"\n-            \"          }\\n\"\n+            \"2. \\\"scanobjects\\\"                  (array, required) Array of scan objects\\n\"\n+            \"    [                             Every scan object is either a string descriptor or an object:\\n\"\n+            \"        \\\"descriptor\\\",             (string, optional) An output descriptor\\n\"",
      "path": "src/rpc/blockchain.cpp",
      "position": 86,
      "original_position": 84,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "1b7c0c7fbd346109721197cefd4d464fc0bcae0b",
      "in_reply_to_id": 203443145,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes, the reason to support the short notation is to simplify things for humans.",
      "created_at": "2018-07-18T22:33:41Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r203551841",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203551841"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 2013,
      "original_line": 2012,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203553644",
      "pull_request_review_id": 138467720,
      "id": 203553644,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzU1MzY0NA==",
      "diff_hunk": "@@ -0,0 +1,619 @@\n+// Copyright (c) 2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <script/descriptor.h>\n+\n+#include <key_io.h>\n+#include <pubkey.h>\n+#include <script/script.h>\n+#include <script/standard.h>\n+\n+#include <span.h>\n+#include <util.h>\n+#include <utilstrencodings.h>\n+\n+#include <memory>\n+#include <string>\n+#include <vector>\n+\n+namespace {\n+\n+////////////////////////////////////////////////////////////////////////////\n+// Internal representation                                                //\n+////////////////////////////////////////////////////////////////////////////\n+\n+typedef std::vector<uint32_t> KeyPath;\n+\n+/** Interface for public key objects in descriptors. */\n+struct PubkeyProvider {\n+    virtual ~PubkeyProvider(){};\n+\n+    /** Derive a public key. */\n+    virtual bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const = 0;\n+\n+    /** Whether this represent multiple public keys at different positions. */\n+    virtual bool IsRange() const = 0;\n+\n+    /** Get the size of the generated public key(s) in bytes (33 or 65). */\n+    virtual size_t GetSize() const = 0;\n+\n+    /** Get the descriptor string form. */\n+    virtual std::string ToString() const = 0;\n+\n+    /** Get the descriptor string form including private data (if available in arg). */\n+    virtual bool ToPrivateString(const SigningProvider& arg, std::string& out) const = 0;\n+};\n+\n+#ifdef KEY_ORIGIN_SUPPORT\n+class OriginPubkeyProvider final : public PubkeyProvider\n+{\n+    uint32_t m_fingerprint;\n+    KeyPath m_path;\n+    std::unique_ptr<PubkeyProvider> m_provider;\n+\n+    std::string OriginString() const\n+    {\n+        std::string ret = strprintf(\"%08x\", m_fingerprint);\n+        for (uint32_t x : m_path) {\n+            if (x >> 31) {\n+                ret += strprintf(\"/%i'\", (x << 1) >> 1);\n+            } else {\n+                ret += strprintf(\"/%i\", x);\n+            }\n+        }\n+        return ret;\n+    }\n+\n+public:\n+    OriginPubkeyProvider(uint32_t fingerprint, KeyPath path, std::unique_ptr<PubkeyProvider> provider) : m_fingerprint(fingerprint), m_path(std::move(path)), m_provider(std::move(provider)) {}\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override { return m_provider->GetPubKey(pos, arg, out); }\n+    bool IsRange() const override { return m_provider->IsRange(); }\n+    size_t GetSize() const override { return m_provider->GetSize(); }\n+    std::string ToString() const override { return OriginString() + \":\" + m_provider->ToString(); }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& ret) const override\n+    {\n+        std::string sub;\n+        if (!m_provider->ToPrivateString(arg, sub)) return false;\n+        ret = OriginString() + \":\" + std::move(sub);\n+        return true;\n+    }\n+};\n+#endif\n+\n+/** An object representing a parsed constant public key in a descriptor. */\n+class ConstPubkeyProvider final : public PubkeyProvider\n+{\n+    CPubKey m_pubkey;\n+\n+public:\n+    ConstPubkeyProvider(const CPubKey& pubkey) : m_pubkey(pubkey) {}\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override\n+    {\n+        out = m_pubkey;\n+        return true;\n+    }\n+    bool IsRange() const override { return false; }\n+    size_t GetSize() const override { return m_pubkey.size(); }\n+    std::string ToString() const override { return HexStr(m_pubkey.begin(), m_pubkey.end()); }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& ret) const override\n+    {\n+        CKey key;\n+        if (!arg.GetKey(m_pubkey.GetID(), key)) return false;\n+        ret = EncodeSecret(key);\n+        return true;\n+    }\n+};\n+\n+enum class DeriveType {\n+    NO,\n+    UNHARDENED,\n+    HARDENED,\n+};\n+\n+/** An object representing a parsed extended public key in a descriptor. */\n+class BIP32PubkeyProvider final : public PubkeyProvider\n+{\n+    CExtPubKey m_extkey;\n+    KeyPath m_path;\n+    DeriveType m_derive;\n+\n+    bool GetExtKey(const SigningProvider& arg, CExtKey& ret) const\n+    {\n+        CKey key;\n+        if (!arg.GetKey(m_extkey.pubkey.GetID(), key)) return false;\n+        ret.nDepth = m_extkey.nDepth;\n+        std::copy(m_extkey.vchFingerprint, m_extkey.vchFingerprint + 4, ret.vchFingerprint);\n+        ret.nChild = m_extkey.nChild;\n+        ret.chaincode = m_extkey.chaincode;\n+        ret.key = key;\n+        return true;\n+    }\n+\n+    bool IsHardened() const\n+    {\n+        if (m_derive == DeriveType::HARDENED) return true;\n+        for (auto entry : m_path) {\n+            if (entry >> 31) return true;\n+        }\n+        return false;\n+    }\n+\n+public:\n+    BIP32PubkeyProvider(const CExtPubKey& extkey, KeyPath path, DeriveType derive) : m_extkey(extkey), m_path(std::move(path)), m_derive(derive) {}\n+    bool IsRange() const override { return m_derive != DeriveType::NO; }\n+    size_t GetSize() const override { return 33; }\n+    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& out) const override\n+    {\n+        if (IsHardened()) {\n+            CExtKey key;\n+            if (!GetExtKey(arg, key)) return false;\n+            for (auto entry : m_path) {\n+                key.Derive(key, entry);\n+            }\n+            if (IsRange()) {\n+                key.Derive(key, pos | 0x80000000UL);\n+            }\n+            out = key.Neuter().pubkey;\n+        } else {\n+            // TODO: optimize by caching\n+            CExtPubKey key = m_extkey;\n+            for (auto entry : m_path) {\n+                key.Derive(key, entry);\n+            }\n+            if (IsRange()) {\n+                key.Derive(key, pos);\n+            }\n+            out = key.pubkey;\n+        }\n+        return true;\n+    }\n+    std::string ToString() const override\n+    {\n+        std::string ret = EncodeExtPubKey(m_extkey);\n+        for (auto entry : m_path) {\n+            ret += strprintf(\"/%i\", entry & 0x7FFFFFFFUL);\n+            if (entry >> 31) ret += '\\'';\n+        }\n+        if (IsRange()) {\n+            ret += \"/*\";\n+            if (m_derive == DeriveType::HARDENED) ret += '\\'';\n+        }\n+        return ret;\n+    }\n+    bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n+    {\n+        CExtKey key;\n+        if (!GetExtKey(arg, key)) return false;\n+        out = EncodeExtKey(key);\n+        for (auto entry : m_path) {",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 189,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "1143a75c2f74335365dc62063f2fdc6c74eefcda",
      "in_reply_to_id": 203496728,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed.",
      "created_at": "2018-07-18T22:41:00Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r203553644",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203553644"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 189,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204217254",
      "pull_request_review_id": 139264846,
      "id": 204217254,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNDIxNzI1NA==",
      "diff_hunk": "@@ -1984,67 +1985,36 @@ class CoinsViewScanReserver\n     }\n };\n \n-static const char *g_default_scantxoutset_script_types[] = { \"P2PKH\", \"P2SH_P2WPKH\", \"P2WPKH\" };\n-\n-enum class OutputScriptType {\n-    UNKNOWN,\n-    P2PK,\n-    P2PKH,\n-    P2SH_P2WPKH,\n-    P2WPKH\n-};\n-\n-static inline OutputScriptType GetOutputScriptTypeFromString(const std::string& outputtype)\n-{\n-    if (outputtype == \"P2PK\") return OutputScriptType::P2PK;\n-    else if (outputtype == \"P2PKH\") return OutputScriptType::P2PKH;\n-    else if (outputtype == \"P2SH_P2WPKH\") return OutputScriptType::P2SH_P2WPKH;\n-    else if (outputtype == \"P2WPKH\") return OutputScriptType::P2WPKH;\n-    else return OutputScriptType::UNKNOWN;\n-}\n-\n-CTxDestination GetDestinationForKey(const CPubKey& key, OutputScriptType type)\n-{\n-    switch (type) {\n-    case OutputScriptType::P2PKH: return key.GetID();\n-    case OutputScriptType::P2SH_P2WPKH:\n-    case OutputScriptType::P2WPKH: {\n-        if (!key.IsCompressed()) return key.GetID();\n-        CTxDestination witdest = WitnessV0KeyHash(key.GetID());\n-        if (type == OutputScriptType::P2SH_P2WPKH) {\n-            CScript witprog = GetScriptForDestination(witdest);\n-            return CScriptID(witprog);\n-        } else {\n-            return witdest;\n-        }\n-    }\n-    default: assert(false);\n-    }\n-}\n-\n UniValue scantxoutset(const JSONRPCRequest& request)\n {\n     if (request.fHelp || request.params.size() < 1 || request.params.size() > 2)\n         throw std::runtime_error(\n             \"scantxoutset <action> ( <scanobjects> )\\n\"\n-            \"\\nScans the unspent transaction output set for possible entries that matches common scripts of given public keys.\\n\"\n-            \"Using addresses as scanobjects will _not_ detect unspent P2PK txouts\\n\"\n+            \"\\nScans the unspent transaction output set for entries that match certain output descriptors.\\n\"\n+            \"Examples of output descriptors are:\\n\"\n+            \"    addr(<address>)                      Outputs whose scriptPubKey corresponds to the specified address (does not include P2PK)\\n\"\n+            \"    raw(<hex script>)                    Outputs whose scriptPubKey equals the specified hex scripts\\n\"\n+            \"    old(<pubkey>)                        P2PK, P2PKH, P2WPKH, and P2SH-P2WPKH outputs for the given pubkey\\n\"\n+            \"    pkh(<pubkey>)                        P2PKH outputs for the given pubkey\\n\"\n+            \"    sh(multi(<n>,<pubkey>,<pubkey>,...)) P2SH-multisig outputs for the given threshold and pubkeys\\n\"\n+            \"\\nIn the above, <pubkey> either refers to a fixed public key in hexadecimal notation, or to an xpub/xprv optionally followed by one\\n\"\n+            \"or more path elements separated by \\\"/\\\", and optionally ending in \\\"/*\\\" or \\\"/*'\\\" to specify all unhardened or hardened child keys.\\n\"\n+            \"In the latter case, a range needs to be specified by below if different from 1000.\\n\"\n+            \"For more information on output descriptors, see the documentation at TODO\\n\"\n             \"\\nArguments:\\n\"\n             \"1. \\\"action\\\"                       (string, required) The action to execute\\n\"\n             \"                                      \\\"start\\\" for starting a scan\\n\"\n             \"                                      \\\"abort\\\" for aborting the current scan (returns true when abort was successful)\\n\"\n             \"                                      \\\"status\\\" for progress report (in %) of the current scan\\n\"\n-            \"2. \\\"scanobjects\\\"                  (array, optional) Array of scan objects (only one object type per scan object allowed)\\n\"\n-            \"      [\\n\"\n-            \"        { \\\"address\\\" : \\\"<address>\\\" },       (string, optional) Bitcoin address\\n\"\n-            \"        { \\\"script\\\"  : \\\"<scriptPubKey>\\\" },  (string, optional) HEX encoded script (scriptPubKey)\\n\"\n-            \"        { \\\"pubkey\\\"  :                      (object, optional) Public key\\n\"\n-            \"          {\\n\"\n-            \"            \\\"pubkey\\\" : \\\"<pubkey\\\">,         (string, required) HEX encoded public key\\n\"\n-            \"            \\\"script_types\\\" : [ ... ],      (array, optional) Array of script-types to derive from the pubkey (possible values: \\\"P2PK\\\", \\\"P2PKH\\\", \\\"P2SH-P2WPKH\\\", \\\"P2WPKH\\\")\\n\"\n-            \"          }\\n\"\n+            \"2. \\\"scanobjects\\\"                  (array, required) Array of scan objects\\n\"\n+            \"    [                             Every scan object is either a string descriptor or an object:\\n\"\n+            \"        \\\"descriptor\\\",             (string, optional) An output descriptor\\n\"\n+            \"        {                         (object, optional) An object with output descriptor and metadata\\n\"\n+            \"          \\\"desc\\\": \\\"descriptor\\\",   (string, required) An output descriptor\\n\"\n+            \"          \\\"range\\\": n,             (numeric, optional) Up to what child index HD chains should be explored (default: 1000)\\n\"\n             \"        },\\n\"\n-            \"      ]\\n\"\n+            \"        ...\\n\"\n+            \"    ]\\n\"",
      "path": "src/rpc/blockchain.cpp",
      "position": 93,
      "original_position": 91,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "79b8939362f8a7ebacf709c3ba3934ec731bc076",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Don't forget to add a command-line example here, it look me a while to figure out the syntax from reading the above.\r\n\r\nI suggest an example with a typical BIP44 (legacy) xpub + BIP49 xpub:\r\n```\r\n[\"pkh(legacy_xpub/0/*)\", \"pkh(legacy_xpub/1/*)\", \"sh(wpkh(segwit_xpub/0/*)\", \"sh(wpkh(segwit_xpub/1/*)\"]\r\n```\r\n\r\nA second example could show the root master xpriv and then do hardened derivation of xpriv/44'/0'/0'/0/* or xpriv/49'/0'/0'/1/*",
      "created_at": "2018-07-21T18:01:04Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r204217254",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204217254"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 2019,
      "original_line": 2018,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204217288",
      "pull_request_review_id": 139264846,
      "id": 204217288,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNDIxNzI4OA==",
      "diff_hunk": "@@ -1984,67 +1985,36 @@ class CoinsViewScanReserver\n     }\n };\n \n-static const char *g_default_scantxoutset_script_types[] = { \"P2PKH\", \"P2SH_P2WPKH\", \"P2WPKH\" };\n-\n-enum class OutputScriptType {\n-    UNKNOWN,\n-    P2PK,\n-    P2PKH,\n-    P2SH_P2WPKH,\n-    P2WPKH\n-};\n-\n-static inline OutputScriptType GetOutputScriptTypeFromString(const std::string& outputtype)\n-{\n-    if (outputtype == \"P2PK\") return OutputScriptType::P2PK;\n-    else if (outputtype == \"P2PKH\") return OutputScriptType::P2PKH;\n-    else if (outputtype == \"P2SH_P2WPKH\") return OutputScriptType::P2SH_P2WPKH;\n-    else if (outputtype == \"P2WPKH\") return OutputScriptType::P2WPKH;\n-    else return OutputScriptType::UNKNOWN;\n-}\n-\n-CTxDestination GetDestinationForKey(const CPubKey& key, OutputScriptType type)\n-{\n-    switch (type) {\n-    case OutputScriptType::P2PKH: return key.GetID();\n-    case OutputScriptType::P2SH_P2WPKH:\n-    case OutputScriptType::P2WPKH: {\n-        if (!key.IsCompressed()) return key.GetID();\n-        CTxDestination witdest = WitnessV0KeyHash(key.GetID());\n-        if (type == OutputScriptType::P2SH_P2WPKH) {\n-            CScript witprog = GetScriptForDestination(witdest);\n-            return CScriptID(witprog);\n-        } else {\n-            return witdest;\n-        }\n-    }\n-    default: assert(false);\n-    }\n-}\n-\n UniValue scantxoutset(const JSONRPCRequest& request)\n {\n     if (request.fHelp || request.params.size() < 1 || request.params.size() > 2)\n         throw std::runtime_error(\n             \"scantxoutset <action> ( <scanobjects> )\\n\"\n-            \"\\nScans the unspent transaction output set for possible entries that matches common scripts of given public keys.\\n\"\n-            \"Using addresses as scanobjects will _not_ detect unspent P2PK txouts\\n\"\n+            \"\\nScans the unspent transaction output set for entries that match certain output descriptors.\\n\"\n+            \"Examples of output descriptors are:\\n\"\n+            \"    addr(<address>)                      Outputs whose scriptPubKey corresponds to the specified address (does not include P2PK)\\n\"\n+            \"    raw(<hex script>)                    Outputs whose scriptPubKey equals the specified hex scripts\\n\"\n+            \"    old(<pubkey>)                        P2PK, P2PKH, P2WPKH, and P2SH-P2WPKH outputs for the given pubkey\\n\"\n+            \"    pkh(<pubkey>)                        P2PKH outputs for the given pubkey\\n\"",
      "path": "src/rpc/blockchain.cpp",
      "position": null,
      "original_position": 62,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "79b8939362f8a7ebacf709c3ba3934ec731bc076",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "`sh(wpkh())` is probably quite common, so maybe add that here?",
      "created_at": "2018-07-21T18:02:28Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r204217288",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204217288"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1999,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204220348",
      "pull_request_review_id": 139267754,
      "id": 204220348,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNDIyMDM0OA==",
      "diff_hunk": "@@ -1984,67 +1985,36 @@ class CoinsViewScanReserver\n     }\n };\n \n-static const char *g_default_scantxoutset_script_types[] = { \"P2PKH\", \"P2SH_P2WPKH\", \"P2WPKH\" };\n-\n-enum class OutputScriptType {\n-    UNKNOWN,\n-    P2PK,\n-    P2PKH,\n-    P2SH_P2WPKH,\n-    P2WPKH\n-};\n-\n-static inline OutputScriptType GetOutputScriptTypeFromString(const std::string& outputtype)\n-{\n-    if (outputtype == \"P2PK\") return OutputScriptType::P2PK;\n-    else if (outputtype == \"P2PKH\") return OutputScriptType::P2PKH;\n-    else if (outputtype == \"P2SH_P2WPKH\") return OutputScriptType::P2SH_P2WPKH;\n-    else if (outputtype == \"P2WPKH\") return OutputScriptType::P2WPKH;\n-    else return OutputScriptType::UNKNOWN;\n-}\n-\n-CTxDestination GetDestinationForKey(const CPubKey& key, OutputScriptType type)\n-{\n-    switch (type) {\n-    case OutputScriptType::P2PKH: return key.GetID();\n-    case OutputScriptType::P2SH_P2WPKH:\n-    case OutputScriptType::P2WPKH: {\n-        if (!key.IsCompressed()) return key.GetID();\n-        CTxDestination witdest = WitnessV0KeyHash(key.GetID());\n-        if (type == OutputScriptType::P2SH_P2WPKH) {\n-            CScript witprog = GetScriptForDestination(witdest);\n-            return CScriptID(witprog);\n-        } else {\n-            return witdest;\n-        }\n-    }\n-    default: assert(false);\n-    }\n-}\n-\n UniValue scantxoutset(const JSONRPCRequest& request)\n {\n     if (request.fHelp || request.params.size() < 1 || request.params.size() > 2)\n         throw std::runtime_error(\n             \"scantxoutset <action> ( <scanobjects> )\\n\"\n-            \"\\nScans the unspent transaction output set for possible entries that matches common scripts of given public keys.\\n\"\n-            \"Using addresses as scanobjects will _not_ detect unspent P2PK txouts\\n\"\n+            \"\\nScans the unspent transaction output set for entries that match certain output descriptors.\\n\"\n+            \"Examples of output descriptors are:\\n\"\n+            \"    addr(<address>)                      Outputs whose scriptPubKey corresponds to the specified address (does not include P2PK)\\n\"\n+            \"    raw(<hex script>)                    Outputs whose scriptPubKey equals the specified hex scripts\\n\"\n+            \"    old(<pubkey>)                        P2PK, P2PKH, P2WPKH, and P2SH-P2WPKH outputs for the given pubkey\\n\"\n+            \"    pkh(<pubkey>)                        P2PKH outputs for the given pubkey\\n\"\n+            \"    sh(multi(<n>,<pubkey>,<pubkey>,...)) P2SH-multisig outputs for the given threshold and pubkeys\\n\"\n+            \"\\nIn the above, <pubkey> either refers to a fixed public key in hexadecimal notation, or to an xpub/xprv optionally followed by one\\n\"\n+            \"or more path elements separated by \\\"/\\\", and optionally ending in \\\"/*\\\" or \\\"/*'\\\" to specify all unhardened or hardened child keys.\\n\"\n+            \"In the latter case, a range needs to be specified by below if different from 1000.\\n\"\n+            \"For more information on output descriptors, see the documentation at TODO\\n\"\n             \"\\nArguments:\\n\"\n             \"1. \\\"action\\\"                       (string, required) The action to execute\\n\"\n             \"                                      \\\"start\\\" for starting a scan\\n\"\n             \"                                      \\\"abort\\\" for aborting the current scan (returns true when abort was successful)\\n\"\n             \"                                      \\\"status\\\" for progress report (in %) of the current scan\\n\"\n-            \"2. \\\"scanobjects\\\"                  (array, optional) Array of scan objects (only one object type per scan object allowed)\\n\"\n-            \"      [\\n\"\n-            \"        { \\\"address\\\" : \\\"<address>\\\" },       (string, optional) Bitcoin address\\n\"\n-            \"        { \\\"script\\\"  : \\\"<scriptPubKey>\\\" },  (string, optional) HEX encoded script (scriptPubKey)\\n\"\n-            \"        { \\\"pubkey\\\"  :                      (object, optional) Public key\\n\"\n-            \"          {\\n\"\n-            \"            \\\"pubkey\\\" : \\\"<pubkey\\\">,         (string, required) HEX encoded public key\\n\"\n-            \"            \\\"script_types\\\" : [ ... ],      (array, optional) Array of script-types to derive from the pubkey (possible values: \\\"P2PK\\\", \\\"P2PKH\\\", \\\"P2SH-P2WPKH\\\", \\\"P2WPKH\\\")\\n\"\n-            \"          }\\n\"\n+            \"2. \\\"scanobjects\\\"                  (array, required) Array of scan objects\\n\"\n+            \"    [                             Every scan object is either a string descriptor or an object:\\n\"\n+            \"        \\\"descriptor\\\",             (string, optional) An output descriptor\\n\"\n+            \"        {                         (object, optional) An object with output descriptor and metadata\\n\"\n+            \"          \\\"desc\\\": \\\"descriptor\\\",   (string, required) An output descriptor\\n\"\n+            \"          \\\"range\\\": n,             (numeric, optional) Up to what child index HD chains should be explored (default: 1000)\\n\"\n             \"        },\\n\"\n-            \"      ]\\n\"\n+            \"        ...\\n\"\n+            \"    ]\\n\"",
      "path": "src/rpc/blockchain.cpp",
      "position": 93,
      "original_position": 91,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "79b8939362f8a7ebacf709c3ba3934ec731bc076",
      "in_reply_to_id": 204217254,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done.",
      "created_at": "2018-07-21T20:02:08Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r204220348",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204220348"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 2019,
      "original_line": 2018,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204220350",
      "pull_request_review_id": 139267758,
      "id": 204220350,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNDIyMDM1MA==",
      "diff_hunk": "@@ -1984,67 +1985,36 @@ class CoinsViewScanReserver\n     }\n };\n \n-static const char *g_default_scantxoutset_script_types[] = { \"P2PKH\", \"P2SH_P2WPKH\", \"P2WPKH\" };\n-\n-enum class OutputScriptType {\n-    UNKNOWN,\n-    P2PK,\n-    P2PKH,\n-    P2SH_P2WPKH,\n-    P2WPKH\n-};\n-\n-static inline OutputScriptType GetOutputScriptTypeFromString(const std::string& outputtype)\n-{\n-    if (outputtype == \"P2PK\") return OutputScriptType::P2PK;\n-    else if (outputtype == \"P2PKH\") return OutputScriptType::P2PKH;\n-    else if (outputtype == \"P2SH_P2WPKH\") return OutputScriptType::P2SH_P2WPKH;\n-    else if (outputtype == \"P2WPKH\") return OutputScriptType::P2WPKH;\n-    else return OutputScriptType::UNKNOWN;\n-}\n-\n-CTxDestination GetDestinationForKey(const CPubKey& key, OutputScriptType type)\n-{\n-    switch (type) {\n-    case OutputScriptType::P2PKH: return key.GetID();\n-    case OutputScriptType::P2SH_P2WPKH:\n-    case OutputScriptType::P2WPKH: {\n-        if (!key.IsCompressed()) return key.GetID();\n-        CTxDestination witdest = WitnessV0KeyHash(key.GetID());\n-        if (type == OutputScriptType::P2SH_P2WPKH) {\n-            CScript witprog = GetScriptForDestination(witdest);\n-            return CScriptID(witprog);\n-        } else {\n-            return witdest;\n-        }\n-    }\n-    default: assert(false);\n-    }\n-}\n-\n UniValue scantxoutset(const JSONRPCRequest& request)\n {\n     if (request.fHelp || request.params.size() < 1 || request.params.size() > 2)\n         throw std::runtime_error(\n             \"scantxoutset <action> ( <scanobjects> )\\n\"\n-            \"\\nScans the unspent transaction output set for possible entries that matches common scripts of given public keys.\\n\"\n-            \"Using addresses as scanobjects will _not_ detect unspent P2PK txouts\\n\"\n+            \"\\nScans the unspent transaction output set for entries that match certain output descriptors.\\n\"\n+            \"Examples of output descriptors are:\\n\"\n+            \"    addr(<address>)                      Outputs whose scriptPubKey corresponds to the specified address (does not include P2PK)\\n\"\n+            \"    raw(<hex script>)                    Outputs whose scriptPubKey equals the specified hex scripts\\n\"\n+            \"    old(<pubkey>)                        P2PK, P2PKH, P2WPKH, and P2SH-P2WPKH outputs for the given pubkey\\n\"\n+            \"    pkh(<pubkey>)                        P2PKH outputs for the given pubkey\\n\"",
      "path": "src/rpc/blockchain.cpp",
      "position": null,
      "original_position": 62,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "79b8939362f8a7ebacf709c3ba3934ec731bc076",
      "in_reply_to_id": 204217288,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done.",
      "created_at": "2018-07-21T20:02:15Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r204220350",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204220350"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1999,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/205713656",
      "pull_request_review_id": 141038847,
      "id": 205713656,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNTcxMzY1Ng==",
      "diff_hunk": "@@ -2090,79 +2060,35 @@ UniValue scantxoutset(const JSONRPCRequest& request)\n \n         // loop through the scan objects\n         for (const UniValue& scanobject : request.params[1].get_array().getValues()) {\n-            if (!scanobject.isObject()) {\n-                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid scan object\");\n-            }\n-            UniValue address_uni = find_value(scanobject, \"address\");\n-            UniValue pubkey_uni  = find_value(scanobject, \"pubkey\");\n-            UniValue script_uni  = find_value(scanobject, \"script\");\n-\n-            // make sure only one object type is present\n-            if (1 != !address_uni.isNull() + !pubkey_uni.isNull() + !script_uni.isNull()) {\n-                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Only one object type is allowed per scan object\");\n-            } else if (!address_uni.isNull() && !address_uni.isStr()) {\n-                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Scanobject \\\"address\\\" must contain a single string as value\");\n-            } else if (!pubkey_uni.isNull() && !pubkey_uni.isObject()) {\n-                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Scanobject \\\"pubkey\\\" must contain an object as value\");\n-            } else if (!script_uni.isNull() && !script_uni.isStr()) {\n-                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Scanobject \\\"script\\\" must contain a single string as value\");\n-            } else if (address_uni.isStr()) {\n-                // type: address\n-                // decode destination and derive the scriptPubKey\n-                // add the script to the scan containers\n-                CTxDestination dest = DecodeDestination(address_uni.get_str());\n-                if (!IsValidDestination(dest)) {\n-                    throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid address\");\n-                }\n-                CScript script = GetScriptForDestination(dest);\n-                assert(!script.empty());\n-                needles.insert(script);\n-            } else if (pubkey_uni.isObject()) {\n-                // type: pubkey\n-                // derive script(s) according to the script_type parameter\n-                UniValue script_types_uni = find_value(pubkey_uni, \"script_types\");\n-                UniValue pubkeydata_uni = find_value(pubkey_uni, \"pubkey\");\n-\n-                // check the script types and use the default if not provided\n-                if (!script_types_uni.isNull() && !script_types_uni.isArray()) {\n-                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"script_types must be an array\");\n-                } else if (script_types_uni.isNull()) {\n-                    // use the default script types\n-                    script_types_uni = UniValue(UniValue::VARR);\n-                    for (const char *t : g_default_scantxoutset_script_types) {\n-                        script_types_uni.push_back(t);\n-                    }\n-                }\n-\n-                // check the acctual pubkey\n-                if (!pubkeydata_uni.isStr() || !IsHex(pubkeydata_uni.get_str())) {\n-                    throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Public key must be hex encoded\");\n-                }\n-                CPubKey pubkey(ParseHexV(pubkeydata_uni, \"pubkey\"));\n-                if (!pubkey.IsFullyValid()) {\n-                    throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid public key\");\n+            std::string desc_str;\n+            int range = 1000;\n+            if (scanobject.isStr()) {\n+                desc_str = scanobject.get_str();\n+            } else if (scanobject.isObject()) {\n+                UniValue desc_uni = find_value(scanobject, \"desc\");\n+                if (desc_uni.isNull()) throw JSONRPCError(RPC_INVALID_PARAMETER, \"Descriptor needs to be provided in scan object\");\n+                desc_str = desc_uni.get_str();\n+                UniValue range_uni = find_value(scanobject, \"range\");\n+                if (!range_uni.isNull()) {\n+                    range = range_uni.get_int();\n+                    if (range < 1 || range > 1000000) throw JSONRPCError(RPC_INVALID_PARAMETER, \"range out of range\");\n                 }\n+            } else {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Scan object needs to be either a string or an object\");\n+            }\n \n-                // loop through the script types and derive the script\n-                for (const UniValue& script_type_uni : script_types_uni.get_array().getValues()) {\n-                    OutputScriptType script_type = GetOutputScriptTypeFromString(script_type_uni.get_str());\n-                    if (script_type == OutputScriptType::UNKNOWN) throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid script type\");\n-                    CScript script;\n-                    if (script_type == OutputScriptType::P2PK) {\n-                        // support legacy P2PK scripts\n-                        script << ToByteVector(pubkey) << OP_CHECKSIG;\n-                    } else {\n-                        script = GetScriptForDestination(GetDestinationForKey(pubkey, script_type));\n-                    }\n-                    assert(!script.empty());\n-                    needles.insert(script);\n+            FlatSigningProvider provider;\n+            auto desc = Parse(desc_str, provider);\n+            if (!desc) {\n+                throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, strprintf(\"Invalid descriptor '%s'\", desc_str));\n+            }\n+            if (!desc->IsRange()) range = 1;\n+            for (int i = 0; i < range; ++i) {",
      "path": "src/rpc/blockchain.cpp",
      "position": null,
      "original_position": 186,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "852cf1f0785cf2ef6de34f0a9c426eacf39f11e8",
      "in_reply_to_id": null,
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Seems like that results in an off-by-one issue (misses last key):\r\nSuggest pulling fix: https://github.com/bitcoin/bitcoin/commit/875431149745cc517350c0620baa887c748d0b35",
      "created_at": "2018-07-27T09:13:18Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r205713656",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/205713656"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2086,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/205854812",
      "pull_request_review_id": 141213208,
      "id": 205854812,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNTg1NDgxMg==",
      "diff_hunk": "@@ -2090,79 +2060,35 @@ UniValue scantxoutset(const JSONRPCRequest& request)\n \n         // loop through the scan objects\n         for (const UniValue& scanobject : request.params[1].get_array().getValues()) {\n-            if (!scanobject.isObject()) {\n-                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid scan object\");\n-            }\n-            UniValue address_uni = find_value(scanobject, \"address\");\n-            UniValue pubkey_uni  = find_value(scanobject, \"pubkey\");\n-            UniValue script_uni  = find_value(scanobject, \"script\");\n-\n-            // make sure only one object type is present\n-            if (1 != !address_uni.isNull() + !pubkey_uni.isNull() + !script_uni.isNull()) {\n-                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Only one object type is allowed per scan object\");\n-            } else if (!address_uni.isNull() && !address_uni.isStr()) {\n-                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Scanobject \\\"address\\\" must contain a single string as value\");\n-            } else if (!pubkey_uni.isNull() && !pubkey_uni.isObject()) {\n-                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Scanobject \\\"pubkey\\\" must contain an object as value\");\n-            } else if (!script_uni.isNull() && !script_uni.isStr()) {\n-                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Scanobject \\\"script\\\" must contain a single string as value\");\n-            } else if (address_uni.isStr()) {\n-                // type: address\n-                // decode destination and derive the scriptPubKey\n-                // add the script to the scan containers\n-                CTxDestination dest = DecodeDestination(address_uni.get_str());\n-                if (!IsValidDestination(dest)) {\n-                    throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid address\");\n-                }\n-                CScript script = GetScriptForDestination(dest);\n-                assert(!script.empty());\n-                needles.insert(script);\n-            } else if (pubkey_uni.isObject()) {\n-                // type: pubkey\n-                // derive script(s) according to the script_type parameter\n-                UniValue script_types_uni = find_value(pubkey_uni, \"script_types\");\n-                UniValue pubkeydata_uni = find_value(pubkey_uni, \"pubkey\");\n-\n-                // check the script types and use the default if not provided\n-                if (!script_types_uni.isNull() && !script_types_uni.isArray()) {\n-                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"script_types must be an array\");\n-                } else if (script_types_uni.isNull()) {\n-                    // use the default script types\n-                    script_types_uni = UniValue(UniValue::VARR);\n-                    for (const char *t : g_default_scantxoutset_script_types) {\n-                        script_types_uni.push_back(t);\n-                    }\n-                }\n-\n-                // check the acctual pubkey\n-                if (!pubkeydata_uni.isStr() || !IsHex(pubkeydata_uni.get_str())) {\n-                    throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Public key must be hex encoded\");\n-                }\n-                CPubKey pubkey(ParseHexV(pubkeydata_uni, \"pubkey\"));\n-                if (!pubkey.IsFullyValid()) {\n-                    throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid public key\");\n+            std::string desc_str;\n+            int range = 1000;\n+            if (scanobject.isStr()) {\n+                desc_str = scanobject.get_str();\n+            } else if (scanobject.isObject()) {\n+                UniValue desc_uni = find_value(scanobject, \"desc\");\n+                if (desc_uni.isNull()) throw JSONRPCError(RPC_INVALID_PARAMETER, \"Descriptor needs to be provided in scan object\");\n+                desc_str = desc_uni.get_str();\n+                UniValue range_uni = find_value(scanobject, \"range\");\n+                if (!range_uni.isNull()) {\n+                    range = range_uni.get_int();\n+                    if (range < 1 || range > 1000000) throw JSONRPCError(RPC_INVALID_PARAMETER, \"range out of range\");\n                 }\n+            } else {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Scan object needs to be either a string or an object\");\n+            }\n \n-                // loop through the script types and derive the script\n-                for (const UniValue& script_type_uni : script_types_uni.get_array().getValues()) {\n-                    OutputScriptType script_type = GetOutputScriptTypeFromString(script_type_uni.get_str());\n-                    if (script_type == OutputScriptType::UNKNOWN) throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid script type\");\n-                    CScript script;\n-                    if (script_type == OutputScriptType::P2PK) {\n-                        // support legacy P2PK scripts\n-                        script << ToByteVector(pubkey) << OP_CHECKSIG;\n-                    } else {\n-                        script = GetScriptForDestination(GetDestinationForKey(pubkey, script_type));\n-                    }\n-                    assert(!script.empty());\n-                    needles.insert(script);\n+            FlatSigningProvider provider;\n+            auto desc = Parse(desc_str, provider);\n+            if (!desc) {\n+                throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, strprintf(\"Invalid descriptor '%s'\", desc_str));\n+            }\n+            if (!desc->IsRange()) range = 1;\n+            for (int i = 0; i < range; ++i) {",
      "path": "src/rpc/blockchain.cpp",
      "position": null,
      "original_position": 186,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "852cf1f0785cf2ef6de34f0a9c426eacf39f11e8",
      "in_reply_to_id": 205713656,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "BIP32 indexes are 0-based, so I think the current code is correct. If you expand 1000 keys, those will be indices 0 through 999.",
      "created_at": "2018-07-27T18:02:39Z",
      "updated_at": "2018-07-27T19:21:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r205854812",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/205854812"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2086,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207197458",
      "pull_request_review_id": 142757687,
      "id": 207197458,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNzE5NzQ1OA==",
      "diff_hunk": "@@ -36,13 +52,39 @@ def run_test(self):\n \n         self.restart_node(0, ['-nowallet'])\n         self.log.info(\"Test if we have found the non HD unspent outputs.\")\n-        assert_equal(self.nodes[0].scantxoutset(\"start\", [ {\"pubkey\": {\"pubkey\": pubk1}}, {\"pubkey\": {\"pubkey\": pubk2}}, {\"pubkey\": {\"pubkey\": pubk3}}])['total_amount'], 6)\n-        assert_equal(self.nodes[0].scantxoutset(\"start\", [ {\"address\": addr_P2SH_SEGWIT}, {\"address\": addr_LEGACY}, {\"address\": addr_BECH32}])['total_amount'], 6)\n-        assert_equal(self.nodes[0].scantxoutset(\"start\", [ {\"address\": addr_P2SH_SEGWIT}, {\"address\": addr_LEGACY}, {\"pubkey\": {\"pubkey\": pubk3}} ])['total_amount'], 6)\n+        assert_equal(self.nodes[0].scantxoutset(\"start\", [ \"pkh(\" + pubk1 + \")\", \"pkh(\" + pubk2 + \")\", \"pkh(\" + pubk3 + \")\"])['total_amount'], Decimal(\"0.002\"))\n+        assert_equal(self.nodes[0].scantxoutset(\"start\", [ \"wpkh(\" + pubk1 + \")\", \"wpkh(\" + pubk2 + \")\", \"wpkh(\" + pubk3 + \")\"])['total_amount'], Decimal(\"0.004\"))\n+        assert_equal(self.nodes[0].scantxoutset(\"start\", [ \"sh(wpkh(\" + pubk1 + \"))\", \"sh(wpkh(\" + pubk2 + \"))\", \"sh(wpkh(\" + pubk3 + \"))\"])['total_amount'], Decimal(\"0.001\"))\n+        assert_equal(self.nodes[0].scantxoutset(\"start\", [ \"combo(\" + pubk1 + \")\", \"combo(\" + pubk2 + \")\", \"combo(\" + pubk3 + \")\"])['total_amount'], Decimal(\"0.007\"))\n+        assert_equal(self.nodes[0].scantxoutset(\"start\", [ \"addr(\" + addr_P2SH_SEGWIT + \")\", \"addr(\" + addr_LEGACY + \")\", \"addr(\" + addr_BECH32 + \")\"])['total_amount'], Decimal(\"0.007\"))\n+        assert_equal(self.nodes[0].scantxoutset(\"start\", [ \"addr(\" + addr_P2SH_SEGWIT + \")\", \"addr(\" + addr_LEGACY + \")\", \"combo(\" + pubk3 + \")\"])['total_amount'], Decimal(\"0.007\"))\n \n-        self.log.info(\"Test invalid parameters.\")\n-        assert_raises_rpc_error(-8, 'Scanobject \"pubkey\" must contain an object as value', self.nodes[0].scantxoutset, \"start\", [ {\"pubkey\": pubk1}]) #missing pubkey object\n-        assert_raises_rpc_error(-8, 'Scanobject \"address\" must contain a single string as value', self.nodes[0].scantxoutset, \"start\", [ {\"address\": {\"address\": addr_P2SH_SEGWIT}}]) #invalid object for address object\n+        self.log.info(\"Test extended key derivation.\")\n+        assert_equal(self.nodes[0].scantxoutset(\"start\", [ \"combo(tprv8ZgxMBicQKsPd7Uf69XL1XwhmjHopUGep8GuEiJDZmbQz6o58LninorQAfcKZWARbtRtfnLcJ5MQ2AtHcQJCCRUcMRvmDUjyEmNUWwx8UbK/0'/0h/0h)\"])['total_amount'], Decimal(\"0.008\"))\n+        assert_equal(self.nodes[0].scantxoutset(\"start\", [ \"combo(tprv8ZgxMBicQKsPd7Uf69XL1XwhmjHopUGep8GuEiJDZmbQz6o58LninorQAfcKZWARbtRtfnLcJ5MQ2AtHcQJCCRUcMRvmDUjyEmNUWwx8UbK/0'/0'/1h)\"])['total_amount'], Decimal(\"0.016\"))\n+        assert_equal(self.nodes[0].scantxoutset(\"start\", [ \"combo(tprv8ZgxMBicQKsPd7Uf69XL1XwhmjHopUGep8GuEiJDZmbQz6o58LninorQAfcKZWARbtRtfnLcJ5MQ2AtHcQJCCRUcMRvmDUjyEmNUWwx8UbK/0h/0'/1500')\"])['total_amount'], Decimal(\"0.032\"))\n+        assert_equal(self.nodes[0].scantxoutset(\"start\", [ \"combo(tprv8ZgxMBicQKsPd7Uf69XL1XwhmjHopUGep8GuEiJDZmbQz6o58LninorQAfcKZWARbtRtfnLcJ5MQ2AtHcQJCCRUcMRvmDUjyEmNUWwx8UbK/0h/0h/0)\"])['total_amount'], Decimal(\"0.064\"))\n+        assert_equal(self.nodes[0].scantxoutset(\"start\", [ \"combo(tprv8ZgxMBicQKsPd7Uf69XL1XwhmjHopUGep8GuEiJDZmbQz6o58LninorQAfcKZWARbtRtfnLcJ5MQ2AtHcQJCCRUcMRvmDUjyEmNUWwx8UbK/0'/0h/1)\"])['total_amount'], Decimal(\"0.128\"))\n+        assert_equal(self.nodes[0].scantxoutset(\"start\", [ \"combo(tprv8ZgxMBicQKsPd7Uf69XL1XwhmjHopUGep8GuEiJDZmbQz6o58LninorQAfcKZWARbtRtfnLcJ5MQ2AtHcQJCCRUcMRvmDUjyEmNUWwx8UbK/0h/0'/1500)\"])['total_amount'], Decimal(\"0.256\"))\n+        assert_equal(self.nodes[0].scantxoutset(\"start\", [ {\"desc\": \"combo(tprv8ZgxMBicQKsPd7Uf69XL1XwhmjHopUGep8GuEiJDZmbQz6o58LninorQAfcKZWARbtRtfnLcJ5MQ2AtHcQJCCRUcMRvmDUjyEmNUWwx8UbK/0'/0h/*h)\", \"range\": 1499}])['total_amount'], Decimal(\"0.024\"))\n+        assert_equal(self.nodes[0].scantxoutset(\"start\", [ {\"desc\": \"combo(tprv8ZgxMBicQKsPd7Uf69XL1XwhmjHopUGep8GuEiJDZmbQz6o58LninorQAfcKZWARbtRtfnLcJ5MQ2AtHcQJCCRUcMRvmDUjyEmNUWwx8UbK/0'/0'/*h)\", \"range\": 1500}])['total_amount'], Decimal(\"0.056\"))\n+        assert_equal(self.nodes[0].scantxoutset(\"start\", [ {\"desc\": \"combo(tprv8ZgxMBicQKsPd7Uf69XL1XwhmjHopUGep8GuEiJDZmbQz6o58LninorQAfcKZWARbtRtfnLcJ5MQ2AtHcQJCCRUcMRvmDUjyEmNUWwx8UbK/0h/0'/*)\", \"range\": 1499}])['total_amount'], Decimal(\"0.192\"))\n+        assert_equal(self.nodes[0].scantxoutset(\"start\", [ {\"desc\": \"combo(tprv8ZgxMBicQKsPd7Uf69XL1XwhmjHopUGep8GuEiJDZmbQz6o58LninorQAfcKZWARbtRtfnLcJ5MQ2AtHcQJCCRUcMRvmDUjyEmNUWwx8UbK/0'/0h/*)\", \"range\": 1500}])['total_amount'], Decimal(\"0.448\"))\n+        assert_equal(self.nodes[0].scantxoutset(\"start\", [ \"combo(tprv8ZgxMBicQKsPd7Uf69XL1XwhmjHopUGep8GuEiJDZmbQz6o58LninorQAfcKZWARbtRtfnLcJ5MQ2AtHcQJCCRUcMRvmDUjyEmNUWwx8UbK/1/1/0')\"])['total_amount'], Decimal(\"0.512\"))\n+        assert_equal(self.nodes[0].scantxoutset(\"start\", [ \"combo(tprv8ZgxMBicQKsPd7Uf69XL1XwhmjHopUGep8GuEiJDZmbQz6o58LninorQAfcKZWARbtRtfnLcJ5MQ2AtHcQJCCRUcMRvmDUjyEmNUWwx8UbK/1/1/1')\"])['total_amount'], Decimal(\"1.024\"))\n+        assert_equal(self.nodes[0].scantxoutset(\"start\", [ \"combo(tprv8ZgxMBicQKsPd7Uf69XL1XwhmjHopUGep8GuEiJDZmbQz6o58LninorQAfcKZWARbtRtfnLcJ5MQ2AtHcQJCCRUcMRvmDUjyEmNUWwx8UbK/1/1/1500h)\"])['total_amount'], Decimal(\"2.048\"))\n+        assert_equal(self.nodes[0].scantxoutset(\"start\", [ \"combo(tprv8ZgxMBicQKsPd7Uf69XL1XwhmjHopUGep8GuEiJDZmbQz6o58LninorQAfcKZWARbtRtfnLcJ5MQ2AtHcQJCCRUcMRvmDUjyEmNUWwx8UbK/1/1/0)\"])['total_amount'], Decimal(\"4.096\"))\n+        assert_equal(self.nodes[0].scantxoutset(\"start\", [ \"combo(tprv8ZgxMBicQKsPd7Uf69XL1XwhmjHopUGep8GuEiJDZmbQz6o58LninorQAfcKZWARbtRtfnLcJ5MQ2AtHcQJCCRUcMRvmDUjyEmNUWwx8UbK/1/1/1)\"])['total_amount'], Decimal(\"8.192\"))\n+        assert_equal(self.nodes[0].scantxoutset(\"start\", [ \"combo(tprv8ZgxMBicQKsPd7Uf69XL1XwhmjHopUGep8GuEiJDZmbQz6o58LninorQAfcKZWARbtRtfnLcJ5MQ2AtHcQJCCRUcMRvmDUjyEmNUWwx8UbK/1/1/1500)\"])['total_amount'], Decimal(\"16.384\"))\n+        assert_equal(self.nodes[0].scantxoutset(\"start\", [ \"combo(tpubD6NzVbkrYhZ4WaWSyoBvQwbpLkojyoTZPRsgXELWz3Popb3qkjcJyJUGLnL4qHHoQvao8ESaAstxYSnhyswJ76uZPStJRJCTKvosUCJZL5B/1/1/0)\"])['total_amount'], Decimal(\"4.096\"))\n+        assert_equal(self.nodes[0].scantxoutset(\"start\", [ \"combo(tpubD6NzVbkrYhZ4WaWSyoBvQwbpLkojyoTZPRsgXELWz3Popb3qkjcJyJUGLnL4qHHoQvao8ESaAstxYSnhyswJ76uZPStJRJCTKvosUCJZL5B/1/1/1)\"])['total_amount'], Decimal(\"8.192\"))\n+        assert_equal(self.nodes[0].scantxoutset(\"start\", [ \"combo(tpubD6NzVbkrYhZ4WaWSyoBvQwbpLkojyoTZPRsgXELWz3Popb3qkjcJyJUGLnL4qHHoQvao8ESaAstxYSnhyswJ76uZPStJRJCTKvosUCJZL5B/1/1/1500)\"])['total_amount'], Decimal(\"16.384\"))\n+        assert_equal(self.nodes[0].scantxoutset(\"start\", [ {\"desc\": \"combo(tprv8ZgxMBicQKsPd7Uf69XL1XwhmjHopUGep8GuEiJDZmbQz6o58LninorQAfcKZWARbtRtfnLcJ5MQ2AtHcQJCCRUcMRvmDUjyEmNUWwx8UbK/1/1/*')\", \"range\": 1499}])['total_amount'], Decimal(\"1.536\"))",
      "path": "test/functional/rpc_scantxoutset.py",
      "position": 66,
      "original_position": 66,
      "commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "original_commit_id": "f6b7fc349ccf9cfbeb7e91e19c20e2a2fcc9026f",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Maybe use `range: 1` and `range: 2` everywhere to speed up these tests?",
      "created_at": "2018-08-02T11:52:11Z",
      "updated_at": "2018-08-02T11:52:12Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/13697#discussion_r207197458",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207197458"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13697"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 82,
      "original_line": 82,
      "side": "RIGHT"
    }
  ]
}