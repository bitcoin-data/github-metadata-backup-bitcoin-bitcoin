{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732",
    "id": 352388288,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MzUyMzg4Mjg4",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17732",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/17732.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/17732.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17732",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17732/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/98d03f0346ec8856987dda37ab3d99a9f886f409",
    "number": 17732,
    "state": "closed",
    "locked": true,
    "maintainer_can_modify": false,
    "title": "test: check for valgrind presence and set appropriate exit flags",
    "user": {
      "login": "brakmic",
      "id": 56779,
      "node_id": "MDQ6VXNlcjU2Nzc5",
      "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brakmic",
      "html_url": "https://github.com/brakmic",
      "followers_url": "https://api.github.com/users/brakmic/followers",
      "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
      "organizations_url": "https://api.github.com/users/brakmic/orgs",
      "repos_url": "https://api.github.com/users/brakmic/repos",
      "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/brakmic/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This PR fixes #17724. \r\n\r\nIt checks for valgrind's presence and version number. \r\n\r\nThis information will be used to decide whether the flag --exit-on-first-error should be active or not.\r\n\r\nVersions >=3.14 will have it activated by default.",
    "labels": [
      {
        "id": 62963516,
        "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
        "name": "Tests",
        "color": "d4c5f9",
        "default": false
      }
    ],
    "active_lock_reason": "resolved",
    "created_at": "2019-12-12T12:24:37Z",
    "updated_at": "2022-08-04T14:41:07Z",
    "closed_at": "2020-05-10T19:57:35Z",
    "mergeable_state": "unknown",
    "merge_commit_sha": "711a834bbab9e6919566e7c0eb70e69eeb93c002",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "head": {
      "label": "brakmic:valgrind-detection",
      "ref": "valgrind-detection",
      "sha": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "user": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "88d8b4e182bfc75e8496f7046af7aab93307b9d0",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 34348,
        "stargazers_count": 69853,
        "watchers_count": 69853,
        "size": 234261,
        "default_branch": "master",
        "open_issues_count": 631,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-08T22:17:10Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-06-09T07:25:15Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 30,
    "deletions": 7,
    "changed_files": 1,
    "commits": 1,
    "review_comments": 50,
    "comments": 5
  },
  "events": [
    {
      "event": "labeled",
      "id": 2877744777,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDI4Nzc3NDQ3Nzc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2877744777",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-12-12T12:29:48Z",
      "label": {
        "name": "Tests",
        "color": "d4c5f9"
      }
    },
    {
      "event": "reviewed",
      "id": 331204844,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzMxMjA0ODQ0",
      "url": null,
      "actor": null,
      "commit_id": "d9b5bd7372e873baa158a065147f4ddfe59eb5fd",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept ACK",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#pullrequestreview-331204844",
      "submitted_at": "2019-12-12T12:51:48Z",
      "state": "CHANGES_REQUESTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
    },
    {
      "event": "reviewed",
      "id": 331203403,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzMxMjAzNDAz",
      "url": null,
      "actor": null,
      "commit_id": "d9b5bd7372e873baa158a065147f4ddfe59eb5fd",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept/approach ACK. Could be helpful to describe how to test this in the PR description. A few nits below.",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#pullrequestreview-331203403",
      "submitted_at": "2019-12-12T12:55:46Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
    },
    {
      "event": "reviewed",
      "id": 331250064,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzMxMjUwMDY0",
      "url": null,
      "actor": null,
      "commit_id": "d9b5bd7372e873baa158a065147f4ddfe59eb5fd",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#pullrequestreview-331250064",
      "submitted_at": "2019-12-12T14:03:14Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
    },
    {
      "event": "mentioned",
      "id": 2878055112,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50Mjg3ODA1NTExMg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2878055112",
      "actor": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-12-12T14:11:08Z"
    },
    {
      "event": "subscribed",
      "id": 2878055116,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDI4NzgwNTUxMTY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2878055116",
      "actor": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-12-12T14:11:08Z"
    },
    {
      "event": "mentioned",
      "id": 2878075765,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50Mjg3ODA3NTc2NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2878075765",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-12-12T14:16:46Z"
    },
    {
      "event": "subscribed",
      "id": 2878075769,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDI4NzgwNzU3Njk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2878075769",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-12-12T14:16:46Z"
    },
    {
      "event": "reviewed",
      "id": 331251357,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzMxMjUxMzU3",
      "url": null,
      "actor": null,
      "commit_id": "d9b5bd7372e873baa158a065147f4ddfe59eb5fd",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK on the general idea of enabling `--exit-on-first-error` for Valgrind version 3.14 and above only :)",
      "user": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#pullrequestreview-331251357",
      "submitted_at": "2019-12-12T14:19:16Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
    },
    {
      "event": "mentioned",
      "id": 2878091397,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50Mjg3ODA5MTM5Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2878091397",
      "actor": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-12-12T14:20:52Z"
    },
    {
      "event": "subscribed",
      "id": 2878091399,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDI4NzgwOTEzOTk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2878091399",
      "actor": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-12-12T14:20:52Z"
    },
    {
      "event": "reviewed",
      "id": 331294647,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzMxMjk0NjQ3",
      "url": null,
      "actor": null,
      "commit_id": "f59541707e47918526daa3c5b714f1f79ac1438f",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#pullrequestreview-331294647",
      "submitted_at": "2019-12-12T15:09:11Z",
      "state": "CHANGES_REQUESTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
    },
    {
      "event": "reviewed",
      "id": 331300555,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzMxMzAwNTU1",
      "url": null,
      "actor": null,
      "commit_id": "28eabc865301a1a6f2fae21f3385e9e7a99ef021",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "",
      "user": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#pullrequestreview-331300555",
      "submitted_at": "2019-12-12T15:22:09Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
    },
    {
      "event": "reviewed",
      "id": 331321558,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzMxMzIxNTU4",
      "url": null,
      "actor": null,
      "commit_id": "130435997931f7086229f057df968f41d845efd5",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "",
      "user": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#pullrequestreview-331321558",
      "submitted_at": "2019-12-12T15:59:55Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
    },
    {
      "event": "reviewed",
      "id": 331354844,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzMxMzU0ODQ0",
      "url": null,
      "actor": null,
      "commit_id": "3ed9706357126ac7d65c7e0f023b497c1749b2fa",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "",
      "user": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#pullrequestreview-331354844",
      "submitted_at": "2019-12-12T16:25:18Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
    },
    {
      "event": "reviewed",
      "id": 331432026,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzMxNDMyMDI2",
      "url": null,
      "actor": null,
      "commit_id": "f10ca181b6958d6a78eb6eab1d884536ff36c601",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Tested f10ca18 with valgrind 3.14, the code changes in my comments below (feel free to pick and choose), and this `print`, which show that the valgrind version is being parsed correctly and the exit flag set.\r\n```python3\r\nprint(\"Running tests with valgrind {} and flag {}\"\r\n      .format(valgrind_version, self.valgrind_early_exit(valgrind_version)))\r\n```\r\n```bash\r\n$ tool_wallet.py --valgrind\r\n2019-12-12T20:09:32.902000Z TestFramework (INFO): Initializing test directory /tmp/bitcoin_func_test_7jnxbiit\r\nRunning tests with valgrind (3, 14) and flag --exit-on-first-error=yes\r\n```",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#pullrequestreview-331432026",
      "submitted_at": "2019-12-12T20:22:46Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
    },
    {
      "event": "commented",
      "id": 565196211,
      "node_id": "MDEyOklzc3VlQ29tbWVudDU2NTE5NjIxMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/565196211",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-12-12T21:32:26Z",
      "updated_at": "2019-12-12T21:32:26Z",
      "author_association": "MEMBER",
      "body": "Partial tested ACK 9a61f78\r\n\r\nAfter removing valgrind:\r\n```bash\r\n$ test/functional/tool_wallet.py  --valgrind\r\n2019-12-12T21:23:04.053000Z TestFramework (INFO): Initializing test directory /tmp/bitcoin_func_test_0212zhle\r\n2019-12-12T21:23:04.054000Z TestFramework (ERROR): Unexpected exception caught during testing\r\nTraceback (most recent call last):\r\n  File \"/home/jon/projects/bitcoin/bitcoin/test/functional/test_framework/test_framework.py\", line 111, in main\r\n    self.setup()\r\n  File \"/home/jon/projects/bitcoin/bitcoin/test/functional/test_framework/test_framework.py\", line 226, in setup\r\n    self.setup_network()\r\n  File \"/home/jon/projects/bitcoin/bitcoin/test/functional/test_framework/test_framework.py\", line 315, in setup_network\r\n    self.setup_nodes()\r\n  File \"/home/jon/projects/bitcoin/bitcoin/test/functional/test_framework/test_framework.py\", line 339, in setup_nodes\r\n    self.add_nodes(self.num_nodes, extra_args)\r\n  File \"/home/jon/projects/bitcoin/bitcoin/test/functional/test_framework/test_framework.py\", line 403, in add_nodes\r\n    use_valgrind=self.options.valgrind,\r\n  File \"/home/jon/projects/bitcoin/bitcoin/test/functional/test_framework/test_node.py\", line 104, in __init__\r\n    raise Exception('Valgrind not present')\r\nException: Valgrind not present\r\n```\r\nAfter reinstalling valgrind 3.14 and adding this `print` statement to the bottom of the `if use_valgrind` block:\r\n```python\r\nprint(\"Running tests with valgrind {} and flag {}\"\r\n      .format(valgrind_version, self.valgrind_early_exit(valgrind_version)))\r\n```\r\n```bash\r\n$ test/functional/tool_wallet.py  --valgrind\r\n2019-12-12T21:24:04.216000Z TestFramework (INFO): Initializing test directory /tmp/bitcoin_func_test_w4dpyzgc\r\nRunning tests with valgrind (3, 14) and flag --exit-on-first-error=yes\r\n```\r\nNot tested: running tests with valgrind version < 3.14.",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#issuecomment-565196211",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17732"
    },
    {
      "event": "commented",
      "id": 566046977,
      "node_id": "MDEyOklzc3VlQ29tbWVudDU2NjA0Njk3Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/566046977",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-12-16T12:48:45Z",
      "updated_at": "2019-12-16T12:48:45Z",
      "author_association": "MEMBER",
      "body": "On macOS I'm seeing the right error when valgrind is missing, but then it goes into an infinite recursion:\r\n\r\n```\r\n2019-12-16T12:47:33.219000Z TestFramework (ERROR): Unexpected exception caught during testing\r\nTraceback (most recent call last):\r\n  File \"/Users/sjors/dev/bitcoin/test/functional/test_framework/test_framework.py\", line 111, in main\r\n    self.setup()\r\n  File \"/Users/sjors/dev/bitcoin/test/functional/test_framework/test_framework.py\", line 226, in setup\r\n    self.setup_network()\r\n  File \"test/functional/wallet_dump.py\", line 98, in setup_network\r\n    self.add_nodes(self.num_nodes, extra_args=self.extra_args)\r\n  File \"/Users/sjors/dev/bitcoin/test/functional/test_framework/test_framework.py\", line 403, in add_nodes\r\n    use_valgrind=self.options.valgrind,\r\n  File \"/Users/sjors/dev/bitcoin/test/functional/test_framework/test_node.py\", line 104, in __init__\r\n    raise Exception('Valgrind not present')\r\nException: Valgrind not present\r\nException ignored in: <bound method TestNode.__del__ of <test_framework.test_node.TestNode object at 0x103280be0>>\r\nTraceback (most recent call last):\r\n  File \"/Users/sjors/dev/bitcoin/test/functional/test_framework/test_node.py\", line 182, in __del__\r\n    if self.process and self.cleanup_on_exit:\r\n  File \"/Users/sjors/dev/bitcoin/test/functional/test_framework/test_node.py\", line 191, in __getattr__\r\n    if self.use_cli:\r\n  File \"/Users/sjors/dev/bitcoin/test/functional/test_framework/test_node.py\", line 191, in __getattr__\r\n    if self.use_cli:\r\n...\r\n  File \"/Users/sjors/dev/bitcoin/test/functional/test_framework/test_node.py\", line 191, in __getattr__\r\n    if self.use_cli:\r\nRecursionError: maximum recursion depth exceeded\r\n2019-12-16T12:47:33.302000Z TestFramework (INFO): Stopping nodes\r\n```",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#issuecomment-566046977",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17732"
    },
    {
      "event": "commented",
      "id": 566097989,
      "node_id": "MDEyOklzc3VlQ29tbWVudDU2NjA5Nzk4OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/566097989",
      "actor": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-12-16T15:01:26Z",
      "updated_at": "2019-12-16T15:25:38Z",
      "author_association": "CONTRIBUTOR",
      "body": "> On macOS I'm seeing the right error when valgrind is missing, but then it goes into an infinite recursion:\r\n>\r\n>   File \"/Users/sjors/dev/bitcoin/test/functional/test_framework/test_node.py\", line 191, in __getattr__\r\n>     if self.use_cli:\r\n> RecursionError: maximum recursion depth exceeded\r\n> 2019-12-16T12:47:33.302000Z TestFramework (INFO): Stopping nodes\r\n> ```\r\n\r\nThe **__ del __** method doesn't have a try-catch block. When I put one it prevents the recursion. Not sure if I should change unrelated code here. Maybe I should wait for input from people who coded it in the first place?",
      "user": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#issuecomment-566097989",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17732"
    },
    {
      "event": "commented",
      "id": 568196144,
      "node_id": "MDEyOklzc3VlQ29tbWVudDU2ODE5NjE0NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/568196144",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-12-21T17:05:00Z",
      "updated_at": "2019-12-21T17:05:00Z",
      "author_association": "MEMBER",
      "body": "@jnewbery?",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#issuecomment-568196144",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17732"
    },
    {
      "event": "mentioned",
      "id": 2902789265,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MjkwMjc4OTI2NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2902789265",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-12-21T17:05:00Z"
    },
    {
      "event": "subscribed",
      "id": 2902789266,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDI5MDI3ODkyNjY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2902789266",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-12-21T17:05:00Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5OGQwM2YwMzQ2ZWM4ODU2OTg3ZGRhMzdhYjNkOTlhOWY4ODZmNDA5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/98d03f0346ec8856987dda37ab3d99a9f886f409",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/98d03f0346ec8856987dda37ab3d99a9f886f409",
      "tree": {
        "sha": "5aa4123bb0391cf6e2ab4637d7756f597318e95b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5aa4123bb0391cf6e2ab4637d7756f597318e95b"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 5aa4123bb0391cf6e2ab4637d7756f597318e95b\nparent 88d8b4e182bfc75e8496f7046af7aab93307b9d0\nauthor Harris <brakmic@gmail.com> 1576183203 +0100\ncommitter Harris <brakmic@gmail.com> 1589096405 +0200\n\ntest: check for valgrind presence and set appropriate exit flags\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQEzBAABCAAdFiEED2bWxOeRx//n2QOeJiaFvHjtEfsFAl63r9UACgkQJiaFvHjt\nEfuwzgf/V5xlDR8FzC3OKNSEdMWQYGpwTvSmeJeNRBshCscpoH+INhGtmpKFzzlW\njp+lP3CKM32ABeFXdLHcPG6aRSwHDe2nk1HvJqNIfdy1dmvcFeHx4qrjd+tQ/3dj\nOSx3MaDWOaYdbHMbbJb4A4iCMZQlGTETM9EcaiAZ68236yGAhBnZNo0tihvie9LM\nXbK0r96psXZkvygHcssG/DKvYT16JOqO2Xe1Mk32ngFC56EpkqgBFRzzumIRhWx4\nd1TkbedxUGsqKFhYwkMmc6BSCX3yEs03YyoLfSfXSqyNMsLbbFtFfmXRzobpUrD7\neX9YaFB7zeVhwE3aLdvCxIY0NZrcAQ==\n=dWKP\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/88d8b4e182bfc75e8496f7046af7aab93307b9d0",
          "sha": "88d8b4e182bfc75e8496f7046af7aab93307b9d0",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/88d8b4e182bfc75e8496f7046af7aab93307b9d0"
        }
      ],
      "message": "test: check for valgrind presence and set appropriate exit flags",
      "committer": {
        "name": "Harris",
        "email": "brakmic@gmail.com",
        "date": "2020-05-10T07:40:05Z"
      },
      "author": {
        "name": "Harris",
        "email": "brakmic@gmail.com",
        "date": "2019-12-12T20:40:03Z"
      },
      "sha": "98d03f0346ec8856987dda37ab3d99a9f886f409"
    },
    {
      "event": "closed",
      "id": 3320642841,
      "node_id": "MDExOkNsb3NlZEV2ZW50MzMyMDY0Mjg0MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3320642841",
      "actor": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-10T19:57:35Z"
    },
    {
      "event": "labeled",
      "id": 3465524362,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDM0NjU1MjQzNjI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3465524362",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-06-21T13:43:10Z",
      "label": {
        "name": "Up for grabs",
        "color": "99a810"
      }
    },
    {
      "event": "locked",
      "id": 6073890043,
      "node_id": "LOE_lADOABII584gAShzzwAAAAFqCDT7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6073890043",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-15T10:45:55Z",
      "lock_reason": "resolved"
    },
    {
      "event": "unlabeled",
      "id": 7128534010,
      "node_id": "UNLE_lADOABII584gAShzzwAAAAGo5Mv6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7128534010",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-08-04T14:40:55Z",
      "label": {
        "name": "Up for grabs",
        "color": "99a810"
      }
    },
    {
      "event": "commented",
      "id": 1205352904,
      "node_id": "IC_kwDOABII585H2DnI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1205352904",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-08-04T14:41:06Z",
      "updated_at": "2022-08-04T14:41:06Z",
      "author_association": "MEMBER",
      "body": "Removing up for grabs. See https://github.com/bitcoin/bitcoin/issues/17724#issuecomment-1205352392.",
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#issuecomment-1205352904",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17732"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357124904",
      "pull_request_review_id": 331203403,
      "id": 357124904,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzEyNDkwNA==",
      "diff_hunk": "@@ -97,14 +97,16 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             \"-debugexclude=leveldb\",\n             \"-uacomment=testnode%d\" % i,\n         ]\n-        if use_valgrind:\n+        if self.is_valgrind_present() and use_valgrind:\n+            exit_on_first_error = self.should_exit_valgrind_on_first_error()\n             default_suppressions_file = os.path.join(\n                 os.path.dirname(os.path.realpath(__file__)),\n                 \"..\", \"..\", \"..\", \"contrib\", \"valgrind.supp\")\n             suppressions_file = os.getenv(\"VALGRIND_SUPPRESSIONS_FILE\",\n                                           default_suppressions_file)\n             self.args = [\"valgrind\", \"--suppressions={}\".format(suppressions_file),\n-                         \"--gen-suppressions=all\", \"--exit-on-first-error=yes\",\n+                         \"--gen-suppressions=all\",\n+                         \"--exit-on-first-error=yes\" if exit_on_first_error else \"--exit-on-first-error=no\",",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 15,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "d9b5bd7372e873baa158a065147f4ddfe59eb5fd",
      "in_reply_to_id": null,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "perhaps construct this string outside of the arg array assignment, or do:\r\n```python3\r\n \"--exit-on-first-error={}\".format(\"yes\" if exit_on_first_error else \"no\"),\r\n```",
      "created_at": "2019-12-12T12:45:28Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357124904",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357124904"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 109,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357126002",
      "pull_request_review_id": 331204844,
      "id": 357126002,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzEyNjAwMg==",
      "diff_hunk": "@@ -97,14 +97,16 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             \"-debugexclude=leveldb\",\n             \"-uacomment=testnode%d\" % i,\n         ]\n-        if use_valgrind:\n+        if self.is_valgrind_present() and use_valgrind:",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 5,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "d9b5bd7372e873baa158a065147f4ddfe59eb5fd",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This won't throw an error if `--valgrind` is used on a system without valgrind.",
      "created_at": "2019-12-12T12:48:12Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357126002",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357126002"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 100,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357126161",
      "pull_request_review_id": 331203403,
      "id": 357126161,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzEyNjE2MQ==",
      "diff_hunk": "@@ -97,14 +97,16 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             \"-debugexclude=leveldb\",\n             \"-uacomment=testnode%d\" % i,\n         ]\n-        if use_valgrind:\n+        if self.is_valgrind_present() and use_valgrind:\n+            exit_on_first_error = self.should_exit_valgrind_on_first_error()\n             default_suppressions_file = os.path.join(\n                 os.path.dirname(os.path.realpath(__file__)),\n                 \"..\", \"..\", \"..\", \"contrib\", \"valgrind.supp\")\n             suppressions_file = os.getenv(\"VALGRIND_SUPPRESSIONS_FILE\",\n                                           default_suppressions_file)\n             self.args = [\"valgrind\", \"--suppressions={}\".format(suppressions_file),\n-                         \"--gen-suppressions=all\", \"--exit-on-first-error=yes\",\n+                         \"--gen-suppressions=all\",\n+                         \"--exit-on-first-error=yes\" if exit_on_first_error else \"--exit-on-first-error=no\",\n                          \"--error-exitcode=1\", \"--quiet\"] + self.args",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 16,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "d9b5bd7372e873baa158a065147f4ddfe59eb5fd",
      "in_reply_to_id": null,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: suggestion for readability, format the args array like in line 90 above:\r\n```diff\r\n-            self.args = [\"valgrind\", \"--suppressions={}\".format(suppressions_file),\r\n-                         \"--gen-suppressions=all\",\r\n-                         \"--exit-on-first-error=yes\" if exit_on_first_error else \"--exit-on-first-error=no\",\r\n-                         \"--error-exitcode=1\", \"--quiet\"] + self.args\r\n+            self.args = [\r\n+                \"valgrind\",\r\n+                \"--suppressions={}\".format(suppressions_file),\r\n+                \"--gen-suppressions=all\",\r\n+                \"--exit-on-first-error=yes\" if exit_on_first_error else \"--exit-on-first-error=no\",\r\n+                \"--error-exitcode=1\",\r\n+                \"--quiet\",\r\n+            ] + self.args\r\n```",
      "created_at": "2019-12-12T12:48:35Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357126161",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357126161"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 110,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357126725",
      "pull_request_review_id": 331204844,
      "id": 357126725,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzEyNjcyNQ==",
      "diff_hunk": "@@ -97,14 +97,16 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             \"-debugexclude=leveldb\",\n             \"-uacomment=testnode%d\" % i,\n         ]\n-        if use_valgrind:\n+        if self.is_valgrind_present() and use_valgrind:\n+            exit_on_first_error = self.should_exit_valgrind_on_first_error()\n             default_suppressions_file = os.path.join(\n                 os.path.dirname(os.path.realpath(__file__)),\n                 \"..\", \"..\", \"..\", \"contrib\", \"valgrind.supp\")\n             suppressions_file = os.getenv(\"VALGRIND_SUPPRESSIONS_FILE\",\n                                           default_suppressions_file)\n             self.args = [\"valgrind\", \"--suppressions={}\".format(suppressions_file),\n-                         \"--gen-suppressions=all\", \"--exit-on-first-error=yes\",\n+                         \"--gen-suppressions=all\",\n+                         \"--exit-on-first-error=yes\" if exit_on_first_error else \"--exit-on-first-error=no\",",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 15,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "d9b5bd7372e873baa158a065147f4ddfe59eb5fd",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I haven't tested this, but I expect `--exit-on-first-error=no` to throw an error on versions that don't have this option.",
      "created_at": "2019-12-12T12:49:58Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357126725",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357126725"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 109,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357127399",
      "pull_request_review_id": 331204844,
      "id": 357127399,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzEyNzM5OQ==",
      "diff_hunk": "@@ -140,6 +142,29 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             AddressKeyPair('mzRe8QZMfGi58KyWCse2exxEFry2sfF2Y7', 'cPiRWE8KMjTRxH1MWkPerhfoHFn5iHPWVK5aPqjW8NxmdwenFinJ'),\n     ]\n \n+    def is_valgrind_present(self):\n+        \"\"\"Check for valgrind presence\"\"\"\n+        try:\n+          version = subprocess.run([\"valgrind\", \"--version\"], stdout=subprocess.PIPE).stdout.decode(\"utf-8\")\n+          if version.find(\"valgrind\", 0, 10) > -1:\n+              return True\n+          else:\n+              return False\n+        except OSError:\n+          return False\n+\n+    def should_exit_valgrind_on_first_error(self):\n+        \"\"\"Determine if valgrind should run with --exit-on-first-error flag (>=3.15 runs with it while older versions don't)\"\"\"",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 35,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "d9b5bd7372e873baa158a065147f4ddfe59eb5fd",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I believe this was added in 3.14: https://stackoverflow.com/a/50289059",
      "created_at": "2019-12-12T12:51:22Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357127399",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357127399"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 157,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357127816",
      "pull_request_review_id": 331203403,
      "id": 357127816,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzEyNzgxNg==",
      "diff_hunk": "@@ -140,6 +142,29 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             AddressKeyPair('mzRe8QZMfGi58KyWCse2exxEFry2sfF2Y7', 'cPiRWE8KMjTRxH1MWkPerhfoHFn5iHPWVK5aPqjW8NxmdwenFinJ'),\n     ]\n \n+    def is_valgrind_present(self):\n+        \"\"\"Check for valgrind presence\"\"\"\n+        try:\n+          version = subprocess.run([\"valgrind\", \"--version\"], stdout=subprocess.PIPE).stdout.decode(\"utf-8\")\n+          if version.find(\"valgrind\", 0, 10) > -1:\n+              return True\n+          else:\n+              return False\n+        except OSError:\n+          return False\n+\n+    def should_exit_valgrind_on_first_error(self):\n+        \"\"\"Determine if valgrind should run with --exit-on-first-error flag (>=3.15 runs with it while older versions don't)\"\"\"\n+        version_regex = re.compile('[.bv]')\n+        version_info = subprocess.run([\"valgrind\", \"--version\"], stdout=subprocess.PIPE).stdout.decode(\"utf-8\").rstrip().split(\"valgrind-\")[1:][0]",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 37,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "d9b5bd7372e873baa158a065147f4ddfe59eb5fd",
      "in_reply_to_id": null,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "suggest wrapping long lines like here and the docstring just above",
      "created_at": "2019-12-12T12:52:19Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357127816",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357127816"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 159,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357128396",
      "pull_request_review_id": 331203403,
      "id": 357128396,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzEyODM5Ng==",
      "diff_hunk": "@@ -140,6 +142,29 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             AddressKeyPair('mzRe8QZMfGi58KyWCse2exxEFry2sfF2Y7', 'cPiRWE8KMjTRxH1MWkPerhfoHFn5iHPWVK5aPqjW8NxmdwenFinJ'),\n     ]\n \n+    def is_valgrind_present(self):\n+        \"\"\"Check for valgrind presence\"\"\"\n+        try:\n+          version = subprocess.run([\"valgrind\", \"--version\"], stdout=subprocess.PIPE).stdout.decode(\"utf-8\")\n+          if version.find(\"valgrind\", 0, 10) > -1:\n+              return True\n+          else:\n+              return False\n+        except OSError:\n+          return False\n+\n+    def should_exit_valgrind_on_first_error(self):\n+        \"\"\"Determine if valgrind should run with --exit-on-first-error flag (>=3.15 runs with it while older versions don't)\"\"\"\n+        version_regex = re.compile('[.bv]')\n+        version_info = subprocess.run([\"valgrind\", \"--version\"], stdout=subprocess.PIPE).stdout.decode(\"utf-8\").rstrip().split(\"valgrind-\")[1:][0]\n+        version_array = re.split(version_regex, version_info)\n+        major = int(version_array[0])\n+        minor = int(version_array[1])\n+        if major >=3 and minor >=15:",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 41,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "d9b5bd7372e873baa158a065147f4ddfe59eb5fd",
      "in_reply_to_id": null,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "suggest hoisting these two magic values to constants",
      "created_at": "2019-12-12T12:53:37Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357128396",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357128396"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 163,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357129740",
      "pull_request_review_id": 331209556,
      "id": 357129740,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzEyOTc0MA==",
      "diff_hunk": "@@ -97,14 +97,16 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             \"-debugexclude=leveldb\",\n             \"-uacomment=testnode%d\" % i,\n         ]\n-        if use_valgrind:\n+        if self.is_valgrind_present() and use_valgrind:\n+            exit_on_first_error = self.should_exit_valgrind_on_first_error()\n             default_suppressions_file = os.path.join(\n                 os.path.dirname(os.path.realpath(__file__)),\n                 \"..\", \"..\", \"..\", \"contrib\", \"valgrind.supp\")\n             suppressions_file = os.getenv(\"VALGRIND_SUPPRESSIONS_FILE\",\n                                           default_suppressions_file)\n             self.args = [\"valgrind\", \"--suppressions={}\".format(suppressions_file),\n-                         \"--gen-suppressions=all\", \"--exit-on-first-error=yes\",\n+                         \"--gen-suppressions=all\",\n+                         \"--exit-on-first-error=yes\" if exit_on_first_error else \"--exit-on-first-error=no\",",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 15,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "d9b5bd7372e873baa158a065147f4ddfe59eb5fd",
      "in_reply_to_id": 357124904,
      "user": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Many thanks! I am going through the comments and will adapt the code accordingly. ",
      "created_at": "2019-12-12T12:56:57Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357129740",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357129740"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 109,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357129905",
      "pull_request_review_id": 331209809,
      "id": 357129905,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzEyOTkwNQ==",
      "diff_hunk": "@@ -97,14 +97,16 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             \"-debugexclude=leveldb\",\n             \"-uacomment=testnode%d\" % i,\n         ]\n-        if use_valgrind:\n+        if self.is_valgrind_present() and use_valgrind:\n+            exit_on_first_error = self.should_exit_valgrind_on_first_error()\n             default_suppressions_file = os.path.join(\n                 os.path.dirname(os.path.realpath(__file__)),\n                 \"..\", \"..\", \"..\", \"contrib\", \"valgrind.supp\")\n             suppressions_file = os.getenv(\"VALGRIND_SUPPRESSIONS_FILE\",\n                                           default_suppressions_file)\n             self.args = [\"valgrind\", \"--suppressions={}\".format(suppressions_file),\n-                         \"--gen-suppressions=all\", \"--exit-on-first-error=yes\",\n+                         \"--gen-suppressions=all\",\n+                         \"--exit-on-first-error=yes\" if exit_on_first_error else \"--exit-on-first-error=no\",\n                          \"--error-exitcode=1\", \"--quiet\"] + self.args",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 16,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "d9b5bd7372e873baa158a065147f4ddfe59eb5fd",
      "in_reply_to_id": 357126161,
      "user": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes! Thanks :)",
      "created_at": "2019-12-12T12:57:24Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357129905",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357129905"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 110,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357130330",
      "pull_request_review_id": 331210391,
      "id": 357130330,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzEzMDMzMA==",
      "diff_hunk": "@@ -97,14 +97,16 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             \"-debugexclude=leveldb\",\n             \"-uacomment=testnode%d\" % i,\n         ]\n-        if use_valgrind:\n+        if self.is_valgrind_present() and use_valgrind:\n+            exit_on_first_error = self.should_exit_valgrind_on_first_error()\n             default_suppressions_file = os.path.join(\n                 os.path.dirname(os.path.realpath(__file__)),\n                 \"..\", \"..\", \"..\", \"contrib\", \"valgrind.supp\")\n             suppressions_file = os.getenv(\"VALGRIND_SUPPRESSIONS_FILE\",\n                                           default_suppressions_file)\n             self.args = [\"valgrind\", \"--suppressions={}\".format(suppressions_file),\n-                         \"--gen-suppressions=all\", \"--exit-on-first-error=yes\",\n+                         \"--gen-suppressions=all\",\n+                         \"--exit-on-first-error=yes\" if exit_on_first_error else \"--exit-on-first-error=no\",",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 15,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "d9b5bd7372e873baa158a065147f4ddfe59eb5fd",
      "in_reply_to_id": 357126725,
      "user": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Will test it on my macOS Catalina, because valgrind can't be installed there. :)",
      "created_at": "2019-12-12T12:58:24Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357130330",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357130330"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 109,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357130419",
      "pull_request_review_id": 331210524,
      "id": 357130419,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzEzMDQxOQ==",
      "diff_hunk": "@@ -140,6 +142,29 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             AddressKeyPair('mzRe8QZMfGi58KyWCse2exxEFry2sfF2Y7', 'cPiRWE8KMjTRxH1MWkPerhfoHFn5iHPWVK5aPqjW8NxmdwenFinJ'),\n     ]\n \n+    def is_valgrind_present(self):\n+        \"\"\"Check for valgrind presence\"\"\"\n+        try:\n+          version = subprocess.run([\"valgrind\", \"--version\"], stdout=subprocess.PIPE).stdout.decode(\"utf-8\")\n+          if version.find(\"valgrind\", 0, 10) > -1:\n+              return True\n+          else:\n+              return False\n+        except OSError:\n+          return False\n+\n+    def should_exit_valgrind_on_first_error(self):\n+        \"\"\"Determine if valgrind should run with --exit-on-first-error flag (>=3.15 runs with it while older versions don't)\"\"\"",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 35,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "d9b5bd7372e873baa158a065147f4ddfe59eb5fd",
      "in_reply_to_id": 357127399,
      "user": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Will adapt!",
      "created_at": "2019-12-12T12:58:37Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357130419",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357130419"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 157,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357137164",
      "pull_request_review_id": 331219376,
      "id": 357137164,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzEzNzE2NA==",
      "diff_hunk": "@@ -97,14 +97,16 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             \"-debugexclude=leveldb\",\n             \"-uacomment=testnode%d\" % i,\n         ]\n-        if use_valgrind:\n+        if self.is_valgrind_present() and use_valgrind:\n+            exit_on_first_error = self.should_exit_valgrind_on_first_error()\n             default_suppressions_file = os.path.join(\n                 os.path.dirname(os.path.realpath(__file__)),\n                 \"..\", \"..\", \"..\", \"contrib\", \"valgrind.supp\")\n             suppressions_file = os.getenv(\"VALGRIND_SUPPRESSIONS_FILE\",\n                                           default_suppressions_file)\n             self.args = [\"valgrind\", \"--suppressions={}\".format(suppressions_file),\n-                         \"--gen-suppressions=all\", \"--exit-on-first-error=yes\",\n+                         \"--gen-suppressions=all\",\n+                         \"--exit-on-first-error=yes\" if exit_on_first_error else \"--exit-on-first-error=no\",",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 15,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "d9b5bd7372e873baa158a065147f4ddfe59eb5fd",
      "in_reply_to_id": 357126725,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "You mean the previous comment? This one is easiest to test on e.g. a fresh Ubuntu 18.04 machine, which has valgrind 3.13. You can then compile it from source and install 3.15 to see the difference. ",
      "created_at": "2019-12-12T13:14:07Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357137164",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357137164"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 109,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357138153",
      "pull_request_review_id": 331220578,
      "id": 357138153,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzEzODE1Mw==",
      "diff_hunk": "@@ -97,14 +97,16 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             \"-debugexclude=leveldb\",\n             \"-uacomment=testnode%d\" % i,\n         ]\n-        if use_valgrind:\n+        if self.is_valgrind_present() and use_valgrind:\n+            exit_on_first_error = self.should_exit_valgrind_on_first_error()\n             default_suppressions_file = os.path.join(\n                 os.path.dirname(os.path.realpath(__file__)),\n                 \"..\", \"..\", \"..\", \"contrib\", \"valgrind.supp\")\n             suppressions_file = os.getenv(\"VALGRIND_SUPPRESSIONS_FILE\",\n                                           default_suppressions_file)\n             self.args = [\"valgrind\", \"--suppressions={}\".format(suppressions_file),\n-                         \"--gen-suppressions=all\", \"--exit-on-first-error=yes\",\n+                         \"--gen-suppressions=all\",\n+                         \"--exit-on-first-error=yes\" if exit_on_first_error else \"--exit-on-first-error=no\",",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 15,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "d9b5bd7372e873baa158a065147f4ddfe59eb5fd",
      "in_reply_to_id": 357126725,
      "user": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yeah, I have one cheap VPS running, with Ubuntu 18.04. Will follow your recommendation. Thanks!",
      "created_at": "2019-12-12T13:16:05Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357138153",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357138153"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 109,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357159574",
      "pull_request_review_id": 331248517,
      "id": 357159574,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzE1OTU3NA==",
      "diff_hunk": "@@ -97,14 +97,16 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             \"-debugexclude=leveldb\",\n             \"-uacomment=testnode%d\" % i,\n         ]\n-        if use_valgrind:\n+        if self.is_valgrind_present() and use_valgrind:\n+            exit_on_first_error = self.should_exit_valgrind_on_first_error()\n             default_suppressions_file = os.path.join(\n                 os.path.dirname(os.path.realpath(__file__)),\n                 \"..\", \"..\", \"..\", \"contrib\", \"valgrind.supp\")\n             suppressions_file = os.getenv(\"VALGRIND_SUPPRESSIONS_FILE\",\n                                           default_suppressions_file)\n             self.args = [\"valgrind\", \"--suppressions={}\".format(suppressions_file),\n-                         \"--gen-suppressions=all\", \"--exit-on-first-error=yes\",\n+                         \"--gen-suppressions=all\",\n+                         \"--exit-on-first-error=yes\" if exit_on_first_error else \"--exit-on-first-error=no\",",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 15,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "d9b5bd7372e873baa158a065147f4ddfe59eb5fd",
      "in_reply_to_id": 357124904,
      "user": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "`--exit-on-first-error=yes` should always be used if the option `--exit-on-first-error` is supported :)",
      "created_at": "2019-12-12T14:00:57Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357159574",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357159574"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 109,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357160270",
      "pull_request_review_id": 331249480,
      "id": 357160270,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzE2MDI3MA==",
      "diff_hunk": "@@ -140,6 +142,29 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             AddressKeyPair('mzRe8QZMfGi58KyWCse2exxEFry2sfF2Y7', 'cPiRWE8KMjTRxH1MWkPerhfoHFn5iHPWVK5aPqjW8NxmdwenFinJ'),\n     ]\n \n+    def is_valgrind_present(self):\n+        \"\"\"Check for valgrind presence\"\"\"\n+        try:\n+          version = subprocess.run([\"valgrind\", \"--version\"], stdout=subprocess.PIPE).stdout.decode(\"utf-8\")\n+          if version.find(\"valgrind\", 0, 10) > -1:\n+              return True\n+          else:\n+              return False\n+        except OSError:\n+          return False\n+\n+    def should_exit_valgrind_on_first_error(self):\n+        \"\"\"Determine if valgrind should run with --exit-on-first-error flag (>=3.15 runs with it while older versions don't)\"\"\"",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 35,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "d9b5bd7372e873baa158a065147f4ddfe59eb5fd",
      "in_reply_to_id": 357127399,
      "user": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Will then simply produce an empty string if the flag should not be active, because it's \"no\" anyway for versions that support it.\r\n\r\nLike: **\"--exit-on-first-error=yes\" if exit_on_first_error else \"\"**",
      "created_at": "2019-12-12T14:02:22Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357160270",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357160270"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 157,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357160662",
      "pull_request_review_id": 331250064,
      "id": 357160662,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzE2MDY2Mg==",
      "diff_hunk": "@@ -97,14 +97,16 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             \"-debugexclude=leveldb\",\n             \"-uacomment=testnode%d\" % i,\n         ]\n-        if use_valgrind:\n+        if self.is_valgrind_present() and use_valgrind:",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 5,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "d9b5bd7372e873baa158a065147f4ddfe59eb5fd",
      "in_reply_to_id": null,
      "user": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This will create an unnecessary `valgrind` execution in the normal case when Valgrind is not used (no `--valgrind`).\r\n\r\nBetter to do it as `if use_valgrind and ` instead :)",
      "created_at": "2019-12-12T14:03:13Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357160662",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357160662"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 100,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357160744",
      "pull_request_review_id": 331250206,
      "id": 357160744,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzE2MDc0NA==",
      "diff_hunk": "@@ -97,14 +97,16 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             \"-debugexclude=leveldb\",\n             \"-uacomment=testnode%d\" % i,\n         ]\n-        if use_valgrind:\n+        if self.is_valgrind_present() and use_valgrind:\n+            exit_on_first_error = self.should_exit_valgrind_on_first_error()\n             default_suppressions_file = os.path.join(\n                 os.path.dirname(os.path.realpath(__file__)),\n                 \"..\", \"..\", \"..\", \"contrib\", \"valgrind.supp\")\n             suppressions_file = os.getenv(\"VALGRIND_SUPPRESSIONS_FILE\",\n                                           default_suppressions_file)\n             self.args = [\"valgrind\", \"--suppressions={}\".format(suppressions_file),\n-                         \"--gen-suppressions=all\", \"--exit-on-first-error=yes\",\n+                         \"--gen-suppressions=all\",\n+                         \"--exit-on-first-error=yes\" if exit_on_first_error else \"--exit-on-first-error=no\",",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 15,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "d9b5bd7372e873baa158a065147f4ddfe59eb5fd",
      "in_reply_to_id": 357124904,
      "user": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "@jonatack \r\nWould prefer your solution, but because not all old versions support this flag I'll have to stick with the other variant. Will basically return an empty string when the flag should not be active, because this is the default for some older versions anyway.",
      "created_at": "2019-12-12T14:03:26Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357160744",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357160744"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 109,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357161041",
      "pull_request_review_id": 331250614,
      "id": 357161041,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzE2MTA0MQ==",
      "diff_hunk": "@@ -97,14 +97,16 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             \"-debugexclude=leveldb\",\n             \"-uacomment=testnode%d\" % i,\n         ]\n-        if use_valgrind:\n+        if self.is_valgrind_present() and use_valgrind:",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 5,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "d9b5bd7372e873baa158a065147f4ddfe59eb5fd",
      "in_reply_to_id": 357160662,
      "user": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes, indeed. Thanks!",
      "created_at": "2019-12-12T14:04:03Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357161041",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357161041"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 100,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357161586",
      "pull_request_review_id": 331251357,
      "id": 357161586,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzE2MTU4Ng==",
      "diff_hunk": "@@ -140,6 +142,29 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             AddressKeyPair('mzRe8QZMfGi58KyWCse2exxEFry2sfF2Y7', 'cPiRWE8KMjTRxH1MWkPerhfoHFn5iHPWVK5aPqjW8NxmdwenFinJ'),\n     ]\n \n+    def is_valgrind_present(self):\n+        \"\"\"Check for valgrind presence\"\"\"\n+        try:\n+          version = subprocess.run([\"valgrind\", \"--version\"], stdout=subprocess.PIPE).stdout.decode(\"utf-8\")\n+          if version.find(\"valgrind\", 0, 10) > -1:",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 27,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "d9b5bd7372e873baa158a065147f4ddfe59eb5fd",
      "in_reply_to_id": null,
      "user": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "`if version.startswith(\"valgrind-\")` :)",
      "created_at": "2019-12-12T14:05:16Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357161586",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357161586"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 149,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357162045",
      "pull_request_review_id": 331251884,
      "id": 357162045,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzE2MjA0NQ==",
      "diff_hunk": "@@ -97,14 +97,16 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             \"-debugexclude=leveldb\",\n             \"-uacomment=testnode%d\" % i,\n         ]\n-        if use_valgrind:\n+        if self.is_valgrind_present() and use_valgrind:\n+            exit_on_first_error = self.should_exit_valgrind_on_first_error()\n             default_suppressions_file = os.path.join(\n                 os.path.dirname(os.path.realpath(__file__)),\n                 \"..\", \"..\", \"..\", \"contrib\", \"valgrind.supp\")\n             suppressions_file = os.getenv(\"VALGRIND_SUPPRESSIONS_FILE\",\n                                           default_suppressions_file)\n             self.args = [\"valgrind\", \"--suppressions={}\".format(suppressions_file),\n-                         \"--gen-suppressions=all\", \"--exit-on-first-error=yes\",\n+                         \"--gen-suppressions=all\",\n+                         \"--exit-on-first-error=yes\" if exit_on_first_error else \"--exit-on-first-error=no\",",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 15,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "d9b5bd7372e873baa158a065147f4ddfe59eb5fd",
      "in_reply_to_id": 357124904,
      "user": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> `--exit-on-first-error=yes` should always be used if the option `--exit-on-first-error` is supported :)\r\n\r\nBut the original discussion was about disabling it for v3.15. Or am I missing something?",
      "created_at": "2019-12-12T14:06:04Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357162045",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357162045"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 109,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357162358",
      "pull_request_review_id": 331252300,
      "id": 357162358,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzE2MjM1OA==",
      "diff_hunk": "@@ -97,14 +97,16 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             \"-debugexclude=leveldb\",\n             \"-uacomment=testnode%d\" % i,\n         ]\n-        if use_valgrind:\n+        if self.is_valgrind_present() and use_valgrind:\n+            exit_on_first_error = self.should_exit_valgrind_on_first_error()\n             default_suppressions_file = os.path.join(\n                 os.path.dirname(os.path.realpath(__file__)),\n                 \"..\", \"..\", \"..\", \"contrib\", \"valgrind.supp\")\n             suppressions_file = os.getenv(\"VALGRIND_SUPPRESSIONS_FILE\",\n                                           default_suppressions_file)\n             self.args = [\"valgrind\", \"--suppressions={}\".format(suppressions_file),\n-                         \"--gen-suppressions=all\", \"--exit-on-first-error=yes\",\n+                         \"--gen-suppressions=all\",\n+                         \"--exit-on-first-error=yes\" if exit_on_first_error else \"--exit-on-first-error=no\",",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 15,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "d9b5bd7372e873baa158a065147f4ddfe59eb5fd",
      "in_reply_to_id": 357124904,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I'd rename `exit_on_first_error` to `supports_exit_on_first_error` for clarity.",
      "created_at": "2019-12-12T14:06:43Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357162358",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357162358"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 109,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357162705",
      "pull_request_review_id": 331252802,
      "id": 357162705,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzE2MjcwNQ==",
      "diff_hunk": "@@ -97,14 +97,16 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             \"-debugexclude=leveldb\",\n             \"-uacomment=testnode%d\" % i,\n         ]\n-        if use_valgrind:\n+        if self.is_valgrind_present() and use_valgrind:\n+            exit_on_first_error = self.should_exit_valgrind_on_first_error()\n             default_suppressions_file = os.path.join(\n                 os.path.dirname(os.path.realpath(__file__)),\n                 \"..\", \"..\", \"..\", \"contrib\", \"valgrind.supp\")\n             suppressions_file = os.getenv(\"VALGRIND_SUPPRESSIONS_FILE\",\n                                           default_suppressions_file)\n             self.args = [\"valgrind\", \"--suppressions={}\".format(suppressions_file),\n-                         \"--gen-suppressions=all\", \"--exit-on-first-error=yes\",\n+                         \"--gen-suppressions=all\",\n+                         \"--exit-on-first-error=yes\" if exit_on_first_error else \"--exit-on-first-error=no\",",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 15,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "d9b5bd7372e873baa158a065147f4ddfe59eb5fd",
      "in_reply_to_id": 357124904,
      "user": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done!",
      "created_at": "2019-12-12T14:07:27Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357162705",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357162705"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 109,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357164663",
      "pull_request_review_id": 331255444,
      "id": 357164663,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzE2NDY2Mw==",
      "diff_hunk": "@@ -97,14 +97,16 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             \"-debugexclude=leveldb\",\n             \"-uacomment=testnode%d\" % i,\n         ]\n-        if use_valgrind:\n+        if self.is_valgrind_present() and use_valgrind:\n+            exit_on_first_error = self.should_exit_valgrind_on_first_error()\n             default_suppressions_file = os.path.join(\n                 os.path.dirname(os.path.realpath(__file__)),\n                 \"..\", \"..\", \"..\", \"contrib\", \"valgrind.supp\")\n             suppressions_file = os.getenv(\"VALGRIND_SUPPRESSIONS_FILE\",\n                                           default_suppressions_file)\n             self.args = [\"valgrind\", \"--suppressions={}\".format(suppressions_file),\n-                         \"--gen-suppressions=all\", \"--exit-on-first-error=yes\",\n+                         \"--gen-suppressions=all\",\n+                         \"--exit-on-first-error=yes\" if exit_on_first_error else \"--exit-on-first-error=no\",",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 15,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "d9b5bd7372e873baa158a065147f4ddfe59eb5fd",
      "in_reply_to_id": 357124904,
      "user": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> I'd rename `exit_on_first_error` to `supports_exit_on_first_error` for clarity.\r\n\r\nThen I will also put the expected version (major, minor) to 3.14, ok?\r\nIf I understand @practicalswift correctly, every version that supports this flag should also have it activated by default.",
      "created_at": "2019-12-12T14:11:07Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357164663",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357164663"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 109,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357167630",
      "pull_request_review_id": 331251357,
      "id": 357167630,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzE2NzYzMA==",
      "diff_hunk": "@@ -140,6 +142,29 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             AddressKeyPair('mzRe8QZMfGi58KyWCse2exxEFry2sfF2Y7', 'cPiRWE8KMjTRxH1MWkPerhfoHFn5iHPWVK5aPqjW8NxmdwenFinJ'),\n     ]\n \n+    def is_valgrind_present(self):\n+        \"\"\"Check for valgrind presence\"\"\"\n+        try:\n+          version = subprocess.run([\"valgrind\", \"--version\"], stdout=subprocess.PIPE).stdout.decode(\"utf-8\")\n+          if version.find(\"valgrind\", 0, 10) > -1:\n+              return True\n+          else:\n+              return False\n+        except OSError:\n+          return False\n+\n+    def should_exit_valgrind_on_first_error(self):\n+        \"\"\"Determine if valgrind should run with --exit-on-first-error flag (>=3.15 runs with it while older versions don't)\"\"\"\n+        version_regex = re.compile('[.bv]')\n+        version_info = subprocess.run([\"valgrind\", \"--version\"], stdout=subprocess.PIPE).stdout.decode(\"utf-8\").rstrip().split(\"valgrind-\")[1:][0]",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 37,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "d9b5bd7372e873baa158a065147f4ddfe59eb5fd",
      "in_reply_to_id": null,
      "user": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think this can be simplified. Only one execution of `valgrind --version` should be needed to a.) check if Valgrind is present and b.) to parse what version it is, so try to merge the logic of `is_valgrind_present` and `should_exit_valgrind_on_first_error`.\r\n\r\nI suggest `get_valgrind_version` which could return the tuple `(valgrind_major, valgrind_minor)` if `valgrind` is installed or `None` otherwise.\r\n\r\nSomething like this:\r\n\r\n```\r\nvalgrind_version = get_valgrind_version()\r\nif valgrind_version and valgrind_version >= (3, 14):\r\n    # add --exit-on-first-error=true\r\n```\r\n\r\n:)",
      "created_at": "2019-12-12T14:16:39Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357167630",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357167630"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 159,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357169751",
      "pull_request_review_id": 331262277,
      "id": 357169751,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzE2OTc1MQ==",
      "diff_hunk": "@@ -140,6 +142,29 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             AddressKeyPair('mzRe8QZMfGi58KyWCse2exxEFry2sfF2Y7', 'cPiRWE8KMjTRxH1MWkPerhfoHFn5iHPWVK5aPqjW8NxmdwenFinJ'),\n     ]\n \n+    def is_valgrind_present(self):\n+        \"\"\"Check for valgrind presence\"\"\"\n+        try:\n+          version = subprocess.run([\"valgrind\", \"--version\"], stdout=subprocess.PIPE).stdout.decode(\"utf-8\")\n+          if version.find(\"valgrind\", 0, 10) > -1:",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 27,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "d9b5bd7372e873baa158a065147f4ddfe59eb5fd",
      "in_reply_to_id": 357161586,
      "user": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Believe it or not, I was just typing the same changes. Thanks!",
      "created_at": "2019-12-12T14:20:24Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357169751",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357169751"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 149,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357170012",
      "pull_request_review_id": 331262602,
      "id": 357170012,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzE3MDAxMg==",
      "diff_hunk": "@@ -97,14 +97,16 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             \"-debugexclude=leveldb\",\n             \"-uacomment=testnode%d\" % i,\n         ]\n-        if use_valgrind:\n+        if self.is_valgrind_present() and use_valgrind:\n+            exit_on_first_error = self.should_exit_valgrind_on_first_error()\n             default_suppressions_file = os.path.join(\n                 os.path.dirname(os.path.realpath(__file__)),\n                 \"..\", \"..\", \"..\", \"contrib\", \"valgrind.supp\")\n             suppressions_file = os.getenv(\"VALGRIND_SUPPRESSIONS_FILE\",\n                                           default_suppressions_file)\n             self.args = [\"valgrind\", \"--suppressions={}\".format(suppressions_file),\n-                         \"--gen-suppressions=all\", \"--exit-on-first-error=yes\",\n+                         \"--gen-suppressions=all\",\n+                         \"--exit-on-first-error=yes\" if exit_on_first_error else \"--exit-on-first-error=no\",",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 15,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "d9b5bd7372e873baa158a065147f4ddfe59eb5fd",
      "in_reply_to_id": 357124904,
      "user": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> If I understand @practicalswift correctly, every version that supports this flag should also have it activated by default.\r\n\r\nCorrect! :)\r\n\r\nIt is supported by Valgrind 3.14 and above.\r\n\r\n(Unfortunately I said the wrong version number in the linked issue. I've now corrected that. Sorry for the confusion :))",
      "created_at": "2019-12-12T14:20:52Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357170012",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357170012"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 109,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357192327",
      "pull_request_review_id": 331292017,
      "id": 357192327,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzE5MjMyNw==",
      "diff_hunk": "@@ -140,6 +142,29 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             AddressKeyPair('mzRe8QZMfGi58KyWCse2exxEFry2sfF2Y7', 'cPiRWE8KMjTRxH1MWkPerhfoHFn5iHPWVK5aPqjW8NxmdwenFinJ'),\n     ]\n \n+    def is_valgrind_present(self):\n+        \"\"\"Check for valgrind presence\"\"\"\n+        try:\n+          version = subprocess.run([\"valgrind\", \"--version\"], stdout=subprocess.PIPE).stdout.decode(\"utf-8\")\n+          if version.find(\"valgrind\", 0, 10) > -1:\n+              return True\n+          else:\n+              return False\n+        except OSError:\n+          return False\n+\n+    def should_exit_valgrind_on_first_error(self):\n+        \"\"\"Determine if valgrind should run with --exit-on-first-error flag (>=3.15 runs with it while older versions don't)\"\"\"",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 35,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "d9b5bd7372e873baa158a065147f4ddfe59eb5fd",
      "in_reply_to_id": 357127399,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes, I have valgrind-3.14.0 installed on debian, and valgrind --help does have the option for `--exit-on-first-error=no|yes`. Will test the updated version of this PR!",
      "created_at": "2019-12-12T15:00:30Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357192327",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357192327"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 157,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357194203",
      "pull_request_review_id": 331294462,
      "id": 357194203,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzE5NDIwMw==",
      "diff_hunk": "@@ -140,6 +142,29 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             AddressKeyPair('mzRe8QZMfGi58KyWCse2exxEFry2sfF2Y7', 'cPiRWE8KMjTRxH1MWkPerhfoHFn5iHPWVK5aPqjW8NxmdwenFinJ'),\n     ]\n \n+    def is_valgrind_present(self):\n+        \"\"\"Check for valgrind presence\"\"\"\n+        try:\n+          version = subprocess.run([\"valgrind\", \"--version\"], stdout=subprocess.PIPE).stdout.decode(\"utf-8\")\n+          if version.find(\"valgrind\", 0, 10) > -1:\n+              return True\n+          else:\n+              return False\n+        except OSError:\n+          return False\n+\n+    def should_exit_valgrind_on_first_error(self):\n+        \"\"\"Determine if valgrind should run with --exit-on-first-error flag (>=3.15 runs with it while older versions don't)\"\"\"",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 35,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "d9b5bd7372e873baa158a065147f4ddfe59eb5fd",
      "in_reply_to_id": 357127399,
      "user": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Just force pushed changes. :)",
      "created_at": "2019-12-12T15:03:53Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357194203",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357194203"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 157,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357194353",
      "pull_request_review_id": 331294647,
      "id": 357194353,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzE5NDM1Mw==",
      "diff_hunk": "@@ -34,7 +34,8 @@\n )\n \n BITCOIND_PROC_WAIT_TIMEOUT = 60\n-\n+VALGRIND_VERSION_MAJOR = 3",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 5,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "f59541707e47918526daa3c5b714f1f79ac1438f",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: `VALGRIND_MINIMUM_VERSION_MAJOR`",
      "created_at": "2019-12-12T15:04:08Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357194353",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357194353"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 37,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357195971",
      "pull_request_review_id": 331294647,
      "id": 357195971,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzE5NTk3MQ==",
      "diff_hunk": "@@ -140,6 +149,23 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             AddressKeyPair('mzRe8QZMfGi58KyWCse2exxEFry2sfF2Y7', 'cPiRWE8KMjTRxH1MWkPerhfoHFn5iHPWVK5aPqjW8NxmdwenFinJ'),\n     ]\n \n+    def get_valgrind_version(self):\n+        \"\"\"Returns valgrind version (major, minor) in a tuple\"\"\"",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 42,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "28eabc865301a1a6f2fae21f3385e9e7a99ef021",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: \"or None if not found\"",
      "created_at": "2019-12-12T15:06:55Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357195971",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357195971"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 153,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357197095",
      "pull_request_review_id": 331294647,
      "id": 357197095,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzE5NzA5NQ==",
      "diff_hunk": "@@ -97,15 +98,23 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             \"-debugexclude=leveldb\",\n             \"-uacomment=testnode%d\" % i,\n         ]\n+        valgrind_version = self.get_valgrind_version()",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 14,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "28eabc865301a1a6f2fae21f3385e9e7a99ef021",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I'd move all this below `if use_valgrind`. Don't forget to throw if `valgrind_version == None`",
      "created_at": "2019-12-12T15:08:54Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357197095",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357197095"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 101,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357198887",
      "pull_request_review_id": 331300555,
      "id": 357198887,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzE5ODg4Nw==",
      "diff_hunk": "@@ -34,7 +34,8 @@\n )\n \n BITCOIND_PROC_WAIT_TIMEOUT = 60\n-\n+VALGRIND_VERSION_MAJOR = 3\n+VALGRIND_VERSION_MINOR = 14",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 6,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "28eabc865301a1a6f2fae21f3385e9e7a99ef021",
      "in_reply_to_id": null,
      "user": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "The scope can be narrowed for these and the meaning could be clarified by doing it like this on L103 instead :)\r\n\r\n```\r\nMIN_VALGRIND_VERSION_EARLY_EXIT = (3, 14)\r\nif valgrind_version and valgrind_version >= MIN_VALGRIND_VERSION_EARLY_EXIT:\r\n```",
      "created_at": "2019-12-12T15:11:58Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357198887",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357198887"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 38,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357199855",
      "pull_request_review_id": 331301862,
      "id": 357199855,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzE5OTg1NQ==",
      "diff_hunk": "@@ -97,15 +98,23 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             \"-debugexclude=leveldb\",\n             \"-uacomment=testnode%d\" % i,\n         ]\n+        valgrind_version = self.get_valgrind_version()",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 14,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "28eabc865301a1a6f2fae21f3385e9e7a99ef021",
      "in_reply_to_id": 357197095,
      "user": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ok, will do it. Many thanks!",
      "created_at": "2019-12-12T15:13:44Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357199855",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357199855"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 101,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357200114",
      "pull_request_review_id": 331300555,
      "id": 357200114,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzIwMDExNA==",
      "diff_hunk": "@@ -140,6 +149,23 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             AddressKeyPair('mzRe8QZMfGi58KyWCse2exxEFry2sfF2Y7', 'cPiRWE8KMjTRxH1MWkPerhfoHFn5iHPWVK5aPqjW8NxmdwenFinJ'),\n     ]\n \n+    def get_valgrind_version(self):\n+        \"\"\"Returns valgrind version (major, minor) in a tuple\"\"\"\n+        try:\n+          rc = subprocess.call(['which', 'valgrind'],",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 44,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "28eabc865301a1a6f2fae21f3385e9e7a99ef021",
      "in_reply_to_id": null,
      "user": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Use `shutil.which(\"valgrind\")` to avoid shelling out unnecessarily :)",
      "created_at": "2019-12-12T15:14:11Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357200114",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357200114"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 157,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357204519",
      "pull_request_review_id": 331300555,
      "id": 357204519,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzIwNDUxOQ==",
      "diff_hunk": "@@ -140,6 +151,23 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             AddressKeyPair('mzRe8QZMfGi58KyWCse2exxEFry2sfF2Y7', 'cPiRWE8KMjTRxH1MWkPerhfoHFn5iHPWVK5aPqjW8NxmdwenFinJ'),\n     ]\n \n+    def get_valgrind_version(self):\n+        \"\"\"Returns valgrind version (major, minor) in a tuple or None if not found\"\"\"\n+        try:\n+          rc = subprocess.call(['which', 'valgrind'],\n+                                     stdout=subprocess.PIPE,\n+                                     stderr=subprocess.PIPE)\n+          if rc == 0:\n+            version_regex = re.compile('[.bv]')",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 54,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "1c2f07c8137aabad98d2f41746d9a904439406ab",
      "in_reply_to_id": null,
      "user": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "1. Have you seen instances where the Valgrind version identifier contains `b` or `v`? :) If not, perhaps the simpler `version_info.split(\".\")` could do?\r\n\r\n2. Check the indentation here so that it matches the four spaces used in the rest of this file :)  Applies throughout this PR.",
      "created_at": "2019-12-12T15:21:53Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357204519",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357204519"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 157,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357205478",
      "pull_request_review_id": 331309254,
      "id": 357205478,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzIwNTQ3OA==",
      "diff_hunk": "@@ -140,6 +149,23 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             AddressKeyPair('mzRe8QZMfGi58KyWCse2exxEFry2sfF2Y7', 'cPiRWE8KMjTRxH1MWkPerhfoHFn5iHPWVK5aPqjW8NxmdwenFinJ'),\n     ]\n \n+    def get_valgrind_version(self):\n+        \"\"\"Returns valgrind version (major, minor) in a tuple\"\"\"\n+        try:\n+          rc = subprocess.call(['which', 'valgrind'],",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 44,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "28eabc865301a1a6f2fae21f3385e9e7a99ef021",
      "in_reply_to_id": 357200114,
      "user": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yup, much better!",
      "created_at": "2019-12-12T15:23:37Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357205478",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357205478"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 157,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357207838",
      "pull_request_review_id": 331312415,
      "id": 357207838,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzIwNzgzOA==",
      "diff_hunk": "@@ -140,6 +151,23 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             AddressKeyPair('mzRe8QZMfGi58KyWCse2exxEFry2sfF2Y7', 'cPiRWE8KMjTRxH1MWkPerhfoHFn5iHPWVK5aPqjW8NxmdwenFinJ'),\n     ]\n \n+    def get_valgrind_version(self):\n+        \"\"\"Returns valgrind version (major, minor) in a tuple or None if not found\"\"\"\n+        try:\n+          rc = subprocess.call(['which', 'valgrind'],\n+                                     stdout=subprocess.PIPE,\n+                                     stderr=subprocess.PIPE)\n+          if rc == 0:\n+            version_regex = re.compile('[.bv]')",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 54,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "1c2f07c8137aabad98d2f41746d9a904439406ab",
      "in_reply_to_id": 357204519,
      "user": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I must admit that I wasn't sure abut valgrind's versioning. But I will adapt the code of course.\r\nWill also update the indentations.",
      "created_at": "2019-12-12T15:27:46Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357207838",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357207838"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 157,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357216948",
      "pull_request_review_id": 331321558,
      "id": 357216948,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzIxNjk0OA==",
      "diff_hunk": "@@ -98,14 +98,23 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             \"-uacomment=testnode%d\" % i,\n         ]\n         if use_valgrind:\n-            default_suppressions_file = os.path.join(\n-                os.path.dirname(os.path.realpath(__file__)),\n-                \"..\", \"..\", \"..\", \"contrib\", \"valgrind.supp\")\n-            suppressions_file = os.getenv(\"VALGRIND_SUPPRESSIONS_FILE\",\n-                                          default_suppressions_file)\n-            self.args = [\"valgrind\", \"--suppressions={}\".format(suppressions_file),\n-                         \"--gen-suppressions=all\", \"--exit-on-first-error=yes\",\n-                         \"--error-exitcode=1\", \"--quiet\"] + self.args\n+            valgrind_version = self.get_valgrind_version()\n+            exit_on_first_error_flag = \"\"\n+            if valgrind_version and valgrind_version >= MIN_VALGRIND_VERSION_EARLY_EXIT:",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 23,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "130435997931f7086229f057df968f41d845efd5",
      "in_reply_to_id": null,
      "user": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think the logic is wrong here. This will only run `valgrind` if `valgrind_version >= MIN_VALGRIND_VERSION_EARLY_EXIT` :)\r\n\r\nThe only impact `valgrind_version >= MIN_VALGRIND_VERSION_EARLY_EXIT` should have is to enable `--exit-on-first-error=yes`. `self.args` should be set both for old and new versions of Valgrind :)",
      "created_at": "2019-12-12T15:43:24Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357216948",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357216948"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 106,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357218254",
      "pull_request_review_id": 331321558,
      "id": 357218254,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzIxODI1NA==",
      "diff_hunk": "@@ -98,14 +98,23 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             \"-uacomment=testnode%d\" % i,\n         ]\n         if use_valgrind:\n-            default_suppressions_file = os.path.join(\n-                os.path.dirname(os.path.realpath(__file__)),\n-                \"..\", \"..\", \"..\", \"contrib\", \"valgrind.supp\")\n-            suppressions_file = os.getenv(\"VALGRIND_SUPPRESSIONS_FILE\",\n-                                          default_suppressions_file)\n-            self.args = [\"valgrind\", \"--suppressions={}\".format(suppressions_file),\n-                         \"--gen-suppressions=all\", \"--exit-on-first-error=yes\",\n-                         \"--error-exitcode=1\", \"--quiet\"] + self.args\n+            valgrind_version = self.get_valgrind_version()\n+            exit_on_first_error_flag = \"\"\n+            if valgrind_version and valgrind_version >= MIN_VALGRIND_VERSION_EARLY_EXIT:\n+                exit_on_first_error_flag = \"--exit-on-first-error=yes\"\n+                default_suppressions_file = os.path.join(\n+                    os.path.dirname(os.path.realpath(__file__)),\n+                    \"..\", \"..\", \"..\", \"contrib\", \"valgrind.supp\")\n+                suppressions_file = os.getenv(\"VALGRIND_SUPPRESSIONS_FILE\",\n+                    default_suppressions_file)\n+                self.args = [\"valgrind\",\n+                             \"--suppressions={}\".format(suppressions_file),\n+                             \"--gen-suppressions=all\",\n+                             exit_on_first_error_flag,\n+                             \"--error-exitcode=1\",\n+                             \"--quiet\"] + self.args\n+            elif valgrind_version == None:",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 36,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "130435997931f7086229f057df968f41d845efd5",
      "in_reply_to_id": null,
      "user": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think you want to do this check right after `valgrind_version = self.get_valgrind_version()`. With the current logic the exception will be thrown also in the case where `valgrind` is present (but with an older version).\r\n\r\nI suggest testing the PR with the following alternatives to make sure all code paths are working as expected:\r\n\r\n1.) Without `valgrind` in `PATH`\r\n2.) With new `valgrind` version (>= 3.14) in `PATH`\r\n3.) With old `valgrind` version (< 3.14) in `PATH`\r\n\r\n:)",
      "created_at": "2019-12-12T15:45:16Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357218254",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357218254"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 116,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357224013",
      "pull_request_review_id": 331321558,
      "id": 357224013,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzIyNDAxMw==",
      "diff_hunk": "@@ -140,6 +149,20 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             AddressKeyPair('mzRe8QZMfGi58KyWCse2exxEFry2sfF2Y7', 'cPiRWE8KMjTRxH1MWkPerhfoHFn5iHPWVK5aPqjW8NxmdwenFinJ'),\n     ]\n \n+    def get_valgrind_version(self):",
      "path": "test/functional/test_framework/test_node.py",
      "position": 50,
      "original_position": 45,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "130435997931f7086229f057df968f41d845efd5",
      "in_reply_to_id": null,
      "user": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Suggested alternative:\r\n\r\n```\r\ndef get_valgrind_version(self):\r\n    \"\"\"Returns valgrind version tuple (major, minor), or None if valgrind is not found\"\"\"\r\n    if not shutil.which(\"valgrind\"):\r\n        return None\r\n    version = (\r\n        subprocess.run([\"valgrind\", \"--version\"], stdout=subprocess.PIPE)\r\n        .stdout.decode(\"utf-8\")\r\n        .rstrip()\r\n        .split(\"valgrind-\")[1:][0]\r\n    )\r\n    return tuple(int(i) for i in version.split(\".\")[:2])\r\n```",
      "created_at": "2019-12-12T15:54:43Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357224013",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357224013"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 159,
      "original_line": 159,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357229136",
      "pull_request_review_id": 331339896,
      "id": 357229136,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzIyOTEzNg==",
      "diff_hunk": "@@ -98,14 +98,23 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             \"-uacomment=testnode%d\" % i,\n         ]\n         if use_valgrind:\n-            default_suppressions_file = os.path.join(\n-                os.path.dirname(os.path.realpath(__file__)),\n-                \"..\", \"..\", \"..\", \"contrib\", \"valgrind.supp\")\n-            suppressions_file = os.getenv(\"VALGRIND_SUPPRESSIONS_FILE\",\n-                                          default_suppressions_file)\n-            self.args = [\"valgrind\", \"--suppressions={}\".format(suppressions_file),\n-                         \"--gen-suppressions=all\", \"--exit-on-first-error=yes\",\n-                         \"--error-exitcode=1\", \"--quiet\"] + self.args\n+            valgrind_version = self.get_valgrind_version()\n+            exit_on_first_error_flag = \"\"\n+            if valgrind_version and valgrind_version >= MIN_VALGRIND_VERSION_EARLY_EXIT:",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 23,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "130435997931f7086229f057df968f41d845efd5",
      "in_reply_to_id": 357216948,
      "user": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yeah, just saw it. Will reorganize the code.",
      "created_at": "2019-12-12T16:02:52Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357229136",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357229136"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 106,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357229756",
      "pull_request_review_id": 331340742,
      "id": 357229756,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzIyOTc1Ng==",
      "diff_hunk": "@@ -140,6 +149,20 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             AddressKeyPair('mzRe8QZMfGi58KyWCse2exxEFry2sfF2Y7', 'cPiRWE8KMjTRxH1MWkPerhfoHFn5iHPWVK5aPqjW8NxmdwenFinJ'),\n     ]\n \n+    def get_valgrind_version(self):",
      "path": "test/functional/test_framework/test_node.py",
      "position": 50,
      "original_position": 45,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "130435997931f7086229f057df968f41d845efd5",
      "in_reply_to_id": 357224013,
      "user": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Much better.",
      "created_at": "2019-12-12T16:04:00Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357229756",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357229756"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 159,
      "original_line": 159,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357240183",
      "pull_request_review_id": 331354844,
      "id": 357240183,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzI0MDE4Mw==",
      "diff_hunk": "@@ -98,14 +99,23 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             \"-uacomment=testnode%d\" % i,\n         ]\n         if use_valgrind:\n+            valgrind_version = self.get_valgrind_version()\n+            if not valgrind_version:\n+                raise Exception('Valgrind not present')\n+            exit_on_first_error_flag = \"\"\n+            if valgrind_version and valgrind_version >= MIN_VALGRIND_VERSION_EARLY_EXIT:",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 25,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "3ed9706357126ac7d65c7e0f023b497c1749b2fa",
      "in_reply_to_id": null,
      "user": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This can be reduced to `if valgrind_version >= MIN_VALGRIND_VERSION_EARLY_EXIT:` since the `not valgrind_version` case is handled on L103.\r\n",
      "created_at": "2019-12-12T16:23:06Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357240183",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357240183"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 106,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357299481",
      "pull_request_review_id": 331432026,
      "id": 357299481,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzI5OTQ4MQ==",
      "diff_hunk": "@@ -20,6 +20,7 @@\n import collections\n import shlex\n import sys\n+import shutil",
      "path": "test/functional/test_framework/test_node.py",
      "position": 4,
      "original_position": 4,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "f10ca181b6958d6a78eb6eab1d884536ff36c601",
      "in_reply_to_id": null,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: alphabetical order",
      "created_at": "2019-12-12T18:24:07Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357299481",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357299481"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 22,
      "original_line": 22,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357316477",
      "pull_request_review_id": 331432026,
      "id": 357316477,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzMxNjQ3Nw==",
      "diff_hunk": "@@ -98,14 +99,23 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             \"-uacomment=testnode%d\" % i,\n         ]\n         if use_valgrind:\n+            valgrind_version = self.get_valgrind_version()\n+            if not valgrind_version:\n+                raise Exception('Valgrind not present')\n+            exit_on_first_error_flag = \"\"\n+            if valgrind_version >= MIN_VALGRIND_VERSION_EARLY_EXIT:\n+                exit_on_first_error_flag = \"--exit-on-first-error=yes\"",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 26,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "f10ca181b6958d6a78eb6eab1d884536ff36c601",
      "in_reply_to_id": null,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "consider extracting this to a function like below, or just put  `\"--exit-on-first-error=yes\" if version >= MIN_VALGRIND_VERSION_EARLY_EXIT else \"\"` in the array after all :)\r\n```diff\r\n-            exit_on_first_error_flag = \"\"\r\n-            if valgrind_version >= MIN_VALGRIND_VERSION_EARLY_EXIT:\r\n-                exit_on_first_error_flag = \"--exit-on-first-error=yes\"\r\n\r\n             self.args = [\"valgrind\",\r\n                             \"--suppressions={}\".format(suppressions_file),\r\n                             \"--gen-suppressions=all\",\r\n-                            exit_on_first_error_flag,\r\n+                            self.valgrind_early_exit(valgrind_version),\r\n \r\n+    def valgrind_early_exit(self, version):\r\n+        return \"--exit-on-first-error=yes\" if version >= MIN_VALGRIND_VERSION_EARLY_EXIT else \"\"\r\n```",
      "created_at": "2019-12-12T19:01:22Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357316477",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357316477"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 107,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357343980",
      "pull_request_review_id": 331432026,
      "id": 357343980,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzM0Mzk4MA==",
      "diff_hunk": "@@ -98,14 +99,23 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             \"-uacomment=testnode%d\" % i,\n         ]\n         if use_valgrind:\n+            valgrind_version = self.get_valgrind_version()\n+            if not valgrind_version:\n+                raise Exception('Valgrind not present')\n+            exit_on_first_error_flag = \"\"\n+            if valgrind_version >= MIN_VALGRIND_VERSION_EARLY_EXIT:\n+                exit_on_first_error_flag = \"--exit-on-first-error=yes\"\n             default_suppressions_file = os.path.join(\n-                os.path.dirname(os.path.realpath(__file__)),\n-                \"..\", \"..\", \"..\", \"contrib\", \"valgrind.supp\")\n+                    os.path.dirname(os.path.realpath(__file__)),\n+                    \"..\", \"..\", \"..\", \"contrib\", \"valgrind.supp\")\n             suppressions_file = os.getenv(\"VALGRIND_SUPPRESSIONS_FILE\",\n-                                          default_suppressions_file)\n-            self.args = [\"valgrind\", \"--suppressions={}\".format(suppressions_file),\n-                         \"--gen-suppressions=all\", \"--exit-on-first-error=yes\",\n-                         \"--error-exitcode=1\", \"--quiet\"] + self.args\n+                default_suppressions_file)\n+            self.args = [\"valgrind\",\n+                            \"--suppressions={}\".format(suppressions_file),\n+                            \"--gen-suppressions=all\",\n+                            exit_on_first_error_flag,\n+                            \"--error-exitcode=1\",\n+                            \"--quiet\"] + self.args",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 43,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "f10ca181b6958d6a78eb6eab1d884536ff36c601",
      "in_reply_to_id": null,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Suggest:\r\n```diff\r\n-            self.args = [\"valgrind\",\r\n-                            \"--suppressions={}\".format(suppressions_file),\r\n-                            \"--gen-suppressions=all\",\r\n-                            exit_on_first_error_flag,\r\n-                            \"--error-exitcode=1\",\r\n-                            \"--quiet\"] + self.args\r\n+            self.args = [\r\n+                \"valgrind\",\r\n+                \"--suppressions={}\".format(suppressions_file),\r\n+                \"--gen-suppressions=all\",\r\n+                self.valgrind_early_exit(valgrind_version),\r\n+                \"--error-exitcode=1\",\r\n+                \"--quiet\",\r\n+            ] + self.args\r\n```",
      "created_at": "2019-12-12T20:01:09Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357343980",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357343980"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 115,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357349478",
      "pull_request_review_id": 331432026,
      "id": 357349478,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzM0OTQ3OA==",
      "diff_hunk": "@@ -140,6 +150,17 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             AddressKeyPair('mzRe8QZMfGi58KyWCse2exxEFry2sfF2Y7', 'cPiRWE8KMjTRxH1MWkPerhfoHFn5iHPWVK5aPqjW8NxmdwenFinJ'),\n     ]\n \n+    def get_valgrind_version(self):\n+        \"\"\"Returns valgrind version (major, minor) in a tuple or None if not found\"\"\"",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 52,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "f10ca181b6958d6a78eb6eab1d884536ff36c601",
      "in_reply_to_id": null,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: s/Returns/Return/ like the other docstrings",
      "created_at": "2019-12-12T20:14:21Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357349478",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357349478"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 153,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357356648",
      "pull_request_review_id": 331506084,
      "id": 357356648,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzM1NjY0OA==",
      "diff_hunk": "@@ -98,14 +99,23 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             \"-uacomment=testnode%d\" % i,\n         ]\n         if use_valgrind:\n+            valgrind_version = self.get_valgrind_version()\n+            if not valgrind_version:\n+                raise Exception('Valgrind not present')\n+            exit_on_first_error_flag = \"\"\n+            if valgrind_version >= MIN_VALGRIND_VERSION_EARLY_EXIT:\n+                exit_on_first_error_flag = \"--exit-on-first-error=yes\"",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 26,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "f10ca181b6958d6a78eb6eab1d884536ff36c601",
      "in_reply_to_id": 357316477,
      "user": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ok, let's change it! :)",
      "created_at": "2019-12-12T20:31:37Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357356648",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357356648"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 107,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357357665",
      "pull_request_review_id": 331507475,
      "id": 357357665,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzM1NzY2NQ==",
      "diff_hunk": "@@ -98,14 +99,23 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             \"-uacomment=testnode%d\" % i,\n         ]\n         if use_valgrind:\n+            valgrind_version = self.get_valgrind_version()\n+            if not valgrind_version:\n+                raise Exception('Valgrind not present')\n+            exit_on_first_error_flag = \"\"\n+            if valgrind_version >= MIN_VALGRIND_VERSION_EARLY_EXIT:\n+                exit_on_first_error_flag = \"--exit-on-first-error=yes\"\n             default_suppressions_file = os.path.join(\n-                os.path.dirname(os.path.realpath(__file__)),\n-                \"..\", \"..\", \"..\", \"contrib\", \"valgrind.supp\")\n+                    os.path.dirname(os.path.realpath(__file__)),\n+                    \"..\", \"..\", \"..\", \"contrib\", \"valgrind.supp\")\n             suppressions_file = os.getenv(\"VALGRIND_SUPPRESSIONS_FILE\",\n-                                          default_suppressions_file)\n-            self.args = [\"valgrind\", \"--suppressions={}\".format(suppressions_file),\n-                         \"--gen-suppressions=all\", \"--exit-on-first-error=yes\",\n-                         \"--error-exitcode=1\", \"--quiet\"] + self.args\n+                default_suppressions_file)\n+            self.args = [\"valgrind\",\n+                            \"--suppressions={}\".format(suppressions_file),\n+                            \"--gen-suppressions=all\",\n+                            exit_on_first_error_flag,\n+                            \"--error-exitcode=1\",\n+                            \"--quiet\"] + self.args",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 43,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "f10ca181b6958d6a78eb6eab1d884536ff36c601",
      "in_reply_to_id": 357343980,
      "user": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Also done. Will do another force push. :)",
      "created_at": "2019-12-12T20:34:08Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357357665",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357357665"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 115,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357358681",
      "pull_request_review_id": 331508760,
      "id": 357358681,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzM1ODY4MQ==",
      "diff_hunk": "@@ -140,6 +150,17 @@ def __init__(self, i, datadir, *, chain, rpchost, timewait, bitcoind, bitcoin_cl\n             AddressKeyPair('mzRe8QZMfGi58KyWCse2exxEFry2sfF2Y7', 'cPiRWE8KMjTRxH1MWkPerhfoHFn5iHPWVK5aPqjW8NxmdwenFinJ'),\n     ]\n \n+    def get_valgrind_version(self):\n+        \"\"\"Returns valgrind version (major, minor) in a tuple or None if not found\"\"\"",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 52,
      "commit_id": "98d03f0346ec8856987dda37ab3d99a9f886f409",
      "original_commit_id": "f10ca181b6958d6a78eb6eab1d884536ff36c601",
      "in_reply_to_id": 357349478,
      "user": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ok :)",
      "created_at": "2019-12-12T20:36:40Z",
      "updated_at": "2020-05-10T07:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/17732#discussion_r357358681",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357358681"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 153,
      "side": "RIGHT"
    }
  ]
}