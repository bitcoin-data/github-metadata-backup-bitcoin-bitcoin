{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217",
    "id": 1265273155,
    "node_id": "PR_kwDOABII585LaolD",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/27217",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/27217.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/27217.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27217",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27217/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
    "number": 27217,
    "state": "closed",
    "locked": false,
    "maintainer_can_modify": false,
    "title": "wallet: Replace use of purpose strings with an enum",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Instead of storing and passing around fixed strings for the purpose of an address, use an enum.",
    "labels": [
      {
        "id": 149424,
        "node_id": "MDU6TGFiZWwxNDk0MjQ=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
        "name": "Wallet",
        "color": "08a781",
        "default": false
      }
    ],
    "created_at": "2023-03-06T22:28:58Z",
    "updated_at": "2023-04-13T11:05:04Z",
    "closed_at": "2023-04-12T09:31:28Z",
    "mergeable_state": "unknown",
    "merged_at": "2023-04-12T09:31:28Z",
    "merge_commit_sha": "cae0608ad4b195652e0cfcc905e19b50197d43ab",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      {
        "login": "aureleoules",
        "id": 22493292,
        "node_id": "MDQ6VXNlcjIyNDkzMjky",
        "avatar_url": "https://avatars.githubusercontent.com/u/22493292?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/aureleoules",
        "html_url": "https://github.com/aureleoules",
        "followers_url": "https://api.github.com/users/aureleoules/followers",
        "following_url": "https://api.github.com/users/aureleoules/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/aureleoules/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/aureleoules/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/aureleoules/subscriptions",
        "organizations_url": "https://api.github.com/users/aureleoules/orgs",
        "repos_url": "https://api.github.com/users/aureleoules/repos",
        "events_url": "https://api.github.com/users/aureleoules/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/aureleoules/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "requested_teams": [],
    "head": {
      "label": "achow101:address-purpose-enums",
      "ref": "address-purpose-enums",
      "sha": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 45006379,
        "node_id": "MDEwOlJlcG9zaXRvcnk0NTAwNjM3OQ==",
        "name": "bitcoin",
        "full_name": "achow101/bitcoin",
        "owner": {
          "login": "achow101",
          "id": 3782274,
          "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
          "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/achow101",
          "html_url": "https://github.com/achow101",
          "followers_url": "https://api.github.com/users/achow101/followers",
          "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
          "organizations_url": "https://api.github.com/users/achow101/orgs",
          "repos_url": "https://api.github.com/users/achow101/repos",
          "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/achow101/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/achow101/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/achow101/bitcoin",
        "archive_url": "https://api.github.com/repos/achow101/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/achow101/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/achow101/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/achow101/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/achow101/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/achow101/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/achow101/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/achow101/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/achow101/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/achow101/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/achow101/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/achow101/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/achow101/bitcoin/events",
        "forks_url": "https://api.github.com/repos/achow101/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/achow101/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/achow101/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/achow101/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/achow101/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/achow101/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/achow101/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/achow101/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/achow101/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/achow101/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/achow101/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/achow101/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/achow101/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/achow101/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/achow101/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/achow101/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:achow101/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/achow101/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/achow101/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/achow101/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/achow101/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/achow101/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/achow101/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/achow101/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/achow101/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/achow101/bitcoin/hooks",
        "svn_url": "https://github.com/achow101/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 10,
        "stargazers_count": 34,
        "watchers_count": 34,
        "size": 239169,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-08T11:32:20Z",
        "created_at": "2015-10-27T00:20:28Z",
        "updated_at": "2023-05-16T00:18:41Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "27dcc07c08a77eba53ccc91e5521ff674f1bd198",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 34351,
        "stargazers_count": 69858,
        "watchers_count": 69858,
        "size": 234261,
        "default_branch": "master",
        "open_issues_count": 631,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-09T11:53:48Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-06-09T12:15:59Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 233,
    "deletions": 152,
    "changed_files": 25,
    "commits": 4,
    "review_comments": 56,
    "comments": 6
  },
  "events": [
    {
      "event": "commented",
      "id": 1457117597,
      "node_id": "IC_kwDOABII585W2dmd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1457117597",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-06T22:29:01Z",
      "updated_at": "2023-04-12T08:45:20Z",
      "author_association": "MEMBER",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [josibake](https://github.com/bitcoin/bitcoin/pull/27217#issuecomment-1504894418) |\n| Stale ACK | [aureleoules](https://github.com/bitcoin/bitcoin/pull/27217#pullrequestreview-1357917977), [ryanofsky](https://github.com/bitcoin/bitcoin/pull/27217#pullrequestreview-1377763599), [Xekyo](https://github.com/bitcoin/bitcoin/pull/27217#issuecomment-1503974799) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#bitcoin-core/gui/723](https://github.com/bitcoin-core/gui/pull/723) (Add warnings for non-active addresses in receive tab and address book by pinheadmz)\n* [#bitcoin-core/gui/650](https://github.com/bitcoin-core/gui/pull/650) (Add Import to Wallet GUI by KolbyML)\n* [#27286](https://github.com/bitcoin/bitcoin/pull/27286) (wallet: Keep track of the wallet's own transaction outputs in memory by achow101)\n* [#27224](https://github.com/bitcoin/bitcoin/pull/27224) (refactor: Remove CAddressBookData::destdata by ryanofsky)\n* [#26840](https://github.com/bitcoin/bitcoin/pull/26840) (refactor: importpubkey, importprivkey, importaddress, importmulti, and importdescriptors rpc by KolbyML)\n* [#26836](https://github.com/bitcoin/bitcoin/pull/26836) (wallet: finish addressbook encapsulation by furszy)\n* [#25620](https://github.com/bitcoin/bitcoin/pull/25620) (wallet: Introduce AddressBookManager by furszy)\n* [#25297](https://github.com/bitcoin/bitcoin/pull/25297) (wallet: group independent db writes on single batched db transaction by furszy)\n* [#24914](https://github.com/bitcoin/bitcoin/pull/24914) (wallet: Load database records in a particular order by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#issuecomment-1457117597",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27217"
    },
    {
      "event": "labeled",
      "id": 8679476080,
      "node_id": "LE_lADOABII585gGfvjzwAAAAIFVktw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8679476080",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-06T22:29:03Z",
      "label": {
        "name": "Wallet",
        "color": "08a781"
      }
    },
    {
      "event": "reviewed",
      "id": 1327941131,
      "node_id": "PRR_kwDOABII585PJsYL",
      "url": null,
      "actor": null,
      "commit_id": "87f8f8be652f66e22bf4df5241222b4554c2c9d6",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "nits",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#pullrequestreview-1327941131",
      "submitted_at": "2023-03-07T09:15:55Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8687551702,
      "node_id": "HRFPE_lADOABII585gGfvjzwAAAAIF0YTW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8687551702",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-07T15:56:52Z"
    },
    {
      "event": "reviewed",
      "id": 1335473435,
      "node_id": "PRR_kwDOABII585PmbUb",
      "url": null,
      "actor": null,
      "commit_id": "44a2ae100b600bc9c9f4c956223fab3b1948ea8d",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "This is a nice change, and I started reviewing 44a2ae100b600bc9c9f4c956223fab3b1948ea8d, but it looks like there are a lot of functions taking `optional<AddressPurpose>` values that should more properly take `AddressPurpose` values for simplicity and better type checking. (Basically `NotifyAddressBookChanged` and all the functions it calls). I think this might stem from not having separate SetAddressBook and UpdateAddressBook functions, so I want to look into this before reviewing more of the PR. (Having separate functions could help because Set function could make purpose a required parameter, while the Update function could let it be it optional).",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#pullrequestreview-1335473435",
      "submitted_at": "2023-03-10T20:03:15Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
    },
    {
      "event": "commented",
      "id": 1467021441,
      "node_id": "IC_kwDOABII585XcPiB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1467021441",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-13T21:57:27Z",
      "updated_at": "2023-03-13T21:57:27Z",
      "author_association": "MEMBER",
      "body": "I made some changes to this in a branch that could be adopted https://github.com/ryanofsky/bitcoin/commits/review.27217.1-edit\r\n\r\n- Tries to split commits and add a lot of comments so this is easier to review\r\n- Make enum a public wallet type instead of putting it in interfaces/ so wallet/ code does not depend on interfaces/wallet code and `interfaces::Wallet::AddressPurpose` becomes just `wallet::AddressPurpose`\r\n- Replaced `std::optional<AddressPurpose>` with plain `AddressPurpose` in many places where purpose is known or can be derived from IsMine, to simplify code and avoid bugs.\r\n- Dropped `AddressPurpose::UNKNOWN` to avoid defining an enum value that doesn't have any corresponding value in the wallet database.\r\n- Added `AddressPurpse::REFUND` enum value to be able to load old wallets that may have refund addresses without errors or warnings.\r\n- Changed assert(0) failure when loading wallets with unrecognized purpose strings with a warning.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#issuecomment-1467021441",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27217"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8758032457,
      "node_id": "HRFPE_lADOABII585gGfvjzwAAAAIKBPhJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8758032457",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-15T17:10:15Z"
    },
    {
      "event": "commented",
      "id": 1470427455,
      "node_id": "IC_kwDOABII585XpPE_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1470427455",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-15T17:10:23Z",
      "updated_at": "2023-03-15T17:10:23Z",
      "author_association": "MEMBER",
      "body": "> I made some changes to this in a branch that could be adopted https://github.com/ryanofsky/bitcoin/commits/review.27217.1-edit\r\n\r\nI've adopted these changes.",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#issuecomment-1470427455",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27217"
    },
    {
      "event": "reviewed",
      "id": 1342339656,
      "node_id": "PRR_kwDOABII585QAnpI",
      "url": null,
      "actor": null,
      "commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Code review ACK db521d3e89b23046f73410a875bb9660178e3842. Thanks for adopting suggested changes. I left some new suggestions, but they are not important and can be ignored.\r\n\r\nI think this PR should be straightforward for others to review now, and nice because it should demystify the purpose field and wallet address book as a whole.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#pullrequestreview-1342339656",
      "submitted_at": "2023-03-15T21:07:30Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8782429638,
      "node_id": "HRFPE_lADOABII585gGfvjzwAAAAILeT3G",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8782429638",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-17T21:10:34Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8782463183,
      "node_id": "HRFPE_lADOABII585gGfvjzwAAAAILecDP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8782463183",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-17T21:17:42Z"
    },
    {
      "event": "reviewed",
      "id": 1348830142,
      "node_id": "PRR_kwDOABII585QZYO-",
      "url": null,
      "actor": null,
      "commit_id": "0d18142f595b43070bd07b608d43c9ed9b37cdcc",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Code review ACK 0d18142f595b43070bd07b608d43c9ed9b37cdcc. Suggested a few comment/whitespace tweaks, but this is also fine as-is.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#pullrequestreview-1348830142",
      "submitted_at": "2023-03-20T15:47:08Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8797080340,
      "node_id": "HRFPE_lADOABII585gGfvjzwAAAAIMWMsU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8797080340",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-20T16:57:06Z"
    },
    {
      "event": "reviewed",
      "id": 1349139267,
      "node_id": "PRR_kwDOABII585QajtD",
      "url": null,
      "actor": null,
      "commit_id": "a48010f1fd6d8a430b8234789ac3c91ec9d06972",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Code review ACK a48010f1fd6d8a430b8234789ac3c91ec9d06972. Just comment and whitespace changes since last review",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#pullrequestreview-1349139267",
      "submitted_at": "2023-03-20T18:03:31Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
    },
    {
      "event": "reviewed",
      "id": 1357917977,
      "node_id": "PRR_kwDOABII585Q8C8Z",
      "url": null,
      "actor": null,
      "commit_id": "a48010f1fd6d8a430b8234789ac3c91ec9d06972",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "ACK a48010f1fd6d8a430b8234789ac3c91ec9d06972, looks good to me.",
      "user": {
        "login": "aureleoules",
        "id": 22493292,
        "node_id": "MDQ6VXNlcjIyNDkzMjky",
        "avatar_url": "https://avatars.githubusercontent.com/u/22493292?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/aureleoules",
        "html_url": "https://github.com/aureleoules",
        "followers_url": "https://api.github.com/users/aureleoules/followers",
        "following_url": "https://api.github.com/users/aureleoules/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/aureleoules/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/aureleoules/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/aureleoules/subscriptions",
        "organizations_url": "https://api.github.com/users/aureleoules/orgs",
        "repos_url": "https://api.github.com/users/aureleoules/repos",
        "events_url": "https://api.github.com/users/aureleoules/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/aureleoules/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#pullrequestreview-1357917977",
      "submitted_at": "2023-03-26T00:11:47Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
    },
    {
      "event": "reviewed",
      "id": 1359373444,
      "node_id": "PRR_kwDOABII585RBmSE",
      "url": null,
      "actor": null,
      "commit_id": "a48010f1fd6d8a430b8234789ac3c91ec9d06972",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Code review ACK https://github.com/bitcoin/bitcoin/pull/27217/commits/a48010f1fd6d8a430b8234789ac3c91ec9d06972\r\n\r\nAbsolutely love this. Death to strings. \r\n\r\nLooks good from a code review standpoint, also did some light testing with the GUI and RPC calls, planning on doing more.",
      "user": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#pullrequestreview-1359373444",
      "submitted_at": "2023-03-27T15:54:25Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
    },
    {
      "event": "reviewed",
      "id": 1376251729,
      "node_id": "PRR_kwDOABII585SB-9R",
      "url": null,
      "actor": null,
      "commit_id": "a48010f1fd6d8a430b8234789ac3c91ec9d06972",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "~This PR has 3 acks so maybe it is ready to be merged.~ I think this PR basically looks good as is but it would be a little better if it avoided changing behavior for refund addresses in translateTransactionType (see comment below)",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#pullrequestreview-1376251729",
      "submitted_at": "2023-04-07T15:16:29Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8964325962,
      "node_id": "HRFPE_lADOABII585gGfvjzwAAAAIWUMJK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8964325962",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-10T14:40:22Z"
    },
    {
      "event": "reviewed",
      "id": 1377763599,
      "node_id": "PRR_kwDOABII585SHwEP",
      "url": null,
      "actor": null,
      "commit_id": "98821a7aca88ac9401786e848899866b71446460",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Code review ACK 98821a7aca88ac9401786e848899866b71446460. Just suggested changes since last review, the main one being changing `translateTransactionType` to use a switch statement.\r\n\r\nThis had 3 reviews before, so it would be nice to have reacks and hopefully merge this soon.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#pullrequestreview-1377763599",
      "submitted_at": "2023-04-10T16:05:47Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
    },
    {
      "event": "review_requested",
      "id": 8965001168,
      "node_id": "RRE_lADOABII585gGfvjzwAAAAIWWw_Q",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8965001168",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-10T16:05:52Z",
      "requested_reviewer": {
        "login": "aureleoules",
        "id": 22493292,
        "node_id": "MDQ6VXNlcjIyNDkzMjky",
        "avatar_url": "https://avatars.githubusercontent.com/u/22493292?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/aureleoules",
        "html_url": "https://github.com/aureleoules",
        "followers_url": "https://api.github.com/users/aureleoules/followers",
        "following_url": "https://api.github.com/users/aureleoules/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/aureleoules/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/aureleoules/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/aureleoules/subscriptions",
        "organizations_url": "https://api.github.com/users/aureleoules/orgs",
        "repos_url": "https://api.github.com/users/aureleoules/repos",
        "events_url": "https://api.github.com/users/aureleoules/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/aureleoules/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "review_requested",
      "id": 8965001210,
      "node_id": "RRE_lADOABII585gGfvjzwAAAAIWWw_6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8965001210",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-10T16:05:52Z",
      "requested_reviewer": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "reviewed",
      "id": 1377895422,
      "node_id": "PRR_kwDOABII585SIQP-",
      "url": null,
      "actor": null,
      "commit_id": "98821a7aca88ac9401786e848899866b71446460",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "ACK 98821a7aca88ac9401786e848899866b71446460",
      "user": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#pullrequestreview-1377895422",
      "submitted_at": "2023-04-10T18:28:39Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8968269769,
      "node_id": "HRFPE_lADOABII585gGfvjzwAAAAIWjO_J",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8968269769",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-11T00:44:12Z"
    },
    {
      "event": "commented",
      "id": 1502967998,
      "node_id": "IC_kwDOABII585ZlXi-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1502967998",
      "actor": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-11T09:14:53Z",
      "updated_at": "2023-04-11T09:14:53Z",
      "author_association": "MEMBER",
      "body": "ACK https://github.com/bitcoin/bitcoin/pull/27217/commits/635c50a57b3f72f83f1ee681f6a4b7766b8988f6",
      "user": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#issuecomment-1502967998",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27217"
    },
    {
      "event": "review_request_removed",
      "id": 8971224227,
      "node_id": "RRRE_lADOABII585gGfvjzwAAAAIWugSj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8971224227",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-11T09:14:59Z",
      "requested_reviewer": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "review_requested",
      "id": 8971224425,
      "node_id": "RRE_lADOABII585gGfvjzwAAAAIWugVp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8971224425",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-11T09:15:00Z",
      "requested_reviewer": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "review_requested",
      "id": 8971224453,
      "node_id": "RRE_lADOABII585gGfvjzwAAAAIWugWF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8971224453",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-11T09:15:00Z",
      "requested_reviewer": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "labeled",
      "id": 8977157724,
      "node_id": "LE_lADOABII585gGfvjzwAAAAIXFI5c",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8977157724",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-11T18:51:02Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 1503974799,
      "node_id": "IC_kwDOABII585ZpNWP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1503974799",
      "actor": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-11T19:23:57Z",
      "updated_at": "2023-04-11T19:23:57Z",
      "author_association": "MEMBER",
      "body": "reACK https://github.com/bitcoin/bitcoin/commit/635c50a57b3f72f83f1ee681f6a4b7766b8988f6\r\n\r\nbut appears to need rebase",
      "user": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#issuecomment-1503974799",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27217"
    },
    {
      "event": "review_request_removed",
      "id": 8977412240,
      "node_id": "RRRE_lADOABII585gGfvjzwAAAAIXGHCQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8977412240",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-11T19:24:02Z",
      "requested_reviewer": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDg3NDE1MjJlNmM3NWEwYWQwYzk2ZjQ0ZTU2NjhiZWZjMTYyNGZiMGI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8741522e6c75a0ad0c96f44e5668befc1624fb0b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8741522e6c75a0ad0c96f44e5668befc1624fb0b",
      "tree": {
        "sha": "7a48af86e753e88f2222883c1e38c6ab06c02883",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7a48af86e753e88f2222883c1e38c6ab06c02883"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/27dcc07c08a77eba53ccc91e5521ff674f1bd198",
          "sha": "27dcc07c08a77eba53ccc91e5521ff674f1bd198",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/27dcc07c08a77eba53ccc91e5521ff674f1bd198"
        }
      ],
      "message": "wallet: Add wallet/types.h for simple public enum and struct types\n\nMove isminetype and isminefilter there this commit, add WalletPurpose type next\ncommit.",
      "committer": {
        "name": "Andrew Chow",
        "email": "github@achow101.com",
        "date": "2023-04-11T19:52:25Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2023-03-13T15:53:33Z"
      },
      "sha": "8741522e6c75a0ad0c96f44e5668befc1624fb0b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDJmODAwMDUxMzY3NTQ2N2U2MmJlZTlkMGY4MzZkMmZlZmNjNDc5YWY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2f8000513675467e62bee9d0f836d2fefcc479af",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2f8000513675467e62bee9d0f836d2fefcc479af",
      "tree": {
        "sha": "1f22faf5b539285bdfc708db70752308fa2a6561",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1f22faf5b539285bdfc708db70752308fa2a6561"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8741522e6c75a0ad0c96f44e5668befc1624fb0b",
          "sha": "8741522e6c75a0ad0c96f44e5668befc1624fb0b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8741522e6c75a0ad0c96f44e5668befc1624fb0b"
        }
      ],
      "message": "wallet: add AddressPurpose enum to replace string values",
      "committer": {
        "name": "Andrew Chow",
        "email": "github@achow101.com",
        "date": "2023-04-11T19:52:25Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2023-03-13T19:35:04Z"
      },
      "sha": "2f8000513675467e62bee9d0f836d2fefcc479af"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGU4M2JhYmUzYjg1YjIyZTIzNjBhOTlmOTgyN2IyYjBkMTA3YWQwZmE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e83babe3b85b22e2360a99f9827b2b0d107ad0fa",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e83babe3b85b22e2360a99f9827b2b0d107ad0fa",
      "tree": {
        "sha": "67baf57399f7b1c386c64317164a0360976d1451",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/67baf57399f7b1c386c64317164a0360976d1451"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2f8000513675467e62bee9d0f836d2fefcc479af",
          "sha": "2f8000513675467e62bee9d0f836d2fefcc479af",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2f8000513675467e62bee9d0f836d2fefcc479af"
        }
      ],
      "message": "wallet: Replace use of purpose strings with an enum\n\nInstead of storing and passing around fixed strings for the purpose of\nan address, use an enum.\n\nThis also rationalizes the CAddressBookData struct, documenting all fields and\nmaking them public, and simplifying the representation to avoid bugs like\nhttps://github.com/bitcoin/bitcoin/pull/26761#discussion_r1134615114 and make\nit not possible to invalid address data like change addresses with labels.\n\nCo-authored-by: Ryan Ofsky <ryan@ofsky.org>",
      "committer": {
        "name": "Andrew Chow",
        "email": "github@achow101.com",
        "date": "2023-04-11T19:55:31Z"
      },
      "author": {
        "name": "Andrew Chow",
        "email": "github@achow101.com",
        "date": "2023-02-20T22:45:32Z"
      },
      "sha": "e83babe3b85b22e2360a99f9827b2b0d107ad0fa"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDE4ZmM3MWEzYWRlZTVkZTBmNzRiYTZmZjE4ZjVlZDMxYmE3OWE2NDY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "tree": {
        "sha": "7a82ac65013947eaa7a5c432b921b7eeca380b40",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7a82ac65013947eaa7a5c432b921b7eeca380b40"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e83babe3b85b22e2360a99f9827b2b0d107ad0fa",
          "sha": "e83babe3b85b22e2360a99f9827b2b0d107ad0fa",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e83babe3b85b22e2360a99f9827b2b0d107ad0fa"
        }
      ],
      "message": "doc: Release note for purpose string restriction",
      "committer": {
        "name": "Andrew Chow",
        "email": "github@achow101.com",
        "date": "2023-04-11T19:55:32Z"
      },
      "author": {
        "name": "Andrew Chow",
        "email": "github@achow101.com",
        "date": "2023-03-17T21:10:18Z"
      },
      "sha": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8977698248,
      "node_id": "HRFPE_lADOABII585gGfvjzwAAAAIXHM3I",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8977698248",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-11T20:01:36Z"
    },
    {
      "event": "unlabeled",
      "id": 8978108261,
      "node_id": "UNLE_lADOABII585gGfvjzwAAAAIXIw9l",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8978108261",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-11T20:56:03Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 1504894418,
      "node_id": "IC_kwDOABII585Zst3S",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1504894418",
      "actor": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-12T08:45:17Z",
      "updated_at": "2023-04-12T08:45:17Z",
      "author_association": "MEMBER",
      "body": "reACK https://github.com/bitcoin/bitcoin/commit/18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "user": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#issuecomment-1504894418",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27217"
    },
    {
      "event": "review_requested",
      "id": 8982978332,
      "node_id": "RRE_lADOABII585gGfvjzwAAAAIXbV8c",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8982978332",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-12T08:45:23Z",
      "requested_reviewer": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "merged",
      "id": 8983442832,
      "node_id": "ME_lADOABII585gGfvjzwAAAAIXdHWQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8983442832",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "cae0608ad4b195652e0cfcc905e19b50197d43ab",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/cae0608ad4b195652e0cfcc905e19b50197d43ab",
      "created_at": "2023-04-12T09:31:28Z"
    },
    {
      "event": "closed",
      "id": 8983442858,
      "node_id": "CE_lADOABII585gGfvjzwAAAAIXdHWq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8983442858",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-12T09:31:28Z"
    },
    {
      "event": "referenced",
      "id": 8990745115,
      "node_id": "REFE_lADOABII585gGfvjzwAAAAIX4-Ib",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8990745115",
      "actor": {
        "login": "sidhujag",
        "id": 6238042,
        "node_id": "MDQ6VXNlcjYyMzgwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6238042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sidhujag",
        "html_url": "https://github.com/sidhujag",
        "followers_url": "https://api.github.com/users/sidhujag/followers",
        "following_url": "https://api.github.com/users/sidhujag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sidhujag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sidhujag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sidhujag/subscriptions",
        "organizations_url": "https://api.github.com/users/sidhujag/orgs",
        "repos_url": "https://api.github.com/users/sidhujag/repos",
        "events_url": "https://api.github.com/users/sidhujag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sidhujag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "130e81ac1022224267241db8d1c2b53f0d0bc90c",
      "commit_url": "https://api.github.com/repos/syscoin/syscoin/commits/130e81ac1022224267241db8d1c2b53f0d0bc90c",
      "created_at": "2023-04-12T23:06:42Z"
    },
    {
      "event": "reviewed",
      "id": 1382653264,
      "node_id": "PRR_kwDOABII585SaZ1Q",
      "url": null,
      "actor": null,
      "commit_id": "e83babe3b85b22e2360a99f9827b2b0d107ad0fa",
      "commit_url": null,
      "created_at": null,
      "author_association": "NONE",
      "user": {
        "login": "denavila",
        "id": 123340139,
        "node_id": "U_kgDOB1oFaw",
        "avatar_url": "https://avatars.githubusercontent.com/u/123340139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/denavila",
        "html_url": "https://github.com/denavila",
        "followers_url": "https://api.github.com/users/denavila/followers",
        "following_url": "https://api.github.com/users/denavila/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/denavila/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/denavila/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/denavila/subscriptions",
        "organizations_url": "https://api.github.com/users/denavila/orgs",
        "repos_url": "https://api.github.com/users/denavila/repos",
        "events_url": "https://api.github.com/users/denavila/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/denavila/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#pullrequestreview-1382653264",
      "submitted_at": "2023-04-13T05:29:02Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
    },
    {
      "event": "referenced",
      "id": 8997100907,
      "node_id": "REFE_lADOABII585gGfvjzwAAAAIYRN1r",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8997100907",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "19764dc143281376ea08e954018479ed10405b72",
      "commit_url": "https://api.github.com/repos/bitcoin-core/gui/commits/19764dc143281376ea08e954018479ed10405b72",
      "created_at": "2023-04-13T13:41:44Z"
    },
    {
      "event": "referenced",
      "id": 8997522250,
      "node_id": "REFE_lADOABII585gGfvjzwAAAAIYS0tK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8997522250",
      "actor": {
        "login": "sidhujag",
        "id": 6238042,
        "node_id": "MDQ6VXNlcjYyMzgwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6238042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sidhujag",
        "html_url": "https://github.com/sidhujag",
        "followers_url": "https://api.github.com/users/sidhujag/followers",
        "following_url": "https://api.github.com/users/sidhujag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sidhujag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sidhujag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sidhujag/subscriptions",
        "organizations_url": "https://api.github.com/users/sidhujag/orgs",
        "repos_url": "https://api.github.com/users/sidhujag/repos",
        "events_url": "https://api.github.com/users/sidhujag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sidhujag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "58b94f3a10d4ba361335d56d094ee16fccaeedc9",
      "commit_url": "https://api.github.com/repos/syscoin/syscoin/commits/58b94f3a10d4ba361335d56d094ee16fccaeedc9",
      "created_at": "2023-04-13T14:14:57Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1127561494",
      "pull_request_review_id": 1327941131,
      "id": 1127561494,
      "node_id": "PRRC_kwDOABII585DNTkW",
      "diff_hunk": "@@ -71,6 +71,10 @@ def run_test(self):\n         node = self.nodes[0]\n         assert_equal(len(node.listunspent()), 0)\n \n+        self.log.info(\"Checking listlabels' invalid parameters\")\n+        assert_raises_rpc_error(-8, \"Invalid 'purpose' argument, must be one of 'send', or 'receive'.\", node.listlabels, \"notavalidpurpose\");\n+        assert_raises_rpc_error(-8, \"Invalid 'purpose' argument, must be one of 'send', or 'receive'.\", node.listlabels, \"unknown\");",
      "path": "test/functional/wallet_labels.py",
      "position": null,
      "original_position": 6,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "87f8f8be652f66e22bf4df5241222b4554c2c9d6",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit:\r\n\r\n```\r\ntest/functional/wallet_labels.py:76:132: E703 statement ends with a semicolon",
      "created_at": "2023-03-07T09:11:40Z",
      "updated_at": "2023-03-07T09:15:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1127561494",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1127561494"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 76,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1127564320",
      "pull_request_review_id": 1327941131,
      "id": 1127564320,
      "node_id": "PRRC_kwDOABII585DNUQg",
      "diff_hunk": "@@ -206,10 +207,48 @@ class CAddressBookData\n private:\n     bool m_change{true};\n     std::string m_label;\n-public:\n     std::string purpose;\n+    //! The purpose of this address\n+    interfaces::Wallet::AddressPurpose m_purpose{interfaces::Wallet::AddressPurpose::UNKNOWN};\n+\n+public:\n+    CAddressBookData() {}\n+\n+    static std::string PurposeToString(interfaces::Wallet::AddressPurpose p)\n+    {\n+        switch(p) {\n+        case interfaces::Wallet::AddressPurpose::UNKNOWN:\n+            return \"unknown\";\n+        case interfaces::Wallet::AddressPurpose::RECEIVE:\n+            return \"receive\";\n+        case interfaces::Wallet::AddressPurpose::SEND:\n+            return \"send\";\n+        // no default case so the compiler will warn when a new enum as added\n+        }",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 30,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "87f8f8be652f66e22bf4df5241222b4554c2c9d6",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n        } // no default case so the compiler will warn when a new enum is added\r\n        \r\n```\r\n\r\nnit: typo",
      "created_at": "2023-03-07T09:14:07Z",
      "updated_at": "2023-03-07T09:15:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1127564320",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1127564320"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": 226,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 227,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1127566183",
      "pull_request_review_id": 1327941131,
      "id": 1127566183,
      "node_id": "PRRC_kwDOABII585DNUtn",
      "diff_hunk": "@@ -206,10 +207,48 @@ class CAddressBookData\n private:\n     bool m_change{true};\n     std::string m_label;\n-public:\n     std::string purpose;\n+    //! The purpose of this address\n+    interfaces::Wallet::AddressPurpose m_purpose{interfaces::Wallet::AddressPurpose::UNKNOWN};\n+\n+public:\n+    CAddressBookData() {}\n+\n+    static std::string PurposeToString(interfaces::Wallet::AddressPurpose p)\n+    {\n+        switch(p) {\n+        case interfaces::Wallet::AddressPurpose::UNKNOWN:\n+            return \"unknown\";\n+        case interfaces::Wallet::AddressPurpose::RECEIVE:\n+            return \"receive\";\n+        case interfaces::Wallet::AddressPurpose::SEND:\n+            return \"send\";\n+        // no default case so the compiler will warn when a new enum as added\n+        }\n+        assert(false);\n+    }\n+    static interfaces::Wallet::AddressPurpose PurposeFromString(const std::string& s)\n+    {\n+        if (s == \"unknown\") {\n+            return interfaces::Wallet::AddressPurpose::UNKNOWN;\n+        } else if (s == \"receive\") {\n+            return interfaces::Wallet::AddressPurpose::RECEIVE;\n+        } else if (s == \"send\") {\n+            return interfaces::Wallet::AddressPurpose::SEND;\n+        } else {\n+            // Any other string is a programming error",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 42,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "87f8f8be652f66e22bf4df5241222b4554c2c9d6",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n            // Any other string is a programming error or disk corruption\r\n```\r\n\r\nnit: This could also happen on disk corruption, no?",
      "created_at": "2023-03-07T09:15:42Z",
      "updated_at": "2023-03-07T09:15:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1127566183",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1127566183"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 239,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1128102630",
      "pull_request_review_id": 1328900697,
      "id": 1128102630,
      "node_id": "PRRC_kwDOABII585DPXrm",
      "diff_hunk": "@@ -71,6 +71,10 @@ def run_test(self):\n         node = self.nodes[0]\n         assert_equal(len(node.listunspent()), 0)\n \n+        self.log.info(\"Checking listlabels' invalid parameters\")\n+        assert_raises_rpc_error(-8, \"Invalid 'purpose' argument, must be one of 'send', or 'receive'.\", node.listlabels, \"notavalidpurpose\");\n+        assert_raises_rpc_error(-8, \"Invalid 'purpose' argument, must be one of 'send', or 'receive'.\", node.listlabels, \"unknown\");",
      "path": "test/functional/wallet_labels.py",
      "position": null,
      "original_position": 6,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "87f8f8be652f66e22bf4df5241222b4554c2c9d6",
      "in_reply_to_id": 1127561494,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed",
      "created_at": "2023-03-07T15:56:50Z",
      "updated_at": "2023-03-07T15:56:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1128102630",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1128102630"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 76,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1128102852",
      "pull_request_review_id": 1328901063,
      "id": 1128102852,
      "node_id": "PRRC_kwDOABII585DPXvE",
      "diff_hunk": "@@ -206,10 +207,48 @@ class CAddressBookData\n private:\n     bool m_change{true};\n     std::string m_label;\n-public:\n     std::string purpose;\n+    //! The purpose of this address\n+    interfaces::Wallet::AddressPurpose m_purpose{interfaces::Wallet::AddressPurpose::UNKNOWN};\n+\n+public:\n+    CAddressBookData() {}\n+\n+    static std::string PurposeToString(interfaces::Wallet::AddressPurpose p)\n+    {\n+        switch(p) {\n+        case interfaces::Wallet::AddressPurpose::UNKNOWN:\n+            return \"unknown\";\n+        case interfaces::Wallet::AddressPurpose::RECEIVE:\n+            return \"receive\";\n+        case interfaces::Wallet::AddressPurpose::SEND:\n+            return \"send\";\n+        // no default case so the compiler will warn when a new enum as added\n+        }",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 30,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "87f8f8be652f66e22bf4df5241222b4554c2c9d6",
      "in_reply_to_id": 1127564320,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2023-03-07T15:56:57Z",
      "updated_at": "2023-03-07T15:56:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1128102852",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1128102852"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": 226,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 227,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1128103018",
      "pull_request_review_id": 1328901385,
      "id": 1128103018,
      "node_id": "PRRC_kwDOABII585DPXxq",
      "diff_hunk": "@@ -206,10 +207,48 @@ class CAddressBookData\n private:\n     bool m_change{true};\n     std::string m_label;\n-public:\n     std::string purpose;\n+    //! The purpose of this address\n+    interfaces::Wallet::AddressPurpose m_purpose{interfaces::Wallet::AddressPurpose::UNKNOWN};\n+\n+public:\n+    CAddressBookData() {}\n+\n+    static std::string PurposeToString(interfaces::Wallet::AddressPurpose p)\n+    {\n+        switch(p) {\n+        case interfaces::Wallet::AddressPurpose::UNKNOWN:\n+            return \"unknown\";\n+        case interfaces::Wallet::AddressPurpose::RECEIVE:\n+            return \"receive\";\n+        case interfaces::Wallet::AddressPurpose::SEND:\n+            return \"send\";\n+        // no default case so the compiler will warn when a new enum as added\n+        }\n+        assert(false);\n+    }\n+    static interfaces::Wallet::AddressPurpose PurposeFromString(const std::string& s)\n+    {\n+        if (s == \"unknown\") {\n+            return interfaces::Wallet::AddressPurpose::UNKNOWN;\n+        } else if (s == \"receive\") {\n+            return interfaces::Wallet::AddressPurpose::RECEIVE;\n+        } else if (s == \"send\") {\n+            return interfaces::Wallet::AddressPurpose::SEND;\n+        } else {\n+            // Any other string is a programming error",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 42,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "87f8f8be652f66e22bf4df5241222b4554c2c9d6",
      "in_reply_to_id": 1127566183,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2023-03-07T15:57:03Z",
      "updated_at": "2023-03-07T15:57:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1128103018",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1128103018"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 239,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1132779833",
      "pull_request_review_id": 1335473435,
      "id": 1132779833,
      "node_id": "PRRC_kwDOABII585DhNk5",
      "diff_hunk": "@@ -57,6 +57,12 @@ using WalletValueMap = std::map<std::string, std::string>;\n class Wallet\n {\n public:\n+    enum class AddressPurpose : uint8_t {\n+        UNKNOWN = 0,",
      "path": "src/interfaces/wallet.h",
      "position": null,
      "original_position": 5,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "44a2ae100b600bc9c9f4c956223fab3b1948ea8d",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (44a2ae100b600bc9c9f4c956223fab3b1948ea8d)\r\n\r\nLet's get rid of this unknown enum value. It looks like it was never written to disk and was purely an in-memory value. There are only two `WalletBatch::WritePurpose` calls in the codebase and if you check their callers you can see they are always passing hardcoded \"send\" and \"receive\" or \"\" values. This goes back to #2539 when purpose rows were first added to the database.\r\n\r\nHaving this UNKNOWN value would just be confusing and could be a footgun because you couldn't write a function taking an `AddressPurpose` argument and have the compiler guarantee it was passed a known value.",
      "created_at": "2023-03-10T19:12:00Z",
      "updated_at": "2023-03-10T20:03:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1132779833",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1132779833"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 61,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1132788102",
      "pull_request_review_id": 1335473435,
      "id": 1132788102,
      "node_id": "PRRC_kwDOABII585DhPmG",
      "diff_hunk": "@@ -57,6 +57,12 @@ using WalletValueMap = std::map<std::string, std::string>;\n class Wallet\n {\n public:\n+    enum class AddressPurpose : uint8_t {\n+        UNKNOWN = 0,\n+        RECEIVE = 1,\n+        SEND = 2,",
      "path": "src/interfaces/wallet.h",
      "position": null,
      "original_position": 7,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "44a2ae100b600bc9c9f4c956223fab3b1948ea8d",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (44a2ae100b600bc9c9f4c956223fab3b1948ea8d)\r\n\r\nIn #2539 there was also a [\"refund\"](https://github.com/bitcoin/bitcoin/blob/a41d5fe01947f2f878c055670986a165af800f9a/src/qt/paymentserver.cpp#L536) purpose, so it might make sense to add a REFUND enum value to allow those wallets to be loaded without triggering an `assert(false)` error in PurposeFromString.",
      "created_at": "2023-03-10T19:20:56Z",
      "updated_at": "2023-03-10T20:03:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1132788102",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1132788102"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": 62,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 63,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1132795600",
      "pull_request_review_id": 1335473435,
      "id": 1132795600,
      "node_id": "PRRC_kwDOABII585DhRbQ",
      "diff_hunk": "@@ -52,16 +52,17 @@ struct AddressTableEntryLessThan\n };\n \n /* Determine address type from address purpose */\n-static AddressTableEntry::Type translateTransactionType(const QString &strPurpose, bool isMine)\n+static AddressTableEntry::Type translateTransactionType(const std::optional<interfaces::Wallet::AddressPurpose>& purpose, bool isMine)\n {\n     AddressTableEntry::Type addressType = AddressTableEntry::Hidden;\n     // \"refund\" addresses aren't shown, and change addresses aren't returned by getAddresses at all.\n-    if (strPurpose == \"send\")\n+    if (!purpose.has_value() || purpose.value() == interfaces::Wallet::AddressPurpose::UNKNOWN) { // if purpose not set, guess\n+        addressType = (isMine ? AddressTableEntry::Receiving : AddressTableEntry::Sending);\n+    } else if (purpose.value() == interfaces::Wallet::AddressPurpose::SEND) {\n         addressType = AddressTableEntry::Sending;\n-    else if (strPurpose == \"receive\")\n+    } else if (purpose == interfaces::Wallet::AddressPurpose::RECEIVE) {",
      "path": "src/qt/addresstablemodel.cpp",
      "position": null,
      "original_position": 15,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "44a2ae100b600bc9c9f4c956223fab3b1948ea8d",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (44a2ae100b600bc9c9f4c956223fab3b1948ea8d)\r\n\r\nCode style comment: It is a little inconsistent to call .value() in one case but not the other. Personally, I think it would be clearest to write this as `if (purpose == SEND) ... else if (purpose == RECEIVE) else ... ` like the original code, instead of being overly verbose and paranoid about null values, which are already handled sanely by [`operator==`](https://en.cppreference.com/w/cpp/utility/optional/operator_cmp)",
      "created_at": "2023-03-10T19:28:16Z",
      "updated_at": "2023-03-10T20:04:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1132795600",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1132795600"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": 62,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 63,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1132814936",
      "pull_request_review_id": 1335473435,
      "id": 1132814936,
      "node_id": "PRRC_kwDOABII585DhWJY",
      "diff_hunk": "@@ -347,7 +347,9 @@ ReadKeyValue(CWallet* pwallet, DataStream& ssKey, CDataStream& ssValue,\n         } else if (strType == DBKeys::PURPOSE) {\n             std::string strAddress;\n             ssKey >> strAddress;\n-            ssValue >> pwallet->m_address_book[DecodeDestination(strAddress)].purpose;\n+            std::string purpose_str;\n+            ssValue >> purpose_str;\n+            pwallet->m_address_book[DecodeDestination(strAddress)].SetPurposeFromString(purpose_str);",
      "path": "src/wallet/walletdb.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "44a2ae100b600bc9c9f4c956223fab3b1948ea8d",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (44a2ae100b600bc9c9f4c956223fab3b1948ea8d)\r\n\r\nIt seems like it would be better to do something like log a warning or return an error message if an unrecognized purpose is set here, rather than crashing with an assert.",
      "created_at": "2023-03-10T19:49:35Z",
      "updated_at": "2023-03-10T20:03:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1132814936",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1132814936"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 352,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1132816332",
      "pull_request_review_id": 1335473435,
      "id": 1132816332,
      "node_id": "PRRC_kwDOABII585DhWfM",
      "diff_hunk": "@@ -206,10 +207,47 @@ class CAddressBookData\n private:\n     bool m_change{true};\n     std::string m_label;\n-public:\n     std::string purpose;",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 13,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "44a2ae100b600bc9c9f4c956223fab3b1948ea8d",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (44a2ae100b600bc9c9f4c956223fab3b1948ea8d)\r\n\r\nShould this older purpose field be dropped?",
      "created_at": "2023-03-10T19:51:36Z",
      "updated_at": "2023-03-10T20:03:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1132816332",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1132816332"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 210,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1132822542",
      "pull_request_review_id": 1335473435,
      "id": 1132822542,
      "node_id": "PRRC_kwDOABII585DhYAO",
      "diff_hunk": "@@ -206,10 +207,47 @@ class CAddressBookData\n private:\n     bool m_change{true};\n     std::string m_label;\n-public:\n     std::string purpose;\n+    //! The purpose of this address\n+    interfaces::Wallet::AddressPurpose m_purpose{interfaces::Wallet::AddressPurpose::UNKNOWN};",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 15,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "44a2ae100b600bc9c9f4c956223fab3b1948ea8d",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (44a2ae100b600bc9c9f4c956223fab3b1948ea8d)\r\n\r\nIt seems a little misleading to set default address book entry purpose to UNKNOWN, because the purpose of addresses with default entries are known: they are just change addresses used to hold avoid_reuse bookkeeping info.\r\n\r\nSo I think it would probably be better to change type of `m_purpose` field to `optional<AddressPurpose>` and leave it unset, when `m_change` is true, rather making the purpose seem unknown.\r\n\r\nAlternately, could be more ambitious and add an `AddressPurpose::CHANGE` enum value and drop `bool m_change` entirely.\r\n\r\n---\r\n\r\nEDIT: I forgot to mention the other case when purpose will be is UNKNOWN here. It will be UNKNOWN not just for change addresses with avoid_reuse info, but also for addresses from old wallet databases that do not contain \"purpose\" rows. In this latter case, UNKNOWN values would actually be descriptive and not misleading. However, I still think the two suggested alternatives above that drop UNKNOWN would be preferable, because UNKNOWN is misleading in some cases, even if it is not misleading in every case.",
      "created_at": "2023-03-10T19:59:48Z",
      "updated_at": "2023-03-10T20:23:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1132822542",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1132822542"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 212,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137712523",
      "pull_request_review_id": 1342339656,
      "id": 1137712523,
      "node_id": "PRRC_kwDOABII585D0B2L",
      "diff_hunk": "@@ -352,11 +353,11 @@ struct WalletAddress\n {\n     CTxDestination dest;\n     wallet::isminetype is_mine;\n+    wallet::AddressPurpose purpose;\n     std::string name;\n-    std::string purpose;\n \n-    WalletAddress(CTxDestination dest, wallet::isminetype is_mine, std::string name, std::string purpose)\n-        : dest(std::move(dest)), is_mine(is_mine), name(std::move(name)), purpose(std::move(purpose))\n+    WalletAddress(CTxDestination dest, wallet::isminetype is_mine, wallet::AddressPurpose purpose, std::string name)",
      "path": "src/interfaces/wallet.h",
      "position": 45,
      "original_position": 45,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (db521d3e89b23046f73410a875bb9660178e3842)\r\n\r\nNote for reviewers: in a few places in this PR, struct order or argument order is changed so the `AddressPurpose` field follows IsMine or IsChange fields. This is done because the fields hold overlapping information, and in most cases new code should rely on the other fields instead of `AddressPurpose`.",
      "created_at": "2023-03-15T20:06:38Z",
      "updated_at": "2023-03-15T21:07:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1137712523",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137712523"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 359,
      "original_line": 359,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137726714",
      "pull_request_review_id": 1342339656,
      "id": 1137726714,
      "node_id": "PRRC_kwDOABII585D0FT6",
      "diff_hunk": "@@ -189,29 +189,34 @@ class WalletImpl : public Wallet\n     bool getAddress(const CTxDestination& dest,\n         std::string* name,\n         isminetype* is_mine,\n-        std::string* purpose) override\n+        AddressPurpose* purpose) override\n     {\n         LOCK(m_wallet->cs_wallet);\n         const auto& entry = m_wallet->FindAddressBookEntry(dest, /*allow_change=*/false);\n         if (!entry) return false; // addr not found\n         if (name) {\n             *name = entry->GetLabel();\n         }\n+        std::optional<isminetype> dest_is_mine;\n+        if (is_mine || purpose) {\n+            dest_is_mine = m_wallet->IsMine(dest);\n+        }\n         if (is_mine) {\n-            *is_mine = m_wallet->IsMine(dest);\n+            *is_mine = *dest_is_mine;\n         }\n         if (purpose) {\n-            *purpose = entry->purpose;\n+            *purpose = entry->purpose ? *entry->purpose : *dest_is_mine ? AddressPurpose::RECEIVE : AddressPurpose::SEND;",
      "path": "src/wallet/interfaces.cpp",
      "position": null,
      "original_position": 32,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (db521d3e89b23046f73410a875bb9660178e3842)\r\n\r\nWould maybe add a comment like \"// In very old wallets, address purpose may not recorded, so derive it from IsMine value\"",
      "created_at": "2023-03-15T20:16:08Z",
      "updated_at": "2023-03-15T21:07:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1137726714",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137726714"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 209,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137728596",
      "pull_request_review_id": 1342339656,
      "id": 1137728596,
      "node_id": "PRRC_kwDOABII585D0FxU",
      "diff_hunk": "@@ -189,29 +189,34 @@ class WalletImpl : public Wallet\n     bool getAddress(const CTxDestination& dest,\n         std::string* name,\n         isminetype* is_mine,\n-        std::string* purpose) override\n+        AddressPurpose* purpose) override\n     {\n         LOCK(m_wallet->cs_wallet);\n         const auto& entry = m_wallet->FindAddressBookEntry(dest, /*allow_change=*/false);\n         if (!entry) return false; // addr not found\n         if (name) {\n             *name = entry->GetLabel();\n         }\n+        std::optional<isminetype> dest_is_mine;\n+        if (is_mine || purpose) {\n+            dest_is_mine = m_wallet->IsMine(dest);\n+        }\n         if (is_mine) {\n-            *is_mine = m_wallet->IsMine(dest);\n+            *is_mine = *dest_is_mine;\n         }\n         if (purpose) {\n-            *purpose = entry->purpose;\n+            *purpose = entry->purpose ? *entry->purpose : *dest_is_mine ? AddressPurpose::RECEIVE : AddressPurpose::SEND;\n         }\n         return true;\n     }\n     std::vector<WalletAddress> getAddresses() const override\n     {\n         LOCK(m_wallet->cs_wallet);\n         std::vector<WalletAddress> result;\n-        m_wallet->ForEachAddrBookEntry([&](const CTxDestination& dest, const std::string& label, const std::string& purpose, bool is_change) EXCLUSIVE_LOCKS_REQUIRED(m_wallet->cs_wallet) {\n+        m_wallet->ForEachAddrBookEntry([&](const CTxDestination& dest, const std::string& label, bool is_change, const std::optional<AddressPurpose>& purpose) EXCLUSIVE_LOCKS_REQUIRED(m_wallet->cs_wallet) {\n             if (is_change) return;\n-            result.emplace_back(dest, m_wallet->IsMine(dest), label, purpose);\n+            isminetype is_mine = m_wallet->IsMine(dest);\n+            result.emplace_back(dest, is_mine, purpose ? *purpose : is_mine ? AddressPurpose::RECEIVE : AddressPurpose::SEND, label);",
      "path": "src/wallet/interfaces.cpp",
      "position": null,
      "original_position": 45,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (db521d3e89b23046f73410a875bb9660178e3842)\r\n\r\nCould add the same comment here (\"In very old wallets, address purpose may not recorded, so derive it from IsMine value\")",
      "created_at": "2023-03-15T20:18:11Z",
      "updated_at": "2023-03-15T21:07:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1137728596",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137728596"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 221,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137732694",
      "pull_request_review_id": 1342339656,
      "id": 1137732694,
      "node_id": "PRRC_kwDOABII585D0GxW",
      "diff_hunk": "@@ -677,7 +677,7 @@ RPCHelpMan getaddressesbylabel()\n             // std::set in O(log(N))), UniValue::__pushKV is used instead,\n             // which currently is O(1).\n             UniValue value(UniValue::VOBJ);\n-            value.pushKV(\"purpose\", _purpose);\n+            value.pushKV(\"purpose\", _purpose ? PurposeToString(*_purpose) : \"unknown\");",
      "path": "src/wallet/rpc/addresses.cpp",
      "position": 35,
      "original_position": 35,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (db521d3e89b23046f73410a875bb9660178e3842)\r\n\r\nNote for reviewers: this is preserving previous behavior. Default value for `CAddressBook::purpose` field previously was `\"unknown\"` when a purpose was not recorded, and now it is null which is translated to `\"unknown\"`",
      "created_at": "2023-03-15T20:22:14Z",
      "updated_at": "2023-03-15T21:07:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1137732694",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137732694"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 680,
      "original_line": 680,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137736576",
      "pull_request_review_id": 1342339656,
      "id": 1137736576,
      "node_id": "PRRC_kwDOABII585D0HuA",
      "diff_hunk": "@@ -721,9 +721,15 @@ RPCHelpMan listlabels()\n \n     LOCK(pwallet->cs_wallet);\n \n-    std::string purpose;\n+    std::optional<AddressPurpose> purpose;\n     if (!request.params[0].isNull()) {\n-        purpose = request.params[0].get_str();\n+        std::string purpose_str = request.params[0].get_str();\n+        if (!purpose_str.empty()) {\n+            if (!IsValidPurposeString(purpose_str)) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid 'purpose' argument, must be one of 'send', or 'receive'.\");\n+            }\n+            purpose = PurposeFromString(purpose_str);",
      "path": "src/wallet/rpc/addresses.cpp",
      "position": 49,
      "original_position": 52,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (db521d3e89b23046f73410a875bb9660178e3842)\r\n\r\nIf not updating the code above, would be good to add `assert(purpose)` or a similar check here, because that condition would indicate a bug.",
      "created_at": "2023-03-15T20:25:44Z",
      "updated_at": "2023-03-15T21:07:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1137736576",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137736576"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 728,
      "original_line": 728,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137745598",
      "pull_request_review_id": 1342339656,
      "id": 1137745598,
      "node_id": "PRRC_kwDOABII585D0J6-",
      "diff_hunk": "@@ -721,9 +721,15 @@ RPCHelpMan listlabels()\n \n     LOCK(pwallet->cs_wallet);\n \n-    std::string purpose;\n+    std::optional<AddressPurpose> purpose;\n     if (!request.params[0].isNull()) {\n-        purpose = request.params[0].get_str();\n+        std::string purpose_str = request.params[0].get_str();\n+        if (!purpose_str.empty()) {\n+            if (!IsValidPurposeString(purpose_str)) {",
      "path": "src/wallet/rpc/addresses.cpp",
      "position": null,
      "original_position": 49,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (db521d3e89b23046f73410a875bb9660178e3842)\r\n\r\nI think it might be a little better to drop the IsValidPurposeString function and just write:\r\n\r\n```\r\npurpose = PurposeFromString(purpose_str);\r\nif (!purpose) {\r\n    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid purpose argument, must a known purpose string, typically 'send' or 'receive'.\");\r\n}\r\n```\r\n\r\nsince underlying code should work for any past purpose string like \"refund\", or future ones.",
      "created_at": "2023-03-15T20:35:39Z",
      "updated_at": "2023-03-15T21:07:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1137745598",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137745598"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 728,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137754658",
      "pull_request_review_id": 1342339656,
      "id": 1137754658,
      "node_id": "PRRC_kwDOABII585D0MIi",
      "diff_hunk": "@@ -57,7 +57,7 @@ using isminefilter = std::underlying_type<isminetype>::type;\n  * interfaces and saved for new addresses. It is basically redundant with an\n  * address's IsMine() result.\n  */\n-enum class AddressPurpose : uint8_t {",
      "path": "src/wallet/types.h",
      "position": null,
      "original_position": 4,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (db521d3e89b23046f73410a875bb9660178e3842)\r\n\r\nThis change should be moved to previous commit \"wallet: add AddressPurpose enum to replace string values\" (2932d7be3cdf3de79b2767735a91180192d4efce), instead of being here. Alternately, could also keep the fixed width type, though IMO it is not helpful.",
      "created_at": "2023-03-15T20:46:03Z",
      "updated_at": "2023-03-15T21:07:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1137754658",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137754658"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 60,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137756043",
      "pull_request_review_id": 1342339656,
      "id": 1137756043,
      "node_id": "PRRC_kwDOABII585D0MeL",
      "diff_hunk": "@@ -2399,35 +2399,39 @@ DBErrors CWallet::ZapSelectTx(std::vector<uint256>& vHashIn, std::vector<uint256\n     return DBErrors::LOAD_OK;\n }\n \n-bool CWallet::SetAddressBookWithDB(WalletBatch& batch, const CTxDestination& address, const std::string& strName, const std::string& strPurpose)\n+bool CWallet::SetAddressBookWithDB(WalletBatch& batch, const CTxDestination& address, const std::string& strName, const std::optional<AddressPurpose>& new_purpose)\n {\n     bool fUpdated = false;\n     bool is_mine;\n+    std::optional<AddressPurpose> purpose;\n     {\n         LOCK(cs_wallet);\n         std::map<CTxDestination, CAddressBookData>::iterator mi = m_address_book.find(address);\n         fUpdated = (mi != m_address_book.end() && !mi->second.IsChange());\n         m_address_book[address].SetLabel(strName);\n-        if (!strPurpose.empty()) /* update purpose only if requested */\n-            m_address_book[address].purpose = strPurpose;\n         is_mine = IsMine(address) != ISMINE_NO;\n+        if (new_purpose) { /* update purpose only if requested */\n+            purpose = m_address_book[address].purpose = new_purpose;\n+        } else {\n+            purpose = m_address_book[address].purpose;\n+        }\n     }\n     NotifyAddressBookChanged(address, strName, is_mine,\n-                             strPurpose, (fUpdated ? CT_UPDATED : CT_NEW));\n-    if (!strPurpose.empty() && !batch.WritePurpose(EncodeDestination(address), strPurpose))\n+                             purpose ? *purpose : is_mine ? AddressPurpose::RECEIVE : AddressPurpose::SEND,\n+                             (fUpdated ? CT_UPDATED : CT_NEW));",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 46,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (db521d3e89b23046f73410a875bb9660178e3842)\r\n\r\nCould add the same comment suggested previously here above NotifyAddressBookChanged (\"In very old wallets, address purpose may not recorded, so derive it from IsMine value\")",
      "created_at": "2023-03-15T20:47:31Z",
      "updated_at": "2023-03-15T21:07:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1137756043",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137756043"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": 2419,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 2423,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137760371",
      "pull_request_review_id": 1342339656,
      "id": 1137760371,
      "node_id": "PRRC_kwDOABII585D0Nhz",
      "diff_hunk": "@@ -200,28 +201,75 @@ class ReserveDestination\n     void KeepDestination();\n };\n \n-/** Address book data */\n-class CAddressBookData\n+/**\n+ * Address book data.\n+ */\n+struct CAddressBookData\n {\n-private:\n-    bool m_change{true};\n-    std::string m_label;\n-public:\n-    std::string purpose;\n+    /**\n+     * Address label for sending and receiving addresses, most commonly set to\n+     * \"\", which is the default label. Change addresses do not have labels, and\n+     * wallet code uses lack of a label to identify change address for fee\n+     * bumping and listing transactions.\n+     */\n+    std::optional<std::string> label;\n \n-    CAddressBookData() : purpose(\"unknown\") {}\n+    /**\n+     * Address purpose which was originally recorded for payment protocol\n+     * support but now serves as a cached IsMine value. Wallet code should\n+     * not rely on this field being set.\n+     */\n+    std::optional<AddressPurpose> purpose;\n \n+    /**\n+     * Additional address metadata map that can currently hold two types of keys:\n+     *\n+     *   \"used\" keys with values always set to \"p\" if present. This is set on\n+     *       IsMine addresses that have already been spend from if the",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 44,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (db521d3e89b23046f73410a875bb9660178e3842)\r\n\r\ns/spend/spent/",
      "created_at": "2023-03-15T20:51:49Z",
      "updated_at": "2023-03-15T21:07:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1137760371",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137760371"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 228,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137773684",
      "pull_request_review_id": 1342339656,
      "id": 1137773684,
      "node_id": "PRRC_kwDOABII585D0Qx0",
      "diff_hunk": "@@ -71,6 +71,10 @@ def run_test(self):\n         node = self.nodes[0]\n         assert_equal(len(node.listunspent()), 0)\n \n+        self.log.info(\"Checking listlabels' invalid parameters\")\n+        assert_raises_rpc_error(-8, \"Invalid 'purpose' argument, must be one of 'send', or 'receive'.\", node.listlabels, \"notavalidpurpose\")\n+        assert_raises_rpc_error(-8, \"Invalid 'purpose' argument, must be one of 'send', or 'receive'.\", node.listlabels, \"unknown\")",
      "path": "test/functional/wallet_labels.py",
      "position": null,
      "original_position": 6,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (db521d3e89b23046f73410a875bb9660178e3842)\r\n\r\nI think the PR might benefit from a release note, or at least a summary of behavior changes in the PR description like, 'Wallet loading code will now issue warnings if addresses have unrecognized purpose strings other than \"send\" \"receive\" and \"refund\" and `listlabels` RPC will raise an error if an unrecognized purpose is requested.'",
      "created_at": "2023-03-15T21:06:49Z",
      "updated_at": "2023-03-15T21:07:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1137773684",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137773684"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": 74,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 76,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140711112",
      "pull_request_review_id": 1346742213,
      "id": 1140711112,
      "node_id": "PRRC_kwDOABII585D_d7I",
      "diff_hunk": "@@ -189,29 +189,34 @@ class WalletImpl : public Wallet\n     bool getAddress(const CTxDestination& dest,\n         std::string* name,\n         isminetype* is_mine,\n-        std::string* purpose) override\n+        AddressPurpose* purpose) override\n     {\n         LOCK(m_wallet->cs_wallet);\n         const auto& entry = m_wallet->FindAddressBookEntry(dest, /*allow_change=*/false);\n         if (!entry) return false; // addr not found\n         if (name) {\n             *name = entry->GetLabel();\n         }\n+        std::optional<isminetype> dest_is_mine;\n+        if (is_mine || purpose) {\n+            dest_is_mine = m_wallet->IsMine(dest);\n+        }\n         if (is_mine) {\n-            *is_mine = m_wallet->IsMine(dest);\n+            *is_mine = *dest_is_mine;\n         }\n         if (purpose) {\n-            *purpose = entry->purpose;\n+            *purpose = entry->purpose ? *entry->purpose : *dest_is_mine ? AddressPurpose::RECEIVE : AddressPurpose::SEND;",
      "path": "src/wallet/interfaces.cpp",
      "position": null,
      "original_position": 32,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "in_reply_to_id": 1137726714,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2023-03-17T21:10:34Z",
      "updated_at": "2023-03-17T21:10:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1140711112",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140711112"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 209,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140711178",
      "pull_request_review_id": 1346742273,
      "id": 1140711178,
      "node_id": "PRRC_kwDOABII585D_d8K",
      "diff_hunk": "@@ -189,29 +189,34 @@ class WalletImpl : public Wallet\n     bool getAddress(const CTxDestination& dest,\n         std::string* name,\n         isminetype* is_mine,\n-        std::string* purpose) override\n+        AddressPurpose* purpose) override\n     {\n         LOCK(m_wallet->cs_wallet);\n         const auto& entry = m_wallet->FindAddressBookEntry(dest, /*allow_change=*/false);\n         if (!entry) return false; // addr not found\n         if (name) {\n             *name = entry->GetLabel();\n         }\n+        std::optional<isminetype> dest_is_mine;\n+        if (is_mine || purpose) {\n+            dest_is_mine = m_wallet->IsMine(dest);\n+        }\n         if (is_mine) {\n-            *is_mine = m_wallet->IsMine(dest);\n+            *is_mine = *dest_is_mine;\n         }\n         if (purpose) {\n-            *purpose = entry->purpose;\n+            *purpose = entry->purpose ? *entry->purpose : *dest_is_mine ? AddressPurpose::RECEIVE : AddressPurpose::SEND;\n         }\n         return true;\n     }\n     std::vector<WalletAddress> getAddresses() const override\n     {\n         LOCK(m_wallet->cs_wallet);\n         std::vector<WalletAddress> result;\n-        m_wallet->ForEachAddrBookEntry([&](const CTxDestination& dest, const std::string& label, const std::string& purpose, bool is_change) EXCLUSIVE_LOCKS_REQUIRED(m_wallet->cs_wallet) {\n+        m_wallet->ForEachAddrBookEntry([&](const CTxDestination& dest, const std::string& label, bool is_change, const std::optional<AddressPurpose>& purpose) EXCLUSIVE_LOCKS_REQUIRED(m_wallet->cs_wallet) {\n             if (is_change) return;\n-            result.emplace_back(dest, m_wallet->IsMine(dest), label, purpose);\n+            isminetype is_mine = m_wallet->IsMine(dest);\n+            result.emplace_back(dest, is_mine, purpose ? *purpose : is_mine ? AddressPurpose::RECEIVE : AddressPurpose::SEND, label);",
      "path": "src/wallet/interfaces.cpp",
      "position": null,
      "original_position": 45,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "in_reply_to_id": 1137728596,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2023-03-17T21:10:39Z",
      "updated_at": "2023-03-17T21:10:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1140711178",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140711178"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 221,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140711535",
      "pull_request_review_id": 1346742671,
      "id": 1140711535,
      "node_id": "PRRC_kwDOABII585D_eBv",
      "diff_hunk": "@@ -721,9 +721,15 @@ RPCHelpMan listlabels()\n \n     LOCK(pwallet->cs_wallet);\n \n-    std::string purpose;\n+    std::optional<AddressPurpose> purpose;\n     if (!request.params[0].isNull()) {\n-        purpose = request.params[0].get_str();\n+        std::string purpose_str = request.params[0].get_str();\n+        if (!purpose_str.empty()) {\n+            if (!IsValidPurposeString(purpose_str)) {",
      "path": "src/wallet/rpc/addresses.cpp",
      "position": null,
      "original_position": 49,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "in_reply_to_id": 1137745598,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2023-03-17T21:11:05Z",
      "updated_at": "2023-03-17T21:11:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1140711535",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140711535"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 728,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140711618",
      "pull_request_review_id": 1346742759,
      "id": 1140711618,
      "node_id": "PRRC_kwDOABII585D_eDC",
      "diff_hunk": "@@ -57,7 +57,7 @@ using isminefilter = std::underlying_type<isminetype>::type;\n  * interfaces and saved for new addresses. It is basically redundant with an\n  * address's IsMine() result.\n  */\n-enum class AddressPurpose : uint8_t {",
      "path": "src/wallet/types.h",
      "position": null,
      "original_position": 4,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "in_reply_to_id": 1137754658,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2023-03-17T21:11:11Z",
      "updated_at": "2023-03-17T21:11:12Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1140711618",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140711618"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 60,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140711716",
      "pull_request_review_id": 1346742838,
      "id": 1140711716,
      "node_id": "PRRC_kwDOABII585D_eEk",
      "diff_hunk": "@@ -2399,35 +2399,39 @@ DBErrors CWallet::ZapSelectTx(std::vector<uint256>& vHashIn, std::vector<uint256\n     return DBErrors::LOAD_OK;\n }\n \n-bool CWallet::SetAddressBookWithDB(WalletBatch& batch, const CTxDestination& address, const std::string& strName, const std::string& strPurpose)\n+bool CWallet::SetAddressBookWithDB(WalletBatch& batch, const CTxDestination& address, const std::string& strName, const std::optional<AddressPurpose>& new_purpose)\n {\n     bool fUpdated = false;\n     bool is_mine;\n+    std::optional<AddressPurpose> purpose;\n     {\n         LOCK(cs_wallet);\n         std::map<CTxDestination, CAddressBookData>::iterator mi = m_address_book.find(address);\n         fUpdated = (mi != m_address_book.end() && !mi->second.IsChange());\n         m_address_book[address].SetLabel(strName);\n-        if (!strPurpose.empty()) /* update purpose only if requested */\n-            m_address_book[address].purpose = strPurpose;\n         is_mine = IsMine(address) != ISMINE_NO;\n+        if (new_purpose) { /* update purpose only if requested */\n+            purpose = m_address_book[address].purpose = new_purpose;\n+        } else {\n+            purpose = m_address_book[address].purpose;\n+        }\n     }\n     NotifyAddressBookChanged(address, strName, is_mine,\n-                             strPurpose, (fUpdated ? CT_UPDATED : CT_NEW));\n-    if (!strPurpose.empty() && !batch.WritePurpose(EncodeDestination(address), strPurpose))\n+                             purpose ? *purpose : is_mine ? AddressPurpose::RECEIVE : AddressPurpose::SEND,\n+                             (fUpdated ? CT_UPDATED : CT_NEW));",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 46,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "in_reply_to_id": 1137756043,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2023-03-17T21:11:18Z",
      "updated_at": "2023-03-17T21:11:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1140711716",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140711716"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": 2419,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 2423,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140711786",
      "pull_request_review_id": 1346742910,
      "id": 1140711786,
      "node_id": "PRRC_kwDOABII585D_eFq",
      "diff_hunk": "@@ -200,28 +201,75 @@ class ReserveDestination\n     void KeepDestination();\n };\n \n-/** Address book data */\n-class CAddressBookData\n+/**\n+ * Address book data.\n+ */\n+struct CAddressBookData\n {\n-private:\n-    bool m_change{true};\n-    std::string m_label;\n-public:\n-    std::string purpose;\n+    /**\n+     * Address label for sending and receiving addresses, most commonly set to\n+     * \"\", which is the default label. Change addresses do not have labels, and\n+     * wallet code uses lack of a label to identify change address for fee\n+     * bumping and listing transactions.\n+     */\n+    std::optional<std::string> label;\n \n-    CAddressBookData() : purpose(\"unknown\") {}\n+    /**\n+     * Address purpose which was originally recorded for payment protocol\n+     * support but now serves as a cached IsMine value. Wallet code should\n+     * not rely on this field being set.\n+     */\n+    std::optional<AddressPurpose> purpose;\n \n+    /**\n+     * Additional address metadata map that can currently hold two types of keys:\n+     *\n+     *   \"used\" keys with values always set to \"p\" if present. This is set on\n+     *       IsMine addresses that have already been spend from if the",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 44,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "in_reply_to_id": 1137760371,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2023-03-17T21:11:22Z",
      "updated_at": "2023-03-17T21:11:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1140711786",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140711786"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 228,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140711857",
      "pull_request_review_id": 1346742995,
      "id": 1140711857,
      "node_id": "PRRC_kwDOABII585D_eGx",
      "diff_hunk": "@@ -71,6 +71,10 @@ def run_test(self):\n         node = self.nodes[0]\n         assert_equal(len(node.listunspent()), 0)\n \n+        self.log.info(\"Checking listlabels' invalid parameters\")\n+        assert_raises_rpc_error(-8, \"Invalid 'purpose' argument, must be one of 'send', or 'receive'.\", node.listlabels, \"notavalidpurpose\")\n+        assert_raises_rpc_error(-8, \"Invalid 'purpose' argument, must be one of 'send', or 'receive'.\", node.listlabels, \"unknown\")",
      "path": "test/functional/wallet_labels.py",
      "position": null,
      "original_position": 6,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "in_reply_to_id": 1137773684,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2023-03-17T21:11:27Z",
      "updated_at": "2023-03-17T21:11:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1140711857",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140711857"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": 74,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 76,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142308217",
      "pull_request_review_id": 1348830142,
      "id": 1142308217,
      "node_id": "PRRC_kwDOABII585EFj15",
      "diff_hunk": "@@ -108,8 +110,30 @@ static inline int TxStateSerializedIndex(const TxState& state)\n }\n \n \n+/**\n+ * Cachable amount subdivided into watchonly and spendable parts.\n+ */\n+struct CachableAmount\n+{\n+    // NO and ALL are never (supposed to be) cached\n+    std::bitset<ISMINE_ENUM_ELEMENTS> m_cached;\n+    CAmount m_value[ISMINE_ENUM_ELEMENTS];\n+    inline void Reset()\n+    {\n+        m_cached.reset();\n+    }\n+    void Set(isminefilter filter, CAmount value)\n+    {\n+        m_cached.set(filter);\n+        m_value[filter] = value;\n+    }\n+};\n+\n+\n typedef std::map<std::string, std::string> mapValue_t;\n \n+\n+",
      "path": "src/wallet/transaction.h",
      "position": null,
      "original_position": 41,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "f00f5dad29d81b9700dd84ec08a6e72f915988a0",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Add wallet/types.h for simple public enum and struct types\" (f00f5dad29d81b9700dd84ec08a6e72f915988a0)\r\n\r\nLooks like there might be an extra 3 lines of space instead of 2 (but fine to keep if that's intentional)\r\n\r\n",
      "created_at": "2023-03-20T15:32:11Z",
      "updated_at": "2023-03-20T15:47:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1142308217",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142308217"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 136,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142325608",
      "pull_request_review_id": 1348830142,
      "id": 1142325608,
      "node_id": "PRRC_kwDOABII585EFoFo",
      "diff_hunk": "@@ -200,28 +201,70 @@ class ReserveDestination\n     void KeepDestination();\n };\n \n-/** Address book data */\n-class CAddressBookData\n+/**\n+ * Address book data.\n+ */\n+struct CAddressBookData\n {\n-private:\n-    bool m_change{true};\n-    std::string m_label;\n-public:\n-    std::string purpose;\n+    /**\n+     * Address label for sending and receiving addresses, most commonly set to\n+     * \"\", which is the default label. Change addresses do not have labels, and\n+     * wallet code uses lack of a label to identify change address for fee",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 27,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "ea3cc035ddf8f15fd18407231c3ff9edde8891c1",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (ea3cc035ddf8f15fd18407231c3ff9edde8891c1)\r\n\r\ns/address/addresses/",
      "created_at": "2023-03-20T15:41:02Z",
      "updated_at": "2023-03-20T15:47:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1142325608",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142325608"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 212,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142331004",
      "pull_request_review_id": 1348830142,
      "id": 1142331004,
      "node_id": "PRRC_kwDOABII585EFpZ8",
      "diff_hunk": "@@ -0,0 +1,6 @@\n+Wallet\n+------\n+\n+* Purposes strings are restricted to the currently known values of \"send\", \"receive\", and \"refund\".",
      "path": "doc/release-notes-27217.md",
      "position": null,
      "original_position": 4,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "0d18142f595b43070bd07b608d43c9ed9b37cdcc",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"doc: Release note for purpose string restriction\" (0d18142f595b43070bd07b608d43c9ed9b37cdcc)\r\n\r\nMaybe s/restricted/now restricted/ to be clear this is new behavior not background information.",
      "created_at": "2023-03-20T15:44:52Z",
      "updated_at": "2023-03-20T15:47:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1142331004",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142331004"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 4,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142432253",
      "pull_request_review_id": 1349028134,
      "id": 1142432253,
      "node_id": "PRRC_kwDOABII585EGCH9",
      "diff_hunk": "@@ -108,8 +110,30 @@ static inline int TxStateSerializedIndex(const TxState& state)\n }\n \n \n+/**\n+ * Cachable amount subdivided into watchonly and spendable parts.\n+ */\n+struct CachableAmount\n+{\n+    // NO and ALL are never (supposed to be) cached\n+    std::bitset<ISMINE_ENUM_ELEMENTS> m_cached;\n+    CAmount m_value[ISMINE_ENUM_ELEMENTS];\n+    inline void Reset()\n+    {\n+        m_cached.reset();\n+    }\n+    void Set(isminefilter filter, CAmount value)\n+    {\n+        m_cached.set(filter);\n+        m_value[filter] = value;\n+    }\n+};\n+\n+\n typedef std::map<std::string, std::string> mapValue_t;\n \n+\n+",
      "path": "src/wallet/transaction.h",
      "position": null,
      "original_position": 41,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "f00f5dad29d81b9700dd84ec08a6e72f915988a0",
      "in_reply_to_id": 1142308217,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed",
      "created_at": "2023-03-20T16:57:05Z",
      "updated_at": "2023-03-20T16:57:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1142432253",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142432253"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 136,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142432364",
      "pull_request_review_id": 1349028277,
      "id": 1142432364,
      "node_id": "PRRC_kwDOABII585EGCJs",
      "diff_hunk": "@@ -200,28 +201,70 @@ class ReserveDestination\n     void KeepDestination();\n };\n \n-/** Address book data */\n-class CAddressBookData\n+/**\n+ * Address book data.\n+ */\n+struct CAddressBookData\n {\n-private:\n-    bool m_change{true};\n-    std::string m_label;\n-public:\n-    std::string purpose;\n+    /**\n+     * Address label for sending and receiving addresses, most commonly set to\n+     * \"\", which is the default label. Change addresses do not have labels, and\n+     * wallet code uses lack of a label to identify change address for fee",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 27,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "ea3cc035ddf8f15fd18407231c3ff9edde8891c1",
      "in_reply_to_id": 1142325608,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2023-03-20T16:57:10Z",
      "updated_at": "2023-03-20T16:57:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1142432364",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142432364"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 212,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142432481",
      "pull_request_review_id": 1349028434,
      "id": 1142432481,
      "node_id": "PRRC_kwDOABII585EGCLh",
      "diff_hunk": "@@ -0,0 +1,6 @@\n+Wallet\n+------\n+\n+* Purposes strings are restricted to the currently known values of \"send\", \"receive\", and \"refund\".",
      "path": "doc/release-notes-27217.md",
      "position": null,
      "original_position": 4,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "0d18142f595b43070bd07b608d43c9ed9b37cdcc",
      "in_reply_to_id": 1142331004,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2023-03-20T16:57:15Z",
      "updated_at": "2023-03-20T16:57:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1142432481",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142432481"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 4,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1148451397",
      "pull_request_review_id": 1357917977,
      "id": 1148451397,
      "node_id": "PRRC_kwDOABII585Ec_pF",
      "diff_hunk": "@@ -2399,35 +2399,40 @@ DBErrors CWallet::ZapSelectTx(std::vector<uint256>& vHashIn, std::vector<uint256\n     return DBErrors::LOAD_OK;\n }\n \n-bool CWallet::SetAddressBookWithDB(WalletBatch& batch, const CTxDestination& address, const std::string& strName, const std::string& strPurpose)\n+bool CWallet::SetAddressBookWithDB(WalletBatch& batch, const CTxDestination& address, const std::string& strName, const std::optional<AddressPurpose>& new_purpose)\n {\n     bool fUpdated = false;\n     bool is_mine;\n+    std::optional<AddressPurpose> purpose;\n     {\n         LOCK(cs_wallet);\n         std::map<CTxDestination, CAddressBookData>::iterator mi = m_address_book.find(address);\n         fUpdated = (mi != m_address_book.end() && !mi->second.IsChange());\n         m_address_book[address].SetLabel(strName);\n-        if (!strPurpose.empty()) /* update purpose only if requested */\n-            m_address_book[address].purpose = strPurpose;\n         is_mine = IsMine(address) != ISMINE_NO;\n+        if (new_purpose) { /* update purpose only if requested */\n+            purpose = m_address_book[address].purpose = new_purpose;\n+        } else {\n+            purpose = m_address_book[address].purpose;\n+        }\n     }\n+    // In very old wallets, address purpose may not be recorded so we derive it from IsMine\n     NotifyAddressBookChanged(address, strName, is_mine,\n-                             strPurpose, (fUpdated ? CT_UPDATED : CT_NEW));\n-    if (!strPurpose.empty() && !batch.WritePurpose(EncodeDestination(address), strPurpose))\n+                             purpose ? *purpose : is_mine ? AddressPurpose::RECEIVE : AddressPurpose::SEND,",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 46,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "a48010f1fd6d8a430b8234789ac3c91ec9d06972",
      "in_reply_to_id": null,
      "user": {
        "login": "aureleoules",
        "id": 22493292,
        "node_id": "MDQ6VXNlcjIyNDkzMjky",
        "avatar_url": "https://avatars.githubusercontent.com/u/22493292?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/aureleoules",
        "html_url": "https://github.com/aureleoules",
        "followers_url": "https://api.github.com/users/aureleoules/followers",
        "following_url": "https://api.github.com/users/aureleoules/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/aureleoules/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/aureleoules/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/aureleoules/subscriptions",
        "organizations_url": "https://api.github.com/users/aureleoules/orgs",
        "repos_url": "https://api.github.com/users/aureleoules/repos",
        "events_url": "https://api.github.com/users/aureleoules/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/aureleoules/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Could use `purpose.value_or(is_mine ? AddressPurpose::RECEIVE : AddressPurpose::SEND)` instead.\r\nSame for other instances.",
      "created_at": "2023-03-25T23:59:31Z",
      "updated_at": "2023-03-26T00:11:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1148451397",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1148451397"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2421,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1149457810",
      "pull_request_review_id": 1359373444,
      "id": 1149457810,
      "node_id": "PRRC_kwDOABII585Eg1WS",
      "diff_hunk": "@@ -52,16 +53,17 @@ struct AddressTableEntryLessThan\n };\n \n /* Determine address type from address purpose */\n-static AddressTableEntry::Type translateTransactionType(const QString &strPurpose, bool isMine)\n+static AddressTableEntry::Type translateTransactionType(wallet::AddressPurpose purpose, bool isMine)\n {\n     AddressTableEntry::Type addressType = AddressTableEntry::Hidden;\n     // \"refund\" addresses aren't shown, and change addresses aren't returned by getAddresses at all.\n-    if (strPurpose == \"send\")\n+    if (purpose == wallet::AddressPurpose::SEND) {\n         addressType = AddressTableEntry::Sending;\n-    else if (strPurpose == \"receive\")\n+    } else if (purpose == wallet::AddressPurpose::RECEIVE) {\n         addressType = AddressTableEntry::Receiving;\n-    else if (strPurpose == \"unknown\" || strPurpose == \"\") // if purpose not set, guess\n+    } else {\n         addressType = (isMine ? AddressTableEntry::Receiving : AddressTableEntry::Sending);\n+    }",
      "path": "src/qt/addresstablemodel.cpp",
      "position": null,
      "original_position": 26,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "a48010f1fd6d8a430b8234789ac3c91ec9d06972",
      "in_reply_to_id": null,
      "user": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "IIRC, don't we get all sorts of compiler goodness if we use `switch` with an enum, like compiler warnings for unhandled cases? Would be nice, in the event we ever add a new case to the enum (although seems unlikely for this specific use-case).\r\n\r\nI always prefer using `switch` with enums, but feel free to ignore if you don't feel like retouching/don't share the same opinion.",
      "created_at": "2023-03-27T15:50:49Z",
      "updated_at": "2023-03-27T15:54:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1149457810",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1149457810"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": 60,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 64,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1149481491",
      "pull_request_review_id": 1359408658,
      "id": 1149481491,
      "node_id": "PRRC_kwDOABII585Eg7IT",
      "diff_hunk": "@@ -52,16 +53,17 @@ struct AddressTableEntryLessThan\n };\n \n /* Determine address type from address purpose */\n-static AddressTableEntry::Type translateTransactionType(const QString &strPurpose, bool isMine)\n+static AddressTableEntry::Type translateTransactionType(wallet::AddressPurpose purpose, bool isMine)\n {\n     AddressTableEntry::Type addressType = AddressTableEntry::Hidden;\n     // \"refund\" addresses aren't shown, and change addresses aren't returned by getAddresses at all.\n-    if (strPurpose == \"send\")\n+    if (purpose == wallet::AddressPurpose::SEND) {\n         addressType = AddressTableEntry::Sending;\n-    else if (strPurpose == \"receive\")\n+    } else if (purpose == wallet::AddressPurpose::RECEIVE) {\n         addressType = AddressTableEntry::Receiving;\n-    else if (strPurpose == \"unknown\" || strPurpose == \"\") // if purpose not set, guess\n+    } else {\n         addressType = (isMine ? AddressTableEntry::Receiving : AddressTableEntry::Sending);\n+    }",
      "path": "src/qt/addresstablemodel.cpp",
      "position": null,
      "original_position": 26,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "a48010f1fd6d8a430b8234789ac3c91ec9d06972",
      "in_reply_to_id": 1149457810,
      "user": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-Wswitch-enum , super nice and still warns for unhandled cases even when you have a default.",
      "created_at": "2023-03-27T16:09:20Z",
      "updated_at": "2023-03-27T16:09:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1149481491",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1149481491"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": 60,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 64,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1160736280",
      "pull_request_review_id": 1376251729,
      "id": 1160736280,
      "node_id": "PRRC_kwDOABII585FL24Y",
      "diff_hunk": "@@ -52,16 +53,17 @@ struct AddressTableEntryLessThan\n };\n \n /* Determine address type from address purpose */\n-static AddressTableEntry::Type translateTransactionType(const QString &strPurpose, bool isMine)\n+static AddressTableEntry::Type translateTransactionType(wallet::AddressPurpose purpose, bool isMine)\n {\n     AddressTableEntry::Type addressType = AddressTableEntry::Hidden;\n     // \"refund\" addresses aren't shown, and change addresses aren't returned by getAddresses at all.\n-    if (strPurpose == \"send\")\n+    if (purpose == wallet::AddressPurpose::SEND) {\n         addressType = AddressTableEntry::Sending;\n-    else if (strPurpose == \"receive\")\n+    } else if (purpose == wallet::AddressPurpose::RECEIVE) {\n         addressType = AddressTableEntry::Receiving;\n-    else if (strPurpose == \"unknown\" || strPurpose == \"\") // if purpose not set, guess\n+    } else {\n         addressType = (isMine ? AddressTableEntry::Receiving : AddressTableEntry::Sending);\n+    }",
      "path": "src/qt/addresstablemodel.cpp",
      "position": null,
      "original_position": 26,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "a48010f1fd6d8a430b8234789ac3c91ec9d06972",
      "in_reply_to_id": 1149457810,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (ccddce7582a51fd2857ce4d142076167631e9cfe)\r\n\r\nre: https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1149457810\r\n\r\nI think I agree with the suggestion to use a switch statement here. Also:\r\n\r\n- It looks like behavior of this code has been changed unintentionally to no longer return hidden in the \"refund\" case.\r\n- The \"if purpose not set, guess\" logic is no longer here needed because it is implemented at the lower layer\r\n\r\nSo this could be written as:\r\n\r\n```c++\r\n/* Determine address type from address purpose */\r\nstatic AddressTableEntry::Type translateTransactionType(wallet::AddressPurpose purpose)\r\n{\r\n    // \"refund\" addresses aren't shown, and change addresses aren't returned by getAddresses at all.\r\n    switch (purpose) {\r\n        case wallet::AddressPurpose::RECEIVE: return AddressTableEntry::Receiving;\r\n        case wallet::AddressPurpose::SEND:    return AddressTableEntry::Sending;\r\n        case wallet::AddressPurpose::REFUND:  return AddressTableEntry::Hidden;\r\n    }\r\n}\r\n```",
      "created_at": "2023-04-07T14:22:14Z",
      "updated_at": "2023-04-07T15:16:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1160736280",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1160736280"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": 60,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 64,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1160747569",
      "pull_request_review_id": 1376251729,
      "id": 1160747569,
      "node_id": "PRRC_kwDOABII585FL5ox",
      "diff_hunk": "@@ -200,28 +201,70 @@ class ReserveDestination\n     void KeepDestination();\n };\n \n-/** Address book data */\n-class CAddressBookData\n+/**\n+ * Address book data.\n+ */\n+struct CAddressBookData\n {\n-private:\n-    bool m_change{true};\n-    std::string m_label;\n-public:\n-    std::string purpose;\n+    /**\n+     * Address label for sending and receiving addresses, most commonly set to\n+     * \"\", which is the default label. Change addresses do not have labels, and",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 26,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "ccddce7582a51fd2857ce4d142076167631e9cfe",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (ccddce7582a51fd2857ce4d142076167631e9cfe)\r\n\r\nIt would be good to make it more explicit that value is null for change addresses. Could say:\r\n\r\n```c++\r\n/**\r\n * Address label which is always nullopt for change addresses. For sending\r\n * and receiving addresses, it will be set to an arbitrary label string\r\n * provided by the user, or to \"\", which is the default label. The presence\r\n * or absence of a label is used to distinguish change addresses from\r\n * non-change addresses by wallet transaction listing and fee bumping code.\r\n */\r\nstd::optional<std::string> label;\r\n```",
      "created_at": "2023-04-07T14:39:05Z",
      "updated_at": "2023-04-07T15:16:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1160747569",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1160747569"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 211,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1160759069",
      "pull_request_review_id": 1376251729,
      "id": 1160759069,
      "node_id": "PRRC_kwDOABII585FL8cd",
      "diff_hunk": "@@ -200,28 +201,70 @@ class ReserveDestination\n     void KeepDestination();\n };\n \n-/** Address book data */\n-class CAddressBookData\n+/**\n+ * Address book data.\n+ */\n+struct CAddressBookData\n {\n-private:\n-    bool m_change{true};\n-    std::string m_label;\n-public:\n-    std::string purpose;\n+    /**\n+     * Address label for sending and receiving addresses, most commonly set to\n+     * \"\", which is the default label. Change addresses do not have labels, and\n+     * wallet code uses lack of a label to identify change addresses for fee\n+     * bumping and listing transactions.\n+     */\n+    std::optional<std::string> label;\n \n-    CAddressBookData() : purpose(\"unknown\") {}\n+    /**\n+     * Address purpose which was originally recorded for payment protocol\n+     * support but now serves as a cached IsMine value. Wallet code should\n+     * not rely on this field being set.\n+     */\n+    std::optional<AddressPurpose> purpose;\n \n+    /**\n+     * Additional address metadata map that can currently hold two types of keys:\n+     *\n+     *   \"used\" keys with values always set to \"p\" if present. This is set on",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 43,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "ccddce7582a51fd2857ce4d142076167631e9cfe",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (ccddce7582a51fd2857ce4d142076167631e9cfe)\r\n\r\nTo be more accurate, comment should say `with values set to \"1\" or \"p\" if present`. Value was inadvertently changed from `\"p\"` to `\"1\"` in f5ba424cd44619d9b9be88b8593d69a7ba96db26 from #21353",
      "created_at": "2023-04-07T14:57:13Z",
      "updated_at": "2023-04-07T15:16:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1160759069",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1160759069"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 227,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161777870",
      "pull_request_review_id": 1377632092,
      "id": 1161777870,
      "node_id": "PRRC_kwDOABII585FP1LO",
      "diff_hunk": "@@ -2399,35 +2399,40 @@ DBErrors CWallet::ZapSelectTx(std::vector<uint256>& vHashIn, std::vector<uint256\n     return DBErrors::LOAD_OK;\n }\n \n-bool CWallet::SetAddressBookWithDB(WalletBatch& batch, const CTxDestination& address, const std::string& strName, const std::string& strPurpose)\n+bool CWallet::SetAddressBookWithDB(WalletBatch& batch, const CTxDestination& address, const std::string& strName, const std::optional<AddressPurpose>& new_purpose)\n {\n     bool fUpdated = false;\n     bool is_mine;\n+    std::optional<AddressPurpose> purpose;\n     {\n         LOCK(cs_wallet);\n         std::map<CTxDestination, CAddressBookData>::iterator mi = m_address_book.find(address);\n         fUpdated = (mi != m_address_book.end() && !mi->second.IsChange());\n         m_address_book[address].SetLabel(strName);\n-        if (!strPurpose.empty()) /* update purpose only if requested */\n-            m_address_book[address].purpose = strPurpose;\n         is_mine = IsMine(address) != ISMINE_NO;\n+        if (new_purpose) { /* update purpose only if requested */\n+            purpose = m_address_book[address].purpose = new_purpose;\n+        } else {\n+            purpose = m_address_book[address].purpose;\n+        }\n     }\n+    // In very old wallets, address purpose may not be recorded so we derive it from IsMine\n     NotifyAddressBookChanged(address, strName, is_mine,\n-                             strPurpose, (fUpdated ? CT_UPDATED : CT_NEW));\n-    if (!strPurpose.empty() && !batch.WritePurpose(EncodeDestination(address), strPurpose))\n+                             purpose ? *purpose : is_mine ? AddressPurpose::RECEIVE : AddressPurpose::SEND,",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 46,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "a48010f1fd6d8a430b8234789ac3c91ec9d06972",
      "in_reply_to_id": 1148451397,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Changed here and elsewhere",
      "created_at": "2023-04-10T14:40:39Z",
      "updated_at": "2023-04-10T14:40:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1161777870",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161777870"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2421,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161777986",
      "pull_request_review_id": 1377632385,
      "id": 1161777986,
      "node_id": "PRRC_kwDOABII585FP1NC",
      "diff_hunk": "@@ -52,16 +53,17 @@ struct AddressTableEntryLessThan\n };\n \n /* Determine address type from address purpose */\n-static AddressTableEntry::Type translateTransactionType(const QString &strPurpose, bool isMine)\n+static AddressTableEntry::Type translateTransactionType(wallet::AddressPurpose purpose, bool isMine)\n {\n     AddressTableEntry::Type addressType = AddressTableEntry::Hidden;\n     // \"refund\" addresses aren't shown, and change addresses aren't returned by getAddresses at all.\n-    if (strPurpose == \"send\")\n+    if (purpose == wallet::AddressPurpose::SEND) {\n         addressType = AddressTableEntry::Sending;\n-    else if (strPurpose == \"receive\")\n+    } else if (purpose == wallet::AddressPurpose::RECEIVE) {\n         addressType = AddressTableEntry::Receiving;\n-    else if (strPurpose == \"unknown\" || strPurpose == \"\") // if purpose not set, guess\n+    } else {\n         addressType = (isMine ? AddressTableEntry::Receiving : AddressTableEntry::Sending);\n+    }",
      "path": "src/qt/addresstablemodel.cpp",
      "position": null,
      "original_position": 26,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "a48010f1fd6d8a430b8234789ac3c91ec9d06972",
      "in_reply_to_id": 1149457810,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done as suggested",
      "created_at": "2023-04-10T14:40:47Z",
      "updated_at": "2023-04-10T14:40:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1161777986",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161777986"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": 60,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 64,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161778269",
      "pull_request_review_id": 1377633080,
      "id": 1161778269,
      "node_id": "PRRC_kwDOABII585FP1Rd",
      "diff_hunk": "@@ -200,28 +201,70 @@ class ReserveDestination\n     void KeepDestination();\n };\n \n-/** Address book data */\n-class CAddressBookData\n+/**\n+ * Address book data.\n+ */\n+struct CAddressBookData\n {\n-private:\n-    bool m_change{true};\n-    std::string m_label;\n-public:\n-    std::string purpose;\n+    /**\n+     * Address label for sending and receiving addresses, most commonly set to\n+     * \"\", which is the default label. Change addresses do not have labels, and",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 26,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "ccddce7582a51fd2857ce4d142076167631e9cfe",
      "in_reply_to_id": 1160747569,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done as suggested",
      "created_at": "2023-04-10T14:41:06Z",
      "updated_at": "2023-04-10T14:41:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1161778269",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161778269"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 211,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161778333",
      "pull_request_review_id": 1377633254,
      "id": 1161778333,
      "node_id": "PRRC_kwDOABII585FP1Sd",
      "diff_hunk": "@@ -200,28 +201,70 @@ class ReserveDestination\n     void KeepDestination();\n };\n \n-/** Address book data */\n-class CAddressBookData\n+/**\n+ * Address book data.\n+ */\n+struct CAddressBookData\n {\n-private:\n-    bool m_change{true};\n-    std::string m_label;\n-public:\n-    std::string purpose;\n+    /**\n+     * Address label for sending and receiving addresses, most commonly set to\n+     * \"\", which is the default label. Change addresses do not have labels, and\n+     * wallet code uses lack of a label to identify change addresses for fee\n+     * bumping and listing transactions.\n+     */\n+    std::optional<std::string> label;\n \n-    CAddressBookData() : purpose(\"unknown\") {}\n+    /**\n+     * Address purpose which was originally recorded for payment protocol\n+     * support but now serves as a cached IsMine value. Wallet code should\n+     * not rely on this field being set.\n+     */\n+    std::optional<AddressPurpose> purpose;\n \n+    /**\n+     * Additional address metadata map that can currently hold two types of keys:\n+     *\n+     *   \"used\" keys with values always set to \"p\" if present. This is set on",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 43,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "ccddce7582a51fd2857ce4d142076167631e9cfe",
      "in_reply_to_id": 1160759069,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done as suggested",
      "created_at": "2023-04-10T14:41:11Z",
      "updated_at": "2023-04-10T14:41:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1161778333",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161778333"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 227,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161939317",
      "pull_request_review_id": 1377895422,
      "id": 1161939317,
      "node_id": "PRRC_kwDOABII585FQcl1",
      "diff_hunk": "@@ -48,6 +48,20 @@ enum isminetype : unsigned int {\n };\n /** used for bitflags of isminetype */\n using isminefilter = std::underlying_type<isminetype>::type;\n+\n+/**\n+ * Address purpose field that has been been stored with wallet sending and\n+ * receiving addreses since BIP70 payment protocol support was added in",
      "path": "src/wallet/types.h",
      "position": null,
      "original_position": 7,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "af47fff6804defb1d7a8b538d6f2e7a39c6aa213",
      "in_reply_to_id": null,
      "user": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Nit, typo:\r\n```suggestion\r\n * receiving addresses since BIP70 payment protocol support was added in\r\n```",
      "created_at": "2023-04-10T17:53:20Z",
      "updated_at": "2023-04-10T18:28:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1161939317",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161939317"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 54,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161952231",
      "pull_request_review_id": 1377895422,
      "id": 1161952231,
      "node_id": "PRRC_kwDOABII585FQfvn",
      "diff_hunk": "@@ -200,28 +201,71 @@ class ReserveDestination\n     void KeepDestination();\n };\n \n-/** Address book data */\n-class CAddressBookData\n+/**\n+ * Address book data.\n+ */\n+struct CAddressBookData\n {\n-private:\n-    bool m_change{true};\n-    std::string m_label;\n-public:\n-    std::string purpose;\n+    /**\n+     * Address label which is always nullopt for change addresses. For sending\n+     * and receiving addresses, it will be set to an arbitrary label string\n+     * provided by the user, or to \"\", which is the default label. The presence\n+     * or absence of a label is used to distinguish change addresses from\n+     * non-change addresses by wallet transaction listing and fee bumping code.\n+     */\n+    std::optional<std::string> label;\n \n-    CAddressBookData() : purpose(\"unknown\") {}\n+    /**\n+     * Address purpose which was originally recorded for payment protocol\n+     * support but now serves as a cached IsMine value. Wallet code should\n+     * not rely on this field being set.\n+     */\n+    std::optional<AddressPurpose> purpose;\n \n+    /**\n+     * Additional address metadata map that can currently hold two types of keys:\n+     *\n+     *   \"used\" keys with values always set to \"1\" or \"p\" if present. This is set on\n+     *       IsMine addresses that have already been spent from if the\n+     *       avoid_reuse option is enabled\n+     *\n+     *   \"rr##\" keys where ## is a decimal number, with serialized\n+     *       RecentRequestEntry objects as values\n+     */\n     typedef std::map<std::string, std::string> StringMap;\n     StringMap destdata;\n \n-    bool IsChange() const { return m_change; }\n-    const std::string& GetLabel() const { return m_label; }\n-    void SetLabel(const std::string& label) {\n-        m_change = false;\n-        m_label = label;\n-    }\n+    /** Accessor methods. */\n+    bool IsChange() const { return !label; }",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 61,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "a52f20224f8054f3e6f628fe228284e6f3b7ce7e",
      "in_reply_to_id": null,
      "user": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I thought here first that if the user does not set a label, we might treat an address as change. However, I realized that an empty string `\"\"` is truthy, while no string being set is falsy, i.e. even if the address label is set to `\"\"` which appears to be the case for any receive addresses, itâ€™ll be truthy.",
      "created_at": "2023-04-10T18:09:06Z",
      "updated_at": "2023-04-10T18:28:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1161952231",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161952231"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 239,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161954369",
      "pull_request_review_id": 1377895422,
      "id": 1161954369,
      "node_id": "PRRC_kwDOABII585FQgRB",
      "diff_hunk": "@@ -200,28 +201,71 @@ class ReserveDestination\n     void KeepDestination();\n };\n \n-/** Address book data */\n-class CAddressBookData\n+/**\n+ * Address book data.\n+ */\n+struct CAddressBookData\n {\n-private:\n-    bool m_change{true};\n-    std::string m_label;\n-public:\n-    std::string purpose;\n+    /**\n+     * Address label which is always nullopt for change addresses. For sending\n+     * and receiving addresses, it will be set to an arbitrary label string\n+     * provided by the user, or to \"\", which is the default label. The presence\n+     * or absence of a label is used to distinguish change addresses from\n+     * non-change addresses by wallet transaction listing and fee bumping code.\n+     */\n+    std::optional<std::string> label;\n \n-    CAddressBookData() : purpose(\"unknown\") {}\n+    /**\n+     * Address purpose which was originally recorded for payment protocol\n+     * support but now serves as a cached IsMine value. Wallet code should\n+     * not rely on this field being set.\n+     */\n+    std::optional<AddressPurpose> purpose;\n \n+    /**\n+     * Additional address metadata map that can currently hold two types of keys:\n+     *\n+     *   \"used\" keys with values always set to \"1\" or \"p\" if present. This is set on\n+     *       IsMine addresses that have already been spent from if the\n+     *       avoid_reuse option is enabled\n+     *\n+     *   \"rr##\" keys where ## is a decimal number, with serialized\n+     *       RecentRequestEntry objects as values\n+     */\n     typedef std::map<std::string, std::string> StringMap;\n     StringMap destdata;\n \n-    bool IsChange() const { return m_change; }\n-    const std::string& GetLabel() const { return m_label; }\n-    void SetLabel(const std::string& label) {\n-        m_change = false;\n-        m_label = label;\n-    }\n+    /** Accessor methods. */\n+    bool IsChange() const { return !label; }\n+    std::string GetLabel() const { return label ? *label : std::string{}; }\n+    void SetLabel(std::string name) { label = std::move(name); }\n };\n \n+inline std::string PurposeToString(AddressPurpose p)\n+{\n+    switch(p) {\n+    case AddressPurpose::RECEIVE:\n+        return \"receive\";\n+    case AddressPurpose::SEND:\n+        return \"send\";\n+    case AddressPurpose::REFUND:\n+        return \"refund\";\n+    } // no default case so the compiler will warn when a new enum as added\n+    assert(false);\n+}\n+\n+inline std::optional<AddressPurpose> PurposeFromString(std::string_view s)\n+{\n+    if (s == \"receive\") {\n+        return AddressPurpose::RECEIVE;\n+    } else if (s == \"send\") {\n+        return AddressPurpose::SEND;\n+    } else if (s == \"refund\") {\n+        return AddressPurpose::REFUND;\n+    }",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 87,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "a52f20224f8054f3e6f628fe228284e6f3b7ce7e",
      "in_reply_to_id": null,
      "user": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Nit, since each immediately returns, this may be more readable:\r\n\r\n```suggestion\r\n    if (s == \"receive\") return AddressPurpose::RECEIVE;\r\n    if (s == \"send\") return AddressPurpose::SEND;\r\n    if (s == \"refund\") return AddressPurpose::REFUND;\r\n```",
      "created_at": "2023-04-10T18:11:51Z",
      "updated_at": "2023-04-10T18:28:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1161954369",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161954369"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": 259,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 265,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161967546",
      "pull_request_review_id": 1377895422,
      "id": 1161967546,
      "node_id": "PRRC_kwDOABII585FQje6",
      "diff_hunk": "@@ -0,0 +1,6 @@\n+Wallet\n+------\n+\n+* Purposes strings are now restricted to the currently known values of \"send\", \"receive\", and \"refund\".\n+  Wallets that have unrecognized purpose strings will have loading warnings, and the `listlabels`\n+  RPC will raise an error if an unrecognized purpose is requested.",
      "path": "doc/release-notes-27217.md",
      "position": null,
      "original_position": 6,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "98821a7aca88ac9401786e848899866b71446460",
      "in_reply_to_id": null,
      "user": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Perhaps mention that the â€œpurpose stringâ€ appears in the context of addresses, at least for me that would not necessarily have been obvious just from this release note without reviewing the PR.",
      "created_at": "2023-04-10T18:28:27Z",
      "updated_at": "2023-04-10T18:28:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1161967546",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161967546"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": 4,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 6,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1162194379",
      "pull_request_review_id": 1378299830,
      "id": 1162194379,
      "node_id": "PRRC_kwDOABII585FRa3L",
      "diff_hunk": "@@ -48,6 +48,20 @@ enum isminetype : unsigned int {\n };\n /** used for bitflags of isminetype */\n using isminefilter = std::underlying_type<isminetype>::type;\n+\n+/**\n+ * Address purpose field that has been been stored with wallet sending and\n+ * receiving addreses since BIP70 payment protocol support was added in",
      "path": "src/wallet/types.h",
      "position": null,
      "original_position": 7,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "af47fff6804defb1d7a8b538d6f2e7a39c6aa213",
      "in_reply_to_id": 1161939317,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed.",
      "created_at": "2023-04-11T00:44:10Z",
      "updated_at": "2023-04-11T00:44:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1162194379",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1162194379"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 54,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1162194453",
      "pull_request_review_id": 1378299949,
      "id": 1162194453,
      "node_id": "PRRC_kwDOABII585FRa4V",
      "diff_hunk": "@@ -200,28 +201,71 @@ class ReserveDestination\n     void KeepDestination();\n };\n \n-/** Address book data */\n-class CAddressBookData\n+/**\n+ * Address book data.\n+ */\n+struct CAddressBookData\n {\n-private:\n-    bool m_change{true};\n-    std::string m_label;\n-public:\n-    std::string purpose;\n+    /**\n+     * Address label which is always nullopt for change addresses. For sending\n+     * and receiving addresses, it will be set to an arbitrary label string\n+     * provided by the user, or to \"\", which is the default label. The presence\n+     * or absence of a label is used to distinguish change addresses from\n+     * non-change addresses by wallet transaction listing and fee bumping code.\n+     */\n+    std::optional<std::string> label;\n \n-    CAddressBookData() : purpose(\"unknown\") {}\n+    /**\n+     * Address purpose which was originally recorded for payment protocol\n+     * support but now serves as a cached IsMine value. Wallet code should\n+     * not rely on this field being set.\n+     */\n+    std::optional<AddressPurpose> purpose;\n \n+    /**\n+     * Additional address metadata map that can currently hold two types of keys:\n+     *\n+     *   \"used\" keys with values always set to \"1\" or \"p\" if present. This is set on\n+     *       IsMine addresses that have already been spent from if the\n+     *       avoid_reuse option is enabled\n+     *\n+     *   \"rr##\" keys where ## is a decimal number, with serialized\n+     *       RecentRequestEntry objects as values\n+     */\n     typedef std::map<std::string, std::string> StringMap;\n     StringMap destdata;\n \n-    bool IsChange() const { return m_change; }\n-    const std::string& GetLabel() const { return m_label; }\n-    void SetLabel(const std::string& label) {\n-        m_change = false;\n-        m_label = label;\n-    }\n+    /** Accessor methods. */\n+    bool IsChange() const { return !label; }",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 61,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "a52f20224f8054f3e6f628fe228284e6f3b7ce7e",
      "in_reply_to_id": 1161952231,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I've made this clearer by using `has_value()`.",
      "created_at": "2023-04-11T00:44:27Z",
      "updated_at": "2023-04-11T00:44:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1162194453",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1162194453"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 239,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1162194642",
      "pull_request_review_id": 1378300228,
      "id": 1162194642,
      "node_id": "PRRC_kwDOABII585FRa7S",
      "diff_hunk": "@@ -200,28 +201,71 @@ class ReserveDestination\n     void KeepDestination();\n };\n \n-/** Address book data */\n-class CAddressBookData\n+/**\n+ * Address book data.\n+ */\n+struct CAddressBookData\n {\n-private:\n-    bool m_change{true};\n-    std::string m_label;\n-public:\n-    std::string purpose;\n+    /**\n+     * Address label which is always nullopt for change addresses. For sending\n+     * and receiving addresses, it will be set to an arbitrary label string\n+     * provided by the user, or to \"\", which is the default label. The presence\n+     * or absence of a label is used to distinguish change addresses from\n+     * non-change addresses by wallet transaction listing and fee bumping code.\n+     */\n+    std::optional<std::string> label;\n \n-    CAddressBookData() : purpose(\"unknown\") {}\n+    /**\n+     * Address purpose which was originally recorded for payment protocol\n+     * support but now serves as a cached IsMine value. Wallet code should\n+     * not rely on this field being set.\n+     */\n+    std::optional<AddressPurpose> purpose;\n \n+    /**\n+     * Additional address metadata map that can currently hold two types of keys:\n+     *\n+     *   \"used\" keys with values always set to \"1\" or \"p\" if present. This is set on\n+     *       IsMine addresses that have already been spent from if the\n+     *       avoid_reuse option is enabled\n+     *\n+     *   \"rr##\" keys where ## is a decimal number, with serialized\n+     *       RecentRequestEntry objects as values\n+     */\n     typedef std::map<std::string, std::string> StringMap;\n     StringMap destdata;\n \n-    bool IsChange() const { return m_change; }\n-    const std::string& GetLabel() const { return m_label; }\n-    void SetLabel(const std::string& label) {\n-        m_change = false;\n-        m_label = label;\n-    }\n+    /** Accessor methods. */\n+    bool IsChange() const { return !label; }\n+    std::string GetLabel() const { return label ? *label : std::string{}; }\n+    void SetLabel(std::string name) { label = std::move(name); }\n };\n \n+inline std::string PurposeToString(AddressPurpose p)\n+{\n+    switch(p) {\n+    case AddressPurpose::RECEIVE:\n+        return \"receive\";\n+    case AddressPurpose::SEND:\n+        return \"send\";\n+    case AddressPurpose::REFUND:\n+        return \"refund\";\n+    } // no default case so the compiler will warn when a new enum as added\n+    assert(false);\n+}\n+\n+inline std::optional<AddressPurpose> PurposeFromString(std::string_view s)\n+{\n+    if (s == \"receive\") {\n+        return AddressPurpose::RECEIVE;\n+    } else if (s == \"send\") {\n+        return AddressPurpose::SEND;\n+    } else if (s == \"refund\") {\n+        return AddressPurpose::REFUND;\n+    }",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 87,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "a52f20224f8054f3e6f628fe228284e6f3b7ce7e",
      "in_reply_to_id": 1161954369,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I prefer the `else if` style, but have collapsed this and `PurposeToString` to be more readable.",
      "created_at": "2023-04-11T00:45:02Z",
      "updated_at": "2023-04-11T00:45:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1162194642",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1162194642"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": 259,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 265,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1162194740",
      "pull_request_review_id": 1378300341,
      "id": 1162194740,
      "node_id": "PRRC_kwDOABII585FRa80",
      "diff_hunk": "@@ -0,0 +1,6 @@\n+Wallet\n+------\n+\n+* Purposes strings are now restricted to the currently known values of \"send\", \"receive\", and \"refund\".\n+  Wallets that have unrecognized purpose strings will have loading warnings, and the `listlabels`\n+  RPC will raise an error if an unrecognized purpose is requested.",
      "path": "doc/release-notes-27217.md",
      "position": null,
      "original_position": 6,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "98821a7aca88ac9401786e848899866b71446460",
      "in_reply_to_id": 1161967546,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done.",
      "created_at": "2023-04-11T00:45:16Z",
      "updated_at": "2023-04-11T00:45:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1162194740",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1162194740"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": 4,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 6,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165016111",
      "pull_request_review_id": 1382653264,
      "id": 1165016111,
      "node_id": "PRRC_kwDOABII585FcLwv",
      "diff_hunk": "@@ -377,18 +377,17 @@ static void NotifyKeyStoreStatusChanged(WalletModel *walletmodel)\n \n static void NotifyAddressBookChanged(WalletModel *walletmodel,\n         const CTxDestination &address, const std::string &label, bool isMine,\n-        const std::string &purpose, ChangeType status)\n+        wallet::AddressPurpose purpose, ChangeType status)\n {\n     QString strAddress = QString::fromStdString(EncodeDestination(address));\n     QString strLabel = QString::fromStdString(label);\n-    QString strPurpose = QString::fromStdString(purpose);\n \n-    qDebug() << \"NotifyAddressBookChanged: \" + strAddress + \" \" + strLabel + \" isMine=\" + QString::number(isMine) + \" purpose=\" + strPurpose + \" status=\" + QString::number(status);\n+    qDebug() << \"NotifyAddressBookChanged: \" + strAddress + \" \" + strLabel + \" isMine=\" + QString::number(isMine) + \" purpose=\" + QString::number(static_cast<uint8_t>(purpose)) + \" status=\" + QString::number(status);\n     bool invoked = QMetaObject::invokeMethod(walletmodel, \"updateAddressBook\",\n                               Q_ARG(QString, strAddress),\n                               Q_ARG(QString, strLabel),\n                               Q_ARG(bool, isMine),\n-                              Q_ARG(QString, strPurpose),\n+                              Q_ARG(wallet::AddressPurpose, purpose),",
      "path": "src/qt/walletmodel.cpp",
      "position": 41,
      "original_position": 41,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "e83babe3b85b22e2360a99f9827b2b0d107ad0fa",
      "in_reply_to_id": null,
      "user": {
        "login": "denavila",
        "id": 123340139,
        "node_id": "U_kgDOB1oFaw",
        "avatar_url": "https://avatars.githubusercontent.com/u/123340139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/denavila",
        "html_url": "https://github.com/denavila",
        "followers_url": "https://api.github.com/users/denavila/followers",
        "following_url": "https://api.github.com/users/denavila/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/denavila/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/denavila/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/denavila/subscriptions",
        "organizations_url": "https://api.github.com/users/denavila/orgs",
        "repos_url": "https://api.github.com/users/denavila/repos",
        "events_url": "https://api.github.com/users/denavila/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/denavila/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This change appears to trigger this assert when executing \"getnewaddress\" from the Console:\r\nAssertion failed: (invoked), function NotifyAddressBookChanged, file walletmodel.cpp, line 392.\r\n\r\ndebug.log shows this error message:\r\nGUI: QMetaMethod::invoke: Unable to handle unregistered datatype 'wallet::AddressPurpose'",
      "created_at": "2023-04-13T05:29:01Z",
      "updated_at": "2023-04-13T05:29:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1165016111",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165016111"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 390,
      "original_line": 390,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165251694",
      "pull_request_review_id": 1383002967,
      "id": 1165251694,
      "node_id": "PRRC_kwDOABII585FdFRu",
      "diff_hunk": "@@ -377,18 +377,17 @@ static void NotifyKeyStoreStatusChanged(WalletModel *walletmodel)\n \n static void NotifyAddressBookChanged(WalletModel *walletmodel,\n         const CTxDestination &address, const std::string &label, bool isMine,\n-        const std::string &purpose, ChangeType status)\n+        wallet::AddressPurpose purpose, ChangeType status)\n {\n     QString strAddress = QString::fromStdString(EncodeDestination(address));\n     QString strLabel = QString::fromStdString(label);\n-    QString strPurpose = QString::fromStdString(purpose);\n \n-    qDebug() << \"NotifyAddressBookChanged: \" + strAddress + \" \" + strLabel + \" isMine=\" + QString::number(isMine) + \" purpose=\" + strPurpose + \" status=\" + QString::number(status);\n+    qDebug() << \"NotifyAddressBookChanged: \" + strAddress + \" \" + strLabel + \" isMine=\" + QString::number(isMine) + \" purpose=\" + QString::number(static_cast<uint8_t>(purpose)) + \" status=\" + QString::number(status);\n     bool invoked = QMetaObject::invokeMethod(walletmodel, \"updateAddressBook\",\n                               Q_ARG(QString, strAddress),\n                               Q_ARG(QString, strLabel),\n                               Q_ARG(bool, isMine),\n-                              Q_ARG(QString, strPurpose),\n+                              Q_ARG(wallet::AddressPurpose, purpose),",
      "path": "src/qt/walletmodel.cpp",
      "position": 41,
      "original_position": 41,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "e83babe3b85b22e2360a99f9827b2b0d107ad0fa",
      "in_reply_to_id": 1165016111,
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Thanks, opened an issue here to follow up: https://github.com/bitcoin-core/gui/issues/725.",
      "created_at": "2023-04-13T09:17:25Z",
      "updated_at": "2023-04-13T09:17:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1165251694",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165251694"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 390,
      "original_line": 390,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165367412",
      "pull_request_review_id": 1383174091,
      "id": 1165367412,
      "node_id": "PRRC_kwDOABII585Fdhh0",
      "diff_hunk": "@@ -377,18 +377,17 @@ static void NotifyKeyStoreStatusChanged(WalletModel *walletmodel)\n \n static void NotifyAddressBookChanged(WalletModel *walletmodel,\n         const CTxDestination &address, const std::string &label, bool isMine,\n-        const std::string &purpose, ChangeType status)\n+        wallet::AddressPurpose purpose, ChangeType status)\n {\n     QString strAddress = QString::fromStdString(EncodeDestination(address));\n     QString strLabel = QString::fromStdString(label);\n-    QString strPurpose = QString::fromStdString(purpose);\n \n-    qDebug() << \"NotifyAddressBookChanged: \" + strAddress + \" \" + strLabel + \" isMine=\" + QString::number(isMine) + \" purpose=\" + strPurpose + \" status=\" + QString::number(status);\n+    qDebug() << \"NotifyAddressBookChanged: \" + strAddress + \" \" + strLabel + \" isMine=\" + QString::number(isMine) + \" purpose=\" + QString::number(static_cast<uint8_t>(purpose)) + \" status=\" + QString::number(status);\n     bool invoked = QMetaObject::invokeMethod(walletmodel, \"updateAddressBook\",\n                               Q_ARG(QString, strAddress),\n                               Q_ARG(QString, strLabel),\n                               Q_ARG(bool, isMine),\n-                              Q_ARG(QString, strPurpose),\n+                              Q_ARG(wallet::AddressPurpose, purpose),",
      "path": "src/qt/walletmodel.cpp",
      "position": 41,
      "original_position": 41,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "e83babe3b85b22e2360a99f9827b2b0d107ad0fa",
      "in_reply_to_id": 1165016111,
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed in https://github.com/bitcoin-core/gui/pull/726.",
      "created_at": "2023-04-13T11:05:03Z",
      "updated_at": "2023-04-13T11:05:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1165367412",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165367412"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 390,
      "original_line": 390,
      "side": "RIGHT"
    }
  ]
}