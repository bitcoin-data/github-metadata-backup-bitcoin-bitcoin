{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965",
    "id": 3054115118,
    "node_id": "PR_kwDOABII5862Chku",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/33965",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/33965.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/33965.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33965",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33965/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/b623fab1ba87ea93dd7e302b8c927e55f2036173",
    "number": 33965,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "mining: fix -blockreservedweight shadows IPC option",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "body": "Also enforce `MINIMUM_BLOCK_RESERVED_WEIGHT` for IPC clients.\r\n\r\nThe `-blockreservedweight` startup option should only affect RPC code, because IPC clients (currently) do not have a way to signal their intent to use the node default (the `BlockCreateOptions` struct defaults merely document a recommendation for client software).\r\n\r\nBefore this PR however, if the user set `-blockreservedweight` then `ApplyArgsManOptions` would cause the `block_reserved_weight` option passed by IPC clients to be ignored. _Users who don't set this value were not affected._\r\n\r\nFix this by making BlockCreateOptions::block_reserved_weight an std::optional.\r\n\r\nInternal interface users, such as the RPC call sites, don't set a value so -blockreservedweight is used. Whereas IPC clients do set a value which is no longer ignored.\r\n\r\nTest coverage is added, with a preliminary commit that refactors the `create_block_template` and `wait_next_template` helpers.\r\n\r\n`mining_basic.py` already ensured `-blockreservedweight` is enforced by mining RPC methods. The second commit adds coverage for Mining interface IPC clients. It also verifies that `-blockreservedweight` has no effect on them.\r\n\r\nThe third commit enforces `MINIMUM_BLOCK_RESERVED_WEIGHT` for IPC clients. Previously lower values were quietly clamped.\r\n\r\n---\r\n\r\nMerge order preference: #34452 should ideally go first.",
    "labels": [
      {
        "id": 118378960,
        "node_id": "MDU6TGFiZWwxMTgzNzg5NjA=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mining",
        "name": "Mining",
        "color": "c7def8",
        "default": false
      },
      {
        "id": 955867938,
        "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
        "name": "Needs rebase",
        "description": "",
        "color": "cccccc",
        "default": false
      }
    ],
    "created_at": "2025-11-28T13:38:33Z",
    "updated_at": "2026-02-07T14:24:43Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "93a863686d6674a7e38acfda495d2dad0801db39",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "Sjors:2025/11/ipc-reserve",
      "ref": "2025/11/ipc-reserve",
      "sha": "b623fab1ba87ea93dd7e302b8c927e55f2036173",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 92390696,
        "node_id": "MDEwOlJlcG9zaXRvcnk5MjM5MDY5Ng==",
        "name": "bitcoin",
        "full_name": "Sjors/bitcoin",
        "owner": {
          "login": "Sjors",
          "id": 10217,
          "node_id": "MDQ6VXNlcjEwMjE3",
          "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/Sjors",
          "html_url": "https://github.com/Sjors",
          "followers_url": "https://api.github.com/users/Sjors/followers",
          "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
          "organizations_url": "https://api.github.com/users/Sjors/orgs",
          "repos_url": "https://api.github.com/users/Sjors/repos",
          "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/Sjors/received_events",
          "type": "User",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/Sjors/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/Sjors/bitcoin",
        "archive_url": "https://api.github.com/repos/Sjors/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/Sjors/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/Sjors/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/Sjors/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/Sjors/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/Sjors/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/Sjors/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/Sjors/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/Sjors/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/Sjors/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/Sjors/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/Sjors/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/Sjors/bitcoin/events",
        "forks_url": "https://api.github.com/repos/Sjors/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/Sjors/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/Sjors/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/Sjors/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/Sjors/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/Sjors/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/Sjors/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/Sjors/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/Sjors/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/Sjors/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/Sjors/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/Sjors/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/Sjors/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/Sjors/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/Sjors/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/Sjors/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:Sjors/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/Sjors/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/Sjors/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/Sjors/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/Sjors/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/Sjors/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/Sjors/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/Sjors/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/Sjors/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/Sjors/bitcoin/hooks",
        "svn_url": "https://github.com/Sjors/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 11,
        "stargazers_count": 15,
        "watchers_count": 15,
        "size": 283940,
        "default_branch": "master",
        "open_issues_count": 6,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": false,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-02-07T14:19:56Z",
        "created_at": "2017-05-25T10:05:54Z",
        "updated_at": "2026-02-02T15:20:19Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "54bd49c7e3c7de1fdb744d118abd4f12e7dafcd8",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 38861,
        "stargazers_count": 87990,
        "watchers_count": 87990,
        "size": 303286,
        "default_branch": "master",
        "open_issues_count": 736,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-02-07T14:08:14Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2026-02-07T14:48:30Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 87,
    "deletions": 15,
    "changed_files": 6,
    "commits": 3,
    "review_comments": 40,
    "comments": 16
  },
  "events": [
    {
      "event": "labeled",
      "id": 21242925032,
      "node_id": "LE_lADOABII587bC5ADzwAAAATyLU_o",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21242925032",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-28T13:38:37Z",
      "label": {
        "name": "Mining",
        "color": "c7def8"
      }
    },
    {
      "event": "commented",
      "id": 3589380391,
      "node_id": "IC_kwDOABII587V8Zkn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3589380391",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-28T13:38:41Z",
      "updated_at": "2026-02-07T14:24:41Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33965.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [sedited](https://github.com/bitcoin/bitcoin/pull/33965#pullrequestreview-3767162890) |\n| Stale ACK | [ryanofsky](https://github.com/bitcoin/bitcoin/pull/33965#pullrequestreview-3661188841), [ismaelsadeeq](https://github.com/bitcoin/bitcoin/pull/33965#pullrequestreview-3739393889) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#34452](https://github.com/bitcoin/bitcoin/pull/34452) (test: split interface_ipc.py by Sjors)\n* [#34184](https://github.com/bitcoin/bitcoin/pull/34184) (mining: add cooldown to createNewBlock() immediately after IBD by Sjors)\n* [#33922](https://github.com/bitcoin/bitcoin/pull/33922) (mining: add getMemoryLoad() and track template non-mempool memory footprint by Sjors)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#issuecomment-3589380391",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33965"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21243091713,
      "node_id": "HRFPE_lADOABII587bC5ADzwAAAATyL9sB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21243091713",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "46d901c253107ffba14ddce6c3154b46bd471fc2",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/46d901c253107ffba14ddce6c3154b46bd471fc2",
      "created_at": "2025-11-28T13:48:45Z"
    },
    {
      "event": "labeled",
      "id": 21243099958,
      "node_id": "LE_lADOABII587bC5ADzwAAAATyL_s2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21243099958",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-28T13:49:17Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3589414166,
      "node_id": "IC_kwDOABII587V8h0W",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3589414166",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-28T13:49:37Z",
      "updated_at": "2025-11-28T13:49:37Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Task `i686, no IPC`: https://github.com/bitcoin/bitcoin/actions/runs/19765451883/job/56637015664</sub>\n<sub>LLM reason (âœ¨ experimental): Compile error: ISO C++ reorder-init-list warnings promoted to errors in src/rpc/mining.cpp, causing CI failure.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#issuecomment-3589414166",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33965"
    },
    {
      "event": "reviewed",
      "id": 3519087203,
      "node_id": "PRR_kwDOABII587RwQJj",
      "url": null,
      "actor": null,
      "commit_id": "46d901c253107ffba14ddce6c3154b46bd471fc2",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-28T13:52:22Z",
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#pullrequestreview-3519087203",
      "submitted_at": "2025-11-28T13:52:22Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
    },
    {
      "event": "unlabeled",
      "id": 21243885571,
      "node_id": "UNLE_lADOABII587bC5ADzwAAAATyO_gD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21243885571",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-28T14:38:24Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3598680323,
      "node_id": "IC_kwDOABII587Wf4ED",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3598680323",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-01T20:22:26Z",
      "updated_at": "2025-12-01T20:22:26Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK. Would suggest updating `-blockreservedweight` documentation to say it only affects RPC mining clients, not IPC clients.\r\n\r\nI think implementation of this could be improved a bit, depending on if you think it would be useful for IPC clients to \"have a way to signal their intent to use the node default\"?\r\n\r\nIf yes, would suggest just making the field `std::optional`:\r\n\r\n<details><summary>diff</summary>\r\n<p>\r\n\r\n```diff\r\n--- a/src/node/miner.cpp\r\n+++ b/src/node/miner.cpp\r\n@@ -78,11 +78,11 @@ void RegenerateCommitments(CBlock& block, ChainstateManager& chainman)\r\n \r\n static BlockAssembler::Options ClampOptions(BlockAssembler::Options options)\r\n {\r\n-    options.block_reserved_weight = std::clamp<size_t>(options.block_reserved_weight, MINIMUM_BLOCK_RESERVED_WEIGHT, MAX_BLOCK_WEIGHT);\r\n+    options.block_reserved_weight = std::clamp<size_t>(options.block_reserved_weight.value_or(DEFAULT_BLOCK_RESERVED_WEIGHT), MINIMUM_BLOCK_RESERVED_WEIGHT, MAX_BLOCK_WEIGHT);\r\n     options.coinbase_output_max_additional_sigops = std::clamp<size_t>(options.coinbase_output_max_additional_sigops, 0, MAX_BLOCK_SIGOPS_COST);\r\n     // Limit weight to between block_reserved_weight and MAX_BLOCK_WEIGHT for sanity:\r\n     // block_reserved_weight can safely exceed -blockmaxweight, but the rest of the block template will be empty.\r\n-    options.nBlockMaxWeight = std::clamp<size_t>(options.nBlockMaxWeight, options.block_reserved_weight, MAX_BLOCK_WEIGHT);\r\n+    options.nBlockMaxWeight = std::clamp<size_t>(options.nBlockMaxWeight, *options.block_reserved_weight, MAX_BLOCK_WEIGHT);\r\n     return options;\r\n }\r\n \r\n@@ -102,13 +102,15 @@ void ApplyArgsManOptions(const ArgsManager& args, BlockAssembler::Options& optio\r\n         if (const auto parsed{ParseMoney(*blockmintxfee)}) options.blockMinFeeRate = CFeeRate{*parsed};\r\n     }\r\n     options.print_modified_fee = args.GetBoolArg(\"-printpriority\", options.print_modified_fee);\r\n-    options.block_reserved_weight = args.GetIntArg(\"-blockreservedweight\", options.block_reserved_weight);\r\n+    if (!options.block_reserved_weight) {\r\n+        options.block_reserved_weight = args.GetIntArg(\"-blockreservedweight\");\r\n+    }\r\n }\r\n \r\n void BlockAssembler::resetBlock()\r\n {\r\n     // Reserve space for fixed-size block header, txs count, and coinbase tx.\r\n-    nBlockWeight = m_options.block_reserved_weight;\r\n+    nBlockWeight = *m_options.block_reserved_weight;\r\n     nBlockSigOpsCost = m_options.coinbase_output_max_additional_sigops;\r\n \r\n     // These counters do not include coinbase tx\r\n--- a/src/node/types.h\r\n+++ b/src/node/types.h\r\n@@ -42,7 +42,7 @@ struct BlockCreateOptions {\r\n      * The default reserved weight for the fixed-size block header,\r\n      * transaction count and coinbase transaction.\r\n      */\r\n-    size_t block_reserved_weight{DEFAULT_BLOCK_RESERVED_WEIGHT};\r\n+    std::optional<size_t> block_reserved_weight{};\r\n     /**\r\n      * The maximum additional sigops which the pool will add in coinbase\r\n      * transaction outputs.\r\n```\r\n</p>\r\n</details>\r\n\r\nIf no, would suggest having separate functions to read options which IPC clients can and can't control:\r\n\r\n<details><summary>diff</summary>\r\n<p>\r\n\r\n```diff\r\n--- a/src/node/interfaces.cpp\r\n+++ b/src/node/interfaces.cpp\r\n@@ -963,8 +963,12 @@ public:\r\n         // Ensure m_tip_block is set so consumers of BlockTemplate can rely on that.\r\n         if (!waitTipChanged(uint256::ZERO, MillisecondsDouble::max())) return {};\r\n \r\n+        // Construct block assembler options from block create options and\r\n+        // ArgsManager preferences. Intentionally do not call\r\n+        // ReadBlockCreateArgs, so IPC create options will take precedence over\r\n+        // ArgsManager values.\r\n         BlockAssembler::Options assemble_options{options};\r\n-        ApplyArgsManOptions(*Assert(m_node.args), assemble_options);\r\n+        ReadBlockAssemblerArgs(*Assert(m_node.args), assemble_options);\r\n         return std::make_unique<BlockTemplateImpl>(assemble_options, BlockAssembler{chainman().ActiveChainstate(), context()->mempool.get(), assemble_options}.CreateNewBlock(), m_node);\r\n     }\r\n \r\n--- a/src/node/miner.cpp\r\n+++ b/src/node/miner.cpp\r\n@@ -94,7 +94,7 @@ BlockAssembler::BlockAssembler(Chainstate& chainstate, const CTxMemPool* mempool\r\n {\r\n }\r\n \r\n-void ApplyArgsManOptions(const ArgsManager& args, BlockAssembler::Options& options)\r\n+void ReadBlockAssemblerArgs(const ArgsManager& args, BlockAssembler::Options& options)\r\n {\r\n     // Block resource limits\r\n     options.nBlockMaxWeight = args.GetIntArg(\"-blockmaxweight\", options.nBlockMaxWeight);\r\n@@ -102,6 +102,10 @@ void ApplyArgsManOptions(const ArgsManager& args, BlockAssembler::Options& optio\r\n         if (const auto parsed{ParseMoney(*blockmintxfee)}) options.blockMinFeeRate = CFeeRate{*parsed};\r\n     }\r\n     options.print_modified_fee = args.GetBoolArg(\"-printpriority\", options.print_modified_fee);\r\n+}\r\n+\r\n+void ReadBlockCreateArgs(const ArgsManager& args, BlockCreateOptions& options)\r\n+{\r\n     options.block_reserved_weight = args.GetIntArg(\"-blockreservedweight\", options.block_reserved_weight);\r\n }\r\n \r\n--- a/src/node/miner.h\r\n+++ b/src/node/miner.h\r\n@@ -131,8 +131,11 @@ int64_t UpdateTime(CBlockHeader* pblock, const Consensus::Params& consensusParam\r\n /** Update an old GenerateCoinbaseCommitment from CreateNewBlock after the block txs have changed */\r\n void RegenerateCommitments(CBlock& block, ChainstateManager& chainman);\r\n \r\n+/** Apply -blockreservedweight options from ArgsManager to BlockCreateOptions. */\r\n+void ReadBlockCreateArgs(const ArgsManager& args, BlockCreateOptions& options);\r\n+\r\n /** Apply -blockmintxfee and -blockmaxweight options from ArgsManager to BlockAssembler options. */\r\n-void ApplyArgsManOptions(const ArgsManager& gArgs, BlockAssembler::Options& options);\r\n+void ReadBlockAssemblerArgs(const ArgsManager& args, BlockAssembler::Options& options);\r\n \r\n /* Compute the block's merkle root, insert or replace the coinbase transaction and the merkle root into the block */\r\n void AddMerkleRootAndCoinbase(CBlock& block, CTransactionRef coinbase, uint32_t version, uint32_t timestamp, uint32_t nonce);\r\n--- a/src/rpc/mining.cpp\r\n+++ b/src/rpc/mining.cpp\r\n@@ -161,11 +161,13 @@ static bool GenerateBlock(ChainstateManager& chainman, CBlock&& block, uint64_t&\r\n     return true;\r\n }\r\n \r\n-static UniValue generateBlocks(ChainstateManager& chainman, Mining& miner, const CScript& coinbase_output_script, int nGenerate, uint64_t nMaxTries)\r\n+static UniValue generateBlocks(ChainstateManager& chainman, ArgsManager& args, Mining& miner, const CScript& coinbase_output_script, int nGenerate, uint64_t nMaxTries)\r\n {\r\n     UniValue blockHashes(UniValue::VARR);\r\n+    node::BlockCreateOptions options{ .coinbase_output_script = coinbase_output_script };\r\n+    ReadBlockCreateArgs(args, options);\r\n     while (nGenerate > 0 && !chainman.m_interrupt) {\r\n-        std::unique_ptr<BlockTemplate> block_template(miner.createNewBlock({ .coinbase_output_script = coinbase_output_script }));\r\n+        std::unique_ptr<BlockTemplate> block_template(miner.createNewBlock(options));\r\n         CHECK_NONFATAL(block_template);\r\n \r\n         std::shared_ptr<const CBlock> block_out;\r\n@@ -247,9 +249,10 @@ static RPCHelpMan generatetodescriptor()\r\n \r\n     NodeContext& node = EnsureAnyNodeContext(request.context);\r\n     Mining& miner = EnsureMining(node);\r\n+    ArgsManager& args = EnsureArgsman(node);\r\n     ChainstateManager& chainman = EnsureChainman(node);\r\n \r\n-    return generateBlocks(chainman, miner, coinbase_output_script, num_blocks, max_tries);\r\n+    return generateBlocks(chainman, args, miner, coinbase_output_script, num_blocks, max_tries);\r\n },\r\n     };\r\n }\r\n@@ -293,11 +296,12 @@ static RPCHelpMan generatetoaddress()\r\n \r\n     NodeContext& node = EnsureAnyNodeContext(request.context);\r\n     Mining& miner = EnsureMining(node);\r\n+    ArgsManager& args = EnsureArgsman(node);\r\n     ChainstateManager& chainman = EnsureChainman(node);\r\n \r\n     CScript coinbase_output_script = GetScriptForDestination(destination);\r\n \r\n-    return generateBlocks(chainman, miner, coinbase_output_script, num_blocks, max_tries);\r\n+    return generateBlocks(chainman, args, miner, coinbase_output_script, num_blocks, max_tries);\r\n },\r\n     };\r\n }\r\n@@ -345,6 +349,7 @@ static RPCHelpMan generateblock()\r\n \r\n     NodeContext& node = EnsureAnyNodeContext(request.context);\r\n     Mining& miner = EnsureMining(node);\r\n+    ArgsManager& args = EnsureArgsman(node);\r\n     const CTxMemPool& mempool = EnsureMemPool(node);\r\n \r\n     std::vector<CTransactionRef> txs;\r\n@@ -374,9 +379,11 @@ static RPCHelpMan generateblock()\r\n \r\n     ChainstateManager& chainman = EnsureChainman(node);\r\n     {\r\n+        node::BlockCreateOptions options{.use_mempool = false, .coinbase_output_script = coinbase_output_script};\r\n+        ReadBlockCreateArgs(args, options);\r\n         LOCK(chainman.GetMutex());\r\n         {\r\n-            std::unique_ptr<BlockTemplate> block_template{miner.createNewBlock({.use_mempool = false, .coinbase_output_script = coinbase_output_script})};\r\n+            std::unique_ptr<BlockTemplate> block_template{miner.createNewBlock(options)};\r\n             CHECK_NONFATAL(block_template);\r\n \r\n             block = block_template->getBlock();\r\n@@ -471,7 +478,8 @@ static RPCHelpMan getmininginfo()\r\n     obj.pushKV(\"networkhashps\",    getnetworkhashps().HandleRequest(request));\r\n     obj.pushKV(\"pooledtx\",         (uint64_t)mempool.size());\r\n     BlockAssembler::Options assembler_options;\r\n-    ApplyArgsManOptions(*node.args, assembler_options);\r\n+    ReadBlockCreateArgs(*node.args, assembler_options);\r\n+    ReadBlockAssemblerArgs(*node.args, assembler_options);\r\n     obj.pushKV(\"blockmintxfee\", ValueFromAmount(assembler_options.blockMinFeeRate.GetFeePerK()));\r\n     obj.pushKV(\"chain\", chainman.GetParams().GetChainTypeString());\r\n \r\n@@ -871,7 +879,10 @@ static RPCHelpMan getblocktemplate()\r\n         time_start = GetTime();\r\n \r\n         // Create new block\r\n-        block_template = miner.createNewBlock();\r\n+        ArgsManager& args = EnsureArgsman(node);\r\n+        node::BlockCreateOptions options;\r\n+        ReadBlockCreateArgs(args, options);\r\n+        block_template = miner.createNewBlock(options);\r\n         CHECK_NONFATAL(block_template);\r\n \r\n \r\n--- a/src/test/util/mining.cpp\r\n+++ b/src/test/util/mining.cpp\r\n@@ -138,6 +138,7 @@ std::shared_ptr<CBlock> PrepareBlock(const NodeContext& node, const CScript& coi\r\n {\r\n     BlockAssembler::Options assembler_options;\r\n     assembler_options.coinbase_output_script = coinbase_scriptPubKey;\r\n-    ApplyArgsManOptions(*node.args, assembler_options);\r\n+    ReadBlockCreateArgs(*node.args, assembler_options);\r\n+    ReadBlockAssemblerArgs(*node.args, assembler_options);\r\n     return PrepareBlock(node, assembler_options);\r\n }\r\n```\r\n</p>\r\n</details>\r\n\r\nThe current implementation 46d901c253107ffba14ddce6c3154b46bd471fc2 seems a little less ideal using repeated GetIntArg calls instead a function to read the options.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#issuecomment-3598680323",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33965"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21302386559,
      "node_id": "HRFPE_lADOABII587bC5ADzwAAAAT1uJ9_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21302386559",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "8e996553bf42f2629d6c4f7ea27233fed6f7c5b0",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/8e996553bf42f2629d6c4f7ea27233fed6f7c5b0",
      "created_at": "2025-12-02T10:39:36Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21302436963,
      "node_id": "HRFPE_lADOABII587bC5ADzwAAAAT1uWRj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21302436963",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "4679a95de20b77d3bc46533163ea5984c2c8058f",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/4679a95de20b77d3bc46533163ea5984c2c8058f",
      "created_at": "2025-12-02T10:41:55Z"
    },
    {
      "event": "commented",
      "id": 3601375713,
      "node_id": "IC_kwDOABII587WqKHh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3601375713",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-02T10:41:57Z",
      "updated_at": "2025-12-02T10:42:13Z",
      "author_association": "MEMBER",
      "body": "> if you think it would be useful for IPC clients to \"have a way to signal their intent to use the node default\"\r\n\r\nsv2-tp always sets the value (based on `coinbase_output_max_additional_size` in  `CoinbaseOutputConstraints`), so it wouldn't benefit. But it does seem better to allow clients to omit this value.\r\n\r\nFor that to work however, we'd also need to change mining.capnp, e.g.:\r\n\r\n```capnp\r\nblockReservedWeight @1 :UInt64 $Proxy.name(\"block_reserved_weight\");\r\nhasBlockReservedWeight @3 :Bool = true $Proxy.skip;\r\n```\r\n\r\nAdding the `has` field and having it default to `true` means it's not a breaking change. But this doesn't actually work :-)\r\n\r\nAlso, if we really wanted to make this optional for IPC clients, I would prefer to add direct support for optionals to capnp files, as a breaking change.\r\n\r\n\r\nHowever, I did take your patch because it allows this PR to simplified:\r\n- internal callers will see `coinbase_output_max_additional_size` as optional and can omit it. That lets me avoid the four `GetIntArg` calls (and leave `rpc/mining.cpp` alone).\r\n- IPC callers don't see it as optional and always provide a value (which we can change later)\r\n\r\nI added documentation to make this behavior clear.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#issuecomment-3601375713",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33965"
    },
    {
      "event": "labeled",
      "id": 21302449160,
      "node_id": "LE_lADOABII587bC5ADzwAAAAT1uZQI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21302449160",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-02T10:42:30Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21307472419,
      "node_id": "HRFPE_lADOABII587bC5ADzwAAAAT2Bjoj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21307472419",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "1f2f4ab9d3fbdd3071810fa78a17563df3f56f91",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/1f2f4ab9d3fbdd3071810fa78a17563df3f56f91",
      "created_at": "2025-12-02T14:25:26Z"
    },
    {
      "event": "commented",
      "id": 3602323654,
      "node_id": "IC_kwDOABII587WtxjG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3602323654",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-02T14:25:27Z",
      "updated_at": "2025-12-02T14:25:27Z",
      "author_association": "MEMBER",
      "body": "Rebased after #33591 because #33966 has a trivial merge conflict with it and I want to keep that cleanly based on this PR.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#issuecomment-3602323654",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33965"
    },
    {
      "event": "unlabeled",
      "id": 21308948623,
      "node_id": "UNLE_lADOABII587bC5ADzwAAAAT2HMCP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21308948623",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-02T15:18:16Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 3530907741,
      "node_id": "PRR_kwDOABII587SdWBd",
      "url": null,
      "actor": null,
      "commit_id": "1f2f4ab9d3fbdd3071810fa78a17563df3f56f91",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-02T17:08:31Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 1f2f4ab9d3fbdd3071810fa78a17563df3f56f91. This is a pretty clean way of letting the IPC reserved weight value take precedence over the `-blockreservedweight`, and a good first step towards making the IPC value optional in the future.\n\nre: https://github.com/bitcoin/bitcoin/pull/33965#issuecomment-3601375713\n\n> For that to work however, we'd also need to change mining.capnp, e.g.:\n\nYes, sorry, I should have mentioned that. I think it makes sense to add support in the c++ implementation first, and the capn'proto interface later. There are many ways the capnproto interface could be modified to support this and be backwards compatible if desired. I think the nicest way to support making the value optional might be to use a union like:\n\n```\nblockReservedWeight : union { none @1 :Void; value @2 :UInt64; };\n```\n\n(Interestingly according to https://capnproto.org/language.html#unions, you can even convert a non-union field into a union field without breaking backwards compatibility, as long as the old field is the lowest-numbered field in the union. However, this numbering would also affect the union default value so probably not worth it.)\n\nAnother way to support making the value optional would be to add a boolean `has` field like you suggested. Another way would be to \"box\" the value, putting it in a struct with a single field. Probably all approaches will require modifying libmultiprocess somehow, so would be better to implement in a separate PR.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#pullrequestreview-3530907741",
      "submitted_at": "2025-12-02T17:08:31Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21314312880,
      "node_id": "HRFPE_lADOABII587bC5ADzwAAAAT2bpqw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21314312880",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "4d686142e079765cd31851481deb70659a9e9376",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/4d686142e079765cd31851481deb70659a9e9376",
      "created_at": "2025-12-02T18:48:20Z"
    },
    {
      "event": "reviewed",
      "id": 3536257630,
      "node_id": "PRR_kwDOABII587SxwJe",
      "url": null,
      "actor": null,
      "commit_id": "4d686142e079765cd31851481deb70659a9e9376",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-03T18:23:03Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 4d686142e079765cd31851481deb70659a9e9376. Just updated a comment since last review. Still looks good! Only minor comments below, not important",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#pullrequestreview-3536257630",
      "submitted_at": "2025-12-03T18:23:03Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21358857850,
      "node_id": "HRFPE_lADOABII587bC5ADzwAAAAT5Fk56",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21358857850",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "54d3054db129d4dd5aaf9faa3f6e6922159059b0",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/54d3054db129d4dd5aaf9faa3f6e6922159059b0",
      "created_at": "2025-12-04T12:53:25Z"
    },
    {
      "event": "reviewed",
      "id": 3541102064,
      "node_id": "PRR_kwDOABII587TEO3w",
      "url": null,
      "actor": null,
      "commit_id": "54d3054db129d4dd5aaf9faa3f6e6922159059b0",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-04T17:10:32Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 54d3054db129d4dd5aaf9faa3f6e6922159059b0. Just some more review suggestions applied since last review. This is a pretty clean fix preventing the `-blockreservedweight` configuration value from overriding the IPC requested value.\n\nThe followup #33966 will make the code merging IPC options and configuration options more clear. And a different followup could give IPC clients ability to use the `-blockreservedweight` value instead of needing to provide their own value.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#pullrequestreview-3541102064",
      "submitted_at": "2025-12-04T17:10:32Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
    },
    {
      "event": "labeled",
      "id": 21595657638,
      "node_id": "LE_lADOABII587bC5ADzwAAAAUHM5Wm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21595657638",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-16T15:26:57Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21664448910,
      "node_id": "HRFPE_lADOABII587bC5ADzwAAAAULTUGO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21664448910",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "6d7c3ee3fa2c5942d715a8690ef181d6b305ff33",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/6d7c3ee3fa2c5942d715a8690ef181d6b305ff33",
      "created_at": "2025-12-19T07:43:38Z"
    },
    {
      "event": "commented",
      "id": 3673969713,
      "node_id": "IC_kwDOABII587a_FQx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3673969713",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-19T07:49:10Z",
      "updated_at": "2025-12-19T07:49:10Z",
      "author_association": "MEMBER",
      "body": "Rebased after #34003. I added an initial test refactor commit to have the `{create_block,wait_next}_template` helpers introduced in that PR to return `None` if there's a timeout or failure.\r\n\r\nI also added a commit to enforce (rather than clamp) the minimum reserved block value, as noticed by @plebhash in https://github.com/stratum-mining/sv2-tp/pull/51#issuecomment-3670613634. I could make that it's own PR but it's rather trivial.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#issuecomment-3673969713",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33965"
    },
    {
      "event": "mentioned",
      "id": 21664525684,
      "node_id": "MEE_lADOABII587bC5ADzwAAAAULTm10",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21664525684",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-19T07:49:11Z"
    },
    {
      "event": "subscribed",
      "id": 21664525698,
      "node_id": "SE_lADOABII587bC5ADzwAAAAULTm2C",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21664525698",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-19T07:49:11Z"
    },
    {
      "event": "unlabeled",
      "id": 21664902747,
      "node_id": "UNLE_lADOABII587bC5ADzwAAAAULVC5b",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21664902747",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-19T08:11:02Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 3597500126,
      "node_id": "PRR_kwDOABII587WbX7e",
      "url": null,
      "actor": null,
      "commit_id": "6d7c3ee3fa2c5942d715a8690ef181d6b305ff33",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-19T08:22:00Z",
      "author_association": "MEMBER",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#pullrequestreview-3597500126",
      "submitted_at": "2025-12-19T08:22:00Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21665841279,
      "node_id": "HRFPE_lADOABII587bC5ADzwAAAAULYoB_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21665841279",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "31325c1782e542601b3de8bd8bafe0af372830e9",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/31325c1782e542601b3de8bd8bafe0af372830e9",
      "created_at": "2025-12-19T09:01:54Z"
    },
    {
      "event": "review_requested",
      "id": 21786890967,
      "node_id": "RRE_lADOABII587bC5ADzwAAAAUSmZLX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21786890967",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-30T02:51:35Z",
      "requested_reviewer": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "commented",
      "id": 3698159581,
      "node_id": "IC_kwDOABII587cbW_d",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3698159581",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-30T02:53:53Z",
      "updated_at": "2025-12-30T02:53:53Z",
      "author_association": "MEMBER",
      "body": "@plebhash maybe you can you give this a quick test against the SRI integration? Without this PR, if you set `-blockreservedweigh` it will ignore the corresponding IPC argument.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#issuecomment-3698159581",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33965"
    },
    {
      "event": "mentioned",
      "id": 21786909156,
      "node_id": "MEE_lADOABII587bC5ADzwAAAAUSmdnk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21786909156",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-30T02:53:55Z"
    },
    {
      "event": "subscribed",
      "id": 21786909163,
      "node_id": "SE_lADOABII587bC5ADzwAAAAUSmdnr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21786909163",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-30T02:53:55Z"
    },
    {
      "event": "commented",
      "id": 3700784357,
      "node_id": "IC_kwDOABII587clXzl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3700784357",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-30T23:10:09Z",
      "updated_at": "2025-12-30T23:18:20Z",
      "author_association": "NONE",
      "body": "> @plebhash maybe you can you give this a quick test against the SRI integration? Without this PR, if you set `-blockreservedweigh` it will ignore the corresponding IPC argument.\r\n\r\nwhat methodology would you suggest for this?\r\n\r\nI assume we want to mine a block that's filled up to its capacity, and then check the consumed weight to see how far it is from the consensus limit, right?\r\n\r\nI'm trying to leverage `integration_tests_sv2` crate, which allows us to write some Rust code to interact with a regtest node\r\n\r\nbut I'm having a really hard time to reliably populate the mempool with enough transactions to fill an entire block (at least in a test that wouldn't take hours to execute)",
      "user": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#issuecomment-3700784357",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33965"
    },
    {
      "event": "mentioned",
      "id": 21801299307,
      "node_id": "MEE_lADOABII587bC5ADzwAAAAUTdW1r",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21801299307",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-30T23:10:10Z"
    },
    {
      "event": "subscribed",
      "id": 21801299315,
      "node_id": "SE_lADOABII587bC5ADzwAAAAUTdW1z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21801299315",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-30T23:10:10Z"
    },
    {
      "event": "commented",
      "id": 3701296785,
      "node_id": "IC_kwDOABII587cnU6R",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3701296785",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-31T02:39:10Z",
      "updated_at": "2025-12-31T02:39:10Z",
      "author_association": "MEMBER",
      "body": "@plebhash in the functional test for this PR I simply set `-blockreservedweight=4000000`. That should result in empty blocks. Then just use a normal value in the IPC calls and the blocks will still be empty (before this PR).",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#issuecomment-3701296785",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33965"
    },
    {
      "event": "mentioned",
      "id": 21803585725,
      "node_id": "MEE_lADOABII587bC5ADzwAAAAUTmFC9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21803585725",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-31T02:39:11Z"
    },
    {
      "event": "subscribed",
      "id": 21803585740,
      "node_id": "SE_lADOABII587bC5ADzwAAAAUTmFDM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21803585740",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-31T02:39:11Z"
    },
    {
      "event": "commented",
      "id": 3702519064,
      "node_id": "IC_kwDOABII587cr_UY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3702519064",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-31T17:00:24Z",
      "updated_at": "2026-01-01T00:22:32Z",
      "author_association": "NONE",
      "body": "ok I wrote an Integration Test with the following methodology:\r\n\r\n- Bitcoin Core in `regtest` mode with the following variations\r\n  - v30 vs this PR\r\n  - with vs without `-blockreservedweight=4000000`\r\n- Pool (which connects to Bitcoin Core via IPC)\r\n- Sniffer (between Pool and tProxy)\r\n- tProxy\r\n- Sv1 CPU miner\r\n\r\nwe loop while creating mempool transactions and monitoring the Extended Jobs sent by Pool\r\n\r\nthe test only exits once we see an Extended Job with `merkle_path.len() > 0` (âœ…)... if the test never returns (âŒ), we conclude that all templates sent by Bitcoin Core are empty\r\n\r\nnote: Pool originally generates  `CoinbaseOutputConstraints.coinbase_output_max_additional_size = 31`\r\n\r\nbut internally, its `BitcoinCoreSv2` abstraction multiplies it by 4 and then clamps the result to `2000` while crafting the `CreateNewBlock` IPC request... so I also added a variation on the tests with and without clamping this to 2000\r\n\r\n---\r\n\r\nhere are the results:\r\n\r\nWITH clamping `4 * CoinbaseOutputConstraints.coinbase_output_max_additional_size` to `2000` while sending `CreateNewBlock`:\r\n\r\n|                                        | v30                        | #33965                   |\r\n|----------------------------------------|----------------------------|--------------------------|\r\n| WITH `-blockreservedweight=4000000`    | only sends EMPTY templates âŒ | sends NON-EMPTY template âœ… |\r\n| WITHOUT `-blockreservedweight=4000000` | sends NON-EMPTY template âœ…  | sends NON-EMPTY template âœ… |\r\n\r\nWITHOUT clamping `4 * CoinbaseOutputConstraints.coinbase_output_max_additional_size` to `2000` while sending `CreateNewBlock`:\r\n\r\n|                                        | v30                        | #33965                  |\r\n|----------------------------------------|----------------------------|-------------------------|\r\n| with `-blockreservedweight=4000000`    | only sends EMPTY templates âŒ | `CreateNewBlock`  fails  ðŸ’¥ |\r\n| without `-blockreservedweight=4000000` | sends NON-EMPTY template  âœ… | `CreateNewBlock`  fails  ðŸ’¥|\r\n\r\nboth errors for `CreateNewBlock`  were:\r\n```\r\n2025-12-31T16:42:09.307986Z ERROR bitcoin_core_sv2: Failed to get template IPC client result: Message contains null capability pointer.\r\n2025-12-31T16:42:09.308014Z ERROR bitcoin_core_sv2: Failed to create new template IPC client: CapnpError(Error { kind: MessageContainsNullCapabilityPointer, extra: \"\" })\r\n```\r\n\r\nthis makes me conclude that Bitcoin Core will not accept a `CreateNewBlock` with `set_block_reserved_weight < 2000`, which feels aligned with the rationale behind https://github.com/stratum-mining/sv2-tp/pull/79\r\n\r\n---\r\n\r\nthe test was saved on [branch `2025-12-31-test-bitcoin-core-33965` of my fork](https://github.com/plebhash/sv2-apps/tree/2025-12-31-test-bitcoin-core-33965), with the following commits:\r\n- [7b343fba4ad506dba179b1f5fbcb99598617dafe](https://github.com/plebhash/sv2-apps/commit/7b343fba4ad506dba179b1f5fbcb99598617dafe) which disables clamping `4 * CoinbaseOutputConstraints.coinbase_output_max_additional_size` to `2000`\r\n- [951d5d14456fa861eb6b765cd65f05a94b3c3dfa](https://github.com/plebhash/sv2-apps/commit/951d5d14456fa861eb6b765cd65f05a94b3c3dfa) which adds the modifications to `integration_tests_sv2` code needed for this test (originally commented out and hardcoded with a path from my setup, but can be easily enabled/modified)\r\n- [5cb733fc169fcd39293222fb1e600f543308a39d](https://github.com/plebhash/sv2-apps/commit/5cb733fc169fcd39293222fb1e600f543308a39d) which adds the `test_33965` Integration Test\r\n\r\nthe integration test can be executed with:\r\n```\r\ngit clone https://github.com/plebhash/sv2-apps -b 2025-12-31-test-bitcoin-core-33965\r\ncd sv2-apps/integration-tests\r\ncargo t test_33965 -- --nocapture\r\n```\r\n\r\n(I actually recommend `cargo nextest run test_33965 --nocapture` because it makes it easier to kill the tests without leaving zombie processes behind, but it's optional)",
      "user": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#issuecomment-3702519064",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33965"
    },
    {
      "event": "mentioned",
      "id": 21811016329,
      "node_id": "MEE_lADOABII587bC5ADzwAAAAUUCbKJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21811016329",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-31T17:04:44Z"
    },
    {
      "event": "subscribed",
      "id": 21811016337,
      "node_id": "SE_lADOABII587bC5ADzwAAAAUUCbKR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21811016337",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-31T17:04:44Z"
    },
    {
      "event": "mentioned",
      "id": 21811016346,
      "node_id": "MEE_lADOABII587bC5ADzwAAAAUUCbKa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21811016346",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-31T17:04:44Z"
    },
    {
      "event": "subscribed",
      "id": 21811016352,
      "node_id": "SE_lADOABII587bC5ADzwAAAAUUCbKg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21811016352",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-31T17:04:44Z"
    },
    {
      "event": "unsubscribed",
      "id": 21815093861,
      "node_id": "UE_lADOABII587bC5ADzwAAAAUUR-pl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21815093861",
      "actor": {
        "login": "fantomazz26",
        "id": 146906785,
        "node_id": "U_kgDOCMGeoQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/146906785?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fantomazz26",
        "html_url": "https://github.com/fantomazz26",
        "followers_url": "https://api.github.com/users/fantomazz26/followers",
        "following_url": "https://api.github.com/users/fantomazz26/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fantomazz26/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fantomazz26/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fantomazz26/subscriptions",
        "organizations_url": "https://api.github.com/users/fantomazz26/orgs",
        "repos_url": "https://api.github.com/users/fantomazz26/repos",
        "events_url": "https://api.github.com/users/fantomazz26/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fantomazz26/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-01T01:12:51Z"
    },
    {
      "event": "commented",
      "id": 3703211960,
      "node_id": "IC_kwDOABII587cuoe4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3703211960",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-01T03:21:42Z",
      "updated_at": "2026-01-01T03:21:42Z",
      "author_association": "MEMBER",
      "body": "@plebhash thanks for testing! So it looks like this PR works.\r\n\r\n> this makes me conclude that Bitcoin Core will not accept a `CreateNewBlock` with `set_block_reserved_weight < 2000`, which feels aligned with the rationale behind [stratum-mining/sv2-tp#79](https://github.com/stratum-mining/sv2-tp/pull/79)\r\n\r\nGood to know that it's not quietly increasing the value, but rather just fails. Even though the error could be better.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#issuecomment-3703211960",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33965"
    },
    {
      "event": "mentioned",
      "id": 21815609659,
      "node_id": "MEE_lADOABII587bC5ADzwAAAAUUT8k7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21815609659",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-01T03:21:43Z"
    },
    {
      "event": "subscribed",
      "id": 21815609666,
      "node_id": "SE_lADOABII587bC5ADzwAAAAUUT8lC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21815609666",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-01T03:21:43Z"
    },
    {
      "event": "reviewed",
      "id": 3636519762,
      "node_id": "PRR_kwDOABII587YwONS",
      "url": null,
      "actor": null,
      "commit_id": "31325c1782e542601b3de8bd8bafe0af372830e9",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-07T20:28:16Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 31325c1782e542601b3de8bd8bafe0af372830e9\n\nMany changes since last review.\n\nMain code change in second commit is a straightforward fix using `std::optional` to prevent `ApplyArgsManOptions` from overriding the `block_reserved_weight` value provided by IPC and ignoring it.\n\nThe test improvements in the first commit are also nice, and the change in the third commit to enforce the MINIMUM_BLOCK_RESERVED_WEIGHT instead of silently clamping it seem good.\n\nI left some suggestions below but none are important.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#pullrequestreview-3636519762",
      "submitted_at": "2026-01-07T20:28:16Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21912524444,
      "node_id": "HRFPE_lADOABII587bC5ADzwAAAAUaFpac",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21912524444",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "264fdbb81bd1999dbf7c018aae8bda6c99bdeaa0",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/264fdbb81bd1999dbf7c018aae8bda6c99bdeaa0",
      "created_at": "2026-01-08T03:10:41Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21912601611,
      "node_id": "HRFPE_lADOABII587bC5ADzwAAAAUaF8QL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21912601611",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "d3db5285989f7b3fef7436a37ce928065be2804e",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/d3db5285989f7b3fef7436a37ce928065be2804e",
      "created_at": "2026-01-08T03:18:46Z"
    },
    {
      "event": "commented",
      "id": 3721710554,
      "node_id": "IC_kwDOABII587d1Mva",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3721710554",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-08T03:19:11Z",
      "updated_at": "2026-01-08T04:49:23Z",
      "author_association": "MEMBER",
      "body": "Addressed comments and also rebased (needed for #33966).\r\n\r\n> Even though the error could be better.\r\n\r\n@plebhash it should throw a more useful error now",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#issuecomment-3721710554",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33965"
    },
    {
      "event": "labeled",
      "id": 21912606525,
      "node_id": "LE_lADOABII587bC5ADzwAAAAUaF9c9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21912606525",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-08T03:19:20Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 21913295520,
      "node_id": "UNLE_lADOABII587bC5ADzwAAAAUaIlqg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21913295520",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-08T04:33:26Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "mentioned",
      "id": 21913480221,
      "node_id": "MEE_lADOABII587bC5ADzwAAAAUaJSwd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21913480221",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-08T04:49:43Z"
    },
    {
      "event": "subscribed",
      "id": 21913480236,
      "node_id": "SE_lADOABII587bC5ADzwAAAAUaJSws",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21913480236",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-08T04:49:43Z"
    },
    {
      "event": "reviewed",
      "id": 3639147442,
      "node_id": "PRR_kwDOABII587Y6Puy",
      "url": null,
      "actor": null,
      "commit_id": "d3db5285989f7b3fef7436a37ce928065be2804e",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-08T12:24:19Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK d3db5285989f7b3fef7436a37ce928065be2804e just making reserved weight check into an exception and improving comments since last review. Thanks for the updates!\n",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#pullrequestreview-3639147442",
      "submitted_at": "2026-01-08T12:24:19Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21937180305,
      "node_id": "HRFPE_lADOABII587bC5ADzwAAAAUbjs6R",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21937180305",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "d443301666ba4ad4fbf5388c85862a6cae290d53",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/d443301666ba4ad4fbf5388c85862a6cae290d53",
      "created_at": "2026-01-09T02:03:57Z"
    },
    {
      "event": "reviewed",
      "id": 3655533983,
      "node_id": "PRR_kwDOABII587Z4wWf",
      "url": null,
      "actor": null,
      "commit_id": "d443301666ba4ad4fbf5388c85862a6cae290d53",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-13T12:28:39Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK d443301666ba4ad4fbf5388c85862a6cae290d53, just catching more specific python exception in test since last review",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#pullrequestreview-3655533983",
      "submitted_at": "2026-01-13T12:28:39Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
    },
    {
      "event": "labeled",
      "id": 22016469186,
      "node_id": "LE_lADOABII587bC5ADzwAAAAUgSKjC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22016469186",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-13T13:15:43Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22038113729,
      "node_id": "HRFPE_lADOABII587bC5ADzwAAAAUhku3B",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22038113729",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "8bc1cb77fada68796c9599a04a66025a4b53ddab",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/8bc1cb77fada68796c9599a04a66025a4b53ddab",
      "created_at": "2026-01-14T09:24:19Z"
    },
    {
      "event": "commented",
      "id": 3748604905,
      "node_id": "IC_kwDOABII587fbyvp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3748604905",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-14T09:27:36Z",
      "updated_at": "2026-01-14T09:27:36Z",
      "author_association": "MEMBER",
      "body": "Rebased after:\r\n- #33819\r\n- just some include / import conflicts",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#issuecomment-3748604905",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33965"
    },
    {
      "event": "unlabeled",
      "id": 22040712129,
      "node_id": "UNLE_lADOABII587bC5ADzwAAAAUhupPB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22040712129",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-14T11:17:28Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 3661188841,
      "node_id": "PRR_kwDOABII587aOU7p",
      "url": null,
      "actor": null,
      "commit_id": "8bc1cb77fada68796c9599a04a66025a4b53ddab",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-14T14:59:43Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 8bc1cb77fada68796c9599a04a66025a4b53ddab, just rebased with include/import changes since last review\n",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#pullrequestreview-3661188841",
      "submitted_at": "2026-01-14T14:59:43Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
    },
    {
      "event": "review_requested",
      "id": 22069143594,
      "node_id": "RRE_lADOABII587bC5ADzwAAAAUjbGgq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22069143594",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-15T12:58:16Z",
      "requested_reviewer": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 3732124561,
      "node_id": "PRR_kwDOABII587ec7OR",
      "url": null,
      "actor": null,
      "commit_id": "8bc1cb77fada68796c9599a04a66025a4b53ddab",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-31T09:40:57Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK 8bc1cb77fada68796c9599a04a66025a4b53ddab",
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#pullrequestreview-3732124561",
      "submitted_at": "2026-01-31T09:40:57Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
    },
    {
      "event": "reviewed",
      "id": 3739393889,
      "node_id": "PRR_kwDOABII587e4p9h",
      "url": null,
      "actor": null,
      "commit_id": "8bc1cb77fada68796c9599a04a66025a4b53ddab",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-02T16:35:10Z",
      "author_association": "MEMBER",
      "body": "Code review ACK 8bc1cb77fada68796c9599a04a66025a4b53ddab\r\n\r\nI verified that we now make `block_reserved_weight` optional, such that whenever a value is provided at runtime, that value is used; it is not silently changed to the startup value in `ApplyArgsManOptions`.\r\n\r\nI also verify that the current change does not allow for a default or overridden `blockreservedweight` set via startup to be lower (when the rpc is used), by generating a block template and ensuring its weight does not go beyond `4000000` - `-blockreservedweight`.\r\n\r\nIMO, the way the current functionality is implemented now using `std::optional` is a bit awkward, and not going to be easy to extend. for e.g if IPC has other options in the future that get set at runtime, and we don't want to override like `blockmaxweight`? Would those also need to be wrapped in `std::optional`? \r\n\r\nA better solution is to split `ApplyArgsManOptions` into two functions, instead `ApplyMandatoryOptions`  for mandatory overrides that must be called, and  `ApplyStartupOptions`  for startup-specific options that only mining RPCs call, since they don't have runtime overrides.  IPC would only call `ApplyMandatoryOptions`. \r\n\r\nAlternatively, we could also use a boolean parameter in the options struct so that `ApplyArgsManOptions` can skip certain overrides altogether, which is also easy to extend, but booleans can be brittle.\r\n",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#pullrequestreview-3739393889",
      "submitted_at": "2026-02-02T16:11:44Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
    },
    {
      "event": "commented",
      "id": 3855339019,
      "node_id": "IC_kwDOABII587ly84L",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3855339019",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-05T18:09:15Z",
      "updated_at": "2026-02-05T18:09:15Z",
      "author_association": "CONTRIBUTOR",
      "body": "Note: this has 3 acks, but conflicts with #34452 where Sjors expressed a preference in https://github.com/bitcoin/bitcoin/pull/34452#issuecomment-3841971858 for merging that PR before conflicting PRs due to the difficultly of that rebase.\r\n\r\nMight be good to point to #34452 in the PR description if that should be reviewed first. Also there are new review comments here that don't have responses yet.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#issuecomment-3855339019",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33965"
    },
    {
      "event": "reviewed",
      "id": 3758773296,
      "node_id": "PRR_kwDOABII587gClQw",
      "url": null,
      "actor": null,
      "commit_id": "8bc1cb77fada68796c9599a04a66025a4b53ddab",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-05T19:19:46Z",
      "author_association": "CONTRIBUTOR",
      "body": "re: https://github.com/bitcoin/bitcoin/pull/33965#pullrequestreview-3739393889\n\n> IMO, the way the current functionality is implemented now using `std::optional` is a bit awkward, and not going to be easy to extend. for e.g if IPC has other options in the future that get set at runtime, and we don't want to override like `blockmaxweight`? Would those also need to be wrapped in `std::optional`?\n\nIt seems natural to use a std::optional type for values that `createNewBlock` callers may specify but should not be required to specify. But if you are just saying the implementation of this interface is currently awkward, that is true and followup #33966 should improve it. Additionally, we will probably want another followup PR exposing the `std::optional` capability to capnproto (https://github.com/bitcoin/bitcoin/pull/33965#pullrequestreview-3530907741), so clients can use the node `-blockreservedweight` value if desired.\n\n> A better solution is to split `ApplyArgsManOptions` into two functions, instead `ApplyMandatoryOptions` for mandatory overrides that must be called, and `ApplyStartupOptions` for startup-specific options that only mining RPCs call, since they don't have runtime overrides. IPC would only call `ApplyMandatoryOptions`.\n\nI think followup #33966 should do what you are describing. There is an [`ApplyArgsManOptions`](https://github.com/Sjors/bitcoin/blob/40020bc85eb252ca9a8d442999cc677dc088d94c/src/node/mining_args.cpp#L19-L45) options parsing startup options and [`ApplyMiningDefaults`](https://github.com/Sjors/bitcoin/blob/40020bc85eb252ca9a8d442999cc677dc088d94c/src/node/miner.cpp#L113-L122) applying them in the mining code.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#pullrequestreview-3758773296",
      "submitted_at": "2026-02-05T19:19:46Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
    },
    {
      "event": "labeled",
      "id": 22608209525,
      "node_id": "LE_lADOABII587bC5ADzwAAAAVDjeZ1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22608209525",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-07T10:42:10Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3864126426,
      "node_id": "IC_kwDOABII587mUePa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3864126426",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-07T10:42:11Z",
      "updated_at": "2026-02-07T10:42:11Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--cf906140f33d8803c4a75a2196329ecb-->\nðŸ™ This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#issuecomment-3864126426",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33965"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDQxOGI3OTk1ZGRmYmM4ODc2NGYxZjBjZWFiZjg5OTM4MDhiMDhiZDg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/418b7995ddfbc88764f1f0ceabf8993808b08bd8",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/418b7995ddfbc88764f1f0ceabf8993808b08bd8",
      "tree": {
        "sha": "f0f1172438b4f16e5caa032c7f9a638335ad37c6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f0f1172438b4f16e5caa032c7f9a638335ad37c6"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree f0f1172438b4f16e5caa032c7f9a638335ad37c6\nparent 54bd49c7e3c7de1fdb744d118abd4f12e7dafcd8\nauthor Sjors Provoost <sjors@sprovoost.nl> 1766178801 -0600\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1770466411 +0100\n\ntest: have mining template helpers return None\n\nRefactor the mining_create_block_template and mining_wait_next_template\nhelpers in ipc_util.py to return None if they time out or fail. It makes\nthe test easier to read and provides a more clear error message in case\nof a regression.\n\nThere were a few spots that didn't use mining_wait_next_template yet,\nwhich now do.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmmHLIUACgkQV/+b28ww\nEAkG9Q/+Is7bV/Ox0rGN+XY3jxloq5vn5e1oEfACyfqsHwNFu2oRHfImIehr50oc\n/M4dRdty8Pehxc8k/TAFgwK8RN02g9X25p7xkyi4TfKueuSevL4s2cieGaQJzMXV\nhcycb6zVHe6lvLMo3lI4Uv2C9W1S+eWsiGt190QgpSW6JIHL4o1NOIbnI3LKKE+t\ne1vGdqfiD6SF3j//hGt3jtIg928b3deGtgGs7YYKCKggfx9hjYM/bB3zGiJCNXdl\nCryrlJBWFiFYu4c63eqVq3Bss9pCiQ5AhuyGVKZkDZl6lGHK0TmTo+nmAuOrUYO3\ngplmhW9lNhWiir4wfmNHTvGr7tVn4H4mxX5viyen8BdGnVoSDgpxrB5Y3HDe6F0o\nwxDtxJIbkzzO1rKXlIuPgY91pA+ASIiQfpbU8zzSXU6/1OXSH3qyYxm+FZRDUTDq\nHjd/YVCvg+wynkk3WkFJXwxzAv9YLBnQpEZbWVvBGxwjQE2XX5f+YVtX8xqXpBHE\n4q+q/bttaaH29whmWx1XeDDL35tCdrFYH/WZU82L13nOC1UrKpD/Kdu4OqHej/BV\nb+z/Uzk/Idd26LydrpIwor8zh+WWMdPrZx29jii3BMahRzuDVuboUUfPDx7luiFu\nf/d/CX4VDD7yK0MVslCPtdBVsyEqQAnZtTw3kGzJbDJsjTcSFz0=\n=G43b\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/54bd49c7e3c7de1fdb744d118abd4f12e7dafcd8",
          "sha": "54bd49c7e3c7de1fdb744d118abd4f12e7dafcd8",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/54bd49c7e3c7de1fdb744d118abd4f12e7dafcd8"
        }
      ],
      "message": "test: have mining template helpers return None\n\nRefactor the mining_create_block_template and mining_wait_next_template\nhelpers in ipc_util.py to return None if they time out or fail. It makes\nthe test easier to read and provides a more clear error message in case\nof a regression.\n\nThere were a few spots that didn't use mining_wait_next_template yet,\nwhich now do.",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2026-02-07T12:13:31Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2025-12-19T21:13:21Z"
      },
      "sha": "418b7995ddfbc88764f1f0ceabf8993808b08bd8"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQzZTQ5NTI4ZDQ3OTYxM2ViZTUwMDg4ZDUzMGE2MjE4NjE0NjNmYTQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d3e49528d479613ebe50088d530a621861463fa4",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d3e49528d479613ebe50088d530a621861463fa4",
      "tree": {
        "sha": "01cdb5566b6996f8acb0c7821399151e78447eb5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/01cdb5566b6996f8acb0c7821399151e78447eb5"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 01cdb5566b6996f8acb0c7821399151e78447eb5\nparent 418b7995ddfbc88764f1f0ceabf8993808b08bd8\nauthor Sjors Provoost <sjors@sprovoost.nl> 1766179113 -0600\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1770469053 +0100\n\nmining: fix -blockreservedweight shadows IPC option\n\nThe -blockreservedweight startup option should only affect RPC code,\nbecause IPC clients (currently) do not have a way to signal their intent\nto use the node default (the BlockCreateOptions struct defaults\nmerely document a recommendation for client software).\n\nBefore this commit however, if the user set -blockreservedweight\nthen ApplyArgsManOptions would cause the block_reserved_weight\noption passed by IPC clients to be ignored. Users who don't set\nthis value were not affected.\n\nFix this by making BlockCreateOptions::block_reserved_weight an\nstd::optional.\n\nInternal interface users, such as the RPC call sites, don't set a\nvalue so -blockreservedweight is used. Whereas IPC clients do set\na value which is no longer ignored.\n\nTest coverage is added.\n\nmining_basic.py already ensured -blockreservedweight is enforced by\nmining RPC methods. This commit adds coverage for Mining interface IPC\nclients. It also verifies that -blockreservedweight has no effect on\nthem.\n\nCo-Authored-By: Russell Yanofsky <russ@yanofsky.org>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmmHNr0ACgkQV/+b28ww\nEAncwQ/8DM5yvBsjnkBHgabCSDOudCan2kxga4AKtAt6B+w1AZjYVIHOcp+CN/2b\ndGXq9+wqnsWMOTekFrDhkdHgDgfFW6/xyvgNlhGR5YubVyN2/1AFyKmINb8m1+Nq\nOCDn++q7lQeiBddmqFXFByS7QnACba7sjCWqw/+h4zZazKmso0aintT0CfhuY4Lw\nWLwnuffilVaNUQ+6Xy2TJaMxRyced0yTv6vZc6OsQSO3Flh9Dzuzn6ctVHww6YBn\nRX+jz++qqVpBIFvRSqJZnFd6NrbbUyHg9IExaYaUJO2eoOa7CqFGRF8tOsVOcqlQ\n8Ay+N4e5O5Tmh5OHtlOCyrJcqZtzLEjCtFztNvyGRVMT+6XimevBByKeTgcFhylj\n4wsbBGp63eQmq1Ldr28Y9wpIHvPvlx2skBrM/zlbxKXcc7CpftQcbIEJ0Za/YDC7\niRDp/qwZv6UUw38Lh0VFWBaUTFVUGDKQ3zEnFUYOM7U15QpvWmdVkvXi3VUr81rk\nfQTZT9dOqPHlwGLCjNlcsKOwQk5W3cf7QO2kxSFGvcvOQbZfJwwI9tFMboAb6Mdn\nq6W+ztVPMa6tAs4lyu6vAISF1h+TEO2fHBhfYvBwqdkx7xn/0ToZrHxVRw60Y5R8\nMyGi0yotF17oku2q0f6jwk/rwffwRuWuE2gn8UwTAXpS/8j+0CE=\n=d/7c\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/418b7995ddfbc88764f1f0ceabf8993808b08bd8",
          "sha": "418b7995ddfbc88764f1f0ceabf8993808b08bd8",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/418b7995ddfbc88764f1f0ceabf8993808b08bd8"
        }
      ],
      "message": "mining: fix -blockreservedweight shadows IPC option\n\nThe -blockreservedweight startup option should only affect RPC code,\nbecause IPC clients (currently) do not have a way to signal their intent\nto use the node default (the BlockCreateOptions struct defaults\nmerely document a recommendation for client software).\n\nBefore this commit however, if the user set -blockreservedweight\nthen ApplyArgsManOptions would cause the block_reserved_weight\noption passed by IPC clients to be ignored. Users who don't set\nthis value were not affected.\n\nFix this by making BlockCreateOptions::block_reserved_weight an\nstd::optional.\n\nInternal interface users, such as the RPC call sites, don't set a\nvalue so -blockreservedweight is used. Whereas IPC clients do set\na value which is no longer ignored.\n\nTest coverage is added.\n\nmining_basic.py already ensured -blockreservedweight is enforced by\nmining RPC methods. This commit adds coverage for Mining interface IPC\nclients. It also verifies that -blockreservedweight has no effect on\nthem.\n\nCo-Authored-By: Russell Yanofsky <russ@yanofsky.org>",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2026-02-07T12:57:33Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2025-12-19T21:18:33Z"
      },
      "sha": "d3e49528d479613ebe50088d530a621861463fa4"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGI2MjNmYWIxYmE4N2VhOTNkZDdlMzAyYjhjOTI3ZTU1ZjIwMzYxNzM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b623fab1ba87ea93dd7e302b8c927e55f2036173",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b623fab1ba87ea93dd7e302b8c927e55f2036173",
      "tree": {
        "sha": "ef05699011fec5a4e3a7cf2faa7dce4b23b8189a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ef05699011fec5a4e3a7cf2faa7dce4b23b8189a"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree ef05699011fec5a4e3a7cf2faa7dce4b23b8189a\nparent d3e49528d479613ebe50088d530a621861463fa4\nauthor Sjors Provoost <sjors@sprovoost.nl> 1770468618 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1770469053 +0100\n\nmining: enforce minimum reserved weight for IPC\n\nPreviously a lower value was silently clamped to MINIMUM_BLOCK_RESERVED_WEIGHT.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmmHNr0ACgkQV/+b28ww\nEAkAVRAAuMFg5lU4P+uazE2b9HwmejVKXEz4XcleWJ55zfxHEDY++5ztgcRHVqye\nhqwiEqJBgCiGyd3zo6r7taEVcDOFWMuXie70rlzxWNkkOAoTafFa0m900531nf96\nrS78TzeiUP4KHtEcpueWhLgTM8P2L1Rbo5UyA5J9rhowcKUUnF3AFCddx8YIN+Ow\nVeWh4t7ot9iKXwKRmACAde5Dn7peS40Bra0OZmxKZWcyvgW2gZIik1hsHpct4WW/\nvd0BOPvjZ+5JHQPzTphaik3+Doe/WNAbvBCg7efEOs3PJa8r4+KcHjRwe2EjpcNP\n9bcQkAoXDASCb5lphZLXb5oxmaA/dBIsKGEUUw3JwLxpEi77YaScV4GHvibX4fJT\nxx2yWnr3+u2c6e0idJyU9UL1OzOOzcpTNlHAoKto48Jf+q1qV7LMey6R3e/IPErL\nOtnK293ADj2672AAPocGxtlOaBkEYELEznnP0rkF0eDzC5sDgi5EZEC5oMqAcE6d\nc+tU0EWuJul2820xb47MsZb3A+YMLUEhpiEGQOhAKiG7mR61WF+UnmJlV+ml8jr1\n4IEnagprzxxfDnhkc+gV6y4gJBcxxTs1U0Z/yhhm4cAaHVZIQfr3QyXHF5b66Ddr\nQvJPdSDjZhDDBfu6lVlbtDNNGFl+vnd7va5mWWNg/xeomtU1mz8=\n=O+79\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d3e49528d479613ebe50088d530a621861463fa4",
          "sha": "d3e49528d479613ebe50088d530a621861463fa4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d3e49528d479613ebe50088d530a621861463fa4"
        }
      ],
      "message": "mining: enforce minimum reserved weight for IPC\n\nPreviously a lower value was silently clamped to MINIMUM_BLOCK_RESERVED_WEIGHT.",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2026-02-07T12:57:33Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2026-02-07T12:50:18Z"
      },
      "sha": "b623fab1ba87ea93dd7e302b8c927e55f2036173"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22609644038,
      "node_id": "HRFPE_lADOABII587bC5ADzwAAAAVDo8oG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22609644038",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "b623fab1ba87ea93dd7e302b8c927e55f2036173",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/b623fab1ba87ea93dd7e302b8c927e55f2036173",
      "created_at": "2026-02-07T13:03:53Z"
    },
    {
      "event": "commented",
      "id": 3864484926,
      "node_id": "IC_kwDOABII587mV1w-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3864484926",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-07T13:03:58Z",
      "updated_at": "2026-02-07T13:14:28Z",
      "author_association": "MEMBER",
      "body": "Rebased after #34452 and addressed feedback when it was a small change.\r\n\r\nUse `git range-diff` for the non-test changes, but you may want to review the tests from scratch given then churn from #34452, and because I split out `run_ipc_option_override_test` as requested.\r\n\r\nI want to keep this PR limited to fixing the bug, so I'll take the more involved feedback with me to #33966.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#issuecomment-3864484926",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33965"
    },
    {
      "event": "reviewed",
      "id": 3767162890,
      "node_id": "PRR_kwDOABII587gilgK",
      "url": null,
      "actor": null,
      "commit_id": "b623fab1ba87ea93dd7e302b8c927e55f2036173",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-07T14:24:38Z",
      "author_association": "CONTRIBUTOR",
      "body": "Re-ACK b623fab1ba87ea93dd7e302b8c927e55f2036173",
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#pullrequestreview-3767162890",
      "submitted_at": "2026-02-07T14:24:38Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
    },
    {
      "event": "review_requested",
      "id": 22610391060,
      "node_id": "RRE_lADOABII587bC5ADzwAAAAVDrzAU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22610391060",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-07T14:24:42Z",
      "requested_reviewer": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "review_requested",
      "id": 22610391199,
      "node_id": "RRE_lADOABII587bC5ADzwAAAAVDrzCf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22610391199",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-07T14:24:43Z",
      "requested_reviewer": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2571759611",
      "pull_request_review_id": 3519087203,
      "id": 2571759611,
      "node_id": "PRRC_kwDOABII586ZSe_7",
      "diff_hunk": "@@ -871,7 +878,9 @@ static RPCHelpMan getblocktemplate()\n         time_start = GetTime();\n \n         // Create new block\n-        block_template = miner.createNewBlock();\n+        block_template = miner.createNewBlock({\n+            .block_reserved_weight = size_t(node.args->GetIntArg(\"-blockreservedweight\", DEFAULT_BLOCK_RESERVED_WEIGHT))",
      "path": "src/rpc/mining.cpp",
      "position": 1,
      "original_position": 71,
      "commit_id": "46d901c253107ffba14ddce6c3154b46bd471fc2",
      "original_commit_id": "46d901c253107ffba14ddce6c3154b46bd471fc2",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The big refactor in #33966 simplifies this to `node.mining_args.default_block_reserved_weight`. But using `GetIntArg` directly here is easier to backport.",
      "created_at": "2025-11-28T13:52:22Z",
      "updated_at": "2025-11-28T15:43:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2571759611",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2571759611"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 882,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2580623784",
      "pull_request_review_id": 3529430938,
      "id": 2580623784,
      "node_id": "PRRC_kwDOABII586Z0TGo",
      "diff_hunk": "@@ -871,7 +878,9 @@ static RPCHelpMan getblocktemplate()\n         time_start = GetTime();\n \n         // Create new block\n-        block_template = miner.createNewBlock();\n+        block_template = miner.createNewBlock({\n+            .block_reserved_weight = size_t(node.args->GetIntArg(\"-blockreservedweight\", DEFAULT_BLOCK_RESERVED_WEIGHT))",
      "path": "src/rpc/mining.cpp",
      "position": 1,
      "original_position": 71,
      "commit_id": "46d901c253107ffba14ddce6c3154b46bd471fc2",
      "original_commit_id": "46d901c253107ffba14ddce6c3154b46bd471fc2",
      "in_reply_to_id": 2571759611,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The latest push leaves RPC code untouched.",
      "created_at": "2025-12-02T10:42:51Z",
      "updated_at": "2025-12-02T10:42:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2580623784",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2580623784"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 882,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2581818910",
      "pull_request_review_id": 3530907741,
      "id": 2581818910,
      "node_id": "PRRC_kwDOABII586Z424e",
      "diff_hunk": "@@ -78,11 +78,14 @@ void RegenerateCommitments(CBlock& block, ChainstateManager& chainman)\n \n static BlockAssembler::Options ClampOptions(BlockAssembler::Options options)\n {\n-    options.block_reserved_weight = std::clamp<size_t>(options.block_reserved_weight, MINIMUM_BLOCK_RESERVED_WEIGHT, MAX_BLOCK_WEIGHT);\n+    // Typically block_reserved_weight is set by ApplyArgsManOptions before\n+    // the constructor calls this; value_or(DEFAULT_BLOCK_RESERVED_WEIGHT) only\n+    // affects (test) call sites that don't go through the Mining interface.\n+    options.block_reserved_weight = std::clamp<size_t>(options.block_reserved_weight.value_or(DEFAULT_BLOCK_RESERVED_WEIGHT), MINIMUM_BLOCK_RESERVED_WEIGHT, MAX_BLOCK_WEIGHT);",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 8,
      "commit_id": "4d686142e079765cd31851481deb70659a9e9376",
      "original_commit_id": "1f2f4ab9d3fbdd3071810fa78a17563df3f56f91",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: add getCoinbase()\" (73553c809ef6517839c4d1b02b657e6fa401f8a8)\n\nIs there any particular reason to apply DEFAULT_BLOCK_RESERVED_WEIGHT in ApplyArgsManOptions? It would seem better to leave the option unset if the argument is unset, and only apply the default one place instead of two.\n\nWould suggest:\n\n```diff\n--- a/src/node/miner.cpp\n+++ b/src/node/miner.cpp\n@@ -78,9 +78,6 @@ void RegenerateCommitments(CBlock& block, ChainstateManager& chainman)\n \n static BlockAssembler::Options ClampOptions(BlockAssembler::Options options)\n {\n-    // Typically block_reserved_weight is set by ApplyArgsManOptions before\n-    // the constructor calls this; value_or(DEFAULT_BLOCK_RESERVED_WEIGHT) only\n-    // affects (test) call sites that don't go through the Mining interface.\n     options.block_reserved_weight = std::clamp<size_t>(options.block_reserved_weight.value_or(DEFAULT_BLOCK_RESERVED_WEIGHT), MINIMUM_BLOCK_RESERVED_WEIGHT, MAX_BLOCK_WEIGHT);\n     options.coinbase_output_max_additional_sigops = std::clamp<size_t>(options.coinbase_output_max_additional_sigops, 0, MAX_BLOCK_SIGOPS_COST);\n     // Limit weight to between block_reserved_weight and MAX_BLOCK_WEIGHT for sanity:\n@@ -106,7 +103,7 @@ void ApplyArgsManOptions(const ArgsManager& args, BlockAssembler::Options& optio\n     }\n     options.print_modified_fee = args.GetBoolArg(\"-printpriority\", options.print_modified_fee);\n     if (!options.block_reserved_weight) {\n-        options.block_reserved_weight = args.GetIntArg(\"-blockreservedweight\", DEFAULT_BLOCK_RESERVED_WEIGHT);\n+        options.block_reserved_weight = args.GetIntArg(\"-blockreservedweight\");\n     }\n }\n \n```",
      "created_at": "2025-12-02T15:57:45Z",
      "updated_at": "2025-12-02T17:08:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2581818910",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2581818910"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": 81,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 84,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2581852549",
      "pull_request_review_id": 3530907741,
      "id": 2581852549,
      "node_id": "PRRC_kwDOABII586Z4_GF",
      "diff_hunk": "@@ -41,8 +42,10 @@ struct BlockCreateOptions {\n     /**\n      * The default reserved weight for the fixed-size block header,\n      * transaction count and coinbase transaction.\n+     *\n+     * Not optional for IPC clients.",
      "path": "src/node/types.h",
      "position": 1,
      "original_position": 13,
      "commit_id": "1f2f4ab9d3fbdd3071810fa78a17563df3f56f91",
      "original_commit_id": "1f2f4ab9d3fbdd3071810fa78a17563df3f56f91",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: fix -blockreservedweight shadows IPC option\" (1f2f4ab9d3fbdd3071810fa78a17563df3f56f91)\n\nMight be good to clarify this to say something like \"Cap'n Proto IPC clients do not currently have a way of leaving this field unset and will always provide a value.\"\n\nOtherwise it sounds likes requiring a value is actually intentional. Also documenting an optional field as not optional sounds contradictory and is potentially confusing.",
      "created_at": "2025-12-02T16:04:43Z",
      "updated_at": "2025-12-02T17:08:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2581852549",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2581852549"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2582425482",
      "pull_request_review_id": 3531660835,
      "id": 2582425482,
      "node_id": "PRRC_kwDOABII586Z7K-K",
      "diff_hunk": "@@ -78,11 +78,14 @@ void RegenerateCommitments(CBlock& block, ChainstateManager& chainman)\n \n static BlockAssembler::Options ClampOptions(BlockAssembler::Options options)\n {\n-    options.block_reserved_weight = std::clamp<size_t>(options.block_reserved_weight, MINIMUM_BLOCK_RESERVED_WEIGHT, MAX_BLOCK_WEIGHT);\n+    // Typically block_reserved_weight is set by ApplyArgsManOptions before\n+    // the constructor calls this; value_or(DEFAULT_BLOCK_RESERVED_WEIGHT) only\n+    // affects (test) call sites that don't go through the Mining interface.\n+    options.block_reserved_weight = std::clamp<size_t>(options.block_reserved_weight.value_or(DEFAULT_BLOCK_RESERVED_WEIGHT), MINIMUM_BLOCK_RESERVED_WEIGHT, MAX_BLOCK_WEIGHT);",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 8,
      "commit_id": "4d686142e079765cd31851481deb70659a9e9376",
      "original_commit_id": "1f2f4ab9d3fbdd3071810fa78a17563df3f56f91",
      "in_reply_to_id": 2581818910,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Since `-blockreservedweight` has a default value, I don't think the absence of this setting should behave any different from when the user manually sets it to the default. This makes that intention clear.\r\n\r\nIt also makes the transition to `ApplyMiningDefaults` in https://github.com/bitcoin/bitcoin/pull/33966/commits/5f3e67efddd2a8a8743bb19765a5b38755d3f460 simpler, because `default_block_max_weight` and `default_block_reserved_weight` on `MiningArgs` are _not_ optionals. That's for the same reason: both `-blockreservedweight` and `-maxblockweight` have a default value.",
      "created_at": "2025-12-02T18:45:08Z",
      "updated_at": "2025-12-02T18:45:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2582425482",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2582425482"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": 81,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 84,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2582434748",
      "pull_request_review_id": 3531671992,
      "id": 2582434748,
      "node_id": "PRRC_kwDOABII586Z7NO8",
      "diff_hunk": "@@ -41,8 +42,10 @@ struct BlockCreateOptions {\n     /**\n      * The default reserved weight for the fixed-size block header,\n      * transaction count and coinbase transaction.\n+     *\n+     * Not optional for IPC clients.",
      "path": "src/node/types.h",
      "position": 1,
      "original_position": 13,
      "commit_id": "1f2f4ab9d3fbdd3071810fa78a17563df3f56f91",
      "original_commit_id": "1f2f4ab9d3fbdd3071810fa78a17563df3f56f91",
      "in_reply_to_id": 2581852549,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I took the suggested message.",
      "created_at": "2025-12-02T18:48:27Z",
      "updated_at": "2025-12-02T18:48:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2582434748",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2582434748"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2586089447",
      "pull_request_review_id": 3536257630,
      "id": 2586089447,
      "node_id": "PRRC_kwDOABII586aJJfn",
      "diff_hunk": "@@ -78,11 +78,14 @@ void RegenerateCommitments(CBlock& block, ChainstateManager& chainman)\n \n static BlockAssembler::Options ClampOptions(BlockAssembler::Options options)\n {\n-    options.block_reserved_weight = std::clamp<size_t>(options.block_reserved_weight, MINIMUM_BLOCK_RESERVED_WEIGHT, MAX_BLOCK_WEIGHT);\n+    // Typically block_reserved_weight is set by ApplyArgsManOptions before\n+    // the constructor calls this; value_or(DEFAULT_BLOCK_RESERVED_WEIGHT) only\n+    // affects (test) call sites that don't go through the Mining interface.\n+    options.block_reserved_weight = std::clamp<size_t>(options.block_reserved_weight.value_or(DEFAULT_BLOCK_RESERVED_WEIGHT), MINIMUM_BLOCK_RESERVED_WEIGHT, MAX_BLOCK_WEIGHT);",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 8,
      "commit_id": "4d686142e079765cd31851481deb70659a9e9376",
      "original_commit_id": "1f2f4ab9d3fbdd3071810fa78a17563df3f56f91",
      "in_reply_to_id": 2581818910,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2582425482\r\n\r\nYes that makes sense. I completely agree `MiningArgs` in #33966 should not use `std::optional` and that PR is correctly applying `DEFAULT_BLOCK_RESERVED_WEIGHT` in one place at the `ArgsMan` level, not the mining interface level.\r\n\r\nI just don't think the implementation of this PR should be muddled in anticipation of #33966 before `MiningArgs` is introduced. In this PR, it makes sense to apply `DEFAULT_BLOCK_RESERVED_WEIGHT` at the mining interface level, not the `ArgsMan` level, so it is applied once instead of twice, and there are not separate test-only and nontest code paths. I also think that `nullopt` is a better way to represent an unset setting in a field that is `std::optional`.\r\n\r\nSo I still think suggested diff above would be a nice simplification for this PR. Not important though, since #33966 should clean everything up in the end.",
      "created_at": "2025-12-03T17:52:13Z",
      "updated_at": "2025-12-03T18:23:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2586089447",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2586089447"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": 81,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 84,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2586111251",
      "pull_request_review_id": 3536257630,
      "id": 2586111251,
      "node_id": "PRRC_kwDOABII586aJO0T",
      "diff_hunk": "@@ -57,6 +63,9 @@ def set_test_params(self):\n \n     def setup_nodes(self):\n         self.extra_init = [{\"ipcbind\": True}, {}]\n+        # The -blockreservedweight startup option has no effect on IPC clients.\n+        # Templates generated via RPC will be empty.",
      "path": "test/functional/interface_ipc.py",
      "position": 1,
      "original_position": 20,
      "commit_id": "4d686142e079765cd31851481deb70659a9e9376",
      "original_commit_id": "4d686142e079765cd31851481deb70659a9e9376",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: fix -blockreservedweight shadows IPC option\" (4d686142e079765cd31851481deb70659a9e9376)\r\n\r\nMaybe update the comment to say this is being set to a high value to confirm that the -blockreservedweight option has no effect (IIUC). Current comment raises question of why the test is going out of its way to set an option that has no effect.",
      "created_at": "2025-12-03T17:59:20Z",
      "updated_at": "2025-12-03T18:23:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2586111251",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2586111251"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": 66,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 67,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2586162219",
      "pull_request_review_id": 3536257630,
      "id": 2586162219,
      "node_id": "PRRC_kwDOABII586aJbQr",
      "diff_hunk": "@@ -210,6 +221,13 @@ async def interrupt_wait():\n             await interrupt_task\n             assert_equal(result.to_dict(), {})\n \n+            # Use absurdly large reserved weight to force an empty template\n+            opts.blockReservedWeight = 4000000",
      "path": "test/functional/interface_ipc.py",
      "position": 1,
      "original_position": 39,
      "commit_id": "4d686142e079765cd31851481deb70659a9e9376",
      "original_commit_id": "4d686142e079765cd31851481deb70659a9e9376",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: fix -blockreservedweight shadows IPC option\" (4d686142e079765cd31851481deb70659a9e9376)\r\n\r\nUse MAX_BLOCK_WEIGHT constant?",
      "created_at": "2025-12-03T18:17:09Z",
      "updated_at": "2025-12-03T18:23:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2586162219",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2586162219"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 225,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2586171036",
      "pull_request_review_id": 3536257630,
      "id": 2586171036,
      "node_id": "PRRC_kwDOABII586aJdac",
      "diff_hunk": "@@ -170,6 +179,8 @@ async def async_routine():\n             waitnext = template2.result.waitNext(ctx, waitoptions)\n             miniwallet.send_self_transfer(fee_rate=10, from_node=self.nodes[0])\n             template4 = await waitnext\n+            # Ensure it did not timeout\n+            assert_not_equal(template4.to_dict(), {})",
      "path": "test/functional/interface_ipc.py",
      "position": 1,
      "original_position": 30,
      "commit_id": "54d3054db129d4dd5aaf9faa3f6e6922159059b0",
      "original_commit_id": "4d686142e079765cd31851481deb70659a9e9376",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: fix -blockreservedweight shadows IPC option\" (4d686142e079765cd31851481deb70659a9e9376)\r\n\r\nNote: I guess if it did timeout you would get a confusing server error about trying to call a method on a null capability, so this error should be clearer",
      "created_at": "2025-12-03T18:20:27Z",
      "updated_at": "2025-12-03T18:23:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2586171036",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2586171036"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": 182,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 183,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2588964479",
      "pull_request_review_id": 3539882397,
      "id": 2588964479,
      "node_id": "PRRC_kwDOABII586aUHZ_",
      "diff_hunk": "@@ -78,11 +78,14 @@ void RegenerateCommitments(CBlock& block, ChainstateManager& chainman)\n \n static BlockAssembler::Options ClampOptions(BlockAssembler::Options options)\n {\n-    options.block_reserved_weight = std::clamp<size_t>(options.block_reserved_weight, MINIMUM_BLOCK_RESERVED_WEIGHT, MAX_BLOCK_WEIGHT);\n+    // Typically block_reserved_weight is set by ApplyArgsManOptions before\n+    // the constructor calls this; value_or(DEFAULT_BLOCK_RESERVED_WEIGHT) only\n+    // affects (test) call sites that don't go through the Mining interface.\n+    options.block_reserved_weight = std::clamp<size_t>(options.block_reserved_weight.value_or(DEFAULT_BLOCK_RESERVED_WEIGHT), MINIMUM_BLOCK_RESERVED_WEIGHT, MAX_BLOCK_WEIGHT);",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 8,
      "commit_id": "4d686142e079765cd31851481deb70659a9e9376",
      "original_commit_id": "1f2f4ab9d3fbdd3071810fa78a17563df3f56f91",
      "in_reply_to_id": 2581818910,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Ok, done and I rebased #33966 on that change. ",
      "created_at": "2025-12-04T12:53:41Z",
      "updated_at": "2025-12-04T12:53:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2588964479",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2588964479"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": 81,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 84,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2634157318",
      "pull_request_review_id": 3597500126,
      "id": 2634157318,
      "node_id": "PRRC_kwDOABII586dAg0G",
      "diff_hunk": "@@ -963,6 +963,11 @@ class MinerImpl : public Mining\n \n     std::unique_ptr<BlockTemplate> createNewBlock(const BlockCreateOptions& options) override\n     {\n+        // Enfore minimum block_reserved_weight to avoid silently clamping it",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "6d7c3ee3fa2c5942d715a8690ef181d6b305ff33",
      "original_commit_id": "6d7c3ee3fa2c5942d715a8690ef181d6b305ff33",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "from the LLM:\n\n\n    Enfore -> Enforce [misspelling in comment \"Enfore minimum block_reserved_weight...\" makes the word invalid]\n    wait -> weight [comment \"Enforce minimum reserved wait for IPC clients too\" should say \"reserved weight\" to match intended meaning]\n",
      "created_at": "2025-12-19T08:22:00Z",
      "updated_at": "2025-12-19T08:22:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2634157318",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2634157318"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 966,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2634269532",
      "pull_request_review_id": 3597641180,
      "id": 2634269532,
      "node_id": "PRRC_kwDOABII586dA8Nc",
      "diff_hunk": "@@ -963,6 +963,11 @@ class MinerImpl : public Mining\n \n     std::unique_ptr<BlockTemplate> createNewBlock(const BlockCreateOptions& options) override\n     {\n+        // Enfore minimum block_reserved_weight to avoid silently clamping it",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "6d7c3ee3fa2c5942d715a8690ef181d6b305ff33",
      "original_commit_id": "6d7c3ee3fa2c5942d715a8690ef181d6b305ff33",
      "in_reply_to_id": 2634157318,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "How many LLM's does it take to fix a typo? :-)\r\n<img width=\"525\" height=\"649\" alt=\"SchermÂ­afbeelding 2025-12-19 om 16 59 50\" src=\"https://github.com/user-attachments/assets/4e8bb667-3217-4dc1-a74e-b83410114ba4\" />\r\n",
      "created_at": "2025-12-19T09:01:55Z",
      "updated_at": "2025-12-19T09:01:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2634269532",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2634269532"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 966,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2669840669",
      "pull_request_review_id": 3636519762,
      "id": 2669840669,
      "node_id": "PRRC_kwDOABII586fIokd",
      "diff_hunk": "@@ -41,7 +41,7 @@ struct BlockCreateOptions {\n     bool use_mempool{true};\n     /**\n      * The default reserved weight for the fixed-size block header,\n-     * transaction count and coinbase transaction.\n+     * transaction count and coinbase transaction. Minimum: 2000 weight units.",
      "path": "src/node/types.h",
      "position": 1,
      "original_position": 5,
      "commit_id": "31325c1782e542601b3de8bd8bafe0af372830e9",
      "original_commit_id": "31325c1782e542601b3de8bd8bafe0af372830e9",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: fix -blockreservedweight shadows IPC option\" (336826ad0e70978783dcc0777ad1f01d3dbc1698)\n\nMaybe update the comment to say \"2000 weight units (MINIMUM_BLOCK_RESERVED_WEIGHT)\". This would be helpful when grepping the constant and seeing how it is used & what may need to be updated if it changes.",
      "created_at": "2026-01-07T19:40:38Z",
      "updated_at": "2026-01-07T20:28:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2669840669",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2669840669"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 44,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2669876321",
      "pull_request_review_id": 3636519762,
      "id": 2669876321,
      "node_id": "PRRC_kwDOABII586fIxRh",
      "diff_hunk": "@@ -963,6 +963,11 @@ class MinerImpl : public Mining\n \n     std::unique_ptr<BlockTemplate> createNewBlock(const BlockCreateOptions& options) override\n     {\n+        // Enforce minimum block_reserved_weight to avoid silently clamping it\n+        if (options.block_reserved_weight && options.block_reserved_weight < MINIMUM_BLOCK_RESERVED_WEIGHT) {\n+            return {};\n+        }",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 7,
      "commit_id": "31325c1782e542601b3de8bd8bafe0af372830e9",
      "original_commit_id": "31325c1782e542601b3de8bd8bafe0af372830e9",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: fix -blockreservedweight shadows IPC option\" (336826ad0e70978783dcc0777ad1f01d3dbc1698)\n\nIt would seem better to raise an exception with an error message here instead of returning null, since this probably indicates a programming error, and it would be helpful to callers to know what specifically is wrong. (Also, this method is only currently documented to return null on shutdown.)\n\nSeparately, it would also would be good to enforce this limit in the mining code instead of the interfaces code, so all the limits are enforced in one place. But this could be something for the followup #33966",
      "created_at": "2026-01-07T19:53:57Z",
      "updated_at": "2026-01-07T20:28:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2669876321",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2669876321"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": 966,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 969,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2669916481",
      "pull_request_review_id": 3636519762,
      "id": 2669916481,
      "node_id": "PRRC_kwDOABII586fI7FB",
      "diff_hunk": "@@ -222,6 +231,8 @@ async def async_routine():\n                 template4 = await wait_and_do(\n                     wait_next_template(template2, stack, ctx, waitoptions),\n                     lambda: miniwallet.send_self_transfer(fee_rate=10, from_node=self.nodes[0]))\n+                # Before bitcoin/bitcoin#33965 this would timeout due to -blockreservedweight\n+                # shadowing our waitoptions.blockReservedWeight.",
      "path": "test/functional/interface_ipc.py",
      "position": 1,
      "original_position": 30,
      "commit_id": "336826ad0e70978783dcc0777ad1f01d3dbc1698",
      "original_commit_id": "336826ad0e70978783dcc0777ad1f01d3dbc1698",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: fix -blockreservedweight shadows IPC option\" (336826ad0e70978783dcc0777ad1f01d3dbc1698)\r\n\r\nWould suggest deleting this comment because it's confusing to reference past behavior here. Instead I think it would be better to expand the \"Set an absurd reserved weight\" comment above. It can say the test confirms that the `-blockreservedweight` value is ignored by sending a transaction that would not fit with in a template with a huge reserved weight, and confirming the transaction does appear.",
      "created_at": "2026-01-07T20:05:29Z",
      "updated_at": "2026-01-07T20:28:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2669916481",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2669916481"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 235,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2669945960",
      "pull_request_review_id": 3636519762,
      "id": 2669945960,
      "node_id": "PRRC_kwDOABII586fJCRo",
      "diff_hunk": "@@ -963,6 +963,11 @@ class MinerImpl : public Mining\n \n     std::unique_ptr<BlockTemplate> createNewBlock(const BlockCreateOptions& options) override\n     {\n+        // Enforce minimum block_reserved_weight to avoid silently clamping it",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "31325c1782e542601b3de8bd8bafe0af372830e9",
      "original_commit_id": "31325c1782e542601b3de8bd8bafe0af372830e9",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: enforce minimum reserved weight for IPC\" (31325c1782e542601b3de8bd8bafe0af372830e9)\r\n\r\nCould comment mention why this wants to reject a lower value instead of clamping it? I saw previous discussion https://github.com/stratum-mining/sv2-tp/pull/51 but couldn't really follow it.\r\n\r\nI would agree in general explicitly enforcing a limit is better than silently changing a value, but was wondering if there's some more specific problem which led to this change?\r\n\r\n",
      "created_at": "2026-01-07T20:16:10Z",
      "updated_at": "2026-01-07T20:28:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2669945960",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2669945960"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 966,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2670657377",
      "pull_request_review_id": 3637455334,
      "id": 2670657377,
      "node_id": "PRRC_kwDOABII586fLv9h",
      "diff_hunk": "@@ -963,6 +963,11 @@ class MinerImpl : public Mining\n \n     std::unique_ptr<BlockTemplate> createNewBlock(const BlockCreateOptions& options) override\n     {\n+        // Enforce minimum block_reserved_weight to avoid silently clamping it",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "31325c1782e542601b3de8bd8bafe0af372830e9",
      "original_commit_id": "31325c1782e542601b3de8bd8bafe0af372830e9",
      "in_reply_to_id": 2669945960,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I initially thought that `block_reserved_weight` wasn't clamped via IPC, and that there was no minimum enforced. But now I think it's better to just enforce the same limit as we do for `-blockreservedweight` (and do so through an error, not clamping). \r\n\r\nI guess the specific problem was confusion over the different behaviours.",
      "created_at": "2026-01-08T02:33:51Z",
      "updated_at": "2026-01-08T02:33:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2670657377",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2670657377"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 966,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2670707327",
      "pull_request_review_id": 3637504191,
      "id": 2670707327,
      "node_id": "PRRC_kwDOABII586fL8J_",
      "diff_hunk": "@@ -222,6 +231,8 @@ async def async_routine():\n                 template4 = await wait_and_do(\n                     wait_next_template(template2, stack, ctx, waitoptions),\n                     lambda: miniwallet.send_self_transfer(fee_rate=10, from_node=self.nodes[0]))\n+                # Before bitcoin/bitcoin#33965 this would timeout due to -blockreservedweight\n+                # shadowing our waitoptions.blockReservedWeight.",
      "path": "test/functional/interface_ipc.py",
      "position": 1,
      "original_position": 30,
      "commit_id": "336826ad0e70978783dcc0777ad1f01d3dbc1698",
      "original_commit_id": "336826ad0e70978783dcc0777ad1f01d3dbc1698",
      "in_reply_to_id": 2669916481,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done, and expanded the comment at the top.",
      "created_at": "2026-01-08T03:10:43Z",
      "updated_at": "2026-01-08T03:10:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2670707327",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2670707327"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 235,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2670707457",
      "pull_request_review_id": 3637504290,
      "id": 2670707457,
      "node_id": "PRRC_kwDOABII586fL8MB",
      "diff_hunk": "@@ -963,6 +963,11 @@ class MinerImpl : public Mining\n \n     std::unique_ptr<BlockTemplate> createNewBlock(const BlockCreateOptions& options) override\n     {\n+        // Enforce minimum block_reserved_weight to avoid silently clamping it\n+        if (options.block_reserved_weight && options.block_reserved_weight < MINIMUM_BLOCK_RESERVED_WEIGHT) {\n+            return {};\n+        }",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 7,
      "commit_id": "31325c1782e542601b3de8bd8bafe0af372830e9",
      "original_commit_id": "31325c1782e542601b3de8bd8bafe0af372830e9",
      "in_reply_to_id": 2669876321,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Added the exception. Followup is implemented in the other PR.",
      "created_at": "2026-01-08T03:10:47Z",
      "updated_at": "2026-01-08T03:55:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2670707457",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2670707457"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": 966,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 969,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2672134276",
      "pull_request_review_id": 3639147442,
      "id": 2672134276,
      "node_id": "PRRC_kwDOABII586fRYiE",
      "diff_hunk": "@@ -272,6 +272,15 @@ async def wait_for_block():\n                 assert empty_template is not None\n                 block = await self.parse_and_deserialize_block(empty_template, ctx)\n                 assert_equal(len(block.vtx), 1)\n+\n+                self.log.debug(\"Enforce minimum reserved weight for IPC clients too\")\n+                opts.blockReservedWeight = 0\n+                try:\n+                    await mining.createNewBlock(opts)\n+                    raise AssertionError(\"createNewBlock unexpectedly succeeded\")\n+                except Exception as e:",
      "path": "test/functional/interface_ipc.py",
      "position": 1,
      "original_position": 10,
      "commit_id": "d3db5285989f7b3fef7436a37ce928065be2804e",
      "original_commit_id": "d3db5285989f7b3fef7436a37ce928065be2804e",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: enforce minimum reserved weight for IPC\" (d3db5285989f7b3fef7436a37ce928065be2804e)\n\nMight be nice to make exception more specific to expected error like:\n\n```diff\n--- a/test/functional/interface_ipc.py\n+++ b/test/functional/interface_ipc.py\n@@ -278,8 +278,9 @@ class IPCInterfaceTest(BitcoinTestFramework):\n                 try:\n                     await mining.createNewBlock(opts)\n                     raise AssertionError(\"createNewBlock unexpectedly succeeded\")\n-                except Exception as e:\n-                    assert \"must be at least\" in str(e)\n+                except capnp.lib.capnp.KjException as e:\n+                    assert_equal(e.description, \"remote exception: std::exception: block_reserved_weight (0) must be at least 2000 weight units\")\n+                    assert_equal(e.type, \"FAILED\")\n \n                 # Restore opts\n                 opts.blockReservedWeight = 4000\n```\n",
      "created_at": "2026-01-08T12:19:31Z",
      "updated_at": "2026-01-08T12:24:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2672134276",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2672134276"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 281,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2674551851",
      "pull_request_review_id": 3642060539,
      "id": 2674551851,
      "node_id": "PRRC_kwDOABII586famwr",
      "diff_hunk": "@@ -272,6 +272,15 @@ async def wait_for_block():\n                 assert empty_template is not None\n                 block = await self.parse_and_deserialize_block(empty_template, ctx)\n                 assert_equal(len(block.vtx), 1)\n+\n+                self.log.debug(\"Enforce minimum reserved weight for IPC clients too\")\n+                opts.blockReservedWeight = 0\n+                try:\n+                    await mining.createNewBlock(opts)\n+                    raise AssertionError(\"createNewBlock unexpectedly succeeded\")\n+                except Exception as e:",
      "path": "test/functional/interface_ipc.py",
      "position": 1,
      "original_position": 10,
      "commit_id": "d3db5285989f7b3fef7436a37ce928065be2804e",
      "original_commit_id": "d3db5285989f7b3fef7436a37ce928065be2804e",
      "in_reply_to_id": 2672134276,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done",
      "created_at": "2026-01-09T02:04:02Z",
      "updated_at": "2026-01-09T02:04:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2674551851",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2674551851"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 281,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749261839",
      "pull_request_review_id": 3732124561,
      "id": 2749261839,
      "node_id": "PRRC_kwDOABII586j3mgP",
      "diff_hunk": "@@ -102,13 +103,15 @@ void ApplyArgsManOptions(const ArgsManager& args, BlockAssembler::Options& optio\n         if (const auto parsed{ParseMoney(*blockmintxfee)}) options.blockMinFeeRate = CFeeRate{*parsed};\n     }\n     options.print_modified_fee = args.GetBoolArg(\"-printpriority\", options.print_modified_fee);\n-    options.block_reserved_weight = args.GetIntArg(\"-blockreservedweight\", options.block_reserved_weight);\n+    if (!options.block_reserved_weight) {\n+        options.block_reserved_weight = args.GetIntArg(\"-blockreservedweight\");\n+    }\n }\n \n void BlockAssembler::resetBlock()\n {\n     // Reserve space for fixed-size block header, txs count, and coinbase tx.\n-    nBlockWeight = m_options.block_reserved_weight;\n+    nBlockWeight = *m_options.block_reserved_weight;",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "8bc1cb77fada68796c9599a04a66025a4b53ddab",
      "original_commit_id": "f69320d3279e2abe1e5d47f496ad54deb4c20fcf",
      "in_reply_to_id": null,
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Nit: Should we sprinkle in an `Assert(` here?",
      "created_at": "2026-01-31T09:31:27Z",
      "updated_at": "2026-01-31T09:40:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2749261839",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749261839"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 114,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749269557",
      "pull_request_review_id": 3732124561,
      "id": 2749269557,
      "node_id": "PRRC_kwDOABII586j3oY1",
      "diff_hunk": "@@ -969,6 +970,16 @@ class MinerImpl : public Mining\n \n     std::unique_ptr<BlockTemplate> createNewBlock(const BlockCreateOptions& options) override\n     {\n+        // Reject too-small values instead of clamping so callers don't silently\n+        // end up mining with different options than requested. This matches the\n+        // behavior of the `-blockreservedweight` startup option, which rejects\n+        // values below MINIMUM_BLOCK_RESERVED_WEIGHT.\n+        if (options.block_reserved_weight && options.block_reserved_weight < MINIMUM_BLOCK_RESERVED_WEIGHT) {",
      "path": "src/node/interfaces.cpp",
      "position": 16,
      "original_position": 16,
      "commit_id": "b623fab1ba87ea93dd7e302b8c927e55f2036173",
      "original_commit_id": "8bc1cb77fada68796c9599a04a66025a4b53ddab",
      "in_reply_to_id": null,
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Just a question: Is there a good reason to only enforce the minimum here?",
      "created_at": "2026-01-31T09:40:13Z",
      "updated_at": "2026-01-31T09:40:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2749269557",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749269557"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 977,
      "original_line": 977,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754332045",
      "pull_request_review_id": 3739393889,
      "id": 2754332045,
      "node_id": "PRRC_kwDOABII586kK8WN",
      "diff_hunk": "@@ -55,11 +55,17 @@ async def destroying(obj, ctx):\n \n async def create_block_template(mining, stack, ctx, opts):\n     \"\"\"Call mining.createNewBlock() and return template, then call template.destroy() when stack exits.\"\"\"\n-    return await stack.enter_async_context(destroying((await mining.createNewBlock(opts)).result, ctx))",
      "path": "test/functional/interface_ipc.py",
      "position": 1,
      "original_position": 4,
      "commit_id": "8bf30b371379532a4d2c8e7414a1595a89002c71",
      "original_commit_id": "8bf30b371379532a4d2c8e7414a1595a89002c71",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In \"test: have {create_block,wait_next}_template return None\" 8bf30b371379532a4d2c8e7414a1595a89002c71\r\n\r\nIs there a realistic scenario where the template returned by create_block_template is None?\r\n",
      "created_at": "2026-02-02T13:27:56Z",
      "updated_at": "2026-02-02T16:11:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2754332045",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754332045"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 58,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754598961",
      "pull_request_review_id": 3739393889,
      "id": 2754598961,
      "node_id": "PRRC_kwDOABII586kL9gx",
      "diff_hunk": "@@ -78,11 +78,12 @@ void RegenerateCommitments(CBlock& block, ChainstateManager& chainman)\n \n static BlockAssembler::Options ClampOptions(BlockAssembler::Options options)\n {\n-    options.block_reserved_weight = std::clamp<size_t>(options.block_reserved_weight, MINIMUM_BLOCK_RESERVED_WEIGHT, MAX_BLOCK_WEIGHT);\n+    // Apply DEFAULT_BLOCK_RESERVED_WEIGHT when the caller left it unset.",
      "path": "src/node/miner.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "b623fab1ba87ea93dd7e302b8c927e55f2036173",
      "original_commit_id": "f69320d3279e2abe1e5d47f496ad54deb4c20fcf",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In \"mining: fix -blockreservedweight shadows IPC option\" f69320d3279e2abe1e5d47f496ad54deb4c20fcf\n\nWhy make the distinction between RPC and IPC clients?\n\nThe narrative of this commit should rather be future proof and changed to: it can be overridded by runtime via the IPC or RPC.\n",
      "created_at": "2026-02-02T14:23:50Z",
      "updated_at": "2026-02-02T16:11:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2754598961",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754598961"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 81,
      "original_line": 81,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754834524",
      "pull_request_review_id": 3739393889,
      "id": 2754834524,
      "node_id": "PRRC_kwDOABII586kM3Bc",
      "diff_hunk": "@@ -125,6 +126,11 @@ def set_test_params(self):\n \n     def setup_nodes(self):\n         self.extra_init = [{\"ipcbind\": True}, {}]\n+        # Set an absurd reserved weight. `-blockreservedweight` is RPC-only, so\n+        # with this setting RPC templates would be empty. IPC clients set\n+        # blockReservedWeight per template request and are unaffected; later in\n+        # the test the IPC template includes a mempool transaction.\n+        self.extra_args =[{f\"-blockreservedweight={MAX_BLOCK_WEIGHT}\"}, {}]",
      "path": "test/functional/interface_ipc.py",
      "position": 1,
      "original_position": 23,
      "commit_id": "f69320d3279e2abe1e5d47f496ad54deb4c20fcf",
      "original_commit_id": "f69320d3279e2abe1e5d47f496ad54deb4c20fcf",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In \"mining: fix -blockreservedweight shadows IPC option\"  f69320d3279e2abe1e5d47f496ad54deb4c20fcf\n\nThis seems like a weird way to test this.\nIt would be better if we didn't generalise here and had a separate subtest for this.\n\n```diff\ndiff --git a/test/functional/interface_ipc.py b/test/functional/interface_ipc.py\nindex 02f3e0dd35d..677244e1a44 100755\n--- a/test/functional/interface_ipc.py\n+++ b/test/functional/interface_ipc.py\n@@ -126,11 +126,6 @@ class IPCInterfaceTest(BitcoinTestFramework):\n\n     def setup_nodes(self):\n         self.extra_init = [{\"ipcbind\": True}, {}]\n-        # Set an absurd reserved weight. `-blockreservedweight` is RPC-only, so\n-        # with this setting RPC templates would be empty. IPC clients set\n-        # blockReservedWeight per template request and are unaffected; later in\n-        # the test the IPC template includes a mempool transaction.\n-        self.extra_args =[{f\"-blockreservedweight={MAX_BLOCK_WEIGHT}\"}, {}]\n         super().setup_nodes()\n         # Use this function to also load the capnp modules (we cannot use set_test_params for this,\n         # as it is being called before knowing whether capnp is available).\n@@ -250,7 +245,6 @@ class IPCInterfaceTest(BitcoinTestFramework):\n         block_hash_size = 32\n         block_header_size = 80\n         timeout = 1000.0 # 1000 milliseconds\n-        miniwallet = MiniWallet(self.nodes[0])\n\n         async def async_routine():\n             ctx, init = await self.make_capnp_init_ctx()\n@@ -318,7 +312,7 @@ class IPCInterfaceTest(BitcoinTestFramework):\n                 self.log.debug(\"Wait for another, get one after increase in fees in the mempool\")\n                 template4 = await wait_and_do(\n                     wait_next_template(template2, stack, ctx, waitoptions),\n-                    lambda: miniwallet.send_self_transfer(fee_rate=10, from_node=self.nodes[0]))\n+                    lambda: self.miniwallet.send_self_transfer(fee_rate=10, from_node=self.nodes[0]))\n                 assert template4 is not None\n                 block3 = await self.parse_and_deserialize_block(template4, ctx)\n                 assert_equal(len(block3.vtx), 2)\n@@ -334,7 +328,7 @@ class IPCInterfaceTest(BitcoinTestFramework):\n                 self.log.debug(\"Wait for another, get one after increase in fees in the mempool\")\n                 template6 = await wait_and_do(\n                     wait_next_template(template5, stack, ctx, waitoptions),\n-                    lambda: miniwallet.send_self_transfer(fee_rate=10, from_node=self.nodes[0]))\n+                    lambda: self.miniwallet.send_self_transfer(fee_rate=10, from_node=self.nodes[0]))\n                 assert template6 is not None\n                 block4 = await self.parse_and_deserialize_block(template6, ctx)\n                 assert_equal(len(block4.vtx), 3)\n@@ -352,21 +346,12 @@ class IPCInterfaceTest(BitcoinTestFramework):\n                     assert template7 is None\n                 await wait_and_do(wait_for_block(), template6.interruptWait())\n\n-                self.log.debug(\"Use absurdly large reserved weight to force an empty template\")\n-                opts.blockReservedWeight = MAX_BLOCK_WEIGHT\n-                empty_template = await create_block_template(mining, stack, ctx, opts)\n-                assert empty_template is not None\n-                block = await self.parse_and_deserialize_block(empty_template, ctx)\n-                assert_equal(len(block.vtx), 1)\n-                # Restore opts\n-                opts.blockReservedWeight = 4000\n-\n             current_block_height = self.nodes[0].getchaintips()[0][\"height\"]\n             check_opts = self.capnp_modules['mining'].BlockCheckOptions()\n             async with destroying((await mining.createNewBlock(opts)).result, ctx) as template:\n                 block = await self.parse_and_deserialize_block(template, ctx)\n-                balance = miniwallet.get_balance()\n-                coinbase = await self.build_coinbase_test(template, ctx, miniwallet)\n+                balance = self.miniwallet.get_balance()\n+                coinbase = await self.build_coinbase_test(template, ctx, self.miniwallet)\n                 # Reduce payout for balance comparison simplicity\n                 coinbase.vout[0].nValue = COIN\n                 block.vtx[0] = coinbase\n@@ -414,8 +399,8 @@ class IPCInterfaceTest(BitcoinTestFramework):\n             # Check that the other node accepts the block\n             assert_equal(self.nodes[0].getchaintips()[0], self.nodes[1].getchaintips()[0])\n\n-            miniwallet.rescan_utxos()\n-            assert_equal(miniwallet.get_balance(), balance + 1)\n+            self.miniwallet.rescan_utxos()\n+            assert_equal(self.miniwallet.get_balance(), balance + 1)\n             self.log.debug(\"Check block should fail now, since it is a duplicate\")\n             check = await mining.checkBlock(block.serialize(), check_opts)\n             assert_equal(check.result, False)\n@@ -423,9 +408,40 @@ class IPCInterfaceTest(BitcoinTestFramework):\n\n         asyncio.run(capnp.run(async_routine()))\n\n+    def run_ipc_option_test(self):\n+        self.log.debug(\"Test that IPC blockReservedReight runtime value will override startup -blockreservedweight\")\n+        # The absurd blockreservedweight startup option should not force us to have empty blocks when\n+        # a lower value is added is passed via the IPC.\n+        self.restart_node(0, extra_args=[f\"-blockreservedweight={MAX_BLOCK_WEIGHT}\"])\n+        async def async_routine():\n+            ctx, init = await self.make_capnp_init_ctx()\n+            mining = init.makeMining(ctx).result\n+            async with AsyncExitStack() as stack:\n+                opts = self.capnp_modules['mining'].BlockCreateOptions()\n+                opts.useMempool = True\n+                opts.blockReservedWeight = 4000\n+                opts.coinbaseOutputMaxAdditionalSigops = 0\n+                self.miniwallet.send_self_transfer(fee_rate=10, from_node=self.nodes[0])\n+                template = await create_block_template(mining, stack, ctx, opts)\n+                assert template is not None\n+                block = await self.parse_and_deserialize_block(template, ctx)\n+                assert_equal(len(block.vtx), 2)\n+                self.log.debug(\"Use absurdly large reserved weight to force an empty template\")\n+                opts.blockReservedWeight = MAX_BLOCK_WEIGHT\n+                empty_template = await create_block_template(mining, stack, ctx, opts)\n+                assert empty_template is not None\n+                block = await self.parse_and_deserialize_block(empty_template, ctx)\n+                assert_equal(len(block.vtx), 1)\n+\n+        asyncio.run(capnp.run(async_routine()))\n+\n+\n     def run_test(self):\n+        self.miniwallet = MiniWallet(self.nodes[0])\n         self.run_echo_test()\n         self.run_mining_test()\n+        self.run_ipc_option_test()\n+\n\n if __name__ == '__main__':\n     IPCInterfaceTest(__file__).main()\n```",
      "created_at": "2026-02-02T15:10:42Z",
      "updated_at": "2026-02-02T16:11:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2754834524",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754834524"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": 129,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 133,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754858079",
      "pull_request_review_id": 3739393889,
      "id": 2754858079,
      "node_id": "PRRC_kwDOABII586kM8xf",
      "diff_hunk": "@@ -969,6 +970,16 @@ class MinerImpl : public Mining\n \n     std::unique_ptr<BlockTemplate> createNewBlock(const BlockCreateOptions& options) override\n     {\n+        // Reject too-small values instead of clamping so callers don't silently\n+        // end up mining with different options than requested. This matches the\n+        // behavior of the `-blockreservedweight` startup option, which rejects\n+        // values below MINIMUM_BLOCK_RESERVED_WEIGHT.\n+        if (options.block_reserved_weight && options.block_reserved_weight < MINIMUM_BLOCK_RESERVED_WEIGHT) {",
      "path": "src/node/interfaces.cpp",
      "position": 16,
      "original_position": 16,
      "commit_id": "b623fab1ba87ea93dd7e302b8c927e55f2036173",
      "original_commit_id": "8bc1cb77fada68796c9599a04a66025a4b53ddab",
      "in_reply_to_id": 2749269557,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Agreed, since the rationale is to match the startup option checks, it should be verified as well.",
      "created_at": "2026-02-02T15:15:01Z",
      "updated_at": "2026-02-02T16:11:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2754858079",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754858079"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 977,
      "original_line": 977,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754868641",
      "pull_request_review_id": 3739393889,
      "id": 2754868641,
      "node_id": "PRRC_kwDOABII586kM_Wh",
      "diff_hunk": "@@ -969,6 +970,16 @@ class MinerImpl : public Mining\n \n     std::unique_ptr<BlockTemplate> createNewBlock(const BlockCreateOptions& options) override\n     {\n+        // Reject too-small values instead of clamping so callers don't silently\n+        // end up mining with different options than requested. This matches the\n+        // behavior of the `-blockreservedweight` startup option, which rejects\n+        // values below MINIMUM_BLOCK_RESERVED_WEIGHT.\n+        if (options.block_reserved_weight && options.block_reserved_weight < MINIMUM_BLOCK_RESERVED_WEIGHT) {",
      "path": "src/node/interfaces.cpp",
      "position": 16,
      "original_position": 16,
      "commit_id": "b623fab1ba87ea93dd7e302b8c927e55f2036173",
      "original_commit_id": "8bc1cb77fada68796c9599a04a66025a4b53ddab",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In \"mining: enforce minimum reserved weight for IPC\" 8bc1cb77fada68796c9599a04a66025a4b53ddab\n\nThe interface implementation has a goal of not having implementation code in here, since we are doing this, perhaps it's time to have a wrapper for all this.\n\nwhich should include https://github.com/bitcoin/bitcoin/pull/33965/changes/8bc1cb77fada68796c9599a04a66025a4b53ddab#r2749269557 suggestion and any other future additions?\n",
      "created_at": "2026-02-02T15:17:16Z",
      "updated_at": "2026-02-02T16:11:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2754868641",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754868641"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 977,
      "original_line": 977,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754953884",
      "pull_request_review_id": 3739393889,
      "id": 2754953884,
      "node_id": "PRRC_kwDOABII586kNUKc",
      "diff_hunk": "@@ -44,8 +44,11 @@ struct BlockCreateOptions {\n     /**\n      * The default reserved weight for the fixed-size block header,\n      * transaction count and coinbase transaction.\n+     *\n+     * Cap'n Proto IPC clients do not currently have a way of leaving this field\n+     * unset and will always provide a value.",
      "path": "src/node/types.h",
      "position": 1,
      "original_position": 6,
      "commit_id": "f69320d3279e2abe1e5d47f496ad54deb4c20fcf",
      "original_commit_id": "f69320d3279e2abe1e5d47f496ad54deb4c20fcf",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In \"mining: fix -blockreservedweight shadows IPC option\" f69320d3279e2abe1e5d47f496ad54deb4c20fcf\nI think you should add a comment documenting the new behaviour \n\"Providing a value to `block_reserved_weight` will override the startup default\"",
      "created_at": "2026-02-02T15:35:51Z",
      "updated_at": "2026-02-02T16:11:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2754953884",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754953884"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 49,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2770642910",
      "pull_request_review_id": 3758773296,
      "id": 2770642910,
      "node_id": "PRRC_kwDOABII586lJKfe",
      "diff_hunk": "@@ -78,11 +78,12 @@ void RegenerateCommitments(CBlock& block, ChainstateManager& chainman)\n \n static BlockAssembler::Options ClampOptions(BlockAssembler::Options options)\n {\n-    options.block_reserved_weight = std::clamp<size_t>(options.block_reserved_weight, MINIMUM_BLOCK_RESERVED_WEIGHT, MAX_BLOCK_WEIGHT);\n+    // Apply DEFAULT_BLOCK_RESERVED_WEIGHT when the caller left it unset.",
      "path": "src/node/miner.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "b623fab1ba87ea93dd7e302b8c927e55f2036173",
      "original_commit_id": "f69320d3279e2abe1e5d47f496ad54deb4c20fcf",
      "in_reply_to_id": 2754598961,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2754598961\r\n\r\n> In \"mining: fix -blockreservedweight shadows IPC option\" [f69320d](https://github.com/bitcoin/bitcoin/commit/f69320d3279e2abe1e5d47f496ad54deb4c20fcf)\r\n> \r\n> Why make the distinction between RPC and IPC clients?\r\n> \r\n> The narrative of this commit should rather be future proof and changed to: it can be overridded by runtime via the IPC or RPC.\r\n\r\nThe commit description is just describing what the commit is changing, which is only IPC clients. The IPC and RPC interfaces are different, with IPC clients currently required to specify `block_reserved_weight` and RPC clients not able to specify it at all.\r\n\r\nRPC behavior is unchanged by this commit. IPC behavior is just being changed so the IPC value is applied instead of ignored when the `-blockreservedweight` config option is used.",
      "created_at": "2026-02-05T18:54:14Z",
      "updated_at": "2026-02-05T19:19:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2770642910",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2770642910"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 81,
      "original_line": 81,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2770646371",
      "pull_request_review_id": 3758773296,
      "id": 2770646371,
      "node_id": "PRRC_kwDOABII586lJLVj",
      "diff_hunk": "@@ -44,8 +44,11 @@ struct BlockCreateOptions {\n     /**\n      * The default reserved weight for the fixed-size block header,\n      * transaction count and coinbase transaction.\n+     *\n+     * Cap'n Proto IPC clients do not currently have a way of leaving this field\n+     * unset and will always provide a value.",
      "path": "src/node/types.h",
      "position": 1,
      "original_position": 6,
      "commit_id": "f69320d3279e2abe1e5d47f496ad54deb4c20fcf",
      "original_commit_id": "f69320d3279e2abe1e5d47f496ad54deb4c20fcf",
      "in_reply_to_id": 2754953884,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2754953884\r\n\r\nAgree it would seem nice to say that when this is unset the `-blockreservedweight` configuration value is used",
      "created_at": "2026-02-05T18:55:20Z",
      "updated_at": "2026-02-05T19:19:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2770646371",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2770646371"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 49,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2770647980",
      "pull_request_review_id": 3758773296,
      "id": 2770647980,
      "node_id": "PRRC_kwDOABII586lJLus",
      "diff_hunk": "@@ -125,6 +126,11 @@ def set_test_params(self):\n \n     def setup_nodes(self):\n         self.extra_init = [{\"ipcbind\": True}, {}]\n+        # Set an absurd reserved weight. `-blockreservedweight` is RPC-only, so\n+        # with this setting RPC templates would be empty. IPC clients set\n+        # blockReservedWeight per template request and are unaffected; later in\n+        # the test the IPC template includes a mempool transaction.\n+        self.extra_args =[{f\"-blockreservedweight={MAX_BLOCK_WEIGHT}\"}, {}]",
      "path": "test/functional/interface_ipc.py",
      "position": 1,
      "original_position": 23,
      "commit_id": "f69320d3279e2abe1e5d47f496ad54deb4c20fcf",
      "original_commit_id": "f69320d3279e2abe1e5d47f496ad54deb4c20fcf",
      "in_reply_to_id": 2754834524,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2754834524\r\n\r\nAgree it would be nice to use a separate test",
      "created_at": "2026-02-05T18:55:54Z",
      "updated_at": "2026-02-05T19:19:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2770647980",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2770647980"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": 129,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 133,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2770658410",
      "pull_request_review_id": 3758773296,
      "id": 2770658410,
      "node_id": "PRRC_kwDOABII586lJORq",
      "diff_hunk": "@@ -55,11 +55,17 @@ async def destroying(obj, ctx):\n \n async def create_block_template(mining, stack, ctx, opts):\n     \"\"\"Call mining.createNewBlock() and return template, then call template.destroy() when stack exits.\"\"\"\n-    return await stack.enter_async_context(destroying((await mining.createNewBlock(opts)).result, ctx))",
      "path": "test/functional/interface_ipc.py",
      "position": 1,
      "original_position": 4,
      "commit_id": "8bf30b371379532a4d2c8e7414a1595a89002c71",
      "original_commit_id": "8bf30b371379532a4d2c8e7414a1595a89002c71",
      "in_reply_to_id": 2754332045,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2754332045\r\n\r\n> Is there a realistic scenario where the template returned by create_block_template is None?\r\n\r\nThis could happen either when the node is shutting down of if the future `interrupt` method from #34184 is called\r\n\r\n",
      "created_at": "2026-02-05T18:58:53Z",
      "updated_at": "2026-02-05T19:19:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2770658410",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2770658410"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 58,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2770676817",
      "pull_request_review_id": 3758773296,
      "id": 2770676817,
      "node_id": "PRRC_kwDOABII586lJSxR",
      "diff_hunk": "@@ -969,6 +970,16 @@ class MinerImpl : public Mining\n \n     std::unique_ptr<BlockTemplate> createNewBlock(const BlockCreateOptions& options) override\n     {\n+        // Reject too-small values instead of clamping so callers don't silently\n+        // end up mining with different options than requested. This matches the\n+        // behavior of the `-blockreservedweight` startup option, which rejects\n+        // values below MINIMUM_BLOCK_RESERVED_WEIGHT.\n+        if (options.block_reserved_weight && options.block_reserved_weight < MINIMUM_BLOCK_RESERVED_WEIGHT) {",
      "path": "src/node/interfaces.cpp",
      "position": 16,
      "original_position": 16,
      "commit_id": "b623fab1ba87ea93dd7e302b8c927e55f2036173",
      "original_commit_id": "8bc1cb77fada68796c9599a04a66025a4b53ddab",
      "in_reply_to_id": 2749269557,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2754858079\r\n\r\n> Agreed, since the rationale is to match the startup option checks, it should be verified as well.\r\n\r\nMaybe this check could be expanded but followup #33966 should unify this with startup checks in init.cpp: \r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/28d860788286ec31981f5509a8cbe6a9ba4cddc5/src/init.cpp#L1071-L1077",
      "created_at": "2026-02-05T19:02:51Z",
      "updated_at": "2026-02-05T19:20:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2770676817",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2770676817"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 977,
      "original_line": 977,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2770686848",
      "pull_request_review_id": 3758773296,
      "id": 2770686848,
      "node_id": "PRRC_kwDOABII586lJVOA",
      "diff_hunk": "@@ -969,6 +970,16 @@ class MinerImpl : public Mining\n \n     std::unique_ptr<BlockTemplate> createNewBlock(const BlockCreateOptions& options) override\n     {\n+        // Reject too-small values instead of clamping so callers don't silently\n+        // end up mining with different options than requested. This matches the\n+        // behavior of the `-blockreservedweight` startup option, which rejects\n+        // values below MINIMUM_BLOCK_RESERVED_WEIGHT.\n+        if (options.block_reserved_weight && options.block_reserved_weight < MINIMUM_BLOCK_RESERVED_WEIGHT) {",
      "path": "src/node/interfaces.cpp",
      "position": 16,
      "original_position": 16,
      "commit_id": "b623fab1ba87ea93dd7e302b8c927e55f2036173",
      "original_commit_id": "8bc1cb77fada68796c9599a04a66025a4b53ddab",
      "in_reply_to_id": 2754868641,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2754868641\r\n\r\n> The interface implementation has a goal of not having implementation code in here, since we are doing this, perhaps it's time to have a wrapper for all this.\r\n\r\nThis should be happening in followup #33966 which unifies the startup & ipc checks.",
      "created_at": "2026-02-05T19:05:14Z",
      "updated_at": "2026-02-05T19:19:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2770686848",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2770686848"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 977,
      "original_line": 977,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2777484478",
      "pull_request_review_id": 3766943031,
      "id": 2777484478,
      "node_id": "PRRC_kwDOABII586ljQy-",
      "diff_hunk": "@@ -969,6 +970,16 @@ class MinerImpl : public Mining\n \n     std::unique_ptr<BlockTemplate> createNewBlock(const BlockCreateOptions& options) override\n     {\n+        // Reject too-small values instead of clamping so callers don't silently\n+        // end up mining with different options than requested. This matches the\n+        // behavior of the `-blockreservedweight` startup option, which rejects\n+        // values below MINIMUM_BLOCK_RESERVED_WEIGHT.\n+        if (options.block_reserved_weight && options.block_reserved_weight < MINIMUM_BLOCK_RESERVED_WEIGHT) {",
      "path": "src/node/interfaces.cpp",
      "position": 16,
      "original_position": 16,
      "commit_id": "b623fab1ba87ea93dd7e302b8c927e55f2036173",
      "original_commit_id": "8bc1cb77fada68796c9599a04a66025a4b53ddab",
      "in_reply_to_id": 2749269557,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I'll look into this for the followup.",
      "created_at": "2026-02-07T12:22:44Z",
      "updated_at": "2026-02-07T12:22:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2777484478",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2777484478"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 977,
      "original_line": 977,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2777485095",
      "pull_request_review_id": 3766943932,
      "id": 2777485095,
      "node_id": "PRRC_kwDOABII586ljQ8n",
      "diff_hunk": "@@ -102,13 +103,15 @@ void ApplyArgsManOptions(const ArgsManager& args, BlockAssembler::Options& optio\n         if (const auto parsed{ParseMoney(*blockmintxfee)}) options.blockMinFeeRate = CFeeRate{*parsed};\n     }\n     options.print_modified_fee = args.GetBoolArg(\"-printpriority\", options.print_modified_fee);\n-    options.block_reserved_weight = args.GetIntArg(\"-blockreservedweight\", options.block_reserved_weight);\n+    if (!options.block_reserved_weight) {\n+        options.block_reserved_weight = args.GetIntArg(\"-blockreservedweight\");\n+    }\n }\n \n void BlockAssembler::resetBlock()\n {\n     // Reserve space for fixed-size block header, txs count, and coinbase tx.\n-    nBlockWeight = m_options.block_reserved_weight;\n+    nBlockWeight = *m_options.block_reserved_weight;",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "8bc1cb77fada68796c9599a04a66025a4b53ddab",
      "original_commit_id": "f69320d3279e2abe1e5d47f496ad54deb4c20fcf",
      "in_reply_to_id": 2749261839,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Sprinkled.",
      "created_at": "2026-02-07T12:23:19Z",
      "updated_at": "2026-02-07T12:23:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2777485095",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2777485095"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 114,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2777510373",
      "pull_request_review_id": 3767007163,
      "id": 2777510373,
      "node_id": "PRRC_kwDOABII586ljXHl",
      "diff_hunk": "@@ -125,6 +126,11 @@ def set_test_params(self):\n \n     def setup_nodes(self):\n         self.extra_init = [{\"ipcbind\": True}, {}]\n+        # Set an absurd reserved weight. `-blockreservedweight` is RPC-only, so\n+        # with this setting RPC templates would be empty. IPC clients set\n+        # blockReservedWeight per template request and are unaffected; later in\n+        # the test the IPC template includes a mempool transaction.\n+        self.extra_args =[{f\"-blockreservedweight={MAX_BLOCK_WEIGHT}\"}, {}]",
      "path": "test/functional/interface_ipc.py",
      "position": 1,
      "original_position": 23,
      "commit_id": "f69320d3279e2abe1e5d47f496ad54deb4c20fcf",
      "original_commit_id": "f69320d3279e2abe1e5d47f496ad54deb4c20fcf",
      "in_reply_to_id": 2754834524,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "It's in the spirit of #34452 to continue to split this, so I added `run_ipc_option_override_test`.",
      "created_at": "2026-02-07T12:51:57Z",
      "updated_at": "2026-02-07T12:51:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2777510373",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2777510373"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": 129,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 133,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2777515380",
      "pull_request_review_id": 3767018927,
      "id": 2777515380,
      "node_id": "PRRC_kwDOABII586ljYV0",
      "diff_hunk": "@@ -44,8 +44,11 @@ struct BlockCreateOptions {\n     /**\n      * The default reserved weight for the fixed-size block header,\n      * transaction count and coinbase transaction.\n+     *\n+     * Cap'n Proto IPC clients do not currently have a way of leaving this field\n+     * unset and will always provide a value.",
      "path": "src/node/types.h",
      "position": 1,
      "original_position": 6,
      "commit_id": "f69320d3279e2abe1e5d47f496ad54deb4c20fcf",
      "original_commit_id": "f69320d3279e2abe1e5d47f496ad54deb4c20fcf",
      "in_reply_to_id": 2754953884,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I updated the comment.",
      "created_at": "2026-02-07T12:57:29Z",
      "updated_at": "2026-02-07T12:57:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33965#discussion_r2777515380",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2777515380"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33965"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 49,
      "side": "RIGHT"
    }
  ]
}