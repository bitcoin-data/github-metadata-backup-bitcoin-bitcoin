{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032",
    "id": 3084582953,
    "node_id": "PR_kwDOABII58632wAp",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/34032",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/34032.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/34032.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34032",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34032/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/faebb1654743adcc5888464f9a7167c315ecce1f",
    "number": 34032,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "util: Add some more Unexpected and Expected methods",
    "user": {
      "login": "maflcko",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/maflcko",
      "html_url": "https://github.com/maflcko",
      "followers_url": "https://api.github.com/users/maflcko/followers",
      "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
      "organizations_url": "https://api.github.com/users/maflcko/orgs",
      "repos_url": "https://api.github.com/users/maflcko/repos",
      "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/maflcko/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "body": "Reviewers requested more member functions In https://github.com/bitcoin/bitcoin/pull/34006.\r\n\r\nThey are currently unused, but bring the port closer to the original `std::expected` implementation:\r\n\r\n* Make `Expected::value()` throw when no value exists\r\n* Add `Unexpected::error()` methods\r\n* Add `Expected<void, E>` specialization\r\n* Add `Expected::value()&&` and `Expected::error()&&` methods\r\n* Add `Expected::swap()`\r\n\r\nAlso, include a tiny tidy fixup:\r\n\r\n* tidy: Set `AllowCastToVoid` in the `bugprone-unused-return-value` check",
    "labels": [
      {
        "id": 241832923,
        "node_id": "MDU6TGFiZWwyNDE4MzI5MjM=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Utils/log/libs",
        "name": "Utils/log/libs",
        "description": "",
        "color": "5319e7",
        "default": false
      }
    ],
    "created_at": "2025-12-09T08:01:34Z",
    "updated_at": "2026-01-15T14:39:16Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "1a1d9143b0543464e428fa45fc7c61f706c6a3d8",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "maflcko:2512-exp",
      "ref": "2512-exp",
      "sha": "faebb1654743adcc5888464f9a7167c315ecce1f",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 40046254,
        "node_id": "MDEwOlJlcG9zaXRvcnk0MDA0NjI1NA==",
        "name": "bitcoin-core",
        "full_name": "maflcko/bitcoin-core",
        "owner": {
          "login": "maflcko",
          "id": 6399679,
          "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
          "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/maflcko",
          "html_url": "https://github.com/maflcko",
          "followers_url": "https://api.github.com/users/maflcko/followers",
          "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
          "organizations_url": "https://api.github.com/users/maflcko/orgs",
          "repos_url": "https://api.github.com/users/maflcko/repos",
          "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/maflcko/received_events",
          "type": "User",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/maflcko/bitcoin-core",
        "fork": true,
        "url": "https://api.github.com/repos/maflcko/bitcoin-core",
        "archive_url": "https://api.github.com/repos/maflcko/bitcoin-core/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/maflcko/bitcoin-core/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/maflcko/bitcoin-core/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/maflcko/bitcoin-core/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/maflcko/bitcoin-core/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/maflcko/bitcoin-core/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/maflcko/bitcoin-core/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/maflcko/bitcoin-core/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/maflcko/bitcoin-core/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/maflcko/bitcoin-core/contributors",
        "deployments_url": "https://api.github.com/repos/maflcko/bitcoin-core/deployments",
        "downloads_url": "https://api.github.com/repos/maflcko/bitcoin-core/downloads",
        "events_url": "https://api.github.com/repos/maflcko/bitcoin-core/events",
        "forks_url": "https://api.github.com/repos/maflcko/bitcoin-core/forks",
        "git_commits_url": "https://api.github.com/repos/maflcko/bitcoin-core/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/maflcko/bitcoin-core/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/maflcko/bitcoin-core/git/tags%7B/sha%7D",
        "git_url": "git://github.com/maflcko/bitcoin-core.git",
        "issue_comment_url": "https://api.github.com/repos/maflcko/bitcoin-core/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/maflcko/bitcoin-core/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/maflcko/bitcoin-core/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/maflcko/bitcoin-core/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/maflcko/bitcoin-core/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/maflcko/bitcoin-core/languages",
        "merges_url": "https://api.github.com/repos/maflcko/bitcoin-core/merges",
        "milestones_url": "https://api.github.com/repos/maflcko/bitcoin-core/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/maflcko/bitcoin-core/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/maflcko/bitcoin-core/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/maflcko/bitcoin-core/releases%7B/id%7D",
        "ssh_url": "git@github.com:maflcko/bitcoin-core.git",
        "stargazers_url": "https://api.github.com/repos/maflcko/bitcoin-core/stargazers",
        "statuses_url": "https://api.github.com/repos/maflcko/bitcoin-core/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/maflcko/bitcoin-core/subscribers",
        "subscription_url": "https://api.github.com/repos/maflcko/bitcoin-core/subscription",
        "tags_url": "https://api.github.com/repos/maflcko/bitcoin-core/tags",
        "teams_url": "https://api.github.com/repos/maflcko/bitcoin-core/teams",
        "trees_url": "https://api.github.com/repos/maflcko/bitcoin-core/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/maflcko/bitcoin-core.git",
        "hooks_url": "https://api.github.com/repos/maflcko/bitcoin-core/hooks",
        "svn_url": "https://github.com/maflcko/bitcoin-core",
        "homepage": "",
        "language": "C++",
        "forks_count": 10,
        "stargazers_count": 25,
        "watchers_count": 25,
        "size": 268170,
        "default_branch": "master",
        "open_issues_count": 15,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-01-15T14:17:28Z",
        "created_at": "2015-08-01T12:42:47Z",
        "updated_at": "2025-11-12T21:28:40Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "ab513103df8d1cadd2cf23397a39c652f3a2a550",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 38704,
        "stargazers_count": 87661,
        "watchers_count": 87661,
        "size": 301913,
        "default_branch": "master",
        "open_issues_count": 744,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-01-15T14:29:19Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2026-01-15T14:59:41Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 146,
    "deletions": 40,
    "changed_files": 7,
    "commits": 8,
    "review_comments": 38,
    "comments": 3
  },
  "events": [
    {
      "event": "labeled",
      "id": 21446502215,
      "node_id": "LE_lADOABII587dHYzXzwAAAAT-T6dH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21446502215",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-09T08:01:37Z",
      "label": {
        "name": "Utils/log/libs",
        "color": "5319e7"
      }
    },
    {
      "event": "commented",
      "id": 3630886025,
      "node_id": "IC_kwDOABII587YauyJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3630886025",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-09T08:01:41Z",
      "updated_at": "2026-01-15T14:39:16Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34032.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [stickies-v](https://github.com/bitcoin/bitcoin/pull/34032#pullrequestreview-3626015857), [hodlinator](https://github.com/bitcoin/bitcoin/pull/34032#pullrequestreview-3631380557), [ryanofsky](https://github.com/bitcoin/bitcoin/pull/34032#pullrequestreview-3665716942) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#34264](https://github.com/bitcoin/bitcoin/pull/34264) (fuzz: Extend `spend` coverage by Chand-ra)\n* [#34208](https://github.com/bitcoin/bitcoin/pull/34208) (bench: add fluent API for untimed `setup` steps in nanobench by l0rinc)\n* [#33689](https://github.com/bitcoin/bitcoin/pull/33689) (http: replace WorkQueue and single threads handling for ThreadPool by furszy)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#issuecomment-3630886025",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34032"
    },
    {
      "event": "reviewed",
      "id": 3557331541,
      "node_id": "PRR_kwDOABII587UCJJV",
      "url": null,
      "actor": null,
      "commit_id": "fa4794dfeb9eddf703c9ea5c5a29433063038639",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-09T13:06:15Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#pullrequestreview-3557331541",
      "submitted_at": "2025-12-09T13:06:15Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
    },
    {
      "event": "reviewed",
      "id": 3557397355,
      "node_id": "PRR_kwDOABII587UCZNr",
      "url": null,
      "actor": null,
      "commit_id": "fa20a50f46307b45a82a6e4283a945ef2f9f92a2",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-09T13:19:06Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK fa20a50f46307b45a82a6e4283a945ef2f9f92a2. Thanks for the followups.\n\nI'd probably replace `std::variant<std::monostate, E>` with `std::optional<E>` but both seem reasonable.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#pullrequestreview-3557397355",
      "submitted_at": "2025-12-09T13:19:06Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
    },
    {
      "event": "commented",
      "id": 3632418418,
      "node_id": "IC_kwDOABII587Ygk5y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3632418418",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-09T14:00:08Z",
      "updated_at": "2025-12-09T14:00:08Z",
      "author_association": "MEMBER",
      "body": "> I'd probably replace `std::variant<std::monostate, E>` with `std::optional<E>` but both seem reasonable.\r\n\r\nI kept the variant, because it is more consistent and shows that the `error()` methods are just 1:1 copy-pasted between both templates.",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#issuecomment-3632418418",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34032"
    },
    {
      "event": "commented",
      "id": 3633196602,
      "node_id": "IC_kwDOABII587Yji46",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3633196602",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-09T16:38:26Z",
      "updated_at": "2025-12-09T16:38:26Z",
      "author_association": "MEMBER",
      "body": "pushed a commit, so that the two compile and behave identically:\r\n\r\n```cpp\r\n    const auto moved{*std::move(no_copy)};\r\n    const auto moved{std::move(*no_copy)};\r\n```\r\n\r\nSorry for missing it earlier, but I think now all `&&` methods are implemented completely and correctly.",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#issuecomment-3633196602",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34032"
    },
    {
      "event": "reviewed",
      "id": 3561476416,
      "node_id": "PRR_kwDOABII587UR9FA",
      "url": null,
      "actor": null,
      "commit_id": "fabef9bbef255796f28c04c5b478df9544c749eb",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-10T15:43:22Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK fabef9bbef255796f28c04c5b478df9544c749eb\r\n\r\n(Caveat: Not yet fully at ease with ampersands *after* the method parameters such as in the last two commits, example: `constexpr E&& error() &&`).",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#pullrequestreview-3561476416",
      "submitted_at": "2025-12-10T15:42:52Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
    },
    {
      "event": "review_requested",
      "id": 21482457641,
      "node_id": "RRE_lADOABII587dHYzXzwAAAAUAdEop",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21482457641",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-10T15:42:56Z",
      "requested_reviewer": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21483550368,
      "node_id": "HRFPE_lADOABII587dHYzXzwAAAAUAhPag",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21483550368",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "fa0a1a6a4986c1a977bbcd5f48834bedeac5dffb",
      "commit_url": "https://api.github.com/repos/maflcko/bitcoin-core/commits/fa0a1a6a4986c1a977bbcd5f48834bedeac5dffb",
      "created_at": "2025-12-10T16:29:36Z"
    },
    {
      "event": "reviewed",
      "id": 3563848843,
      "node_id": "PRR_kwDOABII587UbASL",
      "url": null,
      "actor": null,
      "commit_id": "fa0a1a6a4986c1a977bbcd5f48834bedeac5dffb",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-10T18:33:54Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK fa0a1a6a4986c1a977bbcd5f48834bedeac5dffb. Left some suggestions which I think would  make this better in significant ways, but I do this is already an improvement in its current form.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#pullrequestreview-3563848843",
      "submitted_at": "2025-12-10T18:33:54Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
    },
    {
      "event": "review_requested",
      "id": 21486102657,
      "node_id": "RRE_lADOABII587dHYzXzwAAAAUAq-iB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21486102657",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-10T18:33:59Z",
      "requested_reviewer": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZhZDRhOWZlMmI4ZDNhM2FhMDllY2E0ZjQ3ZTE3NDE5MTIzMjg3ODU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fad4a9fe2b8d3a3aa09eca4f47e1741912328785",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fad4a9fe2b8d3a3aa09eca4f47e1741912328785",
      "tree": {
        "sha": "eed4a28c3206f30d557b6742e886e0c91f762f9d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/eed4a28c3206f30d557b6742e886e0c91f762f9d"
      },
      "verification": {
        "verified": false,
        "reason": "no_user",
        "payload": "tree eed4a28c3206f30d557b6742e886e0c91f762f9d\nparent cca113f5b022b131a78579ab233d0d40643c7c2b\nauthor MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1765265082 +0100\ncommitter MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1765442806 +0100\n\nSet bugprone-unused-return-value.AllowCastToVoid\n\nIt only makes sense to turn this off with C++26, which introduces the _\nplaceholder.\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAgqxY/aMPiuXoCFn6iAEyAhvUqFX\njanTudd31Jtt35ct0AAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQA7D8u3SlBn8GxBxxMlOfMdT6uBPxG0r3cAQeyweQ+87vnGNSWG9a+H8VwdsTQgodQ\naXuv1pjWkdN/CXh5YxFAY=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cca113f5b022b131a78579ab233d0d40643c7c2b",
          "sha": "cca113f5b022b131a78579ab233d0d40643c7c2b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/cca113f5b022b131a78579ab233d0d40643c7c2b"
        }
      ],
      "message": "Set bugprone-unused-return-value.AllowCastToVoid\n\nIt only makes sense to turn this off with C++26, which introduces the _\nplaceholder.",
      "committer": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-12-11T08:46:46Z"
      },
      "author": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-12-09T07:24:42Z"
      },
      "sha": "fad4a9fe2b8d3a3aa09eca4f47e1741912328785"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZhYTEwOWY4YmU3ZmNhMTI1YzU1Y2E4NGU2YzBiYWY0MTRjNTlhZTY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/faa109f8be7fca125c55ca84e6c0baf414c59ae6",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/faa109f8be7fca125c55ca84e6c0baf414c59ae6",
      "tree": {
        "sha": "31f1b39247aceda9d044e0b558bbbff41a963a34",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/31f1b39247aceda9d044e0b558bbbff41a963a34"
      },
      "verification": {
        "verified": false,
        "reason": "no_user",
        "payload": "tree 31f1b39247aceda9d044e0b558bbbff41a963a34\nparent fad4a9fe2b8d3a3aa09eca4f47e1741912328785\nauthor MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1765384770 +0100\ncommitter MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1765442816 +0100\n\ntest: refactor: Use BOOST_CHECK_EQUAL over BOOST_CHECK ==\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAgqxY/aMPiuXoCFn6iAEyAhvUqFX\njanTudd31Jtt35ct0AAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQABrQyqR9PujjkFB4RxKtDRgBPbhXzFuktrq/8bKQIMJvxgNmkEBULYm4qlK5HPEPZ\nfKFszmAzW1H1EqQ7ubkAU=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fad4a9fe2b8d3a3aa09eca4f47e1741912328785",
          "sha": "fad4a9fe2b8d3a3aa09eca4f47e1741912328785",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/fad4a9fe2b8d3a3aa09eca4f47e1741912328785"
        }
      ],
      "message": "test: refactor: Use BOOST_CHECK_EQUAL over BOOST_CHECK ==",
      "committer": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-12-11T08:46:56Z"
      },
      "author": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-12-10T16:39:30Z"
      },
      "sha": "faa109f8be7fca125c55ca84e6c0baf414c59ae6"
    },
    {
      "event": "reviewed",
      "id": 3566334104,
      "node_id": "PRR_kwDOABII587UkfCY",
      "url": null,
      "actor": null,
      "commit_id": "fa0a1a6a4986c1a977bbcd5f48834bedeac5dffb",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-11T09:10:53Z",
      "author_association": "CONTRIBUTOR",
      "body": "re-ACK fa0a1a6a4986c1a977bbcd5f48834bedeac5dffb",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#pullrequestreview-3566334104",
      "submitted_at": "2025-12-11T09:10:53Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZhMWRlMTEwM2ZlNWQ5N2RkZGRjOWU0NTI4NmUzMjc1MTE1MWY4NTk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa1de1103fe5d97ddddc9e45286e32751151f859",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fa1de1103fe5d97ddddc9e45286e32751151f859",
      "tree": {
        "sha": "06695a5502e327faf379bd674989eec010eab46e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/06695a5502e327faf379bd674989eec010eab46e"
      },
      "verification": {
        "verified": false,
        "reason": "no_user",
        "payload": "tree 06695a5502e327faf379bd674989eec010eab46e\nparent faa109f8be7fca125c55ca84e6c0baf414c59ae6\nauthor MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1765266031 +0100\ncommitter MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1765445260 +0100\n\nutil: Add Unexpected::error()\n\nThis is not needed, but a bit closer to the std lib.\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAgqxY/aMPiuXoCFn6iAEyAhvUqFX\njanTudd31Jtt35ct0AAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQGksOIU3yDesia+GSWTE8exgkEChGcaGYX676wL6jWf5gnQAdvc6m/WTYhcL9L0Uyt\nolXUqBvfwmfpaPkixJ6As=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/faa109f8be7fca125c55ca84e6c0baf414c59ae6",
          "sha": "faa109f8be7fca125c55ca84e6c0baf414c59ae6",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/faa109f8be7fca125c55ca84e6c0baf414c59ae6"
        }
      ],
      "message": "util: Add Unexpected::error()\n\nThis is not needed, but a bit closer to the std lib.",
      "committer": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-12-11T09:27:40Z"
      },
      "author": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-12-09T07:40:31Z"
      },
      "sha": "fa1de1103fe5d97ddddc9e45286e32751151f859"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21499433223,
      "node_id": "HRFPE_lADOABII587dHYzXzwAAAAUBd1EH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21499433223",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "fa6fcae94bd12d8183909df1dc907403a383bdd2",
      "commit_url": "https://api.github.com/repos/maflcko/bitcoin-core/commits/fa6fcae94bd12d8183909df1dc907403a383bdd2",
      "created_at": "2025-12-11T09:30:03Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21499836603,
      "node_id": "HRFPE_lADOABII587dHYzXzwAAAAUBfXi7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21499836603",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "fa874c9f050500dc521ef8d9c81b043687f0dcc7",
      "commit_url": "https://api.github.com/repos/maflcko/bitcoin-core/commits/fa874c9f050500dc521ef8d9c81b043687f0dcc7",
      "created_at": "2025-12-11T09:47:42Z"
    },
    {
      "event": "labeled",
      "id": 21499848441,
      "node_id": "LE_lADOABII587dHYzXzwAAAAUBfab5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21499848441",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-11T09:48:14Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 3566738644,
      "node_id": "PRR_kwDOABII587UmBzU",
      "url": null,
      "actor": null,
      "commit_id": "fa874c9f050500dc521ef8d9c81b043687f0dcc7",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-11T10:43:41Z",
      "author_association": "CONTRIBUTOR",
      "body": "re-ACK fa874c9f050500dc521ef8d9c81b043687f0dcc7\r\n\r\nThanks for grabbing `swap`!",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#pullrequestreview-3566738644",
      "submitted_at": "2025-12-11T10:43:41Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
    },
    {
      "event": "review_requested",
      "id": 21501026088,
      "node_id": "RRE_lADOABII587dHYzXzwAAAAUBj58o",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21501026088",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-11T10:43:45Z",
      "requested_reviewer": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "unlabeled",
      "id": 21501505436,
      "node_id": "UNLE_lADOABII587dHYzXzwAAAAUBlu-c",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21501505436",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-11T11:08:14Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "review_requested",
      "id": 21563792952,
      "node_id": "RRE_lADOABII587dHYzXzwAAAAUFTV44",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21563792952",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-15T11:14:32Z",
      "requested_reviewer": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 3589136730,
      "node_id": "PRR_kwDOABII587V7eFa",
      "url": null,
      "actor": null,
      "commit_id": "fa874c9f050500dc521ef8d9c81b043687f0dcc7",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-17T19:13:28Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review fa874c9f050500dc521ef8d9c81b043687f0dcc7. Looks mostly good and thanks for considering the previous suggestions. One thing that I think may be a problem is use of throwing `value()` method in operator methods declared `noexcept` but I left a more detailed comment below.\n\nVarious changes were made since last review: renaming m_err, getting rid of Assume() in value(), testing void value() specialization, adding noexcepts, adding method `&` qualifiers, reformatting and using `std::get_if`, adding `swap` method.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#pullrequestreview-3589136730",
      "submitted_at": "2025-12-17T19:13:28Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
    },
    {
      "event": "review_requested",
      "id": 21625123493,
      "node_id": "RRE_lADOABII587dHYzXzwAAAAUI9TKl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21625123493",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-17T19:13:32Z",
      "requested_reviewer": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZhOTBjNDQzNDE3Njg2MGViMDFjODE5N2ZkYTIyNmY2ZTdiYjFmNzA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa90c4434176860eb01c8197fda226f6e7bb1f70",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fa90c4434176860eb01c8197fda226f6e7bb1f70",
      "tree": {
        "sha": "6b0c28d429ff737ae95d8f3edfb54a153ab759ec",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6b0c28d429ff737ae95d8f3edfb54a153ab759ec"
      },
      "verification": {
        "verified": false,
        "reason": "no_user",
        "payload": "tree 6b0c28d429ff737ae95d8f3edfb54a153ab759ec\nparent fa1de1103fe5d97ddddc9e45286e32751151f859\nauthor MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1765262660 +0100\ncommitter MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1766044680 +0100\n\nutil: Make Expected::value() throw\n\nThis is not expected to be needed in this codebase, but brings the\nimplementation closer to std::expected::value().\n\nReview note: This will also make operator-> and operator* throw, but\nthis is fine, because calling those is UB when\nstd::expected::has_value() is false.\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAgqxY/aMPiuXoCFn6iAEyAhvUqFX\njanTudd31Jtt35ct0AAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQNW0VL6hJc4YmxXNPNJ0Gf8VUT+qYk5hUqqVBR5GwUCEiZbfhrzWMPiVmM0sTdRdmo\nvKCgdP+A2/5Yte4glqLAg=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa1de1103fe5d97ddddc9e45286e32751151f859",
          "sha": "fa1de1103fe5d97ddddc9e45286e32751151f859",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/fa1de1103fe5d97ddddc9e45286e32751151f859"
        }
      ],
      "message": "util: Make Expected::value() throw\n\nThis is not expected to be needed in this codebase, but brings the\nimplementation closer to std::expected::value().\n\nReview note: This will also make operator-> and operator* throw, but\nthis is fine, because calling those is UB when\nstd::expected::has_value() is false.",
      "committer": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-12-18T07:58:00Z"
      },
      "author": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-12-09T06:44:20Z"
      },
      "sha": "fa90c4434176860eb01c8197fda226f6e7bb1f70"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZhMzE4ODRjZDBkZGNjMTZhODIxOTNkYTE4MGQ5NWZhZTMzNjczZDk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa31884cd0ddcc16a82193da180d95fae33673d9",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fa31884cd0ddcc16a82193da180d95fae33673d9",
      "tree": {
        "sha": "9f6bcf33983b5a18ac4b2ac21a44347145776f0e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9f6bcf33983b5a18ac4b2ac21a44347145776f0e"
      },
      "verification": {
        "verified": false,
        "reason": "no_user",
        "payload": "tree 9f6bcf33983b5a18ac4b2ac21a44347145776f0e\nparent fa90c4434176860eb01c8197fda226f6e7bb1f70\nauthor MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1765267806 +0100\ncommitter MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1766044688 +0100\n\nutil: Add Expected<void, E> specialization\n\nThis is not needed, but a bit closer to the std lib, because\nstd::monostate is no longer leaked through ValueType from the value()\nmethod.\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAgqxY/aMPiuXoCFn6iAEyAhvUqFX\njanTudd31Jtt35ct0AAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQBMKhW4ApJKoVmTDT6DA6Acds3KXcH81jBixHwr7/tbg6VqvZZ9iZYGv6Cr6Rzo8At\nZJ7x+JbpsqljkOuQkRLAc=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa90c4434176860eb01c8197fda226f6e7bb1f70",
          "sha": "fa90c4434176860eb01c8197fda226f6e7bb1f70",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/fa90c4434176860eb01c8197fda226f6e7bb1f70"
        }
      ],
      "message": "util: Add Expected<void, E> specialization\n\nThis is not needed, but a bit closer to the std lib, because\nstd::monostate is no longer leaked through ValueType from the value()\nmethod.",
      "committer": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-12-18T07:58:08Z"
      },
      "author": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-12-09T08:10:06Z"
      },
      "sha": "fa31884cd0ddcc16a82193da180d95fae33673d9"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZhZDFiZTk4ZDI4ZTllZTA0ZjVhOTY1ZjYzODU5ZDRjM2RiZTQzMTU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fad1be98d28e9ee04f5a965f63859d4c3dbe4315",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fad1be98d28e9ee04f5a965f63859d4c3dbe4315",
      "tree": {
        "sha": "be1caa2052da7e76e7515607265056ebabefd93f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/be1caa2052da7e76e7515607265056ebabefd93f"
      },
      "verification": {
        "verified": false,
        "reason": "no_user",
        "payload": "tree be1caa2052da7e76e7515607265056ebabefd93f\nparent fa31884cd0ddcc16a82193da180d95fae33673d9\nauthor MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1765268765 +0100\ncommitter MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1766044698 +0100\n\nutil: Implement Expected::value()&& and Expected::error()&&\n\nThey are currently unused, but implementing them is closer to the\nstd::expected.\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAgqxY/aMPiuXoCFn6iAEyAhvUqFX\njanTudd31Jtt35ct0AAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQDLjhDoGDs08XYJto9Jz+BDMdqjPRc3rAuWCMENoRm4idGsP+2iism3BKvFr9zbYf8\nINxmZQ3C9mIGinPNNAogw=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa31884cd0ddcc16a82193da180d95fae33673d9",
          "sha": "fa31884cd0ddcc16a82193da180d95fae33673d9",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/fa31884cd0ddcc16a82193da180d95fae33673d9"
        }
      ],
      "message": "util: Implement Expected::value()&& and Expected::error()&&\n\nThey are currently unused, but implementing them is closer to the\nstd::expected.",
      "committer": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-12-18T07:58:18Z"
      },
      "author": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-12-09T08:26:05Z"
      },
      "sha": "fad1be98d28e9ee04f5a965f63859d4c3dbe4315"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZhMTVmNzFlMzRlNTNlY2FhMzJjNGI0ZjIxMDJmZWVkNzYwMWM2MmM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa15f71e34e53ecaa32c4b4f2102feed7601c62c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fa15f71e34e53ecaa32c4b4f2102feed7601c62c",
      "tree": {
        "sha": "19a4d154dd61e75d2c589196e0f8a61fbab1f986",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/19a4d154dd61e75d2c589196e0f8a61fbab1f986"
      },
      "verification": {
        "verified": false,
        "reason": "no_user",
        "payload": "tree 19a4d154dd61e75d2c589196e0f8a61fbab1f986\nparent fad1be98d28e9ee04f5a965f63859d4c3dbe4315\nauthor MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1765293197 +0100\ncommitter MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1766044714 +0100\n\nutil: Implement Expected::operator*()&&\n\nIt is currently unused, but implementing it is closer to std::expected.\n\nAlso, add noexcept, where std::expected has them.\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAgqxY/aMPiuXoCFn6iAEyAhvUqFX\njanTudd31Jtt35ct0AAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQNkKm1/NINMPJJblnzXQs7V4Ka7VSgKjALtOebG3+ew8ibfQsE7dFreuNtnn4pKh/O\nz0b2cE+D6LvgI8eH4SDwI=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fad1be98d28e9ee04f5a965f63859d4c3dbe4315",
          "sha": "fad1be98d28e9ee04f5a965f63859d4c3dbe4315",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/fad1be98d28e9ee04f5a965f63859d4c3dbe4315"
        }
      ],
      "message": "util: Implement Expected::operator*()&&\n\nIt is currently unused, but implementing it is closer to std::expected.\n\nAlso, add noexcept, where std::expected has them.",
      "committer": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-12-18T07:58:34Z"
      },
      "author": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-12-09T15:13:17Z"
      },
      "sha": "fa15f71e34e53ecaa32c4b4f2102feed7601c62c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZhZWJiMTY1NDc0M2FkY2M1ODg4NDY0ZjlhNzE2N2MzMTVlY2NlMWY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/faebb1654743adcc5888464f9a7167c315ecce1f",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/faebb1654743adcc5888464f9a7167c315ecce1f",
      "tree": {
        "sha": "9fe71a23fe76165f8740afe73ef15438d03d2ac5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9fe71a23fe76165f8740afe73ef15438d03d2ac5"
      },
      "verification": {
        "verified": false,
        "reason": "no_user",
        "payload": "tree 9fe71a23fe76165f8740afe73ef15438d03d2ac5\nparent fa15f71e34e53ecaa32c4b4f2102feed7601c62c\nauthor MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1765446953 +0100\ncommitter MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1766044729 +0100\n\nutil: Add Expected::swap()\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAgqxY/aMPiuXoCFn6iAEyAhvUqFX\njanTudd31Jtt35ct0AAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQLBebI/A/5lUSWX9DjyP7nkzUSRgXPaVX/d/k4MR23FEcXTm8AkQhDO34ZC64qTw6/\nSDcXXV5nroZbhH7JG0/As=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa15f71e34e53ecaa32c4b4f2102feed7601c62c",
          "sha": "fa15f71e34e53ecaa32c4b4f2102feed7601c62c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/fa15f71e34e53ecaa32c4b4f2102feed7601c62c"
        }
      ],
      "message": "util: Add Expected::swap()",
      "committer": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-12-18T07:58:49Z"
      },
      "author": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-12-11T09:55:53Z"
      },
      "sha": "faebb1654743adcc5888464f9a7167c315ecce1f"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21636069870,
      "node_id": "HRFPE_lADOABII587dHYzXzwAAAAUJnDnu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21636069870",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "faebb1654743adcc5888464f9a7167c315ecce1f",
      "commit_url": "https://api.github.com/repos/maflcko/bitcoin-core/commits/faebb1654743adcc5888464f9a7167c315ecce1f",
      "created_at": "2025-12-18T08:01:11Z"
    },
    {
      "event": "reviewed",
      "id": 3626015857,
      "node_id": "PRR_kwDOABII587YIJxx",
      "url": null,
      "actor": null,
      "commit_id": "faebb1654743adcc5888464f9a7167c315ecce1f",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-05T09:11:27Z",
      "author_association": "CONTRIBUTOR",
      "body": "utACK faebb1654743adcc5888464f9a7167c315ecce1f",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#pullrequestreview-3626015857",
      "submitted_at": "2026-01-05T09:11:27Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
    },
    {
      "event": "review_requested",
      "id": 21849519346,
      "node_id": "RRE_lADOABII587dHYzXzwAAAAUWVTTy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21849519346",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-05T09:11:32Z",
      "requested_reviewer": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "review_request_removed",
      "id": 21850737169,
      "node_id": "RRRE_lADOABII587dHYzXzwAAAAUWZ8oR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21850737169",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-05T10:10:46Z",
      "requested_reviewer": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "review_requested",
      "id": 21850738513,
      "node_id": "RRE_lADOABII587dHYzXzwAAAAUWZ89R",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21850738513",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-05T10:10:50Z",
      "requested_reviewer": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 3631380557,
      "node_id": "PRR_kwDOABII587YcnhN",
      "url": null,
      "actor": null,
      "commit_id": "faebb1654743adcc5888464f9a7167c315ecce1f",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-06T15:39:03Z",
      "author_association": "CONTRIBUTOR",
      "body": "re-ACK faebb1654743adcc5888464f9a7167c315ecce1f\r\n\r\nOnly improved commit messages and made `operator*` for `Expected<void, E>`-specialization throw on error since my previous review (https://github.com/bitcoin/bitcoin/pull/34032#pullrequestreview-3566738644)",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#pullrequestreview-3631380557",
      "submitted_at": "2026-01-06T15:39:03Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
    },
    {
      "event": "reviewed",
      "id": 3665716942,
      "node_id": "PRR_kwDOABII587afmbO",
      "url": null,
      "actor": null,
      "commit_id": "faebb1654743adcc5888464f9a7167c315ecce1f",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-15T14:39:11Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK faebb1654743adcc5888464f9a7167c315ecce1f. I really only like the first commit fad4a9fe2b8d3a3aa09eca4f47e1741912328785 in this PR and think the other commits are neutral or bad (see below), but these changes seem ok if others want them.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#pullrequestreview-3665716942",
      "submitted_at": "2026-01-15T14:39:11Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2602576063",
      "pull_request_review_id": 3557331541,
      "id": 2602576063,
      "node_id": "PRRC_kwDOABII586bICi_",
      "diff_hunk": "@@ -76,12 +74,12 @@ class Expected\n     }\n \n     template <class U>\n-    ValueType value_or(U&& default_value) const&\n+    T value_or(U&& default_value) const&\n     {\n         return has_value() ? value() : std::forward<U>(default_value);\n     }\n     template <class U>\n-    ValueType value_or(U&& default_value) &&\n+    T value_or(U&& default_value) &&\n     {\n         return has_value() ? std::move(value()) : std::forward<U>(default_value);",
      "path": "src/util/expected.h",
      "position": 85,
      "original_position": 56,
      "commit_id": "faebb1654743adcc5888464f9a7167c315ecce1f",
      "original_commit_id": "fa4794dfeb9eddf703c9ea5c5a29433063038639",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Would seem good to change `std::move(value())` to `value()` since it should already be an rvalue, and this would make the value_or implementation more consistent",
      "created_at": "2025-12-09T13:06:15Z",
      "updated_at": "2025-12-09T13:06:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2602576063",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2602576063"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 84,
      "original_line": 84,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2602795736",
      "pull_request_review_id": 3557611615,
      "id": 2602795736,
      "node_id": "PRRC_kwDOABII586bI4LY",
      "diff_hunk": "@@ -76,12 +74,12 @@ class Expected\n     }\n \n     template <class U>\n-    ValueType value_or(U&& default_value) const&\n+    T value_or(U&& default_value) const&\n     {\n         return has_value() ? value() : std::forward<U>(default_value);\n     }\n     template <class U>\n-    ValueType value_or(U&& default_value) &&\n+    T value_or(U&& default_value) &&\n     {\n         return has_value() ? std::move(value()) : std::forward<U>(default_value);",
      "path": "src/util/expected.h",
      "position": 85,
      "original_position": 56,
      "commit_id": "faebb1654743adcc5888464f9a7167c315ecce1f",
      "original_commit_id": "fa4794dfeb9eddf703c9ea5c5a29433063038639",
      "in_reply_to_id": 2602576063,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I kept it, because it is a bit more consistent with https://en.cppreference.com/w/cpp/utility/expected/value_or, also it should be harmless to cast twice and even clarify it  a bit more  that the value really is moved out.",
      "created_at": "2025-12-09T13:58:43Z",
      "updated_at": "2025-12-09T13:58:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2602795736",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2602795736"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 84,
      "original_line": 84,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2605806608",
      "pull_request_review_id": 3561476416,
      "id": 2605806608,
      "node_id": "PRRC_kwDOABII586bUXQQ",
      "diff_hunk": "",
      "path": "src/test/util_expected_tests.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "fabef9bbef255796f28c04c5b478df9544c749eb",
      "original_commit_id": "fabef9bbef255796f28c04c5b478df9544c749eb",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: Could use BOOST_CHECK_EQUAL when applicable:\n\n```suggestion\n    BOOST_CHECK_EQUAL(e.value().x, 42);\n```",
      "created_at": "2025-12-10T09:11:24Z",
      "updated_at": "2025-12-10T15:42:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2605806608",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2605806608"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 31,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607103489",
      "pull_request_review_id": 3561476416,
      "id": 2607103489,
      "node_id": "PRRC_kwDOABII586bZT4B",
      "diff_hunk": "@@ -21,9 +22,20 @@ class Unexpected\n {\n public:\n     constexpr explicit Unexpected(E e) : err(std::move(e)) {}\n+\n+    constexpr const E& error() const& LIFETIMEBOUND { return err; }\n+    constexpr E& error() & LIFETIMEBOUND { return err; }\n+    constexpr E&& error() && LIFETIMEBOUND { return std::move(err); }\n+\n+private:\n     E err;",
      "path": "src/util/expected.h",
      "position": 1,
      "original_position": 22,
      "commit_id": "fabef9bbef255796f28c04c5b478df9544c749eb",
      "original_commit_id": "fabef9bbef255796f28c04c5b478df9544c749eb",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: Could rename `err` -> `m_err` for consistency with `Expected::m_data`.",
      "created_at": "2025-12-10T15:22:34Z",
      "updated_at": "2025-12-10T15:42:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2607103489",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607103489"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 31,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607135191",
      "pull_request_review_id": 3561476416,
      "id": 2607135191,
      "node_id": "PRRC_kwDOABII586bZbnX",
      "diff_hunk": "@@ -33,58 +45,114 @@ template <class T, class E>\n class Expected\n {\n private:\n-    using ValueType = std::conditional_t<std::is_same_v<T, void>, std::monostate, T>;\n-    std::variant<ValueType, E> m_data;\n+    std::variant<T, E> m_data;\n \n public:\n-    constexpr Expected() : m_data{std::in_place_index_t<0>{}, ValueType{}} {}\n-    constexpr Expected(ValueType v) : m_data{std::in_place_index_t<0>{}, std::move(v)} {}\n+    constexpr Expected() : m_data{std::in_place_index<0>, T{}} {}\n+    constexpr Expected(T v) : m_data{std::in_place_index<0>, std::move(v)} {}\n     template <class Err>\n-    constexpr Expected(Unexpected<Err> u) : m_data{std::in_place_index_t<1>{}, std::move(u.err)}\n+    constexpr Expected(Unexpected<Err> u) : m_data{std::in_place_index<1>, std::move(u).error()}\n     {\n     }\n \n     constexpr bool has_value() const noexcept { return m_data.index() == 0; }\n     constexpr explicit operator bool() const noexcept { return has_value(); }\n \n-    constexpr const ValueType& value() const LIFETIMEBOUND\n+    constexpr const T& value() const& LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!Assume(has_value())) {\n+            throw BadExpectedAccess{};\n+        }\n         return std::get<0>(m_data);\n     }\n-    constexpr ValueType& value() LIFETIMEBOUND\n+    constexpr T& value() & LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!Assume(has_value())) {\n+            throw BadExpectedAccess{};\n+        }\n         return std::get<0>(m_data);\n     }\n+    constexpr T&& value() && LIFETIMEBOUND\n+    {\n+        if (!Assume(has_value())) {\n+            throw BadExpectedAccess{};\n+        }\n+        return std::get<0>(std::move(m_data));\n+    }\n \n     template <class U>\n-    ValueType value_or(U&& default_value) const&\n+    T value_or(U&& default_value) const&\n     {\n         return has_value() ? value() : std::forward<U>(default_value);\n     }\n     template <class U>\n-    ValueType value_or(U&& default_value) &&\n+    T value_or(U&& default_value) &&\n     {\n         return has_value() ? std::move(value()) : std::forward<U>(default_value);\n     }\n \n-    constexpr const E& error() const LIFETIMEBOUND\n+    constexpr const E& error() const& LIFETIMEBOUND\n     {\n         assert(!has_value());\n         return std::get<1>(m_data);\n     }\n-    constexpr E& error() LIFETIMEBOUND\n+    constexpr E& error() & LIFETIMEBOUND\n     {\n         assert(!has_value());\n         return std::get<1>(m_data);\n     }\n+    constexpr E&& error() && LIFETIMEBOUND\n+    {\n+        assert(!has_value());\n+        return std::get<1>(std::move(m_data));\n+    }\n+\n+    constexpr T& operator*() & LIFETIMEBOUND { return value(); }\n+    constexpr const T& operator*() const& LIFETIMEBOUND { return value(); }\n+    constexpr T&& operator*() && LIFETIMEBOUND { return std::move(value()); }\n \n-    constexpr ValueType& operator*() LIFETIMEBOUND { return value(); }\n-    constexpr const ValueType& operator*() const LIFETIMEBOUND { return value(); }\n+    constexpr T* operator->() LIFETIMEBOUND { return &value(); }\n+    constexpr const T* operator->() const LIFETIMEBOUND { return &value(); }\n+};\n+\n+template <class E>\n+class Expected<void, E>\n+{\n+private:\n+    std::variant<std::monostate, E> m_data;",
      "path": "src/util/expected.h",
      "position": 107,
      "original_position": 126,
      "commit_id": "faebb1654743adcc5888464f9a7167c315ecce1f",
      "original_commit_id": "fabef9bbef255796f28c04c5b478df9544c749eb",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "~nit: Could use `optional` instead of `monostate`?~ Ah, I see that was already discussed https://github.com/bitcoin/bitcoin/pull/34032#issuecomment-3632418418.\r\n\r\n<details><summary>Diff</summary>\r\n\r\n```diff\r\n--- a/src/util/expected.h\r\n+++ b/src/util/expected.h\r\n@@ -10,6 +10,7 @@\r\n \r\n #include <cassert>\r\n #include <exception>\r\n+#include <optional>\r\n #include <utility>\r\n #include <variant>\r\n \r\n@@ -119,16 +120,16 @@ template <class E>\r\n class Expected<void, E>\r\n {\r\n private:\r\n-    std::variant<std::monostate, E> m_data;\r\n+    std::optional<E> m_error;\r\n \r\n public:\r\n-    constexpr Expected() : m_data{std::in_place_index<0>, std::monostate{}} {}\r\n+    constexpr Expected() = default;\r\n     template <class Err>\r\n-    constexpr Expected(Unexpected<Err> u) : m_data{std::in_place_index<1>, std::move(u).error()}\r\n+    constexpr Expected(Unexpected<Err> u) : m_error{std::move(u).error()}\r\n     {\r\n     }\r\n \r\n-    constexpr bool has_value() const noexcept { return m_data.index() == 0; }\r\n+    constexpr bool has_value() const noexcept { return !m_error.has_value(); }\r\n     constexpr explicit operator bool() const noexcept { return has_value(); }\r\n \r\n     constexpr void value() const\r\n@@ -141,17 +142,17 @@ public:\r\n     constexpr const E& error() const& LIFETIMEBOUND\r\n     {\r\n         assert(!has_value());\r\n-        return std::get<1>(m_data);\r\n+        return m_error.value();\r\n     }\r\n     constexpr E& error() & LIFETIMEBOUND\r\n     {\r\n         assert(!has_value());\r\n-        return std::get<1>(m_data);\r\n+        return m_error.value();\r\n     }\r\n     constexpr E&& error() && LIFETIMEBOUND\r\n     {\r\n         assert(!has_value());\r\n-        return std::get<1>(std::move(m_data));\r\n+        return std::move(m_error).value();\r\n     }\r\n };\r\n\r\n```\r\n\r\n</details>\r\n",
      "created_at": "2025-12-10T15:30:47Z",
      "updated_at": "2025-12-10T15:42:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2607135191",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607135191"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 105,
      "original_line": 105,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607376375",
      "pull_request_review_id": 3563450827,
      "id": 2607376375,
      "node_id": "PRRC_kwDOABII586baWf3",
      "diff_hunk": "@@ -21,9 +22,20 @@ class Unexpected\n {\n public:\n     constexpr explicit Unexpected(E e) : err(std::move(e)) {}\n+\n+    constexpr const E& error() const& LIFETIMEBOUND { return err; }\n+    constexpr E& error() & LIFETIMEBOUND { return err; }\n+    constexpr E&& error() && LIFETIMEBOUND { return std::move(err); }\n+\n+private:\n     E err;",
      "path": "src/util/expected.h",
      "position": 1,
      "original_position": 22,
      "commit_id": "fabef9bbef255796f28c04c5b478df9544c749eb",
      "original_commit_id": "fabef9bbef255796f28c04c5b478df9544c749eb",
      "in_reply_to_id": 2607103489,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "thx, done",
      "created_at": "2025-12-10T16:31:41Z",
      "updated_at": "2025-12-10T16:31:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2607376375",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607376375"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 31,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607376833",
      "pull_request_review_id": 3563451366,
      "id": 2607376833,
      "node_id": "PRRC_kwDOABII586baWnB",
      "diff_hunk": "",
      "path": "src/test/util_expected_tests.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "fabef9bbef255796f28c04c5b478df9544c749eb",
      "original_commit_id": "fabef9bbef255796f28c04c5b478df9544c749eb",
      "in_reply_to_id": 2605806608,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "thx, done",
      "created_at": "2025-12-10T16:31:49Z",
      "updated_at": "2025-12-10T16:31:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2607376833",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607376833"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 31,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607689549",
      "pull_request_review_id": 3563848843,
      "id": 2607689549,
      "node_id": "PRRC_kwDOABII586bbi9N",
      "diff_hunk": "@@ -49,12 +55,16 @@ class Expected\n \n     constexpr const ValueType& value() const LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!Assume(has_value())) {",
      "path": "src/util/expected.h",
      "position": 1,
      "original_position": 27,
      "commit_id": "fa0a1a6a4986c1a977bbcd5f48834bedeac5dffb",
      "original_commit_id": "fa0297540e29f077a76133d1b60d3fd35f03b4e1",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"util: Make Expected::value() throw\" (fa0297540e29f077a76133d1b60d3fd35f03b4e1)\r\n\r\n\r\nIn the standard `std::expected` class there is a clear difference between the high-level `value()` method which throws an exception when the value is unset, and lower level pointer operators which are `noexcept` and can't be called without a value. This makes `std::expected` consistent with `std::optional`, which also has `noexcept` pointer operators and a throwing `value()` method. It's also similar to `std::vector` which has nonthrowing `operator[]` methods and throwing `at()` methods.\r\n\r\nI don't see a reason why `util::Expected` class shouldn't follow the same pattern and have `noexcept` pointer operators, especially if it's intended to be replaced with `std::expected` in the future. I also think it would clean up the implementation to have a separation between low level pointer operators and higher level accessor methods. Would suggest:\r\n\r\n```c++\r\ntemplate <class T, class E>\r\nclass Expected\r\n{\r\nprivate:\r\n    std::variant<T, E> m_data;\r\n\r\npublic:\r\n    // Value constructors.\r\n    constexpr Expected() = default;\r\n    constexpr Expected(T v) : m_data{std::in_place_index<0>, std::move(v)} {}\r\n\r\n    // Error constructor.\r\n    template <class G>\r\n    constexpr Expected(Unexpected<G> u) : m_data{std::in_place_index<1>, std::move(u).error()} {}\r\n\r\n    // Value accessors.\r\n    constexpr explicit operator bool() const noexcept { return m_data.index() == 0; }\r\n    constexpr const T& operator*() const& noexcept LIFETIMEBOUND { return *Assert(std::get_if<0>(&m_data)); }\r\n    constexpr T&       operator*() &      noexcept LIFETIMEBOUND { return *Assert(std::get_if<0>(&m_data)); }\r\n    constexpr T&&      operator*() &&     noexcept LIFETIMEBOUND { return std::move(**this); }\r\n    constexpr const T* operator->() const noexcept LIFETIMEBOUND { return Assert(std::get_if<0>(&m_data)); }\r\n    constexpr T*       operator->()       noexcept LIFETIMEBOUND { return Assert(std::get_if<0>(&m_data)); }\r\n\r\n    // Error accessors.\r\n    constexpr const E& error() const& LIFETIMEBOUND { return *Assert(std::get_if<1>(&m_data)); }\r\n    constexpr E& error() & LIFETIMEBOUND            { return *Assert(std::get_if<1>(&m_data)); }\r\n    constexpr E&& error() && LIFETIMEBOUND          { return std::move(this->error()); }\r\n\r\n    // Higher level helpers.\r\n    constexpr bool has_value() const noexcept       { return bool{*this}; }\r\n    constexpr const T& value() const& LIFETIMEBOUND { if (!*this) throw BadExpectedAccess{}; return **this; }\r\n    constexpr T& value() & LIFETIMEBOUND            { if (!*this) throw BadExpectedAccess{}; return **this; }\r\n    constexpr T&& value() && LIFETIMEBOUND          { return std::move(this->value()); }\r\n\r\n    template <class U>\r\n    T value_or(U&& default_value) const&\r\n    {\r\n        return *this ? **this : std::forward<U>(default_value);\r\n    }\r\n\r\n    template <class U>\r\n    T value_or(U&& default_value) &&\r\n    {\r\n        return *this ? std::move(**this) : std::forward<U>(default_value);\r\n    }\r\n};\r\n```\r\n\r\nThis implementation would also make the `value()` methods throw in debug builds instead of aborting, which I think is good because `std::expected` does that, and there isn't much reason to call `value()` if exceptions are unwanted. But no strong opinion about this aspect, and this could be easily tweaked to make `value()` abort in debug builds by replacing `if (!*this)` with `if (!Assume(*this))` in the two `value()` methods.",
      "created_at": "2025-12-10T18:03:07Z",
      "updated_at": "2025-12-10T18:33:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2607689549",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607689549"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 58,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607703403",
      "pull_request_review_id": 3563848843,
      "id": 2607703403,
      "node_id": "PRRC_kwDOABII586bbmVr",
      "diff_hunk": "@@ -22,8 +22,14 @@ template <class E>\n class Unexpected\n {\n public:\n-    constexpr explicit Unexpected(E e) : err(std::move(e)) {}\n-    E err;\n+    constexpr explicit Unexpected(E e) : m_err(std::move(e)) {}\n+\n+    constexpr const E& error() const& LIFETIMEBOUND { return m_err; }\n+    constexpr E& error() & LIFETIMEBOUND { return m_err; }\n+    constexpr E&& error() && LIFETIMEBOUND { return std::move(m_err); }\n+\n+private:\n+    E m_err;",
      "path": "src/util/expected.h",
      "position": 1,
      "original_position": 13,
      "commit_id": "fa0a1a6a4986c1a977bbcd5f48834bedeac5dffb",
      "original_commit_id": "faa0d23ee75aac289c3766ce6ee27948b0d982d9",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"util: Add Unexpected::error()\" (faa0d23ee75aac289c3766ce6ee27948b0d982d9)\r\n\r\nCalling this `m_error` would seem more consistent.",
      "created_at": "2025-12-10T18:07:13Z",
      "updated_at": "2025-12-10T18:33:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2607703403",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607703403"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 32,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607767971",
      "pull_request_review_id": 3563848843,
      "id": 2607767971,
      "node_id": "PRRC_kwDOABII586bb2Gj",
      "diff_hunk": "@@ -96,11 +94,46 @@ class Expected\n         return std::get<1>(m_data);\n     }\n \n-    constexpr ValueType& operator*() LIFETIMEBOUND { return value(); }\n-    constexpr const ValueType& operator*() const LIFETIMEBOUND { return value(); }\n+    constexpr T& operator*() LIFETIMEBOUND { return value(); }\n+    constexpr const T& operator*() const LIFETIMEBOUND { return value(); }\n \n-    constexpr ValueType* operator->() LIFETIMEBOUND { return &value(); }\n-    constexpr const ValueType* operator->() const LIFETIMEBOUND { return &value(); }\n+    constexpr T* operator->() LIFETIMEBOUND { return &value(); }\n+    constexpr const T* operator->() const LIFETIMEBOUND { return &value(); }\n+};\n+\n+template <class E>\n+class Expected<void, E>",
      "path": "src/util/expected.h",
      "position": 104,
      "original_position": 74,
      "commit_id": "faebb1654743adcc5888464f9a7167c315ecce1f",
      "original_commit_id": "fa3d6c760db3dafbaa530401893a40fc5f6575f9",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"util: Add Expected<void, E> specialization\" (fa3d6c760db3dafbaa530401893a40fc5f6575f9)\r\n\r\nThis specialization is more complicated than it needs to be. Would suggest simplifying with inheritance:\r\n\r\n```c++\r\n//! Specialization for void returning void from value methods.\r\ntemplate <class E>\r\nclass Expected<void, E> : public Expected<std::monostate, E>\r\n{\r\n    using Base = Expected<std::monostate, E>;\r\npublic:\r\n    using Expected<std::monostate, E>::Expected;\r\n    constexpr void operator*() const noexcept { Base::operator*(); }\r\n    constexpr void value() const& { Base::value(); }\r\n    constexpr void value() && { Base::value(); }\r\n    void value_or() = delete;\r\n};\r\n```",
      "created_at": "2025-12-10T18:27:57Z",
      "updated_at": "2025-12-10T18:33:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2607767971",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607767971"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": 101,
      "original_start_line": 104,
      "start_side": "RIGHT",
      "line": 102,
      "original_line": 102,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2609690504",
      "pull_request_review_id": 3566334104,
      "id": 2609690504,
      "node_id": "PRRC_kwDOABII586bjLeI",
      "diff_hunk": "@@ -49,12 +55,16 @@ class Expected\n \n     constexpr const ValueType& value() const LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!Assume(has_value())) {",
      "path": "src/util/expected.h",
      "position": 1,
      "original_position": 27,
      "commit_id": "fa0a1a6a4986c1a977bbcd5f48834bedeac5dffb",
      "original_commit_id": "fa0297540e29f077a76133d1b60d3fd35f03b4e1",
      "in_reply_to_id": 2607689549,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Agree on change to use the default ctor, `variant` will initialize with the first type (https://en.cppreference.com/w/cpp/utility/variant/variant.html, 1).\r\n\r\nI prefer the current way of implementing `operator bool` in terms of `has_value()` though, think it's clearer.\r\n\r\nAgree on making the other operators `noexcept`.",
      "created_at": "2025-12-11T08:42:40Z",
      "updated_at": "2025-12-11T09:10:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2609690504",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2609690504"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 58,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2609718958",
      "pull_request_review_id": 3566334104,
      "id": 2609718958,
      "node_id": "PRRC_kwDOABII586bjSau",
      "diff_hunk": "@@ -33,58 +44,114 @@ template <class T, class E>\n class Expected\n {\n private:\n-    using ValueType = std::conditional_t<std::is_same_v<T, void>, std::monostate, T>;\n-    std::variant<ValueType, E> m_data;\n+    std::variant<T, E> m_data;\n \n public:\n-    constexpr Expected() : m_data{std::in_place_index_t<0>{}, ValueType{}} {}\n-    constexpr Expected(ValueType v) : m_data{std::in_place_index_t<0>{}, std::move(v)} {}\n+    constexpr Expected() : m_data{std::in_place_index<0>, T{}} {}\n+    constexpr Expected(T v) : m_data{std::in_place_index<0>, std::move(v)} {}\n     template <class Err>\n-    constexpr Expected(Unexpected<Err> u) : m_data{std::in_place_index_t<1>{}, std::move(u.err)}\n+    constexpr Expected(Unexpected<Err> u) : m_data{std::in_place_index<1>, std::move(u).error()}\n     {\n     }\n \n     constexpr bool has_value() const noexcept { return m_data.index() == 0; }\n     constexpr explicit operator bool() const noexcept { return has_value(); }\n \n-    constexpr const ValueType& value() const LIFETIMEBOUND\n+    constexpr const T& value() const& LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!Assume(has_value())) {\n+            throw BadExpectedAccess{};\n+        }\n         return std::get<0>(m_data);\n     }\n-    constexpr ValueType& value() LIFETIMEBOUND\n+    constexpr T& value() & LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!Assume(has_value())) {\n+            throw BadExpectedAccess{};\n+        }\n         return std::get<0>(m_data);\n     }\n+    constexpr T&& value() && LIFETIMEBOUND\n+    {\n+        if (!Assume(has_value())) {\n+            throw BadExpectedAccess{};\n+        }\n+        return std::get<0>(std::move(m_data));\n+    }\n \n     template <class U>\n-    ValueType value_or(U&& default_value) const&\n+    T value_or(U&& default_value) const&\n     {\n         return has_value() ? value() : std::forward<U>(default_value);\n     }\n     template <class U>\n-    ValueType value_or(U&& default_value) &&\n+    T value_or(U&& default_value) &&\n     {\n         return has_value() ? std::move(value()) : std::forward<U>(default_value);\n     }\n \n-    constexpr const E& error() const LIFETIMEBOUND\n+    constexpr const E& error() const& LIFETIMEBOUND\n     {\n         assert(!has_value());\n         return std::get<1>(m_data);\n     }\n-    constexpr E& error() LIFETIMEBOUND\n+    constexpr E& error() & LIFETIMEBOUND\n     {\n         assert(!has_value());\n         return std::get<1>(m_data);\n     }\n+    constexpr E&& error() && LIFETIMEBOUND\n+    {\n+        assert(!has_value());\n+        return std::get<1>(std::move(m_data));\n+    }\n+\n+    constexpr T& operator*() & LIFETIMEBOUND { return value(); }\n+    constexpr const T& operator*() const& LIFETIMEBOUND { return value(); }\n+    constexpr T&& operator*() && LIFETIMEBOUND { return std::move(value()); }\n+\n+    constexpr T* operator->() LIFETIMEBOUND { return &value(); }\n+    constexpr const T* operator->() const LIFETIMEBOUND { return &value(); }\n+};\n+\n+template <class E>\n+class Expected<void, E>\n+{\n+private:\n+    std::variant<std::monostate, E> m_data;\n+\n+public:\n+    constexpr Expected() : m_data{std::in_place_index<0>, std::monostate{}} {}\n+    template <class Err>\n+    constexpr Expected(Unexpected<Err> u) : m_data{std::in_place_index<1>, std::move(u).error()}\n+    {\n+    }\n+\n+    constexpr bool has_value() const noexcept { return m_data.index() == 0; }\n+    constexpr explicit operator bool() const noexcept { return has_value(); }\n \n-    constexpr ValueType& operator*() LIFETIMEBOUND { return value(); }\n-    constexpr const ValueType& operator*() const LIFETIMEBOUND { return value(); }\n+    constexpr void value() const\n+    {\n+        if (!Assume(has_value())) {\n+            throw BadExpectedAccess{};\n+        }\n+    }\n \n-    constexpr ValueType* operator->() LIFETIMEBOUND { return &value(); }\n-    constexpr const ValueType* operator->() const LIFETIMEBOUND { return &value(); }\n+    constexpr const E& error() const& LIFETIMEBOUND\n+    {\n+        assert(!has_value());\n+        return std::get<1>(m_data);\n+    }\n+    constexpr E& error() & LIFETIMEBOUND\n+    {\n+        assert(!has_value());\n+        return std::get<1>(m_data);\n+    }\n+    constexpr E&& error() && LIFETIMEBOUND\n+    {\n+        assert(!has_value());\n+        return std::get<1>(std::move(m_data));\n+    }\n };",
      "path": "src/util/expected.h",
      "position": 140,
      "original_position": 162,
      "commit_id": "faebb1654743adcc5888464f9a7167c315ecce1f",
      "original_commit_id": "fa0a1a6a4986c1a977bbcd5f48834bedeac5dffb",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: Would be nice to add `swap()` as well. I already needed that here: https://github.com/bitcoin/bitcoin/pull/25665#discussion_r2608521278 / https://github.com/hodlinator/bitcoin/commit/b40a36cbbab59440d84dba6d1cc16bce17d4869c\r\n\r\n(I forgot to include the test in that commit).\r\n```C++\r\nBOOST_AUTO_TEST_CASE(expected_swap)\r\n{\r\n    Expected<const char*, int> a{Unexpected{55}};\r\n    Expected<const char*, int> b{\"21\"};\r\n    a.swap(b);\r\n    BOOST_CHECK_EQUAL(a.value(), \"21\");\r\n    BOOST_CHECK_EQUAL(b.error(), 55);\r\n}\r\n``` ",
      "created_at": "2025-12-11T08:52:12Z",
      "updated_at": "2025-12-11T09:10:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2609718958",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2609718958"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 128,
      "original_line": 128,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2609758576",
      "pull_request_review_id": 3566334104,
      "id": 2609758576,
      "node_id": "PRRC_kwDOABII586bjcFw",
      "diff_hunk": "@@ -17,25 +22,39 @@ BOOST_AUTO_TEST_CASE(expected_value)\n         int x;\n     };\n     Expected<Obj, int> e{};\n-    BOOST_CHECK(e.value().x == 0);\n+    BOOST_CHECK_EQUAL(e.value().x, 0);\n \n     e = Obj{42};\n \n     BOOST_CHECK(e.has_value());",
      "path": "src/test/util_expected_tests.cpp",
      "position": 21,
      "original_position": 21,
      "commit_id": "faebb1654743adcc5888464f9a7167c315ecce1f",
      "original_commit_id": "fa0a1a6a4986c1a977bbcd5f48834bedeac5dffb",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: Should this be a require since otherwise we would start triggering internal asserts or exceptions further down on failure?\r\n```suggestion\r\n    BOOST_REQUIRE(e.has_value());\r\n```",
      "created_at": "2025-12-11T09:05:01Z",
      "updated_at": "2025-12-11T09:10:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2609758576",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2609758576"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 29,
      "original_line": 29,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2609770958",
      "pull_request_review_id": 3566334104,
      "id": 2609770958,
      "node_id": "PRRC_kwDOABII586bjfHO",
      "diff_hunk": "@@ -20,8 +21,18 @@ template <class E>\n class Unexpected\n {\n public:\n-    constexpr explicit Unexpected(E e) : err(std::move(e)) {}\n-    E err;\n+    constexpr explicit Unexpected(E e) : m_err(std::move(e)) {}\n+\n+    constexpr const E& error() const& LIFETIMEBOUND { return m_err; }\n+    constexpr E& error() & LIFETIMEBOUND { return m_err; }\n+    constexpr E&& error() && LIFETIMEBOUND { return std::move(m_err); }",
      "path": "src/util/expected.h",
      "position": 1,
      "original_position": 22,
      "commit_id": "fa0a1a6a4986c1a977bbcd5f48834bedeac5dffb",
      "original_commit_id": "fa0a1a6a4986c1a977bbcd5f48834bedeac5dffb",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: Should be `noexcept` according to https://en.cppreference.com/w/cpp/utility/expected/unexpected.html#error",
      "created_at": "2025-12-11T09:08:43Z",
      "updated_at": "2025-12-11T09:10:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2609770958",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2609770958"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": null,
      "original_start_line": 26,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 28,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2609835030",
      "pull_request_review_id": 3566510372,
      "id": 2609835030,
      "node_id": "PRRC_kwDOABII586bjuwW",
      "diff_hunk": "@@ -96,11 +94,46 @@ class Expected\n         return std::get<1>(m_data);\n     }\n \n-    constexpr ValueType& operator*() LIFETIMEBOUND { return value(); }\n-    constexpr const ValueType& operator*() const LIFETIMEBOUND { return value(); }\n+    constexpr T& operator*() LIFETIMEBOUND { return value(); }\n+    constexpr const T& operator*() const LIFETIMEBOUND { return value(); }\n \n-    constexpr ValueType* operator->() LIFETIMEBOUND { return &value(); }\n-    constexpr const ValueType* operator->() const LIFETIMEBOUND { return &value(); }\n+    constexpr T* operator->() LIFETIMEBOUND { return &value(); }\n+    constexpr const T* operator->() const LIFETIMEBOUND { return &value(); }\n+};\n+\n+template <class E>\n+class Expected<void, E>",
      "path": "src/util/expected.h",
      "position": 104,
      "original_position": 74,
      "commit_id": "faebb1654743adcc5888464f9a7167c315ecce1f",
      "original_commit_id": "fa3d6c760db3dafbaa530401893a40fc5f6575f9",
      "in_reply_to_id": 2607767971,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This just brings back the problem we are trying to solve: Solve exposing monostate externally?\r\n\r\n`+    Expected<void, std::string> e{std::monostate{}};\r\n`",
      "created_at": "2025-12-11T09:27:44Z",
      "updated_at": "2025-12-11T09:27:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2609835030",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2609835030"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": 101,
      "original_start_line": 104,
      "start_side": "RIGHT",
      "line": 102,
      "original_line": 102,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2609836034",
      "pull_request_review_id": 3566511504,
      "id": 2609836034,
      "node_id": "PRRC_kwDOABII586bjvAC",
      "diff_hunk": "@@ -22,8 +22,14 @@ template <class E>\n class Unexpected\n {\n public:\n-    constexpr explicit Unexpected(E e) : err(std::move(e)) {}\n-    E err;\n+    constexpr explicit Unexpected(E e) : m_err(std::move(e)) {}\n+\n+    constexpr const E& error() const& LIFETIMEBOUND { return m_err; }\n+    constexpr E& error() & LIFETIMEBOUND { return m_err; }\n+    constexpr E&& error() && LIFETIMEBOUND { return std::move(m_err); }\n+\n+private:\n+    E m_err;",
      "path": "src/util/expected.h",
      "position": 1,
      "original_position": 13,
      "commit_id": "fa0a1a6a4986c1a977bbcd5f48834bedeac5dffb",
      "original_commit_id": "faa0d23ee75aac289c3766ce6ee27948b0d982d9",
      "in_reply_to_id": 2607703403,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "thx, done",
      "created_at": "2025-12-11T09:28:02Z",
      "updated_at": "2025-12-11T09:28:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2609836034",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2609836034"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 32,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2609838881",
      "pull_request_review_id": 3566515212,
      "id": 2609838881,
      "node_id": "PRRC_kwDOABII586bjvsh",
      "diff_hunk": "@@ -49,12 +55,16 @@ class Expected\n \n     constexpr const ValueType& value() const LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!Assume(has_value())) {",
      "path": "src/util/expected.h",
      "position": 1,
      "original_position": 27,
      "commit_id": "fa0a1a6a4986c1a977bbcd5f48834bedeac5dffb",
      "original_commit_id": "fa0297540e29f077a76133d1b60d3fd35f03b4e1",
      "in_reply_to_id": 2607689549,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> Agree on making the other operators `noexcept`.\r\n\r\nthx, done\r\n\r\n> Agree on change to use the default ctor, `variant` will initialize with the first type (https://en.cppreference.com/w/cpp/utility/variant/variant.html, 1).\r\n\r\nshouldn't hurt to be explicit",
      "created_at": "2025-12-11T09:28:50Z",
      "updated_at": "2025-12-11T09:28:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2609838881",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2609838881"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 58,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2609842427",
      "pull_request_review_id": 3566519574,
      "id": 2609842427,
      "node_id": "PRRC_kwDOABII586bjwj7",
      "diff_hunk": "@@ -20,8 +21,18 @@ template <class E>\n class Unexpected\n {\n public:\n-    constexpr explicit Unexpected(E e) : err(std::move(e)) {}\n-    E err;\n+    constexpr explicit Unexpected(E e) : m_err(std::move(e)) {}\n+\n+    constexpr const E& error() const& LIFETIMEBOUND { return m_err; }\n+    constexpr E& error() & LIFETIMEBOUND { return m_err; }\n+    constexpr E&& error() && LIFETIMEBOUND { return std::move(m_err); }",
      "path": "src/util/expected.h",
      "position": 1,
      "original_position": 22,
      "commit_id": "fa0a1a6a4986c1a977bbcd5f48834bedeac5dffb",
      "original_commit_id": "fa0a1a6a4986c1a977bbcd5f48834bedeac5dffb",
      "in_reply_to_id": 2609770958,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "thx, done",
      "created_at": "2025-12-11T09:29:52Z",
      "updated_at": "2025-12-11T09:29:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2609842427",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2609842427"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": null,
      "original_start_line": 26,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 28,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2609909433",
      "pull_request_review_id": 3566596635,
      "id": 2609909433,
      "node_id": "PRRC_kwDOABII586bkA65",
      "diff_hunk": "@@ -33,58 +44,114 @@ template <class T, class E>\n class Expected\n {\n private:\n-    using ValueType = std::conditional_t<std::is_same_v<T, void>, std::monostate, T>;\n-    std::variant<ValueType, E> m_data;\n+    std::variant<T, E> m_data;\n \n public:\n-    constexpr Expected() : m_data{std::in_place_index_t<0>{}, ValueType{}} {}\n-    constexpr Expected(ValueType v) : m_data{std::in_place_index_t<0>{}, std::move(v)} {}\n+    constexpr Expected() : m_data{std::in_place_index<0>, T{}} {}\n+    constexpr Expected(T v) : m_data{std::in_place_index<0>, std::move(v)} {}\n     template <class Err>\n-    constexpr Expected(Unexpected<Err> u) : m_data{std::in_place_index_t<1>{}, std::move(u.err)}\n+    constexpr Expected(Unexpected<Err> u) : m_data{std::in_place_index<1>, std::move(u).error()}\n     {\n     }\n \n     constexpr bool has_value() const noexcept { return m_data.index() == 0; }\n     constexpr explicit operator bool() const noexcept { return has_value(); }\n \n-    constexpr const ValueType& value() const LIFETIMEBOUND\n+    constexpr const T& value() const& LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!Assume(has_value())) {\n+            throw BadExpectedAccess{};\n+        }\n         return std::get<0>(m_data);\n     }\n-    constexpr ValueType& value() LIFETIMEBOUND\n+    constexpr T& value() & LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!Assume(has_value())) {\n+            throw BadExpectedAccess{};\n+        }\n         return std::get<0>(m_data);\n     }\n+    constexpr T&& value() && LIFETIMEBOUND\n+    {\n+        if (!Assume(has_value())) {\n+            throw BadExpectedAccess{};\n+        }\n+        return std::get<0>(std::move(m_data));\n+    }\n \n     template <class U>\n-    ValueType value_or(U&& default_value) const&\n+    T value_or(U&& default_value) const&\n     {\n         return has_value() ? value() : std::forward<U>(default_value);\n     }\n     template <class U>\n-    ValueType value_or(U&& default_value) &&\n+    T value_or(U&& default_value) &&\n     {\n         return has_value() ? std::move(value()) : std::forward<U>(default_value);\n     }\n \n-    constexpr const E& error() const LIFETIMEBOUND\n+    constexpr const E& error() const& LIFETIMEBOUND\n     {\n         assert(!has_value());\n         return std::get<1>(m_data);\n     }\n-    constexpr E& error() LIFETIMEBOUND\n+    constexpr E& error() & LIFETIMEBOUND\n     {\n         assert(!has_value());\n         return std::get<1>(m_data);\n     }\n+    constexpr E&& error() && LIFETIMEBOUND\n+    {\n+        assert(!has_value());\n+        return std::get<1>(std::move(m_data));\n+    }\n+\n+    constexpr T& operator*() & LIFETIMEBOUND { return value(); }\n+    constexpr const T& operator*() const& LIFETIMEBOUND { return value(); }\n+    constexpr T&& operator*() && LIFETIMEBOUND { return std::move(value()); }\n+\n+    constexpr T* operator->() LIFETIMEBOUND { return &value(); }\n+    constexpr const T* operator->() const LIFETIMEBOUND { return &value(); }\n+};\n+\n+template <class E>\n+class Expected<void, E>\n+{\n+private:\n+    std::variant<std::monostate, E> m_data;\n+\n+public:\n+    constexpr Expected() : m_data{std::in_place_index<0>, std::monostate{}} {}\n+    template <class Err>\n+    constexpr Expected(Unexpected<Err> u) : m_data{std::in_place_index<1>, std::move(u).error()}\n+    {\n+    }\n+\n+    constexpr bool has_value() const noexcept { return m_data.index() == 0; }\n+    constexpr explicit operator bool() const noexcept { return has_value(); }\n \n-    constexpr ValueType& operator*() LIFETIMEBOUND { return value(); }\n-    constexpr const ValueType& operator*() const LIFETIMEBOUND { return value(); }\n+    constexpr void value() const\n+    {\n+        if (!Assume(has_value())) {\n+            throw BadExpectedAccess{};\n+        }\n+    }\n \n-    constexpr ValueType* operator->() LIFETIMEBOUND { return &value(); }\n-    constexpr const ValueType* operator->() const LIFETIMEBOUND { return &value(); }\n+    constexpr const E& error() const& LIFETIMEBOUND\n+    {\n+        assert(!has_value());\n+        return std::get<1>(m_data);\n+    }\n+    constexpr E& error() & LIFETIMEBOUND\n+    {\n+        assert(!has_value());\n+        return std::get<1>(m_data);\n+    }\n+    constexpr E&& error() && LIFETIMEBOUND\n+    {\n+        assert(!has_value());\n+        return std::get<1>(std::move(m_data));\n+    }\n };",
      "path": "src/util/expected.h",
      "position": 140,
      "original_position": 162,
      "commit_id": "faebb1654743adcc5888464f9a7167c315ecce1f",
      "original_commit_id": "fa0a1a6a4986c1a977bbcd5f48834bedeac5dffb",
      "in_reply_to_id": 2609718958,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "thx, done",
      "created_at": "2025-12-11T09:48:33Z",
      "updated_at": "2025-12-11T09:48:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2609909433",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2609909433"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 128,
      "original_line": 128,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2609913103",
      "pull_request_review_id": 3566601181,
      "id": 2609913103,
      "node_id": "PRRC_kwDOABII586bkB0P",
      "diff_hunk": "@@ -17,25 +22,39 @@ BOOST_AUTO_TEST_CASE(expected_value)\n         int x;\n     };\n     Expected<Obj, int> e{};\n-    BOOST_CHECK(e.value().x == 0);\n+    BOOST_CHECK_EQUAL(e.value().x, 0);\n \n     e = Obj{42};\n \n     BOOST_CHECK(e.has_value());",
      "path": "src/test/util_expected_tests.cpp",
      "position": 21,
      "original_position": 21,
      "commit_id": "faebb1654743adcc5888464f9a7167c315ecce1f",
      "original_commit_id": "fa0a1a6a4986c1a977bbcd5f48834bedeac5dffb",
      "in_reply_to_id": 2609758576,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Yes, but that seems fine? Not sure what problem this would be solving. Leaving as-is for now.",
      "created_at": "2025-12-11T09:49:37Z",
      "updated_at": "2025-12-11T09:49:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2609913103",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2609913103"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 29,
      "original_line": 29,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610026288",
      "pull_request_review_id": 3566738644,
      "id": 2610026288,
      "node_id": "PRRC_kwDOABII586bkdcw",
      "diff_hunk": "@@ -33,58 +44,87 @@ template <class T, class E>\n class Expected\n {\n private:\n-    using ValueType = std::conditional_t<std::is_same_v<T, void>, std::monostate, T>;\n-    std::variant<ValueType, E> m_data;\n+    std::variant<T, E> m_data;\n \n public:\n-    constexpr Expected() : m_data{std::in_place_index_t<0>{}, ValueType{}} {}\n-    constexpr Expected(ValueType v) : m_data{std::in_place_index_t<0>{}, std::move(v)} {}\n+    constexpr Expected() : m_data{std::in_place_index<0>, T{}} {}\n+    constexpr Expected(T v) : m_data{std::in_place_index<0>, std::move(v)} {}\n     template <class Err>\n-    constexpr Expected(Unexpected<Err> u) : m_data{std::in_place_index_t<1>{}, std::move(u.err)}\n+    constexpr Expected(Unexpected<Err> u) : m_data{std::in_place_index<1>, std::move(u).error()}\n     {\n     }\n \n     constexpr bool has_value() const noexcept { return m_data.index() == 0; }\n     constexpr explicit operator bool() const noexcept { return has_value(); }\n \n-    constexpr const ValueType& value() const LIFETIMEBOUND\n+    constexpr const T& value() const& LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!has_value()) {\n+            throw BadExpectedAccess{};\n+        }\n         return std::get<0>(m_data);\n     }\n-    constexpr ValueType& value() LIFETIMEBOUND\n+    constexpr T& value() & LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!has_value()) {\n+            throw BadExpectedAccess{};\n+        }\n         return std::get<0>(m_data);\n     }\n+    constexpr T&& value() && LIFETIMEBOUND { return std::move(value()); }\n \n     template <class U>\n-    ValueType value_or(U&& default_value) const&\n+    T value_or(U&& default_value) const&\n     {\n         return has_value() ? value() : std::forward<U>(default_value);\n     }\n     template <class U>\n-    ValueType value_or(U&& default_value) &&\n+    T value_or(U&& default_value) &&\n     {\n         return has_value() ? std::move(value()) : std::forward<U>(default_value);\n     }\n \n-    constexpr const E& error() const LIFETIMEBOUND\n+    constexpr const E& error() const& noexcept LIFETIMEBOUND { return *Assert(std::get_if<1>(&m_data)); }\n+    constexpr E& error() & noexcept LIFETIMEBOUND { return *Assert(std::get_if<1>(&m_data)); }\n+    constexpr E&& error() && noexcept LIFETIMEBOUND { return std::move(error()); }",
      "path": "src/util/expected.h",
      "position": 91,
      "original_position": 91,
      "commit_id": "faebb1654743adcc5888464f9a7167c315ecce1f",
      "original_commit_id": "fa874c9f050500dc521ef8d9c81b043687f0dcc7",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "How come this method overload is not calling itself recursively?\r\n\r\nTested adding `BOOST_CHECK_EQUAL((Expected<void, int>{Unexpected{1}}.error()), 1);` to the tests to confirm it doesn't but don't understand why.\r\n\r\nIs `this` in some kind of `&`-mode, making it call the method above?",
      "created_at": "2025-12-11T10:23:29Z",
      "updated_at": "2025-12-11T10:43:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2610026288",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610026288"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 89,
      "original_line": 89,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610039385",
      "pull_request_review_id": 3566738644,
      "id": 2610039385,
      "node_id": "PRRC_kwDOABII586bkgpZ",
      "diff_hunk": "@@ -33,58 +44,87 @@ template <class T, class E>\n class Expected\n {\n private:\n-    using ValueType = std::conditional_t<std::is_same_v<T, void>, std::monostate, T>;\n-    std::variant<ValueType, E> m_data;\n+    std::variant<T, E> m_data;\n \n public:\n-    constexpr Expected() : m_data{std::in_place_index_t<0>{}, ValueType{}} {}\n-    constexpr Expected(ValueType v) : m_data{std::in_place_index_t<0>{}, std::move(v)} {}\n+    constexpr Expected() : m_data{std::in_place_index<0>, T{}} {}\n+    constexpr Expected(T v) : m_data{std::in_place_index<0>, std::move(v)} {}\n     template <class Err>\n-    constexpr Expected(Unexpected<Err> u) : m_data{std::in_place_index_t<1>{}, std::move(u.err)}\n+    constexpr Expected(Unexpected<Err> u) : m_data{std::in_place_index<1>, std::move(u).error()}\n     {\n     }\n \n     constexpr bool has_value() const noexcept { return m_data.index() == 0; }\n     constexpr explicit operator bool() const noexcept { return has_value(); }\n \n-    constexpr const ValueType& value() const LIFETIMEBOUND\n+    constexpr const T& value() const& LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!has_value()) {\n+            throw BadExpectedAccess{};\n+        }\n         return std::get<0>(m_data);\n     }\n-    constexpr ValueType& value() LIFETIMEBOUND\n+    constexpr T& value() & LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!has_value()) {\n+            throw BadExpectedAccess{};\n+        }\n         return std::get<0>(m_data);\n     }\n+    constexpr T&& value() && LIFETIMEBOUND { return std::move(value()); }\n \n     template <class U>\n-    ValueType value_or(U&& default_value) const&\n+    T value_or(U&& default_value) const&\n     {\n         return has_value() ? value() : std::forward<U>(default_value);\n     }\n     template <class U>\n-    ValueType value_or(U&& default_value) &&\n+    T value_or(U&& default_value) &&\n     {\n         return has_value() ? std::move(value()) : std::forward<U>(default_value);\n     }\n \n-    constexpr const E& error() const LIFETIMEBOUND\n+    constexpr const E& error() const& noexcept LIFETIMEBOUND { return *Assert(std::get_if<1>(&m_data)); }\n+    constexpr E& error() & noexcept LIFETIMEBOUND { return *Assert(std::get_if<1>(&m_data)); }\n+    constexpr E&& error() && noexcept LIFETIMEBOUND { return std::move(error()); }\n+\n+    constexpr void swap(Expected& other) noexcept { m_data.swap(other.m_data); }\n+\n+    constexpr T& operator*() & noexcept LIFETIMEBOUND { return value(); }\n+    constexpr const T& operator*() const& noexcept LIFETIMEBOUND { return value(); }\n+    constexpr T&& operator*() && noexcept LIFETIMEBOUND { return std::move(value()); }\n+\n+    constexpr T* operator->() noexcept LIFETIMEBOUND { return &value(); }\n+    constexpr const T* operator->() const noexcept LIFETIMEBOUND { return &value(); }",
      "path": "src/util/expected.h",
      "position": 100,
      "original_position": 100,
      "commit_id": "faebb1654743adcc5888464f9a7167c315ecce1f",
      "original_commit_id": "fa874c9f050500dc521ef8d9c81b043687f0dcc7",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: Might be nice to have these assert before failing due to an exception being thrown inside of `noexcept`.",
      "created_at": "2025-12-11T10:27:33Z",
      "updated_at": "2025-12-11T10:43:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2610039385",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610039385"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": 93,
      "original_start_line": 93,
      "start_side": "RIGHT",
      "line": 98,
      "original_line": 98,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610120563",
      "pull_request_review_id": 3566850679,
      "id": 2610120563,
      "node_id": "PRRC_kwDOABII586bk0dz",
      "diff_hunk": "@@ -17,25 +22,39 @@ BOOST_AUTO_TEST_CASE(expected_value)\n         int x;\n     };\n     Expected<Obj, int> e{};\n-    BOOST_CHECK(e.value().x == 0);\n+    BOOST_CHECK_EQUAL(e.value().x, 0);\n \n     e = Obj{42};\n \n     BOOST_CHECK(e.has_value());",
      "path": "src/test/util_expected_tests.cpp",
      "position": 21,
      "original_position": 21,
      "commit_id": "faebb1654743adcc5888464f9a7167c315ecce1f",
      "original_commit_id": "fa0a1a6a4986c1a977bbcd5f48834bedeac5dffb",
      "in_reply_to_id": 2609758576,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I think it's slightly better as a general principle, to make test failures more intelligible. But it's very unlikely that anyone would even locally tweak the code being tested here so that it fails.",
      "created_at": "2025-12-11T10:53:17Z",
      "updated_at": "2025-12-11T10:53:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2610120563",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610120563"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 29,
      "original_line": 29,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610166839",
      "pull_request_review_id": 3566904450,
      "id": 2610166839,
      "node_id": "PRRC_kwDOABII586bk_w3",
      "diff_hunk": "@@ -33,58 +44,87 @@ template <class T, class E>\n class Expected\n {\n private:\n-    using ValueType = std::conditional_t<std::is_same_v<T, void>, std::monostate, T>;\n-    std::variant<ValueType, E> m_data;\n+    std::variant<T, E> m_data;\n \n public:\n-    constexpr Expected() : m_data{std::in_place_index_t<0>{}, ValueType{}} {}\n-    constexpr Expected(ValueType v) : m_data{std::in_place_index_t<0>{}, std::move(v)} {}\n+    constexpr Expected() : m_data{std::in_place_index<0>, T{}} {}\n+    constexpr Expected(T v) : m_data{std::in_place_index<0>, std::move(v)} {}\n     template <class Err>\n-    constexpr Expected(Unexpected<Err> u) : m_data{std::in_place_index_t<1>{}, std::move(u.err)}\n+    constexpr Expected(Unexpected<Err> u) : m_data{std::in_place_index<1>, std::move(u).error()}\n     {\n     }\n \n     constexpr bool has_value() const noexcept { return m_data.index() == 0; }\n     constexpr explicit operator bool() const noexcept { return has_value(); }\n \n-    constexpr const ValueType& value() const LIFETIMEBOUND\n+    constexpr const T& value() const& LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!has_value()) {\n+            throw BadExpectedAccess{};\n+        }\n         return std::get<0>(m_data);\n     }\n-    constexpr ValueType& value() LIFETIMEBOUND\n+    constexpr T& value() & LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!has_value()) {\n+            throw BadExpectedAccess{};\n+        }\n         return std::get<0>(m_data);\n     }\n+    constexpr T&& value() && LIFETIMEBOUND { return std::move(value()); }\n \n     template <class U>\n-    ValueType value_or(U&& default_value) const&\n+    T value_or(U&& default_value) const&\n     {\n         return has_value() ? value() : std::forward<U>(default_value);\n     }\n     template <class U>\n-    ValueType value_or(U&& default_value) &&\n+    T value_or(U&& default_value) &&\n     {\n         return has_value() ? std::move(value()) : std::forward<U>(default_value);\n     }\n \n-    constexpr const E& error() const LIFETIMEBOUND\n+    constexpr const E& error() const& noexcept LIFETIMEBOUND { return *Assert(std::get_if<1>(&m_data)); }\n+    constexpr E& error() & noexcept LIFETIMEBOUND { return *Assert(std::get_if<1>(&m_data)); }\n+    constexpr E&& error() && noexcept LIFETIMEBOUND { return std::move(error()); }",
      "path": "src/util/expected.h",
      "position": 91,
      "original_position": 91,
      "commit_id": "faebb1654743adcc5888464f9a7167c315ecce1f",
      "original_commit_id": "fa874c9f050500dc521ef8d9c81b043687f0dcc7",
      "in_reply_to_id": 2610026288,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> Is `this` in some kind of `&`-mode, making it call the method above?\r\n\r\nIt is not `this`, but `(*this)`, see https://eel.is/c++draft/expr.prim#id.general-2",
      "created_at": "2025-12-11T11:08:16Z",
      "updated_at": "2025-12-11T11:08:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2610166839",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610166839"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 89,
      "original_line": 89,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610168017",
      "pull_request_review_id": 3566905845,
      "id": 2610168017,
      "node_id": "PRRC_kwDOABII586blADR",
      "diff_hunk": "@@ -33,58 +44,87 @@ template <class T, class E>\n class Expected\n {\n private:\n-    using ValueType = std::conditional_t<std::is_same_v<T, void>, std::monostate, T>;\n-    std::variant<ValueType, E> m_data;\n+    std::variant<T, E> m_data;\n \n public:\n-    constexpr Expected() : m_data{std::in_place_index_t<0>{}, ValueType{}} {}\n-    constexpr Expected(ValueType v) : m_data{std::in_place_index_t<0>{}, std::move(v)} {}\n+    constexpr Expected() : m_data{std::in_place_index<0>, T{}} {}\n+    constexpr Expected(T v) : m_data{std::in_place_index<0>, std::move(v)} {}\n     template <class Err>\n-    constexpr Expected(Unexpected<Err> u) : m_data{std::in_place_index_t<1>{}, std::move(u.err)}\n+    constexpr Expected(Unexpected<Err> u) : m_data{std::in_place_index<1>, std::move(u).error()}\n     {\n     }\n \n     constexpr bool has_value() const noexcept { return m_data.index() == 0; }\n     constexpr explicit operator bool() const noexcept { return has_value(); }\n \n-    constexpr const ValueType& value() const LIFETIMEBOUND\n+    constexpr const T& value() const& LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!has_value()) {\n+            throw BadExpectedAccess{};\n+        }\n         return std::get<0>(m_data);\n     }\n-    constexpr ValueType& value() LIFETIMEBOUND\n+    constexpr T& value() & LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!has_value()) {\n+            throw BadExpectedAccess{};\n+        }\n         return std::get<0>(m_data);\n     }\n+    constexpr T&& value() && LIFETIMEBOUND { return std::move(value()); }\n \n     template <class U>\n-    ValueType value_or(U&& default_value) const&\n+    T value_or(U&& default_value) const&\n     {\n         return has_value() ? value() : std::forward<U>(default_value);\n     }\n     template <class U>\n-    ValueType value_or(U&& default_value) &&\n+    T value_or(U&& default_value) &&\n     {\n         return has_value() ? std::move(value()) : std::forward<U>(default_value);\n     }\n \n-    constexpr const E& error() const LIFETIMEBOUND\n+    constexpr const E& error() const& noexcept LIFETIMEBOUND { return *Assert(std::get_if<1>(&m_data)); }\n+    constexpr E& error() & noexcept LIFETIMEBOUND { return *Assert(std::get_if<1>(&m_data)); }\n+    constexpr E&& error() && noexcept LIFETIMEBOUND { return std::move(error()); }\n+\n+    constexpr void swap(Expected& other) noexcept { m_data.swap(other.m_data); }\n+\n+    constexpr T& operator*() & noexcept LIFETIMEBOUND { return value(); }\n+    constexpr const T& operator*() const& noexcept LIFETIMEBOUND { return value(); }\n+    constexpr T&& operator*() && noexcept LIFETIMEBOUND { return std::move(value()); }\n+\n+    constexpr T* operator->() noexcept LIFETIMEBOUND { return &value(); }\n+    constexpr const T* operator->() const noexcept LIFETIMEBOUND { return &value(); }",
      "path": "src/util/expected.h",
      "position": 100,
      "original_position": 100,
      "commit_id": "faebb1654743adcc5888464f9a7167c315ecce1f",
      "original_commit_id": "fa874c9f050500dc521ef8d9c81b043687f0dcc7",
      "in_reply_to_id": 2610039385,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Why? Just seems more code for no reason?",
      "created_at": "2025-12-11T11:08:41Z",
      "updated_at": "2025-12-11T11:08:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2610168017",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610168017"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": 93,
      "original_start_line": 93,
      "start_side": "RIGHT",
      "line": 98,
      "original_line": 98,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610602576",
      "pull_request_review_id": 3567466843,
      "id": 2610602576,
      "node_id": "PRRC_kwDOABII586bmqJQ",
      "diff_hunk": "@@ -33,58 +44,87 @@ template <class T, class E>\n class Expected\n {\n private:\n-    using ValueType = std::conditional_t<std::is_same_v<T, void>, std::monostate, T>;\n-    std::variant<ValueType, E> m_data;\n+    std::variant<T, E> m_data;\n \n public:\n-    constexpr Expected() : m_data{std::in_place_index_t<0>{}, ValueType{}} {}\n-    constexpr Expected(ValueType v) : m_data{std::in_place_index_t<0>{}, std::move(v)} {}\n+    constexpr Expected() : m_data{std::in_place_index<0>, T{}} {}\n+    constexpr Expected(T v) : m_data{std::in_place_index<0>, std::move(v)} {}\n     template <class Err>\n-    constexpr Expected(Unexpected<Err> u) : m_data{std::in_place_index_t<1>{}, std::move(u.err)}\n+    constexpr Expected(Unexpected<Err> u) : m_data{std::in_place_index<1>, std::move(u).error()}\n     {\n     }\n \n     constexpr bool has_value() const noexcept { return m_data.index() == 0; }\n     constexpr explicit operator bool() const noexcept { return has_value(); }\n \n-    constexpr const ValueType& value() const LIFETIMEBOUND\n+    constexpr const T& value() const& LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!has_value()) {\n+            throw BadExpectedAccess{};\n+        }\n         return std::get<0>(m_data);\n     }\n-    constexpr ValueType& value() LIFETIMEBOUND\n+    constexpr T& value() & LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!has_value()) {\n+            throw BadExpectedAccess{};\n+        }\n         return std::get<0>(m_data);\n     }\n+    constexpr T&& value() && LIFETIMEBOUND { return std::move(value()); }\n \n     template <class U>\n-    ValueType value_or(U&& default_value) const&\n+    T value_or(U&& default_value) const&\n     {\n         return has_value() ? value() : std::forward<U>(default_value);\n     }\n     template <class U>\n-    ValueType value_or(U&& default_value) &&\n+    T value_or(U&& default_value) &&\n     {\n         return has_value() ? std::move(value()) : std::forward<U>(default_value);\n     }\n \n-    constexpr const E& error() const LIFETIMEBOUND\n+    constexpr const E& error() const& noexcept LIFETIMEBOUND { return *Assert(std::get_if<1>(&m_data)); }\n+    constexpr E& error() & noexcept LIFETIMEBOUND { return *Assert(std::get_if<1>(&m_data)); }\n+    constexpr E&& error() && noexcept LIFETIMEBOUND { return std::move(error()); }\n+\n+    constexpr void swap(Expected& other) noexcept { m_data.swap(other.m_data); }\n+\n+    constexpr T& operator*() & noexcept LIFETIMEBOUND { return value(); }\n+    constexpr const T& operator*() const& noexcept LIFETIMEBOUND { return value(); }\n+    constexpr T&& operator*() && noexcept LIFETIMEBOUND { return std::move(value()); }\n+\n+    constexpr T* operator->() noexcept LIFETIMEBOUND { return &value(); }\n+    constexpr const T* operator->() const noexcept LIFETIMEBOUND { return &value(); }",
      "path": "src/util/expected.h",
      "position": 100,
      "original_position": 100,
      "commit_id": "faebb1654743adcc5888464f9a7167c315ecce1f",
      "original_commit_id": "fa874c9f050500dc521ef8d9c81b043687f0dcc7",
      "in_reply_to_id": 2610039385,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "It's about failing with a clearer stack trace/message. An exception will unwind the stack before giving a stack-trace (depending upon how the compiler treats exceptions within `noexcept`?).\r\n\r\nTried adding `*e` in the unit tests and it doesn't pinpoint the offending line, but gets by on checkpoints.\r\n\r\n```\r\n ./build/bin/test_bitcoin -t util_expected_tests\r\nRunning 9 test cases...\r\nterminate called after throwing an instance of 'util::BadExpectedAccess'\r\n  what():  Bad util::Expected access\r\nunknown location(0): fatal error: in \"util_expected_tests/expected_value_throws\": signal: SIGABRT (application abort requested)\r\n../src/test/util_expected_tests.cpp(73): last checkpoint\r\n```",
      "created_at": "2025-12-11T13:31:31Z",
      "updated_at": "2025-12-11T13:31:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2610602576",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610602576"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": 93,
      "original_start_line": 93,
      "start_side": "RIGHT",
      "line": 98,
      "original_line": 98,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610606350",
      "pull_request_review_id": 3567470932,
      "id": 2610606350,
      "node_id": "PRRC_kwDOABII586bmrEO",
      "diff_hunk": "@@ -33,58 +44,87 @@ template <class T, class E>\n class Expected\n {\n private:\n-    using ValueType = std::conditional_t<std::is_same_v<T, void>, std::monostate, T>;\n-    std::variant<ValueType, E> m_data;\n+    std::variant<T, E> m_data;\n \n public:\n-    constexpr Expected() : m_data{std::in_place_index_t<0>{}, ValueType{}} {}\n-    constexpr Expected(ValueType v) : m_data{std::in_place_index_t<0>{}, std::move(v)} {}\n+    constexpr Expected() : m_data{std::in_place_index<0>, T{}} {}\n+    constexpr Expected(T v) : m_data{std::in_place_index<0>, std::move(v)} {}\n     template <class Err>\n-    constexpr Expected(Unexpected<Err> u) : m_data{std::in_place_index_t<1>{}, std::move(u.err)}\n+    constexpr Expected(Unexpected<Err> u) : m_data{std::in_place_index<1>, std::move(u).error()}\n     {\n     }\n \n     constexpr bool has_value() const noexcept { return m_data.index() == 0; }\n     constexpr explicit operator bool() const noexcept { return has_value(); }\n \n-    constexpr const ValueType& value() const LIFETIMEBOUND\n+    constexpr const T& value() const& LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!has_value()) {\n+            throw BadExpectedAccess{};\n+        }\n         return std::get<0>(m_data);\n     }\n-    constexpr ValueType& value() LIFETIMEBOUND\n+    constexpr T& value() & LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!has_value()) {\n+            throw BadExpectedAccess{};\n+        }\n         return std::get<0>(m_data);\n     }\n+    constexpr T&& value() && LIFETIMEBOUND { return std::move(value()); }\n \n     template <class U>\n-    ValueType value_or(U&& default_value) const&\n+    T value_or(U&& default_value) const&\n     {\n         return has_value() ? value() : std::forward<U>(default_value);\n     }\n     template <class U>\n-    ValueType value_or(U&& default_value) &&\n+    T value_or(U&& default_value) &&\n     {\n         return has_value() ? std::move(value()) : std::forward<U>(default_value);\n     }\n \n-    constexpr const E& error() const LIFETIMEBOUND\n+    constexpr const E& error() const& noexcept LIFETIMEBOUND { return *Assert(std::get_if<1>(&m_data)); }\n+    constexpr E& error() & noexcept LIFETIMEBOUND { return *Assert(std::get_if<1>(&m_data)); }\n+    constexpr E&& error() && noexcept LIFETIMEBOUND { return std::move(error()); }",
      "path": "src/util/expected.h",
      "position": 91,
      "original_position": 91,
      "commit_id": "faebb1654743adcc5888464f9a7167c315ecce1f",
      "original_commit_id": "fa874c9f050500dc521ef8d9c81b043687f0dcc7",
      "in_reply_to_id": 2610026288,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Can't read that. :grin: ",
      "created_at": "2025-12-11T13:32:34Z",
      "updated_at": "2025-12-11T13:32:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2610606350",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610606350"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 89,
      "original_line": 89,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610629951",
      "pull_request_review_id": 3567498610,
      "id": 2610629951,
      "node_id": "PRRC_kwDOABII586bmw0_",
      "diff_hunk": "@@ -33,58 +44,87 @@ template <class T, class E>\n class Expected\n {\n private:\n-    using ValueType = std::conditional_t<std::is_same_v<T, void>, std::monostate, T>;\n-    std::variant<ValueType, E> m_data;\n+    std::variant<T, E> m_data;\n \n public:\n-    constexpr Expected() : m_data{std::in_place_index_t<0>{}, ValueType{}} {}\n-    constexpr Expected(ValueType v) : m_data{std::in_place_index_t<0>{}, std::move(v)} {}\n+    constexpr Expected() : m_data{std::in_place_index<0>, T{}} {}\n+    constexpr Expected(T v) : m_data{std::in_place_index<0>, std::move(v)} {}\n     template <class Err>\n-    constexpr Expected(Unexpected<Err> u) : m_data{std::in_place_index_t<1>{}, std::move(u.err)}\n+    constexpr Expected(Unexpected<Err> u) : m_data{std::in_place_index<1>, std::move(u).error()}\n     {\n     }\n \n     constexpr bool has_value() const noexcept { return m_data.index() == 0; }\n     constexpr explicit operator bool() const noexcept { return has_value(); }\n \n-    constexpr const ValueType& value() const LIFETIMEBOUND\n+    constexpr const T& value() const& LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!has_value()) {\n+            throw BadExpectedAccess{};\n+        }\n         return std::get<0>(m_data);\n     }\n-    constexpr ValueType& value() LIFETIMEBOUND\n+    constexpr T& value() & LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!has_value()) {\n+            throw BadExpectedAccess{};\n+        }\n         return std::get<0>(m_data);\n     }\n+    constexpr T&& value() && LIFETIMEBOUND { return std::move(value()); }\n \n     template <class U>\n-    ValueType value_or(U&& default_value) const&\n+    T value_or(U&& default_value) const&\n     {\n         return has_value() ? value() : std::forward<U>(default_value);\n     }\n     template <class U>\n-    ValueType value_or(U&& default_value) &&\n+    T value_or(U&& default_value) &&\n     {\n         return has_value() ? std::move(value()) : std::forward<U>(default_value);\n     }\n \n-    constexpr const E& error() const LIFETIMEBOUND\n+    constexpr const E& error() const& noexcept LIFETIMEBOUND { return *Assert(std::get_if<1>(&m_data)); }\n+    constexpr E& error() & noexcept LIFETIMEBOUND { return *Assert(std::get_if<1>(&m_data)); }\n+    constexpr E&& error() && noexcept LIFETIMEBOUND { return std::move(error()); }\n+\n+    constexpr void swap(Expected& other) noexcept { m_data.swap(other.m_data); }\n+\n+    constexpr T& operator*() & noexcept LIFETIMEBOUND { return value(); }\n+    constexpr const T& operator*() const& noexcept LIFETIMEBOUND { return value(); }\n+    constexpr T&& operator*() && noexcept LIFETIMEBOUND { return std::move(value()); }\n+\n+    constexpr T* operator->() noexcept LIFETIMEBOUND { return &value(); }\n+    constexpr const T* operator->() const noexcept LIFETIMEBOUND { return &value(); }",
      "path": "src/util/expected.h",
      "position": 100,
      "original_position": 100,
      "commit_id": "faebb1654743adcc5888464f9a7167c315ecce1f",
      "original_commit_id": "fa874c9f050500dc521ef8d9c81b043687f0dcc7",
      "in_reply_to_id": 2610039385,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Yes, this is also the behavior that you get in C++23 (if you are lucky). If you are unlucky, you'll just get the silent UB:\r\n\r\nhttps://godbolt.org/z/jYxqvoejn\r\n\r\n```\r\n/../include/c++/v1/__expected/expected.h:811: libc++ Hardening assertion this->__has_val() failed: expected::operator* requires the expected to contain a value\r\nProgram terminated with signal: SIGSEGV\r\n```\r\n\r\nAlso, this is the behavior with an assert/abort, so I don't see the difference!?",
      "created_at": "2025-12-11T13:39:32Z",
      "updated_at": "2025-12-11T13:40:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2610629951",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610629951"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": 93,
      "original_start_line": 93,
      "start_side": "RIGHT",
      "line": 98,
      "original_line": 98,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610641558",
      "pull_request_review_id": 3567511527,
      "id": 2610641558,
      "node_id": "PRRC_kwDOABII586bmzqW",
      "diff_hunk": "@@ -33,58 +44,87 @@ template <class T, class E>\n class Expected\n {\n private:\n-    using ValueType = std::conditional_t<std::is_same_v<T, void>, std::monostate, T>;\n-    std::variant<ValueType, E> m_data;\n+    std::variant<T, E> m_data;\n \n public:\n-    constexpr Expected() : m_data{std::in_place_index_t<0>{}, ValueType{}} {}\n-    constexpr Expected(ValueType v) : m_data{std::in_place_index_t<0>{}, std::move(v)} {}\n+    constexpr Expected() : m_data{std::in_place_index<0>, T{}} {}\n+    constexpr Expected(T v) : m_data{std::in_place_index<0>, std::move(v)} {}\n     template <class Err>\n-    constexpr Expected(Unexpected<Err> u) : m_data{std::in_place_index_t<1>{}, std::move(u.err)}\n+    constexpr Expected(Unexpected<Err> u) : m_data{std::in_place_index<1>, std::move(u).error()}\n     {\n     }\n \n     constexpr bool has_value() const noexcept { return m_data.index() == 0; }\n     constexpr explicit operator bool() const noexcept { return has_value(); }\n \n-    constexpr const ValueType& value() const LIFETIMEBOUND\n+    constexpr const T& value() const& LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!has_value()) {\n+            throw BadExpectedAccess{};\n+        }\n         return std::get<0>(m_data);\n     }\n-    constexpr ValueType& value() LIFETIMEBOUND\n+    constexpr T& value() & LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!has_value()) {\n+            throw BadExpectedAccess{};\n+        }\n         return std::get<0>(m_data);\n     }\n+    constexpr T&& value() && LIFETIMEBOUND { return std::move(value()); }\n \n     template <class U>\n-    ValueType value_or(U&& default_value) const&\n+    T value_or(U&& default_value) const&\n     {\n         return has_value() ? value() : std::forward<U>(default_value);\n     }\n     template <class U>\n-    ValueType value_or(U&& default_value) &&\n+    T value_or(U&& default_value) &&\n     {\n         return has_value() ? std::move(value()) : std::forward<U>(default_value);\n     }\n \n-    constexpr const E& error() const LIFETIMEBOUND\n+    constexpr const E& error() const& noexcept LIFETIMEBOUND { return *Assert(std::get_if<1>(&m_data)); }\n+    constexpr E& error() & noexcept LIFETIMEBOUND { return *Assert(std::get_if<1>(&m_data)); }\n+    constexpr E&& error() && noexcept LIFETIMEBOUND { return std::move(error()); }\n+\n+    constexpr void swap(Expected& other) noexcept { m_data.swap(other.m_data); }\n+\n+    constexpr T& operator*() & noexcept LIFETIMEBOUND { return value(); }\n+    constexpr const T& operator*() const& noexcept LIFETIMEBOUND { return value(); }\n+    constexpr T&& operator*() && noexcept LIFETIMEBOUND { return std::move(value()); }\n+\n+    constexpr T* operator->() noexcept LIFETIMEBOUND { return &value(); }\n+    constexpr const T* operator->() const noexcept LIFETIMEBOUND { return &value(); }",
      "path": "src/util/expected.h",
      "position": 100,
      "original_position": 100,
      "commit_id": "faebb1654743adcc5888464f9a7167c315ecce1f",
      "original_commit_id": "fa874c9f050500dc521ef8d9c81b043687f0dcc7",
      "in_reply_to_id": 2610039385,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Yeah, we don't need to spoil ourselves before the switcharoo to `std::expected`. :)",
      "created_at": "2025-12-11T13:42:58Z",
      "updated_at": "2025-12-11T13:42:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2610641558",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610641558"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": 93,
      "original_start_line": 93,
      "start_side": "RIGHT",
      "line": 98,
      "original_line": 98,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610742812",
      "pull_request_review_id": 3567634073,
      "id": 2610742812,
      "node_id": "PRRC_kwDOABII586bnMYc",
      "diff_hunk": "@@ -33,58 +44,87 @@ template <class T, class E>\n class Expected\n {\n private:\n-    using ValueType = std::conditional_t<std::is_same_v<T, void>, std::monostate, T>;\n-    std::variant<ValueType, E> m_data;\n+    std::variant<T, E> m_data;\n \n public:\n-    constexpr Expected() : m_data{std::in_place_index_t<0>{}, ValueType{}} {}\n-    constexpr Expected(ValueType v) : m_data{std::in_place_index_t<0>{}, std::move(v)} {}\n+    constexpr Expected() : m_data{std::in_place_index<0>, T{}} {}\n+    constexpr Expected(T v) : m_data{std::in_place_index<0>, std::move(v)} {}\n     template <class Err>\n-    constexpr Expected(Unexpected<Err> u) : m_data{std::in_place_index_t<1>{}, std::move(u.err)}\n+    constexpr Expected(Unexpected<Err> u) : m_data{std::in_place_index<1>, std::move(u).error()}\n     {\n     }\n \n     constexpr bool has_value() const noexcept { return m_data.index() == 0; }\n     constexpr explicit operator bool() const noexcept { return has_value(); }\n \n-    constexpr const ValueType& value() const LIFETIMEBOUND\n+    constexpr const T& value() const& LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!has_value()) {\n+            throw BadExpectedAccess{};\n+        }\n         return std::get<0>(m_data);\n     }\n-    constexpr ValueType& value() LIFETIMEBOUND\n+    constexpr T& value() & LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!has_value()) {\n+            throw BadExpectedAccess{};\n+        }\n         return std::get<0>(m_data);\n     }\n+    constexpr T&& value() && LIFETIMEBOUND { return std::move(value()); }\n \n     template <class U>\n-    ValueType value_or(U&& default_value) const&\n+    T value_or(U&& default_value) const&\n     {\n         return has_value() ? value() : std::forward<U>(default_value);\n     }\n     template <class U>\n-    ValueType value_or(U&& default_value) &&\n+    T value_or(U&& default_value) &&\n     {\n         return has_value() ? std::move(value()) : std::forward<U>(default_value);\n     }\n \n-    constexpr const E& error() const LIFETIMEBOUND\n+    constexpr const E& error() const& noexcept LIFETIMEBOUND { return *Assert(std::get_if<1>(&m_data)); }\n+    constexpr E& error() & noexcept LIFETIMEBOUND { return *Assert(std::get_if<1>(&m_data)); }\n+    constexpr E&& error() && noexcept LIFETIMEBOUND { return std::move(error()); }",
      "path": "src/util/expected.h",
      "position": 91,
      "original_position": 91,
      "commit_id": "faebb1654743adcc5888464f9a7167c315ecce1f",
      "original_commit_id": "fa874c9f050500dc521ef8d9c81b043687f0dcc7",
      "in_reply_to_id": 2610026288,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> Can't read that. \r\n\r\ni'd say it says that `error()` in this context is `(*this).error()`. So it calls `error()&` and not `error()&&`. If you want to (incorrectly) recursively call error(), you'd have to add a cast: `std::move(*this).error();`",
      "created_at": "2025-12-11T14:11:39Z",
      "updated_at": "2025-12-11T14:11:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2610742812",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610742812"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 89,
      "original_line": 89,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2628209646",
      "pull_request_review_id": 3589136730,
      "id": 2628209646,
      "node_id": "PRRC_kwDOABII586cp0vu",
      "diff_hunk": "@@ -55,12 +60,16 @@ class Expected\n \n     constexpr const ValueType& value() const LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!has_value()) {\n+            throw BadExpectedAccess{};\n+        }\n         return std::get<0>(m_data);\n     }\n     constexpr ValueType& value() LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!has_value()) {\n+            throw BadExpectedAccess{};",
      "path": "src/util/expected.h",
      "position": 69,
      "original_position": 33,
      "commit_id": "faebb1654743adcc5888464f9a7167c315ecce1f",
      "original_commit_id": "fa5a49c988c065526105f7d30c53298305f6e8c5",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"util: Make Expected::value() throw\" (fa5a49c988c065526105f7d30c53298305f6e8c5)\r\n\r\nThe change seems unsafe because none of the other functions currently calling `value()` are switched to use `operator*` instead, so they will now throw instead of assert if the value is not set. This would make it dangerous to swap the `util::Expected` class with `std::expected` in the future.\r\n\r\nI'd recommend reconsidering the suggestion from https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2607689549 and avoiding unnecessary uses of `value()` and `has_value()` preferring to use c++'s built in operators, and setting a better example for other code to follow. Alternately more asserts could be added to fix this. This is also sort-of fixed in a later commit fa9aad738a9bfd3969aa4e1f19f87edadc69f455 adding noexcept to pointer operators, but asserts would probably lead to clearer runtime errors than noexcept violations.\r\n\r\n",
      "created_at": "2025-12-17T18:41:07Z",
      "updated_at": "2025-12-17T19:13:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2628209646",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2628209646"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 70,
      "original_line": 70,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2628245089",
      "pull_request_review_id": 3589136730,
      "id": 2628245089,
      "node_id": "PRRC_kwDOABII586cp9Zh",
      "diff_hunk": "@@ -96,11 +94,46 @@ class Expected\n         return std::get<1>(m_data);\n     }\n \n-    constexpr ValueType& operator*() LIFETIMEBOUND { return value(); }\n-    constexpr const ValueType& operator*() const LIFETIMEBOUND { return value(); }\n+    constexpr T& operator*() LIFETIMEBOUND { return value(); }\n+    constexpr const T& operator*() const LIFETIMEBOUND { return value(); }\n \n-    constexpr ValueType* operator->() LIFETIMEBOUND { return &value(); }\n-    constexpr const ValueType* operator->() const LIFETIMEBOUND { return &value(); }\n+    constexpr T* operator->() LIFETIMEBOUND { return &value(); }\n+    constexpr const T* operator->() const LIFETIMEBOUND { return &value(); }\n+};\n+\n+template <class E>\n+class Expected<void, E>",
      "path": "src/util/expected.h",
      "position": 104,
      "original_position": 74,
      "commit_id": "faebb1654743adcc5888464f9a7167c315ecce1f",
      "original_commit_id": "fa3d6c760db3dafbaa530401893a40fc5f6575f9",
      "in_reply_to_id": 2607767971,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2609835030\r\n\r\n> This just brings back the problem we are trying to solve\r\n\r\nI don't think it does. The problem I want the void specialization to solve is leaking the std::monostate values to code that isn't otherwise using it and is expecting void, making it harder to use std::expected in places like template functions or generic lambdas. I don't see std::expected accepting (not returning) `std::monostate{}` as a comparable problem, or as a  real problem, even though it could be avoided by declaring a deleted constructor. The current approach does seem ok though, just repetitive.",
      "created_at": "2025-12-17T18:50:14Z",
      "updated_at": "2025-12-17T19:13:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2628245089",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2628245089"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": 101,
      "original_start_line": 104,
      "start_side": "RIGHT",
      "line": 102,
      "original_line": 102,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2628289525",
      "pull_request_review_id": 3589136730,
      "id": 2628289525,
      "node_id": "PRRC_kwDOABII586cqIP1",
      "diff_hunk": "@@ -88,11 +88,12 @@ class Expected\n     constexpr E& error() & noexcept LIFETIMEBOUND { return *Assert(std::get_if<1>(&m_data)); }\n     constexpr E&& error() && noexcept LIFETIMEBOUND { return std::move(error()); }\n \n-    constexpr T& operator*() LIFETIMEBOUND { return value(); }\n-    constexpr const T& operator*() const LIFETIMEBOUND { return value(); }\n+    constexpr T& operator*() & noexcept LIFETIMEBOUND { return value(); }\n+    constexpr const T& operator*() const& noexcept LIFETIMEBOUND { return value(); }\n+    constexpr T&& operator*() && noexcept LIFETIMEBOUND { return std::move(value()); }\n \n-    constexpr T* operator->() LIFETIMEBOUND { return &value(); }\n-    constexpr const T* operator->() const LIFETIMEBOUND { return &value(); }\n+    constexpr T* operator->() noexcept LIFETIMEBOUND { return &value(); }",
      "path": "src/util/expected.h",
      "position": 99,
      "original_position": 12,
      "commit_id": "faebb1654743adcc5888464f9a7167c315ecce1f",
      "original_commit_id": "fa9aad738a9bfd3969aa4e1f19f87edadc69f455",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"util: Implement Expected::operator*()&&\" (fa9aad738a9bfd3969aa4e1f19f87edadc69f455)\n\nWould be good for commit message to mention it is also adding noexcept to other overloads",
      "created_at": "2025-12-17T19:01:48Z",
      "updated_at": "2025-12-17T19:13:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2628289525",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2628289525"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 97,
      "original_line": 97,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2629994409",
      "pull_request_review_id": 3591292470,
      "id": 2629994409,
      "node_id": "PRRC_kwDOABII586cwoep",
      "diff_hunk": "@@ -55,12 +60,16 @@ class Expected\n \n     constexpr const ValueType& value() const LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!has_value()) {\n+            throw BadExpectedAccess{};\n+        }\n         return std::get<0>(m_data);\n     }\n     constexpr ValueType& value() LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!has_value()) {\n+            throw BadExpectedAccess{};",
      "path": "src/util/expected.h",
      "position": 69,
      "original_position": 33,
      "commit_id": "faebb1654743adcc5888464f9a7167c315ecce1f",
      "original_commit_id": "fa5a49c988c065526105f7d30c53298305f6e8c5",
      "in_reply_to_id": 2628209646,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> The change seems unsafe because none of the other functions currently calling `value()` are switched to use `operator*` instead, so they will now throw instead of assert if the value is not set. This would make it dangerous to swap the `util::Expected` class with `std::expected` in the future.\r\n\r\nI understand that switching `util::Expected::operator*` to `std::expected::operator*` is unsafe, but this is documented in https://en.cppreference.com/w/cpp/utility/expected/operator%252A.html:\r\n\r\n> If has_value() is false, the behavior is undefined. (until C++26)\r\n\r\nThough, that is true with or without this pull request, so it seems unrelated.\r\n\r\nAs for this implementation: I think it is perfectly fine to do whatever on UB, and asserting, or throwing seems better than UB.\r\n\r\n\r\n\r\n> but asserts would probably lead to clearer runtime errors than noexcept violations.\r\n\r\nI don't understand why that would be. The only difference with an assert is that it prints the file name and line number, but this will just be a inside this util header, not in the place in the code where the assertion happens. So reading the tb is needed anyway. For reference, with `noexecpt`, it looks like:\r\n\r\n```\r\nvalgrind --tool=none ./bld-cmake/bin/test_bitcoin -t util_expected_tests/expected_error --catch_system_errors=no\r\n==1207793== Nulgrind, the minimal Valgrind tool\r\n...\r\n==1207793== Command: ./bld-cmake/bin/test_bitcoin -t util_expected_tests/expected_error --catch_system_errors=no\r\n==1207793== \r\nRunning 1 test case...\r\nterminate called after throwing an instance of 'util::BadExpectedAccess'\r\n  what():  Bad util::Expected access\r\n==1207793== \r\n==1207793== Process terminating with default action of signal 6 (SIGABRT): dumping core\r\n...\r\n==1207793==    by 0x4F1A98A: util_expected_tests::expected_error::test_method() (expected.h:117)\r\n==1207793==    by 0x4F19B56: util_expected_tests::expected_error_invoker() (./test/util_expected_tests.cpp:79)\r\n...\r\nAborted (core dumped)\r\n```\r\n\r\nI think this is perfectly fine, and I don't see the benefit of the assertion.",
      "created_at": "2025-12-18T08:01:02Z",
      "updated_at": "2025-12-18T08:01:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2629994409",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2629994409"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 70,
      "original_line": 70,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2635154646",
      "pull_request_review_id": 3598680049,
      "id": 2635154646,
      "node_id": "PRRC_kwDOABII586dEUTW",
      "diff_hunk": "@@ -88,11 +88,12 @@ class Expected\n     constexpr E& error() & noexcept LIFETIMEBOUND { return *Assert(std::get_if<1>(&m_data)); }\n     constexpr E&& error() && noexcept LIFETIMEBOUND { return std::move(error()); }\n \n-    constexpr T& operator*() LIFETIMEBOUND { return value(); }\n-    constexpr const T& operator*() const LIFETIMEBOUND { return value(); }\n+    constexpr T& operator*() & noexcept LIFETIMEBOUND { return value(); }\n+    constexpr const T& operator*() const& noexcept LIFETIMEBOUND { return value(); }\n+    constexpr T&& operator*() && noexcept LIFETIMEBOUND { return std::move(value()); }\n \n-    constexpr T* operator->() LIFETIMEBOUND { return &value(); }\n-    constexpr const T* operator->() const LIFETIMEBOUND { return &value(); }\n+    constexpr T* operator->() noexcept LIFETIMEBOUND { return &value(); }",
      "path": "src/util/expected.h",
      "position": 99,
      "original_position": 12,
      "commit_id": "faebb1654743adcc5888464f9a7167c315ecce1f",
      "original_commit_id": "fa9aad738a9bfd3969aa4e1f19f87edadc69f455",
      "in_reply_to_id": 2628289525,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "thx, done",
      "created_at": "2025-12-19T13:46:38Z",
      "updated_at": "2025-12-19T13:46:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2635154646",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2635154646"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 97,
      "original_line": 97,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2660770706",
      "pull_request_review_id": 3626015857,
      "id": 2660770706,
      "node_id": "PRRC_kwDOABII586emCOS",
      "diff_hunk": "@@ -33,58 +44,87 @@ template <class T, class E>\n class Expected\n {\n private:\n-    using ValueType = std::conditional_t<std::is_same_v<T, void>, std::monostate, T>;\n-    std::variant<ValueType, E> m_data;\n+    std::variant<T, E> m_data;\n \n public:\n-    constexpr Expected() : m_data{std::in_place_index_t<0>{}, ValueType{}} {}\n-    constexpr Expected(ValueType v) : m_data{std::in_place_index_t<0>{}, std::move(v)} {}\n+    constexpr Expected() : m_data{std::in_place_index<0>, T{}} {}\n+    constexpr Expected(T v) : m_data{std::in_place_index<0>, std::move(v)} {}\n     template <class Err>\n-    constexpr Expected(Unexpected<Err> u) : m_data{std::in_place_index_t<1>{}, std::move(u.err)}\n+    constexpr Expected(Unexpected<Err> u) : m_data{std::in_place_index<1>, std::move(u).error()}\n     {\n     }\n \n     constexpr bool has_value() const noexcept { return m_data.index() == 0; }\n     constexpr explicit operator bool() const noexcept { return has_value(); }\n \n-    constexpr const ValueType& value() const LIFETIMEBOUND\n+    constexpr const T& value() const& LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!has_value()) {\n+            throw BadExpectedAccess{};\n+        }\n         return std::get<0>(m_data);\n     }\n-    constexpr ValueType& value() LIFETIMEBOUND\n+    constexpr T& value() & LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!has_value()) {\n+            throw BadExpectedAccess{};\n+        }\n         return std::get<0>(m_data);\n     }\n+    constexpr T&& value() && LIFETIMEBOUND { return std::move(value()); }\n \n     template <class U>\n-    ValueType value_or(U&& default_value) const&\n+    T value_or(U&& default_value) const&\n     {\n         return has_value() ? value() : std::forward<U>(default_value);\n     }\n     template <class U>\n-    ValueType value_or(U&& default_value) &&\n+    T value_or(U&& default_value) &&\n     {\n         return has_value() ? std::move(value()) : std::forward<U>(default_value);\n     }\n \n-    constexpr const E& error() const LIFETIMEBOUND\n+    constexpr const E& error() const& noexcept LIFETIMEBOUND { return *Assert(std::get_if<1>(&m_data)); }\n+    constexpr E& error() & noexcept LIFETIMEBOUND { return *Assert(std::get_if<1>(&m_data)); }\n+    constexpr E&& error() && noexcept LIFETIMEBOUND { return std::move(error()); }\n+\n+    constexpr void swap(Expected& other) noexcept { m_data.swap(other.m_data); }",
      "path": "src/util/expected.h",
      "position": 93,
      "original_position": 93,
      "commit_id": "faebb1654743adcc5888464f9a7167c315ecce1f",
      "original_commit_id": "faebb1654743adcc5888464f9a7167c315ecce1f",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "review note: `std::variant::swap` is not unconditionally `noexcept` but [has a specification](https://en.cppreference.com/w/cpp/utility/variant/swap.html#:~:text=rhs%2E-,noexcept,is%5Fnothrow%5Fswappable%5Fv%3CTypes%3E%29%20%26%26%20%2E%2E%2E%29%29). However, I think for our minimal implementation just letting it `std::terminate` is fine.",
      "created_at": "2026-01-05T09:08:47Z",
      "updated_at": "2026-01-05T09:11:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2660770706",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2660770706"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 91,
      "original_line": 91,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2691294873",
      "pull_request_review_id": 3661787605,
      "id": 2691294873,
      "node_id": "PRRC_kwDOABII586gaeaZ",
      "diff_hunk": "@@ -55,12 +60,16 @@ class Expected\n \n     constexpr const ValueType& value() const LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!has_value()) {\n+            throw BadExpectedAccess{};\n+        }\n         return std::get<0>(m_data);\n     }\n     constexpr ValueType& value() LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!has_value()) {\n+            throw BadExpectedAccess{};",
      "path": "src/util/expected.h",
      "position": 69,
      "original_position": 33,
      "commit_id": "faebb1654743adcc5888464f9a7167c315ecce1f",
      "original_commit_id": "fa5a49c988c065526105f7d30c53298305f6e8c5",
      "in_reply_to_id": 2628209646,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "@ryanofsky No rush, but if you get a chance to take another look here before branch-off [1], that'd be great. I think the pull is currently blocked because of your use of the spicy word \"unsafe\" :sweat_smile: \r\n\r\n[1] It would be good to get this in before branch-off. Otherwise, there could be (unlikely) compile-failures or silent performance regressions for backports due to https://github.com/bitcoin/bitcoin/pull/34032#issuecomment-3633196602",
      "created_at": "2026-01-14T17:03:01Z",
      "updated_at": "2026-01-14T17:03:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2691294873",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2691294873"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 70,
      "original_line": 70,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2694552387",
      "pull_request_review_id": 3665716942,
      "id": 2694552387,
      "node_id": "PRRC_kwDOABII586gm5tD",
      "diff_hunk": "@@ -55,12 +60,16 @@ class Expected\n \n     constexpr const ValueType& value() const LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!has_value()) {\n+            throw BadExpectedAccess{};\n+        }\n         return std::get<0>(m_data);\n     }\n     constexpr ValueType& value() LIFETIMEBOUND\n     {\n-        assert(has_value());\n+        if (!has_value()) {\n+            throw BadExpectedAccess{};",
      "path": "src/util/expected.h",
      "position": 69,
      "original_position": 33,
      "commit_id": "faebb1654743adcc5888464f9a7167c315ecce1f",
      "original_commit_id": "fa5a49c988c065526105f7d30c53298305f6e8c5",
      "in_reply_to_id": 2628209646,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2691294873\r\n\r\n> @ryanofsky No rush, but if you get a chance to take another look here before branch-off [1], that'd be great. I think the pull is currently blocked because of your use of the spicy word \"unsafe\" \r\n\r\nI'm not saying the pull is unsafe. I'm saying this specific commit fa90c4434176860eb01c8197fda226f6e7bb1f70 is unsafe and the updated commit message is misleading.\r\n\r\nThis commit is unsafe and the new commit message saying that pointer operators throwing exceptions is \"fine\" is misleading, because if these operators throw exceptions, code can catch those exceptions, and that code will be broken when `Expected` is replaced with `expected`, in bad ways triggering UB, in code paths likely to be missing test coverage because we often don't have tests checking error paths.\r\n\r\nHowever, the pull request as a whole is safe because a later commit fa15f71e34e53ecaa32c4b4f2102feed7601c62c adds `noexcept`. That later commit fixes safety issue apparently by accident because it does not even mention any change in behavior.\r\n\r\nIMO, this pull is not in a good state even if it is technically safe. These issues could be fixed at a surface level by adding `noexcept` in fa90c4434176860eb01c8197fda226f6e7bb1f70 instead of fa15f71e34e53ecaa32c4b4f2102feed7601c62c. In that case, it would be good to have comments next to these noexcepts, because normally when developers see `noexcept` we think \"exceptions are not expected to be thrown here\" not \"exceptions are thrown one level down from here but this triggers std::terminate and that is good.\"\r\n\r\nI do think the real mistake here is implementing pointer methods in terms of `value()` instead of the other way around. Using `value()` complicates implementation of this class, makes error reporting more confusing and less reliable, and sets a bad example of how you should deal with nullable values in c++. Using `value` instead of `bool`/`*`/`->` makes unsafe dereferences look like normal method calls, and negates decades of pattern recognition c/c++ developers have dealing with code with nullable values.",
      "created_at": "2026-01-15T14:12:14Z",
      "updated_at": "2026-01-15T14:39:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2694552387",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2694552387"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34032"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 70,
      "original_line": 70,
      "side": "RIGHT"
    }
  ]
}