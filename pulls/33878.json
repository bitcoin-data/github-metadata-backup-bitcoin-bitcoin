{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878",
    "id": 3013940276,
    "node_id": "PR_kwDOABII586zpRQ0",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/33878",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/33878.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/33878.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33878",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33878/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/4fec726c4d352daf2fb4a7e5ed463e44c8815ddb",
    "number": 33878,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "refactor, docs: Embedded ASMap [2/3]: Refactor asmap internals and add documentation",
    "user": {
      "login": "fjahr",
      "id": 1322187,
      "node_id": "MDQ6VXNlcjEzMjIxODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjahr",
      "html_url": "https://github.com/fjahr",
      "followers_url": "https://api.github.com/users/fjahr/followers",
      "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
      "organizations_url": "https://api.github.com/users/fjahr/orgs",
      "repos_url": "https://api.github.com/users/fjahr/repos",
      "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/fjahr/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "body": "This is a second slice carved out of #28792. It contains the following changes that are crucial for the embedding of asmap data which is added the following PR in the series (probably this will remain in #28792).\r\n\r\nThe changes are:\r\n- Modernizes and simplifies the asmap code by operating on `std::byte` instead of bits\r\n- Unifies asmap version calculation and naming (previously it was called version and checksum interchangeably)\r\n- Operate on a `span` rather than a vector in the asmap internal to prevent holding the asmap data in memory twice\r\n- Add more extensive documentation to the asmap implementation\r\n- Unify asmap casing in implemetation function names\r\n\r\nThe first three commits were already part of #28792, the others are new.\r\n\r\nThe documentation commit came out of feedback gathered at the latest CoreDev. The primary input for the documentation was the documentation that already existed in the Python implementation (`contrib/asmap/asmap.py`) but there are several other comments as well. Please note: I have also asked several LLMs to provide suggestions on how to explain pieces of the implementation and better demonstrate how the parts work together. I have copied bits and pieces that I liked but everything has been edited further by me and obviously all mistakes here are my own. ",
    "labels": [],
    "created_at": "2025-11-15T20:50:29Z",
    "updated_at": "2026-01-21T01:08:47Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "5c632027c79524890e7cd1b08e8b6200b0b0e3a6",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "fjahr:2025-11-asmap-slice-2",
      "ref": "2025-11-asmap-slice-2",
      "sha": "4fec726c4d352daf2fb4a7e5ed463e44c8815ddb",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 196253948,
        "node_id": "MDEwOlJlcG9zaXRvcnkxOTYyNTM5NDg=",
        "name": "bitcoin",
        "full_name": "fjahr/bitcoin",
        "owner": {
          "login": "fjahr",
          "id": 1322187,
          "node_id": "MDQ6VXNlcjEzMjIxODc=",
          "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/fjahr",
          "html_url": "https://github.com/fjahr",
          "followers_url": "https://api.github.com/users/fjahr/followers",
          "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
          "organizations_url": "https://api.github.com/users/fjahr/orgs",
          "repos_url": "https://api.github.com/users/fjahr/repos",
          "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/fjahr/received_events",
          "type": "User",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/fjahr/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/fjahr/bitcoin",
        "archive_url": "https://api.github.com/repos/fjahr/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/fjahr/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/fjahr/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/fjahr/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/fjahr/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/fjahr/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/fjahr/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/fjahr/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/fjahr/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/fjahr/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/fjahr/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/fjahr/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/fjahr/bitcoin/events",
        "forks_url": "https://api.github.com/repos/fjahr/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/fjahr/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/fjahr/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/fjahr/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/fjahr/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/fjahr/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/fjahr/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/fjahr/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/fjahr/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/fjahr/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/fjahr/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/fjahr/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/fjahr/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/fjahr/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/fjahr/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/fjahr/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:fjahr/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/fjahr/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/fjahr/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/fjahr/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/fjahr/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/fjahr/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/fjahr/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/fjahr/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/fjahr/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/fjahr/bitcoin/hooks",
        "svn_url": "https://github.com/fjahr/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 4,
        "watchers_count": 4,
        "size": 286582,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-01-20T22:59:49Z",
        "created_at": "2019-07-10T18:11:06Z",
        "updated_at": "2024-07-23T22:14:45Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "f7e88e298aed5fc31ffd0cef31e2ce9c45a0afde",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 38746,
        "stargazers_count": 87725,
        "watchers_count": 87725,
        "size": 302095,
        "default_branch": "master",
        "open_issues_count": 748,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-01-20T23:47:24Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2026-01-21T01:04:43Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 358,
    "deletions": 217,
    "changed_files": 17,
    "commits": 5,
    "review_comments": 55,
    "comments": 10
  },
  "events": [
    {
      "event": "commented",
      "id": 3536876647,
      "node_id": "IC_kwDOABII587S0HRn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3536876647",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-15T20:50:37Z",
      "updated_at": "2026-01-20T23:01:00Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33878.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Stale ACK | [hodlinator](https://github.com/bitcoin/bitcoin/pull/33878#pullrequestreview-3624323262), [sedited](https://github.com/bitcoin/bitcoin/pull/33878#pullrequestreview-3624922220) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#34302](https://github.com/bitcoin/bitcoin/pull/34302) (fuzz: Restore SendMessages coverage in process_message(s) fuzz targets by maflcko)\n* [#31260](https://github.com/bitcoin/bitcoin/pull/31260) (scripted-diff: Type-safe settings retrieval by ryanofsky)\n* [#28792](https://github.com/bitcoin/bitcoin/pull/28792) (build: Embedded ASMap [3/3]: Build binary dump header file by fjahr)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (âœ¨ experimental)\n\n\n\nPossible typos and grammar issues:\n\n- \"+    # not, failure (represented by 0) is returned. If a default instruction has been executed before, instead\" -> \"+    # not, failure (represented by 0) is returned. If a default instruction has been executed before, the default instruction's argument is returned instead.\" [The added line ends with \"instead\", leaving the sentence split awkwardly across lines; rewording makes the meaning explicit and grammatically complete.]\n\n- \"+ * Lastly, bit_sizes[k] bits encoding in big endian the position within that class\" -> \"+ * Lastly, bit_sizes[k] bits encode in big-endian the position within that class.\" [The original lacks a verb (\"encoding\" used incorrectly), making the sentence ungrammatical; inserting \"encode\" fixes it and clarifies intent.]\n\n\n\n\nPossible places where named args for integral literals may be used (e.g. `func(x, /*named_arg=*/0)` in C++, and `func(x, named_arg=0)` in Python):\n\n- DecodeBits(bitpos, data, 0, TYPE_BIT_SIZES) in src/util/asmap.cpp\n- DecodeBits(bitpos, data, 1, ASN_BIT_SIZES) in src/util/asmap.cpp\n- DecodeBits(bitpos, data, 2, MATCH_BIT_SIZES) in src/util/asmap.cpp\n- DecodeBits(bitpos, data, 17, JUMP_BIT_SIZES) in src/util/asmap.cpp\n\n\n\n<sup>2026-01-20</sup>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#issuecomment-3536876647",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33878"
    },
    {
      "event": "commented",
      "id": 3536890738,
      "node_id": "IC_kwDOABII587S0Kty",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3536890738",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-15T21:06:44Z",
      "updated_at": "2025-11-15T21:06:44Z",
      "author_association": "CONTRIBUTOR",
      "body": "@sipa would love to get your eyes on the [documentation commit](https://github.com/bitcoin/bitcoin/pull/33878/commits/93205dd90f525a42f9e41cadb289c4075c5fca09) before anyone else gets confused by the mistakes I might have made :) ",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#issuecomment-3536890738",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33878"
    },
    {
      "event": "mentioned",
      "id": 20964137658,
      "node_id": "MEE_lADOABII587YUaDMzwAAAAThj1q6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20964137658",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-15T21:06:45Z"
    },
    {
      "event": "subscribed",
      "id": 20964137663,
      "node_id": "SE_lADOABII587YUaDMzwAAAAThj1q_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20964137663",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-15T21:06:45Z"
    },
    {
      "event": "reviewed",
      "id": 3468461903,
      "node_id": "PRR_kwDOABII587OvIdP",
      "url": null,
      "actor": null,
      "commit_id": "93205dd90f525a42f9e41cadb289c4075c5fca09",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-15T22:05:09Z",
      "author_association": "MEMBER",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#pullrequestreview-3468461903",
      "submitted_at": "2025-11-15T22:05:09Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
    },
    {
      "event": "labeled",
      "id": 20964768605,
      "node_id": "LE_lADOABII587YUaDMzwAAAAThmPtd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20964768605",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-15T22:28:00Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20974753968,
      "node_id": "HRFPE_lADOABII587YUaDMzwAAAATiMViw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20974753968",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "9da01605334bdf322edabe91513b138d84c8fcf1",
      "commit_url": "https://api.github.com/repos/fjahr/bitcoin/commits/9da01605334bdf322edabe91513b138d84c8fcf1",
      "created_at": "2025-11-16T21:39:09Z"
    },
    {
      "event": "commented",
      "id": 3539395607,
      "node_id": "IC_kwDOABII587S9uQX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3539395607",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-16T21:45:58Z",
      "updated_at": "2025-11-16T21:45:58Z",
      "author_association": "CONTRIBUTOR",
      "body": "All the feedback from #28792 that applied to the commits here has been addressed here now.",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#issuecomment-3539395607",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33878"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20974871375,
      "node_id": "HRFPE_lADOABII587YUaDMzwAAAATiMyNP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20974871375",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "7a2bf8e057cf15a80adcbf1832eb65a8f5415cfb",
      "commit_url": "https://api.github.com/repos/fjahr/bitcoin/commits/7a2bf8e057cf15a80adcbf1832eb65a8f5415cfb",
      "created_at": "2025-11-16T22:04:24Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20975119182,
      "node_id": "HRFPE_lADOABII587YUaDMzwAAAATiNutO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20975119182",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "eaf5e12d2b52d66a75a68cf94d328d0ec9048986",
      "commit_url": "https://api.github.com/repos/fjahr/bitcoin/commits/eaf5e12d2b52d66a75a68cf94d328d0ec9048986",
      "created_at": "2025-11-16T22:54:28Z"
    },
    {
      "event": "unlabeled",
      "id": 20975598560,
      "node_id": "UNLE_lADOABII587YUaDMzwAAAATiPjvg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20975598560",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-17T00:23:14Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3541671065,
      "node_id": "IC_kwDOABII587TGZyZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3541671065",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-17T12:47:43Z",
      "updated_at": "2025-11-17T12:47:43Z",
      "author_association": "MEMBER",
      "body": "> The first three PRs were already part of https://github.com/bitcoin/bitcoin/pull/28792, the others are new.\r\n\r\ni'm sure you mean the first three *commits*? ðŸ˜„ ",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#issuecomment-3541671065",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33878"
    },
    {
      "event": "reviewed",
      "id": 3472970549,
      "node_id": "PRR_kwDOABII587PAVM1",
      "url": null,
      "actor": null,
      "commit_id": "c2274746d1b3d1a2712ef8bd567d25f5aa5cf5bb",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-17T14:23:35Z",
      "author_association": "MEMBER",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#pullrequestreview-3472970549",
      "submitted_at": "2025-11-17T14:23:35Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
    },
    {
      "event": "reviewed",
      "id": 3473258334,
      "node_id": "PRR_kwDOABII587PBbde",
      "url": null,
      "actor": null,
      "commit_id": "eaf5e12d2b52d66a75a68cf94d328d0ec9048986",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-17T16:17:31Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "waketraindev",
        "id": 175499942,
        "node_id": "U_kgDOCnXqpg",
        "avatar_url": "https://avatars.githubusercontent.com/u/175499942?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/waketraindev",
        "html_url": "https://github.com/waketraindev",
        "followers_url": "https://api.github.com/users/waketraindev/followers",
        "following_url": "https://api.github.com/users/waketraindev/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/waketraindev/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/waketraindev/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/waketraindev/subscriptions",
        "organizations_url": "https://api.github.com/users/waketraindev/orgs",
        "repos_url": "https://api.github.com/users/waketraindev/repos",
        "events_url": "https://api.github.com/users/waketraindev/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/waketraindev/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#pullrequestreview-3473258334",
      "submitted_at": "2025-11-17T16:17:31Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
    },
    {
      "event": "reviewed",
      "id": 3473921944,
      "node_id": "PRR_kwDOABII587PD9eY",
      "url": null,
      "actor": null,
      "commit_id": "eaf5e12d2b52d66a75a68cf94d328d0ec9048986",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-17T20:30:53Z",
      "author_association": "CONTRIBUTOR",
      "body": "Reviewed eaf5e12d2b52d66a75a68cf94d328d0ec9048986\n\nThanks for peeling off this PR as I suggested!",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#pullrequestreview-3473921944",
      "submitted_at": "2025-11-17T20:30:53Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
    },
    {
      "event": "commented",
      "id": 3549979018,
      "node_id": "IC_kwDOABII587TmGGK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3549979018",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-19T00:10:15Z",
      "updated_at": "2025-11-19T00:10:15Z",
      "author_association": "CONTRIBUTOR",
      "body": "> > The first three PRs were already part of #28792, the others are new.\r\n> \r\n> i'm sure you mean the first three _commits_? ðŸ˜„\r\n\r\nYepp, fixed :)",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#issuecomment-3549979018",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33878"
    },
    {
      "event": "labeled",
      "id": 21038436775,
      "node_id": "LE_lADOABII587YUaDMzwAAAATl_RGn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21038436775",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-19T10:02:30Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21045813136,
      "node_id": "HRFPE_lADOABII587YUaDMzwAAAATmbZ-Q",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21045813136",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "7de7c212589ea11ff1dd70bb7d0422ff35492933",
      "commit_url": "https://api.github.com/repos/fjahr/bitcoin/commits/7de7c212589ea11ff1dd70bb7d0422ff35492933",
      "created_at": "2025-11-19T15:14:35Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21045978210,
      "node_id": "HRFPE_lADOABII587YUaDMzwAAAATmcCRi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21045978210",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "3011c846e3b57e5895eaaa8c3442e0b2cdc7e4a8",
      "commit_url": "https://api.github.com/repos/fjahr/bitcoin/commits/3011c846e3b57e5895eaaa8c3442e0b2cdc7e4a8",
      "created_at": "2025-11-19T15:20:18Z"
    },
    {
      "event": "labeled",
      "id": 21045991904,
      "node_id": "LE_lADOABII587YUaDMzwAAAATmcFng",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21045991904",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-19T15:20:49Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3553314078,
      "node_id": "IC_kwDOABII587Ty0Ue",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3553314078",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-19T15:22:50Z",
      "updated_at": "2025-11-19T15:22:50Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased since #33026 was merged ðŸ¥³ and addressed all comments. Thanks for the reviews!",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#issuecomment-3553314078",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33878"
    },
    {
      "event": "unsubscribed",
      "id": 21046393305,
      "node_id": "UE_lADOABII587YUaDMzwAAAATmdnnZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21046393305",
      "actor": {
        "login": "gabrieloliveira75xx",
        "id": 98487691,
        "node_id": "U_kgDOBd7Niw",
        "avatar_url": "https://avatars.githubusercontent.com/u/98487691?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gabrieloliveira75xx",
        "html_url": "https://github.com/gabrieloliveira75xx",
        "followers_url": "https://api.github.com/users/gabrieloliveira75xx/followers",
        "following_url": "https://api.github.com/users/gabrieloliveira75xx/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gabrieloliveira75xx/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gabrieloliveira75xx/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gabrieloliveira75xx/subscriptions",
        "organizations_url": "https://api.github.com/users/gabrieloliveira75xx/orgs",
        "repos_url": "https://api.github.com/users/gabrieloliveira75xx/repos",
        "events_url": "https://api.github.com/users/gabrieloliveira75xx/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gabrieloliveira75xx/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-19T15:35:28Z"
    },
    {
      "event": "unlabeled",
      "id": 21048153881,
      "node_id": "UNLE_lADOABII587YUaDMzwAAAATmkVcZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21048153881",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-19T16:45:07Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21054718317,
      "node_id": "HRFPE_lADOABII587YUaDMzwAAAATm9YFt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21054718317",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "b41f5a29f7d56da8fd157770ad29b5776c3684c6",
      "commit_url": "https://api.github.com/repos/fjahr/bitcoin/commits/b41f5a29f7d56da8fd157770ad29b5776c3684c6",
      "created_at": "2025-11-19T22:27:48Z"
    },
    {
      "event": "unlabeled",
      "id": 21055657560,
      "node_id": "UNLE_lADOABII587YUaDMzwAAAATnA9ZY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21055657560",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-19T23:40:01Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 3486433210,
      "node_id": "PRR_kwDOABII587Pzr-6",
      "url": null,
      "actor": null,
      "commit_id": "b41f5a29f7d56da8fd157770ad29b5776c3684c6",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-20T15:12:22Z",
      "author_association": "CONTRIBUTOR",
      "body": "Reviewed b41f5a29f7d56da8fd157770ad29b5776c3684c6\n\nSorry for not finding these earlier, getting closer to A-C-K.",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#pullrequestreview-3486433210",
      "submitted_at": "2025-11-20T15:12:22Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21151422864,
      "node_id": "HRFPE_lADOABII587YUaDMzwAAAATsuRmQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21151422864",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "825d677a863d153d4c466288397da773ee2bb2f5",
      "commit_url": "https://api.github.com/repos/fjahr/bitcoin/commits/825d677a863d153d4c466288397da773ee2bb2f5",
      "created_at": "2025-11-24T23:46:52Z"
    },
    {
      "event": "commented",
      "id": 3573190858,
      "node_id": "IC_kwDOABII587U-pDK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3573190858",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-24T23:50:55Z",
      "updated_at": "2025-11-24T23:50:55Z",
      "author_association": "CONTRIBUTOR",
      "body": "Addressed the latest review comments from @hodlinator , thanks for the detailed patch suggestions and rationale, co-authorship added!",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#issuecomment-3573190858",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33878"
    },
    {
      "event": "mentioned",
      "id": 21151465674,
      "node_id": "MEE_lADOABII587YUaDMzwAAAATsucDK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21151465674",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-24T23:50:56Z"
    },
    {
      "event": "subscribed",
      "id": 21151465688,
      "node_id": "SE_lADOABII587YUaDMzwAAAATsucDY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21151465688",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-24T23:50:56Z"
    },
    {
      "event": "reviewed",
      "id": 3503770177,
      "node_id": "PRR_kwDOABII587Q10pB",
      "url": null,
      "actor": null,
      "commit_id": "825d677a863d153d4c466288397da773ee2bb2f5",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-25T22:25:04Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK 825d677a863d153d4c466288397da773ee2bb2f5\n\nOperating on `std::span<std::byte>` rather than `std::vector<bool>&` enables for efficient use of asmap data embedded in the binary (#28792).\n\nI have thoroughly reviewed and contributed patches for this refactoring up to the point of having a conflict of interest in getting it merged. :)\n\nTo build more confidence of the `bool` -> `byte` transition, I developed a C++ test with more readable asmap input data - cf34bb9806e95116d4b65b6dc80dc11a1f723a51 (https://github.com/hodlinator/bitcoin/tree/pr/33878_suggestions2 for interleaved branch). Not sure whether it's worth including in some form.",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#pullrequestreview-3503770177",
      "submitted_at": "2025-11-25T22:25:04Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
    },
    {
      "event": "commented",
      "id": 3577923878,
      "node_id": "IC_kwDOABII587VQskm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3577923878",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-25T22:51:23Z",
      "updated_at": "2025-11-25T22:51:23Z",
      "author_association": "CONTRIBUTOR",
      "body": "> To build more confidence of the bool -> byte transition, I developed a C++ test with more readable asmap input data - https://github.com/bitcoin/bitcoin/commit/cf34bb9806e95116d4b65b6dc80dc11a1f723a51 (https://github.com/hodlinator/bitcoin/tree/pr/33878_suggestions2 for interleaved branch). Not sure whether it's worth including in some form.\r\n\r\nThanks, looks like a very nice visualization at least. I will consider including it and addressing your other comments until I have to retouch here. If that doesn't happen there are follow-ups already planned where these could be included. Thanks again for the reviews :)",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#issuecomment-3577923878",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33878"
    },
    {
      "event": "reviewed",
      "id": 3615845587,
      "node_id": "PRR_kwDOABII587XhWzT",
      "url": null,
      "actor": null,
      "commit_id": "825d677a863d153d4c466288397da773ee2bb2f5",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-29T22:27:21Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#pullrequestreview-3615845587",
      "submitted_at": "2025-12-29T22:27:21Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21810733919,
      "node_id": "HRFPE_lADOABII587YUaDMzwAAAAUUBWNf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21810733919",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "5d65d9daca623a83631e2aa2217a42f3bda19423",
      "commit_url": "https://api.github.com/repos/fjahr/bitcoin/commits/5d65d9daca623a83631e2aa2217a42f3bda19423",
      "created_at": "2025-12-31T16:33:58Z"
    },
    {
      "event": "commented",
      "id": 3702483655,
      "node_id": "IC_kwDOABII587cr2rH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3702483655",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-31T16:36:29Z",
      "updated_at": "2025-12-31T16:36:29Z",
      "author_association": "CONTRIBUTOR",
      "body": "Addressed comments by @hodlinator and @sedited ",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#issuecomment-3702483655",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33878"
    },
    {
      "event": "mentioned",
      "id": 21810757188,
      "node_id": "MEE_lADOABII587YUaDMzwAAAAUUBb5E",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21810757188",
      "actor": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-31T16:36:30Z"
    },
    {
      "event": "subscribed",
      "id": 21810757204,
      "node_id": "SE_lADOABII587YUaDMzwAAAAUUBb5U",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21810757204",
      "actor": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-31T16:36:30Z"
    },
    {
      "event": "mentioned",
      "id": 21810757218,
      "node_id": "MEE_lADOABII587YUaDMzwAAAAUUBb5i",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21810757218",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-31T16:36:31Z"
    },
    {
      "event": "subscribed",
      "id": 21810757221,
      "node_id": "SE_lADOABII587YUaDMzwAAAAUUBb5l",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21810757221",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-31T16:36:31Z"
    },
    {
      "event": "labeled",
      "id": 21811457014,
      "node_id": "LE_lADOABII587YUaDMzwAAAAUUEGv2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21811457014",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-31T17:50:06Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3702595920,
      "node_id": "IC_kwDOABII587csSFQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3702595920",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-31T17:50:11Z",
      "updated_at": "2025-12-31T17:50:11Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Task `test max 6 ancestor commits`: https://github.com/bitcoin/bitcoin/actions/runs/20623068864/job/59228690078</sub>\n<sub>LLM reason (âœ¨ experimental): CI failed due to uncommitted changes in the git index blocking the rebase step after a successful build.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#issuecomment-3702595920",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33878"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21819074056,
      "node_id": "HRFPE_lADOABII587YUaDMzwAAAAUUhKYI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21819074056",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "c5251f39a90ff63bed417b0113ba4fdbc7ea78d0",
      "commit_url": "https://api.github.com/repos/fjahr/bitcoin/commits/c5251f39a90ff63bed417b0113ba4fdbc7ea78d0",
      "created_at": "2026-01-01T14:50:25Z"
    },
    {
      "event": "unlabeled",
      "id": 21820559788,
      "node_id": "UNLE_lADOABII587YUaDMzwAAAAUUm1Gs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21820559788",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-01T19:23:32Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 3624323262,
      "node_id": "PRR_kwDOABII587YBsi-",
      "url": null,
      "actor": null,
      "commit_id": "c5251f39a90ff63bed417b0113ba4fdbc7ea78d0",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-03T12:30:39Z",
      "author_association": "CONTRIBUTOR",
      "body": "re-ACK c5251f39a90ff63bed417b0113ba4fdbc7ea78d0\r\n\r\nChanges since my first ACK (https://github.com/bitcoin/bitcoin/pull/33878#pullrequestreview-3503770177) are only minor adjustments based off that review and another (https://github.com/bitcoin/bitcoin/pull/33878#pullrequestreview-3615845587):\r\n* Made `NetGroupManager`-ctor temporarily take r-value\r\n* Avoided span-references\r\n* Cleaned up whitespace across commits",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#pullrequestreview-3624323262",
      "submitted_at": "2026-01-03T12:30:39Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
    },
    {
      "event": "reviewed",
      "id": 3624922220,
      "node_id": "PRR_kwDOABII587YD-xs",
      "url": null,
      "actor": null,
      "commit_id": "c5251f39a90ff63bed417b0113ba4fdbc7ea78d0",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-04T10:02:25Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK c5251f39a90ff63bed417b0113ba4fdbc7ea78d0",
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#pullrequestreview-3624922220",
      "submitted_at": "2026-01-04T10:02:25Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
    },
    {
      "event": "labeled",
      "id": 22165480416,
      "node_id": "LE_lADOABII587YUaDMzwAAAAUpKmPg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22165480416",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-20T15:57:35Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZhNDFmYzZhMWE3ZDQ5MmI4OTRlMjA2ZjgzZTBjOTc4NmI0NGEyZjA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa41fc6a1a7d492b894e206f83e0c9786b44a2f0",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fa41fc6a1a7d492b894e206f83e0c9786b44a2f0",
      "tree": {
        "sha": "7c8b77a635db32aa0cb9c6f0d501fdb0d8d2e86c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7c8b77a635db32aa0cb9c6f0d501fdb0d8d2e86c"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 7c8b77a635db32aa0cb9c6f0d501fdb0d8d2e86c\nparent f7e88e298aed5fc31ffd0cef31e2ce9c45a0afde\nauthor Fabian Jahr <fjahr@protonmail.com> 1745356726 +0200\ncommitter Fabian Jahr <fjahr@protonmail.com> 1768949128 +0100\n\nrefactor: Operate on bytes instead of bits in Asmap code\n\nCo-authored-by: Hodlinator <172445034+hodlinator@users.noreply.github.com>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\nComment: GPGTools - https://gpgtools.org\n\niQJJBAABCgAzFiEEtFq20ghhrCHSdrgm8T0enYkHmM0FAmlwBYgVHGZqYWhyQHBy\nb3Rvbm1haWwuY29tAAoJEPE9Hp2JB5jNU5QP/iYGNdfgHzou7ZTrBoSMbYo8Mwgs\nsh67ZFrgXTgHrhMG98tHhg0WpPPlvW6LKFYAHT4EQetRFyXifLewDZsgDIiGEvBK\nHtwBTdPC6ZmfmZ0p5aiBttx9GvEP7sg0CSfLSIaiR4w3oZt1FHe042WAkDrzOKFT\nuEA3Xw01sK/+Krv8QgNXXIJmQEF+U1rhu38JjZpEFPnr2uJ9JCogv9y6+2/vBZ0C\nz2BPfUuH/SdNcV2n2Ls4ZjcqGFqnqJONo5KJfF22VaIg7KGBFIh3QhNoceT1Bqd1\n2u0NbhXgxlVNka934r0R8j/mvvqoQMsYMgH1AgUFKcggc+StjFplX9uHKVxB20/M\nrtAOBXsjSOYZ1TtSXKP/DEjMD70tGtIUzXbrfiUuCQogxw2SguZLBpOO65tZz5uX\nMx948uy/l5H5Z5HhW/zv21xHcMH6jbGfcd121fcR0NopDwAoWevRwU6TDbjA1L9f\nXA3MQnFuRArlmtFC9evewgh0PAh59NRt3f891Luy8qcCQDxag5jbc+kP2DW/Krld\nMqQQUzrgBFe28/Gdudda+kQfYn5qBH72JU0hV+a5u8db/xGylQG5T6f37WcckNXg\nw07BKYVwxkChR8j2cbpn8KqFurfFznfyBrUIWmVnmb0QU1xpnTfLnuOk/rh3vfB0\nFrJpPxz8yFWp1M78\n=vOLV\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f7e88e298aed5fc31ffd0cef31e2ce9c45a0afde",
          "sha": "f7e88e298aed5fc31ffd0cef31e2ce9c45a0afde",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f7e88e298aed5fc31ffd0cef31e2ce9c45a0afde"
        }
      ],
      "message": "refactor: Operate on bytes instead of bits in Asmap code\n\nCo-authored-by: Hodlinator <172445034+hodlinator@users.noreply.github.com>",
      "committer": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2026-01-20T22:45:28Z"
      },
      "author": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2025-04-22T21:18:46Z"
      },
      "sha": "fa41fc6a1a7d492b894e206f83e0c9786b44a2f0"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDM4NWMzNGEwNTI2MTg0NmRhYzJiNDJkNDdmNjliMzE3ZjUzNGRkNDA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/385c34a05261846dac2b42d47f69b317f534dd40",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/385c34a05261846dac2b42d47f69b317f534dd40",
      "tree": {
        "sha": "205489454495a95b36383e5eafc9c9db1b136d03",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/205489454495a95b36383e5eafc9c9db1b136d03"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 205489454495a95b36383e5eafc9c9db1b136d03\nparent fa41fc6a1a7d492b894e206f83e0c9786b44a2f0\nauthor Fabian Jahr <fjahr@protonmail.com> 1745358246 +0200\ncommitter Fabian Jahr <fjahr@protonmail.com> 1768949129 +0100\n\nrefactor: Unify asmap version calculation and naming\n\nCalculate the asmap version only in one place: A dedicated function in util/asmap.\n\nThe version was also referred to as asmap checksum in several places. To avoid confusion call it asmap version everywhere.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\nComment: GPGTools - https://gpgtools.org\n\niQJJBAABCgAzFiEEtFq20ghhrCHSdrgm8T0enYkHmM0FAmlwBYkVHGZqYWhyQHBy\nb3Rvbm1haWwuY29tAAoJEPE9Hp2JB5jNAbIP/A/67goEdkdMzVTxAduL3X9Hj+aS\nMttZKFpoBBe6QE539G1Y277BrHjScs593MYGh5PwWGy9gHfI4Z+N6v6Eya4EBWyL\n2/6YbJzGfBk2TiZfpvJVMHPb7Op9GwWL+xEgM++M3xJf9ZTeGvz8+T2lBV5eEmm+\nKINF7/bZMmGN1S60aPc1qjYZNxg+RiTe8VHRBDS6OL2NfzIlZkSwzNQzoP9X4URc\na7l6xgTYl6f4phq1gis3/c7n2azamPTs23zYeNqVJEOTtwQIvJ0TgT4H29Ar/1sA\nATYeOq6T5O7qKlw81BiSXY9AAlGn3Cci1zYyfgTNhtxKzZ331LVnq4/HSB9Y0qis\nSBpPhbb7kaHxrrkE313QTV5i3LTkNUhC0fgzU5CHhLAX4dQF6Zqa1FO0ttW6vUhI\nx6ip7zuxq/VaRcewVbeGDj6WP8qpoEZi7ugeJiMPA5HLKYz4w4vm6nNWVInbRbir\nvlozdICl4Gr1MHJD4S7I4VSRz4TxgE59Irc7ztS65fMTY0SMUN2+z0mHAIb2tVvx\nSLoY03Ef66Rxu8ql4IlkFyMobHk1KUP+q9cBzSTqpaPNOWC+P3TzC58SCLd0Tibk\nY6gwThd3X7mitlSmPVVvRNQYTnZ4vDAdKhnOdOc8sPQO5cHkX/OCWnuFZWqucBVR\nhqdYm4/IDNXxvGru\n=53+F\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa41fc6a1a7d492b894e206f83e0c9786b44a2f0",
          "sha": "fa41fc6a1a7d492b894e206f83e0c9786b44a2f0",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/fa41fc6a1a7d492b894e206f83e0c9786b44a2f0"
        }
      ],
      "message": "refactor: Unify asmap version calculation and naming\n\nCalculate the asmap version only in one place: A dedicated function in util/asmap.\n\nThe version was also referred to as asmap checksum in several places. To avoid confusion call it asmap version everywhere.",
      "committer": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2026-01-20T22:45:29Z"
      },
      "author": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2025-04-22T21:44:06Z"
      },
      "sha": "385c34a05261846dac2b42d47f69b317f534dd40"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGNmNDk0M2ZkY2RkMTY3YTU2YzI3OGJhMDk0Y2VjYjBmYTI0MWE4Zjg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cf4943fdcdd167a56c278ba094cecb0fa241a8f8",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/cf4943fdcdd167a56c278ba094cecb0fa241a8f8",
      "tree": {
        "sha": "8d3f8b4f05d2a3597caa8dd6ea0357eef7825f2c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8d3f8b4f05d2a3597caa8dd6ea0357eef7825f2c"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 8d3f8b4f05d2a3597caa8dd6ea0357eef7825f2c\nparent 385c34a05261846dac2b42d47f69b317f534dd40\nauthor Fabian Jahr <fjahr@protonmail.com> 1745360012 +0200\ncommitter Fabian Jahr <fjahr@protonmail.com> 1768949981 +0100\n\nrefactor: Use span instead of vector for data in util/asmap\n\nThis prevents holding the asmap data in memory twice.\n\nThe version hash changes due to spans being serialized without their size-prefix (unlike vectors).\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\nComment: GPGTools - https://gpgtools.org\n\niQJJBAABCgAzFiEEtFq20ghhrCHSdrgm8T0enYkHmM0FAmlwCN4VHGZqYWhyQHBy\nb3Rvbm1haWwuY29tAAoJEPE9Hp2JB5jNkX0P/26QnmGaYSpyzchnbI5KeUVyaOKA\n8zWY6RByjbU8qQmFA3Rdk1Lk7Y3FPLBMOu3nLxvMlSIDLq4DsNIpcdy0V025yWDY\n3KOYZP+gyP1PrMbqwT7wDKliEualfcW6iZdNhCJ5dEtzt7DeVNZBn09jHDwS+EVo\n0yi1nfRQGI1vM1YYzbf3vtxGortPSePqwotp/kgeFEpwv/d4cWH7TlsYuXL9Vn1N\n8/02ArcYcJ3on/kZINwuBf9xUUtaXsJN9h/rpRGhg5ROo7HASMp2nhUXiqFFmPpV\nA1sfhLpcHp4ZxqWNJYpXLCfq1qgxHUM6P85g4+jbfcc1Dz6k08/zMp+IDhZ5QX5n\nCAODWZTQV1STZySGKWEf88eHkLnisKMnmWZTPeExxxm+q2J4Ky5HmrTNVzuXBdWr\nhSmb5rjAPCc0fKPqQ7h5SbjjCuwLcMNRPCF7BsJeOtZzFodt1v2bcSEeJKbOiuvu\nYT4iXilL5/3cY8pGGRFk43SdUcFn3+X8D/065KbHYt8XeRFyMEMoE/u1Lxr3Cnry\nEed/PkOtXqqaeYNyv6PtxBytJNjWVRKJx9lVsxqGwdVarXmF4Odo3NOfN5CfpYs/\nUcZJ1tQUif8LnZJyzp5rS7Ni0VBqPt+P7sufOxtP6c4d+rEafW11RZUzCVBVk6UR\nODk4VFhSVC8OyMoT\n=pPXW\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/385c34a05261846dac2b42d47f69b317f534dd40",
          "sha": "385c34a05261846dac2b42d47f69b317f534dd40",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/385c34a05261846dac2b42d47f69b317f534dd40"
        }
      ],
      "message": "refactor: Use span instead of vector for data in util/asmap\n\nThis prevents holding the asmap data in memory twice.\n\nThe version hash changes due to spans being serialized without their size-prefix (unlike vectors).",
      "committer": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2026-01-20T22:59:41Z"
      },
      "author": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2025-04-22T22:13:32Z"
      },
      "sha": "cf4943fdcdd167a56c278ba094cecb0fa241a8f8"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDc5ZTk3ZDQ1YzE2ZjA0M2QyM2JhMzE4YTY2MWNjMzllYzUzY2Y3NjA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/79e97d45c16f043d23ba318a661cc39ec53cf760",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/79e97d45c16f043d23ba318a661cc39ec53cf760",
      "tree": {
        "sha": "ddef773a74faa5c2224c916749aa08a83d6ba0cc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ddef773a74faa5c2224c916749aa08a83d6ba0cc"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree ddef773a74faa5c2224c916749aa08a83d6ba0cc\nparent cf4943fdcdd167a56c278ba094cecb0fa241a8f8\nauthor Fabian Jahr <fjahr@protonmail.com> 1763236391 +0200\ncommitter Fabian Jahr <fjahr@protonmail.com> 1768949983 +0100\n\ndoc: Add more extensive docs to asmap implementation\n\nAlso makes minor improvement on the python implementation documentation.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\nComment: GPGTools - https://gpgtools.org\n\niQJJBAABCgAzFiEEtFq20ghhrCHSdrgm8T0enYkHmM0FAmlwCN8VHGZqYWhyQHBy\nb3Rvbm1haWwuY29tAAoJEPE9Hp2JB5jN2E4QAKi/k4m4aw0LQ1AQkDBRf7jrbJWz\n/u9f5VQs0nBeHkP0Wp70yM7VYZFR29xqtzhLT7sD3+pCfsg+uKUcAcy04DE/IGTR\nz/0IQ46ff5gTya793UsEkTcp6i1C7fa8xTFLLRimctnFo+l+ZIowxKpCaQB8HLFq\n8yULBLGZ8fQc1u8abV0oZR3FhoJtyuAtofVK7+c+hED6nR6wJlKbpdKbDg0yLtJC\nWkxlVqWfY6jyMT+loymuuIJn4/8+ZxFasA9zuxcAdXSbG/cTk4ZNd23CnyqNZcWZ\n5dCe9IhEl7VGPtrFRTP21G69SrpWFfIKaTDU5w9eZzDWbd1bd6hXpFE8oKaN3Ex5\nrPd10UuOBrvnVmxkR5DAdnDm5Po2bBSA7agemKHw4kuTI9iMoWhtnTCTgZl5iJPn\nBSL7x98KXRl+yOOcnqxsjJ3gIRCc1GJLO5rc7yNIr/EZkF5mZ7ddyEbyfb8aSdv/\n74xqtrO+WAhAqshpH9O+ChG3OaHRsRlShS1Gi7mjgJAbG1NiAKf8oODQZ/FhkplS\ns0Trphnm6KXMoRszvdx5o5bombVzsCAGmZb+HhbkbnB41//uxJC0/54nec0J3STm\nyB32Qrs0b8o7Ssy+g3DTyjPOSwhZ0o19j0TW8x6Yp52GSluRz4JWh9yADle9HaLK\nMk99Il+8E70IziNz\n=ishX\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cf4943fdcdd167a56c278ba094cecb0fa241a8f8",
          "sha": "cf4943fdcdd167a56c278ba094cecb0fa241a8f8",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/cf4943fdcdd167a56c278ba094cecb0fa241a8f8"
        }
      ],
      "message": "doc: Add more extensive docs to asmap implementation\n\nAlso makes minor improvement on the python implementation documentation.",
      "committer": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2026-01-20T22:59:43Z"
      },
      "author": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2025-11-15T19:53:11Z"
      },
      "sha": "79e97d45c16f043d23ba318a661cc39ec53cf760"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDRmZWM3MjZjNGQzNTJkYWYyZmI0YTdlNWVkNDYzZTQ0Yzg4MTVkZGI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4fec726c4d352daf2fb4a7e5ed463e44c8815ddb",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4fec726c4d352daf2fb4a7e5ed463e44c8815ddb",
      "tree": {
        "sha": "742e2d811b8ce7fdeb640816b1af0dbfae81febc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/742e2d811b8ce7fdeb640816b1af0dbfae81febc"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 742e2d811b8ce7fdeb640816b1af0dbfae81febc\nparent 79e97d45c16f043d23ba318a661cc39ec53cf760\nauthor Fabian Jahr <fjahr@protonmail.com> 1763328089 +0200\ncommitter Fabian Jahr <fjahr@protonmail.com> 1768949983 +0100\n\nrefactor: Simplify Interpret asmap function\n\nThis aligns it more with SanityCheckAsmap and reduces variable scope.\n\nAlso unify asmap casing in SanityCheckAsmap function name.\n\nCo-authored-by: Hodlinator <172445034+hodlinator@users.noreply.github.com>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\nComment: GPGTools - https://gpgtools.org\n\niQJJBAABCgAzFiEEtFq20ghhrCHSdrgm8T0enYkHmM0FAmlwCN8VHGZqYWhyQHBy\nb3Rvbm1haWwuY29tAAoJEPE9Hp2JB5jNw/cP/A9KmbMnkU3SMBkKx1wE9azR/0sZ\nhTRq+by9YqHdEy8d46gMh7AMbiqYFsW6+g+xBAFT1vCBm6HEKnkHb46s5CE/RReW\ngDIJxjRXC4KdbZmS2x4cFxicHRhb1E/KWdwo72MnKYW6dFnGPhVLH4f3kBMJNeUQ\n1wbv9Oj5LmwTTh7jp1UIzBEwX3iRw0EWDjcRyWC5pLiNT4PncZcjS8plrVS7WpfV\nTFPEml4ZiTFMHfDUAsy5GAUsujiB/KtK1lrnk2haOBBKwHGxgkjXNDZI0xt9ZkG7\n+M2ta5TU5xTjzQJonSGRbagyVzxgJJMjVk1qN6wYL3xMMEGhmcGt22UKCMvTPs2S\nvYygemZNCOfllJq1npmZ0CLC+PLc0WjnMGYrbeS5PxFvVbwkBmbDfgITx8LR1F9v\nqhgnfa5mY/Wtua+831MYNd+jFatgernAdEsJ3HfYThb4Jnd78bpNHsXw6//MY5pb\nCd57qsrwpRzGEjkV7nc6kFm5hU1qouoWT9OOqlCDZ/gh6CGatkkDmKEX+7yCwV0w\n8qHrpEEmMyyESZSgkzGnqW8iVqRU7OMxx9j08k5+FgGiazkRc4ZE10B56/6HWd0P\nH9heAxapT6fW2JbaQjah0RuYsNQqRImPSuS6QNwGF6Vc/NWFtEVgdSVU7y48K1ju\nUjj1cDbKcHYwBUTT\n=C4Al\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/79e97d45c16f043d23ba318a661cc39ec53cf760",
          "sha": "79e97d45c16f043d23ba318a661cc39ec53cf760",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/79e97d45c16f043d23ba318a661cc39ec53cf760"
        }
      ],
      "message": "refactor: Simplify Interpret asmap function\n\nThis aligns it more with SanityCheckAsmap and reduces variable scope.\n\nAlso unify asmap casing in SanityCheckAsmap function name.\n\nCo-authored-by: Hodlinator <172445034+hodlinator@users.noreply.github.com>",
      "committer": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2026-01-20T22:59:43Z"
      },
      "author": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2025-11-16T21:21:29Z"
      },
      "sha": "4fec726c4d352daf2fb4a7e5ed463e44c8815ddb"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22174275211,
      "node_id": "HRFPE_lADOABII587YUaDMzwAAAAUpsJaL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22174275211",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "4fec726c4d352daf2fb4a7e5ed463e44c8815ddb",
      "commit_url": "https://api.github.com/repos/fjahr/bitcoin/commits/4fec726c4d352daf2fb4a7e5ed463e44c8815ddb",
      "created_at": "2026-01-20T22:59:51Z"
    },
    {
      "event": "unlabeled",
      "id": 22175914809,
      "node_id": "UNLE_lADOABII587YUaDMzwAAAAUpyZs5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22175914809",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-21T01:08:45Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2530246100",
      "pull_request_review_id": 3468461903,
      "id": 2530246100,
      "node_id": "PRRC_kwDOABII586W0H3U",
      "diff_hunk": "@@ -21,140 +21,235 @@\n #include <utility>\n #include <vector>\n \n+/*\n+ * ASMap (Autonomous System Map) Implementation",
      "path": "src/util/asmap.cpp",
      "position": 21,
      "original_position": 5,
      "commit_id": "4fec726c4d352daf2fb4a7e5ed463e44c8815ddb",
      "original_commit_id": "93205dd90f525a42f9e41cadb289c4075c5fca09",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "All the documentation changes in this commit look correct to me.\r\n\r\nOne thing that may be worth mentioning early on is that it's a bit-packed format, i.e., the entire compressed mapping is treated as a sequence of bits, packed together at 8 per byte, which are concatenated encodings of instructions.",
      "created_at": "2025-11-15T22:05:09Z",
      "updated_at": "2025-11-15T22:05:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2530246100",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2530246100"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 25,
      "original_line": 25,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2532262781",
      "pull_request_review_id": 3470523118,
      "id": 2532262781,
      "node_id": "PRRC_kwDOABII586W70N9",
      "diff_hunk": "@@ -21,140 +21,235 @@\n #include <utility>\n #include <vector>\n \n+/*\n+ * ASMap (Autonomous System Map) Implementation",
      "path": "src/util/asmap.cpp",
      "position": 21,
      "original_position": 5,
      "commit_id": "4fec726c4d352daf2fb4a7e5ed463e44c8815ddb",
      "original_commit_id": "93205dd90f525a42f9e41cadb289c4075c5fca09",
      "in_reply_to_id": 2530246100,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thank you for the quick feedback! Added a small paragraph on the bit-packed format in the introduction comment at the top.",
      "created_at": "2025-11-16T21:46:35Z",
      "updated_at": "2025-11-16T21:46:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2532262781",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2532262781"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 25,
      "original_line": 25,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2534280150",
      "pull_request_review_id": 3472970549,
      "id": 2534280150,
      "node_id": "PRRC_kwDOABII586XDgvW",
      "diff_hunk": "@@ -81,31 +83,28 @@ std::vector<unsigned char> NetGroupManager::GetGroup(const CNetAddr& address) co\n uint32_t NetGroupManager::GetMappedAS(const CNetAddr& address) const\n {\n     uint32_t net_class = address.GetNetClass();\n-    if (m_asmap.size() == 0 || (net_class != NET_IPV4 && net_class != NET_IPV6)) {\n+    if (m_asmap.empty() || (net_class != NET_IPV4 && net_class != NET_IPV6)) {\n         return 0; // Indicates not found, safe because AS0 is reserved per RFC7607.\n     }\n-    std::vector<bool> ip_bits(128);",
      "path": "src/netgroup.cpp",
      "position": 27,
      "original_position": 17,
      "commit_id": "4fec726c4d352daf2fb4a7e5ed463e44c8815ddb",
      "original_commit_id": "c2274746d1b3d1a2712ef8bd567d25f5aa5cf5bb",
      "in_reply_to_id": null,
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Isn't this `ip_bytes` now? (though bits is technically still valid ofc)",
      "created_at": "2025-11-17T14:23:35Z",
      "updated_at": "2025-11-17T14:23:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2534280150",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2534280150"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 87,
      "original_line": 87,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2534500280",
      "pull_request_review_id": 3473258334,
      "id": 2534500280,
      "node_id": "PRRC_kwDOABII586XEWe4",
      "diff_hunk": "@@ -203,10 +203,8 @@ std::vector<bool> DecodeAsmap(fs::path path)\n         LogWarning(\"Failed to open asmap file from disk\");\n         return bits;\n     }\n-    file.seek(0, SEEK_END);\n-    int length = file.tell();",
      "path": "src/util/asmap.cpp",
      "position": 1,
      "original_position": 5,
      "commit_id": "eaf5e12d2b52d66a75a68cf94d328d0ec9048986",
      "original_commit_id": "db54e01640e1225c470214a763304340a50cdbee",
      "in_reply_to_id": null,
      "user": {
        "login": "waketraindev",
        "id": 175499942,
        "node_id": "U_kgDOCnXqpg",
        "avatar_url": "https://avatars.githubusercontent.com/u/175499942?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/waketraindev",
        "html_url": "https://github.com/waketraindev",
        "followers_url": "https://api.github.com/users/waketraindev/followers",
        "following_url": "https://api.github.com/users/waketraindev/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/waketraindev/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/waketraindev/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/waketraindev/subscriptions",
        "organizations_url": "https://api.github.com/users/waketraindev/orgs",
        "repos_url": "https://api.github.com/users/waketraindev/repos",
        "events_url": "https://api.github.com/users/waketraindev/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/waketraindev/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Bundling the implementation of `AutoFile::size` here doesn't seem strictly necessary. It looks like you could rely on the length value return by `tell()` and avoid depending on Streams refactoring. That might help keep this PR a bit more focused on the asmap changes without pulling in broader Streams updates or file-size-related changes elsewhere.",
      "created_at": "2025-11-17T15:19:07Z",
      "updated_at": "2025-11-17T16:17:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2534500280",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2534500280"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 207,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2535040100",
      "pull_request_review_id": 3473921944,
      "id": 2535040100,
      "node_id": "PRRC_kwDOABII586XGaRk",
      "diff_hunk": "@@ -81,31 +83,28 @@ std::vector<unsigned char> NetGroupManager::GetGroup(const CNetAddr& address) co\n uint32_t NetGroupManager::GetMappedAS(const CNetAddr& address) const\n {\n     uint32_t net_class = address.GetNetClass();\n-    if (m_asmap.size() == 0 || (net_class != NET_IPV4 && net_class != NET_IPV6)) {\n+    if (m_asmap.empty() || (net_class != NET_IPV4 && net_class != NET_IPV6)) {\n         return 0; // Indicates not found, safe because AS0 is reserved per RFC7607.\n     }\n-    std::vector<bool> ip_bits(128);\n+    std::vector<std::byte> ip_bits(16);\n     if (address.HasLinkedIPv4()) {\n         // For lookup, treat as if it was just an IPv4 address (IPV4_IN_IPV6_PREFIX + IPv4 bits)\n+        std::copy_n(std::as_bytes(std::span{IPV4_IN_IPV6_PREFIX}).begin(),\n+                    IPV4_IN_IPV6_PREFIX.size(), ip_bits.begin());\n         for (int8_t byte_i = 0; byte_i < 12; ++byte_i) {\n-            for (uint8_t bit_i = 0; bit_i < 8; ++bit_i) {\n-                ip_bits[byte_i * 8 + bit_i] = (IPV4_IN_IPV6_PREFIX[byte_i] >> (7 - bit_i)) & 1;\n-            }\n+            ip_bits[byte_i] = std::byte(IPV4_IN_IPV6_PREFIX[byte_i]);\n         }",
      "path": "src/netgroup.cpp",
      "position": 1,
      "original_position": 28,
      "commit_id": "eaf5e12d2b52d66a75a68cf94d328d0ec9048986",
      "original_commit_id": "c2274746d1b3d1a2712ef8bd567d25f5aa5cf5bb",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In c2274746d1b3d1a2712ef8bd567d25f5aa5cf5bb \"refactor: Operate on bytes instead of bits in Asmap code\": The `for` doing `ip_bits[byte_i] = std::byte(IPV4_IN_IPV6_PREFIX[byte_i]);` can now be removed since we have `copy_n` doing the same thing above.",
      "created_at": "2025-11-17T17:59:15Z",
      "updated_at": "2025-11-17T20:30:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2535040100",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2535040100"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": 94,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 96,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2535169330",
      "pull_request_review_id": 3473921944,
      "id": 2535169330,
      "node_id": "PRRC_kwDOABII586XG50y",
      "diff_hunk": "@@ -625,19 +625,10 @@ BOOST_AUTO_TEST_CASE(asmap_test_vectors)\n         \"1e3bbc17ba4d6f79ea3f031b876799ac268b1e0ea9babf0f9a8e5f6c55e363c6363df46afc696d7afceaf49b6\"\n         \"e62df9e9dc27e70664cafe5c53df66dd0b8237678ada90e73f05ec60e6f6e96c3cbb1ea2f9dece115d5bdba10\"\n         \"33e53662a7d72a29477b5beb35710591d3e23e5f0379baea62ffdee535bcdf879cbf69b88d7ea37c8015381cf\"\n-        \"63dc33d28f757a4a5e15d6a08\"_hex};\n-\n-    // Convert to std::vector<bool> format that the ASMap interpreter uses.\n-    std::vector<bool> asmap_bits;\n-    asmap_bits.reserve(ASMAP_DATA.size() * 8);\n-    for (auto byte : ASMAP_DATA) {\n-        for (int bit = 0; bit < 8; ++bit) {\n-            asmap_bits.push_back((std::to_integer<uint8_t>(byte) >> bit) & 1);\n-        }\n-    }\n+        \"63dc33d28f757a4a5e15d6a08\"_hex_v};\n \n     // Construct NetGroupManager with this data.\n-    NetGroupManager netgroup{std::move(asmap_bits)};\n+    NetGroupManager netgroup{std::move(ASMAP_DATA)};",
      "path": "src/test/netbase_tests.cpp",
      "position": 1,
      "original_position": 36,
      "commit_id": "eaf5e12d2b52d66a75a68cf94d328d0ec9048986",
      "original_commit_id": "c2274746d1b3d1a2712ef8bd567d25f5aa5cf5bb",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In c2274746d1b3d1a2712ef8bd567d25f5aa5cf5bb \"refactor: Operate on bytes instead of bits in Asmap code\": It's unfortunate that you need to make the hex data a `vector` again when the later span commit will accept the `std::array`.\r\n\r\nYou could do:\r\n```C++\r\nNetGroupManager netgroup{std::vector(ASMAP_DATA.begin(), ASMAP_DATA.end())};\r\n```\r\nIn this commit and avoid changing the type of `ASMAP_DATA`.",
      "created_at": "2025-11-17T18:48:18Z",
      "updated_at": "2025-11-17T20:30:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2535169330",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2535169330"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 631,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2535184260",
      "pull_request_review_id": 3473921944,
      "id": 2535184260,
      "node_id": "PRRC_kwDOABII586XG9eE",
      "diff_hunk": "@@ -194,27 +202,25 @@ bool SanityCheckASMap(const std::vector<bool>& asmap, int bits)\n     return false; // Reached EOF without RETURN instruction\n }\n \n-std::vector<bool> DecodeAsmap(fs::path path)\n+std::vector<std::byte> DecodeAsmap(fs::path path)\n {\n-    std::vector<bool> bits;\n     FILE *filestr = fsbridge::fopen(path, \"rb\");\n     AutoFile file{filestr};\n     if (file.IsNull()) {\n         LogWarning(\"Failed to open asmap file from disk\");\n-        return bits;\n+        return {};\n     }\n     int64_t length{file.size()};\n     LogInfo(\"Opened asmap file %s (%d bytes) from disk\", fs::quoted(fs::PathToString(path)), length);\n-    uint8_t cur_byte;\n-    for (int i = 0; i < length; ++i) {\n-        file >> cur_byte;\n-        for (int bit = 0; bit < 8; ++bit) {\n-            bits.push_back((cur_byte >> bit) & 1);\n-        }\n-    }\n-    if (!SanityCheckASMap(bits, 128)) {\n+    file.seek(0, SEEK_SET);",
      "path": "src/util/asmap.cpp",
      "position": 1,
      "original_position": 237,
      "commit_id": "eaf5e12d2b52d66a75a68cf94d328d0ec9048986",
      "original_commit_id": "c2274746d1b3d1a2712ef8bd567d25f5aa5cf5bb",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In c2274746d1b3d1a2712ef8bd567d25f5aa5cf5bb \"refactor: Operate on bytes instead of bits in Asmap code\": Line seems like a leftover from a merge?",
      "created_at": "2025-11-17T18:53:56Z",
      "updated_at": "2025-11-17T20:30:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2535184260",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2535184260"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 215,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2535226892",
      "pull_request_review_id": 3473921944,
      "id": 2535226892,
      "node_id": "PRRC_kwDOABII586XHH4M",
      "diff_hunk": "",
      "path": "src/bench/addrman.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "4fec726c4d352daf2fb4a7e5ed463e44c8815ddb",
      "original_commit_id": "4c8e4eee00f16bace634221277c694ee5dda23f8",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit in 4c8e4eee00f16bace634221277c694ee5dda23f8: Sorry, accidentally injected possessive apostrophe, \"span's\", commit message should be:\r\n> The version hash changes due to spans being serialized without their size-prefix (unlike vectors).",
      "created_at": "2025-11-17T19:09:48Z",
      "updated_at": "2025-11-17T20:30:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2535226892",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2535226892"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2535279441",
      "pull_request_review_id": 3473921944,
      "id": 2535279441,
      "node_id": "PRRC_kwDOABII586XHUtR",
      "diff_hunk": "@@ -203,6 +305,10 @@ bool SanityCheckASMap(const std::span<const std::byte>& asmap, int bits)\n     return false; // Reached EOF without RETURN instruction\n }\n \n+/**\n+ * Provides a safe interface for validating ASMap data before use. Validates\n+ * the data and returns it if valid, empty span otherwise.",
      "path": "src/util/asmap.cpp",
      "position": 1,
      "original_position": 282,
      "commit_id": "eaf5e12d2b52d66a75a68cf94d328d0ec9048986",
      "original_commit_id": "0196f70a8c99b9c03c81e879cd9f05560fc20543",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In 0196f70a8c99b9c03c81e879cd9f05560fc20543: Could replace second sentence with \"Returns true if the data is valid for 128 bits long inputs\" or just remove it (no longer returns span).",
      "created_at": "2025-11-17T19:28:33Z",
      "updated_at": "2025-11-17T20:30:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2535279441",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2535279441"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 310,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2535403848",
      "pull_request_review_id": 3473921944,
      "id": 2535403848,
      "node_id": "PRRC_kwDOABII586XHzFI",
      "diff_hunk": "@@ -5,16 +5,23 @@\n #ifndef BITCOIN_UTIL_ASMAP_H\n #define BITCOIN_UTIL_ASMAP_H\n \n+#include <uint256.h>\n #include <util/fs.h>\n \n+#include <cstddef>\n #include <cstdint>\n+#include <span>\n #include <vector>\n \n-uint32_t Interpret(const std::vector<bool> &asmap, const std::vector<bool> &ip);\n+uint32_t Interpret(std::span<const std::byte> asmap, std::span<const std::byte> ip);",
      "path": "src/util/asmap.h",
      "position": 13,
      "original_position": 13,
      "commit_id": "4fec726c4d352daf2fb4a7e5ed463e44c8815ddb",
      "original_commit_id": "eaf5e12d2b52d66a75a68cf94d328d0ec9048986",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Continuing https://github.com/bitcoin/bitcoin/pull/28792#discussion_r2514801922\r\n\r\nWe still mix `std::span` and `const std::span&` here in:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/eaf5e12d2b52d66a75a68cf94d328d0ec9048986/src/util/asmap.h#L16-L25",
      "created_at": "2025-11-17T20:19:40Z",
      "updated_at": "2025-11-17T20:30:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2535403848",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2535403848"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 16,
      "original_line": 16,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2535412684",
      "pull_request_review_id": 3473921944,
      "id": 2535412684,
      "node_id": "PRRC_kwDOABII586XH1PM",
      "diff_hunk": "@@ -5,186 +5,297 @@\n #include <util/asmap.h>\n \n #include <clientversion.h>\n+#include <hash.h>\n #include <logging.h>\n #include <serialize.h>\n #include <streams.h>\n+#include <uint256.h>\n #include <util/fs.h>\n \n #include <algorithm>\n #include <bit>\n #include <cassert>\n+#include <cstddef>\n #include <cstdio>\n+#include <span>\n #include <utility>\n #include <vector>\n \n+/*\n+ * ASMap (Autonomous System Map) Implementation\n+ *\n+ * Provides a compressed mapping from IP address prefixes to Autonomous System Numbers (ASNs).\n+ * Uses a binary trie structure encoded as bytecode instructions that are interpreted\n+ * at runtime to find the ASN for a given IP address.\n+ *\n+ * The format of the asmap data is a bit-packed binary format where the entire mapping\n+ * is treated as a continuous sequence of bits. Instructions and their arguments are\n+ * encoded using variable numbers of bits and concatenated together without regard for\n+ * byte boundaries. The bits are stored in bytes using little-endian bit ordering.\n+ *\n+ * The data structure internally represents the mapping as a binary trie where:\n+ * - Unassigned subnets (no ASN mapping present) map to 0\n+ * - Subnets mapped entirely to one ASN become leaf nodes\n+ * - Subnets whose lower and upper halves have different mappings branch into subtrees\n+ *\n+ * The encoding uses variable-length integers and four instruction types (RETURN, JUMP,\n+ * MATCH, DEFAULT) to efficiently represent the trie.\n+ */\n+\n namespace {\n \n+// Indicates decoding errors or invalid data\n constexpr uint32_t INVALID = 0xFFFFFFFF;\n \n-uint32_t DecodeBits(std::vector<bool>::const_iterator& bitpos, const std::vector<bool>::const_iterator& endpos, uint8_t minval, const std::vector<uint8_t> &bit_sizes)\n+/**\n+ * Extract a single bit from byte array using little-endian bit ordering.\n+ * Used for ASMap data where bits are numbered right-to-left within each byte (LSB first).\n+ */\n+inline bool GetBitLE(std::span<const std::byte> bytes, uint32_t bitpos) noexcept\n+{\n+    return (std::to_integer<uint8_t>(bytes[bitpos / 8]) >> (bitpos % 8)) & 1;\n+}\n+\n+/**\n+ * Extract a single bit from byte array using big-endian bit ordering.\n+ * Used for IP addresses to match network byte order conventions.\n+ */\n+inline bool GetBitBE(std::span<const std::byte> bytes, uint32_t bitpos) noexcept\n+{\n+    return (std::to_integer<uint8_t>(bytes[(bytes.size() * 8 - bitpos) / 8]) >> (7 - ((bytes.size() * 8 - bitpos) % 8))) & 1;\n+}\n+\n+/**\n+ * Variable-length integer decoder using a custom encoding scheme.\n+ *\n+ * The encoding is easiest to describe using an example. Let's say minval=100 and\n+ * bit_sizes=[4,2,2,3]. In that case:\n+ * - x in [100..115]: encoded as [0] + [4-bit BE encoding of (x-100)]\n+ * - x in [116..119]: encoded as [1,0] + [2-bit BE encoding of (x-116)]\n+ * - x in [120..123]: encoded as [1,1,0] + [2-bit BE encoding of (x-120)]\n+ * - x in [124..131]: encoded as [1,1,1] + [3-bit BE encoding of (x-124)]\n+ *\n+ * In general, every number is encoded as:\n+ * - First, k \"1\"-bits, where k is the class the number falls in\n+ * - Then, a \"0\"-bit, unless k is the highest class\n+ * - Lastly, bit_sizes[k] bits encoding in big endian the position within that class\n+ */\n+uint32_t DecodeBits(size_t& bitpos, const std::span<const std::byte>& data, uint8_t minval, const std::span<const uint8_t> bit_sizes)\n {\n-    uint32_t val = minval;\n+    uint32_t val = minval;  // Start with minimum encodable value\n     bool bit;\n-    for (std::vector<uint8_t>::const_iterator bit_sizes_it = bit_sizes.begin();\n-        bit_sizes_it != bit_sizes.end(); ++bit_sizes_it) {\n-        if (bit_sizes_it + 1 != bit_sizes.end()) {\n-            if (bitpos == endpos) break;\n-            bit = *bitpos;\n+    for (auto bit_sizes_it = bit_sizes.begin(); bit_sizes_it != bit_sizes.end(); ++bit_sizes_it) {\n+        // Read continuation bit to determine if we're in this class\n+        if (bit_sizes_it + 1 != bit_sizes.end()) {  // Unless we're in the last class\n+            if (bitpos >= data.size() * 8) break;\n+            bit = GetBitLE(data, bitpos);\n             bitpos++;\n         } else {\n-            bit = 0;\n+            bit = 0;  // Last class has no continuation bit\n         }\n         if (bit) {\n-            val += (1 << *bit_sizes_it);\n+            // If the value will not fit in this class, subtract its range from val,\n+            // emit a \"1\" bit and continue with the next class\n+            val += (1 << *bit_sizes_it);  // Add size of this class\n         } else {\n+            // Decode the position within this class in big endian\n             for (int b = 0; b < *bit_sizes_it; b++) {\n-                if (bitpos == endpos) return INVALID; // Reached EOF in mantissa\n-                bit = *bitpos;\n+                if (bitpos >= data.size() * 8) return INVALID; // Reached EOF in mantissa\n+                bit = GetBitLE(data, bitpos);\n                 bitpos++;\n-                val += bit << (*bit_sizes_it - 1 - b);\n+                val += bit << (*bit_sizes_it - 1 - b);  // Big-endian within the class\n             }\n             return val;\n         }\n     }\n     return INVALID; // Reached EOF in exponent\n }\n \n+/**\n+ * Instruction Set\n+ *\n+ * The instruction set is designed to efficiently encode a binary trie\n+ * that maps IP prefixes to ASNs. Each instruction type serves a specific\n+ * role in trie traversal and evaluation.\n+ */\n enum class Instruction : uint32_t\n {\n+    // A return instruction, encoded as [0], returns a constant ASN.\n+    // It is followed by an integer using the ASN encoding.\n     RETURN = 0,\n+    // A jump instruction, encoded as [1,0], inspects the next unused bit in the input\n+    // and either continues execution (if 0), or skips a specified number of bits (if 1).\n+    // It is followed by an integer using jump encoding.\n     JUMP = 1,\n+    // A match instruction, encoded as [1,1,0], inspects 1 or more of the next unused bits\n+    // in the input. If they all match, execution continues. If not, the default ASN is returned.",
      "path": "src/util/asmap.cpp",
      "position": 1,
      "original_position": 139,
      "commit_id": "eaf5e12d2b52d66a75a68cf94d328d0ec9048986",
      "original_commit_id": "eaf5e12d2b52d66a75a68cf94d328d0ec9048986",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Related: https://github.com/bitcoin/bitcoin/pull/28792#discussion_r2522389508\n\nThanks for documenting the C++ implementation!\n\nnit:\n```suggestion\n    // in the input. If they all match, execution continues. If not, the default ASN is returned (or 0 if unset).\n```\n\nCould also correct the Python side:\n```diff\n--- a/contrib/asmap/asmap.py\n+++ b/contrib/asmap/asmap.py\n@@ -157,7 +157,7 @@ class _Instruction(Enum):\n     JUMP = 1\n     # A match instruction, encoded as [1,1,0] inspects 1 or more of the next unused bits\n     # in the input with its argument. If they all match, execution continues. If they do\n-    # not, failure is returned. If a default instruction has been executed before, instead\n+    # not, 0 is returned. If a default instruction has been executed before, instead\n     # of failure the default instruction's argument is returned. It is followed by an\n     # integer in match encoding, and a subprogram. That value is at least 2 bits and at\n     # most 9 bits. An n-bit value signifies matching (n-1) bits in the input with the lower\n```\n",
      "created_at": "2025-11-17T20:23:20Z",
      "updated_at": "2025-11-17T20:30:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2535412684",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2535412684"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 131,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2535456270",
      "pull_request_review_id": 3474487838,
      "id": 2535456270,
      "node_id": "PRRC_kwDOABII586XH_4O",
      "diff_hunk": "@@ -81,31 +83,28 @@ std::vector<unsigned char> NetGroupManager::GetGroup(const CNetAddr& address) co\n uint32_t NetGroupManager::GetMappedAS(const CNetAddr& address) const\n {\n     uint32_t net_class = address.GetNetClass();\n-    if (m_asmap.size() == 0 || (net_class != NET_IPV4 && net_class != NET_IPV6)) {\n+    if (m_asmap.empty() || (net_class != NET_IPV4 && net_class != NET_IPV6)) {\n         return 0; // Indicates not found, safe because AS0 is reserved per RFC7607.\n     }\n-    std::vector<bool> ip_bits(128);",
      "path": "src/netgroup.cpp",
      "position": 27,
      "original_position": 17,
      "commit_id": "4fec726c4d352daf2fb4a7e5ed463e44c8815ddb",
      "original_commit_id": "c2274746d1b3d1a2712ef8bd567d25f5aa5cf5bb",
      "in_reply_to_id": 2534280150,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Agree with the rename suggestion, would make `assert(addr_bytes.size() == ip_bits.size());` less surprising below.",
      "created_at": "2025-11-17T20:42:36Z",
      "updated_at": "2025-11-17T20:42:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2535456270",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2535456270"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 87,
      "original_line": 87,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2540013317",
      "pull_request_review_id": 3480162921,
      "id": 2540013317,
      "node_id": "PRRC_kwDOABII586XZYcF",
      "diff_hunk": "@@ -203,10 +203,8 @@ std::vector<bool> DecodeAsmap(fs::path path)\n         LogWarning(\"Failed to open asmap file from disk\");\n         return bits;\n     }\n-    file.seek(0, SEEK_END);\n-    int length = file.tell();",
      "path": "src/util/asmap.cpp",
      "position": 1,
      "original_position": 5,
      "commit_id": "eaf5e12d2b52d66a75a68cf94d328d0ec9048986",
      "original_commit_id": "db54e01640e1225c470214a763304340a50cdbee",
      "in_reply_to_id": 2534500280,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The commit is here because this PR depends on #33026 and the commit is coming from there, so the discussion on these commits should be held there. I just responded there, so marking this as resolved here.",
      "created_at": "2025-11-19T00:13:08Z",
      "updated_at": "2025-11-19T00:13:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2540013317",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2540013317"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 207,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2542387292",
      "pull_request_review_id": 3483215311,
      "id": 2542387292,
      "node_id": "PRRC_kwDOABII586XicBc",
      "diff_hunk": "@@ -81,31 +83,28 @@ std::vector<unsigned char> NetGroupManager::GetGroup(const CNetAddr& address) co\n uint32_t NetGroupManager::GetMappedAS(const CNetAddr& address) const\n {\n     uint32_t net_class = address.GetNetClass();\n-    if (m_asmap.size() == 0 || (net_class != NET_IPV4 && net_class != NET_IPV6)) {\n+    if (m_asmap.empty() || (net_class != NET_IPV4 && net_class != NET_IPV6)) {\n         return 0; // Indicates not found, safe because AS0 is reserved per RFC7607.\n     }\n-    std::vector<bool> ip_bits(128);\n+    std::vector<std::byte> ip_bits(16);\n     if (address.HasLinkedIPv4()) {\n         // For lookup, treat as if it was just an IPv4 address (IPV4_IN_IPV6_PREFIX + IPv4 bits)\n+        std::copy_n(std::as_bytes(std::span{IPV4_IN_IPV6_PREFIX}).begin(),\n+                    IPV4_IN_IPV6_PREFIX.size(), ip_bits.begin());\n         for (int8_t byte_i = 0; byte_i < 12; ++byte_i) {\n-            for (uint8_t bit_i = 0; bit_i < 8; ++bit_i) {\n-                ip_bits[byte_i * 8 + bit_i] = (IPV4_IN_IPV6_PREFIX[byte_i] >> (7 - bit_i)) & 1;\n-            }\n+            ip_bits[byte_i] = std::byte(IPV4_IN_IPV6_PREFIX[byte_i]);\n         }",
      "path": "src/netgroup.cpp",
      "position": 1,
      "original_position": 28,
      "commit_id": "eaf5e12d2b52d66a75a68cf94d328d0ec9048986",
      "original_commit_id": "c2274746d1b3d1a2712ef8bd567d25f5aa5cf5bb",
      "in_reply_to_id": 2535040100,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Ah, rebase fail I guess, done.",
      "created_at": "2025-11-19T14:56:32Z",
      "updated_at": "2025-11-19T14:56:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2542387292",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2542387292"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": 94,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 96,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2542466280",
      "pull_request_review_id": 3483320366,
      "id": 2542466280,
      "node_id": "PRRC_kwDOABII586XivTo",
      "diff_hunk": "@@ -5,16 +5,23 @@\n #ifndef BITCOIN_UTIL_ASMAP_H\n #define BITCOIN_UTIL_ASMAP_H\n \n+#include <uint256.h>\n #include <util/fs.h>\n \n+#include <cstddef>\n #include <cstdint>\n+#include <span>\n #include <vector>\n \n-uint32_t Interpret(const std::vector<bool> &asmap, const std::vector<bool> &ip);\n+uint32_t Interpret(std::span<const std::byte> asmap, std::span<const std::byte> ip);",
      "path": "src/util/asmap.h",
      "position": 13,
      "original_position": 13,
      "commit_id": "4fec726c4d352daf2fb4a7e5ed463e44c8815ddb",
      "original_commit_id": "eaf5e12d2b52d66a75a68cf94d328d0ec9048986",
      "in_reply_to_id": 2535403848,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Ok, I hope I got them all now.",
      "created_at": "2025-11-19T15:15:29Z",
      "updated_at": "2025-11-19T15:15:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2542466280",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2542466280"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 16,
      "original_line": 16,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2542466628",
      "pull_request_review_id": 3483320780,
      "id": 2542466628,
      "node_id": "PRRC_kwDOABII586XivZE",
      "diff_hunk": "@@ -5,186 +5,297 @@\n #include <util/asmap.h>\n \n #include <clientversion.h>\n+#include <hash.h>\n #include <logging.h>\n #include <serialize.h>\n #include <streams.h>\n+#include <uint256.h>\n #include <util/fs.h>\n \n #include <algorithm>\n #include <bit>\n #include <cassert>\n+#include <cstddef>\n #include <cstdio>\n+#include <span>\n #include <utility>\n #include <vector>\n \n+/*\n+ * ASMap (Autonomous System Map) Implementation\n+ *\n+ * Provides a compressed mapping from IP address prefixes to Autonomous System Numbers (ASNs).\n+ * Uses a binary trie structure encoded as bytecode instructions that are interpreted\n+ * at runtime to find the ASN for a given IP address.\n+ *\n+ * The format of the asmap data is a bit-packed binary format where the entire mapping\n+ * is treated as a continuous sequence of bits. Instructions and their arguments are\n+ * encoded using variable numbers of bits and concatenated together without regard for\n+ * byte boundaries. The bits are stored in bytes using little-endian bit ordering.\n+ *\n+ * The data structure internally represents the mapping as a binary trie where:\n+ * - Unassigned subnets (no ASN mapping present) map to 0\n+ * - Subnets mapped entirely to one ASN become leaf nodes\n+ * - Subnets whose lower and upper halves have different mappings branch into subtrees\n+ *\n+ * The encoding uses variable-length integers and four instruction types (RETURN, JUMP,\n+ * MATCH, DEFAULT) to efficiently represent the trie.\n+ */\n+\n namespace {\n \n+// Indicates decoding errors or invalid data\n constexpr uint32_t INVALID = 0xFFFFFFFF;\n \n-uint32_t DecodeBits(std::vector<bool>::const_iterator& bitpos, const std::vector<bool>::const_iterator& endpos, uint8_t minval, const std::vector<uint8_t> &bit_sizes)\n+/**\n+ * Extract a single bit from byte array using little-endian bit ordering.\n+ * Used for ASMap data where bits are numbered right-to-left within each byte (LSB first).\n+ */\n+inline bool GetBitLE(std::span<const std::byte> bytes, uint32_t bitpos) noexcept\n+{\n+    return (std::to_integer<uint8_t>(bytes[bitpos / 8]) >> (bitpos % 8)) & 1;\n+}\n+\n+/**\n+ * Extract a single bit from byte array using big-endian bit ordering.\n+ * Used for IP addresses to match network byte order conventions.\n+ */\n+inline bool GetBitBE(std::span<const std::byte> bytes, uint32_t bitpos) noexcept\n+{\n+    return (std::to_integer<uint8_t>(bytes[(bytes.size() * 8 - bitpos) / 8]) >> (7 - ((bytes.size() * 8 - bitpos) % 8))) & 1;\n+}\n+\n+/**\n+ * Variable-length integer decoder using a custom encoding scheme.\n+ *\n+ * The encoding is easiest to describe using an example. Let's say minval=100 and\n+ * bit_sizes=[4,2,2,3]. In that case:\n+ * - x in [100..115]: encoded as [0] + [4-bit BE encoding of (x-100)]\n+ * - x in [116..119]: encoded as [1,0] + [2-bit BE encoding of (x-116)]\n+ * - x in [120..123]: encoded as [1,1,0] + [2-bit BE encoding of (x-120)]\n+ * - x in [124..131]: encoded as [1,1,1] + [3-bit BE encoding of (x-124)]\n+ *\n+ * In general, every number is encoded as:\n+ * - First, k \"1\"-bits, where k is the class the number falls in\n+ * - Then, a \"0\"-bit, unless k is the highest class\n+ * - Lastly, bit_sizes[k] bits encoding in big endian the position within that class\n+ */\n+uint32_t DecodeBits(size_t& bitpos, const std::span<const std::byte>& data, uint8_t minval, const std::span<const uint8_t> bit_sizes)\n {\n-    uint32_t val = minval;\n+    uint32_t val = minval;  // Start with minimum encodable value\n     bool bit;\n-    for (std::vector<uint8_t>::const_iterator bit_sizes_it = bit_sizes.begin();\n-        bit_sizes_it != bit_sizes.end(); ++bit_sizes_it) {\n-        if (bit_sizes_it + 1 != bit_sizes.end()) {\n-            if (bitpos == endpos) break;\n-            bit = *bitpos;\n+    for (auto bit_sizes_it = bit_sizes.begin(); bit_sizes_it != bit_sizes.end(); ++bit_sizes_it) {\n+        // Read continuation bit to determine if we're in this class\n+        if (bit_sizes_it + 1 != bit_sizes.end()) {  // Unless we're in the last class\n+            if (bitpos >= data.size() * 8) break;\n+            bit = GetBitLE(data, bitpos);\n             bitpos++;\n         } else {\n-            bit = 0;\n+            bit = 0;  // Last class has no continuation bit\n         }\n         if (bit) {\n-            val += (1 << *bit_sizes_it);\n+            // If the value will not fit in this class, subtract its range from val,\n+            // emit a \"1\" bit and continue with the next class\n+            val += (1 << *bit_sizes_it);  // Add size of this class\n         } else {\n+            // Decode the position within this class in big endian\n             for (int b = 0; b < *bit_sizes_it; b++) {\n-                if (bitpos == endpos) return INVALID; // Reached EOF in mantissa\n-                bit = *bitpos;\n+                if (bitpos >= data.size() * 8) return INVALID; // Reached EOF in mantissa\n+                bit = GetBitLE(data, bitpos);\n                 bitpos++;\n-                val += bit << (*bit_sizes_it - 1 - b);\n+                val += bit << (*bit_sizes_it - 1 - b);  // Big-endian within the class\n             }\n             return val;\n         }\n     }\n     return INVALID; // Reached EOF in exponent\n }\n \n+/**\n+ * Instruction Set\n+ *\n+ * The instruction set is designed to efficiently encode a binary trie\n+ * that maps IP prefixes to ASNs. Each instruction type serves a specific\n+ * role in trie traversal and evaluation.\n+ */\n enum class Instruction : uint32_t\n {\n+    // A return instruction, encoded as [0], returns a constant ASN.\n+    // It is followed by an integer using the ASN encoding.\n     RETURN = 0,\n+    // A jump instruction, encoded as [1,0], inspects the next unused bit in the input\n+    // and either continues execution (if 0), or skips a specified number of bits (if 1).\n+    // It is followed by an integer using jump encoding.\n     JUMP = 1,\n+    // A match instruction, encoded as [1,1,0], inspects 1 or more of the next unused bits\n+    // in the input. If they all match, execution continues. If not, the default ASN is returned.",
      "path": "src/util/asmap.cpp",
      "position": 1,
      "original_position": 139,
      "commit_id": "eaf5e12d2b52d66a75a68cf94d328d0ec9048986",
      "original_commit_id": "eaf5e12d2b52d66a75a68cf94d328d0ec9048986",
      "in_reply_to_id": 2535412684,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done. And I just clarified that failure means 0 in python, otherwise there would have been more edits necessary to make this clear, for example the line below your suggestion still talks about a failure too.",
      "created_at": "2025-11-19T15:15:35Z",
      "updated_at": "2025-11-19T15:15:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2542466628",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2542466628"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 131,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2542467175",
      "pull_request_review_id": 3483321642,
      "id": 2542467175,
      "node_id": "PRRC_kwDOABII586Xivhn",
      "diff_hunk": "@@ -203,6 +305,10 @@ bool SanityCheckASMap(const std::span<const std::byte>& asmap, int bits)\n     return false; // Reached EOF without RETURN instruction\n }\n \n+/**\n+ * Provides a safe interface for validating ASMap data before use. Validates\n+ * the data and returns it if valid, empty span otherwise.",
      "path": "src/util/asmap.cpp",
      "position": 1,
      "original_position": 282,
      "commit_id": "eaf5e12d2b52d66a75a68cf94d328d0ec9048986",
      "original_commit_id": "0196f70a8c99b9c03c81e879cd9f05560fc20543",
      "in_reply_to_id": 2535279441,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done",
      "created_at": "2025-11-19T15:15:43Z",
      "updated_at": "2025-11-19T15:15:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2542467175",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2542467175"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 310,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2542467832",
      "pull_request_review_id": 3483322403,
      "id": 2542467832,
      "node_id": "PRRC_kwDOABII586Xivr4",
      "diff_hunk": "",
      "path": "src/bench/addrman.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "4fec726c4d352daf2fb4a7e5ed463e44c8815ddb",
      "original_commit_id": "4c8e4eee00f16bace634221277c694ee5dda23f8",
      "in_reply_to_id": 2535226892,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Fixed",
      "created_at": "2025-11-19T15:15:52Z",
      "updated_at": "2025-11-19T15:15:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2542467832",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2542467832"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2542468167",
      "pull_request_review_id": 3483322835,
      "id": 2542468167,
      "node_id": "PRRC_kwDOABII586XivxH",
      "diff_hunk": "@@ -194,27 +202,25 @@ bool SanityCheckASMap(const std::vector<bool>& asmap, int bits)\n     return false; // Reached EOF without RETURN instruction\n }\n \n-std::vector<bool> DecodeAsmap(fs::path path)\n+std::vector<std::byte> DecodeAsmap(fs::path path)\n {\n-    std::vector<bool> bits;\n     FILE *filestr = fsbridge::fopen(path, \"rb\");\n     AutoFile file{filestr};\n     if (file.IsNull()) {\n         LogWarning(\"Failed to open asmap file from disk\");\n-        return bits;\n+        return {};\n     }\n     int64_t length{file.size()};\n     LogInfo(\"Opened asmap file %s (%d bytes) from disk\", fs::quoted(fs::PathToString(path)), length);\n-    uint8_t cur_byte;\n-    for (int i = 0; i < length; ++i) {\n-        file >> cur_byte;\n-        for (int bit = 0; bit < 8; ++bit) {\n-            bits.push_back((cur_byte >> bit) & 1);\n-        }\n-    }\n-    if (!SanityCheckASMap(bits, 128)) {\n+    file.seek(0, SEEK_SET);",
      "path": "src/util/asmap.cpp",
      "position": 1,
      "original_position": 237,
      "commit_id": "eaf5e12d2b52d66a75a68cf94d328d0ec9048986",
      "original_commit_id": "c2274746d1b3d1a2712ef8bd567d25f5aa5cf5bb",
      "in_reply_to_id": 2535184260,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Indeed, removed.",
      "created_at": "2025-11-19T15:15:58Z",
      "updated_at": "2025-11-19T15:15:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2542468167",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2542468167"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 215,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2542468478",
      "pull_request_review_id": 3483323308,
      "id": 2542468478,
      "node_id": "PRRC_kwDOABII586Xiv1-",
      "diff_hunk": "@@ -625,19 +625,10 @@ BOOST_AUTO_TEST_CASE(asmap_test_vectors)\n         \"1e3bbc17ba4d6f79ea3f031b876799ac268b1e0ea9babf0f9a8e5f6c55e363c6363df46afc696d7afceaf49b6\"\n         \"e62df9e9dc27e70664cafe5c53df66dd0b8237678ada90e73f05ec60e6f6e96c3cbb1ea2f9dece115d5bdba10\"\n         \"33e53662a7d72a29477b5beb35710591d3e23e5f0379baea62ffdee535bcdf879cbf69b88d7ea37c8015381cf\"\n-        \"63dc33d28f757a4a5e15d6a08\"_hex};\n-\n-    // Convert to std::vector<bool> format that the ASMap interpreter uses.\n-    std::vector<bool> asmap_bits;\n-    asmap_bits.reserve(ASMAP_DATA.size() * 8);\n-    for (auto byte : ASMAP_DATA) {\n-        for (int bit = 0; bit < 8; ++bit) {\n-            asmap_bits.push_back((std::to_integer<uint8_t>(byte) >> bit) & 1);\n-        }\n-    }\n+        \"63dc33d28f757a4a5e15d6a08\"_hex_v};\n \n     // Construct NetGroupManager with this data.\n-    NetGroupManager netgroup{std::move(asmap_bits)};\n+    NetGroupManager netgroup{std::move(ASMAP_DATA)};",
      "path": "src/test/netbase_tests.cpp",
      "position": 1,
      "original_position": 36,
      "commit_id": "eaf5e12d2b52d66a75a68cf94d328d0ec9048986",
      "original_commit_id": "c2274746d1b3d1a2712ef8bd567d25f5aa5cf5bb",
      "in_reply_to_id": 2535169330,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "That works, done.",
      "created_at": "2025-11-19T15:16:03Z",
      "updated_at": "2025-11-19T15:16:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2542468478",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2542468478"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 631,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2542486234",
      "pull_request_review_id": 3483346555,
      "id": 2542486234,
      "node_id": "PRRC_kwDOABII586Xi0La",
      "diff_hunk": "@@ -81,31 +83,28 @@ std::vector<unsigned char> NetGroupManager::GetGroup(const CNetAddr& address) co\n uint32_t NetGroupManager::GetMappedAS(const CNetAddr& address) const\n {\n     uint32_t net_class = address.GetNetClass();\n-    if (m_asmap.size() == 0 || (net_class != NET_IPV4 && net_class != NET_IPV6)) {\n+    if (m_asmap.empty() || (net_class != NET_IPV4 && net_class != NET_IPV6)) {\n         return 0; // Indicates not found, safe because AS0 is reserved per RFC7607.\n     }\n-    std::vector<bool> ip_bits(128);",
      "path": "src/netgroup.cpp",
      "position": 27,
      "original_position": 17,
      "commit_id": "4fec726c4d352daf2fb4a7e5ed463e44c8815ddb",
      "original_commit_id": "c2274746d1b3d1a2712ef8bd567d25f5aa5cf5bb",
      "in_reply_to_id": 2534280150,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Renamed",
      "created_at": "2025-11-19T15:20:28Z",
      "updated_at": "2025-11-19T15:20:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2542486234",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2542486234"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 87,
      "original_line": 87,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2543648184",
      "pull_request_review_id": 3484844059,
      "id": 2543648184,
      "node_id": "PRRC_kwDOABII586XnP24",
      "diff_hunk": "@@ -625,19 +625,10 @@ BOOST_AUTO_TEST_CASE(asmap_test_vectors)\n         \"1e3bbc17ba4d6f79ea3f031b876799ac268b1e0ea9babf0f9a8e5f6c55e363c6363df46afc696d7afceaf49b6\"\n         \"e62df9e9dc27e70664cafe5c53df66dd0b8237678ada90e73f05ec60e6f6e96c3cbb1ea2f9dece115d5bdba10\"\n         \"33e53662a7d72a29477b5beb35710591d3e23e5f0379baea62ffdee535bcdf879cbf69b88d7ea37c8015381cf\"\n-        \"63dc33d28f757a4a5e15d6a08\"_hex};\n-\n-    // Convert to std::vector<bool> format that the ASMap interpreter uses.\n-    std::vector<bool> asmap_bits;\n-    asmap_bits.reserve(ASMAP_DATA.size() * 8);\n-    for (auto byte : ASMAP_DATA) {\n-        for (int bit = 0; bit < 8; ++bit) {\n-            asmap_bits.push_back((std::to_integer<uint8_t>(byte) >> bit) & 1);\n-        }\n-    }\n+        \"63dc33d28f757a4a5e15d6a08\"_hex_v};\n \n     // Construct NetGroupManager with this data.\n-    NetGroupManager netgroup{std::move(asmap_bits)};\n+    NetGroupManager netgroup{std::move(ASMAP_DATA)};",
      "path": "src/test/netbase_tests.cpp",
      "position": 1,
      "original_position": 36,
      "commit_id": "eaf5e12d2b52d66a75a68cf94d328d0ec9048986",
      "original_commit_id": "c2274746d1b3d1a2712ef8bd567d25f5aa5cf5bb",
      "in_reply_to_id": 2535169330,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I meant you could could have this in the intermediate commit:\r\n\r\n```C++\r\nNetGroupManager netgroup{std::vector(ASMAP_DATA.begin(), ASMAP_DATA.end())};\r\n```\r\nBut then once we reach the commit adding embedding support change to:\r\n```C++\r\nauto netgroup{NetGroupManager::WithEmbeddedAsmap(ASMAP_DATA)};\r\n```\r\n...ending up going directly from `std::array` -> `std::span`.\r\n\r\n---\r\n\r\nIf you prefer the current way I would still avoid `auto` and change:\r\n\r\n```diff\r\n- auto asmap_vec{std::vector(ASMAP_DATA.begin(), ASMAP_DATA.end())};\r\n+ std::vector asmap_vec(ASMAP_DATA.begin(), ASMAP_DATA.end());\r\n  NetGroupManager netgroup{asmap_vec};\r\n```\r\nBut no big deal.\r\n\r\nNice to see 1/3 merged!",
      "created_at": "2025-11-19T21:38:39Z",
      "updated_at": "2025-11-19T21:38:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2543648184",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2543648184"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 631,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2543764811",
      "pull_request_review_id": 3484989975,
      "id": 2543764811,
      "node_id": "PRRC_kwDOABII586XnsVL",
      "diff_hunk": "@@ -625,19 +625,10 @@ BOOST_AUTO_TEST_CASE(asmap_test_vectors)\n         \"1e3bbc17ba4d6f79ea3f031b876799ac268b1e0ea9babf0f9a8e5f6c55e363c6363df46afc696d7afceaf49b6\"\n         \"e62df9e9dc27e70664cafe5c53df66dd0b8237678ada90e73f05ec60e6f6e96c3cbb1ea2f9dece115d5bdba10\"\n         \"33e53662a7d72a29477b5beb35710591d3e23e5f0379baea62ffdee535bcdf879cbf69b88d7ea37c8015381cf\"\n-        \"63dc33d28f757a4a5e15d6a08\"_hex};\n-\n-    // Convert to std::vector<bool> format that the ASMap interpreter uses.\n-    std::vector<bool> asmap_bits;\n-    asmap_bits.reserve(ASMAP_DATA.size() * 8);\n-    for (auto byte : ASMAP_DATA) {\n-        for (int bit = 0; bit < 8; ++bit) {\n-            asmap_bits.push_back((std::to_integer<uint8_t>(byte) >> bit) & 1);\n-        }\n-    }\n+        \"63dc33d28f757a4a5e15d6a08\"_hex_v};\n \n     // Construct NetGroupManager with this data.\n-    NetGroupManager netgroup{std::move(asmap_bits)};\n+    NetGroupManager netgroup{std::move(ASMAP_DATA)};",
      "path": "src/test/netbase_tests.cpp",
      "position": 1,
      "original_position": 36,
      "commit_id": "eaf5e12d2b52d66a75a68cf94d328d0ec9048986",
      "original_commit_id": "c2274746d1b3d1a2712ef8bd567d25f5aa5cf5bb",
      "in_reply_to_id": 2535169330,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Ah, I see, thanks for clarifying! Done.",
      "created_at": "2025-11-19T22:28:19Z",
      "updated_at": "2025-11-19T22:28:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2543764811",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2543764811"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 631,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2544942080",
      "pull_request_review_id": 3486433210,
      "id": 2544942080,
      "node_id": "PRRC_kwDOABII586XsLwA",
      "diff_hunk": "@@ -625,19 +625,10 @@ BOOST_AUTO_TEST_CASE(asmap_test_vectors)\n         \"1e3bbc17ba4d6f79ea3f031b876799ac268b1e0ea9babf0f9a8e5f6c55e363c6363df46afc696d7afceaf49b6\"\n         \"e62df9e9dc27e70664cafe5c53df66dd0b8237678ada90e73f05ec60e6f6e96c3cbb1ea2f9dece115d5bdba10\"\n         \"33e53662a7d72a29477b5beb35710591d3e23e5f0379baea62ffdee535bcdf879cbf69b88d7ea37c8015381cf\"\n-        \"63dc33d28f757a4a5e15d6a08\"_hex};\n-\n-    // Convert to std::vector<bool> format that the ASMap interpreter uses.\n-    std::vector<bool> asmap_bits;\n-    asmap_bits.reserve(ASMAP_DATA.size() * 8);\n-    for (auto byte : ASMAP_DATA) {\n-        for (int bit = 0; bit < 8; ++bit) {\n-            asmap_bits.push_back((std::to_integer<uint8_t>(byte) >> bit) & 1);\n-        }\n-    }\n+        \"63dc33d28f757a4a5e15d6a08\"_hex_v};\n \n     // Construct NetGroupManager with this data.\n-    NetGroupManager netgroup{std::move(asmap_bits)};\n+    NetGroupManager netgroup{std::move(ASMAP_DATA)};",
      "path": "src/test/netbase_tests.cpp",
      "position": 1,
      "original_position": 36,
      "commit_id": "eaf5e12d2b52d66a75a68cf94d328d0ec9048986",
      "original_commit_id": "c2274746d1b3d1a2712ef8bd567d25f5aa5cf5bb",
      "in_reply_to_id": 2535169330,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thank you! In adfd800626a7910a603c34ab733fc1e91d438bc5 the `ASMAP_DATA` type is still unnecessarily changed from `constexpr auto` to `static const auto`.",
      "created_at": "2025-11-20T08:55:36Z",
      "updated_at": "2025-11-20T15:12:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2544942080",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2544942080"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 631,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2545022654",
      "pull_request_review_id": 3486433210,
      "id": 2545022654,
      "node_id": "PRRC_kwDOABII586Xsfa-",
      "diff_hunk": "@@ -17,5 +18,7 @@ bool SanityCheckASMap(const std::vector<std::byte>& asmap, int bits);\n \n /** Read asmap from provided binary file */\n std::vector<std::byte> DecodeAsmap(fs::path path);\n+/** Calculate the asmap version, a checksum identifying the asmap being used. */\n+uint256 AsmapVersion(const std::vector<std::byte>& data);",
      "path": "src/util/asmap.h",
      "position": 1,
      "original_position": 13,
      "commit_id": "b41f5a29f7d56da8fd157770ad29b5776c3684c6",
      "original_commit_id": "d278d6193b8d754eb108bc3ccc256260085b32c9",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "meganit in d278d6193b8d754eb108bc3ccc256260085b32c9 \"refactor: Unify asmap version calculation and naming\":\r\nAs `uint256 AsmapVersion(const std::vector<std::byte>& data)` is new in this PR, it could be introduced as `uint256 AsmapVersion(std::span<const std::byte> data)` from the beginning to avoid line churn.",
      "created_at": "2025-11-20T09:15:32Z",
      "updated_at": "2025-11-20T15:12:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2545022654",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2545022654"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 22,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2545107996",
      "pull_request_review_id": 3486433210,
      "id": 2545107996,
      "node_id": "PRRC_kwDOABII586Xs0Qc",
      "diff_hunk": "@@ -10,15 +10,18 @@\n \n #include <cstddef>\n #include <cstdint>\n+#include <span>\n #include <vector>\n \n-uint32_t Interpret(const std::vector<std::byte>& asmap, const std::vector<std::byte>& ip);\n+uint32_t Interpret(std::span<const std::byte> asmap, std::span<const std::byte> ip);\n \n-bool SanityCheckASMap(const std::vector<std::byte>& asmap, int bits);\n+bool SanityCheckASMap(std::span<const std::byte> asmap, int bits);\n \n-/** Read asmap from provided binary file */\n+/** Read and check asmap from provided binary file */\n std::vector<std::byte> DecodeAsmap(fs::path path);\n+/** Check asmap from embedded data */\n+bool CheckAsmap(std::span<const std::byte> data);",
      "path": "src/util/asmap.h",
      "position": 1,
      "original_position": 17,
      "commit_id": "b41f5a29f7d56da8fd157770ad29b5776c3684c6",
      "original_commit_id": "6b9ce8cff58d7214fca51a8024ec4efb8694e059",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "in 6b9ce8cff58d7214fca51a8024ec4efb8694e059 on `CheckAsmap`:\r\n1. Justification for existence: I dislike default parameter values, so appreciate a distinct function from `SanityCheckASMap`.\r\n2. Comment: Nothing makes it specialized for only embedded data?\r\n3. Location: Maybe it could be added directly after `SanityCheckASMap` in both .h + .cpp since they are so closely related? (Could place it before but that would put it between `Interpret` and `SanityCheckASMap` which are nice to have after each other as they are also closely related).\r\n4. Naming: Could make it more descriptive - something like `CheckStandardAsmap` or `CheckIPV6Asmap`?\r\n5. Usage: Could be used in more places where we have `SanityCheckAsmap(asmap, 128)`\r\n   ```shell\r\n   â‚¿ git grep CheckAsmap\r\n   src/test/fuzz/asmap.cpp:    if (!SanityCheckAsmap(asmap, 128)) return;\r\n   src/test/fuzz/asmap_direct.cpp:    if (SanityCheckAsmap(asmap, ip_len)) {\r\n   src/test/fuzz/asmap_direct.cpp:            assert(!SanityCheckAsmap(prefix, ip_len));\r\n   src/test/fuzz/util/net.h:    if (!SanityCheckAsmap(std::span<std::byte>(asmap), 128)) {\r\n   src/util/asmap.cpp:    // - should have been caught by SanityCheckAsmap below\r\n   src/util/asmap.cpp:bool SanityCheckAsmap(const std::span<const std::byte> asmap, int bits)\r\n   src/util/asmap.cpp:bool CheckAsmap(const std::span<const std::byte> data)\r\n   src/util/asmap.cpp:    if (!SanityCheckAsmap(data, 128)) {\r\n   src/util/asmap.cpp:    if (!CheckAsmap(buffer)) {\r\n   src/util/asmap.h:bool SanityCheckAsmap(std::span<const std::byte> asmap, int bits);\r\n   src/util/asmap.h:bool CheckAsmap(std::span<const std::byte> data);\r\n   ```",
      "created_at": "2025-11-20T09:35:22Z",
      "updated_at": "2025-11-20T15:12:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2545107996",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2545107996"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": 22,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 23,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2545151023",
      "pull_request_review_id": 3486433210,
      "id": 2545151023,
      "node_id": "PRRC_kwDOABII586Xs-wv",
      "diff_hunk": "@@ -24,7 +24,7 @@ using namespace std::literals;\n using node::NodeContext;\n using util::ToString;\n \n-static NetGroupManager EMPTY_NETGROUPMAN{{}};\n+static NetGroupManager EMPTY_NETGROUPMAN{NetGroupManager::NoAsmap()};",
      "path": "src/test/addrman_tests.cpp",
      "position": 1,
      "original_position": 5,
      "commit_id": "b41f5a29f7d56da8fd157770ad29b5776c3684c6",
      "original_commit_id": "6b9ce8cff58d7214fca51a8024ec4efb8694e059",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit in 6b9ce8cff58d7214fca51a8024ec4efb8694e059:\r\n\r\n<details><summary>Could avoid repeating type name here and in other files.</summary>\r\n\r\n```diff\r\ndiff --git a/src/bench/addrman.cpp b/src/bench/addrman.cpp\r\nindex 1e93b9c395..2f474c2411 100644\r\n--- a/src/bench/addrman.cpp\r\n+++ b/src/bench/addrman.cpp\r\n@@ -24,7 +24,7 @@\r\n static constexpr size_t NUM_SOURCES = 64;\r\n static constexpr size_t NUM_ADDRESSES_PER_SOURCE = 256;\r\n \r\n-static NetGroupManager EMPTY_NETGROUPMAN{NetGroupManager::NoAsmap()};\r\n+static auto EMPTY_NETGROUPMAN{NetGroupManager::NoAsmap()};\r\n static constexpr uint32_t ADDRMAN_CONSISTENCY_CHECK_RATIO{0};\r\n \r\n static std::vector<CAddress> g_sources;\r\ndiff --git a/src/test/addrman_tests.cpp b/src/test/addrman_tests.cpp\r\nindex c9a0ebebf0..f1e54416cd 100644\r\n--- a/src/test/addrman_tests.cpp\r\n+++ b/src/test/addrman_tests.cpp\r\n@@ -24,7 +24,7 @@ using namespace std::literals;\r\n using node::NodeContext;\r\n using util::ToString;\r\n \r\n-static NetGroupManager EMPTY_NETGROUPMAN{NetGroupManager::NoAsmap()};\r\n+static auto EMPTY_NETGROUPMAN{NetGroupManager::NoAsmap()};\r\n static const bool DETERMINISTIC{true};\r\n \r\n static int32_t GetCheckRatio(const NodeContext& node_ctx)\r\n@@ -584,7 +584,7 @@ BOOST_AUTO_TEST_CASE(caddrinfo_get_new_bucket_legacy)\r\n // 101.8.0.0/16 AS8\r\n BOOST_AUTO_TEST_CASE(caddrinfo_get_tried_bucket)\r\n {\r\n-    NetGroupManager ngm_asmap{NetGroupManager::WithEmbeddedAsmap(test::data::asmap)};\r\n+    auto ngm_asmap{NetGroupManager::WithEmbeddedAsmap(test::data::asmap)};\r\n \r\n     CAddress addr1 = CAddress(ResolveService(\"250.1.1.1\", 8333), NODE_NONE);\r\n     CAddress addr2 = CAddress(ResolveService(\"250.1.1.1\", 9999), NODE_NONE);\r\n@@ -637,7 +637,7 @@ BOOST_AUTO_TEST_CASE(caddrinfo_get_tried_bucket)\r\n \r\n BOOST_AUTO_TEST_CASE(caddrinfo_get_new_bucket)\r\n {\r\n-    NetGroupManager ngm_asmap{NetGroupManager::WithEmbeddedAsmap(test::data::asmap)};\r\n+    auto ngm_asmap{NetGroupManager::WithEmbeddedAsmap(test::data::asmap)};\r\n \r\n     CAddress addr1 = CAddress(ResolveService(\"250.1.2.1\", 8333), NODE_NONE);\r\n     CAddress addr2 = CAddress(ResolveService(\"250.1.2.1\", 9999), NODE_NONE);\r\n@@ -714,7 +714,7 @@ BOOST_AUTO_TEST_CASE(caddrinfo_get_new_bucket)\r\n \r\n BOOST_AUTO_TEST_CASE(addrman_serialization)\r\n {\r\n-    NetGroupManager netgroupman{NetGroupManager::WithEmbeddedAsmap(test::data::asmap)};\r\n+    auto netgroupman{NetGroupManager::WithEmbeddedAsmap(test::data::asmap)};\r\n \r\n     const auto ratio = GetCheckRatio(m_node);\r\n     auto addrman_asmap1 = std::make_unique<AddrMan>(netgroupman, DETERMINISTIC, ratio);\r\ndiff --git a/src/test/fuzz/asmap.cpp b/src/test/fuzz/asmap.cpp\r\nindex fec0f3f50a..6ed5aa7cd9 100644\r\n--- a/src/test/fuzz/asmap.cpp\r\n+++ b/src/test/fuzz/asmap.cpp\r\n@@ -42,6 +42,6 @@ FUZZ_TARGET(asmap)\r\n         memcpy(&ipv4, addr_data, addr_size);\r\n         net_addr.SetIP(CNetAddr{ipv4});\r\n     }\r\n-    NetGroupManager netgroupman{NetGroupManager::WithEmbeddedAsmap(asmap)};\r\n+    auto netgroupman{NetGroupManager::WithEmbeddedAsmap(asmap)};\r\n     (void)netgroupman.GetMappedAS(net_addr);\r\n }\r\ndiff --git a/src/test/fuzz/p2p_handshake.cpp b/src/test/fuzz/p2p_handshake.cpp\r\nindex 75e14865a4..a56e1e5f1f 100644\r\n--- a/src/test/fuzz/p2p_handshake.cpp\r\n+++ b/src/test/fuzz/p2p_handshake.cpp\r\n@@ -48,7 +48,7 @@ FUZZ_TARGET(p2p_handshake, .init = ::initialize)\r\n     chainman.ResetIbd();\r\n \r\n     node::Warnings warnings{};\r\n-    NetGroupManager netgroupman{NetGroupManager::NoAsmap()};\r\n+    auto netgroupman{NetGroupManager::NoAsmap()};\r\n     AddrMan addrman{netgroupman, /*deterministic=*/true, /*consistency_check_ratio=*/0};\r\n     auto peerman = PeerManager::make(connman, addrman,\r\n                                      /*banman=*/nullptr, chainman,\r\ndiff --git a/src/test/fuzz/process_message.cpp b/src/test/fuzz/process_message.cpp\r\nindex 5ac796ae2c..30c121d7a2 100644\r\n--- a/src/test/fuzz/process_message.cpp\r\n+++ b/src/test/fuzz/process_message.cpp\r\n@@ -77,7 +77,7 @@ FUZZ_TARGET(process_message, .init = initialize_process_message)\r\n     chainman.DisableNextWrite();\r\n \r\n     node::Warnings warnings{};\r\n-    NetGroupManager netgroupman{NetGroupManager::NoAsmap()};\r\n+    auto netgroupman{NetGroupManager::NoAsmap()};\r\n     AddrMan addrman{netgroupman, /*deterministic=*/true, /*consistency_check_ratio=*/0};\r\n     auto peerman = PeerManager::make(connman, addrman,\r\n                                      /*banman=*/nullptr, chainman,\r\ndiff --git a/src/test/netbase_tests.cpp b/src/test/netbase_tests.cpp\r\nindex 5086f21ff4..4d355142e2 100644\r\n--- a/src/test/netbase_tests.cpp\r\n+++ b/src/test/netbase_tests.cpp\r\n@@ -325,7 +325,7 @@ BOOST_AUTO_TEST_CASE(subnet_test)\r\n \r\n BOOST_AUTO_TEST_CASE(netbase_getgroup)\r\n {\r\n-    NetGroupManager netgroupman{NetGroupManager::NoAsmap()}; // use /16\r\n+    auto netgroupman{NetGroupManager::NoAsmap()}; // use /16\r\n     BOOST_CHECK(netgroupman.GetGroup(ResolveIP(\"127.0.0.1\")) == std::vector<unsigned char>({0})); // Local -> !Routable()\r\n     BOOST_CHECK(netgroupman.GetGroup(ResolveIP(\"257.0.0.1\")) == std::vector<unsigned char>({0})); // !Valid -> !Routable()\r\n     BOOST_CHECK(netgroupman.GetGroup(ResolveIP(\"10.0.0.1\")) == std::vector<unsigned char>({0})); // RFC1918 -> !Routable()\r\n```",
      "created_at": "2025-11-20T09:46:05Z",
      "updated_at": "2025-11-20T15:12:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2545151023",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2545151023"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 27,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2545416624",
      "pull_request_review_id": 3486433210,
      "id": 2545416624,
      "node_id": "PRRC_kwDOABII586Xt_mw",
      "diff_hunk": "@@ -5,186 +5,297 @@\n #include <util/asmap.h>\n \n #include <clientversion.h>\n+#include <hash.h>\n #include <logging.h>\n #include <serialize.h>\n #include <streams.h>\n+#include <uint256.h>\n #include <util/fs.h>\n \n #include <algorithm>\n #include <bit>\n #include <cassert>\n+#include <cstddef>\n #include <cstdio>\n+#include <span>\n #include <utility>\n #include <vector>\n \n+/*\n+ * ASMap (Autonomous System Map) Implementation\n+ *\n+ * Provides a compressed mapping from IP address prefixes to Autonomous System Numbers (ASNs).\n+ * Uses a binary trie structure encoded as bytecode instructions that are interpreted\n+ * at runtime to find the ASN for a given IP address.\n+ *\n+ * The format of the asmap data is a bit-packed binary format where the entire mapping\n+ * is treated as a continuous sequence of bits. Instructions and their arguments are\n+ * encoded using variable numbers of bits and concatenated together without regard for\n+ * byte boundaries. The bits are stored in bytes using little-endian bit ordering.\n+ *\n+ * The data structure internally represents the mapping as a binary trie where:\n+ * - Unassigned subnets (no ASN mapping present) map to 0\n+ * - Subnets mapped entirely to one ASN become leaf nodes\n+ * - Subnets whose lower and upper halves have different mappings branch into subtrees\n+ *\n+ * The encoding uses variable-length integers and four instruction types (RETURN, JUMP,\n+ * MATCH, DEFAULT) to efficiently represent the trie.\n+ */\n+\n namespace {\n \n+// Indicates decoding errors or invalid data\n constexpr uint32_t INVALID = 0xFFFFFFFF;\n \n-uint32_t DecodeBits(std::vector<bool>::const_iterator& bitpos, const std::vector<bool>::const_iterator& endpos, uint8_t minval, const std::vector<uint8_t> &bit_sizes)\n+/**\n+ * Extract a single bit from byte array using little-endian bit ordering.\n+ * Used for ASMap data where bits are numbered right-to-left within each byte (LSB first).\n+ */\n+inline bool GetBitLE(std::span<const std::byte> bytes, uint32_t bitpos) noexcept\n+{\n+    return (std::to_integer<uint8_t>(bytes[bitpos / 8]) >> (bitpos % 8)) & 1;\n+}\n+\n+/**\n+ * Extract a single bit from byte array using big-endian bit ordering.\n+ * Used for IP addresses to match network byte order conventions.\n+ */\n+inline bool GetBitBE(std::span<const std::byte> bytes, uint32_t bitpos) noexcept\n+{\n+    return (std::to_integer<uint8_t>(bytes[(bytes.size() * 8 - bitpos) / 8]) >> (7 - ((bytes.size() * 8 - bitpos) % 8))) & 1;",
      "path": "src/util/asmap.cpp",
      "position": 1,
      "original_position": 62,
      "commit_id": "b41f5a29f7d56da8fd157770ad29b5776c3684c6",
      "original_commit_id": "b41f5a29f7d56da8fd157770ad29b5776c3684c6",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Here's a reduced version:\r\n```suggestion\r\n    return (std::to_integer<uint8_t>(bytes[(bytes.size() * 8 - bitpos) / 8]) >> ((7 + bitpos) % 8)) & 1;\r\n```\r\n\r\n---\r\n\r\nI'm surprised by the way the shift amount changes for different bit positions. Would have expected something closer to this for big endian...\r\n\r\n```suggestion\r\n    return (std::to_integer<uint8_t>(bytes[(bytes.size() * 8 - bitpos) / 8]) >> (7 - (bitpos % 8))) & 1;\r\n```\r\n\r\n....but it fails the unit tests.\r\n\r\nGodbolt experiment https://godbolt.org/z/6rjEzxhPM outputs:\r\n```\r\nPR bit shift expression (adfd8006...): (7 - ((bytes.size() * 8 - bitpos) % 8))\r\nPR bit shift reduced: (7 + bitpos) % 8\r\nExpected BE bit shift: 7 - (bitpos % 8)\r\n\r\nbitpos:  0, PR: 7, reduced: 7, expected: 7\r\nbitpos:  1, PR: 0, reduced: 0, expected: 6\r\nbitpos:  2, PR: 1, reduced: 1, expected: 5\r\nbitpos:  3, PR: 2, reduced: 2, expected: 4\r\nbitpos:  4, PR: 3, reduced: 3, expected: 3\r\nbitpos:  5, PR: 4, reduced: 4, expected: 2\r\nbitpos:  6, PR: 5, reduced: 5, expected: 1\r\nbitpos:  7, PR: 6, reduced: 6, expected: 0\r\nbitpos:  8, PR: 7, reduced: 7, expected: 7\r\nbitpos:  9, PR: 0, reduced: 0, expected: 6\r\nbitpos: 10, PR: 1, reduced: 1, expected: 5\r\nbitpos: 11, PR: 2, reduced: 2, expected: 4\r\nbitpos: 12, PR: 3, reduced: 3, expected: 3\r\nbitpos: 13, PR: 4, reduced: 4, expected: 2\r\nbitpos: 14, PR: 5, reduced: 5, expected: 1\r\nbitpos: 15, PR: 6, reduced: 6, expected: 0\r\n```\r\nHowever, when looking at the usage in `Interpret()`, we see if we would encounter `JUMP` as the first instruction, our `bitpos` is sort of out of bounds by one.\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/b41f5a29f7d56da8fd157770ad29b5776c3684c6/src/util/asmap.cpp#L184\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/b41f5a29f7d56da8fd157770ad29b5776c3684c6/src/util/asmap.cpp#L201\r\n\r\nIf we instead at the callsite make sure to send in in-bounds values - `GetBitBE(ip, bits - 1)`, it turns out we can simplify `GetBitBE` quite a bit.\r\n```diff\r\n--- a/src/util/asmap.cpp\r\n+++ b/src/util/asmap.cpp\r\n@@ -48,8 +48,8 @@ namespace {\r\n constexpr uint32_t INVALID = 0xFFFFFFFF;\r\n \r\n /**\r\n- * Extract a single bit from byte array using little-endian bit ordering.\r\n- * Used for ASMap data where bits are numbered right-to-left within each byte (LSB first).\r\n+ * Extract a single bit (LSB first) from byte array using little-endian byte ordering.\r\n+ * Used for ASMap data.\r\n  */\r\n inline bool GetBitLE(std::span<const std::byte> bytes, uint32_t bitpos) noexcept\r\n {\r\n@@ -57,12 +57,12 @@ inline bool GetBitLE(std::span<const std::byte> bytes, uint32_t bitpos) noexcept\r\n }\r\n \r\n /**\r\n- * Extract a single bit from byte array using big-endian bit ordering.\r\n+ * Extract a single bit (LSB first) from byte array using big-endian byte ordering.\r\n  * Used for IP addresses to match network byte order conventions.\r\n  */\r\n inline bool GetBitBE(std::span<const std::byte> bytes, uint32_t bitpos) noexcept\r\n {\r\n-    return (std::to_integer<uint8_t>(bytes[(bytes.size() * 8 - bitpos) / 8]) >> (7 - ((bytes.size() * 8 - bitpos) % 8))) & 1;\r\n+    return (std::to_integer<uint8_t>(bytes[bytes.size() - ((bitpos + 8) / 8)]) >> (bitpos % 8)) & 1;\r\n }\r\n \r\n /**\r\n@@ -198,7 +198,7 @@ uint32_t Interpret(const std::span<const std::byte> asmap, const std::span<const\r\n             if (jump == INVALID) break; // Jump offset straddles EOF\r\n             if (bits == 0) break; // No input bits left\r\n             if (int64_t{jump} >= static_cast<int64_t>(endpos - pos)) break; // Jumping past EOF\r\n-            if (GetBitBE(ip, bits)) {  // Check next IP bit (big-endian)\r\n+            if (GetBitBE(ip, bits - 1)) {  // Check next IP bit (big-endian)\r\n                 pos += jump;  // Bit = 1: skip to right subtree\r\n             }\r\n             // Bit = 0: fall through to left subtree\r\n@@ -213,7 +213,7 @@ uint32_t Interpret(const std::span<const std::byte> asmap, const std::span<const\r\n             matchlen = std::bit_width(match) - 1;  // An n-bit value matches n-1 input bits\r\n             if (bits < matchlen) break; // Not enough input bits\r\n             for (uint32_t bit = 0; bit < matchlen; bit++) {\r\n-                if (GetBitBE(ip, bits) != ((match >> (matchlen - 1 - bit)) & 1)) {\r\n+                if (GetBitBE(ip, bits - 1) != ((match >> (matchlen - 1 - bit)) & 1)) {\r\n                     return default_asn;  // Pattern mismatch - use default\r\n                 }\r\n                 bits--;\r\n```\r\n\r\nThe similarity we get between the shifting in this new `GetBitBE` and `GetBitLE` show that we have the same bit ordering, just different byte-ordering.\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/b41f5a29f7d56da8fd157770ad29b5776c3684c6/src/util/asmap.cpp#L54-L56\r\n\r\nThat's why I also updated the comments in the diff above.",
      "created_at": "2025-11-20T10:43:47Z",
      "updated_at": "2025-11-20T15:12:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2545416624",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2545416624"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 65,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2546124184",
      "pull_request_review_id": 3486433210,
      "id": 2546124184,
      "node_id": "PRRC_kwDOABII586XwsWY",
      "diff_hunk": "@@ -5,186 +5,297 @@\n #include <util/asmap.h>\n \n #include <clientversion.h>\n+#include <hash.h>\n #include <logging.h>\n #include <serialize.h>\n #include <streams.h>\n+#include <uint256.h>\n #include <util/fs.h>\n \n #include <algorithm>\n #include <bit>\n #include <cassert>\n+#include <cstddef>\n #include <cstdio>\n+#include <span>\n #include <utility>\n #include <vector>\n \n+/*\n+ * ASMap (Autonomous System Map) Implementation\n+ *\n+ * Provides a compressed mapping from IP address prefixes to Autonomous System Numbers (ASNs).\n+ * Uses a binary trie structure encoded as bytecode instructions that are interpreted\n+ * at runtime to find the ASN for a given IP address.\n+ *\n+ * The format of the asmap data is a bit-packed binary format where the entire mapping\n+ * is treated as a continuous sequence of bits. Instructions and their arguments are\n+ * encoded using variable numbers of bits and concatenated together without regard for\n+ * byte boundaries. The bits are stored in bytes using little-endian bit ordering.\n+ *\n+ * The data structure internally represents the mapping as a binary trie where:\n+ * - Unassigned subnets (no ASN mapping present) map to 0\n+ * - Subnets mapped entirely to one ASN become leaf nodes\n+ * - Subnets whose lower and upper halves have different mappings branch into subtrees\n+ *\n+ * The encoding uses variable-length integers and four instruction types (RETURN, JUMP,\n+ * MATCH, DEFAULT) to efficiently represent the trie.\n+ */\n+\n namespace {\n \n+// Indicates decoding errors or invalid data\n constexpr uint32_t INVALID = 0xFFFFFFFF;\n \n-uint32_t DecodeBits(std::vector<bool>::const_iterator& bitpos, const std::vector<bool>::const_iterator& endpos, uint8_t minval, const std::vector<uint8_t> &bit_sizes)\n+/**\n+ * Extract a single bit from byte array using little-endian bit ordering.\n+ * Used for ASMap data where bits are numbered right-to-left within each byte (LSB first).\n+ */\n+inline bool GetBitLE(std::span<const std::byte> bytes, uint32_t bitpos) noexcept\n+{\n+    return (std::to_integer<uint8_t>(bytes[bitpos / 8]) >> (bitpos % 8)) & 1;\n+}\n+\n+/**\n+ * Extract a single bit from byte array using big-endian bit ordering.\n+ * Used for IP addresses to match network byte order conventions.\n+ */\n+inline bool GetBitBE(std::span<const std::byte> bytes, uint32_t bitpos) noexcept\n+{\n+    return (std::to_integer<uint8_t>(bytes[(bytes.size() * 8 - bitpos) / 8]) >> (7 - ((bytes.size() * 8 - bitpos) % 8))) & 1;\n+}\n+\n+/**\n+ * Variable-length integer decoder using a custom encoding scheme.\n+ *\n+ * The encoding is easiest to describe using an example. Let's say minval=100 and\n+ * bit_sizes=[4,2,2,3]. In that case:\n+ * - x in [100..115]: encoded as [0] + [4-bit BE encoding of (x-100)]\n+ * - x in [116..119]: encoded as [1,0] + [2-bit BE encoding of (x-116)]\n+ * - x in [120..123]: encoded as [1,1,0] + [2-bit BE encoding of (x-120)]\n+ * - x in [124..131]: encoded as [1,1,1] + [3-bit BE encoding of (x-124)]\n+ *\n+ * In general, every number is encoded as:\n+ * - First, k \"1\"-bits, where k is the class the number falls in\n+ * - Then, a \"0\"-bit, unless k is the highest class\n+ * - Lastly, bit_sizes[k] bits encoding in big endian the position within that class\n+ */\n+uint32_t DecodeBits(size_t& bitpos, const std::span<const std::byte>& data, uint8_t minval, const std::span<const uint8_t> bit_sizes)\n {\n-    uint32_t val = minval;\n+    uint32_t val = minval;  // Start with minimum encodable value\n     bool bit;\n-    for (std::vector<uint8_t>::const_iterator bit_sizes_it = bit_sizes.begin();\n-        bit_sizes_it != bit_sizes.end(); ++bit_sizes_it) {\n-        if (bit_sizes_it + 1 != bit_sizes.end()) {\n-            if (bitpos == endpos) break;\n-            bit = *bitpos;\n+    for (auto bit_sizes_it = bit_sizes.begin(); bit_sizes_it != bit_sizes.end(); ++bit_sizes_it) {\n+        // Read continuation bit to determine if we're in this class\n+        if (bit_sizes_it + 1 != bit_sizes.end()) {  // Unless we're in the last class\n+            if (bitpos >= data.size() * 8) break;\n+            bit = GetBitLE(data, bitpos);\n             bitpos++;\n         } else {\n-            bit = 0;\n+            bit = 0;  // Last class has no continuation bit\n         }\n         if (bit) {\n-            val += (1 << *bit_sizes_it);\n+            // If the value will not fit in this class, subtract its range from val,\n+            // emit a \"1\" bit and continue with the next class\n+            val += (1 << *bit_sizes_it);  // Add size of this class\n         } else {\n+            // Decode the position within this class in big endian\n             for (int b = 0; b < *bit_sizes_it; b++) {\n-                if (bitpos == endpos) return INVALID; // Reached EOF in mantissa\n-                bit = *bitpos;\n+                if (bitpos >= data.size() * 8) return INVALID; // Reached EOF in mantissa\n+                bit = GetBitLE(data, bitpos);\n                 bitpos++;\n-                val += bit << (*bit_sizes_it - 1 - b);\n+                val += bit << (*bit_sizes_it - 1 - b);  // Big-endian within the class\n             }\n             return val;\n         }\n     }\n     return INVALID; // Reached EOF in exponent\n }\n \n+/**\n+ * Instruction Set\n+ *\n+ * The instruction set is designed to efficiently encode a binary trie\n+ * that maps IP prefixes to ASNs. Each instruction type serves a specific\n+ * role in trie traversal and evaluation.\n+ */\n enum class Instruction : uint32_t\n {\n+    // A return instruction, encoded as [0], returns a constant ASN.\n+    // It is followed by an integer using the ASN encoding.\n     RETURN = 0,\n+    // A jump instruction, encoded as [1,0], inspects the next unused bit in the input\n+    // and either continues execution (if 0), or skips a specified number of bits (if 1).\n+    // It is followed by an integer using jump encoding.\n     JUMP = 1,\n+    // A match instruction, encoded as [1,1,0], inspects 1 or more of the next unused bits\n+    // in the input. If they all match, execution continues. If not, the default ASN is returned\n+    // (or 0 if unset). The match value encodes both the pattern and its length.\n     MATCH = 2,\n+    // A default instruction, encoded as [1,1,1], sets the default variable to its argument,\n+    // and continues execution. It is followed by an integer in ASN encoding.\n     DEFAULT = 3,\n };\n \n-const std::vector<uint8_t> TYPE_BIT_SIZES{0, 0, 1};\n-Instruction DecodeType(std::vector<bool>::const_iterator& bitpos, const std::vector<bool>::const_iterator& endpos)\n+// Instruction type encoding: RETURN=[0], JUMP=[1,0], MATCH=[1,1,0], DEFAULT=[1,1,1]\n+constexpr uint8_t TYPE_BIT_SIZES[]{0, 0, 1};\n+Instruction DecodeType(size_t& bitpos, const std::span<const std::byte>& data)\n {\n-    return Instruction(DecodeBits(bitpos, endpos, 0, TYPE_BIT_SIZES));\n+    return Instruction(DecodeBits(bitpos, data, 0, TYPE_BIT_SIZES));\n }\n \n-const std::vector<uint8_t> ASN_BIT_SIZES{15, 16, 17, 18, 19, 20, 21, 22, 23, 24};\n-uint32_t DecodeASN(std::vector<bool>::const_iterator& bitpos, const std::vector<bool>::const_iterator& endpos)\n+// ASN encoding: Can encode ASNs from 1 to ~16.7 million.\n+// Uses variable-length encoding optimized for real-world ASN distribution.\n+// ASN 0 is reserved and used if there isn't a match.\n+constexpr uint8_t ASN_BIT_SIZES[]{15, 16, 17, 18, 19, 20, 21, 22, 23, 24};\n+uint32_t DecodeASN(size_t& bitpos, const std::span<const std::byte>& data)\n {\n-    return DecodeBits(bitpos, endpos, 1, ASN_BIT_SIZES);\n+    return DecodeBits(bitpos, data, 1, ASN_BIT_SIZES);\n }\n \n-\n-const std::vector<uint8_t> MATCH_BIT_SIZES{1, 2, 3, 4, 5, 6, 7, 8};\n-uint32_t DecodeMatch(std::vector<bool>::const_iterator& bitpos, const std::vector<bool>::const_iterator& endpos)\n+// MATCH argument: Values in [2, 511]. The highest set bit determines the match length\n+// n âˆˆ [1,8]; the lower n-1 bits are the pattern to compare.\n+constexpr uint8_t MATCH_BIT_SIZES[]{1, 2, 3, 4, 5, 6, 7, 8};\n+uint32_t DecodeMatch(size_t& bitpos, const std::span<const std::byte>& data)\n {\n-    return DecodeBits(bitpos, endpos, 2, MATCH_BIT_SIZES);\n+    return DecodeBits(bitpos, data, 2, MATCH_BIT_SIZES);\n }\n \n-\n-const std::vector<uint8_t> JUMP_BIT_SIZES{5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30};\n-uint32_t DecodeJump(std::vector<bool>::const_iterator& bitpos, const std::vector<bool>::const_iterator& endpos)\n+// JUMP offset: Minimum value 17. Variable-length coded and may be large\n+// for skipping big subtrees.\n+constexpr uint8_t JUMP_BIT_SIZES[]{5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30};\n+uint32_t DecodeJump(size_t& bitpos, const std::span<const std::byte>& data)\n {\n-    return DecodeBits(bitpos, endpos, 17, JUMP_BIT_SIZES);\n+    return DecodeBits(bitpos, data, 17, JUMP_BIT_SIZES);\n }\n \n-}\n+} // anonymous namespace\n \n-uint32_t Interpret(const std::vector<bool> &asmap, const std::vector<bool> &ip)\n+/**\n+ * Execute the ASMap bytecode to find the ASN for an IP\n+ *\n+ * This function interprets the asmap bytecode and uses bits from the IP\n+ * address to navigate through the encoded trie structure, ultimately\n+ * returning an ASN value.\n+ */\n+uint32_t Interpret(const std::span<const std::byte> asmap, const std::span<const std::byte> ip)\n {\n-    std::vector<bool>::const_iterator pos = asmap.begin();\n-    const std::vector<bool>::const_iterator endpos = asmap.end();\n-    uint8_t bits = ip.size();\n+    size_t pos{0};\n+    const size_t endpos{asmap.size() * 8};\n+    uint8_t bits = ip.size() * 8;\n     uint32_t default_asn = 0;\n     uint32_t jump, match, matchlen;",
      "path": "src/util/asmap.cpp",
      "position": 1,
      "original_position": 213,
      "commit_id": "b41f5a29f7d56da8fd157770ad29b5776c3684c6",
      "original_commit_id": "b41f5a29f7d56da8fd157770ad29b5776c3684c6",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: Here are some changes that bring the `Interpret()` implementation even closer to `SanityCheckAsmap()` while also decreasing variable scope, making the code more readable. Maybe something to include in the last commit which aligns the casing of `SanityCheckAsmap`?\n```diff\n--- a/src/util/asmap.cpp\n+++ b/src/util/asmap.cpp\n@@ -183,18 +183,16 @@ uint32_t Interpret(const std::span<const std::byte> asmap, const std::span<const\n     const size_t endpos{asmap.size() * 8};\n     uint8_t bits = ip.size() * 8;\n     uint32_t default_asn = 0;\n-    uint32_t jump, match, matchlen;\n-    Instruction opcode;\n     while (pos < endpos) {\n-        opcode = DecodeType(pos, asmap);\n+        Instruction opcode = DecodeType(pos, asmap);\n         if (opcode == Instruction::RETURN) {\n             // Found leaf node - return the ASN\n-            default_asn = DecodeASN(pos, asmap);\n-            if (default_asn == INVALID) break; // ASN straddles EOF\n-            return default_asn;\n+            uint32_t asn = DecodeASN(pos, asmap);\n+            if (asn == INVALID) break; // ASN straddles EOF\n+            return asn;\n         } else if (opcode == Instruction::JUMP) {\n             // Binary branch: if IP bit is 1, jump forward; else continue\n-            jump = DecodeJump(pos, asmap);\n+            uint32_t jump = DecodeJump(pos, asmap);\n             if (jump == INVALID) break; // Jump offset straddles EOF\n             if (bits == 0) break; // No input bits left\n             if (int64_t{jump} >= static_cast<int64_t>(endpos - pos)) break; // Jumping past EOF\n@@ -208,11 +206,11 @@ uint32_t Interpret(const std::span<const std::byte> asmap, const std::span<const\n             // The match value encodes both length and pattern:\n             // - highest set bit position determines length (bit_width - 1)\n             // - lower bits contain the pattern to compare\n-            match = DecodeMatch(pos, asmap);\n+            uint32_t match = DecodeMatch(pos, asmap);\n             if (match == INVALID) break; // Match bits straddle EOF\n-            matchlen = std::bit_width(match) - 1;  // An n-bit value matches n-1 input bits\n+            int matchlen = std::bit_width(match) - 1;  // An n-bit value matches n-1 input bits\n             if (bits < matchlen) break; // Not enough input bits\n-            for (uint32_t bit = 0; bit < matchlen; bit++) {\n+            for (int bit = 0; bit < matchlen; bit++) {\n                 if (GetBitBE(ip, bits) != ((match >> (matchlen - 1 - bit)) & 1)) {\n                     return default_asn;  // Pattern mismatch - use default\n                 }\n```",
      "created_at": "2025-11-20T13:43:39Z",
      "updated_at": "2025-11-20T15:12:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2546124184",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2546124184"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 186,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2546283406",
      "pull_request_review_id": 3486433210,
      "id": 2546283406,
      "node_id": "PRRC_kwDOABII586XxTOO",
      "diff_hunk": "@@ -5,186 +5,297 @@\n #include <util/asmap.h>\n \n #include <clientversion.h>\n+#include <hash.h>\n #include <logging.h>\n #include <serialize.h>\n #include <streams.h>\n+#include <uint256.h>\n #include <util/fs.h>\n \n #include <algorithm>\n #include <bit>\n #include <cassert>\n+#include <cstddef>\n #include <cstdio>\n+#include <span>\n #include <utility>\n #include <vector>\n \n+/*\n+ * ASMap (Autonomous System Map) Implementation\n+ *\n+ * Provides a compressed mapping from IP address prefixes to Autonomous System Numbers (ASNs).\n+ * Uses a binary trie structure encoded as bytecode instructions that are interpreted\n+ * at runtime to find the ASN for a given IP address.\n+ *\n+ * The format of the asmap data is a bit-packed binary format where the entire mapping\n+ * is treated as a continuous sequence of bits. Instructions and their arguments are\n+ * encoded using variable numbers of bits and concatenated together without regard for\n+ * byte boundaries. The bits are stored in bytes using little-endian bit ordering.\n+ *\n+ * The data structure internally represents the mapping as a binary trie where:\n+ * - Unassigned subnets (no ASN mapping present) map to 0\n+ * - Subnets mapped entirely to one ASN become leaf nodes\n+ * - Subnets whose lower and upper halves have different mappings branch into subtrees\n+ *\n+ * The encoding uses variable-length integers and four instruction types (RETURN, JUMP,\n+ * MATCH, DEFAULT) to efficiently represent the trie.\n+ */\n+\n namespace {\n \n+// Indicates decoding errors or invalid data\n constexpr uint32_t INVALID = 0xFFFFFFFF;\n \n-uint32_t DecodeBits(std::vector<bool>::const_iterator& bitpos, const std::vector<bool>::const_iterator& endpos, uint8_t minval, const std::vector<uint8_t> &bit_sizes)\n+/**\n+ * Extract a single bit from byte array using little-endian bit ordering.\n+ * Used for ASMap data where bits are numbered right-to-left within each byte (LSB first).\n+ */\n+inline bool GetBitLE(std::span<const std::byte> bytes, uint32_t bitpos) noexcept\n+{\n+    return (std::to_integer<uint8_t>(bytes[bitpos / 8]) >> (bitpos % 8)) & 1;\n+}\n+\n+/**\n+ * Extract a single bit from byte array using big-endian bit ordering.\n+ * Used for IP addresses to match network byte order conventions.\n+ */\n+inline bool GetBitBE(std::span<const std::byte> bytes, uint32_t bitpos) noexcept",
      "path": "src/util/asmap.cpp",
      "position": 1,
      "original_position": 60,
      "commit_id": "b41f5a29f7d56da8fd157770ad29b5776c3684c6",
      "original_commit_id": "b41f5a29f7d56da8fd157770ad29b5776c3684c6",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: In other cases we have\r\n* `DecodeBits(size_t& bitpos, const std::span<const std::byte>& data...` and\r\n* `DecodeType(size_t& bitpos, const std::span<const std::byte>& data)`\r\n* ...\r\n\r\nSo it might be nice to have the same argument order here:\r\n```suggestion\r\ninline bool GetBitLE(uint32_t bitpos, std::span<const std::byte> bytes) noexcept\r\n{\r\n    return (std::to_integer<uint8_t>(bytes[bitpos / 8]) >> (bitpos % 8)) & 1;\r\n}\r\n\r\n/**\r\n * Extract a single bit from byte array using big-endian bit ordering.\r\n * Used for IP addresses to match network byte order conventions.\r\n */\r\ninline bool GetBitBE(uint32_t bitpos, std::span<const std::byte> bytes) noexcept\r\n```\r\n\r\nTaking it one step further, using the observation that we only inspect a bit once, we could perform incrementing and decrementing within these functions as well. This also is influenced by the other comment investigating `GetBitBE`.\r\n```diff\r\n constexpr uint32_t INVALID = 0xFFFFFFFF;\r\n \r\n /**\r\n- * Extract a single bit from byte array using little-endian bit ordering.\r\n- * Used for ASMap data where bits are numbered right-to-left within each byte (LSB first).\r\n+ * Extract a single bit (LSB first) from byte array using little-endian byte ordering.\r\n+ * Used for ASMap data.\r\n  */\r\n-inline bool GetBitLE(std::span<const std::byte> bytes, uint32_t bitpos) noexcept\r\n+inline bool DecodeBitLE(size_t& bitpos, std::span<const std::byte> bytes) noexcept\r\n {\r\n-    return (std::to_integer<uint8_t>(bytes[bitpos / 8]) >> (bitpos % 8)) & 1;\r\n+    const bool bit = (std::to_integer<uint8_t>(bytes[bitpos / 8]) >> (bitpos % 8)) & 1;\r\n+    ++bitpos;\r\n+    return bit;\r\n }\r\n \r\n /**\r\n- * Extract a single bit from byte array using big-endian bit ordering.\r\n+ * Extract a single bit (LSB first) from byte array using big-endian byte ordering.\r\n  * Used for IP addresses to match network byte order conventions.\r\n  */\r\n-inline bool GetBitBE(std::span<const std::byte> bytes, uint32_t bitpos) noexcept\r\n+inline bool DecodeBitBE(uint8_t& bitpos, std::span<const std::byte> bytes) noexcept\r\n {\r\n-    return (std::to_integer<uint8_t>(bytes[(bytes.size() * 8 - bitpos) / 8]) >> (7 - ((bytes.size() * 8 - bitpos) % 8))) & 1;\r\n+    --bitpos;\r\n+    return (std::to_integer<uint8_t>(bytes[bytes.size() - ((bitpos + 8) / 8)]) >> (bitpos % 8)) & 1;\r\n }\r\n \r\n /**\r\n@@ -88,8 +91,7 @@ uint32_t DecodeBits(size_t& bitpos, const std::span<const std::byte>& data, uint\r\n         // Read continuation bit to determine if we're in this class\r\n         if (bit_sizes_it + 1 != bit_sizes.end()) {  // Unless we're in the last class\r\n             if (bitpos >= data.size() * 8) break;\r\n-            bit = GetBitLE(data, bitpos);\r\n-            bitpos++;\r\n+            bit = DecodeBitLE(bitpos, data);\r\n         } else {\r\n             bit = 0;  // Last class has no continuation bit\r\n         }\r\n@@ -101,8 +103,7 @@ uint32_t DecodeBits(size_t& bitpos, const std::span<const std::byte>& data, uint\r\n             // Decode the position within this class in big endian\r\n             for (int b = 0; b < *bit_sizes_it; b++) {\r\n                 if (bitpos >= data.size() * 8) return INVALID; // Reached EOF in mantissa\r\n-                bit = GetBitLE(data, bitpos);\r\n-                bitpos++;\r\n+                bit = DecodeBitLE(bitpos, data);\r\n                 val += bit << (*bit_sizes_it - 1 - b);  // Big-endian within the class\r\n             }\r\n             return val;\r\n@@ -198,11 +199,10 @@ uint32_t Interpret(const std::span<const std::byte> asmap, const std::span<const\r\n             if (jump == INVALID) break; // Jump offset straddles EOF\r\n             if (bits == 0) break; // No input bits left\r\n             if (int64_t{jump} >= static_cast<int64_t>(endpos - pos)) break; // Jumping past EOF\r\n-            if (GetBitBE(ip, bits)) {  // Check next IP bit (big-endian)\r\n+            if (DecodeBitBE(bits, ip)) {  // Check next IP bit (big-endian)\r\n                 pos += jump;  // Bit = 1: skip to right subtree\r\n             }\r\n             // Bit = 0: fall through to left subtree\r\n-            bits--;\r\n         } else if (opcode == Instruction::MATCH) {\r\n             // Compare multiple IP bits against a pattern\r\n             // The match value encodes both length and pattern:\r\n@@ -213,10 +213,9 @@ uint32_t Interpret(const std::span<const std::byte> asmap, const std::span<const\r\n             matchlen = std::bit_width(match) - 1;  // An n-bit value matches n-1 input bits\r\n             if (bits < matchlen) break; // Not enough input bits\r\n             for (uint32_t bit = 0; bit < matchlen; bit++) {\r\n-                if (GetBitBE(ip, bits) != ((match >> (matchlen - 1 - bit)) & 1)) {\r\n+                if (DecodeBitBE(bits, ip) != ((match >> (matchlen - 1 - bit)) & 1)) {\r\n                     return default_asn;  // Pattern mismatch - use default\r\n                 }\r\n-                bits--;\r\n             }\r\n             // Pattern matched - continue execution\r\n         } else if (opcode == Instruction::DEFAULT) {\r\n@@ -260,8 +259,7 @@ bool SanityCheckAsmap(const std::span<const std::byte> asmap, int bits)\r\n                 // Nothing to execute anymore\r\n                 if (endpos - pos > 7) return false; // Excessive padding\r\n                 while (pos != endpos) {\r\n-                    if (GetBitLE(asmap, pos)) return false; // Nonzero padding bit\r\n-                    ++pos;\r\n+                    if (DecodeBitLE(pos, asmap)) return false; // Nonzero padding bit\r\n                 }\r\n                 return true; // Sanely reached EOF\r\n             } else {\r\n```",
      "created_at": "2025-11-20T14:29:54Z",
      "updated_at": "2025-11-20T15:12:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2546283406",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2546283406"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": 54,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 63,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2547377106",
      "pull_request_review_id": 3489540343,
      "id": 2547377106,
      "node_id": "PRRC_kwDOABII586X1ePS",
      "diff_hunk": "@@ -5,186 +5,297 @@\n #include <util/asmap.h>\n \n #include <clientversion.h>\n+#include <hash.h>\n #include <logging.h>\n #include <serialize.h>\n #include <streams.h>\n+#include <uint256.h>\n #include <util/fs.h>\n \n #include <algorithm>\n #include <bit>\n #include <cassert>\n+#include <cstddef>\n #include <cstdio>\n+#include <span>\n #include <utility>\n #include <vector>\n \n+/*\n+ * ASMap (Autonomous System Map) Implementation\n+ *\n+ * Provides a compressed mapping from IP address prefixes to Autonomous System Numbers (ASNs).\n+ * Uses a binary trie structure encoded as bytecode instructions that are interpreted\n+ * at runtime to find the ASN for a given IP address.\n+ *\n+ * The format of the asmap data is a bit-packed binary format where the entire mapping\n+ * is treated as a continuous sequence of bits. Instructions and their arguments are\n+ * encoded using variable numbers of bits and concatenated together without regard for\n+ * byte boundaries. The bits are stored in bytes using little-endian bit ordering.\n+ *\n+ * The data structure internally represents the mapping as a binary trie where:\n+ * - Unassigned subnets (no ASN mapping present) map to 0\n+ * - Subnets mapped entirely to one ASN become leaf nodes\n+ * - Subnets whose lower and upper halves have different mappings branch into subtrees\n+ *\n+ * The encoding uses variable-length integers and four instruction types (RETURN, JUMP,\n+ * MATCH, DEFAULT) to efficiently represent the trie.\n+ */\n+\n namespace {\n \n+// Indicates decoding errors or invalid data\n constexpr uint32_t INVALID = 0xFFFFFFFF;\n \n-uint32_t DecodeBits(std::vector<bool>::const_iterator& bitpos, const std::vector<bool>::const_iterator& endpos, uint8_t minval, const std::vector<uint8_t> &bit_sizes)\n+/**\n+ * Extract a single bit from byte array using little-endian bit ordering.\n+ * Used for ASMap data where bits are numbered right-to-left within each byte (LSB first).\n+ */\n+inline bool GetBitLE(std::span<const std::byte> bytes, uint32_t bitpos) noexcept\n+{\n+    return (std::to_integer<uint8_t>(bytes[bitpos / 8]) >> (bitpos % 8)) & 1;\n+}\n+\n+/**\n+ * Extract a single bit from byte array using big-endian bit ordering.\n+ * Used for IP addresses to match network byte order conventions.\n+ */\n+inline bool GetBitBE(std::span<const std::byte> bytes, uint32_t bitpos) noexcept",
      "path": "src/util/asmap.cpp",
      "position": 1,
      "original_position": 60,
      "commit_id": "b41f5a29f7d56da8fd157770ad29b5776c3684c6",
      "original_commit_id": "b41f5a29f7d56da8fd157770ad29b5776c3684c6",
      "in_reply_to_id": 2546283406,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "(Maybe `ConsumeBit(LE|BE)` would be more appropriate than `DecodeBit(LE|BE)`).",
      "created_at": "2025-11-20T19:21:20Z",
      "updated_at": "2025-11-20T19:21:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2547377106",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2547377106"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": 54,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 63,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2549545939",
      "pull_request_review_id": 3492465736,
      "id": 2549545939,
      "node_id": "PRRC_kwDOABII586X9vvT",
      "diff_hunk": "@@ -5,186 +5,297 @@\n #include <util/asmap.h>\n \n #include <clientversion.h>\n+#include <hash.h>\n #include <logging.h>\n #include <serialize.h>\n #include <streams.h>\n+#include <uint256.h>\n #include <util/fs.h>\n \n #include <algorithm>\n #include <bit>\n #include <cassert>\n+#include <cstddef>\n #include <cstdio>\n+#include <span>\n #include <utility>\n #include <vector>\n \n+/*\n+ * ASMap (Autonomous System Map) Implementation\n+ *\n+ * Provides a compressed mapping from IP address prefixes to Autonomous System Numbers (ASNs).\n+ * Uses a binary trie structure encoded as bytecode instructions that are interpreted\n+ * at runtime to find the ASN for a given IP address.\n+ *\n+ * The format of the asmap data is a bit-packed binary format where the entire mapping\n+ * is treated as a continuous sequence of bits. Instructions and their arguments are\n+ * encoded using variable numbers of bits and concatenated together without regard for\n+ * byte boundaries. The bits are stored in bytes using little-endian bit ordering.\n+ *\n+ * The data structure internally represents the mapping as a binary trie where:\n+ * - Unassigned subnets (no ASN mapping present) map to 0\n+ * - Subnets mapped entirely to one ASN become leaf nodes\n+ * - Subnets whose lower and upper halves have different mappings branch into subtrees\n+ *\n+ * The encoding uses variable-length integers and four instruction types (RETURN, JUMP,\n+ * MATCH, DEFAULT) to efficiently represent the trie.\n+ */\n+\n namespace {\n \n+// Indicates decoding errors or invalid data\n constexpr uint32_t INVALID = 0xFFFFFFFF;\n \n-uint32_t DecodeBits(std::vector<bool>::const_iterator& bitpos, const std::vector<bool>::const_iterator& endpos, uint8_t minval, const std::vector<uint8_t> &bit_sizes)\n+/**\n+ * Extract a single bit from byte array using little-endian bit ordering.\n+ * Used for ASMap data where bits are numbered right-to-left within each byte (LSB first).\n+ */\n+inline bool GetBitLE(std::span<const std::byte> bytes, uint32_t bitpos) noexcept\n+{\n+    return (std::to_integer<uint8_t>(bytes[bitpos / 8]) >> (bitpos % 8)) & 1;\n+}\n+\n+/**\n+ * Extract a single bit from byte array using big-endian bit ordering.\n+ * Used for IP addresses to match network byte order conventions.\n+ */\n+inline bool GetBitBE(std::span<const std::byte> bytes, uint32_t bitpos) noexcept",
      "path": "src/util/asmap.cpp",
      "position": 1,
      "original_position": 60,
      "commit_id": "b41f5a29f7d56da8fd157770ad29b5776c3684c6",
      "original_commit_id": "b41f5a29f7d56da8fd157770ad29b5776c3684c6",
      "in_reply_to_id": 2546283406,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Couldn't stop thinking about this. It felt weird to implement reverse byte order in `GetBitBE` but then also start `bits` from the end of `ip` data and count backwards. Found a way that I think simplifies things further, making the order we consume bytes between LE&BE implementations the same, but having different bit-order. Diff against b41f5a29f7d56da8fd157770ad29b5776c3684c6:\r\n```diff\r\n--- a/src/util/asmap.cpp\r\n+++ b/src/util/asmap.cpp\r\n@@ -48,21 +48,25 @@ namespace {\r\n constexpr uint32_t INVALID = 0xFFFFFFFF;\r\n \r\n /**\r\n- * Extract a single bit from byte array using little-endian bit ordering.\r\n- * Used for ASMap data where bits are numbered right-to-left within each byte (LSB first).\r\n+ * Extract a single bit from byte array using little-endian bit ordering (LSB first).\r\n+ * Used for ASMap data.\r\n  */\r\n-inline bool GetBitLE(std::span<const std::byte> bytes, uint32_t bitpos) noexcept\r\n+inline bool ConsumeBitLE(size_t& bitpos, std::span<const std::byte> bytes) noexcept\r\n {\r\n-    return (std::to_integer<uint8_t>(bytes[bitpos / 8]) >> (bitpos % 8)) & 1;\r\n+    const bool bit = (std::to_integer<uint8_t>(bytes[bitpos / 8]) >> (bitpos % 8)) & 1;\r\n+    ++bitpos;\r\n+    return bit;\r\n }\r\n \r\n /**\r\n- * Extract a single bit from byte array using big-endian bit ordering.\r\n+ * Extract a single bit from byte array using big-endian bit ordering (MSB first).\r\n  * Used for IP addresses to match network byte order conventions.\r\n  */\r\n-inline bool GetBitBE(std::span<const std::byte> bytes, uint32_t bitpos) noexcept\r\n+inline bool ConsumeBitBE(uint8_t& bitpos, std::span<const std::byte> bytes) noexcept\r\n {\r\n-    return (std::to_integer<uint8_t>(bytes[(bytes.size() * 8 - bitpos) / 8]) >> (7 - ((bytes.size() * 8 - bitpos) % 8))) & 1;\r\n+    const bool bit = (std::to_integer<uint8_t>(bytes[bitpos / 8]) >> (7 - (bitpos % 8))) & 1;\r\n+    ++bitpos;\r\n+    return bit;\r\n }\r\n \r\n /**\r\n@@ -88,8 +92,7 @@ uint32_t DecodeBits(size_t& bitpos, const std::span<const std::byte>& data, uint\r\n         // Read continuation bit to determine if we're in this class\r\n         if (bit_sizes_it + 1 != bit_sizes.end()) {  // Unless we're in the last class\r\n             if (bitpos >= data.size() * 8) break;\r\n-            bit = GetBitLE(data, bitpos);\r\n-            bitpos++;\r\n+            bit = ConsumeBitLE(bitpos, data);\r\n         } else {\r\n             bit = 0;  // Last class has no continuation bit\r\n         }\r\n@@ -101,8 +104,7 @@ uint32_t DecodeBits(size_t& bitpos, const std::span<const std::byte>& data, uint\r\n             // Decode the position within this class in big endian\r\n             for (int b = 0; b < *bit_sizes_it; b++) {\r\n                 if (bitpos >= data.size() * 8) return INVALID; // Reached EOF in mantissa\r\n-                bit = GetBitLE(data, bitpos);\r\n-                bitpos++;\r\n+                bit = ConsumeBitLE(bitpos, data);\r\n                 val += bit << (*bit_sizes_it - 1 - b);  // Big-endian within the class\r\n             }\r\n             return val;\r\n@@ -181,7 +183,8 @@ uint32_t Interpret(const std::span<const std::byte> asmap, const std::span<const\r\n {\r\n     size_t pos{0};\r\n     const size_t endpos{asmap.size() * 8};\r\n-    uint8_t bits = ip.size() * 8;\r\n+    uint8_t ip_bit{0};\r\n+    const uint8_t ip_bits_end = ip.size() * 8;\r\n     uint32_t default_asn = 0;\r\n     uint32_t jump, match, matchlen;\r\n     Instruction opcode;\r\n@@ -196,13 +199,12 @@ uint32_t Interpret(const std::span<const std::byte> asmap, const std::span<const\r\n             // Binary branch: if IP bit is 1, jump forward; else continue\r\n             jump = DecodeJump(pos, asmap);\r\n             if (jump == INVALID) break; // Jump offset straddles EOF\r\n-            if (bits == 0) break; // No input bits left\r\n+            if (ip_bit == ip_bits_end) break; // No input bits left\r\n             if (int64_t{jump} >= static_cast<int64_t>(endpos - pos)) break; // Jumping past EOF\r\n-            if (GetBitBE(ip, bits)) {  // Check next IP bit (big-endian)\r\n+            if (ConsumeBitBE(ip_bit, ip)) {  // Check next IP bit (big-endian)\r\n                 pos += jump;  // Bit = 1: skip to right subtree\r\n             }\r\n             // Bit = 0: fall through to left subtree\r\n-            bits--;\r\n         } else if (opcode == Instruction::MATCH) {\r\n             // Compare multiple IP bits against a pattern\r\n             // The match value encodes both length and pattern:\r\n@@ -211,12 +213,11 @@ uint32_t Interpret(const std::span<const std::byte> asmap, const std::span<const\r\n             match = DecodeMatch(pos, asmap);\r\n             if (match == INVALID) break; // Match bits straddle EOF\r\n             matchlen = std::bit_width(match) - 1;  // An n-bit value matches n-1 input bits\r\n-            if (bits < matchlen) break; // Not enough input bits\r\n+            if ((ip_bits_end - ip_bit) < matchlen) break; // Not enough input bits\r\n             for (uint32_t bit = 0; bit < matchlen; bit++) {\r\n-                if (GetBitBE(ip, bits) != ((match >> (matchlen - 1 - bit)) & 1)) {\r\n+                if (ConsumeBitBE(ip_bit, ip) != ((match >> (matchlen - 1 - bit)) & 1)) {\r\n                     return default_asn;  // Pattern mismatch - use default\r\n                 }\r\n-                bits--;\r\n             }\r\n             // Pattern matched - continue execution\r\n         } else if (opcode == Instruction::DEFAULT) {\r\n@@ -260,8 +261,7 @@ bool SanityCheckAsmap(const std::span<const std::byte> asmap, int bits)\r\n                 // Nothing to execute anymore\r\n                 if (endpos - pos > 7) return false; // Excessive padding\r\n                 while (pos != endpos) {\r\n-                    if (GetBitLE(asmap, pos)) return false; // Nonzero padding bit\r\n-                    ++pos;\r\n+                    if (ConsumeBitLE(pos, asmap)) return false; // Nonzero padding bit\r\n                 }\r\n                 return true; // Sanely reached EOF\r\n             } else {\r\n```",
      "created_at": "2025-11-21T12:04:35Z",
      "updated_at": "2025-11-21T12:04:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2549545939",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2549545939"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": 54,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 63,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2558058740",
      "pull_request_review_id": 3502660656,
      "id": 2558058740,
      "node_id": "PRRC_kwDOABII586YeOD0",
      "diff_hunk": "@@ -625,19 +625,10 @@ BOOST_AUTO_TEST_CASE(asmap_test_vectors)\n         \"1e3bbc17ba4d6f79ea3f031b876799ac268b1e0ea9babf0f9a8e5f6c55e363c6363df46afc696d7afceaf49b6\"\n         \"e62df9e9dc27e70664cafe5c53df66dd0b8237678ada90e73f05ec60e6f6e96c3cbb1ea2f9dece115d5bdba10\"\n         \"33e53662a7d72a29477b5beb35710591d3e23e5f0379baea62ffdee535bcdf879cbf69b88d7ea37c8015381cf\"\n-        \"63dc33d28f757a4a5e15d6a08\"_hex};\n-\n-    // Convert to std::vector<bool> format that the ASMap interpreter uses.\n-    std::vector<bool> asmap_bits;\n-    asmap_bits.reserve(ASMAP_DATA.size() * 8);\n-    for (auto byte : ASMAP_DATA) {\n-        for (int bit = 0; bit < 8; ++bit) {\n-            asmap_bits.push_back((std::to_integer<uint8_t>(byte) >> bit) & 1);\n-        }\n-    }\n+        \"63dc33d28f757a4a5e15d6a08\"_hex_v};\n \n     // Construct NetGroupManager with this data.\n-    NetGroupManager netgroup{std::move(asmap_bits)};\n+    NetGroupManager netgroup{std::move(ASMAP_DATA)};",
      "path": "src/test/netbase_tests.cpp",
      "position": 1,
      "original_position": 36,
      "commit_id": "eaf5e12d2b52d66a75a68cf94d328d0ec9048986",
      "original_commit_id": "c2274746d1b3d1a2712ef8bd567d25f5aa5cf5bb",
      "in_reply_to_id": 2535169330,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Removed the change from `constexpr`.",
      "created_at": "2025-11-24T23:47:00Z",
      "updated_at": "2025-11-24T23:47:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2558058740",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2558058740"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 631,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2558059839",
      "pull_request_review_id": 3502661941,
      "id": 2558059839,
      "node_id": "PRRC_kwDOABII586YeOU_",
      "diff_hunk": "@@ -17,5 +18,7 @@ bool SanityCheckASMap(const std::vector<std::byte>& asmap, int bits);\n \n /** Read asmap from provided binary file */\n std::vector<std::byte> DecodeAsmap(fs::path path);\n+/** Calculate the asmap version, a checksum identifying the asmap being used. */\n+uint256 AsmapVersion(const std::vector<std::byte>& data);",
      "path": "src/util/asmap.h",
      "position": 1,
      "original_position": 13,
      "commit_id": "b41f5a29f7d56da8fd157770ad29b5776c3684c6",
      "original_commit_id": "d278d6193b8d754eb108bc3ccc256260085b32c9",
      "in_reply_to_id": 2545022654,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I actually slightly prefer to keep it as is, because if I do this earlier I also have to change the tests because the hash result changes too with the span usage. I think it makes more sense to have this in the later commit where there is a much bigger overall benefit of introducing span evident that is actually what justifies the hash result being changed.",
      "created_at": "2025-11-24T23:47:54Z",
      "updated_at": "2025-11-24T23:47:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2558059839",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2558059839"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 22,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2558060398",
      "pull_request_review_id": 3502662926,
      "id": 2558060398,
      "node_id": "PRRC_kwDOABII586YeOdu",
      "diff_hunk": "@@ -10,15 +10,18 @@\n \n #include <cstddef>\n #include <cstdint>\n+#include <span>\n #include <vector>\n \n-uint32_t Interpret(const std::vector<std::byte>& asmap, const std::vector<std::byte>& ip);\n+uint32_t Interpret(std::span<const std::byte> asmap, std::span<const std::byte> ip);\n \n-bool SanityCheckASMap(const std::vector<std::byte>& asmap, int bits);\n+bool SanityCheckASMap(std::span<const std::byte> asmap, int bits);\n \n-/** Read asmap from provided binary file */\n+/** Read and check asmap from provided binary file */\n std::vector<std::byte> DecodeAsmap(fs::path path);\n+/** Check asmap from embedded data */\n+bool CheckAsmap(std::span<const std::byte> data);",
      "path": "src/util/asmap.h",
      "position": 1,
      "original_position": 17,
      "commit_id": "b41f5a29f7d56da8fd157770ad29b5776c3684c6",
      "original_commit_id": "6b9ce8cff58d7214fca51a8024ec4efb8694e059",
      "in_reply_to_id": 2545107996,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Renamed to `CheckStandardAsmap` and using it in a two more places, but keeping it out of asmap_direct fuzzer because we are testing the bits there explicitly. Moved it below below the sanity check in .h which is the same location as .cpp",
      "created_at": "2025-11-24T23:48:19Z",
      "updated_at": "2025-11-24T23:48:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2558060398",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2558060398"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": 22,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 23,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2558060593",
      "pull_request_review_id": 3502663103,
      "id": 2558060593,
      "node_id": "PRRC_kwDOABII586YeOgx",
      "diff_hunk": "@@ -24,7 +24,7 @@ using namespace std::literals;\n using node::NodeContext;\n using util::ToString;\n \n-static NetGroupManager EMPTY_NETGROUPMAN{{}};\n+static NetGroupManager EMPTY_NETGROUPMAN{NetGroupManager::NoAsmap()};",
      "path": "src/test/addrman_tests.cpp",
      "position": 1,
      "original_position": 5,
      "commit_id": "b41f5a29f7d56da8fd157770ad29b5776c3684c6",
      "original_commit_id": "6b9ce8cff58d7214fca51a8024ec4efb8694e059",
      "in_reply_to_id": 2545151023,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done",
      "created_at": "2025-11-24T23:48:26Z",
      "updated_at": "2025-11-24T23:48:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2558060593",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2558060593"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 27,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2558060750",
      "pull_request_review_id": 3502663300,
      "id": 2558060750,
      "node_id": "PRRC_kwDOABII586YeOjO",
      "diff_hunk": "@@ -5,186 +5,297 @@\n #include <util/asmap.h>\n \n #include <clientversion.h>\n+#include <hash.h>\n #include <logging.h>\n #include <serialize.h>\n #include <streams.h>\n+#include <uint256.h>\n #include <util/fs.h>\n \n #include <algorithm>\n #include <bit>\n #include <cassert>\n+#include <cstddef>\n #include <cstdio>\n+#include <span>\n #include <utility>\n #include <vector>\n \n+/*\n+ * ASMap (Autonomous System Map) Implementation\n+ *\n+ * Provides a compressed mapping from IP address prefixes to Autonomous System Numbers (ASNs).\n+ * Uses a binary trie structure encoded as bytecode instructions that are interpreted\n+ * at runtime to find the ASN for a given IP address.\n+ *\n+ * The format of the asmap data is a bit-packed binary format where the entire mapping\n+ * is treated as a continuous sequence of bits. Instructions and their arguments are\n+ * encoded using variable numbers of bits and concatenated together without regard for\n+ * byte boundaries. The bits are stored in bytes using little-endian bit ordering.\n+ *\n+ * The data structure internally represents the mapping as a binary trie where:\n+ * - Unassigned subnets (no ASN mapping present) map to 0\n+ * - Subnets mapped entirely to one ASN become leaf nodes\n+ * - Subnets whose lower and upper halves have different mappings branch into subtrees\n+ *\n+ * The encoding uses variable-length integers and four instruction types (RETURN, JUMP,\n+ * MATCH, DEFAULT) to efficiently represent the trie.\n+ */\n+\n namespace {\n \n+// Indicates decoding errors or invalid data\n constexpr uint32_t INVALID = 0xFFFFFFFF;\n \n-uint32_t DecodeBits(std::vector<bool>::const_iterator& bitpos, const std::vector<bool>::const_iterator& endpos, uint8_t minval, const std::vector<uint8_t> &bit_sizes)\n+/**\n+ * Extract a single bit from byte array using little-endian bit ordering.\n+ * Used for ASMap data where bits are numbered right-to-left within each byte (LSB first).\n+ */\n+inline bool GetBitLE(std::span<const std::byte> bytes, uint32_t bitpos) noexcept\n+{\n+    return (std::to_integer<uint8_t>(bytes[bitpos / 8]) >> (bitpos % 8)) & 1;\n+}\n+\n+/**\n+ * Extract a single bit from byte array using big-endian bit ordering.\n+ * Used for IP addresses to match network byte order conventions.\n+ */\n+inline bool GetBitBE(std::span<const std::byte> bytes, uint32_t bitpos) noexcept\n+{\n+    return (std::to_integer<uint8_t>(bytes[(bytes.size() * 8 - bitpos) / 8]) >> (7 - ((bytes.size() * 8 - bitpos) % 8))) & 1;\n+}\n+\n+/**\n+ * Variable-length integer decoder using a custom encoding scheme.\n+ *\n+ * The encoding is easiest to describe using an example. Let's say minval=100 and\n+ * bit_sizes=[4,2,2,3]. In that case:\n+ * - x in [100..115]: encoded as [0] + [4-bit BE encoding of (x-100)]\n+ * - x in [116..119]: encoded as [1,0] + [2-bit BE encoding of (x-116)]\n+ * - x in [120..123]: encoded as [1,1,0] + [2-bit BE encoding of (x-120)]\n+ * - x in [124..131]: encoded as [1,1,1] + [3-bit BE encoding of (x-124)]\n+ *\n+ * In general, every number is encoded as:\n+ * - First, k \"1\"-bits, where k is the class the number falls in\n+ * - Then, a \"0\"-bit, unless k is the highest class\n+ * - Lastly, bit_sizes[k] bits encoding in big endian the position within that class\n+ */\n+uint32_t DecodeBits(size_t& bitpos, const std::span<const std::byte>& data, uint8_t minval, const std::span<const uint8_t> bit_sizes)\n {\n-    uint32_t val = minval;\n+    uint32_t val = minval;  // Start with minimum encodable value\n     bool bit;\n-    for (std::vector<uint8_t>::const_iterator bit_sizes_it = bit_sizes.begin();\n-        bit_sizes_it != bit_sizes.end(); ++bit_sizes_it) {\n-        if (bit_sizes_it + 1 != bit_sizes.end()) {\n-            if (bitpos == endpos) break;\n-            bit = *bitpos;\n+    for (auto bit_sizes_it = bit_sizes.begin(); bit_sizes_it != bit_sizes.end(); ++bit_sizes_it) {\n+        // Read continuation bit to determine if we're in this class\n+        if (bit_sizes_it + 1 != bit_sizes.end()) {  // Unless we're in the last class\n+            if (bitpos >= data.size() * 8) break;\n+            bit = GetBitLE(data, bitpos);\n             bitpos++;\n         } else {\n-            bit = 0;\n+            bit = 0;  // Last class has no continuation bit\n         }\n         if (bit) {\n-            val += (1 << *bit_sizes_it);\n+            // If the value will not fit in this class, subtract its range from val,\n+            // emit a \"1\" bit and continue with the next class\n+            val += (1 << *bit_sizes_it);  // Add size of this class\n         } else {\n+            // Decode the position within this class in big endian\n             for (int b = 0; b < *bit_sizes_it; b++) {\n-                if (bitpos == endpos) return INVALID; // Reached EOF in mantissa\n-                bit = *bitpos;\n+                if (bitpos >= data.size() * 8) return INVALID; // Reached EOF in mantissa\n+                bit = GetBitLE(data, bitpos);\n                 bitpos++;\n-                val += bit << (*bit_sizes_it - 1 - b);\n+                val += bit << (*bit_sizes_it - 1 - b);  // Big-endian within the class\n             }\n             return val;\n         }\n     }\n     return INVALID; // Reached EOF in exponent\n }\n \n+/**\n+ * Instruction Set\n+ *\n+ * The instruction set is designed to efficiently encode a binary trie\n+ * that maps IP prefixes to ASNs. Each instruction type serves a specific\n+ * role in trie traversal and evaluation.\n+ */\n enum class Instruction : uint32_t\n {\n+    // A return instruction, encoded as [0], returns a constant ASN.\n+    // It is followed by an integer using the ASN encoding.\n     RETURN = 0,\n+    // A jump instruction, encoded as [1,0], inspects the next unused bit in the input\n+    // and either continues execution (if 0), or skips a specified number of bits (if 1).\n+    // It is followed by an integer using jump encoding.\n     JUMP = 1,\n+    // A match instruction, encoded as [1,1,0], inspects 1 or more of the next unused bits\n+    // in the input. If they all match, execution continues. If not, the default ASN is returned\n+    // (or 0 if unset). The match value encodes both the pattern and its length.\n     MATCH = 2,\n+    // A default instruction, encoded as [1,1,1], sets the default variable to its argument,\n+    // and continues execution. It is followed by an integer in ASN encoding.\n     DEFAULT = 3,\n };\n \n-const std::vector<uint8_t> TYPE_BIT_SIZES{0, 0, 1};\n-Instruction DecodeType(std::vector<bool>::const_iterator& bitpos, const std::vector<bool>::const_iterator& endpos)\n+// Instruction type encoding: RETURN=[0], JUMP=[1,0], MATCH=[1,1,0], DEFAULT=[1,1,1]\n+constexpr uint8_t TYPE_BIT_SIZES[]{0, 0, 1};\n+Instruction DecodeType(size_t& bitpos, const std::span<const std::byte>& data)\n {\n-    return Instruction(DecodeBits(bitpos, endpos, 0, TYPE_BIT_SIZES));\n+    return Instruction(DecodeBits(bitpos, data, 0, TYPE_BIT_SIZES));\n }\n \n-const std::vector<uint8_t> ASN_BIT_SIZES{15, 16, 17, 18, 19, 20, 21, 22, 23, 24};\n-uint32_t DecodeASN(std::vector<bool>::const_iterator& bitpos, const std::vector<bool>::const_iterator& endpos)\n+// ASN encoding: Can encode ASNs from 1 to ~16.7 million.\n+// Uses variable-length encoding optimized for real-world ASN distribution.\n+// ASN 0 is reserved and used if there isn't a match.\n+constexpr uint8_t ASN_BIT_SIZES[]{15, 16, 17, 18, 19, 20, 21, 22, 23, 24};\n+uint32_t DecodeASN(size_t& bitpos, const std::span<const std::byte>& data)\n {\n-    return DecodeBits(bitpos, endpos, 1, ASN_BIT_SIZES);\n+    return DecodeBits(bitpos, data, 1, ASN_BIT_SIZES);\n }\n \n-\n-const std::vector<uint8_t> MATCH_BIT_SIZES{1, 2, 3, 4, 5, 6, 7, 8};\n-uint32_t DecodeMatch(std::vector<bool>::const_iterator& bitpos, const std::vector<bool>::const_iterator& endpos)\n+// MATCH argument: Values in [2, 511]. The highest set bit determines the match length\n+// n âˆˆ [1,8]; the lower n-1 bits are the pattern to compare.\n+constexpr uint8_t MATCH_BIT_SIZES[]{1, 2, 3, 4, 5, 6, 7, 8};\n+uint32_t DecodeMatch(size_t& bitpos, const std::span<const std::byte>& data)\n {\n-    return DecodeBits(bitpos, endpos, 2, MATCH_BIT_SIZES);\n+    return DecodeBits(bitpos, data, 2, MATCH_BIT_SIZES);\n }\n \n-\n-const std::vector<uint8_t> JUMP_BIT_SIZES{5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30};\n-uint32_t DecodeJump(std::vector<bool>::const_iterator& bitpos, const std::vector<bool>::const_iterator& endpos)\n+// JUMP offset: Minimum value 17. Variable-length coded and may be large\n+// for skipping big subtrees.\n+constexpr uint8_t JUMP_BIT_SIZES[]{5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30};\n+uint32_t DecodeJump(size_t& bitpos, const std::span<const std::byte>& data)\n {\n-    return DecodeBits(bitpos, endpos, 17, JUMP_BIT_SIZES);\n+    return DecodeBits(bitpos, data, 17, JUMP_BIT_SIZES);\n }\n \n-}\n+} // anonymous namespace\n \n-uint32_t Interpret(const std::vector<bool> &asmap, const std::vector<bool> &ip)\n+/**\n+ * Execute the ASMap bytecode to find the ASN for an IP\n+ *\n+ * This function interprets the asmap bytecode and uses bits from the IP\n+ * address to navigate through the encoded trie structure, ultimately\n+ * returning an ASN value.\n+ */\n+uint32_t Interpret(const std::span<const std::byte> asmap, const std::span<const std::byte> ip)\n {\n-    std::vector<bool>::const_iterator pos = asmap.begin();\n-    const std::vector<bool>::const_iterator endpos = asmap.end();\n-    uint8_t bits = ip.size();\n+    size_t pos{0};\n+    const size_t endpos{asmap.size() * 8};\n+    uint8_t bits = ip.size() * 8;\n     uint32_t default_asn = 0;\n     uint32_t jump, match, matchlen;",
      "path": "src/util/asmap.cpp",
      "position": 1,
      "original_position": 213,
      "commit_id": "b41f5a29f7d56da8fd157770ad29b5776c3684c6",
      "original_commit_id": "b41f5a29f7d56da8fd157770ad29b5776c3684c6",
      "in_reply_to_id": 2546124184,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done",
      "created_at": "2025-11-24T23:48:34Z",
      "updated_at": "2025-11-24T23:48:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2558060750",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2558060750"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 186,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2558061851",
      "pull_request_review_id": 3502664559,
      "id": 2558061851,
      "node_id": "PRRC_kwDOABII586YeO0b",
      "diff_hunk": "@@ -5,186 +5,297 @@\n #include <util/asmap.h>\n \n #include <clientversion.h>\n+#include <hash.h>\n #include <logging.h>\n #include <serialize.h>\n #include <streams.h>\n+#include <uint256.h>\n #include <util/fs.h>\n \n #include <algorithm>\n #include <bit>\n #include <cassert>\n+#include <cstddef>\n #include <cstdio>\n+#include <span>\n #include <utility>\n #include <vector>\n \n+/*\n+ * ASMap (Autonomous System Map) Implementation\n+ *\n+ * Provides a compressed mapping from IP address prefixes to Autonomous System Numbers (ASNs).\n+ * Uses a binary trie structure encoded as bytecode instructions that are interpreted\n+ * at runtime to find the ASN for a given IP address.\n+ *\n+ * The format of the asmap data is a bit-packed binary format where the entire mapping\n+ * is treated as a continuous sequence of bits. Instructions and their arguments are\n+ * encoded using variable numbers of bits and concatenated together without regard for\n+ * byte boundaries. The bits are stored in bytes using little-endian bit ordering.\n+ *\n+ * The data structure internally represents the mapping as a binary trie where:\n+ * - Unassigned subnets (no ASN mapping present) map to 0\n+ * - Subnets mapped entirely to one ASN become leaf nodes\n+ * - Subnets whose lower and upper halves have different mappings branch into subtrees\n+ *\n+ * The encoding uses variable-length integers and four instruction types (RETURN, JUMP,\n+ * MATCH, DEFAULT) to efficiently represent the trie.\n+ */\n+\n namespace {\n \n+// Indicates decoding errors or invalid data\n constexpr uint32_t INVALID = 0xFFFFFFFF;\n \n-uint32_t DecodeBits(std::vector<bool>::const_iterator& bitpos, const std::vector<bool>::const_iterator& endpos, uint8_t minval, const std::vector<uint8_t> &bit_sizes)\n+/**\n+ * Extract a single bit from byte array using little-endian bit ordering.\n+ * Used for ASMap data where bits are numbered right-to-left within each byte (LSB first).\n+ */\n+inline bool GetBitLE(std::span<const std::byte> bytes, uint32_t bitpos) noexcept\n+{\n+    return (std::to_integer<uint8_t>(bytes[bitpos / 8]) >> (bitpos % 8)) & 1;\n+}\n+\n+/**\n+ * Extract a single bit from byte array using big-endian bit ordering.\n+ * Used for IP addresses to match network byte order conventions.\n+ */\n+inline bool GetBitBE(std::span<const std::byte> bytes, uint32_t bitpos) noexcept",
      "path": "src/util/asmap.cpp",
      "position": 1,
      "original_position": 60,
      "commit_id": "b41f5a29f7d56da8fd157770ad29b5776c3684c6",
      "original_commit_id": "b41f5a29f7d56da8fd157770ad29b5776c3684c6",
      "in_reply_to_id": 2546283406,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thanks, I have applied this latest patch, I think that also resolves your earlier comment that was in a different comment thread.",
      "created_at": "2025-11-24T23:49:24Z",
      "updated_at": "2025-11-24T23:49:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2558061851",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2558061851"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": 54,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 63,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2558964758",
      "pull_request_review_id": 3503770177,
      "id": 2558964758,
      "node_id": "PRRC_kwDOABII586YhrQW",
      "diff_hunk": "@@ -17,5 +18,7 @@ bool SanityCheckASMap(const std::vector<std::byte>& asmap, int bits);\n \n /** Read asmap from provided binary file */\n std::vector<std::byte> DecodeAsmap(fs::path path);\n+/** Calculate the asmap version, a checksum identifying the asmap being used. */\n+uint256 AsmapVersion(const std::vector<std::byte>& data);",
      "path": "src/util/asmap.h",
      "position": 1,
      "original_position": 13,
      "commit_id": "b41f5a29f7d56da8fd157770ad29b5776c3684c6",
      "original_commit_id": "d278d6193b8d754eb108bc3ccc256260085b32c9",
      "in_reply_to_id": 2545022654,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Ah, makes sense too. :+1: ",
      "created_at": "2025-11-25T08:23:11Z",
      "updated_at": "2025-11-25T22:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2558964758",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2558964758"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 22,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2559059898",
      "pull_request_review_id": 3503770177,
      "id": 2559059898,
      "node_id": "PRRC_kwDOABII586YiCe6",
      "diff_hunk": "@@ -5,186 +5,297 @@\n #include <util/asmap.h>\n \n #include <clientversion.h>\n+#include <hash.h>\n #include <logging.h>\n #include <serialize.h>\n #include <streams.h>\n+#include <uint256.h>\n #include <util/fs.h>\n \n #include <algorithm>\n #include <bit>\n #include <cassert>\n+#include <cstddef>\n #include <cstdio>\n+#include <span>\n #include <utility>\n #include <vector>\n \n+/*\n+ * ASMap (Autonomous System Map) Implementation\n+ *\n+ * Provides a compressed mapping from IP address prefixes to Autonomous System Numbers (ASNs).\n+ * Uses a binary trie structure encoded as bytecode instructions that are interpreted\n+ * at runtime to find the ASN for a given IP address.\n+ *\n+ * The format of the asmap data is a bit-packed binary format where the entire mapping\n+ * is treated as a continuous sequence of bits. Instructions and their arguments are\n+ * encoded using variable numbers of bits and concatenated together without regard for\n+ * byte boundaries. The bits are stored in bytes using little-endian bit ordering.\n+ *\n+ * The data structure internally represents the mapping as a binary trie where:\n+ * - Unassigned subnets (no ASN mapping present) map to 0\n+ * - Subnets mapped entirely to one ASN become leaf nodes\n+ * - Subnets whose lower and upper halves have different mappings branch into subtrees\n+ *\n+ * The encoding uses variable-length integers and four instruction types (RETURN, JUMP,\n+ * MATCH, DEFAULT) to efficiently represent the trie.\n+ */\n+\n namespace {\n \n+// Indicates decoding errors or invalid data\n constexpr uint32_t INVALID = 0xFFFFFFFF;\n \n-uint32_t DecodeBits(std::vector<bool>::const_iterator& bitpos, const std::vector<bool>::const_iterator& endpos, uint8_t minval, const std::vector<uint8_t> &bit_sizes)\n+/**\n+ * Extract a single bit from byte array using little-endian bit ordering.\n+ * Used for ASMap data where bits are numbered right-to-left within each byte (LSB first).\n+ */\n+inline bool GetBitLE(std::span<const std::byte> bytes, uint32_t bitpos) noexcept\n+{\n+    return (std::to_integer<uint8_t>(bytes[bitpos / 8]) >> (bitpos % 8)) & 1;\n+}\n+\n+/**\n+ * Extract a single bit from byte array using big-endian bit ordering.\n+ * Used for IP addresses to match network byte order conventions.\n+ */\n+inline bool GetBitBE(std::span<const std::byte> bytes, uint32_t bitpos) noexcept",
      "path": "src/util/asmap.cpp",
      "position": 1,
      "original_position": 60,
      "commit_id": "b41f5a29f7d56da8fd157770ad29b5776c3684c6",
      "original_commit_id": "b41f5a29f7d56da8fd157770ad29b5776c3684c6",
      "in_reply_to_id": 2546283406,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thank you for taking the patch! :handshake: \r\n\r\nAgreed, it builds on https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2545416624",
      "created_at": "2025-11-25T08:43:54Z",
      "updated_at": "2025-11-25T22:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2559059898",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2559059898"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": 54,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 63,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2559145317",
      "pull_request_review_id": 3503770177,
      "id": 2559145317,
      "node_id": "PRRC_kwDOABII586YiXVl",
      "diff_hunk": "@@ -234,9 +235,11 @@ class FuzzedSock : public Sock\n \n [[nodiscard]] inline NetGroupManager ConsumeNetGroupManager(FuzzedDataProvider& fuzzed_data_provider) noexcept\n {\n-    std::vector<bool> asmap = ConsumeRandomLengthBitVector(fuzzed_data_provider);\n-    if (!SanityCheckASMap(asmap, 128)) asmap.clear();\n-    return NetGroupManager(asmap);\n+    std::vector<std::byte> asmap{ConsumeRandomLengthByteVector<std::byte>(fuzzed_data_provider)};\n+    if (!CheckStandardAsmap(std::span<std::byte>(asmap))) {",
      "path": "src/test/fuzz/util/net.h",
      "position": 1,
      "original_position": 16,
      "commit_id": "825d677a863d153d4c466288397da773ee2bb2f5",
      "original_commit_id": "825d677a863d153d4c466288397da773ee2bb2f5",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: Seems to compile fine without this on Clang:\r\n```suggestion\r\n    if (!CheckStandardAsmap(asmap)) {\r\n```",
      "created_at": "2025-11-25T09:01:08Z",
      "updated_at": "2025-11-25T22:25:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2559145317",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2559145317"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 239,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2559163190",
      "pull_request_review_id": 3503770177,
      "id": 2559163190,
      "node_id": "PRRC_kwDOABII586Yibs2",
      "diff_hunk": "@@ -214,19 +222,18 @@ std::vector<std::byte> DecodeAsmap(fs::path path)\n     }\n     int64_t length{file.size()};\n     LogInfo(\"Opened asmap file %s (%d bytes) from disk\", fs::quoted(fs::PathToString(path)), length);\n-",
      "path": "src/util/asmap.cpp",
      "position": 1,
      "original_position": 91,
      "commit_id": "825d677a863d153d4c466288397da773ee2bb2f5",
      "original_commit_id": "dc0c4310bae257236d3cd6a06de8071276d4548b",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "meganit in dc0c4310bae257236d3cd6a06de8071276d4548b: Empty line is removed only to be re-added in next commit.",
      "created_at": "2025-11-25T09:04:54Z",
      "updated_at": "2025-11-25T22:25:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2559163190",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2559163190"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 217,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2650944376",
      "pull_request_review_id": 3615845587,
      "id": 2650944376,
      "node_id": "PRRC_kwDOABII586eAjN4",
      "diff_hunk": "@@ -8,14 +8,15 @@\n #include <netaddress.h>\n #include <uint256.h>\n \n+#include <cstddef>\n #include <vector>\n \n /**\n  * Netgroup manager\n  */\n class NetGroupManager {\n public:\n-    explicit NetGroupManager(std::vector<bool> asmap)\n+    explicit NetGroupManager(std::vector<std::byte> asmap)",
      "path": "src/netgroup.h",
      "position": 1,
      "original_position": 13,
      "commit_id": "825d677a863d153d4c466288397da773ee2bb2f5",
      "original_commit_id": "87f72d9ed0e43387c183ab232674a292ab82f6e0",
      "in_reply_to_id": null,
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit 87f72d9ed0e43387c183ab232674a292ab82f6e0\r\n\r\nCould enforce moving explicitly by passing `std::vector<std::byte>&&` (though I realize this is changed again in a later commit).",
      "created_at": "2025-12-29T13:13:15Z",
      "updated_at": "2025-12-29T22:27:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2650944376",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2650944376"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 19,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2651838442",
      "pull_request_review_id": 3615845587,
      "id": 2651838442,
      "node_id": "PRRC_kwDOABII586eD9fq",
      "diff_hunk": "@@ -156,7 +156,7 @@ void AddrManImpl::Serialize(Stream& s_) const\n      * * for each new bucket:\n      *   * number of elements\n      *   * for each element: index in the serialized \"all new addresses\"\n-     * * asmap checksum\n+     * * asmap version",
      "path": "src/addrman.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "4fec726c4d352daf2fb4a7e5ed463e44c8815ddb",
      "original_commit_id": "b89ffbc56a431bb662407d97f1b62eb99050eeeb",
      "in_reply_to_id": null,
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit b89ffbc56a431bb662407d97f1b62eb99050eeeb\r\n\r\nIs version really clearer? In the asmap-data repository the entries seem to be versioned by their unix timestamp, that seems clearer to me and also conveys a temporal ordering between data dumps.",
      "created_at": "2025-12-29T21:55:59Z",
      "updated_at": "2025-12-29T22:27:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2651838442",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2651838442"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 159,
      "original_line": 159,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2651868548",
      "pull_request_review_id": 3615845587,
      "id": 2651868548,
      "node_id": "PRRC_kwDOABII586eEE2E",
      "diff_hunk": "@@ -71,35 +72,33 @@ enum class Instruction : uint32_t\n     DEFAULT = 3,\n };\n \n-const std::vector<uint8_t> TYPE_BIT_SIZES{0, 0, 1};\n-Instruction DecodeType(size_t& bitpos, const std::vector<std::byte>& data)\n+constexpr uint8_t TYPE_BIT_SIZES[]{0, 0, 1};\n+Instruction DecodeType(size_t& bitpos, const std::span<const std::byte>& data)",
      "path": "src/util/asmap.cpp",
      "position": 1,
      "original_position": 24,
      "commit_id": "825d677a863d153d4c466288397da773ee2bb2f5",
      "original_commit_id": "dc0c4310bae257236d3cd6a06de8071276d4548b",
      "in_reply_to_id": null,
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit dc0c4310bae257236d3cd6a06de8071276d4548b\r\n\r\nIs there a reason for passing these spans by reference?",
      "created_at": "2025-12-29T22:21:01Z",
      "updated_at": "2025-12-29T22:27:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2651868548",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2651868548"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 76,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2651871653",
      "pull_request_review_id": 3615845587,
      "id": 2651871653,
      "node_id": "PRRC_kwDOABII586eEFml",
      "diff_hunk": "@@ -70,8 +86,19 @@ class NetGroupManager {\n      * re-bucketed.\n      *\n      * This is initialized in the constructor, const, and therefore is\n-     * thread-safe. */\n-    const std::vector<std::byte> m_asmap;\n+     * thread-safe. m_asmap can either point to m_loaded_asmap which holds\n+     * data loaded from an external file at runtime or it can point to embedded\n+     * asmap data.\n+     */\n+    const std::span<const std::byte> m_asmap;\n+    std::vector<std::byte> m_loaded_asmap;",
      "path": "src/netgroup.h",
      "position": 62,
      "original_position": 49,
      "commit_id": "4fec726c4d352daf2fb4a7e5ed463e44c8815ddb",
      "original_commit_id": "dc0c4310bae257236d3cd6a06de8071276d4548b",
      "in_reply_to_id": null,
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit dc0c4310bae257236d3cd6a06de8071276d4548b\r\n\r\nYou mention that this dual ownership structure is done to avoid holding the asmap in memory twice. Where is this currently the case? Does that only happen in test code at the moment?",
      "created_at": "2025-12-29T22:23:15Z",
      "updated_at": "2025-12-29T22:27:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2651871653",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2651871653"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 94,
      "original_line": 94,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2655627748",
      "pull_request_review_id": 3621130063,
      "id": 2655627748,
      "node_id": "PRRC_kwDOABII586eSank",
      "diff_hunk": "@@ -234,9 +235,11 @@ class FuzzedSock : public Sock\n \n [[nodiscard]] inline NetGroupManager ConsumeNetGroupManager(FuzzedDataProvider& fuzzed_data_provider) noexcept\n {\n-    std::vector<bool> asmap = ConsumeRandomLengthBitVector(fuzzed_data_provider);\n-    if (!SanityCheckASMap(asmap, 128)) asmap.clear();\n-    return NetGroupManager(asmap);\n+    std::vector<std::byte> asmap{ConsumeRandomLengthByteVector<std::byte>(fuzzed_data_provider)};\n+    if (!CheckStandardAsmap(std::span<std::byte>(asmap))) {",
      "path": "src/test/fuzz/util/net.h",
      "position": 1,
      "original_position": 16,
      "commit_id": "825d677a863d153d4c466288397da773ee2bb2f5",
      "original_commit_id": "825d677a863d153d4c466288397da773ee2bb2f5",
      "in_reply_to_id": 2559145317,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "done",
      "created_at": "2025-12-31T16:34:09Z",
      "updated_at": "2025-12-31T16:34:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2655627748",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2655627748"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 239,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2655628159",
      "pull_request_review_id": 3621130506,
      "id": 2655628159,
      "node_id": "PRRC_kwDOABII586eSat_",
      "diff_hunk": "@@ -214,19 +222,18 @@ std::vector<std::byte> DecodeAsmap(fs::path path)\n     }\n     int64_t length{file.size()};\n     LogInfo(\"Opened asmap file %s (%d bytes) from disk\", fs::quoted(fs::PathToString(path)), length);\n-",
      "path": "src/util/asmap.cpp",
      "position": 1,
      "original_position": 91,
      "commit_id": "825d677a863d153d4c466288397da773ee2bb2f5",
      "original_commit_id": "dc0c4310bae257236d3cd6a06de8071276d4548b",
      "in_reply_to_id": 2559163190,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "done",
      "created_at": "2025-12-31T16:34:16Z",
      "updated_at": "2025-12-31T16:34:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2655628159",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2655628159"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 217,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2655628501",
      "pull_request_review_id": 3621130829,
      "id": 2655628501,
      "node_id": "PRRC_kwDOABII586eSazV",
      "diff_hunk": "@@ -8,14 +8,15 @@\n #include <netaddress.h>\n #include <uint256.h>\n \n+#include <cstddef>\n #include <vector>\n \n /**\n  * Netgroup manager\n  */\n class NetGroupManager {\n public:\n-    explicit NetGroupManager(std::vector<bool> asmap)\n+    explicit NetGroupManager(std::vector<std::byte> asmap)",
      "path": "src/netgroup.h",
      "position": 1,
      "original_position": 13,
      "commit_id": "825d677a863d153d4c466288397da773ee2bb2f5",
      "original_commit_id": "87f72d9ed0e43387c183ab232674a292ab82f6e0",
      "in_reply_to_id": 2650944376,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "done",
      "created_at": "2025-12-31T16:34:24Z",
      "updated_at": "2025-12-31T16:34:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2655628501",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2655628501"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 19,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2655628785",
      "pull_request_review_id": 3621131328,
      "id": 2655628785,
      "node_id": "PRRC_kwDOABII586eSa3x",
      "diff_hunk": "@@ -156,7 +156,7 @@ void AddrManImpl::Serialize(Stream& s_) const\n      * * for each new bucket:\n      *   * number of elements\n      *   * for each element: index in the serialized \"all new addresses\"\n-     * * asmap checksum\n+     * * asmap version",
      "path": "src/addrman.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "4fec726c4d352daf2fb4a7e5ed463e44c8815ddb",
      "original_commit_id": "b89ffbc56a431bb662407d97f1b62eb99050eeeb",
      "in_reply_to_id": 2651838442,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I think the version/checksum and timestamps are two different things. My goal here was just to not have two different names (version and checksum) for the same thing in the code base, for clarity, greppability etc. The timestamps are important outside of core because we do these coordinated launches in the `asmap-data` project and the timestamp ties the data back to one of these events. It might be that there are other means of getting an asmap in the future where people don't care so much about the exact timestamp and they don't care about it, but that's just theoretical. The version here is a hash, so a data integrity check and I think that is important to have even though we currently only print it. We currently don't have a concept to get the timestamp of a file into bitcoin core. We could add a header to the file similar to what we have done with the assumeutxo dumps but even then the timestamp could be lying. Other than assumeutxo we don't have anything to compare and check against either the hash or the timestamp and I guess that's ok, or rather, unavoidable.\r\n\r\nSorry for rambling a bit. At second thought, maybe your point was rather that we should use checksum instead of version? I think I could get behind that if we say the timestamp is the \"version\" and the \"checksum\" is the integrity check :)",
      "created_at": "2025-12-31T16:34:37Z",
      "updated_at": "2025-12-31T16:34:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2655628785",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2655628785"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 159,
      "original_line": 159,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2655628954",
      "pull_request_review_id": 3621131501,
      "id": 2655628954,
      "node_id": "PRRC_kwDOABII586eSa6a",
      "diff_hunk": "@@ -71,35 +72,33 @@ enum class Instruction : uint32_t\n     DEFAULT = 3,\n };\n \n-const std::vector<uint8_t> TYPE_BIT_SIZES{0, 0, 1};\n-Instruction DecodeType(size_t& bitpos, const std::vector<std::byte>& data)\n+constexpr uint8_t TYPE_BIT_SIZES[]{0, 0, 1};\n+Instruction DecodeType(size_t& bitpos, const std::span<const std::byte>& data)",
      "path": "src/util/asmap.cpp",
      "position": 1,
      "original_position": 24,
      "commit_id": "825d677a863d153d4c466288397da773ee2bb2f5",
      "original_commit_id": "dc0c4310bae257236d3cd6a06de8071276d4548b",
      "in_reply_to_id": 2651868548,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nope, done",
      "created_at": "2025-12-31T16:34:46Z",
      "updated_at": "2025-12-31T16:34:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2655628954",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2655628954"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 76,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2655629170",
      "pull_request_review_id": 3621131692,
      "id": 2655629170,
      "node_id": "PRRC_kwDOABII586eSa9y",
      "diff_hunk": "@@ -70,8 +86,19 @@ class NetGroupManager {\n      * re-bucketed.\n      *\n      * This is initialized in the constructor, const, and therefore is\n-     * thread-safe. */\n-    const std::vector<std::byte> m_asmap;\n+     * thread-safe. m_asmap can either point to m_loaded_asmap which holds\n+     * data loaded from an external file at runtime or it can point to embedded\n+     * asmap data.\n+     */\n+    const std::span<const std::byte> m_asmap;\n+    std::vector<std::byte> m_loaded_asmap;",
      "path": "src/netgroup.h",
      "position": 62,
      "original_position": 49,
      "commit_id": "4fec726c4d352daf2fb4a7e5ed463e44c8815ddb",
      "original_commit_id": "dc0c4310bae257236d3cd6a06de8071276d4548b",
      "in_reply_to_id": 2651871653,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "It was the case an earlier version of the code. I guess referencing something that isn't actually there anymore isn't something we should be doing in docs, even if it's implicitly. But in this case I think there should be some documentation in this regard so it clears up why we need `m_asmap` and `m_loaded_asmap` here.",
      "created_at": "2025-12-31T16:34:55Z",
      "updated_at": "2025-12-31T16:34:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2655629170",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2655629170"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 94,
      "original_line": 94,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2657629653",
      "pull_request_review_id": 3623040407,
      "id": 2657629653,
      "node_id": "PRRC_kwDOABII586eaDXV",
      "diff_hunk": "@@ -70,8 +86,19 @@ class NetGroupManager {\n      * re-bucketed.\n      *\n      * This is initialized in the constructor, const, and therefore is\n-     * thread-safe. */\n-    const std::vector<std::byte> m_asmap;\n+     * thread-safe. m_asmap can either point to m_loaded_asmap which holds\n+     * data loaded from an external file at runtime or it can point to embedded\n+     * asmap data.\n+     */\n+    const std::span<const std::byte> m_asmap;\n+    std::vector<std::byte> m_loaded_asmap;",
      "path": "src/netgroup.h",
      "position": 62,
      "original_position": 49,
      "commit_id": "4fec726c4d352daf2fb4a7e5ed463e44c8815ddb",
      "original_commit_id": "dc0c4310bae257236d3cd6a06de8071276d4548b",
      "in_reply_to_id": 2651871653,
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I'm more asking why keep both of them at all. Seems a bit too complicated to me. Requiring the map to be moved in seems good enough, no?",
      "created_at": "2026-01-02T12:23:33Z",
      "updated_at": "2026-01-02T12:23:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2657629653",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2657629653"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 94,
      "original_line": 94,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2657705096",
      "pull_request_review_id": 3623113538,
      "id": 2657705096,
      "node_id": "PRRC_kwDOABII586eaVyI",
      "diff_hunk": "@@ -70,8 +86,19 @@ class NetGroupManager {\n      * re-bucketed.\n      *\n      * This is initialized in the constructor, const, and therefore is\n-     * thread-safe. */\n-    const std::vector<std::byte> m_asmap;\n+     * thread-safe. m_asmap can either point to m_loaded_asmap which holds\n+     * data loaded from an external file at runtime or it can point to embedded\n+     * asmap data.\n+     */\n+    const std::span<const std::byte> m_asmap;\n+    std::vector<std::byte> m_loaded_asmap;",
      "path": "src/netgroup.h",
      "position": 62,
      "original_position": 49,
      "commit_id": "4fec726c4d352daf2fb4a7e5ed463e44c8815ddb",
      "original_commit_id": "dc0c4310bae257236d3cd6a06de8071276d4548b",
      "in_reply_to_id": 2651871653,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In the next PR, where a default asmap data blob becomes part of the binary, we have a constant compile-time array for that default map. Loading it into an std::vector as well means doubling its memory usage (2x ~1.5 Mb). However, to support loading a custom asmap at startup, the vector (with ownership) is needed too.",
      "created_at": "2026-01-02T13:18:58Z",
      "updated_at": "2026-01-02T13:18:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2657705096",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2657705096"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 94,
      "original_line": 94,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2657705164",
      "pull_request_review_id": 3623113620,
      "id": 2657705164,
      "node_id": "PRRC_kwDOABII586eaVzM",
      "diff_hunk": "@@ -70,8 +86,19 @@ class NetGroupManager {\n      * re-bucketed.\n      *\n      * This is initialized in the constructor, const, and therefore is\n-     * thread-safe. */\n-    const std::vector<std::byte> m_asmap;\n+     * thread-safe. m_asmap can either point to m_loaded_asmap which holds\n+     * data loaded from an external file at runtime or it can point to embedded\n+     * asmap data.\n+     */\n+    const std::span<const std::byte> m_asmap;\n+    std::vector<std::byte> m_loaded_asmap;",
      "path": "src/netgroup.h",
      "position": 62,
      "original_position": 49,
      "commit_id": "4fec726c4d352daf2fb4a7e5ed463e44c8815ddb",
      "original_commit_id": "dc0c4310bae257236d3cd6a06de8071276d4548b",
      "in_reply_to_id": 2651871653,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In the next PR, where a default asmap data blob becomes part of the binary, we have a constant compile-time array for that default map. Loading it into an std::vector as well means doubling its memory usage (2x ~1.5 Mb). However, to support loading a custom asmap at startup, the vector (with ownership) is needed too.",
      "created_at": "2026-01-02T13:19:01Z",
      "updated_at": "2026-01-02T13:19:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33878#discussion_r2657705164",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2657705164"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33878"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 94,
      "original_line": 94,
      "side": "RIGHT"
    }
  ]
}