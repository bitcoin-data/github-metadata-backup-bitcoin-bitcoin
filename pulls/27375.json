{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
    "id": 1296744977,
    "node_id": "PR_kwDOABII585NSsIR",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/27375",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/27375.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/27375.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27375",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27375/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/6dddc1c2eda514d35219cce03c229bd6f822be55",
    "number": 27375,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "net: support unix domain sockets for -proxy and -onion",
    "user": {
      "login": "pinheadmz",
      "id": 2084648,
      "node_id": "MDQ6VXNlcjIwODQ2NDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pinheadmz",
      "html_url": "https://github.com/pinheadmz",
      "followers_url": "https://api.github.com/users/pinheadmz/followers",
      "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
      "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
      "repos_url": "https://api.github.com/users/pinheadmz/repos",
      "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Closes https://github.com/bitcoin/bitcoin/issues/27252\r\n\r\nUNIX domain sockets are a mechanism for inter-process communication that are faster than local TCP ports (because there is no need for TCP overhead) and potentially more secure because access is managed by the filesystem instead of serving an open port on the system.\r\n\r\nThere has been work on [unix domain sockets before](https://github.com/bitcoin/bitcoin/pull/9979) but for now I just wanted to start on this single use-case which is enabling unix sockets from the client side, specifically connecting to a local Tor proxy (Tor can listen on unix sockets and even enforces strict curent-user-only access permission before binding) configured by `-onion=` or `-proxy=`\r\n\r\nI copied the prefix `unix:` usage from Tor. With this patch built locally you can test with your own filesystem path (example):\r\n\r\n`tor --SocksPort unix:/Users/matthewzipkin/torsocket/x`\r\n\r\n`bitcoind -proxy=unix:/Users/matthewzipkin/torsocket/x`\r\n\r\nPrep work for this feature includes:\r\n- Moving where and how we create `sockaddr` and `Sock` to accommodate `AF_UNIX` without disturbing `CService`\r\n- Expanding `Proxy` class to represent either a `CService` or a UNIX socket (by its file path)\r\n\r\nFuture work:\r\n- Enable UNIX sockets for ZMQ (https://github.com/bitcoin/bitcoin/pull/27679)\r\n- Enable UNIX sockets for I2P SAM proxy (some code is included in this PR but not tested or exposed to user options yet)\r\n- Enable UNIX sockets on windows where supported\r\n- Update Network Proxies dialog in GUI to support UNIX sockets\r\n",
    "labels": [
      {
        "id": 98298007,
        "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
        "name": "P2P",
        "color": "006b75",
        "default": false
      },
      {
        "id": 5334691551,
        "node_id": "LA_kwDOABII588AAAABPfju3w",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
        "name": "CI failed",
        "description": "",
        "color": "cccccc",
        "default": false
      }
    ],
    "created_at": "2023-03-30T19:29:32Z",
    "updated_at": "2024-03-01T18:04:28Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "40071c0ace17b1a755030cd00e681d40c3236bc3",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "pinheadmz:tor-unix-domain-socket",
      "ref": "tor-unix-domain-socket",
      "sha": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 61248407,
        "node_id": "MDEwOlJlcG9zaXRvcnk2MTI0ODQwNw==",
        "name": "bitcoin",
        "full_name": "pinheadmz/bitcoin",
        "owner": {
          "login": "pinheadmz",
          "id": 2084648,
          "node_id": "MDQ6VXNlcjIwODQ2NDg=",
          "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/pinheadmz",
          "html_url": "https://github.com/pinheadmz",
          "followers_url": "https://api.github.com/users/pinheadmz/followers",
          "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
          "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
          "repos_url": "https://api.github.com/users/pinheadmz/repos",
          "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/pinheadmz/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/pinheadmz/bitcoin",
        "archive_url": "https://api.github.com/repos/pinheadmz/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/pinheadmz/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/pinheadmz/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/pinheadmz/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/pinheadmz/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/pinheadmz/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/pinheadmz/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/pinheadmz/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/pinheadmz/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/pinheadmz/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/pinheadmz/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/pinheadmz/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/pinheadmz/bitcoin/events",
        "forks_url": "https://api.github.com/repos/pinheadmz/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/pinheadmz/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/pinheadmz/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/pinheadmz/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/pinheadmz/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/pinheadmz/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/pinheadmz/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/pinheadmz/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/pinheadmz/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/pinheadmz/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/pinheadmz/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/pinheadmz/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/pinheadmz/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/pinheadmz/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/pinheadmz/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/pinheadmz/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:pinheadmz/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/pinheadmz/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/pinheadmz/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/pinheadmz/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/pinheadmz/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/pinheadmz/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/pinheadmz/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/pinheadmz/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/pinheadmz/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/pinheadmz/bitcoin/hooks",
        "svn_url": "https://github.com/pinheadmz/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 1,
        "stargazers_count": 1,
        "watchers_count": 1,
        "size": 226815,
        "default_branch": "master2",
        "open_issues_count": 1,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-02-01T19:14:50Z",
        "created_at": "2016-06-15T23:48:20Z",
        "updated_at": "2023-08-28T13:34:08Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "19d1ba1b4141f744cca291ff2d99d0b8ffcf946d",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 34728,
        "stargazers_count": 74334,
        "watchers_count": 74334,
        "size": 250572,
        "default_branch": "master",
        "open_issues_count": 686,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-03-01T18:01:55Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2024-03-01T18:22:15Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 393,
    "deletions": 140,
    "changed_files": 17,
    "commits": 12,
    "review_comments": 104,
    "comments": 20
  },
  "events": [
    {
      "event": "commented",
      "id": 1490826098,
      "node_id": "IC_kwDOABII585Y3DNy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1490826098",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-30T19:29:34Z",
      "updated_at": "2024-02-28T16:55:05Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/27375).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [vasild](https://github.com/bitcoin/bitcoin/pull/27375#pullrequestreview-1729334104), [tdb3](https://github.com/bitcoin/bitcoin/pull/27375#pullrequestreview-1876248880), [Sjors](https://github.com/bitcoin/bitcoin/pull/27375#pullrequestreview-1906085382) |\n| Stale ACK | [willcl-ark](https://github.com/bitcoin/bitcoin/pull/27375#pullrequestreview-1716369031) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#29015](https://github.com/bitcoin/bitcoin/pull/29015) (kernel: Streamline util library by ryanofsky)\n* [#28834](https://github.com/bitcoin/bitcoin/pull/28834) (net: attempts to connect to all resolved addresses when connecting to a node by sr-gi)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#issuecomment-1490826098",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27375"
    },
    {
      "event": "labeled",
      "id": 8891135545,
      "node_id": "LE_lADOABII585iPWmwzwAAAAIR8_Y5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8891135545",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-30T19:29:36Z",
      "label": {
        "name": "P2P",
        "color": "006b75"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-30T19:29:48Z",
      "updated_at": "2023-03-30T19:29:48Z",
      "source": {
        "issue": {
          "id": 1621450204,
          "node_id": "I_kwDOABII585gpV3c",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27252",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27252/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27252/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27252/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/27252",
          "number": 27252,
          "state": "open",
          "state_reason": null,
          "title": "Adding interprocess onion access instead local ip",
          "body": "### Please describe the feature you'd like to see added.\n\n- onion uses 127.0.0.1:9050 and i would like to set it to use unix:path_to_variable used by tor\n\n### Is your feature related to a problem, if so please describe it.\n\nAvoid people try access local ips or 127.0.0.1 with miss configured torcc. \n\n### Describe the solution you'd like\n\n_No response_\n\n### Describe any alternatives you've considered\n\n_No response_\n\n### Please leave any additional context\n\n_No response_",
          "user": {
            "login": "red0bear",
            "id": 11351022,
            "node_id": "MDQ6VXNlcjExMzUxMDIy",
            "avatar_url": "https://avatars.githubusercontent.com/u/11351022?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/red0bear",
            "html_url": "https://github.com/red0bear",
            "followers_url": "https://api.github.com/users/red0bear/followers",
            "following_url": "https://api.github.com/users/red0bear/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/red0bear/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/red0bear/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/red0bear/subscriptions",
            "organizations_url": "https://api.github.com/users/red0bear/orgs",
            "repos_url": "https://api.github.com/users/red0bear/repos",
            "events_url": "https://api.github.com/users/red0bear/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/red0bear/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 64583,
              "node_id": "MDU6TGFiZWw2NDU4Mw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature",
              "name": "Feature",
              "color": "7cf575",
              "default": false
            }
          ],
          "assignee": {
            "login": "pinheadmz",
            "id": 2084648,
            "node_id": "MDQ6VXNlcjIwODQ2NDg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pinheadmz",
            "html_url": "https://github.com/pinheadmz",
            "followers_url": "https://api.github.com/users/pinheadmz/followers",
            "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
            "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
            "repos_url": "https://api.github.com/users/pinheadmz/repos",
            "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
            "type": "User",
            "site_admin": false
          },
          "assignees": [
            {
              "login": "pinheadmz",
              "id": 2084648,
              "node_id": "MDQ6VXNlcjIwODQ2NDg=",
              "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/pinheadmz",
              "html_url": "https://github.com/pinheadmz",
              "followers_url": "https://api.github.com/users/pinheadmz/followers",
              "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
              "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
              "repos_url": "https://api.github.com/users/pinheadmz/repos",
              "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
              "type": "User",
              "site_admin": false
            }
          ],
          "author_association": "NONE",
          "locked": false,
          "comments": 7,
          "created_at": "2023-03-13T13:04:45Z",
          "updated_at": "2023-10-18T13:48:22Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8893062914,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAISEV8C",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8893062914",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-31T00:59:09Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-31T08:19:29Z",
      "updated_at": "2023-03-31T08:19:29Z",
      "source": {
        "issue": {
          "id": 1398072802,
          "node_id": "PR_kwDOABII585AOrOs",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26261",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26261/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26261/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26261/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/26261",
          "number": 26261,
          "state": "closed",
          "state_reason": null,
          "title": "p2p: cleanup `LookupIntern`, `Lookup` and `LookupHost`",
          "body": "Continuation of #26078.\r\n\r\nTo improve readability instead of returning a bool and passing stuff by reference, this PR changes:\r\n\r\n- `LookupHost` to return `std::vector<CNetAddr>`\r\n- `LookupHost` to return `std::optional<CNetAddr>`\r\n- `Lookup` to return `std::vector<CService>`\r\n- `Lookup` to return `std::optional<CService>`.\r\n- `LookupIntern` to return `std::vector<CNetAddr>`\r\n\r\nAs discussed in #26078, it would be better to avoid using `optional` in some cases, but for specific `Lookup` and `LookupHost` functions it's necessary to use `optional` to verify if they were able to catch some data from their overloaded function.\r\n\r\n\r\n\r\n\r\n",
          "user": {
            "login": "brunoerg",
            "id": 19480819,
            "node_id": "MDQ6VXNlcjE5NDgwODE5",
            "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/brunoerg",
            "html_url": "https://github.com/brunoerg",
            "followers_url": "https://api.github.com/users/brunoerg/followers",
            "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
            "organizations_url": "https://api.github.com/users/brunoerg/orgs",
            "repos_url": "https://api.github.com/users/brunoerg/repos",
            "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/brunoerg/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 22,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/26261",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/26261.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/26261.patch"
          },
          "closed_at": "2023-05-30T15:40:23Z",
          "created_at": "2022-10-05T16:35:08Z",
          "updated_at": "2023-05-30T15:40:24Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 1366408214,
      "node_id": "PRR_kwDOABII585RcbwW",
      "url": null,
      "actor": null,
      "commit_id": "7785e4d1796f3deb746916e6fc89f00990fb28cd",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK\r\n\r\nWith some light testing it seems to work pretty nicely:\r\n\r\n```fish\r\nwill@ubuntu in ~/src/bitcoin on î‚  tor-unix-domain-socket [$?] via ðŸ 3.7.16 took 6s\r\nâ‚¿ sudo exa -al /proc/(pidof bitcoind)/fd\r\nlrwx------  64 will 31 Mar 09:21 0 -> /dev/null\r\nlrwx------  64 will 31 Mar 09:21 1 -> /dev/null\r\nlrwx------  64 will 31 Mar 09:21 2 -> /dev/null\r\nlr-x------  64 will 31 Mar 09:21 3 -> pipe:[47084978]\r\nl-wx------  64 will 31 Mar 09:21 4 -> pipe:[47084978]\r\nlrwx------  64 will 31 Mar 09:21 5 -> /home/will/.bitcoin/signet/.lock\r\nl-wx------  64 will 31 Mar 09:21 6 -> /home/will/.bitcoin/signet/debug.log\r\nlrwx------  64 will 31 Mar 09:21 7 -> anon_inode:[eventpoll]\r\nlr-x------  64 will 31 Mar 09:21 8 -> pipe:[47101090]\r\nl-wx------  64 will 31 Mar 09:21 9 -> pipe:[47101090]\r\nlrwx------  64 will 31 Mar 09:21 10 -> anon_inode:[eventfd]\r\nlrwx------@ 64 will 31 Mar 09:21 11 -> socket:[47101093]\r\nlrwx------@ 64 will 31 Mar 09:21 12 -> socket:[47101095]\r\nlrwx------  64 will 31 Mar 09:21 13 -> /home/will/.bitcoin/signet/blocks/index/LOCK\r\nl-wx------  64 will 31 Mar 09:21 14 -> /home/will/.bitcoin/signet/blocks/index/000387.log\r\nl-wx------  64 will 31 Mar 09:21 15 -> /home/will/.bitcoin/signet/blocks/index/MANIFEST-000385\r\nlrwx------  64 will 31 Mar 09:21 16 -> /home/will/.bitcoin/signet/chainstate/LOCK\r\nl-wx------  64 will 31 Mar 09:21 17 -> /home/will/.bitcoin/signet/chainstate/002594.log\r\nl-wx------  64 will 31 Mar 09:21 18 -> /home/will/.bitcoin/signet/chainstate/MANIFEST-002593\r\nlrwx------  64 will 31 Mar 09:21 19 -> /home/will/.bitcoin/signet/wallets/legacy/.walletlock\r\nl-wx------  64 will 31 Mar 09:21 20 -> /home/will/.bitcoin/signet/wallets/legacy/db.log\r\nlrwx------  64 will 31 Mar 09:21 21 -> /home/will/.bitcoin/signet/wallets/legacy/wallet.dat\r\nlrwx------  64 will 31 Mar 09:21 22 -> /home/will/.bitcoin/signet/wallets/legacy/database/log.0000000001\r\nlrwx------  64 will 31 Mar 09:21 23 -> /home/will/.bitcoin/signet/wallets/test-descriptor/wallet.dat\r\nlrwx------  64 will 31 Mar 09:21 24 -> /home/will/.bitcoin/signet/wallets/test-descriptor/wallet.dat-journal\r\nlrwx------  64 will 31 Mar 09:21 25 -> anon_inode:[eventpoll]\r\nlr-x------  64 will 31 Mar 09:21 26 -> pipe:[47084995]\r\nl-wx------  64 will 31 Mar 09:21 27 -> pipe:[47084995]\r\nlrwx------  64 will 31 Mar 09:21 28 -> anon_inode:[eventfd]\r\nlrwx------@ 64 will 31 Mar 09:21 29 -> socket:[47099059]\r\nlrwx------@ 64 will 31 Mar 09:21 30 -> socket:[47084996]\r\nlrwx------@ 64 will 31 Mar 09:21 31 -> socket:[47084997]\r\nlrwx------@ 64 will 31 Mar 09:21 32 -> socket:[47099065]\r\nlrwx------@ 64 will 31 Mar 09:21 33 -> socket:[47084998]\r\nlrwx------@ 64 will 31 Mar 09:21 34 -> socket:[47100197]\r\nlrwx------@ 64 will 31 Mar 09:21 35 -> socket:[47099299]\r\nlrwx------@ 64 will 31 Mar 09:21 36 -> socket:[47099533]\r\nlrwx------@ 64 will 31 Mar 09:22 37 -> socket:[47099588]\r\nlrwx------@ 64 will 31 Mar 09:22 38 -> socket:[47085043]\r\nlrwx------@ 64 will 31 Mar 09:22 39 -> socket:[47085047]\r\n```\r\n\r\nWith new socket connections being opened for each connection.\r\n\r\nAs I mentioned in one of my comments, I am curious why you didn't go for the `-onion` case too, to reduce the scope of the change? \r\n\r\nEnabling `-onion` in the `PortErrorMessage` check loop did appear to also work nicely (although i did not check whether there were any other side-effects).\r\n\r\nThe info shown by `-netinfo 4` looked correct in both cases.",
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#pullrequestreview-1366408214",
      "submitted_at": "2023-03-31T09:01:38Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-31T09:36:45Z",
      "updated_at": "2023-03-31T09:36:45Z",
      "source": {
        "issue": {
          "id": 1261819358,
          "node_id": "PR_kwDOABII5845Km3S",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25284",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25284/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25284/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25284/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/25284",
          "number": 25284,
          "state": "closed",
          "state_reason": null,
          "title": "net: Use serialization parameters for CAddress serialization",
          "body": "It seems confusing that picking a wrong value for `ADDRV2_FORMAT` could have effects on consensus. (See the docstring of `ADDRV2_FORMAT`).\r\n\r\nFix this by implementing https://github.com/bitcoin/bitcoin/issues/19477#issuecomment-1147421608 .\r\n\r\nThis may also help with libbitcoinkernel, see https://github.com/bitcoin/bitcoin/pull/28327",
          "user": {
            "login": "maflcko",
            "id": 6399679,
            "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/maflcko",
            "html_url": "https://github.com/maflcko",
            "followers_url": "https://api.github.com/users/maflcko/followers",
            "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
            "organizations_url": "https://api.github.com/users/maflcko/orgs",
            "repos_url": "https://api.github.com/users/maflcko/repos",
            "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/maflcko/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 19,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25284",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/25284",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/25284.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/25284.patch"
          },
          "closed_at": "2023-09-07T10:34:48Z",
          "created_at": "2022-06-06T13:04:43Z",
          "updated_at": "2024-02-09T11:10:10Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-31T16:47:20Z",
      "updated_at": "2023-03-31T16:47:20Z",
      "source": {
        "issue": {
          "id": 1649191746,
          "node_id": "PR_kwDOEEET9c5NV-_z",
          "url": "https://api.github.com/repos/bitcoin-core/gui/issues/724",
          "repository_url": "https://api.github.com/repos/bitcoin-core/gui",
          "labels_url": "https://api.github.com/repos/bitcoin-core/gui/issues/724/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin-core/gui/issues/724/comments",
          "events_url": "https://api.github.com/repos/bitcoin-core/gui/issues/724/events",
          "html_url": "https://github.com/bitcoin-core/gui/pull/724",
          "number": 724,
          "state": "closed",
          "state_reason": null,
          "title": "Update translation source file for v25.0 string freeze",
          "body": "This PR updates the `src/qt/locale/bitcoin_en.xlf` translation source file according to [Release schedule for 25.0](https://github.com/bitcoin/bitcoin/issues/26549).\r\n\r\nSome translation-related fixes have been picked from https://github.com/bitcoin-core/gui/pull/599 and https://github.com/bitcoin-core/gui/pull/716.\r\n\r\nNote for reviewers: it is expected to get a zero diff after running `make -C src translate` locally.",
          "user": {
            "login": "hebasto",
            "id": 32963518,
            "node_id": "MDQ6VXNlcjMyOTYzNTE4",
            "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hebasto",
            "html_url": "https://github.com/hebasto",
            "followers_url": "https://api.github.com/users/hebasto/followers",
            "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
            "organizations_url": "https://api.github.com/users/hebasto/orgs",
            "repos_url": "https://api.github.com/users/hebasto/repos",
            "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/hebasto/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 2,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin-core/gui/pulls/724",
            "html_url": "https://github.com/bitcoin-core/gui/pull/724",
            "diff_url": "https://github.com/bitcoin-core/gui/pull/724.diff",
            "patch_url": "https://github.com/bitcoin-core/gui/pull/724.patch"
          },
          "closed_at": "2023-04-01T21:06:06Z",
          "created_at": "2023-03-31T11:27:11Z",
          "updated_at": "2023-04-13T10:43:58Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8900900236,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAISiPWM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8900900236",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-31T18:47:23Z"
    },
    {
      "event": "reviewed",
      "id": 1367343663,
      "node_id": "PRR_kwDOABII585RgAIv",
      "url": null,
      "actor": null,
      "commit_id": "7785e4d1796f3deb746916e6fc89f00990fb28cd",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Thanks for the feedback @willcl-ark. force-push to 2436b00f2231c52e6bee6d7f79690c5e709cd6f9 should address your notes. I'm still expecting some CI failures from platforms that don't support unix sockets, then I'll add configure options like wumpus did [here](https://github.com/bitcoin/bitcoin/pull/9979/files#diff-49473dca262eeab3b4a43002adb08b4db31020d190caaad1594b47f1d5daa810)",
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#pullrequestreview-1367343663",
      "submitted_at": "2023-03-31T18:47:33Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8900909599,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAISiRof",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8900909599",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-31T18:48:44Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8900913277,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAISiSh9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8900913277",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-31T18:49:12Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-01T04:18:07Z",
      "updated_at": "2023-04-01T04:18:07Z",
      "source": {
        "issue": {
          "id": 1650131834,
          "node_id": "PR_kwDOABII585NZG7Z",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27385",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27385/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27385/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27385/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/27385",
          "number": 27385,
          "state": "closed",
          "state_reason": null,
          "title": "net, refactor: extract Network and BIP155Network logic to node/network",
          "body": "This extracts the `Network` and `BIP155Network` logic to `node/network`.  The code has been living between `netaddress` and `netbase` and some compilation units include these large files when they only need a `Network` enum or related method.  Separating the code to a standalone unit in `node` improves code separation and helps with using only what is needed.\r\n\r\nI verified the `include` headers with https://cirrus-ci.com/task/6749578737745920 generated by https://github.com/bitcoin/bitcoin/pull/27385/commits/8f647a65d3484c7acd2d97f4b055c582d7734b6f while this was in draft and carefully narrowed them down to the most relevant ones.\r\n\r\nPossible todos for a follow-up: upgrade `Network` to an `enum class`, e.g. `NET_I2P` becomes `Network::I2P` and https://github.com/bitcoin/bitcoin/pull/27385/commits/5cfa3fb8b5815aaf96483a63526e5f0bf3c0a06b.",
          "user": {
            "login": "jonatack",
            "id": 2415484,
            "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jonatack",
            "html_url": "https://github.com/jonatack",
            "followers_url": "https://api.github.com/users/jonatack/followers",
            "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
            "organizations_url": "https://api.github.com/users/jonatack/orgs",
            "repos_url": "https://api.github.com/users/jonatack/repos",
            "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/jonatack/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 14,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27385",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/27385",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/27385.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/27385.patch"
          },
          "closed_at": "2024-01-21T12:04:24Z",
          "created_at": "2023-03-31T22:40:50Z",
          "updated_at": "2024-01-21T12:04:24Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "labeled",
      "id": 8905326757,
      "node_id": "LE_lADOABII585iPWmwzwAAAAISzICl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8905326757",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-01T23:05:08Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8906524870,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAIS3sjG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8906524870",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-02T14:27:06Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8906529320,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAIS3too",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8906529320",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-02T14:29:59Z"
    },
    {
      "event": "unlabeled",
      "id": 8906587127,
      "node_id": "UNLE_lADOABII585iPWmwzwAAAAIS37v3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8906587127",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-02T15:03:51Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8907390761,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAIS6_8p",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8907390761",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-03T00:21:47Z"
    },
    {
      "event": "renamed",
      "id": 8913668917,
      "node_id": "RTE_lADOABII585iPWmwzwAAAAITS8s1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8913668917",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-03T14:24:14Z",
      "rename": {
        "from": "net: support unix domain sockets for -proxy",
        "to": "net: support unix domain sockets for -proxy and -onion"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8913991437,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAITULcN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8913991437",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-03T14:53:11Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8914278819,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAITVRmj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8914278819",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-03T15:17:15Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8915325541,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAITZRJl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8915325541",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-03T17:02:10Z"
    },
    {
      "event": "ready_for_review",
      "id": 8915952673,
      "node_id": "RFRE_lADOABII585iPWmwzwAAAAITbqQh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8915952673",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-03T18:14:47Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-13T01:33:28Z",
      "updated_at": "2023-04-13T01:33:28Z",
      "source": {
        "issue": {
          "id": 1652681372,
          "node_id": "PR_kwDOABII585NhcBe",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27411",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27411/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27411/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27411/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/27411",
          "number": 27411,
          "state": "closed",
          "state_reason": null,
          "title": "p2p: Restrict self-advertisements with privacy networks to avoid fingerprinting",
          "body": "The current logic for self-advertisements works such that we detect as many local addresses as we can, and then, using the scoring matrix from `CNetAddr::GetReachabilityFrom()`, self-advertise with the address that fits best to our peer.\r\nIt is in general not hard for our peers to distinguish our self-advertisements from other addrs we send them, because we self-advertise every ~24h and because the first addr we send over a connection is likely our self-advertisement. \r\n\r\n`GetReachabilityFrom()` currently only takes into account actual reachability, but not whether we'd _want_ to announce our identity for one network to peers from other networks, which is not straightforward in connection with privacy networks. \r\n\r\nWhile the general approach is to prefer self-advertising with the address for the network our peer is on, there are several special situations in which we don't have one, and as a result could allow self-advertise other local addresses, for example:\r\n\r\nA) We run i2p and clearnet, use `-i2pacceptincoming=0` (so we have no local i2p address), and we have a local ipv4 address. In this case, we'd advertise the ipv4 address to our outbound i2p peers.\r\n\r\nB) Our `-discover` logic cannot detect any local clearnet addresses in our network environment, but we are actually reachable over clearnet. If we ran bitcoind clearnet-only, we'd always advertise the address our peer sees us with instead, and could get inbound peers this way. Now, if we also have an onion service running (but aren't using tor as a proxy for clearnet connections), we could advertise our onion address to clearnet peers, so that they would be able to connect our clearnet and onion identities. \r\n\r\nThis PR tries to avoid these situations by \r\n1.) never advertising our local Tor or I2P address to peers from other networks.\r\n2.) never advertising local addresses from non-anonymity networks to peers from Tor or I2P\r\n\r\nNote that this affects only our own self-advertisements, the rules to forward other people's addrs are not changed.\r\n\r\n[Edit] after Initial [discussion](https://github.com/bitcoin/bitcoin/pull/27411#issuecomment-1497176155): CJDNS is not being treated like Tor and I2P at least for now, because it has different privacy properties and for the practical reason that it has still very few bitcoin nodes.\r\n",
          "user": {
            "login": "mzumsande",
            "id": 48763452,
            "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
            "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mzumsande",
            "html_url": "https://github.com/mzumsande",
            "followers_url": "https://api.github.com/users/mzumsande/followers",
            "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
            "organizations_url": "https://api.github.com/users/mzumsande/orgs",
            "repos_url": "https://api.github.com/users/mzumsande/repos",
            "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/mzumsande/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 14,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27411",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/27411",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/27411.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/27411.patch"
          },
          "closed_at": "2023-07-13T17:51:24Z",
          "created_at": "2023-04-03T19:56:42Z",
          "updated_at": "2023-11-07T20:29:43Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 1382786000,
      "node_id": "PRR_kwDOABII585Sa6PQ",
      "url": null,
      "actor": null,
      "commit_id": "44dd4cb505a4e1e7258997a9b687be59760dcdbb",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK, this would be nice to have.\r\n\r\nI do not like that the current approach expands `enum Network` and `CNetAddr` with the UNIX type, making it first-class-citizen network that has to be handled all over the networking code, whereas it is only needed to connect to the proxy. It is not like this PR adds support for connecting to other Bitcoin nodes over UNIX sockets (using the P2P protocol). This creates meaningless situations like having a `CService` on a UNIX socket (it is meaningless because `CService` has port, whereas UNIX sockets don't have port). Similarly `CSubNet` on a UNIX socket is meaningless.\r\n\r\nI will play a bit with this to see if it would be possible to constrain the logic in the `Proxy` class and hide from the rest of the code whether the proxy is at `addr:port` or `unix:/path`.\r\n",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#pullrequestreview-1382786000",
      "submitted_at": "2023-04-13T15:45:02Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9000949730,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAIYf5fi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9000949730",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-13T20:29:11Z"
    },
    {
      "event": "commented",
      "id": 1507577994,
      "node_id": "IC_kwDOABII585Z29CK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1507577994",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-13T20:33:28Z",
      "updated_at": "2023-04-13T20:33:28Z",
      "author_association": "MEMBER",
      "body": "Thanks so much for the great review @vasild I think I addressed all your feedback up to the adding UNIX to CNetAddr. I understand your concerns there and we can chat about it, I'll look at alternatives as well. What I did do in this last push was mostly separate unix sockets from regular sockets, and adding `Proxy.GetSocket()` to decide which socket factory to call.",
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#issuecomment-1507577994",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27375"
    },
    {
      "event": "mentioned",
      "id": 9000980330,
      "node_id": "MEE_lADOABII585iPWmwzwAAAAIYgA9q",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9000980330",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-13T20:33:28Z"
    },
    {
      "event": "subscribed",
      "id": 9000980341,
      "node_id": "SE_lADOABII585iPWmwzwAAAAIYgA91",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9000980341",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-13T20:33:28Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9000992877,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAIYgEBt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9000992877",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-13T20:35:19Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-13T23:36:10Z",
      "updated_at": "2023-04-13T23:36:10Z",
      "source": {
        "issue": {
          "id": 1579504924,
          "node_id": "PR_kwDOABII585Js_-Z",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27071",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27071/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27071/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27071/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/27071",
          "number": 27071,
          "state": "closed",
          "state_reason": null,
          "title": "Handle CJDNS from LookupSubNet()",
          "body": "`LookupSubNet()` would treat addresses that start with `fc` as IPv6 even if `-cjdnsreachable` is set. This creates the following problems where it is called:\r\n\r\n* `NetWhitelistPermissions::TryParse()`: otherwise `-whitelist=` fails to white list CJDNS addresses: when a CJDNS peer connects to us, it will be matched against IPv6 `fc...` subnet and the match will never succeed.\r\n\r\n* `BanMapFromJson()`: CJDNS bans are stored as just IPv6 addresses in `banlist.json`. Upon reading from disk they have to be converted back to CJDNS, otherwise, after restart, a ban entry like (`fc00::1`, IPv6) would not match a peer (`fc00::1`, CJDNS).\r\n    \r\n* `RPCConsole::unbanSelectedNode()`: in the GUI the ban entries go through `CSubNet::ToString()` and back via `LookupSubNet()`. Then it must match whatever is stored in `BanMan`, otherwise it is impossible to unban via the GUI.\r\n\r\nThese were uncovered by https://github.com/bitcoin/bitcoin/pull/26859.\r\n\r\nThus, flip the result of `LookupSubNet()` to CJDNS if the network base address starts with `fc` and `-cjdnsreachable` is set. Since subnetting/masking does not make sense for CJDNS (the address is \"random\" bytes, like Tor and I2P, there is no hierarchy) treat `fc.../mask` as an invalid `CSubNet`.\r\n\r\nTo achieve that, `MaybeFlipIPv6toCJDNS()` has to be moved from `net` to `netbase` and thus also `IsReachable()`. In the process of moving `IsReachable()`, `SetReachable()` and `vfLimited[]` encapsulate those in a class.",
          "user": {
            "login": "vasild",
            "id": 266751,
            "node_id": "MDQ6VXNlcjI2Njc1MQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/vasild",
            "html_url": "https://github.com/vasild",
            "followers_url": "https://api.github.com/users/vasild/followers",
            "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
            "organizations_url": "https://api.github.com/users/vasild/orgs",
            "repos_url": "https://api.github.com/users/vasild/repos",
            "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/vasild/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "milestone": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/60",
            "html_url": "https://github.com/bitcoin/bitcoin/milestone/60",
            "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/60/labels",
            "id": 9286970,
            "node_id": "MI_kwDOABII584AjbU6",
            "number": 60,
            "state": "closed",
            "title": "26.0",
            "description": "",
            "creator": {
              "login": "fanquake",
              "id": 863730,
              "node_id": "MDQ6VXNlcjg2MzczMA==",
              "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/fanquake",
              "html_url": "https://github.com/fanquake",
              "followers_url": "https://api.github.com/users/fanquake/followers",
              "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
              "organizations_url": "https://api.github.com/users/fanquake/orgs",
              "repos_url": "https://api.github.com/users/fanquake/repos",
              "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/fanquake/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 0,
            "closed_issues": 116,
            "created_at": "2023-04-15T11:36:05Z",
            "updated_at": "2023-12-08T10:41:40Z",
            "closed_at": "2023-12-04T13:27:46Z"
          },
          "locked": false,
          "comments": 24,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27071",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/27071",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/27071.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/27071.patch"
          },
          "closed_at": "2023-10-19T16:49:02Z",
          "created_at": "2023-02-10T11:20:45Z",
          "updated_at": "2023-10-23T12:24:09Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9002110616,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAIYkU6Y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9002110616",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-13T23:45:28Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9009073723,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAIY-447",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9009073723",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-14T15:33:24Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-21T01:11:22Z",
      "updated_at": "2023-04-21T01:11:22Z",
      "source": {
        "issue": {
          "id": 1677432252,
          "node_id": "PR_kwDOABII585Ozh_T",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27505",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27505/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27505/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27505/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/27505",
          "number": 27505,
          "state": "closed",
          "state_reason": null,
          "title": "net: use interruptible async getaddrinfo wrapper from libevent for DNS",
          "body": "Closes https://github.com/bitcoin/bitcoin/issues/16778\r\n\r\nBitcoin uses `getaddrinfo` to make DNS requests for DNS seed servers and for adding peers with `-addnode`, `-seednode` and `-connect`. Depending on the platform this can be clunky and a system issue could prevent name resolution from completing at all, blocking the thread and in some cases preventing a clean shutdown.\r\n\r\nAn attempt was made to switch to the asynchronous `getaddrinfo_a` in https://github.com/bitcoin/bitcoin/pull/4421 but that was reverted in https://github.com/bitcoin/bitcoin/pull/9229 after discovering that function has a segfault!\r\n\r\nTaking BlueMatt's suggestion in https://github.com/bitcoin/bitcoin/pull/10215#issue-221886328, this PR modifies our `g_dns_lookup` function to use `evdns_getaddrinfo()` from [libevent](https://libevent.org/libevent-book/Ref9_dns.html). This is an asynchronous function but I've implemented it in a polling loop so it still blocks -- but now will timeout after 2 seconds.\r\n\r\nTODO:\r\n- [ ] We could make the polling loop interruptible but I'm not sure the best approach to that, since these functions don't live in a class with a flag like `interruptNet` \r\n- [ ] Is it possible to add functional tests that mess with DNS? Probably not.\r\n- [ ] The unit test I added makes a live DNS request for `nic.com` that test will fail the platform has no DNS\r\n\r\nFuture work:\r\n- libevent has more low-level DNS functions as well, we could ultimately use those to (for example) request `TXT` records with onion addresses from our DNS seeders\r\n\r\n",
          "user": {
            "login": "pinheadmz",
            "id": 2084648,
            "node_id": "MDQ6VXNlcjIwODQ2NDg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pinheadmz",
            "html_url": "https://github.com/pinheadmz",
            "followers_url": "https://api.github.com/users/pinheadmz/followers",
            "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
            "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
            "repos_url": "https://api.github.com/users/pinheadmz/repos",
            "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            },
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 10,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27505",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/27505",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/27505.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/27505.patch"
          },
          "closed_at": "2023-05-02T18:29:36Z",
          "created_at": "2023-04-20T21:07:11Z",
          "updated_at": "2023-05-02T18:29:37Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-26T03:09:29Z",
      "updated_at": "2023-04-26T03:09:29Z",
      "source": {
        "issue": {
          "id": 1683828214,
          "node_id": "PR_kwDOABII585PI2hl",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27530",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27530/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27530/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27530/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/27530",
          "number": 27530,
          "state": "closed",
          "state_reason": null,
          "title": "Remove now-unnecessary poll, fcntl includes from net(base).cpp",
          "body": "As far as I can tell, the code calling for these includes was removed in:\r\n6e68ccbefea6509c61fc4405a391a517c6057bb0 #24356\r\n82d360b5a88d9057b6c09b61cd69e426c7a2412d #21387",
          "user": {
            "login": "Empact",
            "id": 5470,
            "node_id": "MDQ6VXNlcjU0NzA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Empact",
            "html_url": "https://github.com/Empact",
            "followers_url": "https://api.github.com/users/Empact/followers",
            "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
            "organizations_url": "https://api.github.com/users/Empact/orgs",
            "repos_url": "https://api.github.com/users/Empact/repos",
            "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/Empact/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 6,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27530",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/27530",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/27530.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/27530.patch"
          },
          "closed_at": "2023-06-29T09:33:00Z",
          "created_at": "2023-04-25T20:36:11Z",
          "updated_at": "2023-06-29T15:29:24Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-02T22:45:50Z",
      "updated_at": "2023-05-02T22:45:50Z",
      "source": {
        "issue": {
          "id": 1692901383,
          "node_id": "PR_kwDOABII585PnKTi",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27557",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27557/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27557/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27557/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/27557",
          "number": 27557,
          "state": "open",
          "state_reason": null,
          "title": "net: call getaddrinfo() in detachable thread to prevent stalling",
          "body": "Closes https://github.com/bitcoin/bitcoin/issues/16778\r\nReplaces https://github.com/bitcoin/bitcoin/pull/27505\r\n\r\nThe library call `getaddrinfo()` has no internal timeout and depending on the user's system may wait indefinitely for a response when looking up a hostname in the DNS. By making that call in a separate thread, we can abandon it completely after some timeout (currently in this PR, 2 seconds).\r\n\r\nTODO:\r\n\r\n- [ ] We could make the polling loop interruptible but I'm not sure the best approach to that, since these functions don't live in a class with a flag like interruptNet\r\n\r\n\r\n",
          "user": {
            "login": "pinheadmz",
            "id": 2084648,
            "node_id": "MDQ6VXNlcjIwODQ2NDg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pinheadmz",
            "html_url": "https://github.com/pinheadmz",
            "followers_url": "https://api.github.com/users/pinheadmz/followers",
            "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
            "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
            "repos_url": "https://api.github.com/users/pinheadmz/repos",
            "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            },
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 6,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27557",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/27557",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/27557.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/27557.patch"
          },
          "created_at": "2023-05-02T18:28:32Z",
          "updated_at": "2024-01-13T07:56:14Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 1385416057,
      "node_id": "PRR_kwDOABII585Sk8V5",
      "url": null,
      "actor": null,
      "commit_id": "77c02efdf551bce0d0a1ab462dd5c5da6a2a948c",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#pullrequestreview-1385416057",
      "submitted_at": "2023-05-16T06:18:21Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-16T20:08:15Z",
      "updated_at": "2023-05-16T20:08:15Z",
      "source": {
        "issue": {
          "id": 1712671682,
          "node_id": "PR_kwDOABII585QpmkI",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27679",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27679/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27679/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27679/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/27679",
          "number": 27679,
          "state": "open",
          "state_reason": null,
          "title": "ZMQ: Support UNIX domain sockets",
          "body": "This is a follow-up to https://github.com/bitcoin/bitcoin/pull/27375, allowing ZMQ notifications to be published to a UNIX domain socket, adding one more commit.\r\n\r\nFortunately, libzmq handles unix sockets already, all we really have to do to support it is allow the format in the actual option. libzmq uses the prefix `ipc://` as opposed to `unix:` which is used by Tor and by #27375 so, for now I'm testing with both being allowed. \r\n\r\nExample:\r\n\r\n`bitcoind -zmqpubhashblock=ipc:///tmp/subscriber_socket`",
          "user": {
            "login": "pinheadmz",
            "id": 2084648,
            "node_id": "MDQ6VXNlcjIwODQ2NDg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pinheadmz",
            "html_url": "https://github.com/pinheadmz",
            "followers_url": "https://api.github.com/users/pinheadmz/followers",
            "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
            "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
            "repos_url": "https://api.github.com/users/pinheadmz/repos",
            "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 7,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27679",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/27679",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/27679.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/27679.patch"
          },
          "created_at": "2023-05-16T20:08:15Z",
          "updated_at": "2024-01-23T00:00:04Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "labeled",
      "id": 9272985620,
      "node_id": "LE_lADOABII585iPWmwzwAAAAIotogU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9272985620",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-17T19:24:09Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 9281206447,
      "node_id": "UNLE_lADOABII585iPWmwzwAAAAIpM_iv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9281206447",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-18T15:38:17Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9353769682,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAIthzLS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9353769682",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-26T18:56:38Z"
    },
    {
      "event": "commented",
      "id": 1564803705,
      "node_id": "IC_kwDOABII585dRQJ5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1564803705",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-26T18:58:28Z",
      "updated_at": "2023-05-26T18:58:28Z",
      "author_association": "MEMBER",
      "body": "@vasild did an overhaul of this PR and implemented more how we discussed on IRC. Edited the description to explain. I ended up not using `std::variant` because I felt it added uneeded complexity. Current approach is `Proxy` just has a `is_unix` flag and abstracts away the `CService` methods like `IsValid()` etc to support TCP or UNIX sockets",
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#issuecomment-1564803705",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27375"
    },
    {
      "event": "mentioned",
      "id": 9353792000,
      "node_id": "MEE_lADOABII585iPWmwzwAAAAIth4oA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9353792000",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-26T18:58:28Z"
    },
    {
      "event": "subscribed",
      "id": 9353792014,
      "node_id": "SE_lADOABII585iPWmwzwAAAAIth4oO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9353792014",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-26T18:58:28Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9353943263,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAItidjf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9353943263",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-26T19:20:01Z"
    },
    {
      "event": "labeled",
      "id": 9353943808,
      "node_id": "LE_lADOABII585iPWmwzwAAAAItidsA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9353943808",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-26T19:20:05Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9353969144,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAItij34",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9353969144",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-26T19:24:06Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9354379432,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAItkICo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9354379432",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-26T20:15:41Z"
    },
    {
      "event": "unlabeled",
      "id": 9354782727,
      "node_id": "UNLE_lADOABII585iPWmwzwAAAAItlqgH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9354782727",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-26T21:26:19Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-27T04:54:00Z",
      "updated_at": "2023-05-27T04:54:00Z",
      "source": {
        "issue": {
          "id": 652547610,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NDQ1NTk1Mjk3",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19461",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19461/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19461/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19461/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/19461",
          "number": 19461,
          "state": "open",
          "state_reason": null,
          "title": "multiprocess: Add bitcoin-gui -ipcconnect option",
          "body": "**This is a draft PR because it is based on #10102 + #19460.** The non-base commits are:\r\n\r\n- [`5f91aa3d8b47` multiprocess: Add bitcoin-gui -ipcconnect option](https://github.com/bitcoin/bitcoin/pull/19461/commits/5f91aa3d8b47cee97e625c3b5689a37dbd941eff)\r\n\r\n---\r\n\r\nBuilding on #10102, this adds an `-ipcconnect` option to `bitcoin-gui` that connects the GUI to an existing `bitcoin-node` process already running in the background instead of spawning a new `bitcoin-node` process. This allows the GUI to be started and stopped independently of the node. By default with this change, `bitcoin-gui` will check if a `<datadir>/sockets/node.sock` socket exists and try to connect to that. If that doesn't work, it will spawn a new node process and start up the same way it did before this PR.\r\n\r\nThe default `bitcoin-gui` connect option is `-ipcconnect=auto`, which tries to connect if possible as described above, and spawns a new `bitcoin-node` process if not possible. Other supported options are `-noipcconnect` to never connect to an existing node and always spawn a new one, `-ipcconnect` to require a connection and fail if it can't be established, and `-ipcconnect=unix:<socket>` to require a connection and use a custom socket path.\r\n\r\nWith this PR, basic functionality works and gui instances can connect and disconnect from a running node. But there are rough edges: If a gui process doesn't shut down cleanly, the node can see unhandled IpcExceptions, and if node command line options are passed to `bitcoin-gui` and `bitcoin-gui` connects to an exiting bitcoin-node process instead of spawning a new one, the node options will be silently ignored. \r\n\r\nThese changes require multiprocess support and this PR has no effect unless bitcoin is configured with `--enable-multiprocess` as described in [doc/multiprocess.md](https://github.com/bitcoin/bitcoin/blob/master/doc/multiprocess.md)\r\n\r\n---\r\n\r\nThis PR is part of the [process separation project](https://github.com/bitcoin/bitcoin/issues/28722).\r\n",
          "user": {
            "login": "ryanofsky",
            "id": 7133040,
            "node_id": "MDQ6VXNlcjcxMzMwNDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ryanofsky",
            "html_url": "https://github.com/ryanofsky",
            "followers_url": "https://api.github.com/users/ryanofsky/followers",
            "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
            "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
            "repos_url": "https://api.github.com/users/ryanofsky/repos",
            "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135946,
              "node_id": "MDU6TGFiZWwxMzU5NDY=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/GUI",
              "name": "GUI",
              "color": "02d7e1",
              "default": false
            },
            {
              "id": 241832923,
              "node_id": "MDU6TGFiZWwyNDE4MzI5MjM=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Utils/log/libs",
              "name": "Utils/log/libs",
              "description": "",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 11,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19461",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/19461",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/19461.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/19461.patch"
          },
          "created_at": "2020-07-07T19:00:11Z",
          "updated_at": "2024-01-22T00:52:31Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-27T04:55:50Z",
      "updated_at": "2023-05-27T04:55:50Z",
      "source": {
        "issue": {
          "id": 652543635,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NDQ1NTkyMDUz",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19460",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19460/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19460/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19460/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/19460",
          "number": 19460,
          "state": "open",
          "state_reason": null,
          "title": "multiprocess: Add bitcoin-wallet -ipcconnect option",
          "body": "**This is a draft PR because it is based on #10102.** The non-base commits are:\r\n\r\n- [`bbefbd3c199b` multiprocess: Add -ipcconnect and -ipcbind options](https://github.com/bitcoin/bitcoin/pull/19460/commits/bbefbd3c199b189188d6427b4564b17477c6d50e)\r\n\r\n---\r\n\r\nBuilding on #10102, this adds an `-ipcconnect` option to `bitcoin-wallet` and an `-ipcbind` option to `bitcoin-node` (both enabled by default in multiprocess builds) so bitcoin node will listen on a `<datadir>/sockets/node.sock` unix socket, and `bitcoin-wallet` will connect to it.\r\n\r\nThe idea is that `bitcoin-wallet` can be extended in the future to have some online functionality. For example, there could be a `bitcoin-wallet sync` command that will update balances and sync latest transactions to an unloaded wallet, or a `bitcoin-wallet serve` subcommand that loads a wallet and serves RPC requests, or a `bitcoin-wallet shell` subcommand that allows running RPC methods interactively like the GUI console, or just general support for `bitcoin-wallet <rpc method> <rpc params>` invocations suggested https://github.com/bitcoin/bitcoin/pull/13926#issuecomment-455187379.\r\n\r\nThis PR is small and doesn't do much. The only visible change is that `bitcoin-wallet` now checks whether a node socket exists on startup and prints \"Connected to IPC address\" if it can connect it it.\r\n\r\nThe default `bitcoin-wallet` connect option is `-ipcconnect=auto`, which connects if possible as described above, and proceeds offline if not possible. Other supported options are `-noipcconnect` to disable ipc, `-ipcconnect` to require a connection and fail if it can't be established, and `-ipcconnect=unix:<socket>` to require a connection and use a custom socket path.\r\n\r\nThese changes require multiprocess support and this PR has no effect unless bitcoin is configured with `--enable-multiprocess` as described in [doc/multiprocess.md](https://github.com/bitcoin/bitcoin/blob/master/doc/multiprocess.md)\r\n\r\n---\r\n\r\nThis PR is part of the [process separation project](https://github.com/bitcoin/bitcoin/issues/28722).\r\n",
          "user": {
            "login": "ryanofsky",
            "id": 7133040,
            "node_id": "MDQ6VXNlcjcxMzMwNDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ryanofsky",
            "html_url": "https://github.com/ryanofsky",
            "followers_url": "https://api.github.com/users/ryanofsky/followers",
            "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
            "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
            "repos_url": "https://api.github.com/users/ryanofsky/repos",
            "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            },
            {
              "id": 61889416,
              "node_id": "MDU6TGFiZWw2MTg4OTQxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Build%20system",
              "name": "Build system",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 241832923,
              "node_id": "MDU6TGFiZWwyNDE4MzI5MjM=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Utils/log/libs",
              "name": "Utils/log/libs",
              "description": "",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 7,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19460",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/19460",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/19460.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/19460.patch"
          },
          "created_at": "2020-07-07T18:53:19Z",
          "updated_at": "2024-01-22T00:52:31Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-27T05:03:50Z",
      "updated_at": "2023-05-27T05:03:50Z",
      "source": {
        "issue": {
          "id": 217385623,
          "node_id": "MDExOlB1bGxSZXF1ZXN0MTEyODQ2NDMx",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10102",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10102/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10102/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10102/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/10102",
          "number": 10102,
          "state": "open",
          "state_reason": null,
          "title": "Multiprocess bitcoin",
          "body": "**This is a draft PR because it is based on #28921 and #28929.** The non-base commits are:\r\n\r\n- [`ee4b9138c837` doc: multiprocess documentation improvements](https://github.com/bitcoin/bitcoin/pull/10102/commits/ee4b9138c837f6dc6b8f063b0df27573736d6578)\r\n- [`df27e301e603` Increase feature_block.py and feature_taproot.py timeouts](https://github.com/bitcoin/bitcoin/pull/10102/commits/df27e301e603d460cbd187056aeff20087cefe3e)\r\n- [`cbc5e366a216` Add util::Result workaround to be compatible with libmultiprocess](https://github.com/bitcoin/bitcoin/pull/10102/commits/cbc5e366a21660601bee8270b5f1d183c148d092)\r\n- [`3427e7e0a965` Add capnp serialization code for bitcoin types](https://github.com/bitcoin/bitcoin/pull/10102/commits/3427e7e0a96502b9c8c6a9d74e5f21a8d84de928)\r\n- [`b6516c454f70` Add capnp wrapper for Handler interface](https://github.com/bitcoin/bitcoin/pull/10102/commits/b6516c454f70d8ef3091ee2ef0bdaede3b0f5893)\r\n- [`5cf30e5357fc` Add capnp wrapper for Chain interface](https://github.com/bitcoin/bitcoin/pull/10102/commits/5cf30e5357fcc3d0ffb871b237e47b79fedd317a)\r\n- [`b5fd425e075a` Add capnp wrapper for Wallet interface](https://github.com/bitcoin/bitcoin/pull/10102/commits/b5fd425e075a3b21bc5e5b4f25209d8abacbeb58)\r\n- [`329b34c85ac6` Add capnp wrapper for Node interface](https://github.com/bitcoin/bitcoin/pull/10102/commits/329b34c85ac6c3718a5a575a48615ed29cfee2fc)\r\n- [`dde2a2211038` Make bitcoin-gui spawn a bitcoin-node process](https://github.com/bitcoin/bitcoin/pull/10102/commits/dde2a221103894606c77017d3e865f1aec3bfb10)\r\n- [`f3349a24e5ac` Make bitcoin-node spawn a bitcoin-wallet process](https://github.com/bitcoin/bitcoin/pull/10102/commits/f3349a24e5ac59913fbcf4ebeb8eaf8df75c604f)\r\n- [`6ea638ca4f28` multiprocess: Add debug.log .wallet/.gui suffixes](https://github.com/bitcoin/bitcoin/pull/10102/commits/6ea638ca4f2834d30853d731c8ed0bc98421d3ce)\r\n- [`622acd03b043` doc: Multiprocess misc doc and comment updates](https://github.com/bitcoin/bitcoin/pull/10102/commits/622acd03b043b238e3fa544167d0d612f1a08715)\r\n- [`755ca62696a4` combine_logs: Handle multiprocess wallet log files](https://github.com/bitcoin/bitcoin/pull/10102/commits/755ca62696a4a15cde7046f36425319ae4ca50ea)\r\n- [`56ef459b5734` Update libmultiprocess library](https://github.com/bitcoin/bitcoin/pull/10102/commits/56ef459b573461087fbe4f39d9b0a7108936335f)\r\n\r\n---\r\n\r\nThis PR adds an `--enable-multiprocess` configure option which builds new `bitcoin-node`, `bitcoin-wallet`, and `bitcoin-gui` executables with relevant functionality isolated into different processes. See [doc/design/multiprocess.md](https://github.com/ryanofsky/bitcoin/tree/pr/ipc/doc/design/multiprocess.md) for usage details and future plans.\r\n\r\nThe change is implemented by adding a new [`Init`](https://github.com/ryanofsky/bitcoin/blob/pr/ipc/src/interfaces/init.h) interface that spawns new wallet and node subprocesses that can be controlled over a [socketpair](http://man7.org/linux/man-pages/man2/socketpair.2.html) by calling [`Node`](https://github.com/ryanofsky/bitcoin/blob/pr/ipc/src/interfaces/node.h), [`Wallet`](https://github.com/ryanofsky/bitcoin/blob/pr/ipc/src/interfaces/wallet.h), and [`ChainClient`](https://github.com/ryanofsky/bitcoin/blob/pr/ipc/src/interfaces/chain.h) methods. When running with split processes, you can see the IPC messages going back and forth in `-debug=1` output. Followup PR's #19460 and #19461 add `-ipcbind` and `-ipcconnect` options that allow more flexibility in how processes are connected.\r\n\r\nThe IPC protocol used is Cap'n Proto, but this could be swapped out for another protocol. Cap'n Proto types and libraries are only accessed in the [src/ipc/capnp/](https://github.com/ryanofsky/bitcoin/tree/pr/ipc/src/ipc/capnp) directory, and not in any public headers or other parts of bitcoin code.\r\n\r\nSlides from a presentation describing this change are available on [google drive](https://docs.google.com/presentation/d/1AeJ-7gD-dItUgs5yH-HoEzLvXaEWe_2ZiGUUxYIXcws/edit). Demo code used in the presentation was from an older version this PR (tag [ipc.21](https://github.com/ryanofsky/bitcoin/releases/tag/pr%2Fipc.21), [commits](https://github.com/ryanofsky/bitcoin/compare/master...pr/ipc.21)).\r\n\r\n---\r\n\r\nThis PR is part of the [process separation project](https://github.com/bitcoin/bitcoin/issues/28722).\r\n",
          "user": {
            "login": "ryanofsky",
            "id": 7133040,
            "node_id": "MDQ6VXNlcjcxMzMwNDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ryanofsky",
            "html_url": "https://github.com/ryanofsky",
            "followers_url": "https://api.github.com/users/ryanofsky/followers",
            "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
            "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
            "repos_url": "https://api.github.com/users/ryanofsky/repos",
            "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135946,
              "node_id": "MDU6TGFiZWwxMzU5NDY=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/GUI",
              "name": "GUI",
              "color": "02d7e1",
              "default": false
            },
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            },
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 84,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10102",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/10102",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/10102.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/10102.patch"
          },
          "created_at": "2017-03-27T21:48:26Z",
          "updated_at": "2024-01-23T19:04:48Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "labeled",
      "id": 9380244415,
      "node_id": "LE_lADOABII585iPWmwzwAAAAIvGyu_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9380244415",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-30T15:53:36Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9382722859,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAIvQP0r",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9382722859",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-30T20:30:35Z"
    },
    {
      "event": "commented",
      "id": 1569053476,
      "node_id": "IC_kwDOABII585dhdsk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1569053476",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-30T20:30:54Z",
      "updated_at": "2023-05-30T20:30:54Z",
      "author_association": "MEMBER",
      "body": "> ðŸ™ This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\r\n\r\nðŸ•º ",
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#issuecomment-1569053476",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27375"
    },
    {
      "event": "labeled",
      "id": 9383307258,
      "node_id": "LE_lADOABII585iPWmwzwAAAAIvSef6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9383307258",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-30T21:50:21Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 9383522520,
      "node_id": "UNLE_lADOABII585iPWmwzwAAAAIvTTDY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9383522520",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-30T22:15:22Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 9393256634,
      "node_id": "UNLE_lADOABII585iPWmwzwAAAAIv4bi6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9393256634",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-31T17:13:45Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 9427638678,
      "node_id": "LE_lADOABII585iPWmwzwAAAAIx7lmW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9427638678",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-05T04:46:01Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 1461645134,
      "node_id": "PRR_kwDOABII585XHu9O",
      "url": null,
      "actor": null,
      "commit_id": "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Approach ACK 1a2095baf12b8f8995bed513a23d5faf16917fba",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#pullrequestreview-1461645134",
      "submitted_at": "2023-06-05T09:48:51Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
    },
    {
      "event": "unlabeled",
      "id": 9431305821,
      "node_id": "UNLE_lADOABII585iPWmwzwAAAAIyJk5d",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9431305821",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-05T10:40:40Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9436426358,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAIydHB2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9436426358",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-05T17:34:01Z"
    },
    {
      "event": "commented",
      "id": 1577201958,
      "node_id": "IC_kwDOABII585eAjEm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1577201958",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-05T17:35:05Z",
      "updated_at": "2023-06-05T17:35:05Z",
      "author_association": "MEMBER",
      "body": "@vasild thanks for the excellent detailed review! All comments addressed except where noted.",
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#issuecomment-1577201958",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27375"
    },
    {
      "event": "mentioned",
      "id": 9436435414,
      "node_id": "MEE_lADOABII585iPWmwzwAAAAIydJPW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9436435414",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-05T17:35:06Z"
    },
    {
      "event": "subscribed",
      "id": 9436435448,
      "node_id": "SE_lADOABII585iPWmwzwAAAAIydJP4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9436435448",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-05T17:35:06Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9607580252,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAI8qApc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9607580252",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-22T14:42:30Z"
    },
    {
      "event": "commented",
      "id": 1602766905,
      "node_id": "IC_kwDOABII585fiEg5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1602766905",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-22T14:43:46Z",
      "updated_at": "2023-06-22T17:10:59Z",
      "author_association": "MEMBER",
      "body": "Rebased on master to pass CI (âœ… ). @vasild and @willcl-ark would really love re-review from you handsome chaps when convenient!",
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#issuecomment-1602766905",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27375"
    },
    {
      "event": "mentioned",
      "id": 9607595979,
      "node_id": "MEE_lADOABII585iPWmwzwAAAAI8qEfL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9607595979",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-22T14:43:47Z"
    },
    {
      "event": "subscribed",
      "id": 9607596000,
      "node_id": "SE_lADOABII585iPWmwzwAAAAI8qEfg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9607596000",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-22T14:43:47Z"
    },
    {
      "event": "mentioned",
      "id": 9607596027,
      "node_id": "MEE_lADOABII585iPWmwzwAAAAI8qEf7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9607596027",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-22T14:43:47Z"
    },
    {
      "event": "subscribed",
      "id": 9607596042,
      "node_id": "SE_lADOABII585iPWmwzwAAAAI8qEgK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9607596042",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-22T14:43:47Z"
    },
    {
      "event": "reviewed",
      "id": 1494066986,
      "node_id": "PRR_kwDOABII585ZDacq",
      "url": null,
      "actor": null,
      "commit_id": "64d0f234e9aac490b03a5c019e86f1da56e62e01",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#pullrequestreview-1494066986",
      "submitted_at": "2023-06-22T22:14:30Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
    },
    {
      "event": "labeled",
      "id": 9675699748,
      "node_id": "LE_lADOABII585iPWmwzwAAAAJAt3Yk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9675699748",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-29T11:25:33Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 1505515197,
      "node_id": "PRR_kwDOABII585ZvFa9",
      "url": null,
      "actor": null,
      "commit_id": "64d0f234e9aac490b03a5c019e86f1da56e62e01",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "64d0f234e9 looks good, except there is some messup in the contents of these two commits:\r\n\r\n87064712899dacfac7f66f60c8ed1c0f4e65c24f `netbase: refactor CreateSock() to accept sa_family_t`\r\nbbff39d3619428df3745d884ea36d7febff337b1 `netbase: extend Proxy class to wrap UNIX socket as well as TCP`\r\n\r\nThe first one introduces one more `IsValid()` method, in addition to the existent one. The new method uses a variable that does not exist: `is_unix_socket`, thus it will not compile.\r\nThen the other commit removes one of the `IsValid()` methods, introduces `m_is_unix_socket` and changes usage from `is_unix_socket` to `m_is_unix_socket`.\r\n\r\nTo resolve this:\r\n\r\n<details>\r\n<summary>[patch] apply this to commit 87064712899dacfac7f66f60c8ed1c0f4e65c24f netbase: refactor CreateSock() to accept sa_family_t</summary>\r\n\r\n```diff\r\ndiff --git a/src/net.cpp b/src/net.cpp\r\nindex a50807fb64..556c8a84e7 100644\r\n--- a/src/net.cpp\r\n+++ b/src/net.cpp\r\n@@ -515,13 +515,13 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\r\n \r\n             if (connected) {\r\n                 sock = std::move(conn.sock);\r\n                 addr_bind = CAddress{conn.me, NODE_NONE};\r\n             }\r\n         } else if (use_proxy) {\r\n-            sock = CreateSock(proxy.proxy.GetTCPFamily());\r\n+            sock = CreateSock(proxy.proxy.GetSAFamily());\r\n             if (!sock) {\r\n                 return nullptr;\r\n             }\r\n             LogPrintLevel(BCLog::PROXY, BCLog::Level::Debug, \"Using proxy: %s to connect to %s:%s\\n\", proxy.proxy.ToStringAddrPort(), addrConnect.ToStringAddr(), addrConnect.GetPort());\r\n             connected = ConnectThroughProxy(proxy, addrConnect.ToStringAddr(), addrConnect.GetPort(),\r\n                                             *sock, nConnectTimeout, proxyConnectionFailed);\r\n@@ -537,13 +537,13 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\r\n         if (!proxyConnectionFailed) {\r\n             // If a connection to the node was attempted, and failure (if any) is not caused by a problem connecting to\r\n             // the proxy, mark this as an attempt.\r\n             addrman.Attempt(addrConnect, fCountFailure);\r\n         }\r\n     } else if (pszDest && GetNameProxy(proxy)) {\r\n-        sock = CreateSock(proxy.proxy.GetTCPFamily());\r\n+        sock = CreateSock(proxy.proxy.GetSAFamily());\r\n         if (!sock) {\r\n             return nullptr;\r\n         }\r\n         std::string host;\r\n         uint16_t port{default_port};\r\n         SplitHostPort(std::string(pszDest), port, host);\r\ndiff --git a/src/netbase.h b/src/netbase.h\r\nindex 320496f73b..a9e1ea4c62 100644\r\n--- a/src/netbase.h\r\n+++ b/src/netbase.h\r\n@@ -52,30 +52,12 @@ public:\r\n     explicit Proxy(const CService &_proxy, bool _randomize_credentials=false): proxy(_proxy), randomize_credentials(_randomize_credentials) {}\r\n \r\n     bool IsValid() const { return proxy.IsValid(); }\r\n \r\n     CService proxy;\r\n     bool randomize_credentials;\r\n-\r\n-    bool IsValid() const\r\n-    {\r\n-        if (is_unix_socket) return IsUnixSocketPath(unix_socket_path);\r\n-        return proxy.IsValid();\r\n-    }\r\n-\r\n-    sa_family_t GetFamily() const\r\n-    {\r\n-        if (is_unix_socket) return AF_UNIX;\r\n-        return proxy.GetSAFamily();\r\n-    }\r\n-\r\n-    std::string ToStringAddrPort() const\r\n-    {\r\n-        if (is_unix_socket) return unix_socket_path;\r\n-        return proxy.ToStringAddrPort();\r\n-    }\r\n };\r\n \r\n /** Credentials for proxy authentication */\r\n struct ProxyCredentials\r\n {\r\n     std::string username;\r\n```\r\n</details>\r\n\r\nand make sure that the state of the tree after commit `netbase: extend Proxy class to wrap UNIX socket as well as TCP` is the same as it is now.\r\n\r\nIt is also here: https://github.com/vasild/bitcoin/tree/tor-unix-domain-socket\r\n",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#pullrequestreview-1505515197",
      "submitted_at": "2023-06-29T16:12:10Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9712935280,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAJC76Fw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9712935280",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-03T19:13:22Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9712976038,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAJC8ECm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9712976038",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-03T19:16:40Z"
    },
    {
      "event": "commented",
      "id": 1619034666,
      "node_id": "IC_kwDOABII585ggIIq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1619034666",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-03T19:17:32Z",
      "updated_at": "2023-07-03T19:32:11Z",
      "author_association": "MEMBER",
      "body": "> [64d0f23](https://github.com/bitcoin/bitcoin/commit/64d0f234e9aac490b03a5c019e86f1da56e62e01) looks good, except there is some messup in the contents of these two commits:\r\n\r\nThanks @vasild sorry about the messy rebase there. I cleaned up the commits and fixed the `const` and `m_...` nits. Rebased on master for merge conflicts.",
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#issuecomment-1619034666",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27375"
    },
    {
      "event": "mentioned",
      "id": 9712989051,
      "node_id": "MEE_lADOABII585iPWmwzwAAAAJC8HN7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9712989051",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-03T19:17:32Z"
    },
    {
      "event": "subscribed",
      "id": 9712989072,
      "node_id": "SE_lADOABII585iPWmwzwAAAAJC8HOQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9712989072",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-03T19:17:32Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9713118268,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAJC8mw8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9713118268",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-03T19:31:39Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9713192304,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAJC841w",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9713192304",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-03T19:40:52Z"
    },
    {
      "event": "labeled",
      "id": 9713192879,
      "node_id": "LE_lADOABII585iPWmwzwAAAAJC84-v",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9713192879",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-03T19:40:56Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 9713798446,
      "node_id": "UNLE_lADOABII585iPWmwzwAAAAJC_M0u",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9713798446",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-03T20:47:43Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 9714229243,
      "node_id": "UNLE_lADOABII585iPWmwzwAAAAJDA1_7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9714229243",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-03T21:42:49Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-04T02:03:57Z",
      "updated_at": "2023-07-04T02:03:57Z",
      "source": {
        "issue": {
          "id": 1784615646,
          "node_id": "PR_kwDOABII585UcV3X",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28020",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28020/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28020/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28020/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28020",
          "number": 28020,
          "state": "closed",
          "state_reason": null,
          "title": "exclude ipc scheme from port check",
          "body": "Previous PR https://github.com/bitcoin/bitcoin/pull/22087 cause new error, makes it impossible to use ipc protocol using zmq, this patch will exclude port checking on ipc urls.",
          "user": {
            "login": "JayBitron",
            "id": 16558105,
            "node_id": "MDQ6VXNlcjE2NTU4MTA1",
            "avatar_url": "https://avatars.githubusercontent.com/u/16558105?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/JayBitron",
            "html_url": "https://github.com/JayBitron",
            "followers_url": "https://api.github.com/users/JayBitron/followers",
            "following_url": "https://api.github.com/users/JayBitron/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/JayBitron/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/JayBitron/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/JayBitron/subscriptions",
            "organizations_url": "https://api.github.com/users/JayBitron/orgs",
            "repos_url": "https://api.github.com/users/JayBitron/repos",
            "events_url": "https://api.github.com/users/JayBitron/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/JayBitron/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "NONE",
          "locked": false,
          "comments": 3,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28020",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28020",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28020.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28020.patch"
          },
          "closed_at": "2023-07-14T00:45:27Z",
          "created_at": "2023-07-02T12:25:21Z",
          "updated_at": "2023-07-14T00:45:27Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 1516100277,
      "node_id": "PRR_kwDOABII585aXdq1",
      "url": null,
      "actor": null,
      "commit_id": "c3b0f137a9ccd894f2f1d287ccdab26310b3aaf2",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK c3b0f137a9ccd894f2f1d287ccdab26310b3aaf2\r\n\r\nWould be an excellent addition, thank you!",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#pullrequestreview-1516100277",
      "submitted_at": "2023-07-06T09:09:32Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
    },
    {
      "event": "commented",
      "id": 1630664257,
      "node_id": "IC_kwDOABII585hMfZB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1630664257",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-11T11:37:25Z",
      "updated_at": "2023-07-11T11:37:25Z",
      "author_association": "CONTRIBUTOR",
      "body": "It's a tNACK from me currently @ c3b0f137a9 as I can no longer get this functionality to work in practice on Ubuntu 23.04 with Tor 0.4.7.13.\r\n\r\nThe send of the data in `vSocks5Init` seems to be failing, meaning the proxy cannot be used: https://github.com/pinheadmz/bitcoin/blob/c3b0f137a9ccd894f2f1d287ccdab26310b3aaf2/src/netbase.cpp#L372-L375\r\n\r\nI haven't yet totally ruled out issues with Tor, but I do get responses from the unix socket about it not being an HTTP proxy if I try to send an HTTP request over it, so I conclude that the Tor daemon is listening on the socket correctly waiting for SOCKS requests, and the issue may lie with Bitcoin Core.\r\n\r\nWill continue investigating and report back.\r\n\r\n<details>\r\n<summary>bitcoin.conf options set</summary>\r\n\r\n```log\r\n2023-07-11T11:12:35Z Config file: /home/will/.bitcoin/bitcoin.conf\r\n2023-07-11T11:12:35Z Config file arg: [main] addnode=\"xx.xx.xx.xx:8333\"\r\n2023-07-11T11:12:35Z Config file arg: [main] blockfilterindex=\"1\"\r\n2023-07-11T11:12:35Z Config file arg: [main] blocksdir=\"/media/will/crucial1/bitcoin\"\r\n2023-07-11T11:12:35Z Config file arg: [main] daemon=\"1\"\r\n2023-07-11T11:12:35Z Config file arg: [main] debug=\"net\"\r\n2023-07-11T11:12:35Z Config file arg: [main] debug=\"proxy\"\r\n2023-07-11T11:12:35Z Config file arg: [main] debug=\"tor\"\r\n2023-07-11T11:12:35Z Config file arg: [main] discover=\"1\"\r\n2023-07-11T11:12:35Z Config file arg: [main] externalip=\"xx.xx.xx.xx\"\r\n2023-07-11T11:12:35Z Config file arg: [main] i2pacceptincoming=\"1\"\r\n2023-07-11T11:12:35Z Config file arg: [main] i2psam=\"127.0.0.1:7656\"\r\n2023-07-11T11:12:35Z Config file arg: [main] listen=\"1\"\r\n2023-07-11T11:12:35Z Config file arg: [main] listenonion=\"1\"\r\n2023-07-11T11:12:35Z Config file arg: [main] maxconnections=\"125\"\r\n2023-07-11T11:12:35Z Config file arg: [main] mempoolfullrbf=\"1\"\r\n2023-07-11T11:12:35Z Config file arg: [main] onion=\"unix:/run/tor/socks\"\r\n2023-07-11T11:12:35Z Config file arg: [main] onlynet=\"onion\"\r\n2023-07-11T11:12:35Z Config file arg: [main] port=\"8833\"\r\n2023-07-11T11:12:35Z Config file arg: [main] rpcauth=****\r\n2023-07-11T11:12:35Z Config file arg: [main] rpcthreads=\"16\"\r\n2023-07-11T11:12:35Z Config file arg: [main] rpcworkqueue=\"64\"\r\n2023-07-11T11:12:35Z Config file arg: [main] server=\"1\"\r\n2023-07-11T11:12:35Z Config file arg: [main] txindex=\"1\"\r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n<summary>torrc</summary>\r\n\r\n```\r\nSocksPort unix:/run/tor/socks WorldWritable\r\nControlPort 9051\r\nCookieAuthentication 1\r\nCookieAuthFileGroupReadable 1\r\nDataDirectoryGroupReadable 1\r\n```\r\n\r\n</details>",
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#issuecomment-1630664257",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27375"
    },
    {
      "event": "referenced",
      "id": 9799587439,
      "node_id": "REFE_lADOABII585iPWmwzwAAAAJIGdZv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9799587439",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "af4eb52ff611342dbd285f218474649f16badbaf",
      "commit_url": "https://api.github.com/repos/vasild/bitcoin/commits/af4eb52ff611342dbd285f218474649f16badbaf",
      "created_at": "2023-07-12T13:33:44Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9803851105,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAJIWuVh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9803851105",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-12T20:44:45Z"
    },
    {
      "event": "commented",
      "id": 1633198398,
      "node_id": "IC_kwDOABII585hWKE-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1633198398",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-12T20:51:10Z",
      "updated_at": "2023-07-12T20:51:10Z",
      "author_association": "MEMBER",
      "body": "@willcl-ark wow thank you so much for catching that. After all the refactoring, we had forgotten to actually *connect to the unix socket!* I added a functional test to ensure that the proxy works now and I have also tested in production with Tor locally.\r\n\r\nThis required a fairly intense refactor that included inserting 2 new commits and rebasing several others:\r\n\r\n`git range-diff 32a5a20225 c3b0f137a9 b1199bce0f`\r\n\r\n",
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#issuecomment-1633198398",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27375"
    },
    {
      "event": "mentioned",
      "id": 9803898441,
      "node_id": "MEE_lADOABII585iPWmwzwAAAAJIW55J",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9803898441",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-12T20:51:11Z"
    },
    {
      "event": "subscribed",
      "id": 9803898461,
      "node_id": "SE_lADOABII585iPWmwzwAAAAJIW55d",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9803898461",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-12T20:51:11Z"
    },
    {
      "event": "commented",
      "id": 1633199594,
      "node_id": "IC_kwDOABII585hWKXq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1633199594",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-12T20:52:15Z",
      "updated_at": "2023-07-12T20:52:15Z",
      "author_association": "MEMBER",
      "body": "@vasild Thanks for your work on this :-) I reorganized the extra commit you sent me. For now, still going without `variant` for `Proxy` just to keep the refator more simple, so leaving the i2p stuff mostly alone as well.",
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#issuecomment-1633199594",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27375"
    },
    {
      "event": "mentioned",
      "id": 9803906315,
      "node_id": "MEE_lADOABII585iPWmwzwAAAAJIW70L",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9803906315",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-12T20:52:15Z"
    },
    {
      "event": "subscribed",
      "id": 9803906321,
      "node_id": "SE_lADOABII585iPWmwzwAAAAJIW70R",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9803906321",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-12T20:52:15Z"
    },
    {
      "event": "labeled",
      "id": 9804467374,
      "node_id": "LE_lADOABII585iPWmwzwAAAAJIZEyu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9804467374",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-12T22:15:55Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-13T06:28:44Z",
      "updated_at": "2023-07-13T06:28:44Z",
      "source": {
        "issue": {
          "id": 1408975299,
          "node_id": "PR_kwDOABII585AzCJJ",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26312",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26312/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26312/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26312/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/26312",
          "number": 26312,
          "state": "closed",
          "state_reason": null,
          "title": "Remove Sock::Get() and Sock::Sock()",
          "body": "_This is a piece of #21878, chopped off to ease review._\r\n\r\nPeeking at the underlying socket file descriptor of `Sock` and checkig if it is `INVALID_SOCKET` is bad encapsulation and stands in the way of testing/mocking/fuzzing.\r\n\r\nInstead use an empty `unique_ptr` to denote that there is no valid socket where appropriate or outright remove such checks where they are not necessary.\r\n\r\nThe default constructor `Sock::Sock()` is unnecessary now after recent changes, thus remove it.",
          "user": {
            "login": "vasild",
            "id": 266751,
            "node_id": "MDQ6VXNlcjI2Njc1MQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/vasild",
            "html_url": "https://github.com/vasild",
            "followers_url": "https://api.github.com/users/vasild/followers",
            "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
            "organizations_url": "https://api.github.com/users/vasild/orgs",
            "repos_url": "https://api.github.com/users/vasild/repos",
            "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/vasild/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 30,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26312",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/26312",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/26312.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/26312.patch"
          },
          "closed_at": "2023-10-03T13:58:01Z",
          "created_at": "2022-10-14T08:28:59Z",
          "updated_at": "2023-10-04T11:42:11Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 1527850665,
      "node_id": "PRR_kwDOABII585bESap",
      "url": null,
      "actor": null,
      "commit_id": "b1199bce0fda452a8d24c1753ffdea3c327701ff",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#pullrequestreview-1527850665",
      "submitted_at": "2023-07-13T12:27:17Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9815194674,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAJJB_wy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9815194674",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-13T20:10:32Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9824297414,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAJJkuHG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9824297414",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-14T18:03:51Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9831205351,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAJJ_Enn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9831205351",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-16T14:11:30Z"
    },
    {
      "event": "unlabeled",
      "id": 9831362458,
      "node_id": "UNLE_lADOABII585iPWmwzwAAAAJJ_q-a",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9831362458",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-16T15:54:55Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 1637129953,
      "node_id": "IC_kwDOABII585hlJ7h",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1637129953",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-16T16:13:11Z",
      "updated_at": "2023-07-16T16:13:11Z",
      "author_association": "MEMBER",
      "body": "@vasild OK I got this branch passing all CI. âœ…  I ran tests locally on Ubuntu and MacOS and also tested the feature in production on both platforms with `tor --SocksPort unix:/...` Everything is working! yay.\r\n\r\nThe real fix was here actually (diff below) Embarrassingly simple. This was a bug on Linux but NOT on macOS.\r\n\r\nI did not need the `SendComplete` changes or `Socks5` changes which is great because that keeps review simple and the branch focused. I will be happy to review those changes if you want to open a new PR for them (or I can open it if you like)\r\n\r\nThe only other new change to the branch besides this is adding a release note and explanation in help text for `-onion` and `-proxy`\r\n\r\n```diff\r\ndiff --git a/src/netbase.cpp b/src/netbase.cpp\r\nindex a49f882130..044b0ba6c3 100644\r\n--- a/src/netbase.cpp\r\n+++ b/src/netbase.cpp\r\n@@ -638,7 +638,7 @@ std::unique_ptr<Sock> Proxy::Connect() const\r\n     addrun.sun_family = AF_UNIX;\r\n     // leave the last char in addrun.sun_path[] to be always '\\0'\r\n     memcpy(addrun.sun_path, path.c_str(), std::min(sizeof(addrun.sun_path) - 1, path.length()));\r\n-    socklen_t len = strlen(addrun.sun_path) + sizeof(addrun);\r\n+    socklen_t len = sizeof(addrun);\r\n \r\n     if(!ConnectToSocket(*sock, (struct sockaddr*)&addrun, len, path, /*manual_connection=*/true)) {\r\n         LogPrintf(\"Cannot connect to socket for %s\\n\", path);\r\n```",
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#issuecomment-1637129953",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27375"
    },
    {
      "event": "mentioned",
      "id": 9831393425,
      "node_id": "MEE_lADOABII585iPWmwzwAAAAJJ_yiR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9831393425",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-16T16:13:12Z"
    },
    {
      "event": "subscribed",
      "id": 9831393429,
      "node_id": "SE_lADOABII585iPWmwzwAAAAJJ_yiV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9831393429",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-16T16:13:12Z"
    },
    {
      "event": "reviewed",
      "id": 1537217507,
      "node_id": "PRR_kwDOABII585boBPj",
      "url": null,
      "actor": null,
      "commit_id": "f74da5eba9192e219567ab753c92b6cd2e66f73b",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#pullrequestreview-1537217507",
      "submitted_at": "2023-07-19T14:19:43Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9864732331,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAJL-96r",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9864732331",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-19T16:32:29Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-08T16:45:29Z",
      "updated_at": "2023-08-08T16:45:29Z",
      "source": {
        "issue": {
          "id": 1588322692,
          "node_id": "PR_kwDOABII585KKgel",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27114",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27114/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27114/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27114/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/27114",
          "number": 27114,
          "state": "open",
          "state_reason": null,
          "title": "p2p: Allow whitelisting manual connections",
          "body": "Revives #17167. It allows whitelisting manual connections. Fixes #9923\r\n\r\nSince there are some PRs/issues around this topic, I'll list some motivations/comments for whitelisting outbound connections from them:\r\n- Speed-up tx relay/mempool sync for testing purposes (my personal motivation for this) - In #26970, @theStack pointed out that we whitelist peers to speed up tx relay for fast mempool synchronization, however, since it applies only for inbound connections and considering the topology `node0 <--- node1 <---- node2 <--- ... <-- nodeN`,  if a tx is submitted from any node other than node0, the mempool synchronization can take quite long.\r\n- https://github.com/bitcoin/bitcoin/pull/29058#issuecomment-1865155764 - \"Before enabling -v2transport by default (which I'd image may happen after https://github.com/bitcoin/bitcoin/pull/24748) we could consider a way to force manual connections to be only-v1 or even only-v2 (disabling reconnect-with-v1). A possibility could be through a net permission flag, if https://github.com/bitcoin/bitcoin/pull/27114 makes it in.\"\r\n- https://github.com/bitcoin/bitcoin/pull/17167#issuecomment-1168606032 - \"This would allow us to use https://github.com/bitcoin/bitcoin/pull/25355 when making outgoing connections to all nodes, except to whitelisted ones for which we would use our persistent I2P address.\"\r\n- Force-relay/mempool permissions for a node you intentionally connected to.\r\n",
          "user": {
            "login": "brunoerg",
            "id": 19480819,
            "node_id": "MDQ6VXNlcjE5NDgwODE5",
            "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/brunoerg",
            "html_url": "https://github.com/brunoerg",
            "followers_url": "https://api.github.com/users/brunoerg/followers",
            "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
            "organizations_url": "https://api.github.com/users/brunoerg/orgs",
            "repos_url": "https://api.github.com/users/brunoerg/repos",
            "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/brunoerg/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 47,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27114",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/27114",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/27114.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/27114.patch"
          },
          "created_at": "2023-02-16T20:31:10Z",
          "updated_at": "2024-03-01T12:56:39Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-17T18:55:27Z",
      "updated_at": "2023-08-17T18:55:27Z",
      "source": {
        "issue": {
          "id": 879275352,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NjMzMDA2NDM4",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21878",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21878/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21878/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21878/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/21878",
          "number": 21878,
          "state": "closed",
          "state_reason": null,
          "title": "Make all networking code mockable",
          "body": "_This is a roadmap PR. It can be merged, but it can also be split into separate PRs and to get proper thorough review it is split._\r\n\r\nAdd wrapper methods to the syscalls `accept()`, `setsockopt()`, `getsockname()`, `bind()`, `listen()`  in the [`Sock`](https://github.com/bitcoin/bitcoin/blob/eb9a1fe03779bf05062b70f14190cb23ff42b46f/src/util/sock.h#L25) class (e.g. `Sock::Accept()`). Those methods can be overriden (mocked) by unit tests ([existent example in `master`](https://github.com/bitcoin/bitcoin/blob/eb9a1fe03779bf05062b70f14190cb23ff42b46f/src/test/util/net.h#L75)) and by fuzz tests ([existent example in `master`](https://github.com/bitcoin/bitcoin/blob/eb9a1fe03779bf05062b70f14190cb23ff42b46f/src/test/fuzz/util.h#L561)).\r\n\r\nChange everybody to use [`Sock`](https://github.com/bitcoin/bitcoin/blob/eb9a1fe03779bf05062b70f14190cb23ff42b46f/src/util/sock.h#L25) instead of [`SOCKET`](https://github.com/bitcoin/bitcoin/blob/eb9a1fe03779bf05062b70f14190cb23ff42b46f/src/compat.h#L41).\r\n\r\nMove the functionality of [`CConnman::SocketEvents()`](https://github.com/bitcoin/bitcoin/blob/eb9a1fe03779bf05062b70f14190cb23ff42b46f/src/net.cpp#L1334) to a mockable method of the [`Sock`](https://github.com/bitcoin/bitcoin/blob/eb9a1fe03779bf05062b70f14190cb23ff42b46f/src/util/sock.h#L25) class.\r\n\r\n### Already merged pieces of this PR\r\n* [x] https://github.com/bitcoin/bitcoin/pull/21943\r\n* [x] https://github.com/bitcoin/bitcoin/pull/23601\r\n* [x] https://github.com/bitcoin/bitcoin/pull/21879\r\n* [x] https://github.com/bitcoin/bitcoin/pull/23604\r\n* [x] https://github.com/bitcoin/bitcoin/pull/24357\r\n* [x] https://github.com/bitcoin/bitcoin/pull/24356\r\n* [x] https://github.com/bitcoin/bitcoin/pull/25428\r\n* [x] https://github.com/bitcoin/bitcoin/pull/25426\r\n* [x] https://github.com/bitcoin/bitcoin/pull/24378\r\n* [x] https://github.com/bitcoin/bitcoin/pull/25421\r\n* [x] https://github.com/bitcoin/bitcoin/pull/26312\r\n\r\n### Current pieces of this for review\r\n\r\n* [ ] https://github.com/bitcoin/bitcoin/pull/28584",
          "user": {
            "login": "vasild",
            "id": 266751,
            "node_id": "MDQ6VXNlcjI2Njc1MQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/vasild",
            "html_url": "https://github.com/vasild",
            "followers_url": "https://api.github.com/users/vasild/followers",
            "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
            "organizations_url": "https://api.github.com/users/vasild/orgs",
            "repos_url": "https://api.github.com/users/vasild/repos",
            "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/vasild/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            },
            {
              "id": 241832923,
              "node_id": "MDU6TGFiZWwyNDE4MzI5MjM=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Utils/log/libs",
              "name": "Utils/log/libs",
              "description": "",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 53,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21878",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/21878",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/21878.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/21878.patch"
          },
          "closed_at": "2023-10-04T11:34:17Z",
          "created_at": "2021-05-07T16:04:35Z",
          "updated_at": "2023-10-04T11:35:04Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "review_requested",
      "id": 10425828665,
      "node_id": "RRE_lADOABII585iPWmwzwAAAAJtbYU5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10425828665",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-20T17:09:39Z",
      "requested_reviewer": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "review_requested",
      "id": 10425829010,
      "node_id": "RRE_lADOABII585iPWmwzwAAAAJtbYaS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10425829010",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-20T17:09:41Z",
      "requested_reviewer": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "labeled",
      "id": 10539654185,
      "node_id": "LE_lADOABII585iPWmwzwAAAAJ0Nlwp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10539654185",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-03T14:56:16Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-13T14:35:51Z",
      "updated_at": "2023-10-13T14:35:51Z",
      "source": {
        "issue": {
          "id": 1942083878,
          "node_id": "PR_kwDOABII585cvxgi",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28649",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28649/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28649/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28649/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28649",
          "number": 28649,
          "state": "closed",
          "state_reason": null,
          "title": "Do the SOCKS5 handshake reliably",
          "body": "The `Socks5()` function which does the SOCKS5 handshake with the SOCKS5 proxy sends bytes to the socket without retrying partial writes.\r\n\r\n`send(2)` may write only part of the provided data and return. In this case the caller is responsible for retrying the operation with the remaining data. Change `Socks5()` to do that. There is already a method `Sock::SendComplete()` which does exactly that, so use it in `Socks5()`.\r\n\r\nA minor complication for this PR is that `Sock::SendComplete()` takes `std::string` argument whereas `Socks5()` has `std::vector<uint8_t>`. Thus the necessity for the first commit. It is possible to do also in other ways - convert the data in `Socks5()` to `std::string` or have just one `Sock::SendComplete()` that takes `void*` and change the callers to pass `str.data(), str.size()` or `vec.data(), vec.size()`.\r\n\r\nThis came up while testing https://github.com/bitcoin/bitcoin/pull/27375.",
          "user": {
            "login": "vasild",
            "id": 266751,
            "node_id": "MDQ6VXNlcjI2Njc1MQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/vasild",
            "html_url": "https://github.com/vasild",
            "followers_url": "https://api.github.com/users/vasild/followers",
            "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
            "organizations_url": "https://api.github.com/users/vasild/orgs",
            "repos_url": "https://api.github.com/users/vasild/repos",
            "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/vasild/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 6,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28649",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28649",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28649.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28649.patch"
          },
          "closed_at": "2023-11-07T19:12:50Z",
          "created_at": "2023-10-13T14:35:50Z",
          "updated_at": "2023-11-07T19:12:50Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 1676409183,
      "node_id": "PRR_kwDOABII585j6_lf",
      "url": null,
      "actor": null,
      "commit_id": "d8f993b77d2f0bad0e7a5659885ffbbd9f75dbec",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK d8f993b77d2f0bad0e7a5659885ffbbd9f75dbec (needs rebase)\r\n\r\nI tested this and it works. Got one unexpected failure to connect (it stalled for more than a minute after the first 4 lines):\r\n\r\n```\r\n2023-10-13T13:36:50Z [net:debug] trying connection <strip>.onion:8333 lastseen=0.0hrs\r\n2023-10-13T13:36:50Z [proxy:debug] Using proxy: unix:/var/run/tor/socks to connect to <strip>.onion:8333\r\n2023-10-13T13:36:50Z [net] SOCKS5 connecting <strip>.onion\r\n2023-10-13T13:36:50Z [proxy] SOCKS5 sending proxy authentication 0:0\r\n2023-10-13T13:38:11Z [net:debug] trying connection <strip>.onion:8333 lastseen=0.0hrs\r\n2023-10-13T13:38:11Z [proxy:debug] Using proxy: unix:/var/run/tor/socks to connect to <strip>.onion:8333\r\n2023-10-13T13:38:11Z [net] SOCKS5 connecting <strip>.onion\r\n2023-10-13T13:38:11Z [proxy] SOCKS5 sending proxy authentication 1:1\r\n2023-10-13T13:38:11Z [net] SOCKS5 connected <strip>.onion\r\n2023-10-13T13:38:11Z [net] Added connection to <strip>.onion:8333 peer=0\r\n2023-10-13T13:38:11Z [net] sending version (103 bytes) peer=0\r\n```\r\nIt could be some intermediate problem from the Tor network. The address it managed to connect later is the same.\r\n\r\nI have submitted the [discussed](https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1263941686) `Sock5()` improvement here: https://github.com/bitcoin/bitcoin/pull/28649",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#pullrequestreview-1676409183",
      "submitted_at": "2023-10-13T14:44:37Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10666284663,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAJ7wpZ3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10666284663",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-16T14:29:47Z"
    },
    {
      "event": "commented",
      "id": 1764620194,
      "node_id": "IC_kwDOABII585pLfei",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1764620194",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-16T14:36:06Z",
      "updated_at": "2023-10-16T14:36:06Z",
      "author_association": "MEMBER",
      "body": "@vasild thanks again for your review! Nits addressed and rebased on master. I will help you review https://github.com/bitcoin/bitcoin/pull/28649",
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#issuecomment-1764620194",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27375"
    },
    {
      "event": "mentioned",
      "id": 10666369341,
      "node_id": "MEE_lADOABII585iPWmwzwAAAAJ7w-E9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10666369341",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-16T14:36:06Z"
    },
    {
      "event": "subscribed",
      "id": 10666369416,
      "node_id": "SE_lADOABII585iPWmwzwAAAAJ7w-GI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10666369416",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-16T14:36:07Z"
    },
    {
      "event": "unlabeled",
      "id": 10667806608,
      "node_id": "UNLE_lADOABII585iPWmwzwAAAAJ72c-Q",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10667806608",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-16T16:18:02Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 1681696428,
      "node_id": "PRR_kwDOABII585kPKas",
      "url": null,
      "actor": null,
      "commit_id": "e60df927bffa844d08fa908128b10303b352cfc5",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK e60df927bffa844d08fa908128b10303b352cfc5",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#pullrequestreview-1681696428",
      "submitted_at": "2023-10-17T08:26:08Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
    },
    {
      "event": "reviewed",
      "id": 1681893468,
      "node_id": "PRR_kwDOABII585kP6hc",
      "url": null,
      "actor": null,
      "commit_id": "e60df927bffa844d08fa908128b10303b352cfc5",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK e60df927bffa844d08fa908128b10303b352cfc5\r\n\r\nReviewed the changes since last time, and tested both options again pretty thoroughly. Left a few nits which don't need to be addressed unless re-touching.\r\n\r\nI wonder if we should update `doc/tor.md` in a followup? We currently describe options needed for `ControlPort` in `torrc`, and could add the directive for unix sockets (and explain permissions needed to access the socket, or include the `WorldWritable` arg):\r\n\r\n```\r\nSocksPort /run/tor/socks\r\n# or\r\nSocksPort /run/tor/socks WorldWritable\r\n```\r\n\r\n...along with benefits/differences of using unix sockets for onion/proxy too? (easier access control to socket via filesystem vs network namespace, marginal speed gain,  etc.) Other reasons discussed in https://riseup.net/en/security/network-security/tor/onionservices-best-practices#protecting-your-services",
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#pullrequestreview-1681893468",
      "submitted_at": "2023-10-17T11:02:33Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
    },
    {
      "event": "reviewed",
      "id": 1687899757,
      "node_id": "PRR_kwDOABII585km05t",
      "url": null,
      "actor": null,
      "commit_id": "e60df927bffa844d08fa908128b10303b352cfc5",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#pullrequestreview-1687899757",
      "submitted_at": "2023-10-19T14:27:37Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10715113271,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAJ-q6c3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10715113271",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-19T17:31:30Z"
    },
    {
      "event": "labeled",
      "id": 10715659736,
      "node_id": "LE_lADOABII585iPWmwzwAAAAJ-s_3Y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10715659736",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-19T18:31:48Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 1692266405,
      "node_id": "PRR_kwDOABII585k3e-l",
      "url": null,
      "actor": null,
      "commit_id": "b46e24ccc19d8a7dc40d0b5e993f245ede3c7086",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK b46e24ccc19d8a7dc40d0b5e993f245ede3c7086 (needs rebase)",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#pullrequestreview-1692266405",
      "submitted_at": "2023-10-23T11:05:40Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
    },
    {
      "event": "review_requested",
      "id": 10739224975,
      "node_id": "RRE_lADOABII585iPWmwzwAAAAKAG5GP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10739224975",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-23T11:05:44Z",
      "requested_reviewer": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10757375435,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAKBMIXL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10757375435",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-24T17:45:28Z"
    },
    {
      "event": "commented",
      "id": 1777728411,
      "node_id": "IC_kwDOABII585p9fub",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1777728411",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-24T17:46:15Z",
      "updated_at": "2023-10-24T17:46:15Z",
      "author_association": "MEMBER",
      "body": "Thanks again @vasild rebased on master - I see some new I2P tests in there now! Had to update those with the changes to `CreateSock()`",
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#issuecomment-1777728411",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27375"
    },
    {
      "event": "mentioned",
      "id": 10757383462,
      "node_id": "MEE_lADOABII585iPWmwzwAAAAKBMKUm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10757383462",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-24T17:46:15Z"
    },
    {
      "event": "subscribed",
      "id": 10757383478,
      "node_id": "SE_lADOABII585iPWmwzwAAAAKBMKU2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10757383478",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-24T17:46:15Z"
    },
    {
      "event": "unlabeled",
      "id": 10757842739,
      "node_id": "UNLE_lADOABII585iPWmwzwAAAAKBN6cz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10757842739",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-24T18:27:21Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10757880677,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAKBODtl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10757880677",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-24T18:30:34Z"
    },
    {
      "event": "labeled",
      "id": 10760587042,
      "node_id": "LE_lADOABII585iPWmwzwAAAAKBYYci",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10760587042",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-25T00:19:20Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 10771831095,
      "node_id": "UNLE_lADOABII585iPWmwzwAAAAKCDRk3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10771831095",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-25T20:03:05Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 1704420553,
      "node_id": "PRR_kwDOABII585ll2TJ",
      "url": null,
      "actor": null,
      "commit_id": "b6da3897f36547139b83abde486bddbf50dab54e",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK b6da3897f36547139b83abde486bddbf50dab54e",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#pullrequestreview-1704420553",
      "submitted_at": "2023-10-30T15:16:56Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
    },
    {
      "event": "labeled",
      "id": 10848250536,
      "node_id": "LE_lADOABII585iPWmwzwAAAAKGmyqo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10848250536",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-02T19:14:46Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-03T02:47:47Z",
      "updated_at": "2023-11-03T02:47:47Z",
      "source": {
        "issue": {
          "id": 1975073736,
          "node_id": "PR_kwDOABII585eeipm",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28780",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28780/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28780/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28780/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28780",
          "number": 28780,
          "state": "closed",
          "state_reason": null,
          "title": "log: torcontrol opt checks",
          "body": "Aims to fix #23589. \r\nHost and port validation on torcontrol, same logic is being used on the other flags which need this validation as well.\r\n\r\nThis is my first PR for bitcoin core and came across this good first issue, continued on already existing code for this issue.\r\n\r\nTook some inspiration from [this comment](https://github.com/bitcoin/bitcoin/pull/25136#pullrequestreview-1152866901)\r\n",
          "user": {
            "login": "bufo24",
            "id": 32884105,
            "node_id": "MDQ6VXNlcjMyODg0MTA1",
            "avatar_url": "https://avatars.githubusercontent.com/u/32884105?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/bufo24",
            "html_url": "https://github.com/bufo24",
            "followers_url": "https://api.github.com/users/bufo24/followers",
            "following_url": "https://api.github.com/users/bufo24/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/bufo24/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/bufo24/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/bufo24/subscriptions",
            "organizations_url": "https://api.github.com/users/bufo24/orgs",
            "repos_url": "https://api.github.com/users/bufo24/repos",
            "events_url": "https://api.github.com/users/bufo24/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/bufo24/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 241832923,
              "node_id": "MDU6TGFiZWwyNDE4MzI5MjM=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Utils/log/libs",
              "name": "Utils/log/libs",
              "description": "",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 4,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28780",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28780",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28780.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28780.patch"
          },
          "closed_at": "2023-11-14T09:47:00Z",
          "created_at": "2023-11-02T21:35:39Z",
          "updated_at": "2023-11-14T09:47:00Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1793371393,
      "node_id": "IC_kwDOABII585q5K0B",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1793371393",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-04T07:35:17Z",
      "updated_at": "2023-11-04T07:35:17Z",
      "author_association": "MEMBER",
      "body": "```\r\ntest/i2p_tests.cpp:162:79: error: no matching function for call to â€˜i2p::sam::Session::Session(const fs::path&, CService, CThreadInterrupt*)â€™",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#issuecomment-1793371393",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27375"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDc5NTcyYTNkNWZkOTg0MWFhMGZhN2Q4ODA4ODYxMTU4NzM0MDE5OGU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/79572a3d5fd9841aa0fa7d88088611587340198e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/79572a3d5fd9841aa0fa7d88088611587340198e",
      "tree": {
        "sha": "cd157d6900677c4f9436aee4d615d055a6fe4236",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/cd157d6900677c4f9436aee4d615d055a6fe4236"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree cd157d6900677c4f9436aee4d615d055a6fe4236\nparent d9007f51a7480246abe4c16f2e3d190988470bec\nauthor Matthew Zipkin <pinheadmz@gmail.com> 1681407068 -0400\ncommitter Matthew Zipkin <pinheadmz@gmail.com> 1699190531 -0500\n\nconfigure: test for unix domain sockets\n\nCopied from https://github.com/bitcoin/bitcoin/pull/9979\n\nCo-authored-by: laanwj <126646+laanwj@users.noreply.github.com>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE5hdzzW4BBA4vG9eM5+KYS2KJyToFAmVHlwMACgkQ5+KYS2KJ\nyTqenA/+Jqptw5OGrafitIwyvhrub2fpI9NZb/w5v765v6h0Ld0AkKfLSk12EPFP\noVTZdWwcMLHDYx7J66VFYKZCbtHI7uEME/a7CCfIQRINUa7/p0FEP4t6ndBXi1Jg\nkgYr1HydEUb4BcOhjrLDBE/7C+UdqIPSdUHH3N4WwW1NDK1x7FjhgFDmX03uWctc\n7O272eDGb83skPhhlT/6Htz9/czNK9WB/cAX9XnHu0Y/V3qTmFKuGnwZ2uZdIpE5\nzKuRmuCRv3YjGUa9QIahMrxExqfthpgQuf7gNn5F0Bl0Cq729QYmKsn6HzglIVgw\n1OA8d8eTQZmN/+mSffBhT2OwOd334PAt9aph8qPteFOwEhJEjGj2IL68DuSii/7F\ncaBJak7/mgcWylQbbaDozdM+Cb+f6T2UDHubHsE2sVAQpf/dEOUJUJqdarDLhJGM\nzrdhiZJB4nXjVh5cjeB9ENAZvng88y24oup7g7KevvJSzYz2gKSJO5AUU2BEbpZp\nVFQ/XXFAk4KO5n3t0v/PfbEc1B8Dkm0Mln7dpRy5vMCoTTWC0Qg/E83ayfhVW9/m\n0xl2ImXOtctSnIUGNg2QnzsJD+qLY1VQ+PaBgdbbAmE7uXinegj6jHkfnQEXZBfn\nMnoNAJ90YdBhm6+N8BJM6HzymIZrV1bLibl6KwyQcXrUe+qWFrI=\n=Ah7Y\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d9007f51a7480246abe4c16f2e3d190988470bec",
          "sha": "d9007f51a7480246abe4c16f2e3d190988470bec",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d9007f51a7480246abe4c16f2e3d190988470bec"
        }
      ],
      "message": "configure: test for unix domain sockets\n\nCopied from https://github.com/bitcoin/bitcoin/pull/9979\n\nCo-authored-by: laanwj <126646+laanwj@users.noreply.github.com>",
      "committer": {
        "name": "Matthew Zipkin",
        "email": "pinheadmz@gmail.com",
        "date": "2023-11-05T13:22:11Z"
      },
      "author": {
        "name": "Matthew Zipkin",
        "email": "pinheadmz@gmail.com",
        "date": "2023-04-13T17:31:08Z"
      },
      "sha": "79572a3d5fd9841aa0fa7d88088611587340198e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDRjYTliMzIyZjAwZGI1NmEzOTAzMDFmMDhkM2RlOGExM2ZmNjY2OTQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4ca9b322f00db56a390301f08d3de8a13ff66694",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4ca9b322f00db56a390301f08d3de8a13ff66694",
      "tree": {
        "sha": "a95b45320a96147389d40fc177d4571bb3bc2665",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a95b45320a96147389d40fc177d4571bb3bc2665"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree a95b45320a96147389d40fc177d4571bb3bc2665\nparent 79572a3d5fd9841aa0fa7d88088611587340198e\nauthor Matthew Zipkin <pinheadmz@gmail.com> 1685118403 -0400\ncommitter Matthew Zipkin <pinheadmz@gmail.com> 1699211975 -0500\n\nnetbase: refactor CreateSock() to accept sa_family_t\n\nAlso implement CService::GetSAFamily() to provide sa_family_t\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE5hdzzW4BBA4vG9eM5+KYS2KJyToFAmVH6ssACgkQ5+KYS2KJ\nyToqiQ//et7HYQmWmBr1GzwbSQIWrw2pBTOpTgNH8pGojNYlTXs4jhCftC5Yve52\ndDfZnqf0hzxuti7dWvwZzstF95dPDF9+AzXMbEWQDJ5PnGHSqUL5ySpcm4U0suDw\nel0jpgo05V0PJNkmBWjou3YfSh6U1rt7ocMoZHIvGDYdbS/uK0Sdz0WE1gQWL6Bq\nP8138x0Vr0vfKWWCwaKeYamQzuuuDehiMUUTL0YLrVCsGTiajdXclBcPRWSzuNe8\nR+Ja7sUpq5e4ffiDKunCAhtNkus2l8HaGd7zLkwDyuc44IfifR9th9ynTOdnuphd\n9ExHW7HlifbGY/pnoto2tm7RDm6xdz/3BvSoOC/ywD4lYT1A6ZWFsysM4be/e6Ac\nc0ZDeiZuhkmz4ccueAkoz1RJsq/zZF/Np5WAm7Gzop59CMaNs6tbQWnbmHaqF4B3\nu6Gy5mQbPhvkqFG/yQzN//Ze7oUvnI2a0fm8quZYrTgPe2UR9gwOlf0JOYl9btqo\nfVWj3ZEJdSOngbOM22QhKdIJjRDWDrvAsuE7H0DgNFhIT2bJCpgPevx+Puw2hsuc\n/mOWfGwp8u4nsKBQkonEou3onmSPc9p1g3wq97i7mbiUTiyF6WB/kTB+nFOyFlAY\ntBLZlsLStdFrtSnG+LcfYWttZOMCEdTWu+Or8x+H/p8noNbJDmo=\n=a36r\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/79572a3d5fd9841aa0fa7d88088611587340198e",
          "sha": "79572a3d5fd9841aa0fa7d88088611587340198e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/79572a3d5fd9841aa0fa7d88088611587340198e"
        }
      ],
      "message": "netbase: refactor CreateSock() to accept sa_family_t\n\nAlso implement CService::GetSAFamily() to provide sa_family_t",
      "committer": {
        "name": "Matthew Zipkin",
        "email": "pinheadmz@gmail.com",
        "date": "2023-11-05T19:19:35Z"
      },
      "author": {
        "name": "Matthew Zipkin",
        "email": "pinheadmz@gmail.com",
        "date": "2023-05-26T16:26:43Z"
      },
      "sha": "4ca9b322f00db56a390301f08d3de8a13ff66694"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQ1MTNhYzdiZjYxNTIzOTA1Mzc2MmE0ZjlkNjRkYjlmNGM3MGQxMmE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d513ac7bf615239053762a4f9d64db9f4c70d12a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d513ac7bf615239053762a4f9d64db9f4c70d12a",
      "tree": {
        "sha": "9a8ffe05a2fedc6c12c0ad3d96361e510beca8af",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9a8ffe05a2fedc6c12c0ad3d96361e510beca8af"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 9a8ffe05a2fedc6c12c0ad3d96361e510beca8af\nparent 4ca9b322f00db56a390301f08d3de8a13ff66694\nauthor Matthew Zipkin <pinheadmz@gmail.com> 1685124328 -0400\ncommitter Matthew Zipkin <pinheadmz@gmail.com> 1699211979 -0500\n\nnetbase: allow CreateSock() to create UNIX sockets if supported\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE5hdzzW4BBA4vG9eM5+KYS2KJyToFAmVH6ssACgkQ5+KYS2KJ\nyTop9BAA3Gzyhio11T70mGPI0RfYhtpb6W2bW7VWbgEyxcmlFHthO4reciQXnjsP\nG7zQMG7oad4L833UwDYtHmMU0btTRATt8ZQqA1ZoEPQC4uI5LVuf9GmaPp8G9tT4\niRmHUAv0y2e4tGhLOoNyCCNTqhljdkPlNavLdPUJT1F9IVoUPp0i6j3UzlBkEmQE\nj4NQ3QGn9CLygG9z1neWEIaCYcbp0kuoZFYg/fwoDCggnqw8JQnZUgb3lAwgCzbe\nKc8VS7BqkLoe7Cm7EZDUCCvwhAZHZf01VPYFtt+99EHSqDvmVEGSqwfU5vqRpPX5\newB4DD9FzGboOsk5LWe5+ZMCPQoxrSifo60OlgOpRYyO7uNTCT+uL9SqP4vTu+bq\nZAolpwOEEhgMJXmwNpnC0xFlaACAyRB6B48RhaDaMToD/MFK2o93CcMNqjUp7G9A\nBsne9r9K0cq/huKqlimNzJg7ocIvq2uu05iU5RQH6DCLdOYGl5G5X04sFxweMGoT\nu1jXk5u8Yapql6m8Z13b6Q23uEGlwe0Bkzu8f6hutB0iaXGoJUoHaqRd3Jph7yyZ\nLx5JnEPNgl2fcUEvlPYfs+FNIbwWoaDpJojuXa4JqNXlsRteJ3dI31FyJT4xIMcz\nQGDVwZFHxgsToMnP6NHi82Th0NElZXNhJ6MLhR/P4BrahNaXO7A=\n=u0HE\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4ca9b322f00db56a390301f08d3de8a13ff66694",
          "sha": "4ca9b322f00db56a390301f08d3de8a13ff66694",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/4ca9b322f00db56a390301f08d3de8a13ff66694"
        }
      ],
      "message": "netbase: allow CreateSock() to create UNIX sockets if supported",
      "committer": {
        "name": "Matthew Zipkin",
        "email": "pinheadmz@gmail.com",
        "date": "2023-11-05T19:19:39Z"
      },
      "author": {
        "name": "Matthew Zipkin",
        "email": "pinheadmz@gmail.com",
        "date": "2023-05-26T18:05:28Z"
      },
      "sha": "d513ac7bf615239053762a4f9d64db9f4c70d12a"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10865671777,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAKHpP5h",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10865671777",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-05T19:35:40Z"
    },
    {
      "event": "commented",
      "id": 1793825982,
      "node_id": "IC_kwDOABII585q65y-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1793825982",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-05T19:36:48Z",
      "updated_at": "2023-11-05T19:36:48Z",
      "author_association": "MEMBER",
      "body": "Rebased on master to fix silent conflict with new I2P tests.\r\n\r\n@maflcko thanks. Can you help me understand why this only broke the previous builds task?",
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#issuecomment-1793825982",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27375"
    },
    {
      "event": "mentioned",
      "id": 10865673586,
      "node_id": "MEE_lADOABII585iPWmwzwAAAAKHpQVy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10865673586",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-05T19:36:49Z"
    },
    {
      "event": "subscribed",
      "id": 10865673591,
      "node_id": "SE_lADOABII585iPWmwzwAAAAKHpQV3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10865673591",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-05T19:36:49Z"
    },
    {
      "event": "unlabeled",
      "id": 10865756023,
      "node_id": "UNLE_lADOABII585iPWmwzwAAAAKHpkd3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10865756023",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-05T20:23:38Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 1794721136,
      "node_id": "IC_kwDOABII585q-UVw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1794721136",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-06T12:33:50Z",
      "updated_at": "2023-11-06T12:33:50Z",
      "author_association": "MEMBER",
      "body": "To preserve CI resources, only one task is re-run to detect silent merge conflicts.",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#issuecomment-1794721136",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27375"
    },
    {
      "event": "reviewed",
      "id": 1716369031,
      "node_id": "PRR_kwDOABII585mTbaH",
      "url": null,
      "actor": null,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "tACK 0c5f8c36c90fab4fb39ce39d1b4c204a2edd25c4\r\n\r\nLeft a few nits which IMO don't need addressing. Tested out new socket type for proxy and onion and found it working as expected.",
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#pullrequestreview-1716369031",
      "submitted_at": "2023-11-07T14:23:38Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
    },
    {
      "event": "review_requested",
      "id": 10887608147,
      "node_id": "RRE_lADOABII585iPWmwzwAAAAKI87dT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10887608147",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-07T14:23:48Z",
      "requested_reviewer": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "referenced",
      "id": 10891173963,
      "node_id": "REFE_lADOABII585iPWmwzwAAAAKJKiBL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10891173963",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "0528cfd3071380e4d8a8877761f3ef9564757f30",
      "commit_url": "https://api.github.com/repos/bitcoin-core/gui/commits/0528cfd3071380e4d8a8877761f3ef9564757f30",
      "created_at": "2023-11-07T19:12:07Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDA4MjZiZTU2ODk5ZmExYWU4MDRmY2U5ODJlZmE5OWUzZTA5OGY4MTM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0826be56899fa1ae804fce982efa99e3e098f813",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/0826be56899fa1ae804fce982efa99e3e098f813",
      "tree": {
        "sha": "b714661e30be1fc8576c17baa840375318130f0c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b714661e30be1fc8576c17baa840375318130f0c"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree b714661e30be1fc8576c17baa840375318130f0c\nparent d513ac7bf615239053762a4f9d64db9f4c70d12a\nauthor Matthew Zipkin <pinheadmz@gmail.com> 1689178732 -0400\ncommitter Matthew Zipkin <pinheadmz@gmail.com> 1699465955 -0500\n\nnet: move CreateSock() calls from ConnectNode() to netbase methods\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE5hdzzW4BBA4vG9eM5+KYS2KJyToFAmVLyuUACgkQ5+KYS2KJ\nyTrQZw/9Fq1PBtLeeErfghOktayKYZUOkjNk5kJQWOkHHG4Mrf8hxmBOH5ibnhjW\nTynA85mdHw8EOolAEobzPPrt5Vk/lhYYCsQP5F9qY09KkCMr1d365GaO50eJeERM\nZlY85BqfGJSxWYa8jcu5o4USxpWa26l0kXY4rcUlY95cvINaLrdc8KxkSjexgspG\n/0X+U8FdEYkGuigUuGJdNSd8RO2Ki5C1NBNVoUXB9lssjsPtZo98FdWNvjvZEpTD\nKupUsLcqLw92+LCwuULjhNGAcVaNXDjWa7ktB9S6lnbapjDr05EktlYwHbFyZEib\nveuAssUs+4HVauq6SWataDWuv6cYF+ZTTRsdk4wbAOcloLPQLYSb0W4+Suwap4TD\nG5aRYqBAHSdGi1A7Nf4nIE0ANKU30/f+4R7P/12wt540uwKsnB3cesTClIvolLUl\nqpPnyw1vjnle5zqIN4PYXFAt1B3xAPrvpPV4B1op7UKADoLOuhjrbneyyCWh+vMx\nCbDajI6RqbcW42vlk6q2HgcuzyLITWZmnAA5TCytSVqARbsG7hG0j6nox6rRm+79\nZOtYwkbMvUufLL3h9zRjJVX1OTYT5tYbtn1MUpnOVeXAbX807LCCrTjKkssN9uuV\nrqO7YEGqSeqADGj8N6k1WOb5mT58aYMm0VWRzC4KvXeUyodP0l0=\n=kxNQ\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d513ac7bf615239053762a4f9d64db9f4c70d12a",
          "sha": "d513ac7bf615239053762a4f9d64db9f4c70d12a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d513ac7bf615239053762a4f9d64db9f4c70d12a"
        }
      ],
      "message": "net: move CreateSock() calls from ConnectNode() to netbase methods",
      "committer": {
        "name": "Matthew Zipkin",
        "email": "pinheadmz@gmail.com",
        "date": "2023-11-08T17:52:35Z"
      },
      "author": {
        "name": "Matthew Zipkin",
        "email": "pinheadmz@gmail.com",
        "date": "2023-07-12T16:18:52Z"
      },
      "sha": "0826be56899fa1ae804fce982efa99e3e098f813"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDhkMDY0NDZmYzdhMTdiNTkzNDY2ZmNjZDBmNjM4ZWIyNTI3YTQ5M2I",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8d06446fc7a17b593466fccd0f638eb2527a493b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8d06446fc7a17b593466fccd0f638eb2527a493b",
      "tree": {
        "sha": "6bb7577cd38bf61f45904256dcfe4c7f88dbd29b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6bb7577cd38bf61f45904256dcfe4c7f88dbd29b"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 6bb7577cd38bf61f45904256dcfe4c7f88dbd29b\nparent 0826be56899fa1ae804fce982efa99e3e098f813\nauthor Matthew Zipkin <pinheadmz@gmail.com> 1685125303 -0400\ncommitter Matthew Zipkin <pinheadmz@gmail.com> 1699466059 -0500\n\nnetbase: extend Proxy class to wrap UNIX socket as well as TCP\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE5hdzzW4BBA4vG9eM5+KYS2KJyToFAmVLy00ACgkQ5+KYS2KJ\nyTo6iA/9FBI2jH0npLoK+4c5XHZWghgacG9Pq2wgPARcQUWD6e+LT6lEV/2aava5\n414HST04Y2n/NfhEl85S3CIw2vXNCXaeB7QrPK1uZIXmbEtZd0tI8/2TAfee00zK\nRlsDCftjiQ5FD4LuaIHIBpVQvpchz4+lcMgETIbS5fzPjbbb6u+IPe08OSMnC/FB\nhYGjdDOFBhQMNncVdN2QGhoQ/0F4i/wp0fiy526e1gNhHzK/acbaBpz7NziSpeY4\nZ5zFi7vpWrZzc+3ng7EOhMPfOQXW+3PMr5ETYcvSMM2Igzph8eQP+c9LdxRWqS5O\nCIzfDqE9LetSuOgiEfWWc8WvBoMRBW3N1t+Nc8dmwhtBR6wA5nU+lKlgW6hhNXDH\nREkcxldNEF4DY6a1Lo/afNh0wf4QCqDaocVRsHFr5HyvER67dGa6Z+nfHmgSgCW+\nUr61bJHaEKEmWdVmF2R2ABze9ZBEbJTuheIKATTRrVfEUyL1+ciO4YqXh9aZDQmF\nVTn8OJ5/fUltlxFQE/CO2gK0YAD8c+WThJDLHya6aZnTd6at3HHGUOqOcxT+jpSG\nj2CtlZPxj41EwKVqmas4pbT1wtURjSc7Xobv5GQZI6fBA5CTU7Rg0SVpJdto8yCv\nA/KBQYxfusm/6sDub/MEt+xnVgjawLBZDnieLM0pCVdXam5isTs=\n=qHJO\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0826be56899fa1ae804fce982efa99e3e098f813",
          "sha": "0826be56899fa1ae804fce982efa99e3e098f813",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0826be56899fa1ae804fce982efa99e3e098f813"
        }
      ],
      "message": "netbase: extend Proxy class to wrap UNIX socket as well as TCP",
      "committer": {
        "name": "Matthew Zipkin",
        "email": "pinheadmz@gmail.com",
        "date": "2023-11-08T17:54:19Z"
      },
      "author": {
        "name": "Matthew Zipkin",
        "email": "pinheadmz@gmail.com",
        "date": "2023-05-26T18:21:43Z"
      },
      "sha": "8d06446fc7a17b593466fccd0f638eb2527a493b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQ2ZTY0NmNjOGU1ZTY1ZDYwZDlkNmY0ZWExNDEwNDJiZDdiODZiOWU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d6e646cc8e5e65d60d9d6f4ea141042bd7b86b9e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d6e646cc8e5e65d60d9d6f4ea141042bd7b86b9e",
      "tree": {
        "sha": "9b0fcb3896107a2e22aa903101dde29cd9ec6b70",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9b0fcb3896107a2e22aa903101dde29cd9ec6b70"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 9b0fcb3896107a2e22aa903101dde29cd9ec6b70\nparent 8d06446fc7a17b593466fccd0f638eb2527a493b\nauthor Matthew Zipkin <pinheadmz@gmail.com> 1685979817 -0400\ncommitter Matthew Zipkin <pinheadmz@gmail.com> 1699466065 -0500\n\nproxy: rename randomize_credentials to m_randomize_credentials\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE5hdzzW4BBA4vG9eM5+KYS2KJyToFAmVLy1EACgkQ5+KYS2KJ\nyToquQ//arcJD7a0Eqt5OxqcIyDLMDeQ2mGuYpExcmY/sHhIjMRQkOpkz8eRBhFn\nqVeHNpdZez9shg9XOcwmKlHDTzptMMgyGFCJRwSEEFixl0G2MW759rbYjfL8crQv\nQCsPHdX3uo/NJowRh9rCvuGIyb6OMJoH68QFUjVJyqOrqMqHKJpraFcTAV0XF9Q9\nqh3uBZzw7bwP12//P05q7XIU85o3UhFliGtPg+wIqwpt4NpGF6zD8jTDCFJcwnde\nca3Xd8d6jKN9AOW3ukHsS88pjpdeJH0sXlyiVj2xrLeAibzzl+ZAfYjHEyA03hlD\nuzgq3I6bUkwfYzj3p3sSIjulwqVa/7j4AEKG4MyfhyLPJ14QuRDkGj2/MC3TUwAj\n6YTvSJHiHFvTyeLca7ghHrDU4SvnpZ4JspNY+BPvYhs0DeX3vpquGf7HJBrWVbFV\nidxCRmWW3mXPFhLyWDRSWVAFyylNTuDPeLDX8H2e7RVuZwCt20cuswJVaHdKJqOe\n9EA+hEOPxTCyo11+OqLh6oaDGE9KBIoNvwCXBf/9YSnjhMPOoq65UaBoOk849wGr\ns3yyD2BH1zsHCBy0Dje84QZpnmK3+5zBBGYuVyO4lSCr2T9XvLqseRL42Fs/Nxhn\nNqN3Ou/1g5NJWWOBWSiQBwBmEX8rrbR9J5uMLvctvFuU11gqC98=\n=UHf6\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8d06446fc7a17b593466fccd0f638eb2527a493b",
          "sha": "8d06446fc7a17b593466fccd0f638eb2527a493b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8d06446fc7a17b593466fccd0f638eb2527a493b"
        }
      ],
      "message": "proxy: rename randomize_credentials to m_randomize_credentials",
      "committer": {
        "name": "Matthew Zipkin",
        "email": "pinheadmz@gmail.com",
        "date": "2023-11-08T17:54:25Z"
      },
      "author": {
        "name": "Matthew Zipkin",
        "email": "pinheadmz@gmail.com",
        "date": "2023-06-05T15:43:37Z"
      },
      "sha": "d6e646cc8e5e65d60d9d6f4ea141042bd7b86b9e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDllYjQwZTZmMzk5MTY5YWRlOGU5NmM2MGJhNjMzZThhMGU0ZGRhZGM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9eb40e6f399169ade8e96c60ba633e8a0e4ddadc",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/9eb40e6f399169ade8e96c60ba633e8a0e4ddadc",
      "tree": {
        "sha": "66e2b350544a6b4a532d35ffc9647d6acac208fd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/66e2b350544a6b4a532d35ffc9647d6acac208fd"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 66e2b350544a6b4a532d35ffc9647d6acac208fd\nparent d6e646cc8e5e65d60d9d6f4ea141042bd7b86b9e\nauthor Matthew Zipkin <pinheadmz@gmail.com> 1689192605 -0400\ncommitter Matthew Zipkin <pinheadmz@gmail.com> 1699466065 -0500\n\nnet: split ConnectToSocket() from ConnectDirectly() for unix sockets\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE5hdzzW4BBA4vG9eM5+KYS2KJyToFAmVLy1EACgkQ5+KYS2KJ\nyToM+Q/9HCEu8kmGJq3MfopIWB/3zCQsYB3DVFBxPkD9KgMHRpdRyirNBn4PMqZJ\nXfRLCWEbpi27oF1wnIWFUFK3y+mCIC7Y2P0eZGO4seDNTW7RL4y9xEBnteJS6Tei\nF1aAr26F592acq+5FT55kA/UoQEQ3FDfLWYbRCXMvcL4XWSRwVplfvE9K5HoCA3R\nsjH7OIjm7wi5Yp+QbjIaFiyumOhI3ZjCggnrD9l7l/Ou7ZyprndfdlOX8yrYOIbE\ndmpmjCFvIJiw/dpCYJTM+L4qG8Y+biiyLqJgW1Y5HS16IUNzEBCC4FUy/Mv7DS7R\nPs2hAPybtSjrg8O5cSojj9+TgO58iEeC8pWVWj0whmvMg/s6YLSt50AHcPHyOSXN\nLCy4d/CTKg4+1Q8yzpZ9yMQ6DPB7VPFXb3G6q52WN4U0ADukrK1XXQ7FAmOmMcB/\nocXqlFK0hUKshDFkcbCNwrhzHqmwJRBjkfMtG8jiGdSFaXUbK1ZUr/ZYPjcASaej\ntrTOBWw8RBdIH2PN0VoGDQ4M1c+ZbHGSwaBadgdr0iP/cDz3qaw18bfb3gMImrtC\nOkTpPzJcK8XFwj7TsJfv01UGSwUJqrOjlXRQJPm/58KcV8s6McnQ/pg/95FaHz9z\n5QdXDQu3AYUpuP4+dkXfUo7O8ciEHQo4MkJfz5PIsZYZncuAZCo=\n=Lk6s\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d6e646cc8e5e65d60d9d6f4ea141042bd7b86b9e",
          "sha": "d6e646cc8e5e65d60d9d6f4ea141042bd7b86b9e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d6e646cc8e5e65d60d9d6f4ea141042bd7b86b9e"
        }
      ],
      "message": "net: split ConnectToSocket() from ConnectDirectly() for unix sockets",
      "committer": {
        "name": "Matthew Zipkin",
        "email": "pinheadmz@gmail.com",
        "date": "2023-11-08T17:54:25Z"
      },
      "author": {
        "name": "Matthew Zipkin",
        "email": "pinheadmz@gmail.com",
        "date": "2023-07-12T20:10:05Z"
      },
      "sha": "9eb40e6f399169ade8e96c60ba633e8a0e4ddadc"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDE5NDcyN2Y2OTg5NzhiYWJhOTBlMDI0YTNkNDI2Y2FhMWY4YzVhNjI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/194727f698978baba90e024a3d426caa1f8c5a62",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/194727f698978baba90e024a3d426caa1f8c5a62",
      "tree": {
        "sha": "065012c39e6ddf3eba61fe0fb922bf0c2bccd7bf",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/065012c39e6ddf3eba61fe0fb922bf0c2bccd7bf"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 065012c39e6ddf3eba61fe0fb922bf0c2bccd7bf\nparent 9eb40e6f399169ade8e96c60ba633e8a0e4ddadc\nauthor Matthew Zipkin <pinheadmz@gmail.com> 1689266442 -0400\ncommitter Matthew Zipkin <pinheadmz@gmail.com> 1699466065 -0500\n\ni2p: construct Session with Proxy instead of CService\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE5hdzzW4BBA4vG9eM5+KYS2KJyToFAmVLy1EACgkQ5+KYS2KJ\nyTq3OxAAy3yrMNvR9IMDj/mSH/4yxc1DkQQ8knevmnklReAcwSCoJwQfna+qgzjz\nHR1FKYxHXlGPdSg0PeAaCpLg/dYSVatDCvvoJA8llRET6PZgvoyvXEnh3yq99hYv\n98hB1J6sQzgEbgS6VyJ1wloXxF1Kz9RsSiT1P0suMyAoV2TItBuAX7KOxH064dkC\nEuZicv26Yu1Hieq5h8VpW2wzRkpE7wLlpOTnItkDEjym6quBsZy2vam1D6c/6aZN\nDVY98pKmkzFzu7Yvb24GDyLe0y4/NHPCV8nw1GaRm2+tQNuo5LK/pEKjXUIzSWx2\nLAKvSzMLYOB17zFHovhrJXfdi5ciGwQ9Y8H7N9FG/MCQrm7S3aBaLvDSly0kZRsV\n0TbUq20iAult/YVOJsMe+SZ8YKnCWP7Vxv9QjB/HcCjITpQ8hdYoc7OHR+2LZqK8\n5TIVqbV7Wpx/m4mvOCc8D4zEyCnDQdh2xD6gzOWNFt2MQEk6rOzwGZlytUqc1JU8\nqNKZ/dRU8xXiF8ldLdWG0Zx1crFIHR2rWr6oRzfkRVle/J4Rg9HqBGHoTBlSIUQj\nTw/I7Nf5prcTDcT+lF4Vxgy82j3rZ4m8Chmtr+wVlffc4cf3sL263xNjs2Th0CYI\nC3Ac7h8q+QzyZ7Tq192KWCWMoV5SfCJ9oB6itKiWOL+GTI5kBxQ=\n=QjCD\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9eb40e6f399169ade8e96c60ba633e8a0e4ddadc",
          "sha": "9eb40e6f399169ade8e96c60ba633e8a0e4ddadc",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/9eb40e6f399169ade8e96c60ba633e8a0e4ddadc"
        }
      ],
      "message": "i2p: construct Session with Proxy instead of CService",
      "committer": {
        "name": "Matthew Zipkin",
        "email": "pinheadmz@gmail.com",
        "date": "2023-11-08T17:54:25Z"
      },
      "author": {
        "name": "Matthew Zipkin",
        "email": "pinheadmz@gmail.com",
        "date": "2023-07-13T16:40:42Z"
      },
      "sha": "194727f698978baba90e024a3d426caa1f8c5a62"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQ0M2FmNWU4OGU4YjczYzE0ZjhmYzdjMTM2M2MxZDMwZjk0MjJiNTg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d43af5e88e8b73c14f8fc7c1363c1d30f9422b58",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d43af5e88e8b73c14f8fc7c1363c1d30f9422b58",
      "tree": {
        "sha": "3f7b3dcda4b0c37c4c5e7cbbd2739e500c26f3e1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3f7b3dcda4b0c37c4c5e7cbbd2739e500c26f3e1"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 3f7b3dcda4b0c37c4c5e7cbbd2739e500c26f3e1\nparent 194727f698978baba90e024a3d426caa1f8c5a62\nauthor Matthew Zipkin <pinheadmz@gmail.com> 1689273074 -0400\ncommitter Matthew Zipkin <pinheadmz@gmail.com> 1699466066 -0500\n\ngui: accomodate unix socket Proxy in updateDefaultProxyNets()\n\nThis will require a follow-up to add unix socket options to the GUI\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE5hdzzW4BBA4vG9eM5+KYS2KJyToFAmVLy1IACgkQ5+KYS2KJ\nyTq0Cw//QOjz2qek5EArUaYhUAzKDGPNmtPyBg0mxHLELTrXmc3MMocJg91PzMdJ\n3+zJY4Jw7fVHQp5GVdSfpm424S1vjV1PUILW6IQub35o7HUawbSLptrCCCrNGWpw\nwCEqTiuHzjphkP108QBZa7ZuOSPrZcPIZRpva2xqW3k6GjkwKY5JiC0fdRiSqjz6\nJyjsAkfJdfB/43gu1xqmwlmBYOIExAsy03M2HzmUhovl7hBvheKNfwj7BC81jNpb\nVPVTccsY/zj1zRVS2InQDj5LDfohn/rAq7XOqIM15XlcsxXRoc94I/cdNV4UqKeE\nSoEHvcUCbpvDQ5axyiw+2f5iAz0X5w8K2TyF3SDikF+WVp/Qk7vRRE9B2hddhU0D\n2qVS3Q+zYbzRA0zM0g7WO63qrXAHKQbS+h7iGdvzNF2QzV0EeWQjWsFQViKCunFE\nVNNsE0p8Hl5lugOG3mS0I9OXTPLFYcE34N4yvK+UQntvd/+AjY8ZuRD5+sqPQtqV\n21XExrtWNOtsC8MzYT6LLVcCj1jglmmSZyj/+F/2F3OTEB6aKG+TIaxlZVH5NFL1\nL7JduzhTvu9FHrlfgVi7aDG4gvMQIg1pGofQGbt9K6/4rCZ6jfwFTsfM6dWMOqk6\nlTzzUwq1WqsHw9WyAnSbFZPIsUt3qiBLnYzgEZGV/QOwO0mUpZA=\n=vgKl\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/194727f698978baba90e024a3d426caa1f8c5a62",
          "sha": "194727f698978baba90e024a3d426caa1f8c5a62",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/194727f698978baba90e024a3d426caa1f8c5a62"
        }
      ],
      "message": "gui: accomodate unix socket Proxy in updateDefaultProxyNets()\n\nThis will require a follow-up to add unix socket options to the GUI",
      "committer": {
        "name": "Matthew Zipkin",
        "email": "pinheadmz@gmail.com",
        "date": "2023-11-08T17:54:26Z"
      },
      "author": {
        "name": "Matthew Zipkin",
        "email": "pinheadmz@gmail.com",
        "date": "2023-07-13T18:31:14Z"
      },
      "sha": "d43af5e88e8b73c14f8fc7c1363c1d30f9422b58"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDBjNWVkYTMxMDQ5MTJiNGJkMmE5MmU4MTFmMDY5ZDM4Nzc5YTBhOTg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0c5eda3104912b4bd2a92e811f069d38779a0a98",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/0c5eda3104912b4bd2a92e811f069d38779a0a98",
      "tree": {
        "sha": "bbe6c3d85bdd114a33d3ba0f14144337641569de",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/bbe6c3d85bdd114a33d3ba0f14144337641569de"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree bbe6c3d85bdd114a33d3ba0f14144337641569de\nparent d43af5e88e8b73c14f8fc7c1363c1d30f9422b58\nauthor Matthew Zipkin <pinheadmz@gmail.com> 1685125437 -0400\ncommitter Matthew Zipkin <pinheadmz@gmail.com> 1699466066 -0500\n\ninit: allow UNIX socket path for -proxy and -onion\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE5hdzzW4BBA4vG9eM5+KYS2KJyToFAmVLy1IACgkQ5+KYS2KJ\nyToUxw/8ClKClG1zWV3cENldvpYBcA+AfDwJZwhBiWFem8MBJ6NQoeY/eN52OxEf\nHAdCUB/fFP3dGADc3nWuEmlu4URhl32cKCz3pooqbLFJ0nO0ErXf4gb22RAHsv3Y\naE/WxAhgfCqapSrx1KTdleUH4NksFQsdGFq/wi4Er7m3tsK6EOJtTiVy7TmAFZJg\nnQTJ9TfoZYJp+KZlx5Aqmn2PXgISUDy3t+EJXi62uTuFtmobuuY8hityuaCvy532\nrova70ftvF0HK02aTNqoucfm/IojUNFk9pGr+9kkWA+ASDHg0zTvnssa6x5F4U7B\nvYT5DzIsMVmO/D0zEbpHjpzrE8H6q+Q7eIu5CJjh136eyAKPYSYsOwSvu4R8i355\nwVvcN5Owv3uQQQe9ynKCbSQljm78XZlwWmJsCsU38ykp03h3A+OiZBwKFludpeg4\n69ShCnCSsmtQMLxKZP1FlpyHJvUzi36oEfRHNJwZeUhfriDRENvTMb1IyTc4lDjW\nFXYigrqq7+HmiyJOa9HKkINZ7l8Jush9hGOqQZFxHCtFwIGLd2VUSRGHjsqcX4V3\n843pJgVA4dzd/RDV+u750em4/cHawjXtlNpCKxxDs6iLkJY2odqAE4KsqwWbeNTN\nu6fuwC1wLFqAYytEnIRoZacdNAca5IQwHp5DPSSf60y+W2uj7Bk=\n=PXpu\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d43af5e88e8b73c14f8fc7c1363c1d30f9422b58",
          "sha": "d43af5e88e8b73c14f8fc7c1363c1d30f9422b58",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d43af5e88e8b73c14f8fc7c1363c1d30f9422b58"
        }
      ],
      "message": "init: allow UNIX socket path for -proxy and -onion",
      "committer": {
        "name": "Matthew Zipkin",
        "email": "pinheadmz@gmail.com",
        "date": "2023-11-08T17:54:26Z"
      },
      "author": {
        "name": "Matthew Zipkin",
        "email": "pinheadmz@gmail.com",
        "date": "2023-05-26T18:23:57Z"
      },
      "sha": "0c5eda3104912b4bd2a92e811f069d38779a0a98"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDIzNTM0ZTU3MWFhZGRiM2U3NDE1MDE0MDk4YzZiODJlZDhkZjk1ODk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/23534e571aaddb3e7415014098c6b82ed8df9589",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/23534e571aaddb3e7415014098c6b82ed8df9589",
      "tree": {
        "sha": "cabfee74317a4d7d990c93f7a8e2b891dafa0676",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/cabfee74317a4d7d990c93f7a8e2b891dafa0676"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree cabfee74317a4d7d990c93f7a8e2b891dafa0676\nparent 0c5eda3104912b4bd2a92e811f069d38779a0a98\nauthor Matthew Zipkin <pinheadmz@gmail.com> 1685125467 -0400\ncommitter Matthew Zipkin <pinheadmz@gmail.com> 1699466066 -0500\n\ntest: cover UNIX sockets in feature_proxy.py\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE5hdzzW4BBA4vG9eM5+KYS2KJyToFAmVLy1IACgkQ5+KYS2KJ\nyTolXw//YIc2R8iEmChzKulskyRaSublIK0FsLfb8/zIKxy+HVpKD9Du1eZRpule\neOzR5rDQC7pcCujYrjzJCDtdWsCmbRN7D2c9Pcy4nXUlpHfHgBV1n+fxLbLOgcD8\nHGp5hkkB2uP88d1ixFr8jKUNvZup4GCjv67IC739bt3vUrCKjUdyprJrlCdo6VMQ\nBHV4pzjZ0AGPSuZUpbtq8W2oxAv8RHuet7el1XyLZHcr/w+YlKK79KrXwSoIS78U\nrt3d9I6ybRTr8AQdCHzKNze5kG1ObCjSIoiGSIMr7awm+MCOY+dSmYljEEMtgYgk\nUEz9uRjYVsJRKVUtLX59I5ICXpV92qTreX6IohqtA0l0jw8PJRpAsXsynreHbIU1\nN48WIF3/aOwBO+mwHBFEpT1XpIYK3ee90SYeSCfAJNkpRKVyRuGjYmBRafCXIdAe\niyQK9xFLbgEesVwiv7bBjs/cLJeuZ3isHJZFPb9PDL76S8yLi4H0T3tIp0gdYLTZ\n0EJJl0WUP/9iL7GWR/uXZzUVMKbI8LgblDZQz3ujPiAU/xZVZa2ud6Dj1YW4Lfbm\n27uOVdQ57KwD96bDThyXNqxZxWYq/rM5h5bsuyByGAK9fEhvoQ+JSwT398CWx+9T\nTCFKsSfCTpSLvkpuAtz4eYkPummmM0Ju00smODwiaMFt5dL6EnU=\n=9foA\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0c5eda3104912b4bd2a92e811f069d38779a0a98",
          "sha": "0c5eda3104912b4bd2a92e811f069d38779a0a98",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0c5eda3104912b4bd2a92e811f069d38779a0a98"
        }
      ],
      "message": "test: cover UNIX sockets in feature_proxy.py",
      "committer": {
        "name": "Matthew Zipkin",
        "email": "pinheadmz@gmail.com",
        "date": "2023-11-08T17:54:26Z"
      },
      "author": {
        "name": "Matthew Zipkin",
        "email": "pinheadmz@gmail.com",
        "date": "2023-05-26T18:24:27Z"
      },
      "sha": "23534e571aaddb3e7415014098c6b82ed8df9589"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDZkZGRjMWMyZWRhNTE0ZDM1MjE5Y2NlMDNjMjI5YmQ2ZjgyMmJlNTU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6dddc1c2eda514d35219cce03c229bd6f822be55",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/6dddc1c2eda514d35219cce03c229bd6f822be55",
      "tree": {
        "sha": "df58a0f46c3672f8a85ae73304a841efb0f7b9ac",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/df58a0f46c3672f8a85ae73304a841efb0f7b9ac"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree df58a0f46c3672f8a85ae73304a841efb0f7b9ac\nparent 23534e571aaddb3e7415014098c6b82ed8df9589\nauthor Matthew Zipkin <pinheadmz@gmail.com> 1689357555 -0400\ncommitter Matthew Zipkin <pinheadmz@gmail.com> 1699466066 -0500\n\ndoc: add release notes and help text for unix sockets\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE5hdzzW4BBA4vG9eM5+KYS2KJyToFAmVLy1IACgkQ5+KYS2KJ\nyTqhCw//bXIcaq/ncHwQef38HuiGH0Ae+5D9QpOfKVu7zsAN+hsOuGoIX62YGZ1a\na5rdfjVZqS8vEMXhje3Et642vgdhhs4QNa5/UBQruLo3B+TqY2n/EX6EnHPTlvqo\nenMtQa80DL/PJ0uQG3QqWDRCO1QUdEHGWf2ssAjvQinQeigiNgeephYcb+SpG5tl\njvklO7O6BS4nIP/91tJxuM0TFEbDHYdHIdi1r8+CazxeysbX8qqKtB3a872ywvK6\nOk5wGH93WsZLT6Jbfjp+G6P3xaXz810oKzrJkdhSBZHOXwmh5FL5UnwOx57+xcAY\nOuh7slgbIRwhwXnm2AXmVlhprWrx0DJcvHVJtoBZOdRuIgiaYLH52wDu5Mb6iC3o\n+3jyOL1xbtJNGYuQU1Ga82VjbFlPdCO/ZcJoiON/9YbwHM+4QlpfAadw8z+Ww7eT\n3IEFDaWUv9ohvTyYpPJ3gqFai063DAeEHOblHnuJulrq/oxg4G5jCTKeYZ5KqEmh\nIVZ9rjBuxn5vGiF4LC364zkiQPmd0AIYqZXmNtAH4AUsQxBWHXFxNgA/+OQBxua3\nRFlW44COgLvKOSUzIuO6O5FYdIPXZDH71K5WvUqttRLOhT9YSNdtX6q6z7z5jwcs\nqAA9j3Ood/Z9nnWd/GM5rLm08CfU+8dDNvMqjKI+b/uSov2i/RA=\n=0ZSy\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/23534e571aaddb3e7415014098c6b82ed8df9589",
          "sha": "23534e571aaddb3e7415014098c6b82ed8df9589",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/23534e571aaddb3e7415014098c6b82ed8df9589"
        }
      ],
      "message": "doc: add release notes and help text for unix sockets",
      "committer": {
        "name": "Matthew Zipkin",
        "email": "pinheadmz@gmail.com",
        "date": "2023-11-08T17:54:26Z"
      },
      "author": {
        "name": "Matthew Zipkin",
        "email": "pinheadmz@gmail.com",
        "date": "2023-07-14T17:59:15Z"
      },
      "sha": "6dddc1c2eda514d35219cce03c229bd6f822be55"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10904139521,
      "node_id": "HRFPE_lADOABII585iPWmwzwAAAAKJ7_cB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10904139521",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-08T17:55:56Z"
    },
    {
      "event": "reviewed",
      "id": 1688303909,
      "node_id": "PRR_kwDOABII585koXkl",
      "url": null,
      "actor": null,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "force pushed to clean up git commit history. diff is null",
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#pullrequestreview-1688303909",
      "submitted_at": "2023-11-08T17:56:56Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-09T19:00:30Z",
      "updated_at": "2023-11-09T19:00:30Z",
      "source": {
        "issue": {
          "id": 1986099215,
          "node_id": "PR_kwDOABII585fD2RE",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28834",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28834/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28834/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28834/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28834",
          "number": 28834,
          "state": "open",
          "state_reason": null,
          "title": "net: attempts to connect to all resolved addresses when connecting to a node",
          "body": "This is a follow-up of #28155 motivated by https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1362677038\r\n\r\n## Rationale\r\n\r\nPrior to this, when establishing a network connection via CConnman::ConnectNode, if the connection needed address resolution, a single address would be picked at random from the resolved addresses and our node would try to connect to it. However, this would lead to the behavior of ConnectNode being unpredictable when the address was resolved to various ips (e.g. the address resolving to IPv4 and IPv6, but we only support one of them).\r\n\r\nThis patches the aforementioned behavior by going over all resolved IPs until a valid one is found or until we\r\nexhaust them.\r\n\r\n<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
          "user": {
            "login": "sr-gi",
            "id": 6665628,
            "node_id": "MDQ6VXNlcjY2NjU2Mjg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6665628?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sr-gi",
            "html_url": "https://github.com/sr-gi",
            "followers_url": "https://api.github.com/users/sr-gi/followers",
            "following_url": "https://api.github.com/users/sr-gi/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/sr-gi/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/sr-gi/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/sr-gi/subscriptions",
            "organizations_url": "https://api.github.com/users/sr-gi/orgs",
            "repos_url": "https://api.github.com/users/sr-gi/repos",
            "events_url": "https://api.github.com/users/sr-gi/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/sr-gi/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 9,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28834",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28834",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28834.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28834.patch"
          },
          "created_at": "2023-11-09T17:31:19Z",
          "updated_at": "2024-02-29T23:55:44Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 1729334104,
      "node_id": "PRR_kwDOABII585nE4tY",
      "url": null,
      "actor": null,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK 6dddc1c2eda514d35219cce03c229bd6f822be55",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#pullrequestreview-1729334104",
      "submitted_at": "2023-11-14T09:49:56Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
    },
    {
      "event": "review_requested",
      "id": 10952255826,
      "node_id": "RRE_lADOABII585iPWmwzwAAAAKMzilS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10952255826",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-14T09:50:01Z",
      "requested_reviewer": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-06T23:13:33Z",
      "updated_at": "2023-12-06T23:13:33Z",
      "source": {
        "issue": {
          "id": 2029493410,
          "node_id": "PR_kwDOABII585hWvMx",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29015",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29015/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29015/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29015/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/29015",
          "number": 29015,
          "state": "open",
          "state_reason": null,
          "title": "kernel: Streamline util library",
          "body": "Remove `fees.h`, `errors.h`, and `spanparsing.h` from the util library. Specifically:\r\n\r\n- Move `Split` functions from `util/spanparsing.h` to `util/string.h`, using `util` namespace for clarity.\r\n- Move remaining spanparsing functions to `script/parsing.h` since they are used for descriptor and miniscript parsing.\r\n- Combine `util/fees.h` and `util/errors.h` into `common/messages.h` so there is a place for simple functions that generate user messages to live, and these functions are not part of the util library.\r\n\r\nMotivation for this change is that the util library is a dependency of the kernel, and we should remove functionality from util that shouldn't be called by kernel code or kernel applications. These changes should also improve code organization and make functions easier to discover. Some of these same moves are (or were) part of #28690, but did not help with code organization, or made it worse, so it is better to move them and clean them up in the same PR so code only has to change one time.\r\n",
          "user": {
            "login": "ryanofsky",
            "id": 7133040,
            "node_id": "MDQ6VXNlcjcxMzMwNDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ryanofsky",
            "html_url": "https://github.com/ryanofsky",
            "followers_url": "https://api.github.com/users/ryanofsky/followers",
            "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
            "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
            "repos_url": "https://api.github.com/users/ryanofsky/repos",
            "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 118379652,
              "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
              "name": "Validation",
              "color": "6060aa",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 18,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29015",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/29015",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/29015.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/29015.patch"
          },
          "created_at": "2023-12-06T22:26:39Z",
          "updated_at": "2024-03-01T09:44:22Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "labeled",
      "id": 11477604631,
      "node_id": "LE_lADOABII585iPWmwzwAAAAKsHlkX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11477604631",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-13T10:25:47Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 1876248880,
      "node_id": "PRR_kwDOABII585v1Ukw",
      "url": null,
      "actor": null,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "commit_url": null,
      "created_at": null,
      "author_association": "NONE",
      "body": "ACK for 6dddc1c2eda514d35219cce03c229bd6f822be55.\r\nGreat work on a great feature.  Seems to work well.  Reviewed the code changes, but didn't see anything noteworthy over what vasild, luke-jr, and willcl-ark already saw.\r\n\r\nRan the following test actions:\r\n- Cloned and checked out PR branch, compiled, and ran all functional tests (all passed)\r\n- Configured Tor to listen on only the unix domain socket /run/tor/socks (SocksPort 9050 and ControlPort 9051 disabled)\r\n- Started bitcoind (signet), `proxy=/run/tor/socks` set, `onion` and `onlynet` not set.  Connections were established with multiple peers and successful block download was observed.  Sniffed the unix socket (`/run/tor/socks`) with https://github.com/mechpen/sockdump, and observed bitcoin traffic in Wireshark with a pcap dump from sockdump.  `getpeerinfo` command to the node showed ipv4, ipv6, and onion addr peers. \r\n- Started bitcoind (signet), `onion=/run/tor/socks` set, `proxy` not set, but `onlynet=onion` set.  Manually added seed `v7ajjeirttkbnt32wpy3c6w3emwnfr3fkla7hpxcfokr3ysd3kqtzmqd.onion:38333` with `addnode` command.  Connections were established with multiple peers and successful block download was observed.  Sniffed the unix socket and again observed bitcoin traffic over the socket.  `getpeerinfo` showed multiple onion addr peers.",
      "user": {
        "login": "tdb3",
        "id": 106488469,
        "node_id": "U_kgDOBljilQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/106488469?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tdb3",
        "html_url": "https://github.com/tdb3",
        "followers_url": "https://api.github.com/users/tdb3/followers",
        "following_url": "https://api.github.com/users/tdb3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tdb3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tdb3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tdb3/subscriptions",
        "organizations_url": "https://api.github.com/users/tdb3/orgs",
        "repos_url": "https://api.github.com/users/tdb3/repos",
        "events_url": "https://api.github.com/users/tdb3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tdb3/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#pullrequestreview-1876248880",
      "submitted_at": "2024-02-12T20:48:46Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-28T11:38:56Z",
      "updated_at": "2024-02-28T11:38:56Z",
      "source": {
        "issue": {
          "id": 2139075565,
          "node_id": "PR_kwDOFDde0s5nHMXd",
          "url": "https://api.github.com/repos/stratum-mining/stratum/issues/761",
          "repository_url": "https://api.github.com/repos/stratum-mining/stratum",
          "labels_url": "https://api.github.com/repos/stratum-mining/stratum/issues/761/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/stratum-mining/stratum/issues/761/comments",
          "events_url": "https://api.github.com/repos/stratum-mining/stratum/issues/761/events",
          "html_url": "https://github.com/stratum-mining/stratum/pull/761",
          "number": 761,
          "state": "open",
          "state_reason": null,
          "title": "new rpc-client for JD-Server mempool ",
          "body": "This is a new and rebased version of  [PR716](https://github.com/stratum-mining/stratum/pull/716)\r\n\r\n\r\nWhat is in this PR.\r\n\r\nA new Rpc client, called MiniRpcClient. This client communicates with a bitcoin node, and the requests that can do are just the following: ask for the mempool, ask for a specific transaction, submit a bitcoin block. This client is used to make the jd-server mempool communicate with the bitcoin node. The previous client was depending upon json-rpc library, which caused some issues because imported serde in a way that the SRI \"doesn't like\". This rpc client is made on top of the latest hyper 1.1.0 library for http connections.\r\n\r\nThe code is asynchronous and non blocking. Before was \"almost\" non blocking, as the function \"submit_block\" that concerned submitting a block to the bitcoin node, was blocking.\r\n\r\nI also took advantage of introduce some proper error management in the jds mempool module.\r\n\r\nThis PR has been tested in regtest and needs to be tested in testnet.\r\n",
          "user": {
            "login": "lorbax",
            "id": 84277969,
            "node_id": "MDQ6VXNlcjg0Mjc3OTY5",
            "avatar_url": "https://avatars.githubusercontent.com/u/84277969?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/lorbax",
            "html_url": "https://github.com/lorbax",
            "followers_url": "https://api.github.com/users/lorbax/followers",
            "following_url": "https://api.github.com/users/lorbax/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/lorbax/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/lorbax/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/lorbax/subscriptions",
            "organizations_url": "https://api.github.com/users/lorbax/orgs",
            "repos_url": "https://api.github.com/users/lorbax/repos",
            "events_url": "https://api.github.com/users/lorbax/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/lorbax/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignee": {
            "login": "lorbax",
            "id": 84277969,
            "node_id": "MDQ6VXNlcjg0Mjc3OTY5",
            "avatar_url": "https://avatars.githubusercontent.com/u/84277969?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/lorbax",
            "html_url": "https://github.com/lorbax",
            "followers_url": "https://api.github.com/users/lorbax/followers",
            "following_url": "https://api.github.com/users/lorbax/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/lorbax/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/lorbax/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/lorbax/subscriptions",
            "organizations_url": "https://api.github.com/users/lorbax/orgs",
            "repos_url": "https://api.github.com/users/lorbax/repos",
            "events_url": "https://api.github.com/users/lorbax/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/lorbax/received_events",
            "type": "User",
            "site_admin": false
          },
          "assignees": [
            {
              "login": "lorbax",
              "id": 84277969,
              "node_id": "MDQ6VXNlcjg0Mjc3OTY5",
              "avatar_url": "https://avatars.githubusercontent.com/u/84277969?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/lorbax",
              "html_url": "https://github.com/lorbax",
              "followers_url": "https://api.github.com/users/lorbax/followers",
              "following_url": "https://api.github.com/users/lorbax/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/lorbax/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/lorbax/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/lorbax/subscriptions",
              "organizations_url": "https://api.github.com/users/lorbax/orgs",
              "repos_url": "https://api.github.com/users/lorbax/repos",
              "events_url": "https://api.github.com/users/lorbax/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/lorbax/received_events",
              "type": "User",
              "site_admin": false
            }
          ],
          "author_association": "CONTRIBUTOR",
          "milestone": {
            "url": "https://api.github.com/repos/stratum-mining/stratum/milestones/13",
            "html_url": "https://github.com/stratum-mining/stratum/milestone/13",
            "labels_url": "https://api.github.com/repos/stratum-mining/stratum/milestones/13/labels",
            "id": 10430703,
            "node_id": "MI_kwDOFDde0s4Anyjv",
            "number": 13,
            "state": "open",
            "title": "Milestone 4",
            "description": "Milestone 4 should ensure no major bugs and specification incompatibilities exist. It sets the foundation for publishing a first official release of SRI. ",
            "creator": {
              "login": "Fi3",
              "id": 6207037,
              "node_id": "MDQ6VXNlcjYyMDcwMzc=",
              "avatar_url": "https://avatars.githubusercontent.com/u/6207037?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/Fi3",
              "html_url": "https://github.com/Fi3",
              "followers_url": "https://api.github.com/users/Fi3/followers",
              "following_url": "https://api.github.com/users/Fi3/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/Fi3/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/Fi3/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/Fi3/subscriptions",
              "organizations_url": "https://api.github.com/users/Fi3/orgs",
              "repos_url": "https://api.github.com/users/Fi3/repos",
              "events_url": "https://api.github.com/users/Fi3/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/Fi3/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 6,
            "closed_issues": 16,
            "created_at": "2024-01-17T14:19:16Z",
            "updated_at": "2024-02-28T11:20:07Z",
            "due_on": "2024-02-16T08:00:00Z"
          },
          "locked": false,
          "comments": 8,
          "pull_request": {
            "url": "https://api.github.com/repos/stratum-mining/stratum/pulls/761",
            "html_url": "https://github.com/stratum-mining/stratum/pull/761",
            "diff_url": "https://github.com/stratum-mining/stratum/pull/761.diff",
            "patch_url": "https://github.com/stratum-mining/stratum/pull/761.patch"
          },
          "created_at": "2024-02-16T17:36:49Z",
          "updated_at": "2024-03-01T14:39:13Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1968804032,
      "node_id": "IC_kwDOABII5851WZDA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1968804032",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-28T11:41:23Z",
      "updated_at": "2024-02-28T13:55:35Z",
      "author_association": "MEMBER",
      "body": "Would be nice to have this for RPC too, but can wait for a followup.\r\n\r\nDitto for direct peer connections.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#issuecomment-1968804032",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27375"
    },
    {
      "event": "reviewed",
      "id": 1906085382,
      "node_id": "PRR_kwDOABII585xnI4G",
      "url": null,
      "actor": null,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "utACK 6dddc1c2eda514d35219cce03c229bd6f822be55\r\n\r\nMostly cosmetic feedback.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#pullrequestreview-1906085382",
      "submitted_at": "2024-02-28T16:55:01Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
    },
    {
      "event": "commented",
      "id": 1972059516,
      "node_id": "IC_kwDOABII5851iz18",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1972059516",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-29T22:13:23Z",
      "updated_at": "2024-02-29T22:13:23Z",
      "author_association": "MEMBER",
      "body": "@Sjors \r\nhttps://github.com/bitcoin/bitcoin/pull/27375#discussion_r1506062696\r\n>  Both call sites of ConnectThroughProxy have access to conn_type so might as well pass in manual_connection.\r\n\r\nDo you mean to pass it `ConnectThroughProxy()` -> `proxy.Connect()` -> `ConnectDirectly()`?\r\n\r\nThat would also mean we need `manual_connection` in `i2p.cpp` where we call `proxy.Connect()` ?\r\n",
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#issuecomment-1972059516",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27375"
    },
    {
      "event": "mentioned",
      "id": 11972065030,
      "node_id": "MEE_lADOABII585iPWmwzwAAAALJlzcG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11972065030",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-29T22:13:25Z"
    },
    {
      "event": "subscribed",
      "id": 11972065038,
      "node_id": "SE_lADOABII585iPWmwzwAAAALJlzcO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11972065038",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-29T22:13:25Z"
    },
    {
      "event": "commented",
      "id": 1973018554,
      "node_id": "IC_kwDOABII5851md-6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1973018554",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-01T11:28:03Z",
      "updated_at": "2024-03-01T11:28:03Z",
      "author_association": "MEMBER",
      "body": "> That would also mean we need `manual_connection` in `i2p.cpp` where we call `proxy.Connect()` ?\r\n\r\n@vasild does the i2p code know if a connection is manual? We can always set `manual_connection` to `true` if we don't know (or it adds too much complexity), but we should set it to the correct value if we _do_ know.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#issuecomment-1973018554",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27375"
    },
    {
      "event": "mentioned",
      "id": 11978262378,
      "node_id": "MEE_lADOABII585iPWmwzwAAAALJ9cdq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11978262378",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-01T11:28:05Z"
    },
    {
      "event": "subscribed",
      "id": 11978262391,
      "node_id": "SE_lADOABII585iPWmwzwAAAALJ9cd3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11978262391",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-01T11:28:05Z"
    },
    {
      "event": "commented",
      "id": 1973654804,
      "node_id": "IC_kwDOABII5851o5UU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1973654804",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-01T18:04:27Z",
      "updated_at": "2024-03-01T18:04:27Z",
      "author_association": "MEMBER",
      "body": "@Sjors If I'm following this correctly, the only benefit of passing `manual_connection` to `ConnectDirectly()` is that it is then passed to `ConnectToSocket()` which only uses the boolean when logging with `LogConnectFailure()`.\r\n\r\nOn current master, `ConnectThroughProxy()` calls `ConnectSocketDirectly()` with a hard-coded `true` for `manual_connection`. I believe the motivation is in https://github.com/bitcoin/bitcoin/pull/12569\r\n\r\nSo I'm inclined to leave this hard-coded as `true` because IIUC the connection being described by the boolean in this context isn't \"manual\" in the \"p2p addrman vs addnode\" sense, but is used to refer to the connection between bitcoind and the input to the proxy.",
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#issuecomment-1973654804",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27375"
    },
    {
      "event": "mentioned",
      "id": 11982553094,
      "node_id": "MEE_lADOABII585iPWmwzwAAAALKN0AG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11982553094",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-01T18:04:29Z"
    },
    {
      "event": "subscribed",
      "id": 11982553108,
      "node_id": "SE_lADOABII585iPWmwzwAAAALKN0AU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11982553108",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-01T18:04:29Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154121825",
      "pull_request_review_id": 1366408214,
      "id": 1154121825,
      "node_id": "PRRC_kwDOABII585EyoBh",
      "diff_hunk": "@@ -112,6 +112,7 @@ std::string GetNetworkName(enum Network net)\n     case NET_I2P: return \"i2p\";\n     case NET_CJDNS: return \"cjdns\";\n     case NET_INTERNAL: return \"internal\";\n+    case NET_UNIX: return \"unix_domain_socket\";",
      "path": "src/netbase.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "7785e4d1796f3deb746916e6fc89f00990fb28cd",
      "in_reply_to_id": null,
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think I'd go for `unix` here (but only because it's shorter).",
      "created_at": "2023-03-31T07:36:46Z",
      "updated_at": "2023-03-31T09:01:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1154121825",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154121825"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 115,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154147617",
      "pull_request_review_id": 1366408214,
      "id": 1154147617,
      "node_id": "PRRC_kwDOABII585EyuUh",
      "diff_hunk": "@@ -89,13 +90,22 @@ def setup_nodes(self):\n         else:\n             self.log.warning(\"Testing without local IPv6 support\")\n \n+        socket_path = os.path.join(self.options.tmpdir, \"socket_path\")",
      "path": "test/functional/feature_proxy.py",
      "position": null,
      "original_position": 21,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "7785e4d1796f3deb746916e6fc89f00990fb28cd",
      "in_reply_to_id": null,
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This needs to be shorter (< 92 chars?). From `man 7 unix`:\r\n\r\n```\r\n   Pathname sockets\r\n       When binding a socket to a pathname, a few rules should be observed for maximum portability and ease of coding:\r\n\r\n       *  The pathname in sun_path should be null-terminated.\r\n\r\n       *  The length of the pathname, including the terminating null byte, should not exceed the size of sun_path.\r\n\r\n       *  The addrlen argument that describes the enclosing sockaddr_un structure should have a value of at least:\r\n\r\n              offsetof(struct sockaddr_un, sun_path)+strlen(addr.sun_path)+1\r\n\r\n          or, more simply, addrlen can be specified as sizeof(struct sockaddr_un).\r\n\r\n       There is some variation in how implementations handle UNIX domain socket addresses that do not follow the above rules.  For example, some (but not all) implementations append a null terminator if none is present in the supplied\r\n       sun_path.\r\n\r\n       When coding portable applications, keep in mind that some implementations have sun_path as short as 92 bytes.\r\n```\r\n\r\nIt probably makes most sense to check this early on in _init.cpp_?",
      "created_at": "2023-03-31T07:59:36Z",
      "updated_at": "2023-03-31T09:01:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1154147617",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154147617"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 93,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154148265",
      "pull_request_review_id": 1366408214,
      "id": 1154148265,
      "node_id": "PRRC_kwDOABII585Eyuep",
      "diff_hunk": "@@ -89,13 +90,22 @@ def setup_nodes(self):\n         else:\n             self.log.warning(\"Testing without local IPv6 support\")\n \n+        socket_path = os.path.join(self.options.tmpdir, \"socket_path\")",
      "path": "test/functional/feature_proxy.py",
      "position": null,
      "original_position": 21,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "7785e4d1796f3deb746916e6fc89f00990fb28cd",
      "in_reply_to_id": 1154147617,
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "On the test this is trying to use a path `/private/var/folders/v7/fs2b0v3s0lz1n57gj9y4xb5m0000gn/T/cirrus-ci-build/ci/scratch/test_runner/test_runner_â‚¿_ðŸƒ_20230331_010828/feature_proxy_156`...",
      "created_at": "2023-03-31T08:00:15Z",
      "updated_at": "2023-03-31T09:01:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1154148265",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154148265"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 93,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154156655",
      "pull_request_review_id": 1366408214,
      "id": 1154156655,
      "node_id": "PRRC_kwDOABII585Eywhv",
      "diff_hunk": "@@ -524,8 +524,10 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n         } else if (use_proxy) {\n             sock = CreateSock(proxy.proxy);\n             if (!sock) {\n+                LogPrintLevel(BCLog::PROXY, BCLog::Level::Debug, \"Failed to create socket to proxy: %s\\n\", proxy.proxy.ToStringAddr());",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "7785e4d1796f3deb746916e6fc89f00990fb28cd",
      "in_reply_to_id": null,
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I wonder if this should be a `Warning` or at least an `Info` level message?",
      "created_at": "2023-03-31T08:08:57Z",
      "updated_at": "2023-03-31T09:01:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1154156655",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154156655"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 527,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154205583",
      "pull_request_review_id": 1366408214,
      "id": 1154205583,
      "node_id": "PRRC_kwDOABII585Ey8eP",
      "diff_hunk": "@@ -1283,7 +1283,10 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n             std::string host_out;\n             uint16_t port_out{0};\n             if (!SplitHostPort(socket_addr, port_out, host_out)) {\n-                return InitError(InvalidPortErrMsg(port_option, socket_addr));\n+                // Allow unix domain sockets for proxy e.g. unix:/some/file/path\n+                if (port_option != \"-proxy\" || socket_addr.find(ADDR_PREFIX_UNIX) != 0) {",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 6,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "7785e4d1796f3deb746916e6fc89f00990fb28cd",
      "in_reply_to_id": null,
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Im curious why you didn't enable it for `-onion` here, as it seems a compartiviely small addtion:\r\n\r\n```diff\r\ndiff --git a/src/init.cpp b/src/init.cpp\r\nindex c0a320136..53b6b2a4b 100644\r\n--- a/src/init.cpp\r\n+++ b/src/init.cpp\r\n@@ -1283,8 +1283,8 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\r\n             std::string host_out;\r\n             uint16_t port_out{0};\r\n             if (!SplitHostPort(socket_addr, port_out, host_out)) {\r\n-                // Allow unix domain sockets for proxy e.g. unix:/some/file/path\r\n-                if (port_option != \"-proxy\" || socket_addr.find(ADDR_PREFIX_UNIX) != 0) {\r\n+                // Allow unix domain sockets for -proxy and -onion e.g. unix:/some/file/path\r\n+                if ((port_option != \"-proxy\" || port_option != \"-onion\") || socket_addr.find(ADDR_PREFIX_UNIX) != 0) {\r\n                     return InitError(InvalidPortErrMsg(port_option, socket_addr));\r\n                 }\r\n             }\r\n```",
      "created_at": "2023-03-31T08:48:07Z",
      "updated_at": "2023-03-31T09:01:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1154205583",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154205583"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1287,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154738130",
      "pull_request_review_id": 1367343663,
      "id": 1154738130,
      "node_id": "PRRC_kwDOABII585E0-fS",
      "diff_hunk": "@@ -1283,7 +1283,10 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n             std::string host_out;\n             uint16_t port_out{0};\n             if (!SplitHostPort(socket_addr, port_out, host_out)) {\n-                return InitError(InvalidPortErrMsg(port_option, socket_addr));\n+                // Allow unix domain sockets for proxy e.g. unix:/some/file/path\n+                if (port_option != \"-proxy\" || socket_addr.find(ADDR_PREFIX_UNIX) != 0) {",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 6,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "7785e4d1796f3deb746916e6fc89f00990fb28cd",
      "in_reply_to_id": 1154205583,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "To literally answer your question: I was not clear on what `-onion` actually does! Now I do, adding this in next update.",
      "created_at": "2023-03-31T17:41:21Z",
      "updated_at": "2023-03-31T18:47:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1154738130",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154738130"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1287,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154739487",
      "pull_request_review_id": 1367343663,
      "id": 1154739487,
      "node_id": "PRRC_kwDOABII585E0-0f",
      "diff_hunk": "@@ -524,8 +524,10 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n         } else if (use_proxy) {\n             sock = CreateSock(proxy.proxy);\n             if (!sock) {\n+                LogPrintLevel(BCLog::PROXY, BCLog::Level::Debug, \"Failed to create socket to proxy: %s\\n\", proxy.proxy.ToStringAddr());",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "7785e4d1796f3deb746916e6fc89f00990fb28cd",
      "in_reply_to_id": 1154156655,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I only added this for my own debugging, we could even just take it out. There is also a \"proxy failed to initialize\" error message in `Socks5()` which will get thrown by `ConnectThroughProxy()` below.",
      "created_at": "2023-03-31T17:43:05Z",
      "updated_at": "2023-03-31T18:47:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1154739487",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154739487"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 527,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154739870",
      "pull_request_review_id": 1367343663,
      "id": 1154739870,
      "node_id": "PRRC_kwDOABII585E0-6e",
      "diff_hunk": "@@ -112,6 +112,7 @@ std::string GetNetworkName(enum Network net)\n     case NET_I2P: return \"i2p\";\n     case NET_CJDNS: return \"cjdns\";\n     case NET_INTERNAL: return \"internal\";\n+    case NET_UNIX: return \"unix_domain_socket\";",
      "path": "src/netbase.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "7785e4d1796f3deb746916e6fc89f00990fb28cd",
      "in_reply_to_id": 1154121825,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "agreed, updated.",
      "created_at": "2023-03-31T17:43:37Z",
      "updated_at": "2023-03-31T18:47:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1154739870",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154739870"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 115,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154783411",
      "pull_request_review_id": 1367343663,
      "id": 1154783411,
      "node_id": "PRRC_kwDOABII585E1Jiz",
      "diff_hunk": "@@ -89,13 +90,22 @@ def setup_nodes(self):\n         else:\n             self.log.warning(\"Testing without local IPv6 support\")\n \n+        socket_path = os.path.join(self.options.tmpdir, \"socket_path\")",
      "path": "test/functional/feature_proxy.py",
      "position": null,
      "original_position": 21,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "7785e4d1796f3deb746916e6fc89f00990fb28cd",
      "in_reply_to_id": 1154147617,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yeah this one may be tricky to work around. Some of the CI temp dir paths are crazy long like that. I'm going to add an init check & test to throw on socket paths longer than 92 characters. For the sake of passing the tests, I'll try using a temp path that is in the parent of `test_runner_...` and we'll see if that is short enough to pass on the CI VMs.\r\n\r\n",
      "created_at": "2023-03-31T18:36:39Z",
      "updated_at": "2023-03-31T18:47:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1154783411",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154783411"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 93,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165103364",
      "pull_request_review_id": 1382786000,
      "id": 1165103364,
      "node_id": "PRRC_kwDOABII585FchEE",
      "diff_hunk": "@@ -524,8 +524,10 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n         } else if (use_proxy) {\n             sock = CreateSock(proxy.proxy);\n             if (!sock) {\n+                LogPrintLevel(BCLog::PROXY, BCLog::Level::Debug, \"Failed to create socket to proxy: %s\\n\", proxy.proxy.ToStringAddr());",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "7785e4d1796f3deb746916e6fc89f00990fb28cd",
      "in_reply_to_id": 1154156655,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "`CreateSock()` already logs a detailed message if it returns `nullptr`. This `LogPrintLevel()` call here is redundant.",
      "created_at": "2023-04-13T07:16:48Z",
      "updated_at": "2023-04-13T15:45:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165103364",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165103364"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 527,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165186109",
      "pull_request_review_id": 1382786000,
      "id": 1165186109,
      "node_id": "PRRC_kwDOABII585Fc1Q9",
      "diff_hunk": "@@ -897,6 +919,17 @@ bool CService::GetSockAddr(struct sockaddr* paddr, socklen_t *addrlen) const\n         paddrin6->sin6_port = htons(port);\n         return true;\n     }\n+#if HAVE_SOCKADDR_UN\n+    if (IsUnix()) {\n+        if (*addrlen < (socklen_t)sizeof(struct sockaddr_un))\n+            return false;\n+        struct sockaddr_un* paddrun = (struct sockaddr_un*)paddr;\n+        paddrun->sun_family = AF_UNIX;\n+        strcpy(paddrun->sun_path, fs::PathToString(m_path).c_str());",
      "path": "src/netaddress.cpp",
      "position": null,
      "original_position": 95,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "44dd4cb505a4e1e7258997a9b687be59760dcdbb",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This is dangerous. Better check the size before copying (untested):\r\n\r\n```suggestion\r\n        const std::string path{fs::PathToString(m_path)};\r\n        if (sizeof(paddrun->sun_path) < path.length() + 1) {\r\n            return false;\r\n        }\r\n        memcpy(paddrun->sun_path, path.c_str(), path.length() + 1);\r\n```\r\n",
      "created_at": "2023-04-13T08:28:20Z",
      "updated_at": "2023-04-13T15:45:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165186109",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165186109"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 928,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165198178",
      "pull_request_review_id": 1382786000,
      "id": 1165198178,
      "node_id": "PRRC_kwDOABII585Fc4Ni",
      "diff_hunk": "@@ -897,6 +919,17 @@ bool CService::GetSockAddr(struct sockaddr* paddr, socklen_t *addrlen) const\n         paddrin6->sin6_port = htons(port);\n         return true;\n     }\n+#if HAVE_SOCKADDR_UN\n+    if (IsUnix()) {\n+        if (*addrlen < (socklen_t)sizeof(struct sockaddr_un))\n+            return false;\n+        struct sockaddr_un* paddrun = (struct sockaddr_un*)paddr;\n+        paddrun->sun_family = AF_UNIX;\n+        strcpy(paddrun->sun_path, fs::PathToString(m_path).c_str());\n+        *addrlen = strlen(paddrun->sun_path) + sizeof(paddrun);",
      "path": "src/netaddress.cpp",
      "position": null,
      "original_position": 96,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "44dd4cb505a4e1e7258997a9b687be59760dcdbb",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This looks wrong as `paddrun` is a pointer (`sizeof(paddrun)` will be always 8 bytes on 64 bit computers). According to https://www.man7.org/linux/man-pages/man7/unix.7.html it should be:\r\n\r\n```cpp\r\noffsetof(struct sockaddr_un, sun_path)+strlen(addr.sun_path)+1\r\n```\r\n\r\nFreeBSD has this, defined in `sys/un.h`:\r\n\r\n```cpp\r\n#define SUN_LEN(su) \\\r\n        (sizeof(*(su)) - sizeof((su)->sun_path) + strlen((su)->sun_path))\r\n```\r\n\r\nand Linux has:\r\n\r\n```cpp\r\n/* Evaluate to actual length of the `sockaddr_un' structure.  */\r\n# define SUN_LEN(ptr) ((size_t) (((struct sockaddr_un *) 0)->sun_path)        \\\r\n                      + strlen ((ptr)->sun_path))\r\n```",
      "created_at": "2023-04-13T08:37:59Z",
      "updated_at": "2023-04-13T15:45:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165198178",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165198178"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 929,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165249878",
      "pull_request_review_id": 1382786000,
      "id": 1165249878,
      "node_id": "PRRC_kwDOABII585FdE1W",
      "diff_hunk": "@@ -219,6 +220,26 @@ bool Lookup(const std::string& name, CService& addr, uint16_t portDefault, bool\n     if (!ContainsNoNUL(name)) {\n         return false;\n     }\n+\n+    // unix domain socket\n+    if (name.find(ADDR_PREFIX_UNIX) == 0) {\n+        // split off \"unix:\" prefix\n+        std::string str{name.substr(ADDR_PREFIX_UNIX.length())};\n+\n+        // https://www.man7.org/linux/man-pages/man7/unix.7.html\n+        //   \"When coding portable applications, keep in mind that some\n+        //   implementations have sun_path as short as 92 bytes.\"\n+        if (str.size() > 92)\n+            return false;",
      "path": "src/netbase.cpp",
      "position": null,
      "original_position": 31,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "44dd4cb505a4e1e7258997a9b687be59760dcdbb",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Better check the actual `sun_path` on the system, and also `sun_path` is supposed to contain the terminating `'\\0'`:\r\n\r\n```suggestion\r\n        if (str.size() + 1 > sizeof(sockaddr_un::sun_path)) {\r\n            return false;\r\n        }\r\n```",
      "created_at": "2023-04-13T09:16:07Z",
      "updated_at": "2023-04-13T15:45:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165249878",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165249878"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 229,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 233,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165255786",
      "pull_request_review_id": 1382786000,
      "id": 1165255786,
      "node_id": "PRRC_kwDOABII585FdGRq",
      "diff_hunk": "@@ -219,6 +220,26 @@ bool Lookup(const std::string& name, CService& addr, uint16_t portDefault, bool\n     if (!ContainsNoNUL(name)) {\n         return false;\n     }\n+\n+    // unix domain socket\n+    if (name.find(ADDR_PREFIX_UNIX) == 0) {\n+        // split off \"unix:\" prefix\n+        std::string str{name.substr(ADDR_PREFIX_UNIX.length())};\n+\n+        // https://www.man7.org/linux/man-pages/man7/unix.7.html\n+        //   \"When coding portable applications, keep in mind that some\n+        //   implementations have sun_path as short as 92 bytes.\"\n+        if (str.size() > 92)\n+            return false;\n+\n+        fs::path path = fs::PathFromString(str);\n+        if (!fs::exists(path))\n+            return false;",
      "path": "src/netbase.cpp",
      "position": null,
      "original_position": 35,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "44dd4cb505a4e1e7258997a9b687be59760dcdbb",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "style: from `doc/developer-notes.md`:\r\n\r\n  - If an `if` only has a single-statement `then`-clause, it can appear\r\n    on the same line as the `if`, without braces. In every other case,\r\n    braces are required, and the `then` and `else` clauses must appear\r\n    correctly indented on a new line.\r\n",
      "created_at": "2023-04-13T09:20:46Z",
      "updated_at": "2023-04-13T15:45:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165255786",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165255786"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 236,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 237,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165266423",
      "pull_request_review_id": 1382786000,
      "id": 1165266423,
      "node_id": "PRRC_kwDOABII585FdI33",
      "diff_hunk": "@@ -219,6 +220,26 @@ bool Lookup(const std::string& name, CService& addr, uint16_t portDefault, bool\n     if (!ContainsNoNUL(name)) {\n         return false;\n     }\n+\n+    // unix domain socket",
      "path": "src/netbase.cpp",
      "position": null,
      "original_position": 22,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "44dd4cb505a4e1e7258997a9b687be59760dcdbb",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It is a bit odd to support `unix:/path/to/socket` in `Lookup()` because there is nothing to lookup in that and it is not like the other inputs supported by `Lookup()` begin with the socket type, e.g. `ipv4://1.2.3.4`.",
      "created_at": "2023-04-13T09:29:34Z",
      "updated_at": "2023-04-13T15:45:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165266423",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165266423"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 224,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165267691",
      "pull_request_review_id": 1382786000,
      "id": 1165267691,
      "node_id": "PRRC_kwDOABII585FdJLr",
      "diff_hunk": "@@ -391,7 +412,7 @@ bool Socks5(const std::string& strDest, uint16_t port, const ProxyCredentials* a\n         return false;\n     }\n     if (pchRet1[0] != SOCKSVersion::SOCKS5) {\n-        return error(\"Proxy failed to initialize\");\n+        return error(\"Proxy failed to initialize.\");",
      "path": "src/netbase.cpp",
      "position": null,
      "original_position": 49,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "44dd4cb505a4e1e7258997a9b687be59760dcdbb",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Unrelated change.",
      "created_at": "2023-04-13T09:30:38Z",
      "updated_at": "2023-04-13T15:45:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165267691",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165267691"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 394,
      "start_side": "LEFT",
      "line": null,
      "original_line": 415,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165281204",
      "pull_request_review_id": 1382786000,
      "id": 1165281204,
      "node_id": "PRRC_kwDOABII585FdMe0",
      "diff_hunk": "@@ -493,8 +514,10 @@ std::unique_ptr<Sock> CreateSockTCP(const CService& address_family)\n     }\n \n     // Create a TCP socket in the address family of the specified service.\n-    SOCKET hSocket = socket(((struct sockaddr*)&sockaddr)->sa_family, SOCK_STREAM, IPPROTO_TCP);\n+    int protocol = address_family.IsUnix() ? 0 : IPPROTO_TCP;\n+    SOCKET hSocket = socket(((struct sockaddr*)&sockaddr)->sa_family, SOCK_STREAM, protocol);",
      "path": "src/netbase.cpp",
      "position": null,
      "original_position": 59,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "44dd4cb505a4e1e7258997a9b687be59760dcdbb",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It is odd to have `CreateSockTCP()` create a non-TCP socket.\r\n\r\nAlso, the code below sets `TCP_NODELAY` on the socket which does not apply to UNIX sockets.",
      "created_at": "2023-04-13T09:40:58Z",
      "updated_at": "2023-04-13T15:45:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165281204",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165281204"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 516,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 518,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165311055",
      "pull_request_review_id": 1382786000,
      "id": 1165311055,
      "node_id": "PRRC_kwDOABII585FdTxP",
      "diff_hunk": "@@ -60,14 +63,17 @@\n # Networks returned by RPC getnetworkinfo, defined in src/rpc/net.cpp::GetNetworksInfo()\n NETWORKS = frozenset({NET_IPV4, NET_IPV6, NET_ONION, NET_I2P, NET_CJDNS})\n \n+# Use the shortest temp path possible since socket paths have a 92-char limit\n+socket_path = os.path.join(tempfile.gettempdir(), \"sockpath\")",
      "path": "test/functional/feature_proxy.py",
      "position": null,
      "original_position": 32,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "44dd4cb505a4e1e7258997a9b687be59760dcdbb",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It is better to stay inside the individual test directory. This allows running multiple tests in parallel. With the above code multiple tests will collide on the common `/tmp/sockpath`.\r\n\r\n`/tmp/bitcoin_func_test_99opr6sq/socks5_proxy` is just 44 chars, should be below the limit on any platform, even if TMPDIR expands to something longer than `/tmp`.",
      "created_at": "2023-04-13T10:07:34Z",
      "updated_at": "2023-04-13T15:45:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165311055",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165311055"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 66,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 67,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165314489",
      "pull_request_review_id": 1382786000,
      "id": 1165314489,
      "node_id": "PRRC_kwDOABII585FdUm5",
      "diff_hunk": "@@ -383,6 +437,18 @@ def networks_dict(d):\n         msg = \"Error: Unknown network specified in -onlynet: 'abc'\"\n         self.nodes[1].assert_start_raises_init_error(expected_msg=msg)\n \n+        self.log.info(\"Test passing too-long unix path to -proxy raises init error\")\n+        self.nodes[1].extra_args = [f\"-proxy=unix:{'x' * 93}\"]\n+        if self.have_unix_sockets:\n+            msg = f\"Error: Invalid -proxy address or hostname: 'unix:{'x' * 93}'\"",
      "path": "test/functional/feature_proxy.py",
      "position": null,
      "original_position": 134,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "44dd4cb505a4e1e7258997a9b687be59760dcdbb",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Given that the actual limit is platform-dependent, I would suggest to pass something really longer here, e.g. 1000 or 5000 chars.",
      "created_at": "2023-04-13T10:10:50Z",
      "updated_at": "2023-04-13T15:45:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165314489",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165314489"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 440,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 443,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165330624",
      "pull_request_review_id": 1382786000,
      "id": 1165330624,
      "node_id": "PRRC_kwDOABII585FdYjA",
      "diff_hunk": "@@ -20,6 +20,10 @@\n #include <iterator>\n #include <tuple>\n \n+#if HAVE_SOCKADDR_UN\n+#include <sys/un.h>\n+#endif",
      "path": "src/netaddress.cpp",
      "position": null,
      "original_position": 6,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "44dd4cb505a4e1e7258997a9b687be59760dcdbb",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "The include is introduced in the first commit and surrounded by `#if HAVE_SOCKADDR_UN` in the second commit. This means that the first commit is not self-contained (would not compile on some platforms). Better introduce the configure check first.",
      "created_at": "2023-04-13T10:26:47Z",
      "updated_at": "2023-04-13T15:45:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165330624",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165330624"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 23,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 25,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165338076",
      "pull_request_review_id": 1382786000,
      "id": 1165338076,
      "node_id": "PRRC_kwDOABII585FdaXc",
      "diff_hunk": "@@ -136,9 +143,16 @@ class CNetAddr\n      */\n     uint32_t m_scope_id{0};\n \n+    /**\n+     * Filesystem path for unix domain socket (NET_UNIX)\n+     */\n+    fs::path m_path;",
      "path": "src/netaddress.h",
      "position": null,
      "original_position": 35,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "44dd4cb505a4e1e7258997a9b687be59760dcdbb",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "If this approach is chosen (to extend `CNetAddr` to support unix file addresses), then it would be better to store the path in the `m_addr` member instead of introducing a new one. `m_addr` is a vector of `uint8_t` - that is generic enough to store anything in it.\r\n\r\n`sizeof(CNetAddr)` on `master` is 32 and `sizeof(fs::path)` is 24 bytes, so `CNetAddr` would become almost twice as big.",
      "created_at": "2023-04-13T10:34:32Z",
      "updated_at": "2023-04-13T15:45:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165338076",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165338076"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 149,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165801803",
      "pull_request_review_id": 1383845487,
      "id": 1165801803,
      "node_id": "PRRC_kwDOABII585FfLlL",
      "diff_hunk": "@@ -60,14 +63,17 @@\n # Networks returned by RPC getnetworkinfo, defined in src/rpc/net.cpp::GetNetworksInfo()\n NETWORKS = frozenset({NET_IPV4, NET_IPV6, NET_ONION, NET_I2P, NET_CJDNS})\n \n+# Use the shortest temp path possible since socket paths have a 92-char limit\n+socket_path = os.path.join(tempfile.gettempdir(), \"sockpath\")",
      "path": "test/functional/feature_proxy.py",
      "position": null,
      "original_position": 32,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "44dd4cb505a4e1e7258997a9b687be59760dcdbb",
      "in_reply_to_id": 1165311055,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "See this ci failure: https://cirrus-ci.com/task/5039125594636288?logs=ci#L2638-L2640\r\n\r\nThis is why I used a shorter path, sometimes TMPDIR is > 50 characters! You have a good point about getting max `sun_path` from the system though, maybe it will balance out\r\n\r\n```\r\nFile \"/private/var/folders/v7/fs2b0v3s0lz1n57gj9y4xb5m0000gn/T/cirrus-ci-build/ci/scratch/build/bitcoin-arm64-apple-darwin/test/functional/test_framework/socks5.py\", line 131, in __init__\r\nself.s.bind(conf.addr)\r\nOSError: AF_UNIX path too long\r\n```",
      "created_at": "2023-04-13T16:55:14Z",
      "updated_at": "2023-04-13T16:55:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165801803",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165801803"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 66,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 67,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1166002075",
      "pull_request_review_id": 1384170843,
      "id": 1166002075,
      "node_id": "PRRC_kwDOABII585Ff8eb",
      "diff_hunk": "@@ -136,9 +143,16 @@ class CNetAddr\n      */\n     uint32_t m_scope_id{0};\n \n+    /**\n+     * Filesystem path for unix domain socket (NET_UNIX)\n+     */\n+    fs::path m_path;",
      "path": "src/netaddress.h",
      "position": null,
      "original_position": 35,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "44dd4cb505a4e1e7258997a9b687be59760dcdbb",
      "in_reply_to_id": 1165338076,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I'm a bit intimidated by the syntax `prevector<ADDR_IPV6_SIZE, uint8_t> m_addr{ADDR_IPV6_SIZE, 0x0};` -- is that only 16 bytes?",
      "created_at": "2023-04-13T20:38:00Z",
      "updated_at": "2023-04-13T20:38:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1166002075",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1166002075"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 149,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1166712133",
      "pull_request_review_id": 1385270065,
      "id": 1166712133,
      "node_id": "PRRC_kwDOABII585Fip1F",
      "diff_hunk": "@@ -60,14 +63,17 @@\n # Networks returned by RPC getnetworkinfo, defined in src/rpc/net.cpp::GetNetworksInfo()\n NETWORKS = frozenset({NET_IPV4, NET_IPV6, NET_ONION, NET_I2P, NET_CJDNS})\n \n+# Use the shortest temp path possible since socket paths have a 92-char limit\n+socket_path = os.path.join(tempfile.gettempdir(), \"sockpath\")",
      "path": "test/functional/feature_proxy.py",
      "position": null,
      "original_position": 32,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "44dd4cb505a4e1e7258997a9b687be59760dcdbb",
      "in_reply_to_id": 1165311055,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I see. Then, to avoid multiple tests colliding on `/tmp/socket`, maybe this:\r\n\r\n```python\r\nsocket_path = os.path.join(tempfile.TemporaryDirectory(), \"s\")\r\n```",
      "created_at": "2023-04-14T11:19:57Z",
      "updated_at": "2023-04-14T11:19:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1166712133",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1166712133"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 66,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 67,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1166722759",
      "pull_request_review_id": 1385287222,
      "id": 1166722759,
      "node_id": "PRRC_kwDOABII585FisbH",
      "diff_hunk": "@@ -136,9 +143,16 @@ class CNetAddr\n      */\n     uint32_t m_scope_id{0};\n \n+    /**\n+     * Filesystem path for unix domain socket (NET_UNIX)\n+     */\n+    fs::path m_path;",
      "path": "src/netaddress.h",
      "position": null,
      "original_position": 35,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "44dd4cb505a4e1e7258997a9b687be59760dcdbb",
      "in_reply_to_id": 1165338076,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It begins its life with 16 bytes pre-allocated (without using `new` or `malloc()`), but this is just an optimization which can be ignored. It is supposed to behave like `std::vector`.\r\n\r\nSomething like this should work to store `std::string` in it (untested):\r\n\r\n```cpp\r\nstd::string path = ...;\r\nm_addr.assign(path.begin(), path.end());\r\n```",
      "created_at": "2023-04-14T11:33:02Z",
      "updated_at": "2023-04-14T11:33:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1166722759",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1166722759"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 149,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1166806386",
      "pull_request_review_id": 1385416057,
      "id": 1166806386,
      "node_id": "PRRC_kwDOABII585FjA1y",
      "diff_hunk": "@@ -1260,10 +1260,23 @@ AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[\n   ]], [[\n     getauxval(AT_HWCAP);\n   ]])],\n- [ AC_MSG_RESULT([yes]); HAVE_STRONG_GETAUXVAL=1; AC_DEFINE([HAVE_STRONG_GETAUXVAL], [1], [Define this symbol to build code that uses getauxval)]) ],\n+ [ AC_MSG_RESULT([yes]); HAVE_STRONG_GETAUXVAL=1; AC_DEFINE([HAVE_STRONG_GETAUXVAL], [1], [Define this symbol to build code that uses getauxval]) ],",
      "path": "configure.ac",
      "position": 5,
      "original_position": 5,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "2c19dd7c1a6aaf5cf7f879ae5aa51683de2ced13",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Unrelated change, I am not sure I fully understand. Is it the case that before the message was `Define this symbol to build code that uses getauxval)` and this change just fixes the message to not have a trailing `)`?",
      "created_at": "2023-04-14T12:59:10Z",
      "updated_at": "2023-05-16T06:18:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1166806386",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1166806386"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": 1266,
      "original_start_line": 1263,
      "start_side": "LEFT",
      "line": 1266,
      "original_line": 1266,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1194955775",
      "pull_request_review_id": 1428254173,
      "id": 1194955775,
      "node_id": "PRRC_kwDOABII585HOZP_",
      "diff_hunk": "@@ -1260,10 +1260,23 @@ AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[\n   ]], [[\n     getauxval(AT_HWCAP);\n   ]])],\n- [ AC_MSG_RESULT([yes]); HAVE_STRONG_GETAUXVAL=1; AC_DEFINE([HAVE_STRONG_GETAUXVAL], [1], [Define this symbol to build code that uses getauxval)]) ],\n+ [ AC_MSG_RESULT([yes]); HAVE_STRONG_GETAUXVAL=1; AC_DEFINE([HAVE_STRONG_GETAUXVAL], [1], [Define this symbol to build code that uses getauxval]) ],",
      "path": "configure.ac",
      "position": 5,
      "original_position": 5,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "2c19dd7c1a6aaf5cf7f879ae5aa51683de2ced13",
      "in_reply_to_id": 1166806386,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yeah",
      "created_at": "2023-05-16T10:28:26Z",
      "updated_at": "2023-05-16T10:28:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1194955775",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1194955775"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": 1266,
      "original_start_line": 1263,
      "start_side": "LEFT",
      "line": 1266,
      "original_line": 1266,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217480535",
      "pull_request_review_id": 1461645134,
      "id": 1217480535,
      "node_id": "PRRC_kwDOABII585IkUdX",
      "diff_hunk": "@@ -37,6 +37,12 @@\n #include <unistd.h>\n #endif\n \n+// Linux defines sa_family_t as `unsigned short` but on Windows it's `u_short`\n+// See https://learn.microsoft.com/en-us/windows/win32/api/winsock/ns-winsock-sockaddr#syntax\n+#ifdef WIN32\n+typedef u_short sa_family_t;\n+#endif",
      "path": "src/compat/compat.h",
      "position": null,
      "original_position": 8,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "The comment gives the impression that `sa_family_t` is defined on Windows (as `u_short`), but it is not defined at all (otherwise this `typedef u_short sa_family_t;` would not compile because it redefines it, right?). Maybe reword the comment to something like:\r\n\r\n```cpp\r\n// Windows does not have `sa_family_t` - it defines `sockaddr::sa_family` as `u_short`.\r\n// Thus define `sa_family_t` on Windows too so that the rest of the code can use `sa_family_t`.\r\n```",
      "created_at": "2023-06-05T04:55:31Z",
      "updated_at": "2023-06-05T09:48:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217480535",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217480535"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 40,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 44,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217685437",
      "pull_request_review_id": 1461645134,
      "id": 1217685437,
      "node_id": "PRRC_kwDOABII585IlGe9",
      "diff_hunk": "@@ -529,6 +529,7 @@ class CService : public CNetAddr\n     uint16_t GetPort() const;\n     bool GetSockAddr(struct sockaddr* paddr, socklen_t* addrlen) const;\n     bool SetSockAddr(const struct sockaddr* paddr);\n+    [[nodiscard]] sa_family_t GetTCPFamily() const;",
      "path": "src/netaddress.h",
      "position": null,
      "original_position": 4,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "TCP is a specific protocol ([at layer 4 in the OSI model](https://en.wikipedia.org/wiki/OSI_model)) while this refers to layer 3. Maybe rename it to something like `GetProtocolFamily()`, `GetAddressFamily()`, `GetFamily()` or `GetSAFamily()`.",
      "created_at": "2023-06-05T08:05:08Z",
      "updated_at": "2023-06-05T09:48:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217685437",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217685437"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 532,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217688663",
      "pull_request_review_id": 1461645134,
      "id": 1217688663,
      "node_id": "PRRC_kwDOABII585IlHRX",
      "diff_hunk": "@@ -843,6 +843,19 @@ bool CService::SetSockAddr(const struct sockaddr *paddr)\n     }\n }\n \n+sa_family_t CService::GetTCPFamily() const\n+{\n+    switch (m_net) {\n+    case NET_IPV4:\n+        return AF_INET;\n+    case NET_IPV6:\n+        return AF_INET6;\n+    default:\n+        return AF_UNSPEC; // Not TCP",
      "path": "src/netaddress.cpp",
      "position": null,
      "original_position": 12,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n        return AF_UNSPEC;\r\n```",
      "created_at": "2023-06-05T08:07:51Z",
      "updated_at": "2023-06-05T09:48:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217688663",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217688663"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 854,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217689114",
      "pull_request_review_id": 1461645134,
      "id": 1217689114,
      "node_id": "PRRC_kwDOABII585IlHYa",
      "diff_hunk": "@@ -843,6 +843,19 @@ bool CService::SetSockAddr(const struct sockaddr *paddr)\n     }\n }\n \n+sa_family_t CService::GetTCPFamily() const\n+{\n+    switch (m_net) {\n+    case NET_IPV4:\n+        return AF_INET;\n+    case NET_IPV6:\n+        return AF_INET6;\n+    default:\n+        return AF_UNSPEC; // Not TCP\n+    }\n+\n+}",
      "path": "src/netaddress.cpp",
      "position": null,
      "original_position": 15,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Unnecessary empty line.",
      "created_at": "2023-06-05T08:08:14Z",
      "updated_at": "2023-06-05T09:48:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217689114",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217689114"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 855,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 832,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217692250",
      "pull_request_review_id": 1461645134,
      "id": 1217692250,
      "node_id": "PRRC_kwDOABII585IlIJa",
      "diff_hunk": "@@ -843,6 +843,19 @@ bool CService::SetSockAddr(const struct sockaddr *paddr)\n     }\n }\n \n+sa_family_t CService::GetTCPFamily() const\n+{\n+    switch (m_net) {\n+    case NET_IPV4:\n+        return AF_INET;\n+    case NET_IPV6:\n+        return AF_INET6;",
      "path": "src/netaddress.cpp",
      "position": null,
      "original_position": 10,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "`CService::GetSockAddr()` treats CJDNS as IPv6. So:\r\n```suggestion\r\n    case NET_IPV6:\r\n    case NET_CJDNS:\r\n        return AF_INET6;\r\n```",
      "created_at": "2023-06-05T08:10:57Z",
      "updated_at": "2023-06-05T09:48:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217692250",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217692250"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 851,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 828,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217700884",
      "pull_request_review_id": 1461645134,
      "id": 1217700884,
      "node_id": "PRRC_kwDOABII585IlKQU",
      "diff_hunk": "@@ -178,16 +209,16 @@ CService LookupNumeric(const std::string& name, uint16_t portDefault = 0, DNSLoo\n bool LookupSubNet(const std::string& subnet_str, CSubNet& subnet_out);\n \n /**\n- * Create a TCP socket in the given address family.\n+ * Create a TCP or UNIX socket in the given address family.\n  * @param[in] address_family The socket is created in the same address family as this address.\n  * @return pointer to the created Sock object or unique_ptr that owns nothing in case of failure\n  */\n-std::unique_ptr<Sock> CreateSockTCP(const CService& address_family);\n+std::unique_ptr<Sock> CreateSockOS(const sa_family_t& address_family);",
      "path": "src/netbase.h",
      "position": null,
      "original_position": 69,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "`sa_family_t` is cheap to copy. No need to pass it as a const reference:\r\n\r\n```cpp\r\nstd::unique_ptr<Sock> CreateSockOS(sa_family_t address_family);\r\n```",
      "created_at": "2023-06-05T08:17:13Z",
      "updated_at": "2023-06-05T09:48:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217700884",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217700884"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 185,
      "start_side": "LEFT",
      "line": null,
      "original_line": 216,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217719465",
      "pull_request_review_id": 1461645134,
      "id": 1217719465,
      "node_id": "PRRC_kwDOABII585IlOyp",
      "diff_hunk": "@@ -456,18 +482,22 @@ bool Socks5(const std::string& strDest, uint16_t port, const ProxyCredentials* a\n     return true;\n }\n \n-std::unique_ptr<Sock> CreateSockTCP(const CService& address_family)\n+std::unique_ptr<Sock> CreateSockOS(const sa_family_t& address_family)\n {\n-    // Create a sockaddr from the specified service.\n-    struct sockaddr_storage sockaddr;\n-    socklen_t len = sizeof(sockaddr);\n-    if (!address_family.GetSockAddr((struct sockaddr*)&sockaddr, &len)) {\n-        LogPrintf(\"Cannot create socket for %s: unsupported network\\n\", address_family.ToStringAddrPort());\n-        return nullptr;\n+    // Not IPv4, IPv6 or UNIX\n+    if (address_family == AF_UNSPEC) return nullptr;\n+\n+#if HAVE_SOCKADDR_UN\n+    // Create a UNIX socket.\n+    if (address_family == AF_UNIX) {\n+        SOCKET hSocket = socket(AF_UNIX, SOCK_STREAM, 0);\n+        if (hSocket == INVALID_SOCKET) return nullptr;\n+        return std::make_unique<Sock>(hSocket);",
      "path": "src/netbase.cpp",
      "position": null,
      "original_position": 61,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "All tuning that happens to the socket below in this function seems relevant to UNIX sockets too, except `TCP_NODELAY`.\r\n\r\n```diff\r\n--- i/src/netbase.cpp\r\n+++ w/src/netbase.cpp\r\n@@ -484,23 +484,21 @@ bool Socks5(const std::string& strDest, uint16_t port, const ProxyCredentials* a\r\n \r\n std::unique_ptr<Sock> CreateSockOS(const sa_family_t& address_family)\r\n {\r\n     // Not IPv4, IPv6 or UNIX\r\n     if (address_family == AF_UNSPEC) return nullptr;\r\n \r\n+    int protocol{IPPROTO_TCP};\r\n #if HAVE_SOCKADDR_UN\r\n-    // Create a UNIX socket.\r\n     if (address_family == AF_UNIX) {\r\n-        SOCKET hSocket = socket(AF_UNIX, SOCK_STREAM, 0);\r\n-        if (hSocket == INVALID_SOCKET) return nullptr;\r\n-        return std::make_unique<Sock>(hSocket);\r\n+        protocol = 0;\r\n     }\r\n #endif\r\n \r\n-    // Create a TCP socket in the address family of the specified service.\r\n-    SOCKET hSocket = socket(address_family, SOCK_STREAM, IPPROTO_TCP);\r\n+    // Create a socket in the specified address family.\r\n+    SOCKET hSocket = socket(address_family, SOCK_STREAM, protocol);\r\n     if (hSocket == INVALID_SOCKET) {\r\n         return nullptr;\r\n     }\r\n \r\n     auto sock = std::make_unique<Sock>(hSocket);\r\n \r\n@@ -518,23 +516,30 @@ std::unique_ptr<Sock> CreateSockOS(const sa_family_t& address_family)\r\n     if (sock->SetSockOpt(SOL_SOCKET, SO_NOSIGPIPE, (void*)&set, sizeof(int)) == SOCKET_ERROR) {\r\n         LogPrintf(\"Error setting SO_NOSIGPIPE on socket: %s, continuing anyway\\n\",\r\n                   NetworkErrorString(WSAGetLastError()));\r\n     }\r\n #endif\r\n \r\n+    // Set the non-blocking option on the socket.\r\n+    if (!sock->SetNonBlocking()) {\r\n+        LogPrintf(\"Error setting socket to non-blocking: %s\\n\", NetworkErrorString(WSAGetLastError()));\r\n+        return nullptr;\r\n+    }\r\n+\r\n+#if HAVE_SOCKADDR_UN\r\n+    if (address_family == AF_UNIX) {\r\n+        return sock;\r\n+    }\r\n+#endif\r\n+\r\n     // Set the no-delay option (disable Nagle's algorithm) on the TCP socket.\r\n     const int on{1};\r\n     if (sock->SetSockOpt(IPPROTO_TCP, TCP_NODELAY, &on, sizeof(on)) == SOCKET_ERROR) {\r\n         LogPrint(BCLog::NET, \"Unable to set TCP_NODELAY on a newly created socket, continuing anyway\\n\");\r\n     }\r\n \r\n-    // Set the non-blocking option on the socket.\r\n-    if (!sock->SetNonBlocking()) {\r\n-        LogPrintf(\"Error setting socket to non-blocking: %s\\n\", NetworkErrorString(WSAGetLastError()));\r\n-        return nullptr;\r\n-    }\r\n     return sock;\r\n }\r\n```",
      "created_at": "2023-06-05T08:31:32Z",
      "updated_at": "2023-06-05T09:48:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217719465",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217719465"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 495,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217741453",
      "pull_request_review_id": 1461645134,
      "id": 1217741453,
      "node_id": "PRRC_kwDOABII585IlUKN",
      "diff_hunk": "@@ -45,16 +48,44 @@ static inline bool operator&(ConnectionDirection a, ConnectionDirection b) {\n     return (underlying(a) & underlying(b));\n }\n \n+/**\n+ * Check if a string is a valid UNIX domain socket path\n+ *\n+ * @param      name     The string provided by the user representing a local path\n+ *\n+ * @returns Whether the string has proper format, length, and points to an existing file path\n+ */\n+bool IsUnixSocketPath(const std::string& name);\n+\n class Proxy\n {\n public:\n-    Proxy(): randomize_credentials(false) {}\n-    explicit Proxy(const CService &_proxy, bool _randomize_credentials=false): proxy(_proxy), randomize_credentials(_randomize_credentials) {}\n-\n-    bool IsValid() const { return proxy.IsValid(); }\n+    Proxy(): is_unix_socket(false), randomize_credentials(false) {}\n+    explicit Proxy(const CService &_proxy, bool _randomize_credentials=false): proxy(_proxy), is_unix_socket(false), randomize_credentials(_randomize_credentials) {}\n+    explicit Proxy(const std::string path, bool _randomize_credentials=false): unix_socket_path(path), is_unix_socket(true), randomize_credentials(_randomize_credentials) {}",
      "path": "src/netbase.h",
      "position": null,
      "original_position": 32,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Pass `path` by const reference, strings are expensive to copy.\r\n\r\n```suggestion\r\n    explicit Proxy(const std::string& path, bool _randomize_credentials=false): unix_socket_path(path), is_unix_socket(true), randomize_credentials(_randomize_credentials) {}\r\n```",
      "created_at": "2023-06-05T08:48:51Z",
      "updated_at": "2023-06-05T09:48:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217741453",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217741453"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 65,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217743952",
      "pull_request_review_id": 1461645134,
      "id": 1217743952,
      "node_id": "PRRC_kwDOABII585IlUxQ",
      "diff_hunk": "@@ -45,16 +48,44 @@ static inline bool operator&(ConnectionDirection a, ConnectionDirection b) {\n     return (underlying(a) & underlying(b));\n }\n \n+/**\n+ * Check if a string is a valid UNIX domain socket path\n+ *\n+ * @param      name     The string provided by the user representing a local path\n+ *\n+ * @returns Whether the string has proper format, length, and points to an existing file path\n+ */\n+bool IsUnixSocketPath(const std::string& name);\n+\n class Proxy\n {\n public:\n-    Proxy(): randomize_credentials(false) {}\n-    explicit Proxy(const CService &_proxy, bool _randomize_credentials=false): proxy(_proxy), randomize_credentials(_randomize_credentials) {}\n-\n-    bool IsValid() const { return proxy.IsValid(); }\n+    Proxy(): is_unix_socket(false), randomize_credentials(false) {}\n+    explicit Proxy(const CService &_proxy, bool _randomize_credentials=false): proxy(_proxy), is_unix_socket(false), randomize_credentials(_randomize_credentials) {}\n+    explicit Proxy(const std::string path, bool _randomize_credentials=false): unix_socket_path(path), is_unix_socket(true), randomize_credentials(_randomize_credentials) {}\n \n     CService proxy;\n+    std::string unix_socket_path;\n+    bool is_unix_socket;\n     bool randomize_credentials;",
      "path": "src/netbase.h",
      "position": null,
      "original_position": 37,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Members should start with `m_`. Maybe also rename the existent `randomize_credentials` to `m_randomize_credentials` (in a separate commit).",
      "created_at": "2023-06-05T08:50:50Z",
      "updated_at": "2023-06-05T09:48:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217743952",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217743952"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 68,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 70,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217747937",
      "pull_request_review_id": 1461645134,
      "id": 1217747937,
      "node_id": "PRRC_kwDOABII585IlVvh",
      "diff_hunk": "@@ -45,16 +48,44 @@ static inline bool operator&(ConnectionDirection a, ConnectionDirection b) {\n     return (underlying(a) & underlying(b));\n }\n \n+/**\n+ * Check if a string is a valid UNIX domain socket path\n+ *\n+ * @param      name     The string provided by the user representing a local path\n+ *\n+ * @returns Whether the string has proper format, length, and points to an existing file path\n+ */\n+bool IsUnixSocketPath(const std::string& name);\n+\n class Proxy\n {\n public:\n-    Proxy(): randomize_credentials(false) {}\n-    explicit Proxy(const CService &_proxy, bool _randomize_credentials=false): proxy(_proxy), randomize_credentials(_randomize_credentials) {}\n-\n-    bool IsValid() const { return proxy.IsValid(); }\n+    Proxy(): is_unix_socket(false), randomize_credentials(false) {}\n+    explicit Proxy(const CService &_proxy, bool _randomize_credentials=false): proxy(_proxy), is_unix_socket(false), randomize_credentials(_randomize_credentials) {}\n+    explicit Proxy(const std::string path, bool _randomize_credentials=false): unix_socket_path(path), is_unix_socket(true), randomize_credentials(_randomize_credentials) {}\n \n     CService proxy;\n+    std::string unix_socket_path;\n+    bool is_unix_socket;\n     bool randomize_credentials;\n+\n+    bool IsValid() const\n+    {\n+        if (is_unix_socket) return IsUnixSocketPath(unix_socket_path);\n+        return proxy.IsValid();\n+    }\n+\n+    sa_family_t GetFamily() const\n+    {\n+        if (is_unix_socket) return AF_UNIX;\n+        return proxy.GetTCPFamily();\n+    }\n+\n+    std::string ToStringAddrPort() const\n+    {\n+        if (is_unix_socket) return unix_socket_path;\n+        return proxy.ToStringAddrPort();\n+    }",
      "path": "src/netbase.h",
      "position": null,
      "original_position": 55,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Better omit `AddrPort` from the name of this method because it does not apply to UNIX sockets. Just `ToString()` seems fine (but still call `proxy.ToStringAddrPort()` for non-UNIX sockets).",
      "created_at": "2023-06-05T08:53:55Z",
      "updated_at": "2023-06-05T09:48:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217747937",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217747937"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 84,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 89,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217775186",
      "pull_request_review_id": 1461645134,
      "id": 1217775186,
      "node_id": "PRRC_kwDOABII585IlcZS",
      "diff_hunk": "@@ -214,6 +218,28 @@ CService LookupNumeric(const std::string& name, uint16_t portDefault, DNSLookupF\n     return Lookup(name, portDefault, /*fAllowLookup=*/false, dns_lookup_function).value_or(CService{});\n }\n \n+bool IsUnixSocketPath(const std::string& name)\n+{\n+#if HAVE_SOCKADDR_UN\n+    if (name.find(ADDR_PREFIX_UNIX) != 0) return false;\n+\n+    // Split off \"unix:\" prefix\n+    std::string str{name.substr(ADDR_PREFIX_UNIX.length())};\n+\n+    // Path size limit is platform-dependent\n+    // see https://manpages.ubuntu.com/manpages/xenial/en/man7/unix.7.html\n+    if (str.size() + 1 > sizeof(((sockaddr_un*)nullptr)->sun_path)) return false;\n+\n+    // Path must exist\n+    fs::path path = fs::PathFromString(str);\n+    if (!fs::exists(path)) return false;",
      "path": "src/netbase.cpp",
      "position": null,
      "original_position": 29,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I wonder if this check is desirable. It makes `IsUnixSocketPath()` volatile - for example if the Tor server is not yet started it will be false and the moment it is started it will become true, or if the Tor server is restarted it will flip from true to false and back.\r\n\r\nWith this check `bitcoind` will refuse to start if the Tor server is not started yet. This differs from the TCP case where the Tor server can start later.\r\n\r\nWith TCP we only check if the given address is something we can _try_ to connect to. Like \"ok, it is 4 digits separated by 3 dots, maybe I can connect to this later when needed\". `CService::IsValid()` does not check whether somebody is listening on that address and port and that we can connect to it. An equivalent check for UNIX sockets would be \"ok, if it starts with unix: and is short enough maybe I can connect to this later when needed\".",
      "created_at": "2023-06-05T09:15:19Z",
      "updated_at": "2023-06-05T09:52:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217775186",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217775186"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 233,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 235,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217785125",
      "pull_request_review_id": 1461645134,
      "id": 1217785125,
      "node_id": "PRRC_kwDOABII585Ile0l",
      "diff_hunk": "@@ -1286,7 +1286,14 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n             std::string host_out;\n             uint16_t port_out{0};\n             if (!SplitHostPort(socket_addr, port_out, host_out)) {\n+#if HAVE_SOCKADDR_UN\n+                // Allow unix domain sockets for -proxy and -onion e.g. unix:/some/file/path\n+                if ((port_option != \"-proxy\" && port_option != \"-onion\") || socket_addr.find(ADDR_PREFIX_UNIX) != 0) {",
      "path": "src/init.cpp",
      "position": 30,
      "original_position": 6,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This should use `IsUnixSocketPath()`?\r\n\r\n```suggestion\r\n                if ((port_option != \"-proxy\" && port_option != \"-onion\") || !IsUnixSocketPath(socket_addr)) {\r\n```",
      "created_at": "2023-06-05T09:21:43Z",
      "updated_at": "2023-06-05T09:48:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217785125",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217785125"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1299,
      "original_line": 1299,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217795272",
      "pull_request_review_id": 1461645134,
      "id": 1217795272,
      "node_id": "PRRC_kwDOABII585IlhTI",
      "diff_hunk": "@@ -60,14 +63,17 @@\n # Networks returned by RPC getnetworkinfo, defined in src/rpc/net.cpp::GetNetworksInfo()\n NETWORKS = frozenset({NET_IPV4, NET_IPV6, NET_ONION, NET_I2P, NET_CJDNS})\n \n+# Use the shortest temp path possible since paths may have as little as 92-char limit",
      "path": "test/functional/feature_proxy.py",
      "position": null,
      "original_position": 31,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit:\r\n\r\n```suggestion\r\n# Use the shortest temp path possible since UNIX sockets may have as little as 92-char limit\r\n```",
      "created_at": "2023-06-05T09:28:53Z",
      "updated_at": "2023-06-05T09:48:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217795272",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217795272"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 66,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1218382890",
      "pull_request_review_id": 1463052208,
      "id": 1218382890,
      "node_id": "PRRC_kwDOABII585Inwwq",
      "diff_hunk": "@@ -1286,7 +1286,14 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n             std::string host_out;\n             uint16_t port_out{0};\n             if (!SplitHostPort(socket_addr, port_out, host_out)) {\n+#if HAVE_SOCKADDR_UN\n+                // Allow unix domain sockets for -proxy and -onion e.g. unix:/some/file/path\n+                if ((port_option != \"-proxy\" && port_option != \"-onion\") || socket_addr.find(ADDR_PREFIX_UNIX) != 0) {",
      "path": "src/init.cpp",
      "position": 30,
      "original_position": 6,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "in_reply_to_id": 1217785125,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This change would make `feature_proxy.py` test fail because the error would be `\"Invalid port...\"` which is misleading if the real problem is (for example) a too-long file path, which will get caught by `IsUnixSocketPath()` on L1370 and described as `\"Invalid -proxy address or hostname...\"`. So I think it makes more sense to keep this line as-is: if we think the user is trying to set a UNIX socket path, we just ignore the invalid port check.",
      "created_at": "2023-06-05T17:32:29Z",
      "updated_at": "2023-06-05T17:32:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1218382890",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1218382890"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1299,
      "original_line": 1299,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1239079790",
      "pull_request_review_id": 1494066986,
      "id": 1239079790,
      "node_id": "PRRC_kwDOABII585J2ttu",
      "diff_hunk": "@@ -153,3 +153,12 @@ def test_ipv6_local():\n     except socket.error:\n         have_ipv6 = False\n     return have_ipv6\n+\n+def test_unix_socket():\n+    '''Return True if UNIX sockets are available on this platform.'''\n+    try:\n+        socket.AF_UNIX",
      "path": "test/functional/test_framework/netutil.py",
      "position": 8,
      "original_position": 8,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "64d0f234e9aac490b03a5c019e86f1da56e62e01",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It's possible this could pass, but the necessary configure check fail, in theory. But maybe we want the test(s) to fail in that scenario anyway.",
      "created_at": "2023-06-22T22:14:29Z",
      "updated_at": "2023-06-22T22:14:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1239079790",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1239079790"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 165,
      "original_line": 165,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1246758964",
      "pull_request_review_id": 1505515197,
      "id": 1246758964,
      "node_id": "PRRC_kwDOABII585KUAg0",
      "diff_hunk": "@@ -178,16 +209,16 @@ CService LookupNumeric(const std::string& name, uint16_t portDefault = 0, DNSLoo\n bool LookupSubNet(const std::string& subnet_str, CSubNet& subnet_out);\n \n /**\n- * Create a TCP socket in the given address family.\n+ * Create a TCP or UNIX socket in the given address family.\n  * @param[in] address_family The socket is created in the same address family as this address.\n  * @return pointer to the created Sock object or unique_ptr that owns nothing in case of failure\n  */\n-std::unique_ptr<Sock> CreateSockTCP(const CService& address_family);\n+std::unique_ptr<Sock> CreateSockOS(const sa_family_t address_family);",
      "path": "src/netbase.h",
      "position": null,
      "original_position": 70,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "64d0f234e9aac490b03a5c019e86f1da56e62e01",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: it does not have to be `const` when passing by value - there is no way to for the function to modify the variable that is being passed (and have effects visible outside of the function).\r\n\r\n```suggestion\r\nstd::unique_ptr<Sock> CreateSockOS(sa_family_t address_family);\r\n```\r\n\r\nSee f3() in http://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#Rf-in",
      "created_at": "2023-06-29T15:10:35Z",
      "updated_at": "2023-06-29T16:12:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1246758964",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1246758964"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 216,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1246856004",
      "pull_request_review_id": 1505662729,
      "id": 1246856004,
      "node_id": "PRRC_kwDOABII585KUYNE",
      "diff_hunk": "@@ -45,16 +48,44 @@ static inline bool operator&(ConnectionDirection a, ConnectionDirection b) {\n     return (underlying(a) & underlying(b));\n }\n \n+/**\n+ * Check if a string is a valid UNIX domain socket path\n+ *\n+ * @param      name     The string provided by the user representing a local path\n+ *\n+ * @returns Whether the string has proper format, length, and points to an existing file path\n+ */\n+bool IsUnixSocketPath(const std::string& name);\n+\n class Proxy\n {\n public:\n-    Proxy(): randomize_credentials(false) {}\n-    explicit Proxy(const CService &_proxy, bool _randomize_credentials=false): proxy(_proxy), randomize_credentials(_randomize_credentials) {}\n-\n-    bool IsValid() const { return proxy.IsValid(); }\n+    Proxy(): is_unix_socket(false), randomize_credentials(false) {}\n+    explicit Proxy(const CService &_proxy, bool _randomize_credentials=false): proxy(_proxy), is_unix_socket(false), randomize_credentials(_randomize_credentials) {}\n+    explicit Proxy(const std::string path, bool _randomize_credentials=false): unix_socket_path(path), is_unix_socket(true), randomize_credentials(_randomize_credentials) {}\n \n     CService proxy;\n+    std::string unix_socket_path;\n+    bool is_unix_socket;\n     bool randomize_credentials;",
      "path": "src/netbase.h",
      "position": null,
      "original_position": 37,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "in_reply_to_id": 1217743952,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "The new member `unix_socket_path` is still without `m_` prefix. Only `is_unix_socket` was renamed to `m_is_unix_socket`.",
      "created_at": "2023-06-29T16:13:34Z",
      "updated_at": "2023-06-29T16:13:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1246856004",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1246856004"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 68,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 70,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1251211129",
      "pull_request_review_id": 1511673742,
      "id": 1251211129,
      "node_id": "PRRC_kwDOABII585Kk_d5",
      "diff_hunk": "@@ -178,16 +209,16 @@ CService LookupNumeric(const std::string& name, uint16_t portDefault = 0, DNSLoo\n bool LookupSubNet(const std::string& subnet_str, CSubNet& subnet_out);\n \n /**\n- * Create a TCP socket in the given address family.\n+ * Create a TCP or UNIX socket in the given address family.\n  * @param[in] address_family The socket is created in the same address family as this address.\n  * @return pointer to the created Sock object or unique_ptr that owns nothing in case of failure\n  */\n-std::unique_ptr<Sock> CreateSockTCP(const CService& address_family);\n+std::unique_ptr<Sock> CreateSockOS(const sa_family_t address_family);",
      "path": "src/netbase.h",
      "position": null,
      "original_position": 70,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "64d0f234e9aac490b03a5c019e86f1da56e62e01",
      "in_reply_to_id": 1246758964,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "ah great tip thanks ;-)",
      "created_at": "2023-07-03T19:14:56Z",
      "updated_at": "2023-07-03T19:14:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1251211129",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1251211129"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 216,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262178924",
      "pull_request_review_id": 1527850665,
      "id": 1262178924,
      "node_id": "PRRC_kwDOABII585LO1Js",
      "diff_hunk": "@@ -569,11 +584,55 @@ bool ConnectSocketDirectly(const CService &addrConnect, const Sock& sock, int nT\n         else\n #endif\n         {\n-            LogConnectFailure(manual_connection, \"connect() to %s failed: %s\", addrConnect.ToStringAddrPort(), NetworkErrorString(WSAGetLastError()));\n-            return false;\n+            LogConnectFailure(manual_connection, \"connect() to %s failed: %s\", dest_str, NetworkErrorString(WSAGetLastError()));\n+            return {};\n         }\n     }\n-    return true;\n+    return sock;\n+}\n+\n+std::unique_ptr<Sock> ConnectDirectly(const CService& dest, bool manual_connection)\n+{\n+    auto sock = CreateSock(dest.GetSAFamily());\n+    if (!sock) {\n+        LogPrintLevel(BCLog::NET, BCLog::Level::Error, \"Cannot create a socket for connecting to %s\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+\n+    // Create a sockaddr from the specified service.\n+    struct sockaddr_storage sockaddr;\n+    socklen_t len = sizeof(sockaddr);\n+    if (sock->Get() == INVALID_SOCKET) {\n+        LogPrintf(\"Cannot connect to %s: invalid socket\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }",
      "path": "src/netbase.cpp",
      "position": null,
      "original_position": 195,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "b1199bce0fda452a8d24c1753ffdea3c327701ff",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This check can be omitted from commit dc2361401c `net: move CreateSock() calls from ConnectNode() to netbase methods` since the code checks `if (!sock)` earlier. `CreateSock()` will never return a non-empty `unique_ptr` that contains a `Sock` object with a bogus internal file descriptor (`INVALID_SOCKED`).",
      "created_at": "2023-07-13T08:05:52Z",
      "updated_at": "2023-07-13T12:27:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1262178924",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262178924"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 605,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 610,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262322061",
      "pull_request_review_id": 1527850665,
      "id": 1262322061,
      "node_id": "PRRC_kwDOABII585LPYGN",
      "diff_hunk": "@@ -509,22 +536,10 @@ static void LogConnectFailure(bool manual_connection, const char* fmt, const Arg\n     }\n }\n \n-bool ConnectSocketDirectly(const CService &addrConnect, const Sock& sock, int nTimeout, bool manual_connection)\n+std::unique_ptr<Sock> ConnectToSocket(std::unique_ptr<Sock> sock, struct sockaddr* sockaddr, socklen_t len, std::string dest_str, bool manual_connection)",
      "path": "src/netbase.cpp",
      "position": null,
      "original_position": 103,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "b1199bce0fda452a8d24c1753ffdea3c327701ff",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "The interface of taking `unique_ptr` as an argument and returning the same is a bit weird. Usually functions take `unique_ptr` when the ownership of the object is transferred from the caller to the function. But in this case it is transferred to the function which then returns it back to the caller. It would be better to have an interface like:\r\n\r\n```cpp\r\nbool ConnectToSocket(const Sock& sock, ...);\r\n\r\n// and call it like:\r\n\r\nsock = ... // is unique_ptr<Sock>\r\nif (!ConnectToSocket(*sock, ...)) {\r\n    handle the error\r\n    return {}; // empty unique_ptr\r\n}\r\n\r\nreturn sock;\r\n```",
      "created_at": "2023-07-13T09:54:49Z",
      "updated_at": "2023-07-13T12:27:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1262322061",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262322061"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 539,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262327319",
      "pull_request_review_id": 1527850665,
      "id": 1262327319,
      "node_id": "PRRC_kwDOABII585LPZYX",
      "diff_hunk": "@@ -509,22 +536,10 @@ static void LogConnectFailure(bool manual_connection, const char* fmt, const Arg\n     }\n }\n \n-bool ConnectSocketDirectly(const CService &addrConnect, const Sock& sock, int nTimeout, bool manual_connection)\n+std::unique_ptr<Sock> ConnectToSocket(std::unique_ptr<Sock> sock, struct sockaddr* sockaddr, socklen_t len, std::string dest_str, bool manual_connection)",
      "path": "src/netbase.cpp",
      "position": null,
      "original_position": 103,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "b1199bce0fda452a8d24c1753ffdea3c327701ff",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Make the string argument const reference and the function `static` since it is used only in `netbase.cpp`:\r\n\r\n```suggestion\r\nstatic std::unique_ptr<Sock> ConnectToSocket(std::unique_ptr<Sock> sock, struct sockaddr* sockaddr, socklen_t len, const std::string& dest_str, bool manual_connection)\r\n```",
      "created_at": "2023-07-13T09:59:07Z",
      "updated_at": "2023-07-13T12:27:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1262327319",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262327319"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 539,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262362898",
      "pull_request_review_id": 1527850665,
      "id": 1262362898,
      "node_id": "PRRC_kwDOABII585LPiES",
      "diff_hunk": "@@ -569,11 +584,55 @@ bool ConnectSocketDirectly(const CService &addrConnect, const Sock& sock, int nT\n         else\n #endif\n         {\n-            LogConnectFailure(manual_connection, \"connect() to %s failed: %s\", addrConnect.ToStringAddrPort(), NetworkErrorString(WSAGetLastError()));\n-            return false;\n+            LogConnectFailure(manual_connection, \"connect() to %s failed: %s\", dest_str, NetworkErrorString(WSAGetLastError()));\n+            return {};\n         }\n     }\n-    return true;\n+    return sock;\n+}\n+\n+std::unique_ptr<Sock> ConnectDirectly(const CService& dest, bool manual_connection)\n+{\n+    auto sock = CreateSock(dest.GetSAFamily());\n+    if (!sock) {\n+        LogPrintLevel(BCLog::NET, BCLog::Level::Error, \"Cannot create a socket for connecting to %s\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+\n+    // Create a sockaddr from the specified service.\n+    struct sockaddr_storage sockaddr;\n+    socklen_t len = sizeof(sockaddr);\n+    if (sock->Get() == INVALID_SOCKET) {\n+        LogPrintf(\"Cannot connect to %s: invalid socket\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+    if (!dest.GetSockAddr((struct sockaddr*)&sockaddr, &len)) {\n+        LogPrintf(\"Cannot connect to %s: unsupported network\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+\n+    return ConnectToSocket(std::move(sock), (struct sockaddr*)&sockaddr, len, dest.ToStringAddrPort(), manual_connection);\n+}\n+\n+std::unique_ptr<Sock> Proxy::Connect() const\n+{\n+    if (!m_is_unix_socket) return ConnectDirectly(proxy, /*manual_connection=*/true);",
      "path": "src/netbase.cpp",
      "position": null,
      "original_position": 206,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "b1199bce0fda452a8d24c1753ffdea3c327701ff",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Calling this on an invalid `Proxy` (e.g. default-constructed) will cause weird results. Better check `if (!IsValid()) { log; return {}; }` at the start of this function.",
      "created_at": "2023-07-13T10:30:44Z",
      "updated_at": "2023-07-13T12:27:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1262362898",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262362898"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 617,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 627,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262368024",
      "pull_request_review_id": 1527850665,
      "id": 1262368024,
      "node_id": "PRRC_kwDOABII585LPjUY",
      "diff_hunk": "@@ -569,11 +584,55 @@ bool ConnectSocketDirectly(const CService &addrConnect, const Sock& sock, int nT\n         else\n #endif\n         {\n-            LogConnectFailure(manual_connection, \"connect() to %s failed: %s\", addrConnect.ToStringAddrPort(), NetworkErrorString(WSAGetLastError()));\n-            return false;\n+            LogConnectFailure(manual_connection, \"connect() to %s failed: %s\", dest_str, NetworkErrorString(WSAGetLastError()));\n+            return {};\n         }\n     }\n-    return true;\n+    return sock;\n+}\n+\n+std::unique_ptr<Sock> ConnectDirectly(const CService& dest, bool manual_connection)\n+{\n+    auto sock = CreateSock(dest.GetSAFamily());\n+    if (!sock) {\n+        LogPrintLevel(BCLog::NET, BCLog::Level::Error, \"Cannot create a socket for connecting to %s\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+\n+    // Create a sockaddr from the specified service.\n+    struct sockaddr_storage sockaddr;\n+    socklen_t len = sizeof(sockaddr);\n+    if (sock->Get() == INVALID_SOCKET) {\n+        LogPrintf(\"Cannot connect to %s: invalid socket\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+    if (!dest.GetSockAddr((struct sockaddr*)&sockaddr, &len)) {\n+        LogPrintf(\"Cannot connect to %s: unsupported network\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+\n+    return ConnectToSocket(std::move(sock), (struct sockaddr*)&sockaddr, len, dest.ToStringAddrPort(), manual_connection);\n+}\n+\n+std::unique_ptr<Sock> Proxy::Connect() const\n+{\n+    if (!m_is_unix_socket) return ConnectDirectly(proxy, /*manual_connection=*/true);\n+\n+    auto sock = CreateSock(AF_UNIX);\n+    if (!sock) {\n+        LogPrintLevel(BCLog::NET, BCLog::Level::Error, \"Cannot create a socket for connecting to %s\\n\", m_unix_socket_path);\n+        return {};\n+    }\n+\n+    const std::string path{m_unix_socket_path.substr(ADDR_PREFIX_UNIX.length())};\n+\n+    struct sockaddr_storage sockaddr;\n+    struct sockaddr_un* paddrun = (struct sockaddr_un*)&sockaddr;",
      "path": "src/netbase.cpp",
      "position": null,
      "original_position": 217,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "b1199bce0fda452a8d24c1753ffdea3c327701ff",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "There is no need to use the generic `sockaddr_storage` since we know it is going to be `sockaddr_un`. Also, clear it for compatibility, see the example in https://www.man7.org/linux/man-pages/man7/unix.7.html\r\n\r\n```suggestion\r\n    struct sockaddr_un addrun;\r\n    memset(&addrun, 0, sizeof(addrun));\r\n```",
      "created_at": "2023-07-13T10:35:29Z",
      "updated_at": "2023-07-13T12:27:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1262368024",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262368024"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 629,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 630,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262371026",
      "pull_request_review_id": 1527850665,
      "id": 1262371026,
      "node_id": "PRRC_kwDOABII585LPkDS",
      "diff_hunk": "@@ -569,11 +584,55 @@ bool ConnectSocketDirectly(const CService &addrConnect, const Sock& sock, int nT\n         else\n #endif\n         {\n-            LogConnectFailure(manual_connection, \"connect() to %s failed: %s\", addrConnect.ToStringAddrPort(), NetworkErrorString(WSAGetLastError()));\n-            return false;\n+            LogConnectFailure(manual_connection, \"connect() to %s failed: %s\", dest_str, NetworkErrorString(WSAGetLastError()));\n+            return {};\n         }\n     }\n-    return true;\n+    return sock;\n+}\n+\n+std::unique_ptr<Sock> ConnectDirectly(const CService& dest, bool manual_connection)\n+{\n+    auto sock = CreateSock(dest.GetSAFamily());\n+    if (!sock) {\n+        LogPrintLevel(BCLog::NET, BCLog::Level::Error, \"Cannot create a socket for connecting to %s\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+\n+    // Create a sockaddr from the specified service.\n+    struct sockaddr_storage sockaddr;\n+    socklen_t len = sizeof(sockaddr);\n+    if (sock->Get() == INVALID_SOCKET) {\n+        LogPrintf(\"Cannot connect to %s: invalid socket\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+    if (!dest.GetSockAddr((struct sockaddr*)&sockaddr, &len)) {\n+        LogPrintf(\"Cannot connect to %s: unsupported network\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+\n+    return ConnectToSocket(std::move(sock), (struct sockaddr*)&sockaddr, len, dest.ToStringAddrPort(), manual_connection);\n+}\n+\n+std::unique_ptr<Sock> Proxy::Connect() const\n+{\n+    if (!m_is_unix_socket) return ConnectDirectly(proxy, /*manual_connection=*/true);\n+\n+    auto sock = CreateSock(AF_UNIX);",
      "path": "src/netbase.cpp",
      "position": 200,
      "original_position": 208,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "b1199bce0fda452a8d24c1753ffdea3c327701ff",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This and below I guess have to be inside `#if HAVE_SOCKADDR_UN`, otherwise it does not compile on Windows (CI has choked on it).\r\n\r\nhttps://devblogs.microsoft.com/commandline/af_unix-comes-to-windows/ is relevant. Would it compile on Windows if we just `#include <afunix.h>`?",
      "created_at": "2023-07-13T10:37:49Z",
      "updated_at": "2023-07-13T12:29:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1262371026",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262371026"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 630,
      "original_line": 630,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262372825",
      "pull_request_review_id": 1527850665,
      "id": 1262372825,
      "node_id": "PRRC_kwDOABII585LPkfZ",
      "diff_hunk": "@@ -569,11 +584,55 @@ bool ConnectSocketDirectly(const CService &addrConnect, const Sock& sock, int nT\n         else\n #endif\n         {\n-            LogConnectFailure(manual_connection, \"connect() to %s failed: %s\", addrConnect.ToStringAddrPort(), NetworkErrorString(WSAGetLastError()));\n-            return false;\n+            LogConnectFailure(manual_connection, \"connect() to %s failed: %s\", dest_str, NetworkErrorString(WSAGetLastError()));\n+            return {};\n         }\n     }\n-    return true;\n+    return sock;\n+}\n+\n+std::unique_ptr<Sock> ConnectDirectly(const CService& dest, bool manual_connection)\n+{\n+    auto sock = CreateSock(dest.GetSAFamily());\n+    if (!sock) {\n+        LogPrintLevel(BCLog::NET, BCLog::Level::Error, \"Cannot create a socket for connecting to %s\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+\n+    // Create a sockaddr from the specified service.\n+    struct sockaddr_storage sockaddr;\n+    socklen_t len = sizeof(sockaddr);\n+    if (sock->Get() == INVALID_SOCKET) {\n+        LogPrintf(\"Cannot connect to %s: invalid socket\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+    if (!dest.GetSockAddr((struct sockaddr*)&sockaddr, &len)) {\n+        LogPrintf(\"Cannot connect to %s: unsupported network\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+\n+    return ConnectToSocket(std::move(sock), (struct sockaddr*)&sockaddr, len, dest.ToStringAddrPort(), manual_connection);\n+}\n+\n+std::unique_ptr<Sock> Proxy::Connect() const\n+{\n+    if (!m_is_unix_socket) return ConnectDirectly(proxy, /*manual_connection=*/true);\n+\n+    auto sock = CreateSock(AF_UNIX);\n+    if (!sock) {\n+        LogPrintLevel(BCLog::NET, BCLog::Level::Error, \"Cannot create a socket for connecting to %s\\n\", m_unix_socket_path);\n+        return {};\n+    }\n+\n+    const std::string path{m_unix_socket_path.substr(ADDR_PREFIX_UNIX.length())};\n+\n+    struct sockaddr_storage sockaddr;\n+    struct sockaddr_un* paddrun = (struct sockaddr_un*)&sockaddr;\n+    paddrun->sun_family = AF_UNIX;\n+    strcpy(paddrun->sun_path, path.c_str());",
      "path": "src/netbase.cpp",
      "position": null,
      "original_position": 219,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "b1199bce0fda452a8d24c1753ffdea3c327701ff",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "`strcpy()` is a dangerous function because it can be easily misused in a way that leads to security flaws. There is not a single usage of it in Bitcoin Core. In this particular case if `path` is longer it will buffer overflow the fixed size array `sun_path[]`.\r\n\r\nI would suggest to do something like this:\r\n\r\n```cpp\r\n// leave the last char in addrun.sun_path[] to be always '\\0'\r\nmemcpy(addrun.sun_path, path.c_str(), std::min(sizeof(addrun.sun_path) - 1, path.length()));\r\n```",
      "created_at": "2023-07-13T10:39:21Z",
      "updated_at": "2023-07-13T12:27:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1262372825",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262372825"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 632,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262417198",
      "pull_request_review_id": 1527850665,
      "id": 1262417198,
      "node_id": "PRRC_kwDOABII585LPvUu",
      "diff_hunk": "@@ -569,11 +584,55 @@ bool ConnectSocketDirectly(const CService &addrConnect, const Sock& sock, int nT\n         else\n #endif\n         {\n-            LogConnectFailure(manual_connection, \"connect() to %s failed: %s\", addrConnect.ToStringAddrPort(), NetworkErrorString(WSAGetLastError()));\n-            return false;\n+            LogConnectFailure(manual_connection, \"connect() to %s failed: %s\", dest_str, NetworkErrorString(WSAGetLastError()));\n+            return {};\n         }\n     }\n-    return true;\n+    return sock;\n+}\n+\n+std::unique_ptr<Sock> ConnectDirectly(const CService& dest, bool manual_connection)\n+{\n+    auto sock = CreateSock(dest.GetSAFamily());\n+    if (!sock) {\n+        LogPrintLevel(BCLog::NET, BCLog::Level::Error, \"Cannot create a socket for connecting to %s\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+\n+    // Create a sockaddr from the specified service.\n+    struct sockaddr_storage sockaddr;\n+    socklen_t len = sizeof(sockaddr);\n+    if (sock->Get() == INVALID_SOCKET) {\n+        LogPrintf(\"Cannot connect to %s: invalid socket\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+    if (!dest.GetSockAddr((struct sockaddr*)&sockaddr, &len)) {\n+        LogPrintf(\"Cannot connect to %s: unsupported network\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+\n+    return ConnectToSocket(std::move(sock), (struct sockaddr*)&sockaddr, len, dest.ToStringAddrPort(), manual_connection);\n+}\n+\n+std::unique_ptr<Sock> Proxy::Connect() const\n+{\n+    if (!m_is_unix_socket) return ConnectDirectly(proxy, /*manual_connection=*/true);\n+\n+    auto sock = CreateSock(AF_UNIX);\n+    if (!sock) {\n+        LogPrintLevel(BCLog::NET, BCLog::Level::Error, \"Cannot create a socket for connecting to %s\\n\", m_unix_socket_path);\n+        return {};\n+    }\n+\n+    const std::string path{m_unix_socket_path.substr(ADDR_PREFIX_UNIX.length())};\n+\n+    struct sockaddr_storage sockaddr;\n+    struct sockaddr_un* paddrun = (struct sockaddr_un*)&sockaddr;\n+    paddrun->sun_family = AF_UNIX;\n+    strcpy(paddrun->sun_path, path.c_str());\n+    socklen_t len = strlen(paddrun->sun_path) + sizeof(paddrun);\n+\n+    return ConnectToSocket(std::move(sock), (struct sockaddr*)&sockaddr, len, path, /*manual_connection=*/true);",
      "path": "src/netbase.cpp",
      "position": null,
      "original_position": 222,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "b1199bce0fda452a8d24c1753ffdea3c327701ff",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "The `len` calculation seems to be wrong since `sizeof(paddrun)` is just 8 bytes (it is a pointer). Anyway, you can use just `sizeof(sockaddr)` (not the pointer) or `sizeof(addrun)` if you change it to `sockaddr_un addrun;`\r\n\r\n```suggestion\r\n    return ConnectToSocket(std::move(sock), (struct sockaddr*)&addrun, sizeof(addrun), path, /*manual_connection=*/true);\r\n```",
      "created_at": "2023-07-13T11:21:24Z",
      "updated_at": "2023-07-13T12:27:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1262417198",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262417198"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 633,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 635,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262421705",
      "pull_request_review_id": 1527850665,
      "id": 1262421705,
      "node_id": "PRRC_kwDOABII585LPwbJ",
      "diff_hunk": "@@ -230,6 +253,13 @@ def run_test(self):\n             proxies=[self.serv1, self.serv1, self.serv1, self.serv1],\n             auth=False, test_onion=True, test_cjdns=True)\n \n+        # -proxyrandomize=0",
      "path": "test/functional/feature_proxy.py",
      "position": null,
      "original_position": 138,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "b1199bce0fda452a8d24c1753ffdea3c327701ff",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "What is the meaning of this comment here?",
      "created_at": "2023-07-13T11:26:03Z",
      "updated_at": "2023-07-13T12:27:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1262421705",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262421705"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 256,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262422280",
      "pull_request_review_id": 1527850665,
      "id": 1262422280,
      "node_id": "PRRC_kwDOABII585LPwkI",
      "diff_hunk": "@@ -109,10 +127,15 @@ def setup_nodes(self):\n             ['-listen', f'-proxy={self.conf2.addr[0]}:{self.conf2.addr[1]}','-proxyrandomize=1'],\n             [],\n             ['-listen', f'-proxy={self.conf1.addr[0]}:{self.conf1.addr[1]}','-proxyrandomize=1',\n-                '-cjdnsreachable']\n+                '-cjdnsreachable'],\n+            [],\n+            []\n         ]\n         if self.have_ipv6:\n             args[3] = ['-listen', f'-proxy=[{self.conf3.addr[0]}]:{self.conf3.addr[1]}','-proxyrandomize=0', '-noonion']\n+        if self.have_unix_sockets:\n+            args[5] = ['-listen', f'-proxy=unix:{socket_path}', '-proxyrandomize=0']\n+            args[6] = ['-listen', f'-onion=unix:{socket_path}', '-proxyrandomize=0']",
      "path": "test/functional/feature_proxy.py",
      "position": null,
      "original_position": 85,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "b1199bce0fda452a8d24c1753ffdea3c327701ff",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Why use `-proxyrandomize=0` is it not irrelevant for this test?",
      "created_at": "2023-07-13T11:26:38Z",
      "updated_at": "2023-07-13T12:27:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1262422280",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262422280"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 136,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 138,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262436716",
      "pull_request_review_id": 1527850665,
      "id": 1262436716,
      "node_id": "PRRC_kwDOABII585LP0Fs",
      "diff_hunk": "@@ -45,16 +48,46 @@ static inline bool operator&(ConnectionDirection a, ConnectionDirection b) {\n     return (underlying(a) & underlying(b));\n }\n \n+/**\n+ * Check if a string is a valid UNIX domain socket path\n+ *\n+ * @param      name     The string provided by the user representing a local path\n+ *\n+ * @returns Whether the string has proper format, length, and points to an existing file path\n+ */\n+bool IsUnixSocketPath(const std::string& name);\n+\n class Proxy\n {\n public:\n-    Proxy(): randomize_credentials(false) {}\n-    explicit Proxy(const CService &_proxy, bool _randomize_credentials=false): proxy(_proxy), randomize_credentials(_randomize_credentials) {}\n-\n-    bool IsValid() const { return proxy.IsValid(); }\n+    Proxy() : m_is_unix_socket(false), m_randomize_credentials(false) {}\n+    explicit Proxy(const CService& _proxy, bool _randomize_credentials = false) : proxy(_proxy), m_is_unix_socket(false), m_randomize_credentials(_randomize_credentials) {}\n+    explicit Proxy(const std::string path, bool _randomize_credentials = false) : m_unix_socket_path(path), m_is_unix_socket(true), m_randomize_credentials(_randomize_credentials) {}\n \n     CService proxy;",
      "path": "src/netbase.h",
      "position": 34,
      "original_position": 34,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "b1199bce0fda452a8d24c1753ffdea3c327701ff",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "The `Proxy::proxy` member is still accessed directly from some high level code:\r\n\r\n```\r\nsrc/net.cpp:494:                            std::make_unique<i2p::sam::Session>(proxy.proxy, &interruptNet);\r\nsrc/qt/optionsdialog.cpp:416:    ui->proxyReachIPv4->setChecked(has_proxy && proxy.proxy == ui_proxy);\r\nsrc/qt/optionsdialog.cpp:419:    ui->proxyReachIPv6->setChecked(has_proxy && proxy.proxy == ui_proxy);\r\nsrc/qt/optionsdialog.cpp:422:    ui->proxyReachTor->setChecked(has_proxy && proxy.proxy == ui_proxy);\r\n```\r\n\r\neven though it may not be set if it is a UNIX socket proxy.\r\n\r\nFor the I2P case we can kind of assume it is a TCP proxy, but then better add `assert(!proxy.m_is_unix_socket);` to ensure that (eh, that's ugly). Or you can pass the `Proxy` object to the `Session()` constructor, change `m_control_host` from `CService` to `Proxy` and use `m_control_host.Connect()` in `Session::Hello()` to create the socket. This will transparently add support for UNIX sockets also for the I2P proxy.\r\n\r\nFor the GUI case, this function has to be changed:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/b4794740f82e1a08294c8a5f5d586bc1925412f3/src/qt/optionsdialog.cpp#L407-L423\r\n\r\nFirst it has to check if `ui->proxyIp->text().toStdString()` starts with `unix:` and if yes, avoid `LookupHost()`. Then create `Proxy ui_proxy` instead of `CService ui_proxy`.\r\n\r\nWhen this is done, then `Proxy::proxy` can be made private inside the `Proxy` class, together with the `m_unix_socket_path` and `m_is_unix_socket` members.",
      "created_at": "2023-07-13T11:41:14Z",
      "updated_at": "2023-07-13T12:33:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1262436716",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262436716"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 68,
      "original_line": 68,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262486665",
      "pull_request_review_id": 1527850665,
      "id": 1262486665,
      "node_id": "PRRC_kwDOABII585LQASJ",
      "diff_hunk": "@@ -483,21 +506,25 @@ std::unique_ptr<Sock> CreateSockTCP(const CService& address_family)\n     }\n #endif\n \n-    // Set the no-delay option (disable Nagle's algorithm) on the TCP socket.\n-    const int on{1};\n-    if (sock->SetSockOpt(IPPROTO_TCP, TCP_NODELAY, &on, sizeof(on)) == SOCKET_ERROR) {\n-        LogPrint(BCLog::NET, \"Unable to set TCP_NODELAY on a newly created socket, continuing anyway\\n\");\n-    }\n+#if HAVE_SOCKADDR_UN\n+    if (address_family == AF_UNIX) return sock;\n+#endif\n \n     // Set the non-blocking option on the socket.\n     if (!sock->SetNonBlocking()) {\n         LogPrintf(\"Error setting socket to non-blocking: %s\\n\", NetworkErrorString(WSAGetLastError()));\n         return nullptr;\n     }",
      "path": "src/netbase.cpp",
      "position": null,
      "original_position": 83,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "b1199bce0fda452a8d24c1753ffdea3c327701ff",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This will leave the socket in a blocking mode. I think the rest of the P2P code expects and assumes non-blocking sockets. Better set this also to non-blocking and make the `Socks5()` more robust:\r\n\r\n<details>\r\n<summary>[patch] netbase: use reliable send() during SOCKS5 handshake</summary>\r\n\r\n```diff\r\ncommit 4c8d08ca2b495da609d5586247dbd2b306e90e61 (HEAD -> tor-unix-domain-socket)\r\nParent: af4eb52ff611342dbd285f218474649f16badbaf\r\nAuthor:     Vasil Dimov <vd@FreeBSD.org>\r\nAuthorDate: Thu Jul 13 14:17:30 2023 +0200\r\nCommit:     Vasil Dimov <vd@FreeBSD.org>\r\nCommitDate: Thu Jul 13 14:17:30 2023 +0200\r\ngpg: Signature made Thu Jul 13 14:23:03 2023 CEST\r\ngpg:                using RSA key E64D8D45614DB07545D9CCC154DF06F64B55CBBF\r\ngpg: Good signature from \"Vasil Dimov <vd@myforest.net>\" [ultimate]\r\ngpg:                 aka \"Vasil Dimov <vd@FreeBSD.org>\" [ultimate]\r\ngpg:                 aka \"Vasil Dimov <vasild@gmail.com>\" [ultimate]\r\n\r\n\r\n    netbase: use reliable send() during SOCKS5 handshake\r\n    \r\n    `send(2)` can be interrupted or for another reason it may not fully\r\n    complete sending all the bytes. We should be ready to retry the send\r\n    with the remaining bytes. This is what `Sock::SendComplete()` does,\r\n    thus use it in `Socks5()`.\r\n    \r\n    Since `Sock::SendComplete()` takes a `CThreadInterrupt` argument,\r\n    change also the recv part of `Socks5()` to use `CThreadInterrupt`\r\n    instead of a boolean.\r\n    \r\n    Easier reviewed with `git show -b` (ignore white-space changes).\r\n\r\ndiff --git a/src/net.cpp b/src/net.cpp\r\nindex a46cd25e90..4eb96f950d 100644\r\n--- a/src/net.cpp\r\n+++ b/src/net.cpp\r\n@@ -2336,13 +2336,12 @@ bool CConnman::Start(CScheduler& scheduler, const Options& connOptions)\r\n     }\r\n \r\n     //\r\n     // Start threads\r\n     //\r\n     assert(m_msgproc);\r\n-    InterruptSocks5(false);\r\n     interruptNet.reset();\r\n     flagInterruptMsgProc = false;\r\n \r\n     {\r\n         LOCK(mutexMsgProc);\r\n         fMsgProcWake = false;\r\n@@ -2408,13 +2407,13 @@ void CConnman::Interrupt()\r\n         LOCK(mutexMsgProc);\r\n         flagInterruptMsgProc = true;\r\n     }\r\n     condMsgProc.notify_all();\r\n \r\n     interruptNet();\r\n-    InterruptSocks5(true);\r\n+    g_socks5_interrupt();\r\n \r\n     if (semOutbound) {\r\n         for (int i=0; i<m_max_outbound; i++) {\r\n             semOutbound->post();\r\n         }\r\n     }\r\ndiff --git a/src/netbase.cpp b/src/netbase.cpp\r\nindex 548e1483b8..cee50e67bb 100644\r\n--- a/src/netbase.cpp\r\n+++ b/src/netbase.cpp\r\n@@ -32,13 +32,13 @@ static Proxy proxyInfo[NET_MAX] GUARDED_BY(g_proxyinfo_mutex);\r\n static Proxy nameProxy GUARDED_BY(g_proxyinfo_mutex);\r\n int nConnectTimeout = DEFAULT_CONNECT_TIMEOUT;\r\n bool fNameLookup = DEFAULT_NAME_LOOKUP;\r\n \r\n // Need ample time for negotiation for very slow proxies such as Tor\r\n std::chrono::milliseconds g_socks5_recv_timeout = 20s;\r\n-static std::atomic<bool> interruptSocks5Recv(false);\r\n+CThreadInterrupt g_socks5_interrupt;\r\n \r\n std::vector<CNetAddr> WrappedGetAddrInfo(const std::string& name, bool allow_lookup)\r\n {\r\n     addrinfo ai_hint{};\r\n     // We want a TCP port, which is a streaming socket type\r\n     ai_hint.ai_socktype = SOCK_STREAM;\r\n@@ -289,13 +289,13 @@ enum class IntrRecvError {\r\n  * @param sock The socket (has to be in non-blocking mode) from which to read bytes.\r\n  *\r\n  * @returns An IntrRecvError indicating the resulting status of this read.\r\n  *          IntrRecvError::OK only if all of the specified number of bytes were\r\n  *          read.\r\n  *\r\n- * @see This function can be interrupted by calling InterruptSocks5(bool).\r\n+ * @see This function can be interrupted by calling g_socks5_interrupt().\r\n  *      Sockets can be made non-blocking with Sock::SetNonBlocking().\r\n  */\r\n static IntrRecvError InterruptibleRecv(uint8_t* data, size_t len, std::chrono::milliseconds timeout, const Sock& sock)\r\n {\r\n     auto curTime{Now<SteadyMilliseconds>()};\r\n     const auto endTime{curTime + timeout};\r\n@@ -317,14 +317,15 @@ static IntrRecvError InterruptibleRecv(uint8_t* data, size_t len, std::chrono::m\r\n                     return IntrRecvError::NetworkError;\r\n                 }\r\n             } else {\r\n                 return IntrRecvError::NetworkError;\r\n             }\r\n         }\r\n-        if (interruptSocks5Recv)\r\n+        if (g_socks5_interrupt) {\r\n             return IntrRecvError::Interrupted;\r\n+        }\r\n         curTime = Now<SteadyMilliseconds>();\r\n     }\r\n     return len == 0 ? IntrRecvError::OK : IntrRecvError::Timeout;\r\n }\r\n \r\n /** Convert SOCKS5 reply to an error message */\r\n@@ -351,127 +352,120 @@ static std::string Socks5ErrorString(uint8_t err)\r\n             return \"unknown\";\r\n     }\r\n }\r\n \r\n bool Socks5(const std::string& strDest, uint16_t port, const ProxyCredentials* auth, const Sock& sock)\r\n {\r\n-    IntrRecvError recvr;\r\n-    LogPrint(BCLog::NET, \"SOCKS5 connecting %s\\n\", strDest);\r\n-    if (strDest.size() > 255) {\r\n-        return error(\"Hostname too long\");\r\n-    }\r\n-    // Construct the version identifier/method selection message\r\n-    std::vector<uint8_t> vSocks5Init;\r\n-    vSocks5Init.push_back(SOCKSVersion::SOCKS5); // We want the SOCK5 protocol\r\n-    if (auth) {\r\n-        vSocks5Init.push_back(0x02); // 2 method identifiers follow...\r\n-        vSocks5Init.push_back(SOCKS5Method::NOAUTH);\r\n-        vSocks5Init.push_back(SOCKS5Method::USER_PASS);\r\n-    } else {\r\n-        vSocks5Init.push_back(0x01); // 1 method identifier follows...\r\n-        vSocks5Init.push_back(SOCKS5Method::NOAUTH);\r\n-    }\r\n-    ssize_t ret = sock.Send(vSocks5Init.data(), vSocks5Init.size(), MSG_NOSIGNAL);\r\n-    if (ret != (ssize_t)vSocks5Init.size()) {\r\n-        return error(\"Error sending to proxy\");\r\n-    }\r\n-    uint8_t pchRet1[2];\r\n-    if (InterruptibleRecv(pchRet1, 2, g_socks5_recv_timeout, sock) != IntrRecvError::OK) {\r\n-        LogPrintf(\"Socks5() connect to %s:%d failed: InterruptibleRecv() timeout or other failure\\n\", strDest, port);\r\n-        return false;\r\n-    }\r\n-    if (pchRet1[0] != SOCKSVersion::SOCKS5) {\r\n-        return error(\"Proxy failed to initialize\");\r\n-    }\r\n-    if (pchRet1[1] == SOCKS5Method::USER_PASS && auth) {\r\n-        // Perform username/password authentication (as described in RFC1929)\r\n-        std::vector<uint8_t> vAuth;\r\n-        vAuth.push_back(0x01); // Current (and only) version of user/pass subnegotiation\r\n-        if (auth->username.size() > 255 || auth->password.size() > 255)\r\n-            return error(\"Proxy username or password too long\");\r\n-        vAuth.push_back(auth->username.size());\r\n-        vAuth.insert(vAuth.end(), auth->username.begin(), auth->username.end());\r\n-        vAuth.push_back(auth->password.size());\r\n-        vAuth.insert(vAuth.end(), auth->password.begin(), auth->password.end());\r\n-        ret = sock.Send(vAuth.data(), vAuth.size(), MSG_NOSIGNAL);\r\n-        if (ret != (ssize_t)vAuth.size()) {\r\n-            return error(\"Error sending authentication to proxy\");\r\n-        }\r\n-        LogPrint(BCLog::PROXY, \"SOCKS5 sending proxy authentication %s:%s\\n\", auth->username, auth->password);\r\n-        uint8_t pchRetA[2];\r\n-        if (InterruptibleRecv(pchRetA, 2, g_socks5_recv_timeout, sock) != IntrRecvError::OK) {\r\n-            return error(\"Error reading proxy authentication response\");\r\n+    try {\r\n+        IntrRecvError recvr;\r\n+        LogPrint(BCLog::NET, \"SOCKS5 connecting %s\\n\", strDest);\r\n+        if (strDest.size() > 255) {\r\n+            return error(\"Hostname too long\");\r\n         }\r\n-        if (pchRetA[0] != 0x01 || pchRetA[1] != 0x00) {\r\n-            return error(\"Proxy authentication unsuccessful\");\r\n+        // Construct the version identifier/method selection message\r\n+        std::string vSocks5Init;\r\n+        vSocks5Init.push_back(SOCKSVersion::SOCKS5); // We want the SOCK5 protocol\r\n+        if (auth) {\r\n+            vSocks5Init.push_back(0x02); // 2 method identifiers follow...\r\n+            vSocks5Init.push_back(SOCKS5Method::NOAUTH);\r\n+            vSocks5Init.push_back(SOCKS5Method::USER_PASS);\r\n+        } else {\r\n+            vSocks5Init.push_back(0x01); // 1 method identifier follows...\r\n+            vSocks5Init.push_back(SOCKS5Method::NOAUTH);\r\n         }\r\n-    } else if (pchRet1[1] == SOCKS5Method::NOAUTH) {\r\n-        // Perform no authentication\r\n-    } else {\r\n-        return error(\"Proxy requested wrong authentication method %02x\", pchRet1[1]);\r\n-    }\r\n-    std::vector<uint8_t> vSocks5;\r\n-    vSocks5.push_back(SOCKSVersion::SOCKS5); // VER protocol version\r\n-    vSocks5.push_back(SOCKS5Command::CONNECT); // CMD CONNECT\r\n-    vSocks5.push_back(0x00); // RSV Reserved must be 0\r\n-    vSocks5.push_back(SOCKS5Atyp::DOMAINNAME); // ATYP DOMAINNAME\r\n-    vSocks5.push_back(strDest.size()); // Length<=255 is checked at beginning of function\r\n-    vSocks5.insert(vSocks5.end(), strDest.begin(), strDest.end());\r\n-    vSocks5.push_back((port >> 8) & 0xFF);\r\n-    vSocks5.push_back((port >> 0) & 0xFF);\r\n-    ret = sock.Send(vSocks5.data(), vSocks5.size(), MSG_NOSIGNAL);\r\n-    if (ret != (ssize_t)vSocks5.size()) {\r\n-        return error(\"Error sending to proxy\");\r\n-    }\r\n-    uint8_t pchRet2[4];\r\n-    if ((recvr = InterruptibleRecv(pchRet2, 4, g_socks5_recv_timeout, sock)) != IntrRecvError::OK) {\r\n-        if (recvr == IntrRecvError::Timeout) {\r\n-            /* If a timeout happens here, this effectively means we timed out while connecting\r\n-             * to the remote node. This is very common for Tor, so do not print an\r\n-             * error message. */\r\n+        sock.SendComplete(vSocks5Init, g_socks5_recv_timeout, g_socks5_interrupt);\r\n+        uint8_t pchRet1[2];\r\n+        if (InterruptibleRecv(pchRet1, 2, g_socks5_recv_timeout, sock) != IntrRecvError::OK) {\r\n+            LogPrintf(\"Socks5() connect to %s:%d failed: InterruptibleRecv() timeout or other failure\\n\", strDest, port);\r\n             return false;\r\n+        }\r\n+        if (pchRet1[0] != SOCKSVersion::SOCKS5) {\r\n+            return error(\"Proxy failed to initialize\");\r\n+        }\r\n+        if (pchRet1[1] == SOCKS5Method::USER_PASS && auth) {\r\n+            // Perform username/password authentication (as described in RFC1929)\r\n+            std::string vAuth;\r\n+            vAuth.push_back(0x01); // Current (and only) version of user/pass subnegotiation\r\n+            if (auth->username.size() > 255 || auth->password.size() > 255)\r\n+                return error(\"Proxy username or password too long\");\r\n+            vAuth.push_back(auth->username.size());\r\n+            vAuth.insert(vAuth.end(), auth->username.begin(), auth->username.end());\r\n+            vAuth.push_back(auth->password.size());\r\n+            vAuth.insert(vAuth.end(), auth->password.begin(), auth->password.end());\r\n+            sock.SendComplete(vAuth, g_socks5_recv_timeout, g_socks5_interrupt);\r\n+            LogPrint(BCLog::PROXY, \"SOCKS5 sending proxy authentication %s:%s\\n\", auth->username, auth->password);\r\n+            uint8_t pchRetA[2];\r\n+            if (InterruptibleRecv(pchRetA, 2, g_socks5_recv_timeout, sock) != IntrRecvError::OK) {\r\n+                return error(\"Error reading proxy authentication response\");\r\n+            }\r\n+            if (pchRetA[0] != 0x01 || pchRetA[1] != 0x00) {\r\n+                return error(\"Proxy authentication unsuccessful\");\r\n+            }\r\n+        } else if (pchRet1[1] == SOCKS5Method::NOAUTH) {\r\n+            // Perform no authentication\r\n         } else {\r\n-            return error(\"Error while reading proxy response\");\r\n+            return error(\"Proxy requested wrong authentication method %02x\", pchRet1[1]);\r\n         }\r\n-    }\r\n-    if (pchRet2[0] != SOCKSVersion::SOCKS5) {\r\n-        return error(\"Proxy failed to accept request\");\r\n-    }\r\n-    if (pchRet2[1] != SOCKS5Reply::SUCCEEDED) {\r\n-        // Failures to connect to a peer that are not proxy errors\r\n-        LogPrintf(\"Socks5() connect to %s:%d failed: %s\\n\", strDest, port, Socks5ErrorString(pchRet2[1]));\r\n-        return false;\r\n-    }\r\n-    if (pchRet2[2] != 0x00) { // Reserved field must be 0\r\n-        return error(\"Error: malformed proxy response\");\r\n-    }\r\n-    uint8_t pchRet3[256];\r\n-    switch (pchRet2[3])\r\n-    {\r\n+        std::string vSocks5;\r\n+        vSocks5.push_back(SOCKSVersion::SOCKS5);   // VER protocol version\r\n+        vSocks5.push_back(SOCKS5Command::CONNECT); // CMD CONNECT\r\n+        vSocks5.push_back(0x00);                   // RSV Reserved must be 0\r\n+        vSocks5.push_back(SOCKS5Atyp::DOMAINNAME); // ATYP DOMAINNAME\r\n+        vSocks5.push_back(strDest.size());         // Length<=255 is checked at beginning of function\r\n+        vSocks5.insert(vSocks5.end(), strDest.begin(), strDest.end());\r\n+        vSocks5.push_back((port >> 8) & 0xFF);\r\n+        vSocks5.push_back((port >> 0) & 0xFF);\r\n+        sock.SendComplete(vSocks5, g_socks5_recv_timeout, g_socks5_interrupt);\r\n+        uint8_t pchRet2[4];\r\n+        if ((recvr = InterruptibleRecv(pchRet2, 4, g_socks5_recv_timeout, sock)) != IntrRecvError::OK) {\r\n+            if (recvr == IntrRecvError::Timeout) {\r\n+                /* If a timeout happens here, this effectively means we timed out while connecting\r\n+                 * to the remote node. This is very common for Tor, so do not print an\r\n+                 * error message. */\r\n+                return false;\r\n+            } else {\r\n+                return error(\"Error while reading proxy response\");\r\n+            }\r\n+        }\r\n+        if (pchRet2[0] != SOCKSVersion::SOCKS5) {\r\n+            return error(\"Proxy failed to accept request\");\r\n+        }\r\n+        if (pchRet2[1] != SOCKS5Reply::SUCCEEDED) {\r\n+            // Failures to connect to a peer that are not proxy errors\r\n+            LogPrintf(\"Socks5() connect to %s:%d failed: %s\\n\", strDest, port, Socks5ErrorString(pchRet2[1]));\r\n+            return false;\r\n+        }\r\n+        if (pchRet2[2] != 0x00) { // Reserved field must be 0\r\n+            return error(\"Error: malformed proxy response\");\r\n+        }\r\n+        uint8_t pchRet3[256];\r\n+        switch (pchRet2[3]) {\r\n         case SOCKS5Atyp::IPV4: recvr = InterruptibleRecv(pchRet3, 4, g_socks5_recv_timeout, sock); break;\r\n         case SOCKS5Atyp::IPV6: recvr = InterruptibleRecv(pchRet3, 16, g_socks5_recv_timeout, sock); break;\r\n-        case SOCKS5Atyp::DOMAINNAME:\r\n-        {\r\n+        case SOCKS5Atyp::DOMAINNAME: {\r\n             recvr = InterruptibleRecv(pchRet3, 1, g_socks5_recv_timeout, sock);\r\n             if (recvr != IntrRecvError::OK) {\r\n                 return error(\"Error reading from proxy\");\r\n             }\r\n             int nRecv = pchRet3[0];\r\n             recvr = InterruptibleRecv(pchRet3, nRecv, g_socks5_recv_timeout, sock);\r\n             break;\r\n         }\r\n         default: return error(\"Error: malformed proxy response\");\r\n+        }\r\n+        if (recvr != IntrRecvError::OK) {\r\n+            return error(\"Error reading from proxy\");\r\n+        }\r\n+        if (InterruptibleRecv(pchRet3, 2, g_socks5_recv_timeout, sock) != IntrRecvError::OK) {\r\n+            return error(\"Error reading from proxy\");\r\n+        }\r\n+        LogPrint(BCLog::NET, \"SOCKS5 connected %s\\n\", strDest);\r\n+        return true;\r\n+    } catch (const std::runtime_error& e) {\r\n+        return error(\"Error during SOCKS5 proxy handshake: %s\", e.what());\r\n     }\r\n-    if (recvr != IntrRecvError::OK) {\r\n-        return error(\"Error reading from proxy\");\r\n-    }\r\n-    if (InterruptibleRecv(pchRet3, 2, g_socks5_recv_timeout, sock) != IntrRecvError::OK) {\r\n-        return error(\"Error reading from proxy\");\r\n-    }\r\n-    LogPrint(BCLog::NET, \"SOCKS5 connected %s\\n\", strDest);\r\n-    return true;\r\n }\r\n \r\n std::unique_ptr<Sock> CreateSockOS(sa_family_t address_family)\r\n {\r\n     // Not IPv4, IPv6 or UNIX\r\n     if (address_family == AF_UNSPEC) return nullptr;\r\n@@ -743,17 +737,12 @@ bool LookupSubNet(const std::string& subnet_str, CSubNet& subnet_out)\r\n             return subnet_out.IsValid();\r\n         }\r\n     }\r\n     return false;\r\n }\r\n \r\n-void InterruptSocks5(bool interrupt)\r\n-{\r\n-    interruptSocks5Recv = interrupt;\r\n-}\r\n-\r\n bool IsBadPort(uint16_t port)\r\n {\r\n     /* Don't forget to update doc/p2p-bad-ports.md if you change this list. */\r\n \r\n     switch (port) {\r\n     case 1:     // tcpmux\r\ndiff --git a/src/netbase.h b/src/netbase.h\r\nindex 997bccf30d..3c41ba3834 100644\r\n--- a/src/netbase.h\r\n+++ b/src/netbase.h\r\n@@ -10,12 +10,13 @@\r\n #endif\r\n \r\n #include <compat/compat.h>\r\n #include <netaddress.h>\r\n #include <serialize.h>\r\n #include <util/sock.h>\r\n+#include <util/threadinterrupt.h>\r\n \r\n #include <functional>\r\n #include <memory>\r\n #include <stdint.h>\r\n #include <string>\r\n #include <type_traits>\r\n@@ -266,13 +267,16 @@ std::unique_ptr<Sock> ConnectDirectly(const CService& dest, bool manual_connecti\r\n  */\r\n std::unique_ptr<Sock> ConnectThroughProxy(const Proxy& proxy,\r\n                                           const std::string& dest,\r\n                                           uint16_t port,\r\n                                           bool& proxy_connection_failed);\r\n \r\n-void InterruptSocks5(bool interrupt);\r\n+/**\r\n+ * Interrupt SOCKS5 reads or writes.\r\n+ */\r\n+extern CThreadInterrupt g_socks5_interrupt;\r\n \r\n /**\r\n  * Connect to a specified destination service through an already connected\r\n  * SOCKS5 proxy.\r\n  *\r\n  * @param strDest The destination fully-qualified domain name.\r\ndiff --git a/src/test/fuzz/socks5.cpp b/src/test/fuzz/socks5.cpp\r\nindex 73235b7ced..7378cec7b8 100644\r\n--- a/src/test/fuzz/socks5.cpp\r\n+++ b/src/test/fuzz/socks5.cpp\r\n@@ -29,13 +29,15 @@ void initialize_socks5()\r\n FUZZ_TARGET_INIT(socks5, initialize_socks5)\r\n {\r\n     FuzzedDataProvider fuzzed_data_provider{buffer.data(), buffer.size()};\r\n     ProxyCredentials proxy_credentials;\r\n     proxy_credentials.username = fuzzed_data_provider.ConsumeRandomLengthString(512);\r\n     proxy_credentials.password = fuzzed_data_provider.ConsumeRandomLengthString(512);\r\n-    InterruptSocks5(fuzzed_data_provider.ConsumeBool());\r\n+    if (fuzzed_data_provider.ConsumeBool()) {\r\n+        g_socks5_interrupt();\r\n+    }\r\n     // Set FUZZED_SOCKET_FAKE_LATENCY=1 to exercise recv timeout code paths. This\r\n     // will slow down fuzzing.\r\n     g_socks5_recv_timeout = (fuzzed_data_provider.ConsumeBool() && std::getenv(\"FUZZED_SOCKET_FAKE_LATENCY\") != nullptr) ? 1ms : default_socks5_recv_timeout;\r\n     FuzzedSock fuzzed_sock = ConsumeSock(fuzzed_data_provider);\r\n     // This Socks5(...) fuzzing harness would have caught CVE-2017-18350 within\r\n     // a few seconds of fuzzing.\r\n```\r\n</details>",
      "created_at": "2023-07-13T12:27:12Z",
      "updated_at": "2023-07-13T12:27:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1262486665",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262486665"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 509,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 515,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262608123",
      "pull_request_review_id": 1528526825,
      "id": 1262608123,
      "node_id": "PRRC_kwDOABII585LQd77",
      "diff_hunk": "@@ -569,11 +584,55 @@ bool ConnectSocketDirectly(const CService &addrConnect, const Sock& sock, int nT\n         else\n #endif\n         {\n-            LogConnectFailure(manual_connection, \"connect() to %s failed: %s\", addrConnect.ToStringAddrPort(), NetworkErrorString(WSAGetLastError()));\n-            return false;\n+            LogConnectFailure(manual_connection, \"connect() to %s failed: %s\", dest_str, NetworkErrorString(WSAGetLastError()));\n+            return {};\n         }\n     }\n-    return true;\n+    return sock;\n+}\n+\n+std::unique_ptr<Sock> ConnectDirectly(const CService& dest, bool manual_connection)\n+{\n+    auto sock = CreateSock(dest.GetSAFamily());\n+    if (!sock) {\n+        LogPrintLevel(BCLog::NET, BCLog::Level::Error, \"Cannot create a socket for connecting to %s\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+\n+    // Create a sockaddr from the specified service.\n+    struct sockaddr_storage sockaddr;\n+    socklen_t len = sizeof(sockaddr);\n+    if (sock->Get() == INVALID_SOCKET) {\n+        LogPrintf(\"Cannot connect to %s: invalid socket\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }",
      "path": "src/netbase.cpp",
      "position": null,
      "original_position": 195,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "b1199bce0fda452a8d24c1753ffdea3c327701ff",
      "in_reply_to_id": 1262178924,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "thanks",
      "created_at": "2023-07-13T14:00:46Z",
      "updated_at": "2023-07-13T14:00:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1262608123",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262608123"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 605,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 610,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262624822",
      "pull_request_review_id": 1528553195,
      "id": 1262624822,
      "node_id": "PRRC_kwDOABII585LQiA2",
      "diff_hunk": "@@ -509,22 +536,10 @@ static void LogConnectFailure(bool manual_connection, const char* fmt, const Arg\n     }\n }\n \n-bool ConnectSocketDirectly(const CService &addrConnect, const Sock& sock, int nTimeout, bool manual_connection)\n+std::unique_ptr<Sock> ConnectToSocket(std::unique_ptr<Sock> sock, struct sockaddr* sockaddr, socklen_t len, std::string dest_str, bool manual_connection)",
      "path": "src/netbase.cpp",
      "position": null,
      "original_position": 103,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "b1199bce0fda452a8d24c1753ffdea3c327701ff",
      "in_reply_to_id": 1262322061,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "ah great thanks",
      "created_at": "2023-07-13T14:13:21Z",
      "updated_at": "2023-07-13T14:13:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1262624822",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262624822"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 539,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262625689",
      "pull_request_review_id": 1528554609,
      "id": 1262625689,
      "node_id": "PRRC_kwDOABII585LQiOZ",
      "diff_hunk": "@@ -509,22 +536,10 @@ static void LogConnectFailure(bool manual_connection, const char* fmt, const Arg\n     }\n }\n \n-bool ConnectSocketDirectly(const CService &addrConnect, const Sock& sock, int nTimeout, bool manual_connection)\n+std::unique_ptr<Sock> ConnectToSocket(std::unique_ptr<Sock> sock, struct sockaddr* sockaddr, socklen_t len, std::string dest_str, bool manual_connection)",
      "path": "src/netbase.cpp",
      "position": null,
      "original_position": 103,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "b1199bce0fda452a8d24c1753ffdea3c327701ff",
      "in_reply_to_id": 1262327319,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": ":+1:",
      "created_at": "2023-07-13T14:13:57Z",
      "updated_at": "2023-07-13T14:13:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1262625689",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262625689"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 539,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262632689",
      "pull_request_review_id": 1528568171,
      "id": 1262632689,
      "node_id": "PRRC_kwDOABII585LQj7x",
      "diff_hunk": "@@ -569,11 +584,55 @@ bool ConnectSocketDirectly(const CService &addrConnect, const Sock& sock, int nT\n         else\n #endif\n         {\n-            LogConnectFailure(manual_connection, \"connect() to %s failed: %s\", addrConnect.ToStringAddrPort(), NetworkErrorString(WSAGetLastError()));\n-            return false;\n+            LogConnectFailure(manual_connection, \"connect() to %s failed: %s\", dest_str, NetworkErrorString(WSAGetLastError()));\n+            return {};\n         }\n     }\n-    return true;\n+    return sock;\n+}\n+\n+std::unique_ptr<Sock> ConnectDirectly(const CService& dest, bool manual_connection)\n+{\n+    auto sock = CreateSock(dest.GetSAFamily());\n+    if (!sock) {\n+        LogPrintLevel(BCLog::NET, BCLog::Level::Error, \"Cannot create a socket for connecting to %s\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+\n+    // Create a sockaddr from the specified service.\n+    struct sockaddr_storage sockaddr;\n+    socklen_t len = sizeof(sockaddr);\n+    if (sock->Get() == INVALID_SOCKET) {\n+        LogPrintf(\"Cannot connect to %s: invalid socket\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+    if (!dest.GetSockAddr((struct sockaddr*)&sockaddr, &len)) {\n+        LogPrintf(\"Cannot connect to %s: unsupported network\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+\n+    return ConnectToSocket(std::move(sock), (struct sockaddr*)&sockaddr, len, dest.ToStringAddrPort(), manual_connection);\n+}\n+\n+std::unique_ptr<Sock> Proxy::Connect() const\n+{\n+    if (!m_is_unix_socket) return ConnectDirectly(proxy, /*manual_connection=*/true);",
      "path": "src/netbase.cpp",
      "position": null,
      "original_position": 206,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "b1199bce0fda452a8d24c1753ffdea3c327701ff",
      "in_reply_to_id": 1262362898,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "good catch thanks",
      "created_at": "2023-07-13T14:18:29Z",
      "updated_at": "2023-07-13T14:18:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1262632689",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262632689"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 617,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 627,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262645801",
      "pull_request_review_id": 1528588236,
      "id": 1262645801,
      "node_id": "PRRC_kwDOABII585LQnIp",
      "diff_hunk": "@@ -569,11 +584,55 @@ bool ConnectSocketDirectly(const CService &addrConnect, const Sock& sock, int nT\n         else\n #endif\n         {\n-            LogConnectFailure(manual_connection, \"connect() to %s failed: %s\", addrConnect.ToStringAddrPort(), NetworkErrorString(WSAGetLastError()));\n-            return false;\n+            LogConnectFailure(manual_connection, \"connect() to %s failed: %s\", dest_str, NetworkErrorString(WSAGetLastError()));\n+            return {};\n         }\n     }\n-    return true;\n+    return sock;\n+}\n+\n+std::unique_ptr<Sock> ConnectDirectly(const CService& dest, bool manual_connection)\n+{\n+    auto sock = CreateSock(dest.GetSAFamily());\n+    if (!sock) {\n+        LogPrintLevel(BCLog::NET, BCLog::Level::Error, \"Cannot create a socket for connecting to %s\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+\n+    // Create a sockaddr from the specified service.\n+    struct sockaddr_storage sockaddr;\n+    socklen_t len = sizeof(sockaddr);\n+    if (sock->Get() == INVALID_SOCKET) {\n+        LogPrintf(\"Cannot connect to %s: invalid socket\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+    if (!dest.GetSockAddr((struct sockaddr*)&sockaddr, &len)) {\n+        LogPrintf(\"Cannot connect to %s: unsupported network\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+\n+    return ConnectToSocket(std::move(sock), (struct sockaddr*)&sockaddr, len, dest.ToStringAddrPort(), manual_connection);\n+}\n+\n+std::unique_ptr<Sock> Proxy::Connect() const\n+{\n+    if (!m_is_unix_socket) return ConnectDirectly(proxy, /*manual_connection=*/true);\n+\n+    auto sock = CreateSock(AF_UNIX);\n+    if (!sock) {\n+        LogPrintLevel(BCLog::NET, BCLog::Level::Error, \"Cannot create a socket for connecting to %s\\n\", m_unix_socket_path);\n+        return {};\n+    }\n+\n+    const std::string path{m_unix_socket_path.substr(ADDR_PREFIX_UNIX.length())};\n+\n+    struct sockaddr_storage sockaddr;\n+    struct sockaddr_un* paddrun = (struct sockaddr_un*)&sockaddr;",
      "path": "src/netbase.cpp",
      "position": null,
      "original_position": 217,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "b1199bce0fda452a8d24c1753ffdea3c327701ff",
      "in_reply_to_id": 1262368024,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "ah, thanks. I had a hard time with this one for some reason because casting to `sockaddr` kept truncating the unix socket path to 14 bytes before it got to `Connect()`. Anyway this works and I don't know why I didn't try it like this at first.",
      "created_at": "2023-07-13T14:27:38Z",
      "updated_at": "2023-07-13T14:27:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1262645801",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262645801"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 629,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 630,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262653604",
      "pull_request_review_id": 1528600581,
      "id": 1262653604,
      "node_id": "PRRC_kwDOABII585LQpCk",
      "diff_hunk": "@@ -569,11 +584,55 @@ bool ConnectSocketDirectly(const CService &addrConnect, const Sock& sock, int nT\n         else\n #endif\n         {\n-            LogConnectFailure(manual_connection, \"connect() to %s failed: %s\", addrConnect.ToStringAddrPort(), NetworkErrorString(WSAGetLastError()));\n-            return false;\n+            LogConnectFailure(manual_connection, \"connect() to %s failed: %s\", dest_str, NetworkErrorString(WSAGetLastError()));\n+            return {};\n         }\n     }\n-    return true;\n+    return sock;\n+}\n+\n+std::unique_ptr<Sock> ConnectDirectly(const CService& dest, bool manual_connection)\n+{\n+    auto sock = CreateSock(dest.GetSAFamily());\n+    if (!sock) {\n+        LogPrintLevel(BCLog::NET, BCLog::Level::Error, \"Cannot create a socket for connecting to %s\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+\n+    // Create a sockaddr from the specified service.\n+    struct sockaddr_storage sockaddr;\n+    socklen_t len = sizeof(sockaddr);\n+    if (sock->Get() == INVALID_SOCKET) {\n+        LogPrintf(\"Cannot connect to %s: invalid socket\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+    if (!dest.GetSockAddr((struct sockaddr*)&sockaddr, &len)) {\n+        LogPrintf(\"Cannot connect to %s: unsupported network\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+\n+    return ConnectToSocket(std::move(sock), (struct sockaddr*)&sockaddr, len, dest.ToStringAddrPort(), manual_connection);\n+}\n+\n+std::unique_ptr<Sock> Proxy::Connect() const\n+{\n+    if (!m_is_unix_socket) return ConnectDirectly(proxy, /*manual_connection=*/true);\n+\n+    auto sock = CreateSock(AF_UNIX);",
      "path": "src/netbase.cpp",
      "position": 200,
      "original_position": 208,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "b1199bce0fda452a8d24c1753ffdea3c327701ff",
      "in_reply_to_id": 1262371026,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ok thanks I added the preprocessor logic to the function.\r\n\r\nI'll look into adding afunix.h for windows, maybe in compat.h? also add it to the first commit to test for AF_UNIX in configure.ac. Might be better in a follow-up PR since not all windows platforms will have afunix.h and well need to test for it",
      "created_at": "2023-07-13T14:33:15Z",
      "updated_at": "2023-07-13T14:39:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1262653604",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262653604"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 630,
      "original_line": 630,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262664857",
      "pull_request_review_id": 1528618525,
      "id": 1262664857,
      "node_id": "PRRC_kwDOABII585LQryZ",
      "diff_hunk": "@@ -569,11 +584,55 @@ bool ConnectSocketDirectly(const CService &addrConnect, const Sock& sock, int nT\n         else\n #endif\n         {\n-            LogConnectFailure(manual_connection, \"connect() to %s failed: %s\", addrConnect.ToStringAddrPort(), NetworkErrorString(WSAGetLastError()));\n-            return false;\n+            LogConnectFailure(manual_connection, \"connect() to %s failed: %s\", dest_str, NetworkErrorString(WSAGetLastError()));\n+            return {};\n         }\n     }\n-    return true;\n+    return sock;\n+}\n+\n+std::unique_ptr<Sock> ConnectDirectly(const CService& dest, bool manual_connection)\n+{\n+    auto sock = CreateSock(dest.GetSAFamily());\n+    if (!sock) {\n+        LogPrintLevel(BCLog::NET, BCLog::Level::Error, \"Cannot create a socket for connecting to %s\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+\n+    // Create a sockaddr from the specified service.\n+    struct sockaddr_storage sockaddr;\n+    socklen_t len = sizeof(sockaddr);\n+    if (sock->Get() == INVALID_SOCKET) {\n+        LogPrintf(\"Cannot connect to %s: invalid socket\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+    if (!dest.GetSockAddr((struct sockaddr*)&sockaddr, &len)) {\n+        LogPrintf(\"Cannot connect to %s: unsupported network\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+\n+    return ConnectToSocket(std::move(sock), (struct sockaddr*)&sockaddr, len, dest.ToStringAddrPort(), manual_connection);\n+}\n+\n+std::unique_ptr<Sock> Proxy::Connect() const\n+{\n+    if (!m_is_unix_socket) return ConnectDirectly(proxy, /*manual_connection=*/true);\n+\n+    auto sock = CreateSock(AF_UNIX);\n+    if (!sock) {\n+        LogPrintLevel(BCLog::NET, BCLog::Level::Error, \"Cannot create a socket for connecting to %s\\n\", m_unix_socket_path);\n+        return {};\n+    }\n+\n+    const std::string path{m_unix_socket_path.substr(ADDR_PREFIX_UNIX.length())};\n+\n+    struct sockaddr_storage sockaddr;\n+    struct sockaddr_un* paddrun = (struct sockaddr_un*)&sockaddr;\n+    paddrun->sun_family = AF_UNIX;\n+    strcpy(paddrun->sun_path, path.c_str());",
      "path": "src/netbase.cpp",
      "position": null,
      "original_position": 219,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "b1199bce0fda452a8d24c1753ffdea3c327701ff",
      "in_reply_to_id": 1262372825,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "great catch thanks yeah I saw that in your commit but I was confused. makes sense now",
      "created_at": "2023-07-13T14:41:34Z",
      "updated_at": "2023-07-13T14:41:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1262664857",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262664857"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 632,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262667486",
      "pull_request_review_id": 1528622653,
      "id": 1262667486,
      "node_id": "PRRC_kwDOABII585LQsbe",
      "diff_hunk": "@@ -569,11 +584,55 @@ bool ConnectSocketDirectly(const CService &addrConnect, const Sock& sock, int nT\n         else\n #endif\n         {\n-            LogConnectFailure(manual_connection, \"connect() to %s failed: %s\", addrConnect.ToStringAddrPort(), NetworkErrorString(WSAGetLastError()));\n-            return false;\n+            LogConnectFailure(manual_connection, \"connect() to %s failed: %s\", dest_str, NetworkErrorString(WSAGetLastError()));\n+            return {};\n         }\n     }\n-    return true;\n+    return sock;\n+}\n+\n+std::unique_ptr<Sock> ConnectDirectly(const CService& dest, bool manual_connection)\n+{\n+    auto sock = CreateSock(dest.GetSAFamily());\n+    if (!sock) {\n+        LogPrintLevel(BCLog::NET, BCLog::Level::Error, \"Cannot create a socket for connecting to %s\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+\n+    // Create a sockaddr from the specified service.\n+    struct sockaddr_storage sockaddr;\n+    socklen_t len = sizeof(sockaddr);\n+    if (sock->Get() == INVALID_SOCKET) {\n+        LogPrintf(\"Cannot connect to %s: invalid socket\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+    if (!dest.GetSockAddr((struct sockaddr*)&sockaddr, &len)) {\n+        LogPrintf(\"Cannot connect to %s: unsupported network\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+\n+    return ConnectToSocket(std::move(sock), (struct sockaddr*)&sockaddr, len, dest.ToStringAddrPort(), manual_connection);\n+}\n+\n+std::unique_ptr<Sock> Proxy::Connect() const\n+{\n+    if (!m_is_unix_socket) return ConnectDirectly(proxy, /*manual_connection=*/true);\n+\n+    auto sock = CreateSock(AF_UNIX);\n+    if (!sock) {\n+        LogPrintLevel(BCLog::NET, BCLog::Level::Error, \"Cannot create a socket for connecting to %s\\n\", m_unix_socket_path);\n+        return {};\n+    }\n+\n+    const std::string path{m_unix_socket_path.substr(ADDR_PREFIX_UNIX.length())};\n+\n+    struct sockaddr_storage sockaddr;\n+    struct sockaddr_un* paddrun = (struct sockaddr_un*)&sockaddr;\n+    paddrun->sun_family = AF_UNIX;\n+    strcpy(paddrun->sun_path, path.c_str());\n+    socklen_t len = strlen(paddrun->sun_path) + sizeof(paddrun);\n+\n+    return ConnectToSocket(std::move(sock), (struct sockaddr*)&sockaddr, len, path, /*manual_connection=*/true);",
      "path": "src/netbase.cpp",
      "position": null,
      "original_position": 222,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "b1199bce0fda452a8d24c1753ffdea3c327701ff",
      "in_reply_to_id": 1262417198,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "got it thanks, fixed this when changing sockaddr_storage to sockaddr_un and it's now `addrun`",
      "created_at": "2023-07-13T14:43:33Z",
      "updated_at": "2023-07-13T14:43:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1262667486",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262667486"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 633,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 635,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262690201",
      "pull_request_review_id": 1528660306,
      "id": 1262690201,
      "node_id": "PRRC_kwDOABII585LQx-Z",
      "diff_hunk": "@@ -109,10 +127,15 @@ def setup_nodes(self):\n             ['-listen', f'-proxy={self.conf2.addr[0]}:{self.conf2.addr[1]}','-proxyrandomize=1'],\n             [],\n             ['-listen', f'-proxy={self.conf1.addr[0]}:{self.conf1.addr[1]}','-proxyrandomize=1',\n-                '-cjdnsreachable']\n+                '-cjdnsreachable'],\n+            [],\n+            []\n         ]\n         if self.have_ipv6:\n             args[3] = ['-listen', f'-proxy=[{self.conf3.addr[0]}]:{self.conf3.addr[1]}','-proxyrandomize=0', '-noonion']\n+        if self.have_unix_sockets:\n+            args[5] = ['-listen', f'-proxy=unix:{socket_path}', '-proxyrandomize=0']\n+            args[6] = ['-listen', f'-onion=unix:{socket_path}', '-proxyrandomize=0']",
      "path": "test/functional/feature_proxy.py",
      "position": null,
      "original_position": 85,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "b1199bce0fda452a8d24c1753ffdea3c327701ff",
      "in_reply_to_id": 1262422280,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "ok fixed this, just using default (with auth) for the test",
      "created_at": "2023-07-13T14:59:11Z",
      "updated_at": "2023-07-13T14:59:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1262690201",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262690201"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 136,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 138,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262751862",
      "pull_request_review_id": 1528755489,
      "id": 1262751862,
      "node_id": "PRRC_kwDOABII585LRBB2",
      "diff_hunk": "@@ -230,6 +253,13 @@ def run_test(self):\n             proxies=[self.serv1, self.serv1, self.serv1, self.serv1],\n             auth=False, test_onion=True, test_cjdns=True)\n \n+        # -proxyrandomize=0",
      "path": "test/functional/feature_proxy.py",
      "position": null,
      "original_position": 138,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "b1199bce0fda452a8d24c1753ffdea3c327701ff",
      "in_reply_to_id": 1262421705,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "ah sorry",
      "created_at": "2023-07-13T15:47:33Z",
      "updated_at": "2023-07-13T15:47:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1262751862",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262751862"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 256,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262927938",
      "pull_request_review_id": 1529039444,
      "id": 1262927938,
      "node_id": "PRRC_kwDOABII585LRsBC",
      "diff_hunk": "@@ -45,16 +48,46 @@ static inline bool operator&(ConnectionDirection a, ConnectionDirection b) {\n     return (underlying(a) & underlying(b));\n }\n \n+/**\n+ * Check if a string is a valid UNIX domain socket path\n+ *\n+ * @param      name     The string provided by the user representing a local path\n+ *\n+ * @returns Whether the string has proper format, length, and points to an existing file path\n+ */\n+bool IsUnixSocketPath(const std::string& name);\n+\n class Proxy\n {\n public:\n-    Proxy(): randomize_credentials(false) {}\n-    explicit Proxy(const CService &_proxy, bool _randomize_credentials=false): proxy(_proxy), randomize_credentials(_randomize_credentials) {}\n-\n-    bool IsValid() const { return proxy.IsValid(); }\n+    Proxy() : m_is_unix_socket(false), m_randomize_credentials(false) {}\n+    explicit Proxy(const CService& _proxy, bool _randomize_credentials = false) : proxy(_proxy), m_is_unix_socket(false), m_randomize_credentials(_randomize_credentials) {}\n+    explicit Proxy(const std::string path, bool _randomize_credentials = false) : m_unix_socket_path(path), m_is_unix_socket(true), m_randomize_credentials(_randomize_credentials) {}\n \n     CService proxy;",
      "path": "src/netbase.h",
      "position": 34,
      "original_position": 34,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "b1199bce0fda452a8d24c1753ffdea3c327701ff",
      "in_reply_to_id": 1262436716,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ok adding two commits to handle these two affected areas. For the GUI I've written logic that accommodates the new Proxy features but I'll have to submit a follow-up PR to enable unix socket path configuration from the GUI as a separate element from address:port proxy configuration. \r\n\r\nSo with this only PR, the user can only set unix sockets outside the GUI, and in the network tab they will see `\"Options set in this dialog are overridden by the command line...\"` anyway.",
      "created_at": "2023-07-13T18:33:53Z",
      "updated_at": "2023-07-13T18:33:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1262927938",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262927938"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 68,
      "original_line": 68,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262930258",
      "pull_request_review_id": 1529043178,
      "id": 1262930258,
      "node_id": "PRRC_kwDOABII585LRslS",
      "diff_hunk": "@@ -483,21 +506,25 @@ std::unique_ptr<Sock> CreateSockTCP(const CService& address_family)\n     }\n #endif\n \n-    // Set the no-delay option (disable Nagle's algorithm) on the TCP socket.\n-    const int on{1};\n-    if (sock->SetSockOpt(IPPROTO_TCP, TCP_NODELAY, &on, sizeof(on)) == SOCKET_ERROR) {\n-        LogPrint(BCLog::NET, \"Unable to set TCP_NODELAY on a newly created socket, continuing anyway\\n\");\n-    }\n+#if HAVE_SOCKADDR_UN\n+    if (address_family == AF_UNIX) return sock;\n+#endif\n \n     // Set the non-blocking option on the socket.\n     if (!sock->SetNonBlocking()) {\n         LogPrintf(\"Error setting socket to non-blocking: %s\\n\", NetworkErrorString(WSAGetLastError()));\n         return nullptr;\n     }",
      "path": "src/netbase.cpp",
      "position": null,
      "original_position": 83,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "b1199bce0fda452a8d24c1753ffdea3c327701ff",
      "in_reply_to_id": 1262486665,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ok I'll put this statement after `SetNonBlocking()` but I think the Socks5 stuff should live in a follow-up PR?",
      "created_at": "2023-07-13T18:36:40Z",
      "updated_at": "2023-07-13T18:36:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1262930258",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1262930258"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 509,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 515,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1263941686",
      "pull_request_review_id": 1530635524,
      "id": 1263941686,
      "node_id": "PRRC_kwDOABII585LVjg2",
      "diff_hunk": "@@ -483,21 +506,25 @@ std::unique_ptr<Sock> CreateSockTCP(const CService& address_family)\n     }\n #endif\n \n-    // Set the no-delay option (disable Nagle's algorithm) on the TCP socket.\n-    const int on{1};\n-    if (sock->SetSockOpt(IPPROTO_TCP, TCP_NODELAY, &on, sizeof(on)) == SOCKET_ERROR) {\n-        LogPrint(BCLog::NET, \"Unable to set TCP_NODELAY on a newly created socket, continuing anyway\\n\");\n-    }\n+#if HAVE_SOCKADDR_UN\n+    if (address_family == AF_UNIX) return sock;\n+#endif\n \n     // Set the non-blocking option on the socket.\n     if (!sock->SetNonBlocking()) {\n         LogPrintf(\"Error setting socket to non-blocking: %s\\n\", NetworkErrorString(WSAGetLastError()));\n         return nullptr;\n     }",
      "path": "src/netbase.cpp",
      "position": null,
      "original_position": 83,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "b1199bce0fda452a8d24c1753ffdea3c327701ff",
      "in_reply_to_id": 1262486665,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This resulted in `netbase.cpp:415:27: runtime error: implicit conversion from type 'int' of value 210 (32-bit, signed) to type 'char' changed the value to -46 (8-bit, signed)`. This is ok in practice because the data is transferred as bytes anyway over the socket (not as integers). Anyway, to silence the sanitizer:\r\n\r\n<details>\r\n<summary>[patch] sock: introduce a generic Sock::SendComplete(const void*, size_t, ...)</summary>\r\n\r\n```diff\r\ncommit 8467080a08327aaf0d853a73412456c44558a9b3\r\nParent: af4eb52ff611342dbd285f218474649f16badbaf\r\nAuthor:     Vasil Dimov <vd@FreeBSD.org>\r\nAuthorDate: Fri Jul 14 18:36:34 2023 +0200\r\nCommit:     Vasil Dimov <vd@FreeBSD.org>\r\nCommitDate: Fri Jul 14 18:36:34 2023 +0200\r\ngpg: Signature made Fri Jul 14 18:38:55 2023 CEST\r\ngpg:                using RSA key E64D8D45614DB07545D9CCC154DF06F64B55CBBF\r\ngpg: Good signature from \"Vasil Dimov <vd@myforest.net>\" [ultimate]\r\ngpg:                 aka \"Vasil Dimov <vd@FreeBSD.org>\" [ultimate]\r\ngpg:                 aka \"Vasil Dimov <vasild@gmail.com>\" [ultimate]\r\n\r\n\r\n    sock: introduce a generic Sock::SendComplete(const void*, size_t, ...)\r\n    \r\n    Use that in `Sock::SendComplete(const std::string&, ...)` and introduce\r\n    a new `Sock::SendComplete(const std::vector<uint8_t>&, ...)` to be used\r\n    in the `Socks5()` function.\r\n\r\ndiff --git a/src/util/sock.cpp b/src/util/sock.cpp\r\nindex c83869bc77..6cf1b84f18 100644\r\n--- a/src/util/sock.cpp\r\n+++ b/src/util/sock.cpp\r\n@@ -248,25 +248,26 @@ bool Sock::WaitMany(std::chrono::milliseconds timeout, EventsPerSock& events_per\r\n     }\r\n \r\n     return true;\r\n #endif /* USE_POLL */\r\n }\r\n \r\n-void Sock::SendComplete(const std::string& data,\r\n+void Sock::SendComplete(const void* data,\r\n+                        size_t len,\r\n                         std::chrono::milliseconds timeout,\r\n                         CThreadInterrupt& interrupt) const\r\n {\r\n     const auto deadline = GetTime<std::chrono::milliseconds>() + timeout;\r\n     size_t sent{0};\r\n \r\n     for (;;) {\r\n-        const ssize_t ret{Send(data.data() + sent, data.size() - sent, MSG_NOSIGNAL)};\r\n+        const ssize_t ret{Send(static_cast<const uint8_t*>(data) + sent, len - sent, MSG_NOSIGNAL)};\r\n \r\n         if (ret > 0) {\r\n             sent += static_cast<size_t>(ret);\r\n-            if (sent == data.size()) {\r\n+            if (sent == len) {\r\n                 break;\r\n             }\r\n         } else {\r\n             const int err{WSAGetLastError()};\r\n             if (IOErrorIsPermanent(err)) {\r\n                 throw std::runtime_error(strprintf(\"send(): %s\", NetworkErrorString(err)));\r\n@@ -274,27 +275,41 @@ void Sock::SendComplete(const std::string& data,\r\n         }\r\n \r\n         const auto now = GetTime<std::chrono::milliseconds>();\r\n \r\n         if (now >= deadline) {\r\n             throw std::runtime_error(strprintf(\r\n-                \"Send timeout (sent only %u of %u bytes before that)\", sent, data.size()));\r\n+                \"Send timeout (sent only %u of %u bytes before that)\", sent, len));\r\n         }\r\n \r\n         if (interrupt) {\r\n             throw std::runtime_error(strprintf(\r\n-                \"Send interrupted (sent only %u of %u bytes before that)\", sent, data.size()));\r\n+                \"Send interrupted (sent only %u of %u bytes before that)\", sent, len));\r\n         }\r\n \r\n         // Wait for a short while (or the socket to become ready for sending) before retrying\r\n         // if nothing was sent.\r\n         const auto wait_time = std::min(deadline - now, std::chrono::milliseconds{MAX_WAIT_FOR_IO});\r\n         (void)Wait(wait_time, SEND);\r\n     }\r\n }\r\n \r\n+void Sock::SendComplete(const std::string& data,\r\n+                        std::chrono::milliseconds timeout,\r\n+                        CThreadInterrupt& interrupt) const\r\n+{\r\n+    SendComplete(data.data(), data.size(), timeout, interrupt);\r\n+}\r\n+\r\n+void Sock::SendComplete(const std::vector<uint8_t>& data,\r\n+                        std::chrono::milliseconds timeout,\r\n+                        CThreadInterrupt& interrupt) const\r\n+{\r\n+    SendComplete(data.data(), data.size(), timeout, interrupt);\r\n+}\r\n+\r\n std::string Sock::RecvUntilTerminator(uint8_t terminator,\r\n                                       std::chrono::milliseconds timeout,\r\n                                       CThreadInterrupt& interrupt,\r\n                                       size_t max_data) const\r\n {\r\n     const auto deadline = GetTime<std::chrono::milliseconds>() + timeout;\r\ndiff --git a/src/util/sock.h b/src/util/sock.h\r\nindex 6bac2dfd34..7f7b426665 100644\r\n--- a/src/util/sock.h\r\n+++ b/src/util/sock.h\r\n@@ -230,21 +230,37 @@ public:\r\n \r\n     /* Higher level, convenience, methods. These may throw. */\r\n \r\n     /**\r\n      * Send the given data, retrying on transient errors.\r\n      * @param[in] data Data to send.\r\n+     * @param[in] len Length of the data in bytes.\r\n      * @param[in] timeout Timeout for the entire operation.\r\n      * @param[in] interrupt If this is signaled then the operation is canceled.\r\n      * @throws std::runtime_error if the operation cannot be completed. In this case only some of\r\n      * the data will be written to the socket.\r\n      */\r\n+    virtual void SendComplete(const void* data,\r\n+                              size_t len,\r\n+                              std::chrono::milliseconds timeout,\r\n+                              CThreadInterrupt& interrupt) const;\r\n+\r\n+    /**\r\n+     * Convenience method, equivalent to `SendComplete(data.data(), data.size(), timeout, interrupt)`.\r\n+     */\r\n     virtual void SendComplete(const std::string& data,\r\n                               std::chrono::milliseconds timeout,\r\n                               CThreadInterrupt& interrupt) const;\r\n \r\n+    /**\r\n+     * Convenience method, equivalent to `SendComplete(data.data(), data.size(), timeout, interrupt)`.\r\n+     */\r\n+    virtual void SendComplete(const std::vector<uint8_t>& data,\r\n+                              std::chrono::milliseconds timeout,\r\n+                              CThreadInterrupt& interrupt) const;\r\n+\r\n     /**\r\n      * Read from socket until a terminator character is encountered. Will never consume bytes past\r\n      * the terminator from the socket.\r\n      * @param[in] terminator Character up to which to read from the socket.\r\n      * @param[in] timeout Timeout for the entire operation.\r\n      * @param[in] interrupt If this is signaled then the operation is canceled.\r\n```\r\n\r\nAlso in this branch: https://github.com/vasild/bitcoin/tree/tor-unix-domain-socket (the second commit)\r\n</details>\r\n\r\nand adapt `Socks5()` to use `std::vector<uint8_t>` for the arguments it passes to `SendComplete()` (done in the last commit of https://github.com/vasild/bitcoin/tree/tor-unix-domain-socket).\r\n\r\nThat is, I think the two topmost commits from https://github.com/vasild/bitcoin/tree/tor-unix-domain-socket should be the first commits in this PR.",
      "created_at": "2023-07-14T16:52:57Z",
      "updated_at": "2023-07-14T16:52:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1263941686",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1263941686"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 509,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 515,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1264030502",
      "pull_request_review_id": 1530788647,
      "id": 1264030502,
      "node_id": "PRRC_kwDOABII585LV5Mm",
      "diff_hunk": "@@ -483,21 +506,25 @@ std::unique_ptr<Sock> CreateSockTCP(const CService& address_family)\n     }\n #endif\n \n-    // Set the no-delay option (disable Nagle's algorithm) on the TCP socket.\n-    const int on{1};\n-    if (sock->SetSockOpt(IPPROTO_TCP, TCP_NODELAY, &on, sizeof(on)) == SOCKET_ERROR) {\n-        LogPrint(BCLog::NET, \"Unable to set TCP_NODELAY on a newly created socket, continuing anyway\\n\");\n-    }\n+#if HAVE_SOCKADDR_UN\n+    if (address_family == AF_UNIX) return sock;\n+#endif\n \n     // Set the non-blocking option on the socket.\n     if (!sock->SetNonBlocking()) {\n         LogPrintf(\"Error setting socket to non-blocking: %s\\n\", NetworkErrorString(WSAGetLastError()));\n         return nullptr;\n     }",
      "path": "src/netbase.cpp",
      "position": null,
      "original_position": 83,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "b1199bce0fda452a8d24c1753ffdea3c327701ff",
      "in_reply_to_id": 1262486665,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Now its ` ERROR: Error during SOCKS5 proxy handshake: send(): Transport endpoint is not connected (107)` I'm still digging in to this...",
      "created_at": "2023-07-14T18:33:17Z",
      "updated_at": "2023-07-14T18:33:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1264030502",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1264030502"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 509,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 515,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265260663",
      "pull_request_review_id": 1532636721,
      "id": 1265260663,
      "node_id": "PRRC_kwDOABII585Lalh3",
      "diff_hunk": "@@ -483,21 +506,25 @@ std::unique_ptr<Sock> CreateSockTCP(const CService& address_family)\n     }\n #endif\n \n-    // Set the no-delay option (disable Nagle's algorithm) on the TCP socket.\n-    const int on{1};\n-    if (sock->SetSockOpt(IPPROTO_TCP, TCP_NODELAY, &on, sizeof(on)) == SOCKET_ERROR) {\n-        LogPrint(BCLog::NET, \"Unable to set TCP_NODELAY on a newly created socket, continuing anyway\\n\");\n-    }\n+#if HAVE_SOCKADDR_UN\n+    if (address_family == AF_UNIX) return sock;\n+#endif\n \n     // Set the non-blocking option on the socket.\n     if (!sock->SetNonBlocking()) {\n         LogPrintf(\"Error setting socket to non-blocking: %s\\n\", NetworkErrorString(WSAGetLastError()));\n         return nullptr;\n     }",
      "path": "src/netbase.cpp",
      "position": null,
      "original_position": 83,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "b1199bce0fda452a8d24c1753ffdea3c327701ff",
      "in_reply_to_id": 1262486665,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> Transport endpoint is not connected\r\n\r\nIs this still a problem or it got resolved?",
      "created_at": "2023-07-17T12:13:01Z",
      "updated_at": "2023-07-17T12:13:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1265260663",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265260663"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 509,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 515,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265268347",
      "pull_request_review_id": 1532647334,
      "id": 1265268347,
      "node_id": "PRRC_kwDOABII585LanZ7",
      "diff_hunk": "@@ -483,21 +506,25 @@ std::unique_ptr<Sock> CreateSockTCP(const CService& address_family)\n     }\n #endif\n \n-    // Set the no-delay option (disable Nagle's algorithm) on the TCP socket.\n-    const int on{1};\n-    if (sock->SetSockOpt(IPPROTO_TCP, TCP_NODELAY, &on, sizeof(on)) == SOCKET_ERROR) {\n-        LogPrint(BCLog::NET, \"Unable to set TCP_NODELAY on a newly created socket, continuing anyway\\n\");\n-    }\n+#if HAVE_SOCKADDR_UN\n+    if (address_family == AF_UNIX) return sock;\n+#endif\n \n     // Set the non-blocking option on the socket.\n     if (!sock->SetNonBlocking()) {\n         LogPrintf(\"Error setting socket to non-blocking: %s\\n\", NetworkErrorString(WSAGetLastError()));\n         return nullptr;\n     }",
      "path": "src/netbase.cpp",
      "position": null,
      "original_position": 83,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "b1199bce0fda452a8d24c1753ffdea3c327701ff",
      "in_reply_to_id": 1262486665,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Resolved!",
      "created_at": "2023-07-17T12:18:34Z",
      "updated_at": "2023-07-17T12:18:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1265268347",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265268347"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 509,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 515,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1268106550",
      "pull_request_review_id": 1537148388,
      "id": 1268106550,
      "node_id": "PRRC_kwDOABII585LlcU2",
      "diff_hunk": "@@ -569,11 +584,55 @@ bool ConnectSocketDirectly(const CService &addrConnect, const Sock& sock, int nT\n         else\n #endif\n         {\n-            LogConnectFailure(manual_connection, \"connect() to %s failed: %s\", addrConnect.ToStringAddrPort(), NetworkErrorString(WSAGetLastError()));\n-            return false;\n+            LogConnectFailure(manual_connection, \"connect() to %s failed: %s\", dest_str, NetworkErrorString(WSAGetLastError()));\n+            return {};\n         }\n     }\n-    return true;\n+    return sock;\n+}\n+\n+std::unique_ptr<Sock> ConnectDirectly(const CService& dest, bool manual_connection)\n+{\n+    auto sock = CreateSock(dest.GetSAFamily());\n+    if (!sock) {\n+        LogPrintLevel(BCLog::NET, BCLog::Level::Error, \"Cannot create a socket for connecting to %s\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+\n+    // Create a sockaddr from the specified service.\n+    struct sockaddr_storage sockaddr;\n+    socklen_t len = sizeof(sockaddr);\n+    if (sock->Get() == INVALID_SOCKET) {\n+        LogPrintf(\"Cannot connect to %s: invalid socket\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+    if (!dest.GetSockAddr((struct sockaddr*)&sockaddr, &len)) {\n+        LogPrintf(\"Cannot connect to %s: unsupported network\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+\n+    return ConnectToSocket(std::move(sock), (struct sockaddr*)&sockaddr, len, dest.ToStringAddrPort(), manual_connection);\n+}\n+\n+std::unique_ptr<Sock> Proxy::Connect() const\n+{\n+    if (!m_is_unix_socket) return ConnectDirectly(proxy, /*manual_connection=*/true);\n+\n+    auto sock = CreateSock(AF_UNIX);\n+    if (!sock) {\n+        LogPrintLevel(BCLog::NET, BCLog::Level::Error, \"Cannot create a socket for connecting to %s\\n\", m_unix_socket_path);\n+        return {};\n+    }\n+\n+    const std::string path{m_unix_socket_path.substr(ADDR_PREFIX_UNIX.length())};\n+\n+    struct sockaddr_storage sockaddr;\n+    struct sockaddr_un* paddrun = (struct sockaddr_un*)&sockaddr;\n+    paddrun->sun_family = AF_UNIX;\n+    strcpy(paddrun->sun_path, path.c_str());\n+    socklen_t len = strlen(paddrun->sun_path) + sizeof(paddrun);\n+\n+    return ConnectToSocket(std::move(sock), (struct sockaddr*)&sockaddr, len, path, /*manual_connection=*/true);",
      "path": "src/netbase.cpp",
      "position": null,
      "original_position": 222,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "b1199bce0fda452a8d24c1753ffdea3c327701ff",
      "in_reply_to_id": 1262417198,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In the latest code it is:\r\n\r\n```cpp\r\n      socklen_t len = sizeof(addrun);\r\n  \r\n      if(!ConnectToSocket(*sock, (struct sockaddr*)&addrun, len, path, /*manual_connection=*/true)) {\r\n```\r\n\r\nfeel free to ditch the `len` variable and use `sizeof(addrun)` directly when calling `ConnectToSocket()`.",
      "created_at": "2023-07-19T13:49:30Z",
      "updated_at": "2023-07-19T13:49:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1268106550",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1268106550"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 633,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 635,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1268148641",
      "pull_request_review_id": 1537217507,
      "id": 1268148641,
      "node_id": "PRRC_kwDOABII585Llmmh",
      "diff_hunk": "@@ -492,7 +492,7 @@ void SetupServerArgs(ArgsManager& argsman)\n     argsman.AddArg(\"-maxsendbuffer=<n>\", strprintf(\"Maximum per-connection send buffer, <n>*1000 bytes (default: %u)\", DEFAULT_MAXSENDBUFFER), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-maxtimeadjustment\", strprintf(\"Maximum allowed median peer time offset adjustment. Local perspective of time may be influenced by outbound peers forward or backward by this amount (default: %u seconds).\", DEFAULT_MAX_TIME_ADJUSTMENT), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-maxuploadtarget=<n>\", strprintf(\"Tries to keep outbound traffic under the given target per 24h. Limit does not apply to peers with 'download' permission or blocks created within past week. 0 = no limit (default: %s). Optional suffix units [k|K|m|M|g|G|t|T] (default: M). Lowercase is 1000 base while uppercase is 1024 base\", DEFAULT_MAX_UPLOAD_TARGET), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n-    argsman.AddArg(\"-onion=<ip:port>\", \"Use separate SOCKS5 proxy to reach peers via Tor onion services, set -noonion to disable (default: -proxy)\", ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n+    argsman.AddArg(\"-onion=<ip:port|path>\", \"Use separate SOCKS5 proxy to reach peers via Tor onion services, set -noonion to disable (default: -proxy). May be a local file path prefixed with 'unix:' if UNIX domain sockets are supported by the platform.\", ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "f74da5eba9192e219567ab753c92b6cd2e66f73b",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "We have already checked if UNIX sockets are supported.\r\n\r\n```cpp\r\n#if HAVE_SOCKADDR_UN\r\n    argsman.AddArg(\"-onion=<ip:port|path>\", \"Use separate SOCKS5 proxy to reach peers via Tor onion services, set -noonion to disable (default: -proxy). May be a local file path prefixed with 'unix:'.\", ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\r\n#else\r\n    argsman.AddArg(\"-onion=<ip:port>\", \"Use separate SOCKS5 proxy to reach peers via Tor onion services, set -noonion to disable (default: -proxy)\", ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\r\n#endif\r\n```",
      "created_at": "2023-07-19T14:19:42Z",
      "updated_at": "2023-07-19T14:20:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1268148641",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1268148641"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 495,
      "start_side": "LEFT",
      "line": null,
      "original_line": 495,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1268326494",
      "pull_request_review_id": 1537498926,
      "id": 1268326494,
      "node_id": "PRRC_kwDOABII585LmSBe",
      "diff_hunk": "@@ -492,7 +492,7 @@ void SetupServerArgs(ArgsManager& argsman)\n     argsman.AddArg(\"-maxsendbuffer=<n>\", strprintf(\"Maximum per-connection send buffer, <n>*1000 bytes (default: %u)\", DEFAULT_MAXSENDBUFFER), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-maxtimeadjustment\", strprintf(\"Maximum allowed median peer time offset adjustment. Local perspective of time may be influenced by outbound peers forward or backward by this amount (default: %u seconds).\", DEFAULT_MAX_TIME_ADJUSTMENT), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-maxuploadtarget=<n>\", strprintf(\"Tries to keep outbound traffic under the given target per 24h. Limit does not apply to peers with 'download' permission or blocks created within past week. 0 = no limit (default: %s). Optional suffix units [k|K|m|M|g|G|t|T] (default: M). Lowercase is 1000 base while uppercase is 1024 base\", DEFAULT_MAX_UPLOAD_TARGET), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n-    argsman.AddArg(\"-onion=<ip:port>\", \"Use separate SOCKS5 proxy to reach peers via Tor onion services, set -noonion to disable (default: -proxy)\", ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n+    argsman.AddArg(\"-onion=<ip:port|path>\", \"Use separate SOCKS5 proxy to reach peers via Tor onion services, set -noonion to disable (default: -proxy). May be a local file path prefixed with 'unix:' if UNIX domain sockets are supported by the platform.\", ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "f74da5eba9192e219567ab753c92b6cd2e66f73b",
      "in_reply_to_id": 1268148641,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "ah of course thanks, fixed and pushed",
      "created_at": "2023-07-19T16:32:29Z",
      "updated_at": "2023-07-19T16:32:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1268326494",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1268326494"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": 495,
      "start_side": "LEFT",
      "line": null,
      "original_line": 495,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1358214172",
      "pull_request_review_id": 1676409183,
      "id": 1358214172,
      "node_id": "PRRC_kwDOABII585Q9LQc",
      "diff_hunk": "@@ -509,22 +536,10 @@ static void LogConnectFailure(bool manual_connection, const char* fmt, const Arg\n     }\n }\n \n-bool ConnectSocketDirectly(const CService &addrConnect, const Sock& sock, int nTimeout, bool manual_connection)\n+static bool ConnectToSocket(const Sock& sock, struct sockaddr* sockaddr, socklen_t len, const std::string& dest_str, bool manual_connection)\n {\n-    // Create a sockaddr from the specified service.\n-    struct sockaddr_storage sockaddr;\n-    socklen_t len = sizeof(sockaddr);\n-    if (sock.Get() == INVALID_SOCKET) {\n-        LogPrintf(\"Cannot connect to %s: invalid socket\\n\", addrConnect.ToStringAddrPort());\n-        return false;\n-    }\n-    if (!addrConnect.GetSockAddr((struct sockaddr*)&sockaddr, &len)) {\n-        LogPrintf(\"Cannot connect to %s: unsupported network\\n\", addrConnect.ToStringAddrPort());\n-        return false;\n-    }\n-\n-    // Connect to the addrConnect service on the hSocket socket.\n-    if (sock.Connect(reinterpret_cast<struct sockaddr*>(&sockaddr), len) == SOCKET_ERROR) {\n+    // Connect to the dest service on the hSocket socket.",
      "path": "src/netbase.cpp",
      "position": null,
      "original_position": 120,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "d8f993b77d2f0bad0e7a5659885ffbbd9f75dbec",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit:\r\n```suggestion\r\n    // Connect to `sockaddr` using `sock`.\r\n```\r\nor drop the comment altogether.",
      "created_at": "2023-10-13T12:44:51Z",
      "updated_at": "2023-10-13T14:44:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1358214172",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1358214172"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 541,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1358244984",
      "pull_request_review_id": 1676409183,
      "id": 1358244984,
      "node_id": "PRRC_kwDOABII585Q9Sx4",
      "diff_hunk": "@@ -502,7 +506,11 @@ void SetupServerArgs(ArgsManager& argsman)\n     // TODO: remove the sentence \"Nodes not using ... incoming connections.\" once the changes from\n     // https://github.com/bitcoin/bitcoin/pull/23542 have become widespread.\n     argsman.AddArg(\"-port=<port>\", strprintf(\"Listen for connections on <port>. Nodes not using the default ports (default: %u, testnet: %u, signet: %u, regtest: %u) are unlikely to get incoming connections. Not relevant for I2P (see doc/i2p.md).\", defaultChainParams->GetDefaultPort(), testnetChainParams->GetDefaultPort(), signetChainParams->GetDefaultPort(), regtestChainParams->GetDefaultPort()), ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n+#if HAVE_SOCKADDR_UN\n+    argsman.AddArg(\"-proxy=<ip:port|path>\", \"Connect through SOCKS5 proxy, set -noproxy to disable (default: disabled). May be a local file path prefixed with 'unix:' if UNIX domain sockets are supported by the platform.\", ArgsManager::ALLOW_ANY | ArgsManager::DISALLOW_ELISION, OptionsCategory::CONNECTION);",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 17,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "d8f993b77d2f0bad0e7a5659885ffbbd9f75dbec",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit:\r\n\r\n```suggestion\r\n    argsman.AddArg(\"-proxy=<ip:port|path>\", \"Connect through SOCKS5 proxy, set -noproxy to disable (default: disabled). May be a local file path prefixed with 'unix:'.\", ArgsManager::ALLOW_ANY | ArgsManager::DISALLOW_ELISION, OptionsCategory::CONNECTION);\r\n```\r\n\r\n(this is inside `#if HAVE_SOCKADDR_UN`)",
      "created_at": "2023-10-13T13:08:46Z",
      "updated_at": "2023-10-13T14:44:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1358244984",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1358244984"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 510,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1361847268",
      "pull_request_review_id": 1681893468,
      "id": 1361847268,
      "node_id": "PRRC_kwDOABII585RLCPk",
      "diff_hunk": "@@ -629,27 +635,32 @@ bool IsProxy(const CNetAddr &addr) {\n     return false;\n }\n \n-bool ConnectThroughProxy(const Proxy& proxy, const std::string& strDest, uint16_t port, const Sock& sock, int nTimeout, bool& outProxyConnectionFailed)\n+std::unique_ptr<Sock> ConnectThroughProxy(const Proxy& proxy,\n+                                          const std::string& dest,\n+                                          uint16_t port,\n+                                          bool& proxy_connection_failed)\n {\n     // first connect to proxy server\n-    if (!ConnectSocketDirectly(proxy.proxy, sock, nTimeout, true)) {\n-        outProxyConnectionFailed = true;\n-        return false;\n+    auto sock = ConnectDirectly(proxy.proxy, /*manual_connection=*/true);",
      "path": "src/netbase.cpp",
      "position": null,
      "original_position": 103,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "7239ec264a1def8e8aeff8c1ca57ece2ea90f65c",
      "in_reply_to_id": null,
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In 7239ec264a1def8e8aeff8c1ca57ece2ea90f65c\r\n\r\nWhy do we always set `manual_connection = true` here (I appreciate it was existing code)? If we come via `ConnectThroughProxy` I don't think that's always the case, even though the [docstring](https://github.com/bitcoin/bitcoin/pull/27375/files#diff-fabd42e1a60c125c7fb578038e732a21d8147f407c8fbe1b6a608ba4d8115785R229) implies it should be.\r\n\r\nedit: it doesn't seem to have much effect anyway, besides [logging a different error message on failure](https://github.com/bitcoin/bitcoin/pull/27375/files#diff-3499e52d708f04ebd0bfeec799dd26464ca6bd26a802c700460227c4f41ec4b5R574-R577).",
      "created_at": "2023-10-17T09:57:48Z",
      "updated_at": "2023-10-17T11:02:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1361847268",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1361847268"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 644,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1361886774",
      "pull_request_review_id": 1681893468,
      "id": 1361886774,
      "node_id": "PRRC_kwDOABII585RLL42",
      "diff_hunk": "@@ -210,6 +210,24 @@ CService LookupNumeric(const std::string& name, uint16_t portDefault, DNSLookupF\n     return Lookup(name, portDefault, /*fAllowLookup=*/false, dns_lookup_function).value_or(CService{});\n }\n \n+bool IsUnixSocketPath(const std::string& name)\n+{\n+#if HAVE_SOCKADDR_UN\n+    if (name.find(ADDR_PREFIX_UNIX) != 0) return false;\n+\n+    // Split off \"unix:\" prefix\n+    std::string str{name.substr(ADDR_PREFIX_UNIX.length())};\n+\n+    // Path size limit is platform-dependent\n+    // see https://manpages.ubuntu.com/manpages/xenial/en/man7/unix.7.html\n+    if (str.size() + 1 > sizeof(((sockaddr_un*)nullptr)->sun_path)) return false;\n+",
      "path": "src/netbase.cpp",
      "position": 26,
      "original_position": 15,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "892e0f4fae411ee731e35e45ef600e42824edccd",
      "in_reply_to_id": null,
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: if you touch again we could also check here whether the path exists and return an appropriate error if it doesn't?\r\n\r\nI tried some (wrong) unix onion options, like `onion=unix:%2Frun%2Ftor%2Fsocks` and `onion=127.0.0.1:9050` and these are accepted by init, but (obviously) fail to connect:\r\n\r\n```\r\n2023-10-17T10:25:01Z connect() to 127.0.0.1:9050 failed: No such file or directory (2)\r\n2023-10-17T10:25:01Z Cannot connect to socket for 127.0.0.1:9050\r\n2023-10-17T10:25:02Z New block-relay-only v1 peer connected: version: 70016, blocks=812593, peer=2\r\n2023-10-17T10:25:07Z Cannot connect to socket for 117.86.73.230:8333\r\n2023-10-17T10:25:08Z Cannot connect to socket for 203.91.85.237:8333\r\n2023-10-17T10:25:08Z connect() to 127.0.0.1:9050 failed: No such file or directory (2)\r\n2023-10-17T10:25:08Z Cannot connect to socket for 127.0.0.1:9050\r\n2023-10-17T10:25:14Z Cannot connect to socket for 178.66.156.78:8333\r\n```\r\n\r\nThe logs are _kind of_ clear about this, but could be improved.",
      "created_at": "2023-10-17T10:26:31Z",
      "updated_at": "2023-10-17T11:02:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1361886774",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1361886774"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 226,
      "original_line": 226,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1362521247",
      "pull_request_review_id": 1682982202,
      "id": 1362521247,
      "node_id": "PRRC_kwDOABII585RNmyf",
      "diff_hunk": "@@ -210,6 +210,24 @@ CService LookupNumeric(const std::string& name, uint16_t portDefault, DNSLookupF\n     return Lookup(name, portDefault, /*fAllowLookup=*/false, dns_lookup_function).value_or(CService{});\n }\n \n+bool IsUnixSocketPath(const std::string& name)\n+{\n+#if HAVE_SOCKADDR_UN\n+    if (name.find(ADDR_PREFIX_UNIX) != 0) return false;\n+\n+    // Split off \"unix:\" prefix\n+    std::string str{name.substr(ADDR_PREFIX_UNIX.length())};\n+\n+    // Path size limit is platform-dependent\n+    // see https://manpages.ubuntu.com/manpages/xenial/en/man7/unix.7.html\n+    if (str.size() + 1 > sizeof(((sockaddr_un*)nullptr)->sun_path)) return false;\n+",
      "path": "src/netbase.cpp",
      "position": 26,
      "original_position": 15,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "892e0f4fae411ee731e35e45ef600e42824edccd",
      "in_reply_to_id": 1361886774,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This was discussed but we don't normally check this kind of option that deeply. For example, you can set `-onion=127.0.0.1:9050` and if Tor isn't running, all you get is a log message. The user should be able to start Tor after Bitcoin.\r\n\r\nhttps://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217775186",
      "created_at": "2023-10-17T17:34:20Z",
      "updated_at": "2023-10-17T17:36:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1362521247",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1362521247"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 226,
      "original_line": 226,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1365639888",
      "pull_request_review_id": 1687899757,
      "id": 1365639888,
      "node_id": "PRRC_kwDOABII585RZgLQ",
      "diff_hunk": "@@ -1265,10 +1265,23 @@ AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[\n   ]], [[\n     getauxval(AT_HWCAP);\n   ]])],\n- [ AC_MSG_RESULT([yes]); HAVE_STRONG_GETAUXVAL=1; AC_DEFINE([HAVE_STRONG_GETAUXVAL], [1], [Define this symbol to build code that uses getauxval)]) ],\n+ [ AC_MSG_RESULT([yes]); HAVE_STRONG_GETAUXVAL=1; AC_DEFINE([HAVE_STRONG_GETAUXVAL], [1], [Define this symbol to build code that uses getauxval]) ],\n  [ AC_MSG_RESULT([no]); HAVE_STRONG_GETAUXVAL=0 ]\n )\n \n+# Check for UNIX sockets\n+AC_MSG_CHECKING(for sockaddr_un)\n+AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[\n+    #include <sys/socket.h>\n+    #include <sys/un.h>\n+  ]], [[\n+    struct sockaddr_un addr;\n+    addr.sun_family = AF_UNIX;\n+  ]])],\n+ [ AC_MSG_RESULT([yes]); HAVE_SOCKADDR_UN=1; AC_DEFINE([HAVE_SOCKADDR_UN], [1], [Define this symbol if platform supports unix domain sockets]) ],",
      "path": "configure.ac",
      "position": null,
      "original_position": 18,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "e60df927bffa844d08fa908128b10303b352cfc5",
      "in_reply_to_id": null,
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "There shouldn't be a need for the `HAVE_SOCKADDR_UN=1` or `HAVE_SOCKADDR_UN=0` in the `AC_MSG_RESULT`'s?",
      "created_at": "2023-10-19T14:27:36Z",
      "updated_at": "2023-10-19T14:27:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1365639888",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1365639888"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1281,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1384082654",
      "pull_request_review_id": 1716369031,
      "id": 1384082654,
      "node_id": "PRRC_kwDOABII585Sf2ze",
      "diff_hunk": "@@ -478,39 +478,25 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n                 addr_bind = CAddress{conn.me, NODE_NONE};\n             }\n         } else if (use_proxy) {\n-            sock = CreateSock(proxy.proxy);\n-            if (!sock) {\n-                return nullptr;\n-            }\n-            connected = ConnectThroughProxy(proxy, addrConnect.ToStringAddr(), addrConnect.GetPort(),\n-                                            *sock, nConnectTimeout, proxyConnectionFailed);\n+            LogPrintLevel(BCLog::PROXY, BCLog::Level::Debug, \"Using proxy: %s to connect to %s:%s\\n\", proxy.ToString(), addrConnect.ToStringAddr(), addrConnect.GetPort());",
      "path": "src/net.cpp",
      "position": 35,
      "original_position": 35,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "0c5f8c36c90fab4fb39ce39d1b4c204a2edd25c4",
      "in_reply_to_id": null,
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: in c079e29c266a413de1859c0cbc8ebb55ea6a3203\r\n\r\nI get a compilation failure:\r\n\r\n```log\r\nnet.cpp:481:109: error: no member named 'ToString' in 'Proxy'\r\n            LogPrintLevel(BCLog::PROXY, BCLog::Level::Debug, \"Using proxy: %s to connect to %s:%s\\n\", proxy.ToString(), addrConnect.ToStringAddr(), addrConnect.GetPort());\r\n                                                                                                      ~~~~~ ^\r\n./logging.h:257:45: note: expanded from macro 'LogPrintLevel'\r\n            LogPrintLevel_(category, level, __VA_ARGS__); \\\r\n                                            ^~~~~~~~~~~\r\n./logging.h:234:104: note: expanded from macro 'LogPrintLevel_'\r\n#define LogPrintLevel_(category, level, ...) LogPrintf_(__func__, __FILE__, __LINE__, category, level, __VA_ARGS__)\r\n                                                                                                       ^~~~~~~~~~~\r\n1 error generated.\r\nmake: *** [Makefile:10385: libbitcoin_node_a-net.o] Error 1\r\nmake: Leaving directory '/home/will/src/bitcoin/src'\r\n```\r\n\r\nLooks like `ToString()` is added to Proxy in e7d29d5",
      "created_at": "2023-11-06T22:06:54Z",
      "updated_at": "2023-11-07T14:23:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1384082654",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1384082654"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 481,
      "original_line": 481,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1384854138",
      "pull_request_review_id": 1716369031,
      "id": 1384854138,
      "node_id": "PRRC_kwDOABII585SizJ6",
      "diff_hunk": "@@ -232,47 +265,42 @@ CService LookupNumeric(const std::string& name, uint16_t portDefault = 0, DNSLoo\n CSubNet LookupSubNet(const std::string& subnet_str);\n \n /**\n- * Create a TCP socket in the given address family.\n+ * Create a TCP or UNIX socket in the given address family.\n  * @param[in] address_family The socket is created in the same address family as this address.\n  * @return pointer to the created Sock object or unique_ptr that owns nothing in case of failure\n  */\n-std::unique_ptr<Sock> CreateSockTCP(const CService& address_family);\n+std::unique_ptr<Sock> CreateSockOS(sa_family_t address_family);\n \n /**\n- * Socket factory. Defaults to `CreateSockTCP()`, but can be overridden by unit tests.\n+ * Socket factory. Defaults to `CreateSockOS()`, but can be overridden by unit tests.\n  */\n-extern std::function<std::unique_ptr<Sock>(const CService&)> CreateSock;\n+extern std::function<std::unique_ptr<Sock>(const sa_family_t&)> CreateSock;\n \n /**\n- * Try to connect to the specified service on the specified socket.\n+ * Create a socket and try to connect to the specified service.\n  *\n- * @param addrConnect The service to which to connect.\n- * @param sock The socket on which to connect.\n- * @param nTimeout Wait this many milliseconds for the connection to be\n- *                 established.\n- * @param manual_connection Whether or not the connection was manually requested\n- *                          (e.g. through the addnode RPC)\n+ * @param[in] dest The service to which to connect.\n+ * @param[in] manual_connection Whether or not the connection was manually requested (e.g. through the addnode RPC)\n  *\n- * @returns Whether or not a connection was successfully made.\n+ * @returns the connected socket if the operation succeeded, empty unique_ptr otherwise\n  */\n-bool ConnectSocketDirectly(const CService &addrConnect, const Sock& sock, int nTimeout, bool manual_connection);\n+std::unique_ptr<Sock> ConnectDirectly(const CService& dest, bool manual_connection);",
      "path": "src/netbase.h",
      "position": 98,
      "original_position": 98,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "0c5f8c36c90fab4fb39ce39d1b4c204a2edd25c4",
      "in_reply_to_id": null,
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In c079e29\r\n\r\n`ConnectDirectly` and `ConnectThroughProxy` now differ in their primary args, with Directly taking a `CService` and Proxy remaining with `std::string&` (for host and port) which results in:\r\n\r\n_src/net.cpp_\r\n\r\n```cpp\r\n        } else if (use_proxy) {\r\n            LogPrintLevel(BCLog::PROXY, BCLog::Level::Debug, \"Using proxy: %s to connect to %s:%s\\n\", proxy.proxy.ToStringAddrPort(), addrConnect.ToStringAddr(), addrConnect.GetPort());\r\n            sock = ConnectThroughProxy(proxy, addrConnect.ToStringAddr(), addrConnect.GetPort(), proxyConnectionFailed);\r\n        } else {\r\n            // no proxy needed (none set for target network)\r\n            sock = ConnectDirectly(addrConnect, conn_type == ConnectionType::MANUAL);\r\n        }\r\n```\r\n\r\nIf you touch again we could take the chance to synchronise the interfaces for these two similar functions?",
      "created_at": "2023-11-07T12:43:12Z",
      "updated_at": "2023-11-07T14:23:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1384854138",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1384854138"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 287,
      "original_line": 287,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1386940797",
      "pull_request_review_id": 1688303909,
      "id": 1386940797,
      "node_id": "PRRC_kwDOABII585Sqwl9",
      "diff_hunk": "@@ -232,47 +265,42 @@ CService LookupNumeric(const std::string& name, uint16_t portDefault = 0, DNSLoo\n CSubNet LookupSubNet(const std::string& subnet_str);\n \n /**\n- * Create a TCP socket in the given address family.\n+ * Create a TCP or UNIX socket in the given address family.\n  * @param[in] address_family The socket is created in the same address family as this address.\n  * @return pointer to the created Sock object or unique_ptr that owns nothing in case of failure\n  */\n-std::unique_ptr<Sock> CreateSockTCP(const CService& address_family);\n+std::unique_ptr<Sock> CreateSockOS(sa_family_t address_family);\n \n /**\n- * Socket factory. Defaults to `CreateSockTCP()`, but can be overridden by unit tests.\n+ * Socket factory. Defaults to `CreateSockOS()`, but can be overridden by unit tests.\n  */\n-extern std::function<std::unique_ptr<Sock>(const CService&)> CreateSock;\n+extern std::function<std::unique_ptr<Sock>(const sa_family_t&)> CreateSock;\n \n /**\n- * Try to connect to the specified service on the specified socket.\n+ * Create a socket and try to connect to the specified service.\n  *\n- * @param addrConnect The service to which to connect.\n- * @param sock The socket on which to connect.\n- * @param nTimeout Wait this many milliseconds for the connection to be\n- *                 established.\n- * @param manual_connection Whether or not the connection was manually requested\n- *                          (e.g. through the addnode RPC)\n+ * @param[in] dest The service to which to connect.\n+ * @param[in] manual_connection Whether or not the connection was manually requested (e.g. through the addnode RPC)\n  *\n- * @returns Whether or not a connection was successfully made.\n+ * @returns the connected socket if the operation succeeded, empty unique_ptr otherwise\n  */\n-bool ConnectSocketDirectly(const CService &addrConnect, const Sock& sock, int nTimeout, bool manual_connection);\n+std::unique_ptr<Sock> ConnectDirectly(const CService& dest, bool manual_connection);",
      "path": "src/netbase.h",
      "position": 98,
      "original_position": 98,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "0c5f8c36c90fab4fb39ce39d1b4c204a2edd25c4",
      "in_reply_to_id": 1384854138,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Good observation. This is how `ConnectSocketDirectly()` and `ConnectThroughProxy()` are implemented on master currently as well. I think the reason is that we actually send the SOCKS5 proxy the destination host as a string whereas for the direct connection we actually get a socket from the OS. So even if throughProxy accepted a CService, we'd have to split into host string and port right away, anyway. I think I'll leave this alone for now unless other reviewers want to weigh in.",
      "created_at": "2023-11-08T17:00:08Z",
      "updated_at": "2023-11-08T17:56:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1386940797",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1386940797"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 287,
      "original_line": 287,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1386940970",
      "pull_request_review_id": 1688303909,
      "id": 1386940970,
      "node_id": "PRRC_kwDOABII585Sqwoq",
      "diff_hunk": "@@ -478,39 +478,25 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n                 addr_bind = CAddress{conn.me, NODE_NONE};\n             }\n         } else if (use_proxy) {\n-            sock = CreateSock(proxy.proxy);\n-            if (!sock) {\n-                return nullptr;\n-            }\n-            connected = ConnectThroughProxy(proxy, addrConnect.ToStringAddr(), addrConnect.GetPort(),\n-                                            *sock, nConnectTimeout, proxyConnectionFailed);\n+            LogPrintLevel(BCLog::PROXY, BCLog::Level::Debug, \"Using proxy: %s to connect to %s:%s\\n\", proxy.ToString(), addrConnect.ToStringAddr(), addrConnect.GetPort());",
      "path": "src/net.cpp",
      "position": 35,
      "original_position": 35,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "0c5f8c36c90fab4fb39ce39d1b4c204a2edd25c4",
      "in_reply_to_id": 1384082654,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "great catch thanks, will fix.",
      "created_at": "2023-11-08T17:00:16Z",
      "updated_at": "2023-11-08T17:56:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1386940970",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1386940970"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 481,
      "original_line": 481,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1505846753",
      "pull_request_review_id": 1906085382,
      "id": 1505846753,
      "node_id": "PRRC_kwDOABII585ZwWXh",
      "diff_hunk": "@@ -544,6 +544,7 @@ class CService : public CNetAddr\n     uint16_t GetPort() const;\n     bool GetSockAddr(struct sockaddr* paddr, socklen_t* addrlen) const;\n     bool SetSockAddr(const struct sockaddr* paddr);\n+    [[nodiscard]] sa_family_t GetSAFamily() const;",
      "path": "src/netaddress.h",
      "position": 4,
      "original_position": 4,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "4ca9b322f00db56a390301f08d3de8a13ff66694",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "4ca9b322f00db56a390301f08d3de8a13ff66694: suggested documentation:\r\n\r\n```cpp\r\n    /**\r\n     * Get the address family\r\n     * @returns AF_UNSPEC if unspecified\r\n     */\r\n```",
      "created_at": "2024-02-28T12:07:50Z",
      "updated_at": "2024-02-28T16:55:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1505846753",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1505846753"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 547,
      "original_line": 547,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1505852349",
      "pull_request_review_id": 1906085382,
      "id": 1505852349,
      "node_id": "PRRC_kwDOABII585ZwXu9",
      "diff_hunk": "@@ -236,12 +236,12 @@ CSubNet LookupSubNet(const std::string& subnet_str);\n  * @param[in] address_family The socket is created in the same address family as this address.\n  * @return pointer to the created Sock object or unique_ptr that owns nothing in case of failure\n  */\n-std::unique_ptr<Sock> CreateSockTCP(const CService& address_family);\n+std::unique_ptr<Sock> CreateSockOS(sa_family_t address_family);",
      "path": "src/netbase.h",
      "position": 72,
      "original_position": 5,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "4ca9b322f00db56a390301f08d3de8a13ff66694",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "4ca9b322f00db56a390301f08d3de8a13ff66694: \"Create a TCP socket\" should be changed to create \"Create a socket\"?\r\n\r\nAnd:\r\n```\r\n* @param[in] address_family to use for the socket.\r\n```",
      "created_at": "2024-02-28T12:12:33Z",
      "updated_at": "2024-02-28T16:55:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1505852349",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1505852349"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 272,
      "original_line": 239,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1505872297",
      "pull_request_review_id": 1906085382,
      "id": 1505872297,
      "node_id": "PRRC_kwDOABII585Zwcmp",
      "diff_hunk": "@@ -326,7 +326,7 @@ Session::Reply Session::SendRequestAndGetReply(const Sock& sock,\n \n std::unique_ptr<Sock> Session::Hello() const\n {\n-    auto sock = CreateSock(m_control_host);\n+    auto sock = CreateSock(m_control_host.GetSAFamily());",
      "path": "src/i2p.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "4ca9b322f00db56a390301f08d3de8a13ff66694",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "4ca9b322f00db56a390301f08d3de8a13ff66694: this is a nice readability improvement; makes it clear `CreateSock` only needs the socket address family and the real work happens in `ConnectSocketDirectly`.",
      "created_at": "2024-02-28T12:24:56Z",
      "updated_at": "2024-02-28T16:55:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1505872297",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1505872297"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 329,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1505897078",
      "pull_request_review_id": 1906085382,
      "id": 1505897078,
      "node_id": "PRRC_kwDOABII585Zwip2",
      "diff_hunk": "@@ -452,11 +456,17 @@ bool Socks5(const std::string& strDest, uint16_t port, const ProxyCredentials* a\n \n std::unique_ptr<Sock> CreateSockOS(sa_family_t address_family)\n {\n-    // Not IPv4 or IPv6\n+    // Not IPv4, IPv6 or UNIX\n     if (address_family == AF_UNSPEC) return nullptr;\n \n-    // Create a TCP socket in the address family of the specified service.\n-    SOCKET hSocket = socket(address_family, SOCK_STREAM, IPPROTO_TCP);\n+    int protocol{IPPROTO_TCP};\n+#if HAVE_SOCKADDR_UN\n+    if (address_family == AF_UNIX)",
      "path": "src/netbase.cpp",
      "position": 57,
      "original_position": 23,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "d513ac7bf615239053762a4f9d64db9f4c70d12a",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "d513ac7bf615239053762a4f9d64db9f4c70d12a nit: brackets or on the same line",
      "created_at": "2024-02-28T12:38:26Z",
      "updated_at": "2024-02-28T16:55:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1505897078",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1505897078"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 482,
      "original_line": 464,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1505908323",
      "pull_request_review_id": 1906085382,
      "id": 1505908323,
      "node_id": "PRRC_kwDOABII585ZwlZj",
      "diff_hunk": "@@ -452,11 +456,17 @@ bool Socks5(const std::string& strDest, uint16_t port, const ProxyCredentials* a\n \n std::unique_ptr<Sock> CreateSockOS(sa_family_t address_family)\n {\n-    // Not IPv4 or IPv6\n+    // Not IPv4, IPv6 or UNIX\n     if (address_family == AF_UNSPEC) return nullptr;\n \n-    // Create a TCP socket in the address family of the specified service.\n-    SOCKET hSocket = socket(address_family, SOCK_STREAM, IPPROTO_TCP);\n+    int protocol{IPPROTO_TCP};\n+#if HAVE_SOCKADDR_UN\n+    if (address_family == AF_UNIX)\n+        protocol = 0;\n+#endif\n+\n+    // Create a socket in the specified address family.\n+    SOCKET hSocket = socket(address_family, SOCK_STREAM, protocol);",
      "path": "src/netbase.cpp",
      "position": 62,
      "original_position": 28,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "d513ac7bf615239053762a4f9d64db9f4c70d12a",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "d513ac7bf615239053762a4f9d64db9f4c70d12a: On macOS `man 2 socket` lists `PF_LOCAL` (alias for `PF_UNIX`), `PF_INET` and `PF_INET6` for the `domain` parameter of `socket` (first argument).\r\n\r\nThey map to the same integer values as `AF_UNIX`, `AF_INET` and `AF_INET6`, so it's just a cosmetic thing. And apparently nobody cares: https://stackoverflow.com/a/6737450/313633",
      "created_at": "2024-02-28T12:46:43Z",
      "updated_at": "2024-02-28T16:55:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1505908323",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1505908323"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 487,
      "original_line": 469,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1506002754",
      "pull_request_review_id": 1906085382,
      "id": 1506002754,
      "node_id": "PRRC_kwDOABII585Zw8dC",
      "diff_hunk": "@@ -505,7 +509,11 @@ void SetupServerArgs(ArgsManager& argsman)\n     // TODO: remove the sentence \"Nodes not using ... incoming connections.\" once the changes from\n     // https://github.com/bitcoin/bitcoin/pull/23542 have become widespread.\n     argsman.AddArg(\"-port=<port>\", strprintf(\"Listen for connections on <port>. Nodes not using the default ports (default: %u, testnet: %u, signet: %u, regtest: %u) are unlikely to get incoming connections. Not relevant for I2P (see doc/i2p.md).\", defaultChainParams->GetDefaultPort(), testnetChainParams->GetDefaultPort(), signetChainParams->GetDefaultPort(), regtestChainParams->GetDefaultPort()), ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n+#if HAVE_SOCKADDR_UN\n+    argsman.AddArg(\"-proxy=<ip:port|path>\", \"Connect through SOCKS5 proxy, set -noproxy to disable (default: disabled). May be a local file path prefixed with 'unix:'.\", ArgsManager::ALLOW_ANY | ArgsManager::DISALLOW_ELISION, OptionsCategory::CONNECTION);",
      "path": "src/init.cpp",
      "position": 17,
      "original_position": 17,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "6dddc1c2eda514d35219cce03c229bd6f822be55 the SOCKS5 standard seems to assume that clients are connecting via either TCP or UDP. Other than Tor, are there other SOCKS5 proxies out there that support connecting via socket? https://datatracker.ietf.org/doc/html/rfc1928\r\n\r\n(it's probably fine to allow it even if not)",
      "created_at": "2024-02-28T13:54:36Z",
      "updated_at": "2024-02-28T16:55:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1506002754",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1506002754"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 513,
      "original_line": 513,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1506062696",
      "pull_request_review_id": 1906085382,
      "id": 1506062696,
      "node_id": "PRRC_kwDOABII585ZxLFo",
      "diff_hunk": "@@ -629,27 +635,32 @@ bool IsProxy(const CNetAddr &addr) {\n     return false;\n }\n \n-bool ConnectThroughProxy(const Proxy& proxy, const std::string& strDest, uint16_t port, const Sock& sock, int nTimeout, bool& outProxyConnectionFailed)\n+std::unique_ptr<Sock> ConnectThroughProxy(const Proxy& proxy,\n+                                          const std::string& dest,\n+                                          uint16_t port,\n+                                          bool& proxy_connection_failed)\n {\n     // first connect to proxy server\n-    if (!ConnectSocketDirectly(proxy.proxy, sock, nTimeout, true)) {\n-        outProxyConnectionFailed = true;\n-        return false;\n+    auto sock = ConnectDirectly(proxy.proxy, /*manual_connection=*/true);",
      "path": "src/netbase.cpp",
      "position": null,
      "original_position": 103,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "7239ec264a1def8e8aeff8c1ca57ece2ea90f65c",
      "in_reply_to_id": 1361847268,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Both call sites of `ConnectThroughProxy` have access to `conn_type` so might as well pass in `manual_connection`.",
      "created_at": "2024-02-28T14:32:33Z",
      "updated_at": "2024-02-28T16:55:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1506062696",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1506062696"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 644,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1506080211",
      "pull_request_review_id": 1906085382,
      "id": 1506080211,
      "node_id": "PRRC_kwDOABII585ZxPXT",
      "diff_hunk": "@@ -212,6 +212,24 @@ CService LookupNumeric(const std::string& name, uint16_t portDefault, DNSLookupF\n     return Lookup(name, portDefault, /*fAllowLookup=*/false, dns_lookup_function).value_or(CService{});\n }\n \n+bool IsUnixSocketPath(const std::string& name)\n+{\n+#if HAVE_SOCKADDR_UN\n+    if (name.find(ADDR_PREFIX_UNIX) != 0) return false;\n+\n+    // Split off \"unix:\" prefix\n+    std::string str{name.substr(ADDR_PREFIX_UNIX.length())};\n+\n+    // Path size limit is platform-dependent\n+    // see https://manpages.ubuntu.com/manpages/xenial/en/man7/unix.7.html\n+    if (str.size() + 1 > sizeof(((sockaddr_un*)nullptr)->sun_path)) return false;\n+\n+    return true;\n+#else",
      "path": "src/netbase.cpp",
      "position": 28,
      "original_position": 17,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "8d06446fc7a17b593466fccd0f638eb2527a493b",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "8d06446fc7a17b593466fccd0f638eb2527a493b: maybe add `Assume(false);` here? Since the answer of this function is unreliable for systems that don't support unix sockets.",
      "created_at": "2024-02-28T14:43:42Z",
      "updated_at": "2024-02-28T16:55:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1506080211",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1506080211"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 228,
      "original_line": 228,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1506247369",
      "pull_request_review_id": 1906085382,
      "id": 1506247369,
      "node_id": "PRRC_kwDOABII585Zx4LJ",
      "diff_hunk": "@@ -600,11 +586,71 @@ std::unique_ptr<Sock> ConnectDirectly(const CService& dest, bool manual_connecti\n         else\n #endif\n         {\n-            LogConnectFailure(manual_connection, \"connect() to %s failed: %s\", dest.ToStringAddrPort(), NetworkErrorString(WSAGetLastError()));\n-            return {};\n+            LogConnectFailure(manual_connection, \"connect() to %s failed: %s\", dest_str, NetworkErrorString(WSAGetLastError()));\n+            return false;\n         }\n     }\n+    return true;\n+}\n+\n+std::unique_ptr<Sock> ConnectDirectly(const CService& dest, bool manual_connection)\n+{\n+    auto sock = CreateSock(dest.GetSAFamily());\n+    if (!sock) {\n+        LogPrintLevel(BCLog::NET, BCLog::Level::Error, \"Cannot create a socket for connecting to %s\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+\n+    // Create a sockaddr from the specified service.\n+    struct sockaddr_storage sockaddr;\n+    socklen_t len = sizeof(sockaddr);\n+    if (!dest.GetSockAddr((struct sockaddr*)&sockaddr, &len)) {\n+        LogPrintf(\"Cannot get sockaddr for %s: unsupported network\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+\n+    if (!ConnectToSocket(*sock, (struct sockaddr*)&sockaddr, len, dest.ToStringAddrPort(), manual_connection)) {\n+        LogPrintf(\"Cannot connect to socket for %s\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+\n+    return sock;\n+}\n+\n+std::unique_ptr<Sock> Proxy::Connect() const\n+{\n+    if (!IsValid()) {\n+        LogPrintf(\"Cannot connect to invalid Proxy\\n\");\n+        return {};\n+    }\n+\n+    if (!m_is_unix_socket) return ConnectDirectly(proxy, /*manual_connection=*/true);\n+\n+#if HAVE_SOCKADDR_UN\n+    auto sock = CreateSock(AF_UNIX);\n+    if (!sock) {\n+        LogPrintLevel(BCLog::NET, BCLog::Level::Error, \"Cannot create a socket for connecting to %s\\n\", m_unix_socket_path);\n+        return {};\n+    }\n+\n+    const std::string path{m_unix_socket_path.substr(ADDR_PREFIX_UNIX.length())};\n+\n+    struct sockaddr_un addrun;\n+    memset(&addrun, 0, sizeof(addrun));\n+    addrun.sun_family = AF_UNIX;\n+    // leave the last char in addrun.sun_path[] to be always '\\0'\n+    memcpy(addrun.sun_path, path.c_str(), std::min(sizeof(addrun.sun_path) - 1, path.length()));",
      "path": "src/netbase.cpp",
      "position": 212,
      "original_position": 130,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "9eb40e6f399169ade8e96c60ba633e8a0e4ddadc",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "9eb40e6f399169ade8e96c60ba633e8a0e4ddadc: Given the `IsValid()` check above, you could also do `Assume(path.length() < sizeof(addrun.sun_path) - 1)` and leave out the `std::min` stuff, but maybe this is more robust.",
      "created_at": "2024-02-28T16:28:37Z",
      "updated_at": "2024-02-28T16:55:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1506247369",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1506247369"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 642,
      "original_line": 642,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1508224464",
      "pull_request_review_id": 1909921946,
      "id": 1508224464,
      "node_id": "PRRC_kwDOABII585Z5a3Q",
      "diff_hunk": "@@ -452,11 +456,17 @@ bool Socks5(const std::string& strDest, uint16_t port, const ProxyCredentials* a\n \n std::unique_ptr<Sock> CreateSockOS(sa_family_t address_family)\n {\n-    // Not IPv4 or IPv6\n+    // Not IPv4, IPv6 or UNIX\n     if (address_family == AF_UNSPEC) return nullptr;\n \n-    // Create a TCP socket in the address family of the specified service.\n-    SOCKET hSocket = socket(address_family, SOCK_STREAM, IPPROTO_TCP);\n+    int protocol{IPPROTO_TCP};\n+#if HAVE_SOCKADDR_UN\n+    if (address_family == AF_UNIX)\n+        protocol = 0;\n+#endif\n+\n+    // Create a socket in the specified address family.\n+    SOCKET hSocket = socket(address_family, SOCK_STREAM, protocol);",
      "path": "src/netbase.cpp",
      "position": 62,
      "original_position": 28,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "d513ac7bf615239053762a4f9d64db9f4c70d12a",
      "in_reply_to_id": 1505908323,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "That's... weird ðŸ¤·  Do you think I need to change anything here?",
      "created_at": "2024-02-29T21:40:01Z",
      "updated_at": "2024-02-29T21:40:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1508224464",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1508224464"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 487,
      "original_line": 469,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1508229256",
      "pull_request_review_id": 1909929055,
      "id": 1508229256,
      "node_id": "PRRC_kwDOABII585Z5cCI",
      "diff_hunk": "@@ -212,6 +212,24 @@ CService LookupNumeric(const std::string& name, uint16_t portDefault, DNSLookupF\n     return Lookup(name, portDefault, /*fAllowLookup=*/false, dns_lookup_function).value_or(CService{});\n }\n \n+bool IsUnixSocketPath(const std::string& name)\n+{\n+#if HAVE_SOCKADDR_UN\n+    if (name.find(ADDR_PREFIX_UNIX) != 0) return false;\n+\n+    // Split off \"unix:\" prefix\n+    std::string str{name.substr(ADDR_PREFIX_UNIX.length())};\n+\n+    // Path size limit is platform-dependent\n+    // see https://manpages.ubuntu.com/manpages/xenial/en/man7/unix.7.html\n+    if (str.size() + 1 > sizeof(((sockaddr_un*)nullptr)->sun_path)) return false;\n+\n+    return true;\n+#else",
      "path": "src/netbase.cpp",
      "position": 28,
      "original_position": 17,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "8d06446fc7a17b593466fccd0f638eb2527a493b",
      "in_reply_to_id": 1506080211,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Hm not sure what you mean by unreliable. Wont the pre-processor directives here guaruntee this function always returns false on systems that don't support unix sockets?",
      "created_at": "2024-02-29T21:45:22Z",
      "updated_at": "2024-02-29T21:45:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1508229256",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1508229256"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 228,
      "original_line": 228,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1508245150",
      "pull_request_review_id": 1909953751,
      "id": 1508245150,
      "node_id": "PRRC_kwDOABII585Z5f6e",
      "diff_hunk": "@@ -505,7 +509,11 @@ void SetupServerArgs(ArgsManager& argsman)\n     // TODO: remove the sentence \"Nodes not using ... incoming connections.\" once the changes from\n     // https://github.com/bitcoin/bitcoin/pull/23542 have become widespread.\n     argsman.AddArg(\"-port=<port>\", strprintf(\"Listen for connections on <port>. Nodes not using the default ports (default: %u, testnet: %u, signet: %u, regtest: %u) are unlikely to get incoming connections. Not relevant for I2P (see doc/i2p.md).\", defaultChainParams->GetDefaultPort(), testnetChainParams->GetDefaultPort(), signetChainParams->GetDefaultPort(), regtestChainParams->GetDefaultPort()), ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n+#if HAVE_SOCKADDR_UN\n+    argsman.AddArg(\"-proxy=<ip:port|path>\", \"Connect through SOCKS5 proxy, set -noproxy to disable (default: disabled). May be a local file path prefixed with 'unix:'.\", ArgsManager::ALLOW_ANY | ArgsManager::DISALLOW_ELISION, OptionsCategory::CONNECTION);",
      "path": "src/init.cpp",
      "position": 17,
      "original_position": 17,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "in_reply_to_id": 1506002754,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Hm good question, I found some vague docs that imply NordVPN client has a unix socket option... Would you suggest specifying Tor in the help description of the proxy arg?",
      "created_at": "2024-02-29T22:02:29Z",
      "updated_at": "2024-02-29T22:02:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1508245150",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1508245150"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 513,
      "original_line": 513,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1508246171",
      "pull_request_review_id": 1909955772,
      "id": 1508246171,
      "node_id": "PRRC_kwDOABII585Z5gKb",
      "diff_hunk": "@@ -600,11 +586,71 @@ std::unique_ptr<Sock> ConnectDirectly(const CService& dest, bool manual_connecti\n         else\n #endif\n         {\n-            LogConnectFailure(manual_connection, \"connect() to %s failed: %s\", dest.ToStringAddrPort(), NetworkErrorString(WSAGetLastError()));\n-            return {};\n+            LogConnectFailure(manual_connection, \"connect() to %s failed: %s\", dest_str, NetworkErrorString(WSAGetLastError()));\n+            return false;\n         }\n     }\n+    return true;\n+}\n+\n+std::unique_ptr<Sock> ConnectDirectly(const CService& dest, bool manual_connection)\n+{\n+    auto sock = CreateSock(dest.GetSAFamily());\n+    if (!sock) {\n+        LogPrintLevel(BCLog::NET, BCLog::Level::Error, \"Cannot create a socket for connecting to %s\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+\n+    // Create a sockaddr from the specified service.\n+    struct sockaddr_storage sockaddr;\n+    socklen_t len = sizeof(sockaddr);\n+    if (!dest.GetSockAddr((struct sockaddr*)&sockaddr, &len)) {\n+        LogPrintf(\"Cannot get sockaddr for %s: unsupported network\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+\n+    if (!ConnectToSocket(*sock, (struct sockaddr*)&sockaddr, len, dest.ToStringAddrPort(), manual_connection)) {\n+        LogPrintf(\"Cannot connect to socket for %s\\n\", dest.ToStringAddrPort());\n+        return {};\n+    }\n+\n+    return sock;\n+}\n+\n+std::unique_ptr<Sock> Proxy::Connect() const\n+{\n+    if (!IsValid()) {\n+        LogPrintf(\"Cannot connect to invalid Proxy\\n\");\n+        return {};\n+    }\n+\n+    if (!m_is_unix_socket) return ConnectDirectly(proxy, /*manual_connection=*/true);\n+\n+#if HAVE_SOCKADDR_UN\n+    auto sock = CreateSock(AF_UNIX);\n+    if (!sock) {\n+        LogPrintLevel(BCLog::NET, BCLog::Level::Error, \"Cannot create a socket for connecting to %s\\n\", m_unix_socket_path);\n+        return {};\n+    }\n+\n+    const std::string path{m_unix_socket_path.substr(ADDR_PREFIX_UNIX.length())};\n+\n+    struct sockaddr_un addrun;\n+    memset(&addrun, 0, sizeof(addrun));\n+    addrun.sun_family = AF_UNIX;\n+    // leave the last char in addrun.sun_path[] to be always '\\0'\n+    memcpy(addrun.sun_path, path.c_str(), std::min(sizeof(addrun.sun_path) - 1, path.length()));",
      "path": "src/netbase.cpp",
      "position": 212,
      "original_position": 130,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "9eb40e6f399169ade8e96c60ba633e8a0e4ddadc",
      "in_reply_to_id": 1506247369,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yeah I think this was recommended by vasild in an earlier interation of the branch.",
      "created_at": "2024-02-29T22:03:33Z",
      "updated_at": "2024-02-29T22:03:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1508246171",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1508246171"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 642,
      "original_line": 642,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1508620298",
      "pull_request_review_id": 1910529346,
      "id": 1508620298,
      "node_id": "PRRC_kwDOABII585Z67gK",
      "diff_hunk": "@@ -452,11 +456,17 @@ bool Socks5(const std::string& strDest, uint16_t port, const ProxyCredentials* a\n \n std::unique_ptr<Sock> CreateSockOS(sa_family_t address_family)\n {\n-    // Not IPv4 or IPv6\n+    // Not IPv4, IPv6 or UNIX\n     if (address_family == AF_UNSPEC) return nullptr;\n \n-    // Create a TCP socket in the address family of the specified service.\n-    SOCKET hSocket = socket(address_family, SOCK_STREAM, IPPROTO_TCP);\n+    int protocol{IPPROTO_TCP};\n+#if HAVE_SOCKADDR_UN\n+    if (address_family == AF_UNIX)\n+        protocol = 0;\n+#endif\n+\n+    // Create a socket in the specified address family.\n+    SOCKET hSocket = socket(address_family, SOCK_STREAM, protocol);",
      "path": "src/netbase.cpp",
      "position": 62,
      "original_position": 28,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "d513ac7bf615239053762a4f9d64db9f4c70d12a",
      "in_reply_to_id": 1505908323,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "On FreeBSD all of `AF_UNIX`, `AF_LOCAL`, `PF_UNIX`, `PF_LOCAL` have the same value: https://cgit.freebsd.org/src/tree/sys/sys/socket.h",
      "created_at": "2024-03-01T07:56:25Z",
      "updated_at": "2024-03-01T07:56:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1508620298",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1508620298"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 487,
      "original_line": 469,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1508853881",
      "pull_request_review_id": 1910910019,
      "id": 1508853881,
      "node_id": "PRRC_kwDOABII585Z70h5",
      "diff_hunk": "@@ -212,6 +212,24 @@ CService LookupNumeric(const std::string& name, uint16_t portDefault, DNSLookupF\n     return Lookup(name, portDefault, /*fAllowLookup=*/false, dns_lookup_function).value_or(CService{});\n }\n \n+bool IsUnixSocketPath(const std::string& name)\n+{\n+#if HAVE_SOCKADDR_UN\n+    if (name.find(ADDR_PREFIX_UNIX) != 0) return false;\n+\n+    // Split off \"unix:\" prefix\n+    std::string str{name.substr(ADDR_PREFIX_UNIX.length())};\n+\n+    // Path size limit is platform-dependent\n+    // see https://manpages.ubuntu.com/manpages/xenial/en/man7/unix.7.html\n+    if (str.size() + 1 > sizeof(((sockaddr_un*)nullptr)->sun_path)) return false;\n+\n+    return true;\n+#else",
      "path": "src/netbase.cpp",
      "position": 28,
      "original_position": 17,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "8d06446fc7a17b593466fccd0f638eb2527a493b",
      "in_reply_to_id": 1506080211,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It would, but \"unix:/somepath\" is valid unix socket path, so `IsUnixSocketPath` should return `true`. So it seems better to ensure nobody accidentally calls this function on a system that doesn't support unix sockets.",
      "created_at": "2024-03-01T11:21:58Z",
      "updated_at": "2024-03-01T11:22:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1508853881",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1508853881"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 228,
      "original_line": 228,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1508856118",
      "pull_request_review_id": 1910913526,
      "id": 1508856118,
      "node_id": "PRRC_kwDOABII585Z71E2",
      "diff_hunk": "@@ -505,7 +509,11 @@ void SetupServerArgs(ArgsManager& argsman)\n     // TODO: remove the sentence \"Nodes not using ... incoming connections.\" once the changes from\n     // https://github.com/bitcoin/bitcoin/pull/23542 have become widespread.\n     argsman.AddArg(\"-port=<port>\", strprintf(\"Listen for connections on <port>. Nodes not using the default ports (default: %u, testnet: %u, signet: %u, regtest: %u) are unlikely to get incoming connections. Not relevant for I2P (see doc/i2p.md).\", defaultChainParams->GetDefaultPort(), testnetChainParams->GetDefaultPort(), signetChainParams->GetDefaultPort(), regtestChainParams->GetDefaultPort()), ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n+#if HAVE_SOCKADDR_UN\n+    argsman.AddArg(\"-proxy=<ip:port|path>\", \"Connect through SOCKS5 proxy, set -noproxy to disable (default: disabled). May be a local file path prefixed with 'unix:'.\", ArgsManager::ALLOW_ANY | ArgsManager::DISALLOW_ELISION, OptionsCategory::CONNECTION);",
      "path": "src/init.cpp",
      "position": 17,
      "original_position": 17,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "in_reply_to_id": 1506002754,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "No I think that would be confusing. Perhaps add something something like \"unix: if the proxy supports it\" (assuming it's _not_ standard)",
      "created_at": "2024-03-01T11:24:14Z",
      "updated_at": "2024-03-01T11:24:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1508856118",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1508856118"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 513,
      "original_line": 513,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1508857750",
      "pull_request_review_id": 1910916244,
      "id": 1508857750,
      "node_id": "PRRC_kwDOABII585Z71eW",
      "diff_hunk": "@@ -452,11 +456,17 @@ bool Socks5(const std::string& strDest, uint16_t port, const ProxyCredentials* a\n \n std::unique_ptr<Sock> CreateSockOS(sa_family_t address_family)\n {\n-    // Not IPv4 or IPv6\n+    // Not IPv4, IPv6 or UNIX\n     if (address_family == AF_UNSPEC) return nullptr;\n \n-    // Create a TCP socket in the address family of the specified service.\n-    SOCKET hSocket = socket(address_family, SOCK_STREAM, IPPROTO_TCP);\n+    int protocol{IPPROTO_TCP};\n+#if HAVE_SOCKADDR_UN\n+    if (address_family == AF_UNIX)\n+        protocol = 0;\n+#endif\n+\n+    // Create a socket in the specified address family.\n+    SOCKET hSocket = socket(address_family, SOCK_STREAM, protocol);",
      "path": "src/netbase.cpp",
      "position": 62,
      "original_position": 28,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "d513ac7bf615239053762a4f9d64db9f4c70d12a",
      "in_reply_to_id": 1505908323,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think if someone cares, they can make a followup PR.",
      "created_at": "2024-03-01T11:25:58Z",
      "updated_at": "2024-03-01T11:25:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1508857750",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1508857750"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 487,
      "original_line": 469,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1509334048",
      "pull_request_review_id": 1911704548,
      "id": 1509334048,
      "node_id": "PRRC_kwDOABII585Z9pwg",
      "diff_hunk": "@@ -212,6 +212,24 @@ CService LookupNumeric(const std::string& name, uint16_t portDefault, DNSLookupF\n     return Lookup(name, portDefault, /*fAllowLookup=*/false, dns_lookup_function).value_or(CService{});\n }\n \n+bool IsUnixSocketPath(const std::string& name)\n+{\n+#if HAVE_SOCKADDR_UN\n+    if (name.find(ADDR_PREFIX_UNIX) != 0) return false;\n+\n+    // Split off \"unix:\" prefix\n+    std::string str{name.substr(ADDR_PREFIX_UNIX.length())};\n+\n+    // Path size limit is platform-dependent\n+    // see https://manpages.ubuntu.com/manpages/xenial/en/man7/unix.7.html\n+    if (str.size() + 1 > sizeof(((sockaddr_un*)nullptr)->sun_path)) return false;\n+\n+    return true;\n+#else",
      "path": "src/netbase.cpp",
      "position": 28,
      "original_position": 17,
      "commit_id": "6dddc1c2eda514d35219cce03c229bd6f822be55",
      "original_commit_id": "8d06446fc7a17b593466fccd0f638eb2527a493b",
      "in_reply_to_id": 1506080211,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> is valid unix socket path, \r\n\r\nThis can actually only be determined if `sockaddr_un` is defined, because different platforms have different length limits for the path (https://manpages.ubuntu.com/manpages/xenial/en/man7/unix.7.html)\r\n\r\nSo if `sockaddr_un` is not defined, nothing can be a valid unix socket path.\r\n\r\nAlso I think `Assume(false)` is overkill because this function will be called from `AppInitMain()` regardless of platform. If a user without unix socket support still tries to set `-onion=unix:/whatever` they'll get an init error",
      "created_at": "2024-03-01T17:46:03Z",
      "updated_at": "2024-03-01T17:46:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1509334048",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1509334048"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 228,
      "original_line": 228,
      "side": "RIGHT"
    }
  ]
}