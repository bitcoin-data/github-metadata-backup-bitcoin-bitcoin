{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32198",
    "id": 2433458040,
    "node_id": "PR_kwDOABII586RC594",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/32198",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/32198.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/32198.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32198",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32198/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32198/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32198/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/fa2d3441c6557adba3d393abfc1af22fb788b5c2",
    "number": 32198,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "fuzz: Make p2p_headers_presync more deterministic",
    "user": {
      "login": "maflcko",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/maflcko",
      "html_url": "https://github.com/maflcko",
      "followers_url": "https://api.github.com/users/maflcko/followers",
      "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
      "organizations_url": "https://api.github.com/users/maflcko/orgs",
      "repos_url": "https://api.github.com/users/maflcko/repos",
      "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/maflcko/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "This should make the `p2p_headers_presync` fuzz target more deterministic.\r\n\r\nTracking issue: https://github.com/bitcoin/bitcoin/issues/29018.\r\n\r\nThe first commits adds an `ElapseSteady` helper and type aliases. The second commit uses those helpers in `ReportHeadersPresync` and in the fuzz target to increase determinism.\r\n\r\n### Testing\r\n\r\nIt can be tested via (setting 32 parallel threads):\r\n\r\n```\r\ncargo run --manifest-path ./contrib/devtools/deterministic-fuzz-coverage/Cargo.toml -- $PWD/bld-cmake/ $PWD/../b-c-qa-assets/fuzz_corpora/ p2p_headers_presync 32\r\n```\r\n\r\nThe failing diff is contained in the commit messages, if applicable.",
    "labels": [
      {
        "id": 62963516,
        "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
        "name": "Tests",
        "color": "d4c5f9",
        "default": false
      }
    ],
    "created_at": "2025-04-02T08:14:59Z",
    "updated_at": "2025-04-07T13:46:09Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "dcb35dfb60cf6f78a75062b1093481c8bc67a316",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "maflcko:2503-fuzz-det",
      "ref": "2503-fuzz-det",
      "sha": "fa2d3441c6557adba3d393abfc1af22fb788b5c2",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 40046254,
        "node_id": "MDEwOlJlcG9zaXRvcnk0MDA0NjI1NA==",
        "name": "bitcoin-core",
        "full_name": "maflcko/bitcoin-core",
        "owner": {
          "login": "maflcko",
          "id": 6399679,
          "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
          "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/maflcko",
          "html_url": "https://github.com/maflcko",
          "followers_url": "https://api.github.com/users/maflcko/followers",
          "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
          "organizations_url": "https://api.github.com/users/maflcko/orgs",
          "repos_url": "https://api.github.com/users/maflcko/repos",
          "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/maflcko/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/maflcko/bitcoin-core",
        "fork": true,
        "url": "https://api.github.com/repos/maflcko/bitcoin-core",
        "archive_url": "https://api.github.com/repos/maflcko/bitcoin-core/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/maflcko/bitcoin-core/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/maflcko/bitcoin-core/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/maflcko/bitcoin-core/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/maflcko/bitcoin-core/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/maflcko/bitcoin-core/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/maflcko/bitcoin-core/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/maflcko/bitcoin-core/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/maflcko/bitcoin-core/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/maflcko/bitcoin-core/contributors",
        "deployments_url": "https://api.github.com/repos/maflcko/bitcoin-core/deployments",
        "downloads_url": "https://api.github.com/repos/maflcko/bitcoin-core/downloads",
        "events_url": "https://api.github.com/repos/maflcko/bitcoin-core/events",
        "forks_url": "https://api.github.com/repos/maflcko/bitcoin-core/forks",
        "git_commits_url": "https://api.github.com/repos/maflcko/bitcoin-core/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/maflcko/bitcoin-core/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/maflcko/bitcoin-core/git/tags%7B/sha%7D",
        "git_url": "git://github.com/maflcko/bitcoin-core.git",
        "issue_comment_url": "https://api.github.com/repos/maflcko/bitcoin-core/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/maflcko/bitcoin-core/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/maflcko/bitcoin-core/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/maflcko/bitcoin-core/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/maflcko/bitcoin-core/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/maflcko/bitcoin-core/languages",
        "merges_url": "https://api.github.com/repos/maflcko/bitcoin-core/merges",
        "milestones_url": "https://api.github.com/repos/maflcko/bitcoin-core/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/maflcko/bitcoin-core/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/maflcko/bitcoin-core/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/maflcko/bitcoin-core/releases%7B/id%7D",
        "ssh_url": "git@github.com:maflcko/bitcoin-core.git",
        "stargazers_url": "https://api.github.com/repos/maflcko/bitcoin-core/stargazers",
        "statuses_url": "https://api.github.com/repos/maflcko/bitcoin-core/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/maflcko/bitcoin-core/subscribers",
        "subscription_url": "https://api.github.com/repos/maflcko/bitcoin-core/subscription",
        "tags_url": "https://api.github.com/repos/maflcko/bitcoin-core/tags",
        "teams_url": "https://api.github.com/repos/maflcko/bitcoin-core/teams",
        "trees_url": "https://api.github.com/repos/maflcko/bitcoin-core/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/maflcko/bitcoin-core.git",
        "hooks_url": "https://api.github.com/repos/maflcko/bitcoin-core/hooks",
        "svn_url": "https://github.com/maflcko/bitcoin-core",
        "homepage": "",
        "language": "C++",
        "forks_count": 9,
        "stargazers_count": 27,
        "watchers_count": 27,
        "size": 247559,
        "default_branch": "master",
        "open_issues_count": 14,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-04-07T12:32:03Z",
        "created_at": "2015-08-01T12:42:47Z",
        "updated_at": "2025-01-22T17:43:41Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "0dc74c92c0650a171e1c6f5bea1c15e13584e799",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 37010,
        "stargazers_count": 82802,
        "watchers_count": 82802,
        "size": 279369,
        "default_branch": "master",
        "open_issues_count": 697,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-04-07T10:47:32Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-04-07T13:33:08Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32198"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 58,
    "deletions": 17,
    "changed_files": 10,
    "commits": 6,
    "review_comments": 0,
    "comments": 19
  },
  "events": [
    {
      "event": "commented",
      "id": 2771759511,
      "node_id": "IC_kwDOABII586lNbGX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2771759511",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-02T08:15:02Z",
      "updated_at": "2025-04-02T16:46:55Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32198.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [1440000bytes](https://github.com/bitcoin/bitcoin/pull/32198#issuecomment-2773164435) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32198#issuecomment-2771759511",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32198"
    },
    {
      "event": "renamed",
      "id": 17088844832,
      "node_id": "RTE_lADOABII586wwtHgzwAAAAP6kxQg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17088844832",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-02T08:15:04Z",
      "rename": {
        "from": " fuzz: Make p2p_headers_presync more deterministic ",
        "to": "fuzz: Make p2p_headers_presync more deterministic"
      }
    },
    {
      "event": "labeled",
      "id": 17088845021,
      "node_id": "LE_lADOABII586wwtHgzwAAAAP6kxTd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17088845021",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-02T08:15:05Z",
      "label": {
        "name": "Tests",
        "color": "d4c5f9"
      }
    },
    {
      "event": "commented",
      "id": 2773164435,
      "node_id": "IC_kwDOABII586lSyGT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2773164435",
      "actor": {
        "login": "1440000bytes",
        "id": 147166694,
        "node_id": "U_kgDOCMWV5g",
        "avatar_url": "https://avatars.githubusercontent.com/u/147166694?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1440000bytes",
        "html_url": "https://github.com/1440000bytes",
        "followers_url": "https://api.github.com/users/1440000bytes/followers",
        "following_url": "https://api.github.com/users/1440000bytes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1440000bytes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1440000bytes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1440000bytes/subscriptions",
        "organizations_url": "https://api.github.com/users/1440000bytes/orgs",
        "repos_url": "https://api.github.com/users/1440000bytes/repos",
        "events_url": "https://api.github.com/users/1440000bytes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1440000bytes/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-02T16:46:51Z",
      "updated_at": "2025-04-02T16:46:51Z",
      "author_association": "NONE",
      "body": "Concept ACK",
      "user": {
        "login": "1440000bytes",
        "id": 147166694,
        "node_id": "U_kgDOCMWV5g",
        "avatar_url": "https://avatars.githubusercontent.com/u/147166694?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1440000bytes",
        "html_url": "https://github.com/1440000bytes",
        "followers_url": "https://api.github.com/users/1440000bytes/followers",
        "following_url": "https://api.github.com/users/1440000bytes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1440000bytes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1440000bytes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1440000bytes/subscriptions",
        "organizations_url": "https://api.github.com/users/1440000bytes/orgs",
        "repos_url": "https://api.github.com/users/1440000bytes/repos",
        "events_url": "https://api.github.com/users/1440000bytes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1440000bytes/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32198#issuecomment-2773164435",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32198"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17099083429,
      "node_id": "HRFPE_lADOABII586wwtHgzwAAAAP7L06l",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17099083429",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "2222dd8e60d82e5aa96f3d80a81ddca880d627ea",
      "commit_url": "https://api.github.com/repos/maflcko/bitcoin-core/commits/2222dd8e60d82e5aa96f3d80a81ddca880d627ea",
      "created_at": "2025-04-02T18:32:17Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17100538081,
      "node_id": "HRFPE_lADOABII586wwtHgzwAAAAP7RYDh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17100538081",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "fa27b91aaa75d48cb1ed0f408682e069a733e7a0",
      "commit_url": "https://api.github.com/repos/maflcko/bitcoin-core/commits/fa27b91aaa75d48cb1ed0f408682e069a733e7a0",
      "created_at": "2025-04-02T20:23:49Z"
    },
    {
      "event": "commented",
      "id": 2774641646,
      "node_id": "IC_kwDOABII586lYavu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2774641646",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-03T06:41:01Z",
      "updated_at": "2025-04-03T06:41:01Z",
      "author_association": "MEMBER",
      "body": "I've run `cargo run --manifest-path ./contrib/devtools/deterministic-fuzz-coverage/Cargo.toml -- $PWD/bld-cmake/ $PWD/../qa-assets/fuzz_corpora/ p2p_headers_presync 32` 150 times and it passed, so I guess this is reasonably deterministic now.\r\n\r\nI've also force pushed to modify the commit messages with details.\r\n\r\nCoverage reports:\r\n\r\nhttps://drahtbot.space/host_reports/DrahtBot/reports/coverage_fuzz/monotree/fa27b91aaa75d48c/728b3feddc08afb3/fuzz.coverage/index.html\r\n\r\nhttps://drahtbot.space/host_reports/DrahtBot/reports/coverage_fuzz/monotree/77dff373a667a22d/728b3feddc08afb3/fuzz.coverage/index.html\r\n",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32198#issuecomment-2774641646",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32198"
    },
    {
      "event": "commented",
      "id": 2776124054,
      "node_id": "IC_kwDOABII586leEqW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2776124054",
      "actor": {
        "login": "marcofleon",
        "id": 95179662,
        "node_id": "U_kgDOBaxTjg",
        "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/marcofleon",
        "html_url": "https://github.com/marcofleon",
        "followers_url": "https://api.github.com/users/marcofleon/followers",
        "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
        "organizations_url": "https://api.github.com/users/marcofleon/orgs",
        "repos_url": "https://api.github.com/users/marcofleon/repos",
        "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/marcofleon/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-03T15:10:39Z",
      "updated_at": "2025-04-03T15:13:48Z",
      "author_association": "CONTRIBUTOR",
      "body": "> 150 times and it passed\r\n\r\nWhen you say it passed, are you referring to running the inputs one by one, or including the full corpus run as well?\r\n\r\nI still see differences in coverage when running the full corpus, but the previous instability that this PR addresses doesn't seem to be showing up anymore, so that's good.",
      "user": {
        "login": "marcofleon",
        "id": 95179662,
        "node_id": "U_kgDOBaxTjg",
        "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/marcofleon",
        "html_url": "https://github.com/marcofleon",
        "followers_url": "https://api.github.com/users/marcofleon/followers",
        "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
        "organizations_url": "https://api.github.com/users/marcofleon/orgs",
        "repos_url": "https://api.github.com/users/marcofleon/repos",
        "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/marcofleon/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32198#issuecomment-2776124054",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32198"
    },
    {
      "event": "commented",
      "id": 2776167279,
      "node_id": "IC_kwDOABII586lePNv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2776167279",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-03T15:25:08Z",
      "updated_at": "2025-04-03T15:25:08Z",
      "author_association": "MEMBER",
      "body": "> When you say it passed, are you referring to running the inputs one by one, or including the full corpus run as well?\r\n\r\nBoth. (All of it in the full command)\r\n\r\n> I still see differences in coverage when running the full corpus, but the previous instability that this PR addresses doesn't seem to be showing up anymore, so that's good.\r\n\r\nAre you using libFuzzer?",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32198#issuecomment-2776167279",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32198"
    },
    {
      "event": "commented",
      "id": 2776192107,
      "node_id": "IC_kwDOABII586leVRr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2776192107",
      "actor": {
        "login": "marcofleon",
        "id": 95179662,
        "node_id": "U_kgDOBaxTjg",
        "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/marcofleon",
        "html_url": "https://github.com/marcofleon",
        "followers_url": "https://api.github.com/users/marcofleon/followers",
        "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
        "organizations_url": "https://api.github.com/users/marcofleon/orgs",
        "repos_url": "https://api.github.com/users/marcofleon/repos",
        "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/marcofleon/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-03T15:30:04Z",
      "updated_at": "2025-04-03T15:30:04Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Are you using libFuzzer?\r\n\r\nyeah just figured this out, disregard. Do you know why this is? What about libFuzzer trips it up?",
      "user": {
        "login": "marcofleon",
        "id": 95179662,
        "node_id": "U_kgDOBaxTjg",
        "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/marcofleon",
        "html_url": "https://github.com/marcofleon",
        "followers_url": "https://api.github.com/users/marcofleon/followers",
        "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
        "organizations_url": "https://api.github.com/users/marcofleon/orgs",
        "repos_url": "https://api.github.com/users/marcofleon/repos",
        "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/marcofleon/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32198#issuecomment-2776192107",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32198"
    },
    {
      "event": "commented",
      "id": 2776198218,
      "node_id": "IC_kwDOABII586leWxK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2776198218",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-03T15:32:25Z",
      "updated_at": "2025-04-03T15:32:25Z",
      "author_association": "MEMBER",
      "body": "Not sure yet. It could be libFuzzer and coverage instrumentation interacting in a bad way, but I have no idea. Maybe I can take a look later.",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32198#issuecomment-2776198218",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32198"
    },
    {
      "event": "commented",
      "id": 2776408663,
      "node_id": "IC_kwDOABII586lfKJX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2776408663",
      "actor": {
        "login": "marcofleon",
        "id": 95179662,
        "node_id": "U_kgDOBaxTjg",
        "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/marcofleon",
        "html_url": "https://github.com/marcofleon",
        "followers_url": "https://api.github.com/users/marcofleon/followers",
        "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
        "organizations_url": "https://api.github.com/users/marcofleon/orgs",
        "repos_url": "https://api.github.com/users/marcofleon/repos",
        "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/marcofleon/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-03T16:54:04Z",
      "updated_at": "2025-04-03T17:01:08Z",
      "author_association": "CONTRIBUTOR",
      "body": "@dergoegge and I checked it out. Turns out libfuzzer shuffles the corpus, so running it twice with a different ordering of inputs can result in different coverage. On this PR, running with libFuzzer and setting `-shuffle=0` should produce no coverage differences for `p2p_headers_presync`. \r\n\r\nI think this is another sign of non-determinism, as the ordering shouldn't affect line hit counts. It seems that using libFuzzer does end up providing a bit of new information.\r\n\r\nedit: It probably shows instability caused by global state? Which was the intention of doing the full corpus run through in the first place. So shuffling it between runs might be necessary for catching this sort of non-determinism.",
      "user": {
        "login": "marcofleon",
        "id": 95179662,
        "node_id": "U_kgDOBaxTjg",
        "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/marcofleon",
        "html_url": "https://github.com/marcofleon",
        "followers_url": "https://api.github.com/users/marcofleon/followers",
        "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
        "organizations_url": "https://api.github.com/users/marcofleon/orgs",
        "repos_url": "https://api.github.com/users/marcofleon/repos",
        "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/marcofleon/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32198#issuecomment-2776408663",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32198"
    },
    {
      "event": "mentioned",
      "id": 17117524110,
      "node_id": "MEE_lADOABII586wwtHgzwAAAAP8SLCO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17117524110",
      "actor": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-03T16:54:05Z"
    },
    {
      "event": "subscribed",
      "id": 17117524125,
      "node_id": "SE_lADOABII586wwtHgzwAAAAP8SLCd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17117524125",
      "actor": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-03T16:54:06Z"
    },
    {
      "event": "commented",
      "id": 2776461616,
      "node_id": "IC_kwDOABII586lfXEw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2776461616",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-03T17:18:49Z",
      "updated_at": "2025-04-03T17:18:49Z",
      "author_association": "MEMBER",
      "body": "> So shuffling it between runs might be necessary for catching this sort of non-determinism.\r\n\r\nYeah, good catch and nice idea!\r\n\r\nHowever, I am not seeing the global state that causes this. For reference, one part of the non-determinism is fixed by the change in commit https://github.com/bitcoin/bitcoin/commit/2222dd8e60d82e5aa96f3d80a81ddca880d627ea. I am happy to re-add the commit here, but I'd feel better if I fully understood the commit myself.",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32198#issuecomment-2776461616",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32198"
    },
    {
      "event": "commented",
      "id": 2776726199,
      "node_id": "IC_kwDOABII586lgXq3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2776726199",
      "actor": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-03T19:25:09Z",
      "updated_at": "2025-04-03T19:25:09Z",
      "author_association": "CONTRIBUTOR",
      "body": "This may be a shot in the dark, but is it possible that `ResetAndInitialize` re-initializing the `id` counter to 0 introduces some non-determinism across runs depending on the ordering of the corpus? During normal bitcoind operation, the `NodeId` is always monotonically increasing; is there a reason it is reset in `p2p_headers_presync` and `process_messages`?",
      "user": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32198#issuecomment-2776726199",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32198"
    },
    {
      "event": "commented",
      "id": 2778718945,
      "node_id": "IC_kwDOABII586ln-Lh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2778718945",
      "actor": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-04T13:20:36Z",
      "updated_at": "2025-04-04T13:20:36Z",
      "author_association": "MEMBER",
      "body": "> However, I am not seeing the global state that causes this. For reference, one part of the non-determinism is fixed by the change in commit https://github.com/bitcoin/bitcoin/commit/2222dd8e60d82e5aa96f3d80a81ddca880d627ea. I am happy to re-add the commit here, but I'd feel better if I fully understood the commit myself.\r\n\r\nI think it might be the `m_rng` on peerman which is a global in this test.\r\n\r\nIn the following `m_rng` is only used if `tx_relay->m_next_inv_send_time < current_time` and https://github.com/bitcoin/bitcoin/commit/2222dd8e60d82e5aa96f3d80a81ddca880d627ea causes that to no longer be the case:\r\nhttps://github.com/bitcoin/bitcoin/blob/65dcbec75661d1652beb927f03b1feab4fab932e/src/net_processing.cpp#L5679-L5686\r\n\r\n> is there a reason it is reset in p2p_headers_presync and process_messages?\r\n\r\nFor each test case we want to simulate starting out with no peers (i.e. id = 0) and then add peers and send messages. ",
      "user": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32198#issuecomment-2778718945",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32198"
    },
    {
      "event": "commented",
      "id": 2778923110,
      "node_id": "IC_kwDOABII586lowBm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2778923110",
      "actor": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-04T14:37:43Z",
      "updated_at": "2025-04-04T15:55:08Z",
      "author_association": "CONTRIBUTOR",
      "body": "> For each test case we want to simulate starting out with no peers (i.e. id = 0) and then add peers and send messages.\r\n\r\nThat makes sense, I think my question was a bit unclear. There are two places I can see in net_processing where `NodeId` persists even after the peer has disconnected (i.e. polluting global state somewhat between fuzz iterations):\r\n- `lNodesAnnouncingHeaderAndIDs`\r\n- `m_headers_presync_bestpeer`\r\n\r\nThe first one does not have any fuzz coverage, but the second one is executed by `p2p_headers_presync`. Running the full command in the OP above gives the following result where `m_headers_presync_bestpeer` [no longer exists in `m_headers_presync_stats`](https://github.com/bitcoin/bitcoin/blob/65dcbec75661d1652beb927f03b1feab4fab932e/src/net_processing.cpp#L2587-L2599):\r\n```diff\r\n diff --git a/Users/eugenesiegel/btc/bitcoin-review/build/fuzz_det_cov.show.t0.a.txt b/Users/eugenesiegel/btc/bitcoin-review/build/fuzz_det_cov.show.t0.b.txt\r\n index 0822ec1f73..74efd6c71d 100644\r\n  --- a/Users/eugenesiegel/btc/bitcoin-review/build/fuzz_det_cov.show.t0.a.txt\r\n  +++ b/Users/eugenesiegel/btc/bitcoin-review/build/fuzz_det_cov.show.t0.b.txt\r\n  @@ -102156,38 +102156,38 @@\r\n    2586|  3.79k|            bool best_updated = false;\r\n    2587|  3.79k|            if (best_it == m_headers_presync_stats.end()) {\r\n     ------------------\r\n  -  |  Branch (2587:17): [True: 37, False: 3.76k]\r\n  +  |  Branch (2587:17): [True: 39, False: 3.75k]\r\n     ------------------\r\n    2588|       |                // If the cached best peer is outdated, iterate over all remaining ones (including\r\n    2589|       |                // newly updated one) to find the best one.\r\n  - 2590|     37|                NodeId peer_best{-1};\r\n  - 2591|     37|                const HeadersPresyncStats* stat_best{nullptr};\r\n  - 2592|     37|                for (const auto& [peer, stat] : m_headers_presync_stats) {\r\n  + 2590|     39|                NodeId peer_best{-1};\r\n  + 2591|     39|                const HeadersPresyncStats* stat_best{nullptr};\r\n  + 2592|     39|                for (const auto& [peer, stat] : m_headers_presync_stats) {\r\n     ------------------\r\n  -  |  Branch (2592:47): [True: 37, False: 37]\r\n  +  |  Branch (2592:47): [True: 39, False: 39]\r\n     ------------------\r\n  - 2593|     37|                    if (!stat_best || stat > *stat_best) {\r\n  + 2593|     39|                    if (!stat_best || stat > *stat_best) {\r\n                                                       ^0\r\n     ------------------\r\n  -  |  Branch (2593:25): [True: 37, False: 0]\r\n  +  |  Branch (2593:25): [True: 39, False: 0]\r\n     |  Branch (2593:39): [True: 0, False: 0]\r\n     ------------------\r\n  - 2594|     37|                        peer_best = peer;\r\n  - 2595|     37|                        stat_best = &stat;\r\n  - 2596|     37|                    }\r\n  - 2597|     37|                }\r\n  - 2598|     37|                m_headers_presync_bestpeer = peer_best;\r\n  - 2599|     37|                best_updated = (peer_best == pfrom.GetId());\r\n  - 2600|  3.76k|            } else if (best_it->first == pfrom.GetId() || stats > best_it->second) {\r\n  + 2594|     39|                        peer_best = peer;\r\n  + 2595|     39|                        stat_best = &stat;\r\n  + 2596|     39|                    }\r\n  + 2597|     39|                }\r\n  + 2598|     39|                m_headers_presync_bestpeer = peer_best;\r\n  + 2599|     39|                best_updated = (peer_best == pfrom.GetId());\r\n  + 2600|  3.75k|            } else if (best_it->first == pfrom.GetId() || stats > best_it->second) {\r\n```\r\n\r\nChanging the `NodeId` to be a member of `HeadersSyncSetup` that is monotonically increasing does get rid of the above non-determinism, but it seems to introduce some new non-determinism elsewhere.\r\n\r\nEdit: The \"new non-determinism\" seems to be pre-existing, so I think changing `NodeId` to monotonically increase does reduce non-determinism if libfuzzer is used _with_ shuffling corpus inputs.",
      "user": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32198#issuecomment-2778923110",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32198"
    },
    {
      "event": "commented",
      "id": 2779202401,
      "node_id": "IC_kwDOABII586lp0Nh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2779202401",
      "actor": {
        "login": "marcofleon",
        "id": 95179662,
        "node_id": "U_kgDOBaxTjg",
        "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/marcofleon",
        "html_url": "https://github.com/marcofleon",
        "followers_url": "https://api.github.com/users/marcofleon/followers",
        "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
        "organizations_url": "https://api.github.com/users/marcofleon/orgs",
        "repos_url": "https://api.github.com/users/marcofleon/repos",
        "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/marcofleon/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-04T16:12:20Z",
      "updated_at": "2025-04-04T16:12:20Z",
      "author_association": "CONTRIBUTOR",
      "body": "Commit 2222dd8e60d82e5aa96f3d80a81ddca880d627ea added to this PR fixes all non-determinism for me. I should probably run the script more than 10 times to be sure, but so far so good.\r\n\r\n@Crypt-iQ the part you're highlighting is the only code where the connection to Niklas's rationale isn't immediately clear. I think it could be in `MaybeSendPing` where sometimes a peer gets marked for disconnection based on some timeout which is dependent on mock time. That node then gets removed from `m_header_presync_stats` in `FinalizeNode`. So having the two different mock times and a different input ordering would affect which peers are part of the presync.",
      "user": {
        "login": "marcofleon",
        "id": 95179662,
        "node_id": "U_kgDOBaxTjg",
        "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/marcofleon",
        "html_url": "https://github.com/marcofleon",
        "followers_url": "https://api.github.com/users/marcofleon/followers",
        "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
        "organizations_url": "https://api.github.com/users/marcofleon/orgs",
        "repos_url": "https://api.github.com/users/marcofleon/repos",
        "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/marcofleon/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32198#issuecomment-2779202401",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32198"
    },
    {
      "event": "mentioned",
      "id": 17132822287,
      "node_id": "MEE_lADOABII586wwtHgzwAAAAP9Mh8P",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17132822287",
      "actor": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-04T16:12:22Z"
    },
    {
      "event": "subscribed",
      "id": 17132822302,
      "node_id": "SE_lADOABII586wwtHgzwAAAAP9Mh8e",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17132822302",
      "actor": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-04T16:12:22Z"
    },
    {
      "event": "commented",
      "id": 2779267298,
      "node_id": "IC_kwDOABII586lqEDi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2779267298",
      "actor": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-04T16:44:17Z",
      "updated_at": "2025-04-04T16:45:02Z",
      "author_association": "CONTRIBUTOR",
      "body": "@marcofleon That sounds plausible, I don't immediately understand the connection to mock time; I was thinking along the lines of the `NodeId` getting reused across iterations:\r\n- Iteration 1: `id=0` is set as `m_headers_presync_bestpeer`\r\n- Iteration 2: `ResetAndInitialize` calls `FinalizeNode` which wipes all peer state except for `m_headers_presync_bestpeer`\r\n- Iteration 2: Depending on the corpus input, the peer with `id=0` sends a `HEADERS` message which eventually calls `IsContinuationOfLowWorkHeadersSync`. This will [populate](https://github.com/bitcoin/bitcoin/blob/65dcbec75661d1652beb927f03b1feab4fab932e/src/net_processing.cpp#L2584-L2585) the `m_headers_presync_stats` with `id=0` which then means that the best peer will be found in `m_headers_presync_stats`.",
      "user": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32198#issuecomment-2779267298",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32198"
    },
    {
      "event": "mentioned",
      "id": 17133213572,
      "node_id": "MEE_lADOABII586wwtHgzwAAAAP9OBeE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17133213572",
      "actor": {
        "login": "marcofleon",
        "id": 95179662,
        "node_id": "U_kgDOBaxTjg",
        "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/marcofleon",
        "html_url": "https://github.com/marcofleon",
        "followers_url": "https://api.github.com/users/marcofleon/followers",
        "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
        "organizations_url": "https://api.github.com/users/marcofleon/orgs",
        "repos_url": "https://api.github.com/users/marcofleon/repos",
        "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/marcofleon/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-04T16:44:19Z"
    },
    {
      "event": "subscribed",
      "id": 17133213587,
      "node_id": "SE_lADOABII586wwtHgzwAAAAP9OBeT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17133213587",
      "actor": {
        "login": "marcofleon",
        "id": 95179662,
        "node_id": "U_kgDOBaxTjg",
        "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/marcofleon",
        "html_url": "https://github.com/marcofleon",
        "followers_url": "https://api.github.com/users/marcofleon/followers",
        "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
        "organizations_url": "https://api.github.com/users/marcofleon/orgs",
        "repos_url": "https://api.github.com/users/marcofleon/repos",
        "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/marcofleon/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-04T16:44:19Z"
    },
    {
      "event": "commented",
      "id": 2783047261,
      "node_id": "IC_kwDOABII586l4e5d",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2783047261",
      "actor": {
        "login": "marcofleon",
        "id": 95179662,
        "node_id": "U_kgDOBaxTjg",
        "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/marcofleon",
        "html_url": "https://github.com/marcofleon",
        "followers_url": "https://api.github.com/users/marcofleon/followers",
        "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
        "organizations_url": "https://api.github.com/users/marcofleon/orgs",
        "repos_url": "https://api.github.com/users/marcofleon/repos",
        "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/marcofleon/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-07T11:45:59Z",
      "updated_at": "2025-04-07T12:44:36Z",
      "author_association": "CONTRIBUTOR",
      "body": "That's a good explanation, makes sense to me. I spent some time trying to connect what you're saying to the mock time fix, but turns out there is no connection. I forgot that taking out `SetMockTime(ConsumeTime(fuzzed_data_provider))` changes the input format so running on the old corpus isn't useful. As a workaround to generating a new corpus, I left the `ConsumeTime` in the test but didn't set it to mock time and this specific instability still shows up. It's separate from https://github.com/bitcoin/bitcoin/pull/32198#issuecomment-2778718945 then.\r\n\r\nIs `m_header_presync_bestpeer` only used for reporting/logging to validation? I'm not sure how useful to the test it would be to fix this specific source of non-determinism. Unless there's a relatively simple fix that doesn't slow down the test.\r\n\r\nCommit 2222dd8e60d82e5aa96f3d80a81ddca880d627ea seems to address some of the other non-determinism that shows up so I think including it in this PR makes sense.\r\n\r\nedit: I should add that https://github.com/bitcoin/bitcoin/pull/32198#issuecomment-2779202401 should be disregarded, as it is incorrect.\r\n",
      "user": {
        "login": "marcofleon",
        "id": 95179662,
        "node_id": "U_kgDOBaxTjg",
        "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/marcofleon",
        "html_url": "https://github.com/marcofleon",
        "followers_url": "https://api.github.com/users/marcofleon/followers",
        "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
        "organizations_url": "https://api.github.com/users/marcofleon/orgs",
        "repos_url": "https://api.github.com/users/marcofleon/repos",
        "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/marcofleon/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32198#issuecomment-2783047261",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32198"
    },
    {
      "event": "commented",
      "id": 2783112835,
      "node_id": "IC_kwDOABII586l4u6D",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2783112835",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-07T12:07:48Z",
      "updated_at": "2025-04-07T12:07:48Z",
      "author_association": "MEMBER",
      "body": "> > However, I am not seeing the global state that causes this. For reference, one part of the non-determinism is fixed by the change in commit [2222dd8](https://github.com/bitcoin/bitcoin/commit/2222dd8e60d82e5aa96f3d80a81ddca880d627ea). I am happy to re-add the commit here, but I'd feel better if I fully understood the commit myself.\r\n> \r\n> I think it might be the `m_rng` on peerman which is a global in this test.\r\n> \r\n> In the following `m_rng` is only used if `tx_relay->m_next_inv_send_time < current_time` and [2222dd8](https://github.com/bitcoin/bitcoin/commit/2222dd8e60d82e5aa96f3d80a81ddca880d627ea) causes that to no longer be the case:\r\n\r\nThanks! I missed that `ResetAndInitialize` calls `NextInvToInbounds`. Pushed the commit again.\r\n\r\n\r\n\r\n> > So shuffling it between runs might be necessary for catching this sort of non-determinism.\r\n> \r\n> Yeah, good catch and nice idea!\r\n\r\nUpdate: Pushed a commit for this as well.\r\n\r\n\r\n\r\n> Iteration 1: `id=0` is set as `m_headers_presync_bestpeer`\r\n\r\nNice explanation. Add a commit for this as well.",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32198#issuecomment-2783112835",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32198"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZhYWYzODE5ZjJjOTU3YTRjOTY4ODM4NmI4MzAxYTFlZjcwYWNlMDc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/faaf3819f2c957a4c9688386b8301a1ef70ace07",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/faaf3819f2c957a4c9688386b8301a1ef70ace07",
      "tree": {
        "sha": "4d981f76e991789db3f2d787851c95107bdff7d6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4d981f76e991789db3f2d787851c95107bdff7d6"
      },
      "verification": {
        "verified": false,
        "reason": "no_user",
        "payload": "tree 4d981f76e991789db3f2d787851c95107bdff7d6\nparent 639279e86a6edd6cb68e8cf077d14337bcd13959\nauthor MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1744019921 +0200\ncommitter MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1744029083 +0200\n\nfuzz: Shuffle files before testing them\n\nWhen iterating over all fuzz input files in a folder, the order should\nnot matter.\n\nHowever, shuffling may be useful to detect non-determinism.\n\nThus, shuffle in fuzz.cpp, when using neither libFuzzer, nor AFL.\n\nAlso, shuffle in the deterministic-fuzz-coverage tool, when using\nlibFuzzer.\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAgqxY/aMPiuXoCFn6iAEyAhvUqFX\njanTudd31Jtt35ct0AAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQAf6QYCvUY6COD1sGWeQkcD5eD1QnUvFvsJ29b2dXtpUjCYClUql8KlNKYLw7VE7Un\nRbgX5oxC68J0VUyHqpdQc=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/639279e86a6edd6cb68e8cf077d14337bcd13959",
          "sha": "639279e86a6edd6cb68e8cf077d14337bcd13959",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/639279e86a6edd6cb68e8cf077d14337bcd13959"
        }
      ],
      "message": "fuzz: Shuffle files before testing them\n\nWhen iterating over all fuzz input files in a folder, the order should\nnot matter.\n\nHowever, shuffling may be useful to detect non-determinism.\n\nThus, shuffle in fuzz.cpp, when using neither libFuzzer, nor AFL.\n\nAlso, shuffle in the deterministic-fuzz-coverage tool, when using\nlibFuzzer.",
      "committer": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-04-07T12:31:23Z"
      },
      "author": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-04-07T09:58:41Z"
      },
      "sha": "faaf3819f2c957a4c9688386b8301a1ef70ace07"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZhMzNlNWFlZDViM2JhOGFlMjEyMjNlZGQ4ZjZhY2QwNzVlMzEzNjE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa33e5aed5b3ba8ae21223edd8f6acd075e31361",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fa33e5aed5b3ba8ae21223edd8f6acd075e31361",
      "tree": {
        "sha": "5e936f6b44a44e477d35ffbd29746ea4842bf3fe",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5e936f6b44a44e477d35ffbd29746ea4842bf3fe"
      },
      "verification": {
        "verified": false,
        "reason": "no_user",
        "payload": "tree 5e936f6b44a44e477d35ffbd29746ea4842bf3fe\nparent faaf3819f2c957a4c9688386b8301a1ef70ace07\nauthor MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1743610497 +0200\ncommitter MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1744029083 +0200\n\nfuzz: Set ignore_incoming_txs in p2p_headers_presync\n\nThis avoids non-determistic code paths.\n\nWithout this patch, the tool would report a diff:\n\ncargo run --manifest-path ./contrib/devtools/deterministic-fuzz-coverage/Cargo.toml -- $PWD/bld-cmake/ $PWD/../qa-assets/fuzz_corpora/ p2p_headers_presync 32\n\n...\n- 5371|    393|        peer.m_next_send_feefilter = current_time + m_rng.randrange<std::chrono::microseconds>(MAX_FEEFILTER_CHANGE_DELAY);\n- 5372|    393|    }\n+ 5371|    396|        peer.m_next_send_feefilter = current_time + m_rng.randrange<std::chrono::microseconds>(MAX_FEEFILTER_CHANGE_DELAY);\n+ 5372|    396|    }\n  5373|  16.2k|}\n...\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAgqxY/aMPiuXoCFn6iAEyAhvUqFX\njanTudd31Jtt35ct0AAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQBxsq+X3KMOoDV1JYpeq8Eu9XUE9zyjRPgugMRU55b3cCBfG9m1y/GMzkrhn4NzPSH\ncgOmfGySPuFNq8vl3fNwg=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/faaf3819f2c957a4c9688386b8301a1ef70ace07",
          "sha": "faaf3819f2c957a4c9688386b8301a1ef70ace07",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/faaf3819f2c957a4c9688386b8301a1ef70ace07"
        }
      ],
      "message": "fuzz: Set ignore_incoming_txs in p2p_headers_presync\n\nThis avoids non-determistic code paths.\n\nWithout this patch, the tool would report a diff:\n\ncargo run --manifest-path ./contrib/devtools/deterministic-fuzz-coverage/Cargo.toml -- $PWD/bld-cmake/ $PWD/../qa-assets/fuzz_corpora/ p2p_headers_presync 32\n\n...\n- 5371|    393|        peer.m_next_send_feefilter = current_time + m_rng.randrange<std::chrono::microseconds>(MAX_FEEFILTER_CHANGE_DELAY);\n- 5372|    393|    }\n+ 5371|    396|        peer.m_next_send_feefilter = current_time + m_rng.randrange<std::chrono::microseconds>(MAX_FEEFILTER_CHANGE_DELAY);\n+ 5372|    396|    }\n  5373|  16.2k|}\n...",
      "committer": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-04-07T12:31:23Z"
      },
      "author": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-04-02T16:14:57Z"
      },
      "sha": "fa33e5aed5b3ba8ae21223edd8f6acd075e31361"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZhMmM3Y2JkNTAzY2VmYmE4YjdkYjUxYmUzMjRhYTBhM2E5OTJmMjc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa2c7cbd503cefba8b7db51be324aa0a3a992f27",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fa2c7cbd503cefba8b7db51be324aa0a3a992f27",
      "tree": {
        "sha": "7c9e8796456464fb0cadc9b4f6773dd18b14043d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7c9e8796456464fb0cadc9b4f6773dd18b14043d"
      },
      "verification": {
        "verified": false,
        "reason": "no_user",
        "payload": "tree 7c9e8796456464fb0cadc9b4f6773dd18b14043d\nparent fa33e5aed5b3ba8ae21223edd8f6acd075e31361\nauthor MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1744027270 +0200\ncommitter MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1744029083 +0200\n\nfuzz: Move global node id counter along with other global state\n\nThe global m_headers_presync_stats is not reset in ResetAndInitialize.\nThis may lead to non-determinism.\n\nFix it by incrementing the global node id counter instead.\n\nWithout this patch, the tool would report a diff:\n\ncargo run --manifest-path ./contrib/devtools/deterministic-fuzz-coverage/Cargo.toml -- $PWD/bld-cmake/ $PWD/../qa-assets/fuzz_corpora/ p2p_headers_presync 32\n\n...\n  2587|  3.73k|            if (best_it == m_headers_presync_stats.end()) {\n   ------------------\n-  |  Branch (2587:17): [True: 80, False: 3.65k]\n+  |  Branch (2587:17): [True: 73, False: 3.66k]\n   ------------------\n...\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAgqxY/aMPiuXoCFn6iAEyAhvUqFX\njanTudd31Jtt35ct0AAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQGxojArXyIawmH7mv1x/TrQyJ7BV6bl5EcV/s3KcoWzf2Mojc9pTEwD7FpQGb5qwmS\nSP86zYAfi16MLR7K668QE=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa33e5aed5b3ba8ae21223edd8f6acd075e31361",
          "sha": "fa33e5aed5b3ba8ae21223edd8f6acd075e31361",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/fa33e5aed5b3ba8ae21223edd8f6acd075e31361"
        }
      ],
      "message": "fuzz: Move global node id counter along with other global state\n\nThe global m_headers_presync_stats is not reset in ResetAndInitialize.\nThis may lead to non-determinism.\n\nFix it by incrementing the global node id counter instead.\n\nWithout this patch, the tool would report a diff:\n\ncargo run --manifest-path ./contrib/devtools/deterministic-fuzz-coverage/Cargo.toml -- $PWD/bld-cmake/ $PWD/../qa-assets/fuzz_corpora/ p2p_headers_presync 32\n\n...\n  2587|  3.73k|            if (best_it == m_headers_presync_stats.end()) {\n   ------------------\n-  |  Branch (2587:17): [True: 80, False: 3.65k]\n+  |  Branch (2587:17): [True: 73, False: 3.66k]\n   ------------------\n...",
      "committer": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-04-07T12:31:23Z"
      },
      "author": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-04-07T12:01:10Z"
      },
      "sha": "fa2c7cbd503cefba8b7db51be324aa0a3a992f27"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZhZWNhZDExYzVmYWQwNTE3ZmQ4NzE2NmQwNDRlZmM4NmVlMmIxYzk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/faecad11c5fad0517fd87166d044efc86ee2b1c9",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/faecad11c5fad0517fd87166d044efc86ee2b1c9",
      "tree": {
        "sha": "1e2d8f255f6e7a90d46a7b55094fc8c805bcf182",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1e2d8f255f6e7a90d46a7b55094fc8c805bcf182"
      },
      "verification": {
        "verified": false,
        "reason": "no_user",
        "payload": "tree 1e2d8f255f6e7a90d46a7b55094fc8c805bcf182\nparent fa2c7cbd503cefba8b7db51be324aa0a3a992f27\nauthor MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1743152181 +0100\ncommitter MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1744029093 +0200\n\ntest: Introduce MockableSteadyClock::mock_time_point and ElapseSteady helper\n\nThis refactor clarifies that the MockableSteadyClock::mock_time_point\nhas millisecond precision by defining a type an using it.\n\nMoreover, a ElapseSteady helper is added which can be re-used easily.\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAgqxY/aMPiuXoCFn6iAEyAhvUqFX\njanTudd31Jtt35ct0AAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQF/oEy1laAPRt5GOUcmqta1tiSAb+8ePGBjsjVAtBpp5myis4QfkyLd6sDh1hL1DTT\nxt59duo/pIJqv9Bd2KUwk=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa2c7cbd503cefba8b7db51be324aa0a3a992f27",
          "sha": "fa2c7cbd503cefba8b7db51be324aa0a3a992f27",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/fa2c7cbd503cefba8b7db51be324aa0a3a992f27"
        }
      ],
      "message": "test: Introduce MockableSteadyClock::mock_time_point and ElapseSteady helper\n\nThis refactor clarifies that the MockableSteadyClock::mock_time_point\nhas millisecond precision by defining a type an using it.\n\nMoreover, a ElapseSteady helper is added which can be re-used easily.",
      "committer": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-04-07T12:31:33Z"
      },
      "author": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-03-28T08:56:21Z"
      },
      "sha": "faecad11c5fad0517fd87166d044efc86ee2b1c9"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZhYWI3NjRjZGYxZDRhNWYyNzg5ODkxYjU3ZjgyZmZjZTIyYjBjZTQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/faab764cdf1d4a5f2789891b57f82ffce22b0ce4",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/faab764cdf1d4a5f2789891b57f82ffce22b0ce4",
      "tree": {
        "sha": "69501fcf85fb7c7969d7c757c761493ec900109b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/69501fcf85fb7c7969d7c757c761493ec900109b"
      },
      "verification": {
        "verified": false,
        "reason": "no_user",
        "payload": "tree 69501fcf85fb7c7969d7c757c761493ec900109b\nparent faecad11c5fad0517fd87166d044efc86ee2b1c9\nauthor MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1743165936 +0100\ncommitter MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1744029100 +0200\n\nrefactor: Use MockableSteadyClock in ReportHeadersPresync\n\nThis allows the clock to be mockable in tests. Also, replace cs_main\nwith GetMutex() while touching this function.\n\nAlso, use the ElapseSteady test helper in the p2p_headers_presync fuzz\ntarget to make it more deterministic.\n\nThe m_last_presync_update variable is a global that is not reset in\nResetAndInitialize. However, it is only used for logging, so completely\ndisable it for now.\n\nWithout this patch, the tool would report a diff:\n\ncargo run --manifest-path ./contrib/devtools/deterministic-fuzz-coverage/Cargo.toml -- $PWD/bld-cmake/ $PWD/../qa-assets/fuzz_corpora/ p2p_headers_presync 32\n\n...\n  4468|     81|        auto now = std::chrono::steady_clock::now();\n  4469|     81|        if (now < m_last_presync_update + std::chrono::milliseconds{250}) return;\n-                                                                                        ^80\n+                                                                                        ^79\n...\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAgqxY/aMPiuXoCFn6iAEyAhvUqFX\njanTudd31Jtt35ct0AAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQCMOHw2yab+33Pdv0RsQpj4ncKAXsoEGI/PoKJ0X8mpkfqOoOjCh28q48OCcvJPeOS\naewCtXDZqnZqMIOUyR6AE=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/faecad11c5fad0517fd87166d044efc86ee2b1c9",
          "sha": "faecad11c5fad0517fd87166d044efc86ee2b1c9",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/faecad11c5fad0517fd87166d044efc86ee2b1c9"
        }
      ],
      "message": "refactor: Use MockableSteadyClock in ReportHeadersPresync\n\nThis allows the clock to be mockable in tests. Also, replace cs_main\nwith GetMutex() while touching this function.\n\nAlso, use the ElapseSteady test helper in the p2p_headers_presync fuzz\ntarget to make it more deterministic.\n\nThe m_last_presync_update variable is a global that is not reset in\nResetAndInitialize. However, it is only used for logging, so completely\ndisable it for now.\n\nWithout this patch, the tool would report a diff:\n\ncargo run --manifest-path ./contrib/devtools/deterministic-fuzz-coverage/Cargo.toml -- $PWD/bld-cmake/ $PWD/../qa-assets/fuzz_corpora/ p2p_headers_presync 32\n\n...\n  4468|     81|        auto now = std::chrono::steady_clock::now();\n  4469|     81|        if (now < m_last_presync_update + std::chrono::milliseconds{250}) return;\n-                                                                                        ^80\n+                                                                                        ^79\n...",
      "committer": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-04-07T12:31:40Z"
      },
      "author": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-03-28T12:45:36Z"
      },
      "sha": "faab764cdf1d4a5f2789891b57f82ffce22b0ce4"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZhMmQzNDQxYzY1NTdhZGJhM2QzOTNhYmZjMWFmMjJmYjc4OGI1YzI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa2d3441c6557adba3d393abfc1af22fb788b5c2",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fa2d3441c6557adba3d393abfc1af22fb788b5c2",
      "tree": {
        "sha": "98c179b4342e77fd44f8419734db0f6630a96725",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/98c179b4342e77fd44f8419734db0f6630a96725"
      },
      "verification": {
        "verified": false,
        "reason": "no_user",
        "payload": "tree 98c179b4342e77fd44f8419734db0f6630a96725\nparent faab764cdf1d4a5f2789891b57f82ffce22b0ce4\nauthor MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1743610233 +0200\ncommitter MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1744029108 +0200\n\nfuzz: Avoid setting the mock-time twice\n\nIt should be sufficient to set it once. Especially, if the dynamic value\nis only used by ResetAndInitialize.\n\nThis also avoids non-determistic code paths, when ResetAndInitialize may\nre-initialize m_next_inv_to_inbounds.\n\nWithout this patch, the tool would report a diff:\n\ncargo run --manifest-path ./contrib/devtools/deterministic-fuzz-coverage/Cargo.toml -- $PWD/bld-cmake/ $PWD/../qa-assets/fuzz_corpora/ p2p_headers_presync 32\n\n...\n- 1126|      3|        m_next_inv_to_inbounds = now + m_rng.rand_exp_duration(average_interval);\n- 1127|      3|    }\n+ 1126|     10|        m_next_inv_to_inbounds = now + m_rng.rand_exp_duration(average_interval);\n+ 1127|     10|    }\n  1128|    491|    return m_next_inv_to_inbounds;\n...\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAgqxY/aMPiuXoCFn6iAEyAhvUqFX\njanTudd31Jtt35ct0AAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQGEt8a0eomd5lbkHqtmvPMABPlDQ5q+E0AJEriEjy4htMb9skSDEIzRqzWCLqqTr7B\nRAEn4qz71pQgAZ0EMTKQ8=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/faab764cdf1d4a5f2789891b57f82ffce22b0ce4",
          "sha": "faab764cdf1d4a5f2789891b57f82ffce22b0ce4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/faab764cdf1d4a5f2789891b57f82ffce22b0ce4"
        }
      ],
      "message": "fuzz: Avoid setting the mock-time twice\n\nIt should be sufficient to set it once. Especially, if the dynamic value\nis only used by ResetAndInitialize.\n\nThis also avoids non-determistic code paths, when ResetAndInitialize may\nre-initialize m_next_inv_to_inbounds.\n\nWithout this patch, the tool would report a diff:\n\ncargo run --manifest-path ./contrib/devtools/deterministic-fuzz-coverage/Cargo.toml -- $PWD/bld-cmake/ $PWD/../qa-assets/fuzz_corpora/ p2p_headers_presync 32\n\n...\n- 1126|      3|        m_next_inv_to_inbounds = now + m_rng.rand_exp_duration(average_interval);\n- 1127|      3|    }\n+ 1126|     10|        m_next_inv_to_inbounds = now + m_rng.rand_exp_duration(average_interval);\n+ 1127|     10|    }\n  1128|    491|    return m_next_inv_to_inbounds;\n...",
      "committer": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-04-07T12:31:48Z"
      },
      "author": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-04-02T16:10:33Z"
      },
      "sha": "fa2d3441c6557adba3d393abfc1af22fb788b5c2"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17152822668,
      "node_id": "HRFPE_lADOABII586wwtHgzwAAAAP-Y02M",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17152822668",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "fa2d3441c6557adba3d393abfc1af22fb788b5c2",
      "commit_url": "https://api.github.com/repos/maflcko/bitcoin-core/commits/fa2d3441c6557adba3d393abfc1af22fb788b5c2",
      "created_at": "2025-04-07T12:32:04Z"
    },
    {
      "event": "commented",
      "id": 2783187937,
      "node_id": "IC_kwDOABII586l5BPh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2783187937",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-07T12:35:14Z",
      "updated_at": "2025-04-07T12:35:14Z",
      "author_association": "MEMBER",
      "body": "force pushed with one more fix. Also, reordered some commits.\r\n\r\nObviously, the non-deterministic `std::ranges::shuffle(files, InsecureRandomContext{uint64_t(SystemClock::now().time_since_epoch().count())});` remains non-deterministic and should be ignored for now.\r\n\r\nLet me know if this should be fixed. Possible fixes are:\r\n\r\n* Pre-generated (cached) random numbers that are generated before coverage measurements start\r\n* Moving the code to a translation unit that is excluded from coverage.",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32198#issuecomment-2783187937",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32198"
    },
    {
      "event": "commented",
      "id": 2783377375,
      "node_id": "IC_kwDOABII586l5vff",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2783377375",
      "actor": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-07T13:38:04Z",
      "updated_at": "2025-04-07T13:43:21Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Is m_header_presync_bestpeer only used for reporting/logging to validation? I'm not sure how useful to the test it would be to fix this specific source of non-determinism. Unless there's a relatively simple fix that doesn't slow down the test.\r\n\r\nI haven't fully grokked the presync headers logic, so I don't know but I can find out. This commit fixes it https://github.com/bitcoin/bitcoin/pull/32198/commits/fa2c7cbd503cefba8b7db51be324aa0a3a992f2.\r\n\r\n> I forgot that taking out SetMockTime(ConsumeTime(fuzzed_data_provider)) changes the input format so running on the old corpus isn't useful.\r\n\r\nThis brings up something I was wondering about -- is there any current way to migrate the corpus if it gets invalidated?  I was looking at `FuzzedDataProvider` and realized it takes from the front and back of the input which makes me a bit confused on how migration can happen.\r\n\r\nEdit: Does fa2d3441c6557adba3d393abfc1af22fb788b5c2 invalidate the existing corpus or is the idea to either migrate or run the fuzzer long enough to achieve the same coverage?",
      "user": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32198#issuecomment-2783377375",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32198"
    },
    {
      "event": "commented",
      "id": 2783401694,
      "node_id": "IC_kwDOABII586l51be",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2783401694",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-07T13:46:08Z",
      "updated_at": "2025-04-07T13:46:08Z",
      "author_association": "MEMBER",
      "body": "> Is `m_header_presync_bestpeer` only used for reporting/logging to validation?\r\n\r\nIt should be. Header presync is an inherently per-peer data operation (as the whole point is avoiding impact on global data structures until the peer has proven their chain is worthwhile), but for progress reporting we need a single number, so only the most advanced header sync is used.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32198#issuecomment-2783401694",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32198"
    }
  ],
  "comments": []
}