{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836",
    "id": 907894497,
    "node_id": "PR_kwDOABII5842HV7h",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/24836",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/24836.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/24836.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24836",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24836/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/e866f0d0666664885d4c15c79bf59cc59975887a",
    "number": 24836,
    "state": "closed",
    "locked": true,
    "maintainer_can_modify": false,
    "title": "add RPC (-regtest only) for testing package policy",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "It would be nice for LN/wallet/app devs to test out package policy, package RBF, etc., but the only interface to do so right now is through unit tests. This PR adds a `-regtest` only RPC interface so people can test by submitting raw transaction data. It is regtest-only, as it would be unsafe/confusing to create an actual mainnet interface while package relay doesn't exist.\r\n\r\nNote that the functional tests are there to ensure the RPC interface is working properly; they aren't for testing policy itself. See src/test/txpackage_tests.cpp.",
    "labels": [
      {
        "id": 98279177,
        "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
        "name": "RPC/REST/ZMQ",
        "color": "0052cc",
        "default": false
      }
    ],
    "created_at": "2022-04-12T16:30:10Z",
    "updated_at": "2023-06-30T10:08:48Z",
    "closed_at": "2022-06-30T14:43:59Z",
    "mergeable_state": "unknown",
    "merged_at": "2022-06-30T14:43:59Z",
    "merge_commit_sha": "6adae27f8c756e32d3a761d35fe05f5a7e7b2e94",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "requested_teams": [],
    "head": {
      "label": "glozow:client-submitpackage",
      "ref": "client-submitpackage",
      "sha": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 244262754,
        "node_id": "MDEwOlJlcG9zaXRvcnkyNDQyNjI3NTQ=",
        "name": "bitcoin",
        "full_name": "glozow/bitcoin",
        "owner": {
          "login": "glozow",
          "id": 25183001,
          "node_id": "MDQ6VXNlcjI1MTgzMDAx",
          "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/glozow",
          "html_url": "https://github.com/glozow",
          "followers_url": "https://api.github.com/users/glozow/followers",
          "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
          "organizations_url": "https://api.github.com/users/glozow/orgs",
          "repos_url": "https://api.github.com/users/glozow/repos",
          "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/glozow/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/glozow/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/glozow/bitcoin",
        "archive_url": "https://api.github.com/repos/glozow/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/glozow/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/glozow/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/glozow/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/glozow/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/glozow/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/glozow/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/glozow/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/glozow/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/glozow/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/glozow/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/glozow/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/glozow/bitcoin/events",
        "forks_url": "https://api.github.com/repos/glozow/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/glozow/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/glozow/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/glozow/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/glozow/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/glozow/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/glozow/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/glozow/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/glozow/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/glozow/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/glozow/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/glozow/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/glozow/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/glozow/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/glozow/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/glozow/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:glozow/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/glozow/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/glozow/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/glozow/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/glozow/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/glozow/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/glozow/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/glozow/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/glozow/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/glozow/bitcoin/hooks",
        "svn_url": "https://github.com/glozow/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 1,
        "stargazers_count": 8,
        "watchers_count": 8,
        "size": 228323,
        "default_branch": "master",
        "open_issues_count": 1,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-27T10:18:19Z",
        "created_at": "2020-03-02T02:31:56Z",
        "updated_at": "2023-06-09T04:08:16Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "01e9e2d1ca7fc08d65663b398c71ecec6a01f686",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35128,
        "stargazers_count": 70173,
        "watchers_count": 70173,
        "size": 235148,
        "default_branch": "master",
        "open_issues_count": 636,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-30T10:57:13Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-06-30T10:07:40Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 281,
    "deletions": 5,
    "changed_files": 7,
    "commits": 2,
    "review_comments": 75,
    "comments": 15
  },
  "events": [
    {
      "event": "commented",
      "id": 1096948837,
      "node_id": "IC_kwDOABII585BYhxl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1096948837",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-12T16:34:45Z",
      "updated_at": "2022-04-12T16:34:45Z",
      "author_association": "MEMBER",
      "body": "TODOs (probably for future PRs):\r\n\r\n- Automatically build the package using the child transaction, i.e. when we already have unconfirmed parents in the mempool or `mapWallet`. I expect to have this before package relay (users shouldn't be expected to construct packages themselves imo), but just haven't implemented it yet. LMK if this is something you want now.\r\n- Add `maxfeerate` to allow users to set a maximum package feerate. This just requires adding a `TestPackage` codepath separate from testmempoolaccept so we can say \"just kidding\" if the validation succeeds.\r\n",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#issuecomment-1096948837",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24836"
    },
    {
      "event": "labeled",
      "id": 6420666162,
      "node_id": "LE_lADOABII585HpnV4zwAAAAF-s5cy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6420666162",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-12T16:35:10Z",
      "label": {
        "name": "RPC/REST/ZMQ",
        "color": "0052cc"
      }
    },
    {
      "event": "commented",
      "id": 1097487355,
      "node_id": "IC_kwDOABII585BalP7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1097487355",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-13T02:29:18Z",
      "updated_at": "2022-04-13T02:29:18Z",
      "author_association": "MEMBER",
      "body": ">It could be unsafe/confusing to create an actual mainnet interface while package relay doesn't exist.\r\n\r\nHow so?\r\n\r\n> However, it's currently very inconvenient for wallet/application devs to try to test current package policies. \r\n\r\nThey shouldn't need to. No assumptions should be made about user package policies...",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#issuecomment-1097487355",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24836"
    },
    {
      "event": "reviewed",
      "id": 940524052,
      "node_id": "PRR_kwDOABII5844D0IU",
      "url": null,
      "actor": null,
      "commit_id": "f09106314119577d5716bb1cb57d7b575c7f4218",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "only nits",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#pullrequestreview-940524052",
      "submitted_at": "2022-04-13T07:28:59Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
    },
    {
      "event": "commented",
      "id": 1098161866,
      "node_id": "IC_kwDOABII585BdJ7K",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1098161866",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-13T15:02:25Z",
      "updated_at": "2022-05-30T20:11:47Z",
      "author_association": "MEMBER",
      "body": "> > It could be unsafe/confusing to create an actual mainnet interface while package relay doesn't exist.\r\n\r\n> How so?\r\n\r\nUntil package relay, it's unreasonable to assume that anything submitted to the mempool this way will propagate. For example, package cpfp allows 0-fee transactions to be accepted to the mempool if they have a high-fee child. But this likely won't go much further than the user's mempool, since most nodes will reject 0-fee transactions.\r\n\r\n>>    However, it's currently very inconvenient for wallet/application devs to try to test current package policies.\r\n\r\n> They shouldn't need to. No assumptions should be made about user package policies...\r\n\r\nThe point here is to encourage testing. Even if they aren't supposed to rely on the interface, the reality is that most nodes run bitcoind and don't configure their nodes differently, it's a good idea for wallet/application devs to write a test suite for what their expectations are. I would also prefer to know as early as possible (i.e. PR comment or in RC testing, not catastrophic bug after release) if we're going to accidentally harm LN tx propagation with a policy restriction, as >$100million of the network is in it.",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#issuecomment-1098161866",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24836"
    },
    {
      "event": "reviewed",
      "id": 941189256,
      "node_id": "PRR_kwDOABII5844GWiI",
      "url": null,
      "actor": null,
      "commit_id": "f09106314119577d5716bb1cb57d7b575c7f4218",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Minors, otherwise SGTM.",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#pullrequestreview-941189256",
      "submitted_at": "2022-04-13T15:49:55Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
    },
    {
      "event": "commented",
      "id": 1098238254,
      "node_id": "IC_kwDOABII585Bdcku",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1098238254",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-13T16:13:08Z",
      "updated_at": "2022-04-13T16:13:08Z",
      "author_association": "MEMBER",
      "body": "> They shouldn't need to. No assumptions should be made about user package policies...\r\n\r\nWhy no assumptions should be made about user package policies ? Could you layout the reasoning underpinning that statement ?\r\n\r\nI believe to be of a contrary position. I think the default core policy should be designed to be compatible with miner incentives. In the present case, accepting relayed packages should increase your mining fee reward. If we assume that the majority of users are economically rational, they aim for their mempools contents to reflect the state of the next blocks and thus they should relay packages. Under this assumption concerning the base layer, I think an upper layer like LN can expect a policy like package relay to be widely supported.",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#issuecomment-1098238254",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24836"
    },
    {
      "event": "commented",
      "id": 1098287400,
      "node_id": "IC_kwDOABII585Bdoko",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1098287400",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-13T17:07:02Z",
      "updated_at": "2022-04-13T17:07:02Z",
      "author_association": "MEMBER",
      "body": ">Until package relay, it's unreasonable to assume that anything submitted to the mempool this way will propagate. For example, package cpfp allows 0-fee transactions to be accepted to the mempool if they have a high-fee child. But this likely won't go much further than the user's mempool, since most nodes will reject 0-fee transactions.\r\n\r\nPropagation isn't a guarantee made by sendrawtransaction either, and could very well be in the same situation if node policies don't align.\r\n\r\nSeems like this PR should just be a modification to `sendrawtransaction` IMO. (If there's a reason to make it regtest-only, that can still be done without a new RPC method)\r\n\r\n>Why no assumptions should be made about user package policies ?\r\n\r\nUsers should ideally decide their own policies. This is especially true when consideration is being made for security purposes.\r\n\r\n> I think the default core policy should be designed to be compatible with miner incentives.\r\n\r\nThat's illogical. Most nodes aren't miners, and don't benefit from miner incentives. They *create* miner incentives, by deciding their own policies (blocks which don't match the node policy will relay slower).\r\n\r\n>If we assume that the majority of users are economically rational, they aim for their mempools contents to reflect the state of the next blocks and thus they should relay packages. \r\n\r\nThere is no economically rational reason for this. Miners have a reason to match node policies, but nodes do not really benefit from matching miners.\r\n\r\n>Under this assumption concerning the base layer, I think an upper layer like LN can expect a policy like package relay to be widely supported.\r\n\r\nIt presently isn't...",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#issuecomment-1098287400",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24836"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6429206602,
      "node_id": "HRFPE_lADOABII585HpnV4zwAAAAF_NehK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6429206602",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-13T17:35:54Z"
    },
    {
      "event": "commented",
      "id": 1098313792,
      "node_id": "IC_kwDOABII585BdvBA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1098313792",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-13T17:36:54Z",
      "updated_at": "2022-04-13T17:36:54Z",
      "author_association": "MEMBER",
      "body": "Addressed comments from @MarcoFalke and @ariard. Also renamed s/submitrawpackage/submitpackage because I don't think we'd ever submit non-raw packages.",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#issuecomment-1098313792",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24836"
    },
    {
      "event": "mentioned",
      "id": 6429212833,
      "node_id": "MEE_lADOABII585HpnV4zwAAAAF_NgCh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6429212833",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-13T17:36:54Z"
    },
    {
      "event": "subscribed",
      "id": 6429212843,
      "node_id": "SE_lADOABII585HpnV4zwAAAAF_NgCr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6429212843",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-13T17:36:54Z"
    },
    {
      "event": "mentioned",
      "id": 6429212849,
      "node_id": "MEE_lADOABII585HpnV4zwAAAAF_NgCx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6429212849",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-13T17:36:54Z"
    },
    {
      "event": "subscribed",
      "id": 6429212853,
      "node_id": "SE_lADOABII585HpnV4zwAAAAF_NgC1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6429212853",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-13T17:36:54Z"
    },
    {
      "event": "reviewed",
      "id": 941355836,
      "node_id": "PRR_kwDOABII5844G_M8",
      "url": null,
      "actor": null,
      "commit_id": "04bb60029457fb7085041a414b195fd4f0e78d42",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#pullrequestreview-941355836",
      "submitted_at": "2022-04-13T17:58:37Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
    },
    {
      "event": "reviewed",
      "id": 943541773,
      "node_id": "PRR_kwDOABII5844PU4N",
      "url": null,
      "actor": null,
      "commit_id": "04bb60029457fb7085041a414b195fd4f0e78d42",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Code Review ACK 04bb600",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#pullrequestreview-943541773",
      "submitted_at": "2022-04-15T16:30:24Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
    },
    {
      "event": "commented",
      "id": 1100224997,
      "node_id": "IC_kwDOABII585BlBnl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1100224997",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-15T16:51:14Z",
      "updated_at": "2022-04-15T16:51:14Z",
      "author_association": "MEMBER",
      "body": "> Users should ideally decide their own policies. This is especially true when consideration is being made for security purposes.\r\n\r\nUsers deciding their own policies doesn't mean they won't spontaneously converge towards few common policies per type of bitcoin applications/hosts.\r\n\r\n> They create miner incentives, by deciding their own policies (blocks which don't match the node policy will relay slower).\r\n\r\nIf we define further miner incentives as optimizing block fee reward, i don't think node policies _creates_ them. Nodes policies (full-rbf, package relay) are just _means_ to achieve the incentives. I'm not sure it's a sane node policy to reject consensus-valid blocks.\r\n\r\n> There is no economically rational reason for this. Miners have a reason to match node policies, but nodes do not really benefit from matching miners.\r\n\r\nIf users decide their own policies with a high degree of arbitrary of miners can expect to match the node policies ? At the contrary, node benefit from their policies matching the miners to improve their visibility of the future blockchain state and block space demand. I think restrictions, which can be motivated for security reasons or host perfomances or whatever, comes with the trade-off of a worsen view of the blockchain.",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#issuecomment-1100224997",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24836"
    },
    {
      "event": "commented",
      "id": 1100331851,
      "node_id": "IC_kwDOABII585BlbtL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1100331851",
      "actor": {
        "login": "ghost",
        "id": 10137,
        "node_id": "MDQ6VXNlcjEwMTM3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ghost",
        "html_url": "https://github.com/ghost",
        "followers_url": "https://api.github.com/users/ghost/followers",
        "following_url": "https://api.github.com/users/ghost/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ghost/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ghost/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
        "organizations_url": "https://api.github.com/users/ghost/orgs",
        "repos_url": "https://api.github.com/users/ghost/repos",
        "events_url": "https://api.github.com/users/ghost/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ghost/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-15T19:50:41Z",
      "updated_at": "2022-04-15T19:50:41Z",
      "author_association": "NONE",
      "body": "> They shouldn't need to. No assumptions should be made about user package policies.\r\n\r\n@luke-jr Agree. Any application assuming mempool policies is vulnerable. Although this RPC could be helpful for testing in general.",
      "user": {
        "login": "ghost",
        "id": 10137,
        "node_id": "MDQ6VXNlcjEwMTM3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ghost",
        "html_url": "https://github.com/ghost",
        "followers_url": "https://api.github.com/users/ghost/followers",
        "following_url": "https://api.github.com/users/ghost/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ghost/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ghost/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
        "organizations_url": "https://api.github.com/users/ghost/orgs",
        "repos_url": "https://api.github.com/users/ghost/repos",
        "events_url": "https://api.github.com/users/ghost/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ghost/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#issuecomment-1100331851",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24836"
    },
    {
      "event": "mentioned",
      "id": 6442048746,
      "node_id": "MEE_lADOABII585HpnV4zwAAAAF_-dzq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6442048746",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-15T19:50:42Z"
    },
    {
      "event": "subscribed",
      "id": 6442048749,
      "node_id": "SE_lADOABII585HpnV4zwAAAAF_-dzt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6442048749",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-15T19:50:42Z"
    },
    {
      "event": "review_requested",
      "id": 6466271078,
      "node_id": "RRE_lADOABII585HpnV4zwAAAAGBa3dm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6466271078",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-20T21:07:33Z",
      "requested_reviewer": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "commented",
      "id": 1108043202,
      "node_id": "IC_kwDOABII585CC2XC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1108043202",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-25T03:44:14Z",
      "updated_at": "2022-06-21T10:10:52Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#25434](https://github.com/bitcoin/bitcoin/pull/25434) (mempool: Add option to bypass contextual timelocks in testmempoolaccept by w0xlt)\n* [#25038](https://github.com/bitcoin/bitcoin/pull/25038) (BIP125-based Package RBF by glozow)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#issuecomment-1108043202",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24836"
    },
    {
      "event": "reviewed",
      "id": 951446797,
      "node_id": "PRR_kwDOABII5844te0N",
      "url": null,
      "actor": null,
      "commit_id": "04bb60029457fb7085041a414b195fd4f0e78d42",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "left some nits, since you requested a review (not sure if you wanted that kind of review)",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#pullrequestreview-951446797",
      "submitted_at": "2022-04-25T07:30:11Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
    },
    {
      "event": "commented",
      "id": 1113928476,
      "node_id": "IC_kwDOABII585CZTMc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1113928476",
      "actor": {
        "login": "michaelfolkson",
        "id": 16323900,
        "node_id": "MDQ6VXNlcjE2MzIzOTAw",
        "avatar_url": "https://avatars.githubusercontent.com/u/16323900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/michaelfolkson",
        "html_url": "https://github.com/michaelfolkson",
        "followers_url": "https://api.github.com/users/michaelfolkson/followers",
        "following_url": "https://api.github.com/users/michaelfolkson/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/michaelfolkson/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/michaelfolkson/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/michaelfolkson/subscriptions",
        "organizations_url": "https://api.github.com/users/michaelfolkson/orgs",
        "repos_url": "https://api.github.com/users/michaelfolkson/repos",
        "events_url": "https://api.github.com/users/michaelfolkson/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/michaelfolkson/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-30T06:22:43Z",
      "updated_at": "2022-04-30T07:14:31Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Seems like this PR should just be a modification to sendrawtransaction IMO. (If there's a reason to make it regtest-only, that can still be done without a new RPC method)\r\n> \r\n> But regardless, the regtest check can be part of the existing RPC too. (I don't think it'd be the first case of such either IIRC)\r\n\r\nFor the benefit of other reviewers this seems on the face of it to be a reasonable counter-suggestion to what this PR is doing that is worth exploring.\r\n\r\nThe rest of the conversation seems to be a rehashing of the \"Lightning security ideally wouldn't rely on mempool policy\" and \"One of the motivations for having a mempool is having a set of already validated transactions that the node expects to be mined in an upcoming block\"\r\n\r\nedit: [This](https://btctranscripts.com/adopting-bitcoin/2021/2021-11-16-gloria-zhao-transaction-relay-policy/#mempool-policy) is good from the PR author on why it makes sense for the user to care about miner incentives.",
      "user": {
        "login": "michaelfolkson",
        "id": 16323900,
        "node_id": "MDQ6VXNlcjE2MzIzOTAw",
        "avatar_url": "https://avatars.githubusercontent.com/u/16323900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/michaelfolkson",
        "html_url": "https://github.com/michaelfolkson",
        "followers_url": "https://api.github.com/users/michaelfolkson/followers",
        "following_url": "https://api.github.com/users/michaelfolkson/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/michaelfolkson/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/michaelfolkson/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/michaelfolkson/subscriptions",
        "organizations_url": "https://api.github.com/users/michaelfolkson/orgs",
        "repos_url": "https://api.github.com/users/michaelfolkson/repos",
        "events_url": "https://api.github.com/users/michaelfolkson/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/michaelfolkson/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#issuecomment-1113928476",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24836"
    },
    {
      "event": "reviewed",
      "id": 989192562,
      "node_id": "PRR_kwDOABII58469eFy",
      "url": null,
      "actor": null,
      "commit_id": "04bb60029457fb7085041a414b195fd4f0e78d42",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept and approach ACK. Just some minor style comments.\r\n\r\nThis could definitely have more extensive testing (eg submitting packages with entries already in the mempool, invalid package topologies, packages containing invalid transactions, etc), but it's fine to leave that for a follow-up PR. It looks like some of the test code has been written with that flexibility in mind, which I think can be removed if it's not actually being used yet.",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#pullrequestreview-989192562",
      "submitted_at": "2022-05-30T11:50:03Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6705416247,
      "node_id": "HRFPE_lADOABII585HpnV4zwAAAAGPrIg3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6705416247",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-30T22:43:20Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6705431399,
      "node_id": "HRFPE_lADOABII585HpnV4zwAAAAGPrMNn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6705431399",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-30T22:52:51Z"
    },
    {
      "event": "commented",
      "id": 1141524567,
      "node_id": "IC_kwDOABII585ECkhX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1141524567",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-30T22:53:18Z",
      "updated_at": "2022-05-30T22:53:18Z",
      "author_association": "MEMBER",
      "body": "Rebased to use `NONFATAL_UNREACHABLE`",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#issuecomment-1141524567",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24836"
    },
    {
      "event": "commented",
      "id": 1141650123,
      "node_id": "IC_kwDOABII585EDDLL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1141650123",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-31T04:16:04Z",
      "updated_at": "2022-05-31T04:16:04Z",
      "author_association": "MEMBER",
      "body": "Thanks @MarcoFalke @jnewbery, took your comments",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#issuecomment-1141650123",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24836"
    },
    {
      "event": "mentioned",
      "id": 6706215971,
      "node_id": "MEE_lADOABII585HpnV4zwAAAAGPuLwj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6706215971",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-31T04:16:04Z"
    },
    {
      "event": "subscribed",
      "id": 6706215982,
      "node_id": "SE_lADOABII585HpnV4zwAAAAGPuLwu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6706215982",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-31T04:16:05Z"
    },
    {
      "event": "mentioned",
      "id": 6706215987,
      "node_id": "MEE_lADOABII585HpnV4zwAAAAGPuLwz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6706215987",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-31T04:16:05Z"
    },
    {
      "event": "subscribed",
      "id": 6706215992,
      "node_id": "SE_lADOABII585HpnV4zwAAAAGPuLw4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6706215992",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-31T04:16:05Z"
    },
    {
      "event": "reviewed",
      "id": 989820453,
      "node_id": "PRR_kwDOABII5846_3Yl",
      "url": null,
      "actor": null,
      "commit_id": "411cc6eb9f4203fa702ffe82dcd75d1189cbbcb5",
      "commit_url": null,
      "created_at": null,
      "author_association": "NONE",
      "user": {
        "login": "WazirXwallet",
        "id": 94762507,
        "node_id": "U_kgDOBaX2Cw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94762507?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/WazirXwallet",
        "html_url": "https://github.com/WazirXwallet",
        "followers_url": "https://api.github.com/users/WazirXwallet/followers",
        "following_url": "https://api.github.com/users/WazirXwallet/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/WazirXwallet/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/WazirXwallet/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/WazirXwallet/subscriptions",
        "organizations_url": "https://api.github.com/users/WazirXwallet/orgs",
        "repos_url": "https://api.github.com/users/WazirXwallet/repos",
        "events_url": "https://api.github.com/users/WazirXwallet/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/WazirXwallet/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#pullrequestreview-989820453",
      "submitted_at": "2022-05-31T04:21:06Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
    },
    {
      "event": "reviewed",
      "id": 992284456,
      "node_id": "PRR_kwDOABII5847JQ8o",
      "url": null,
      "actor": null,
      "commit_id": "411cc6eb9f4203fa702ffe82dcd75d1189cbbcb5",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#pullrequestreview-992284456",
      "submitted_at": "2022-06-01T17:01:04Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
    },
    {
      "event": "reviewed",
      "id": 1000583466,
      "node_id": "PRR_kwDOABII5847o7Eq",
      "url": null,
      "actor": null,
      "commit_id": "411cc6eb9f4203fa702ffe82dcd75d1189cbbcb5",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "> For the benefit of other reviewers this seems on the face of it to be a reasonable counter-suggestion to what this PR is doing that is worth exploring.\r\n\r\nFWIW, one argument can be made that make it easier to refine a new dedicated interface for future package issuer step by step as we experiment it. Of course, I think we could also extend `sendrawtransaction` with a regtest flag and package-only arguments. But that starts to be messy and we have more odds to interfere with `sendrawtransaction` usage, likely one of the most used RPC call across the Bitcoin ecosystem",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#pullrequestreview-1000583466",
      "submitted_at": "2022-06-09T00:42:32Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6819208004,
      "node_id": "HRFPE_lADOABII585HpnV4zwAAAAGWdNtE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6819208004",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-16T08:47:11Z"
    },
    {
      "event": "review_requested",
      "id": 6819366784,
      "node_id": "RRE_lADOABII585HpnV4zwAAAAGWd0eA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6819366784",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-16T09:10:14Z",
      "requested_reviewer": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "review_requested",
      "id": 6819366797,
      "node_id": "RRE_lADOABII585HpnV4zwAAAAGWd0eN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6819366797",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-16T09:10:14Z",
      "requested_reviewer": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "review_requested",
      "id": 6819366804,
      "node_id": "RRE_lADOABII585HpnV4zwAAAAGWd0eU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6819366804",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-16T09:10:14Z",
      "requested_reviewer": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "review_requested",
      "id": 6819368043,
      "node_id": "RRE_lADOABII585HpnV4zwAAAAGWd0xr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6819368043",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-16T09:10:24Z",
      "requested_reviewer": {
        "login": "t-bast",
        "id": 31281497,
        "node_id": "MDQ6VXNlcjMxMjgxNDk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/31281497?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/t-bast",
        "html_url": "https://github.com/t-bast",
        "followers_url": "https://api.github.com/users/t-bast/followers",
        "following_url": "https://api.github.com/users/t-bast/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/t-bast/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/t-bast/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
        "organizations_url": "https://api.github.com/users/t-bast/orgs",
        "repos_url": "https://api.github.com/users/t-bast/repos",
        "events_url": "https://api.github.com/users/t-bast/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/t-bast/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "reviewed",
      "id": 1009113051,
      "node_id": "PRR_kwDOABII5848Jdfb",
      "url": null,
      "actor": null,
      "commit_id": "d7d8a9b70cb5420ba10bfbb423185448a2c980eb",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#pullrequestreview-1009113051",
      "submitted_at": "2022-06-16T14:13:26Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
    },
    {
      "event": "commented",
      "id": 1157720313,
      "node_id": "IC_kwDOABII585FAWj5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1157720313",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-16T14:23:06Z",
      "updated_at": "2022-06-16T14:23:06Z",
      "author_association": "MEMBER",
      "body": "concept ACK",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#issuecomment-1157720313",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24836"
    },
    {
      "event": "reviewed",
      "id": 1010473946,
      "node_id": "PRR_kwDOABII5848Opva",
      "url": null,
      "actor": null,
      "commit_id": "fbc6b8613eb4e6fd59fa45979aeff71e152c78e7",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Tested ACK https://github.com/bitcoin/bitcoin/pull/24836/commits/fbc6b8613eb4e6fd59fa45979aeff71e152c78e7",
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#pullrequestreview-1010473946",
      "submitted_at": "2022-06-17T13:07:26Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6837459983,
      "node_id": "HRFPE_lADOABII585HpnV4zwAAAAGXi1wP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6837459983",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-20T08:42:29Z"
    },
    {
      "event": "commented",
      "id": 1160154100,
      "node_id": "IC_kwDOABII585FJov0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1160154100",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-20T08:44:26Z",
      "updated_at": "2022-06-20T08:44:26Z",
      "author_association": "MEMBER",
      "body": "Last push\r\n- fixed the newline stuff in the description https://github.com/bitcoin/bitcoin/pull/24836#discussion_r899215072\r\n- added a sentence about individual broadcast https://github.com/bitcoin/bitcoin/pull/24836#discussion_r899130155\r\n- re-added `BroadcastTransaction()` (not sure if I lost that in a rebase or something)",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#issuecomment-1160154100",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24836"
    },
    {
      "event": "reviewed",
      "id": 1011983676,
      "node_id": "PRR_kwDOABII5848UaU8",
      "url": null,
      "actor": null,
      "commit_id": "980464989449b3b703c9a11e398b2b246dee163a",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Tested ACK https://github.com/bitcoin/bitcoin/pull/24836/commits/980464989449b3b703c9a11e398b2b246dee163a\r\n\r\nI modified [eclair](https://github.com/acinq/eclair) to use 0-fee commitment transactions and verified that I could use this RPC to submit packages containing a commitment transaction and a child anchor transaction. The RPC is easy to use and the data it returns is helpful.\r\n\r\n> Seems like this PR should just be a modification to sendrawtransaction IMO.\r\n\r\nI think this is a good point given the restrictions made to the topology of allowed packages. Because we're only considering packages of 1 child with multiple parents, we could use `sendrawtransaction` with the serialized child transaction and a new argument containing the package parents.\r\n\r\nFor now, a separate RPC that's regtest-only (and can thus be replaced / updated without caring too much about backwards-compatibility) is likely a better choice, but when the time comes to expose a mainnet RPC it could make sense to revisit that.",
      "user": {
        "login": "t-bast",
        "id": 31281497,
        "node_id": "MDQ6VXNlcjMxMjgxNDk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/31281497?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/t-bast",
        "html_url": "https://github.com/t-bast",
        "followers_url": "https://api.github.com/users/t-bast/followers",
        "following_url": "https://api.github.com/users/t-bast/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/t-bast/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/t-bast/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
        "organizations_url": "https://api.github.com/users/t-bast/orgs",
        "repos_url": "https://api.github.com/users/t-bast/repos",
        "events_url": "https://api.github.com/users/t-bast/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/t-bast/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#pullrequestreview-1011983676",
      "submitted_at": "2022-06-20T11:31:51Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
    },
    {
      "event": "reviewed",
      "id": 1012686576,
      "node_id": "PRR_kwDOABII5848XF7w",
      "url": null,
      "actor": null,
      "commit_id": "980464989449b3b703c9a11e398b2b246dee163a",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Code Review ACK 9804649\r\n\r\nChanges since last review :\r\n- `RPCHelpMan` updates to warn about the lack of package propagation\r\n- `RPCResult` updates around \"wtxid\" and \"other-wtxid\"\r\n- `HelpExampleCli` updates from \"submitrawtransaction\" to \"sendrawtransaction\"\r\n- re-add the `BroadcastTransaction` (would be nice to test coverage as suggested)\r\n- `rpc_package.py` comments and logs corrections\r\n\r\nEdit: I checked my previous reviews, effectively `BroadcastTransaction()` wasn't present. From my understanding, without p2p packages, the odds of low-fee parent package propagating are low, so it didn't really matter if a `BroadcastTransaction()` call wasn't present or not. As this RPC is -regtest only and there is already a warning about expected lack of propagation, I think it doesn't matter if we introduce `BroadcastTransaction()` in this RPC now or latter.",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#pullrequestreview-1012686576",
      "submitted_at": "2022-06-20T19:34:38Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
    },
    {
      "event": "review_requested",
      "id": 6845271272,
      "node_id": "RRE_lADOABII585HpnV4zwAAAAGYAozo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6845271272",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-21T08:28:13Z",
      "requested_reviewer": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "reviewed",
      "id": 1013569261,
      "node_id": "PRR_kwDOABII5848adbt",
      "url": null,
      "actor": null,
      "commit_id": "980464989449b3b703c9a11e398b2b246dee163a",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#pullrequestreview-1013569261",
      "submitted_at": "2022-06-21T13:18:03Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZhMDc2NTE1YjA3YWM0YjEwYjIxMzRlMzIzYmY0ZjU2YmU1OTk2YTg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa076515b07ac4b10b2134e323bf4f56be5996a8",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fa076515b07ac4b10b2134e323bf4f56be5996a8",
      "tree": {
        "sha": "6f4851be8f004c8fc03cb207e70df14c8e7ffe54",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6f4851be8f004c8fc03cb207e70df14c8e7ffe54"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b9ef5a10e2fa4609d048db57b99463305455ebe4",
          "sha": "b9ef5a10e2fa4609d048db57b99463305455ebe4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b9ef5a10e2fa4609d048db57b99463305455ebe4"
        }
      ],
      "message": "[rpc] add new submitpackage RPC\n\nIt could be unsafe/confusing to create an actual mainnet interface while\npackage relay doesn't exist. However, a regtest-only interface allows\nwallet/application devs to test current package policies.",
      "committer": {
        "name": "glozow",
        "email": "gloriajzhao@gmail.com",
        "date": "2022-06-23T13:35:04Z"
      },
      "author": {
        "name": "glozow",
        "email": "gloriajzhao@gmail.com",
        "date": "2021-07-20T10:45:52Z"
      },
      "sha": "fa076515b07ac4b10b2134e323bf4f56be5996a8"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGU4NjZmMGQwNjY2NjY0ODg1ZDRjMTVjNzliZjU5Y2M1OTk3NTg4N2E",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e866f0d0666664885d4c15c79bf59cc59975887a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e866f0d0666664885d4c15c79bf59cc59975887a",
      "tree": {
        "sha": "1a76d13330f23124438a4d6fffa93eb6c4eb1efc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1a76d13330f23124438a4d6fffa93eb6c4eb1efc"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa076515b07ac4b10b2134e323bf4f56be5996a8",
          "sha": "fa076515b07ac4b10b2134e323bf4f56be5996a8",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/fa076515b07ac4b10b2134e323bf4f56be5996a8"
        }
      ],
      "message": "[functional test] submitrawpackage RPC",
      "committer": {
        "name": "glozow",
        "email": "gloriajzhao@gmail.com",
        "date": "2022-06-23T13:39:47Z"
      },
      "author": {
        "name": "glozow",
        "email": "gloriajzhao@gmail.com",
        "date": "2021-07-20T10:49:43Z"
      },
      "sha": "e866f0d0666664885d4c15c79bf59cc59975887a"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6866490450,
      "node_id": "HRFPE_lADOABII585HpnV4zwAAAAGZRlRS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6866490450",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-23T13:40:34Z"
    },
    {
      "event": "commented",
      "id": 1167147432,
      "node_id": "IC_kwDOABII585FkUGo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1167147432",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-27T10:00:31Z",
      "updated_at": "2022-06-27T10:00:31Z",
      "author_association": "MEMBER",
      "body": "Last push:\r\n\r\n- s/sendrawtransaction/submitpackage https://github.com/bitcoin/bitcoin/pull/24836#discussion_r901460956\r\n- test that the transactions are broadcast https://github.com/bitcoin/bitcoin/pull/24836#discussion_r901956070\r\n- test package feerate https://github.com/bitcoin/bitcoin/pull/24836#discussion_r902607877\r\n- note some transactions may have been broadcast already if `BroadcastTransaction()` fails https://github.com/bitcoin/bitcoin/pull/24836#discussion_r902595822\r\n\r\nthanks @t-bast @ariard @instagibbs !",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#issuecomment-1167147432",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24836"
    },
    {
      "event": "mentioned",
      "id": 6883855166,
      "node_id": "MEE_lADOABII585HpnV4zwAAAAGaT0s-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6883855166",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-27T10:00:31Z"
    },
    {
      "event": "subscribed",
      "id": 6883855172,
      "node_id": "SE_lADOABII585HpnV4zwAAAAGaT0tE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6883855172",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-27T10:00:31Z"
    },
    {
      "event": "mentioned",
      "id": 6883855181,
      "node_id": "MEE_lADOABII585HpnV4zwAAAAGaT0tN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6883855181",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-27T10:00:31Z"
    },
    {
      "event": "subscribed",
      "id": 6883855192,
      "node_id": "SE_lADOABII585HpnV4zwAAAAGaT0tY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6883855192",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-27T10:00:31Z"
    },
    {
      "event": "mentioned",
      "id": 6883855201,
      "node_id": "MEE_lADOABII585HpnV4zwAAAAGaT0th",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6883855201",
      "actor": {
        "login": "t-bast",
        "id": 31281497,
        "node_id": "MDQ6VXNlcjMxMjgxNDk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/31281497?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/t-bast",
        "html_url": "https://github.com/t-bast",
        "followers_url": "https://api.github.com/users/t-bast/followers",
        "following_url": "https://api.github.com/users/t-bast/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/t-bast/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/t-bast/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
        "organizations_url": "https://api.github.com/users/t-bast/orgs",
        "repos_url": "https://api.github.com/users/t-bast/repos",
        "events_url": "https://api.github.com/users/t-bast/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/t-bast/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-27T10:00:31Z"
    },
    {
      "event": "subscribed",
      "id": 6883855213,
      "node_id": "SE_lADOABII585HpnV4zwAAAAGaT0tt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6883855213",
      "actor": {
        "login": "t-bast",
        "id": 31281497,
        "node_id": "MDQ6VXNlcjMxMjgxNDk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/31281497?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/t-bast",
        "html_url": "https://github.com/t-bast",
        "followers_url": "https://api.github.com/users/t-bast/followers",
        "following_url": "https://api.github.com/users/t-bast/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/t-bast/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/t-bast/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
        "organizations_url": "https://api.github.com/users/t-bast/orgs",
        "repos_url": "https://api.github.com/users/t-bast/repos",
        "events_url": "https://api.github.com/users/t-bast/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/t-bast/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-27T10:00:31Z"
    },
    {
      "event": "reviewed",
      "id": 1020129520,
      "node_id": "PRR_kwDOABII5848zfDw",
      "url": null,
      "actor": null,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Tested ACK against eclair https://github.com/bitcoin/bitcoin/pull/24836/commits/e866f0d0666664885d4c15c79bf59cc59975887a",
      "user": {
        "login": "t-bast",
        "id": 31281497,
        "node_id": "MDQ6VXNlcjMxMjgxNDk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/31281497?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/t-bast",
        "html_url": "https://github.com/t-bast",
        "followers_url": "https://api.github.com/users/t-bast/followers",
        "following_url": "https://api.github.com/users/t-bast/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/t-bast/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/t-bast/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
        "organizations_url": "https://api.github.com/users/t-bast/orgs",
        "repos_url": "https://api.github.com/users/t-bast/repos",
        "events_url": "https://api.github.com/users/t-bast/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/t-bast/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#pullrequestreview-1020129520",
      "submitted_at": "2022-06-27T12:40:51Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
    },
    {
      "event": "reviewed",
      "id": 1024150108,
      "node_id": "PRR_kwDOABII5849C0pc",
      "url": null,
      "actor": null,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Code Review ACK e866f0d0\r\n\r\nChanges since last review:\r\n- updates `sendrawtransaction` to `submitpackage` in `HelpExampleCli`\r\n- yield a JSON rpc error with the number of transaction in package\r\n- few functional test updates, notably adding a `test_submit_cpfp` case",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#pullrequestreview-1024150108",
      "submitted_at": "2022-06-30T01:00:03Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
    },
    {
      "event": "review_requested",
      "id": 6908821118,
      "node_id": "RRE_lADOABII585HpnV4zwAAAAGbzD5-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6908821118",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-30T08:45:53Z",
      "requested_reviewer": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "review_requested",
      "id": 6908825050,
      "node_id": "RRE_lADOABII585HpnV4zwAAAAGbzE3a",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6908825050",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-30T08:46:23Z",
      "requested_reviewer": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "reviewed",
      "id": 1024888500,
      "node_id": "PRR_kwDOABII5849Fo60",
      "url": null,
      "actor": null,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "code review ACK e866f0d0666664885d4c15c79bf59cc59975887a\r\n\r\ncode changes as expected pert: https://github.com/bitcoin/bitcoin/pull/24836#issuecomment-1167147432",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#pullrequestreview-1024888500",
      "submitted_at": "2022-06-30T13:59:01Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
    },
    {
      "event": "merged",
      "id": 6911525014,
      "node_id": "ME_lADOABII585HpnV4zwAAAAGb9YCW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6911525014",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "6adae27f8c756e32d3a761d35fe05f5a7e7b2e94",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6adae27f8c756e32d3a761d35fe05f5a7e7b2e94",
      "created_at": "2022-06-30T14:43:59Z"
    },
    {
      "event": "closed",
      "id": 6911525030,
      "node_id": "CE_lADOABII585HpnV4zwAAAAGb9YCm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6911525030",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-30T14:43:59Z"
    },
    {
      "event": "referenced",
      "id": 6912644881,
      "node_id": "REFE_lADOABII585HpnV4zwAAAAGcBpcR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6912644881",
      "actor": {
        "login": "sidhujag",
        "id": 6238042,
        "node_id": "MDQ6VXNlcjYyMzgwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6238042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sidhujag",
        "html_url": "https://github.com/sidhujag",
        "followers_url": "https://api.github.com/users/sidhujag/followers",
        "following_url": "https://api.github.com/users/sidhujag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sidhujag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sidhujag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sidhujag/subscriptions",
        "organizations_url": "https://api.github.com/users/sidhujag/orgs",
        "repos_url": "https://api.github.com/users/sidhujag/repos",
        "events_url": "https://api.github.com/users/sidhujag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sidhujag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "18543cc736337dade7220163b05f3fd9bdf5d4b9",
      "commit_url": "https://api.github.com/repos/syscoin/syscoin/commits/18543cc736337dade7220163b05f3fd9bdf5d4b9",
      "created_at": "2022-06-30T17:11:40Z"
    },
    {
      "event": "locked",
      "id": 9686294104,
      "node_id": "LOE_lADOABII585HpnV4zwAAAAJBWR5Y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9686294104",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-30T10:08:48Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849163198",
      "pull_request_review_id": 940524052,
      "id": 849163198,
      "node_id": "PRRC_kwDOABII584ynTO-",
      "diff_hunk": "@@ -682,6 +810,7 @@ void RegisterMempoolRPCCommands(CRPCTable& t)\n         {\"blockchain\", &getmempoolinfo},\n         {\"blockchain\", &getrawmempool},\n         {\"blockchain\", &savemempool},\n+        {\"hidden\", &submitrawpackage,},",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 146,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "f09106314119577d5716bb1cb57d7b575c7f4218",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n        {\"hidden\", &submitrawpackage},\r\n```\r\n\r\nnit?",
      "created_at": "2022-04-13T07:26:06Z",
      "updated_at": "2022-04-13T07:28:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r849163198",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849163198"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 813,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849164846",
      "pull_request_review_id": 940524052,
      "id": 849164846,
      "node_id": "PRRC_kwDOABII584ynTou",
      "diff_hunk": "@@ -669,6 +670,133 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitrawpackage()\n+{\n+    return RPCHelpMan{\"submitrawpackage\",\n+        \"\\nSubmit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only). Experimental, API may be unstable.\\n\"\n+        \"\\nThe package will be validated and accepted to mempool if it passes consensus and mempool policy rules. Throws a JSONRPCError if anything goes wrong.\\n\"\n+        \"\\nWarning: successful submission does not mean the transaction will propagate to other nodes on the network.\\n\",\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\\n\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"xxxx\", \"transaction wtxid\", {\n+                        {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n+                        {RPCResult::Type::STR_HEX, \"wtxid\", \"The transaction witness hash in hex\"},\n+                        {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::OBJ, \"fees\", \"Transaction fees (only present if result=\\\"valid\\\")\", {\n+                            {RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee in \" + CURRENCY_UNIT},\n+                        }},\n+                    }}\n+                }},\n+                {RPCResult::Type::STR_AMOUNT, \"package-feerate\", /*optional=*/ true, \"package feerate in \" + CURRENCY_UNIT + \" per KvB. Not always available.\"},\n+                {RPCResult::Type::ARR, \"replaced-transactions\", /*optional=*/ true, \"List of txids of replaced transactions\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"\", \"The transaction id\"},\n+                }},\n+            },\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"testmempoolaccept\", \"[rawtx1, rawtx2]\") +\n+            HelpExampleCli(\"submitrawtransaction\", \"[rawtx1, rawtx2]\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 51,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "f09106314119577d5716bb1cb57d7b575c7f4218",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n        {\r\n```\r\n\r\nnit: I accidentally didn't fix the whitespace when creating this file, but I think it is fine for new code to use the right amount of spaces.",
      "created_at": "2022-04-13T07:28:08Z",
      "updated_at": "2022-04-13T07:28:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r849164846",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849164846"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 712,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849633828",
      "pull_request_review_id": 941189256,
      "id": 849633828,
      "node_id": "PRRC_kwDOABII584ypGIk",
      "diff_hunk": "@@ -669,6 +670,133 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitrawpackage()\n+{\n+    return RPCHelpMan{\"submitrawpackage\",\n+        \"\\nSubmit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only). Experimental, API may be unstable.\\n\"\n+        \"\\nThe package will be validated and accepted to mempool if it passes consensus and mempool policy rules. Throws a JSONRPCError if anything goes wrong.\\n\"\n+        \"\\nWarning: successful submission does not mean the transaction will propagate to other nodes on the network.\\n\",\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\\n\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"xxxx\", \"transaction wtxid\", {\n+                        {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n+                        {RPCResult::Type::STR_HEX, \"wtxid\", \"The transaction witness hash in hex\"},",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 32,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "f09106314119577d5716bb1cb57d7b575c7f4218",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "If you're already using \"wtxid\" as a key, maybe not adding it as  \"value\" ?",
      "created_at": "2022-04-13T15:41:29Z",
      "updated_at": "2022-04-13T15:49:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r849633828",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849633828"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 693,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849635219",
      "pull_request_review_id": 941189256,
      "id": 849635219,
      "node_id": "PRRC_kwDOABII584ypGeT",
      "diff_hunk": "@@ -669,6 +670,133 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitrawpackage()\n+{\n+    return RPCHelpMan{\"submitrawpackage\",\n+        \"\\nSubmit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only). Experimental, API may be unstable.\\n\"\n+        \"\\nThe package will be validated and accepted to mempool if it passes consensus and mempool policy rules. Throws a JSONRPCError if anything goes wrong.\\n\"\n+        \"\\nWarning: successful submission does not mean the transaction will propagate to other nodes on the network.\\n\",\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\\n\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"xxxx\", \"transaction wtxid\", {\n+                        {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n+                        {RPCResult::Type::STR_HEX, \"wtxid\", \"The transaction witness hash in hex\"},\n+                        {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::OBJ, \"fees\", \"Transaction fees (only present if result=\\\"valid\\\")\", {\n+                            {RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee in \" + CURRENCY_UNIT},\n+                        }},\n+                    }}\n+                }},\n+                {RPCResult::Type::STR_AMOUNT, \"package-feerate\", /*optional=*/ true, \"package feerate in \" + CURRENCY_UNIT + \" per KvB. Not always available.\"},\n+                {RPCResult::Type::ARR, \"replaced-transactions\", /*optional=*/ true, \"List of txids of replaced transactions\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"\", \"The transaction id\"},\n+                }},\n+            },\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"testmempoolaccept\", \"[rawtx1, rawtx2]\") +\n+            HelpExampleCli(\"submitrawtransaction\", \"[rawtx1, rawtx2]\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    if (!Params().IsMockableChain()) {\n+        throw std::runtime_error(\"submitrawpackage is for regression testing (-regtest mode) only\");\n+    }\n+    RPCTypeCheck(request.params, {\n+        UniValue::VARR,\n+    });\n+    const UniValue raw_transactions = request.params[0].get_array();\n+    if (raw_transactions.size() < 1 || raw_transactions.size() > MAX_PACKAGE_COUNT) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER,\n+                           \"Array must contain between 1 and \" + ToString(MAX_PACKAGE_COUNT) + \" transactions.\");\n+    }\n+\n+    std::vector<CTransactionRef> txns;\n+    txns.reserve(raw_transactions.size());\n+    for (const auto& rawtx : raw_transactions.getValues()) {\n+        CMutableTransaction mtx;\n+        if (!DecodeHexTx(mtx, rawtx.get_str())) {\n+            throw JSONRPCError(RPC_DESERIALIZATION_ERROR,\n+                               \"TX decode failed: \" + rawtx.get_str() + \" Make sure the tx has at least one input.\");\n+        }\n+        txns.emplace_back(MakeTransactionRef(std::move(mtx)));\n+    }\n+\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    CTxMemPool& mempool = EnsureMemPool(node);\n+    CChainState& chainstate = EnsureChainman(node).ActiveChainstate();\n+    const auto package_result = WITH_LOCK(::cs_main, return ProcessNewPackage(chainstate, mempool, txns, /* test_accept */ false));\n+\n+    // First catch any errors.\n+    switch(package_result.m_state.GetResult()) {\n+        case PackageValidationResult::PCKG_RESULT_UNSET: break;\n+        case PackageValidationResult::PCKG_POLICY:\n+        case PackageValidationResult::PCKG_MEMPOOL_ERROR:\n+        {\n+            throw JSONRPCTransactionError(TransactionError::INVALID_PACKAGE,",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 86,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "f09106314119577d5716bb1cb57d7b575c7f4218",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Well sounds `PackageValidationResult::PCKG_MEMPOOL_ERROR` has its equivalent `TransactionError::MEMPOOL_ERROR` ? Or other reason to use `INVALID_PACKAGE` ?",
      "created_at": "2022-04-13T15:42:55Z",
      "updated_at": "2022-04-13T15:49:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r849635219",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849635219"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 752,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849641801",
      "pull_request_review_id": 941189256,
      "id": 849641801,
      "node_id": "PRRC_kwDOABII584ypIFJ",
      "diff_hunk": "@@ -669,6 +670,133 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitrawpackage()\n+{\n+    return RPCHelpMan{\"submitrawpackage\",\n+        \"\\nSubmit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only). Experimental, API may be unstable.\\n\"\n+        \"\\nThe package will be validated and accepted to mempool if it passes consensus and mempool policy rules. Throws a JSONRPCError if anything goes wrong.\\n\"\n+        \"\\nWarning: successful submission does not mean the transaction will propagate to other nodes on the network.\\n\",",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 17,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "f09106314119577d5716bb1cb57d7b575c7f4218",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "To inform the package user, you could link back to `doc/policy/packages.md` somewhere.",
      "created_at": "2022-04-13T15:49:29Z",
      "updated_at": "2022-04-13T15:49:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r849641801",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849641801"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 679,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849695130",
      "pull_request_review_id": 941274750,
      "id": 849695130,
      "node_id": "PRRC_kwDOABII584ypVGa",
      "diff_hunk": "@@ -669,6 +670,133 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitrawpackage()\n+{\n+    return RPCHelpMan{\"submitrawpackage\",\n+        \"\\nSubmit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only). Experimental, API may be unstable.\\n\"\n+        \"\\nThe package will be validated and accepted to mempool if it passes consensus and mempool policy rules. Throws a JSONRPCError if anything goes wrong.\\n\"\n+        \"\\nWarning: successful submission does not mean the transaction will propagate to other nodes on the network.\\n\",\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\\n\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"xxxx\", \"transaction wtxid\", {\n+                        {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n+                        {RPCResult::Type::STR_HEX, \"wtxid\", \"The transaction witness hash in hex\"},",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 32,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "f09106314119577d5716bb1cb57d7b575c7f4218",
      "in_reply_to_id": 849633828,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Because it's possible that the wtxid is different from the key, if there is a same-txid-different-witness tx in the mempool. I could make this more clear maybe?",
      "created_at": "2022-04-13T16:47:45Z",
      "updated_at": "2022-04-13T16:47:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r849695130",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849695130"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 693,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849736260",
      "pull_request_review_id": 941330994,
      "id": 849736260,
      "node_id": "PRRC_kwDOABII584ypfJE",
      "diff_hunk": "@@ -669,6 +670,133 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitrawpackage()\n+{\n+    return RPCHelpMan{\"submitrawpackage\",\n+        \"\\nSubmit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only). Experimental, API may be unstable.\\n\"\n+        \"\\nThe package will be validated and accepted to mempool if it passes consensus and mempool policy rules. Throws a JSONRPCError if anything goes wrong.\\n\"\n+        \"\\nWarning: successful submission does not mean the transaction will propagate to other nodes on the network.\\n\",\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\\n\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"xxxx\", \"transaction wtxid\", {\n+                        {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n+                        {RPCResult::Type::STR_HEX, \"wtxid\", \"The transaction witness hash in hex\"},\n+                        {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::OBJ, \"fees\", \"Transaction fees (only present if result=\\\"valid\\\")\", {\n+                            {RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee in \" + CURRENCY_UNIT},\n+                        }},\n+                    }}\n+                }},\n+                {RPCResult::Type::STR_AMOUNT, \"package-feerate\", /*optional=*/ true, \"package feerate in \" + CURRENCY_UNIT + \" per KvB. Not always available.\"},\n+                {RPCResult::Type::ARR, \"replaced-transactions\", /*optional=*/ true, \"List of txids of replaced transactions\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"\", \"The transaction id\"},\n+                }},\n+            },\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"testmempoolaccept\", \"[rawtx1, rawtx2]\") +\n+            HelpExampleCli(\"submitrawtransaction\", \"[rawtx1, rawtx2]\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    if (!Params().IsMockableChain()) {\n+        throw std::runtime_error(\"submitrawpackage is for regression testing (-regtest mode) only\");\n+    }\n+    RPCTypeCheck(request.params, {\n+        UniValue::VARR,\n+    });\n+    const UniValue raw_transactions = request.params[0].get_array();\n+    if (raw_transactions.size() < 1 || raw_transactions.size() > MAX_PACKAGE_COUNT) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER,\n+                           \"Array must contain between 1 and \" + ToString(MAX_PACKAGE_COUNT) + \" transactions.\");\n+    }\n+\n+    std::vector<CTransactionRef> txns;\n+    txns.reserve(raw_transactions.size());\n+    for (const auto& rawtx : raw_transactions.getValues()) {\n+        CMutableTransaction mtx;\n+        if (!DecodeHexTx(mtx, rawtx.get_str())) {\n+            throw JSONRPCError(RPC_DESERIALIZATION_ERROR,\n+                               \"TX decode failed: \" + rawtx.get_str() + \" Make sure the tx has at least one input.\");\n+        }\n+        txns.emplace_back(MakeTransactionRef(std::move(mtx)));\n+    }\n+\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    CTxMemPool& mempool = EnsureMemPool(node);\n+    CChainState& chainstate = EnsureChainman(node).ActiveChainstate();\n+    const auto package_result = WITH_LOCK(::cs_main, return ProcessNewPackage(chainstate, mempool, txns, /* test_accept */ false));\n+\n+    // First catch any errors.\n+    switch(package_result.m_state.GetResult()) {\n+        case PackageValidationResult::PCKG_RESULT_UNSET: break;\n+        case PackageValidationResult::PCKG_POLICY:\n+        case PackageValidationResult::PCKG_MEMPOOL_ERROR:\n+        {\n+            throw JSONRPCTransactionError(TransactionError::INVALID_PACKAGE,",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 86,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "f09106314119577d5716bb1cb57d7b575c7f4218",
      "in_reply_to_id": 849635219,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Good point, `TransactionError::MEMPOOL_ERROR` is more appropriate here. Switched.",
      "created_at": "2022-04-13T17:37:01Z",
      "updated_at": "2022-04-13T17:37:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r849736260",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849736260"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 752,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849736347",
      "pull_request_review_id": 941331108,
      "id": 849736347,
      "node_id": "PRRC_kwDOABII584ypfKb",
      "diff_hunk": "@@ -669,6 +670,133 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitrawpackage()\n+{\n+    return RPCHelpMan{\"submitrawpackage\",\n+        \"\\nSubmit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only). Experimental, API may be unstable.\\n\"\n+        \"\\nThe package will be validated and accepted to mempool if it passes consensus and mempool policy rules. Throws a JSONRPCError if anything goes wrong.\\n\"\n+        \"\\nWarning: successful submission does not mean the transaction will propagate to other nodes on the network.\\n\",",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 17,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "f09106314119577d5716bb1cb57d7b575c7f4218",
      "in_reply_to_id": 849641801,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Added",
      "created_at": "2022-04-13T17:37:08Z",
      "updated_at": "2022-04-13T17:37:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r849736347",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849736347"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 679,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849737112",
      "pull_request_review_id": 941332173,
      "id": 849737112,
      "node_id": "PRRC_kwDOABII584ypfWY",
      "diff_hunk": "@@ -669,6 +670,133 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitrawpackage()\n+{\n+    return RPCHelpMan{\"submitrawpackage\",\n+        \"\\nSubmit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only). Experimental, API may be unstable.\\n\"\n+        \"\\nThe package will be validated and accepted to mempool if it passes consensus and mempool policy rules. Throws a JSONRPCError if anything goes wrong.\\n\"\n+        \"\\nWarning: successful submission does not mean the transaction will propagate to other nodes on the network.\\n\",\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\\n\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"xxxx\", \"transaction wtxid\", {\n+                        {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n+                        {RPCResult::Type::STR_HEX, \"wtxid\", \"The transaction witness hash in hex\"},",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 32,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "f09106314119577d5716bb1cb57d7b575c7f4218",
      "in_reply_to_id": 849633828,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ok I've renamed it to `other-wtxid` and only use it when communicating that a same-txid-different-witness tx was found. You're right that the wtxid key was redundant otherwise.",
      "created_at": "2022-04-13T17:38:00Z",
      "updated_at": "2022-04-13T17:38:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r849737112",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849737112"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 693,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849737578",
      "pull_request_review_id": 941332799,
      "id": 849737578,
      "node_id": "PRRC_kwDOABII584ypfdq",
      "diff_hunk": "@@ -669,6 +670,133 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitrawpackage()\n+{\n+    return RPCHelpMan{\"submitrawpackage\",\n+        \"\\nSubmit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only). Experimental, API may be unstable.\\n\"\n+        \"\\nThe package will be validated and accepted to mempool if it passes consensus and mempool policy rules. Throws a JSONRPCError if anything goes wrong.\\n\"\n+        \"\\nWarning: successful submission does not mean the transaction will propagate to other nodes on the network.\\n\",\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\\n\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"xxxx\", \"transaction wtxid\", {\n+                        {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n+                        {RPCResult::Type::STR_HEX, \"wtxid\", \"The transaction witness hash in hex\"},\n+                        {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::OBJ, \"fees\", \"Transaction fees (only present if result=\\\"valid\\\")\", {\n+                            {RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee in \" + CURRENCY_UNIT},\n+                        }},\n+                    }}\n+                }},\n+                {RPCResult::Type::STR_AMOUNT, \"package-feerate\", /*optional=*/ true, \"package feerate in \" + CURRENCY_UNIT + \" per KvB. Not always available.\"},\n+                {RPCResult::Type::ARR, \"replaced-transactions\", /*optional=*/ true, \"List of txids of replaced transactions\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"\", \"The transaction id\"},\n+                }},\n+            },\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"testmempoolaccept\", \"[rawtx1, rawtx2]\") +\n+            HelpExampleCli(\"submitrawtransaction\", \"[rawtx1, rawtx2]\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 51,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "f09106314119577d5716bb1cb57d7b575c7f4218",
      "in_reply_to_id": 849164846,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2022-04-13T17:38:36Z",
      "updated_at": "2022-04-13T17:38:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r849737578",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849737578"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 712,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849737685",
      "pull_request_review_id": 941332939,
      "id": 849737685,
      "node_id": "PRRC_kwDOABII584ypffV",
      "diff_hunk": "@@ -682,6 +810,7 @@ void RegisterMempoolRPCCommands(CRPCTable& t)\n         {\"blockchain\", &getmempoolinfo},\n         {\"blockchain\", &getrawmempool},\n         {\"blockchain\", &savemempool},\n+        {\"hidden\", &submitrawpackage,},",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 146,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "f09106314119577d5716bb1cb57d7b575c7f4218",
      "in_reply_to_id": 849163198,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2022-04-13T17:38:43Z",
      "updated_at": "2022-04-13T17:38:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r849737685",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849737685"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 813,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849754180",
      "pull_request_review_id": 941355836,
      "id": 849754180,
      "node_id": "PRRC_kwDOABII584ypjhE",
      "diff_hunk": "@@ -669,6 +670,136 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"\\nSubmit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\\n\"",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 15,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "04bb60029457fb7085041a414b195fd4f0e78d42",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Seems like this PR should just be a modification to sendrawtransaction",
      "created_at": "2022-04-13T17:58:37Z",
      "updated_at": "2022-04-13T17:58:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r849754180",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849754180"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 676,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849760312",
      "pull_request_review_id": 941364590,
      "id": 849760312,
      "node_id": "PRRC_kwDOABII584yplA4",
      "diff_hunk": "@@ -669,6 +670,136 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"\\nSubmit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\\n\"",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 15,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "04bb60029457fb7085041a414b195fd4f0e78d42",
      "in_reply_to_id": 849754180,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "sendrawtransaction is not regtest-only",
      "created_at": "2022-04-13T18:06:27Z",
      "updated_at": "2022-04-13T18:06:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r849760312",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849760312"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 676,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849783825",
      "pull_request_review_id": 941397676,
      "id": 849783825,
      "node_id": "PRRC_kwDOABII584ypqwR",
      "diff_hunk": "@@ -669,6 +670,136 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"\\nSubmit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\\n\"",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 15,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "04bb60029457fb7085041a414b195fd4f0e78d42",
      "in_reply_to_id": 849754180,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Nor should this be, IMO. Certainly not long-term.\r\n\r\nBut regardless, the regtest check can be part of the existing RPC too. (I don't think it'd be the first case of such either IIRC)",
      "created_at": "2022-04-13T18:36:54Z",
      "updated_at": "2022-04-13T18:36:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r849783825",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849783825"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 676,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857330931",
      "pull_request_review_id": 951446797,
      "id": 857330931,
      "node_id": "PRRC_kwDOABII584zGdTz",
      "diff_hunk": "@@ -669,6 +670,136 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"\\nSubmit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\\n\"\n+        \"\\nThe package will be validated and accepted to mempool if it passes consensus and mempool policy rules. Throws a JSONRPCError if anything goes wrong.\\n\"\n+        \"\\nExperimental. API may be unstable. Refer to docs/policy/packages.md for documentation on package policies.\\n\"\n+        \"\\nWarning: successful submission does not mean the transaction will propagate to other nodes on the network.\\n\",\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\\n\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"xxxx\", \"transaction wtxid\", {\n+                        {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n+                        {RPCResult::Type::STR_HEX, \"other-wtxid\", /*optional=*/ true, \"The wtxid of a different transaction with the same txid but different witness found in the mempool. This means the submitted transaction was ignored.\"},\n+                        {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::OBJ, \"fees\", \"Transaction fees (only present if result=\\\"valid\\\")\", {\n+                            {RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee in \" + CURRENCY_UNIT},\n+                        }},\n+                    }}\n+                }},\n+                {RPCResult::Type::STR_AMOUNT, \"package-feerate\", /*optional=*/ true, \"package feerate in \" + CURRENCY_UNIT + \" per KvB. Not always available.\"},\n+                {RPCResult::Type::ARR, \"replaced-transactions\", /*optional=*/ true, \"List of txids of replaced transactions\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"\", \"The transaction id\"},\n+                }},\n+            },\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"testmempoolaccept\", \"[rawtx1, rawtx2]\") +\n+            HelpExampleCli(\"submitrawtransaction\", \"[rawtx1, rawtx2]\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+    {",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 52,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "04bb60029457fb7085041a414b195fd4f0e78d42",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n        {\r\n```\r\n\r\nnit: spaces missing. I know it is my fault for missing them when I created this file (Is it too late to change now :sweat_smile: ?), but I think new code should use spaces, otherwise it is weird, see also https://github.com/bitcoin/bitcoin/pull/24408#discussion_r844024462",
      "created_at": "2022-04-25T07:28:37Z",
      "updated_at": "2022-04-25T07:30:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r857330931",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857330931"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 713,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857331391",
      "pull_request_review_id": 951446797,
      "id": 857331391,
      "node_id": "PRRC_kwDOABII584zGda_",
      "diff_hunk": "@@ -669,6 +670,136 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"\\nSubmit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\\n\"",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 15,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "04bb60029457fb7085041a414b195fd4f0e78d42",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n        \"Submit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\\n\"\r\n```\r\n\r\nI think the one in the beginning is not needed.",
      "created_at": "2022-04-25T07:29:16Z",
      "updated_at": "2022-06-16T15:30:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r857331391",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857331391"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 676,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884715627",
      "pull_request_review_id": 989192562,
      "id": 884715627,
      "node_id": "PRRC_kwDOABII5840u7Br",
      "diff_hunk": "@@ -669,6 +670,136 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"\\nSubmit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\\n\"\n+        \"\\nThe package will be validated and accepted to mempool if it passes consensus and mempool policy rules. Throws a JSONRPCError if anything goes wrong.\\n\"",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 16,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "04bb60029457fb7085041a414b195fd4f0e78d42",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "\"anything goes wrong\" is  quite vague. Does it mean \"if the transaction or package is rejected for consensus or policy reasons\"?",
      "created_at": "2022-05-30T11:15:02Z",
      "updated_at": "2022-05-30T11:50:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r884715627",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884715627"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 677,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884718053",
      "pull_request_review_id": 989192562,
      "id": 884718053,
      "node_id": "PRRC_kwDOABII5840u7nl",
      "diff_hunk": "@@ -669,6 +670,136 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"\\nSubmit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\\n\"\n+        \"\\nThe package will be validated and accepted to mempool if it passes consensus and mempool policy rules. Throws a JSONRPCError if anything goes wrong.\\n\"\n+        \"\\nExperimental. API may be unstable. Refer to docs/policy/packages.md for documentation on package policies.\\n\"",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 17,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "04bb60029457fb7085041a414b195fd4f0e78d42",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n        \"\\nThis RPC is experimental and the interface may be unstable. Refer to doc/policy/packages.md for documentation on package policies.\\n\"\r\n```",
      "created_at": "2022-05-30T11:18:13Z",
      "updated_at": "2022-05-30T11:50:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r884718053",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884718053"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 678,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884727429",
      "pull_request_review_id": 989192562,
      "id": 884727429,
      "node_id": "PRRC_kwDOABII5840u96F",
      "diff_hunk": "@@ -669,6 +670,136 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"\\nSubmit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\\n\"\n+        \"\\nThe package will be validated and accepted to mempool if it passes consensus and mempool policy rules. Throws a JSONRPCError if anything goes wrong.\\n\"\n+        \"\\nExperimental. API may be unstable. Refer to docs/policy/packages.md for documentation on package policies.\\n\"\n+        \"\\nWarning: successful submission does not mean the transaction will propagate to other nodes on the network.\\n\",\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\\n\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"xxxx\", \"transaction wtxid\", {\n+                        {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n+                        {RPCResult::Type::STR_HEX, \"other-wtxid\", /*optional=*/ true, \"The wtxid of a different transaction with the same txid but different witness found in the mempool. This means the submitted transaction was ignored.\"},\n+                        {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::OBJ, \"fees\", \"Transaction fees (only present if result=\\\"valid\\\")\", {\n+                            {RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee in \" + CURRENCY_UNIT},\n+                        }},\n+                    }}\n+                }},\n+                {RPCResult::Type::STR_AMOUNT, \"package-feerate\", /*optional=*/ true, \"package feerate in \" + CURRENCY_UNIT + \" per KvB. Not always available.\"},\n+                {RPCResult::Type::ARR, \"replaced-transactions\", /*optional=*/ true, \"List of txids of replaced transactions\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"\", \"The transaction id\"},\n+                }},\n+            },\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"testmempoolaccept\", \"[rawtx1, rawtx2]\") +\n+            HelpExampleCli(\"submitrawtransaction\", \"[rawtx1, rawtx2]\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+    {\n+    if (!Params().IsMockableChain()) {\n+        throw std::runtime_error(\"submitpackage is for regression testing (-regtest mode) only\");\n+    }\n+    RPCTypeCheck(request.params, {\n+        UniValue::VARR,\n+    });\n+    const UniValue raw_transactions = request.params[0].get_array();\n+    if (raw_transactions.size() < 1 || raw_transactions.size() > MAX_PACKAGE_COUNT) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER,\n+                           \"Array must contain between 1 and \" + ToString(MAX_PACKAGE_COUNT) + \" transactions.\");\n+    }\n+\n+    std::vector<CTransactionRef> txns;\n+    txns.reserve(raw_transactions.size());\n+    for (const auto& rawtx : raw_transactions.getValues()) {\n+        CMutableTransaction mtx;\n+        if (!DecodeHexTx(mtx, rawtx.get_str())) {\n+            throw JSONRPCError(RPC_DESERIALIZATION_ERROR,\n+                               \"TX decode failed: \" + rawtx.get_str() + \" Make sure the tx has at least one input.\");\n+        }\n+        txns.emplace_back(MakeTransactionRef(std::move(mtx)));\n+    }\n+\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    CTxMemPool& mempool = EnsureMemPool(node);\n+    CChainState& chainstate = EnsureChainman(node).ActiveChainstate();\n+    const auto package_result = WITH_LOCK(::cs_main, return ProcessNewPackage(chainstate, mempool, txns, /* test_accept */ false));",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 79,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "04bb60029457fb7085041a414b195fd4f0e78d42",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n    const auto package_result = WITH_LOCK(::cs_main, return ProcessNewPackage(chainstate, mempool, txns, /*test_accept=*/false));\r\n```",
      "created_at": "2022-05-30T11:29:31Z",
      "updated_at": "2022-05-30T11:50:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r884727429",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884727429"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 740,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884728899",
      "pull_request_review_id": 989192562,
      "id": 884728899,
      "node_id": "PRRC_kwDOABII5840u-RD",
      "diff_hunk": "@@ -669,6 +670,133 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitrawpackage()\n+{\n+    return RPCHelpMan{\"submitrawpackage\",\n+        \"\\nSubmit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only). Experimental, API may be unstable.\\n\"\n+        \"\\nThe package will be validated and accepted to mempool if it passes consensus and mempool policy rules. Throws a JSONRPCError if anything goes wrong.\\n\"\n+        \"\\nWarning: successful submission does not mean the transaction will propagate to other nodes on the network.\\n\",\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\\n\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"xxxx\", \"transaction wtxid\", {\n+                        {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n+                        {RPCResult::Type::STR_HEX, \"wtxid\", \"The transaction witness hash in hex\"},\n+                        {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::OBJ, \"fees\", \"Transaction fees (only present if result=\\\"valid\\\")\", {\n+                            {RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee in \" + CURRENCY_UNIT},\n+                        }},\n+                    }}\n+                }},\n+                {RPCResult::Type::STR_AMOUNT, \"package-feerate\", /*optional=*/ true, \"package feerate in \" + CURRENCY_UNIT + \" per KvB. Not always available.\"},\n+                {RPCResult::Type::ARR, \"replaced-transactions\", /*optional=*/ true, \"List of txids of replaced transactions\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"\", \"The transaction id\"},\n+                }},\n+            },\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"testmempoolaccept\", \"[rawtx1, rawtx2]\") +\n+            HelpExampleCli(\"submitrawtransaction\", \"[rawtx1, rawtx2]\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    if (!Params().IsMockableChain()) {\n+        throw std::runtime_error(\"submitrawpackage is for regression testing (-regtest mode) only\");\n+    }\n+    RPCTypeCheck(request.params, {\n+        UniValue::VARR,\n+    });\n+    const UniValue raw_transactions = request.params[0].get_array();\n+    if (raw_transactions.size() < 1 || raw_transactions.size() > MAX_PACKAGE_COUNT) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER,\n+                           \"Array must contain between 1 and \" + ToString(MAX_PACKAGE_COUNT) + \" transactions.\");\n+    }\n+\n+    std::vector<CTransactionRef> txns;\n+    txns.reserve(raw_transactions.size());\n+    for (const auto& rawtx : raw_transactions.getValues()) {\n+        CMutableTransaction mtx;\n+        if (!DecodeHexTx(mtx, rawtx.get_str())) {\n+            throw JSONRPCError(RPC_DESERIALIZATION_ERROR,\n+                               \"TX decode failed: \" + rawtx.get_str() + \" Make sure the tx has at least one input.\");\n+        }\n+        txns.emplace_back(MakeTransactionRef(std::move(mtx)));\n+    }\n+\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    CTxMemPool& mempool = EnsureMemPool(node);\n+    CChainState& chainstate = EnsureChainman(node).ActiveChainstate();\n+    const auto package_result = WITH_LOCK(::cs_main, return ProcessNewPackage(chainstate, mempool, txns, /* test_accept */ false));\n+\n+    // First catch any errors.\n+    switch(package_result.m_state.GetResult()) {\n+        case PackageValidationResult::PCKG_RESULT_UNSET: break;\n+        case PackageValidationResult::PCKG_POLICY:\n+        case PackageValidationResult::PCKG_MEMPOOL_ERROR:\n+        {\n+            throw JSONRPCTransactionError(TransactionError::INVALID_PACKAGE,",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 86,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "f09106314119577d5716bb1cb57d7b575c7f4218",
      "in_reply_to_id": 849635219,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think you've changed the wrong line. Should this be `TransactionError::MEMPOOL_ERROR` and the case above be `TransactionError::INVALID_PACKAGE`?",
      "created_at": "2022-05-30T11:31:27Z",
      "updated_at": "2022-05-30T11:50:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r884728899",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884728899"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 752,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884730198",
      "pull_request_review_id": 989192562,
      "id": 884730198,
      "node_id": "PRRC_kwDOABII5840u-lW",
      "diff_hunk": "@@ -669,6 +670,136 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"\\nSubmit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\\n\"\n+        \"\\nThe package will be validated and accepted to mempool if it passes consensus and mempool policy rules. Throws a JSONRPCError if anything goes wrong.\\n\"\n+        \"\\nExperimental. API may be unstable. Refer to docs/policy/packages.md for documentation on package policies.\\n\"\n+        \"\\nWarning: successful submission does not mean the transaction will propagate to other nodes on the network.\\n\",\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\\n\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"xxxx\", \"transaction wtxid\", {\n+                        {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n+                        {RPCResult::Type::STR_HEX, \"other-wtxid\", /*optional=*/ true, \"The wtxid of a different transaction with the same txid but different witness found in the mempool. This means the submitted transaction was ignored.\"},\n+                        {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::OBJ, \"fees\", \"Transaction fees (only present if result=\\\"valid\\\")\", {\n+                            {RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee in \" + CURRENCY_UNIT},\n+                        }},\n+                    }}\n+                }},\n+                {RPCResult::Type::STR_AMOUNT, \"package-feerate\", /*optional=*/ true, \"package feerate in \" + CURRENCY_UNIT + \" per KvB. Not always available.\"},\n+                {RPCResult::Type::ARR, \"replaced-transactions\", /*optional=*/ true, \"List of txids of replaced transactions\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"\", \"The transaction id\"},\n+                }},\n+            },\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"testmempoolaccept\", \"[rawtx1, rawtx2]\") +\n+            HelpExampleCli(\"submitrawtransaction\", \"[rawtx1, rawtx2]\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+    {\n+    if (!Params().IsMockableChain()) {\n+        throw std::runtime_error(\"submitpackage is for regression testing (-regtest mode) only\");\n+    }\n+    RPCTypeCheck(request.params, {\n+        UniValue::VARR,\n+    });\n+    const UniValue raw_transactions = request.params[0].get_array();\n+    if (raw_transactions.size() < 1 || raw_transactions.size() > MAX_PACKAGE_COUNT) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER,\n+                           \"Array must contain between 1 and \" + ToString(MAX_PACKAGE_COUNT) + \" transactions.\");\n+    }\n+\n+    std::vector<CTransactionRef> txns;\n+    txns.reserve(raw_transactions.size());\n+    for (const auto& rawtx : raw_transactions.getValues()) {\n+        CMutableTransaction mtx;\n+        if (!DecodeHexTx(mtx, rawtx.get_str())) {\n+            throw JSONRPCError(RPC_DESERIALIZATION_ERROR,\n+                               \"TX decode failed: \" + rawtx.get_str() + \" Make sure the tx has at least one input.\");\n+        }\n+        txns.emplace_back(MakeTransactionRef(std::move(mtx)));\n+    }\n+\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    CTxMemPool& mempool = EnsureMemPool(node);\n+    CChainState& chainstate = EnsureChainman(node).ActiveChainstate();\n+    const auto package_result = WITH_LOCK(::cs_main, return ProcessNewPackage(chainstate, mempool, txns, /* test_accept */ false));\n+\n+    // First catch any errors.\n+    switch(package_result.m_state.GetResult()) {\n+        case PackageValidationResult::PCKG_RESULT_UNSET: break;\n+        case PackageValidationResult::PCKG_POLICY:\n+        {\n+            throw JSONRPCTransactionError(TransactionError::MEMPOOL_ERROR,\n+                package_result.m_state.GetRejectReason());\n+        }\n+        case PackageValidationResult::PCKG_MEMPOOL_ERROR:\n+        {\n+            throw JSONRPCTransactionError(TransactionError::INVALID_PACKAGE,\n+                package_result.m_state.GetRejectReason());\n+        }\n+        case PackageValidationResult::PCKG_TX:\n+        {\n+            for (const auto& tx : txns) {\n+                auto it = package_result.m_tx_results.find(tx->GetWitnessHash());\n+                if (it != package_result.m_tx_results.end() && it->second.m_state.IsInvalid()) {\n+                    throw JSONRPCTransactionError(TransactionError::MEMPOOL_REJECTED,\n+                        strprintf(\"%s failed: %s\", tx->GetHash().ToString(), it->second.m_state.GetRejectReason()));\n+                }\n+            }",
      "path": "src/rpc/mempool.cpp",
      "position": 118,
      "original_position": 102,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "04bb60029457fb7085041a414b195fd4f0e78d42",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Should we either `Assume(false)` here or raise a `JSONRPCTransactionError(TransactionError::MEMPOOL_ERROR)`?  There shouldn't be a `PackageValidationResult::PCKG_TX` without one of the transactions having an invalid status.",
      "created_at": "2022-05-30T11:33:10Z",
      "updated_at": "2022-05-30T11:50:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r884730198",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884730198"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 839,
      "original_line": 839,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884733272",
      "pull_request_review_id": 989192562,
      "id": 884733272,
      "node_id": "PRRC_kwDOABII5840u_VY",
      "diff_hunk": "@@ -669,6 +670,136 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"\\nSubmit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\\n\"\n+        \"\\nThe package will be validated and accepted to mempool if it passes consensus and mempool policy rules. Throws a JSONRPCError if anything goes wrong.\\n\"\n+        \"\\nExperimental. API may be unstable. Refer to docs/policy/packages.md for documentation on package policies.\\n\"\n+        \"\\nWarning: successful submission does not mean the transaction will propagate to other nodes on the network.\\n\",\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\\n\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"xxxx\", \"transaction wtxid\", {\n+                        {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n+                        {RPCResult::Type::STR_HEX, \"other-wtxid\", /*optional=*/ true, \"The wtxid of a different transaction with the same txid but different witness found in the mempool. This means the submitted transaction was ignored.\"},\n+                        {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::OBJ, \"fees\", \"Transaction fees (only present if result=\\\"valid\\\")\", {",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 35,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "04bb60029457fb7085041a414b195fd4f0e78d42",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n                        {RPCResult::Type::OBJ, \"fees\", \"Transaction fees\", {\r\n```\r\n\r\n(result is always valid if this rpc returns)",
      "created_at": "2022-05-30T11:36:52Z",
      "updated_at": "2022-05-30T11:50:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r884733272",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884733272"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 696,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884735992",
      "pull_request_review_id": 989192562,
      "id": 884735992,
      "node_id": "PRRC_kwDOABII5840u__4",
      "diff_hunk": "@@ -306,5 +306,80 @@ def test_rbf(self):\n         }]\n         self.assert_testres_equal(self.independent_txns_hex + [signed_replacement_tx[\"hex\"]], testres_rbf_package)\n \n+    def assert_equal_package_results(self, node, testres_package, submitres_package):\n+        \"\"\"Assert that a successful submitpackage result is consistent with testmempoolaccept\n+        results and getmempoolentry info. Note that the result structs are different and, due to\n+        policy differences between testmempoolaccept and submitpackage (i.e. package feerate),\n+        some information may be different.\n+        \"\"\"\n+        for testres_tx in testres_package:\n+            # Grab this result from the submitres\n+            submitres_tx = submitres_package[\"tx-results\"][testres_tx[\"wtxid\"]]\n+            assert_equal(submitres_tx[\"txid\"], testres_tx[\"txid\"])\n+            if \"allowed\" in testres_tx and testres_tx[\"allowed\"]:\n+                assert_equal(submitres_tx[\"vsize\"], testres_tx[\"vsize\"])\n+                assert_equal(submitres_tx[\"fees\"][\"base\"], testres_tx[\"fees\"][\"base\"])\n+            entry_info = node.getmempoolentry(submitres_tx[\"txid\"])\n+            assert_equal(submitres_tx[\"vsize\"], entry_info[\"vsize\"])\n+            assert_equal(submitres_tx[\"fees\"][\"base\"], entry_info[\"fees\"][\"base\"])\n+\n+    def test_submit_child_with_parents(self, num_parents):\n+        node = self.nodes[0]\n+        # Test a package with num_parents parents and 1 child transaction.\n+        package_hex = []\n+        package_txns = []\n+        values = []\n+        scripts = []\n+        for _ in range(num_parents):\n+            parent_coin = self.coins.pop()\n+            value = parent_coin[\"amount\"]\n+            (tx, txhex, value, spk) = make_chain(node, self.address, self.privkeys, parent_coin[\"txid\"], value)\n+            package_hex.append(txhex)\n+            package_txns.append(tx)\n+            values.append(value)\n+            scripts.append(spk)\n+        child_hex = create_child_with_parents(node, self.address, self.privkeys, package_txns, values, scripts)\n+        package_hex.append(child_hex)\n+        package_txns.append(tx_from_hex(child_hex))\n+\n+        testres_package = node.testmempoolaccept(rawtxs=package_hex)\n+        submitres_package = node.submitpackage(package=package_hex)\n+\n+        # Check that each result is present, with the correct size and fees\n+        for i in range(num_parents + 1):\n+            tx = package_txns[i]\n+            wtxid = tx.getwtxid()\n+            assert wtxid in submitres_package[\"tx-results\"]\n+            tx_result = submitres_package[\"tx-results\"][wtxid]\n+            expected_fee = Decimal(\"0.0001\")\n+            assert_equal(tx_result, {\n+                \"txid\": tx.rehash(),\n+                \"vsize\": tx.get_vsize(),\n+                \"fees\": {\n+                    \"base\": expected_fee,\n+                }\n+            })\n+\n+        # submitpackage result should be consistent with testmempoolaccept and getmempoolentry\n+        self.assert_equal_package_results(node, testres_package, submitres_package)\n+\n+        # With no deduplications, the package feerate is just the ancestor feerate of the child.\n+        child_txid = testres_package[-1][\"txid\"]\n+        if \"package-feerate\" in submitres_package:\n+            assert_equal(submitres_package[\"package-feerate\"], node.getmempoolentry(child_txid)[\"fees\"][\"ancestor\"])\n+\n+    def test_submitpackage(self):\n+        node = self.nodes[0]\n+\n+        self.log.info(\"Submitrawpackage valid packages with 1 child and some number of parents\")\n+        for num_parents in [1, 2, 10, 24]:\n+            self.test_submit_child_with_parents(num_parents)\n+\n+        self.log.info(\"Submitrawpackage only allows packages of 1 child with its parents\")\n+        # Chain of 3 transactions has too many generations\n+        (chain_hex, _) = create_raw_chain(node, self.coins.pop(), self.address, self.privkeys, 3)",
      "path": "test/functional/rpc_packages.py",
      "position": null,
      "original_position": 111,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "04bb60029457fb7085041a414b195fd4f0e78d42",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "No need for this to be a tuple:\r\n\r\n```suggestion\r\n        chain_hex, _ = create_raw_chain(node, self.coins.pop(), self.address, self.privkeys, 3)\r\n```",
      "created_at": "2022-05-30T11:40:12Z",
      "updated_at": "2022-05-30T11:50:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r884735992",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884735992"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 380,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884741649",
      "pull_request_review_id": 989192562,
      "id": 884741649,
      "node_id": "PRRC_kwDOABII5840vBYR",
      "diff_hunk": "@@ -306,5 +306,80 @@ def test_rbf(self):\n         }]\n         self.assert_testres_equal(self.independent_txns_hex + [signed_replacement_tx[\"hex\"]], testres_rbf_package)\n \n+    def assert_equal_package_results(self, node, testres_package, submitres_package):\n+        \"\"\"Assert that a successful submitpackage result is consistent with testmempoolaccept\n+        results and getmempoolentry info. Note that the result structs are different and, due to\n+        policy differences between testmempoolaccept and submitpackage (i.e. package feerate),\n+        some information may be different.\n+        \"\"\"\n+        for testres_tx in testres_package:\n+            # Grab this result from the submitres\n+            submitres_tx = submitres_package[\"tx-results\"][testres_tx[\"wtxid\"]]\n+            assert_equal(submitres_tx[\"txid\"], testres_tx[\"txid\"])\n+            if \"allowed\" in testres_tx and testres_tx[\"allowed\"]:\n+                assert_equal(submitres_tx[\"vsize\"], testres_tx[\"vsize\"])\n+                assert_equal(submitres_tx[\"fees\"][\"base\"], testres_tx[\"fees\"][\"base\"])\n+            entry_info = node.getmempoolentry(submitres_tx[\"txid\"])\n+            assert_equal(submitres_tx[\"vsize\"], entry_info[\"vsize\"])\n+            assert_equal(submitres_tx[\"fees\"][\"base\"], entry_info[\"fees\"][\"base\"])\n+\n+    def test_submit_child_with_parents(self, num_parents):\n+        node = self.nodes[0]\n+        # Test a package with num_parents parents and 1 child transaction.\n+        package_hex = []\n+        package_txns = []\n+        values = []\n+        scripts = []\n+        for _ in range(num_parents):\n+            parent_coin = self.coins.pop()\n+            value = parent_coin[\"amount\"]\n+            (tx, txhex, value, spk) = make_chain(node, self.address, self.privkeys, parent_coin[\"txid\"], value)\n+            package_hex.append(txhex)\n+            package_txns.append(tx)\n+            values.append(value)\n+            scripts.append(spk)\n+        child_hex = create_child_with_parents(node, self.address, self.privkeys, package_txns, values, scripts)\n+        package_hex.append(child_hex)\n+        package_txns.append(tx_from_hex(child_hex))\n+\n+        testres_package = node.testmempoolaccept(rawtxs=package_hex)\n+        submitres_package = node.submitpackage(package=package_hex)",
      "path": "test/functional/rpc_packages.py",
      "position": null,
      "original_position": 77,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "04bb60029457fb7085041a414b195fd4f0e78d42",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "These names seems a bit confusing to me. What do you think about `testmempoolaccept_result` and `submitpackage_result`?",
      "created_at": "2022-05-30T11:46:28Z",
      "updated_at": "2022-05-30T11:50:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r884741649",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884741649"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": 345,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 346,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884741796",
      "pull_request_review_id": 989192562,
      "id": 884741796,
      "node_id": "PRRC_kwDOABII5840vBak",
      "diff_hunk": "@@ -306,5 +306,80 @@ def test_rbf(self):\n         }]\n         self.assert_testres_equal(self.independent_txns_hex + [signed_replacement_tx[\"hex\"]], testres_rbf_package)\n \n+    def assert_equal_package_results(self, node, testres_package, submitres_package):\n+        \"\"\"Assert that a successful submitpackage result is consistent with testmempoolaccept\n+        results and getmempoolentry info. Note that the result structs are different and, due to\n+        policy differences between testmempoolaccept and submitpackage (i.e. package feerate),\n+        some information may be different.\n+        \"\"\"\n+        for testres_tx in testres_package:\n+            # Grab this result from the submitres\n+            submitres_tx = submitres_package[\"tx-results\"][testres_tx[\"wtxid\"]]\n+            assert_equal(submitres_tx[\"txid\"], testres_tx[\"txid\"])\n+            if \"allowed\" in testres_tx and testres_tx[\"allowed\"]:",
      "path": "test/functional/rpc_packages.py",
      "position": 64,
      "original_position": 50,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "04bb60029457fb7085041a414b195fd4f0e78d42",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Is this always true?",
      "created_at": "2022-05-30T11:46:38Z",
      "updated_at": "2022-05-30T11:50:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r884741796",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884741796"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 323,
      "original_line": 323,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884741999",
      "pull_request_review_id": 989192562,
      "id": 884741999,
      "node_id": "PRRC_kwDOABII5840vBdv",
      "diff_hunk": "@@ -306,5 +306,80 @@ def test_rbf(self):\n         }]\n         self.assert_testres_equal(self.independent_txns_hex + [signed_replacement_tx[\"hex\"]], testres_rbf_package)\n \n+    def assert_equal_package_results(self, node, testres_package, submitres_package):\n+        \"\"\"Assert that a successful submitpackage result is consistent with testmempoolaccept\n+        results and getmempoolentry info. Note that the result structs are different and, due to\n+        policy differences between testmempoolaccept and submitpackage (i.e. package feerate),\n+        some information may be different.\n+        \"\"\"\n+        for testres_tx in testres_package:\n+            # Grab this result from the submitres\n+            submitres_tx = submitres_package[\"tx-results\"][testres_tx[\"wtxid\"]]\n+            assert_equal(submitres_tx[\"txid\"], testres_tx[\"txid\"])\n+            if \"allowed\" in testres_tx and testres_tx[\"allowed\"]:\n+                assert_equal(submitres_tx[\"vsize\"], testres_tx[\"vsize\"])\n+                assert_equal(submitres_tx[\"fees\"][\"base\"], testres_tx[\"fees\"][\"base\"])\n+            entry_info = node.getmempoolentry(submitres_tx[\"txid\"])\n+            assert_equal(submitres_tx[\"vsize\"], entry_info[\"vsize\"])\n+            assert_equal(submitres_tx[\"fees\"][\"base\"], entry_info[\"fees\"][\"base\"])\n+\n+    def test_submit_child_with_parents(self, num_parents):\n+        node = self.nodes[0]\n+        # Test a package with num_parents parents and 1 child transaction.\n+        package_hex = []\n+        package_txns = []\n+        values = []\n+        scripts = []\n+        for _ in range(num_parents):\n+            parent_coin = self.coins.pop()\n+            value = parent_coin[\"amount\"]\n+            (tx, txhex, value, spk) = make_chain(node, self.address, self.privkeys, parent_coin[\"txid\"], value)\n+            package_hex.append(txhex)\n+            package_txns.append(tx)\n+            values.append(value)\n+            scripts.append(spk)\n+        child_hex = create_child_with_parents(node, self.address, self.privkeys, package_txns, values, scripts)\n+        package_hex.append(child_hex)\n+        package_txns.append(tx_from_hex(child_hex))\n+\n+        testres_package = node.testmempoolaccept(rawtxs=package_hex)\n+        submitres_package = node.submitpackage(package=package_hex)\n+\n+        # Check that each result is present, with the correct size and fees\n+        for i in range(num_parents + 1):\n+            tx = package_txns[i]\n+            wtxid = tx.getwtxid()\n+            assert wtxid in submitres_package[\"tx-results\"]\n+            tx_result = submitres_package[\"tx-results\"][wtxid]\n+            expected_fee = Decimal(\"0.0001\")\n+            assert_equal(tx_result, {\n+                \"txid\": tx.rehash(),\n+                \"vsize\": tx.get_vsize(),\n+                \"fees\": {\n+                    \"base\": expected_fee,\n+                }\n+            })\n+\n+        # submitpackage result should be consistent with testmempoolaccept and getmempoolentry\n+        self.assert_equal_package_results(node, testres_package, submitres_package)\n+\n+        # With no deduplications, the package feerate is just the ancestor feerate of the child.\n+        child_txid = testres_package[-1][\"txid\"]\n+        if \"package-feerate\" in submitres_package:",
      "path": "test/functional/rpc_packages.py",
      "position": null,
      "original_position": 99,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "04bb60029457fb7085041a414b195fd4f0e78d42",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Is this always true?",
      "created_at": "2022-05-30T11:46:52Z",
      "updated_at": "2022-05-30T11:50:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r884741999",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884741999"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 368,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885099262",
      "pull_request_review_id": 989705610,
      "id": 885099262,
      "node_id": "PRRC_kwDOABII5840wYr-",
      "diff_hunk": "@@ -669,6 +670,136 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"\\nSubmit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\\n\"",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 15,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "04bb60029457fb7085041a414b195fd4f0e78d42",
      "in_reply_to_id": 857331391,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Removed",
      "created_at": "2022-05-30T22:39:44Z",
      "updated_at": "2022-05-30T22:43:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r885099262",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885099262"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 676,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885099327",
      "pull_request_review_id": 989705610,
      "id": 885099327,
      "node_id": "PRRC_kwDOABII5840wYs_",
      "diff_hunk": "@@ -669,6 +670,136 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"\\nSubmit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\\n\"\n+        \"\\nThe package will be validated and accepted to mempool if it passes consensus and mempool policy rules. Throws a JSONRPCError if anything goes wrong.\\n\"",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 16,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "04bb60029457fb7085041a414b195fd4f0e78d42",
      "in_reply_to_id": 884715627,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Hopefully now clearer",
      "created_at": "2022-05-30T22:40:06Z",
      "updated_at": "2022-05-30T22:43:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r885099327",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885099327"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 677,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885099359",
      "pull_request_review_id": 989705610,
      "id": 885099359,
      "node_id": "PRRC_kwDOABII5840wYtf",
      "diff_hunk": "@@ -669,6 +670,136 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"\\nSubmit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\\n\"\n+        \"\\nThe package will be validated and accepted to mempool if it passes consensus and mempool policy rules. Throws a JSONRPCError if anything goes wrong.\\n\"\n+        \"\\nExperimental. API may be unstable. Refer to docs/policy/packages.md for documentation on package policies.\\n\"",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 17,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "04bb60029457fb7085041a414b195fd4f0e78d42",
      "in_reply_to_id": 884718053,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Thanks, taken",
      "created_at": "2022-05-30T22:40:15Z",
      "updated_at": "2022-05-30T22:43:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r885099359",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885099359"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 678,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885099406",
      "pull_request_review_id": 989705610,
      "id": 885099406,
      "node_id": "PRRC_kwDOABII5840wYuO",
      "diff_hunk": "@@ -669,6 +670,136 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"\\nSubmit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\\n\"\n+        \"\\nThe package will be validated and accepted to mempool if it passes consensus and mempool policy rules. Throws a JSONRPCError if anything goes wrong.\\n\"\n+        \"\\nExperimental. API may be unstable. Refer to docs/policy/packages.md for documentation on package policies.\\n\"\n+        \"\\nWarning: successful submission does not mean the transaction will propagate to other nodes on the network.\\n\",\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\\n\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"xxxx\", \"transaction wtxid\", {\n+                        {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n+                        {RPCResult::Type::STR_HEX, \"other-wtxid\", /*optional=*/ true, \"The wtxid of a different transaction with the same txid but different witness found in the mempool. This means the submitted transaction was ignored.\"},\n+                        {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::OBJ, \"fees\", \"Transaction fees (only present if result=\\\"valid\\\")\", {",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 35,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "04bb60029457fb7085041a414b195fd4f0e78d42",
      "in_reply_to_id": 884733272,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ah, leftover from previous iteration, thanks for catching",
      "created_at": "2022-05-30T22:40:34Z",
      "updated_at": "2022-05-30T22:43:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r885099406",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885099406"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 696,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885099507",
      "pull_request_review_id": 989705610,
      "id": 885099507,
      "node_id": "PRRC_kwDOABII5840wYvz",
      "diff_hunk": "@@ -669,6 +670,136 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"\\nSubmit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\\n\"\n+        \"\\nThe package will be validated and accepted to mempool if it passes consensus and mempool policy rules. Throws a JSONRPCError if anything goes wrong.\\n\"\n+        \"\\nExperimental. API may be unstable. Refer to docs/policy/packages.md for documentation on package policies.\\n\"\n+        \"\\nWarning: successful submission does not mean the transaction will propagate to other nodes on the network.\\n\",\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\\n\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"xxxx\", \"transaction wtxid\", {\n+                        {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n+                        {RPCResult::Type::STR_HEX, \"other-wtxid\", /*optional=*/ true, \"The wtxid of a different transaction with the same txid but different witness found in the mempool. This means the submitted transaction was ignored.\"},\n+                        {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::OBJ, \"fees\", \"Transaction fees (only present if result=\\\"valid\\\")\", {\n+                            {RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee in \" + CURRENCY_UNIT},\n+                        }},\n+                    }}\n+                }},\n+                {RPCResult::Type::STR_AMOUNT, \"package-feerate\", /*optional=*/ true, \"package feerate in \" + CURRENCY_UNIT + \" per KvB. Not always available.\"},\n+                {RPCResult::Type::ARR, \"replaced-transactions\", /*optional=*/ true, \"List of txids of replaced transactions\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"\", \"The transaction id\"},\n+                }},\n+            },\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"testmempoolaccept\", \"[rawtx1, rawtx2]\") +\n+            HelpExampleCli(\"submitrawtransaction\", \"[rawtx1, rawtx2]\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+    {",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 52,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "04bb60029457fb7085041a414b195fd4f0e78d42",
      "in_reply_to_id": 857330931,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I assume you meant to indent all of it? Did that in the last push.",
      "created_at": "2022-05-30T22:41:05Z",
      "updated_at": "2022-05-30T22:43:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r885099507",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885099507"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 713,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885099546",
      "pull_request_review_id": 989705610,
      "id": 885099546,
      "node_id": "PRRC_kwDOABII5840wYwa",
      "diff_hunk": "@@ -669,6 +670,136 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"\\nSubmit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\\n\"\n+        \"\\nThe package will be validated and accepted to mempool if it passes consensus and mempool policy rules. Throws a JSONRPCError if anything goes wrong.\\n\"\n+        \"\\nExperimental. API may be unstable. Refer to docs/policy/packages.md for documentation on package policies.\\n\"\n+        \"\\nWarning: successful submission does not mean the transaction will propagate to other nodes on the network.\\n\",\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\\n\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"xxxx\", \"transaction wtxid\", {\n+                        {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n+                        {RPCResult::Type::STR_HEX, \"other-wtxid\", /*optional=*/ true, \"The wtxid of a different transaction with the same txid but different witness found in the mempool. This means the submitted transaction was ignored.\"},\n+                        {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::OBJ, \"fees\", \"Transaction fees (only present if result=\\\"valid\\\")\", {\n+                            {RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee in \" + CURRENCY_UNIT},\n+                        }},\n+                    }}\n+                }},\n+                {RPCResult::Type::STR_AMOUNT, \"package-feerate\", /*optional=*/ true, \"package feerate in \" + CURRENCY_UNIT + \" per KvB. Not always available.\"},\n+                {RPCResult::Type::ARR, \"replaced-transactions\", /*optional=*/ true, \"List of txids of replaced transactions\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"\", \"The transaction id\"},\n+                }},\n+            },\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"testmempoolaccept\", \"[rawtx1, rawtx2]\") +\n+            HelpExampleCli(\"submitrawtransaction\", \"[rawtx1, rawtx2]\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+    {\n+    if (!Params().IsMockableChain()) {\n+        throw std::runtime_error(\"submitpackage is for regression testing (-regtest mode) only\");\n+    }\n+    RPCTypeCheck(request.params, {\n+        UniValue::VARR,\n+    });\n+    const UniValue raw_transactions = request.params[0].get_array();\n+    if (raw_transactions.size() < 1 || raw_transactions.size() > MAX_PACKAGE_COUNT) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER,\n+                           \"Array must contain between 1 and \" + ToString(MAX_PACKAGE_COUNT) + \" transactions.\");\n+    }\n+\n+    std::vector<CTransactionRef> txns;\n+    txns.reserve(raw_transactions.size());\n+    for (const auto& rawtx : raw_transactions.getValues()) {\n+        CMutableTransaction mtx;\n+        if (!DecodeHexTx(mtx, rawtx.get_str())) {\n+            throw JSONRPCError(RPC_DESERIALIZATION_ERROR,\n+                               \"TX decode failed: \" + rawtx.get_str() + \" Make sure the tx has at least one input.\");\n+        }\n+        txns.emplace_back(MakeTransactionRef(std::move(mtx)));\n+    }\n+\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    CTxMemPool& mempool = EnsureMemPool(node);\n+    CChainState& chainstate = EnsureChainman(node).ActiveChainstate();\n+    const auto package_result = WITH_LOCK(::cs_main, return ProcessNewPackage(chainstate, mempool, txns, /* test_accept */ false));",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 79,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "04bb60029457fb7085041a414b195fd4f0e78d42",
      "in_reply_to_id": 884727429,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2022-05-30T22:41:18Z",
      "updated_at": "2022-05-30T22:43:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r885099546",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885099546"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 740,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885099581",
      "pull_request_review_id": 989705610,
      "id": 885099581,
      "node_id": "PRRC_kwDOABII5840wYw9",
      "diff_hunk": "@@ -669,6 +670,133 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitrawpackage()\n+{\n+    return RPCHelpMan{\"submitrawpackage\",\n+        \"\\nSubmit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only). Experimental, API may be unstable.\\n\"\n+        \"\\nThe package will be validated and accepted to mempool if it passes consensus and mempool policy rules. Throws a JSONRPCError if anything goes wrong.\\n\"\n+        \"\\nWarning: successful submission does not mean the transaction will propagate to other nodes on the network.\\n\",\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\\n\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"xxxx\", \"transaction wtxid\", {\n+                        {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n+                        {RPCResult::Type::STR_HEX, \"wtxid\", \"The transaction witness hash in hex\"},\n+                        {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::OBJ, \"fees\", \"Transaction fees (only present if result=\\\"valid\\\")\", {\n+                            {RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee in \" + CURRENCY_UNIT},\n+                        }},\n+                    }}\n+                }},\n+                {RPCResult::Type::STR_AMOUNT, \"package-feerate\", /*optional=*/ true, \"package feerate in \" + CURRENCY_UNIT + \" per KvB. Not always available.\"},\n+                {RPCResult::Type::ARR, \"replaced-transactions\", /*optional=*/ true, \"List of txids of replaced transactions\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"\", \"The transaction id\"},\n+                }},\n+            },\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"testmempoolaccept\", \"[rawtx1, rawtx2]\") +\n+            HelpExampleCli(\"submitrawtransaction\", \"[rawtx1, rawtx2]\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    if (!Params().IsMockableChain()) {\n+        throw std::runtime_error(\"submitrawpackage is for regression testing (-regtest mode) only\");\n+    }\n+    RPCTypeCheck(request.params, {\n+        UniValue::VARR,\n+    });\n+    const UniValue raw_transactions = request.params[0].get_array();\n+    if (raw_transactions.size() < 1 || raw_transactions.size() > MAX_PACKAGE_COUNT) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER,\n+                           \"Array must contain between 1 and \" + ToString(MAX_PACKAGE_COUNT) + \" transactions.\");\n+    }\n+\n+    std::vector<CTransactionRef> txns;\n+    txns.reserve(raw_transactions.size());\n+    for (const auto& rawtx : raw_transactions.getValues()) {\n+        CMutableTransaction mtx;\n+        if (!DecodeHexTx(mtx, rawtx.get_str())) {\n+            throw JSONRPCError(RPC_DESERIALIZATION_ERROR,\n+                               \"TX decode failed: \" + rawtx.get_str() + \" Make sure the tx has at least one input.\");\n+        }\n+        txns.emplace_back(MakeTransactionRef(std::move(mtx)));\n+    }\n+\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    CTxMemPool& mempool = EnsureMemPool(node);\n+    CChainState& chainstate = EnsureChainman(node).ActiveChainstate();\n+    const auto package_result = WITH_LOCK(::cs_main, return ProcessNewPackage(chainstate, mempool, txns, /* test_accept */ false));\n+\n+    // First catch any errors.\n+    switch(package_result.m_state.GetResult()) {\n+        case PackageValidationResult::PCKG_RESULT_UNSET: break;\n+        case PackageValidationResult::PCKG_POLICY:\n+        case PackageValidationResult::PCKG_MEMPOOL_ERROR:\n+        {\n+            throw JSONRPCTransactionError(TransactionError::INVALID_PACKAGE,",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 86,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "f09106314119577d5716bb1cb57d7b575c7f4218",
      "in_reply_to_id": 849635219,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Good catch, swapped",
      "created_at": "2022-05-30T22:41:31Z",
      "updated_at": "2022-05-30T22:43:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r885099581",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885099581"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 752,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885099650",
      "pull_request_review_id": 989705610,
      "id": 885099650,
      "node_id": "PRRC_kwDOABII5840wYyC",
      "diff_hunk": "@@ -669,6 +670,136 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"\\nSubmit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\\n\"\n+        \"\\nThe package will be validated and accepted to mempool if it passes consensus and mempool policy rules. Throws a JSONRPCError if anything goes wrong.\\n\"\n+        \"\\nExperimental. API may be unstable. Refer to docs/policy/packages.md for documentation on package policies.\\n\"\n+        \"\\nWarning: successful submission does not mean the transaction will propagate to other nodes on the network.\\n\",\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\\n\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"xxxx\", \"transaction wtxid\", {\n+                        {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n+                        {RPCResult::Type::STR_HEX, \"other-wtxid\", /*optional=*/ true, \"The wtxid of a different transaction with the same txid but different witness found in the mempool. This means the submitted transaction was ignored.\"},\n+                        {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::OBJ, \"fees\", \"Transaction fees (only present if result=\\\"valid\\\")\", {\n+                            {RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee in \" + CURRENCY_UNIT},\n+                        }},\n+                    }}\n+                }},\n+                {RPCResult::Type::STR_AMOUNT, \"package-feerate\", /*optional=*/ true, \"package feerate in \" + CURRENCY_UNIT + \" per KvB. Not always available.\"},\n+                {RPCResult::Type::ARR, \"replaced-transactions\", /*optional=*/ true, \"List of txids of replaced transactions\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"\", \"The transaction id\"},\n+                }},\n+            },\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"testmempoolaccept\", \"[rawtx1, rawtx2]\") +\n+            HelpExampleCli(\"submitrawtransaction\", \"[rawtx1, rawtx2]\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+    {\n+    if (!Params().IsMockableChain()) {\n+        throw std::runtime_error(\"submitpackage is for regression testing (-regtest mode) only\");\n+    }\n+    RPCTypeCheck(request.params, {\n+        UniValue::VARR,\n+    });\n+    const UniValue raw_transactions = request.params[0].get_array();\n+    if (raw_transactions.size() < 1 || raw_transactions.size() > MAX_PACKAGE_COUNT) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER,\n+                           \"Array must contain between 1 and \" + ToString(MAX_PACKAGE_COUNT) + \" transactions.\");\n+    }\n+\n+    std::vector<CTransactionRef> txns;\n+    txns.reserve(raw_transactions.size());\n+    for (const auto& rawtx : raw_transactions.getValues()) {\n+        CMutableTransaction mtx;\n+        if (!DecodeHexTx(mtx, rawtx.get_str())) {\n+            throw JSONRPCError(RPC_DESERIALIZATION_ERROR,\n+                               \"TX decode failed: \" + rawtx.get_str() + \" Make sure the tx has at least one input.\");\n+        }\n+        txns.emplace_back(MakeTransactionRef(std::move(mtx)));\n+    }\n+\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    CTxMemPool& mempool = EnsureMemPool(node);\n+    CChainState& chainstate = EnsureChainman(node).ActiveChainstate();\n+    const auto package_result = WITH_LOCK(::cs_main, return ProcessNewPackage(chainstate, mempool, txns, /* test_accept */ false));\n+\n+    // First catch any errors.\n+    switch(package_result.m_state.GetResult()) {\n+        case PackageValidationResult::PCKG_RESULT_UNSET: break;\n+        case PackageValidationResult::PCKG_POLICY:\n+        {\n+            throw JSONRPCTransactionError(TransactionError::MEMPOOL_ERROR,\n+                package_result.m_state.GetRejectReason());\n+        }\n+        case PackageValidationResult::PCKG_MEMPOOL_ERROR:\n+        {\n+            throw JSONRPCTransactionError(TransactionError::INVALID_PACKAGE,\n+                package_result.m_state.GetRejectReason());\n+        }\n+        case PackageValidationResult::PCKG_TX:\n+        {\n+            for (const auto& tx : txns) {\n+                auto it = package_result.m_tx_results.find(tx->GetWitnessHash());\n+                if (it != package_result.m_tx_results.end() && it->second.m_state.IsInvalid()) {\n+                    throw JSONRPCTransactionError(TransactionError::MEMPOOL_REJECTED,\n+                        strprintf(\"%s failed: %s\", tx->GetHash().ToString(), it->second.m_state.GetRejectReason()));\n+                }\n+            }",
      "path": "src/rpc/mempool.cpp",
      "position": 118,
      "original_position": 102,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "04bb60029457fb7085041a414b195fd4f0e78d42",
      "in_reply_to_id": 884730198,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Good point, added `NONFATAL_UNREACHABLE()`",
      "created_at": "2022-05-30T22:41:55Z",
      "updated_at": "2022-05-30T22:52:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r885099650",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885099650"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 839,
      "original_line": 839,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885099728",
      "pull_request_review_id": 989705610,
      "id": 885099728,
      "node_id": "PRRC_kwDOABII5840wYzQ",
      "diff_hunk": "@@ -306,5 +306,80 @@ def test_rbf(self):\n         }]\n         self.assert_testres_equal(self.independent_txns_hex + [signed_replacement_tx[\"hex\"]], testres_rbf_package)\n \n+    def assert_equal_package_results(self, node, testres_package, submitres_package):\n+        \"\"\"Assert that a successful submitpackage result is consistent with testmempoolaccept\n+        results and getmempoolentry info. Note that the result structs are different and, due to\n+        policy differences between testmempoolaccept and submitpackage (i.e. package feerate),\n+        some information may be different.\n+        \"\"\"\n+        for testres_tx in testres_package:\n+            # Grab this result from the submitres\n+            submitres_tx = submitres_package[\"tx-results\"][testres_tx[\"wtxid\"]]\n+            assert_equal(submitres_tx[\"txid\"], testres_tx[\"txid\"])\n+            if \"allowed\" in testres_tx and testres_tx[\"allowed\"]:",
      "path": "test/functional/rpc_packages.py",
      "position": 64,
      "original_position": 50,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "04bb60029457fb7085041a414b195fd4f0e78d42",
      "in_reply_to_id": 884741796,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Not if we have partial submissions - added that test case and an explanation comment",
      "created_at": "2022-05-30T22:42:25Z",
      "updated_at": "2022-05-30T22:43:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r885099728",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885099728"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 323,
      "original_line": 323,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885099748",
      "pull_request_review_id": 989705610,
      "id": 885099748,
      "node_id": "PRRC_kwDOABII5840wYzk",
      "diff_hunk": "@@ -306,5 +306,80 @@ def test_rbf(self):\n         }]\n         self.assert_testres_equal(self.independent_txns_hex + [signed_replacement_tx[\"hex\"]], testres_rbf_package)\n \n+    def assert_equal_package_results(self, node, testres_package, submitres_package):\n+        \"\"\"Assert that a successful submitpackage result is consistent with testmempoolaccept\n+        results and getmempoolentry info. Note that the result structs are different and, due to\n+        policy differences between testmempoolaccept and submitpackage (i.e. package feerate),\n+        some information may be different.\n+        \"\"\"\n+        for testres_tx in testres_package:\n+            # Grab this result from the submitres\n+            submitres_tx = submitres_package[\"tx-results\"][testres_tx[\"wtxid\"]]\n+            assert_equal(submitres_tx[\"txid\"], testres_tx[\"txid\"])\n+            if \"allowed\" in testres_tx and testres_tx[\"allowed\"]:\n+                assert_equal(submitres_tx[\"vsize\"], testres_tx[\"vsize\"])\n+                assert_equal(submitres_tx[\"fees\"][\"base\"], testres_tx[\"fees\"][\"base\"])\n+            entry_info = node.getmempoolentry(submitres_tx[\"txid\"])\n+            assert_equal(submitres_tx[\"vsize\"], entry_info[\"vsize\"])\n+            assert_equal(submitres_tx[\"fees\"][\"base\"], entry_info[\"fees\"][\"base\"])\n+\n+    def test_submit_child_with_parents(self, num_parents):\n+        node = self.nodes[0]\n+        # Test a package with num_parents parents and 1 child transaction.\n+        package_hex = []\n+        package_txns = []\n+        values = []\n+        scripts = []\n+        for _ in range(num_parents):\n+            parent_coin = self.coins.pop()\n+            value = parent_coin[\"amount\"]\n+            (tx, txhex, value, spk) = make_chain(node, self.address, self.privkeys, parent_coin[\"txid\"], value)\n+            package_hex.append(txhex)\n+            package_txns.append(tx)\n+            values.append(value)\n+            scripts.append(spk)\n+        child_hex = create_child_with_parents(node, self.address, self.privkeys, package_txns, values, scripts)\n+        package_hex.append(child_hex)\n+        package_txns.append(tx_from_hex(child_hex))\n+\n+        testres_package = node.testmempoolaccept(rawtxs=package_hex)\n+        submitres_package = node.submitpackage(package=package_hex)\n+\n+        # Check that each result is present, with the correct size and fees\n+        for i in range(num_parents + 1):\n+            tx = package_txns[i]\n+            wtxid = tx.getwtxid()\n+            assert wtxid in submitres_package[\"tx-results\"]\n+            tx_result = submitres_package[\"tx-results\"][wtxid]\n+            expected_fee = Decimal(\"0.0001\")\n+            assert_equal(tx_result, {\n+                \"txid\": tx.rehash(),\n+                \"vsize\": tx.get_vsize(),\n+                \"fees\": {\n+                    \"base\": expected_fee,\n+                }\n+            })\n+\n+        # submitpackage result should be consistent with testmempoolaccept and getmempoolentry\n+        self.assert_equal_package_results(node, testres_package, submitres_package)\n+\n+        # With no deduplications, the package feerate is just the ancestor feerate of the child.\n+        child_txid = testres_package[-1][\"txid\"]\n+        if \"package-feerate\" in submitres_package:",
      "path": "test/functional/rpc_packages.py",
      "position": null,
      "original_position": 99,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "04bb60029457fb7085041a414b195fd4f0e78d42",
      "in_reply_to_id": 884741999,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Not if we have partial submissions - added that test case and an explanation comment",
      "created_at": "2022-05-30T22:42:32Z",
      "updated_at": "2022-05-30T22:43:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r885099748",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885099748"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 368,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885099781",
      "pull_request_review_id": 989705610,
      "id": 885099781,
      "node_id": "PRRC_kwDOABII5840wY0F",
      "diff_hunk": "@@ -306,5 +306,80 @@ def test_rbf(self):\n         }]\n         self.assert_testres_equal(self.independent_txns_hex + [signed_replacement_tx[\"hex\"]], testres_rbf_package)\n \n+    def assert_equal_package_results(self, node, testres_package, submitres_package):\n+        \"\"\"Assert that a successful submitpackage result is consistent with testmempoolaccept\n+        results and getmempoolentry info. Note that the result structs are different and, due to\n+        policy differences between testmempoolaccept and submitpackage (i.e. package feerate),\n+        some information may be different.\n+        \"\"\"\n+        for testres_tx in testres_package:\n+            # Grab this result from the submitres\n+            submitres_tx = submitres_package[\"tx-results\"][testres_tx[\"wtxid\"]]\n+            assert_equal(submitres_tx[\"txid\"], testres_tx[\"txid\"])\n+            if \"allowed\" in testres_tx and testres_tx[\"allowed\"]:\n+                assert_equal(submitres_tx[\"vsize\"], testres_tx[\"vsize\"])\n+                assert_equal(submitres_tx[\"fees\"][\"base\"], testres_tx[\"fees\"][\"base\"])\n+            entry_info = node.getmempoolentry(submitres_tx[\"txid\"])\n+            assert_equal(submitres_tx[\"vsize\"], entry_info[\"vsize\"])\n+            assert_equal(submitres_tx[\"fees\"][\"base\"], entry_info[\"fees\"][\"base\"])\n+\n+    def test_submit_child_with_parents(self, num_parents):\n+        node = self.nodes[0]\n+        # Test a package with num_parents parents and 1 child transaction.\n+        package_hex = []\n+        package_txns = []\n+        values = []\n+        scripts = []\n+        for _ in range(num_parents):\n+            parent_coin = self.coins.pop()\n+            value = parent_coin[\"amount\"]\n+            (tx, txhex, value, spk) = make_chain(node, self.address, self.privkeys, parent_coin[\"txid\"], value)\n+            package_hex.append(txhex)\n+            package_txns.append(tx)\n+            values.append(value)\n+            scripts.append(spk)\n+        child_hex = create_child_with_parents(node, self.address, self.privkeys, package_txns, values, scripts)\n+        package_hex.append(child_hex)\n+        package_txns.append(tx_from_hex(child_hex))\n+\n+        testres_package = node.testmempoolaccept(rawtxs=package_hex)\n+        submitres_package = node.submitpackage(package=package_hex)",
      "path": "test/functional/rpc_packages.py",
      "position": null,
      "original_position": 77,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "04bb60029457fb7085041a414b195fd4f0e78d42",
      "in_reply_to_id": 884741649,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2022-05-30T22:42:41Z",
      "updated_at": "2022-05-30T22:43:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r885099781",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885099781"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": 345,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 346,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885099802",
      "pull_request_review_id": 989705610,
      "id": 885099802,
      "node_id": "PRRC_kwDOABII5840wY0a",
      "diff_hunk": "@@ -306,5 +306,80 @@ def test_rbf(self):\n         }]\n         self.assert_testres_equal(self.independent_txns_hex + [signed_replacement_tx[\"hex\"]], testres_rbf_package)\n \n+    def assert_equal_package_results(self, node, testres_package, submitres_package):\n+        \"\"\"Assert that a successful submitpackage result is consistent with testmempoolaccept\n+        results and getmempoolentry info. Note that the result structs are different and, due to\n+        policy differences between testmempoolaccept and submitpackage (i.e. package feerate),\n+        some information may be different.\n+        \"\"\"\n+        for testres_tx in testres_package:\n+            # Grab this result from the submitres\n+            submitres_tx = submitres_package[\"tx-results\"][testres_tx[\"wtxid\"]]\n+            assert_equal(submitres_tx[\"txid\"], testres_tx[\"txid\"])\n+            if \"allowed\" in testres_tx and testres_tx[\"allowed\"]:\n+                assert_equal(submitres_tx[\"vsize\"], testres_tx[\"vsize\"])\n+                assert_equal(submitres_tx[\"fees\"][\"base\"], testres_tx[\"fees\"][\"base\"])\n+            entry_info = node.getmempoolentry(submitres_tx[\"txid\"])\n+            assert_equal(submitres_tx[\"vsize\"], entry_info[\"vsize\"])\n+            assert_equal(submitres_tx[\"fees\"][\"base\"], entry_info[\"fees\"][\"base\"])\n+\n+    def test_submit_child_with_parents(self, num_parents):\n+        node = self.nodes[0]\n+        # Test a package with num_parents parents and 1 child transaction.\n+        package_hex = []\n+        package_txns = []\n+        values = []\n+        scripts = []\n+        for _ in range(num_parents):\n+            parent_coin = self.coins.pop()\n+            value = parent_coin[\"amount\"]\n+            (tx, txhex, value, spk) = make_chain(node, self.address, self.privkeys, parent_coin[\"txid\"], value)\n+            package_hex.append(txhex)\n+            package_txns.append(tx)\n+            values.append(value)\n+            scripts.append(spk)\n+        child_hex = create_child_with_parents(node, self.address, self.privkeys, package_txns, values, scripts)\n+        package_hex.append(child_hex)\n+        package_txns.append(tx_from_hex(child_hex))\n+\n+        testres_package = node.testmempoolaccept(rawtxs=package_hex)\n+        submitres_package = node.submitpackage(package=package_hex)\n+\n+        # Check that each result is present, with the correct size and fees\n+        for i in range(num_parents + 1):\n+            tx = package_txns[i]\n+            wtxid = tx.getwtxid()\n+            assert wtxid in submitres_package[\"tx-results\"]\n+            tx_result = submitres_package[\"tx-results\"][wtxid]\n+            expected_fee = Decimal(\"0.0001\")\n+            assert_equal(tx_result, {\n+                \"txid\": tx.rehash(),\n+                \"vsize\": tx.get_vsize(),\n+                \"fees\": {\n+                    \"base\": expected_fee,\n+                }\n+            })\n+\n+        # submitpackage result should be consistent with testmempoolaccept and getmempoolentry\n+        self.assert_equal_package_results(node, testres_package, submitres_package)\n+\n+        # With no deduplications, the package feerate is just the ancestor feerate of the child.\n+        child_txid = testres_package[-1][\"txid\"]\n+        if \"package-feerate\" in submitres_package:\n+            assert_equal(submitres_package[\"package-feerate\"], node.getmempoolentry(child_txid)[\"fees\"][\"ancestor\"])\n+\n+    def test_submitpackage(self):\n+        node = self.nodes[0]\n+\n+        self.log.info(\"Submitrawpackage valid packages with 1 child and some number of parents\")\n+        for num_parents in [1, 2, 10, 24]:\n+            self.test_submit_child_with_parents(num_parents)\n+\n+        self.log.info(\"Submitrawpackage only allows packages of 1 child with its parents\")\n+        # Chain of 3 transactions has too many generations\n+        (chain_hex, _) = create_raw_chain(node, self.coins.pop(), self.address, self.privkeys, 3)",
      "path": "test/functional/rpc_packages.py",
      "position": null,
      "original_position": 111,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "04bb60029457fb7085041a414b195fd4f0e78d42",
      "in_reply_to_id": 884735992,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2022-05-30T22:42:48Z",
      "updated_at": "2022-05-30T22:43:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r885099802",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885099802"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 380,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/887013764",
      "pull_request_review_id": 992275825,
      "id": 887013764,
      "node_id": "PRRC_kwDOABII58403sGE",
      "diff_hunk": "@@ -669,6 +670,136 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"\\nSubmit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\\n\"",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 15,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "04bb60029457fb7085041a414b195fd4f0e78d42",
      "in_reply_to_id": 857331391,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "You've taken out too many now! The help text description is now just one (very) long line.",
      "created_at": "2022-06-01T16:35:42Z",
      "updated_at": "2022-06-01T16:35:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r887013764",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/887013764"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 676,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/887019581",
      "pull_request_review_id": 992284456,
      "id": 887019581,
      "node_id": "PRRC_kwDOABII58403tg9",
      "diff_hunk": "@@ -729,6 +730,138 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"Submit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\"\n+        \"The package will be validated and accepted to mempool if it passes consensus and mempool policy rules, otherwise throws a JSONRPCError.\"",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 16,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "411cc6eb9f4203fa702ffe82dcd75d1189cbbcb5",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This run on sentence is a bit mangled. How about:\r\n\r\n\"The package will be validated according to consensus and mempool policy rules. If all transactions pass, they will be accepted to mempool.\"\r\n\r\nI don't think you need to mention the JSONRPCError, which is an internal implementation concept. Other RPC methods don't document error conditions in the help text.",
      "created_at": "2022-06-01T16:42:37Z",
      "updated_at": "2022-06-01T17:01:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r887019581",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/887019581"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 737,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/887020277",
      "pull_request_review_id": 992284456,
      "id": 887020277,
      "node_id": "PRRC_kwDOABII58403tr1",
      "diff_hunk": "@@ -729,6 +730,138 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"Submit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\"\n+        \"The package will be validated and accepted to mempool if it passes consensus and mempool policy rules, otherwise throws a JSONRPCError.\"\n+        \"This RPC is experimental and the interface may be unstable. Refer to doc/policy/packages.md for documentation on package policies.\"\n+        \"Warning: successful submission does not mean the transaction will propagate to other nodes on the network.\",\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"xxxx\", \"transaction wtxid\", {\n+                        {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n+                        {RPCResult::Type::STR_HEX, \"other-wtxid\", /*optional=*/ true, \"The wtxid of a different transaction with the same txid but different witness found in the mempool. This means the submitted transaction was ignored.\"},",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 33,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "411cc6eb9f4203fa702ffe82dcd75d1189cbbcb5",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n                        {RPCResult::Type::STR_HEX, \"other-wtxid\", /*optional=*/true, \"The wtxid of a different transaction with the same txid but different witness found in the mempool. This means the submitted transaction was ignored.\"},\r\n```\r\n\r\n(no space between comment and parameter - same for other instances below)",
      "created_at": "2022-06-01T16:43:24Z",
      "updated_at": "2022-06-01T17:01:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r887020277",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/887020277"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 754,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/887031584",
      "pull_request_review_id": 992284456,
      "id": 887031584,
      "node_id": "PRRC_kwDOABII58403wcg",
      "diff_hunk": "@@ -306,5 +306,85 @@ def test_rbf(self):\n         }]\n         self.assert_testres_equal(self.independent_txns_hex + [signed_replacement_tx[\"hex\"]], testres_rbf_package)\n \n+    def assert_equal_package_results(self, node, testres_package, submitres_package):",
      "path": "test/functional/rpc_packages.py",
      "position": null,
      "original_position": 40,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "411cc6eb9f4203fa702ffe82dcd75d1189cbbcb5",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "What do you think about using the same naming convention here (`testmempoolaccept_result` and `submitpackage_result`)?",
      "created_at": "2022-06-01T16:54:00Z",
      "updated_at": "2022-06-01T17:01:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r887031584",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/887031584"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 309,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/887037954",
      "pull_request_review_id": 992284456,
      "id": 887037954,
      "node_id": "PRRC_kwDOABII58403yAC",
      "diff_hunk": "@@ -306,5 +306,85 @@ def test_rbf(self):\n         }]\n         self.assert_testres_equal(self.independent_txns_hex + [signed_replacement_tx[\"hex\"]], testres_rbf_package)\n \n+    def assert_equal_package_results(self, node, testres_package, submitres_package):\n+        \"\"\"Assert that a successful submitpackage result is consistent with testmempoolaccept\n+        results and getmempoolentry info. Note that the result structs are different and, due to\n+        policy differences between testmempoolaccept and submitpackage (i.e. package feerate),\n+        some information may be different.\n+        \"\"\"\n+        for testres_tx in testres_package:\n+            # Grab this result from the submitres\n+            submitres_tx = submitres_package[\"tx-results\"][testres_tx[\"wtxid\"]]\n+            assert_equal(submitres_tx[\"txid\"], testres_tx[\"txid\"])\n+            # No \"allowed\" if the tx was already in the mempool\n+            if \"allowed\" in testres_tx and testres_tx[\"allowed\"]:\n+                assert_equal(submitres_tx[\"vsize\"], testres_tx[\"vsize\"])\n+                assert_equal(submitres_tx[\"fees\"][\"base\"], testres_tx[\"fees\"][\"base\"])\n+            entry_info = node.getmempoolentry(submitres_tx[\"txid\"])\n+            assert_equal(submitres_tx[\"vsize\"], entry_info[\"vsize\"])\n+            assert_equal(submitres_tx[\"fees\"][\"base\"], entry_info[\"fees\"][\"base\"])\n+\n+    def test_submit_child_with_parents(self, num_parents, partial_submit):\n+        node = self.nodes[0]\n+        # Test a package with num_parents parents and 1 child transaction.\n+        package_hex = []\n+        package_txns = []\n+        values = []\n+        scripts = []\n+        for _ in range(num_parents):\n+            parent_coin = self.coins.pop()\n+            value = parent_coin[\"amount\"]\n+            (tx, txhex, value, spk) = make_chain(node, self.address, self.privkeys, parent_coin[\"txid\"], value)\n+            package_hex.append(txhex)\n+            package_txns.append(tx)\n+            values.append(value)\n+            scripts.append(spk)\n+            if partial_submit and random.choice([True, False]):\n+                node.sendrawtransaction(txhex)\n+        child_hex = create_child_with_parents(node, self.address, self.privkeys, package_txns, values, scripts)\n+        package_hex.append(child_hex)\n+        package_txns.append(tx_from_hex(child_hex))\n+\n+        testmempoolaccept_result = node.testmempoolaccept(rawtxs=package_hex)\n+        submitpackage_result = node.submitpackage(package=package_hex)\n+\n+        # Check that each result is present, with the correct size and fees\n+        for i in range(num_parents + 1):\n+            tx = package_txns[i]\n+            wtxid = tx.getwtxid()\n+            assert wtxid in submitpackage_result[\"tx-results\"]\n+            tx_result = submitpackage_result[\"tx-results\"][wtxid]\n+            expected_fee = Decimal(\"0.0001\")\n+            assert_equal(tx_result, {\n+                \"txid\": tx.rehash(),\n+                \"vsize\": tx.get_vsize(),\n+                \"fees\": {\n+                    \"base\": expected_fee,\n+                }\n+            })\n+\n+        # submitpackage result should be consistent with testmempoolaccept and getmempoolentry\n+        self.assert_equal_package_results(node, testmempoolaccept_result, submitpackage_result)\n+\n+        # With no deduplications, the package feerate is just the ancestor feerate of the child.",
      "path": "test/functional/rpc_packages.py",
      "position": null,
      "original_position": 100,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "411cc6eb9f4203fa702ffe82dcd75d1189cbbcb5",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This test is done even if this is a partial submission. Is partial submission the same as deduplication? If so, why does this test still pass? Is it because the feerate of every transaction in the package is the same?",
      "created_at": "2022-06-01T17:00:49Z",
      "updated_at": "2022-06-01T17:01:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r887037954",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/887037954"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 369,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/892966456",
      "pull_request_review_id": 1000583466,
      "id": 892966456,
      "node_id": "PRRC_kwDOABII5841OZY4",
      "diff_hunk": "@@ -729,6 +730,138 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"Submit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\"\n+        \"The package will be validated and accepted to mempool if it passes consensus and mempool policy rules, otherwise throws a JSONRPCError.\"\n+        \"This RPC is experimental and the interface may be unstable. Refer to doc/policy/packages.md for documentation on package policies.\"\n+        \"Warning: successful submission does not mean the transaction will propagate to other nodes on the network.\",",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 18,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "411cc6eb9f4203fa702ffe82dcd75d1189cbbcb5",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Unclear comment : this RPC requires package to be at least 2 transactions and this mention a singular transaction. Though I would be even clearer and say something like \"for now, the package transactions are going to be relayed individually to the other nodes and might not propagate on the network\" ?",
      "created_at": "2022-06-09T00:13:32Z",
      "updated_at": "2022-06-09T00:42:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r892966456",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/892966456"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 739,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/892966683",
      "pull_request_review_id": 1000583466,
      "id": 892966683,
      "node_id": "PRRC_kwDOABII5841OZcb",
      "diff_hunk": "@@ -729,6 +730,138 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"Submit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\"\n+        \"The package will be validated and accepted to mempool if it passes consensus and mempool policy rules, otherwise throws a JSONRPCError.\"\n+        \"This RPC is experimental and the interface may be unstable. Refer to doc/policy/packages.md for documentation on package policies.\"\n+        \"Warning: successful submission does not mean the transaction will propagate to other nodes on the network.\",\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"xxxx\", \"transaction wtxid\", {",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 31,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "411cc6eb9f4203fa702ffe82dcd75d1189cbbcb5",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Maybe \"wtxid\" instead of \"xxxx\"",
      "created_at": "2022-06-09T00:14:20Z",
      "updated_at": "2022-06-09T00:42:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r892966683",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/892966683"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 752,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/892968011",
      "pull_request_review_id": 1000583466,
      "id": 892968011,
      "node_id": "PRRC_kwDOABII5841OZxL",
      "diff_hunk": "@@ -729,6 +730,138 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"Submit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\"\n+        \"The package will be validated and accepted to mempool if it passes consensus and mempool policy rules, otherwise throws a JSONRPCError.\"\n+        \"This RPC is experimental and the interface may be unstable. Refer to doc/policy/packages.md for documentation on package policies.\"\n+        \"Warning: successful submission does not mean the transaction will propagate to other nodes on the network.\",\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"xxxx\", \"transaction wtxid\", {\n+                        {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n+                        {RPCResult::Type::STR_HEX, \"other-wtxid\", /*optional=*/ true, \"The wtxid of a different transaction with the same txid but different witness found in the mempool. This means the submitted transaction was ignored.\"},\n+                        {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::OBJ, \"fees\", \"Transaction fees\", {\n+                            {RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee in \" + CURRENCY_UNIT},\n+                        }},\n+                    }}\n+                }},\n+                {RPCResult::Type::STR_AMOUNT, \"package-feerate\", /*optional=*/ true, \"package feerate used for feerate checks in \" + CURRENCY_UNIT + \" per KvB. Excludes transactions which were deduplicated or accepted individually.\"},\n+                {RPCResult::Type::ARR, \"replaced-transactions\", /*optional=*/ true, \"List of txids of replaced transactions\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"\", \"The transaction id\"},\n+                }},\n+            },\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"testmempoolaccept\", \"[rawtx1, rawtx2]\") +\n+            HelpExampleCli(\"submitrawtransaction\", \"[rawtx1, rawtx2]\")",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 49,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "411cc6eb9f4203fa702ffe82dcd75d1189cbbcb5",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "There is no such thing as \"submitrawtransaction\" am I missing something ?",
      "created_at": "2022-06-09T00:18:12Z",
      "updated_at": "2022-06-09T00:42:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r892968011",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/892968011"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 770,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/892969531",
      "pull_request_review_id": 1000583466,
      "id": 892969531,
      "node_id": "PRRC_kwDOABII5841OaI7",
      "diff_hunk": "@@ -729,6 +730,138 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"Submit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\"\n+        \"The package will be validated and accepted to mempool if it passes consensus and mempool policy rules, otherwise throws a JSONRPCError.\"\n+        \"This RPC is experimental and the interface may be unstable. Refer to doc/policy/packages.md for documentation on package policies.\"\n+        \"Warning: successful submission does not mean the transaction will propagate to other nodes on the network.\",\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"xxxx\", \"transaction wtxid\", {\n+                        {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n+                        {RPCResult::Type::STR_HEX, \"other-wtxid\", /*optional=*/ true, \"The wtxid of a different transaction with the same txid but different witness found in the mempool. This means the submitted transaction was ignored.\"},\n+                        {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::OBJ, \"fees\", \"Transaction fees\", {\n+                            {RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee in \" + CURRENCY_UNIT},\n+                        }},\n+                    }}\n+                }},\n+                {RPCResult::Type::STR_AMOUNT, \"package-feerate\", /*optional=*/ true, \"package feerate used for feerate checks in \" + CURRENCY_UNIT + \" per KvB. Excludes transactions which were deduplicated or accepted individually.\"},\n+                {RPCResult::Type::ARR, \"replaced-transactions\", /*optional=*/ true, \"List of txids of replaced transactions\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"\", \"The transaction id\"},\n+                }},\n+            },\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"testmempoolaccept\", \"[rawtx1, rawtx2]\") +\n+            HelpExampleCli(\"submitrawtransaction\", \"[rawtx1, rawtx2]\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            if (!Params().IsMockableChain()) {\n+                throw std::runtime_error(\"submitpackage is for regression testing (-regtest mode) only\");\n+            }\n+            RPCTypeCheck(request.params, {\n+                UniValue::VARR,\n+            });\n+            const UniValue raw_transactions = request.params[0].get_array();\n+            if (raw_transactions.size() < 1 || raw_transactions.size() > MAX_PACKAGE_COUNT) {",
      "path": "src/rpc/mempool.cpp",
      "position": 62,
      "original_position": 60,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "411cc6eb9f4203fa702ffe82dcd75d1189cbbcb5",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I don't know about leaking package policy checks at the RPC-level as now you have duplicated checks (i.e in `CheckPackage`). If you wanna fail fast, maybe just call the iirc context-free `CheckPackage`",
      "created_at": "2022-06-09T00:22:44Z",
      "updated_at": "2022-06-09T00:42:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r892969531",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/892969531"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 783,
      "original_line": 783,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/892972205",
      "pull_request_review_id": 1000583466,
      "id": 892972205,
      "node_id": "PRRC_kwDOABII5841Oayt",
      "diff_hunk": "@@ -729,6 +730,138 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"Submit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\"\n+        \"The package will be validated and accepted to mempool if it passes consensus and mempool policy rules, otherwise throws a JSONRPCError.\"\n+        \"This RPC is experimental and the interface may be unstable. Refer to doc/policy/packages.md for documentation on package policies.\"\n+        \"Warning: successful submission does not mean the transaction will propagate to other nodes on the network.\",\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"xxxx\", \"transaction wtxid\", {\n+                        {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n+                        {RPCResult::Type::STR_HEX, \"other-wtxid\", /*optional=*/ true, \"The wtxid of a different transaction with the same txid but different witness found in the mempool. This means the submitted transaction was ignored.\"},\n+                        {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::OBJ, \"fees\", \"Transaction fees\", {\n+                            {RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee in \" + CURRENCY_UNIT},\n+                        }},\n+                    }}\n+                }},\n+                {RPCResult::Type::STR_AMOUNT, \"package-feerate\", /*optional=*/ true, \"package feerate used for feerate checks in \" + CURRENCY_UNIT + \" per KvB. Excludes transactions which were deduplicated or accepted individually.\"},",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 40,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "411cc6eb9f4203fa702ffe82dcd75d1189cbbcb5",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "What do you think about adding a `maxfeerate` client-level check like in `sendrawtransaction` ?",
      "created_at": "2022-06-09T00:30:34Z",
      "updated_at": "2022-06-09T00:42:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r892972205",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/892972205"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 761,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/898845914",
      "pull_request_review_id": 1008704999,
      "id": 898845914,
      "node_id": "PRRC_kwDOABII5841k0za",
      "diff_hunk": "@@ -729,6 +730,138 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"Submit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\"\n+        \"The package will be validated and accepted to mempool if it passes consensus and mempool policy rules, otherwise throws a JSONRPCError.\"\n+        \"This RPC is experimental and the interface may be unstable. Refer to doc/policy/packages.md for documentation on package policies.\"\n+        \"Warning: successful submission does not mean the transaction will propagate to other nodes on the network.\",\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"xxxx\", \"transaction wtxid\", {\n+                        {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n+                        {RPCResult::Type::STR_HEX, \"other-wtxid\", /*optional=*/ true, \"The wtxid of a different transaction with the same txid but different witness found in the mempool. This means the submitted transaction was ignored.\"},\n+                        {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::OBJ, \"fees\", \"Transaction fees\", {\n+                            {RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee in \" + CURRENCY_UNIT},\n+                        }},\n+                    }}\n+                }},\n+                {RPCResult::Type::STR_AMOUNT, \"package-feerate\", /*optional=*/ true, \"package feerate used for feerate checks in \" + CURRENCY_UNIT + \" per KvB. Excludes transactions which were deduplicated or accepted individually.\"},",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 40,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "411cc6eb9f4203fa702ffe82dcd75d1189cbbcb5",
      "in_reply_to_id": 892972205,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yeah I think that's a good idea for the future, see https://github.com/bitcoin/bitcoin/pull/24836#issuecomment-1096948837\r\n",
      "created_at": "2022-06-16T08:42:44Z",
      "updated_at": "2022-06-16T08:42:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r898845914",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/898845914"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 761,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/898847232",
      "pull_request_review_id": 1008706792,
      "id": 898847232,
      "node_id": "PRRC_kwDOABII5841k1IA",
      "diff_hunk": "@@ -729,6 +730,138 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"Submit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\"\n+        \"The package will be validated and accepted to mempool if it passes consensus and mempool policy rules, otherwise throws a JSONRPCError.\"\n+        \"This RPC is experimental and the interface may be unstable. Refer to doc/policy/packages.md for documentation on package policies.\"\n+        \"Warning: successful submission does not mean the transaction will propagate to other nodes on the network.\",\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"xxxx\", \"transaction wtxid\", {\n+                        {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n+                        {RPCResult::Type::STR_HEX, \"other-wtxid\", /*optional=*/ true, \"The wtxid of a different transaction with the same txid but different witness found in the mempool. This means the submitted transaction was ignored.\"},\n+                        {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::OBJ, \"fees\", \"Transaction fees\", {\n+                            {RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee in \" + CURRENCY_UNIT},\n+                        }},\n+                    }}\n+                }},\n+                {RPCResult::Type::STR_AMOUNT, \"package-feerate\", /*optional=*/ true, \"package feerate used for feerate checks in \" + CURRENCY_UNIT + \" per KvB. Excludes transactions which were deduplicated or accepted individually.\"},\n+                {RPCResult::Type::ARR, \"replaced-transactions\", /*optional=*/ true, \"List of txids of replaced transactions\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"\", \"The transaction id\"},\n+                }},\n+            },\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"testmempoolaccept\", \"[rawtx1, rawtx2]\") +\n+            HelpExampleCli(\"submitrawtransaction\", \"[rawtx1, rawtx2]\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            if (!Params().IsMockableChain()) {\n+                throw std::runtime_error(\"submitpackage is for regression testing (-regtest mode) only\");\n+            }\n+            RPCTypeCheck(request.params, {\n+                UniValue::VARR,\n+            });\n+            const UniValue raw_transactions = request.params[0].get_array();\n+            if (raw_transactions.size() < 1 || raw_transactions.size() > MAX_PACKAGE_COUNT) {",
      "path": "src/rpc/mempool.cpp",
      "position": 62,
      "original_position": 60,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "411cc6eb9f4203fa702ffe82dcd75d1189cbbcb5",
      "in_reply_to_id": 892969531,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think it's good to have a max number of transactions on the rpc - this is a \"invalid params\" error. Could be 500 or something, but 25 is quite natural since it'll get rejected anyway if it's more than that. I could make a new number instead of `MAX_PACKAGE_COUNT` but again, more natural to just use a constant we already have.",
      "created_at": "2022-06-16T08:44:10Z",
      "updated_at": "2022-06-16T08:44:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r898847232",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/898847232"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 783,
      "original_line": 783,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/898849947",
      "pull_request_review_id": 1008710616,
      "id": 898849947,
      "node_id": "PRRC_kwDOABII5841k1yb",
      "diff_hunk": "@@ -729,6 +730,138 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"Submit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\"\n+        \"The package will be validated and accepted to mempool if it passes consensus and mempool policy rules, otherwise throws a JSONRPCError.\"",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 16,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "411cc6eb9f4203fa702ffe82dcd75d1189cbbcb5",
      "in_reply_to_id": 887019581,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2022-06-16T08:47:11Z",
      "updated_at": "2022-06-16T08:48:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r898849947",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/898849947"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 737,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/898849997",
      "pull_request_review_id": 1008710616,
      "id": 898849997,
      "node_id": "PRRC_kwDOABII5841k1zN",
      "diff_hunk": "@@ -729,6 +730,138 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"Submit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\"\n+        \"The package will be validated and accepted to mempool if it passes consensus and mempool policy rules, otherwise throws a JSONRPCError.\"\n+        \"This RPC is experimental and the interface may be unstable. Refer to doc/policy/packages.md for documentation on package policies.\"\n+        \"Warning: successful submission does not mean the transaction will propagate to other nodes on the network.\",",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 18,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "411cc6eb9f4203fa702ffe82dcd75d1189cbbcb5",
      "in_reply_to_id": 892966456,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2022-06-16T08:47:15Z",
      "updated_at": "2022-06-16T08:48:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r898849997",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/898849997"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 739,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/898850053",
      "pull_request_review_id": 1008710616,
      "id": 898850053,
      "node_id": "PRRC_kwDOABII5841k10F",
      "diff_hunk": "@@ -729,6 +730,138 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"Submit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\"\n+        \"The package will be validated and accepted to mempool if it passes consensus and mempool policy rules, otherwise throws a JSONRPCError.\"\n+        \"This RPC is experimental and the interface may be unstable. Refer to doc/policy/packages.md for documentation on package policies.\"\n+        \"Warning: successful submission does not mean the transaction will propagate to other nodes on the network.\",\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"xxxx\", \"transaction wtxid\", {",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 31,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "411cc6eb9f4203fa702ffe82dcd75d1189cbbcb5",
      "in_reply_to_id": 892966683,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2022-06-16T08:47:18Z",
      "updated_at": "2022-06-16T08:48:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r898850053",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/898850053"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 752,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/898850106",
      "pull_request_review_id": 1008710616,
      "id": 898850106,
      "node_id": "PRRC_kwDOABII5841k106",
      "diff_hunk": "@@ -729,6 +730,138 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"Submit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\"\n+        \"The package will be validated and accepted to mempool if it passes consensus and mempool policy rules, otherwise throws a JSONRPCError.\"\n+        \"This RPC is experimental and the interface may be unstable. Refer to doc/policy/packages.md for documentation on package policies.\"\n+        \"Warning: successful submission does not mean the transaction will propagate to other nodes on the network.\",\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"xxxx\", \"transaction wtxid\", {\n+                        {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n+                        {RPCResult::Type::STR_HEX, \"other-wtxid\", /*optional=*/ true, \"The wtxid of a different transaction with the same txid but different witness found in the mempool. This means the submitted transaction was ignored.\"},",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 33,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "411cc6eb9f4203fa702ffe82dcd75d1189cbbcb5",
      "in_reply_to_id": 887020277,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2022-06-16T08:47:22Z",
      "updated_at": "2022-06-16T08:48:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r898850106",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/898850106"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 754,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/898850317",
      "pull_request_review_id": 1008710616,
      "id": 898850317,
      "node_id": "PRRC_kwDOABII5841k14N",
      "diff_hunk": "@@ -729,6 +730,138 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"Submit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\"\n+        \"The package will be validated and accepted to mempool if it passes consensus and mempool policy rules, otherwise throws a JSONRPCError.\"\n+        \"This RPC is experimental and the interface may be unstable. Refer to doc/policy/packages.md for documentation on package policies.\"\n+        \"Warning: successful submission does not mean the transaction will propagate to other nodes on the network.\",\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"xxxx\", \"transaction wtxid\", {\n+                        {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n+                        {RPCResult::Type::STR_HEX, \"other-wtxid\", /*optional=*/ true, \"The wtxid of a different transaction with the same txid but different witness found in the mempool. This means the submitted transaction was ignored.\"},\n+                        {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::OBJ, \"fees\", \"Transaction fees\", {\n+                            {RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee in \" + CURRENCY_UNIT},\n+                        }},\n+                    }}\n+                }},\n+                {RPCResult::Type::STR_AMOUNT, \"package-feerate\", /*optional=*/ true, \"package feerate used for feerate checks in \" + CURRENCY_UNIT + \" per KvB. Excludes transactions which were deduplicated or accepted individually.\"},\n+                {RPCResult::Type::ARR, \"replaced-transactions\", /*optional=*/ true, \"List of txids of replaced transactions\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"\", \"The transaction id\"},\n+                }},\n+            },\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"testmempoolaccept\", \"[rawtx1, rawtx2]\") +\n+            HelpExampleCli(\"submitrawtransaction\", \"[rawtx1, rawtx2]\")",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 49,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "411cc6eb9f4203fa702ffe82dcd75d1189cbbcb5",
      "in_reply_to_id": 892968011,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Sorry yes, sendrawtransaction. Fixed",
      "created_at": "2022-06-16T08:47:36Z",
      "updated_at": "2022-06-16T08:48:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r898850317",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/898850317"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 770,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/898850433",
      "pull_request_review_id": 1008710616,
      "id": 898850433,
      "node_id": "PRRC_kwDOABII5841k16B",
      "diff_hunk": "@@ -306,5 +306,85 @@ def test_rbf(self):\n         }]\n         self.assert_testres_equal(self.independent_txns_hex + [signed_replacement_tx[\"hex\"]], testres_rbf_package)\n \n+    def assert_equal_package_results(self, node, testres_package, submitres_package):",
      "path": "test/functional/rpc_packages.py",
      "position": null,
      "original_position": 40,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "411cc6eb9f4203fa702ffe82dcd75d1189cbbcb5",
      "in_reply_to_id": 887031584,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2022-06-16T08:47:44Z",
      "updated_at": "2022-06-16T08:48:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r898850433",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/898850433"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 309,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/898850642",
      "pull_request_review_id": 1008710616,
      "id": 898850642,
      "node_id": "PRRC_kwDOABII5841k19S",
      "diff_hunk": "@@ -306,5 +306,85 @@ def test_rbf(self):\n         }]\n         self.assert_testres_equal(self.independent_txns_hex + [signed_replacement_tx[\"hex\"]], testres_rbf_package)\n \n+    def assert_equal_package_results(self, node, testres_package, submitres_package):\n+        \"\"\"Assert that a successful submitpackage result is consistent with testmempoolaccept\n+        results and getmempoolentry info. Note that the result structs are different and, due to\n+        policy differences between testmempoolaccept and submitpackage (i.e. package feerate),\n+        some information may be different.\n+        \"\"\"\n+        for testres_tx in testres_package:\n+            # Grab this result from the submitres\n+            submitres_tx = submitres_package[\"tx-results\"][testres_tx[\"wtxid\"]]\n+            assert_equal(submitres_tx[\"txid\"], testres_tx[\"txid\"])\n+            # No \"allowed\" if the tx was already in the mempool\n+            if \"allowed\" in testres_tx and testres_tx[\"allowed\"]:\n+                assert_equal(submitres_tx[\"vsize\"], testres_tx[\"vsize\"])\n+                assert_equal(submitres_tx[\"fees\"][\"base\"], testres_tx[\"fees\"][\"base\"])\n+            entry_info = node.getmempoolentry(submitres_tx[\"txid\"])\n+            assert_equal(submitres_tx[\"vsize\"], entry_info[\"vsize\"])\n+            assert_equal(submitres_tx[\"fees\"][\"base\"], entry_info[\"fees\"][\"base\"])\n+\n+    def test_submit_child_with_parents(self, num_parents, partial_submit):\n+        node = self.nodes[0]\n+        # Test a package with num_parents parents and 1 child transaction.\n+        package_hex = []\n+        package_txns = []\n+        values = []\n+        scripts = []\n+        for _ in range(num_parents):\n+            parent_coin = self.coins.pop()\n+            value = parent_coin[\"amount\"]\n+            (tx, txhex, value, spk) = make_chain(node, self.address, self.privkeys, parent_coin[\"txid\"], value)\n+            package_hex.append(txhex)\n+            package_txns.append(tx)\n+            values.append(value)\n+            scripts.append(spk)\n+            if partial_submit and random.choice([True, False]):\n+                node.sendrawtransaction(txhex)\n+        child_hex = create_child_with_parents(node, self.address, self.privkeys, package_txns, values, scripts)\n+        package_hex.append(child_hex)\n+        package_txns.append(tx_from_hex(child_hex))\n+\n+        testmempoolaccept_result = node.testmempoolaccept(rawtxs=package_hex)\n+        submitpackage_result = node.submitpackage(package=package_hex)\n+\n+        # Check that each result is present, with the correct size and fees\n+        for i in range(num_parents + 1):\n+            tx = package_txns[i]\n+            wtxid = tx.getwtxid()\n+            assert wtxid in submitpackage_result[\"tx-results\"]\n+            tx_result = submitpackage_result[\"tx-results\"][wtxid]\n+            expected_fee = Decimal(\"0.0001\")\n+            assert_equal(tx_result, {\n+                \"txid\": tx.rehash(),\n+                \"vsize\": tx.get_vsize(),\n+                \"fees\": {\n+                    \"base\": expected_fee,\n+                }\n+            })\n+\n+        # submitpackage result should be consistent with testmempoolaccept and getmempoolentry\n+        self.assert_equal_package_results(node, testmempoolaccept_result, submitpackage_result)\n+\n+        # With no deduplications, the package feerate is just the ancestor feerate of the child.",
      "path": "test/functional/rpc_packages.py",
      "position": null,
      "original_position": 100,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "411cc6eb9f4203fa702ffe82dcd75d1189cbbcb5",
      "in_reply_to_id": 887037954,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Clarified the comment",
      "created_at": "2022-06-16T08:47:56Z",
      "updated_at": "2022-06-16T08:48:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r898850642",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/898850642"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 369,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/899130155",
      "pull_request_review_id": 1009113051,
      "id": 899130155,
      "node_id": "PRRC_kwDOABII5841l6Mr",
      "diff_hunk": "@@ -729,6 +730,138 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"Submit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\"\n+        \"The package will be validated according to consensus and mempool policy rules. If all transactions pass, they will be accepted to mempool.\"\n+        \"This RPC is experimental and the interface may be unstable. Refer to doc/policy/packages.md for documentation on package policies.\"\n+        \"Warning: successful submission does not mean the transaction will propagate to other nodes on the network. Until package relay exists, they will each be relayed individually.\",",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 18,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "d7d8a9b70cb5420ba10bfbb423185448a2c980eb",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Maybe be explicit in saying each individual tx will have to pass feefilter checks for propagation? ",
      "created_at": "2022-06-16T14:13:26Z",
      "updated_at": "2022-06-16T14:13:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r899130155",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/899130155"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 739,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/899168759",
      "pull_request_review_id": 1009167017,
      "id": 899168759,
      "node_id": "PRRC_kwDOABII5841mDn3",
      "diff_hunk": "@@ -669,6 +670,136 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"\\nSubmit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\\n\"",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 15,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "04bb60029457fb7085041a414b195fd4f0e78d42",
      "in_reply_to_id": 857331391,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Wait I'm confused. Are there supposed to be newlines?",
      "created_at": "2022-06-16T14:47:53Z",
      "updated_at": "2022-06-16T14:47:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r899168759",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/899168759"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 676,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/899215072",
      "pull_request_review_id": 1009235101,
      "id": 899215072,
      "node_id": "PRRC_kwDOABII5841mO7g",
      "diff_hunk": "@@ -669,6 +670,136 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"\\nSubmit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\\n\"",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 15,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "04bb60029457fb7085041a414b195fd4f0e78d42",
      "in_reply_to_id": 857331391,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Currently yes, newlines are needed within text, but not as a prefix for the description. (My bad, I've edited the suggested change above)",
      "created_at": "2022-06-16T15:31:03Z",
      "updated_at": "2022-06-16T15:31:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r899215072",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/899215072"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 676,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/899216239",
      "pull_request_review_id": 1009236339,
      "id": 899216239,
      "node_id": "PRRC_kwDOABII5841mPNv",
      "diff_hunk": "@@ -669,6 +670,136 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"\\nSubmit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\\n\"",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 15,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "04bb60029457fb7085041a414b195fd4f0e78d42",
      "in_reply_to_id": 857331391,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "We could also do auto-formatting of newlines, but maybe this can be done later",
      "created_at": "2022-06-16T15:31:56Z",
      "updated_at": "2022-06-16T15:31:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r899216239",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/899216239"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 676,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/901409435",
      "pull_request_review_id": 1011911018,
      "id": 901409435,
      "node_id": "PRRC_kwDOABII5841umqb",
      "diff_hunk": "@@ -729,6 +730,138 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"Submit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\"\n+        \"The package will be validated according to consensus and mempool policy rules. If all transactions pass, they will be accepted to mempool.\"\n+        \"This RPC is experimental and the interface may be unstable. Refer to doc/policy/packages.md for documentation on package policies.\"\n+        \"Warning: successful submission does not mean the transaction will propagate to other nodes on the network. Until package relay exists, they will each be relayed individually.\",",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 18,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "d7d8a9b70cb5420ba10bfbb423185448a2c980eb",
      "in_reply_to_id": 899130155,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Added",
      "created_at": "2022-06-20T08:45:49Z",
      "updated_at": "2022-06-20T08:45:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r901409435",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/901409435"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 739,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/901409994",
      "pull_request_review_id": 1011911798,
      "id": 901409994,
      "node_id": "PRRC_kwDOABII5841umzK",
      "diff_hunk": "@@ -669,6 +670,136 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"\\nSubmit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\\n\"",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 15,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "04bb60029457fb7085041a414b195fd4f0e78d42",
      "in_reply_to_id": 857331391,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ok based on the new suggestion, I've added newlines at the end, but not at the beginning. Hopefully that's correct",
      "created_at": "2022-06-20T08:46:22Z",
      "updated_at": "2022-06-20T08:46:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r901409994",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/901409994"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 676,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/901460956",
      "pull_request_review_id": 1011983676,
      "id": 901460956,
      "node_id": "PRRC_kwDOABII5841uzPc",
      "diff_hunk": "@@ -729,6 +730,147 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"Submit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\\n\"\n+        \"The package will be validated according to consensus and mempool policy rules. If all transactions pass, they will be accepted to mempool.\\n\"\n+        \"This RPC is experimental and the interface may be unstable. Refer to doc/policy/packages.md for documentation on package policies.\\n\"\n+        \"Warning: until package relay is in use, successful submission does not mean the transaction will propagate to other nodes on the network.\\n\"\n+        \"Currently, each transaction is broadcasted individually after submission, which means they must meet other nodes' feerate requirements alone.\\n\"\n+        ,\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"wtxid\", \"transaction wtxid\", {\n+                        {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n+                        {RPCResult::Type::STR_HEX, \"other-wtxid\", /*optional=*/true, \"The wtxid of a different transaction with the same txid but different witness found in the mempool. This means the submitted transaction was ignored.\"},\n+                        {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::OBJ, \"fees\", \"Transaction fees\", {\n+                            {RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee in \" + CURRENCY_UNIT},\n+                        }},\n+                    }}\n+                }},\n+                {RPCResult::Type::STR_AMOUNT, \"package-feerate\", /*optional=*/true, \"package feerate used for feerate checks in \" + CURRENCY_UNIT + \" per KvB. Excludes transactions which were deduplicated or accepted individually.\"},\n+                {RPCResult::Type::ARR, \"replaced-transactions\", /*optional=*/true, \"List of txids of replaced transactions\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"\", \"The transaction id\"},\n+                }},\n+            },\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"testmempoolaccept\", \"[rawtx1, rawtx2]\") +\n+            HelpExampleCli(\"sendrawtransaction\", \"[rawtx1, rawtx2]\")",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 51,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "980464989449b3b703c9a11e398b2b246dee163a",
      "in_reply_to_id": null,
      "user": {
        "login": "t-bast",
        "id": 31281497,
        "node_id": "MDQ6VXNlcjMxMjgxNDk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/31281497?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/t-bast",
        "html_url": "https://github.com/t-bast",
        "followers_url": "https://api.github.com/users/t-bast/followers",
        "following_url": "https://api.github.com/users/t-bast/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/t-bast/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/t-bast/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
        "organizations_url": "https://api.github.com/users/t-bast/orgs",
        "repos_url": "https://api.github.com/users/t-bast/repos",
        "events_url": "https://api.github.com/users/t-bast/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/t-bast/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "The second example should use `submitpackage`, shouldn't it?\r\n\r\n```suggestion\r\n            HelpExampleCli(\"testmempoolaccept\", \"[rawtx1, rawtx2]\") +\r\n            HelpExampleCli(\"submitpackage\", \"[rawtx1, rawtx2]\")\r\n```",
      "created_at": "2022-06-20T09:37:35Z",
      "updated_at": "2022-06-20T11:31:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r901460956",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/901460956"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": 771,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 772,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/901956070",
      "pull_request_review_id": 1012686576,
      "id": 901956070,
      "node_id": "PRRC_kwDOABII5841wsHm",
      "diff_hunk": "@@ -729,6 +730,147 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"Submit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\\n\"\n+        \"The package will be validated according to consensus and mempool policy rules. If all transactions pass, they will be accepted to mempool.\\n\"\n+        \"This RPC is experimental and the interface may be unstable. Refer to doc/policy/packages.md for documentation on package policies.\\n\"\n+        \"Warning: until package relay is in use, successful submission does not mean the transaction will propagate to other nodes on the network.\\n\"\n+        \"Currently, each transaction is broadcasted individually after submission, which means they must meet other nodes' feerate requirements alone.\\n\"\n+        ,\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"wtxid\", \"transaction wtxid\", {\n+                        {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n+                        {RPCResult::Type::STR_HEX, \"other-wtxid\", /*optional=*/true, \"The wtxid of a different transaction with the same txid but different witness found in the mempool. This means the submitted transaction was ignored.\"},\n+                        {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::OBJ, \"fees\", \"Transaction fees\", {\n+                            {RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee in \" + CURRENCY_UNIT},\n+                        }},\n+                    }}\n+                }},\n+                {RPCResult::Type::STR_AMOUNT, \"package-feerate\", /*optional=*/true, \"package feerate used for feerate checks in \" + CURRENCY_UNIT + \" per KvB. Excludes transactions which were deduplicated or accepted individually.\"},\n+                {RPCResult::Type::ARR, \"replaced-transactions\", /*optional=*/true, \"List of txids of replaced transactions\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"\", \"The transaction id\"},\n+                }},\n+            },\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"testmempoolaccept\", \"[rawtx1, rawtx2]\") +\n+            HelpExampleCli(\"sendrawtransaction\", \"[rawtx1, rawtx2]\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            if (!Params().IsMockableChain()) {\n+                throw std::runtime_error(\"submitpackage is for regression testing (-regtest mode) only\");\n+            }\n+            RPCTypeCheck(request.params, {\n+                UniValue::VARR,\n+            });\n+            const UniValue raw_transactions = request.params[0].get_array();\n+            if (raw_transactions.size() < 1 || raw_transactions.size() > MAX_PACKAGE_COUNT) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER,\n+                                   \"Array must contain between 1 and \" + ToString(MAX_PACKAGE_COUNT) + \" transactions.\");\n+            }\n+\n+            std::vector<CTransactionRef> txns;\n+            txns.reserve(raw_transactions.size());\n+            for (const auto& rawtx : raw_transactions.getValues()) {\n+                CMutableTransaction mtx;\n+                if (!DecodeHexTx(mtx, rawtx.get_str())) {\n+                    throw JSONRPCError(RPC_DESERIALIZATION_ERROR,\n+                                       \"TX decode failed: \" + rawtx.get_str() + \" Make sure the tx has at least one input.\");\n+                }\n+                txns.emplace_back(MakeTransactionRef(std::move(mtx)));\n+            }\n+\n+            NodeContext& node = EnsureAnyNodeContext(request.context);\n+            CTxMemPool& mempool = EnsureMemPool(node);\n+            CChainState& chainstate = EnsureChainman(node).ActiveChainstate();\n+            const auto package_result = WITH_LOCK(::cs_main, return ProcessNewPackage(chainstate, mempool, txns, /*test_accept=*/ false));\n+\n+            // First catch any errors.\n+            switch(package_result.m_state.GetResult()) {\n+                case PackageValidationResult::PCKG_RESULT_UNSET: break;\n+                case PackageValidationResult::PCKG_POLICY:\n+                {\n+                    throw JSONRPCTransactionError(TransactionError::INVALID_PACKAGE,\n+                        package_result.m_state.GetRejectReason());\n+                }\n+                case PackageValidationResult::PCKG_MEMPOOL_ERROR:\n+                {\n+                    throw JSONRPCTransactionError(TransactionError::MEMPOOL_ERROR,\n+                        package_result.m_state.GetRejectReason());\n+                }\n+                case PackageValidationResult::PCKG_TX:\n+                {\n+                    for (const auto& tx : txns) {\n+                        auto it = package_result.m_tx_results.find(tx->GetWitnessHash());\n+                        if (it != package_result.m_tx_results.end() && it->second.m_state.IsInvalid()) {\n+                            throw JSONRPCTransactionError(TransactionError::MEMPOOL_REJECTED,\n+                                strprintf(\"%s failed: %s\", tx->GetHash().ToString(), it->second.m_state.GetRejectReason()));\n+                        }\n+                    }\n+                    // If a PCKG_TX error was returned, there must have been an invalid transaction.\n+                    NONFATAL_UNREACHABLE();\n+                }\n+            }\n+            for (const auto& tx : txns) {\n+                std::string err_string;\n+                const auto err = BroadcastTransaction(node, tx, err_string, 0, true, true);",
      "path": "src/rpc/mempool.cpp",
      "position": 112,
      "original_position": 111,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "980464989449b3b703c9a11e398b2b246dee163a",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think one way to exercise the `BroadcastTransaction` here could be to extend `rpc_packages.py` adding a `add_p2p_connection()` and waiting for an inv to be received with the package transactions txids. ",
      "created_at": "2022-06-20T19:30:25Z",
      "updated_at": "2022-06-20T19:34:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r901956070",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/901956070"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 833,
      "original_line": 833,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/902595822",
      "pull_request_review_id": 1013569261,
      "id": 902595822,
      "node_id": "PRRC_kwDOABII5841zITu",
      "diff_hunk": "@@ -729,6 +730,147 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"Submit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\\n\"\n+        \"The package will be validated according to consensus and mempool policy rules. If all transactions pass, they will be accepted to mempool.\\n\"\n+        \"This RPC is experimental and the interface may be unstable. Refer to doc/policy/packages.md for documentation on package policies.\\n\"\n+        \"Warning: until package relay is in use, successful submission does not mean the transaction will propagate to other nodes on the network.\\n\"\n+        \"Currently, each transaction is broadcasted individually after submission, which means they must meet other nodes' feerate requirements alone.\\n\"\n+        ,\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"wtxid\", \"transaction wtxid\", {\n+                        {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n+                        {RPCResult::Type::STR_HEX, \"other-wtxid\", /*optional=*/true, \"The wtxid of a different transaction with the same txid but different witness found in the mempool. This means the submitted transaction was ignored.\"},\n+                        {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::OBJ, \"fees\", \"Transaction fees\", {\n+                            {RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee in \" + CURRENCY_UNIT},\n+                        }},\n+                    }}\n+                }},\n+                {RPCResult::Type::STR_AMOUNT, \"package-feerate\", /*optional=*/true, \"package feerate used for feerate checks in \" + CURRENCY_UNIT + \" per KvB. Excludes transactions which were deduplicated or accepted individually.\"},\n+                {RPCResult::Type::ARR, \"replaced-transactions\", /*optional=*/true, \"List of txids of replaced transactions\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"\", \"The transaction id\"},\n+                }},\n+            },\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"testmempoolaccept\", \"[rawtx1, rawtx2]\") +\n+            HelpExampleCli(\"sendrawtransaction\", \"[rawtx1, rawtx2]\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            if (!Params().IsMockableChain()) {\n+                throw std::runtime_error(\"submitpackage is for regression testing (-regtest mode) only\");\n+            }\n+            RPCTypeCheck(request.params, {\n+                UniValue::VARR,\n+            });\n+            const UniValue raw_transactions = request.params[0].get_array();\n+            if (raw_transactions.size() < 1 || raw_transactions.size() > MAX_PACKAGE_COUNT) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER,\n+                                   \"Array must contain between 1 and \" + ToString(MAX_PACKAGE_COUNT) + \" transactions.\");\n+            }\n+\n+            std::vector<CTransactionRef> txns;\n+            txns.reserve(raw_transactions.size());\n+            for (const auto& rawtx : raw_transactions.getValues()) {\n+                CMutableTransaction mtx;\n+                if (!DecodeHexTx(mtx, rawtx.get_str())) {\n+                    throw JSONRPCError(RPC_DESERIALIZATION_ERROR,\n+                                       \"TX decode failed: \" + rawtx.get_str() + \" Make sure the tx has at least one input.\");\n+                }\n+                txns.emplace_back(MakeTransactionRef(std::move(mtx)));\n+            }\n+\n+            NodeContext& node = EnsureAnyNodeContext(request.context);\n+            CTxMemPool& mempool = EnsureMemPool(node);\n+            CChainState& chainstate = EnsureChainman(node).ActiveChainstate();\n+            const auto package_result = WITH_LOCK(::cs_main, return ProcessNewPackage(chainstate, mempool, txns, /*test_accept=*/ false));\n+\n+            // First catch any errors.\n+            switch(package_result.m_state.GetResult()) {\n+                case PackageValidationResult::PCKG_RESULT_UNSET: break;\n+                case PackageValidationResult::PCKG_POLICY:\n+                {\n+                    throw JSONRPCTransactionError(TransactionError::INVALID_PACKAGE,\n+                        package_result.m_state.GetRejectReason());\n+                }\n+                case PackageValidationResult::PCKG_MEMPOOL_ERROR:\n+                {\n+                    throw JSONRPCTransactionError(TransactionError::MEMPOOL_ERROR,\n+                        package_result.m_state.GetRejectReason());\n+                }\n+                case PackageValidationResult::PCKG_TX:\n+                {\n+                    for (const auto& tx : txns) {\n+                        auto it = package_result.m_tx_results.find(tx->GetWitnessHash());\n+                        if (it != package_result.m_tx_results.end() && it->second.m_state.IsInvalid()) {\n+                            throw JSONRPCTransactionError(TransactionError::MEMPOOL_REJECTED,\n+                                strprintf(\"%s failed: %s\", tx->GetHash().ToString(), it->second.m_state.GetRejectReason()));\n+                        }\n+                    }\n+                    // If a PCKG_TX error was returned, there must have been an invalid transaction.\n+                    NONFATAL_UNREACHABLE();\n+                }\n+            }\n+            for (const auto& tx : txns) {\n+                std::string err_string;\n+                const auto err = BroadcastTransaction(node, tx, err_string, 0, true, true);\n+                if (err != TransactionError::OK) {",
      "path": "src/rpc/mempool.cpp",
      "position": 113,
      "original_position": 112,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "421f28661500de1ce38d429d1a93da32350c0296",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "If we're hitting this error condition it seems more useful to get back some usable information about the transactions that already were broadcasted in this loop.",
      "created_at": "2022-06-21T13:06:43Z",
      "updated_at": "2022-06-21T13:18:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r902595822",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/902595822"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 834,
      "original_line": 834,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/902599382",
      "pull_request_review_id": 1013569261,
      "id": 902599382,
      "node_id": "PRRC_kwDOABII5841zJLW",
      "diff_hunk": "@@ -729,6 +730,147 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"Submit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\\n\"\n+        \"The package will be validated according to consensus and mempool policy rules. If all transactions pass, they will be accepted to mempool.\\n\"\n+        \"This RPC is experimental and the interface may be unstable. Refer to doc/policy/packages.md for documentation on package policies.\\n\"\n+        \"Warning: until package relay is in use, successful submission does not mean the transaction will propagate to other nodes on the network.\\n\"\n+        \"Currently, each transaction is broadcasted individually after submission, which means they must meet other nodes' feerate requirements alone.\\n\"\n+        ,\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"wtxid\", \"transaction wtxid\", {\n+                        {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n+                        {RPCResult::Type::STR_HEX, \"other-wtxid\", /*optional=*/true, \"The wtxid of a different transaction with the same txid but different witness found in the mempool. This means the submitted transaction was ignored.\"},\n+                        {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::OBJ, \"fees\", \"Transaction fees\", {\n+                            {RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee in \" + CURRENCY_UNIT},\n+                        }},\n+                    }}\n+                }},\n+                {RPCResult::Type::STR_AMOUNT, \"package-feerate\", /*optional=*/true, \"package feerate used for feerate checks in \" + CURRENCY_UNIT + \" per KvB. Excludes transactions which were deduplicated or accepted individually.\"},\n+                {RPCResult::Type::ARR, \"replaced-transactions\", /*optional=*/true, \"List of txids of replaced transactions\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"\", \"The transaction id\"},\n+                }},\n+            },\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"testmempoolaccept\", \"[rawtx1, rawtx2]\") +\n+            HelpExampleCli(\"sendrawtransaction\", \"[rawtx1, rawtx2]\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            if (!Params().IsMockableChain()) {\n+                throw std::runtime_error(\"submitpackage is for regression testing (-regtest mode) only\");\n+            }\n+            RPCTypeCheck(request.params, {\n+                UniValue::VARR,\n+            });\n+            const UniValue raw_transactions = request.params[0].get_array();\n+            if (raw_transactions.size() < 1 || raw_transactions.size() > MAX_PACKAGE_COUNT) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER,\n+                                   \"Array must contain between 1 and \" + ToString(MAX_PACKAGE_COUNT) + \" transactions.\");\n+            }\n+\n+            std::vector<CTransactionRef> txns;\n+            txns.reserve(raw_transactions.size());\n+            for (const auto& rawtx : raw_transactions.getValues()) {\n+                CMutableTransaction mtx;\n+                if (!DecodeHexTx(mtx, rawtx.get_str())) {\n+                    throw JSONRPCError(RPC_DESERIALIZATION_ERROR,\n+                                       \"TX decode failed: \" + rawtx.get_str() + \" Make sure the tx has at least one input.\");\n+                }\n+                txns.emplace_back(MakeTransactionRef(std::move(mtx)));\n+            }\n+\n+            NodeContext& node = EnsureAnyNodeContext(request.context);\n+            CTxMemPool& mempool = EnsureMemPool(node);\n+            CChainState& chainstate = EnsureChainman(node).ActiveChainstate();\n+            const auto package_result = WITH_LOCK(::cs_main, return ProcessNewPackage(chainstate, mempool, txns, /*test_accept=*/ false));\n+\n+            // First catch any errors.\n+            switch(package_result.m_state.GetResult()) {\n+                case PackageValidationResult::PCKG_RESULT_UNSET: break;\n+                case PackageValidationResult::PCKG_POLICY:\n+                {\n+                    throw JSONRPCTransactionError(TransactionError::INVALID_PACKAGE,\n+                        package_result.m_state.GetRejectReason());\n+                }\n+                case PackageValidationResult::PCKG_MEMPOOL_ERROR:\n+                {\n+                    throw JSONRPCTransactionError(TransactionError::MEMPOOL_ERROR,\n+                        package_result.m_state.GetRejectReason());\n+                }\n+                case PackageValidationResult::PCKG_TX:\n+                {\n+                    for (const auto& tx : txns) {\n+                        auto it = package_result.m_tx_results.find(tx->GetWitnessHash());\n+                        if (it != package_result.m_tx_results.end() && it->second.m_state.IsInvalid()) {\n+                            throw JSONRPCTransactionError(TransactionError::MEMPOOL_REJECTED,\n+                                strprintf(\"%s failed: %s\", tx->GetHash().ToString(), it->second.m_state.GetRejectReason()));\n+                        }\n+                    }\n+                    // If a PCKG_TX error was returned, there must have been an invalid transaction.\n+                    NONFATAL_UNREACHABLE();\n+                }\n+            }\n+            for (const auto& tx : txns) {\n+                std::string err_string;\n+                const auto err = BroadcastTransaction(node, tx, err_string, 0, true, true);\n+                if (err != TransactionError::OK) {\n+                    throw JSONRPCTransactionError(err, err_string);\n+                }\n+            }\n+            UniValue rpc_result{UniValue::VOBJ};\n+            UniValue tx_result_map{UniValue::VOBJ};\n+            std::set<uint256> replaced_txids;\n+            for (const auto& tx : txns) {\n+                auto it = package_result.m_tx_results.find(tx->GetWitnessHash());\n+                CHECK_NONFATAL(it != package_result.m_tx_results.end());\n+                UniValue result_inner{UniValue::VOBJ};\n+                result_inner.pushKV(\"txid\", tx->GetHash().GetHex());\n+                if (it->second.m_result_type == MempoolAcceptResult::ResultType::DIFFERENT_WITNESS) {\n+                    result_inner.pushKV(\"other-wtxid\", it->second.m_other_wtxid.value().GetHex());\n+                }\n+                if (it->second.m_result_type == MempoolAcceptResult::ResultType::VALID ||\n+                    it->second.m_result_type == MempoolAcceptResult::ResultType::MEMPOOL_ENTRY) {\n+                    result_inner.pushKV(\"vsize\", int64_t{it->second.m_vsize.value()});\n+                    UniValue fees(UniValue::VOBJ);\n+                    fees.pushKV(\"base\", ValueFromAmount(it->second.m_base_fees.value()));\n+                    result_inner.pushKV(\"fees\", fees);\n+                    if (it->second.m_replaced_transactions.has_value()) {\n+                        for (const auto& ptx : it->second.m_replaced_transactions.value()) {\n+                            replaced_txids.insert(ptx->GetHash());\n+                        }\n+                    }\n+                }\n+                tx_result_map.pushKV(tx->GetWitnessHash().GetHex(), result_inner);",
      "path": "src/rpc/mempool.cpp",
      "position": 142,
      "original_position": 139,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "421f28661500de1ce38d429d1a93da32350c0296",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "some places we're using wtxid for indexing, others txid(replaced txns), is there a guiding principle here?",
      "created_at": "2022-06-21T13:10:06Z",
      "updated_at": "2022-06-21T13:18:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r902599382",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/902599382"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 863,
      "original_line": 863,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/902607877",
      "pull_request_review_id": 1013569261,
      "id": 902607877,
      "node_id": "PRRC_kwDOABII5841zLQF",
      "diff_hunk": "@@ -306,5 +306,86 @@ def test_rbf(self):\n         }]\n         self.assert_testres_equal(self.independent_txns_hex + [signed_replacement_tx[\"hex\"]], testres_rbf_package)\n \n+    def assert_equal_package_results(self, node, testmempoolaccept_result, submitpackage_result):\n+        \"\"\"Assert that a successful submitpackage result is consistent with testmempoolaccept\n+        results and getmempoolentry info. Note that the result structs are different and, due to\n+        policy differences between testmempoolaccept and submitpackage (i.e. package feerate),\n+        some information may be different.\n+        \"\"\"\n+        for testres_tx in testmempoolaccept_result:\n+            # Grab this result from the submitpackage_result\n+            submitres_tx = submitpackage_result[\"tx-results\"][testres_tx[\"wtxid\"]]\n+            assert_equal(submitres_tx[\"txid\"], testres_tx[\"txid\"])\n+            # No \"allowed\" if the tx was already in the mempool\n+            if \"allowed\" in testres_tx and testres_tx[\"allowed\"]:\n+                assert_equal(submitres_tx[\"vsize\"], testres_tx[\"vsize\"])\n+                assert_equal(submitres_tx[\"fees\"][\"base\"], testres_tx[\"fees\"][\"base\"])\n+            entry_info = node.getmempoolentry(submitres_tx[\"txid\"])\n+            assert_equal(submitres_tx[\"vsize\"], entry_info[\"vsize\"])\n+            assert_equal(submitres_tx[\"fees\"][\"base\"], entry_info[\"fees\"][\"base\"])\n+\n+    def test_submit_child_with_parents(self, num_parents, partial_submit):\n+        node = self.nodes[0]\n+        # Test a package with num_parents parents and 1 child transaction.\n+        package_hex = []\n+        package_txns = []\n+        values = []\n+        scripts = []\n+        for _ in range(num_parents):\n+            parent_coin = self.coins.pop()\n+            value = parent_coin[\"amount\"]\n+            (tx, txhex, value, spk) = make_chain(node, self.address, self.privkeys, parent_coin[\"txid\"], value)\n+            package_hex.append(txhex)\n+            package_txns.append(tx)\n+            values.append(value)\n+            scripts.append(spk)\n+            if partial_submit and random.choice([True, False]):\n+                node.sendrawtransaction(txhex)\n+        child_hex = create_child_with_parents(node, self.address, self.privkeys, package_txns, values, scripts)\n+        package_hex.append(child_hex)\n+        package_txns.append(tx_from_hex(child_hex))\n+\n+        testmempoolaccept_result = node.testmempoolaccept(rawtxs=package_hex)\n+        submitpackage_result = node.submitpackage(package=package_hex)\n+\n+        # Check that each result is present, with the correct size and fees\n+        for i in range(num_parents + 1):\n+            tx = package_txns[i]\n+            wtxid = tx.getwtxid()\n+            assert wtxid in submitpackage_result[\"tx-results\"]\n+            tx_result = submitpackage_result[\"tx-results\"][wtxid]\n+            expected_fee = Decimal(\"0.0001\")\n+            assert_equal(tx_result, {\n+                \"txid\": tx.rehash(),\n+                \"vsize\": tx.get_vsize(),\n+                \"fees\": {\n+                    \"base\": expected_fee,\n+                }\n+            })\n+\n+        # submitpackage result should be consistent with testmempoolaccept and getmempoolentry\n+        self.assert_equal_package_results(node, testmempoolaccept_result, submitpackage_result)\n+\n+        # Package feerate is calculated for the remaining transactions after deduplication and\n+        # individual submission.  If only 0 or 1 transaction is left, e.g. because all transactions",
      "path": "test/functional/rpc_packages.py",
      "position": null,
      "original_position": 101,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "980464989449b3b703c9a11e398b2b246dee163a",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "could we assert this condition is the case when \"package-feerate\" doesn't exist, rather than have a comment to the effect?",
      "created_at": "2022-06-21T13:17:40Z",
      "updated_at": "2022-06-21T13:18:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r902607877",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/902607877"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 370,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904944734",
      "pull_request_review_id": 1016894628,
      "id": 904944734,
      "node_id": "PRRC_kwDOABII58418Fxe",
      "diff_hunk": "@@ -729,6 +730,147 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"Submit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\\n\"\n+        \"The package will be validated according to consensus and mempool policy rules. If all transactions pass, they will be accepted to mempool.\\n\"\n+        \"This RPC is experimental and the interface may be unstable. Refer to doc/policy/packages.md for documentation on package policies.\\n\"\n+        \"Warning: until package relay is in use, successful submission does not mean the transaction will propagate to other nodes on the network.\\n\"\n+        \"Currently, each transaction is broadcasted individually after submission, which means they must meet other nodes' feerate requirements alone.\\n\"\n+        ,\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"wtxid\", \"transaction wtxid\", {\n+                        {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n+                        {RPCResult::Type::STR_HEX, \"other-wtxid\", /*optional=*/true, \"The wtxid of a different transaction with the same txid but different witness found in the mempool. This means the submitted transaction was ignored.\"},\n+                        {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::OBJ, \"fees\", \"Transaction fees\", {\n+                            {RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee in \" + CURRENCY_UNIT},\n+                        }},\n+                    }}\n+                }},\n+                {RPCResult::Type::STR_AMOUNT, \"package-feerate\", /*optional=*/true, \"package feerate used for feerate checks in \" + CURRENCY_UNIT + \" per KvB. Excludes transactions which were deduplicated or accepted individually.\"},\n+                {RPCResult::Type::ARR, \"replaced-transactions\", /*optional=*/true, \"List of txids of replaced transactions\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"\", \"The transaction id\"},\n+                }},\n+            },\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"testmempoolaccept\", \"[rawtx1, rawtx2]\") +\n+            HelpExampleCli(\"sendrawtransaction\", \"[rawtx1, rawtx2]\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            if (!Params().IsMockableChain()) {\n+                throw std::runtime_error(\"submitpackage is for regression testing (-regtest mode) only\");\n+            }\n+            RPCTypeCheck(request.params, {\n+                UniValue::VARR,\n+            });\n+            const UniValue raw_transactions = request.params[0].get_array();\n+            if (raw_transactions.size() < 1 || raw_transactions.size() > MAX_PACKAGE_COUNT) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER,\n+                                   \"Array must contain between 1 and \" + ToString(MAX_PACKAGE_COUNT) + \" transactions.\");\n+            }\n+\n+            std::vector<CTransactionRef> txns;\n+            txns.reserve(raw_transactions.size());\n+            for (const auto& rawtx : raw_transactions.getValues()) {\n+                CMutableTransaction mtx;\n+                if (!DecodeHexTx(mtx, rawtx.get_str())) {\n+                    throw JSONRPCError(RPC_DESERIALIZATION_ERROR,\n+                                       \"TX decode failed: \" + rawtx.get_str() + \" Make sure the tx has at least one input.\");\n+                }\n+                txns.emplace_back(MakeTransactionRef(std::move(mtx)));\n+            }\n+\n+            NodeContext& node = EnsureAnyNodeContext(request.context);\n+            CTxMemPool& mempool = EnsureMemPool(node);\n+            CChainState& chainstate = EnsureChainman(node).ActiveChainstate();\n+            const auto package_result = WITH_LOCK(::cs_main, return ProcessNewPackage(chainstate, mempool, txns, /*test_accept=*/ false));\n+\n+            // First catch any errors.\n+            switch(package_result.m_state.GetResult()) {\n+                case PackageValidationResult::PCKG_RESULT_UNSET: break;\n+                case PackageValidationResult::PCKG_POLICY:\n+                {\n+                    throw JSONRPCTransactionError(TransactionError::INVALID_PACKAGE,\n+                        package_result.m_state.GetRejectReason());\n+                }\n+                case PackageValidationResult::PCKG_MEMPOOL_ERROR:\n+                {\n+                    throw JSONRPCTransactionError(TransactionError::MEMPOOL_ERROR,\n+                        package_result.m_state.GetRejectReason());\n+                }\n+                case PackageValidationResult::PCKG_TX:\n+                {\n+                    for (const auto& tx : txns) {\n+                        auto it = package_result.m_tx_results.find(tx->GetWitnessHash());\n+                        if (it != package_result.m_tx_results.end() && it->second.m_state.IsInvalid()) {\n+                            throw JSONRPCTransactionError(TransactionError::MEMPOOL_REJECTED,\n+                                strprintf(\"%s failed: %s\", tx->GetHash().ToString(), it->second.m_state.GetRejectReason()));\n+                        }\n+                    }\n+                    // If a PCKG_TX error was returned, there must have been an invalid transaction.\n+                    NONFATAL_UNREACHABLE();\n+                }\n+            }\n+            for (const auto& tx : txns) {\n+                std::string err_string;\n+                const auto err = BroadcastTransaction(node, tx, err_string, 0, true, true);\n+                if (err != TransactionError::OK) {\n+                    throw JSONRPCTransactionError(err, err_string);\n+                }\n+            }\n+            UniValue rpc_result{UniValue::VOBJ};\n+            UniValue tx_result_map{UniValue::VOBJ};\n+            std::set<uint256> replaced_txids;\n+            for (const auto& tx : txns) {\n+                auto it = package_result.m_tx_results.find(tx->GetWitnessHash());\n+                CHECK_NONFATAL(it != package_result.m_tx_results.end());\n+                UniValue result_inner{UniValue::VOBJ};\n+                result_inner.pushKV(\"txid\", tx->GetHash().GetHex());\n+                if (it->second.m_result_type == MempoolAcceptResult::ResultType::DIFFERENT_WITNESS) {\n+                    result_inner.pushKV(\"other-wtxid\", it->second.m_other_wtxid.value().GetHex());\n+                }\n+                if (it->second.m_result_type == MempoolAcceptResult::ResultType::VALID ||\n+                    it->second.m_result_type == MempoolAcceptResult::ResultType::MEMPOOL_ENTRY) {\n+                    result_inner.pushKV(\"vsize\", int64_t{it->second.m_vsize.value()});\n+                    UniValue fees(UniValue::VOBJ);\n+                    fees.pushKV(\"base\", ValueFromAmount(it->second.m_base_fees.value()));\n+                    result_inner.pushKV(\"fees\", fees);\n+                    if (it->second.m_replaced_transactions.has_value()) {\n+                        for (const auto& ptx : it->second.m_replaced_transactions.value()) {\n+                            replaced_txids.insert(ptx->GetHash());\n+                        }\n+                    }\n+                }\n+                tx_result_map.pushKV(tx->GetWitnessHash().GetHex(), result_inner);",
      "path": "src/rpc/mempool.cpp",
      "position": 142,
      "original_position": 139,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "421f28661500de1ce38d429d1a93da32350c0296",
      "in_reply_to_id": 902599382,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think wtxids would be better in general. Txids for replaced txns is basically a legacy thing, it's just using what's returned in `MempoolAcceptResult` which is also used in testmempoolaccept. It would be impossible to have multiple replaced transactions with the same txids since they must have all been in mempool at the start. Perhaps one day we can change this for both RPCs?\r\n\r\nWtxids for indexing into the map because (1) it's more precise and (2) there actually is a possibility of same-txid-different-witness, i.e. see the \"other-wtixd\" result.",
      "created_at": "2022-06-23T12:14:54Z",
      "updated_at": "2022-06-23T12:14:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r904944734",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904944734"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 863,
      "original_line": 863,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/905036535",
      "pull_request_review_id": 1017029927,
      "id": 905036535,
      "node_id": "PRRC_kwDOABII58418cL3",
      "diff_hunk": "@@ -729,6 +730,147 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"Submit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\\n\"\n+        \"The package will be validated according to consensus and mempool policy rules. If all transactions pass, they will be accepted to mempool.\\n\"\n+        \"This RPC is experimental and the interface may be unstable. Refer to doc/policy/packages.md for documentation on package policies.\\n\"\n+        \"Warning: until package relay is in use, successful submission does not mean the transaction will propagate to other nodes on the network.\\n\"\n+        \"Currently, each transaction is broadcasted individually after submission, which means they must meet other nodes' feerate requirements alone.\\n\"\n+        ,\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"wtxid\", \"transaction wtxid\", {\n+                        {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n+                        {RPCResult::Type::STR_HEX, \"other-wtxid\", /*optional=*/true, \"The wtxid of a different transaction with the same txid but different witness found in the mempool. This means the submitted transaction was ignored.\"},\n+                        {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::OBJ, \"fees\", \"Transaction fees\", {\n+                            {RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee in \" + CURRENCY_UNIT},\n+                        }},\n+                    }}\n+                }},\n+                {RPCResult::Type::STR_AMOUNT, \"package-feerate\", /*optional=*/true, \"package feerate used for feerate checks in \" + CURRENCY_UNIT + \" per KvB. Excludes transactions which were deduplicated or accepted individually.\"},\n+                {RPCResult::Type::ARR, \"replaced-transactions\", /*optional=*/true, \"List of txids of replaced transactions\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"\", \"The transaction id\"},\n+                }},\n+            },\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"testmempoolaccept\", \"[rawtx1, rawtx2]\") +\n+            HelpExampleCli(\"sendrawtransaction\", \"[rawtx1, rawtx2]\")",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 51,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "980464989449b3b703c9a11e398b2b246dee163a",
      "in_reply_to_id": 901460956,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Thanks! Fixed.",
      "created_at": "2022-06-23T13:40:31Z",
      "updated_at": "2022-06-23T13:49:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r905036535",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/905036535"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": 771,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 772,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/905037320",
      "pull_request_review_id": 1017029927,
      "id": 905037320,
      "node_id": "PRRC_kwDOABII58418cYI",
      "diff_hunk": "@@ -729,6 +730,147 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"Submit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\\n\"\n+        \"The package will be validated according to consensus and mempool policy rules. If all transactions pass, they will be accepted to mempool.\\n\"\n+        \"This RPC is experimental and the interface may be unstable. Refer to doc/policy/packages.md for documentation on package policies.\\n\"\n+        \"Warning: until package relay is in use, successful submission does not mean the transaction will propagate to other nodes on the network.\\n\"\n+        \"Currently, each transaction is broadcasted individually after submission, which means they must meet other nodes' feerate requirements alone.\\n\"\n+        ,\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"wtxid\", \"transaction wtxid\", {\n+                        {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n+                        {RPCResult::Type::STR_HEX, \"other-wtxid\", /*optional=*/true, \"The wtxid of a different transaction with the same txid but different witness found in the mempool. This means the submitted transaction was ignored.\"},\n+                        {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::OBJ, \"fees\", \"Transaction fees\", {\n+                            {RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee in \" + CURRENCY_UNIT},\n+                        }},\n+                    }}\n+                }},\n+                {RPCResult::Type::STR_AMOUNT, \"package-feerate\", /*optional=*/true, \"package feerate used for feerate checks in \" + CURRENCY_UNIT + \" per KvB. Excludes transactions which were deduplicated or accepted individually.\"},\n+                {RPCResult::Type::ARR, \"replaced-transactions\", /*optional=*/true, \"List of txids of replaced transactions\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"\", \"The transaction id\"},\n+                }},\n+            },\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"testmempoolaccept\", \"[rawtx1, rawtx2]\") +\n+            HelpExampleCli(\"sendrawtransaction\", \"[rawtx1, rawtx2]\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            if (!Params().IsMockableChain()) {\n+                throw std::runtime_error(\"submitpackage is for regression testing (-regtest mode) only\");\n+            }\n+            RPCTypeCheck(request.params, {\n+                UniValue::VARR,\n+            });\n+            const UniValue raw_transactions = request.params[0].get_array();\n+            if (raw_transactions.size() < 1 || raw_transactions.size() > MAX_PACKAGE_COUNT) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER,\n+                                   \"Array must contain between 1 and \" + ToString(MAX_PACKAGE_COUNT) + \" transactions.\");\n+            }\n+\n+            std::vector<CTransactionRef> txns;\n+            txns.reserve(raw_transactions.size());\n+            for (const auto& rawtx : raw_transactions.getValues()) {\n+                CMutableTransaction mtx;\n+                if (!DecodeHexTx(mtx, rawtx.get_str())) {\n+                    throw JSONRPCError(RPC_DESERIALIZATION_ERROR,\n+                                       \"TX decode failed: \" + rawtx.get_str() + \" Make sure the tx has at least one input.\");\n+                }\n+                txns.emplace_back(MakeTransactionRef(std::move(mtx)));\n+            }\n+\n+            NodeContext& node = EnsureAnyNodeContext(request.context);\n+            CTxMemPool& mempool = EnsureMemPool(node);\n+            CChainState& chainstate = EnsureChainman(node).ActiveChainstate();\n+            const auto package_result = WITH_LOCK(::cs_main, return ProcessNewPackage(chainstate, mempool, txns, /*test_accept=*/ false));\n+\n+            // First catch any errors.\n+            switch(package_result.m_state.GetResult()) {\n+                case PackageValidationResult::PCKG_RESULT_UNSET: break;\n+                case PackageValidationResult::PCKG_POLICY:\n+                {\n+                    throw JSONRPCTransactionError(TransactionError::INVALID_PACKAGE,\n+                        package_result.m_state.GetRejectReason());\n+                }\n+                case PackageValidationResult::PCKG_MEMPOOL_ERROR:\n+                {\n+                    throw JSONRPCTransactionError(TransactionError::MEMPOOL_ERROR,\n+                        package_result.m_state.GetRejectReason());\n+                }\n+                case PackageValidationResult::PCKG_TX:\n+                {\n+                    for (const auto& tx : txns) {\n+                        auto it = package_result.m_tx_results.find(tx->GetWitnessHash());\n+                        if (it != package_result.m_tx_results.end() && it->second.m_state.IsInvalid()) {\n+                            throw JSONRPCTransactionError(TransactionError::MEMPOOL_REJECTED,\n+                                strprintf(\"%s failed: %s\", tx->GetHash().ToString(), it->second.m_state.GetRejectReason()));\n+                        }\n+                    }\n+                    // If a PCKG_TX error was returned, there must have been an invalid transaction.\n+                    NONFATAL_UNREACHABLE();\n+                }\n+            }\n+            for (const auto& tx : txns) {\n+                std::string err_string;\n+                const auto err = BroadcastTransaction(node, tx, err_string, 0, true, true);",
      "path": "src/rpc/mempool.cpp",
      "position": 112,
      "original_position": 111,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "980464989449b3b703c9a11e398b2b246dee163a",
      "in_reply_to_id": 901956070,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Added.",
      "created_at": "2022-06-23T13:41:09Z",
      "updated_at": "2022-06-23T13:49:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r905037320",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/905037320"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 833,
      "original_line": 833,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/905044272",
      "pull_request_review_id": 1017029927,
      "id": 905044272,
      "node_id": "PRRC_kwDOABII58418eEw",
      "diff_hunk": "@@ -729,6 +730,147 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"Submit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\\n\"\n+        \"The package will be validated according to consensus and mempool policy rules. If all transactions pass, they will be accepted to mempool.\\n\"\n+        \"This RPC is experimental and the interface may be unstable. Refer to doc/policy/packages.md for documentation on package policies.\\n\"\n+        \"Warning: until package relay is in use, successful submission does not mean the transaction will propagate to other nodes on the network.\\n\"\n+        \"Currently, each transaction is broadcasted individually after submission, which means they must meet other nodes' feerate requirements alone.\\n\"\n+        ,\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"wtxid\", \"transaction wtxid\", {\n+                        {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n+                        {RPCResult::Type::STR_HEX, \"other-wtxid\", /*optional=*/true, \"The wtxid of a different transaction with the same txid but different witness found in the mempool. This means the submitted transaction was ignored.\"},\n+                        {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::OBJ, \"fees\", \"Transaction fees\", {\n+                            {RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee in \" + CURRENCY_UNIT},\n+                        }},\n+                    }}\n+                }},\n+                {RPCResult::Type::STR_AMOUNT, \"package-feerate\", /*optional=*/true, \"package feerate used for feerate checks in \" + CURRENCY_UNIT + \" per KvB. Excludes transactions which were deduplicated or accepted individually.\"},\n+                {RPCResult::Type::ARR, \"replaced-transactions\", /*optional=*/true, \"List of txids of replaced transactions\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"\", \"The transaction id\"},\n+                }},\n+            },\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"testmempoolaccept\", \"[rawtx1, rawtx2]\") +\n+            HelpExampleCli(\"sendrawtransaction\", \"[rawtx1, rawtx2]\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            if (!Params().IsMockableChain()) {\n+                throw std::runtime_error(\"submitpackage is for regression testing (-regtest mode) only\");\n+            }\n+            RPCTypeCheck(request.params, {\n+                UniValue::VARR,\n+            });\n+            const UniValue raw_transactions = request.params[0].get_array();\n+            if (raw_transactions.size() < 1 || raw_transactions.size() > MAX_PACKAGE_COUNT) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER,\n+                                   \"Array must contain between 1 and \" + ToString(MAX_PACKAGE_COUNT) + \" transactions.\");\n+            }\n+\n+            std::vector<CTransactionRef> txns;\n+            txns.reserve(raw_transactions.size());\n+            for (const auto& rawtx : raw_transactions.getValues()) {\n+                CMutableTransaction mtx;\n+                if (!DecodeHexTx(mtx, rawtx.get_str())) {\n+                    throw JSONRPCError(RPC_DESERIALIZATION_ERROR,\n+                                       \"TX decode failed: \" + rawtx.get_str() + \" Make sure the tx has at least one input.\");\n+                }\n+                txns.emplace_back(MakeTransactionRef(std::move(mtx)));\n+            }\n+\n+            NodeContext& node = EnsureAnyNodeContext(request.context);\n+            CTxMemPool& mempool = EnsureMemPool(node);\n+            CChainState& chainstate = EnsureChainman(node).ActiveChainstate();\n+            const auto package_result = WITH_LOCK(::cs_main, return ProcessNewPackage(chainstate, mempool, txns, /*test_accept=*/ false));\n+\n+            // First catch any errors.\n+            switch(package_result.m_state.GetResult()) {\n+                case PackageValidationResult::PCKG_RESULT_UNSET: break;\n+                case PackageValidationResult::PCKG_POLICY:\n+                {\n+                    throw JSONRPCTransactionError(TransactionError::INVALID_PACKAGE,\n+                        package_result.m_state.GetRejectReason());\n+                }\n+                case PackageValidationResult::PCKG_MEMPOOL_ERROR:\n+                {\n+                    throw JSONRPCTransactionError(TransactionError::MEMPOOL_ERROR,\n+                        package_result.m_state.GetRejectReason());\n+                }\n+                case PackageValidationResult::PCKG_TX:\n+                {\n+                    for (const auto& tx : txns) {\n+                        auto it = package_result.m_tx_results.find(tx->GetWitnessHash());\n+                        if (it != package_result.m_tx_results.end() && it->second.m_state.IsInvalid()) {\n+                            throw JSONRPCTransactionError(TransactionError::MEMPOOL_REJECTED,\n+                                strprintf(\"%s failed: %s\", tx->GetHash().ToString(), it->second.m_state.GetRejectReason()));\n+                        }\n+                    }\n+                    // If a PCKG_TX error was returned, there must have been an invalid transaction.\n+                    NONFATAL_UNREACHABLE();\n+                }\n+            }\n+            for (const auto& tx : txns) {\n+                std::string err_string;\n+                const auto err = BroadcastTransaction(node, tx, err_string, 0, true, true);\n+                if (err != TransactionError::OK) {",
      "path": "src/rpc/mempool.cpp",
      "position": 113,
      "original_position": 112,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "421f28661500de1ce38d429d1a93da32350c0296",
      "in_reply_to_id": 902595822,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Note that we only do this after all the transactions have already been submitted successfully, so the error should be rare (in fact, kind of wondering if I should just put `NONFATAL_UNREACHABLE`). I've added the number of transactions broadcasted to the error string though.",
      "created_at": "2022-06-23T13:47:02Z",
      "updated_at": "2022-06-23T13:49:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r905044272",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/905044272"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 834,
      "original_line": 834,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/905047334",
      "pull_request_review_id": 1017029927,
      "id": 905047334,
      "node_id": "PRRC_kwDOABII58418e0m",
      "diff_hunk": "@@ -306,5 +306,86 @@ def test_rbf(self):\n         }]\n         self.assert_testres_equal(self.independent_txns_hex + [signed_replacement_tx[\"hex\"]], testres_rbf_package)\n \n+    def assert_equal_package_results(self, node, testmempoolaccept_result, submitpackage_result):\n+        \"\"\"Assert that a successful submitpackage result is consistent with testmempoolaccept\n+        results and getmempoolentry info. Note that the result structs are different and, due to\n+        policy differences between testmempoolaccept and submitpackage (i.e. package feerate),\n+        some information may be different.\n+        \"\"\"\n+        for testres_tx in testmempoolaccept_result:\n+            # Grab this result from the submitpackage_result\n+            submitres_tx = submitpackage_result[\"tx-results\"][testres_tx[\"wtxid\"]]\n+            assert_equal(submitres_tx[\"txid\"], testres_tx[\"txid\"])\n+            # No \"allowed\" if the tx was already in the mempool\n+            if \"allowed\" in testres_tx and testres_tx[\"allowed\"]:\n+                assert_equal(submitres_tx[\"vsize\"], testres_tx[\"vsize\"])\n+                assert_equal(submitres_tx[\"fees\"][\"base\"], testres_tx[\"fees\"][\"base\"])\n+            entry_info = node.getmempoolentry(submitres_tx[\"txid\"])\n+            assert_equal(submitres_tx[\"vsize\"], entry_info[\"vsize\"])\n+            assert_equal(submitres_tx[\"fees\"][\"base\"], entry_info[\"fees\"][\"base\"])\n+\n+    def test_submit_child_with_parents(self, num_parents, partial_submit):\n+        node = self.nodes[0]\n+        # Test a package with num_parents parents and 1 child transaction.\n+        package_hex = []\n+        package_txns = []\n+        values = []\n+        scripts = []\n+        for _ in range(num_parents):\n+            parent_coin = self.coins.pop()\n+            value = parent_coin[\"amount\"]\n+            (tx, txhex, value, spk) = make_chain(node, self.address, self.privkeys, parent_coin[\"txid\"], value)\n+            package_hex.append(txhex)\n+            package_txns.append(tx)\n+            values.append(value)\n+            scripts.append(spk)\n+            if partial_submit and random.choice([True, False]):\n+                node.sendrawtransaction(txhex)\n+        child_hex = create_child_with_parents(node, self.address, self.privkeys, package_txns, values, scripts)\n+        package_hex.append(child_hex)\n+        package_txns.append(tx_from_hex(child_hex))\n+\n+        testmempoolaccept_result = node.testmempoolaccept(rawtxs=package_hex)\n+        submitpackage_result = node.submitpackage(package=package_hex)\n+\n+        # Check that each result is present, with the correct size and fees\n+        for i in range(num_parents + 1):\n+            tx = package_txns[i]\n+            wtxid = tx.getwtxid()\n+            assert wtxid in submitpackage_result[\"tx-results\"]\n+            tx_result = submitpackage_result[\"tx-results\"][wtxid]\n+            expected_fee = Decimal(\"0.0001\")\n+            assert_equal(tx_result, {\n+                \"txid\": tx.rehash(),\n+                \"vsize\": tx.get_vsize(),\n+                \"fees\": {\n+                    \"base\": expected_fee,\n+                }\n+            })\n+\n+        # submitpackage result should be consistent with testmempoolaccept and getmempoolentry\n+        self.assert_equal_package_results(node, testmempoolaccept_result, submitpackage_result)\n+\n+        # Package feerate is calculated for the remaining transactions after deduplication and\n+        # individual submission.  If only 0 or 1 transaction is left, e.g. because all transactions",
      "path": "test/functional/rpc_packages.py",
      "position": null,
      "original_position": 101,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "980464989449b3b703c9a11e398b2b246dee163a",
      "in_reply_to_id": 902607877,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Added. Also note that we have more detailed tests for internal logic wrt package feerate in txpackage_tests.cpp",
      "created_at": "2022-06-23T13:49:34Z",
      "updated_at": "2022-06-23T13:49:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r905047334",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/905047334"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 370,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/911036375",
      "pull_request_review_id": 1024888500,
      "id": 911036375,
      "node_id": "PRRC_kwDOABII5842TU_X",
      "diff_hunk": "@@ -729,6 +730,147 @@ static RPCHelpMan savemempool()\n     };\n }\n \n+static RPCHelpMan submitpackage()\n+{\n+    return RPCHelpMan{\"submitpackage\",\n+        \"Submit a package of raw transactions (serialized, hex-encoded) to local node (-regtest only).\\n\"\n+        \"The package will be validated according to consensus and mempool policy rules. If all transactions pass, they will be accepted to mempool.\\n\"\n+        \"This RPC is experimental and the interface may be unstable. Refer to doc/policy/packages.md for documentation on package policies.\\n\"\n+        \"Warning: until package relay is in use, successful submission does not mean the transaction will propagate to other nodes on the network.\\n\"\n+        \"Currently, each transaction is broadcasted individually after submission, which means they must meet other nodes' feerate requirements alone.\\n\"\n+        ,\n+        {\n+            {\"package\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of raw transactions.\",\n+                {\n+                    {\"rawtx\", RPCArg::Type::STR_HEX, RPCArg::Optional::OMITTED, \"\"},\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ_DYN, \"tx-results\", \"transaction results keyed by wtxid\",\n+                {\n+                    {RPCResult::Type::OBJ, \"wtxid\", \"transaction wtxid\", {\n+                        {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n+                        {RPCResult::Type::STR_HEX, \"other-wtxid\", /*optional=*/true, \"The wtxid of a different transaction with the same txid but different witness found in the mempool. This means the submitted transaction was ignored.\"},\n+                        {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::OBJ, \"fees\", \"Transaction fees\", {\n+                            {RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee in \" + CURRENCY_UNIT},\n+                        }},\n+                    }}\n+                }},\n+                {RPCResult::Type::STR_AMOUNT, \"package-feerate\", /*optional=*/true, \"package feerate used for feerate checks in \" + CURRENCY_UNIT + \" per KvB. Excludes transactions which were deduplicated or accepted individually.\"},\n+                {RPCResult::Type::ARR, \"replaced-transactions\", /*optional=*/true, \"List of txids of replaced transactions\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"\", \"The transaction id\"},\n+                }},\n+            },\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"testmempoolaccept\", \"[rawtx1, rawtx2]\") +\n+            HelpExampleCli(\"sendrawtransaction\", \"[rawtx1, rawtx2]\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            if (!Params().IsMockableChain()) {\n+                throw std::runtime_error(\"submitpackage is for regression testing (-regtest mode) only\");\n+            }\n+            RPCTypeCheck(request.params, {\n+                UniValue::VARR,\n+            });\n+            const UniValue raw_transactions = request.params[0].get_array();\n+            if (raw_transactions.size() < 1 || raw_transactions.size() > MAX_PACKAGE_COUNT) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER,\n+                                   \"Array must contain between 1 and \" + ToString(MAX_PACKAGE_COUNT) + \" transactions.\");\n+            }\n+\n+            std::vector<CTransactionRef> txns;\n+            txns.reserve(raw_transactions.size());\n+            for (const auto& rawtx : raw_transactions.getValues()) {\n+                CMutableTransaction mtx;\n+                if (!DecodeHexTx(mtx, rawtx.get_str())) {\n+                    throw JSONRPCError(RPC_DESERIALIZATION_ERROR,\n+                                       \"TX decode failed: \" + rawtx.get_str() + \" Make sure the tx has at least one input.\");\n+                }\n+                txns.emplace_back(MakeTransactionRef(std::move(mtx)));\n+            }\n+\n+            NodeContext& node = EnsureAnyNodeContext(request.context);\n+            CTxMemPool& mempool = EnsureMemPool(node);\n+            CChainState& chainstate = EnsureChainman(node).ActiveChainstate();\n+            const auto package_result = WITH_LOCK(::cs_main, return ProcessNewPackage(chainstate, mempool, txns, /*test_accept=*/ false));\n+\n+            // First catch any errors.\n+            switch(package_result.m_state.GetResult()) {\n+                case PackageValidationResult::PCKG_RESULT_UNSET: break;\n+                case PackageValidationResult::PCKG_POLICY:\n+                {\n+                    throw JSONRPCTransactionError(TransactionError::INVALID_PACKAGE,\n+                        package_result.m_state.GetRejectReason());\n+                }\n+                case PackageValidationResult::PCKG_MEMPOOL_ERROR:\n+                {\n+                    throw JSONRPCTransactionError(TransactionError::MEMPOOL_ERROR,\n+                        package_result.m_state.GetRejectReason());\n+                }\n+                case PackageValidationResult::PCKG_TX:\n+                {\n+                    for (const auto& tx : txns) {\n+                        auto it = package_result.m_tx_results.find(tx->GetWitnessHash());\n+                        if (it != package_result.m_tx_results.end() && it->second.m_state.IsInvalid()) {\n+                            throw JSONRPCTransactionError(TransactionError::MEMPOOL_REJECTED,\n+                                strprintf(\"%s failed: %s\", tx->GetHash().ToString(), it->second.m_state.GetRejectReason()));\n+                        }\n+                    }\n+                    // If a PCKG_TX error was returned, there must have been an invalid transaction.\n+                    NONFATAL_UNREACHABLE();\n+                }\n+            }\n+            for (const auto& tx : txns) {\n+                std::string err_string;\n+                const auto err = BroadcastTransaction(node, tx, err_string, 0, true, true);\n+                if (err != TransactionError::OK) {",
      "path": "src/rpc/mempool.cpp",
      "position": 113,
      "original_position": 112,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "421f28661500de1ce38d429d1a93da32350c0296",
      "in_reply_to_id": 902595822,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "good enough for now",
      "created_at": "2022-06-30T13:36:08Z",
      "updated_at": "2022-06-30T13:59:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r911036375",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/911036375"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 834,
      "original_line": 834,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/911061193",
      "pull_request_review_id": 1024888500,
      "id": 911061193,
      "node_id": "PRRC_kwDOABII5842TbDJ",
      "diff_hunk": "@@ -306,5 +309,127 @@ def test_rbf(self):\n         }]\n         self.assert_testres_equal(self.independent_txns_hex + [signed_replacement_tx[\"hex\"]], testres_rbf_package)\n \n+    def assert_equal_package_results(self, node, testmempoolaccept_result, submitpackage_result):\n+        \"\"\"Assert that a successful submitpackage result is consistent with testmempoolaccept\n+        results and getmempoolentry info. Note that the result structs are different and, due to\n+        policy differences between testmempoolaccept and submitpackage (i.e. package feerate),\n+        some information may be different.\n+        \"\"\"\n+        for testres_tx in testmempoolaccept_result:\n+            # Grab this result from the submitpackage_result\n+            submitres_tx = submitpackage_result[\"tx-results\"][testres_tx[\"wtxid\"]]\n+            assert_equal(submitres_tx[\"txid\"], testres_tx[\"txid\"])\n+            # No \"allowed\" if the tx was already in the mempool\n+            if \"allowed\" in testres_tx and testres_tx[\"allowed\"]:\n+                assert_equal(submitres_tx[\"vsize\"], testres_tx[\"vsize\"])\n+                assert_equal(submitres_tx[\"fees\"][\"base\"], testres_tx[\"fees\"][\"base\"])\n+            entry_info = node.getmempoolentry(submitres_tx[\"txid\"])\n+            assert_equal(submitres_tx[\"vsize\"], entry_info[\"vsize\"])\n+            assert_equal(submitres_tx[\"fees\"][\"base\"], entry_info[\"fees\"][\"base\"])\n+\n+    def test_submit_child_with_parents(self, num_parents, partial_submit):\n+        node = self.nodes[0]\n+        peer = node.add_p2p_connection(P2PTxInvStore())\n+        # Test a package with num_parents parents and 1 child transaction.\n+        package_hex = []\n+        package_txns = []\n+        values = []\n+        scripts = []\n+        for _ in range(num_parents):\n+            parent_coin = self.coins.pop()\n+            value = parent_coin[\"amount\"]\n+            (tx, txhex, value, spk) = make_chain(node, self.address, self.privkeys, parent_coin[\"txid\"], value)\n+            package_hex.append(txhex)\n+            package_txns.append(tx)\n+            values.append(value)\n+            scripts.append(spk)\n+            if partial_submit and random.choice([True, False]):\n+                node.sendrawtransaction(txhex)\n+        child_hex = create_child_with_parents(node, self.address, self.privkeys, package_txns, values, scripts)\n+        package_hex.append(child_hex)\n+        package_txns.append(tx_from_hex(child_hex))\n+\n+        testmempoolaccept_result = node.testmempoolaccept(rawtxs=package_hex)\n+        submitpackage_result = node.submitpackage(package=package_hex)\n+\n+        # Check that each result is present, with the correct size and fees\n+        for i in range(num_parents + 1):\n+            tx = package_txns[i]\n+            wtxid = tx.getwtxid()\n+            assert wtxid in submitpackage_result[\"tx-results\"]\n+            tx_result = submitpackage_result[\"tx-results\"][wtxid]\n+            assert_equal(tx_result, {\n+                \"txid\": tx.rehash(),\n+                \"vsize\": tx.get_vsize(),\n+                \"fees\": {\n+                    \"base\": DEFAULT_FEE,\n+                }\n+            })\n+\n+        # submitpackage result should be consistent with testmempoolaccept and getmempoolentry\n+        self.assert_equal_package_results(node, testmempoolaccept_result, submitpackage_result)\n+\n+        # Package feerate is calculated for the remaining transactions after deduplication and\n+        # individual submission. If only 0 or 1 transaction is left, e.g. because all transactions\n+        # had high-feerates or were already in the mempool, no package feerate is provided.\n+        # In this case, since all of the parents have high fees, each is accepted individually.\n+        assert \"package-feerate\" not in submitpackage_result\n+\n+        # The node should announce each transaction. No guarantees for propagation.\n+        peer.wait_for_broadcast([tx.getwtxid() for tx in package_txns])\n+        self.generate(node, 1)\n+\n+\n+    def test_submit_cpfp(self):\n+        node = self.nodes[0]\n+        peer = node.add_p2p_connection(P2PTxInvStore())\n+\n+        # 2 parent 1 child CPFP. First parent pays high fees, second parent pays 0 fees and is\n+        # fee-bumped by the child.\n+        coin_rich = self.coins.pop()\n+        coin_poor = self.coins.pop()\n+        tx_rich, hex_rich, value_rich, spk_rich = make_chain(node, self.address, self.privkeys, coin_rich[\"txid\"], coin_rich[\"amount\"])\n+        tx_poor, hex_poor, value_poor, spk_poor = make_chain(node, self.address, self.privkeys, coin_poor[\"txid\"], coin_poor[\"amount\"], fee=0)\n+        package_txns = [tx_rich, tx_poor]\n+        hex_child = create_child_with_parents(node, self.address, self.privkeys, package_txns, [value_rich, value_poor], [spk_rich, spk_poor])\n+        tx_child = tx_from_hex(hex_child)\n+        package_txns.append(tx_child)\n+\n+        submitpackage_result = node.submitpackage([hex_rich, hex_poor, hex_child])\n+\n+        rich_parent_result = submitpackage_result[\"tx-results\"][tx_rich.getwtxid()]\n+        poor_parent_result = submitpackage_result[\"tx-results\"][tx_poor.getwtxid()]\n+        child_result = submitpackage_result[\"tx-results\"][tx_child.getwtxid()]\n+        assert_equal(rich_parent_result[\"fees\"][\"base\"], DEFAULT_FEE)\n+        assert_equal(poor_parent_result[\"fees\"][\"base\"], 0)\n+        assert_equal(child_result[\"fees\"][\"base\"], DEFAULT_FEE)\n+        # Package feerate is calculated for the remaining transactions after deduplication and\n+        # individual submission. Since this package had a 0-fee parent, package feerate must have\n+        # been used and returned.\n+        assert \"package-feerate\" in submitpackage_result\n+        assert_fee_amount(DEFAULT_FEE, rich_parent_result[\"vsize\"] + child_result[\"vsize\"], submitpackage_result[\"package-feerate\"])\n+\n+        # The node will broadcast each transaction, still abiding by its peer's fee filter",
      "path": "test/functional/rpc_packages.py",
      "position": 153,
      "original_position": 153,
      "commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "original_commit_id": "e866f0d0666664885d4c15c79bf59cc59975887a",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "future work: would be nice if \"abiding by its peer's fee filter\" had test coverage rather than a comment to prevent future regressions",
      "created_at": "2022-06-30T13:57:21Z",
      "updated_at": "2022-06-30T13:59:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24836#discussion_r911061193",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/911061193"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24836"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 412,
      "original_line": 412,
      "side": "RIGHT"
    }
  ]
}