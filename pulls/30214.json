{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30214",
    "id": 1898129875,
    "node_id": "PR_kwDOABII585xIynT",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/30214",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/30214.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/30214.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30214",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30214/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30214/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30214/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/f80b0385be4396723749e10c445b175163d28b94",
    "number": 30214,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "refactor: Improve assumeutxo state representation",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This PR contains the first part of #28608, which tries to make assumeutxo code more maintainable, and improve it by not locking `cs_main` for a long time when the snapshot block is connected, and by deleting the snapshot validation chainstate when it is no longer used, instead of waiting until the next restart.\r\n\r\nThe changes in this PR are just refactoring. They make `Chainstate` objects self-contained, so for example, it is possible to determine what blocks to connect to a chainstate without querying `ChainstateManager`, and to determine whether a Chainstate is validated without basing it on inferences like `&cs != &ActiveChainstate()` or `GetAll().size() == 1`.\r\n\r\nThe PR also tries to make assumeutxo terminology less confusing, using \"current chainstate\" to refer to the chainstate targeting the current network tip, and \"historical chainstate\" to refer to the chainstate downloading old blocks and validating the assumeutxo snapshot. It removes uses of the terms \"active chainstate,\" \"usable chainstate,\" \"disabled chainstate,\" \"ibd chainstate,\" and \"snapshot chainstate\" which are confusing for various reasons.",
    "labels": [
      {
        "id": 135961,
        "node_id": "MDU6TGFiZWwxMzU5NjE=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
        "name": "Refactoring",
        "color": "E6F6D6",
        "default": false
      },
      {
        "id": 5334691551,
        "node_id": "LA_kwDOABII588AAAABPfju3w",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
        "name": "CI failed",
        "description": "",
        "color": "cccccc",
        "default": false
      }
    ],
    "created_at": "2024-05-31T14:53:10Z",
    "updated_at": "2024-05-31T19:56:39Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "490153ee2ad57cd555616f00953da3205a0b852e",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "ryanofsky:pr/cstate",
      "ref": "pr/cstate",
      "sha": "f80b0385be4396723749e10c445b175163d28b94",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 69901633,
        "node_id": "MDEwOlJlcG9zaXRvcnk2OTkwMTYzMw==",
        "name": "bitcoin",
        "full_name": "ryanofsky/bitcoin",
        "owner": {
          "login": "ryanofsky",
          "id": 7133040,
          "node_id": "MDQ6VXNlcjcxMzMwNDA=",
          "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/ryanofsky",
          "html_url": "https://github.com/ryanofsky",
          "followers_url": "https://api.github.com/users/ryanofsky/followers",
          "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
          "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
          "repos_url": "https://api.github.com/users/ryanofsky/repos",
          "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/ryanofsky/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/ryanofsky/bitcoin",
        "archive_url": "https://api.github.com/repos/ryanofsky/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/ryanofsky/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/ryanofsky/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/ryanofsky/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/ryanofsky/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/ryanofsky/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/ryanofsky/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/ryanofsky/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/ryanofsky/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/ryanofsky/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/ryanofsky/bitcoin/events",
        "forks_url": "https://api.github.com/repos/ryanofsky/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/ryanofsky/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/ryanofsky/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/ryanofsky/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/ryanofsky/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/ryanofsky/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/ryanofsky/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/ryanofsky/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/ryanofsky/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/ryanofsky/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/ryanofsky/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/ryanofsky/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/ryanofsky/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:ryanofsky/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/ryanofsky/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/ryanofsky/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/ryanofsky/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/ryanofsky/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/ryanofsky/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/ryanofsky/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/ryanofsky/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/ryanofsky/bitcoin/hooks",
        "svn_url": "https://github.com/ryanofsky/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 9,
        "stargazers_count": 12,
        "watchers_count": 12,
        "size": 256312,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-05-31T14:30:42Z",
        "created_at": "2016-10-03T19:05:43Z",
        "updated_at": "2024-01-25T23:52:08Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "457e1846d2bf6ef9d54b9ba1a330ba8bbff13091",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35443,
        "stargazers_count": 76611,
        "watchers_count": 76611,
        "size": 260011,
        "default_branch": "master",
        "open_issues_count": 695,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-05-31T19:36:20Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2024-05-31T17:59:21Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30214"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 663,
    "deletions": 716,
    "changed_files": 38,
    "commits": 16,
    "review_comments": 0,
    "comments": 2
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDMxODRlMTllYjRhNjliYjM4MDgwZmZmMTFkYjUyNTdjNzZlZDJhNjE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3184e19eb4a69bb38080fff11db5257c76ed2a61",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3184e19eb4a69bb38080fff11db5257c76ed2a61",
      "tree": {
        "sha": "a0d1b345885abce4b67af4577979858caa14c4a4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a0d1b345885abce4b67af4577979858caa14c4a4"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/62f7f59ff495fbcbfc10c25e97bb0dc032647abf",
          "sha": "62f7f59ff495fbcbfc10c25e97bb0dc032647abf",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/62f7f59ff495fbcbfc10c25e97bb0dc032647abf"
        }
      ],
      "message": "test: Fix broken chainstatemanager_snapshot_init check\n\nThe following test code never checked anything because the if statement was\nalways false:\n\n    if (cs != &chainman_restarted.ActiveChainstate()) {\n        BOOST_CHECK_EQUAL(cs->m_chain.Height(), 109);\n    }\n\nAlso, the height of the background chainstate it was intending to check is 110,\nnot 109. Fix both problems by rewriting the check.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-31T10:53:50Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-31T10:53:50Z"
      },
      "sha": "3184e19eb4a69bb38080fff11db5257c76ed2a61"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGRjYmYxMDRhY2U2OGJkMDEwMGFlNzA3YmFhMzdhZGQzYjllYjI0ODQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/dcbf104ace68bd0100ae707baa37add3b9eb2484",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/dcbf104ace68bd0100ae707baa37add3b9eb2484",
      "tree": {
        "sha": "528fe4f6fdfb5bed8d9af61df31bbdc3ef32df92",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/528fe4f6fdfb5bed8d9af61df31bbdc3ef32df92"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3184e19eb4a69bb38080fff11db5257c76ed2a61",
          "sha": "3184e19eb4a69bb38080fff11db5257c76ed2a61",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/3184e19eb4a69bb38080fff11db5257c76ed2a61"
        }
      ],
      "message": "refactor: Add Chainstate::m_target_blockhash member\n\nMake Chainstate objects aware of what block they are targeting. This makes\nChainstate objects more self contained, so it's possible to determine what\nblocks should be downloaded and connected to them without needing to query\nChainstateManager or look at other Chainstate objects.\n\nThe motivation for this change is to make code more readable, so it only\nrequires knowing about Chainstate targets, not reasoning about the assumeutxo\nsnapshot validation sequence. This change also enables simplifications to the\nChainstateManager interface in subsequent commits, and could make it easier to\nimplement new features like creating new CHainstate objects to generate UTXO\nsnapshots or index UTXO data.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-31T10:53:50Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-30T00:27:27Z"
      },
      "sha": "dcbf104ace68bd0100ae707baa37add3b9eb2484"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDhjMGUzNTg4NzQ4OTIwMzE5MGM1YzU0NWNmMWE5YjRiNzIzNjJjZTk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8c0e35887489203190c5c545cf1a9b4b72362ce9",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8c0e35887489203190c5c545cf1a9b4b72362ce9",
      "tree": {
        "sha": "358cf89f45fcc14a44764dd571847d1f4b6ea76e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/358cf89f45fcc14a44764dd571847d1f4b6ea76e"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/dcbf104ace68bd0100ae707baa37add3b9eb2484",
          "sha": "dcbf104ace68bd0100ae707baa37add3b9eb2484",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/dcbf104ace68bd0100ae707baa37add3b9eb2484"
        }
      ],
      "message": "refactor: Add Chainstate m_validity and m_target_blockhash members\n\nGet rid of m_disabled/IsUsable members. Instead of marking chains disabled for\ndifferent reasons, record chainstate validity and validation progress\nexplicitly and use that information directly.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-31T10:53:50Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-30T12:55:17Z"
      },
      "sha": "8c0e35887489203190c5c545cf1a9b4b72362ce9"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDgxYjM1YWIxNThmMGVlNzJlYzAyM2ViOGJhODM4YzVjMmU1ZTJhMTY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/81b35ab158f0ee72ec023eb8ba838c5c2e5e2a16",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/81b35ab158f0ee72ec023eb8ba838c5c2e5e2a16",
      "tree": {
        "sha": "b058d19a9d3a3e5f71409f22b4caaf7518024ae5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b058d19a9d3a3e5f71409f22b4caaf7518024ae5"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8c0e35887489203190c5c545cf1a9b4b72362ce9",
          "sha": "8c0e35887489203190c5c545cf1a9b4b72362ce9",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8c0e35887489203190c5c545cf1a9b4b72362ce9"
        }
      ],
      "message": "refactor: Deduplicate Chainstate activation code\n\nMove duplicate code from ChainstateManager::ActivateSnapshot and\nChainstateManager::ActivateExistingSnapshot methods to a new\nChainstateManager::AddChainstate method.\n\nThe \"AddChainstate\" method name doesn't mention snapshots even though it is\nonly used to add snapshot chainstates now, because it becomes more generalized\nin a later commit in this PR (\"refactor: Add ChainstateManager::m_chainstates\nmember\")",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-31T10:53:50Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-30T13:42:03Z"
      },
      "sha": "81b35ab158f0ee72ec023eb8ba838c5c2e5e2a16"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDljZTZhYjEyZGQzNWYyZjdkY2NhYzQ4YjgyYjk4ZmQzMDRmNDY4NjY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9ce6ab12dd35f2f7dccac48b82b98fd304f46866",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/9ce6ab12dd35f2f7dccac48b82b98fd304f46866",
      "tree": {
        "sha": "27923187fec63c5ef27cf0bb9baa1b40116d8930",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/27923187fec63c5ef27cf0bb9baa1b40116d8930"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/81b35ab158f0ee72ec023eb8ba838c5c2e5e2a16",
          "sha": "81b35ab158f0ee72ec023eb8ba838c5c2e5e2a16",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/81b35ab158f0ee72ec023eb8ba838c5c2e5e2a16"
        }
      ],
      "message": "refactor: Pass chainstate parameters to MaybeCompleteSnapshotValidation\n\nRemove hardcoded references to m_ibd_chainstate and m_snapshot_chainstate so\nMaybeCompleteSnapshotValidation function can be simpler and focus on validating\nthe snapshot without dealing with internal ChainstateManager states.\n\nThis is a step towards being able to validate the snapshot outside of\nActivateBestChain loop so cs_main is not locked for minutes when the snapshot\nblock is connected.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-31T13:17:10Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-31T13:17:10Z"
      },
      "sha": "9ce6ab12dd35f2f7dccac48b82b98fd304f46866"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDdmYTI2MmI0YTUzZDg0Y2FlZWZlNGYxODU2NTRjZjAxMjk2OWYxMWE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7fa262b4a53d84caeefe4f185654cf012969f11a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/7fa262b4a53d84caeefe4f185654cf012969f11a",
      "tree": {
        "sha": "0a55ae2d187575e8304c204aa81bbba3ab1f3235",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0a55ae2d187575e8304c204aa81bbba3ab1f3235"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9ce6ab12dd35f2f7dccac48b82b98fd304f46866",
          "sha": "9ce6ab12dd35f2f7dccac48b82b98fd304f46866",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/9ce6ab12dd35f2f7dccac48b82b98fd304f46866"
        }
      ],
      "message": "refactor: Add Chainstate::StoragePath() method\n\nUse to simplify code determining the chainstate leveldb paths.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-31T13:17:10Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-30T15:25:04Z"
      },
      "sha": "7fa262b4a53d84caeefe4f185654cf012969f11a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGUxMWRlMDE0MGI1MzNiZTc5ZjFiZjdjNWQ0ZmU0Y2E5ODk4YTRiMDI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e11de0140b533be79f1bf7c5d4fe4ca9898a4b02",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e11de0140b533be79f1bf7c5d4fe4ca9898a4b02",
      "tree": {
        "sha": "094647a63db8ee9ce27fb498a932b68ac089f0cb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/094647a63db8ee9ce27fb498a932b68ac089f0cb"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7fa262b4a53d84caeefe4f185654cf012969f11a",
          "sha": "7fa262b4a53d84caeefe4f185654cf012969f11a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/7fa262b4a53d84caeefe4f185654cf012969f11a"
        }
      ],
      "message": "refactor: Add ChainstateManager::CurrentChainstate() method\n\nCurrentChainstate() is basically the same as ActiveChainstate() except it\nrequires cs_main to be locked when it is called, instead of locking cs_main\ninternally.\n\nThe name \"current\" should also be less confusing than \"active\" because multiple\nchainstates can be active, and CurrentChainstate() returns the chainstate\ntargeting the current network tip, regardless of what chainstates are being\ndownloaded or how they are used.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-31T13:17:10Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-30T16:03:47Z"
      },
      "sha": "e11de0140b533be79f1bf7c5d4fe4ca9898a4b02"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQ0NzNhZWI5ZDU1OGJlNWIwNjZjOWNkMTNlZjBlYmMxNWEwZjFhYWU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d473aeb9d558be5b066c9cd13ef0ebc15a0f1aae",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d473aeb9d558be5b066c9cd13ef0ebc15a0f1aae",
      "tree": {
        "sha": "02ba46e9b549195db8cac597f5b959bd85e87411",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/02ba46e9b549195db8cac597f5b959bd85e87411"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e11de0140b533be79f1bf7c5d4fe4ca9898a4b02",
          "sha": "e11de0140b533be79f1bf7c5d4fe4ca9898a4b02",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e11de0140b533be79f1bf7c5d4fe4ca9898a4b02"
        }
      ],
      "message": "refactor: Add ChainstateManager::ValidatedChainstate() method\n\nValidatedChainstate() accessor replaces GetChainstateForIndexing() with no\nchange in behavior.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-31T13:17:10Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-30T16:03:47Z"
      },
      "sha": "d473aeb9d558be5b066c9cd13ef0ebc15a0f1aae"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGMyODc1ODFmYzRhMWViYTMyYzM1MzFlMzk3NTljY2Y3NzJkOWNhMTI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c287581fc4a1eba32c3531e39759ccf772d9ca12",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c287581fc4a1eba32c3531e39759ccf772d9ca12",
      "tree": {
        "sha": "ded611dd8e41367a425d886d0f3dbda26856567f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ded611dd8e41367a425d886d0f3dbda26856567f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d473aeb9d558be5b066c9cd13ef0ebc15a0f1aae",
          "sha": "d473aeb9d558be5b066c9cd13ef0ebc15a0f1aae",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d473aeb9d558be5b066c9cd13ef0ebc15a0f1aae"
        }
      ],
      "message": "refactor: Convert ChainstateRole enum to struct\n\nChange ChainstateRole parameter passed to wallets and indexes. Wallets and\nindexes need to know whether chainstate is historial and whether it is fully\nvalidated. They should not be aware of the assumeutxo snapshot validation\nprocess.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-31T13:17:10Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-03-19T16:37:18Z"
      },
      "sha": "c287581fc4a1eba32c3531e39759ccf772d9ca12"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDlhNmFkM2JlMzUyOWRiODVkM2JiNzhhOTkyMmQzMWQ3MzFjOGM3OTc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9a6ad3be3529db85d3bb78a9922d31d731c8c797",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/9a6ad3be3529db85d3bb78a9922d31d731c8c797",
      "tree": {
        "sha": "8a45b0574ecb4051abba49211a4de4009def369c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8a45b0574ecb4051abba49211a4de4009def369c"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c287581fc4a1eba32c3531e39759ccf772d9ca12",
          "sha": "c287581fc4a1eba32c3531e39759ccf772d9ca12",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c287581fc4a1eba32c3531e39759ccf772d9ca12"
        }
      ],
      "message": "refactor: Delete ChainstateManager::IsSnapshotActive() method\n\nIsSnapshotActive() method is only called one place outside of tests and\nasserts, and is confusing because it returns true even after the snapshot is\nfully validated.\n\nThe documentation which said this \"implies that a background validation\nchainstate is also in use\" is also incorrect, because after the snapshot is\nvalidated, the background chainstate gets disabled and IsUsable() would return\nfalse.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-31T13:17:10Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-31T11:00:40Z"
      },
      "sha": "9a6ad3be3529db85d3bb78a9922d31d731c8c797"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDIyZTQxOTlkZmU2NjM3YjJiOWQ4YjlkNjFkZDk4ZjQ0YWFkNWJkOTg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/22e4199dfe6637b2b9d8b9d61dd98f44aad5bd98",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/22e4199dfe6637b2b9d8b9d61dd98f44aad5bd98",
      "tree": {
        "sha": "de4a141328dc297f56a3c95bbd90f8efcea6dc52",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/de4a141328dc297f56a3c95bbd90f8efcea6dc52"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9a6ad3be3529db85d3bb78a9922d31d731c8c797",
          "sha": "9a6ad3be3529db85d3bb78a9922d31d731c8c797",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/9a6ad3be3529db85d3bb78a9922d31d731c8c797"
        }
      ],
      "message": "refactor: Delete ChainstateManager::IsSnapshotValidated() method\n\nIsSnapshotValidated() is only called one place outside of tests, and is use\nredundantly in some tests, asserting that a snapshot is not validated when a\nsnapshot chainstate does not even exist. Simplify by dropping the method and\nchecking Chainstate validity field directly.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-31T13:17:10Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-30T20:14:42Z"
      },
      "sha": "22e4199dfe6637b2b9d8b9d61dd98f44aad5bd98"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDM1ZWYyZWZhOTY4ODQ0YTVjNWM0OTdmMjA0MWRkMjhjZTE1NzViNmY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/35ef2efa968844a5c5c497f2041dd28ce1575b6f",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/35ef2efa968844a5c5c497f2041dd28ce1575b6f",
      "tree": {
        "sha": "44919a6f8c87013654cffc446c2bcb98d6ae8d29",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/44919a6f8c87013654cffc446c2bcb98d6ae8d29"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/22e4199dfe6637b2b9d8b9d61dd98f44aad5bd98",
          "sha": "22e4199dfe6637b2b9d8b9d61dd98f44aad5bd98",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/22e4199dfe6637b2b9d8b9d61dd98f44aad5bd98"
        }
      ],
      "message": "refactor: Delete ChainstateManager::SnapshotBlockhash() method\n\nSnapshotBlockhash() is only called one place outside of tests, and is used\nredundantly in some tests, checking the same field as other checks. Simplify by\ndropping the method and using the m_from_snapshot_blockhash field directly.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-31T13:17:10Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-30T20:30:22Z"
      },
      "sha": "35ef2efa968844a5c5c497f2041dd28ce1575b6f"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGIyZTY2ZDQ4NGFlOTAwZThiOTU2N2YxYzgyYTAyMGU0OTkxMTE4N2E",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b2e66d484ae900e8b9567f1c82a020e49911187a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b2e66d484ae900e8b9567f1c82a020e49911187a",
      "tree": {
        "sha": "b31d037fe00e67a23919109f6b70f46f4932b04d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b31d037fe00e67a23919109f6b70f46f4932b04d"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/35ef2efa968844a5c5c497f2041dd28ce1575b6f",
          "sha": "35ef2efa968844a5c5c497f2041dd28ce1575b6f",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/35ef2efa968844a5c5c497f2041dd28ce1575b6f"
        }
      ],
      "message": "refactor: Add ChainstateManager::m_chainstates member\n\nUse to replace m_active_chainstate, m_ibd_chainstate, and m_snapshot_chainstate\nmembers.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-31T13:17:10Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-30T17:26:01Z"
      },
      "sha": "b2e66d484ae900e8b9567f1c82a020e49911187a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDcxNDJjYjk2Y2IxYjY4NGU0N2VkODcwZGI1YzQxOWU3NmI1MjRiZGE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7142cb96cb1b684e47ed870db5c419e76b524bda",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/7142cb96cb1b684e47ed870db5c419e76b524bda",
      "tree": {
        "sha": "a126201de9161376891a9ab218f877f4259b5a95",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a126201de9161376891a9ab218f877f4259b5a95"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b2e66d484ae900e8b9567f1c82a020e49911187a",
          "sha": "b2e66d484ae900e8b9567f1c82a020e49911187a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b2e66d484ae900e8b9567f1c82a020e49911187a"
        }
      ],
      "message": "refactor: Add ChainstateManager::ActivateBestChains() method\n\nDeduplicate code looping over chainstate objects and calling\nActivateBestChain().",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-31T13:17:10Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-30T18:52:28Z"
      },
      "sha": "7142cb96cb1b684e47ed870db5c419e76b524bda"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDZhY2JlNzhiMzI1NmU2YjMyMWM3ODdhN2FlMWVhZjY1YzE4NmEzMDc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6acbe78b3256e6b321c787a7ae1eaf65c186a307",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/6acbe78b3256e6b321c787a7ae1eaf65c186a307",
      "tree": {
        "sha": "889af068c5a2cc6c655167c9568f2f61f7c298b8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/889af068c5a2cc6c655167c9568f2f61f7c298b8"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7142cb96cb1b684e47ed870db5c419e76b524bda",
          "sha": "7142cb96cb1b684e47ed870db5c419e76b524bda",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/7142cb96cb1b684e47ed870db5c419e76b524bda"
        }
      ],
      "message": "refactor: Delete ChainstateManager::GetAll() method\n\nJust use m_chainstates array instead.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-31T13:17:10Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-30T23:45:14Z"
      },
      "sha": "6acbe78b3256e6b321c787a7ae1eaf65c186a307"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGY4MGIwMzg1YmU0Mzk2NzIzNzQ5ZTEwYzQ0NWIxNzUxNjNkMjhiOTQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f80b0385be4396723749e10c445b175163d28b94",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f80b0385be4396723749e10c445b175163d28b94",
      "tree": {
        "sha": "2951911391e32d0367e09e9b20c7b8766327c04c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2951911391e32d0367e09e9b20c7b8766327c04c"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6acbe78b3256e6b321c787a7ae1eaf65c186a307",
          "sha": "6acbe78b3256e6b321c787a7ae1eaf65c186a307",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/6acbe78b3256e6b321c787a7ae1eaf65c186a307"
        }
      ],
      "message": "doc: Improve ChainstateManager documentation, use consistent terms",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-31T13:17:10Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-30T23:50:47Z"
      },
      "sha": "f80b0385be4396723749e10c445b175163d28b94"
    },
    {
      "event": "commented",
      "id": 2142439540,
      "node_id": "IC_kwDOABII585_swh0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2142439540",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-31T14:53:13Z",
      "updated_at": "2024-05-31T14:53:14Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/30214).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30214#issuecomment-2142439540",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30214"
    },
    {
      "event": "labeled",
      "id": 13001884170,
      "node_id": "LE_lADOABII586KwuWzzwAAAAMG-QIK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13001884170",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-31T14:53:15Z",
      "label": {
        "name": "Refactoring",
        "color": "E6F6D6"
      }
    },
    {
      "event": "labeled",
      "id": 13005246304,
      "node_id": "LE_lADOABII586KwuWzzwAAAAMHLE9g",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13005246304",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-31T19:56:38Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2142897707,
      "node_id": "IC_kwDOABII585_ugYr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2142897707",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-31T19:56:39Z",
      "updated_at": "2024-05-31T19:56:39Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n\n At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/25656143496</sub>",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30214#issuecomment-2142897707",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30214"
    }
  ],
  "comments": []
}