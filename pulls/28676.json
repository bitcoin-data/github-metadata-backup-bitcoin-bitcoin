{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676",
    "id": 1563273625,
    "node_id": "PR_kwDOABII585dLamZ",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/28676",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/28676.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/28676.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/58a60d695eb860180780c41ac57d8f38305841a5",
    "number": 28676,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": false,
    "title": "[WIP] Cluster mempool implementation",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This is a draft implementation of the cluster mempool design described in #27677.  I'm opening this as a draft PR now to share the branch I'm working on with others, so that we can start to think about in-progress projects (like package relay, package validation, and package rbf) in the context of this design.  Also, I can use some help from others for parts of this work, including the interaction between the mempool and the wallet, and also reworking some of our existing test cases to fit a cluster-mempool world.\r\n\r\nNote that the design of this implementation is subject to change as I continue to iterate on the code (to make the code more hygienic and robust, in particular). At this point though I think the performance is pretty reasonable and I'm not currently aware of any bugs.  There are some microbenchmarks added here, and some improved fuzz tests; it would be great if others ran both of those on their own hardware as well and reported back on any findings.\r\n\r\nThis branch implements the following observable behavior changes:\r\n\r\n- Maintains a partitioning of the mempool into connected clusters\r\n- Each cluster is sorted (\"linearized\") either using an optimal sort, or an ancestor-feerate-based one, depending on the size of the cluster (thanks to @sipa for this logic)\r\n- Transaction selection for mining is updated to use the cluster linearizations\r\n- Mempool eviction is updated to use the cluster linearizations\r\n- The RBF rules are updated to drop the requirement that no new inputs are introduced, and to change the feerate requirement to instead check that the mining score of a replacement transaction exceed the mining score of the conflicted transactions\r\n- The CPFP carveout rule is eliminated (it doesn't make sense in a cluster-limited mempool)\r\n- The ancestor and descendant limits are no longer enforced.\r\n- New cluster count/cluster vsize limits are now enforced instead.\r\n\r\nSome less observable behavior changes:\r\n- The cached ancestor and descendant data are dropped from the mempool, along with the multi_index indices that were maintained to sort the mempool by ancestor and descendant feerates. For compatibility (eg with wallet behavior or RPCs exposing this), this information is now calculated dynamically instead.\r\n- The ancestor and descendant walking algorithms are now implemented using `epoch`s (resulting in a significant performance improvement, according to the benchmarks I've looked at)\r\n\r\nStill to do:\r\n\r\n- [ ] More comparisons between this branch and master on historical data to compare validation speed (accepting loose transactions, processing RBF transactions, validating a block/postprocessing, updating the mempool for a reorg).\r\n- [ ] More historical data analysis to try to evaluate the likely impact of setting the cluster size limits to varying values (to motivate what values we should ultimately pick)\r\n- [ ] Updating wallet code to be cluster-aware (including mini_miner and coin selection)\r\n- [ ] Rework many of our functional tests to be cluster-aware\r\n- [ ] Figure out what package validation and package RBF rules should be in this design\r\n- [ ] Rework the `partially_downloaded_block` fuzz target to not add mempool transactions in a topologically-invalid way.\r\n- [ ] Update RBF logic to ensure that replacements always strictly improve the mempool.\r\n\r\nFor discussion/feedback:\r\n\r\n - How significant is it to be dropping the CPFP carveout rule?  Does that affect how we will ultimately want to stage new mempool deployment?\r\n - How well do the proposed RBF rules meet everyone's use cases?\r\n - What design improvements can we make to the cluster tracking implementation?\r\n - The ZMQ callbacks that occur when a block is found will happen in a slightly different order, because we now will fully remove all transactions occurring in a block from the mempool before removing any conflicts. Is this a problem?",
    "labels": [
      {
        "id": 164208572,
        "node_id": "MDU6TGFiZWwxNjQyMDg1NzI=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mempool",
        "name": "Mempool",
        "color": "fef2c0",
        "default": false
      },
      {
        "id": 955867938,
        "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
        "name": "Needs rebase",
        "description": "",
        "color": "cccccc",
        "default": false
      },
      {
        "id": 5334691551,
        "node_id": "LA_kwDOABII588AAAABPfju3w",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
        "name": "CI failed",
        "description": "",
        "color": "cccccc",
        "default": false
      }
    ],
    "created_at": "2023-10-18T18:59:37Z",
    "updated_at": "2023-12-06T20:01:38Z",
    "mergeable": false,
    "mergeable_state": "dirty",
    "merge_commit_sha": "a9a2db67ae6cdf9e66d4850722c3fa8eb44fb1a5",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": false,
    "head": {
      "label": "sdaftuar:2023-10-cluster-mempool",
      "ref": "2023-10-cluster-mempool",
      "sha": "58a60d695eb860180780c41ac57d8f38305841a5",
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 28761781,
        "node_id": "MDEwOlJlcG9zaXRvcnkyODc2MTc4MQ==",
        "name": "bitcoin",
        "full_name": "sdaftuar/bitcoin",
        "owner": {
          "login": "sdaftuar",
          "id": 7463573,
          "node_id": "MDQ6VXNlcjc0NjM1NzM=",
          "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/sdaftuar",
          "html_url": "https://github.com/sdaftuar",
          "followers_url": "https://api.github.com/users/sdaftuar/followers",
          "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
          "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
          "repos_url": "https://api.github.com/users/sdaftuar/repos",
          "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/sdaftuar/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/sdaftuar/bitcoin",
        "archive_url": "https://api.github.com/repos/sdaftuar/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/sdaftuar/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/sdaftuar/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/sdaftuar/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/sdaftuar/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/sdaftuar/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/sdaftuar/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/sdaftuar/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/sdaftuar/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/sdaftuar/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/sdaftuar/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/sdaftuar/bitcoin/events",
        "forks_url": "https://api.github.com/repos/sdaftuar/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/sdaftuar/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/sdaftuar/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/sdaftuar/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/sdaftuar/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/sdaftuar/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/sdaftuar/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/sdaftuar/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/sdaftuar/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/sdaftuar/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/sdaftuar/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/sdaftuar/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/sdaftuar/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/sdaftuar/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/sdaftuar/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/sdaftuar/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:sdaftuar/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/sdaftuar/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/sdaftuar/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/sdaftuar/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/sdaftuar/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/sdaftuar/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/sdaftuar/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/sdaftuar/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/sdaftuar/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/sdaftuar/bitcoin/hooks",
        "svn_url": "https://github.com/sdaftuar/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 2,
        "stargazers_count": 5,
        "watchers_count": 5,
        "size": 254679,
        "default_branch": "master",
        "open_issues_count": 1,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-12-06T20:01:36Z",
        "created_at": "2015-01-04T02:52:13Z",
        "updated_at": "2023-08-29T03:04:00Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "2e8ec6b338a825a7155fff1be83993e3834ab655",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 36088,
        "stargazers_count": 72504,
        "watchers_count": 72504,
        "size": 246340,
        "default_branch": "master",
        "open_issues_count": 653,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-12-06T20:43:59Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-12-06T20:41:37Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
      }
    },
    "author_association": "MEMBER",
    "draft": true,
    "additions": 3903,
    "deletions": 2143,
    "changed_files": 46,
    "commits": 54,
    "review_comments": 31,
    "comments": 6
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDdhNjhjMDBmZmIyNjA0YzIwZGNmNDYwMTlmNmQ2YzIyYWE0NzViZTE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7a68c00ffb2604c20dcf46019f6d6c22aa475be1",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/7a68c00ffb2604c20dcf46019f6d6c22aa475be1",
      "tree": {
        "sha": "1ce07d7fd1064d6d40d98fe5cf0b1cca0be6a754",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1ce07d7fd1064d6d40d98fe5cf0b1cca0be6a754"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c2d4e40e454ba0c7c836a849b6d15db4850079f2",
          "sha": "c2d4e40e454ba0c7c836a849b6d15db4850079f2",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c2d4e40e454ba0c7c836a849b6d15db4850079f2"
        }
      ],
      "message": "==== BEGIN CLUSTER IMPLEMENTATION ====",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-18T14:04:30Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-17T15:35:49Z"
      },
      "sha": "7a68c00ffb2604c20dcf46019f6d6c22aa475be1"
    },
    {
      "event": "mentioned",
      "id": 10697854902,
      "node_id": "MEE_lADOABII5850QVJBzwAAAAJ9pE-2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10697854902",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-18T18:59:38Z"
    },
    {
      "event": "subscribed",
      "id": 10697854917,
      "node_id": "SE_lADOABII5850QVJBzwAAAAJ9pE_F",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10697854917",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-18T18:59:38Z"
    },
    {
      "event": "commented",
      "id": 1769143762,
      "node_id": "IC_kwDOABII585pcv3S",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1769143762",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-18T18:59:40Z",
      "updated_at": "2023-10-29T14:32:34Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/28676).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#28737](https://github.com/bitcoin/bitcoin/pull/28737) (doc: Fix bugprone-lambda-function-name errors by maflcko)\n* [#28687](https://github.com/bitcoin/bitcoin/pull/28687) ([POC][WIP] C++20 std::views::reverse by stickies-v)\n* [#28658](https://github.com/bitcoin/bitcoin/pull/28658) (type-safe(r) GenTxid constructors by instagibbs)\n* [#28391](https://github.com/bitcoin/bitcoin/pull/28391) (refactor: Simplify CTxMempool/BlockAssembler fields, remove some external mapTx access by TheCharlatan)\n* [#28368](https://github.com/bitcoin/bitcoin/pull/28368) (Fee Estimator updates from Validation Interface/CScheduler thread by ismaelsadeeq)\n* [#28345](https://github.com/bitcoin/bitcoin/pull/28345) (Bugfix: Package relay / bytespersigop checks by luke-jr)\n* [#28335](https://github.com/bitcoin/bitcoin/pull/28335) (RFC: Remove boost usage from kernel api / headers by TheCharlatan)\n* [#28121](https://github.com/bitcoin/bitcoin/pull/28121) (include verbose debug messages in testmempoolaccept reject-reason by pinheadmz)\n* [#27591](https://github.com/bitcoin/bitcoin/pull/27591) (rpc: distinguish between vsize and sigop-adjusted mempool vsize by glozow)\n* [#27351](https://github.com/bitcoin/bitcoin/pull/27351) (wallet: add `seeds` argument to `importdescriptors` by apoelstra)\n* [#26711](https://github.com/bitcoin/bitcoin/pull/26711) (validate package transactions with their in-package ancestor sets by glozow)\n* [#26451](https://github.com/bitcoin/bitcoin/pull/26451) (Enforce incentive compatibility for all RBF replacements by sdaftuar)\n* [#25665](https://github.com/bitcoin/bitcoin/pull/25665) (refactor: Add util::Result failure values, multiple error and warning messages by ryanofsky)\n* [#21515](https://github.com/bitcoin/bitcoin/pull/21515) (Erlay: bandwidth-efficient transaction relay protocol by naumenkogs)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-1769143762",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "labeled",
      "id": 10697976819,
      "node_id": "LE_lADOABII5850QVJBzwAAAAJ9pivz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10697976819",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-18T19:11:53Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10697997651,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAJ9pn1T",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10697997651",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-18T19:14:03Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-18T23:11:20Z",
      "updated_at": "2023-10-18T23:11:20Z",
      "source": {
        "issue": {
          "id": 1945845586,
          "node_id": "PR_kwDOABII585c7wA9",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28658",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28658/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28658/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28658/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28658",
          "number": 28658,
          "state": "closed",
          "state_reason": null,
          "title": "type-safe(r) GenTxid constructors",
          "body": "Builds on https://github.com/bitcoin/bitcoin/pull/28107\r\n\r\nTiny(<30 loc) set of changes that detects issues with fuzz targets in master, and longer term should make things safer.\r\n\r\nMost of this `GenTxid::Txid(Txid::FromUint256())` chaining can be removed by further work pushing the types \"up\", and maybe other helper functions that make them directly out of `COutPoint`s or similar since that appears to be a common pattern.",
          "user": {
            "login": "instagibbs",
            "id": 5767891,
            "node_id": "MDQ6VXNlcjU3Njc4OTE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/instagibbs",
            "html_url": "https://github.com/instagibbs",
            "followers_url": "https://api.github.com/users/instagibbs/followers",
            "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
            "organizations_url": "https://api.github.com/users/instagibbs/orgs",
            "repos_url": "https://api.github.com/users/instagibbs/repos",
            "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/instagibbs/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 3,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28658",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28658",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28658.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28658.patch"
          },
          "closed_at": "2023-12-04T19:46:30Z",
          "created_at": "2023-10-16T18:29:41Z",
          "updated_at": "2023-12-05T11:21:02Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-18T23:34:30Z",
      "updated_at": "2023-10-18T23:34:30Z",
      "source": {
        "issue": {
          "id": 1910622235,
          "node_id": "PR_kwDOABII585bE94H",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28528",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28528/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28528/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28528/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28528",
          "number": 28528,
          "state": "open",
          "state_reason": null,
          "title": "test: Use test framework utils in functional tests",
          "body": "Replaces bare asserts with test framework utils across both the functional tests and the test framework itself.\r\n\r\nAlso adds the `assert_not_equal`, `assert_less_than`, and `assert_less_than_or_equal` util functions for greater readability.\r\n\r\nFixes #23119.\r\n",
          "user": {
            "login": "osagie98",
            "id": 23225617,
            "node_id": "MDQ6VXNlcjIzMjI1NjE3",
            "avatar_url": "https://avatars.githubusercontent.com/u/23225617?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/osagie98",
            "html_url": "https://github.com/osagie98",
            "followers_url": "https://api.github.com/users/osagie98/followers",
            "following_url": "https://api.github.com/users/osagie98/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/osagie98/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/osagie98/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/osagie98/subscriptions",
            "organizations_url": "https://api.github.com/users/osagie98/orgs",
            "repos_url": "https://api.github.com/users/osagie98/repos",
            "events_url": "https://api.github.com/users/osagie98/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/osagie98/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 62963516,
              "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
              "name": "Tests",
              "color": "d4c5f9",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "NONE",
          "locked": false,
          "comments": 8,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28528",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28528",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28528.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28528.patch"
          },
          "created_at": "2023-09-25T04:14:06Z",
          "updated_at": "2023-11-16T11:19:36Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-18T23:50:25Z",
      "updated_at": "2023-10-18T23:50:25Z",
      "source": {
        "issue": {
          "id": 1878544434,
          "node_id": "PR_kwDOABII585ZZZg8",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28391",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28391/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28391/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28391/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28391",
          "number": 28391,
          "state": "closed",
          "state_reason": null,
          "title": "refactor: Simplify CTxMempool/BlockAssembler fields, remove some external mapTx access",
          "body": "Motivation\r\n* It seems preferable to use stdlib data structures instead of boost if they can achieve close to the same thing.\r\n* Code external to mempool should ideally use its public helper methods instead of accessing `mapTx` or its iterators directly.\r\n* Reduce the number of complex boost multi index type interactions\r\n* Also see #28335 for further context/motivation. This PR together with #28385 simplifies that one.\r\n\r\nOverview of things done in this PR:\r\n* Make `vTxHashes` a vector of transaction references instead of a pair of transaction hash and iterator. The trade off here is that the data is retrieved on the fly with `GetEntry` instead of being cached in `vTxHashes`.\r\n* Introduce `GetEntry` helper method to replace the more involved `GetIter` where applicable\r\n* Replace `mapTx` access with `CTxMemPool` helper methods\r\n* Simplify `checkChainLimits` call in `node/interfaces.cpp`\r\n* Make `CTxMemPoolEntry`s `lockPoints`mutable such that they can be changed with a const iterator directly instead of going through `mapTx`\r\n* Make `BlockAssembler`'s `inBlock` and `failedTx` sets of transaction hashes.",
          "user": {
            "login": "TheCharlatan",
            "id": 8421793,
            "node_id": "MDQ6VXNlcjg0MjE3OTM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/TheCharlatan",
            "html_url": "https://github.com/TheCharlatan",
            "followers_url": "https://api.github.com/users/TheCharlatan/followers",
            "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
            "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
            "repos_url": "https://api.github.com/users/TheCharlatan/repos",
            "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 26,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28391",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28391",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28391.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28391.patch"
          },
          "closed_at": "2023-11-13T10:51:51Z",
          "created_at": "2023-09-02T09:47:53Z",
          "updated_at": "2023-11-13T10:51:51Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-18T23:53:32Z",
      "updated_at": "2023-10-18T23:53:32Z",
      "source": {
        "issue": {
          "id": 1873415502,
          "node_id": "PR_kwDOABII585ZIF0m",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28368",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28368/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28368/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28368/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28368",
          "number": 28368,
          "state": "closed",
          "state_reason": null,
          "title": "Fee Estimator updates from Validation Interface/CScheduler thread",
          "body": "This is an attempt to  #11775 \r\n\r\nThis Pr will enable fee estimator to listen to ValidationInterface notifications to process new transactions added and removed from the mempool.\r\n\r\nThis PR includes the following changes:\r\n\r\n- Added a new callback to the Validation Interface `MempoolTransactionsRemovedForConnectedBlock`, which notifies listeners about the transactions that have been removed due to a new block being connected, along with the height at which the transactions were removed.\r\n- Modified the `TransactionAddedToMempool` callback parameter to include additional information about the transaction needed for fee estimation.\r\n- Updated `CBlockPolicyEstimator` to process transactions using` CTransactionRef` instead of `CTxMempoolEntry.`\r\n- Implemented the `CValidationInterface` interface in `CBlockPolicyEstimater` and overridden the `TransactionAddedToMempool`, `TransactionRemovedFromMempool`, and `MempoolTransactionsRemovedForConnectedBlock` methods to receive updates from their notifications.\r\n\r\nPrior to this PR, the fee estimator updates from the mempool, i.e whenever a new block is connected all transactions in the block that are in our mempool are going to be removed using the `removeForBlock` function in `txmempool.cpp`. \r\n\r\nThis removal triggered updates to the fee estimator. As a result, the fee estimator would block mempool's `cs` until it finished updating every time a new block was connected.\r\nInstead of being blocked only on mempool tx removal, we were blocking on both tx removal and fee estimator updating.\r\nIf we want to further improve fee estimation, or add heavy-calulation steps to it, it is currently not viable as we would be slowing down block relay in the process\r\n\r\nThis PR is smaller in terms of the changes made compared to #11775, as it focuses solely on enabling fee estimator updates from the validationInterface/cscheduler thread notifications.\r\n\r\nI have not split the validation interface because, as I understand it, the rationale behind the split in #11775 was to have `MempoolInterface` signals come from the mempool and `CValidationInterface` events come from validation. I believe this separation can be achieved in a separate refactoring PR when the need arises.\r\n\r\nAlso left out some commits from #11775\r\n- Some refactoring which are no longer needed.\r\n- Handle reorgs much better in fee estimator. \r\n- Track witness hash malleation in fee estimator \r\n\r\nI believe they are a separate change that can come in a follow-up after this.\r\n\r\n",
          "user": {
            "login": "ismaelsadeeq",
            "id": 48946461,
            "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
            "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ismaelsadeeq",
            "html_url": "https://github.com/ismaelsadeeq",
            "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
            "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
            "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
            "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
            "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 82428251,
              "node_id": "MDU6TGFiZWw4MjQyODI1MQ==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/TX%20fees%20and%20policy",
              "name": "TX fees and policy",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 1648013533,
              "node_id": "MDU6TGFiZWwxNjQ4MDEzNTMz",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Review%20club",
              "name": "Review club",
              "description": "",
              "color": "0052cc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 15,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28368",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28368",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28368.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28368.patch"
          },
          "closed_at": "2023-12-01T20:07:35Z",
          "created_at": "2023-08-30T10:45:22Z",
          "updated_at": "2023-12-05T02:15:30Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-18T23:58:08Z",
      "updated_at": "2023-10-18T23:58:08Z",
      "source": {
        "issue": {
          "id": 1868276585,
          "node_id": "PR_kwDOABII585Y27tq",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28345",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28345/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28345/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28345/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28345",
          "number": 28345,
          "state": "open",
          "state_reason": null,
          "title": "Bugfix: Package relay / bytespersigop checks",
          "body": "`GetVirtualTransactionSize(CTransaction&)` passes by default 0 sigops and 0 `-bytespersigop`, which is incorrect. In many cases (ie, wallet), this is harmless since we have control over the transactions and don't do anything absurd in normal usage. But in other cases (including wallet *received* transactions), this isn't safe. To avoid invisible bugs like this, I delete (or rather, move to `bitcoin_test`) the function signature that allows for omitting sigop inputs.\r\n\r\nThis also then fixes the new package relay code to use the correct virtual sizes for its checks, and documents calling locations where the behaviour is broken or safe.\r\n\r\nIn particular, note that the `sendrawtransaction` RPC and GUI transaction details remain buggy and not fixed in this PR.",
          "user": {
            "login": "luke-jr",
            "id": 1095675,
            "node_id": "MDQ6VXNlcjEwOTU2NzU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/luke-jr",
            "html_url": "https://github.com/luke-jr",
            "followers_url": "https://api.github.com/users/luke-jr/followers",
            "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
            "organizations_url": "https://api.github.com/users/luke-jr/orgs",
            "repos_url": "https://api.github.com/users/luke-jr/repos",
            "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/luke-jr/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 82428251,
              "node_id": "MDU6TGFiZWw4MjQyODI1MQ==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/TX%20fees%20and%20policy",
              "name": "TX fees and policy",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 8,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28345",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28345",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28345.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28345.patch"
          },
          "created_at": "2023-08-26T21:46:20Z",
          "updated_at": "2023-11-15T12:36:48Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-19T00:01:15Z",
      "updated_at": "2023-10-19T00:01:15Z",
      "source": {
        "issue": {
          "id": 1864447692,
          "node_id": "PR_kwDOABII585YqB5K",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28335",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28335/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28335/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28335/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28335",
          "number": 28335,
          "state": "open",
          "state_reason": null,
          "title": "RFC: Remove boost usage from kernel api / headers",
          "body": "Similarly to #28327 I wanted to open this PR to receive some opinions and better approaches.\r\n\r\nThe kernel library is currently at the stage where unwanted headers are removed from its set of headers. In practice, this means we are reducing the number of includes that are required for compiling the experimental `bitcoin-chainstate` binary. This is described in stage 1 step 3 of the [project tracking issue](https://github.com/bitcoin/bitcoin/issues/27587).\r\n\r\nCurrently the mempool is part of the kernel library. The mempool headers include the boost multi index headers. Thus any application wanting to use the kernel library and its headers will have to include the boost headers too. This is not only undesirable because of the sheer size of these headers, but also might lead to conflicts if the including application uses a different boost version.\r\n\r\nIn the approach laid out by this PR, mempool member variables and methods are declared in the header without having to include boost by either wrapping them in a struct and [pimpling](https://en.cppreference.com/w/cpp/language/pimpl) them, or making methods static implementation functions. The boost definitions are gathered into separate header (`mempool_set_definitions.h`) that is only included by implementation files that require definitions of the boost types. This allows us to retain the current architecture with roughly the same interfaces. \r\n\r\nThe approach laid out by this PR also has some, albeit small, compilation speed and size benefits. Averaged over a few of compilation runs I consistently observe faster compilation by a couple of seconds and some smaller pre-processed and compiled object sizes. The main detractor of this method is obviously the number of lines touched. However it also has the benefit of inventorizing all the files that require direct access to the mempool data structures as well getting rid of boost multi index includes in non-kernel implementation files that include the mempool, but don't directly manipulate its data structures (e.g. wallet.cpp).\r\n\r\nA much simpler alternative approach, at least on the surface, would be removing all `txmempool.h` includes from kernel library headers (see [this branch](https://github.com/TheCharlatan/bitcoin/tree/mempoolBoostSimple)). Currently this is only `validation.h`.  Due to the mutex member of `CTxMemPool` and the correspondingly defined lock decorators on the chainstate methods this becomes a bit more complicated though and I am not sure how this might be possible with the current architecture.\r\n\r\nA discussion of how and if to remove the mempool from the kernel library has so far been intentionally punted to the next stage of the kernel library development. Pimpling the mempool itself precludes this discussion, since the library could never be shipped with the `CTxMemPool` headers. Pimpling the mempool members (like done in this PR) might also make a future splitting of block and mempool validation logic into separate compilation units easier.",
          "user": {
            "login": "TheCharlatan",
            "id": 8421793,
            "node_id": "MDQ6VXNlcjg0MjE3OTM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/TheCharlatan",
            "html_url": "https://github.com/TheCharlatan",
            "followers_url": "https://api.github.com/users/TheCharlatan/followers",
            "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
            "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
            "repos_url": "https://api.github.com/users/TheCharlatan/repos",
            "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 12,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28335",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28335",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28335.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28335.patch"
          },
          "created_at": "2023-08-24T05:46:16Z",
          "updated_at": "2023-12-01T21:17:09Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-19T00:32:04Z",
      "updated_at": "2023-10-19T00:32:04Z",
      "source": {
        "issue": {
          "id": 1815938021,
          "node_id": "PR_kwDOABII585WGviz",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28121",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28121/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28121/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28121/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28121",
          "number": 28121,
          "state": "open",
          "state_reason": null,
          "title": "include verbose debug messages in testmempoolaccept reject-reason",
          "body": "Expands the `reject-reason` field in `testmempoolaccept` responses to include `m_debug_message` from `ValidationState`. This compound string is also the complete error message thrown by the mempool in resposne to `sendrawtransaction`.\r\n\r\nThe extra verbosity is helpful to consumers of `testmempoolaccept`, which is sort of a debug tool anyway. The beginning of these messages remains the same (`m_reject_reason`) and so although this may be a breaking API change for consumers who expect exact strings, that should be easy to fix (after reading the release notes ). \r\n\r\nold: `insufficient fee`\r\nnew: `insufficient fee, rejecting replacement dafc2bb343e7598c625de0c83ae9594eecab2c6252d08dd19b9d39e5b5402800; less fees than conflicting txs; 3.00 < 4.00`\r\n",
          "user": {
            "login": "pinheadmz",
            "id": 2084648,
            "node_id": "MDQ6VXNlcjIwODQ2NDg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pinheadmz",
            "html_url": "https://github.com/pinheadmz",
            "followers_url": "https://api.github.com/users/pinheadmz/followers",
            "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
            "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
            "repos_url": "https://api.github.com/users/pinheadmz/repos",
            "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 12,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28121",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28121",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28121.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28121.patch"
          },
          "created_at": "2023-07-21T14:47:06Z",
          "updated_at": "2023-11-08T16:13:11Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-19T01:00:14Z",
      "updated_at": "2023-10-19T01:00:14Z",
      "source": {
        "issue": {
          "id": 1699208383,
          "node_id": "PR_kwDOABII585P8ew0",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27591",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27591/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27591/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27591/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/27591",
          "number": 27591,
          "state": "open",
          "state_reason": null,
          "title": "rpc: distinguish between vsize and sigop-adjusted mempool vsize",
          "body": "`CTxMemPoolEntry::GetTxSize()` returns the maximum between vsize and \"sigop-adjusted size\" which is used by mempool validation and mining code as a heuristic to avoid 2DKnapsacking the block weight and sigop limits.\r\n\r\nSigop-adjusted vsize is returned as the \"vsize\" value of a transaction for RPCs retrieving mempool entry information (e.g. `getmempoolentry` and`getrawmempool`) and mempool acceptance (`testmempoolaccept` and `submitpackage`). The [documentation](https://github.com/bitcoin/bitcoin/blob/322ec63b01499c1ec52d3912ee382ebd59f2366b/src/rpc/mempool.cpp#L256) for these RPCs usually says \"virtual transaction size as defined in BIP 141\" without mentioning the sigop adjustment. At least 1 user has expressed confusion in a [tweet](https://twitter.com/mononautical/status/1646166180145577990?s=20).\r\n\r\nI think we should at least mention something in the docs about the sigop-adjusted size. But imo it would be better to provide 2 vsize results: one that is sigop-adjusted and one that isn't.\r\n\r\nSeeking feedback on what might be most clear/helpful for users.\r\n\r\nThis PR's approach is to change the result for \"vsize\" to not include sigop limits. The sigop-adjusted vsize is returned as a new result, \"mempool_vsize\".",
          "user": {
            "login": "glozow",
            "id": 25183001,
            "node_id": "MDQ6VXNlcjI1MTgzMDAx",
            "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/glozow",
            "html_url": "https://github.com/glozow",
            "followers_url": "https://api.github.com/users/glozow/followers",
            "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
            "organizations_url": "https://api.github.com/users/glozow/orgs",
            "repos_url": "https://api.github.com/users/glozow/repos",
            "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/glozow/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            },
            {
              "id": 1392286103,
              "node_id": "MDU6TGFiZWwxMzkyMjg2MTAz",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20Conceptual%20Review",
              "name": "Needs Conceptual Review",
              "description": "",
              "color": "fef2c0",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 12,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27591",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/27591",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/27591.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/27591.patch"
          },
          "created_at": "2023-05-07T19:44:25Z",
          "updated_at": "2023-12-01T19:45:32Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-19T01:08:03Z",
      "updated_at": "2023-10-19T01:08:03Z",
      "source": {
        "issue": {
          "id": 1643033911,
          "node_id": "PR_kwDOABII585NBVge",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27351",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27351/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27351/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27351/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/27351",
          "number": 27351,
          "state": "open",
          "state_reason": null,
          "title": "wallet: add `seeds` argument to `importdescriptors`",
          "body": "This PR introduces the ability to import BIP32 master seeds alongside xpubs. It currently expects seeds to be provided in [BIP 93/codex32](https://github.com/bitcoin/bips/blob/master/bip-0093.mediawiki) either as a single seed or as a list of shares which can be assembled via Shamir Secret Sharing.\r\n\r\nIt could be generalized to other seed formats, e.g. a hex-encoding or the old `sethdseeds` WIF format, easily enough by just attempting to parse the input in those formats and retrying until we find one that works. (Though we must be extremely careful that these formats are unambiguous! If the user imports a seed they don't expect, which fails to match the one they've backed up, the result could be coin loss. For formats with no prefix or checksum, e.g. hex-encoded bytes, we may need to require the user provide a prefix or a separate flag.)\r\n\r\nThe motivation here is that users who are importing their coins from another wallet likely have them in the form of a public descriptor (probably one of the standard `pkh(BIP44/48/84/whatever)` ones) along with a master seed (probably in some seed word format, but this is easy enough to convert to a straight BIP32 seed with an external tool). The seed, presumably, they want to minimize handling of, while the descriptor they are likely to be copy/pasting from somewhere and generally being less careful with.\r\n\r\nTo import this into Core, they currently need to construct a version of their descriptor in which xpubs are replaced by xprivs, and import that. This is cumbersome and potentially dangerous. With this extra RPC flag they are able to separately tweak their descriptor however they need, and then adding their seed data, unmodified, at the last minute in one place.\r\n\r\nMy specific use case is: I have an estate planning document which contains careful instructions for reconstructing seed data from shares which are stored separately and externally to the planning document. Meanwhile, the document itself contains a public descriptor, with checksum already computed, which is stored in several locations accessible by an open-ended set of people. If I were forced to mix the secret data with the public data, it would increase the risk of leaking the secrets as well as the risk of losing the public part.\r\n\r\n**Edit:** Other approaches, that I considered but chose not to take:\r\n\r\n* Extend the existing `sethdseed` RPC. This RPC is legacy-only and not supported by descriptor wallets, because it depends on the legacy \"bag of keys\" model where you could stick keys into the wallet and it'd \"just work\", often in surprising ways.\r\n* Add a new descriptor-wallet-based `importseed` RPC or something. This doesn't work for more-or-less the same reason; the descriptor wallet associates all its keys with `ScriptPubKeyManager`s, so we would need to add support for \"global keys\" somehow. This is a lot of work, lots of room for bikeshedding, and I worry that @achow101 will NACK anything that looks too much like a \"bag of keys\" model. (The situation would be much less bad than the legacy one, where 3rd parties could do stuff like mapping p2wpkh addresses to p2pkh ones and the wallet would just accept it ... but it would still potentially lead to user confusion about what exact conditions the wallet could sign for what descriptors, and it may constrain future wallet changes.)\r\n* Adding a `codex32(...)/1/2/3` xpriv format to the descriptor import format. This was suggested to me by @sipa and has the benefit that very closely matches the existing import model.\r\n\r\nPersonally I don't like the latter\r\n* for the reasons stated in the PR description -- I like my descriptors to be public, and my secret data to be limited to 16 bytes, and I think this is a common mode of operation for people coming from other wallets\r\n* ...and maybe worse, a common model for other wallet authors, who would refuse to nicely interoperate with this);\r\n* because it felt like enough of a change to deserve a change to one of the descriptor BIPs, but those are big enough already and it's hard to get tiny changes to propagate to all implementors of standards. Plus it felt wrong to couple codex32 with descriptors like this.i\r\n* because if you have multiple descirptors that use the same seed, it would force you to copy the seed multiple times, which is dangerous. (In some cases [BIP 389](https://github.com/bitcoin/bips/pull/1354) will make this better, but it doesn't cover everything and anyway is not accepted or implemented yet. One thing at a time :))\r\n\r\nBut what cinched it, and made me switch to the approach in the PR, was that @roconnor-blockstream pointed out to me that the codex32 model means that you can't predict, at writing-down-the-descriptor time, exactly what shares you'll be inputting. And because descriptors have a checksum which covers their entire string encoding, this means that you can't predict ahead-of-timei what will go into the `codex32(...)` slot and therefore what the total checksum ought to be. And this means that either (a) you lose the descriptor checksum, which is a Bad Idea and also inconvenient for importers who' will have to construct a checksum with `getdescriptorinfo` to get `importdescriptors` to accept it, even though said checksum had never been used to protect data in storage; or (b) you modify the descriptor checksum algorithm to be aware of `codex(...)` and to skip checksumming the data inside of that. This means even more implementation complexity that other wallets are unlikely to bring in, plus the result generalizes less easily to other seed formats (e.g. hex) which don't have checksums of their own.\r\n\r\n",
          "user": {
            "login": "apoelstra",
            "id": 1351933,
            "node_id": "MDQ6VXNlcjEzNTE5MzM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1351933?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/apoelstra",
            "html_url": "https://github.com/apoelstra",
            "followers_url": "https://api.github.com/users/apoelstra/followers",
            "following_url": "https://api.github.com/users/apoelstra/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/apoelstra/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/apoelstra/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/apoelstra/subscriptions",
            "organizations_url": "https://api.github.com/users/apoelstra/orgs",
            "repos_url": "https://api.github.com/users/apoelstra/repos",
            "events_url": "https://api.github.com/users/apoelstra/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/apoelstra/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 10,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27351",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/27351",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/27351.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/27351.patch"
          },
          "created_at": "2023-03-28T00:57:14Z",
          "updated_at": "2023-12-06T19:35:39Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-19T01:29:44Z",
      "updated_at": "2023-10-19T01:29:44Z",
      "source": {
        "issue": {
          "id": 1500046485,
          "node_id": "PR_kwDOABII585FocrT",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26711",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26711/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26711/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26711/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/26711",
          "number": 26711,
          "state": "closed",
          "state_reason": null,
          "title": "validate package transactions with their in-package ancestor sets",
          "body": "This contains everything to make mempool/validation logic ready for package relay (see #27463).\r\n\r\nDesign goals:\r\n- Be able to gracefully deal with any arbitrary list of transactions (these come from p2p)\r\n- Validate any ancestor package so that the incentive-compatible transactions end up in our mempool.\r\n  - If the transactions would be accepted individually, they should also be accepted through `AcceptPackage`. We don't want to accidentally reject things just because we happened to download them as a package.\r\n  - Bug prior to these changes: we required `IsChildWithParents` but if there were dependencies between the parents, we could end up (1) accepting a low-feerate child or (2) rejecting a high-feerate parent CPFPing another parent. See the \"interdependent parents\" test case for a specific example.\r\n- Be DoS-resistant.\r\n   - Avoid quadratic validation costs.\r\n   - Avoid loading a lot of stuff from disk, or loading repeatedly.\r\n\r\nThere are 2 main improvements to package evaluation here:\r\n(1) We submit transactions with their in-package ancestor sets.\r\n\t-  See unit test `package_ppfp`: without this change, we would reject everything.\r\n\t- See unit test `package_ppfc`: shows that this doesn't let us do \"parent pays for child;\" we only do this when the individual and ancestor feerates meet mempool minimum feerate\r\n(2) We linearize the package transactions based on ancestor set scoring.\r\n\t- See unit test `package_needs_reorder`: without this change, if we use the original order of transactions, we would only accept 1 grandparent, even if we submit subpackages.\r\n\t- See unit test `package_desc_limits`: without this change, we accept one of the lower-feerate transactions (a bit more of a \"nice to have\" than a \"must have\" example).\r\n\r\nA description of the package validation logic (originally https://github.com/bitcoin/bitcoin/pull/26711#issuecomment-1647523520):\r\n\r\n- Basic sanitization. Quit if it's too big, inconsistent, etc.\r\n- Linearize (Topological sort only)\r\n- **PreChecks loop** For each tx, grab UTXOs to calculate fees and filter out anything we should skip:\r\n    - If already in mempool (or same txid in mempool), mark as skip\r\n    - If missing inputs or conflict, record this failure and mark this and all descendants as skip.\r\n    - If no failures or TX_SINGLE_FAILURE, continue\r\n    - For some failures that we expect due to differing chainstates, skip these transactions and their descendants, but continue.\r\n    - Otherwise, record this failure and mark that we will `quit_early` (i.e. not do the Subpackage validation loop).\r\n- Refine our linearization using the fee information.\r\n- **Subpackage validation loop** For each transaction in the new linearized order:\r\n    - Get the transaction's ancestor subpackage.\r\n    - If the feerate of this transaction is insufficient, continue;\r\n    - If the feerate of this subpackage is insufficient, continue;\r\n    - Otherwise, try to submit the subpackage, using `AcceptSingleTransaction()` if it's just 1 tx\r\n    - if at any point we get a non-fee-related error, abort all.\r\n- Call `LimitMempoolSize`\r\n- Backfill results:\r\n    - If the transaction was in mempool, check to see if it's still there in case it was trimmed in `LimitMempoolSize`.\r\n    - Try to use results from the subpackage validation loop.\r\n    - If that doesn't exist (i.e. we quit early), use results from prechecks loop.\r\n    - If that doesn't exist (i.e. we quit early and we hadn't found a failure with it yet), fill with `TX_UNKNOWN`.\r\n\r\nThis means we will call `PreChecks` for each transaction 2 times (fewer if we quit early), and run all other validation checks at most 1 time. A transaction shouldn't be validated in the subpackage validation loop more than once.",
          "user": {
            "login": "glozow",
            "id": 25183001,
            "node_id": "MDQ6VXNlcjI1MTgzMDAx",
            "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/glozow",
            "html_url": "https://github.com/glozow",
            "followers_url": "https://api.github.com/users/glozow/followers",
            "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
            "organizations_url": "https://api.github.com/users/glozow/orgs",
            "repos_url": "https://api.github.com/users/glozow/repos",
            "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/glozow/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 118379652,
              "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
              "name": "Validation",
              "color": "6060aa",
              "default": false
            },
            {
              "id": 164208572,
              "node_id": "MDU6TGFiZWwxNjQyMDg1NzI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mempool",
              "name": "Mempool",
              "color": "fef2c0",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 36,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26711",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/26711",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/26711.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/26711.patch"
          },
          "closed_at": "2023-11-10T14:21:17Z",
          "created_at": "2022-12-16T11:27:00Z",
          "updated_at": "2023-11-10T14:21:17Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-19T01:36:03Z",
      "updated_at": "2023-10-19T01:36:03Z",
      "source": {
        "issue": {
          "id": 1436104730,
          "node_id": "PR_kwDOABII585CNk-9",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26451",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26451/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26451/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26451/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/26451",
          "number": 26451,
          "state": "open",
          "state_reason": null,
          "title": "Enforce incentive compatibility for all RBF replacements",
          "body": "Opening this for discussion.\r\n\r\nCurrently it's possible in our RBF rules to evict a transaction with higher mining score from our mempool, in favor of a transaction with a higher total fee but lower feerate.  This patch would fix this incentive incompatibility, by requiring that any new transaction have a mining score (as defined by the minimum of its feerate and its feerate including ancestors) to be greater than the individual feerates of all transactions that would be evicted.\r\n\r\nBecause this new feerate criteria includes the ancestors of a new transaction in the score, we are able to eliminate the prohibition against including new unconfirmed parents in a replacement transaction, a slight relaxation of the prior rules.",
          "user": {
            "login": "sdaftuar",
            "id": 7463573,
            "node_id": "MDQ6VXNlcjc0NjM1NzM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sdaftuar",
            "html_url": "https://github.com/sdaftuar",
            "followers_url": "https://api.github.com/users/sdaftuar/followers",
            "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
            "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
            "repos_url": "https://api.github.com/users/sdaftuar/repos",
            "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 64584,
              "node_id": "MDU6TGFiZWw2NDU4NA==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Brainstorming",
              "name": "Brainstorming",
              "color": "ebd775",
              "default": false
            },
            {
              "id": 82428251,
              "node_id": "MDU6TGFiZWw4MjQyODI1MQ==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/TX%20fees%20and%20policy",
              "name": "TX fees and policy",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 34,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26451",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/26451",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/26451.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/26451.patch"
          },
          "created_at": "2022-11-04T13:50:15Z",
          "updated_at": "2023-11-08T11:15:15Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-19T01:48:48Z",
      "updated_at": "2023-10-19T01:48:48Z",
      "source": {
        "issue": {
          "id": 1313204802,
          "node_id": "PR_kwDOABII58472hm-",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25665",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25665/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25665/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25665/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/25665",
          "number": 25665,
          "state": "open",
          "state_reason": null,
          "title": "refactor: Add util::Result failure values, multiple error and warning messages",
          "body": "Add `util::Result` support for returning more error information and make use of it in [LoadChainstate method](https://github.com/bitcoin/bitcoin/pull/25665/commits/60d8893608deb113b44446cdc2c35107a5b3eb3f) as an initial application. Followup PR [#25722](https://github.com/bitcoin/bitcoin/pull/25722) uses it more broadly to return errors and warnings from wallet loading functions as well.\r\n\r\nThis change adds two major features to the result class:\r\n\r\n- For better error handling, adds the ability to return a value on failure, not just a value on success. This is a key missing feature that makes the result class not useful for functions like `LoadChainstate()` which produce different errors that need to be handled differently [^1].\r\n\r\n[^1]: Ability to return error values was actually present in the original implementation of [#25218](https://github.com/bitcoin/bitcoin/pull/25218), but unfortunately removed in later iterations.\r\n\r\n- For better error reporting, adds the ability to return warning messages and multiple errors, not just a single error string. This provides a way for functions to report errors and warnings in a standard way, and simplifies interfaces:\r\n\r\n    ```diff\r\n    -virtual std::unique_ptr<Wallet> loadWallet(const std::string& name, bilingual_str& error, std::vector<bilingual_str>& warnings) = 0;\r\n    +virtual util::Result<std::unique_ptr<Wallet>> loadWallet(const std::string& name) = 0;\r\n    ```\r\n\r\n    ```diff\r\n    -std::unique_ptr<WalletDatabase> MakeDatabase(const fs::path& path, const DatabaseOptions& options, DatabaseStatus& status, bilingual_str& error);\r\n    +util::Result<std::unique_ptr<WalletDatabase>, DatabaseError> MakeDatabase(const fs::path& path, const DatabaseOptions& options);\r\n   ```\r\n\r\nThis change also makes some more minor improvements:\r\n\r\n- Smaller type size. `util::Result<int>` is 16 bytes, and `util::Result<void>` is 8 bytes. Previously both were 72 bytes.\r\n\r\n- Broader type compatibility. Supports noncopyable and nonmovable success and error types.\r\n\r\n### Alternatives & design notes\r\n\r\nThe main goal for the `util::Result` class is to provide a standard way for functions to report error and warnings strings. The interface tries to make it easy to provide detailed error feedback to end users, without cluttering code or making it harder to return other result information. There have been multiple iterations of the design using different internal representations and providing different capabilities:\r\n\r\n|   | Representation (approximate)                   | Notes |\r\n|---|------------------------------------------------|-------|\r\n| _(1)_ | `tuple<T,optional<bilingual_str>>`        | Original #25218 implementation in da98fd2efc1a6b9c6e876cf3e227a8c2e9a10827. Good capabilities, but larger type size. Supports error standardized error reporting and customized error handling with failure values. |\r\n| _(2)_ | `variant<T,bilingual_str>`                | Final #25218 implementation in 7a45c33d1f8a758850cf8e7bd6ad508939ba5c0d. No support for returning failure values so not useful in many cases.\r\n| _(3)_ | `variant<monostate,T,F>`                 | Pending #25601 implementation that allows choosing whether to use standardized error reporting or return custom failure values, but doesn't support having both at the same time, like approaches _(1)_, _(4)_, _(5)_, _(6)_ do. |\r\n | _(4)_ | `tuple<variant<T,F>,bilingual_str>`      | Original #25608 implementation in c29d3008de9314dd463ed08e8bff39fe55324498. Basically the same as _(1)_ except it uses separate success and failure types instead of the same type. Using separate success and failure types makes the result class a little less flexible but can help avoid some ambiguity and inconsistent result states. |\r\n| _(5)_ | `tuple<T,optional<bilingual_str>>`        | Final #25608 implementation in dd91f294206ac87b213d23bb76656a0a5f0f4781. Essentially the same as original implementation _(1)_ except has some usability improvements. |\r\n| _(6)_ | `tuple<T,unique_ptr<tuple<F,bilingual_str>>` | Pending #25665 implementation (this PR). Supports returning failure values, uses separate success and failure types to avoid ambiguity, uses `unique_ptr` to reduce result type size, and avoids heap allocation in the happy path. |\r\n\r\n### Prior discussions & history\r\n\r\n- _furszy_ introduced a `BResult` class providing a standard error reporting mechanism in [#25218](https://github.com/bitcoin/bitcoin/pull/25218). It was renamed to `util::Result` in [#25721](https://github.com/bitcoin/bitcoin/pull/25721) but kept the same representation and capabilities.\r\n\r\n- _MarcoFalke_ suggested using `BResult` for the `LoadChainstate` function in [#25308 (comment)](https://github.com/bitcoin/bitcoin/pull/25308#issuecomment-1181674645). Inability to use `BResult` there due to lack of support for failure values led to initial work on [#25608](https://github.com/bitcoin/bitcoin/pull/25608).\r\n\r\n- _w0xlt_ wrote a `StructuredResult` class in [#25308](https://github.com/bitcoin/bitcoin/pull/25601) adding the ability to return failure values but sacrificing standard error reporting, which led to more work on [#25608](https://github.com/bitcoin/bitcoin/pull/25608).\r\n\r\n- _martinus_ suggested a space optimization in [#25608 (comment)](https://github.com/bitcoin/bitcoin/pull/25608#discussion_r921049409) that also made it easier to support distinct failure & success types, leading to [#25665](https://github.com/bitcoin/bitcoin/pull/25665) as a replacement for [#25608](https://github.com/bitcoin/bitcoin/pull/25608).",
          "user": {
            "login": "ryanofsky",
            "id": 7133040,
            "node_id": "MDQ6VXNlcjcxMzMwNDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ryanofsky",
            "html_url": "https://github.com/ryanofsky",
            "followers_url": "https://api.github.com/users/ryanofsky/followers",
            "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
            "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
            "repos_url": "https://api.github.com/users/ryanofsky/repos",
            "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 28,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25665",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/25665",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/25665.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/25665.patch"
          },
          "created_at": "2022-07-21T12:46:09Z",
          "updated_at": "2023-12-06T20:21:01Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-19T02:10:02Z",
      "updated_at": "2023-10-19T02:10:02Z",
      "source": {
        "issue": {
          "id": 839117639,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NTk5MTgyNzQ5",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21515",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21515/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21515/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21515/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/21515",
          "number": 21515,
          "state": "open",
          "state_reason": null,
          "title": "Erlay: bandwidth-efficient transaction relay protocol",
          "body": "Erlay Project Tracking: #28646\r\n\r\n-----------\r\n\r\nThis is an implementation of  [Erlay](https://arxiv.org/abs/1905.10518) , using primitives in the BIP-330 (see the updated spec  [here](https://github.com/naumenkogs/bips/blob/bip_0330_updates/bip-0330.mediawiki) ). Please refer to these two to understand the design. My talk is [here](https://youtu.be/YxsjdIl0034?t=670).\r\n\r\n### Abstract\r\n\r\nErlay uses both flooding (announcing using INV messages to all peers) and reconciliation to announce transactions. Flooding is expensive, so Erlay seeks to use it sparingly and in strategic locations - only well-connected publicly reachable nodes flood transactions to other publicly reachable nodes via outbound connections. Since every unreachable node is directly connected to several reachable nodes, this policy ensures that a transaction is quickly propagated to be within one hop from most of the nodes in the network.\r\n\r\nAll transactions not propagated through flooding are propagated through efficient set reconciliation. To do this, every node keeps a reconciliation set for each peer, in which transactions are placed which would have been announced using INV messages absent this protocol. Every 2 seconds every node chooses a peer from its outbound connections in a predetermined order to reconcile with, resulting in both sides learning the transactions known to the other side. After every reconciliation round, the corresponding reconciliation set is cleared.\r\n\r\nI think both paper and the BIP motives the changes, but Ill mention them briefly once again here:\r\n* save 40% of the bandwidth consumed by a node\r\n* increase network connectivity for almost no bandwidth or latency cost\r\n* improves privacy as a side-effect\r\n\r\n### How to review\r\n\r\nI suggest doing `make clean && autogen.sh && configure` before you try building it locally.",
          "user": {
            "login": "naumenkogs",
            "id": 7975071,
            "node_id": "MDQ6VXNlcjc5NzUwNzE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/naumenkogs",
            "html_url": "https://github.com/naumenkogs",
            "followers_url": "https://api.github.com/users/naumenkogs/followers",
            "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
            "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
            "repos_url": "https://api.github.com/users/naumenkogs/repos",
            "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 61889416,
              "node_id": "MDU6TGFiZWw2MTg4OTQxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Build%20system",
              "name": "Build system",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            },
            {
              "id": 241832923,
              "node_id": "MDU6TGFiZWwyNDE4MzI5MjM=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Utils/log/libs",
              "name": "Utils/log/libs",
              "description": "",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            },
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 25,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21515",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/21515",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/21515.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/21515.patch"
          },
          "created_at": "2021-03-23T20:58:32Z",
          "updated_at": "2023-11-28T12:44:42Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDU0ZjM5Y2E4ZjEwMTQ4M2Y1ZjgyNzA3Njg5Y2E0OTQzMWQ0MDkxZTU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/54f39ca8f101483f5f82707689ca49431d4091e5",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/54f39ca8f101483f5f82707689ca49431d4091e5",
      "tree": {
        "sha": "6f200516c748fd8eb61ce196d344435b9627bbfb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6f200516c748fd8eb61ce196d344435b9627bbfb"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7a68c00ffb2604c20dcf46019f6d6c22aa475be1",
          "sha": "7a68c00ffb2604c20dcf46019f6d6c22aa475be1",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/7a68c00ffb2604c20dcf46019f6d6c22aa475be1"
        }
      ],
      "message": "Track cluster information for all mempool transactions.\n\nWe partition the mempool into \"clusters\", such that two transactions are in the\nsame cluster if there exists a path of ancestor or descendant relationships\nconnecting them.\n\nWith this notion, we introduce a new data structure that groups transactions in\nthe same cluster together. Within this Cluster data structure, we sort these\ntransactions in a topologically valid way, and then \"chunk\" them into groups\nthat maximize feerate, consist with the ordering.\n\nEach mempool entry also now has a link to the cluster it is in, and to it's\nspecific location within the cluster.\n\nThe mempool's memory usage calculations are updated to reflect the increased\nmemory used by this data structure. This results in a minor change to one of\nthe unit tests.\n\nSanity checks on the consistency of the partitioning logic are implemented in\nCTxMemPool::check().\n\nIn future commits, we will:\n\n    - improve the sorting of each the transactions in each cluster to produce a\n      feerate-maximizing ordering (\"linearization\") of the transactions in each\n      cluster that is consistent with the topological constraints.\n\n    - reimplement the eviction and mining algorithms to use \"chunk feerate\" as\n      the sort criteria for determining what should be evicted or selected for\n      block inclusion.\n\n    - change the RBF acceptance criteria to use chunk feerate (mining score) to\n      determine whether a new transactions is more desirable than existing ones\n\n    - implement cluster size limits to ensure that the sorting algorithms used\n      on a cluster do not take too much CPU time.\n\n    - eliminate the existing ancestor/descendant indices from the mempool\n      (resulting in a memory usage decrease).",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-19T18:27:03Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-20T14:44:47Z"
      },
      "sha": "54f39ca8f101483f5f82707689ca49431d4091e5"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10715626094,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAJ-s3pu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10715626094",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-19T18:28:20Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-19T18:41:42Z",
      "updated_at": "2023-10-19T18:41:42Z",
      "source": {
        "issue": {
          "id": 1952153535,
          "node_id": "PR_kwDOABII585dRO93",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28687",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28687/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28687/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28687/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28687",
          "number": 28687,
          "state": "open",
          "state_reason": null,
          "title": "[POC][WIP] C++20 std::views::reverse",
          "body": "C++20 introduces [`std::ranges::views::reverse`](https://en.cppreference.com/w/cpp/ranges/reverse_view), which allows us to drop our own `reverse_iterator.h` implementation and also makes it easier to chain views (even though I think we currently don't use this).\r\n\r\nThanks to fanquake for pointing me to this. Based on one commit from https://github.com/bitcoin/bitcoin/pull/28349. \r\n\r\n---\r\n\r\nWIP: our `prevector` implementation requires modification for `std::ranges::views::reverse` to work. More specifically: it needs to implement the [`bidirectional_range`](https://en.cppreference.com/w/cpp/ranges/bidirectional_range) concept, which currently it seems not to (see `static_assert(std::ranges::bidirectional_range<prevector>)` output below) as we're not satisfying [`range`](https://en.cppreference.com/w/cpp/ranges/range). Once that's done, we can update the last usage of `reverse_iterator.h` [here](https://github.com/bitcoin/bitcoin/blob/9e616baec0f2d94c5b9970cba657a3c79787ef84/src/test/prevector_tests.cpp#L61-L67) and [here](https://github.com/bitcoin/bitcoin/blob/9e616baec0f2d94c5b9970cba657a3c79787ef84/src/test/fuzz/prevector.cpp#L50-L58) and remove the header entirely. \r\n\r\n```\r\n./prevector.h:541:5: error: static_assert failed\r\n    static_assert(std::ranges::bidirectional_range<prevector>);\r\n    ^             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n./script/script.h:409:18: note: in instantiation of template class 'prevector<28, unsigned char>' requested here\r\nbool GetScriptOp(CScriptBase::const_iterator& pc, CScriptBase::const_iterator end, opcodetype& opcodeRet, std::vector<unsigned char>* pvchRet);\r\n                 ^\r\n./prevector.h:541:19: note: because 'prevector<28, unsigned char>' does not satisfy 'bidirectional_range'\r\n    static_assert(std::ranges::bidirectional_range<prevector>);\r\n                  ^\r\n/Library/Developer/CommandLineTools/SDKs/MacOSX14.0.sdk/usr/include/c++/v1/__ranges/concepts.h:110:33: note: because 'prevector<28, unsigned char>' does not satisfy 'forward_range'\r\n  concept bidirectional_range = forward_range<_Tp> && bidirectional_iterator<iterator_t<_Tp>>;\r\n                                ^\r\n/Library/Developer/CommandLineTools/SDKs/MacOSX14.0.sdk/usr/include/c++/v1/__ranges/concepts.h:107:27: note: because 'prevector<28, unsigned char>' does not satisfy 'input_range'\r\n  concept forward_range = input_range<_Tp> && forward_iterator<iterator_t<_Tp>>;\r\n                          ^\r\n/Library/Developer/CommandLineTools/SDKs/MacOSX14.0.sdk/usr/include/c++/v1/__ranges/concepts.h:53:25: note: because 'prevector<28, unsigned char>' does not satisfy 'range'\r\n  concept input_range = range<_Tp> && input_iterator<iterator_t<_Tp>>;\r\n                        ^\r\n/Library/Developer/CommandLineTools/SDKs/MacOSX14.0.sdk/usr/include/c++/v1/__ranges/concepts.h:48:5: note: because 'ranges::begin(__t)' would be invalid\r\n    ranges::begin(__t); // sometimes equality-preserving\r\n```",
          "user": {
            "login": "stickies-v",
            "id": 69010457,
            "node_id": "MDQ6VXNlcjY5MDEwNDU3",
            "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stickies-v",
            "html_url": "https://github.com/stickies-v",
            "followers_url": "https://api.github.com/users/stickies-v/followers",
            "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
            "organizations_url": "https://api.github.com/users/stickies-v/orgs",
            "repos_url": "https://api.github.com/users/stickies-v/repos",
            "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/stickies-v/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 2,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28687",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28687",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28687.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28687.patch"
          },
          "created_at": "2023-10-19T12:37:13Z",
          "updated_at": "2023-12-02T14:09:01Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10717967266,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAJ-1zOi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10717967266",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-19T23:46:18Z"
    },
    {
      "event": "labeled",
      "id": 10722430474,
      "node_id": "LE_lADOABII5850QVJBzwAAAAJ_G04K",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10722430474",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-20T09:57:25Z",
      "label": {
        "name": "Mempool",
        "color": "fef2c0"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-20T11:56:56Z",
      "updated_at": "2023-10-20T11:56:56Z",
      "source": {
        "issue": {
          "id": 1954053513,
          "node_id": "PR_kwDOABII585dXq6y",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28690",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28690/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28690/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28690/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28690",
          "number": 28690,
          "state": "open",
          "state_reason": null,
          "title": "build: Introduce internal kernel library",
          "body": "This PR introduces a new `libbitcoin_kernel` internal library. It completes the internal library design as laid out in [doc/design/libraries.md](https://github.com/bitcoin/bitcoin/blob/master/doc/design/libraries.md). The external `libbitcoinkernel` library now uses the source lists of the internal library for its compilation.\r\n\r\nShould also address https://github.com/bitcoin/bitcoin/issues/28548.",
          "user": {
            "login": "TheCharlatan",
            "id": 8421793,
            "node_id": "MDQ6VXNlcjg0MjE3OTM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/TheCharlatan",
            "html_url": "https://github.com/TheCharlatan",
            "followers_url": "https://api.github.com/users/TheCharlatan/followers",
            "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
            "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
            "repos_url": "https://api.github.com/users/TheCharlatan/repos",
            "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 61889416,
              "node_id": "MDU6TGFiZWw2MTg4OTQxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Build%20system",
              "name": "Build system",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 23,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28690",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28690",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28690.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28690.patch"
          },
          "created_at": "2023-10-20T11:01:03Z",
          "updated_at": "2023-12-06T20:44:07Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 1685916441,
      "node_id": "PRR_kwDOABII585kfQsZ",
      "url": null,
      "actor": null,
      "commit_id": "7619c275dae3b2b0df8cd8071bc2250556350c49",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1685916441",
      "submitted_at": "2023-10-24T18:23:18Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-26T19:22:13Z",
      "updated_at": "2023-10-26T19:22:13Z",
      "source": {
        "issue": {
          "id": 1963782198,
          "node_id": "PR_kwDOABII585d4Wnx",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28737",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28737/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28737/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28737/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28737",
          "number": 28737,
          "state": "closed",
          "state_reason": null,
          "title": "doc: Fix bugprone-lambda-function-name errors",
          "body": "Inside a lambda, `__func__` will evaluate to something like `\"operator()\"`. Fix this by either removing it, or by using the real name.\r\n\r\nhttps://clang.llvm.org/extra/clang-tidy/checks/bugprone/lambda-function-name.html",
          "user": {
            "login": "maflcko",
            "id": 6399679,
            "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/maflcko",
            "html_url": "https://github.com/maflcko",
            "followers_url": "https://api.github.com/users/maflcko/followers",
            "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
            "organizations_url": "https://api.github.com/users/maflcko/orgs",
            "repos_url": "https://api.github.com/users/maflcko/repos",
            "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/maflcko/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 148216,
              "node_id": "MDU6TGFiZWwxNDgyMTY=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Docs",
              "name": "Docs",
              "color": "02d7e1",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 1,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28737",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28737",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28737.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28737.patch"
          },
          "closed_at": "2023-10-30T13:54:19Z",
          "created_at": "2023-10-26T15:05:06Z",
          "updated_at": "2023-10-30T13:56:05Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "labeled",
      "id": 10809901870,
      "node_id": "LE_lADOABII5850QVJBzwAAAAKEUgMu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10809901870",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-30T15:55:47Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 1785522347,
      "node_id": "IC_kwDOABII585qbOir",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1785522347",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-30T15:55:48Z",
      "updated_at": "2023-10-30T15:55:48Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--cf906140f33d8803c4a75a2196329ecb-->\n This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-1785522347",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "commented",
      "id": 1809939629,
      "node_id": "IC_kwDOABII585r4Xyt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1809939629",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-14T10:29:27Z",
      "updated_at": "2023-11-14T14:23:52Z",
      "author_association": "MEMBER",
      "body": "It would be useful to add a `mempool_backwards_compatibility.py` test to illustrate how the new rules interact with older nodes. It could have two modern nodes and one v25 (or v26) node. Some of the tests you deleted in this branch could be moved there. E.g. the test could demonstrate how RBF rule 2 is not enforced when relaying to the new node, but it is when relaying to the v25 node.\r\n\r\nBenchmarks on a 2019 MacBook Pro (2,3 GHz 8-Core Intel Core i9), plugged in:\r\n\r\n```\r\n% src/bench/bench_bitcoin -filter=.*Mem.* -min-time=10000\r\n\r\n|      330,557,188.67 |                3.03 |    1.5% |     10.77 | `ComplexMemPool`\r\n|      451,529,273.50 |                2.21 |    2.8% |     10.01 | `MemPoolAddTransactions`\r\n|            2,847.13 |          351,231.06 |    2.7% |     10.93 | `MemPoolAncestorsDescendants`\r\n|           11,047.90 |           90,514.97 |    2.5% |     10.69 | `MemPoolMiningScoreCheck`\r\n|        4,328,796.04 |              231.01 |    1.1% |     10.99 | `MempoolCheck`\r\n|           36,268.80 |           27,571.91 |    2.9% |     11.17 | `MempoolEviction`\r\n|        9,123,684.25 |              109.60 |    1.4% |     10.74 | `RpcMempool`\r\n```\r\n\r\nUpdate: added bench for master@c2d4e40e454ba0c7c836a849b6d15db4850079f2:\r\n\r\n```\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|      302,677,055.25 |                3.30 |    3.5% |     10.76 | `ComplexMemPool`\r\n|      100,167,478.00 |                9.98 |    2.5% |     11.08 | `MempoolCheck`\r\n|           43,759.84 |           22,852.00 |    4.1% |     11.42 | `MempoolEviction`\r\n|       10,235,913.25 |               97.70 |    3.5% |     10.66 | `RpcMempool`\r\n```",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-1809939629",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "reviewed",
      "id": 1729366575,
      "node_id": "PRR_kwDOABII585nFAov",
      "url": null,
      "actor": null,
      "commit_id": "7fdcccd1338655328c28ff949d50442ace931a5e",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1729366575",
      "submitted_at": "2023-11-14T10:29:46Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 1729419761,
      "node_id": "PRR_kwDOABII585nFNnx",
      "url": null,
      "actor": null,
      "commit_id": "7fdcccd1338655328c28ff949d50442ace931a5e",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1729419761",
      "submitted_at": "2023-11-14T12:23:47Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 1729707068,
      "node_id": "PRR_kwDOABII585nGTw8",
      "url": null,
      "actor": null,
      "commit_id": "7fdcccd1338655328c28ff949d50442ace931a5e",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Couple more comments / questions. To be continued...",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1729707068",
      "submitted_at": "2023-11-14T14:27:23Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-14T17:21:11Z",
      "updated_at": "2023-11-14T17:21:11Z",
      "source": {
        "issue": {
          "id": 1668056618,
          "node_id": "I_kwDOABII585jbIYq",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27463",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27463/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27463/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27463/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/27463",
          "number": 27463,
          "state": "open",
          "state_reason": null,
          "title": "Package Relay Project Tracking",
          "body": "This issue will be edited frequently to reflect the current status of the project.\r\n\r\n**What should I review now?**\r\n:point_down: :point_down: :point_down: :point_down: :point_down: :point_down: :point_down:\r\n#28948\r\n:point_up: :point_up: :point_up: :point_up: :point_up: :point_up: :point_up:\r\n\r\n**(1) multi-parent-1-child package validation**\r\n\r\nWhat we get: the ability to validate multiple transactions, including CPFP of transactions below the mempool minimum feerate. An RPC to submit things locally.\r\n\r\n- Enable validation of multiple transactions in MemPoolAccept\r\n  - [x] Dependency: #21062\r\n  - [x] Dependency: #23381\r\n  - [x] Main feature 1/2: #20833\r\n  - [x] Main feature 2/2: #21800\r\n  - [x] Followup: #22084\r\n  - [x] Bug fix: #28471\r\n- Enable package CPFP\r\n  - [x] Main feature 1/2: #22674\r\n  - [x] Followup: #24310\r\n  - [x] Followup: #23804\r\n  - [x] Main feature 2/2: #24152\r\n- RPC access\r\n  - [x] #24836\r\n  - [x] #26646\r\n  - [x] #27609\r\n  - [x] #28848\r\n- [x] short term bug fix: avoid the risk of below-minrelaytxfee transactions hanging around forever in the mempool  #26933\r\n- [x] Bug fix: #28251\r\n- [x] Bug fix: #28472\r\n- Fuzzing\r\n  - [x] #28450\r\n  - [x] #28764\r\n  - [x] #28825\r\n\r\n**(2) 1-parent-1-child package relay**\r\n\r\nWhat we get: package relay of 1-parent-1-child packages.\r\nProtocols like LN can use this to create 0-fee presigned transactions with a single, 0-value anchor output; 0-fee commitment transactions can replace each other using the fees of the child attached to the anchor.\r\nThis makes CPFP carve out unnecessary, so we can remove that and switch from ancestor/descendant package limits to cluster limits (see next step).\r\n\r\n- Add v3 rules that make transactions/packages easier to work with\r\n  - [ ] Main feature: #28948\r\n- Enable Package RBF for v3 only. Enables things like LN to sign things 0-fee, add fees at broadcast, and avoid pinning attacks (assuming package relay is available)\r\n   - [x] Dependency: #22796 \r\n   - [x] Dependency: #22675 \r\n   - [x] Dependency: #22855\r\n   - [ ] Main feature (option 1, v3-only): #25038\r\n   - [ ] Main feature (option 2, cluster size 2): #28984\r\n- Add Ephemeral Anchors rules for v3 transactions.\r\n  - [ ] Main feature: #26403\r\n- Opportunistically submit 1-parent-1-child packages\r\n  - [x] Dependency: #28785\r\n  - [ ] WIP #28970\r\n- Try multiple peers for orphan resolution, make orphanage more robust\r\n  - [x] Dependency: #28785\r\n  - [x] Dependency: #28199\r\n  - [x] Dependency: #28364\r\n  - [ ] Main feature: #28031 \r\n  - [ ] WIP: token bucket orphanage protection\r\n\r\n**(3) cluster mempool**\r\n\r\nWhat we get: the ability to quickly assess the incentive compatibility of transactions, safer eviction, more incentive-compatible and pinning-free RBF rules.\r\n\r\n- [ ] Cluster Mempool #27677\r\n  - [ ] Dependency: Remove CPFP carve out\r\n  - [ ] See #28676\r\n\r\n**(4) TBD / other parts of package relay**\r\n\r\nGoals: propagate incentive-compatible packages that are more compelx than 1p1c, safely evaluate replacements within packages, handle orphans better.\r\n\r\n- WIP: Package RBF\r\n- WIP: Package validation of less restrictive topologies\r\n- [ ] use BIP 331 ancestor package relay for orphan-handling\r\n  - [ ] bitcoin/bips/pull/1382\r\n  - [ ] #27742 \r\n- [ ] Some sender-initiated protocol using chunks (?)\r\n\r\n<details><summary>See also:</summary>\r\n\r\nSuperseded/Deferred Work\r\n- Sub-package evaluation with ancestor packages\r\n- [x] #28758\r\n  - [x] #28808\r\n  - #26711 \r\n  - #28813\r\n- #27018\r\n\r\nPrehistory\r\n- [x] #16400 \r\n- #16401 \r\n- #14895 \r\n- #19621 \r\n- https://gist.github.com/sdaftuar/8756699bfcad4d3806ba9f3396d4e66a\r\n</details>",
          "user": {
            "login": "glozow",
            "id": 25183001,
            "node_id": "MDQ6VXNlcjI1MTgzMDAx",
            "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/glozow",
            "html_url": "https://github.com/glozow",
            "followers_url": "https://api.github.com/users/glozow/followers",
            "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
            "organizations_url": "https://api.github.com/users/glozow/orgs",
            "repos_url": "https://api.github.com/users/glozow/repos",
            "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/glozow/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 64583,
              "node_id": "MDU6TGFiZWw2NDU4Mw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature",
              "name": "Feature",
              "color": "7cf575",
              "default": false
            },
            {
              "id": 64584,
              "node_id": "MDU6TGFiZWw2NDU4NA==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Brainstorming",
              "name": "Brainstorming",
              "color": "ebd775",
              "default": false
            },
            {
              "id": 82428251,
              "node_id": "MDU6TGFiZWw4MjQyODI1MQ==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/TX%20fees%20and%20policy",
              "name": "TX fees and policy",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 15,
          "created_at": "2023-04-14T11:14:50Z",
          "updated_at": "2023-12-04T04:54:11Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-17T17:46:05Z",
      "updated_at": "2023-11-17T17:46:05Z",
      "source": {
        "issue": {
          "id": 1991065461,
          "node_id": "PR_kwDOABII585fUlj4",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28863",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28863/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28863/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28863/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28863",
          "number": 28863,
          "state": "open",
          "state_reason": null,
          "title": "wallet, mempool: propagete `checkChainLimits` error message to wallet",
          "body": "\r\n* Requested in [#28391 comment](https://github.com/bitcoin/bitcoin/pull/28391#discussion_r1382997719)\r\n\r\n* The error message is static when a new transaction is created and package limit is reached.\r\n`Transaction has too long of a mempool chain`\r\nWhile the [`CTxMempool::CheckPackageLimits`](https://github.com/bitcoin/bitcoin/blob/5800c558eb5efb4839ed00d6967e43306d68e1c3/src/txmempool.cpp#L199) provide explicit information about the error message.\r\n* This PR updates [`CTxMempool::CheckPackageLimits`](https://github.com/bitcoin/bitcoin/blob/5800c558eb5efb4839ed00d6967e43306d68e1c3/src/txmempool.cpp#L199) return type to `util::Result<void>`, `CheckPackageLimits` now returns void when package limit is not hit, and returns the error string whenever package limit is hit instead of using out parameter `errString`.\r\n* The PR updates [`checkChainLimits`](https://github.com/bitcoin/bitcoin/blob/5800c558eb5efb4839ed00d6967e43306d68e1c3/src/node/interfaces.cpp#L703) return type to `util::Result<void>`.\r\n\r\n* Now the wallet `CreateTransactionInternal` will have access to the package limit error string whenever its hit.\r\n* Also Updated functional test to reflect the error message from `CTxMempool::CheckPackageLimits` output.\r\n\r\n\r\n",
          "user": {
            "login": "ismaelsadeeq",
            "id": 48946461,
            "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
            "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ismaelsadeeq",
            "html_url": "https://github.com/ismaelsadeeq",
            "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
            "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
            "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
            "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
            "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 6,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28863",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28863",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28863.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28863.patch"
          },
          "created_at": "2023-11-13T16:57:33Z",
          "updated_at": "2023-12-05T03:03:13Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 1739566572,
      "node_id": "PRR_kwDOABII585nr63s",
      "url": null,
      "actor": null,
      "commit_id": "7fdcccd1338655328c28ff949d50442ace931a5e",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1739566572",
      "submitted_at": "2023-11-20T11:54:22Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 1739706549,
      "node_id": "PRR_kwDOABII585nsdC1",
      "url": null,
      "actor": null,
      "commit_id": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1739706549",
      "submitted_at": "2023-11-20T12:32:16Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 1739853534,
      "node_id": "PRR_kwDOABII585ntA7e",
      "url": null,
      "actor": null,
      "commit_id": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1739853534",
      "submitted_at": "2023-11-20T13:42:19Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 1739865937,
      "node_id": "PRR_kwDOABII585ntD9R",
      "url": null,
      "actor": null,
      "commit_id": "7fdcccd1338655328c28ff949d50442ace931a5e",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1739865937",
      "submitted_at": "2023-11-20T13:48:39Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "commented",
      "id": 1819105431,
      "node_id": "IC_kwDOABII585sbViX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1819105431",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-20T13:53:12Z",
      "updated_at": "2023-11-20T13:53:12Z",
      "author_association": "MEMBER",
      "body": "@Sjors I believe most if not all of this PR will be rewritten, and split up into several components. The goal here is just to give an idea of the high-level interactions with other changes (wallet behavior, package validation/relay/RBF, ...). I don't think a detailed line-by-line code review at this stage is a good use of your time.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-1819105431",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "mentioned",
      "id": 11012203305,
      "node_id": "MEE_lADOABII5850QVJBzwAAAAKQYOMp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11012203305",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-20T13:53:13Z"
    },
    {
      "event": "subscribed",
      "id": 11012203324,
      "node_id": "SE_lADOABII5850QVJBzwAAAAKQYOM8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11012203324",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-20T13:53:13Z"
    },
    {
      "event": "reviewed",
      "id": 1739885361,
      "node_id": "PRR_kwDOABII585ntIsx",
      "url": null,
      "actor": null,
      "commit_id": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1739885361",
      "submitted_at": "2023-11-20T13:58:48Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 1739889097,
      "node_id": "PRR_kwDOABII585ntJnJ",
      "url": null,
      "actor": null,
      "commit_id": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1739889097",
      "submitted_at": "2023-11-20T14:00:41Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 1739900168,
      "node_id": "PRR_kwDOABII585ntMUI",
      "url": null,
      "actor": null,
      "commit_id": "bf467f8286425b692a1736ab6d417d0ba6074658",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1739900168",
      "submitted_at": "2023-11-20T14:06:13Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 1739906712,
      "node_id": "PRR_kwDOABII585ntN6Y",
      "url": null,
      "actor": null,
      "commit_id": "bf467f8286425b692a1736ab6d417d0ba6074658",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1739906712",
      "submitted_at": "2023-11-20T14:09:35Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 1739940128,
      "node_id": "PRR_kwDOABII585ntWEg",
      "url": null,
      "actor": null,
      "commit_id": "bf467f8286425b692a1736ab6d417d0ba6074658",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1739940128",
      "submitted_at": "2023-11-20T14:24:02Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 1739947219,
      "node_id": "PRR_kwDOABII585ntXzT",
      "url": null,
      "actor": null,
      "commit_id": "bf467f8286425b692a1736ab6d417d0ba6074658",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1739947219",
      "submitted_at": "2023-11-20T14:27:08Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "commented",
      "id": 1819230080,
      "node_id": "IC_kwDOABII585sbz-A",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1819230080",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-20T15:00:32Z",
      "updated_at": "2023-11-20T15:44:36Z",
      "author_association": "MEMBER",
      "body": "I was wondering if we can drop RBF rule 5 (in a followup), but I'm guessing not really. My initial thinking was the cluster limit could be used instead. But `CalculateMiningScoreOfReplacementTx` only checks that the _new_ cluster doesn't get too big.\r\n\r\nBut does the new cluster system make it less of a burden to have large numbers of transactions appear and disappear from the mempool?\r\n\r\n\r\n\r\nI'm also trying to understand if dropping the [CPFP carveout](https://bitcoinops.org/en/topics/cpfp-carve-out/) is fine. The original scenario described on the [mailistlist](https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2018-November/016518.html):\r\n\r\n\r\n```\r\nTX_important\r\n  * output Alice <- child_a_1 <- child_a_2 <-  -< child_a_25\r\n                   (^ intentionally low fees so it doesn't confirm before timeout)\r\n  * output Bob: child_b_1\r\n                ^ high fee\r\n```\r\n  \r\nThe carveout rule allows Bob's `child_b_1`, despite Alice having used up the 25 ancestor limit for TX_important. And alice can't use the carveout to just add child_a_26, because child_26 has more than one unconfirmed ancestor.\r\n\r\nSo what happens in the cluster world?\r\n\r\nFor simplicity, let's set `-limitclustercount` to 26 (the default is 100 in this PR). Without the CPFP carveout, can Bob still insert `child_b_1`?\r\n\r\nMy understanding is that he can't, because `ClusterSizeChecks` will fail.\r\n\r\nInstead of failing, can we check if it's possible to evict the lowest value chunk? Though it introduces an implicit RBF-like mechanism If it were possible, then `child_a_25` would be evicted from the cluster as long as it has a longer fee rate than `child_b_1`.\r\n\r\nAlice might make sure that the fee rates of `child_a_1`  `child_a_25` increase such that there's only one chunk. That just requires Bob to use a higher fee rate.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-1819230080",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "reviewed",
      "id": 1740177374,
      "node_id": "PRR_kwDOABII585nuP_e",
      "url": null,
      "actor": null,
      "commit_id": "7fdcccd1338655328c28ff949d50442ace931a5e",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1740177374",
      "submitted_at": "2023-11-20T16:04:07Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "commented",
      "id": 1819490214,
      "node_id": "IC_kwDOABII585sczem",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1819490214",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-20T17:16:02Z",
      "updated_at": "2023-11-20T17:20:44Z",
      "author_association": "MEMBER",
      "body": "> I don't think a detailed line-by-line code review at this stage is a good use of your time.\r\n\r\nThat's not what I'm trying to do. I strategically / haphazardly picked a dozen lines to ask questions about to get a better understanding of the whole thing. Based on IRC chat today, I'll wait now for the upcoming update.\r\n\r\nRelevant IRC log: https://bitcoin-irc.chaincode.com/bitcoin-core-dev/2023-11-20#984780;",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-1819490214",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-27T15:17:12Z",
      "updated_at": "2023-11-27T15:17:12Z",
      "source": {
        "issue": {
          "id": 2012508541,
          "node_id": "PR_kwDOABII585gc3y_",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28948",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28948/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28948/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28948/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28948",
          "number": 28948,
          "state": "open",
          "state_reason": null,
          "title": "v3 transaction policy for anti-pinning",
          "body": "See #27463 for overall package relay tracking.\r\n\r\nRationale:\r\n- There are various pinning problems with RBF and our general ancestor/descendant limits. These policies help mitigate many pinning attacks and make package RBF feasible (see #25038 which implements package RBF on top of this). [1][2]\r\n- Switching to a cluster-based mempool (see #27677 and #28676) requires the removal of CPFP carve out, which applications depend on. V3 + package RBF + ephemeral anchors + 1-parent-1-child package relay provides an intermediate solution.\r\n\r\nV3 policy [3] allows users to opt in to more restrictive topological limits for shared transactions. Even though we don't have cluster limits, we are able to treat these transactions as having as having a maximum cluster size of 2. If adopted by many nodes in the network, V3 mitigates various RBF pinning attacks. The \"cluster limit\" allows us to do things like calculate the \"miner score\" of a transaction and permit below-minrelayfeerate transactions.\r\n\r\n[1]: Original mailing list post and discussion about RBF pinning problems https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-January/019817.html, https://gist.github.com/glozow/25d9662c52453bd08b4b4b1d3783b9ff\r\n[2]: A FAQ is \"we need this for cluster mempool, but is this still necessary afterwards?\" There are some pinning issues that are fixed here and not fully fixed in cluster mempool, so we will continue to use this or something similar afterward.\r\n[3]: Mailing list post for v3 https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-September/020937.html",
          "user": {
            "login": "glozow",
            "id": 25183001,
            "node_id": "MDQ6VXNlcjI1MTgzMDAx",
            "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/glozow",
            "html_url": "https://github.com/glozow",
            "followers_url": "https://api.github.com/users/glozow/followers",
            "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
            "organizations_url": "https://api.github.com/users/glozow/orgs",
            "repos_url": "https://api.github.com/users/glozow/repos",
            "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/glozow/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 82428251,
              "node_id": "MDU6TGFiZWw4MjQyODI1MQ==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/TX%20fees%20and%20policy",
              "name": "TX fees and policy",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 164208572,
              "node_id": "MDU6TGFiZWwxNjQyMDg1NzI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mempool",
              "name": "Mempool",
              "color": "fef2c0",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 10,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28948",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28948",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28948.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28948.patch"
          },
          "created_at": "2023-11-27T15:17:11Z",
          "updated_at": "2023-12-06T17:19:42Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-28T13:58:13Z",
      "updated_at": "2023-11-28T13:58:13Z",
      "source": {
        "issue": {
          "id": 1995651017,
          "node_id": "PR_kwDOABII585fkNjm",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28886",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28886/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28886/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28886/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28886",
          "number": 28886,
          "state": "open",
          "state_reason": null,
          "title": "refactor: Replace sets of txiter with CTxMemPoolEntryRefs",
          "body": "Currently the mempool returns and consumes sets of multiindex iterators in its public API. A likely motivation for this over working with references to the actual values is that the multi index interface works with these iterators and not with pointers or references to the actual values.\r\n\r\nHowever, using the iterator type in the `setEntries` set provides little benefit in practice as applied currently. Its purpose, ownership, and safety semantics often remain ambiguous, and it is hardly used for actually iterating through the data structures. So replace it where possible with `CTxMemPoolEntryRef`s.\r\n\r\nSince `CTxMemPoolEntry` itself refers to its Parents and Children by `CTxMemPoolEntryRef` and not `txiter`, this allowed for an overall reduction of calls to `iterator_to`. See the [docs](https://www.boost.org/doc/libs/1_83_0/libs/multi_index/doc/tutorial/indices.html#iterator_to) on `iterator_to` for more guidance.\r\n\r\nNo change in the performance of the mempool code was observed in my benchmarks.\r\n\r\nThis also makes the goal of eliminating boost types from the headers as done in https://github.com/bitcoin/bitcoin/pull/28335 more feasible.\r\n",
          "user": {
            "login": "TheCharlatan",
            "id": 8421793,
            "node_id": "MDQ6VXNlcjg0MjE3OTM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/TheCharlatan",
            "html_url": "https://github.com/TheCharlatan",
            "followers_url": "https://api.github.com/users/TheCharlatan/followers",
            "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
            "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
            "repos_url": "https://api.github.com/users/TheCharlatan/repos",
            "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 12,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28886",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28886",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28886.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28886.patch"
          },
          "created_at": "2023-11-15T22:07:32Z",
          "updated_at": "2023-12-06T04:44:46Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-29T16:25:30Z",
      "updated_at": "2023-11-29T16:25:30Z",
      "source": {
        "issue": {
          "id": 2016966837,
          "node_id": "PR_kwDOABII585gsIyD",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28970",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28970/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28970/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28970/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28970",
          "number": 28970,
          "state": "open",
          "state_reason": null,
          "title": "[WIP] p2p: opportunistically accept 1-parent-1-child packages",
          "body": "Draft for now while working on other things. See https://github.com/bitcoin/bitcoin/issues/27463 for overall package relay tracking.\r\n\r\nRationale:\r\n- Package relay is nice [1]. Relaying 1-parent-1-child CPFP when mempool min feerate is high would be a subset of the use cases, but a pretty significant improvement over what we have today.\r\n- Switching to a cluster-based mempool (see\r\nhttps://github.com/bitcoin/bitcoin/issues/27677 and https://github.com/bitcoin/bitcoin/pull/28676) requires the removal of CPFP carve out, which applications depend on. V3 + package RBF + ephemeral anchors + 1-parent-1-child package relay provides an intermediate solution.\r\n- The majority of this code is useful for building e.g. #27742.\r\n\r\nThis means 1p1c packages propagate in the \"happy case\" where nobody is deliberately withholding packages. To make this more robust, we need receiver-side logic to retry orphan resolution with multiple peers. Also, since we rely on the orphanage to remember the child while waiting for the parent, peers may cause us to drop packages by sending lots of orphans. To make this robust, we need to make efforts to protect some amount of orphans from eviction.\r\n\r\n[1]: see this writeup and its links https://github.com/bitcoin/bips/blob/02ec218c7857ef60914e9a3d383b68caf987f70b/bip-0331.mediawiki#propagate-high-feerate-transactions",
          "user": {
            "login": "glozow",
            "id": 25183001,
            "node_id": "MDQ6VXNlcjI1MTgzMDAx",
            "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/glozow",
            "html_url": "https://github.com/glozow",
            "followers_url": "https://api.github.com/users/glozow/followers",
            "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
            "organizations_url": "https://api.github.com/users/glozow/orgs",
            "repos_url": "https://api.github.com/users/glozow/repos",
            "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/glozow/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            },
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 1,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28970",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28970",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28970.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28970.patch"
          },
          "created_at": "2023-11-29T16:25:29Z",
          "updated_at": "2023-12-05T02:37:28Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDA2MTcyNjRiZmQ2MWQ1OGQyM2FjMDM3NjkxZmIwMzk4YjAzZDE2Nzk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0617264bfd61d58d23ac037691fb0398b03d1679",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/0617264bfd61d58d23ac037691fb0398b03d1679",
      "tree": {
        "sha": "a183f1a56076de31bc4bed8adb1c4bb4a1fa66b1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a183f1a56076de31bc4bed8adb1c4bb4a1fa66b1"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/54f39ca8f101483f5f82707689ca49431d4091e5",
          "sha": "54f39ca8f101483f5f82707689ca49431d4091e5",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/54f39ca8f101483f5f82707689ca49431d4091e5"
        }
      ],
      "message": "Expose cluster information via rpc",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T19:57:18Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-04-19T21:12:04Z"
      },
      "sha": "0617264bfd61d58d23ac037691fb0398b03d1679"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGM4Y2YzNzYxMGJkYjA1NjhmM2M3N2UyNzc4ZWE5Mzc4YzAxYjIzNjI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c8cf37610bdb0568f3c77e2778ea9378c01b2362",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c8cf37610bdb0568f3c77e2778ea9378c01b2362",
      "tree": {
        "sha": "18531278d23f3d9f0db3f2dd889c03b4a9389c29",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/18531278d23f3d9f0db3f2dd889c03b4a9389c29"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0617264bfd61d58d23ac037691fb0398b03d1679",
          "sha": "0617264bfd61d58d23ac037691fb0398b03d1679",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0617264bfd61d58d23ac037691fb0398b03d1679"
        }
      ],
      "message": "Add cluster linearization code",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T19:58:51Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2023-05-25T19:12:55Z"
      },
      "sha": "c8cf37610bdb0568f3c77e2778ea9378c01b2362"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDYwYTVkNTVkOTkzNmJiM2IyZmQ1OTZlMzY2Y2I0OTM4YTgwYjQyNDE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/60a5d55d9936bb3b2fd596e366cb4938a80b4241",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/60a5d55d9936bb3b2fd596e366cb4938a80b4241",
      "tree": {
        "sha": "41d912fe887fd262f444700a7d5456f10bc9e1ae",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/41d912fe887fd262f444700a7d5456f10bc9e1ae"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c8cf37610bdb0568f3c77e2778ea9378c01b2362",
          "sha": "c8cf37610bdb0568f3c77e2778ea9378c01b2362",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c8cf37610bdb0568f3c77e2778ea9378c01b2362"
        }
      ],
      "message": "Utilize better linearization algorithm for cluster sort",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-20T23:53:25Z"
      },
      "sha": "60a5d55d9936bb3b2fd596e366cb4938a80b4241"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDBhYmNmNDM2NTU4MWM1ZTVkOWU3OGM3OWM3N2UyNzkxMTQ4ZWVjNzU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0abcf4365581c5e5d9e78c79c77e2791148eec75",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/0abcf4365581c5e5d9e78c79c77e2791148eec75",
      "tree": {
        "sha": "198c53af896fddb31c8437261059cb602e6fe3e1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/198c53af896fddb31c8437261059cb602e6fe3e1"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/60a5d55d9936bb3b2fd596e366cb4938a80b4241",
          "sha": "60a5d55d9936bb3b2fd596e366cb4938a80b4241",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/60a5d55d9936bb3b2fd596e366cb4938a80b4241"
        }
      ],
      "message": "Limit mempool size based on chunk feerate\n\nRather than evicting the transactions with the lowest descendant feerate,\ninstead evict transactions that have the lowest chunk feerate.\n\nOnce mining is implemented based on choosing transactions with highest chunk\nfeerate (see next commit), mining and eviction will be opposites, so that we\nwill evict the transactions that would be mined last.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-21T00:55:50Z"
      },
      "sha": "0abcf4365581c5e5d9e78c79c77e2791148eec75"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDhkYmY0NDE0YjY2ZDk1OTNhMTFjYmQ0ZDg0NmRjNjQwYjI3MTMxNTU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8dbf4414b66d9593a11cbd4d846dc640b2713155",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8dbf4414b66d9593a11cbd4d846dc640b2713155",
      "tree": {
        "sha": "bd5fa4b6aa3288fce8b076da58edcd0787fdc2a0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/bd5fa4b6aa3288fce8b076da58edcd0787fdc2a0"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0abcf4365581c5e5d9e78c79c77e2791148eec75",
          "sha": "0abcf4365581c5e5d9e78c79c77e2791148eec75",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0abcf4365581c5e5d9e78c79c77e2791148eec75"
        }
      ],
      "message": "Select transactions for blocks based on chunk feerate",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-21T01:16:36Z"
      },
      "sha": "8dbf4414b66d9593a11cbd4d846dc640b2713155"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDA3MzA3NGEwOWMwODNlMWI4YTkzODVjNmRjOTE0YTk2ODIzODhkYzY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/073074a09c083e1b8a9385c6dc914a9682388dc6",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/073074a09c083e1b8a9385c6dc914a9682388dc6",
      "tree": {
        "sha": "5ad0a239bdb56adf6ff9f90fd3e32cba96521fd0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5ad0a239bdb56adf6ff9f90fd3e32cba96521fd0"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8dbf4414b66d9593a11cbd4d846dc640b2713155",
          "sha": "8dbf4414b66d9593a11cbd4d846dc640b2713155",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8dbf4414b66d9593a11cbd4d846dc640b2713155"
        }
      ],
      "message": "Add new (unused) limits for cluster size/count",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-21T10:17:40Z"
      },
      "sha": "073074a09c083e1b8a9385c6dc914a9682388dc6"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGM3MzNlNjMxOWE5Y2M2N2NkYWE2NzE4YjJmNDViOTY4OTRjNGEyYmM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c733e6319a9cc67cdaa6718b2f45b96894c4a2bc",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c733e6319a9cc67cdaa6718b2f45b96894c4a2bc",
      "tree": {
        "sha": "741b80a27114a9cfbd82541f1abfc3a7a510deb5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/741b80a27114a9cfbd82541f1abfc3a7a510deb5"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/073074a09c083e1b8a9385c6dc914a9682388dc6",
          "sha": "073074a09c083e1b8a9385c6dc914a9682388dc6",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/073074a09c083e1b8a9385c6dc914a9682388dc6"
        }
      ],
      "message": "Do not allow mempool clusters to exceed configured limits",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-21T12:58:04Z"
      },
      "sha": "c733e6319a9cc67cdaa6718b2f45b96894c4a2bc"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQwY2ZiYmM5MzRlMGI4YjhkY2ZhNzdjMWM5YzJiMjUyYzI5ZWFkNDE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d0cfbbc934e0b8b8dcfa77c1c9c2b252c29ead41",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d0cfbbc934e0b8b8dcfa77c1c9c2b252c29ead41",
      "tree": {
        "sha": "883edbcd7c39585d25f2c78dbb82b52693a50b5f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/883edbcd7c39585d25f2c78dbb82b52693a50b5f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c733e6319a9cc67cdaa6718b2f45b96894c4a2bc",
          "sha": "c733e6319a9cc67cdaa6718b2f45b96894c4a2bc",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c733e6319a9cc67cdaa6718b2f45b96894c4a2bc"
        }
      ],
      "message": "policy: Remove CPFP carveout rule\n\nThe addition of a cluster size limit makes the CPFP carveout rule useless,\nbecause carveout cannot be used to bypass the cluster size limit. Remove this\npolicy rule and update tests to no longer rely on the behavior.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-03T14:54:30Z"
      },
      "sha": "d0cfbbc934e0b8b8dcfa77c1c9c2b252c29ead41"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGU1MTI3ZDg3MGY0OTU5OTVjZGM3NmRhN2U0NTllNjI5NDYwZjNkNzM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e5127d870f495995cdc76da7e459e629460f3d73",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e5127d870f495995cdc76da7e459e629460f3d73",
      "tree": {
        "sha": "be6139a40a9bdcbf11132b900de7ef86583900d8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/be6139a40a9bdcbf11132b900de7ef86583900d8"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d0cfbbc934e0b8b8dcfa77c1c9c2b252c29ead41",
          "sha": "d0cfbbc934e0b8b8dcfa77c1c9c2b252c29ead41",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d0cfbbc934e0b8b8dcfa77c1c9c2b252c29ead41"
        }
      ],
      "message": "Implement new RBF logic for cluster mempool\n\nWith a total ordering on mempool transactions, we are now able to calculate a\ntransaction's mining score at all times. Use this to improve the RBF logic:\n\n- we no longer enforce a \"no new unconfirmed parents\" rule\n\n- we now require that a transaction's mining score (chunk feerate) must exceed\n  that of all of its conflicts.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-21T17:19:32Z"
      },
      "sha": "e5127d870f495995cdc76da7e459e629460f3d73"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGVlNDQ5OGZhY2U2OTAyOTY5MjhjN2ZhMDc1MDZjMDcxOWZjYzkzMzE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ee4498face690296928c7fa07506c0719fcc9331",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ee4498face690296928c7fa07506c0719fcc9331",
      "tree": {
        "sha": "be6139a40a9bdcbf11132b900de7ef86583900d8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/be6139a40a9bdcbf11132b900de7ef86583900d8"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e5127d870f495995cdc76da7e459e629460f3d73",
          "sha": "e5127d870f495995cdc76da7e459e629460f3d73",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e5127d870f495995cdc76da7e459e629460f3d73"
        }
      ],
      "message": "==== END CLUSTER IMPLEMENTATION ====",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-17T15:36:11Z"
      },
      "sha": "ee4498face690296928c7fa07506c0719fcc9331"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDE0NDVkMDg5ZDg5MzRmYzIwYTZhZGIzNjQzODQ0ZmIyOTkzYmUzYjk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1445d089d8934fc20a6adb3643844fb2993be3b9",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/1445d089d8934fc20a6adb3643844fb2993be3b9",
      "tree": {
        "sha": "be6139a40a9bdcbf11132b900de7ef86583900d8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/be6139a40a9bdcbf11132b900de7ef86583900d8"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ee4498face690296928c7fa07506c0719fcc9331",
          "sha": "ee4498face690296928c7fa07506c0719fcc9331",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ee4498face690296928c7fa07506c0719fcc9331"
        }
      ],
      "message": "==== BEGIN MEMPOOL CLEANUP ====",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-17T15:36:45Z"
      },
      "sha": "1445d089d8934fc20a6adb3643844fb2993be3b9"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDg5MjI1MzZjNDg5ZTExYzkwZTUwMTEzYmUxZjMyMjZlZjAzNzVlMmE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8922536c489e11c90e50113be1f3226ef0375e2a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8922536c489e11c90e50113be1f3226ef0375e2a",
      "tree": {
        "sha": "47dab5acc183ee58cf25105528abd340ffc01a7c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/47dab5acc183ee58cf25105528abd340ffc01a7c"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1445d089d8934fc20a6adb3643844fb2993be3b9",
          "sha": "1445d089d8934fc20a6adb3643844fb2993be3b9",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/1445d089d8934fc20a6adb3643844fb2993be3b9"
        }
      ],
      "message": "Remove the ancestor and descendant indices from the mempool",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-21T18:45:20Z"
      },
      "sha": "8922536c489e11c90e50113be1f3226ef0375e2a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDNlZjc1NzY4NzE4YmQ0MWM2NTRiZmMxMTkxNjdmOGQ3ZDhlZThkYWY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3ef75768718bd41c654bfc119167f8d7d8ee8daf",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3ef75768718bd41c654bfc119167f8d7d8ee8daf",
      "tree": {
        "sha": "b1377bf0e9a9652ceab1ec9bf25036eb642e9f61",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b1377bf0e9a9652ceab1ec9bf25036eb642e9f61"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8922536c489e11c90e50113be1f3226ef0375e2a",
          "sha": "8922536c489e11c90e50113be1f3226ef0375e2a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8922536c489e11c90e50113be1f3226ef0375e2a"
        }
      ],
      "message": "Use cluster linearization for transaction relay sort order\n\nPreviously, transaction batches were first sorted by ancestor count and then\nfeerate, to ensure transactions are announced in a topologically valid order,\nwhile prioritizing higher feerate transactions. Ancestor count is a crude\ntopological sort criteria, so replace this with linearization order so that the\nhighest feerate transactions (as would be observed by the mining algorithm) are\nrelayed before lower feerate ones, in a topologically valid way.\n\nThis also fixes a test that only worked due to the ancestor-count-based sort\norder.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-27T18:47:42Z"
      },
      "sha": "3ef75768718bd41c654bfc119167f8d7d8ee8daf"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDIyZTNjZWY1MTNlZTI2OWQ5MjQxZTNjZDBmZjI4MTAyNmEyZjZmN2I",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/22e3cef513ee269d9241e3cd0ff281026a2f6f7b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/22e3cef513ee269d9241e3cd0ff281026a2f6f7b",
      "tree": {
        "sha": "e0f5d9d4ea84faaada6605c402fafe9c399bbc35",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e0f5d9d4ea84faaada6605c402fafe9c399bbc35"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3ef75768718bd41c654bfc119167f8d7d8ee8daf",
          "sha": "3ef75768718bd41c654bfc119167f8d7d8ee8daf",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/3ef75768718bd41c654bfc119167f8d7d8ee8daf"
        }
      ],
      "message": "Remove CTxMemPool::GetSortedDepthAndScore\n\nThe mempool clusters and linearization permit sorting the mempool topologically\nwithout making use of ancestor counts.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-28T14:20:04Z"
      },
      "sha": "22e3cef513ee269d9241e3cd0ff281026a2f6f7b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGIwMjdiNDhkNWFmZGUxYTEzM2YyY2I0OGJkYzA1MjNhYzFhNzA5YzQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b027b48d5afde1a133f2cb48bdc0523ac1a709c4",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b027b48d5afde1a133f2cb48bdc0523ac1a709c4",
      "tree": {
        "sha": "8499f2911a7a88534bf79a5ef27c1388a270ef4e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8499f2911a7a88534bf79a5ef27c1388a270ef4e"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/22e3cef513ee269d9241e3cd0ff281026a2f6f7b",
          "sha": "22e3cef513ee269d9241e3cd0ff281026a2f6f7b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/22e3cef513ee269d9241e3cd0ff281026a2f6f7b"
        }
      ],
      "message": "Reimplement topological cluster sort without cached ancestor counts",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-28T18:17:20Z"
      },
      "sha": "b027b48d5afde1a133f2cb48bdc0523ac1a709c4"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDIxZDFmZmU0ZDhiMjA5ZWM0YWI0MjJjNjY0ZDU0NTcwMDgzZDJkNzI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/21d1ffe4d8b209ec4ab422c664d54570083d2d72",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/21d1ffe4d8b209ec4ab422c664d54570083d2d72",
      "tree": {
        "sha": "4f0554b904c731a5249c1c073689955e5a0f9c07",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4f0554b904c731a5249c1c073689955e5a0f9c07"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b027b48d5afde1a133f2cb48bdc0523ac1a709c4",
          "sha": "b027b48d5afde1a133f2cb48bdc0523ac1a709c4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b027b48d5afde1a133f2cb48bdc0523ac1a709c4"
        }
      ],
      "message": "Reimplement GetTransactionAncestry() to not rely on cached data\n\nIn preparation for removing ancestor data from CTxMemPoolEntry, recalculate the\nancestor statistics on demand wherever needed.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-28T18:47:40Z"
      },
      "sha": "21d1ffe4d8b209ec4ab422c664d54570083d2d72"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDcxMzcwOTA1YzAwNTA1NTAyNWExMDRhNDZiYzk0NjY1OWIzZDQ1N2U",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/71370905c005055025a104a46bc946659b3d457e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/71370905c005055025a104a46bc946659b3d457e",
      "tree": {
        "sha": "558ab56ac30ed6f2bb6e01309a7782674d88095a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/558ab56ac30ed6f2bb6e01309a7782674d88095a"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/21d1ffe4d8b209ec4ab422c664d54570083d2d72",
          "sha": "21d1ffe4d8b209ec4ab422c664d54570083d2d72",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/21d1ffe4d8b209ec4ab422c664d54570083d2d72"
        }
      ],
      "message": "rpc: Calculate ancestor data from scratch for mempool rpc calls",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-28T19:07:05Z"
      },
      "sha": "71370905c005055025a104a46bc946659b3d457e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGVkNTMzOTJiZWQ4YmM0MGYyNWMxMGI5ZWNhYTM3MjYxMjM4ODczNDU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ed53392bed8bc40f25c10b9ecaa3726123887345",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ed53392bed8bc40f25c10b9ecaa3726123887345",
      "tree": {
        "sha": "c3638ec988230b07519cbd188461d4c58a80fc88",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c3638ec988230b07519cbd188461d4c58a80fc88"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/71370905c005055025a104a46bc946659b3d457e",
          "sha": "71370905c005055025a104a46bc946659b3d457e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/71370905c005055025a104a46bc946659b3d457e"
        }
      ],
      "message": "Remove dependency on cached ancestor data in mini-miner",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-28T21:55:16Z"
      },
      "sha": "ed53392bed8bc40f25c10b9ecaa3726123887345"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQxMGUyYzgyODIzYTViOTZmOWZlNDgwZWQwNGVkMjJmMTI3MTZmMWM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d10e2c82823a5b96f9fe480ed04ed22f12716f1c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d10e2c82823a5b96f9fe480ed04ed22f12716f1c",
      "tree": {
        "sha": "947d89c32de85f84b24dc63eeb8548a6b17a4ebd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/947d89c32de85f84b24dc63eeb8548a6b17a4ebd"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ed53392bed8bc40f25c10b9ecaa3726123887345",
          "sha": "ed53392bed8bc40f25c10b9ecaa3726123887345",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ed53392bed8bc40f25c10b9ecaa3726123887345"
        }
      ],
      "message": "Stop enforcing ancestor size/count limits\n\nThe cluster limits should be sufficient.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-28T21:59:15Z"
      },
      "sha": "d10e2c82823a5b96f9fe480ed04ed22f12716f1c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDNiZGZkZDMyNjY5MzIwZmI2YWE2NDI3YjhhYTg4NjEzMTUxYTBmNzY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3bdfdd32669320fb6aa6427b8aa88613151a0f76",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3bdfdd32669320fb6aa6427b8aa88613151a0f76",
      "tree": {
        "sha": "720d73e308b3de8443b8379b6d2edcd50579b2fc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/720d73e308b3de8443b8379b6d2edcd50579b2fc"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d10e2c82823a5b96f9fe480ed04ed22f12716f1c",
          "sha": "d10e2c82823a5b96f9fe480ed04ed22f12716f1c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d10e2c82823a5b96f9fe480ed04ed22f12716f1c"
        }
      ],
      "message": "Use cached mempool children to determine if a transaction has descendants\n\nRemove a reference to GetCountWithDescendants() in preparation for removing\nthis function and the associated cached state from the mempool.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-03T15:19:15Z"
      },
      "sha": "3bdfdd32669320fb6aa6427b8aa88613151a0f76"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDUwZDk3N2ZkMDBiNDQzMTVlMTdiODdiZTk4YmE4MTc2Njc0NTlmODA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/50d977fd00b44315e17b87be98ba817667459f80",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/50d977fd00b44315e17b87be98ba817667459f80",
      "tree": {
        "sha": "4a55d284902094469c2251d9d26bb312d8e2ceda",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4a55d284902094469c2251d9d26bb312d8e2ceda"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3bdfdd32669320fb6aa6427b8aa88613151a0f76",
          "sha": "3bdfdd32669320fb6aa6427b8aa88613151a0f76",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/3bdfdd32669320fb6aa6427b8aa88613151a0f76"
        }
      ],
      "message": "Calculate in-mempool conflicts exactly\n\nThis reimplements the RBF rule against having too many in-mempool conflicts\nmore exactly, and without using the cached GetCountWithDescendants() data.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-03T15:44:57Z"
      },
      "sha": "50d977fd00b44315e17b87be98ba817667459f80"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDE1NTM1YjgwNGU3Yjg1MTJjYWI4NjM3OTQyNDEwM2Q1NzExMjI2ZDI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/15535b804e7b8512cab86379424103d5711226d2",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/15535b804e7b8512cab86379424103d5711226d2",
      "tree": {
        "sha": "42757694bd77fa8a034f3fb17740008d94107dc1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/42757694bd77fa8a034f3fb17740008d94107dc1"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/50d977fd00b44315e17b87be98ba817667459f80",
          "sha": "50d977fd00b44315e17b87be98ba817667459f80",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/50d977fd00b44315e17b87be98ba817667459f80"
        }
      ],
      "message": "Calculate descendant information for mempool RPC output on-the-fly\n\nThis is in preparation for removing the cached descendant state from the\nmempool.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-03T15:57:16Z"
      },
      "sha": "15535b804e7b8512cab86379424103d5711226d2"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQ2N2JkOTk5YjQ2OGRiNjM4NTRlM2I5MTFmYWI3MTQzOTRlMGMzNzA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d67bd999b468db63854e3b911fab714394e0c370",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d67bd999b468db63854e3b911fab714394e0c370",
      "tree": {
        "sha": "505d6ce06fdb02a69fc8d1a5609ae191b56fbe47",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/505d6ce06fdb02a69fc8d1a5609ae191b56fbe47"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/15535b804e7b8512cab86379424103d5711226d2",
          "sha": "15535b804e7b8512cab86379424103d5711226d2",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/15535b804e7b8512cab86379424103d5711226d2"
        }
      ],
      "message": "test: fix rbf carveout test in mempool_limit.py\n\nMinimal fix to the test that the RBF carveout doesn't apply in certain package\nvalidation cases. Now that RBF carveout doesn't exist, we can just test that\nthe cluster count limit is respected (in preparation for removing the\ndescendant limit altogether).",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-18T17:22:09Z"
      },
      "sha": "d67bd999b468db63854e3b911fab714394e0c370"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDMwMzllZGZjYjNlNGU0NjI2OGY3ZDQwNWIzODJkNTllNGJlNDhhMTc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3039edfcb3e4e46268f7d405b382d59e4be48a17",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3039edfcb3e4e46268f7d405b382d59e4be48a17",
      "tree": {
        "sha": "b051b4443a4721ecc4e2b07f1cdd4d3d3de624bf",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b051b4443a4721ecc4e2b07f1cdd4d3d3de624bf"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d67bd999b468db63854e3b911fab714394e0c370",
          "sha": "d67bd999b468db63854e3b911fab714394e0c370",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d67bd999b468db63854e3b911fab714394e0c370"
        }
      ],
      "message": "Stop enforcing descendant size/count limits\n\nCluster size limits should be enough.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-03T17:56:22Z"
      },
      "sha": "3039edfcb3e4e46268f7d405b382d59e4be48a17"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDMyYWE2M2JjYmNiYThmNmY3ZGYzZDdmZDhmZjNkMmZkMzUxYjhmZjA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/32aa63bcbcba8f6f7df3d7fd8ff3d2fd351b8ff0",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/32aa63bcbcba8f6f7df3d7fd8ff3d2fd351b8ff0",
      "tree": {
        "sha": "0ba6592c3974da167de4eea98ae36eb13ab5a2ed",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0ba6592c3974da167de4eea98ae36eb13ab5a2ed"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3039edfcb3e4e46268f7d405b382d59e4be48a17",
          "sha": "3039edfcb3e4e46268f7d405b382d59e4be48a17",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/3039edfcb3e4e46268f7d405b382d59e4be48a17"
        }
      ],
      "message": "wallet: Replace max descendantsize with clustersize\n\nWith the descendant size limits removed, replace the concept of \"max number of\ndescendants of any ancestor of a given tx\" with the cluster count of the cluster\nthat the transaction belongs to.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-03T19:00:00Z"
      },
      "sha": "32aa63bcbcba8f6f7df3d7fd8ff3d2fd351b8ff0"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDg3MTM2MDFkYTc2NDNmOTljZTUzMWYwNWIxOTA1MWMyMmY1YTRkOTg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8713601da7643f99ce531f05b19051c22f5a4d98",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8713601da7643f99ce531f05b19051c22f5a4d98",
      "tree": {
        "sha": "7b1ba31b2e01ceda0970f3e7c6a0a4777f23408f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7b1ba31b2e01ceda0970f3e7c6a0a4777f23408f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/32aa63bcbcba8f6f7df3d7fd8ff3d2fd351b8ff0",
          "sha": "32aa63bcbcba8f6f7df3d7fd8ff3d2fd351b8ff0",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/32aa63bcbcba8f6f7df3d7fd8ff3d2fd351b8ff0"
        }
      ],
      "message": "mempool: Remove unused function CalculateDescendantMaximum",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-04T13:19:21Z"
      },
      "sha": "8713601da7643f99ce531f05b19051c22f5a4d98"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGE3YjMzMGMwNmRmNDgyZDdiZWQ5ODI0MzhhYjUwNGFlOGY1YTc1ZmM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a7b330c06df482d7bed982438ab504ae8f5a75fc",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a7b330c06df482d7bed982438ab504ae8f5a75fc",
      "tree": {
        "sha": "a42a06837b0dd68316c6c1fa30b4fde4cb9d7a28",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a42a06837b0dd68316c6c1fa30b4fde4cb9d7a28"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8713601da7643f99ce531f05b19051c22f5a4d98",
          "sha": "8713601da7643f99ce531f05b19051c22f5a4d98",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8713601da7643f99ce531f05b19051c22f5a4d98"
        }
      ],
      "message": "Eliminate RBF workaround for CPFP carveout transactions\n\nThe new cluster mempool RBF rules take into account clusters sizes exactly, so\nwith the removal of descendant count enforcement this idea is obsolete.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-04T13:13:23Z"
      },
      "sha": "a7b330c06df482d7bed982438ab504ae8f5a75fc"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDdhNzg1MzBkYTkyN2M0MTZkZjBiYTA3MTY3YzQ4YTY3MDMxY2VkOGI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7a78530da927c416df0ba07167c48a67031ced8b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/7a78530da927c416df0ba07167c48a67031ced8b",
      "tree": {
        "sha": "99e7c2779f99d1379883878e14bc480232783208",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/99e7c2779f99d1379883878e14bc480232783208"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a7b330c06df482d7bed982438ab504ae8f5a75fc",
          "sha": "a7b330c06df482d7bed982438ab504ae8f5a75fc",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a7b330c06df482d7bed982438ab504ae8f5a75fc"
        }
      ],
      "message": "mempool: eliminate accessors to mempool entry ancestor/descendant cached state",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-04T13:28:05Z"
      },
      "sha": "7a78530da927c416df0ba07167c48a67031ced8b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDNlNTEwYTJlNGRjZTM1ZDhlMjFmNzQ4YTJlOGVlMDc1ZWMxZGMzNDM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3e510a2e4dce35d8e21f748a2e8ee075ec1dc343",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3e510a2e4dce35d8e21f748a2e8ee075ec1dc343",
      "tree": {
        "sha": "ed48729b4113e013248b043187b9493d53cebe6c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ed48729b4113e013248b043187b9493d53cebe6c"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7a78530da927c416df0ba07167c48a67031ced8b",
          "sha": "7a78530da927c416df0ba07167c48a67031ced8b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/7a78530da927c416df0ba07167c48a67031ced8b"
        }
      ],
      "message": "Remove unused members from CTxMemPoolEntry",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-04T13:48:04Z"
      },
      "sha": "3e510a2e4dce35d8e21f748a2e8ee075ec1dc343"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDYyNGRmM2EyMWUxZDI4NzBiNmZiOTgwNmIwMzdiNGQ2YTIwMDhmNjE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/624df3a21e1d2870b6fb9806b037b4d6a2008f61",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/624df3a21e1d2870b6fb9806b037b4d6a2008f61",
      "tree": {
        "sha": "be41d66e3e9f7c6b4ddb109d586747363863a2d4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/be41d66e3e9f7c6b4ddb109d586747363863a2d4"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3e510a2e4dce35d8e21f748a2e8ee075ec1dc343",
          "sha": "3e510a2e4dce35d8e21f748a2e8ee075ec1dc343",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/3e510a2e4dce35d8e21f748a2e8ee075ec1dc343"
        }
      ],
      "message": "Remove mempool logic designed to maintain ancestor/descendant state",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-04T14:47:14Z"
      },
      "sha": "624df3a21e1d2870b6fb9806b037b4d6a2008f61"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGNhMTJmYjY1N2ExYTEwZmFhMTUzYjFmZGFlZGRmNTdiNGY2YWFjYmM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ca12fb657a1a10faa153b1fdaeddf57b4f6aacbc",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ca12fb657a1a10faa153b1fdaeddf57b4f6aacbc",
      "tree": {
        "sha": "2f651e096cbdde6d5f2e00b09cd26ec0558e6813",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2f651e096cbdde6d5f2e00b09cd26ec0558e6813"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/624df3a21e1d2870b6fb9806b037b4d6a2008f61",
          "sha": "624df3a21e1d2870b6fb9806b037b4d6a2008f61",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/624df3a21e1d2870b6fb9806b037b4d6a2008f61"
        }
      ],
      "message": "test: Eliminate use of cached ancestor data in miniminer_tests",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-18T16:45:07Z"
      },
      "sha": "ca12fb657a1a10faa153b1fdaeddf57b4f6aacbc"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDlkNzYxMzA0Y2FhOWE0YjA2MTlmNTRkMjM1MzJkMTY4ZGMwOGRmYTE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9d761304caa9a4b0619f54d23532d168dc08dfa1",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/9d761304caa9a4b0619f54d23532d168dc08dfa1",
      "tree": {
        "sha": "b9cd1ee5ba926f92504075a30a125273c8839490",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b9cd1ee5ba926f92504075a30a125273c8839490"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ca12fb657a1a10faa153b1fdaeddf57b4f6aacbc",
          "sha": "ca12fb657a1a10faa153b1fdaeddf57b4f6aacbc",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ca12fb657a1a10faa153b1fdaeddf57b4f6aacbc"
        }
      ],
      "message": "doc: Update outdated mempool comments",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-05T13:22:53Z"
      },
      "sha": "9d761304caa9a4b0619f54d23532d168dc08dfa1"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGE4ZDU3MjMyNDc5ZDc3MGU2NDY5NGYyYmVlZmE2MWI5MTEwNTU5ZmM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a8d57232479d770e64694f2beefa61b9110559fc",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a8d57232479d770e64694f2beefa61b9110559fc",
      "tree": {
        "sha": "9b720f58b7b4ae65bf3ac0a0f6a6ed5e8849ea2f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9b720f58b7b4ae65bf3ac0a0f6a6ed5e8849ea2f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9d761304caa9a4b0619f54d23532d168dc08dfa1",
          "sha": "9d761304caa9a4b0619f54d23532d168dc08dfa1",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/9d761304caa9a4b0619f54d23532d168dc08dfa1"
        }
      ],
      "message": "mempool: addUnchecked no longer needs ancestors",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-05T13:33:41Z"
      },
      "sha": "a8d57232479d770e64694f2beefa61b9110559fc"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDBmNDM5NzFiNTI5ZDllZWMxYjQxYmY2ZTAzMTRmMzY0Y2E5YjU1YWU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0f43971b529d9eec1b41bf6e0314f364ca9b55ae",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/0f43971b529d9eec1b41bf6e0314f364ca9b55ae",
      "tree": {
        "sha": "b2ece1b7f03535bce847bfcfc8ffd6b4eb17bb8d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b2ece1b7f03535bce847bfcfc8ffd6b4eb17bb8d"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a8d57232479d770e64694f2beefa61b9110559fc",
          "sha": "a8d57232479d770e64694f2beefa61b9110559fc",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a8d57232479d770e64694f2beefa61b9110559fc"
        }
      ],
      "message": "Remove unused limits from CalculateMemPoolAncestors",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-15T01:15:06Z"
      },
      "sha": "0f43971b529d9eec1b41bf6e0314f364ca9b55ae"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDhiYmMyNmRmZmY3MGRiN2EyOWVhMjRhOTBiYmNiODBmMjAzOWIzM2Y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8bbc26dfff70db7a29ea24a90bbcb80f2039b33f",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8bbc26dfff70db7a29ea24a90bbcb80f2039b33f",
      "tree": {
        "sha": "6ac9d97d2910478edb600e28cec0deae541c58dd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6ac9d97d2910478edb600e28cec0deae541c58dd"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0f43971b529d9eec1b41bf6e0314f364ca9b55ae",
          "sha": "0f43971b529d9eec1b41bf6e0314f364ca9b55ae",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0f43971b529d9eec1b41bf6e0314f364ca9b55ae"
        }
      ],
      "message": "Make removeConflicts private",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-15T10:12:22Z"
      },
      "sha": "8bbc26dfff70db7a29ea24a90bbcb80f2039b33f"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGRiNTZjYjUwOWVmYTkwNDhmZmRiYmQ4ZDE5MTViODVhZjIwY2JlYTQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/db56cb509efa9048ffdbbd8d1915b85af20cbea4",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/db56cb509efa9048ffdbbd8d1915b85af20cbea4",
      "tree": {
        "sha": "6ac9d97d2910478edb600e28cec0deae541c58dd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6ac9d97d2910478edb600e28cec0deae541c58dd"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8bbc26dfff70db7a29ea24a90bbcb80f2039b33f",
          "sha": "8bbc26dfff70db7a29ea24a90bbcb80f2039b33f",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8bbc26dfff70db7a29ea24a90bbcb80f2039b33f"
        }
      ],
      "message": "==== END MEMPOOL CLEANUP ====",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-17T15:36:50Z"
      },
      "sha": "db56cb509efa9048ffdbbd8d1915b85af20cbea4"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDNmNjdjZWE2NDE1NjI1N2NhZTA5YmJiMjBmZmRhM2JmYTVkNTQyYjY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3f67cea64156257cae09bbb20ffda3bfa5d542b6",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3f67cea64156257cae09bbb20ffda3bfa5d542b6",
      "tree": {
        "sha": "6ac9d97d2910478edb600e28cec0deae541c58dd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6ac9d97d2910478edb600e28cec0deae541c58dd"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/db56cb509efa9048ffdbbd8d1915b85af20cbea4",
          "sha": "db56cb509efa9048ffdbbd8d1915b85af20cbea4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/db56cb509efa9048ffdbbd8d1915b85af20cbea4"
        }
      ],
      "message": "==== BEGIN OPTIMIZATIONS ====",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-17T15:37:03Z"
      },
      "sha": "3f67cea64156257cae09bbb20ffda3bfa5d542b6"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDQ2ZjBkZDM3MjY0YTE1ZTE3MjAxYjZkOWZhNGYxYWRlNjk4OTgxYzg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/46f0dd37264a15e17201b6d9fa4f1ade698981c8",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/46f0dd37264a15e17201b6d9fa4f1ade698981c8",
      "tree": {
        "sha": "31551ded860451c548f38f706fdf3b08ae3f14f3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/31551ded860451c548f38f706fdf3b08ae3f14f3"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3f67cea64156257cae09bbb20ffda3bfa5d542b6",
          "sha": "3f67cea64156257cae09bbb20ffda3bfa5d542b6",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/3f67cea64156257cae09bbb20ffda3bfa5d542b6"
        }
      ],
      "message": "Rework removeForBlock so that clusters are only touched once\n\nAlso remove extra linearization that was happening and some logging",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2023-10-10T19:42:56Z"
      },
      "sha": "46f0dd37264a15e17201b6d9fa4f1ade698981c8"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGE1YzY0OGY5OWFiYzI1ZWUyZGNmNDA2NzQ0YWM4ZGEwODI4YzgxNWU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a5c648f99abc25ee2dcf406744ac8da0828c815e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a5c648f99abc25ee2dcf406744ac8da0828c815e",
      "tree": {
        "sha": "4eb074643c8f5cc96faee816dffd056974c62b2b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4eb074643c8f5cc96faee816dffd056974c62b2b"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/46f0dd37264a15e17201b6d9fa4f1ade698981c8",
          "sha": "46f0dd37264a15e17201b6d9fa4f1ade698981c8",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/46f0dd37264a15e17201b6d9fa4f1ade698981c8"
        }
      ],
      "message": "Simplify ancestor calculation functions\n\nNow that ancestor calculation never fails (due to ancestor/descendant limits\nbeing eliminated), we can eliminate the error handling from\nCalculateMemPoolAncestors.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-15T01:31:51Z"
      },
      "sha": "a5c648f99abc25ee2dcf406744ac8da0828c815e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDFiZmFkNDQ3YzUyZjEwMWM4NDM1ZTQ0YmVkNTE0MDA2MzMyZTc1OGU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1bfad447c52f101c8435e44bed514006332e758e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/1bfad447c52f101c8435e44bed514006332e758e",
      "tree": {
        "sha": "f57f72332300fd7177a462db06218105ae94c3dd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f57f72332300fd7177a462db06218105ae94c3dd"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a5c648f99abc25ee2dcf406744ac8da0828c815e",
          "sha": "a5c648f99abc25ee2dcf406744ac8da0828c815e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a5c648f99abc25ee2dcf406744ac8da0828c815e"
        }
      ],
      "message": "Reimplement descendant calculation using epochs\n\nAlso use the faster descendant calculation within txmempool.cpp",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-16T00:37:06Z"
      },
      "sha": "1bfad447c52f101c8435e44bed514006332e758e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDBmMmM2Yzk5ZTZjOTg3ZjlmNjBmMjFmZDgzYzEwNDNmMGZhNjlhM2M",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0f2c6c99e6c987f9f60f21fd83c1043f0fa69a3c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/0f2c6c99e6c987f9f60f21fd83c1043f0fa69a3c",
      "tree": {
        "sha": "6f7ceb4c18a39a59b34112cc45fc669a82af0fe1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6f7ceb4c18a39a59b34112cc45fc669a82af0fe1"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1bfad447c52f101c8435e44bed514006332e758e",
          "sha": "1bfad447c52f101c8435e44bed514006332e758e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/1bfad447c52f101c8435e44bed514006332e758e"
        }
      ],
      "message": "Rewrite CalculateMemPoolAncestors to use vectors instead of sets",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-16T17:46:59Z"
      },
      "sha": "0f2c6c99e6c987f9f60f21fd83c1043f0fa69a3c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGExNDg3NTQwM2VmYWM4YmFlMTVmZmE1MTJjZTRhYWYzZjgwODEyYTI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a14875403efac8bae15ffa512ce4aaf3f80812a2",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a14875403efac8bae15ffa512ce4aaf3f80812a2",
      "tree": {
        "sha": "0c1a84f769dc822680d572026610abc9a8ad5897",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0c1a84f769dc822680d572026610abc9a8ad5897"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0f2c6c99e6c987f9f60f21fd83c1043f0fa69a3c",
          "sha": "0f2c6c99e6c987f9f60f21fd83c1043f0fa69a3c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0f2c6c99e6c987f9f60f21fd83c1043f0fa69a3c"
        }
      ],
      "message": "Switch to using the faster CalculateDescendants\n\nThe only place we still use the older interface is in policy/rbf.cpp, where\nit's helpful to incrementally calculate descendants to avoid calculating too\nmany at once (or cluttering the CalculateDescendants interface with a\ncalculation limit).",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-16T00:57:53Z"
      },
      "sha": "a14875403efac8bae15ffa512ce4aaf3f80812a2"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDA4MDA4MTkxYWMxZmI1NGNhNGZmNWNiOTE1NDAyN2RiYWQ4NTRiNWI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/08008191ac1fb54ca4ff5cb9154027dbad854b5b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/08008191ac1fb54ca4ff5cb9154027dbad854b5b",
      "tree": {
        "sha": "e3e47b153f8d0c2f5a2ff604164155327800b758",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e3e47b153f8d0c2f5a2ff604164155327800b758"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a14875403efac8bae15ffa512ce4aaf3f80812a2",
          "sha": "a14875403efac8bae15ffa512ce4aaf3f80812a2",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a14875403efac8bae15ffa512ce4aaf3f80812a2"
        }
      ],
      "message": "Rename old CalculateDescendants to CalculateDescendantsSlow\n\nAlso clean up documentation for that function.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-16T01:02:15Z"
      },
      "sha": "08008191ac1fb54ca4ff5cb9154027dbad854b5b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDhjNWU1NzdjZmQyOGVkYTdmMDM1YzkxYjE0MGIyZjlmODBmY2E3YzI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8c5e577cfd28eda7f035c91b140b2f9f80fca7c2",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8c5e577cfd28eda7f035c91b140b2f9f80fca7c2",
      "tree": {
        "sha": "e3e47b153f8d0c2f5a2ff604164155327800b758",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e3e47b153f8d0c2f5a2ff604164155327800b758"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/08008191ac1fb54ca4ff5cb9154027dbad854b5b",
          "sha": "08008191ac1fb54ca4ff5cb9154027dbad854b5b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/08008191ac1fb54ca4ff5cb9154027dbad854b5b"
        }
      ],
      "message": "==== END OPTIMIZATIONS ====",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-17T15:37:08Z"
      },
      "sha": "8c5e577cfd28eda7f035c91b140b2f9f80fca7c2"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZlMGZlZjczOTA2YzkyNjkyNGRkNjQ4YmJhNjg1ZTFkYzkxNzcwMGE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fe0fef73906c926924dd648bba685e1dc917700a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fe0fef73906c926924dd648bba685e1dc917700a",
      "tree": {
        "sha": "e3e47b153f8d0c2f5a2ff604164155327800b758",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e3e47b153f8d0c2f5a2ff604164155327800b758"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8c5e577cfd28eda7f035c91b140b2f9f80fca7c2",
          "sha": "8c5e577cfd28eda7f035c91b140b2f9f80fca7c2",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8c5e577cfd28eda7f035c91b140b2f9f80fca7c2"
        }
      ],
      "message": "==== BEGIN TESTS ====",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-17T15:37:15Z"
      },
      "sha": "fe0fef73906c926924dd648bba685e1dc917700a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDhkZmRlYzFjNjE0MDU0YzlhYWEyZWY3NDM1ZDE1YzVlN2UxOTQ0ZDc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8dfdec1c614054c9aaa2ef7435d15c5e7e1944d7",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8dfdec1c614054c9aaa2ef7435d15c5e7e1944d7",
      "tree": {
        "sha": "0f044ee66ba9125d60a68e2cc9f3b222003957a2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0f044ee66ba9125d60a68e2cc9f3b222003957a2"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fe0fef73906c926924dd648bba685e1dc917700a",
          "sha": "fe0fef73906c926924dd648bba685e1dc917700a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/fe0fef73906c926924dd648bba685e1dc917700a"
        }
      ],
      "message": "bench: add more mempool benchmarks\n\nAdd benchmarks for:\n\n  - mempool update time when blocks are found\n  - adding a transaction\n  - performing the mempool's RBF calculation\n  - calculating mempool ancestors/descendants",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-11T15:34:16Z"
      },
      "sha": "8dfdec1c614054c9aaa2ef7435d15c5e7e1944d7"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGIzMzBjOGZmY2YxM2ZlNGFkYzM4MjAyNGY0Zjk1MmVkNzUzMDg5MzA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b330c8ffcf13fe4adc382024f4f952ed75308930",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b330c8ffcf13fe4adc382024f4f952ed75308930",
      "tree": {
        "sha": "af29f0ac3bf35946a1a77f58d427affd71dfc10a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/af29f0ac3bf35946a1a77f58d427affd71dfc10a"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8dfdec1c614054c9aaa2ef7435d15c5e7e1944d7",
          "sha": "8dfdec1c614054c9aaa2ef7435d15c5e7e1944d7",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8dfdec1c614054c9aaa2ef7435d15c5e7e1944d7"
        }
      ],
      "message": "fuzz: try to add more code coverage for mempool fuzzing\n\nIncluding test coverage for mempool eviction and expiry",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2023-10-12T14:48:55Z"
      },
      "sha": "b330c8ffcf13fe4adc382024f4f952ed75308930"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGM4MDQ3YmY1MzM1ZDVhMzhkZDQ1NDY4MWYzNzUwMDg2ZWVmODJjMjM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c8047bf5335d5a38dd454681f3750086eef82c23",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c8047bf5335d5a38dd454681f3750086eef82c23",
      "tree": {
        "sha": "6c26f6ca33e69843f7db504d4d197463285696a9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6c26f6ca33e69843f7db504d4d197463285696a9"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b330c8ffcf13fe4adc382024f4f952ed75308930",
          "sha": "b330c8ffcf13fe4adc382024f4f952ed75308930",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b330c8ffcf13fe4adc382024f4f952ed75308930"
        }
      ],
      "message": "test: Add functional test for cluster limits",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-16T22:46:43Z"
      },
      "sha": "c8047bf5335d5a38dd454681f3750086eef82c23"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGVhMzViNDNkMjUzMWFjNTNiYWM3NmUwZmIwNWYxZjBlNGU1Njc0M2Q",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ea35b43d2531ac53bac76e0fb05f1f0e4e56743d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ea35b43d2531ac53bac76e0fb05f1f0e4e56743d",
      "tree": {
        "sha": "6c26f6ca33e69843f7db504d4d197463285696a9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6c26f6ca33e69843f7db504d4d197463285696a9"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c8047bf5335d5a38dd454681f3750086eef82c23",
          "sha": "c8047bf5335d5a38dd454681f3750086eef82c23",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c8047bf5335d5a38dd454681f3750086eef82c23"
        }
      ],
      "message": "==== END TESTS ====",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-17T15:37:19Z"
      },
      "sha": "ea35b43d2531ac53bac76e0fb05f1f0e4e56743d"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQ2MWE5NzA2ZjhlYmFlNTBjYjlhNGEzYzI2MDA0ZWRmZWQ4OWExNGI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d61a9706f8ebae50cb9a4a3c26004edfed89a14b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d61a9706f8ebae50cb9a4a3c26004edfed89a14b",
      "tree": {
        "sha": "de81d3c618da385ce147db59de1bb90081213145",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/de81d3c618da385ce147db59de1bb90081213145"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ea35b43d2531ac53bac76e0fb05f1f0e4e56743d",
          "sha": "ea35b43d2531ac53bac76e0fb05f1f0e4e56743d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ea35b43d2531ac53bac76e0fb05f1f0e4e56743d"
        }
      ],
      "message": "Disable fuzz test that compares mini_miner to BlockAssembler\n\nTemporary measure until the mini_miner is rewritten to match the new mempool\nbehavior.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-19T23:43:47Z"
      },
      "sha": "d61a9706f8ebae50cb9a4a3c26004edfed89a14b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDI4YzQ2NzM5MWU1NDdhN2Y0ZDE3YTZmNTUzNTJhYWI5NmJhNjkwZGU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/28c467391e547a7f4d17a6f55352aab96ba690de",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/28c467391e547a7f4d17a6f55352aab96ba690de",
      "tree": {
        "sha": "e6464c25497c59ad0860130016d53e13a545e028",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e6464c25497c59ad0860130016d53e13a545e028"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d61a9706f8ebae50cb9a4a3c26004edfed89a14b",
          "sha": "d61a9706f8ebae50cb9a4a3c26004edfed89a14b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d61a9706f8ebae50cb9a4a3c26004edfed89a14b"
        }
      ],
      "message": "[rbf] Add logic for comparing feerate diagrams",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-05T13:48:31Z"
      },
      "sha": "28c467391e547a7f4d17a6f55352aab96ba690de"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDU4YTYwZDY5NWViODYwMTgwNzgwYzQxYWM1N2Q4ZjM4MzA1ODQxYTU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/58a60d695eb860180780c41ac57d8f38305841a5",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/58a60d695eb860180780c41ac57d8f38305841a5",
      "tree": {
        "sha": "db5235e78e785d68f3bd725db7f94483ab6a4e73",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/db5235e78e785d68f3bd725db7f94483ab6a4e73"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/28c467391e547a7f4d17a6f55352aab96ba690de",
          "sha": "28c467391e547a7f4d17a6f55352aab96ba690de",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/28c467391e547a7f4d17a6f55352aab96ba690de"
        }
      ],
      "message": "Rewrite RBF rules to use feerate diagram test\n\nAlso relax the restriction on number of conflicting transactions so that we\nonly count the direct conflicts.\n\nTODO:\n- add more RBF tests in general, and also fix up the tests that check for\nmax replacement limits.\n- add benchmarking for RBF tests (including in worst-case scenarios)\n- add fuzz testing?\n- rewrite all this to not be terrible",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T20:01:14Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-12-06T19:27:31Z"
      },
      "sha": "58a60d695eb860180780c41ac57d8f38305841a5"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11173066958,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAKZ93jO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11173066958",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-06T20:01:38Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1364398135",
      "pull_request_review_id": 1685916441,
      "id": 1364398135,
      "node_id": "PRRC_kwDOABII585RUxA3",
      "diff_hunk": "@@ -18,14 +18,7 @@ other consensus and policy rules, each of the following conditions are met:\n    Use the (`-mempoolfullrbf`) configuration option to allow transaction replacement without enforcement of the\n    opt-in signaling rule.\n \n-2. The replacement transaction only include an unconfirmed input if that input was included in\n-   one of the directly conflicting transactions. An unconfirmed input spends an output from a\n-   currently-unconfirmed transaction.\n-\n-   *Rationale*: When RBF was originally implemented, the mempool did not keep track of\n-   ancestor feerates yet. This rule was suggested as a temporary restriction.\n-\n-3. The replacement transaction pays an absolute fee of at least the sum paid by the original",
      "path": "doc/policy/mempool-replacements.md",
      "position": 11,
      "original_position": 11,
      "commit_id": "58a60d695eb860180780c41ac57d8f38305841a5",
      "original_commit_id": "b0f771bb559f38ea16a8f4d13110e2247ac080b9",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "might be easier to just \"strike out\" this rule and mark it deprecated instead of changing numbers since that's become engineer lingo",
      "created_at": "2023-10-18T19:11:00Z",
      "updated_at": "2023-10-24T18:23:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1364398135",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1364398135"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 28,
      "original_line": 28,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1365716769",
      "pull_request_review_id": 1685916441,
      "id": 1365716769,
      "node_id": "PRRC_kwDOABII585RZy8h",
      "diff_hunk": "@@ -684,6 +830,19 @@ UniValue MempoolInfoToJSON(const CTxMemPool& pool)\n     ret.pushKV(\"incrementalrelayfee\", ValueFromAmount(pool.m_incremental_relay_feerate.GetFeePerK()));\n     ret.pushKV(\"unbroadcastcount\", uint64_t{pool.GetUnbroadcastTxs().size()});\n     ret.pushKV(\"fullrbf\", pool.m_full_rbf);\n+    ret.pushKV(\"numberofclusters\", pool.m_cluster_map.size());\n+    int64_t max_cluster_count = 1;",
      "path": "src/rpc/mempool.cpp",
      "position": 296,
      "original_position": 283,
      "commit_id": "58a60d695eb860180780c41ac57d8f38305841a5",
      "original_commit_id": "3a42ba255a73e609ac37eee8288208fa43953779",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "shouldn't this be 0?",
      "created_at": "2023-10-19T15:13:12Z",
      "updated_at": "2023-10-24T18:23:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1365716769",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1365716769"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 847,
      "original_line": 847,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1365753481",
      "pull_request_review_id": 1685916441,
      "id": 1365753481,
      "node_id": "PRRC_kwDOABII585RZ76J",
      "diff_hunk": "@@ -60,57 +59,26 @@ std::optional<std::string> GetEntriesForConflicts(const CTransaction& tx,\n {\n     AssertLockHeld(pool.cs);\n     const uint256 txid = tx.GetHash();\n-    uint64_t nConflictingCount = 0;\n-    for (const auto& mi : iters_conflicting) {\n-        nConflictingCount += mi->GetCountWithDescendants();\n-        // Rule #5: don't consider replacing more than MAX_REPLACEMENT_CANDIDATES\n-        // entries from the mempool. This potentially overestimates the number of actual\n-        // descendants (i.e. if multiple conflicts share a descendant, it will be counted multiple\n-        // times), but we just want to be conservative to avoid doing too much work.\n-        if (nConflictingCount > MAX_REPLACEMENT_CANDIDATES) {\n-            return strprintf(\"rejecting replacement %s; too many potential replacements (%d > %d)\\n\",\n-                             txid.ToString(),\n-                             nConflictingCount,\n-                             MAX_REPLACEMENT_CANDIDATES);\n-        }\n-    }\n     // Calculate the set of all transactions that would have to be evicted.\n     for (CTxMemPool::txiter it : iters_conflicting) {\n-        pool.CalculateDescendants(it, all_conflicts);\n-    }\n-    return std::nullopt;\n-}\n-\n-std::optional<std::string> HasNoNewUnconfirmed(const CTransaction& tx,\n-                                               const CTxMemPool& pool,\n-                                               const CTxMemPool::setEntries& iters_conflicting)\n-{\n-    AssertLockHeld(pool.cs);\n-    std::set<uint256> parents_of_conflicts;\n-    for (const auto& mi : iters_conflicting) {\n-        for (const CTxIn& txin : mi->GetTx().vin) {\n-            parents_of_conflicts.insert(txin.prevout.hash);\n+        // Exit early if we're going to fail (see below)\n+        if (all_conflicts.size() > MAX_REPLACEMENT_CANDIDATES) {",
      "path": "src/policy/rbf.cpp",
      "position": null,
      "original_position": 45,
      "commit_id": "58a60d695eb860180780c41ac57d8f38305841a5",
      "original_commit_id": "3a42ba255a73e609ac37eee8288208fa43953779",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Note: this is sticking with the same rule#5 instead of number of effected clusters. It would be more ideal if it were number of clusters to allow for better usage of adversarial-ish batched CPFPs",
      "created_at": "2023-10-19T15:40:30Z",
      "updated_at": "2023-10-24T18:23:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1365753481",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1365753481"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 65,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1366095113",
      "pull_request_review_id": 1685916441,
      "id": 1366095113,
      "node_id": "PRRC_kwDOABII585RbPUJ",
      "diff_hunk": "@@ -876,75 +880,8 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n \n     ws.m_iters_conflicting = m_pool.GetIterSet(ws.m_conflicts);\n \n-    // Note that these modifications are only applicable to single transaction scenarios;\n-    // carve-outs and package RBF are disabled for multi-transaction evaluations.\n-    CTxMemPool::Limits maybe_rbf_limits = m_pool.m_limits;\n-\n-    // Calculate in-mempool ancestors, up to a limit.\n-    if (ws.m_conflicts.size() == 1) {\n-        // In general, when we receive an RBF transaction with mempool conflicts, we want to know whether we\n-        // would meet the chain limits after the conflicts have been removed. However, there isn't a practical\n-        // way to do this short of calculating the ancestor and descendant sets with an overlay cache of\n-        // changed mempool entries. Due to both implementation and runtime complexity concerns, this isn't\n-        // very realistic, thus we only ensure a limited set of transactions are RBF'able despite mempool\n-        // conflicts here. Importantly, we need to ensure that some transactions which were accepted using\n-        // the below carve-out are able to be RBF'ed, without impacting the security the carve-out provides\n-        // for off-chain contract systems (see link in the comment below).\n-        //\n-        // Specifically, the subset of RBF transactions which we allow despite chain limits are those which\n-        // conflict directly with exactly one other transaction (but may evict children of said transaction),\n-        // and which are not adding any new mempool dependencies. Note that the \"no new mempool dependencies\"\n-        // check is accomplished later, so we don't bother doing anything about it here, but if our\n-        // policy changes, we may need to move that check to here instead of removing it wholesale.\n-        //\n-        // Such transactions are clearly not merging any existing packages, so we are only concerned with\n-        // ensuring that (a) no package is growing past the package size (not count) limits and (b) we are\n-        // not allowing something to effectively use the (below) carve-out spot when it shouldn't be allowed\n-        // to.\n-        //\n-        // To check these we first check if we meet the RBF criteria, above, and increment the descendant\n-        // limits by the direct conflict and its descendants (as these are recalculated in\n-        // CalculateMempoolAncestors by assuming the new transaction being added is a new descendant, with no\n-        // removals, of each parent's existing dependent set). The ancestor count limits are unmodified (as\n-        // the ancestor limits should be the same for both our new transaction and any conflicts).\n-        // We don't bother incrementing m_limit_descendants by the full removal count as that limit never comes\n-        // into force here (as we're only adding a single transaction).\n-        assert(ws.m_iters_conflicting.size() == 1);\n-        CTxMemPool::txiter conflict = *ws.m_iters_conflicting.begin();\n-\n-        maybe_rbf_limits.descendant_count += 1;\n-        maybe_rbf_limits.descendant_size_vbytes += conflict->GetSizeWithDescendants();\n-    }\n-\n-    auto ancestors{m_pool.CalculateMemPoolAncestors(*entry, maybe_rbf_limits)};\n-    if (!ancestors) {\n-        // If CalculateMemPoolAncestors fails second time, we want the original error string.\n-        // Contracting/payment channels CPFP carve-out:\n-        // If the new transaction is relatively small (up to 40k weight)\n-        // and has at most one ancestor (ie ancestor limit of 2, including\n-        // the new transaction), allow it if its parent has exactly the\n-        // descendant limit descendants.\n-        //\n-        // This allows protocols which rely on distrusting counterparties\n-        // being able to broadcast descendants of an unconfirmed transaction\n-        // to be secure by simply only having two immediately-spendable\n-        // outputs - one for each counterparty. For more info on the uses for\n-        // this, see https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2018-November/016518.html\n-        CTxMemPool::Limits cpfp_carve_out_limits{\n-            .ancestor_count = 2,\n-            .ancestor_size_vbytes = maybe_rbf_limits.ancestor_size_vbytes,\n-            .descendant_count = maybe_rbf_limits.descendant_count + 1,\n-            .descendant_size_vbytes = maybe_rbf_limits.descendant_size_vbytes + EXTRA_DESCENDANT_TX_SIZE_LIMIT,\n-        };\n-        const auto error_message{util::ErrorString(ancestors).original};\n-        if (ws.m_vsize > EXTRA_DESCENDANT_TX_SIZE_LIMIT) {\n-            return state.Invalid(TxValidationResult::TX_MEMPOOL_POLICY, \"too-long-mempool-chain\", error_message);\n-        }\n-        ancestors = m_pool.CalculateMemPoolAncestors(*entry, cpfp_carve_out_limits);\n-        if (!ancestors) return state.Invalid(TxValidationResult::TX_MEMPOOL_POLICY, \"too-long-mempool-chain\", error_message);\n-    }\n-\n-    ws.m_ancestors = *ancestors;\n+    // Calculate in-mempool ancestors",
      "path": "src/validation.cpp",
      "position": 84,
      "original_position": 84,
      "commit_id": "58a60d695eb860180780c41ac57d8f38305841a5",
      "original_commit_id": "c5d3c42da466feca9192d0e389654ba55caec5a6",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "the check two conditionals above:\r\n\r\n```\r\nif (!bypass_limits && ws.m_modified_fees < m_pool.m_min_relay_feerate.GetFee(ws.m_vsize))\r\n```\r\n\r\nThis is still needed for the same reason as before: transaction that is above minrelay, but would be in a chunk below minrelay. We could immediately evict below minrelay chunks post-re-linearization f.e. which would allow 0-fee parents then relax this maybe.\r\n\r\n",
      "created_at": "2023-10-19T20:48:36Z",
      "updated_at": "2023-10-24T18:23:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1366095113",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1366095113"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 883,
      "original_line": 883,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1366105725",
      "pull_request_review_id": 1685916441,
      "id": 1366105725,
      "node_id": "PRRC_kwDOABII585RbR59",
      "diff_hunk": "@@ -83,26 +86,104 @@ static std::vector<CTransactionRef> CreateOrderedCoins(FastRandomContext& det_ra\n     return ordered_coins;\n }\n \n+static void MemPoolAddTransactions(benchmark::Bench& bench)\n+{\n+    FastRandomContext det_rand{true};\n+    int childTxs = 90;\n+    if (bench.complexityN() > 1) {\n+        childTxs = static_cast<int>(bench.complexityN());\n+    }\n+    const auto testing_setup = MakeNoLogFileContext<const TestingSetup>(ChainType::MAIN);\n+    CTxMemPool& pool = *testing_setup.get()->m_node.mempool;\n+\n+    std::vector<CTransactionRef> transactions;\n+    // Create 1000 clusters of 100 transactions each",
      "path": "src/bench/mempool_stress.cpp",
      "position": 54,
      "original_position": 54,
      "commit_id": "58a60d695eb860180780c41ac57d8f38305841a5",
      "original_commit_id": "c5d3c42da466feca9192d0e389654ba55caec5a6",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "numbers in comments are off\r\n\r\nshower thought: Should we/can we bound the number of clusters in addition to total memory in TrimToSize? I can't think of a good way to do that that doesn't complicate things quite a bit, and perhaps practical mempool sizes make this moot. Just something to consider in case I missed something obvious.",
      "created_at": "2023-10-19T21:01:05Z",
      "updated_at": "2023-10-24T18:23:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1366105725",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1366105725"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 100,
      "original_line": 100,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1367425942",
      "pull_request_review_id": 1685916441,
      "id": 1367425942,
      "node_id": "PRRC_kwDOABII585RgUOW",
      "diff_hunk": "@@ -1135,29 +1457,67 @@ void CTxMemPool::TrimToSize(size_t sizelimit, std::vector<COutPoint>* pvNoSpends\n \n     unsigned nTxnRemoved = 0;\n     CFeeRate maxFeeRateRemoved(0);\n+\n+    // Use a heap to determine which chunks to evict, but only make the heap if\n+    // we're actually above the size limit.\n+    std::vector<Cluster::HeapEntry> heap_chunks;\n+    std::set<Cluster*> clusters_with_evictions;\n     while (!mapTx.empty() && DynamicMemoryUsage() > sizelimit) {\n-        indexed_transaction_set::index<descendant_score>::type::iterator it = mapTx.get<descendant_score>().begin();\n+        if (heap_chunks.empty()) {\n+            for (const auto & [id, cluster] : m_cluster_map) {\n+                if (!cluster->m_chunks.empty()) {\n+                    heap_chunks.emplace_back(cluster->m_chunks.end()-1, cluster.get());\n+                }\n+            }\n+        }\n+\n+        // Define comparison operator on our heap entries (using feerate of chunks).\n+        auto cmp = [](const Cluster::HeapEntry& a, const Cluster::HeapEntry& b) {\n+            // TODO: branch on size of fee to do this as 32-bit calculation\n+            // instead? etc\n+            return a.first->fee*b.first->size > b.first->fee*a.first->size;\n+        };\n+\n+        std::make_heap(heap_chunks.begin(), heap_chunks.end(), cmp);",
      "path": "src/txmempool.cpp",
      "position": null,
      "original_position": 1421,
      "commit_id": "58a60d695eb860180780c41ac57d8f38305841a5",
      "original_commit_id": "26e831d5f2c7db15e7a50f910ddf4e1737d226da",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "You probably didn't mean to call make_heap in the loop for 3N work each time. fwiw I don't see any performance difference between `push_heap`ing all the elements on vs one `make_heap`.\r\n\r\nonce this is changed, add+trimming seems to be faster than in master regardless of topology tested",
      "created_at": "2023-10-20T19:39:27Z",
      "updated_at": "2023-10-24T18:23:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1367425942",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1367425942"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1481,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1367430770",
      "pull_request_review_id": 1685916441,
      "id": 1367430770,
      "node_id": "PRRC_kwDOABII585RgVZy",
      "diff_hunk": "@@ -210,183 +194,84 @@ bool BlockAssembler::TestPackage(uint64_t packageSize, int64_t packageSigOpsCost\n \n // Perform transaction-level checks before adding to block:\n // - transaction finality (locktime)\n-bool BlockAssembler::TestPackageTransactions(const CTxMemPool::setEntries& package) const\n+bool BlockAssembler::TestPackageTransactions(const std::list<CTxMemPoolEntry::CTxMemPoolEntryRef>& txs) const\n {\n-    for (CTxMemPool::txiter it : package) {\n-        if (!IsFinalTx(it->GetTx(), nHeight, m_lock_time_cutoff)) {\n+    for (auto tx : txs) {\n+        if (!IsFinalTx(tx.get().GetTx(), nHeight, m_lock_time_cutoff)) {\n             return false;\n         }\n     }\n     return true;\n }\n \n-void BlockAssembler::AddToBlock(CTxMemPool::txiter iter)\n+void BlockAssembler::AddToBlock(const CTxMemPoolEntry& entry)\n {\n-    pblocktemplate->block.vtx.emplace_back(iter->GetSharedTx());\n-    pblocktemplate->vTxFees.push_back(iter->GetFee());\n-    pblocktemplate->vTxSigOpsCost.push_back(iter->GetSigOpCost());\n-    nBlockWeight += iter->GetTxWeight();\n+    pblocktemplate->block.vtx.emplace_back(entry.GetSharedTx());\n+    pblocktemplate->vTxFees.push_back(entry.GetFee());\n+    pblocktemplate->vTxSigOpsCost.push_back(entry.GetSigOpCost());\n+    nBlockWeight += entry.GetTxWeight();\n     ++nBlockTx;\n-    nBlockSigOpsCost += iter->GetSigOpCost();\n-    nFees += iter->GetFee();\n-    inBlock.insert(iter);\n+    nBlockSigOpsCost += entry.GetSigOpCost();\n+    nFees += entry.GetFee();\n \n     bool fPrintPriority = gArgs.GetBoolArg(\"-printpriority\", DEFAULT_PRINTPRIORITY);\n     if (fPrintPriority) {\n         LogPrintf(\"fee rate %s txid %s\\n\",\n-                  CFeeRate(iter->GetModifiedFee(), iter->GetTxSize()).ToString(),\n-                  iter->GetTx().GetHash().ToString());\n+                  CFeeRate(entry.GetModifiedFee(), entry.GetTxSize()).ToString(),\n+                  entry.GetTx().GetHash().ToString());\n     }\n }\n \n-/** Add descendants of given transactions to mapModifiedTx with ancestor\n- * state updated assuming given transactions are inBlock. Returns number\n- * of updated descendants. */\n-static int UpdatePackagesForAdded(const CTxMemPool& mempool,\n-                                  const CTxMemPool::setEntries& alreadyAdded,\n-                                  indexed_modified_transaction_set& mapModifiedTx) EXCLUSIVE_LOCKS_REQUIRED(mempool.cs)\n+void BlockAssembler::addChunks(const CTxMemPool& mempool)\n {\n     AssertLockHeld(mempool.cs);\n-\n-    int nDescendantsUpdated = 0;\n-    for (CTxMemPool::txiter it : alreadyAdded) {\n-        CTxMemPool::setEntries descendants;\n-        mempool.CalculateDescendants(it, descendants);\n-        // Insert all descendants (not yet in block) into the modified set\n-        for (CTxMemPool::txiter desc : descendants) {\n-            if (alreadyAdded.count(desc)) {\n-                continue;\n-            }\n-            ++nDescendantsUpdated;\n-            modtxiter mit = mapModifiedTx.find(desc);\n-            if (mit == mapModifiedTx.end()) {\n-                CTxMemPoolModifiedEntry modEntry(desc);\n-                mit = mapModifiedTx.insert(modEntry).first;\n-            }\n-            mapModifiedTx.modify(mit, update_for_parent_inclusion(it));\n-        }\n-    }\n-    return nDescendantsUpdated;\n-}\n-\n-void BlockAssembler::SortForBlock(const CTxMemPool::setEntries& package, std::vector<CTxMemPool::txiter>& sortedEntries)\n-{\n-    // Sort package by ancestor count\n-    // If a transaction A depends on transaction B, then A's ancestor count\n-    // must be greater than B's.  So this is sufficient to validly order the\n-    // transactions for block inclusion.\n-    sortedEntries.clear();\n-    sortedEntries.insert(sortedEntries.begin(), package.begin(), package.end());\n-    std::sort(sortedEntries.begin(), sortedEntries.end(), CompareTxIterByAncestorCount());\n-}\n-\n-// This transaction selection algorithm orders the mempool based\n-// on feerate of a transaction including all unconfirmed ancestors.\n-// Since we don't remove transactions from the mempool as we select them\n-// for block inclusion, we need an alternate method of updating the feerate\n-// of a transaction with its not-yet-selected ancestors as we go.\n-// This is accomplished by walking the in-mempool descendants of selected\n-// transactions and storing a temporary modified state in mapModifiedTxs.\n-// Each time through the loop, we compare the best transaction in\n-// mapModifiedTxs with the next transaction in the mempool to decide what\n-// transaction package to work on next.\n-void BlockAssembler::addPackageTxs(const CTxMemPool& mempool, int& nPackagesSelected, int& nDescendantsUpdated)\n-{\n-    AssertLockHeld(mempool.cs);\n-\n-    // mapModifiedTx will store sorted packages after they are modified\n-    // because some of their txs are already in the block\n-    indexed_modified_transaction_set mapModifiedTx;\n-    // Keep track of entries that failed inclusion, to avoid duplicate work\n-    CTxMemPool::setEntries failedTx;\n-\n-    CTxMemPool::indexed_transaction_set::index<ancestor_score>::type::iterator mi = mempool.mapTx.get<ancestor_score>().begin();\n-    CTxMemPool::txiter iter;\n-\n     // Limit the number of attempts to add transactions to the block when it is\n     // close to full; this is just a simple heuristic to finish quickly if the\n     // mempool has a lot of entries.\n     const int64_t MAX_CONSECUTIVE_FAILURES = 1000;\n     int64_t nConsecutiveFailed = 0;\n \n-    while (mi != mempool.mapTx.get<ancestor_score>().end() || !mapModifiedTx.empty()) {\n-        // First try to find a new transaction in mapTx to evaluate.\n-        //\n-        // Skip entries in mapTx that are already in a block or are present\n-        // in mapModifiedTx (which implies that the mapTx ancestor state is\n-        // stale due to ancestor inclusion in the block)\n-        // Also skip transactions that we've already failed to add. This can happen if\n-        // we consider a transaction in mapModifiedTx and it fails: we can then\n-        // potentially consider it again while walking mapTx.  It's currently\n-        // guaranteed to fail again, but as a belt-and-suspenders check we put it in\n-        // failedTx and avoid re-evaluation, since the re-evaluation would be using\n-        // cached size/sigops/fee values that are not actually correct.\n-        /** Return true if given transaction from mapTx has already been evaluated,\n-         * or if the transaction's cached data in mapTx is incorrect. */\n-        if (mi != mempool.mapTx.get<ancestor_score>().end()) {\n-            auto it = mempool.mapTx.project<0>(mi);\n-            assert(it != mempool.mapTx.end());\n-            if (mapModifiedTx.count(it) || inBlock.count(it) || failedTx.count(it)) {\n-                ++mi;\n-                continue;\n-            }\n-        }\n-\n-        // Now that mi is not stale, determine which transaction to evaluate:\n-        // the next entry from mapTx, or the best from mapModifiedTx?\n-        bool fUsingModified = false;\n-\n-        modtxscoreiter modit = mapModifiedTx.get<ancestor_score>().begin();\n-        if (mi == mempool.mapTx.get<ancestor_score>().end()) {\n-            // We're out of entries in mapTx; use the entry from mapModifiedTx\n-            iter = modit->iter;\n-            fUsingModified = true;\n-        } else {\n-            // Try to compare the mapTx entry to the mapModifiedTx entry\n-            iter = mempool.mapTx.project<0>(mi);\n-            if (modit != mapModifiedTx.get<ancestor_score>().end() &&\n-                    CompareTxMemPoolEntryByAncestorFee()(*modit, CTxMemPoolModifiedEntry(iter))) {\n-                // The best entry in mapModifiedTx has higher score\n-                // than the one from mapTx.\n-                // Switch which transaction (package) to consider\n-                iter = modit->iter;\n-                fUsingModified = true;\n-            } else {\n-                // Either no entry in mapModifiedTx, or it's worse than mapTx.\n-                // Increment mi for the next loop iteration.\n-                ++mi;\n-            }\n-        }\n-\n-        // We skip mapTx entries that are inBlock, and mapModifiedTx shouldn't\n-        // contain anything that is inBlock.\n-        assert(!inBlock.count(iter));\n-\n-        uint64_t packageSize = iter->GetSizeWithAncestors();\n-        CAmount packageFees = iter->GetModFeesWithAncestors();\n-        int64_t packageSigOpsCost = iter->GetSigOpCostWithAncestors();\n-        if (fUsingModified) {\n-            packageSize = modit->nSizeWithAncestors;\n-            packageFees = modit->nModFeesWithAncestors;\n-            packageSigOpsCost = modit->nSigOpCostWithAncestors;\n+    std::vector<Cluster::HeapEntry> heap_chunks;\n+    // Initialize the heap with the best entry from each cluster\n+    for (const auto & [id, cluster] : mempool.m_cluster_map) {\n+        if (!cluster->m_chunks.empty()) {\n+            heap_chunks.emplace_back(cluster->m_chunks.begin(), cluster.get());\n         }\n-\n-        if (packageFees < m_options.blockMinFeeRate.GetFee(packageSize)) {\n-            // Everything else we might consider has a lower fee rate\n+    }\n+    // Define comparison operator on our heap entries (using feerate of chunks).\n+    auto cmp = [](const Cluster::HeapEntry& a, const Cluster::HeapEntry& b) {\n+        // TODO: branch on size of fee to do this as 32-bit calculation\n+        // instead? etc\n+        return a.first->fee*b.first->size < b.first->fee*a.first->size;\n+    };\n+    // TODO: replace the heap with a priority queue\n+    std::make_heap(heap_chunks.begin(), heap_chunks.end(), cmp);",
      "path": "src/node/miner.cpp",
      "position": 244,
      "original_position": 244,
      "commit_id": "58a60d695eb860180780c41ac57d8f38305841a5",
      "original_commit_id": "26e831d5f2c7db15e7a50f910ddf4e1737d226da",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "don't ask why but I'm getting significant performance improvement(>10%) just `push_heap`ing everything from scratch, and similarly with priority_queue",
      "created_at": "2023-10-20T19:46:25Z",
      "updated_at": "2023-10-24T18:23:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1367430770",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1367430770"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 248,
      "original_line": 248,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1370716238",
      "pull_request_review_id": 1695722724,
      "id": 1370716238,
      "node_id": "PRRC_kwDOABII585Rs3hO",
      "diff_hunk": "@@ -83,26 +86,104 @@ static std::vector<CTransactionRef> CreateOrderedCoins(FastRandomContext& det_ra\n     return ordered_coins;\n }\n \n+static void MemPoolAddTransactions(benchmark::Bench& bench)\n+{\n+    FastRandomContext det_rand{true};\n+    int childTxs = 90;\n+    if (bench.complexityN() > 1) {\n+        childTxs = static_cast<int>(bench.complexityN());\n+    }\n+    const auto testing_setup = MakeNoLogFileContext<const TestingSetup>(ChainType::MAIN);\n+    CTxMemPool& pool = *testing_setup.get()->m_node.mempool;\n+\n+    std::vector<CTransactionRef> transactions;\n+    // Create 1000 clusters of 100 transactions each",
      "path": "src/bench/mempool_stress.cpp",
      "position": 54,
      "original_position": 54,
      "commit_id": "58a60d695eb860180780c41ac57d8f38305841a5",
      "original_commit_id": "c5d3c42da466feca9192d0e389654ba55caec5a6",
      "in_reply_to_id": 1366105725,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "The immediate downside to a cap on number of clusters is that singleton, high-feerate transactions would not be accepted.  And I don't think we need to -- the only places where having more clusters makes us slower is in eviction and mining, and for both of those use cases we could improve performance (if we need to) by maintaining the relevant heap data structures (or something equivalent) as chunks are modified, rather than all at once. \r\n\r\nFor now in this branch I've created these from scratch each time, but if it turns out that performance is meaningfully impacted when the mempool is busy, then I can optimize this further by just using a bit more memory.",
      "created_at": "2023-10-24T19:24:39Z",
      "updated_at": "2023-10-24T19:24:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1370716238",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1370716238"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 100,
      "original_line": 100,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371708009",
      "pull_request_review_id": 1697257034,
      "id": 1371708009,
      "node_id": "PRRC_kwDOABII585Rwppp",
      "diff_hunk": "@@ -60,57 +59,26 @@ std::optional<std::string> GetEntriesForConflicts(const CTransaction& tx,\n {\n     AssertLockHeld(pool.cs);\n     const uint256 txid = tx.GetHash();\n-    uint64_t nConflictingCount = 0;\n-    for (const auto& mi : iters_conflicting) {\n-        nConflictingCount += mi->GetCountWithDescendants();\n-        // Rule #5: don't consider replacing more than MAX_REPLACEMENT_CANDIDATES\n-        // entries from the mempool. This potentially overestimates the number of actual\n-        // descendants (i.e. if multiple conflicts share a descendant, it will be counted multiple\n-        // times), but we just want to be conservative to avoid doing too much work.\n-        if (nConflictingCount > MAX_REPLACEMENT_CANDIDATES) {\n-            return strprintf(\"rejecting replacement %s; too many potential replacements (%d > %d)\\n\",\n-                             txid.ToString(),\n-                             nConflictingCount,\n-                             MAX_REPLACEMENT_CANDIDATES);\n-        }\n-    }\n     // Calculate the set of all transactions that would have to be evicted.\n     for (CTxMemPool::txiter it : iters_conflicting) {\n-        pool.CalculateDescendants(it, all_conflicts);\n-    }\n-    return std::nullopt;\n-}\n-\n-std::optional<std::string> HasNoNewUnconfirmed(const CTransaction& tx,\n-                                               const CTxMemPool& pool,\n-                                               const CTxMemPool::setEntries& iters_conflicting)\n-{\n-    AssertLockHeld(pool.cs);\n-    std::set<uint256> parents_of_conflicts;\n-    for (const auto& mi : iters_conflicting) {\n-        for (const CTxIn& txin : mi->GetTx().vin) {\n-            parents_of_conflicts.insert(txin.prevout.hash);\n+        // Exit early if we're going to fail (see below)\n+        if (all_conflicts.size() > MAX_REPLACEMENT_CANDIDATES) {",
      "path": "src/policy/rbf.cpp",
      "position": null,
      "original_position": 45,
      "commit_id": "58a60d695eb860180780c41ac57d8f38305841a5",
      "original_commit_id": "3a42ba255a73e609ac37eee8288208fa43953779",
      "in_reply_to_id": 1365753481,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "There is room to relax this rule some, so if this is important we can do so. I think the requirement is a bound on the number of clusters that would have to be re-sorted in order to accept the new transaction.  We can approximate that as the number of clusters that would be non-empty as a result of removing all the conflicting transactions from the mempool, and only process replacements for which that is below some target.  \r\n\r\nThat would be a more complex logic though, so before implementing it I wanted to have some sense of whether we need to.  Has the historical 100-transaction-conflict limit been problematic for use cases in the past?  Note also that in the new code, we are calculating the number of conflicts exactly (the old code used an approximation, which could be gamed by an adversary).",
      "created_at": "2023-10-25T12:48:09Z",
      "updated_at": "2023-10-25T12:48:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1371708009",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371708009"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 65,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371803601",
      "pull_request_review_id": 1697415470,
      "id": 1371803601,
      "node_id": "PRRC_kwDOABII585RxA_R",
      "diff_hunk": "@@ -60,57 +59,26 @@ std::optional<std::string> GetEntriesForConflicts(const CTransaction& tx,\n {\n     AssertLockHeld(pool.cs);\n     const uint256 txid = tx.GetHash();\n-    uint64_t nConflictingCount = 0;\n-    for (const auto& mi : iters_conflicting) {\n-        nConflictingCount += mi->GetCountWithDescendants();\n-        // Rule #5: don't consider replacing more than MAX_REPLACEMENT_CANDIDATES\n-        // entries from the mempool. This potentially overestimates the number of actual\n-        // descendants (i.e. if multiple conflicts share a descendant, it will be counted multiple\n-        // times), but we just want to be conservative to avoid doing too much work.\n-        if (nConflictingCount > MAX_REPLACEMENT_CANDIDATES) {\n-            return strprintf(\"rejecting replacement %s; too many potential replacements (%d > %d)\\n\",\n-                             txid.ToString(),\n-                             nConflictingCount,\n-                             MAX_REPLACEMENT_CANDIDATES);\n-        }\n-    }\n     // Calculate the set of all transactions that would have to be evicted.\n     for (CTxMemPool::txiter it : iters_conflicting) {\n-        pool.CalculateDescendants(it, all_conflicts);\n-    }\n-    return std::nullopt;\n-}\n-\n-std::optional<std::string> HasNoNewUnconfirmed(const CTransaction& tx,\n-                                               const CTxMemPool& pool,\n-                                               const CTxMemPool::setEntries& iters_conflicting)\n-{\n-    AssertLockHeld(pool.cs);\n-    std::set<uint256> parents_of_conflicts;\n-    for (const auto& mi : iters_conflicting) {\n-        for (const CTxIn& txin : mi->GetTx().vin) {\n-            parents_of_conflicts.insert(txin.prevout.hash);\n+        // Exit early if we're going to fail (see below)\n+        if (all_conflicts.size() > MAX_REPLACEMENT_CANDIDATES) {",
      "path": "src/policy/rbf.cpp",
      "position": null,
      "original_position": 45,
      "commit_id": "58a60d695eb860180780c41ac57d8f38305841a5",
      "original_commit_id": "3a42ba255a73e609ac37eee8288208fa43953779",
      "in_reply_to_id": 1365753481,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "~~Ah! I wrote a huge response to this, then looked up our previous discussions, and realized I didn't actually read the code: https://github.com/bitcoin/bitcoin/issues/27677#issuecomment-1554708843~~\r\n\r\n~~IIUC now, this is only counting *direct* conflicts, and not the descendants that are booted.~~\r\n\r\n~~I think that's fine.~~\r\n\r\nActually no, the existing code comments were just misleading, looks like the issue still exists, see: https://github.com/bitcoin/bitcoin/issues/27677#issuecomment-1554708843",
      "created_at": "2023-10-25T13:52:53Z",
      "updated_at": "2023-10-25T13:59:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1371803601",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371803601"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 65,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371813655",
      "pull_request_review_id": 1697431678,
      "id": 1371813655,
      "node_id": "PRRC_kwDOABII585RxDcX",
      "diff_hunk": "@@ -60,57 +59,26 @@ std::optional<std::string> GetEntriesForConflicts(const CTransaction& tx,\n {\n     AssertLockHeld(pool.cs);\n     const uint256 txid = tx.GetHash();\n-    uint64_t nConflictingCount = 0;\n-    for (const auto& mi : iters_conflicting) {\n-        nConflictingCount += mi->GetCountWithDescendants();\n-        // Rule #5: don't consider replacing more than MAX_REPLACEMENT_CANDIDATES\n-        // entries from the mempool. This potentially overestimates the number of actual\n-        // descendants (i.e. if multiple conflicts share a descendant, it will be counted multiple\n-        // times), but we just want to be conservative to avoid doing too much work.\n-        if (nConflictingCount > MAX_REPLACEMENT_CANDIDATES) {\n-            return strprintf(\"rejecting replacement %s; too many potential replacements (%d > %d)\\n\",\n-                             txid.ToString(),\n-                             nConflictingCount,\n-                             MAX_REPLACEMENT_CANDIDATES);\n-        }\n-    }\n     // Calculate the set of all transactions that would have to be evicted.\n     for (CTxMemPool::txiter it : iters_conflicting) {\n-        pool.CalculateDescendants(it, all_conflicts);\n-    }\n-    return std::nullopt;\n-}\n-\n-std::optional<std::string> HasNoNewUnconfirmed(const CTransaction& tx,\n-                                               const CTxMemPool& pool,\n-                                               const CTxMemPool::setEntries& iters_conflicting)\n-{\n-    AssertLockHeld(pool.cs);\n-    std::set<uint256> parents_of_conflicts;\n-    for (const auto& mi : iters_conflicting) {\n-        for (const CTxIn& txin : mi->GetTx().vin) {\n-            parents_of_conflicts.insert(txin.prevout.hash);\n+        // Exit early if we're going to fail (see below)\n+        if (all_conflicts.size() > MAX_REPLACEMENT_CANDIDATES) {",
      "path": "src/policy/rbf.cpp",
      "position": null,
      "original_position": 45,
      "commit_id": "58a60d695eb860180780c41ac57d8f38305841a5",
      "original_commit_id": "3a42ba255a73e609ac37eee8288208fa43953779",
      "in_reply_to_id": 1365753481,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ah yes, in the new code I'm only counting direct conflicts right now, because every descendant of a direct conflict must be in the same cluster as that conflict.  So this is already a relaxation of the existing rule.",
      "created_at": "2023-10-25T13:59:21Z",
      "updated_at": "2023-10-25T13:59:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1371813655",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371813655"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 65,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371819952",
      "pull_request_review_id": 1697442366,
      "id": 1371819952,
      "node_id": "PRRC_kwDOABII585RxE-w",
      "diff_hunk": "@@ -60,57 +59,26 @@ std::optional<std::string> GetEntriesForConflicts(const CTransaction& tx,\n {\n     AssertLockHeld(pool.cs);\n     const uint256 txid = tx.GetHash();\n-    uint64_t nConflictingCount = 0;\n-    for (const auto& mi : iters_conflicting) {\n-        nConflictingCount += mi->GetCountWithDescendants();\n-        // Rule #5: don't consider replacing more than MAX_REPLACEMENT_CANDIDATES\n-        // entries from the mempool. This potentially overestimates the number of actual\n-        // descendants (i.e. if multiple conflicts share a descendant, it will be counted multiple\n-        // times), but we just want to be conservative to avoid doing too much work.\n-        if (nConflictingCount > MAX_REPLACEMENT_CANDIDATES) {\n-            return strprintf(\"rejecting replacement %s; too many potential replacements (%d > %d)\\n\",\n-                             txid.ToString(),\n-                             nConflictingCount,\n-                             MAX_REPLACEMENT_CANDIDATES);\n-        }\n-    }\n     // Calculate the set of all transactions that would have to be evicted.\n     for (CTxMemPool::txiter it : iters_conflicting) {\n-        pool.CalculateDescendants(it, all_conflicts);\n-    }\n-    return std::nullopt;\n-}\n-\n-std::optional<std::string> HasNoNewUnconfirmed(const CTransaction& tx,\n-                                               const CTxMemPool& pool,\n-                                               const CTxMemPool::setEntries& iters_conflicting)\n-{\n-    AssertLockHeld(pool.cs);\n-    std::set<uint256> parents_of_conflicts;\n-    for (const auto& mi : iters_conflicting) {\n-        for (const CTxIn& txin : mi->GetTx().vin) {\n-            parents_of_conflicts.insert(txin.prevout.hash);\n+        // Exit early if we're going to fail (see below)\n+        if (all_conflicts.size() > MAX_REPLACEMENT_CANDIDATES) {",
      "path": "src/policy/rbf.cpp",
      "position": null,
      "original_position": 45,
      "commit_id": "58a60d695eb860180780c41ac57d8f38305841a5",
      "original_commit_id": "3a42ba255a73e609ac37eee8288208fa43953779",
      "in_reply_to_id": 1365753481,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> I think the requirement is a bound on the number of clusters that would have to be re-sorted in order to accept the new transaction.\r\n\r\nAs an alternative, we drop the replacement limit to like, 10 or something, and then *only* count the *direct* conflicts, not the direct conflicts and all the descendants?",
      "created_at": "2023-10-25T14:01:44Z",
      "updated_at": "2023-10-25T14:01:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1371819952",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371819952"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 65,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1392325037",
      "pull_request_review_id": 1729366575,
      "id": 1392325037,
      "node_id": "PRRC_kwDOABII585S_TGt",
      "diff_hunk": "@@ -118,5 +199,63 @@ static void MempoolCheck(benchmark::Bench& bench)\n     });\n }\n \n+static void MemPoolMiningScoreCheck(benchmark::Bench& bench)\n+{\n+    // Default test: each cluster is of size 20, and we'll try to RBF with a\n+    // transaction that merges 10 clusters, evicting 10 transactions from each.\n+\n+    FastRandomContext det_rand{true};\n+    int childTxs = 10;\n+    if (bench.complexityN() > 1) {\n+        childTxs = static_cast<int>(bench.complexityN());\n+    }\n+    const auto testing_setup = MakeNoLogFileContext<const TestingSetup>(ChainType::MAIN);\n+    CTxMemPool& pool = *testing_setup.get()->m_node.mempool;\n+\n+    LOCK2(cs_main, pool.cs);\n+\n+    std::vector<CTransactionRef> parent_txs_for_rbf;\n+    std::set<uint256> child_txs_to_conflict_with;\n+\n+    for (int i=0; i<10; i++) {\n+        std::vector<CTransactionRef> transactions = CreateCoinCluster(det_rand, childTxs, /*min_ancestors=*/1);\n+        parent_txs_for_rbf.push_back(transactions[0]);\n+        // Conflict with everything after the first 10 transactions\n+        for (size_t j=10; j<transactions.size(); ++j) {\n+            child_txs_to_conflict_with.insert(transactions[j]->GetHash());\n+        }\n+\n+        // Add all transactions to the mempool.\n+        for (auto& tx : transactions) {\n+            AddTx(tx, pool, det_rand);\n+        }\n+    }\n+\n+    // Construct a transaction that spends from each of the parent transactions\n+    // selected.\n+    CMutableTransaction tx = CMutableTransaction();\n+    tx.vin.resize(10);\n+    for (size_t i=0; i<parent_txs_for_rbf.size(); ++i) {\n+        tx.vin[i].prevout = COutPoint(parent_txs_for_rbf[i]->GetHash(), 0);\n+        tx.vin[i].scriptSig = CScript() << i;\n+    }\n+    tx.vout.resize(1);\n+    for (auto& out : tx.vout) {\n+        out.scriptPubKey = CScript() << CScriptNum(det_rand.randrange(19)+1) << OP_EQUAL;\n+        out.nValue = 10 * COIN;\n+    }\n+\n+    CTxMemPool::setEntries all_conflicts = pool.GetIterSet(child_txs_to_conflict_with);\n+    CTxMemPoolEntry entry(MakeTransactionRef(tx), det_rand.randrange(10000)+1000, 0, 1, 0, false, 4, LockPoints());\n+\n+    bench.run([&]() NO_THREAD_SAFETY_ANALYSIS {\n+        CTxMemPool::Limits limits(pool.m_limits);\n+        pool.CalculateMiningScoreOfReplacementTx(entry, det_rand.randrange(30000)+1000, all_conflicts, limits);\n+    });\n+}\n+\n+BENCHMARK(MemPoolAncestorsDescendants, benchmark::PriorityLevel::HIGH);\n+BENCHMARK(MemPoolAddTransactions, benchmark::PriorityLevel::HIGH);",
      "path": "src/bench/mempool_stress.cpp",
      "position": 212,
      "original_position": 210,
      "commit_id": "58a60d695eb860180780c41ac57d8f38305841a5",
      "original_commit_id": "dd6684ab665bc8ae76b76fdd2e578fc77d562a52",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "dd6684ab665bc8ae76b76fdd2e578fc77d562a52: While you're touching this, can you rename `MempoolCheck` to `MemPoolCheck`, `MempoolEviction` to `MemPoolEviction` and `ComplexMemPool` to `MempoolComplex`? That makes `-filter=MemPool.*` work\r\n\r\nAs a workaround, `-filter=.*Mem.*` does work.",
      "created_at": "2023-11-14T10:05:29Z",
      "updated_at": "2023-11-14T10:29:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1392325037",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1392325037"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 260,
      "original_line": 260,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1392364899",
      "pull_request_review_id": 1729419761,
      "id": 1392364899,
      "node_id": "PRRC_kwDOABII585S_c1j",
      "diff_hunk": "@@ -574,6 +574,8 @@ void SetupServerArgs(ArgsManager& argsman)\n     argsman.AddArg(\"-limitancestorsize=<n>\", strprintf(\"Do not accept transactions whose size with all in-mempool ancestors exceeds <n> kilobytes (default: %u)\", DEFAULT_ANCESTOR_SIZE_LIMIT_KVB), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n     argsman.AddArg(\"-limitdescendantcount=<n>\", strprintf(\"Do not accept transactions if any ancestor would have <n> or more in-mempool descendants (default: %u)\", DEFAULT_DESCENDANT_LIMIT), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n     argsman.AddArg(\"-limitdescendantsize=<n>\", strprintf(\"Do not accept transactions if any ancestor would have more than <n> kilobytes of in-mempool descendants (default: %u).\", DEFAULT_DESCENDANT_SIZE_LIMIT_KVB), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n+    argsman.AddArg(\"-limitclustercount=<n>\", strprintf(\"Do not accept transactions connected to <n> or more existing in-mempool transactions (default: %u)\", DEFAULT_CLUSTER_LIMIT), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);",
      "path": "src/init.cpp",
      "position": 4,
      "original_position": 4,
      "commit_id": "58a60d695eb860180780c41ac57d8f38305841a5",
      "original_commit_id": "7fdcccd1338655328c28ff949d50442ace931a5e",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I made an attempt at dropping `-limitdescendantsize` and friends: https://github.com/Sjors/bitcoin/commits/2022/11/cluster-mempool\r\n\r\nI (naively) replaced ancestor and descendent limits in coin selection with the new cluster limit. At least the tests pass *.\r\n\r\nWhen we drop these settings anyone who uses them will get an error when starting the node. That's probably a good thing, since they should read about this change.\r\n\r\n`* =` well, wallet_basic.py fails with:\r\n\r\n```\r\nInternal bug detected: Shared UTXOs among selection results\r\nwallet/coinselection.h:340 (InsertInputs)\r\n```",
      "created_at": "2023-11-14T10:34:19Z",
      "updated_at": "2023-11-14T12:30:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1392364899",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1392364899"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 577,
      "original_line": 577,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1392567718",
      "pull_request_review_id": 1729707068,
      "id": 1392567718,
      "node_id": "PRRC_kwDOABII585TAOWm",
      "diff_hunk": "@@ -1245,3 +1536,169 @@ std::vector<CTxMemPool::txiter> CTxMemPool::GatherClusters(const std::vector<uin\n     }\n     return clustered_txs;\n }\n+\n+void Cluster::AddTransaction(const CTxMemPoolEntry& entry, bool sort)\n+{\n+    m_chunks.emplace_back(entry.GetModifiedFee(), entry.GetTxSize());\n+    m_chunks.back().txs.emplace_back(entry);\n+    entry.m_cluster = this;\n+    ++m_tx_count;\n+    if (sort) Sort();\n+    return;\n+}\n+\n+void Cluster::RemoveTransaction(const CTxMemPoolEntry& entry)\n+{\n+    m_chunks[entry.m_loc.first].txs.erase(entry.m_loc.second);\n+\n+    // Chunk (or cluster) may now be empty, but this will get cleaned up",
      "path": "src/txmempool.cpp",
      "position": 1759,
      "original_position": 407,
      "commit_id": "58a60d695eb860180780c41ac57d8f38305841a5",
      "original_commit_id": "54f39ca8f101483f5f82707689ca49431d4091e5",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "54f39ca8f101483f5f82707689ca49431d4091e5: what if the deleted transaction makes it so there are now two clusters? This is also safe to ignore? ",
      "created_at": "2023-11-14T13:15:36Z",
      "updated_at": "2023-11-14T14:27:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1392567718",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1392567718"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1825,
      "original_line": 1554,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1392640692",
      "pull_request_review_id": 1729707068,
      "id": 1392640692,
      "node_id": "PRRC_kwDOABII585TAgK0",
      "diff_hunk": "@@ -1245,3 +1536,169 @@ std::vector<CTxMemPool::txiter> CTxMemPool::GatherClusters(const std::vector<uin\n     }\n     return clustered_txs;\n }\n+\n+void Cluster::AddTransaction(const CTxMemPoolEntry& entry, bool sort)\n+{\n+    m_chunks.emplace_back(entry.GetModifiedFee(), entry.GetTxSize());\n+    m_chunks.back().txs.emplace_back(entry);\n+    entry.m_cluster = this;\n+    ++m_tx_count;\n+    if (sort) Sort();\n+    return;\n+}\n+\n+void Cluster::RemoveTransaction(const CTxMemPoolEntry& entry)\n+{\n+    m_chunks[entry.m_loc.first].txs.erase(entry.m_loc.second);\n+\n+    // Chunk (or cluster) may now be empty, but this will get cleaned up\n+    // when the cluster is re-sorted (or when the cluster is deleted) Note:\n+    // if we cleaned up empty chunks here, then this would break the\n+    // locations of other entries in the cluster. Since we would like to be\n+    // able to do multiple removals in a row and then clean up the sort, we\n+    // can't clean up empty chunks here.\n+    --m_tx_count;\n+    return;\n+}\n+\n+void Cluster::RechunkFromLinearization(std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef>& txs, bool reassign_locations)\n+{\n+    m_chunks.clear();\n+\n+    for (auto txentry : txs) {\n+        m_chunks.emplace_back(txentry.get().GetModifiedFee(), txentry.get().GetTxSize());\n+        m_chunks.back().txs.emplace_back(txentry);",
      "path": "src/txmempool.cpp",
      "position": 1777,
      "original_position": 423,
      "commit_id": "58a60d695eb860180780c41ac57d8f38305841a5",
      "original_commit_id": "54f39ca8f101483f5f82707689ca49431d4091e5",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "54f39ca8f101483f5f82707689ca49431d4091e5: So you're creating a chunk for each new transaction and then erasing it if the fee rate goes down. Why not the other way around? ",
      "created_at": "2023-11-14T14:09:48Z",
      "updated_at": "2023-11-14T14:27:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1392640692",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1392640692"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1843,
      "original_line": 1570,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1392646700",
      "pull_request_review_id": 1729707068,
      "id": 1392646700,
      "node_id": "PRRC_kwDOABII585TAhos",
      "diff_hunk": "@@ -1245,3 +1536,169 @@ std::vector<CTxMemPool::txiter> CTxMemPool::GatherClusters(const std::vector<uin\n     }\n     return clustered_txs;\n }\n+\n+void Cluster::AddTransaction(const CTxMemPoolEntry& entry, bool sort)\n+{\n+    m_chunks.emplace_back(entry.GetModifiedFee(), entry.GetTxSize());\n+    m_chunks.back().txs.emplace_back(entry);\n+    entry.m_cluster = this;\n+    ++m_tx_count;\n+    if (sort) Sort();\n+    return;\n+}\n+\n+void Cluster::RemoveTransaction(const CTxMemPoolEntry& entry)\n+{\n+    m_chunks[entry.m_loc.first].txs.erase(entry.m_loc.second);\n+\n+    // Chunk (or cluster) may now be empty, but this will get cleaned up\n+    // when the cluster is re-sorted (or when the cluster is deleted) Note:\n+    // if we cleaned up empty chunks here, then this would break the\n+    // locations of other entries in the cluster. Since we would like to be\n+    // able to do multiple removals in a row and then clean up the sort, we\n+    // can't clean up empty chunks here.\n+    --m_tx_count;\n+    return;\n+}\n+\n+void Cluster::RechunkFromLinearization(std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef>& txs, bool reassign_locations)\n+{\n+    m_chunks.clear();\n+\n+    for (auto txentry : txs) {\n+        m_chunks.emplace_back(txentry.get().GetModifiedFee(), txentry.get().GetTxSize());\n+        m_chunks.back().txs.emplace_back(txentry);\n+        while (m_chunks.size() >= 2) {\n+            auto cur_iter = std::prev(m_chunks.end());\n+            auto prev_iter = std::prev(cur_iter);\n+            double feerate_prev = prev_iter->fee*cur_iter->size;",
      "path": "src/txmempool.cpp",
      "position": 1781,
      "original_position": 427,
      "commit_id": "58a60d695eb860180780c41ac57d8f38305841a5",
      "original_commit_id": "54f39ca8f101483f5f82707689ca49431d4091e5",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "54f39ca8f101483f5f82707689ca49431d4091e5: shouldn't this be `fee / size`? Or do you mean to use an inverse fee rate for performance (`inv_fee_rate`)?",
      "created_at": "2023-11-14T14:13:05Z",
      "updated_at": "2023-11-14T14:27:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1392646700",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1392646700"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1847,
      "original_line": 1574,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399053865",
      "pull_request_review_id": 1739566572,
      "id": 1399053865,
      "node_id": "PRRC_kwDOABII585TY94p",
      "diff_hunk": "@@ -632,6 +634,22 @@ class CTxMemPool\n      */\n     void UpdateTransactionsFromBlock(const std::vector<uint256>& vHashesToUpdate) EXCLUSIVE_LOCKS_REQUIRED(cs, cs_main) LOCKS_EXCLUDED(m_epoch);\n \n+    /**\n+     * Calculate whether cluster size limits would be exceeded if a new tx were\n+     * added to the mempool (assuming no conflicts).",
      "path": "src/txmempool.h",
      "position": 446,
      "original_position": 15,
      "commit_id": "58a60d695eb860180780c41ac57d8f38305841a5",
      "original_commit_id": "065e18fff30a91c94c47d5c2fc65b13ddc38aa47",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "065e18fff30a91c94c47d5c2fc65b13ddc38aa47: do you plan to relax this assumption so that a transaction in (a) full cluster(s) can be replaced?\r\n\r\n_Update_: `AcceptSingleTransaction` skips `ClusterSizeChecks` if there's a replacement, in which case `ReplacementChecks` checks the new cluster size. So this is not an issue.",
      "created_at": "2023-11-20T11:22:37Z",
      "updated_at": "2023-11-20T14:32:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399053865",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399053865"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 529,
      "original_line": 529,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399137900",
      "pull_request_review_id": 1739706549,
      "id": 1399137900,
      "node_id": "PRRC_kwDOABII585TZSZs",
      "diff_hunk": "@@ -553,6 +660,39 @@ static RPCHelpMan getmempooldescendants()\n     };\n }\n \n+static RPCHelpMan getmempoolcluster()\n+{\n+    return RPCHelpMan{\"getmempoolcluster\",\n+        \"\\nReturns mempool data for given cluster\\n\",\n+        {\n+            {\"id\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The cluster id (must be in mempool)\"},",
      "path": "src/rpc/mempool.cpp",
      "position": 260,
      "original_position": 192,
      "commit_id": "58a60d695eb860180780c41ac57d8f38305841a5",
      "original_commit_id": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1: it would be more practical to (also) have a lookup by transaction hash",
      "created_at": "2023-11-20T12:32:16Z",
      "updated_at": "2023-11-20T12:32:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399137900",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399137900"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 687,
      "original_line": 687,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399160874",
      "pull_request_review_id": 1739741540,
      "id": 1399160874,
      "node_id": "PRRC_kwDOABII585TZYAq",
      "diff_hunk": "@@ -1245,3 +1536,169 @@ std::vector<CTxMemPool::txiter> CTxMemPool::GatherClusters(const std::vector<uin\n     }\n     return clustered_txs;\n }\n+\n+void Cluster::AddTransaction(const CTxMemPoolEntry& entry, bool sort)\n+{\n+    m_chunks.emplace_back(entry.GetModifiedFee(), entry.GetTxSize());\n+    m_chunks.back().txs.emplace_back(entry);\n+    entry.m_cluster = this;\n+    ++m_tx_count;\n+    if (sort) Sort();\n+    return;\n+}\n+\n+void Cluster::RemoveTransaction(const CTxMemPoolEntry& entry)\n+{\n+    m_chunks[entry.m_loc.first].txs.erase(entry.m_loc.second);\n+\n+    // Chunk (or cluster) may now be empty, but this will get cleaned up\n+    // when the cluster is re-sorted (or when the cluster is deleted) Note:\n+    // if we cleaned up empty chunks here, then this would break the\n+    // locations of other entries in the cluster. Since we would like to be\n+    // able to do multiple removals in a row and then clean up the sort, we\n+    // can't clean up empty chunks here.\n+    --m_tx_count;\n+    return;\n+}\n+\n+void Cluster::RechunkFromLinearization(std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef>& txs, bool reassign_locations)\n+{\n+    m_chunks.clear();\n+\n+    for (auto txentry : txs) {\n+        m_chunks.emplace_back(txentry.get().GetModifiedFee(), txentry.get().GetTxSize());\n+        m_chunks.back().txs.emplace_back(txentry);\n+        while (m_chunks.size() >= 2) {\n+            auto cur_iter = std::prev(m_chunks.end());\n+            auto prev_iter = std::prev(cur_iter);\n+            double feerate_prev = prev_iter->fee*cur_iter->size;",
      "path": "src/txmempool.cpp",
      "position": 1781,
      "original_position": 427,
      "commit_id": "58a60d695eb860180780c41ac57d8f38305841a5",
      "original_commit_id": "54f39ca8f101483f5f82707689ca49431d4091e5",
      "in_reply_to_id": 1392646700,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "To check `a/b > c/d` you can instead check `a*d > c*b`, which avoids divisions (which are an order of magnitude slower than multiplication).",
      "created_at": "2023-11-20T12:53:42Z",
      "updated_at": "2023-11-20T12:53:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399160874",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399160874"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1847,
      "original_line": 1574,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399161977",
      "pull_request_review_id": 1739743147,
      "id": 1399161977,
      "node_id": "PRRC_kwDOABII585TZYR5",
      "diff_hunk": "@@ -632,6 +634,22 @@ class CTxMemPool\n      */\n     void UpdateTransactionsFromBlock(const std::vector<uint256>& vHashesToUpdate) EXCLUSIVE_LOCKS_REQUIRED(cs, cs_main) LOCKS_EXCLUDED(m_epoch);\n \n+    /**\n+     * Calculate whether cluster size limits would be exceeded if a new tx were\n+     * added to the mempool (assuming no conflicts).",
      "path": "src/txmempool.h",
      "position": 446,
      "original_position": 15,
      "commit_id": "58a60d695eb860180780c41ac57d8f38305841a5",
      "original_commit_id": "065e18fff30a91c94c47d5c2fc65b13ddc38aa47",
      "in_reply_to_id": 1399053865,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I believe that's an idea we've toyed with (calling it \"sibling eviction\"), but so far it isn't clear how to align that with DoS prevention.",
      "created_at": "2023-11-20T12:54:40Z",
      "updated_at": "2023-11-20T12:54:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399161977",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399161977"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 529,
      "original_line": 529,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399223399",
      "pull_request_review_id": 1739853534,
      "id": 1399223399,
      "node_id": "PRRC_kwDOABII585TZnRn",
      "diff_hunk": "@@ -249,34 +249,81 @@ static RPCHelpMan testmempoolaccept()\n     };\n }\n \n+static std::vector<RPCResult> ClusterDescription()\n+{\n+    return {\n+        RPCResult{RPCResult::Type::NUM, \"vsize\", \"virtual transaction size as defined in BIP 141. This is different from actual serialized size for witness transactions as witness data is discounted.\"},\n+        RPCResult{RPCResult::Type::NUM, \"txcount\", \"number of transactions (including this one)\"},\n+        RPCResult{RPCResult::Type::NUM, \"clusterid\", \"id of the cluster containing this tx\"},\n+        RPCResult{RPCResult::Type::ARR, \"chunks\", \"the cluster's chunks\",\n+            {RPCResult{RPCResult::Type::OBJ, \"chunkentry\", \"\",\n+                {\n+                    RPCResult{RPCResult::Type::STR_AMOUNT, \"fee\", \"fee of this chunk\"},\n+                    RPCResult{RPCResult::Type::NUM, \"vsize\", \"virtual size of this chunk\"},\n+                    RPCResult{RPCResult::Type::NUM, \"feerate\", \"fee rate in \" + CURRENCY_UNIT + \"/kvB\"},\n+                    RPCResult{RPCResult::Type::ARR, \"txids\", \"txids in this chunk in sorted order\",\n+                        {RPCResult{RPCResult::Type::STR_HEX, \"transactionid\", \"the transaction id\"}}}\n+                }}\n+            }\n+        }\n+    };\n+}\n+\n static std::vector<RPCResult> MempoolEntryDescription()\n {\n     return {\n         RPCResult{RPCResult::Type::NUM, \"vsize\", \"virtual transaction size as defined in BIP 141. This is different from actual serialized size for witness transactions as witness data is discounted.\"},\n-        RPCResult{RPCResult::Type::NUM, \"weight\", \"transaction weight as defined in BIP 141.\"},\n-        RPCResult{RPCResult::Type::NUM_TIME, \"time\", \"local time transaction entered pool in seconds since 1 Jan 1970 GMT\"},\n-        RPCResult{RPCResult::Type::NUM, \"height\", \"block height when transaction entered pool\"},\n-        RPCResult{RPCResult::Type::NUM, \"descendantcount\", \"number of in-mempool descendant transactions (including this one)\"},\n-        RPCResult{RPCResult::Type::NUM, \"descendantsize\", \"virtual transaction size of in-mempool descendants (including this one)\"},\n-        RPCResult{RPCResult::Type::NUM, \"ancestorcount\", \"number of in-mempool ancestor transactions (including this one)\"},\n-        RPCResult{RPCResult::Type::NUM, \"ancestorsize\", \"virtual transaction size of in-mempool ancestors (including this one)\"},\n-        RPCResult{RPCResult::Type::STR_HEX, \"wtxid\", \"hash of serialized transaction, including witness data\"},\n-        RPCResult{RPCResult::Type::OBJ, \"fees\", \"\",\n-            {\n-                RPCResult{RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee, denominated in \" + CURRENCY_UNIT},\n-                RPCResult{RPCResult::Type::STR_AMOUNT, \"modified\", \"transaction fee with fee deltas used for mining priority, denominated in \" + CURRENCY_UNIT},\n-                RPCResult{RPCResult::Type::STR_AMOUNT, \"ancestor\", \"transaction fees of in-mempool ancestors (including this one) with fee deltas used for mining priority, denominated in \" + CURRENCY_UNIT},\n-                RPCResult{RPCResult::Type::STR_AMOUNT, \"descendant\", \"transaction fees of in-mempool descendants (including this one) with fee deltas used for mining priority, denominated in \" + CURRENCY_UNIT},\n-            }},\n-        RPCResult{RPCResult::Type::ARR, \"depends\", \"unconfirmed transactions used as inputs for this transaction\",\n-            {RPCResult{RPCResult::Type::STR_HEX, \"transactionid\", \"parent transaction id\"}}},\n-        RPCResult{RPCResult::Type::ARR, \"spentby\", \"unconfirmed transactions spending outputs from this transaction\",\n-            {RPCResult{RPCResult::Type::STR_HEX, \"transactionid\", \"child transaction id\"}}},\n-        RPCResult{RPCResult::Type::BOOL, \"bip125-replaceable\", \"Whether this transaction signals BIP125 replaceability or has an unconfirmed ancestor signaling BIP125 replaceability.\\n\"},\n-        RPCResult{RPCResult::Type::BOOL, \"unbroadcast\", \"Whether this transaction is currently unbroadcast (initial broadcast not yet acknowledged by any peers)\"},\n+            RPCResult{RPCResult::Type::NUM, \"weight\", \"transaction weight as defined in BIP 141.\"},\n+            RPCResult{RPCResult::Type::NUM_TIME, \"time\", \"local time transaction entered pool in seconds since 1 Jan 1970 GMT\"},\n+            RPCResult{RPCResult::Type::NUM, \"height\", \"block height when transaction entered pool\"},\n+            RPCResult{RPCResult::Type::NUM, \"descendantcount\", \"number of in-mempool descendant transactions (including this one)\"},\n+            RPCResult{RPCResult::Type::NUM, \"descendantsize\", \"virtual transaction size of in-mempool descendants (including this one)\"},\n+            RPCResult{RPCResult::Type::NUM, \"ancestorcount\", \"number of in-mempool ancestor transactions (including this one)\"},\n+            RPCResult{RPCResult::Type::NUM, \"ancestorsize\", \"virtual transaction size of in-mempool ancestors (including this one)\"},\n+            RPCResult{RPCResult::Type::NUM, \"chunksize\", \"virtual transaction size of this transaction's chunk\"},\n+            RPCResult{RPCResult::Type::NUM, \"clusterid\", \"id of the cluster containing this tx\"},\n+            RPCResult{RPCResult::Type::STR_HEX, \"wtxid\", \"hash of serialized transaction, including witness data\"},\n+            RPCResult{RPCResult::Type::OBJ, \"fees\", \"\",\n+                {\n+                    RPCResult{RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee, denominated in \" + CURRENCY_UNIT},\n+                    RPCResult{RPCResult::Type::STR_AMOUNT, \"modified\", \"transaction fee with fee deltas used for mining priority, denominated in \" + CURRENCY_UNIT},\n+                    RPCResult{RPCResult::Type::STR_AMOUNT, \"ancestor\", \"transaction fees of in-mempool ancestors (including this one) with fee deltas used for mining priority, denominated in \" + CURRENCY_UNIT},\n+                    RPCResult{RPCResult::Type::STR_AMOUNT, \"descendant\", \"transaction fees of in-mempool descendants (including this one) with fee deltas used for mining priority, denominated in \" + CURRENCY_UNIT},\n+                    RPCResult{RPCResult::Type::STR_AMOUNT, \"chunk\", \"transaction fees of chunk, denominated in \" + CURRENCY_UNIT},\n+                }},\n+            RPCResult{RPCResult::Type::ARR, \"depends\", \"unconfirmed transactions used as inputs for this transaction\",\n+                {RPCResult{RPCResult::Type::STR_HEX, \"transactionid\", \"parent transaction id\"}}},\n+            RPCResult{RPCResult::Type::ARR, \"spentby\", \"unconfirmed transactions spending outputs from this transaction\",\n+                {RPCResult{RPCResult::Type::STR_HEX, \"transactionid\", \"child transaction id\"}}},\n+            RPCResult{RPCResult::Type::BOOL, \"bip125-replaceable\", \"Whether this transaction signals BIP125 replaceability or has an unconfirmed ancestor signaling BIP125 replaceability.\\n\"},\n+            RPCResult{RPCResult::Type::BOOL, \"unbroadcast\", \"Whether this transaction is currently unbroadcast (initial broadcast not yet acknowledged by any peers)\"},\n     };\n }\n \n+static void clusterToJSON(const CTxMemPool& pool, UniValue& info, const Cluster& c) EXCLUSIVE_LOCKS_REQUIRED(pool.cs)\n+{\n+    AssertLockHeld(pool.cs);\n+    info.pushKV(\"vsize\", (int)c.m_tx_size);\n+    info.pushKV(\"txcount\", (int)c.m_tx_count);\n+    info.pushKV(\"clusterid\", (int)c.m_id);\n+    UniValue chunks(UniValue::VARR);\n+    for (auto &chunk : c.m_chunks) {",
      "path": "src/rpc/mempool.cpp",
      "position": 83,
      "original_position": 83,
      "commit_id": "58a60d695eb860180780c41ac57d8f38305841a5",
      "original_commit_id": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1: can you order chunks by mining score?",
      "created_at": "2023-11-20T13:42:19Z",
      "updated_at": "2023-11-20T13:42:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399223399",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399223399"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 310,
      "original_line": 310,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399231122",
      "pull_request_review_id": 1739865937,
      "id": 1399231122,
      "node_id": "PRRC_kwDOABII585TZpKS",
      "diff_hunk": "@@ -764,48 +918,174 @@ void CTxMemPool::check(const CCoinsViewCache& active_coins_tip, int64_t spendhei\n         assert(&tx == it->second);\n     }\n \n+    // Check that clusters are sorted topologically and that the chunk metadata\n+    // matches the txs in the chunk.\n+    for (const auto & [id, cluster] : m_cluster_map) {\n+        assert(cluster->m_tx_count > 0); // no empty clusters\n+        CTxMemPoolEntry::Parents txs_so_far;\n+        for (size_t i=0; i<cluster->m_chunks.size(); ++i) {\n+            int64_t fee{0};\n+            int64_t size{0};\n+            assert(!cluster->m_chunks[i].txs.empty()); // no empty chunks\n+            for (auto it=cluster->m_chunks[i].txs.begin(); it != cluster->m_chunks[i].txs.end(); ++it) {\n+                fee += it->get().GetModifiedFee();\n+                size += it->get().GetTxSize();\n+                // Check that all parents are in txs_so_far\n+                for (const auto& parent : it->get().GetMemPoolParentsConst()) {\n+                    assert(txs_so_far.count(parent));\n+                }\n+                txs_so_far.insert(*it);\n+            }\n+            assert(fee == cluster->m_chunks[i].fee);\n+            assert(size == cluster->m_chunks[i].size);\n+        }\n+        innerUsage += cluster->GetMemoryUsage();\n+    }\n+\n+    // Check that each cluster is connected.\n+    for (const auto & [id, cluster] : m_cluster_map) {\n+        // Since we've checked the parents and children already, we'll use\n+        // those values here.\n+        // We'll check that if we walk to every transaction reachable from the\n+        // first one, that we get every tx in the cluster.\n+        auto first_tx = cluster->m_chunks.front().txs.front();\n+        std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef> work_queue;\n+        int reachable_txs = 1; // we'll count the transactions we reach.\n+\n+        WITH_FRESH_EPOCH(m_epoch);\n+        visited(first_tx.get());\n+        assert(first_tx.get().GetMemPoolParentsConst().size() == 0); // first tx can never have parents.\n+        for (auto child : first_tx.get().GetMemPoolChildrenConst()) {\n+            work_queue.push_back(child);\n+            visited(child.get());\n+            ++reachable_txs;\n+        }\n+        while (work_queue.size() > 0) {\n+            auto next_tx = work_queue.back();\n+            work_queue.pop_back();\n+            for (auto parent : next_tx.get().GetMemPoolParentsConst()) {\n+                if (!visited(parent.get())) {\n+                    ++reachable_txs;\n+                    work_queue.push_back(parent);\n+                }\n+            }\n+            for (auto child : next_tx.get().GetMemPoolChildrenConst()) {\n+                if (!visited(child.get())) {\n+                    ++reachable_txs;\n+                    work_queue.push_back(child);\n+                }\n+            }\n+        }\n+        assert(reachable_txs == cluster->m_tx_count);\n+    }\n+\n     assert(totalTxSize == checkTotal);\n     assert(m_total_fee == check_total_fee);\n     assert(innerUsage == cachedInnerUsage);\n }\n \n-bool CTxMemPool::CompareDepthAndScore(const uint256& hasha, const uint256& hashb, bool wtxid)\n+// Return true if a comes before b in mempool sort order\n+bool CTxMemPool::CompareMiningScore(txiter a, txiter b) const\n+{\n+    if (a == b) return false; // An element cannot be less than itself.\n+\n+    CAmount a_fee = a->m_cluster->m_chunks[a->m_loc.first].fee;\n+    int64_t a_size = a->m_cluster->m_chunks[a->m_loc.first].size;\n+    CAmount b_fee = b->m_cluster->m_chunks[b->m_loc.first].fee;\n+    int64_t b_size = b->m_cluster->m_chunks[b->m_loc.first].size;\n+\n+    int64_t a_score = a_fee * b_size;\n+    int64_t b_score = b_fee * a_size;",
      "path": "src/txmempool.cpp",
      "position": 1260,
      "original_position": 1113,
      "commit_id": "58a60d695eb860180780c41ac57d8f38305841a5",
      "original_commit_id": "7fdcccd1338655328c28ff949d50442ace931a5e",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It would be good to explain the rationale for the miner score somewhere.\r\n\r\nWhy a * b and b * a?\r\n\r\nAnd why is not the fee rate `a_fee / a_size`? (inverse score?)",
      "created_at": "2023-11-20T13:48:38Z",
      "updated_at": "2023-11-20T13:51:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399231122",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399231122"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1146,
      "original_line": 1146,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399244164",
      "pull_request_review_id": 1739885361,
      "id": 1399244164,
      "node_id": "PRRC_kwDOABII585TZsWE",
      "diff_hunk": "@@ -377,6 +427,63 @@ UniValue MempoolToJSON(const CTxMemPool& pool, bool verbose, bool include_mempoo\n     }\n }\n \n+static RPCHelpMan getmempoolfeesize()\n+{\n+    return RPCHelpMan{\"getmempoolfeesize\",\n+        \"Returns fee/size data for the whole mempool.\",\n+        {},\n+        {},\n+        RPCExamples{\n+            HelpExampleCli(\"getmempoolfeesize\", \"\")\n+            + HelpExampleRpc(\"getmempoolfeesize\", \"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+            LOCK(mempool.cs);\n+\n+            UniValue result(UniValue::VARR);\n+\n+            // TODO: refactor so that we're not just copying this from the miner.\n+            std::vector<Cluster::HeapEntry> heap_chunks;\n+            // Initialize the heap with the best entry from each cluster\n+            for (const auto & [id, cluster] : mempool.m_cluster_map) {\n+                if (!cluster->m_chunks.empty()) {\n+                    heap_chunks.emplace_back(cluster->m_chunks.begin(), cluster.get());\n+                }\n+            }\n+            // Define comparison operator on our heap entries (using feerate of chunks).\n+            auto cmp = [](const Cluster::HeapEntry& a, const Cluster::HeapEntry& b) {\n+                return a.first->fee*b.first->size < b.first->fee*a.first->size;\n+            };\n+            std::make_heap(heap_chunks.begin(), heap_chunks.end(), cmp);\n+\n+            CAmount accum_fee{0};\n+            int64_t accum_size{0};\n+            while (!heap_chunks.empty()) {\n+                auto best_chunk = heap_chunks.front();\n+                std::pop_heap(heap_chunks.begin(), heap_chunks.end(), cmp);\n+                heap_chunks.pop_back();\n+\n+                accum_size += best_chunk.first->size;\n+                accum_fee += best_chunk.first->fee;\n+\n+                UniValue o(UniValue::VOBJ);",
      "path": "src/rpc/mempool.cpp",
      "position": 195,
      "original_position": 164,
      "commit_id": "58a60d695eb860180780c41ac57d8f38305841a5",
      "original_commit_id": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1: this should also list the cluster id, and maybe also the chunk number.\r\n\r\nCould also add an argument limit the total number of vbytes.\r\n\r\n`getmempoolfeesize` can be introduced in its own commit",
      "created_at": "2023-11-20T13:58:48Z",
      "updated_at": "2023-11-20T13:59:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399244164",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399244164"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 490,
      "original_line": 490,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399246551",
      "pull_request_review_id": 1739889097,
      "id": 1399246551,
      "node_id": "PRRC_kwDOABII585TZs7X",
      "diff_hunk": "@@ -377,6 +427,63 @@ UniValue MempoolToJSON(const CTxMemPool& pool, bool verbose, bool include_mempoo\n     }\n }\n \n+static RPCHelpMan getmempoolfeesize()\n+{\n+    return RPCHelpMan{\"getmempoolfeesize\",\n+        \"Returns fee/size data for the whole mempool.\",\n+        {},\n+        {},\n+        RPCExamples{\n+            HelpExampleCli(\"getmempoolfeesize\", \"\")\n+            + HelpExampleRpc(\"getmempoolfeesize\", \"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+            LOCK(mempool.cs);\n+\n+            UniValue result(UniValue::VARR);\n+\n+            // TODO: refactor so that we're not just copying this from the miner.\n+            std::vector<Cluster::HeapEntry> heap_chunks;\n+            // Initialize the heap with the best entry from each cluster\n+            for (const auto & [id, cluster] : mempool.m_cluster_map) {\n+                if (!cluster->m_chunks.empty()) {\n+                    heap_chunks.emplace_back(cluster->m_chunks.begin(), cluster.get());\n+                }\n+            }\n+            // Define comparison operator on our heap entries (using feerate of chunks).\n+            auto cmp = [](const Cluster::HeapEntry& a, const Cluster::HeapEntry& b) {\n+                return a.first->fee*b.first->size < b.first->fee*a.first->size;",
      "path": "src/rpc/mempool.cpp",
      "position": 181,
      "original_position": 150,
      "commit_id": "58a60d695eb860180780c41ac57d8f38305841a5",
      "original_commit_id": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1 : Could this use `CompareMiningScore` or does it have a different goal?",
      "created_at": "2023-11-20T14:00:41Z",
      "updated_at": "2023-11-20T14:00:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399246551",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399246551"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 476,
      "original_line": 476,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399253500",
      "pull_request_review_id": 1739900168,
      "id": 1399253500,
      "node_id": "PRRC_kwDOABII585TZun8",
      "diff_hunk": "@@ -53,12 +46,10 @@ other consensus and policy rules, each of the following conditions are met:\n    significant portions of the node's mempool using replacements with multiple directly conflicting\n    transactions, each with large descendant sets.\n \n-6. The replacement transaction's feerate is greater than the feerates of all directly conflicting\n+5. The replacement transaction's mining score is greater than the mining score of all directly conflicting",
      "path": "doc/policy/mempool-replacements.md",
      "position": null,
      "original_position": 39,
      "commit_id": "58a60d695eb860180780c41ac57d8f38305841a5",
      "original_commit_id": "bf467f8286425b692a1736ab6d417d0ba6074658",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "bf467f8286425b692a1736ab6d417d0ba6074658 Maybe make this rule 7. That seems a bit more clear than saying \"previously this rule referred to fee rate\"",
      "created_at": "2023-11-20T14:06:13Z",
      "updated_at": "2023-11-20T14:06:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399253500",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399253500"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 49,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399257380",
      "pull_request_review_id": 1739906712,
      "id": 1399257380,
      "node_id": "PRRC_kwDOABII585TZvkk",
      "diff_hunk": "@@ -18,14 +18,7 @@ other consensus and policy rules, each of the following conditions are met:\n    Use the (`-mempoolfullrbf`) configuration option to allow transaction replacement without enforcement of the\n    opt-in signaling rule.\n \n-2. The replacement transaction only include an unconfirmed input if that input was included in\n-   one of the directly conflicting transactions. An unconfirmed input spends an output from a\n-   currently-unconfirmed transaction.\n-\n-   *Rationale*: When RBF was originally implemented, the mempool did not keep track of\n-   ancestor feerates yet. This rule was suggested as a temporary restriction.\n-\n-3. The replacement transaction pays an absolute fee of at least the sum paid by the original\n+2. The replacement transaction pays an absolute fee of at least the sum paid by the original\n    transactions.\n \n    *Rationale*: Only requiring the replacement transaction to have a higher feerate could allow an",
      "path": "doc/policy/mempool-replacements.md",
      "position": 15,
      "original_position": 15,
      "commit_id": "58a60d695eb860180780c41ac57d8f38305841a5",
      "original_commit_id": "bf467f8286425b692a1736ab6d417d0ba6074658",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "bf467f8286425b692a1736ab6d417d0ba6074658: \"a higher feerate or (using clusters) mining score\"\r\n\r\nIs the \"Additionally\" reasoning still valid?",
      "created_at": "2023-11-20T14:09:35Z",
      "updated_at": "2023-11-20T14:10:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399257380",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399257380"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 24,
      "original_line": 24,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399277318",
      "pull_request_review_id": 1739940128,
      "id": 1399277318,
      "node_id": "PRRC_kwDOABII585TZ0cG",
      "diff_hunk": "@@ -53,12 +46,10 @@ other consensus and policy rules, each of the following conditions are met:\n    significant portions of the node's mempool using replacements with multiple directly conflicting\n    transactions, each with large descendant sets.\n \n-6. The replacement transaction's feerate is greater than the feerates of all directly conflicting\n+5. The replacement transaction's mining score is greater than the mining score of all directly conflicting\n    transactions.\n \n-   *Rationale*: This rule was originally intended to ensure that the replacement transaction is\n-   preferable for block-inclusion, compared to what would be removed from the mempool. This rule\n-   predates ancestor feerate-based transaction selection.\n+   *Rationale*: Ensure that the new transaction is more appealing to mine than those being evicted.\n \n This set of rules is similar but distinct from BIP125.\n ",
      "path": "doc/policy/mempool-replacements.md",
      "position": 60,
      "original_position": 48,
      "commit_id": "58a60d695eb860180780c41ac57d8f38305841a5",
      "original_commit_id": "bf467f8286425b692a1736ab6d417d0ba6074658",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "bf467f8286425b692a1736ab6d417d0ba6074658: history can be expanded:\r\n\r\n```md\r\n  * Cluster mempool introduced, dropping rule 2 and introducing rule 7.\r\n    As of **v27.0** ([PR 28676](https://github.com/bitcoin/bitcoin/pull/28676)).\r\n```",
      "created_at": "2023-11-20T14:24:01Z",
      "updated_at": "2023-11-20T14:24:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399277318",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399277318"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 57,
      "original_line": 57,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399281690",
      "pull_request_review_id": 1739947219,
      "id": 1399281690,
      "node_id": "PRRC_kwDOABII585TZ1ga",
      "diff_hunk": "@@ -139,11 +107,11 @@ std::optional<std::string> PaysMoreThanConflicts(const CTxMemPool::setEntries& i\n         // as that would lower the feerate of the next block. Requiring that the feerate always be\n         // increased is also an easy-to-reason about way to prevent DoS attacks via replacements.\n         //\n-        // We only consider the feerates of transactions being directly replaced, not their indirect\n-        // descendants. While that does mean high feerate children are ignored when deciding whether\n-        // or not to replace, we do require the replacement to pay more overall fees too, mitigating\n-        // most cases.\n-        CFeeRate original_feerate(mi->GetModifiedFee(), mi->GetTxSize());\n+        // We only need to consider the chunk feerates of transactions being\n+        // directly replaced, because descendant transactions which pay for the\n+        // parent will be reflected in the parent's chunk feerate.\n+        Cluster::Chunk &chunk = mi->m_cluster->m_chunks[mi->m_loc.first];\n+        CFeeRate original_feerate(chunk.fee, chunk.size);\n         if (replacement_feerate <= original_feerate) {\n             return strprintf(\"rejecting replacement %s; new feerate %s <= old feerate %s\",",
      "path": "src/policy/rbf.cpp",
      "position": null,
      "original_position": 63,
      "commit_id": "58a60d695eb860180780c41ac57d8f38305841a5",
      "original_commit_id": "bf467f8286425b692a1736ab6d417d0ba6074658",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "bf467f8286425b692a1736ab6d417d0ba6074658: `; new chunk feerate %s <= old chunk feerate`",
      "created_at": "2023-11-20T14:27:08Z",
      "updated_at": "2023-11-20T14:27:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399281690",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399281690"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 116,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399422341",
      "pull_request_review_id": 1740177374,
      "id": 1399422341,
      "node_id": "PRRC_kwDOABII585TaX2F",
      "diff_hunk": "@@ -1245,3 +1648,251 @@ std::vector<CTxMemPool::txiter> CTxMemPool::GatherClusters(const std::vector<uin\n     }\n     return clustered_txs;\n }\n+\n+CTxMemPoolEntry::CTxMemPoolEntryRef Cluster::GetLastTransaction()\n+{\n+    assert(m_tx_count > 0);\n+    for (auto chunkit = m_chunks.rbegin(); chunkit != m_chunks.rend(); ++chunkit) {\n+        if (!chunkit->txs.empty()) return chunkit->txs.back();\n+    }\n+    // Unreachable\n+    assert(false);\n+}\n+\n+void Cluster::AddTransaction(const CTxMemPoolEntry& entry, bool sort)\n+{\n+    m_chunks.emplace_back(entry.GetModifiedFee(), entry.GetTxSize());\n+    m_chunks.back().txs.emplace_back(entry);\n+    entry.m_cluster = this;\n+    ++m_tx_count;\n+    m_tx_size += entry.GetTxSize();\n+    if (sort) Sort();\n+    return;\n+}\n+\n+void Cluster::RemoveTransaction(const CTxMemPoolEntry& entry)\n+{\n+    m_chunks[entry.m_loc.first].txs.erase(entry.m_loc.second);\n+\n+    // Chunk (or cluster) may now be empty, but this will get cleaned up\n+    // when the cluster is re-sorted (or when the cluster is deleted) Note:\n+    // if we cleaned up empty chunks here, then this would break the\n+    // locations of other entries in the cluster. Since we would like to be\n+    // able to do multiple removals in a row and then clean up the sort, we\n+    // can't clean up empty chunks here.\n+    --m_tx_count;\n+    m_tx_size -= entry.GetTxSize();\n+    return;\n+}\n+\n+void Cluster::RechunkFromLinearization(std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef>& txs, bool reassign_locations)\n+{\n+    m_chunks.clear();\n+    m_tx_size = 0;\n+\n+    for (auto txentry : txs) {\n+        m_chunks.emplace_back(txentry.get().GetModifiedFee(), txentry.get().GetTxSize());\n+        m_chunks.back().txs.emplace_back(txentry);\n+        while (m_chunks.size() >= 2) {\n+            auto cur_iter = std::prev(m_chunks.end());\n+            auto prev_iter = std::prev(cur_iter);\n+            double feerate_prev = prev_iter->fee*cur_iter->size;\n+            double feerate_cur = cur_iter->fee*prev_iter->size;\n+            // We only combine chunks if the feerate would go up; if two\n+            // chunks have equal feerate, we prefer to keep the smaller\n+            // chunksize (which is generally better for both mining and\n+            // eviction).\n+            if (feerate_cur > feerate_prev) {\n+                prev_iter->fee += cur_iter->fee;\n+                prev_iter->size += cur_iter->size;\n+                prev_iter->txs.splice(prev_iter->txs.end(), cur_iter->txs, cur_iter->txs.begin(), cur_iter->txs.end());\n+                m_chunks.erase(cur_iter);\n+            } else {\n+                break;\n+            }\n+        }\n+        m_tx_size += txentry.get().GetTxSize();\n+    }\n+\n+    if (reassign_locations) {\n+        // Update locations of all transactions\n+        for (size_t i=0; i<m_chunks.size(); ++i) {\n+            for (auto it = m_chunks[i].txs.begin(); it != m_chunks[i].txs.end(); ++it) {\n+                it->get().m_loc = {i, it};\n+            }\n+        }\n+    }\n+}\n+\n+namespace {\n+\n+template <typename SetType>\n+std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef> InvokeSort(size_t tx_count, const std::vector<Cluster::Chunk>& chunks)\n+{\n+    std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef> txs;",
      "path": "src/txmempool.cpp",
      "position": 1814,
      "original_position": 1667,
      "commit_id": "58a60d695eb860180780c41ac57d8f38305841a5",
      "original_commit_id": "7fdcccd1338655328c28ff949d50442ace931a5e",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Can you clarify what `txs`, `orig_txs` and `cluster` are for, and what the general strategy is here?",
      "created_at": "2023-11-20T16:04:07Z",
      "updated_at": "2023-11-20T16:04:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399422341",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399422341"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1880,
      "original_line": 1880,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399521672",
      "pull_request_review_id": 1740335905,
      "id": 1399521672,
      "node_id": "PRRC_kwDOABII585TawGI",
      "diff_hunk": "@@ -1245,3 +1536,169 @@ std::vector<CTxMemPool::txiter> CTxMemPool::GatherClusters(const std::vector<uin\n     }\n     return clustered_txs;\n }\n+\n+void Cluster::AddTransaction(const CTxMemPoolEntry& entry, bool sort)\n+{\n+    m_chunks.emplace_back(entry.GetModifiedFee(), entry.GetTxSize());\n+    m_chunks.back().txs.emplace_back(entry);\n+    entry.m_cluster = this;\n+    ++m_tx_count;\n+    if (sort) Sort();\n+    return;\n+}\n+\n+void Cluster::RemoveTransaction(const CTxMemPoolEntry& entry)\n+{\n+    m_chunks[entry.m_loc.first].txs.erase(entry.m_loc.second);\n+\n+    // Chunk (or cluster) may now be empty, but this will get cleaned up\n+    // when the cluster is re-sorted (or when the cluster is deleted) Note:\n+    // if we cleaned up empty chunks here, then this would break the\n+    // locations of other entries in the cluster. Since we would like to be\n+    // able to do multiple removals in a row and then clean up the sort, we\n+    // can't clean up empty chunks here.\n+    --m_tx_count;\n+    return;\n+}\n+\n+void Cluster::RechunkFromLinearization(std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef>& txs, bool reassign_locations)\n+{\n+    m_chunks.clear();\n+\n+    for (auto txentry : txs) {\n+        m_chunks.emplace_back(txentry.get().GetModifiedFee(), txentry.get().GetTxSize());\n+        m_chunks.back().txs.emplace_back(txentry);\n+        while (m_chunks.size() >= 2) {\n+            auto cur_iter = std::prev(m_chunks.end());\n+            auto prev_iter = std::prev(cur_iter);\n+            double feerate_prev = prev_iter->fee*cur_iter->size;",
      "path": "src/txmempool.cpp",
      "position": 1781,
      "original_position": 427,
      "commit_id": "58a60d695eb860180780c41ac57d8f38305841a5",
      "original_commit_id": "54f39ca8f101483f5f82707689ca49431d4091e5",
      "in_reply_to_id": 1392646700,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "The math school memories are coming back :-)",
      "created_at": "2023-11-20T17:22:14Z",
      "updated_at": "2023-11-20T17:22:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399521672",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399521672"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1847,
      "original_line": 1574,
      "side": "RIGHT"
    }
  ]
}