{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676",
    "id": 1563273625,
    "node_id": "PR_kwDOABII585dLamZ",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/28676",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/28676.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/28676.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/71e2187eacfbcaa4bc96b6179336d265e1771448",
    "number": 28676,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": false,
    "title": "[WIP] Cluster mempool implementation",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This is a draft implementation of the cluster mempool design described in #27677.  I'm opening this as a draft PR now to share the branch I'm working on with others, so that we can start to think about in-progress projects (like package relay, package validation, and package rbf) in the context of this design.  Also, I can use some help from others for parts of this work, including the interaction between the mempool and the wallet, and also reworking some of our existing test cases to fit a cluster-mempool world.\r\n\r\nNote that the design of this implementation is subject to change as I continue to iterate on the code (to make the code more hygienic and robust, in particular). At this point though I think the performance is pretty reasonable and I'm not currently aware of any bugs.  There are some microbenchmarks added here, and some improved fuzz tests; it would be great if others ran both of those on their own hardware as well and reported back on any findings.\r\n\r\nThis branch implements the following observable behavior changes:\r\n\r\n- Maintains a partitioning of the mempool into connected clusters\r\n- Each cluster is sorted (\"linearized\") either using an optimal sort, or an ancestor-feerate-based one, depending on the size of the cluster (thanks to @sipa for this logic)\r\n- Transaction selection for mining is updated to use the cluster linearizations\r\n- Mempool eviction is updated to use the cluster linearizations\r\n- The RBF rules are updated to drop the requirement that no new inputs are introduced, and to change the feerate requirement to instead check that the mining score of a replacement transaction exceed the mining score of the conflicted transactions\r\n- The CPFP carveout rule is eliminated (it doesn't make sense in a cluster-limited mempool)\r\n- The ancestor and descendant limits are no longer enforced.\r\n- New cluster count/cluster vsize limits are now enforced instead.\r\n\r\nSome less observable behavior changes:\r\n- The cached ancestor and descendant data are dropped from the mempool, along with the multi_index indices that were maintained to sort the mempool by ancestor and descendant feerates. For compatibility (eg with wallet behavior or RPCs exposing this), this information is now calculated dynamically instead.\r\n- The ancestor and descendant walking algorithms are now implemented using `epoch`s (resulting in a significant performance improvement, according to the benchmarks I've looked at)\r\n\r\nStill to do:\r\n\r\n- [ ] More comparisons between this branch and master on historical data to compare validation speed (accepting loose transactions, processing RBF transactions, validating a block/postprocessing, updating the mempool for a reorg).\r\n- [x] More historical data analysis to try to evaluate the likely impact of setting the cluster size limits to varying values (to motivate what values we should ultimately pick). [DONE, see [this post](https://delvingbitcoin.org/t/research-into-the-effects-of-a-cluster-size-limited-mempool-in-2023/794/1)]\r\n- [ ] Updating wallet code to be cluster-aware (including mini_miner and coin selection)\r\n- [ ] Rework many of our functional tests to be cluster-aware\r\n- [ ] Figure out what package validation and package RBF rules should be in this design\r\n- [ ] Rework the `partially_downloaded_block` fuzz target to not add duplicate transactions to the mempool (#29990).\r\n- [ ] Update RBF logic to ensure that replacements always strictly improve the mempool.\r\n- [ ] Figure out how we want to document our RBF policy (preserve historical references to BIP 125 or previous Bitcoin Core behaviors vs clean slate documentation?)\r\n\r\nFor discussion/feedback:\r\n\r\n - How significant is it to be dropping the CPFP carveout rule?  Does that affect how we will ultimately want to stage new mempool deployment?\r\n - How well do the proposed RBF rules meet everyone's use cases?\r\n - What design improvements can we make to the cluster tracking implementation?\r\n - The ZMQ callbacks that occur when a block is found will happen in a slightly different order, because we now will fully remove all transactions occurring in a block from the mempool before removing any conflicts. Is this a problem?",
    "labels": [
      {
        "id": 164208572,
        "node_id": "MDU6TGFiZWwxNjQyMDg1NzI=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mempool",
        "name": "Mempool",
        "color": "fef2c0",
        "default": false
      },
      {
        "id": 5334691551,
        "node_id": "LA_kwDOABII588AAAABPfju3w",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
        "name": "CI failed",
        "description": "",
        "color": "cccccc",
        "default": false
      }
    ],
    "created_at": "2023-10-18T18:59:37Z",
    "updated_at": "2024-06-18T20:18:42Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "5621bc59ad3fa1b8f3ea99830982e13491ae3a94",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "sdaftuar:2023-10-cluster-mempool",
      "ref": "2023-10-cluster-mempool",
      "sha": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 28761781,
        "node_id": "MDEwOlJlcG9zaXRvcnkyODc2MTc4MQ==",
        "name": "bitcoin",
        "full_name": "sdaftuar/bitcoin",
        "owner": {
          "login": "sdaftuar",
          "id": 7463573,
          "node_id": "MDQ6VXNlcjc0NjM1NzM=",
          "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/sdaftuar",
          "html_url": "https://github.com/sdaftuar",
          "followers_url": "https://api.github.com/users/sdaftuar/followers",
          "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
          "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
          "repos_url": "https://api.github.com/users/sdaftuar/repos",
          "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/sdaftuar/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/sdaftuar/bitcoin",
        "archive_url": "https://api.github.com/repos/sdaftuar/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/sdaftuar/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/sdaftuar/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/sdaftuar/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/sdaftuar/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/sdaftuar/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/sdaftuar/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/sdaftuar/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/sdaftuar/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/sdaftuar/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/sdaftuar/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/sdaftuar/bitcoin/events",
        "forks_url": "https://api.github.com/repos/sdaftuar/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/sdaftuar/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/sdaftuar/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/sdaftuar/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/sdaftuar/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/sdaftuar/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/sdaftuar/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/sdaftuar/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/sdaftuar/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/sdaftuar/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/sdaftuar/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/sdaftuar/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/sdaftuar/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/sdaftuar/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/sdaftuar/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/sdaftuar/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:sdaftuar/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/sdaftuar/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/sdaftuar/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/sdaftuar/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/sdaftuar/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/sdaftuar/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/sdaftuar/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/sdaftuar/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/sdaftuar/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/sdaftuar/bitcoin/hooks",
        "svn_url": "https://github.com/sdaftuar/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 2,
        "stargazers_count": 4,
        "watchers_count": 4,
        "size": 272010,
        "default_branch": "master",
        "open_issues_count": 1,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-06-18T15:32:42Z",
        "created_at": "2015-01-04T02:52:13Z",
        "updated_at": "2024-02-09T22:47:48Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "9c5cdf07f30f816cd134e2cd2dca9c27ef7067a5",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35528,
        "stargazers_count": 76940,
        "watchers_count": 76940,
        "size": 261800,
        "default_branch": "master",
        "open_issues_count": 684,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-06-18T20:56:58Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2024-06-18T19:31:57Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
      }
    },
    "author_association": "MEMBER",
    "draft": true,
    "additions": 5891,
    "deletions": 2798,
    "changed_files": 58,
    "commits": 80,
    "review_comments": 51,
    "comments": 13
  },
  "events": [
    {
      "event": "mentioned",
      "id": 10697854902,
      "node_id": "MEE_lADOABII5850QVJBzwAAAAJ9pE-2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10697854902",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-18T18:59:38Z"
    },
    {
      "event": "subscribed",
      "id": 10697854917,
      "node_id": "SE_lADOABII5850QVJBzwAAAAJ9pE_F",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10697854917",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-18T18:59:38Z"
    },
    {
      "event": "commented",
      "id": 1769143762,
      "node_id": "IC_kwDOABII585pcv3S",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1769143762",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-18T18:59:40Z",
      "updated_at": "2024-06-17T21:00:52Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/28676).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#30277](https://github.com/bitcoin/bitcoin/pull/30277) ([DO NOT MERGE] Erlay: bandwidth-efficient transaction relay protocol (Full implementation) by sr-gi)\n* [#30272](https://github.com/bitcoin/bitcoin/pull/30272) (doc: use TRUC instead of v3 and add release note by glozow)\n* [#30239](https://github.com/bitcoin/bitcoin/pull/30239) (Ephemeral Anchors, take 2 by instagibbs)\n* [#30194](https://github.com/bitcoin/bitcoin/pull/30194) (refactor: use recommended type hiding on multi_index types by theuni)\n* [#30141](https://github.com/bitcoin/bitcoin/pull/30141) (kernel: De-globalize validation caches by TheCharlatan)\n* [#30110](https://github.com/bitcoin/bitcoin/pull/30110) (refactor: TxDownloadManager by glozow)\n* [#29965](https://github.com/bitcoin/bitcoin/pull/29965) (Lint: improve subtree exclusion by davidgumberg)\n* [#29954](https://github.com/bitcoin/bitcoin/pull/29954) (RPC: Return `permitbaremultisig` and `maxdatacarriersize` in `getmempoolinfo` by kristapsk)\n* [#29680](https://github.com/bitcoin/bitcoin/pull/29680) (wallet: fix unrelated parent conflict doesn't cause child tx to be marked as conflict by Eunovo)\n* [#29641](https://github.com/bitcoin/bitcoin/pull/29641) (scripted-diff: Use LogInfo/LogDebug over LogPrintf/LogPrint by maflcko)\n* [#28984](https://github.com/bitcoin/bitcoin/pull/28984) (Cluster size 2 package rbf by instagibbs)\n* [#28843](https://github.com/bitcoin/bitcoin/pull/28843) ([refactor] Remove BlockAssembler m_mempool member by TheCharlatan)\n* [#28687](https://github.com/bitcoin/bitcoin/pull/28687) (C++20 std::views::reverse by stickies-v)\n* [#28132](https://github.com/bitcoin/bitcoin/pull/28132) (policy: Enable full-rbf by default by petertodd)\n* [#28121](https://github.com/bitcoin/bitcoin/pull/28121) (include verbose \"debug-message\" field in testmempoolaccept response by pinheadmz)\n* [#26593](https://github.com/bitcoin/bitcoin/pull/26593) (tracing: Only prepare tracepoint arguments when actually tracing by 0xB10C)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-1769143762",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "labeled",
      "id": 10697976819,
      "node_id": "LE_lADOABII5850QVJBzwAAAAJ9pivz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10697976819",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-18T19:11:53Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10697997651,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAJ9pn1T",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10697997651",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-18T19:14:03Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10715626094,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAJ-s3pu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10715626094",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-19T18:28:20Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10717967266,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAJ-1zOi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10717967266",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-19T23:46:18Z"
    },
    {
      "event": "labeled",
      "id": 10722430474,
      "node_id": "LE_lADOABII5850QVJBzwAAAAJ_G04K",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10722430474",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-20T09:57:25Z",
      "label": {
        "name": "Mempool",
        "color": "fef2c0"
      }
    },
    {
      "event": "reviewed",
      "id": 1685916441,
      "node_id": "PRR_kwDOABII585kfQsZ",
      "url": null,
      "actor": null,
      "commit_id": "7619c275dae3b2b0df8cd8071bc2250556350c49",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1685916441",
      "submitted_at": "2023-10-24T18:23:18Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "labeled",
      "id": 10809901870,
      "node_id": "LE_lADOABII5850QVJBzwAAAAKEUgMu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10809901870",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-30T15:55:47Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 1809939629,
      "node_id": "IC_kwDOABII585r4Xyt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1809939629",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-14T10:29:27Z",
      "updated_at": "2023-11-14T14:23:52Z",
      "author_association": "MEMBER",
      "body": "It would be useful to add a `mempool_backwards_compatibility.py` test to illustrate how the new rules interact with older nodes. It could have two modern nodes and one v25 (or v26) node. Some of the tests you deleted in this branch could be moved there. E.g. the test could demonstrate how RBF rule 2 is not enforced when relaying to the new node, but it is when relaying to the v25 node.\r\n\r\nBenchmarks on a 2019 MacBook Pro (2,3 GHz 8-Core Intel Core i9), plugged in:\r\n\r\n```\r\n% src/bench/bench_bitcoin -filter=.*Mem.* -min-time=10000\r\n\r\n|      330,557,188.67 |                3.03 |    1.5% |     10.77 | `ComplexMemPool`\r\n|      451,529,273.50 |                2.21 |    2.8% |     10.01 | `MemPoolAddTransactions`\r\n|            2,847.13 |          351,231.06 |    2.7% |     10.93 | `MemPoolAncestorsDescendants`\r\n|           11,047.90 |           90,514.97 |    2.5% |     10.69 | `MemPoolMiningScoreCheck`\r\n|        4,328,796.04 |              231.01 |    1.1% |     10.99 | `MempoolCheck`\r\n|           36,268.80 |           27,571.91 |    2.9% |     11.17 | `MempoolEviction`\r\n|        9,123,684.25 |              109.60 |    1.4% |     10.74 | `RpcMempool`\r\n```\r\n\r\nUpdate: added bench for master@c2d4e40e454ba0c7c836a849b6d15db4850079f2:\r\n\r\n```\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|      302,677,055.25 |                3.30 |    3.5% |     10.76 | `ComplexMemPool`\r\n|      100,167,478.00 |                9.98 |    2.5% |     11.08 | `MempoolCheck`\r\n|           43,759.84 |           22,852.00 |    4.1% |     11.42 | `MempoolEviction`\r\n|       10,235,913.25 |               97.70 |    3.5% |     10.66 | `RpcMempool`\r\n```",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-1809939629",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "reviewed",
      "id": 1729366575,
      "node_id": "PRR_kwDOABII585nFAov",
      "url": null,
      "actor": null,
      "commit_id": "7fdcccd1338655328c28ff949d50442ace931a5e",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1729366575",
      "submitted_at": "2023-11-14T10:29:46Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 1729419761,
      "node_id": "PRR_kwDOABII585nFNnx",
      "url": null,
      "actor": null,
      "commit_id": "7fdcccd1338655328c28ff949d50442ace931a5e",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1729419761",
      "submitted_at": "2023-11-14T12:23:47Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 1729707068,
      "node_id": "PRR_kwDOABII585nGTw8",
      "url": null,
      "actor": null,
      "commit_id": "7fdcccd1338655328c28ff949d50442ace931a5e",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Couple more comments / questions. To be continued...",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1729707068",
      "submitted_at": "2023-11-14T14:27:23Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 1739566572,
      "node_id": "PRR_kwDOABII585nr63s",
      "url": null,
      "actor": null,
      "commit_id": "7fdcccd1338655328c28ff949d50442ace931a5e",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1739566572",
      "submitted_at": "2023-11-20T11:54:22Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 1739706549,
      "node_id": "PRR_kwDOABII585nsdC1",
      "url": null,
      "actor": null,
      "commit_id": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1739706549",
      "submitted_at": "2023-11-20T12:32:16Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 1739853534,
      "node_id": "PRR_kwDOABII585ntA7e",
      "url": null,
      "actor": null,
      "commit_id": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1739853534",
      "submitted_at": "2023-11-20T13:42:19Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 1739865937,
      "node_id": "PRR_kwDOABII585ntD9R",
      "url": null,
      "actor": null,
      "commit_id": "7fdcccd1338655328c28ff949d50442ace931a5e",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1739865937",
      "submitted_at": "2023-11-20T13:48:39Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "commented",
      "id": 1819105431,
      "node_id": "IC_kwDOABII585sbViX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1819105431",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-20T13:53:12Z",
      "updated_at": "2023-11-20T13:53:12Z",
      "author_association": "MEMBER",
      "body": "@Sjors I believe most if not all of this PR will be rewritten, and split up into several components. The goal here is just to give an idea of the high-level interactions with other changes (wallet behavior, package validation/relay/RBF, ...). I don't think a detailed line-by-line code review at this stage is a good use of your time.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-1819105431",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "mentioned",
      "id": 11012203305,
      "node_id": "MEE_lADOABII5850QVJBzwAAAAKQYOMp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11012203305",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-20T13:53:13Z"
    },
    {
      "event": "subscribed",
      "id": 11012203324,
      "node_id": "SE_lADOABII5850QVJBzwAAAAKQYOM8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11012203324",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-20T13:53:13Z"
    },
    {
      "event": "reviewed",
      "id": 1739885361,
      "node_id": "PRR_kwDOABII585ntIsx",
      "url": null,
      "actor": null,
      "commit_id": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1739885361",
      "submitted_at": "2023-11-20T13:58:48Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 1739889097,
      "node_id": "PRR_kwDOABII585ntJnJ",
      "url": null,
      "actor": null,
      "commit_id": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1739889097",
      "submitted_at": "2023-11-20T14:00:41Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 1739900168,
      "node_id": "PRR_kwDOABII585ntMUI",
      "url": null,
      "actor": null,
      "commit_id": "bf467f8286425b692a1736ab6d417d0ba6074658",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1739900168",
      "submitted_at": "2023-11-20T14:06:13Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 1739906712,
      "node_id": "PRR_kwDOABII585ntN6Y",
      "url": null,
      "actor": null,
      "commit_id": "bf467f8286425b692a1736ab6d417d0ba6074658",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1739906712",
      "submitted_at": "2023-11-20T14:09:35Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 1739940128,
      "node_id": "PRR_kwDOABII585ntWEg",
      "url": null,
      "actor": null,
      "commit_id": "bf467f8286425b692a1736ab6d417d0ba6074658",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1739940128",
      "submitted_at": "2023-11-20T14:24:02Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 1739947219,
      "node_id": "PRR_kwDOABII585ntXzT",
      "url": null,
      "actor": null,
      "commit_id": "bf467f8286425b692a1736ab6d417d0ba6074658",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1739947219",
      "submitted_at": "2023-11-20T14:27:08Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "commented",
      "id": 1819230080,
      "node_id": "IC_kwDOABII585sbz-A",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1819230080",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-20T15:00:32Z",
      "updated_at": "2023-11-20T15:44:36Z",
      "author_association": "MEMBER",
      "body": "I was wondering if we can drop RBF rule 5 (in a followup), but I'm guessing not really. My initial thinking was the cluster limit could be used instead. But `CalculateMiningScoreOfReplacementTx` only checks that the _new_ cluster doesn't get too big.\r\n\r\nBut does the new cluster system make it less of a burden to have large numbers of transactions appear and disappear from the mempool?\r\n\r\n\r\n\r\nI'm also trying to understand if dropping the [CPFP carveout](https://bitcoinops.org/en/topics/cpfp-carve-out/) is fine. The original scenario described on the [mailistlist](https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2018-November/016518.html):\r\n\r\n\r\n```\r\nTX_important\r\n  * output Alice <- child_a_1 <- child_a_2 <-  -< child_a_25\r\n                   (^ intentionally low fees so it doesn't confirm before timeout)\r\n  * output Bob: child_b_1\r\n                ^ high fee\r\n```\r\n  \r\nThe carveout rule allows Bob's `child_b_1`, despite Alice having used up the 25 ancestor limit for TX_important. And alice can't use the carveout to just add child_a_26, because child_26 has more than one unconfirmed ancestor.\r\n\r\nSo what happens in the cluster world?\r\n\r\nFor simplicity, let's set `-limitclustercount` to 26 (the default is 100 in this PR). Without the CPFP carveout, can Bob still insert `child_b_1`?\r\n\r\nMy understanding is that he can't, because `ClusterSizeChecks` will fail.\r\n\r\nInstead of failing, can we check if it's possible to evict the lowest value chunk? Though it introduces an implicit RBF-like mechanism If it were possible, then `child_a_25` would be evicted from the cluster as long as it has a longer fee rate than `child_b_1`.\r\n\r\nAlice might make sure that the fee rates of `child_a_1`  `child_a_25` increase such that there's only one chunk. That just requires Bob to use a higher fee rate.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-1819230080",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "reviewed",
      "id": 1740177374,
      "node_id": "PRR_kwDOABII585nuP_e",
      "url": null,
      "actor": null,
      "commit_id": "7fdcccd1338655328c28ff949d50442ace931a5e",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1740177374",
      "submitted_at": "2023-11-20T16:04:07Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "commented",
      "id": 1819490214,
      "node_id": "IC_kwDOABII585sczem",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1819490214",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-20T17:16:02Z",
      "updated_at": "2023-11-20T17:20:44Z",
      "author_association": "MEMBER",
      "body": "> I don't think a detailed line-by-line code review at this stage is a good use of your time.\r\n\r\nThat's not what I'm trying to do. I strategically / haphazardly picked a dozen lines to ask questions about to get a better understanding of the whole thing. Based on IRC chat today, I'll wait now for the upcoming update.\r\n\r\nRelevant IRC log: https://bitcoin-irc.chaincode.com/bitcoin-core-dev/2023-11-20#984780;",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-1819490214",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11173066958,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAKZ93jO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11173066958",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-06T20:01:38Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11184375069,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAKapAUd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11184375069",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-07T16:49:26Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11184482832,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAKapaoQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11184482832",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-07T16:59:36Z"
    },
    {
      "event": "unlabeled",
      "id": 11184594196,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAAKap10U",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11184594196",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-07T17:10:39Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11198263397,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAKbd_Bl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11198263397",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-08T22:44:25Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11201892660,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAKbr1E0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11201892660",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-10T01:26:57Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11202916862,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAKbvvH-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11202916862",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-10T13:45:56Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11202988562,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAKbwAoS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11202988562",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-10T14:25:00Z"
    },
    {
      "event": "unlabeled",
      "id": 11203076413,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAAKbwWE9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11203076413",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-10T15:12:46Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 11279737369,
      "node_id": "LE_lADOABII5850QVJBzwAAAAKgUyIZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11279737369",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-18T17:38:37Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "referenced",
      "id": 11763923253,
      "node_id": "REFE_lADOABII5850QVJBzwAAAAK9Lzk1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11763923253",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "7143d4388407ab3d12005e55a02d5e8f334e4dc9",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7143d4388407ab3d12005e55a02d5e8f334e4dc9",
      "created_at": "2024-02-10T04:38:11Z"
    },
    {
      "event": "commented",
      "id": 1951640940,
      "node_id": "IC_kwDOABII5850U61s",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1951640940",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-19T03:45:20Z",
      "updated_at": "2024-02-19T03:45:20Z",
      "author_association": "MEMBER",
      "body": "do you have a simulation environment or script like youve done for #25717 to observe the computational complexity diff compared to todays mempool against different chain of transaction performance payload ?\r\ninteresting what is the lowest performance linux host assumed for decentralization of the tx-relay network.\r\nassume always 24/7 internet and on a vpcu instance, not baremetal.",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-1951640940",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "commented",
      "id": 1952644105,
      "node_id": "IC_kwDOABII5850YvwJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1952644105",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-19T15:05:34Z",
      "updated_at": "2024-02-19T15:08:27Z",
      "author_association": "MEMBER",
      "body": "In the context of Stratum v2 #29432 I'm looking for a more efficient way to decide when to generate a new block template.\r\n\r\nThe current implementation looks at the mempool's `GetTransactionsUpdated()` every `-sv2interval` seconds. If there was any update, it calls `CreateNewBlock()` on `BlockAssembler`. It then checks if fees increased by at least `-sv2feedelta` since the last template and if so, pushes it to connected clients.\r\n\r\n`GetTransactionsUpdated()` changes all the time, especially with a big mempool, so not that useful of a filter. I'd like something like `GetFeeEstimateAtTop(size vbytes=4000000)`. Would it be easy to keep track of that (approximate) number every time something is added or removed from the mempool?\r\n\r\nIdeally I'd like to change the meaning of `-sv2interval` from \"check every n seconds and push update if needed\" to \"push better templates immediately, but wait least n seconds between them\".",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-1952644105",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "commented",
      "id": 1952653016,
      "node_id": "IC_kwDOABII5850Yx7Y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1952653016",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-19T15:10:36Z",
      "updated_at": "2024-02-19T15:10:36Z",
      "author_association": "MEMBER",
      "body": "> Would it be easy to keep track of that (approximate) number every time something is added or removed from the mempool?\r\n\r\nAfter clustermempool, yes. Today doing that inherently requires running the mining algorithm to figure out what transactions to put there.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-1952653016",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "commented",
      "id": 1952657689,
      "node_id": "IC_kwDOABII5850YzEZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1952657689",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-19T15:12:31Z",
      "updated_at": "2024-02-19T15:12:31Z",
      "author_association": "MEMBER",
      "body": "Indeed, I meant on top of this PR (or a later incarnation).",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-1952657689",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "commented",
      "id": 1959971463,
      "node_id": "IC_kwDOABII58500sqH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1959971463",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-22T17:56:07Z",
      "updated_at": "2024-02-22T17:56:07Z",
      "author_association": "MEMBER",
      "body": "> interesting what is the lowest performance linux host assumed for decentralization of the tx-relay network.\r\nassume always 24/7 internet and on a vpcu instance, not baremetal.\r\n\r\nRunning this branch mainet on a 2 vcpu instance, with the following performance characteristics:\r\n```\r\nprocessor       : 0\r\nvendor_id       : AuthenticAMD\r\ncpu family      : 25\r\nmodel           : 1\r\nmodel name      : AMD EPYC 7543 32-Core Processor\r\nstepping        : 1\r\nmicrocode       : 0xa0011d1\r\ncpu MHz         : 2794.750\r\ncache size      : 512 KB\r\n```\r\n\r\nIt would be very interesting to feed cluster-support testing node with all kinds of chain of transactions, and check substantial performance diff compared to non-cluster-support testing node. Check there is no substantial performance regression.",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-1959971463",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12042124799,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAALNxD3_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12042124799",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-07T13:14:28Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12042232351,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAALNxeIf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12042232351",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-07T13:23:01Z"
    },
    {
      "event": "unlabeled",
      "id": 12043647342,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAALN23lu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12043647342",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-07T15:02:18Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 1923884910,
      "node_id": "PRR_kwDOABII585yrCdu",
      "url": null,
      "actor": null,
      "commit_id": "5ce8eff8e7c0d2f187ab39440b945d4a9d2f8259",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Ill spend time reviewing current `CTxMemPool`s code path w.r.t DoS resistance before to pursue review further. This is very unsure the introduction of `TxGraph` improves on this front as the design is focus on mining incentive-compatibility improvement first.",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1923884910",
      "submitted_at": "2024-03-08T03:55:45Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "commented",
      "id": 1985000747,
      "node_id": "IC_kwDOABII5852ULUr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1985000747",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-08T04:01:40Z",
      "updated_at": "2024-03-08T04:01:40Z",
      "author_association": "MEMBER",
      "body": "> Running this branch mainet on a 2 vcpu instance, with the following performance characteristics:\r\n\r\nGot a disk space issue at block `501691` by syncing from genesis.\r\n\r\n```\r\n2024-02-23T10:53:41Z UpdateTip: new best=000000000000000000753b6b9821750d271e1730d7403a0658c507c88092bdf0 height=501691 version=0x20000000 log2_work=87.760876 tx=287312998 date='2017-12-30T07:48:59Z' progress=0.295839 cache=16.3MiB(151170txo)\r\n2024-02-23T10:53:41Z New outbound-full-relay v1 peer connected: version: 70016, blocks=831673, peer=196\r\n2024-02-23T10:53:47Z *** Disk space is too low!\r\n2024-02-23T10:53:47Z Error: Disk space is too low!\r\n```\r\n\r\nWas configured as a prune node with default pruning settings.\r\n```\r\n2024-02-22T17:49:33Z Prune configured to target 550 MiB on disk for block and undo files.\r\n```\r\n\r\nWith following `/proc/meminfo` dump\r\n\r\n```\r\nMemTotal:        4020688 kB\r\nMemFree:          359104 kB\r\nMemAvailable:    3650432 kB\r\nBuffers:           44424 kB\r\nCached:          3385624 kB\r\nSwapCached:            0 kB\r\nActive:          1312988 kB\r\nInactive:        2156904 kB\r\nActive(anon):        352 kB\r\nInactive(anon):    40004 kB\r\nActive(file):    1312636 kB\r\nInactive(file):  2116900 kB\r\n```",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-1985000747",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "labeled",
      "id": 12062076131,
      "node_id": "LE_lADOABII5850QVJBzwAAAALO9Kzj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12062076131",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-09T02:13:50Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 12346991211,
      "node_id": "LE_lADOABII5850QVJBzwAAAALf8CJr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12346991211",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-03T19:04:33Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2035375002,
      "node_id": "IC_kwDOABII5855UVua",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2035375002",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-03T19:04:34Z",
      "updated_at": "2024-04-03T19:04:34Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n\n At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/22392307037</sub>",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-2035375002",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12599446272,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAALu_EsA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12599446272",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-25T00:08:47Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12617684642,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAALwEpai",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12617684642",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-26T02:01:19Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12617696524,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAALwEsUM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12617696524",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-26T02:03:18Z"
    },
    {
      "event": "unlabeled",
      "id": 12618205113,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAALwGoe5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12618205113",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-26T03:36:51Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12621170971,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAALwR8kb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12621170971",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-26T09:32:17Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12623436677,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAALwaluF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12623436677",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-26T12:48:31Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12623460443,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAALwarhb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12623460443",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-26T12:50:33Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12623524380,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAALwa7Ic",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12623524380",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-26T12:56:17Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12623748677,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAALwbx5F",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12623748677",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-26T13:15:21Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12629428275,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAALwxcgz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12629428275",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-27T00:34:35Z"
    },
    {
      "event": "reviewed",
      "id": 2026649349,
      "node_id": "PRR_kwDOABII5854zDcF",
      "url": null,
      "actor": null,
      "commit_id": "8ef26be6510f6aeadb98a08f353882cc19734c3d",
      "commit_url": null,
      "created_at": null,
      "author_association": "NONE",
      "body": "",
      "user": {
        "login": "Dianagram009",
        "id": 129525650,
        "node_id": "U_kgDOB7hnkg",
        "avatar_url": "https://avatars.githubusercontent.com/u/129525650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Dianagram009",
        "html_url": "https://github.com/Dianagram009",
        "followers_url": "https://api.github.com/users/Dianagram009/followers",
        "following_url": "https://api.github.com/users/Dianagram009/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Dianagram009/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Dianagram009/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Dianagram009/subscriptions",
        "organizations_url": "https://api.github.com/users/Dianagram009/orgs",
        "repos_url": "https://api.github.com/users/Dianagram009/repos",
        "events_url": "https://api.github.com/users/Dianagram009/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Dianagram009/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-2026649349",
      "submitted_at": "2024-04-27T13:23:12Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12634548648,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAALxE-mo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12634548648",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-28T11:39:43Z"
    },
    {
      "event": "unlabeled",
      "id": 12635814791,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAALxJzuH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12635814791",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-28T20:36:27Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 12655514371,
      "node_id": "LE_lADOABII5850QVJBzwAAAALyU9MD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12655514371",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-30T10:04:42Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 2043188274,
      "node_id": "PRR_kwDOABII5855yJQy",
      "url": null,
      "actor": null,
      "commit_id": "c49e0444e5c474d5e1ac0af89e9bc27958f3ed31",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "Christewart",
        "id": 3514957,
        "node_id": "MDQ6VXNlcjM1MTQ5NTc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3514957?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Christewart",
        "html_url": "https://github.com/Christewart",
        "followers_url": "https://api.github.com/users/Christewart/followers",
        "following_url": "https://api.github.com/users/Christewart/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Christewart/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Christewart/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Christewart/subscriptions",
        "organizations_url": "https://api.github.com/users/Christewart/orgs",
        "repos_url": "https://api.github.com/users/Christewart/repos",
        "events_url": "https://api.github.com/users/Christewart/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Christewart/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-2043188274",
      "submitted_at": "2024-05-07T13:25:53Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 2043431230,
      "node_id": "PRR_kwDOABII5855zEk-",
      "url": null,
      "actor": null,
      "commit_id": "c49e0444e5c474d5e1ac0af89e9bc27958f3ed31",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "Christewart",
        "id": 3514957,
        "node_id": "MDQ6VXNlcjM1MTQ5NTc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3514957?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Christewart",
        "html_url": "https://github.com/Christewart",
        "followers_url": "https://api.github.com/users/Christewart/followers",
        "following_url": "https://api.github.com/users/Christewart/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Christewart/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Christewart/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Christewart/subscriptions",
        "organizations_url": "https://api.github.com/users/Christewart/orgs",
        "repos_url": "https://api.github.com/users/Christewart/repos",
        "events_url": "https://api.github.com/users/Christewart/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Christewart/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-2043431230",
      "submitted_at": "2024-05-07T14:50:23Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12748778825,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAL34u1J",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12748778825",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-08T20:07:22Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13054519874,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAMKHCpC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13054519874",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-05T16:50:01Z"
    },
    {
      "event": "unlabeled",
      "id": 13054704734,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAAMKHvxe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13054704734",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-05T17:04:30Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13055037988,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAMKJBIk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13055037988",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-05T17:31:30Z"
    },
    {
      "event": "labeled",
      "id": 13055038872,
      "node_id": "LE_lADOABII5850QVJBzwAAAAMKJBWY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13055038872",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-05T17:31:35Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13055160610,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAMKJfEi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13055160610",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-05T17:42:16Z"
    },
    {
      "event": "unlabeled",
      "id": 13056431160,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAAMKOVQ4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13056431160",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-05T19:23:59Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13056495477,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAMKOk91",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13056495477",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-05T19:29:29Z"
    },
    {
      "event": "labeled",
      "id": 13084591219,
      "node_id": "LE_lADOABII5850QVJBzwAAAAML5wRz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13084591219",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T19:06:30Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13102514952,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAMM-IMI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13102514952",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-10T14:27:07Z"
    },
    {
      "event": "unsubscribed",
      "id": 13102541378,
      "node_id": "UE_lADOABII5850QVJBzwAAAAMM-OpC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13102541378",
      "actor": {
        "login": "benthecarman",
        "id": 15256660,
        "node_id": "MDQ6VXNlcjE1MjU2NjYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/15256660?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/benthecarman",
        "html_url": "https://github.com/benthecarman",
        "followers_url": "https://api.github.com/users/benthecarman/followers",
        "following_url": "https://api.github.com/users/benthecarman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/benthecarman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/benthecarman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/benthecarman/subscriptions",
        "organizations_url": "https://api.github.com/users/benthecarman/orgs",
        "repos_url": "https://api.github.com/users/benthecarman/repos",
        "events_url": "https://api.github.com/users/benthecarman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/benthecarman/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-10T14:28:48Z"
    },
    {
      "event": "subscribed",
      "id": 13102541969,
      "node_id": "SE_lADOABII5850QVJBzwAAAAMM-OyR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13102541969",
      "actor": {
        "login": "benthecarman",
        "id": 15256660,
        "node_id": "MDQ6VXNlcjE1MjU2NjYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/15256660?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/benthecarman",
        "html_url": "https://github.com/benthecarman",
        "followers_url": "https://api.github.com/users/benthecarman/followers",
        "following_url": "https://api.github.com/users/benthecarman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/benthecarman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/benthecarman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/benthecarman/subscriptions",
        "organizations_url": "https://api.github.com/users/benthecarman/orgs",
        "repos_url": "https://api.github.com/users/benthecarman/repos",
        "events_url": "https://api.github.com/users/benthecarman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/benthecarman/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-10T14:28:51Z"
    },
    {
      "event": "unsubscribed",
      "id": 13102542691,
      "node_id": "UE_lADOABII5850QVJBzwAAAAMM-O9j",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13102542691",
      "actor": {
        "login": "benthecarman",
        "id": 15256660,
        "node_id": "MDQ6VXNlcjE1MjU2NjYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/15256660?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/benthecarman",
        "html_url": "https://github.com/benthecarman",
        "followers_url": "https://api.github.com/users/benthecarman/followers",
        "following_url": "https://api.github.com/users/benthecarman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/benthecarman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/benthecarman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/benthecarman/subscriptions",
        "organizations_url": "https://api.github.com/users/benthecarman/orgs",
        "repos_url": "https://api.github.com/users/benthecarman/repos",
        "events_url": "https://api.github.com/users/benthecarman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/benthecarman/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-10T14:28:54Z"
    },
    {
      "event": "unlabeled",
      "id": 13103556163,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAAMNCGZD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13103556163",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-10T15:37:22Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 13108144980,
      "node_id": "LE_lADOABII5850QVJBzwAAAAMNTmtU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13108144980",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-10T22:21:45Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 13122801566,
      "node_id": "LE_lADOABII5850QVJBzwAAAAMOLg-e",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13122801566",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-11T21:07:00Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13135972112,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAMO9wcQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13135972112",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-12T18:38:59Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13136108907,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAMO-R1r",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13136108907",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-12T18:52:54Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13164380820,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAMQqIKU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13164380820",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-14T18:30:39Z"
    },
    {
      "event": "unlabeled",
      "id": 13164402359,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAAMQqNa3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13164402359",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-14T18:33:16Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 13165258441,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAAMQtebJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13165258441",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-14T20:18:35Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 13192814508,
      "node_id": "LE_lADOABII5850QVJBzwAAAAMSWl-s",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13192814508",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-17T23:30:50Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDU5ZDU3YWJiZjFlNWVjZGViNDc4ZDc2MjYwYzk2NWE4ZTU4YzEwYTY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/59d57abbf1e5ecdeb478d76260c965a8e58c10a6",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/59d57abbf1e5ecdeb478d76260c965a8e58c10a6",
      "tree": {
        "sha": "f55d8315fcb2293f1b023bc724bb375e6522ef4f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f55d8315fcb2293f1b023bc724bb375e6522ef4f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9c5cdf07f30f816cd134e2cd2dca9c27ef7067a5",
          "sha": "9c5cdf07f30f816cd134e2cd2dca9c27ef7067a5",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/9c5cdf07f30f816cd134e2cd2dca9c27ef7067a5"
        }
      ],
      "message": "clusterlin: introduce cluster_linearize.h with Cluster and DepGraph types\n\nThis primarily adds the DepGraph class, which encapsulated precomputed\nancestor/descendant information for a given transaction cluster, with a\nnumber of a utility features (inspectors for set feerates, computing\nreduced parents/children, adding transactions, adding dependencies), which\nwill become needed in future commits.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-01-30T03:05:53Z"
      },
      "sha": "59d57abbf1e5ecdeb478d76260c965a8e58c10a6"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDc0OTdjYmEwYjUzZmQ5YTIzOTUwOGQyMDI3ODdiZDc4NTFhMjg2YmQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7497cba0b53fd9a239508d202787bd7851a286bd",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/7497cba0b53fd9a239508d202787bd7851a286bd",
      "tree": {
        "sha": "cdf959fbe87523ccd0fb79d5db3fa9d693ff5ec0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/cdf959fbe87523ccd0fb79d5db3fa9d693ff5ec0"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/59d57abbf1e5ecdeb478d76260c965a8e58c10a6",
          "sha": "59d57abbf1e5ecdeb478d76260c965a8e58c10a6",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/59d57abbf1e5ecdeb478d76260c965a8e58c10a6"
        }
      ],
      "message": "tests: Fuzzing framework for DepGraph class\n\nThis introduces a bespoke fuzzing-focused serialization format for DepGraphs,\nand then tests that this format can represent any graph, roundtrips, and then\nuses that to test the correctness of DepGraph itself.\n\nThis forms the basis for future fuzz tests that need to work with interesting\ngraph.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-05-09T00:52:56Z"
      },
      "sha": "7497cba0b53fd9a239508d202787bd7851a286bd"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDA2YzAxZWNlNDE4ZTEzM2I4MjQzNTVmNTFhOTczZDg5MzE5ODk2NTA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/06c01ece418e133b824355f51a973d8931989650",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/06c01ece418e133b824355f51a973d8931989650",
      "tree": {
        "sha": "11cca3998375c4f88f9eb09e9815e4bd3649808c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/11cca3998375c4f88f9eb09e9815e4bd3649808c"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7497cba0b53fd9a239508d202787bd7851a286bd",
          "sha": "7497cba0b53fd9a239508d202787bd7851a286bd",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/7497cba0b53fd9a239508d202787bd7851a286bd"
        }
      ],
      "message": "clusterlin: add AncestorCandidateFinder class\n\nThis is a class that encapsulated precomputes ancestor set feerates, and\npresents an interface for getting the best remaining ancestor set.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-05-08T22:56:59Z"
      },
      "sha": "06c01ece418e133b824355f51a973d8931989650"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDQ1MTFkOTI1NTVkZjU1OTg2MTRlY2Q2ZGJjZDk1YzJkNWFiNmUyMTM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4511d92555df5598614ecd6dbcd95c2d5ab6e213",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4511d92555df5598614ecd6dbcd95c2d5ab6e213",
      "tree": {
        "sha": "f19590afc59426ff79727c42aa2521ca3e21a08f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f19590afc59426ff79727c42aa2521ca3e21a08f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/06c01ece418e133b824355f51a973d8931989650",
          "sha": "06c01ece418e133b824355f51a973d8931989650",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/06c01ece418e133b824355f51a973d8931989650"
        }
      ],
      "message": "clusterlin: add SearchCandidateFinder class\n\nSimilar to AncestorCandidateFinder, this encapsulates the state needed for\nfinding good candidate sets using a search algorithm.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-05-08T22:09:34Z"
      },
      "sha": "4511d92555df5598614ecd6dbcd95c2d5ab6e213"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGE2NzY4YTMxNThhNjJhYTI4YjIwNjE0ZjM3YWRjNjJjNTI5YmU2ZGY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a6768a3158a62aa28b20614f37adc62c529be6df",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a6768a3158a62aa28b20614f37adc62c529be6df",
      "tree": {
        "sha": "0112c52f91ae5844f1b4bde1f6147ac5cecae468",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0112c52f91ae5844f1b4bde1f6147ac5cecae468"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4511d92555df5598614ecd6dbcd95c2d5ab6e213",
          "sha": "4511d92555df5598614ecd6dbcd95c2d5ab6e213",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/4511d92555df5598614ecd6dbcd95c2d5ab6e213"
        }
      ],
      "message": "clusterlin: add Linearize function\n\nThis adds a first version of the overall linearization interface, which given\na DepGraph constructs a good linearization, by incrementally including good\ncandidate sets (found using AncestorCandidateFinder and SearchCandidateFinder).",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-05-08T21:28:39Z"
      },
      "sha": "a6768a3158a62aa28b20614f37adc62c529be6df"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDM0Y2M3YWFkZDA4YjQ0ZTk0NDczNGY2M2UyMWNmYTc5M2NiZDc5ZDU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/34cc7aadd08b44e944734f63e21cfa793cbd79d5",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/34cc7aadd08b44e944734f63e21cfa793cbd79d5",
      "tree": {
        "sha": "95c09d6e6952731883d3ffc24ba9d01b7c2738d2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/95c09d6e6952731883d3ffc24ba9d01b7c2738d2"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a6768a3158a62aa28b20614f37adc62c529be6df",
          "sha": "a6768a3158a62aa28b20614f37adc62c529be6df",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a6768a3158a62aa28b20614f37adc62c529be6df"
        }
      ],
      "message": "bench: Candidate finding and linearization benchmarks\n\nAdd benchmarks for known bad graphs for the purpose of search (as\nan upper bound on work per search iterations) and ancestor sorting\n(as an upper bound on linearization work with no search iterations).",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-05-16T01:09:31Z"
      },
      "sha": "34cc7aadd08b44e944734f63e21cfa793cbd79d5"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDVjNzJiMmNmYWI3YmM5N2NhM2QzZGRkM2U2ZmNhMjZmZTFhMjg2MjA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5c72b2cfab7bc97ca3d3ddd3e6fca26fe1a28620",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/5c72b2cfab7bc97ca3d3ddd3e6fca26fe1a28620",
      "tree": {
        "sha": "e0c8aa873f98def6dfecb1dd4dd769f04b05fb34",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e0c8aa873f98def6dfecb1dd4dd769f04b05fb34"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/34cc7aadd08b44e944734f63e21cfa793cbd79d5",
          "sha": "34cc7aadd08b44e944734f63e21cfa793cbd79d5",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/34cc7aadd08b44e944734f63e21cfa793cbd79d5"
        }
      ],
      "message": "clusterlin: use bounded BFS exploration (optimization)\n\nSwitch to BFS exploration of the search tree in SearchCandidateFinder\ninstead of DFS exploration. This appears to behave better for real\nworld clusters.\n\nAs BFS has the downside of needing far larger search queues, switch\nback to DFS temporarily when the queue grows too large.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-05-09T15:53:02Z"
      },
      "sha": "5c72b2cfab7bc97ca3d3ddd3e6fca26fe1a28620"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGI4MWM5ZDNmZjk5OTg2OGE4MDNmYjg1YTAxYTc5N2U3ZmEyZmJmYzE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b81c9d3ff999868a803fb85a01a797e7fa2fbfc1",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b81c9d3ff999868a803fb85a01a797e7fa2fbfc1",
      "tree": {
        "sha": "12a2a82f43078a7ef3149f45e13ec4b86a72c016",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/12a2a82f43078a7ef3149f45e13ec4b86a72c016"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5c72b2cfab7bc97ca3d3ddd3e6fca26fe1a28620",
          "sha": "5c72b2cfab7bc97ca3d3ddd3e6fca26fe1a28620",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/5c72b2cfab7bc97ca3d3ddd3e6fca26fe1a28620"
        }
      ],
      "message": "clusterlin: randomize the SearchCandidateFinder search order\n\nTo make search non-deterministic, change the BFS logic from always picking\nthe first queue item, randomly picking the first or second queue item.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-05-10T01:41:52Z"
      },
      "sha": "b81c9d3ff999868a803fb85a01a797e7fa2fbfc1"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDQzZWVmMTMwNGE5MDY1NjUyN2UzMzcyZTA4MWYwYWQ3ZGQ2ODM4OGM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/43eef1304a90656527e3372e081f0ad7dd68388c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/43eef1304a90656527e3372e081f0ad7dd68388c",
      "tree": {
        "sha": "ecafd968ddc61499b222f84160d20d3d2d118bc6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ecafd968ddc61499b222f84160d20d3d2d118bc6"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b81c9d3ff999868a803fb85a01a797e7fa2fbfc1",
          "sha": "b81c9d3ff999868a803fb85a01a797e7fa2fbfc1",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b81c9d3ff999868a803fb85a01a797e7fa2fbfc1"
        }
      ],
      "message": "clusterlin: permit passing in existing linearization to Linearize\n\nThis implements the LIMO algorithm for linearizing by improving an existing\nlinearization. See\nhttps://delvingbitcoin.org/t/limo-combining-the-best-parts-of-linearization-search-and-merging\nfor details.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-05-09T13:02:18Z"
      },
      "sha": "43eef1304a90656527e3372e081f0ad7dd68388c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDdkZWQ0YmZiMGZkMzY2ODgwNWFmZDhiMjNkMWJkYmRiOWFhNDgxM2E",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7ded4bfb0fd3668805afd8b23d1bdbdb9aa4813a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/7ded4bfb0fd3668805afd8b23d1bdbdb9aa4813a",
      "tree": {
        "sha": "c010f363c8e0522d9c2af16f2481da9eb4ccf4f9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c010f363c8e0522d9c2af16f2481da9eb4ccf4f9"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/43eef1304a90656527e3372e081f0ad7dd68388c",
          "sha": "43eef1304a90656527e3372e081f0ad7dd68388c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/43eef1304a90656527e3372e081f0ad7dd68388c"
        }
      ],
      "message": "clusterlin: add algorithms for connectedness/connected components\n\nAdd utility functions to DepGraph for finding connected components.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-05-15T12:37:12Z"
      },
      "sha": "7ded4bfb0fd3668805afd8b23d1bdbdb9aa4813a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDQ1YzMyZTg1M2Y5MDU5ZjkwODU3NjA5ZjNiY2RmMWU5ODg2ODYyZGQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/45c32e853f9059f90857609f3bcdf1e9886862dd",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/45c32e853f9059f90857609f3bcdf1e9886862dd",
      "tree": {
        "sha": "4eaf9710003a4d0e91946c09935b3c478b34290b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4eaf9710003a4d0e91946c09935b3c478b34290b"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7ded4bfb0fd3668805afd8b23d1bdbdb9aa4813a",
          "sha": "7ded4bfb0fd3668805afd8b23d1bdbdb9aa4813a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/7ded4bfb0fd3668805afd8b23d1bdbdb9aa4813a"
        }
      ],
      "message": "clusterlin: add PostLinearize + benchmarks + fuzz tests",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-05-19T12:03:57Z"
      },
      "sha": "45c32e853f9059f90857609f3bcdf1e9886862dd"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDE3MzBjODc4MWIyMDJhYzdiODNjZDM4NTRmNWY3NzIzNDZmNDg2OTU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1730c8781b202ac7b83cd3854f5f772346f48695",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/1730c8781b202ac7b83cd3854f5f772346f48695",
      "tree": {
        "sha": "f4627b67a646dfa5a03410a62b5b03f3f83a146c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f4627b67a646dfa5a03410a62b5b03f3f83a146c"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/45c32e853f9059f90857609f3bcdf1e9886862dd",
          "sha": "45c32e853f9059f90857609f3bcdf1e9886862dd",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/45c32e853f9059f90857609f3bcdf1e9886862dd"
        }
      ],
      "message": "clusterlin: add MergeLinearizations function + fuzz test + benchmark",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-05-29T01:18:52Z"
      },
      "sha": "1730c8781b202ac7b83cd3854f5f772346f48695"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGU4ZDVhMzAxODYyN2JjNmQ0YjMyYWZjOWEzMmUyODUzODAxODllOWY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e8d5a3018627bc6d4b32afc9a32e285380189e9f",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e8d5a3018627bc6d4b32afc9a32e285380189e9f",
      "tree": {
        "sha": "0716e065ace8d1cb3e2d3711689bdd20ae88bbf0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0716e065ace8d1cb3e2d3711689bdd20ae88bbf0"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1730c8781b202ac7b83cd3854f5f772346f48695",
          "sha": "1730c8781b202ac7b83cd3854f5f772346f48695",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/1730c8781b202ac7b83cd3854f5f772346f48695"
        }
      ],
      "message": "Add is_visited helper to epochguard",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-04-08T14:44:33Z"
      },
      "sha": "e8d5a3018627bc6d4b32afc9a32e285380189e9f"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDM2Yjc0MzEwN2YyMmNiZDkzZDJjMTc1ZjcxMThjNjdhNTg1OTgxMDQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/36b743107f22cbd93d2c175f7118c67a58598104",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/36b743107f22cbd93d2c175f7118c67a58598104",
      "tree": {
        "sha": "11cbb12783ea06e33b0c864a62863e08697430f6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/11cbb12783ea06e33b0c864a62863e08697430f6"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e8d5a3018627bc6d4b32afc9a32e285380189e9f",
          "sha": "e8d5a3018627bc6d4b32afc9a32e285380189e9f",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e8d5a3018627bc6d4b32afc9a32e285380189e9f"
        }
      ],
      "message": "Add txgraph module",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-04-08T14:53:51Z"
      },
      "sha": "36b743107f22cbd93d2c175f7118c67a58598104"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDBmZTM3ZDA4NzkwNTFiNWVkNGFjZGI5NzY3MmFlZGU0NzYzNzNmM2E",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0fe37d0879051b5ed4acdb97672aede476373f3a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/0fe37d0879051b5ed4acdb97672aede476373f3a",
      "tree": {
        "sha": "14093ff68e7c1713d00ac52fa2f8411990ba3c2d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/14093ff68e7c1713d00ac52fa2f8411990ba3c2d"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/36b743107f22cbd93d2c175f7118c67a58598104",
          "sha": "36b743107f22cbd93d2c175f7118c67a58598104",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/36b743107f22cbd93d2c175f7118c67a58598104"
        }
      ],
      "message": "add fuzz test for txgraph",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2024-04-13T10:40:41Z"
      },
      "sha": "0fe37d0879051b5ed4acdb97672aede476373f3a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGU5YmI3MmIwOWNiNDY3MWU3NTIwMzc2N2Y0MDRkYjQwZTFkNWE3YzQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e9bb72b09cb4671e75203767f404db40e1d5a7c4",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e9bb72b09cb4671e75203767f404db40e1d5a7c4",
      "tree": {
        "sha": "eea8ce04e3a345d7bddaa46a5aebcc0c9bf29487",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/eea8ce04e3a345d7bddaa46a5aebcc0c9bf29487"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0fe37d0879051b5ed4acdb97672aede476373f3a",
          "sha": "0fe37d0879051b5ed4acdb97672aede476373f3a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0fe37d0879051b5ed4acdb97672aede476373f3a"
        }
      ],
      "message": "Make CTxMemPoolEntry derive from TxEntry",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-04-08T16:12:28Z"
      },
      "sha": "e9bb72b09cb4671e75203767f404db40e1d5a7c4"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGE0OTQwOTM0NjM1MTM3MDUyOWZkYWY5NjljMGM0MjEwNWVkMTQ1Mjk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a49409346351370529fdaf969c0c42105ed14529",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a49409346351370529fdaf969c0c42105ed14529",
      "tree": {
        "sha": "8d92d8a90be0a5534eec9ce55d1eed55bacd6ce7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8d92d8a90be0a5534eec9ce55d1eed55bacd6ce7"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e9bb72b09cb4671e75203767f404db40e1d5a7c4",
          "sha": "e9bb72b09cb4671e75203767f404db40e1d5a7c4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e9bb72b09cb4671e75203767f404db40e1d5a7c4"
        }
      ],
      "message": "Track clusters in mempool with TxGraph",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-04-08T17:46:27Z"
      },
      "sha": "a49409346351370529fdaf969c0c42105ed14529"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDFkMDIwOGJiNDA0NWFlMDRlYTZjMTgwMzVkM2M2NDkyYWJjNGE3OTk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1d0208bb4045ae04ea6c18035d3c6492abc4a799",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/1d0208bb4045ae04ea6c18035d3c6492abc4a799",
      "tree": {
        "sha": "af69d64ff2551e059e4314ae63fd54c4625c00d2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/af69d64ff2551e059e4314ae63fd54c4625c00d2"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a49409346351370529fdaf969c0c42105ed14529",
          "sha": "a49409346351370529fdaf969c0c42105ed14529",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a49409346351370529fdaf969c0c42105ed14529"
        }
      ],
      "message": "Limit mempool size based on chunk feerate\n\nRather than evicting the transactions with the lowest descendant feerate,\ninstead evict transactions that have the lowest chunk feerate.\n\nOnce mining is implemented based on choosing transactions with highest chunk\nfeerate (see next commit), mining and eviction will be opposites, so that we\nwill evict the transactions that would be mined last.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-21T00:55:50Z"
      },
      "sha": "1d0208bb4045ae04ea6c18035d3c6492abc4a799"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDgzNzVmMzg4NjM1OWM3N2E3NThlYzhhM2M4Y2E5YjU4YzUzMmNlMGM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8375f3886359c77a758ec8a3c8ca9b58c532ce0c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8375f3886359c77a758ec8a3c8ca9b58c532ce0c",
      "tree": {
        "sha": "e588ea421a7b0aabc65111c082bed7990d10dfc3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e588ea421a7b0aabc65111c082bed7990d10dfc3"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1d0208bb4045ae04ea6c18035d3c6492abc4a799",
          "sha": "1d0208bb4045ae04ea6c18035d3c6492abc4a799",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/1d0208bb4045ae04ea6c18035d3c6492abc4a799"
        }
      ],
      "message": "Select transactions for blocks based on chunk feerate",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-21T01:16:36Z"
      },
      "sha": "8375f3886359c77a758ec8a3c8ca9b58c532ce0c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDE2ZTA4Y2E4ZWFiMmFkZmE5Y2QzNzY1ODIwZTllNTVhZjJmYWQ4Y2U",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/16e08ca8eab2adfa9cd3765820e9e55af2fad8ce",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/16e08ca8eab2adfa9cd3765820e9e55af2fad8ce",
      "tree": {
        "sha": "ea0898a81d725728a51bea42d80df7dc38a3b442",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ea0898a81d725728a51bea42d80df7dc38a3b442"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8375f3886359c77a758ec8a3c8ca9b58c532ce0c",
          "sha": "8375f3886359c77a758ec8a3c8ca9b58c532ce0c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8375f3886359c77a758ec8a3c8ca9b58c532ce0c"
        }
      ],
      "message": "Add new (unused) limits for cluster size/count",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-21T10:17:40Z"
      },
      "sha": "16e08ca8eab2adfa9cd3765820e9e55af2fad8ce"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGJlYmI3MWUxOWJiNWU5MDZjNTQwNGM3M2JlYWJiNjJmMGMyZjY4YmQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bebb71e19bb5e906c5404c73beabb62f0c2f68bd",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/bebb71e19bb5e906c5404c73beabb62f0c2f68bd",
      "tree": {
        "sha": "b2aeb842d6623b4678c695cebb5a67e5cb591ae0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b2aeb842d6623b4678c695cebb5a67e5cb591ae0"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/16e08ca8eab2adfa9cd3765820e9e55af2fad8ce",
          "sha": "16e08ca8eab2adfa9cd3765820e9e55af2fad8ce",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/16e08ca8eab2adfa9cd3765820e9e55af2fad8ce"
        }
      ],
      "message": "Do not allow mempool clusters to exceed configured limits",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-21T12:58:04Z"
      },
      "sha": "bebb71e19bb5e906c5404c73beabb62f0c2f68bd"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGEyNzZhMjM3OTQ4ZjNiNzFlM2M2M2M2MjAyZDU1MzFkMmY3ZjE5Mzk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a276a237948f3b71e3c63c6202d5531d2f7f1939",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a276a237948f3b71e3c63c6202d5531d2f7f1939",
      "tree": {
        "sha": "784e439f1225e6bf6ff49a97de1faae82140b6bd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/784e439f1225e6bf6ff49a97de1faae82140b6bd"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bebb71e19bb5e906c5404c73beabb62f0c2f68bd",
          "sha": "bebb71e19bb5e906c5404c73beabb62f0c2f68bd",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/bebb71e19bb5e906c5404c73beabb62f0c2f68bd"
        }
      ],
      "message": "policy: Remove CPFP carveout rule\n\nThe addition of a cluster size limit makes the CPFP carveout rule useless,\nbecause carveout cannot be used to bypass the cluster size limit. Remove this\npolicy rule and update tests to no longer rely on the behavior.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-03T14:54:30Z"
      },
      "sha": "a276a237948f3b71e3c63c6202d5531d2f7f1939"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDU5NjNlMTI2Yjc3OTBiZjRiMTcxZWEyOWNmOWRjNGY0NmUwMDM3M2E",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5963e126b7790bf4b171ea29cf9dc4f46e00373a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/5963e126b7790bf4b171ea29cf9dc4f46e00373a",
      "tree": {
        "sha": "ed4016d27bb45e04b146d6ab5b96ff35da73c6e7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ed4016d27bb45e04b146d6ab5b96ff35da73c6e7"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a276a237948f3b71e3c63c6202d5531d2f7f1939",
          "sha": "a276a237948f3b71e3c63c6202d5531d2f7f1939",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a276a237948f3b71e3c63c6202d5531d2f7f1939"
        }
      ],
      "message": "Implement new RBF logic for cluster mempool\n\nWith a total ordering on mempool transactions, we are now able to calculate a\ntransaction's mining score at all times. Use this to improve the RBF logic:\n\n- we no longer enforce a \"no new unconfirmed parents\" rule\n\n- we now require that the mempool's feerate diagram must improve in order\n  to accept a replacement\n\nTODO: update functional test feature_rbf.py to cover all our new scenarios.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-21T17:19:32Z"
      },
      "sha": "5963e126b7790bf4b171ea29cf9dc4f46e00373a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDAwYjJjNjUzNzRiNDk2YmVlN2UyYThjZDMxM2JiNDhmODM5YjcxNTg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/00b2c65374b496bee7e2a8cd313bb48f839b7158",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/00b2c65374b496bee7e2a8cd313bb48f839b7158",
      "tree": {
        "sha": "ed4016d27bb45e04b146d6ab5b96ff35da73c6e7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ed4016d27bb45e04b146d6ab5b96ff35da73c6e7"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5963e126b7790bf4b171ea29cf9dc4f46e00373a",
          "sha": "5963e126b7790bf4b171ea29cf9dc4f46e00373a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/5963e126b7790bf4b171ea29cf9dc4f46e00373a"
        }
      ],
      "message": "==== END CLUSTER IMPLEMENTATION ====",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-17T15:36:11Z"
      },
      "sha": "00b2c65374b496bee7e2a8cd313bb48f839b7158"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDQzNWQ2NTRmZTIwMTg3ZjExMzNmMThlMjBhMTVkMjkyNWJjOTMxZTk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/435d654fe20187f1133f18e20a15d2925bc931e9",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/435d654fe20187f1133f18e20a15d2925bc931e9",
      "tree": {
        "sha": "ed4016d27bb45e04b146d6ab5b96ff35da73c6e7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ed4016d27bb45e04b146d6ab5b96ff35da73c6e7"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/00b2c65374b496bee7e2a8cd313bb48f839b7158",
          "sha": "00b2c65374b496bee7e2a8cd313bb48f839b7158",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/00b2c65374b496bee7e2a8cd313bb48f839b7158"
        }
      ],
      "message": "==== BEGIN MEMPOOL CLEANUP ====",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-17T15:36:45Z"
      },
      "sha": "435d654fe20187f1133f18e20a15d2925bc931e9"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDY2NGM5ODc1ZGYzOWI1MzVhYTY2MzBkMTEyYWM0Nzc3NmY2NGY1NmM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/664c9875df39b535aa6630d112ac47776f64f56c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/664c9875df39b535aa6630d112ac47776f64f56c",
      "tree": {
        "sha": "4a45ad9aa783e080efc0762904628d108c5b1703",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4a45ad9aa783e080efc0762904628d108c5b1703"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/435d654fe20187f1133f18e20a15d2925bc931e9",
          "sha": "435d654fe20187f1133f18e20a15d2925bc931e9",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/435d654fe20187f1133f18e20a15d2925bc931e9"
        }
      ],
      "message": "Remove the ancestor and descendant indices from the mempool",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-21T18:45:20Z"
      },
      "sha": "664c9875df39b535aa6630d112ac47776f64f56c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDQzOTU4NTZkNzg5MjhlZDk3NjBkMjkyN2ExOWEwYjRlYjI5Y2E1ZDY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4395856d78928ed9760d2927a19a0b4eb29ca5d6",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4395856d78928ed9760d2927a19a0b4eb29ca5d6",
      "tree": {
        "sha": "2e209c898da97e6b3b339a0b5c1cd75e00207c01",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2e209c898da97e6b3b339a0b5c1cd75e00207c01"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/664c9875df39b535aa6630d112ac47776f64f56c",
          "sha": "664c9875df39b535aa6630d112ac47776f64f56c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/664c9875df39b535aa6630d112ac47776f64f56c"
        }
      ],
      "message": "Use cluster linearization for transaction relay sort order\n\nPreviously, transaction batches were first sorted by ancestor count and then\nfeerate, to ensure transactions are announced in a topologically valid order,\nwhile prioritizing higher feerate transactions. Ancestor count is a crude\ntopological sort criteria, so replace this with linearization order so that the\nhighest feerate transactions (as would be observed by the mining algorithm) are\nrelayed before lower feerate ones, in a topologically valid way.\n\nThis also fixes a test that only worked due to the ancestor-count-based sort\norder.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-27T18:47:42Z"
      },
      "sha": "4395856d78928ed9760d2927a19a0b4eb29ca5d6"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGUzZGExYzcxNjc2NDRhNzVjNzk2MGVkMzBlNjJhNjYwMWY1Yzk3NTQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e3da1c7167644a75c7960ed30e62a6601f5c9754",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e3da1c7167644a75c7960ed30e62a6601f5c9754",
      "tree": {
        "sha": "90b4c7fa902fdf8d6f83bcc974d872d24e691d0b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/90b4c7fa902fdf8d6f83bcc974d872d24e691d0b"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4395856d78928ed9760d2927a19a0b4eb29ca5d6",
          "sha": "4395856d78928ed9760d2927a19a0b4eb29ca5d6",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/4395856d78928ed9760d2927a19a0b4eb29ca5d6"
        }
      ],
      "message": "Remove CTxMemPool::GetSortedDepthAndScore\n\nThe mempool clusters and linearization permit sorting the mempool topologically\nwithout making use of ancestor counts.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-28T14:20:04Z"
      },
      "sha": "e3da1c7167644a75c7960ed30e62a6601f5c9754"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDk3MWM1NjZkMDk0MzljNzEzZDIyNDI3ZTFjNmUwOWNjODc5YWRkNGU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/971c566d09439c713d22427e1c6e09cc879add4e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/971c566d09439c713d22427e1c6e09cc879add4e",
      "tree": {
        "sha": "8e68c98c64aa5e2f78b74890f930fa37e3b9fe59",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8e68c98c64aa5e2f78b74890f930fa37e3b9fe59"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e3da1c7167644a75c7960ed30e62a6601f5c9754",
          "sha": "e3da1c7167644a75c7960ed30e62a6601f5c9754",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e3da1c7167644a75c7960ed30e62a6601f5c9754"
        }
      ],
      "message": "Reimplement GetTransactionAncestry() to not rely on cached data\n\nIn preparation for removing ancestor data from CTxMemPoolEntry, recalculate the\nancestor statistics on demand wherever needed.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-28T18:47:40Z"
      },
      "sha": "971c566d09439c713d22427e1c6e09cc879add4e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGU2N2FjZTdiMGEyNDJlNmJjMDNhOTAxZTc4Zjg1YTZlZWQ2YjA5Yjk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e67ace7b0a242e6bc03a901e78f85a6eed6b09b9",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e67ace7b0a242e6bc03a901e78f85a6eed6b09b9",
      "tree": {
        "sha": "75846c4cfcee97429352c07e54c7b6890ce84d89",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/75846c4cfcee97429352c07e54c7b6890ce84d89"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/971c566d09439c713d22427e1c6e09cc879add4e",
          "sha": "971c566d09439c713d22427e1c6e09cc879add4e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/971c566d09439c713d22427e1c6e09cc879add4e"
        }
      ],
      "message": "rpc: Calculate ancestor data from scratch for mempool rpc calls",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-28T19:07:05Z"
      },
      "sha": "e67ace7b0a242e6bc03a901e78f85a6eed6b09b9"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDA2NGVkOTllZGRjYzkyZmEyZjg0YzZkNWExOTIzYTk4YWNkNDc0MzM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/064ed99eddcc92fa2f84c6d5a1923a98acd47433",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/064ed99eddcc92fa2f84c6d5a1923a98acd47433",
      "tree": {
        "sha": "6f563bebd59c0f8dabfc14c208a0c0da15942a8f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6f563bebd59c0f8dabfc14c208a0c0da15942a8f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e67ace7b0a242e6bc03a901e78f85a6eed6b09b9",
          "sha": "e67ace7b0a242e6bc03a901e78f85a6eed6b09b9",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e67ace7b0a242e6bc03a901e78f85a6eed6b09b9"
        }
      ],
      "message": "Remove dependency on cached ancestor data in mini-miner",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-28T21:55:16Z"
      },
      "sha": "064ed99eddcc92fa2f84c6d5a1923a98acd47433"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGRkZjFlZjFhYjcyYjE2YmExNWVhNDMyYjU0ZmM5MDIwNGY2ZDlhMWE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ddf1ef1ab72b16ba15ea432b54fc90204f6d9a1a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ddf1ef1ab72b16ba15ea432b54fc90204f6d9a1a",
      "tree": {
        "sha": "a3ae1c4529eb027c01a67bdedb4f2ab660d3d608",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a3ae1c4529eb027c01a67bdedb4f2ab660d3d608"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/064ed99eddcc92fa2f84c6d5a1923a98acd47433",
          "sha": "064ed99eddcc92fa2f84c6d5a1923a98acd47433",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/064ed99eddcc92fa2f84c6d5a1923a98acd47433"
        }
      ],
      "message": "Stop enforcing ancestor size/count limits\n\nThe cluster limits should be sufficient.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-28T21:59:15Z"
      },
      "sha": "ddf1ef1ab72b16ba15ea432b54fc90204f6d9a1a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDZkM2MwYjU3MDUyYmM4ZGQwMTk2NWE3MTNkMjhiNTRiY2I0MWRiNWU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6d3c0b57052bc8dd01965a713d28b54bcb41db5e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/6d3c0b57052bc8dd01965a713d28b54bcb41db5e",
      "tree": {
        "sha": "7a29a75184cdf04010c87ec0b80e45eb7eb23a86",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7a29a75184cdf04010c87ec0b80e45eb7eb23a86"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ddf1ef1ab72b16ba15ea432b54fc90204f6d9a1a",
          "sha": "ddf1ef1ab72b16ba15ea432b54fc90204f6d9a1a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ddf1ef1ab72b16ba15ea432b54fc90204f6d9a1a"
        }
      ],
      "message": "Add test case for cluster size limits to v3 logic",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2024-04-14T10:59:01Z"
      },
      "sha": "6d3c0b57052bc8dd01965a713d28b54bcb41db5e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDEzOGQ3YTY0OTBkMmRlNmRlMjQ0MmNjNmZhYTE5YjBmNmNjMDUwMjg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/138d7a6490d2de6de2442cc6faa19b0f6cc05028",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/138d7a6490d2de6de2442cc6faa19b0f6cc05028",
      "tree": {
        "sha": "89a93690680bf453de156c08646dd75e40b6b41c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/89a93690680bf453de156c08646dd75e40b6b41c"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6d3c0b57052bc8dd01965a713d28b54bcb41db5e",
          "sha": "6d3c0b57052bc8dd01965a713d28b54bcb41db5e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/6d3c0b57052bc8dd01965a713d28b54bcb41db5e"
        }
      ],
      "message": "Use mempool/txgraph to determine if a tx has descendants\n\nRemove a reference to GetCountWithDescendants() in preparation for removing\nthis function and the associated cached state from the mempool.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-03T15:19:15Z"
      },
      "sha": "138d7a6490d2de6de2442cc6faa19b0f6cc05028"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDY3ODQzYTJhYWFiMTI4NDQ1OWZhODFiOTc3NGQ1YWUxYWY3ZjU1YTA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/67843a2aaab1284459fa81b9774d5ae1af7f55a0",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/67843a2aaab1284459fa81b9774d5ae1af7f55a0",
      "tree": {
        "sha": "ff88546925a11f039ec65abf03766d8d8e60b7bf",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ff88546925a11f039ec65abf03766d8d8e60b7bf"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/138d7a6490d2de6de2442cc6faa19b0f6cc05028",
          "sha": "138d7a6490d2de6de2442cc6faa19b0f6cc05028",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/138d7a6490d2de6de2442cc6faa19b0f6cc05028"
        }
      ],
      "message": "Calculate descendant information for mempool RPC output on-the-fly\n\nThis is in preparation for removing the cached descendant state from the\nmempool.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-03T15:57:16Z"
      },
      "sha": "67843a2aaab1284459fa81b9774d5ae1af7f55a0"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDIzZjIyZTg3MWQyMzQyZGE1ZDkxNjkzM2EyMWQ4N2FjMzM1MjQ0ZmY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/23f22e871d2342da5d916933a21d87ac335244ff",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/23f22e871d2342da5d916933a21d87ac335244ff",
      "tree": {
        "sha": "c97d1a18c7cad52afc0a638b16e58bcfbf2d9e4f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c97d1a18c7cad52afc0a638b16e58bcfbf2d9e4f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/67843a2aaab1284459fa81b9774d5ae1af7f55a0",
          "sha": "67843a2aaab1284459fa81b9774d5ae1af7f55a0",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/67843a2aaab1284459fa81b9774d5ae1af7f55a0"
        }
      ],
      "message": "test: fix rbf carveout test in mempool_limit.py\n\nMinimal fix to the test that the RBF carveout doesn't apply in certain package\nvalidation cases. Now that RBF carveout doesn't exist, we can just test that\nthe cluster count limit is respected (in preparation for removing the\ndescendant limit altogether).",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-18T17:22:09Z"
      },
      "sha": "23f22e871d2342da5d916933a21d87ac335244ff"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGE5OWUxYzZmYzZmZGFmMzUwODI4YWRiYjA4OTg2Y2M4ZTAyNTViMzI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a99e1c6fc6fdaf350828adbb08986cc8e0255b32",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a99e1c6fc6fdaf350828adbb08986cc8e0255b32",
      "tree": {
        "sha": "fefa6809dc80d67eaf951c9e7319f34bc707469e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/fefa6809dc80d67eaf951c9e7319f34bc707469e"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/23f22e871d2342da5d916933a21d87ac335244ff",
          "sha": "23f22e871d2342da5d916933a21d87ac335244ff",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/23f22e871d2342da5d916933a21d87ac335244ff"
        }
      ],
      "message": "Stop enforcing descendant size/count limits\n\nCluster size limits should be enough.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-03T17:56:22Z"
      },
      "sha": "a99e1c6fc6fdaf350828adbb08986cc8e0255b32"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGM1ZDE0MDJmMDA4ODc4ODA3MmY0NzJiNWVjODg2OGNjZWY5MWY4NTE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c5d1402f0088788072f472b5ec8868ccef91f851",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c5d1402f0088788072f472b5ec8868ccef91f851",
      "tree": {
        "sha": "d10832ccc2ad420ec32a7535eebe0d3885db47ce",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d10832ccc2ad420ec32a7535eebe0d3885db47ce"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a99e1c6fc6fdaf350828adbb08986cc8e0255b32",
          "sha": "a99e1c6fc6fdaf350828adbb08986cc8e0255b32",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a99e1c6fc6fdaf350828adbb08986cc8e0255b32"
        }
      ],
      "message": "Eliminate RBF workaround for CPFP carveout transactions\n\nThe new cluster mempool RBF rules take into account clusters sizes exactly, so\nwith the removal of descendant count enforcement this idea is obsolete.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-12T18:50:47Z"
      },
      "sha": "c5d1402f0088788072f472b5ec8868ccef91f851"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDM0MzYwZGI1MTk5MjFkYjNmZDBhOTk5ZjkxMzBmNzZmNDQzM2Q1NGM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/34360db519921db3fd0a999f9130f76f4433d54c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/34360db519921db3fd0a999f9130f76f4433d54c",
      "tree": {
        "sha": "44e691ad1fe5cbd315c0e27933236195b10e61ab",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/44e691ad1fe5cbd315c0e27933236195b10e61ab"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c5d1402f0088788072f472b5ec8868ccef91f851",
          "sha": "c5d1402f0088788072f472b5ec8868ccef91f851",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c5d1402f0088788072f472b5ec8868ccef91f851"
        }
      ],
      "message": "wallet: Replace max descendantsize with clustersize\n\nWith the descendant size limits removed, replace the concept of \"max number of\ndescendants of any ancestor of a given tx\" with the cluster count of the cluster\nthat the transaction belongs to.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-03T19:00:00Z"
      },
      "sha": "34360db519921db3fd0a999f9130f76f4433d54c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGIzOGQzZWU2MmY5ZDI1YmEwOTJmODAyNzIwZTM1MDZjNTQ4M2NkNWE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b38d3ee62f9d25ba092f802720e3506c5483cd5a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b38d3ee62f9d25ba092f802720e3506c5483cd5a",
      "tree": {
        "sha": "f265a8a814261d815a9cde8a3b98866fc241ee42",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f265a8a814261d815a9cde8a3b98866fc241ee42"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/34360db519921db3fd0a999f9130f76f4433d54c",
          "sha": "34360db519921db3fd0a999f9130f76f4433d54c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/34360db519921db3fd0a999f9130f76f4433d54c"
        }
      ],
      "message": "mempool: Remove unused function CalculateDescendantMaximum",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-04T13:19:21Z"
      },
      "sha": "b38d3ee62f9d25ba092f802720e3506c5483cd5a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDYzMjQzMjhhNzQwODZmNWU3NDdhOWYwODYwNmE0MTE2NmY0MmZjZTM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6324328a74086f5e747a9f08606a41166f42fce3",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/6324328a74086f5e747a9f08606a41166f42fce3",
      "tree": {
        "sha": "6cf66f58b632b58ab549e02296e1ca8e9172663e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6cf66f58b632b58ab549e02296e1ca8e9172663e"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b38d3ee62f9d25ba092f802720e3506c5483cd5a",
          "sha": "b38d3ee62f9d25ba092f802720e3506c5483cd5a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b38d3ee62f9d25ba092f802720e3506c5483cd5a"
        }
      ],
      "message": "Eliminate use of cached ancestor data in miniminer_tests and v3_policy",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2024-04-14T17:49:03Z"
      },
      "sha": "6324328a74086f5e747a9f08606a41166f42fce3"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDQzZmRkZTYzZjcwODg2YWQ3MjA4ZTJkMTQxYTk0YmQ5N2FiNTI1MTc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/43fdde63f70886ad7208e2d141a94bd97ab52517",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/43fdde63f70886ad7208e2d141a94bd97ab52517",
      "tree": {
        "sha": "5d29db51311713567d9a89842312570bc70590d8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5d29db51311713567d9a89842312570bc70590d8"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6324328a74086f5e747a9f08606a41166f42fce3",
          "sha": "6324328a74086f5e747a9f08606a41166f42fce3",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/6324328a74086f5e747a9f08606a41166f42fce3"
        }
      ],
      "message": "mempool: eliminate accessors to mempool entry ancestor/descendant cached state",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-04T13:28:05Z"
      },
      "sha": "43fdde63f70886ad7208e2d141a94bd97ab52517"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDA3OTA4N2FiZWQxNjI3ZGM2MjEwOTExZGEyMTNjYWMzNjAxYjkxZjM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/079087abed1627dc6210911da213cac3601b91f3",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/079087abed1627dc6210911da213cac3601b91f3",
      "tree": {
        "sha": "2df8a08ada73fbb632b2c64ad5bde61a2948c93e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2df8a08ada73fbb632b2c64ad5bde61a2948c93e"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/43fdde63f70886ad7208e2d141a94bd97ab52517",
          "sha": "43fdde63f70886ad7208e2d141a94bd97ab52517",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/43fdde63f70886ad7208e2d141a94bd97ab52517"
        }
      ],
      "message": "Remove unused members from CTxMemPoolEntry",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-04T13:48:04Z"
      },
      "sha": "079087abed1627dc6210911da213cac3601b91f3"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDE0OThjMTBlZjI4YjRhNTdhNTAwNzliMDg0OWYzMTJiMzkzNWQ3NzY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1498c10ef28b4a57a50079b0849f312b3935d776",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/1498c10ef28b4a57a50079b0849f312b3935d776",
      "tree": {
        "sha": "d4eb4f2fd2a38fcd38ec21f829fe79e15c1eb773",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d4eb4f2fd2a38fcd38ec21f829fe79e15c1eb773"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/079087abed1627dc6210911da213cac3601b91f3",
          "sha": "079087abed1627dc6210911da213cac3601b91f3",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/079087abed1627dc6210911da213cac3601b91f3"
        }
      ],
      "message": "Remove mempool logic designed to maintain ancestor/descendant state",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-04T14:47:14Z"
      },
      "sha": "1498c10ef28b4a57a50079b0849f312b3935d776"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDZhOGNkN2QwZWUwYTA0ZmM4YTdiZDgxYmNmZmRjNjVmMDk0M2U4NTk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6a8cd7d0ee0a04fc8a7bd81bcffdc65f0943e859",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/6a8cd7d0ee0a04fc8a7bd81bcffdc65f0943e859",
      "tree": {
        "sha": "b75d21b66ff4f063980cadee6381e882ed7f3e8e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b75d21b66ff4f063980cadee6381e882ed7f3e8e"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1498c10ef28b4a57a50079b0849f312b3935d776",
          "sha": "1498c10ef28b4a57a50079b0849f312b3935d776",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/1498c10ef28b4a57a50079b0849f312b3935d776"
        }
      ],
      "message": "mempool: addUnchecked no longer needs ancestors",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-05T13:33:41Z"
      },
      "sha": "6a8cd7d0ee0a04fc8a7bd81bcffdc65f0943e859"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDBmZjBlZTQ3MjMwYWQ3MDQ3NzgwZTk3MzJhNGRkOGVmYjUyODNkYWY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0ff0ee47230ad7047780e9732a4dd8efb5283daf",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/0ff0ee47230ad7047780e9732a4dd8efb5283daf",
      "tree": {
        "sha": "36c7de49ff0a44fab2ce8ce23c5998e4d038ccc4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/36c7de49ff0a44fab2ce8ce23c5998e4d038ccc4"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6a8cd7d0ee0a04fc8a7bd81bcffdc65f0943e859",
          "sha": "6a8cd7d0ee0a04fc8a7bd81bcffdc65f0943e859",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/6a8cd7d0ee0a04fc8a7bd81bcffdc65f0943e859"
        }
      ],
      "message": "Remove unused limits from CalculateMemPoolAncestors",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-15T01:15:06Z"
      },
      "sha": "0ff0ee47230ad7047780e9732a4dd8efb5283daf"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDIwYTk4ZmVhODYxOWM1MjI5NmViNTlmMjJiNDQ4OTQyYTI1Y2U1ZjQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/20a98fea8619c52296eb59f22b448942a25ce5f4",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/20a98fea8619c52296eb59f22b448942a25ce5f4",
      "tree": {
        "sha": "3820acf9a8dfff784445819e37a2510a82b19d07",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3820acf9a8dfff784445819e37a2510a82b19d07"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0ff0ee47230ad7047780e9732a4dd8efb5283daf",
          "sha": "0ff0ee47230ad7047780e9732a4dd8efb5283daf",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0ff0ee47230ad7047780e9732a4dd8efb5283daf"
        }
      ],
      "message": "Make removeConflicts private",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-15T10:12:22Z"
      },
      "sha": "20a98fea8619c52296eb59f22b448942a25ce5f4"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGIwNjgzY2UzYjQ1MTU3ZTMzMzM1YzAxNTE1MDJmZWY4NDFiYWUxZTA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b0683ce3b45157e33335c0151502fef841bae1e0",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b0683ce3b45157e33335c0151502fef841bae1e0",
      "tree": {
        "sha": "3820acf9a8dfff784445819e37a2510a82b19d07",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3820acf9a8dfff784445819e37a2510a82b19d07"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/20a98fea8619c52296eb59f22b448942a25ce5f4",
          "sha": "20a98fea8619c52296eb59f22b448942a25ce5f4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/20a98fea8619c52296eb59f22b448942a25ce5f4"
        }
      ],
      "message": "==== END MEMPOOL CLEANUP ====",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-17T15:36:50Z"
      },
      "sha": "b0683ce3b45157e33335c0151502fef841bae1e0"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDljOTYxZTMzOGY3NjMyMDQ2MGE2YjUxMzQzYmY0MjlhOGRhM2M5MmU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9c961e338f76320460a6b51343bf429a8da3c92e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/9c961e338f76320460a6b51343bf429a8da3c92e",
      "tree": {
        "sha": "3820acf9a8dfff784445819e37a2510a82b19d07",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3820acf9a8dfff784445819e37a2510a82b19d07"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b0683ce3b45157e33335c0151502fef841bae1e0",
          "sha": "b0683ce3b45157e33335c0151502fef841bae1e0",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b0683ce3b45157e33335c0151502fef841bae1e0"
        }
      ],
      "message": "==== BEGIN OPTIMIZATIONS ====",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-17T15:37:03Z"
      },
      "sha": "9c961e338f76320460a6b51343bf429a8da3c92e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDU2YjJlZmExYWUzMDc4Y2I3ZTE5YWJjZTljMzgwMThmMGIxOTAwNzU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/56b2efa1ae3078cb7e19abce9c38018f0b190075",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/56b2efa1ae3078cb7e19abce9c38018f0b190075",
      "tree": {
        "sha": "7dcd3662013908aae3087b2f55ecba4f984814a2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7dcd3662013908aae3087b2f55ecba4f984814a2"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9c961e338f76320460a6b51343bf429a8da3c92e",
          "sha": "9c961e338f76320460a6b51343bf429a8da3c92e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/9c961e338f76320460a6b51343bf429a8da3c92e"
        }
      ],
      "message": "Rework removeForBlock so that clusters are only touched once\n\nAlso remove extra linearization that was happening and some logging\n\nUpdate interface_zmq.py for new block connection behavior",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2023-10-10T19:42:56Z"
      },
      "sha": "56b2efa1ae3078cb7e19abce9c38018f0b190075"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGNiNTAyNGMzODBkMzhhYjZjNmNjZjNiYWJkNTA4NzcxMTllNGFmYjI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cb5024c380d38ab6c6ccf3babd50877119e4afb2",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/cb5024c380d38ab6c6ccf3babd50877119e4afb2",
      "tree": {
        "sha": "91ad4aa7e5f2f05e7bf16c5d232a36cffa7e81cb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/91ad4aa7e5f2f05e7bf16c5d232a36cffa7e81cb"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/56b2efa1ae3078cb7e19abce9c38018f0b190075",
          "sha": "56b2efa1ae3078cb7e19abce9c38018f0b190075",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/56b2efa1ae3078cb7e19abce9c38018f0b190075"
        }
      ],
      "message": "Simplify ancestor calculation functions\n\nNow that ancestor calculation never fails (due to ancestor/descendant limits\nbeing eliminated), we can eliminate the error handling from\nCalculateMemPoolAncestors.\n\ninterface_zmq test is broken",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-15T01:31:51Z"
      },
      "sha": "cb5024c380d38ab6c6ccf3babd50877119e4afb2"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDE3MDJkODAyYjhkYmY2ODdhNWM0NDk1NGNkZjJkNDM4NTAxY2Q2MDc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1702d802b8dbf687a5c44954cdf2d438501cd607",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/1702d802b8dbf687a5c44954cdf2d438501cd607",
      "tree": {
        "sha": "7fa1d7b7adaa0a466a9ff1a5d4927124347364bd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7fa1d7b7adaa0a466a9ff1a5d4927124347364bd"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cb5024c380d38ab6c6ccf3babd50877119e4afb2",
          "sha": "cb5024c380d38ab6c6ccf3babd50877119e4afb2",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/cb5024c380d38ab6c6ccf3babd50877119e4afb2"
        }
      ],
      "message": "Use txgraph to calculate ancestors",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2024-04-14T22:21:34Z"
      },
      "sha": "1702d802b8dbf687a5c44954cdf2d438501cd607"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDJjNzdmMWJhZGU3NTkwMTU0ZDZlZGE0OTQ0YTE3Yzg0Y2M3NTgwZTE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2c77f1bade7590154d6eda4944a17c84cc7580e1",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2c77f1bade7590154d6eda4944a17c84cc7580e1",
      "tree": {
        "sha": "9952ffc0a1e228e536111a75cd3cddf46bf8af4a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9952ffc0a1e228e536111a75cd3cddf46bf8af4a"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1702d802b8dbf687a5c44954cdf2d438501cd607",
          "sha": "1702d802b8dbf687a5c44954cdf2d438501cd607",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/1702d802b8dbf687a5c44954cdf2d438501cd607"
        }
      ],
      "message": "Use txgraph to calculate descendants",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2024-04-14T23:28:25Z"
      },
      "sha": "2c77f1bade7590154d6eda4944a17c84cc7580e1"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGUzZTA1MDcwYTZkMWZhNDBhM2NhOGIwNWU0MjFmM2U4NzNkMzNmY2I",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e3e05070a6d1fa40a3ca8b05e421f3e873d33fcb",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e3e05070a6d1fa40a3ca8b05e421f3e873d33fcb",
      "tree": {
        "sha": "169e0312623b1738e7b6c2b2ad85d884a270f3ea",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/169e0312623b1738e7b6c2b2ad85d884a270f3ea"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2c77f1bade7590154d6eda4944a17c84cc7580e1",
          "sha": "2c77f1bade7590154d6eda4944a17c84cc7580e1",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2c77f1bade7590154d6eda4944a17c84cc7580e1"
        }
      ],
      "message": "Move GetNumChildren() to be a mempool function",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2024-04-16T14:47:28Z"
      },
      "sha": "e3e05070a6d1fa40a3ca8b05e421f3e873d33fcb"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDJiOTA5NDBjM2E0NGRhMWVlYzIyZDc1MmM4YTNjYTE3NzVhNmJlM2Y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2b90940c3a44da1eec22d752c8a3ca1775a6be3f",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2b90940c3a44da1eec22d752c8a3ca1775a6be3f",
      "tree": {
        "sha": "a261d9ab884049649a2b02e7b237393c16345115",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a261d9ab884049649a2b02e7b237393c16345115"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e3e05070a6d1fa40a3ca8b05e421f3e873d33fcb",
          "sha": "e3e05070a6d1fa40a3ca8b05e421f3e873d33fcb",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e3e05070a6d1fa40a3ca8b05e421f3e873d33fcb"
        }
      ],
      "message": "Make getting parents/children a function of the mempool, not a mempool entry",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2024-04-16T15:02:26Z"
      },
      "sha": "2b90940c3a44da1eec22d752c8a3ca1775a6be3f"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDJiYzI5ZGQzZjUwMGQ2YjNjODhhMTdiMjhhNDYzYWYyYzY3OWRiOWM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2bc29dd3f500d6b3c88a17b28a463af2c679db9c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2bc29dd3f500d6b3c88a17b28a463af2c679db9c",
      "tree": {
        "sha": "bb3fa857d6b70fae192eaec4c5cd331f6a3d868d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/bb3fa857d6b70fae192eaec4c5cd331f6a3d868d"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2b90940c3a44da1eec22d752c8a3ca1775a6be3f",
          "sha": "2b90940c3a44da1eec22d752c8a3ca1775a6be3f",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2b90940c3a44da1eec22d752c8a3ca1775a6be3f"
        }
      ],
      "message": "Rewrite GatherClusters to use the txgraph implementation",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2024-04-16T15:10:07Z"
      },
      "sha": "2bc29dd3f500d6b3c88a17b28a463af2c679db9c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGFiMGQ0ZDJhM2Y1YzI3MzRkMTUxMDhjYjZjN2VjZjRiNjIwYzk0M2I",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ab0d4d2a3f5c2734d15108cb6c7ecf4b620c943b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ab0d4d2a3f5c2734d15108cb6c7ecf4b620c943b",
      "tree": {
        "sha": "4a92c9ffdbef002fe876b2e4e2e95ce5334b0701",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4a92c9ffdbef002fe876b2e4e2e95ce5334b0701"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2bc29dd3f500d6b3c88a17b28a463af2c679db9c",
          "sha": "2bc29dd3f500d6b3c88a17b28a463af2c679db9c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2bc29dd3f500d6b3c88a17b28a463af2c679db9c"
        }
      ],
      "message": "Switch to using txgraph parents/children in public accessors",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2024-04-16T15:11:04Z"
      },
      "sha": "ab0d4d2a3f5c2734d15108cb6c7ecf4b620c943b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDNlZDc2ZDRmN2YxOTkwOTVkOWI5MGQzNmVjNjE0YzE4NmNlYjJkYjU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3ed76d4f7f199095d9b90d36ec614c186ceb2db5",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3ed76d4f7f199095d9b90d36ec614c186ceb2db5",
      "tree": {
        "sha": "62813e9228a0821598f88310cbb26b4a9afbe193",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/62813e9228a0821598f88310cbb26b4a9afbe193"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ab0d4d2a3f5c2734d15108cb6c7ecf4b620c943b",
          "sha": "ab0d4d2a3f5c2734d15108cb6c7ecf4b620c943b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ab0d4d2a3f5c2734d15108cb6c7ecf4b620c943b"
        }
      ],
      "message": "Stop tracking parents/children outside of txgraph",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2024-04-16T16:13:42Z"
      },
      "sha": "3ed76d4f7f199095d9b90d36ec614c186ceb2db5"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDhiMTZhNWZkZmRkY2ZjZDVlNTAwNDRlNzc4MDk1MTVkNWQ3ZjAyMmU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8b16a5fdfddcfcd5e50044e77809515d5d7f022e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8b16a5fdfddcfcd5e50044e77809515d5d7f022e",
      "tree": {
        "sha": "37d38a569a97dac1bdcca01a40b055112afd09b3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/37d38a569a97dac1bdcca01a40b055112afd09b3"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3ed76d4f7f199095d9b90d36ec614c186ceb2db5",
          "sha": "3ed76d4f7f199095d9b90d36ec614c186ceb2db5",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/3ed76d4f7f199095d9b90d36ec614c186ceb2db5"
        }
      ],
      "message": "Remove unused argument to RemoveStaged",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2024-04-16T17:37:46Z"
      },
      "sha": "8b16a5fdfddcfcd5e50044e77809515d5d7f022e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDJkNzNmMTFlMmJjYmZkMTRlNTYzNTk5YjFhNTEzZGU2MmE4NDc2Yzc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2d73f11e2bcbfd14e563599b1a513de62a8476c7",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2d73f11e2bcbfd14e563599b1a513de62a8476c7",
      "tree": {
        "sha": "254a5c63692d3bb698b56b83b6d10590126eba6e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/254a5c63692d3bb698b56b83b6d10590126eba6e"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8b16a5fdfddcfcd5e50044e77809515d5d7f022e",
          "sha": "8b16a5fdfddcfcd5e50044e77809515d5d7f022e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8b16a5fdfddcfcd5e50044e77809515d5d7f022e"
        }
      ],
      "message": "Switch to using the faster CalculateDescendants\n\nThe only place we still use the older interface is in policy/rbf.cpp, where\nit's helpful to incrementally calculate descendants to avoid calculating too\nmany at once (or cluttering the CalculateDescendants interface with a\ncalculation limit).",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-16T00:57:53Z"
      },
      "sha": "2d73f11e2bcbfd14e563599b1a513de62a8476c7"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGI3YjcxNzcxNzQ0OTdiYTAxMzY4MjQxNmExMDY0MTVhYzA4MmUxNTE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b7b7177174497ba013682416a106415ac082e151",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b7b7177174497ba013682416a106415ac082e151",
      "tree": {
        "sha": "a3e46ac255205d7408c84d1dcb76447525885379",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a3e46ac255205d7408c84d1dcb76447525885379"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2d73f11e2bcbfd14e563599b1a513de62a8476c7",
          "sha": "2d73f11e2bcbfd14e563599b1a513de62a8476c7",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2d73f11e2bcbfd14e563599b1a513de62a8476c7"
        }
      ],
      "message": "Rewrite removeRecursive to use vectors instead of sets",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2024-04-16T17:42:55Z"
      },
      "sha": "b7b7177174497ba013682416a106415ac082e151"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGM1MThhOTU1NWQzZTU3YTg2ZTM3NWY4NzhjN2RlYzRhMGE0OTc2NjM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c518a9555d3e57a86e375f878c7dec4a0a497663",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c518a9555d3e57a86e375f878c7dec4a0a497663",
      "tree": {
        "sha": "d1ca5aea4209b36c7de8f3306e87b4bed985b962",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d1ca5aea4209b36c7de8f3306e87b4bed985b962"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b7b7177174497ba013682416a106415ac082e151",
          "sha": "b7b7177174497ba013682416a106415ac082e151",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b7b7177174497ba013682416a106415ac082e151"
        }
      ],
      "message": "Rewrite Expire to only invoke CalculateDescendants once",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2024-04-16T17:47:10Z"
      },
      "sha": "c518a9555d3e57a86e375f878c7dec4a0a497663"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQ4MDIzMjhjODJkZjY4NDQ1M2VmNDdiNzE2MWZlMDY3OTY4NjM0NzI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d802328c82df684453ef47b7161fe06796863472",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d802328c82df684453ef47b7161fe06796863472",
      "tree": {
        "sha": "8e9fcdcb7e0ecb2d07863ea4eaa1f4519bbd472b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8e9fcdcb7e0ecb2d07863ea4eaa1f4519bbd472b"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c518a9555d3e57a86e375f878c7dec4a0a497663",
          "sha": "c518a9555d3e57a86e375f878c7dec4a0a497663",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c518a9555d3e57a86e375f878c7dec4a0a497663"
        }
      ],
      "message": "Rewrite removeForReorg to use a vector instead of a set",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2024-04-16T17:53:12Z"
      },
      "sha": "d802328c82df684453ef47b7161fe06796863472"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDdjNWY0MTA2NGRkNjE4MzIxOWI1MGVkNjViYzg5M2UzYmRmZjkwYWQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7c5f41064dd6183219b50ed65bc893e3bdff90ad",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/7c5f41064dd6183219b50ed65bc893e3bdff90ad",
      "tree": {
        "sha": "89a91e2a3fee38c2130dde556e24d46939249020",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/89a91e2a3fee38c2130dde556e24d46939249020"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d802328c82df684453ef47b7161fe06796863472",
          "sha": "d802328c82df684453ef47b7161fe06796863472",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d802328c82df684453ef47b7161fe06796863472"
        }
      ],
      "message": "Drop unnecessary set in TrimToSize",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2024-04-16T19:08:47Z"
      },
      "sha": "7c5f41064dd6183219b50ed65bc893e3bdff90ad"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGUyMzk4MWNjYjY1ZmY5Yjk1ZDhkMmMxY2I2ZTc3YTFkYjhlZmQ4MWQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e23981ccb65ff9b95d8d2c1cb6e77a1db8efd81d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e23981ccb65ff9b95d8d2c1cb6e77a1db8efd81d",
      "tree": {
        "sha": "4b7e97d6d0d55003b751862c650bc3e6e3a6e5e7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4b7e97d6d0d55003b751862c650bc3e6e3a6e5e7"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7c5f41064dd6183219b50ed65bc893e3bdff90ad",
          "sha": "7c5f41064dd6183219b50ed65bc893e3bdff90ad",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/7c5f41064dd6183219b50ed65bc893e3bdff90ad"
        }
      ],
      "message": "RemoveStaged takes a vector, not a set",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2024-04-16T19:53:35Z"
      },
      "sha": "e23981ccb65ff9b95d8d2c1cb6e77a1db8efd81d"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGE0ZTAzNGJmZDZiMTkxNmY5MjY4YmE0M2MyMDRiODY3YzEzNzliZDc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a4e034bfd6b1916f9268ba43c204b867c1379bd7",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a4e034bfd6b1916f9268ba43c204b867c1379bd7",
      "tree": {
        "sha": "5eb530f27207dec76534eca82d5ebbd5afd45461",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5eb530f27207dec76534eca82d5ebbd5afd45461"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e23981ccb65ff9b95d8d2c1cb6e77a1db8efd81d",
          "sha": "e23981ccb65ff9b95d8d2c1cb6e77a1db8efd81d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e23981ccb65ff9b95d8d2c1cb6e77a1db8efd81d"
        }
      ],
      "message": "Only use CalculateDescendants() with vectors, not sets",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2024-04-16T20:02:06Z"
      },
      "sha": "a4e034bfd6b1916f9268ba43c204b867c1379bd7"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDU4ZjMyNWU2OGU3NjIwNjQxNzVjYjcyZmVkM2UxMzliZWM4NWFkNmY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/58f325e68e762064175cb72fed3e139bec85ad6f",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/58f325e68e762064175cb72fed3e139bec85ad6f",
      "tree": {
        "sha": "46a65849078dc2538eac5300de064e9b1eb286c3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/46a65849078dc2538eac5300de064e9b1eb286c3"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a4e034bfd6b1916f9268ba43c204b867c1379bd7",
          "sha": "a4e034bfd6b1916f9268ba43c204b867c1379bd7",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a4e034bfd6b1916f9268ba43c204b867c1379bd7"
        }
      ],
      "message": "Use faster CalculateMemPoolAncestors in rbf",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2024-04-16T21:11:47Z"
      },
      "sha": "58f325e68e762064175cb72fed3e139bec85ad6f"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGI1NjdlYTQwM2E3YWIxYmNiNDgxOWI3ZDYxNTM5ZjIwMDZhMzE3MjM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b567ea403a7ab1bcb4819b7d61539f2006a31723",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b567ea403a7ab1bcb4819b7d61539f2006a31723",
      "tree": {
        "sha": "a55abbc5d1f555ac6615ebc608d880afc763fab1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a55abbc5d1f555ac6615ebc608d880afc763fab1"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/58f325e68e762064175cb72fed3e139bec85ad6f",
          "sha": "58f325e68e762064175cb72fed3e139bec85ad6f",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/58f325e68e762064175cb72fed3e139bec85ad6f"
        }
      ],
      "message": "Use faster CMPA in rpc/mempool",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2024-04-16T21:12:37Z"
      },
      "sha": "b567ea403a7ab1bcb4819b7d61539f2006a31723"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGJkZWExOTEwNzg0N2M0NTk3YjdhYjY0OGE2ODczOTAyYzg1NTFkY2Q",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bdea19107847c4597b7ab648a6873902c8551dcd",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/bdea19107847c4597b7ab648a6873902c8551dcd",
      "tree": {
        "sha": "3c616c9b292b8401016d18145b9aaab5f0546b8e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3c616c9b292b8401016d18145b9aaab5f0546b8e"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b567ea403a7ab1bcb4819b7d61539f2006a31723",
          "sha": "b567ea403a7ab1bcb4819b7d61539f2006a31723",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b567ea403a7ab1bcb4819b7d61539f2006a31723"
        }
      ],
      "message": "Eliminate need for ancestors in SingleV3Checks",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2024-04-16T21:13:13Z"
      },
      "sha": "bdea19107847c4597b7ab648a6873902c8551dcd"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGU1ODZhNWM0MTg0NmY3YTVlNmJhZGUyYTAyY2M5ZmE0YTI4ZTk3ZDc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e586a5c41846f7a5e6bade2a02cc9fa4a28e97d7",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e586a5c41846f7a5e6bade2a02cc9fa4a28e97d7",
      "tree": {
        "sha": "f470764271f7a8db8a4165e11c1e267b1bcda7a1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f470764271f7a8db8a4165e11c1e267b1bcda7a1"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bdea19107847c4597b7ab648a6873902c8551dcd",
          "sha": "bdea19107847c4597b7ab648a6873902c8551dcd",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/bdea19107847c4597b7ab648a6873902c8551dcd"
        }
      ],
      "message": "Eliminate need for ancestors in PackageV3Checks\n\nTO DO: Rewrite unit tests for PV3C to not lie about mempool parents, so that we\ncan push down the parent calculation into v3_policy from validation.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2024-04-16T22:11:41Z"
      },
      "sha": "e586a5c41846f7a5e6bade2a02cc9fa4a28e97d7"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGE1YjczZWM3MzJiMjU1MGIwZDJmNWVjN2ZjN2I3NmRmM2RhMmQ2ZWY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a5b73ec732b2550b0d2f5ec7fc7b76df3da2d6ef",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a5b73ec732b2550b0d2f5ec7fc7b76df3da2d6ef",
      "tree": {
        "sha": "f4719caa99fb5d18daf25d1ae775e08e70d34a80",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f4719caa99fb5d18daf25d1ae775e08e70d34a80"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e586a5c41846f7a5e6bade2a02cc9fa4a28e97d7",
          "sha": "e586a5c41846f7a5e6bade2a02cc9fa4a28e97d7",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e586a5c41846f7a5e6bade2a02cc9fa4a28e97d7"
        }
      ],
      "message": "Don't calculate ancestors except for RBF transactions",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2024-04-16T22:27:45Z"
      },
      "sha": "a5b73ec732b2550b0d2f5ec7fc7b76df3da2d6ef"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGYzOWY2OGQ2ZjdkOGM3MmE4NmMyMTBjMDM3NWVkM2U2NTgyOTRkODk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f39f68d6f7d8c72a86c210c0375ed3e658294d89",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f39f68d6f7d8c72a86c210c0375ed3e658294d89",
      "tree": {
        "sha": "f4719caa99fb5d18daf25d1ae775e08e70d34a80",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f4719caa99fb5d18daf25d1ae775e08e70d34a80"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a5b73ec732b2550b0d2f5ec7fc7b76df3da2d6ef",
          "sha": "a5b73ec732b2550b0d2f5ec7fc7b76df3da2d6ef",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a5b73ec732b2550b0d2f5ec7fc7b76df3da2d6ef"
        }
      ],
      "message": "==== END OPTIMIZATIONS ====",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-17T15:37:08Z"
      },
      "sha": "f39f68d6f7d8c72a86c210c0375ed3e658294d89"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDA4MTY3MzI1N2IyYzc5NTFkMjRiNjc0MzkzMDViNDg0MDhjYTdjMDc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/081673257b2c7951d24b67439305b48408ca7c07",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/081673257b2c7951d24b67439305b48408ca7c07",
      "tree": {
        "sha": "f4719caa99fb5d18daf25d1ae775e08e70d34a80",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f4719caa99fb5d18daf25d1ae775e08e70d34a80"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f39f68d6f7d8c72a86c210c0375ed3e658294d89",
          "sha": "f39f68d6f7d8c72a86c210c0375ed3e658294d89",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f39f68d6f7d8c72a86c210c0375ed3e658294d89"
        }
      ],
      "message": "==== BEGIN TESTS ====",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-17T15:37:15Z"
      },
      "sha": "081673257b2c7951d24b67439305b48408ca7c07"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGFiZDA0ZTM3YTgwZWQ3NWY4YWEzNzlhZDFmYTI0Y2E4ZjY0YjRlYWI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/abd04e37a80ed75f8aa379ad1fa24ca8f64b4eab",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/abd04e37a80ed75f8aa379ad1fa24ca8f64b4eab",
      "tree": {
        "sha": "49eefad47efa9d83f5ca6433f2cc2c44e217d489",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/49eefad47efa9d83f5ca6433f2cc2c44e217d489"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/081673257b2c7951d24b67439305b48408ca7c07",
          "sha": "081673257b2c7951d24b67439305b48408ca7c07",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/081673257b2c7951d24b67439305b48408ca7c07"
        }
      ],
      "message": "bench: add more mempool benchmarks\n\nAdd benchmarks for:\n\n  - mempool update time when blocks are found\n  - adding a transaction\n  - performing the mempool's RBF calculation\n  - calculating mempool ancestors/descendants",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-11T15:34:16Z"
      },
      "sha": "abd04e37a80ed75f8aa379ad1fa24ca8f64b4eab"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDJkZTNjMTY2NDY5NGM5NjRjOWU3NTAxYTJjZDRhNzIxM2I5MmQyYmY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2de3c1664694c964c9e7501a2cd4a7213b92d2bf",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2de3c1664694c964c9e7501a2cd4a7213b92d2bf",
      "tree": {
        "sha": "64ac92a20a404f664a92fc15dc9d76ed251fd49d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/64ac92a20a404f664a92fc15dc9d76ed251fd49d"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/abd04e37a80ed75f8aa379ad1fa24ca8f64b4eab",
          "sha": "abd04e37a80ed75f8aa379ad1fa24ca8f64b4eab",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/abd04e37a80ed75f8aa379ad1fa24ca8f64b4eab"
        }
      ],
      "message": "fuzz: try to add more code coverage for mempool fuzzing\n\nIncluding test coverage for mempool eviction and expiry",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2023-10-12T14:48:55Z"
      },
      "sha": "2de3c1664694c964c9e7501a2cd4a7213b92d2bf"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGUwNzc1MDRiNjM3ZjNmYmVmZGQxZmU1ODFlNDg3MTU2ZTc0Nzg1MjQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e077504b637f3fbefdd1fe581e487156e7478524",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e077504b637f3fbefdd1fe581e487156e7478524",
      "tree": {
        "sha": "d547dd7aa1755f8fc4d6c593d29a4b06b428d40e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d547dd7aa1755f8fc4d6c593d29a4b06b428d40e"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2de3c1664694c964c9e7501a2cd4a7213b92d2bf",
          "sha": "2de3c1664694c964c9e7501a2cd4a7213b92d2bf",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2de3c1664694c964c9e7501a2cd4a7213b92d2bf"
        }
      ],
      "message": "Pass through cluster size limits to TxGraph::check()",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-01-29T16:47:02Z"
      },
      "sha": "e077504b637f3fbefdd1fe581e487156e7478524"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGNiOWJjZTM4MTRmNzIzZGRmM2I1Zjc2OTJiNGY5NDJjMDI0MGExMTI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cb9bce3814f723ddf3b5f7692b4f942c0240a112",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/cb9bce3814f723ddf3b5f7692b4f942c0240a112",
      "tree": {
        "sha": "e362439013fc7343250710d31252e62f81a38202",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e362439013fc7343250710d31252e62f81a38202"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e077504b637f3fbefdd1fe581e487156e7478524",
          "sha": "e077504b637f3fbefdd1fe581e487156e7478524",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e077504b637f3fbefdd1fe581e487156e7478524"
        }
      ],
      "message": "Expose cluster information via rpc",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-04-19T21:12:04Z"
      },
      "sha": "cb9bce3814f723ddf3b5f7692b4f942c0240a112"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGVhZjJhMzU1ODZhZTgzZThmNmI5ODkxOWJhMjM1Yzk2ZmNlNzkyNDM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/eaf2a35586ae83e8f6b98919ba235c96fce79243",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/eaf2a35586ae83e8f6b98919ba235c96fce79243",
      "tree": {
        "sha": "63a649b4d92e4c110831ea7c66e78aa8cc338504",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/63a649b4d92e4c110831ea7c66e78aa8cc338504"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cb9bce3814f723ddf3b5f7692b4f942c0240a112",
          "sha": "cb9bce3814f723ddf3b5f7692b4f942c0240a112",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/cb9bce3814f723ddf3b5f7692b4f942c0240a112"
        }
      ],
      "message": "doc: Update mempool_replacements.md to reflect feerate diagram checks",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-04-24T23:52:18Z"
      },
      "sha": "eaf2a35586ae83e8f6b98919ba235c96fce79243"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGRkYjY1ODFjMDZmZDA0YzZlMmYyNTZjY2Q3ZDhjNmUzMjA5NjA0YWY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ddb6581c06fd04c6e2f256ccd7d8c6e3209604af",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ddb6581c06fd04c6e2f256ccd7d8c6e3209604af",
      "tree": {
        "sha": "05cb4444a5fca0072c11ba824ea8c509b87eb0e2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/05cb4444a5fca0072c11ba824ea8c509b87eb0e2"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/eaf2a35586ae83e8f6b98919ba235c96fce79243",
          "sha": "eaf2a35586ae83e8f6b98919ba235c96fce79243",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/eaf2a35586ae83e8f6b98919ba235c96fce79243"
        }
      ],
      "message": "test: add functional test for new cluster mempool RPCs",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-04-27T13:31:59Z"
      },
      "sha": "ddb6581c06fd04c6e2f256ccd7d8c6e3209604af"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDcxZTIxODdlYWNmYmNhYTRiYzk2YjYxNzkzMzZkMjY1ZTE3NzE0NDg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/71e2187eacfbcaa4bc96b6179336d265e1771448",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/71e2187eacfbcaa4bc96b6179336d265e1771448",
      "tree": {
        "sha": "0b43ed5cfebea5aa5cb73b06ef1e0b17e19ca1da",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0b43ed5cfebea5aa5cb73b06ef1e0b17e19ca1da"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ddb6581c06fd04c6e2f256ccd7d8c6e3209604af",
          "sha": "ddb6581c06fd04c6e2f256ccd7d8c6e3209604af",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ddb6581c06fd04c6e2f256ccd7d8c6e3209604af"
        }
      ],
      "message": "fuzz: remove comparison between mini_miner block construction and miner\n\nThis is in preparation for eliminating the block template building happening in\nmini_miner, in favor of directly using the linearizations done in the mempool.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-18T15:32:23Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-04-28T11:34:48Z"
      },
      "sha": "71e2187eacfbcaa4bc96b6179336d265e1771448"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13203079578,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAMS9wGa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13203079578",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-18T15:32:45Z"
    },
    {
      "event": "unlabeled",
      "id": 13203727096,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAAMTAOL4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13203727096",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-18T16:23:46Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 13205955910,
      "node_id": "LE_lADOABII5850QVJBzwAAAAMTIuVG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13205955910",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-18T20:03:13Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2176868650,
      "node_id": "IC_kwDOABII586BwGEq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2176868650",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-18T20:03:14Z",
      "updated_at": "2024-06-18T20:03:14Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n\n At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/26377000968</sub>",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-2176868650",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "comment_deleted",
      "id": 13206111286,
      "node_id": "CDE_lADOABII5850QVJBzwAAAAMTJUQ2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13206111286",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-18T20:18:42Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1364398135",
      "pull_request_review_id": 1685916441,
      "id": 1364398135,
      "node_id": "PRRC_kwDOABII585RUxA3",
      "diff_hunk": "@@ -18,14 +18,7 @@ other consensus and policy rules, each of the following conditions are met:\n    Use the (`-mempoolfullrbf`) configuration option to allow transaction replacement without enforcement of the\n    opt-in signaling rule.\n \n-2. The replacement transaction only include an unconfirmed input if that input was included in\n-   one of the directly conflicting transactions. An unconfirmed input spends an output from a\n-   currently-unconfirmed transaction.\n-\n-   *Rationale*: When RBF was originally implemented, the mempool did not keep track of\n-   ancestor feerates yet. This rule was suggested as a temporary restriction.\n-\n-3. The replacement transaction pays an absolute fee of at least the sum paid by the original",
      "path": "doc/policy/mempool-replacements.md",
      "position": 12,
      "original_position": 11,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "b0f771bb559f38ea16a8f4d13110e2247ac080b9",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "might be easier to just \"strike out\" this rule and mark it deprecated instead of changing numbers since that's become engineer lingo",
      "created_at": "2023-10-18T19:11:00Z",
      "updated_at": "2023-10-24T18:23:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1364398135",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1364398135"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 29,
      "original_line": 29,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1365716769",
      "pull_request_review_id": 1685916441,
      "id": 1365716769,
      "node_id": "PRRC_kwDOABII585RZy8h",
      "diff_hunk": "@@ -684,6 +830,19 @@ UniValue MempoolInfoToJSON(const CTxMemPool& pool)\n     ret.pushKV(\"incrementalrelayfee\", ValueFromAmount(pool.m_incremental_relay_feerate.GetFeePerK()));\n     ret.pushKV(\"unbroadcastcount\", uint64_t{pool.GetUnbroadcastTxs().size()});\n     ret.pushKV(\"fullrbf\", pool.m_full_rbf);\n+    ret.pushKV(\"numberofclusters\", pool.m_cluster_map.size());\n+    int64_t max_cluster_count = 1;",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 283,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "3a42ba255a73e609ac37eee8288208fa43953779",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "shouldn't this be 0?",
      "created_at": "2023-10-19T15:13:12Z",
      "updated_at": "2023-10-24T18:23:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1365716769",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1365716769"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 844,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1365753481",
      "pull_request_review_id": 1685916441,
      "id": 1365753481,
      "node_id": "PRRC_kwDOABII585RZ76J",
      "diff_hunk": "@@ -60,57 +59,26 @@ std::optional<std::string> GetEntriesForConflicts(const CTransaction& tx,\n {\n     AssertLockHeld(pool.cs);\n     const uint256 txid = tx.GetHash();\n-    uint64_t nConflictingCount = 0;\n-    for (const auto& mi : iters_conflicting) {\n-        nConflictingCount += mi->GetCountWithDescendants();\n-        // Rule #5: don't consider replacing more than MAX_REPLACEMENT_CANDIDATES\n-        // entries from the mempool. This potentially overestimates the number of actual\n-        // descendants (i.e. if multiple conflicts share a descendant, it will be counted multiple\n-        // times), but we just want to be conservative to avoid doing too much work.\n-        if (nConflictingCount > MAX_REPLACEMENT_CANDIDATES) {\n-            return strprintf(\"rejecting replacement %s; too many potential replacements (%d > %d)\\n\",\n-                             txid.ToString(),\n-                             nConflictingCount,\n-                             MAX_REPLACEMENT_CANDIDATES);\n-        }\n-    }\n     // Calculate the set of all transactions that would have to be evicted.\n     for (CTxMemPool::txiter it : iters_conflicting) {\n-        pool.CalculateDescendants(it, all_conflicts);\n-    }\n-    return std::nullopt;\n-}\n-\n-std::optional<std::string> HasNoNewUnconfirmed(const CTransaction& tx,\n-                                               const CTxMemPool& pool,\n-                                               const CTxMemPool::setEntries& iters_conflicting)\n-{\n-    AssertLockHeld(pool.cs);\n-    std::set<uint256> parents_of_conflicts;\n-    for (const auto& mi : iters_conflicting) {\n-        for (const CTxIn& txin : mi->GetTx().vin) {\n-            parents_of_conflicts.insert(txin.prevout.hash);\n+        // Exit early if we're going to fail (see below)\n+        if (all_conflicts.size() > MAX_REPLACEMENT_CANDIDATES) {",
      "path": "src/policy/rbf.cpp",
      "position": null,
      "original_position": 45,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "3a42ba255a73e609ac37eee8288208fa43953779",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Note: this is sticking with the same rule#5 instead of number of effected clusters. It would be more ideal if it were number of clusters to allow for better usage of adversarial-ish batched CPFPs",
      "created_at": "2023-10-19T15:40:30Z",
      "updated_at": "2023-10-24T18:23:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1365753481",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1365753481"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 65,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1366095113",
      "pull_request_review_id": 1685916441,
      "id": 1366095113,
      "node_id": "PRRC_kwDOABII585RbPUJ",
      "diff_hunk": "@@ -876,75 +880,8 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n \n     ws.m_iters_conflicting = m_pool.GetIterSet(ws.m_conflicts);\n \n-    // Note that these modifications are only applicable to single transaction scenarios;\n-    // carve-outs and package RBF are disabled for multi-transaction evaluations.\n-    CTxMemPool::Limits maybe_rbf_limits = m_pool.m_limits;\n-\n-    // Calculate in-mempool ancestors, up to a limit.\n-    if (ws.m_conflicts.size() == 1) {\n-        // In general, when we receive an RBF transaction with mempool conflicts, we want to know whether we\n-        // would meet the chain limits after the conflicts have been removed. However, there isn't a practical\n-        // way to do this short of calculating the ancestor and descendant sets with an overlay cache of\n-        // changed mempool entries. Due to both implementation and runtime complexity concerns, this isn't\n-        // very realistic, thus we only ensure a limited set of transactions are RBF'able despite mempool\n-        // conflicts here. Importantly, we need to ensure that some transactions which were accepted using\n-        // the below carve-out are able to be RBF'ed, without impacting the security the carve-out provides\n-        // for off-chain contract systems (see link in the comment below).\n-        //\n-        // Specifically, the subset of RBF transactions which we allow despite chain limits are those which\n-        // conflict directly with exactly one other transaction (but may evict children of said transaction),\n-        // and which are not adding any new mempool dependencies. Note that the \"no new mempool dependencies\"\n-        // check is accomplished later, so we don't bother doing anything about it here, but if our\n-        // policy changes, we may need to move that check to here instead of removing it wholesale.\n-        //\n-        // Such transactions are clearly not merging any existing packages, so we are only concerned with\n-        // ensuring that (a) no package is growing past the package size (not count) limits and (b) we are\n-        // not allowing something to effectively use the (below) carve-out spot when it shouldn't be allowed\n-        // to.\n-        //\n-        // To check these we first check if we meet the RBF criteria, above, and increment the descendant\n-        // limits by the direct conflict and its descendants (as these are recalculated in\n-        // CalculateMempoolAncestors by assuming the new transaction being added is a new descendant, with no\n-        // removals, of each parent's existing dependent set). The ancestor count limits are unmodified (as\n-        // the ancestor limits should be the same for both our new transaction and any conflicts).\n-        // We don't bother incrementing m_limit_descendants by the full removal count as that limit never comes\n-        // into force here (as we're only adding a single transaction).\n-        assert(ws.m_iters_conflicting.size() == 1);\n-        CTxMemPool::txiter conflict = *ws.m_iters_conflicting.begin();\n-\n-        maybe_rbf_limits.descendant_count += 1;\n-        maybe_rbf_limits.descendant_size_vbytes += conflict->GetSizeWithDescendants();\n-    }\n-\n-    auto ancestors{m_pool.CalculateMemPoolAncestors(*entry, maybe_rbf_limits)};\n-    if (!ancestors) {\n-        // If CalculateMemPoolAncestors fails second time, we want the original error string.\n-        // Contracting/payment channels CPFP carve-out:\n-        // If the new transaction is relatively small (up to 40k weight)\n-        // and has at most one ancestor (ie ancestor limit of 2, including\n-        // the new transaction), allow it if its parent has exactly the\n-        // descendant limit descendants.\n-        //\n-        // This allows protocols which rely on distrusting counterparties\n-        // being able to broadcast descendants of an unconfirmed transaction\n-        // to be secure by simply only having two immediately-spendable\n-        // outputs - one for each counterparty. For more info on the uses for\n-        // this, see https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2018-November/016518.html\n-        CTxMemPool::Limits cpfp_carve_out_limits{\n-            .ancestor_count = 2,\n-            .ancestor_size_vbytes = maybe_rbf_limits.ancestor_size_vbytes,\n-            .descendant_count = maybe_rbf_limits.descendant_count + 1,\n-            .descendant_size_vbytes = maybe_rbf_limits.descendant_size_vbytes + EXTRA_DESCENDANT_TX_SIZE_LIMIT,\n-        };\n-        const auto error_message{util::ErrorString(ancestors).original};\n-        if (ws.m_vsize > EXTRA_DESCENDANT_TX_SIZE_LIMIT) {\n-            return state.Invalid(TxValidationResult::TX_MEMPOOL_POLICY, \"too-long-mempool-chain\", error_message);\n-        }\n-        ancestors = m_pool.CalculateMemPoolAncestors(*entry, cpfp_carve_out_limits);\n-        if (!ancestors) return state.Invalid(TxValidationResult::TX_MEMPOOL_POLICY, \"too-long-mempool-chain\", error_message);\n-    }\n-\n-    ws.m_ancestors = *ancestors;\n+    // Calculate in-mempool ancestors",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 84,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "c5d3c42da466feca9192d0e389654ba55caec5a6",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "the check two conditionals above:\r\n\r\n```\r\nif (!bypass_limits && ws.m_modified_fees < m_pool.m_min_relay_feerate.GetFee(ws.m_vsize))\r\n```\r\n\r\nThis is still needed for the same reason as before: transaction that is above minrelay, but would be in a chunk below minrelay. We could immediately evict below minrelay chunks post-re-linearization f.e. which would allow 0-fee parents then relax this maybe.\r\n\r\n",
      "created_at": "2023-10-19T20:48:36Z",
      "updated_at": "2023-10-24T18:23:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1366095113",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1366095113"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 896,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1366105725",
      "pull_request_review_id": 1685916441,
      "id": 1366105725,
      "node_id": "PRRC_kwDOABII585RbR59",
      "diff_hunk": "@@ -83,26 +86,104 @@ static std::vector<CTransactionRef> CreateOrderedCoins(FastRandomContext& det_ra\n     return ordered_coins;\n }\n \n+static void MemPoolAddTransactions(benchmark::Bench& bench)\n+{\n+    FastRandomContext det_rand{true};\n+    int childTxs = 90;\n+    if (bench.complexityN() > 1) {\n+        childTxs = static_cast<int>(bench.complexityN());\n+    }\n+    const auto testing_setup = MakeNoLogFileContext<const TestingSetup>(ChainType::MAIN);\n+    CTxMemPool& pool = *testing_setup.get()->m_node.mempool;\n+\n+    std::vector<CTransactionRef> transactions;\n+    // Create 1000 clusters of 100 transactions each",
      "path": "src/bench/mempool_stress.cpp",
      "position": 53,
      "original_position": 54,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "c5d3c42da466feca9192d0e389654ba55caec5a6",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "numbers in comments are off\r\n\r\nshower thought: Should we/can we bound the number of clusters in addition to total memory in TrimToSize? I can't think of a good way to do that that doesn't complicate things quite a bit, and perhaps practical mempool sizes make this moot. Just something to consider in case I missed something obvious.",
      "created_at": "2023-10-19T21:01:05Z",
      "updated_at": "2023-10-24T18:23:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1366105725",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1366105725"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 99,
      "original_line": 99,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1367425942",
      "pull_request_review_id": 1685916441,
      "id": 1367425942,
      "node_id": "PRRC_kwDOABII585RgUOW",
      "diff_hunk": "@@ -1135,29 +1457,67 @@ void CTxMemPool::TrimToSize(size_t sizelimit, std::vector<COutPoint>* pvNoSpends\n \n     unsigned nTxnRemoved = 0;\n     CFeeRate maxFeeRateRemoved(0);\n+\n+    // Use a heap to determine which chunks to evict, but only make the heap if\n+    // we're actually above the size limit.\n+    std::vector<Cluster::HeapEntry> heap_chunks;\n+    std::set<Cluster*> clusters_with_evictions;\n     while (!mapTx.empty() && DynamicMemoryUsage() > sizelimit) {\n-        indexed_transaction_set::index<descendant_score>::type::iterator it = mapTx.get<descendant_score>().begin();\n+        if (heap_chunks.empty()) {\n+            for (const auto & [id, cluster] : m_cluster_map) {\n+                if (!cluster->m_chunks.empty()) {\n+                    heap_chunks.emplace_back(cluster->m_chunks.end()-1, cluster.get());\n+                }\n+            }\n+        }\n+\n+        // Define comparison operator on our heap entries (using feerate of chunks).\n+        auto cmp = [](const Cluster::HeapEntry& a, const Cluster::HeapEntry& b) {\n+            // TODO: branch on size of fee to do this as 32-bit calculation\n+            // instead? etc\n+            return a.first->fee*b.first->size > b.first->fee*a.first->size;\n+        };\n+\n+        std::make_heap(heap_chunks.begin(), heap_chunks.end(), cmp);",
      "path": "src/txmempool.cpp",
      "position": null,
      "original_position": 1421,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "26e831d5f2c7db15e7a50f910ddf4e1737d226da",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "You probably didn't mean to call make_heap in the loop for 3N work each time. fwiw I don't see any performance difference between `push_heap`ing all the elements on vs one `make_heap`.\r\n\r\nonce this is changed, add+trimming seems to be faster than in master regardless of topology tested",
      "created_at": "2023-10-20T19:39:27Z",
      "updated_at": "2023-10-24T18:23:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1367425942",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1367425942"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1481,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1367430770",
      "pull_request_review_id": 1685916441,
      "id": 1367430770,
      "node_id": "PRRC_kwDOABII585RgVZy",
      "diff_hunk": "@@ -210,183 +194,84 @@ bool BlockAssembler::TestPackage(uint64_t packageSize, int64_t packageSigOpsCost\n \n // Perform transaction-level checks before adding to block:\n // - transaction finality (locktime)\n-bool BlockAssembler::TestPackageTransactions(const CTxMemPool::setEntries& package) const\n+bool BlockAssembler::TestPackageTransactions(const std::list<CTxMemPoolEntry::CTxMemPoolEntryRef>& txs) const\n {\n-    for (CTxMemPool::txiter it : package) {\n-        if (!IsFinalTx(it->GetTx(), nHeight, m_lock_time_cutoff)) {\n+    for (auto tx : txs) {\n+        if (!IsFinalTx(tx.get().GetTx(), nHeight, m_lock_time_cutoff)) {\n             return false;\n         }\n     }\n     return true;\n }\n \n-void BlockAssembler::AddToBlock(CTxMemPool::txiter iter)\n+void BlockAssembler::AddToBlock(const CTxMemPoolEntry& entry)\n {\n-    pblocktemplate->block.vtx.emplace_back(iter->GetSharedTx());\n-    pblocktemplate->vTxFees.push_back(iter->GetFee());\n-    pblocktemplate->vTxSigOpsCost.push_back(iter->GetSigOpCost());\n-    nBlockWeight += iter->GetTxWeight();\n+    pblocktemplate->block.vtx.emplace_back(entry.GetSharedTx());\n+    pblocktemplate->vTxFees.push_back(entry.GetFee());\n+    pblocktemplate->vTxSigOpsCost.push_back(entry.GetSigOpCost());\n+    nBlockWeight += entry.GetTxWeight();\n     ++nBlockTx;\n-    nBlockSigOpsCost += iter->GetSigOpCost();\n-    nFees += iter->GetFee();\n-    inBlock.insert(iter);\n+    nBlockSigOpsCost += entry.GetSigOpCost();\n+    nFees += entry.GetFee();\n \n     bool fPrintPriority = gArgs.GetBoolArg(\"-printpriority\", DEFAULT_PRINTPRIORITY);\n     if (fPrintPriority) {\n         LogPrintf(\"fee rate %s txid %s\\n\",\n-                  CFeeRate(iter->GetModifiedFee(), iter->GetTxSize()).ToString(),\n-                  iter->GetTx().GetHash().ToString());\n+                  CFeeRate(entry.GetModifiedFee(), entry.GetTxSize()).ToString(),\n+                  entry.GetTx().GetHash().ToString());\n     }\n }\n \n-/** Add descendants of given transactions to mapModifiedTx with ancestor\n- * state updated assuming given transactions are inBlock. Returns number\n- * of updated descendants. */\n-static int UpdatePackagesForAdded(const CTxMemPool& mempool,\n-                                  const CTxMemPool::setEntries& alreadyAdded,\n-                                  indexed_modified_transaction_set& mapModifiedTx) EXCLUSIVE_LOCKS_REQUIRED(mempool.cs)\n+void BlockAssembler::addChunks(const CTxMemPool& mempool)\n {\n     AssertLockHeld(mempool.cs);\n-\n-    int nDescendantsUpdated = 0;\n-    for (CTxMemPool::txiter it : alreadyAdded) {\n-        CTxMemPool::setEntries descendants;\n-        mempool.CalculateDescendants(it, descendants);\n-        // Insert all descendants (not yet in block) into the modified set\n-        for (CTxMemPool::txiter desc : descendants) {\n-            if (alreadyAdded.count(desc)) {\n-                continue;\n-            }\n-            ++nDescendantsUpdated;\n-            modtxiter mit = mapModifiedTx.find(desc);\n-            if (mit == mapModifiedTx.end()) {\n-                CTxMemPoolModifiedEntry modEntry(desc);\n-                mit = mapModifiedTx.insert(modEntry).first;\n-            }\n-            mapModifiedTx.modify(mit, update_for_parent_inclusion(it));\n-        }\n-    }\n-    return nDescendantsUpdated;\n-}\n-\n-void BlockAssembler::SortForBlock(const CTxMemPool::setEntries& package, std::vector<CTxMemPool::txiter>& sortedEntries)\n-{\n-    // Sort package by ancestor count\n-    // If a transaction A depends on transaction B, then A's ancestor count\n-    // must be greater than B's.  So this is sufficient to validly order the\n-    // transactions for block inclusion.\n-    sortedEntries.clear();\n-    sortedEntries.insert(sortedEntries.begin(), package.begin(), package.end());\n-    std::sort(sortedEntries.begin(), sortedEntries.end(), CompareTxIterByAncestorCount());\n-}\n-\n-// This transaction selection algorithm orders the mempool based\n-// on feerate of a transaction including all unconfirmed ancestors.\n-// Since we don't remove transactions from the mempool as we select them\n-// for block inclusion, we need an alternate method of updating the feerate\n-// of a transaction with its not-yet-selected ancestors as we go.\n-// This is accomplished by walking the in-mempool descendants of selected\n-// transactions and storing a temporary modified state in mapModifiedTxs.\n-// Each time through the loop, we compare the best transaction in\n-// mapModifiedTxs with the next transaction in the mempool to decide what\n-// transaction package to work on next.\n-void BlockAssembler::addPackageTxs(const CTxMemPool& mempool, int& nPackagesSelected, int& nDescendantsUpdated)\n-{\n-    AssertLockHeld(mempool.cs);\n-\n-    // mapModifiedTx will store sorted packages after they are modified\n-    // because some of their txs are already in the block\n-    indexed_modified_transaction_set mapModifiedTx;\n-    // Keep track of entries that failed inclusion, to avoid duplicate work\n-    CTxMemPool::setEntries failedTx;\n-\n-    CTxMemPool::indexed_transaction_set::index<ancestor_score>::type::iterator mi = mempool.mapTx.get<ancestor_score>().begin();\n-    CTxMemPool::txiter iter;\n-\n     // Limit the number of attempts to add transactions to the block when it is\n     // close to full; this is just a simple heuristic to finish quickly if the\n     // mempool has a lot of entries.\n     const int64_t MAX_CONSECUTIVE_FAILURES = 1000;\n     int64_t nConsecutiveFailed = 0;\n \n-    while (mi != mempool.mapTx.get<ancestor_score>().end() || !mapModifiedTx.empty()) {\n-        // First try to find a new transaction in mapTx to evaluate.\n-        //\n-        // Skip entries in mapTx that are already in a block or are present\n-        // in mapModifiedTx (which implies that the mapTx ancestor state is\n-        // stale due to ancestor inclusion in the block)\n-        // Also skip transactions that we've already failed to add. This can happen if\n-        // we consider a transaction in mapModifiedTx and it fails: we can then\n-        // potentially consider it again while walking mapTx.  It's currently\n-        // guaranteed to fail again, but as a belt-and-suspenders check we put it in\n-        // failedTx and avoid re-evaluation, since the re-evaluation would be using\n-        // cached size/sigops/fee values that are not actually correct.\n-        /** Return true if given transaction from mapTx has already been evaluated,\n-         * or if the transaction's cached data in mapTx is incorrect. */\n-        if (mi != mempool.mapTx.get<ancestor_score>().end()) {\n-            auto it = mempool.mapTx.project<0>(mi);\n-            assert(it != mempool.mapTx.end());\n-            if (mapModifiedTx.count(it) || inBlock.count(it) || failedTx.count(it)) {\n-                ++mi;\n-                continue;\n-            }\n-        }\n-\n-        // Now that mi is not stale, determine which transaction to evaluate:\n-        // the next entry from mapTx, or the best from mapModifiedTx?\n-        bool fUsingModified = false;\n-\n-        modtxscoreiter modit = mapModifiedTx.get<ancestor_score>().begin();\n-        if (mi == mempool.mapTx.get<ancestor_score>().end()) {\n-            // We're out of entries in mapTx; use the entry from mapModifiedTx\n-            iter = modit->iter;\n-            fUsingModified = true;\n-        } else {\n-            // Try to compare the mapTx entry to the mapModifiedTx entry\n-            iter = mempool.mapTx.project<0>(mi);\n-            if (modit != mapModifiedTx.get<ancestor_score>().end() &&\n-                    CompareTxMemPoolEntryByAncestorFee()(*modit, CTxMemPoolModifiedEntry(iter))) {\n-                // The best entry in mapModifiedTx has higher score\n-                // than the one from mapTx.\n-                // Switch which transaction (package) to consider\n-                iter = modit->iter;\n-                fUsingModified = true;\n-            } else {\n-                // Either no entry in mapModifiedTx, or it's worse than mapTx.\n-                // Increment mi for the next loop iteration.\n-                ++mi;\n-            }\n-        }\n-\n-        // We skip mapTx entries that are inBlock, and mapModifiedTx shouldn't\n-        // contain anything that is inBlock.\n-        assert(!inBlock.count(iter));\n-\n-        uint64_t packageSize = iter->GetSizeWithAncestors();\n-        CAmount packageFees = iter->GetModFeesWithAncestors();\n-        int64_t packageSigOpsCost = iter->GetSigOpCostWithAncestors();\n-        if (fUsingModified) {\n-            packageSize = modit->nSizeWithAncestors;\n-            packageFees = modit->nModFeesWithAncestors;\n-            packageSigOpsCost = modit->nSigOpCostWithAncestors;\n+    std::vector<Cluster::HeapEntry> heap_chunks;\n+    // Initialize the heap with the best entry from each cluster\n+    for (const auto & [id, cluster] : mempool.m_cluster_map) {\n+        if (!cluster->m_chunks.empty()) {\n+            heap_chunks.emplace_back(cluster->m_chunks.begin(), cluster.get());\n         }\n-\n-        if (packageFees < m_options.blockMinFeeRate.GetFee(packageSize)) {\n-            // Everything else we might consider has a lower fee rate\n+    }\n+    // Define comparison operator on our heap entries (using feerate of chunks).\n+    auto cmp = [](const Cluster::HeapEntry& a, const Cluster::HeapEntry& b) {\n+        // TODO: branch on size of fee to do this as 32-bit calculation\n+        // instead? etc\n+        return a.first->fee*b.first->size < b.first->fee*a.first->size;\n+    };\n+    // TODO: replace the heap with a priority queue\n+    std::make_heap(heap_chunks.begin(), heap_chunks.end(), cmp);",
      "path": "src/node/miner.cpp",
      "position": null,
      "original_position": 244,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "26e831d5f2c7db15e7a50f910ddf4e1737d226da",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "don't ask why but I'm getting significant performance improvement(>10%) just `push_heap`ing everything from scratch, and similarly with priority_queue",
      "created_at": "2023-10-20T19:46:25Z",
      "updated_at": "2023-10-24T18:23:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1367430770",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1367430770"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 248,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1370716238",
      "pull_request_review_id": 1695722724,
      "id": 1370716238,
      "node_id": "PRRC_kwDOABII585Rs3hO",
      "diff_hunk": "@@ -83,26 +86,104 @@ static std::vector<CTransactionRef> CreateOrderedCoins(FastRandomContext& det_ra\n     return ordered_coins;\n }\n \n+static void MemPoolAddTransactions(benchmark::Bench& bench)\n+{\n+    FastRandomContext det_rand{true};\n+    int childTxs = 90;\n+    if (bench.complexityN() > 1) {\n+        childTxs = static_cast<int>(bench.complexityN());\n+    }\n+    const auto testing_setup = MakeNoLogFileContext<const TestingSetup>(ChainType::MAIN);\n+    CTxMemPool& pool = *testing_setup.get()->m_node.mempool;\n+\n+    std::vector<CTransactionRef> transactions;\n+    // Create 1000 clusters of 100 transactions each",
      "path": "src/bench/mempool_stress.cpp",
      "position": 53,
      "original_position": 54,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "c5d3c42da466feca9192d0e389654ba55caec5a6",
      "in_reply_to_id": 1366105725,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "The immediate downside to a cap on number of clusters is that singleton, high-feerate transactions would not be accepted.  And I don't think we need to -- the only places where having more clusters makes us slower is in eviction and mining, and for both of those use cases we could improve performance (if we need to) by maintaining the relevant heap data structures (or something equivalent) as chunks are modified, rather than all at once. \r\n\r\nFor now in this branch I've created these from scratch each time, but if it turns out that performance is meaningfully impacted when the mempool is busy, then I can optimize this further by just using a bit more memory.",
      "created_at": "2023-10-24T19:24:39Z",
      "updated_at": "2023-10-24T19:24:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1370716238",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1370716238"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 99,
      "original_line": 99,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371708009",
      "pull_request_review_id": 1697257034,
      "id": 1371708009,
      "node_id": "PRRC_kwDOABII585Rwppp",
      "diff_hunk": "@@ -60,57 +59,26 @@ std::optional<std::string> GetEntriesForConflicts(const CTransaction& tx,\n {\n     AssertLockHeld(pool.cs);\n     const uint256 txid = tx.GetHash();\n-    uint64_t nConflictingCount = 0;\n-    for (const auto& mi : iters_conflicting) {\n-        nConflictingCount += mi->GetCountWithDescendants();\n-        // Rule #5: don't consider replacing more than MAX_REPLACEMENT_CANDIDATES\n-        // entries from the mempool. This potentially overestimates the number of actual\n-        // descendants (i.e. if multiple conflicts share a descendant, it will be counted multiple\n-        // times), but we just want to be conservative to avoid doing too much work.\n-        if (nConflictingCount > MAX_REPLACEMENT_CANDIDATES) {\n-            return strprintf(\"rejecting replacement %s; too many potential replacements (%d > %d)\\n\",\n-                             txid.ToString(),\n-                             nConflictingCount,\n-                             MAX_REPLACEMENT_CANDIDATES);\n-        }\n-    }\n     // Calculate the set of all transactions that would have to be evicted.\n     for (CTxMemPool::txiter it : iters_conflicting) {\n-        pool.CalculateDescendants(it, all_conflicts);\n-    }\n-    return std::nullopt;\n-}\n-\n-std::optional<std::string> HasNoNewUnconfirmed(const CTransaction& tx,\n-                                               const CTxMemPool& pool,\n-                                               const CTxMemPool::setEntries& iters_conflicting)\n-{\n-    AssertLockHeld(pool.cs);\n-    std::set<uint256> parents_of_conflicts;\n-    for (const auto& mi : iters_conflicting) {\n-        for (const CTxIn& txin : mi->GetTx().vin) {\n-            parents_of_conflicts.insert(txin.prevout.hash);\n+        // Exit early if we're going to fail (see below)\n+        if (all_conflicts.size() > MAX_REPLACEMENT_CANDIDATES) {",
      "path": "src/policy/rbf.cpp",
      "position": null,
      "original_position": 45,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "3a42ba255a73e609ac37eee8288208fa43953779",
      "in_reply_to_id": 1365753481,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "There is room to relax this rule some, so if this is important we can do so. I think the requirement is a bound on the number of clusters that would have to be re-sorted in order to accept the new transaction.  We can approximate that as the number of clusters that would be non-empty as a result of removing all the conflicting transactions from the mempool, and only process replacements for which that is below some target.  \r\n\r\nThat would be a more complex logic though, so before implementing it I wanted to have some sense of whether we need to.  Has the historical 100-transaction-conflict limit been problematic for use cases in the past?  Note also that in the new code, we are calculating the number of conflicts exactly (the old code used an approximation, which could be gamed by an adversary).",
      "created_at": "2023-10-25T12:48:09Z",
      "updated_at": "2023-10-25T12:48:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1371708009",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371708009"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 65,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371803601",
      "pull_request_review_id": 1697415470,
      "id": 1371803601,
      "node_id": "PRRC_kwDOABII585RxA_R",
      "diff_hunk": "@@ -60,57 +59,26 @@ std::optional<std::string> GetEntriesForConflicts(const CTransaction& tx,\n {\n     AssertLockHeld(pool.cs);\n     const uint256 txid = tx.GetHash();\n-    uint64_t nConflictingCount = 0;\n-    for (const auto& mi : iters_conflicting) {\n-        nConflictingCount += mi->GetCountWithDescendants();\n-        // Rule #5: don't consider replacing more than MAX_REPLACEMENT_CANDIDATES\n-        // entries from the mempool. This potentially overestimates the number of actual\n-        // descendants (i.e. if multiple conflicts share a descendant, it will be counted multiple\n-        // times), but we just want to be conservative to avoid doing too much work.\n-        if (nConflictingCount > MAX_REPLACEMENT_CANDIDATES) {\n-            return strprintf(\"rejecting replacement %s; too many potential replacements (%d > %d)\\n\",\n-                             txid.ToString(),\n-                             nConflictingCount,\n-                             MAX_REPLACEMENT_CANDIDATES);\n-        }\n-    }\n     // Calculate the set of all transactions that would have to be evicted.\n     for (CTxMemPool::txiter it : iters_conflicting) {\n-        pool.CalculateDescendants(it, all_conflicts);\n-    }\n-    return std::nullopt;\n-}\n-\n-std::optional<std::string> HasNoNewUnconfirmed(const CTransaction& tx,\n-                                               const CTxMemPool& pool,\n-                                               const CTxMemPool::setEntries& iters_conflicting)\n-{\n-    AssertLockHeld(pool.cs);\n-    std::set<uint256> parents_of_conflicts;\n-    for (const auto& mi : iters_conflicting) {\n-        for (const CTxIn& txin : mi->GetTx().vin) {\n-            parents_of_conflicts.insert(txin.prevout.hash);\n+        // Exit early if we're going to fail (see below)\n+        if (all_conflicts.size() > MAX_REPLACEMENT_CANDIDATES) {",
      "path": "src/policy/rbf.cpp",
      "position": null,
      "original_position": 45,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "3a42ba255a73e609ac37eee8288208fa43953779",
      "in_reply_to_id": 1365753481,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "~~Ah! I wrote a huge response to this, then looked up our previous discussions, and realized I didn't actually read the code: https://github.com/bitcoin/bitcoin/issues/27677#issuecomment-1554708843~~\r\n\r\n~~IIUC now, this is only counting *direct* conflicts, and not the descendants that are booted.~~\r\n\r\n~~I think that's fine.~~\r\n\r\nActually no, the existing code comments were just misleading, looks like the issue still exists, see: https://github.com/bitcoin/bitcoin/issues/27677#issuecomment-1554708843",
      "created_at": "2023-10-25T13:52:53Z",
      "updated_at": "2023-10-25T13:59:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1371803601",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371803601"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 65,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371813655",
      "pull_request_review_id": 1697431678,
      "id": 1371813655,
      "node_id": "PRRC_kwDOABII585RxDcX",
      "diff_hunk": "@@ -60,57 +59,26 @@ std::optional<std::string> GetEntriesForConflicts(const CTransaction& tx,\n {\n     AssertLockHeld(pool.cs);\n     const uint256 txid = tx.GetHash();\n-    uint64_t nConflictingCount = 0;\n-    for (const auto& mi : iters_conflicting) {\n-        nConflictingCount += mi->GetCountWithDescendants();\n-        // Rule #5: don't consider replacing more than MAX_REPLACEMENT_CANDIDATES\n-        // entries from the mempool. This potentially overestimates the number of actual\n-        // descendants (i.e. if multiple conflicts share a descendant, it will be counted multiple\n-        // times), but we just want to be conservative to avoid doing too much work.\n-        if (nConflictingCount > MAX_REPLACEMENT_CANDIDATES) {\n-            return strprintf(\"rejecting replacement %s; too many potential replacements (%d > %d)\\n\",\n-                             txid.ToString(),\n-                             nConflictingCount,\n-                             MAX_REPLACEMENT_CANDIDATES);\n-        }\n-    }\n     // Calculate the set of all transactions that would have to be evicted.\n     for (CTxMemPool::txiter it : iters_conflicting) {\n-        pool.CalculateDescendants(it, all_conflicts);\n-    }\n-    return std::nullopt;\n-}\n-\n-std::optional<std::string> HasNoNewUnconfirmed(const CTransaction& tx,\n-                                               const CTxMemPool& pool,\n-                                               const CTxMemPool::setEntries& iters_conflicting)\n-{\n-    AssertLockHeld(pool.cs);\n-    std::set<uint256> parents_of_conflicts;\n-    for (const auto& mi : iters_conflicting) {\n-        for (const CTxIn& txin : mi->GetTx().vin) {\n-            parents_of_conflicts.insert(txin.prevout.hash);\n+        // Exit early if we're going to fail (see below)\n+        if (all_conflicts.size() > MAX_REPLACEMENT_CANDIDATES) {",
      "path": "src/policy/rbf.cpp",
      "position": null,
      "original_position": 45,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "3a42ba255a73e609ac37eee8288208fa43953779",
      "in_reply_to_id": 1365753481,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ah yes, in the new code I'm only counting direct conflicts right now, because every descendant of a direct conflict must be in the same cluster as that conflict.  So this is already a relaxation of the existing rule.",
      "created_at": "2023-10-25T13:59:21Z",
      "updated_at": "2023-10-25T13:59:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1371813655",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371813655"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 65,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371819952",
      "pull_request_review_id": 1697442366,
      "id": 1371819952,
      "node_id": "PRRC_kwDOABII585RxE-w",
      "diff_hunk": "@@ -60,57 +59,26 @@ std::optional<std::string> GetEntriesForConflicts(const CTransaction& tx,\n {\n     AssertLockHeld(pool.cs);\n     const uint256 txid = tx.GetHash();\n-    uint64_t nConflictingCount = 0;\n-    for (const auto& mi : iters_conflicting) {\n-        nConflictingCount += mi->GetCountWithDescendants();\n-        // Rule #5: don't consider replacing more than MAX_REPLACEMENT_CANDIDATES\n-        // entries from the mempool. This potentially overestimates the number of actual\n-        // descendants (i.e. if multiple conflicts share a descendant, it will be counted multiple\n-        // times), but we just want to be conservative to avoid doing too much work.\n-        if (nConflictingCount > MAX_REPLACEMENT_CANDIDATES) {\n-            return strprintf(\"rejecting replacement %s; too many potential replacements (%d > %d)\\n\",\n-                             txid.ToString(),\n-                             nConflictingCount,\n-                             MAX_REPLACEMENT_CANDIDATES);\n-        }\n-    }\n     // Calculate the set of all transactions that would have to be evicted.\n     for (CTxMemPool::txiter it : iters_conflicting) {\n-        pool.CalculateDescendants(it, all_conflicts);\n-    }\n-    return std::nullopt;\n-}\n-\n-std::optional<std::string> HasNoNewUnconfirmed(const CTransaction& tx,\n-                                               const CTxMemPool& pool,\n-                                               const CTxMemPool::setEntries& iters_conflicting)\n-{\n-    AssertLockHeld(pool.cs);\n-    std::set<uint256> parents_of_conflicts;\n-    for (const auto& mi : iters_conflicting) {\n-        for (const CTxIn& txin : mi->GetTx().vin) {\n-            parents_of_conflicts.insert(txin.prevout.hash);\n+        // Exit early if we're going to fail (see below)\n+        if (all_conflicts.size() > MAX_REPLACEMENT_CANDIDATES) {",
      "path": "src/policy/rbf.cpp",
      "position": null,
      "original_position": 45,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "3a42ba255a73e609ac37eee8288208fa43953779",
      "in_reply_to_id": 1365753481,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> I think the requirement is a bound on the number of clusters that would have to be re-sorted in order to accept the new transaction.\r\n\r\nAs an alternative, we drop the replacement limit to like, 10 or something, and then *only* count the *direct* conflicts, not the direct conflicts and all the descendants?",
      "created_at": "2023-10-25T14:01:44Z",
      "updated_at": "2023-10-25T14:01:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1371819952",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371819952"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 65,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1392325037",
      "pull_request_review_id": 1729366575,
      "id": 1392325037,
      "node_id": "PRRC_kwDOABII585S_TGt",
      "diff_hunk": "@@ -118,5 +199,63 @@ static void MempoolCheck(benchmark::Bench& bench)\n     });\n }\n \n+static void MemPoolMiningScoreCheck(benchmark::Bench& bench)\n+{\n+    // Default test: each cluster is of size 20, and we'll try to RBF with a\n+    // transaction that merges 10 clusters, evicting 10 transactions from each.\n+\n+    FastRandomContext det_rand{true};\n+    int childTxs = 10;\n+    if (bench.complexityN() > 1) {\n+        childTxs = static_cast<int>(bench.complexityN());\n+    }\n+    const auto testing_setup = MakeNoLogFileContext<const TestingSetup>(ChainType::MAIN);\n+    CTxMemPool& pool = *testing_setup.get()->m_node.mempool;\n+\n+    LOCK2(cs_main, pool.cs);\n+\n+    std::vector<CTransactionRef> parent_txs_for_rbf;\n+    std::set<uint256> child_txs_to_conflict_with;\n+\n+    for (int i=0; i<10; i++) {\n+        std::vector<CTransactionRef> transactions = CreateCoinCluster(det_rand, childTxs, /*min_ancestors=*/1);\n+        parent_txs_for_rbf.push_back(transactions[0]);\n+        // Conflict with everything after the first 10 transactions\n+        for (size_t j=10; j<transactions.size(); ++j) {\n+            child_txs_to_conflict_with.insert(transactions[j]->GetHash());\n+        }\n+\n+        // Add all transactions to the mempool.\n+        for (auto& tx : transactions) {\n+            AddTx(tx, pool, det_rand);\n+        }\n+    }\n+\n+    // Construct a transaction that spends from each of the parent transactions\n+    // selected.\n+    CMutableTransaction tx = CMutableTransaction();\n+    tx.vin.resize(10);\n+    for (size_t i=0; i<parent_txs_for_rbf.size(); ++i) {\n+        tx.vin[i].prevout = COutPoint(parent_txs_for_rbf[i]->GetHash(), 0);\n+        tx.vin[i].scriptSig = CScript() << i;\n+    }\n+    tx.vout.resize(1);\n+    for (auto& out : tx.vout) {\n+        out.scriptPubKey = CScript() << CScriptNum(det_rand.randrange(19)+1) << OP_EQUAL;\n+        out.nValue = 10 * COIN;\n+    }\n+\n+    CTxMemPool::setEntries all_conflicts = pool.GetIterSet(child_txs_to_conflict_with);\n+    CTxMemPoolEntry entry(MakeTransactionRef(tx), det_rand.randrange(10000)+1000, 0, 1, 0, false, 4, LockPoints());\n+\n+    bench.run([&]() NO_THREAD_SAFETY_ANALYSIS {\n+        CTxMemPool::Limits limits(pool.m_limits);\n+        pool.CalculateMiningScoreOfReplacementTx(entry, det_rand.randrange(30000)+1000, all_conflicts, limits);\n+    });\n+}\n+\n+BENCHMARK(MemPoolAncestorsDescendants, benchmark::PriorityLevel::HIGH);\n+BENCHMARK(MemPoolAddTransactions, benchmark::PriorityLevel::HIGH);",
      "path": "src/bench/mempool_stress.cpp",
      "position": 220,
      "original_position": 210,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "dd6684ab665bc8ae76b76fdd2e578fc77d562a52",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "dd6684ab665bc8ae76b76fdd2e578fc77d562a52: While you're touching this, can you rename `MempoolCheck` to `MemPoolCheck`, `MempoolEviction` to `MemPoolEviction` and `ComplexMemPool` to `MempoolComplex`? That makes `-filter=MemPool.*` work\r\n\r\nAs a workaround, `-filter=.*Mem.*` does work.",
      "created_at": "2023-11-14T10:05:29Z",
      "updated_at": "2023-11-14T10:29:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1392325037",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1392325037"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 261,
      "original_line": 261,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1392364899",
      "pull_request_review_id": 1729419761,
      "id": 1392364899,
      "node_id": "PRRC_kwDOABII585S_c1j",
      "diff_hunk": "@@ -574,6 +574,8 @@ void SetupServerArgs(ArgsManager& argsman)\n     argsman.AddArg(\"-limitancestorsize=<n>\", strprintf(\"Do not accept transactions whose size with all in-mempool ancestors exceeds <n> kilobytes (default: %u)\", DEFAULT_ANCESTOR_SIZE_LIMIT_KVB), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n     argsman.AddArg(\"-limitdescendantcount=<n>\", strprintf(\"Do not accept transactions if any ancestor would have <n> or more in-mempool descendants (default: %u)\", DEFAULT_DESCENDANT_LIMIT), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n     argsman.AddArg(\"-limitdescendantsize=<n>\", strprintf(\"Do not accept transactions if any ancestor would have more than <n> kilobytes of in-mempool descendants (default: %u).\", DEFAULT_DESCENDANT_SIZE_LIMIT_KVB), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n+    argsman.AddArg(\"-limitclustercount=<n>\", strprintf(\"Do not accept transactions connected to <n> or more existing in-mempool transactions (default: %u)\", DEFAULT_CLUSTER_LIMIT), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);",
      "path": "src/init.cpp",
      "position": 4,
      "original_position": 4,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "7fdcccd1338655328c28ff949d50442ace931a5e",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I made an attempt at dropping `-limitdescendantsize` and friends: https://github.com/Sjors/bitcoin/commits/2022/11/cluster-mempool\r\n\r\nI (naively) replaced ancestor and descendent limits in coin selection with the new cluster limit. At least the tests pass *.\r\n\r\nWhen we drop these settings anyone who uses them will get an error when starting the node. That's probably a good thing, since they should read about this change.\r\n\r\n`* =` well, wallet_basic.py fails with:\r\n\r\n```\r\nInternal bug detected: Shared UTXOs among selection results\r\nwallet/coinselection.h:340 (InsertInputs)\r\n```",
      "created_at": "2023-11-14T10:34:19Z",
      "updated_at": "2023-11-14T12:30:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1392364899",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1392364899"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 619,
      "original_line": 619,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1392567718",
      "pull_request_review_id": 1729707068,
      "id": 1392567718,
      "node_id": "PRRC_kwDOABII585TAOWm",
      "diff_hunk": "@@ -1245,3 +1536,169 @@ std::vector<CTxMemPool::txiter> CTxMemPool::GatherClusters(const std::vector<uin\n     }\n     return clustered_txs;\n }\n+\n+void Cluster::AddTransaction(const CTxMemPoolEntry& entry, bool sort)\n+{\n+    m_chunks.emplace_back(entry.GetModifiedFee(), entry.GetTxSize());\n+    m_chunks.back().txs.emplace_back(entry);\n+    entry.m_cluster = this;\n+    ++m_tx_count;\n+    if (sort) Sort();\n+    return;\n+}\n+\n+void Cluster::RemoveTransaction(const CTxMemPoolEntry& entry)\n+{\n+    m_chunks[entry.m_loc.first].txs.erase(entry.m_loc.second);\n+\n+    // Chunk (or cluster) may now be empty, but this will get cleaned up",
      "path": "src/txmempool.cpp",
      "position": null,
      "original_position": 407,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "54f39ca8f101483f5f82707689ca49431d4091e5",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "54f39ca8f101483f5f82707689ca49431d4091e5: what if the deleted transaction makes it so there are now two clusters? This is also safe to ignore? ",
      "created_at": "2023-11-14T13:15:36Z",
      "updated_at": "2023-11-14T14:27:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1392567718",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1392567718"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1857,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1392640692",
      "pull_request_review_id": 1729707068,
      "id": 1392640692,
      "node_id": "PRRC_kwDOABII585TAgK0",
      "diff_hunk": "@@ -1245,3 +1536,169 @@ std::vector<CTxMemPool::txiter> CTxMemPool::GatherClusters(const std::vector<uin\n     }\n     return clustered_txs;\n }\n+\n+void Cluster::AddTransaction(const CTxMemPoolEntry& entry, bool sort)\n+{\n+    m_chunks.emplace_back(entry.GetModifiedFee(), entry.GetTxSize());\n+    m_chunks.back().txs.emplace_back(entry);\n+    entry.m_cluster = this;\n+    ++m_tx_count;\n+    if (sort) Sort();\n+    return;\n+}\n+\n+void Cluster::RemoveTransaction(const CTxMemPoolEntry& entry)\n+{\n+    m_chunks[entry.m_loc.first].txs.erase(entry.m_loc.second);\n+\n+    // Chunk (or cluster) may now be empty, but this will get cleaned up\n+    // when the cluster is re-sorted (or when the cluster is deleted) Note:\n+    // if we cleaned up empty chunks here, then this would break the\n+    // locations of other entries in the cluster. Since we would like to be\n+    // able to do multiple removals in a row and then clean up the sort, we\n+    // can't clean up empty chunks here.\n+    --m_tx_count;\n+    return;\n+}\n+\n+void Cluster::RechunkFromLinearization(std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef>& txs, bool reassign_locations)\n+{\n+    m_chunks.clear();\n+\n+    for (auto txentry : txs) {\n+        m_chunks.emplace_back(txentry.get().GetModifiedFee(), txentry.get().GetTxSize());\n+        m_chunks.back().txs.emplace_back(txentry);",
      "path": "src/txmempool.cpp",
      "position": null,
      "original_position": 423,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "54f39ca8f101483f5f82707689ca49431d4091e5",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "54f39ca8f101483f5f82707689ca49431d4091e5: So you're creating a chunk for each new transaction and then erasing it if the fee rate goes down. Why not the other way around? ",
      "created_at": "2023-11-14T14:09:48Z",
      "updated_at": "2023-11-14T14:27:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1392640692",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1392640692"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1875,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1392646700",
      "pull_request_review_id": 1729707068,
      "id": 1392646700,
      "node_id": "PRRC_kwDOABII585TAhos",
      "diff_hunk": "@@ -1245,3 +1536,169 @@ std::vector<CTxMemPool::txiter> CTxMemPool::GatherClusters(const std::vector<uin\n     }\n     return clustered_txs;\n }\n+\n+void Cluster::AddTransaction(const CTxMemPoolEntry& entry, bool sort)\n+{\n+    m_chunks.emplace_back(entry.GetModifiedFee(), entry.GetTxSize());\n+    m_chunks.back().txs.emplace_back(entry);\n+    entry.m_cluster = this;\n+    ++m_tx_count;\n+    if (sort) Sort();\n+    return;\n+}\n+\n+void Cluster::RemoveTransaction(const CTxMemPoolEntry& entry)\n+{\n+    m_chunks[entry.m_loc.first].txs.erase(entry.m_loc.second);\n+\n+    // Chunk (or cluster) may now be empty, but this will get cleaned up\n+    // when the cluster is re-sorted (or when the cluster is deleted) Note:\n+    // if we cleaned up empty chunks here, then this would break the\n+    // locations of other entries in the cluster. Since we would like to be\n+    // able to do multiple removals in a row and then clean up the sort, we\n+    // can't clean up empty chunks here.\n+    --m_tx_count;\n+    return;\n+}\n+\n+void Cluster::RechunkFromLinearization(std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef>& txs, bool reassign_locations)\n+{\n+    m_chunks.clear();\n+\n+    for (auto txentry : txs) {\n+        m_chunks.emplace_back(txentry.get().GetModifiedFee(), txentry.get().GetTxSize());\n+        m_chunks.back().txs.emplace_back(txentry);\n+        while (m_chunks.size() >= 2) {\n+            auto cur_iter = std::prev(m_chunks.end());\n+            auto prev_iter = std::prev(cur_iter);\n+            double feerate_prev = prev_iter->fee*cur_iter->size;",
      "path": "src/txmempool.cpp",
      "position": null,
      "original_position": 427,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "54f39ca8f101483f5f82707689ca49431d4091e5",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "54f39ca8f101483f5f82707689ca49431d4091e5: shouldn't this be `fee / size`? Or do you mean to use an inverse fee rate for performance (`inv_fee_rate`)?",
      "created_at": "2023-11-14T14:13:05Z",
      "updated_at": "2023-11-14T14:27:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1392646700",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1392646700"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1877,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399053865",
      "pull_request_review_id": 1739566572,
      "id": 1399053865,
      "node_id": "PRRC_kwDOABII585TY94p",
      "diff_hunk": "@@ -632,6 +634,22 @@ class CTxMemPool\n      */\n     void UpdateTransactionsFromBlock(const std::vector<uint256>& vHashesToUpdate) EXCLUSIVE_LOCKS_REQUIRED(cs, cs_main) LOCKS_EXCLUDED(m_epoch);\n \n+    /**\n+     * Calculate whether cluster size limits would be exceeded if a new tx were\n+     * added to the mempool (assuming no conflicts).",
      "path": "src/txmempool.h",
      "position": 246,
      "original_position": 15,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "065e18fff30a91c94c47d5c2fc65b13ddc38aa47",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "065e18fff30a91c94c47d5c2fc65b13ddc38aa47: do you plan to relax this assumption so that a transaction in (a) full cluster(s) can be replaced?\r\n\r\n_Update_: `AcceptSingleTransaction` skips `ClusterSizeChecks` if there's a replacement, in which case `ReplacementChecks` checks the new cluster size. So this is not an issue.",
      "created_at": "2023-11-20T11:22:37Z",
      "updated_at": "2023-11-20T14:32:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399053865",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399053865"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 440,
      "original_line": 440,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399137900",
      "pull_request_review_id": 1739706549,
      "id": 1399137900,
      "node_id": "PRRC_kwDOABII585TZSZs",
      "diff_hunk": "@@ -553,6 +660,39 @@ static RPCHelpMan getmempooldescendants()\n     };\n }\n \n+static RPCHelpMan getmempoolcluster()\n+{\n+    return RPCHelpMan{\"getmempoolcluster\",\n+        \"\\nReturns mempool data for given cluster\\n\",\n+        {\n+            {\"id\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The cluster id (must be in mempool)\"},",
      "path": "src/rpc/mempool.cpp",
      "position": 261,
      "original_position": 192,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1: it would be more practical to (also) have a lookup by transaction hash",
      "created_at": "2023-11-20T12:32:16Z",
      "updated_at": "2023-11-20T12:32:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399137900",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399137900"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 656,
      "original_line": 656,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399160874",
      "pull_request_review_id": 1739741540,
      "id": 1399160874,
      "node_id": "PRRC_kwDOABII585TZYAq",
      "diff_hunk": "@@ -1245,3 +1536,169 @@ std::vector<CTxMemPool::txiter> CTxMemPool::GatherClusters(const std::vector<uin\n     }\n     return clustered_txs;\n }\n+\n+void Cluster::AddTransaction(const CTxMemPoolEntry& entry, bool sort)\n+{\n+    m_chunks.emplace_back(entry.GetModifiedFee(), entry.GetTxSize());\n+    m_chunks.back().txs.emplace_back(entry);\n+    entry.m_cluster = this;\n+    ++m_tx_count;\n+    if (sort) Sort();\n+    return;\n+}\n+\n+void Cluster::RemoveTransaction(const CTxMemPoolEntry& entry)\n+{\n+    m_chunks[entry.m_loc.first].txs.erase(entry.m_loc.second);\n+\n+    // Chunk (or cluster) may now be empty, but this will get cleaned up\n+    // when the cluster is re-sorted (or when the cluster is deleted) Note:\n+    // if we cleaned up empty chunks here, then this would break the\n+    // locations of other entries in the cluster. Since we would like to be\n+    // able to do multiple removals in a row and then clean up the sort, we\n+    // can't clean up empty chunks here.\n+    --m_tx_count;\n+    return;\n+}\n+\n+void Cluster::RechunkFromLinearization(std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef>& txs, bool reassign_locations)\n+{\n+    m_chunks.clear();\n+\n+    for (auto txentry : txs) {\n+        m_chunks.emplace_back(txentry.get().GetModifiedFee(), txentry.get().GetTxSize());\n+        m_chunks.back().txs.emplace_back(txentry);\n+        while (m_chunks.size() >= 2) {\n+            auto cur_iter = std::prev(m_chunks.end());\n+            auto prev_iter = std::prev(cur_iter);\n+            double feerate_prev = prev_iter->fee*cur_iter->size;",
      "path": "src/txmempool.cpp",
      "position": null,
      "original_position": 427,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "54f39ca8f101483f5f82707689ca49431d4091e5",
      "in_reply_to_id": 1392646700,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "To check `a/b > c/d` you can instead check `a*d > c*b`, which avoids divisions (which are an order of magnitude slower than multiplication).",
      "created_at": "2023-11-20T12:53:42Z",
      "updated_at": "2023-11-20T12:53:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399160874",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399160874"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1877,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399161977",
      "pull_request_review_id": 1739743147,
      "id": 1399161977,
      "node_id": "PRRC_kwDOABII585TZYR5",
      "diff_hunk": "@@ -632,6 +634,22 @@ class CTxMemPool\n      */\n     void UpdateTransactionsFromBlock(const std::vector<uint256>& vHashesToUpdate) EXCLUSIVE_LOCKS_REQUIRED(cs, cs_main) LOCKS_EXCLUDED(m_epoch);\n \n+    /**\n+     * Calculate whether cluster size limits would be exceeded if a new tx were\n+     * added to the mempool (assuming no conflicts).",
      "path": "src/txmempool.h",
      "position": 246,
      "original_position": 15,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "065e18fff30a91c94c47d5c2fc65b13ddc38aa47",
      "in_reply_to_id": 1399053865,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I believe that's an idea we've toyed with (calling it \"sibling eviction\"), but so far it isn't clear how to align that with DoS prevention.",
      "created_at": "2023-11-20T12:54:40Z",
      "updated_at": "2023-11-20T12:54:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399161977",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399161977"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 440,
      "original_line": 440,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399223399",
      "pull_request_review_id": 1739853534,
      "id": 1399223399,
      "node_id": "PRRC_kwDOABII585TZnRn",
      "diff_hunk": "@@ -249,34 +249,81 @@ static RPCHelpMan testmempoolaccept()\n     };\n }\n \n+static std::vector<RPCResult> ClusterDescription()\n+{\n+    return {\n+        RPCResult{RPCResult::Type::NUM, \"vsize\", \"virtual transaction size as defined in BIP 141. This is different from actual serialized size for witness transactions as witness data is discounted.\"},\n+        RPCResult{RPCResult::Type::NUM, \"txcount\", \"number of transactions (including this one)\"},\n+        RPCResult{RPCResult::Type::NUM, \"clusterid\", \"id of the cluster containing this tx\"},\n+        RPCResult{RPCResult::Type::ARR, \"chunks\", \"the cluster's chunks\",\n+            {RPCResult{RPCResult::Type::OBJ, \"chunkentry\", \"\",\n+                {\n+                    RPCResult{RPCResult::Type::STR_AMOUNT, \"fee\", \"fee of this chunk\"},\n+                    RPCResult{RPCResult::Type::NUM, \"vsize\", \"virtual size of this chunk\"},\n+                    RPCResult{RPCResult::Type::NUM, \"feerate\", \"fee rate in \" + CURRENCY_UNIT + \"/kvB\"},\n+                    RPCResult{RPCResult::Type::ARR, \"txids\", \"txids in this chunk in sorted order\",\n+                        {RPCResult{RPCResult::Type::STR_HEX, \"transactionid\", \"the transaction id\"}}}\n+                }}\n+            }\n+        }\n+    };\n+}\n+\n static std::vector<RPCResult> MempoolEntryDescription()\n {\n     return {\n         RPCResult{RPCResult::Type::NUM, \"vsize\", \"virtual transaction size as defined in BIP 141. This is different from actual serialized size for witness transactions as witness data is discounted.\"},\n-        RPCResult{RPCResult::Type::NUM, \"weight\", \"transaction weight as defined in BIP 141.\"},\n-        RPCResult{RPCResult::Type::NUM_TIME, \"time\", \"local time transaction entered pool in seconds since 1 Jan 1970 GMT\"},\n-        RPCResult{RPCResult::Type::NUM, \"height\", \"block height when transaction entered pool\"},\n-        RPCResult{RPCResult::Type::NUM, \"descendantcount\", \"number of in-mempool descendant transactions (including this one)\"},\n-        RPCResult{RPCResult::Type::NUM, \"descendantsize\", \"virtual transaction size of in-mempool descendants (including this one)\"},\n-        RPCResult{RPCResult::Type::NUM, \"ancestorcount\", \"number of in-mempool ancestor transactions (including this one)\"},\n-        RPCResult{RPCResult::Type::NUM, \"ancestorsize\", \"virtual transaction size of in-mempool ancestors (including this one)\"},\n-        RPCResult{RPCResult::Type::STR_HEX, \"wtxid\", \"hash of serialized transaction, including witness data\"},\n-        RPCResult{RPCResult::Type::OBJ, \"fees\", \"\",\n-            {\n-                RPCResult{RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee, denominated in \" + CURRENCY_UNIT},\n-                RPCResult{RPCResult::Type::STR_AMOUNT, \"modified\", \"transaction fee with fee deltas used for mining priority, denominated in \" + CURRENCY_UNIT},\n-                RPCResult{RPCResult::Type::STR_AMOUNT, \"ancestor\", \"transaction fees of in-mempool ancestors (including this one) with fee deltas used for mining priority, denominated in \" + CURRENCY_UNIT},\n-                RPCResult{RPCResult::Type::STR_AMOUNT, \"descendant\", \"transaction fees of in-mempool descendants (including this one) with fee deltas used for mining priority, denominated in \" + CURRENCY_UNIT},\n-            }},\n-        RPCResult{RPCResult::Type::ARR, \"depends\", \"unconfirmed transactions used as inputs for this transaction\",\n-            {RPCResult{RPCResult::Type::STR_HEX, \"transactionid\", \"parent transaction id\"}}},\n-        RPCResult{RPCResult::Type::ARR, \"spentby\", \"unconfirmed transactions spending outputs from this transaction\",\n-            {RPCResult{RPCResult::Type::STR_HEX, \"transactionid\", \"child transaction id\"}}},\n-        RPCResult{RPCResult::Type::BOOL, \"bip125-replaceable\", \"Whether this transaction signals BIP125 replaceability or has an unconfirmed ancestor signaling BIP125 replaceability.\\n\"},\n-        RPCResult{RPCResult::Type::BOOL, \"unbroadcast\", \"Whether this transaction is currently unbroadcast (initial broadcast not yet acknowledged by any peers)\"},\n+            RPCResult{RPCResult::Type::NUM, \"weight\", \"transaction weight as defined in BIP 141.\"},\n+            RPCResult{RPCResult::Type::NUM_TIME, \"time\", \"local time transaction entered pool in seconds since 1 Jan 1970 GMT\"},\n+            RPCResult{RPCResult::Type::NUM, \"height\", \"block height when transaction entered pool\"},\n+            RPCResult{RPCResult::Type::NUM, \"descendantcount\", \"number of in-mempool descendant transactions (including this one)\"},\n+            RPCResult{RPCResult::Type::NUM, \"descendantsize\", \"virtual transaction size of in-mempool descendants (including this one)\"},\n+            RPCResult{RPCResult::Type::NUM, \"ancestorcount\", \"number of in-mempool ancestor transactions (including this one)\"},\n+            RPCResult{RPCResult::Type::NUM, \"ancestorsize\", \"virtual transaction size of in-mempool ancestors (including this one)\"},\n+            RPCResult{RPCResult::Type::NUM, \"chunksize\", \"virtual transaction size of this transaction's chunk\"},\n+            RPCResult{RPCResult::Type::NUM, \"clusterid\", \"id of the cluster containing this tx\"},\n+            RPCResult{RPCResult::Type::STR_HEX, \"wtxid\", \"hash of serialized transaction, including witness data\"},\n+            RPCResult{RPCResult::Type::OBJ, \"fees\", \"\",\n+                {\n+                    RPCResult{RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee, denominated in \" + CURRENCY_UNIT},\n+                    RPCResult{RPCResult::Type::STR_AMOUNT, \"modified\", \"transaction fee with fee deltas used for mining priority, denominated in \" + CURRENCY_UNIT},\n+                    RPCResult{RPCResult::Type::STR_AMOUNT, \"ancestor\", \"transaction fees of in-mempool ancestors (including this one) with fee deltas used for mining priority, denominated in \" + CURRENCY_UNIT},\n+                    RPCResult{RPCResult::Type::STR_AMOUNT, \"descendant\", \"transaction fees of in-mempool descendants (including this one) with fee deltas used for mining priority, denominated in \" + CURRENCY_UNIT},\n+                    RPCResult{RPCResult::Type::STR_AMOUNT, \"chunk\", \"transaction fees of chunk, denominated in \" + CURRENCY_UNIT},\n+                }},\n+            RPCResult{RPCResult::Type::ARR, \"depends\", \"unconfirmed transactions used as inputs for this transaction\",\n+                {RPCResult{RPCResult::Type::STR_HEX, \"transactionid\", \"parent transaction id\"}}},\n+            RPCResult{RPCResult::Type::ARR, \"spentby\", \"unconfirmed transactions spending outputs from this transaction\",\n+                {RPCResult{RPCResult::Type::STR_HEX, \"transactionid\", \"child transaction id\"}}},\n+            RPCResult{RPCResult::Type::BOOL, \"bip125-replaceable\", \"Whether this transaction signals BIP125 replaceability or has an unconfirmed ancestor signaling BIP125 replaceability.\\n\"},\n+            RPCResult{RPCResult::Type::BOOL, \"unbroadcast\", \"Whether this transaction is currently unbroadcast (initial broadcast not yet acknowledged by any peers)\"},\n     };\n }\n \n+static void clusterToJSON(const CTxMemPool& pool, UniValue& info, const Cluster& c) EXCLUSIVE_LOCKS_REQUIRED(pool.cs)\n+{\n+    AssertLockHeld(pool.cs);\n+    info.pushKV(\"vsize\", (int)c.m_tx_size);\n+    info.pushKV(\"txcount\", (int)c.m_tx_count);\n+    info.pushKV(\"clusterid\", (int)c.m_id);\n+    UniValue chunks(UniValue::VARR);\n+    for (auto &chunk : c.m_chunks) {",
      "path": "src/rpc/mempool.cpp",
      "position": 83,
      "original_position": 83,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1: can you order chunks by mining score?",
      "created_at": "2023-11-20T13:42:19Z",
      "updated_at": "2023-11-20T13:42:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399223399",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399223399"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 312,
      "original_line": 312,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399231122",
      "pull_request_review_id": 1739865937,
      "id": 1399231122,
      "node_id": "PRRC_kwDOABII585TZpKS",
      "diff_hunk": "@@ -764,48 +918,174 @@ void CTxMemPool::check(const CCoinsViewCache& active_coins_tip, int64_t spendhei\n         assert(&tx == it->second);\n     }\n \n+    // Check that clusters are sorted topologically and that the chunk metadata\n+    // matches the txs in the chunk.\n+    for (const auto & [id, cluster] : m_cluster_map) {\n+        assert(cluster->m_tx_count > 0); // no empty clusters\n+        CTxMemPoolEntry::Parents txs_so_far;\n+        for (size_t i=0; i<cluster->m_chunks.size(); ++i) {\n+            int64_t fee{0};\n+            int64_t size{0};\n+            assert(!cluster->m_chunks[i].txs.empty()); // no empty chunks\n+            for (auto it=cluster->m_chunks[i].txs.begin(); it != cluster->m_chunks[i].txs.end(); ++it) {\n+                fee += it->get().GetModifiedFee();\n+                size += it->get().GetTxSize();\n+                // Check that all parents are in txs_so_far\n+                for (const auto& parent : it->get().GetMemPoolParentsConst()) {\n+                    assert(txs_so_far.count(parent));\n+                }\n+                txs_so_far.insert(*it);\n+            }\n+            assert(fee == cluster->m_chunks[i].fee);\n+            assert(size == cluster->m_chunks[i].size);\n+        }\n+        innerUsage += cluster->GetMemoryUsage();\n+    }\n+\n+    // Check that each cluster is connected.\n+    for (const auto & [id, cluster] : m_cluster_map) {\n+        // Since we've checked the parents and children already, we'll use\n+        // those values here.\n+        // We'll check that if we walk to every transaction reachable from the\n+        // first one, that we get every tx in the cluster.\n+        auto first_tx = cluster->m_chunks.front().txs.front();\n+        std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef> work_queue;\n+        int reachable_txs = 1; // we'll count the transactions we reach.\n+\n+        WITH_FRESH_EPOCH(m_epoch);\n+        visited(first_tx.get());\n+        assert(first_tx.get().GetMemPoolParentsConst().size() == 0); // first tx can never have parents.\n+        for (auto child : first_tx.get().GetMemPoolChildrenConst()) {\n+            work_queue.push_back(child);\n+            visited(child.get());\n+            ++reachable_txs;\n+        }\n+        while (work_queue.size() > 0) {\n+            auto next_tx = work_queue.back();\n+            work_queue.pop_back();\n+            for (auto parent : next_tx.get().GetMemPoolParentsConst()) {\n+                if (!visited(parent.get())) {\n+                    ++reachable_txs;\n+                    work_queue.push_back(parent);\n+                }\n+            }\n+            for (auto child : next_tx.get().GetMemPoolChildrenConst()) {\n+                if (!visited(child.get())) {\n+                    ++reachable_txs;\n+                    work_queue.push_back(child);\n+                }\n+            }\n+        }\n+        assert(reachable_txs == cluster->m_tx_count);\n+    }\n+\n     assert(totalTxSize == checkTotal);\n     assert(m_total_fee == check_total_fee);\n     assert(innerUsage == cachedInnerUsage);\n }\n \n-bool CTxMemPool::CompareDepthAndScore(const uint256& hasha, const uint256& hashb, bool wtxid)\n+// Return true if a comes before b in mempool sort order\n+bool CTxMemPool::CompareMiningScore(txiter a, txiter b) const\n+{\n+    if (a == b) return false; // An element cannot be less than itself.\n+\n+    CAmount a_fee = a->m_cluster->m_chunks[a->m_loc.first].fee;\n+    int64_t a_size = a->m_cluster->m_chunks[a->m_loc.first].size;\n+    CAmount b_fee = b->m_cluster->m_chunks[b->m_loc.first].fee;\n+    int64_t b_size = b->m_cluster->m_chunks[b->m_loc.first].size;\n+\n+    int64_t a_score = a_fee * b_size;\n+    int64_t b_score = b_fee * a_size;",
      "path": "src/txmempool.cpp",
      "position": null,
      "original_position": 1113,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "7fdcccd1338655328c28ff949d50442ace931a5e",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It would be good to explain the rationale for the miner score somewhere.\r\n\r\nWhy a * b and b * a?\r\n\r\nAnd why is not the fee rate `a_fee / a_size`? (inverse score?)",
      "created_at": "2023-11-20T13:48:38Z",
      "updated_at": "2023-11-20T13:51:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399231122",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399231122"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1157,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399244164",
      "pull_request_review_id": 1739885361,
      "id": 1399244164,
      "node_id": "PRRC_kwDOABII585TZsWE",
      "diff_hunk": "@@ -377,6 +427,63 @@ UniValue MempoolToJSON(const CTxMemPool& pool, bool verbose, bool include_mempoo\n     }\n }\n \n+static RPCHelpMan getmempoolfeesize()\n+{\n+    return RPCHelpMan{\"getmempoolfeesize\",\n+        \"Returns fee/size data for the whole mempool.\",\n+        {},\n+        {},\n+        RPCExamples{\n+            HelpExampleCli(\"getmempoolfeesize\", \"\")\n+            + HelpExampleRpc(\"getmempoolfeesize\", \"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+            LOCK(mempool.cs);\n+\n+            UniValue result(UniValue::VARR);\n+\n+            // TODO: refactor so that we're not just copying this from the miner.\n+            std::vector<Cluster::HeapEntry> heap_chunks;\n+            // Initialize the heap with the best entry from each cluster\n+            for (const auto & [id, cluster] : mempool.m_cluster_map) {\n+                if (!cluster->m_chunks.empty()) {\n+                    heap_chunks.emplace_back(cluster->m_chunks.begin(), cluster.get());\n+                }\n+            }\n+            // Define comparison operator on our heap entries (using feerate of chunks).\n+            auto cmp = [](const Cluster::HeapEntry& a, const Cluster::HeapEntry& b) {\n+                return a.first->fee*b.first->size < b.first->fee*a.first->size;\n+            };\n+            std::make_heap(heap_chunks.begin(), heap_chunks.end(), cmp);\n+\n+            CAmount accum_fee{0};\n+            int64_t accum_size{0};\n+            while (!heap_chunks.empty()) {\n+                auto best_chunk = heap_chunks.front();\n+                std::pop_heap(heap_chunks.begin(), heap_chunks.end(), cmp);\n+                heap_chunks.pop_back();\n+\n+                accum_size += best_chunk.first->size;\n+                accum_fee += best_chunk.first->fee;\n+\n+                UniValue o(UniValue::VOBJ);",
      "path": "src/rpc/mempool.cpp",
      "position": 183,
      "original_position": 164,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1: this should also list the cluster id, and maybe also the chunk number.\r\n\r\nCould also add an argument limit the total number of vbytes.\r\n\r\n`getmempoolfeesize` can be introduced in its own commit",
      "created_at": "2023-11-20T13:58:48Z",
      "updated_at": "2023-11-20T13:59:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399244164",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399244164"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 466,
      "original_line": 466,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399246551",
      "pull_request_review_id": 1739889097,
      "id": 1399246551,
      "node_id": "PRRC_kwDOABII585TZs7X",
      "diff_hunk": "@@ -377,6 +427,63 @@ UniValue MempoolToJSON(const CTxMemPool& pool, bool verbose, bool include_mempoo\n     }\n }\n \n+static RPCHelpMan getmempoolfeesize()\n+{\n+    return RPCHelpMan{\"getmempoolfeesize\",\n+        \"Returns fee/size data for the whole mempool.\",\n+        {},\n+        {},\n+        RPCExamples{\n+            HelpExampleCli(\"getmempoolfeesize\", \"\")\n+            + HelpExampleRpc(\"getmempoolfeesize\", \"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+            LOCK(mempool.cs);\n+\n+            UniValue result(UniValue::VARR);\n+\n+            // TODO: refactor so that we're not just copying this from the miner.\n+            std::vector<Cluster::HeapEntry> heap_chunks;\n+            // Initialize the heap with the best entry from each cluster\n+            for (const auto & [id, cluster] : mempool.m_cluster_map) {\n+                if (!cluster->m_chunks.empty()) {\n+                    heap_chunks.emplace_back(cluster->m_chunks.begin(), cluster.get());\n+                }\n+            }\n+            // Define comparison operator on our heap entries (using feerate of chunks).\n+            auto cmp = [](const Cluster::HeapEntry& a, const Cluster::HeapEntry& b) {\n+                return a.first->fee*b.first->size < b.first->fee*a.first->size;",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 150,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1 : Could this use `CompareMiningScore` or does it have a different goal?",
      "created_at": "2023-11-20T14:00:41Z",
      "updated_at": "2023-11-20T14:00:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399246551",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399246551"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 474,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399253500",
      "pull_request_review_id": 1739900168,
      "id": 1399253500,
      "node_id": "PRRC_kwDOABII585TZun8",
      "diff_hunk": "@@ -53,12 +46,10 @@ other consensus and policy rules, each of the following conditions are met:\n    significant portions of the node's mempool using replacements with multiple directly conflicting\n    transactions, each with large descendant sets.\n \n-6. The replacement transaction's feerate is greater than the feerates of all directly conflicting\n+5. The replacement transaction's mining score is greater than the mining score of all directly conflicting",
      "path": "doc/policy/mempool-replacements.md",
      "position": null,
      "original_position": 39,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "bf467f8286425b692a1736ab6d417d0ba6074658",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "bf467f8286425b692a1736ab6d417d0ba6074658 Maybe make this rule 7. That seems a bit more clear than saying \"previously this rule referred to fee rate\"",
      "created_at": "2023-11-20T14:06:13Z",
      "updated_at": "2023-11-20T14:06:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399253500",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399253500"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 49,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399257380",
      "pull_request_review_id": 1739906712,
      "id": 1399257380,
      "node_id": "PRRC_kwDOABII585TZvkk",
      "diff_hunk": "@@ -18,14 +18,7 @@ other consensus and policy rules, each of the following conditions are met:\n    Use the (`-mempoolfullrbf`) configuration option to allow transaction replacement without enforcement of the\n    opt-in signaling rule.\n \n-2. The replacement transaction only include an unconfirmed input if that input was included in\n-   one of the directly conflicting transactions. An unconfirmed input spends an output from a\n-   currently-unconfirmed transaction.\n-\n-   *Rationale*: When RBF was originally implemented, the mempool did not keep track of\n-   ancestor feerates yet. This rule was suggested as a temporary restriction.\n-\n-3. The replacement transaction pays an absolute fee of at least the sum paid by the original\n+2. The replacement transaction pays an absolute fee of at least the sum paid by the original\n    transactions.\n \n    *Rationale*: Only requiring the replacement transaction to have a higher feerate could allow an",
      "path": "doc/policy/mempool-replacements.md",
      "position": null,
      "original_position": 15,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "bf467f8286425b692a1736ab6d417d0ba6074658",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "bf467f8286425b692a1736ab6d417d0ba6074658: \"a higher feerate or (using clusters) mining score\"\r\n\r\nIs the \"Additionally\" reasoning still valid?",
      "created_at": "2023-11-20T14:09:35Z",
      "updated_at": "2023-11-20T14:10:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399257380",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399257380"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 27,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399277318",
      "pull_request_review_id": 1739940128,
      "id": 1399277318,
      "node_id": "PRRC_kwDOABII585TZ0cG",
      "diff_hunk": "@@ -53,12 +46,10 @@ other consensus and policy rules, each of the following conditions are met:\n    significant portions of the node's mempool using replacements with multiple directly conflicting\n    transactions, each with large descendant sets.\n \n-6. The replacement transaction's feerate is greater than the feerates of all directly conflicting\n+5. The replacement transaction's mining score is greater than the mining score of all directly conflicting\n    transactions.\n \n-   *Rationale*: This rule was originally intended to ensure that the replacement transaction is\n-   preferable for block-inclusion, compared to what would be removed from the mempool. This rule\n-   predates ancestor feerate-based transaction selection.\n+   *Rationale*: Ensure that the new transaction is more appealing to mine than those being evicted.\n \n This set of rules is similar but distinct from BIP125.\n ",
      "path": "doc/policy/mempool-replacements.md",
      "position": 41,
      "original_position": 48,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "bf467f8286425b692a1736ab6d417d0ba6074658",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "bf467f8286425b692a1736ab6d417d0ba6074658: history can be expanded:\r\n\r\n```md\r\n  * Cluster mempool introduced, dropping rule 2 and introducing rule 7.\r\n    As of **v27.0** ([PR 28676](https://github.com/bitcoin/bitcoin/pull/28676)).\r\n```",
      "created_at": "2023-11-20T14:24:01Z",
      "updated_at": "2023-11-20T14:24:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399277318",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399277318"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 53,
      "original_line": 53,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399281690",
      "pull_request_review_id": 1739947219,
      "id": 1399281690,
      "node_id": "PRRC_kwDOABII585TZ1ga",
      "diff_hunk": "@@ -139,11 +107,11 @@ std::optional<std::string> PaysMoreThanConflicts(const CTxMemPool::setEntries& i\n         // as that would lower the feerate of the next block. Requiring that the feerate always be\n         // increased is also an easy-to-reason about way to prevent DoS attacks via replacements.\n         //\n-        // We only consider the feerates of transactions being directly replaced, not their indirect\n-        // descendants. While that does mean high feerate children are ignored when deciding whether\n-        // or not to replace, we do require the replacement to pay more overall fees too, mitigating\n-        // most cases.\n-        CFeeRate original_feerate(mi->GetModifiedFee(), mi->GetTxSize());\n+        // We only need to consider the chunk feerates of transactions being\n+        // directly replaced, because descendant transactions which pay for the\n+        // parent will be reflected in the parent's chunk feerate.\n+        Cluster::Chunk &chunk = mi->m_cluster->m_chunks[mi->m_loc.first];\n+        CFeeRate original_feerate(chunk.fee, chunk.size);\n         if (replacement_feerate <= original_feerate) {\n             return strprintf(\"rejecting replacement %s; new feerate %s <= old feerate %s\",",
      "path": "src/policy/rbf.cpp",
      "position": null,
      "original_position": 63,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "bf467f8286425b692a1736ab6d417d0ba6074658",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "bf467f8286425b692a1736ab6d417d0ba6074658: `; new chunk feerate %s <= old chunk feerate`",
      "created_at": "2023-11-20T14:27:08Z",
      "updated_at": "2023-11-20T14:27:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399281690",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399281690"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 116,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399422341",
      "pull_request_review_id": 1740177374,
      "id": 1399422341,
      "node_id": "PRRC_kwDOABII585TaX2F",
      "diff_hunk": "@@ -1245,3 +1648,251 @@ std::vector<CTxMemPool::txiter> CTxMemPool::GatherClusters(const std::vector<uin\n     }\n     return clustered_txs;\n }\n+\n+CTxMemPoolEntry::CTxMemPoolEntryRef Cluster::GetLastTransaction()\n+{\n+    assert(m_tx_count > 0);\n+    for (auto chunkit = m_chunks.rbegin(); chunkit != m_chunks.rend(); ++chunkit) {\n+        if (!chunkit->txs.empty()) return chunkit->txs.back();\n+    }\n+    // Unreachable\n+    assert(false);\n+}\n+\n+void Cluster::AddTransaction(const CTxMemPoolEntry& entry, bool sort)\n+{\n+    m_chunks.emplace_back(entry.GetModifiedFee(), entry.GetTxSize());\n+    m_chunks.back().txs.emplace_back(entry);\n+    entry.m_cluster = this;\n+    ++m_tx_count;\n+    m_tx_size += entry.GetTxSize();\n+    if (sort) Sort();\n+    return;\n+}\n+\n+void Cluster::RemoveTransaction(const CTxMemPoolEntry& entry)\n+{\n+    m_chunks[entry.m_loc.first].txs.erase(entry.m_loc.second);\n+\n+    // Chunk (or cluster) may now be empty, but this will get cleaned up\n+    // when the cluster is re-sorted (or when the cluster is deleted) Note:\n+    // if we cleaned up empty chunks here, then this would break the\n+    // locations of other entries in the cluster. Since we would like to be\n+    // able to do multiple removals in a row and then clean up the sort, we\n+    // can't clean up empty chunks here.\n+    --m_tx_count;\n+    m_tx_size -= entry.GetTxSize();\n+    return;\n+}\n+\n+void Cluster::RechunkFromLinearization(std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef>& txs, bool reassign_locations)\n+{\n+    m_chunks.clear();\n+    m_tx_size = 0;\n+\n+    for (auto txentry : txs) {\n+        m_chunks.emplace_back(txentry.get().GetModifiedFee(), txentry.get().GetTxSize());\n+        m_chunks.back().txs.emplace_back(txentry);\n+        while (m_chunks.size() >= 2) {\n+            auto cur_iter = std::prev(m_chunks.end());\n+            auto prev_iter = std::prev(cur_iter);\n+            double feerate_prev = prev_iter->fee*cur_iter->size;\n+            double feerate_cur = cur_iter->fee*prev_iter->size;\n+            // We only combine chunks if the feerate would go up; if two\n+            // chunks have equal feerate, we prefer to keep the smaller\n+            // chunksize (which is generally better for both mining and\n+            // eviction).\n+            if (feerate_cur > feerate_prev) {\n+                prev_iter->fee += cur_iter->fee;\n+                prev_iter->size += cur_iter->size;\n+                prev_iter->txs.splice(prev_iter->txs.end(), cur_iter->txs, cur_iter->txs.begin(), cur_iter->txs.end());\n+                m_chunks.erase(cur_iter);\n+            } else {\n+                break;\n+            }\n+        }\n+        m_tx_size += txentry.get().GetTxSize();\n+    }\n+\n+    if (reassign_locations) {\n+        // Update locations of all transactions\n+        for (size_t i=0; i<m_chunks.size(); ++i) {\n+            for (auto it = m_chunks[i].txs.begin(); it != m_chunks[i].txs.end(); ++it) {\n+                it->get().m_loc = {i, it};\n+            }\n+        }\n+    }\n+}\n+\n+namespace {\n+\n+template <typename SetType>\n+std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef> InvokeSort(size_t tx_count, const std::vector<Cluster::Chunk>& chunks)\n+{\n+    std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef> txs;",
      "path": "src/txmempool.cpp",
      "position": null,
      "original_position": 1667,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "7fdcccd1338655328c28ff949d50442ace931a5e",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Can you clarify what `txs`, `orig_txs` and `cluster` are for, and what the general strategy is here?",
      "created_at": "2023-11-20T16:04:07Z",
      "updated_at": "2023-11-20T16:04:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399422341",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399422341"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1910,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399521672",
      "pull_request_review_id": 1740335905,
      "id": 1399521672,
      "node_id": "PRRC_kwDOABII585TawGI",
      "diff_hunk": "@@ -1245,3 +1536,169 @@ std::vector<CTxMemPool::txiter> CTxMemPool::GatherClusters(const std::vector<uin\n     }\n     return clustered_txs;\n }\n+\n+void Cluster::AddTransaction(const CTxMemPoolEntry& entry, bool sort)\n+{\n+    m_chunks.emplace_back(entry.GetModifiedFee(), entry.GetTxSize());\n+    m_chunks.back().txs.emplace_back(entry);\n+    entry.m_cluster = this;\n+    ++m_tx_count;\n+    if (sort) Sort();\n+    return;\n+}\n+\n+void Cluster::RemoveTransaction(const CTxMemPoolEntry& entry)\n+{\n+    m_chunks[entry.m_loc.first].txs.erase(entry.m_loc.second);\n+\n+    // Chunk (or cluster) may now be empty, but this will get cleaned up\n+    // when the cluster is re-sorted (or when the cluster is deleted) Note:\n+    // if we cleaned up empty chunks here, then this would break the\n+    // locations of other entries in the cluster. Since we would like to be\n+    // able to do multiple removals in a row and then clean up the sort, we\n+    // can't clean up empty chunks here.\n+    --m_tx_count;\n+    return;\n+}\n+\n+void Cluster::RechunkFromLinearization(std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef>& txs, bool reassign_locations)\n+{\n+    m_chunks.clear();\n+\n+    for (auto txentry : txs) {\n+        m_chunks.emplace_back(txentry.get().GetModifiedFee(), txentry.get().GetTxSize());\n+        m_chunks.back().txs.emplace_back(txentry);\n+        while (m_chunks.size() >= 2) {\n+            auto cur_iter = std::prev(m_chunks.end());\n+            auto prev_iter = std::prev(cur_iter);\n+            double feerate_prev = prev_iter->fee*cur_iter->size;",
      "path": "src/txmempool.cpp",
      "position": null,
      "original_position": 427,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "54f39ca8f101483f5f82707689ca49431d4091e5",
      "in_reply_to_id": 1392646700,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "The math school memories are coming back :-)",
      "created_at": "2023-11-20T17:22:14Z",
      "updated_at": "2023-11-20T17:22:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399521672",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399521672"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1877,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1419287189",
      "pull_request_review_id": 1770623709,
      "id": 1419287189,
      "node_id": "PRRC_kwDOABII585UmJqV",
      "diff_hunk": "@@ -18,14 +18,7 @@ other consensus and policy rules, each of the following conditions are met:\n    Use the (`-mempoolfullrbf`) configuration option to allow transaction replacement without enforcement of the\n    opt-in signaling rule.\n \n-2. The replacement transaction only include an unconfirmed input if that input was included in\n-   one of the directly conflicting transactions. An unconfirmed input spends an output from a\n-   currently-unconfirmed transaction.\n-\n-   *Rationale*: When RBF was originally implemented, the mempool did not keep track of\n-   ancestor feerates yet. This rule was suggested as a temporary restriction.\n-\n-3. The replacement transaction pays an absolute fee of at least the sum paid by the original",
      "path": "doc/policy/mempool-replacements.md",
      "position": 12,
      "original_position": 11,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "b0f771bb559f38ea16a8f4d13110e2247ac080b9",
      "in_reply_to_id": 1364398135,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I'm not sure the best way to document things, but I added a to-do item to the OP so that we don't lose track of figuring out how we want the docs to look. (Will have to conform all the code comments as well.) ",
      "created_at": "2023-12-07T16:52:48Z",
      "updated_at": "2023-12-07T16:52:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1419287189",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1419287189"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 29,
      "original_line": 29,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1419291403",
      "pull_request_review_id": 1770628066,
      "id": 1419291403,
      "node_id": "PRRC_kwDOABII585UmKsL",
      "diff_hunk": "@@ -249,34 +249,81 @@ static RPCHelpMan testmempoolaccept()\n     };\n }\n \n+static std::vector<RPCResult> ClusterDescription()\n+{\n+    return {\n+        RPCResult{RPCResult::Type::NUM, \"vsize\", \"virtual transaction size as defined in BIP 141. This is different from actual serialized size for witness transactions as witness data is discounted.\"},\n+        RPCResult{RPCResult::Type::NUM, \"txcount\", \"number of transactions (including this one)\"},\n+        RPCResult{RPCResult::Type::NUM, \"clusterid\", \"id of the cluster containing this tx\"},\n+        RPCResult{RPCResult::Type::ARR, \"chunks\", \"the cluster's chunks\",\n+            {RPCResult{RPCResult::Type::OBJ, \"chunkentry\", \"\",\n+                {\n+                    RPCResult{RPCResult::Type::STR_AMOUNT, \"fee\", \"fee of this chunk\"},\n+                    RPCResult{RPCResult::Type::NUM, \"vsize\", \"virtual size of this chunk\"},\n+                    RPCResult{RPCResult::Type::NUM, \"feerate\", \"fee rate in \" + CURRENCY_UNIT + \"/kvB\"},\n+                    RPCResult{RPCResult::Type::ARR, \"txids\", \"txids in this chunk in sorted order\",\n+                        {RPCResult{RPCResult::Type::STR_HEX, \"transactionid\", \"the transaction id\"}}}\n+                }}\n+            }\n+        }\n+    };\n+}\n+\n static std::vector<RPCResult> MempoolEntryDescription()\n {\n     return {\n         RPCResult{RPCResult::Type::NUM, \"vsize\", \"virtual transaction size as defined in BIP 141. This is different from actual serialized size for witness transactions as witness data is discounted.\"},\n-        RPCResult{RPCResult::Type::NUM, \"weight\", \"transaction weight as defined in BIP 141.\"},\n-        RPCResult{RPCResult::Type::NUM_TIME, \"time\", \"local time transaction entered pool in seconds since 1 Jan 1970 GMT\"},\n-        RPCResult{RPCResult::Type::NUM, \"height\", \"block height when transaction entered pool\"},\n-        RPCResult{RPCResult::Type::NUM, \"descendantcount\", \"number of in-mempool descendant transactions (including this one)\"},\n-        RPCResult{RPCResult::Type::NUM, \"descendantsize\", \"virtual transaction size of in-mempool descendants (including this one)\"},\n-        RPCResult{RPCResult::Type::NUM, \"ancestorcount\", \"number of in-mempool ancestor transactions (including this one)\"},\n-        RPCResult{RPCResult::Type::NUM, \"ancestorsize\", \"virtual transaction size of in-mempool ancestors (including this one)\"},\n-        RPCResult{RPCResult::Type::STR_HEX, \"wtxid\", \"hash of serialized transaction, including witness data\"},\n-        RPCResult{RPCResult::Type::OBJ, \"fees\", \"\",\n-            {\n-                RPCResult{RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee, denominated in \" + CURRENCY_UNIT},\n-                RPCResult{RPCResult::Type::STR_AMOUNT, \"modified\", \"transaction fee with fee deltas used for mining priority, denominated in \" + CURRENCY_UNIT},\n-                RPCResult{RPCResult::Type::STR_AMOUNT, \"ancestor\", \"transaction fees of in-mempool ancestors (including this one) with fee deltas used for mining priority, denominated in \" + CURRENCY_UNIT},\n-                RPCResult{RPCResult::Type::STR_AMOUNT, \"descendant\", \"transaction fees of in-mempool descendants (including this one) with fee deltas used for mining priority, denominated in \" + CURRENCY_UNIT},\n-            }},\n-        RPCResult{RPCResult::Type::ARR, \"depends\", \"unconfirmed transactions used as inputs for this transaction\",\n-            {RPCResult{RPCResult::Type::STR_HEX, \"transactionid\", \"parent transaction id\"}}},\n-        RPCResult{RPCResult::Type::ARR, \"spentby\", \"unconfirmed transactions spending outputs from this transaction\",\n-            {RPCResult{RPCResult::Type::STR_HEX, \"transactionid\", \"child transaction id\"}}},\n-        RPCResult{RPCResult::Type::BOOL, \"bip125-replaceable\", \"Whether this transaction signals BIP125 replaceability or has an unconfirmed ancestor signaling BIP125 replaceability.\\n\"},\n-        RPCResult{RPCResult::Type::BOOL, \"unbroadcast\", \"Whether this transaction is currently unbroadcast (initial broadcast not yet acknowledged by any peers)\"},\n+            RPCResult{RPCResult::Type::NUM, \"weight\", \"transaction weight as defined in BIP 141.\"},\n+            RPCResult{RPCResult::Type::NUM_TIME, \"time\", \"local time transaction entered pool in seconds since 1 Jan 1970 GMT\"},\n+            RPCResult{RPCResult::Type::NUM, \"height\", \"block height when transaction entered pool\"},\n+            RPCResult{RPCResult::Type::NUM, \"descendantcount\", \"number of in-mempool descendant transactions (including this one)\"},\n+            RPCResult{RPCResult::Type::NUM, \"descendantsize\", \"virtual transaction size of in-mempool descendants (including this one)\"},\n+            RPCResult{RPCResult::Type::NUM, \"ancestorcount\", \"number of in-mempool ancestor transactions (including this one)\"},\n+            RPCResult{RPCResult::Type::NUM, \"ancestorsize\", \"virtual transaction size of in-mempool ancestors (including this one)\"},\n+            RPCResult{RPCResult::Type::NUM, \"chunksize\", \"virtual transaction size of this transaction's chunk\"},\n+            RPCResult{RPCResult::Type::NUM, \"clusterid\", \"id of the cluster containing this tx\"},\n+            RPCResult{RPCResult::Type::STR_HEX, \"wtxid\", \"hash of serialized transaction, including witness data\"},\n+            RPCResult{RPCResult::Type::OBJ, \"fees\", \"\",\n+                {\n+                    RPCResult{RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee, denominated in \" + CURRENCY_UNIT},\n+                    RPCResult{RPCResult::Type::STR_AMOUNT, \"modified\", \"transaction fee with fee deltas used for mining priority, denominated in \" + CURRENCY_UNIT},\n+                    RPCResult{RPCResult::Type::STR_AMOUNT, \"ancestor\", \"transaction fees of in-mempool ancestors (including this one) with fee deltas used for mining priority, denominated in \" + CURRENCY_UNIT},\n+                    RPCResult{RPCResult::Type::STR_AMOUNT, \"descendant\", \"transaction fees of in-mempool descendants (including this one) with fee deltas used for mining priority, denominated in \" + CURRENCY_UNIT},\n+                    RPCResult{RPCResult::Type::STR_AMOUNT, \"chunk\", \"transaction fees of chunk, denominated in \" + CURRENCY_UNIT},\n+                }},\n+            RPCResult{RPCResult::Type::ARR, \"depends\", \"unconfirmed transactions used as inputs for this transaction\",\n+                {RPCResult{RPCResult::Type::STR_HEX, \"transactionid\", \"parent transaction id\"}}},\n+            RPCResult{RPCResult::Type::ARR, \"spentby\", \"unconfirmed transactions spending outputs from this transaction\",\n+                {RPCResult{RPCResult::Type::STR_HEX, \"transactionid\", \"child transaction id\"}}},\n+            RPCResult{RPCResult::Type::BOOL, \"bip125-replaceable\", \"Whether this transaction signals BIP125 replaceability or has an unconfirmed ancestor signaling BIP125 replaceability.\\n\"},\n+            RPCResult{RPCResult::Type::BOOL, \"unbroadcast\", \"Whether this transaction is currently unbroadcast (initial broadcast not yet acknowledged by any peers)\"},\n     };\n }\n \n+static void clusterToJSON(const CTxMemPool& pool, UniValue& info, const Cluster& c) EXCLUSIVE_LOCKS_REQUIRED(pool.cs)\n+{\n+    AssertLockHeld(pool.cs);\n+    info.pushKV(\"vsize\", (int)c.m_tx_size);\n+    info.pushKV(\"txcount\", (int)c.m_tx_count);\n+    info.pushKV(\"clusterid\", (int)c.m_id);\n+    UniValue chunks(UniValue::VARR);\n+    for (auto &chunk : c.m_chunks) {",
      "path": "src/rpc/mempool.cpp",
      "position": 83,
      "original_position": 83,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1",
      "in_reply_to_id": 1399223399,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Chunks for a given cluster are already sorted in descending feerate (ie mining score) order, is that what you're asking about or is there another issue I'm overlooking?",
      "created_at": "2023-12-07T16:55:18Z",
      "updated_at": "2023-12-07T16:55:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1419291403",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1419291403"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 312,
      "original_line": 312,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1419299493",
      "pull_request_review_id": 1770638034,
      "id": 1419299493,
      "node_id": "PRRC_kwDOABII585UmMql",
      "diff_hunk": "@@ -60,57 +59,26 @@ std::optional<std::string> GetEntriesForConflicts(const CTransaction& tx,\n {\n     AssertLockHeld(pool.cs);\n     const uint256 txid = tx.GetHash();\n-    uint64_t nConflictingCount = 0;\n-    for (const auto& mi : iters_conflicting) {\n-        nConflictingCount += mi->GetCountWithDescendants();\n-        // Rule #5: don't consider replacing more than MAX_REPLACEMENT_CANDIDATES\n-        // entries from the mempool. This potentially overestimates the number of actual\n-        // descendants (i.e. if multiple conflicts share a descendant, it will be counted multiple\n-        // times), but we just want to be conservative to avoid doing too much work.\n-        if (nConflictingCount > MAX_REPLACEMENT_CANDIDATES) {\n-            return strprintf(\"rejecting replacement %s; too many potential replacements (%d > %d)\\n\",\n-                             txid.ToString(),\n-                             nConflictingCount,\n-                             MAX_REPLACEMENT_CANDIDATES);\n-        }\n-    }\n     // Calculate the set of all transactions that would have to be evicted.\n     for (CTxMemPool::txiter it : iters_conflicting) {\n-        pool.CalculateDescendants(it, all_conflicts);\n-    }\n-    return std::nullopt;\n-}\n-\n-std::optional<std::string> HasNoNewUnconfirmed(const CTransaction& tx,\n-                                               const CTxMemPool& pool,\n-                                               const CTxMemPool::setEntries& iters_conflicting)\n-{\n-    AssertLockHeld(pool.cs);\n-    std::set<uint256> parents_of_conflicts;\n-    for (const auto& mi : iters_conflicting) {\n-        for (const CTxIn& txin : mi->GetTx().vin) {\n-            parents_of_conflicts.insert(txin.prevout.hash);\n+        // Exit early if we're going to fail (see below)\n+        if (all_conflicts.size() > MAX_REPLACEMENT_CANDIDATES) {",
      "path": "src/policy/rbf.cpp",
      "position": null,
      "original_position": 45,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "3a42ba255a73e609ac37eee8288208fa43953779",
      "in_reply_to_id": 1365753481,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I believe I (finally) actually fixed this behavior to count the number of direct conflicts.  ",
      "created_at": "2023-12-07T17:00:39Z",
      "updated_at": "2023-12-07T17:00:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1419299493",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1419299493"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 65,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1419303051",
      "pull_request_review_id": 1770643203,
      "id": 1419303051,
      "node_id": "PRRC_kwDOABII585UmNiL",
      "diff_hunk": "@@ -1135,29 +1457,67 @@ void CTxMemPool::TrimToSize(size_t sizelimit, std::vector<COutPoint>* pvNoSpends\n \n     unsigned nTxnRemoved = 0;\n     CFeeRate maxFeeRateRemoved(0);\n+\n+    // Use a heap to determine which chunks to evict, but only make the heap if\n+    // we're actually above the size limit.\n+    std::vector<Cluster::HeapEntry> heap_chunks;\n+    std::set<Cluster*> clusters_with_evictions;\n     while (!mapTx.empty() && DynamicMemoryUsage() > sizelimit) {\n-        indexed_transaction_set::index<descendant_score>::type::iterator it = mapTx.get<descendant_score>().begin();\n+        if (heap_chunks.empty()) {\n+            for (const auto & [id, cluster] : m_cluster_map) {\n+                if (!cluster->m_chunks.empty()) {\n+                    heap_chunks.emplace_back(cluster->m_chunks.end()-1, cluster.get());\n+                }\n+            }\n+        }\n+\n+        // Define comparison operator on our heap entries (using feerate of chunks).\n+        auto cmp = [](const Cluster::HeapEntry& a, const Cluster::HeapEntry& b) {\n+            // TODO: branch on size of fee to do this as 32-bit calculation\n+            // instead? etc\n+            return a.first->fee*b.first->size > b.first->fee*a.first->size;\n+        };\n+\n+        std::make_heap(heap_chunks.begin(), heap_chunks.end(), cmp);",
      "path": "src/txmempool.cpp",
      "position": null,
      "original_position": 1421,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "26e831d5f2c7db15e7a50f910ddf4e1737d226da",
      "in_reply_to_id": 1367425942,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Should be fixed now.",
      "created_at": "2023-12-07T17:03:28Z",
      "updated_at": "2023-12-07T17:03:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1419303051",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1419303051"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1481,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1421668681",
      "pull_request_review_id": 1773954379,
      "id": 1421668681,
      "node_id": "PRRC_kwDOABII585UvPFJ",
      "diff_hunk": "@@ -1245,3 +1536,169 @@ std::vector<CTxMemPool::txiter> CTxMemPool::GatherClusters(const std::vector<uin\n     }\n     return clustered_txs;\n }\n+\n+void Cluster::AddTransaction(const CTxMemPoolEntry& entry, bool sort)\n+{\n+    m_chunks.emplace_back(entry.GetModifiedFee(), entry.GetTxSize());\n+    m_chunks.back().txs.emplace_back(entry);\n+    entry.m_cluster = this;\n+    ++m_tx_count;\n+    if (sort) Sort();\n+    return;\n+}\n+\n+void Cluster::RemoveTransaction(const CTxMemPoolEntry& entry)\n+{\n+    m_chunks[entry.m_loc.first].txs.erase(entry.m_loc.second);\n+\n+    // Chunk (or cluster) may now be empty, but this will get cleaned up",
      "path": "src/txmempool.cpp",
      "position": null,
      "original_position": 407,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "54f39ca8f101483f5f82707689ca49431d4091e5",
      "in_reply_to_id": 1392567718,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I wouldn't say it's safe to ignore, but the idea is that we often want to be able to batch deletions, and then clean things up in one pass.  So the call sites should all be dealing with this issue and ensuring that we always clean up at some point.\r\n\r\n(This is definitely an area where I expect that we'll be re-engineering all this logic and trying to come up with a better abstraction layer so that this is more robust and easier to think about!)",
      "created_at": "2023-12-10T01:33:24Z",
      "updated_at": "2023-12-10T01:33:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1421668681",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1421668681"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1857,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517064996",
      "pull_request_review_id": 1923884910,
      "id": 1517064996,
      "node_id": "PRRC_kwDOABII585abJMk",
      "diff_hunk": "@@ -764,6 +834,9 @@ class CTxMemPool\n      */\n     void UpdateForDescendants(txiter updateIt, cacheMap& cachedDescendants,\n                               const std::set<uint256>& setExclude, std::set<uint256>& descendants_to_remove) EXCLUSIVE_LOCKS_REQUIRED(cs);\n+    // During reorg we add transactions back to mempool, must reconnect\n+    // clusters with in-mempool descendants.\n+    void UpdateClusterForDescendants(txiter updateIt) EXCLUSIVE_LOCKS_REQUIRED(cs);",
      "path": "src/txmempool.h",
      "position": null,
      "original_position": 97,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "96df5acec30995dcbaf800daf1945b9acff6bfb6",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think the introduction of `Cluster` alters the worst-case computational during re-org, when we reconnect `disconnectpool` to the current mempool. Before the limit we were strictly bounded with `DEFAULT_ANCESTOR_LIMIT` / `DEFAULT_DESCENDANT_LIMIT`. Now we have a `DEFAULT_CLUST_LIMIT`, where the worst-case graph traversal algorithm might have to visit more element than at max 25.",
      "created_at": "2024-03-08T01:47:09Z",
      "updated_at": "2024-03-08T03:55:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1517064996",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517064996"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 839,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517074825",
      "pull_request_review_id": 1923884910,
      "id": 1517074825,
      "node_id": "PRRC_kwDOABII585abLmJ",
      "diff_hunk": "@@ -99,6 +99,41 @@ void CTxMemPool::UpdateForDescendants(txiter updateIt, cacheMap& cachedDescendan\n     mapTx.modify(updateIt, [=](CTxMemPoolEntry& e) { e.UpdateDescendantState(modifySize, modifyFee, modifyCount); });\n }\n \n+void CTxMemPool::UpdateClusterForDescendants(txiter updateIt)\n+{\n+    AssertLockHeld(cs);\n+    CTxMemPoolEntry::Children children = updateIt->GetMemPoolChildrenConst();\n+    std::vector<Cluster *> clusters_to_merge{updateIt->m_cluster};\n+    {\n+        WITH_FRESH_EPOCH(m_epoch);\n+        visited(updateIt->m_cluster);\n+        cachedInnerUsage -= updateIt->m_cluster->GetMemoryUsage();\n+        for (auto child : children) {\n+            if (!visited(child.get().m_cluster)) {\n+                clusters_to_merge.push_back(child.get().m_cluster);\n+                cachedInnerUsage -= child.get().m_cluster->GetMemoryUsage();\n+            }\n+        }\n+    }\n+    if (clusters_to_merge.size() > 1) {\n+        // Merge the other clusters into this one, but keep this cluster as\n+        // first so that it's topologically sound.\n+        clusters_to_merge[0]->Merge(clusters_to_merge.begin()+1, clusters_to_merge.end(), true);\n+        // TODO: limit the size of the cluster, in case it got too big.",
      "path": "src/txmempool.cpp",
      "position": null,
      "original_position": 24,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "96df5acec30995dcbaf800daf1945b9acff6bfb6",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think this introduces a transaction censorship vector for time-sensitive second-layers. If you can re-org one block and construct a cluster such a a target descendant is not reconnected with other clusters, the non-cluster connected target descendant might have a stale feerate. This descendant could be pinnned in the bottom of the local mempool.",
      "created_at": "2024-03-08T02:05:16Z",
      "updated_at": "2024-03-08T03:55:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1517074825",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517074825"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 122,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517078978",
      "pull_request_review_id": 1923884910,
      "id": 1517078978,
      "node_id": "PRRC_kwDOABII585abMnC",
      "diff_hunk": "@@ -474,6 +531,42 @@ void CTxMemPool::addUnchecked(const CTxMemPoolEntry &entry, setEntries &setAnces\n     txns_randomized.emplace_back(newit->GetSharedTx());\n     newit->idx_randomized = txns_randomized.size() - 1;\n \n+    // Figure out which cluster this transaction belongs to.\n+    auto iterset = GetIterSet(setParentTransactions);\n+    std::vector<Cluster*> clusters_to_merge;\n+    {\n+        WITH_FRESH_EPOCH(m_epoch);\n+        for (auto parentit : iterset) {\n+            if (!visited(parentit->m_cluster)) {\n+                clusters_to_merge.push_back(parentit->m_cluster);\n+            }\n+        }\n+    }\n+\n+    // Merge all the clusters together.\n+    if (clusters_to_merge.size() == 0) {\n+        // No parents, make a new cluster.\n+        newit->m_cluster = AssignCluster();\n+        newit->m_cluster->AddTransaction(*newit, true);\n+        cachedInnerUsage += newit->m_cluster->GetMemoryUsage();\n+    } else if (clusters_to_merge.size() == 1) {\n+        cachedInnerUsage -= clusters_to_merge[0]->GetMemoryUsage();\n+        // Only one parent cluster: add to it.\n+        clusters_to_merge[0]->AddTransaction(*newit, true);\n+        cachedInnerUsage += clusters_to_merge[0]->GetMemoryUsage();\n+    } else {\n+        cachedInnerUsage -= clusters_to_merge[0]->GetMemoryUsage();\n+        clusters_to_merge[0]->Merge(clusters_to_merge.begin()+1, clusters_to_merge.end(), false);",
      "path": "src/txmempool.cpp",
      "position": null,
      "original_position": 107,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "96df5acec30995dcbaf800daf1945b9acff6bfb6",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This can bind max number of clusts's `Merge()`. `addUnchecked()` internal logic differs on tip commit.",
      "created_at": "2024-03-08T02:13:29Z",
      "updated_at": "2024-03-08T03:55:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1517078978",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517078978"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 559,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517086414",
      "pull_request_review_id": 1923884910,
      "id": 1517086414,
      "node_id": "PRRC_kwDOABII585abObO",
      "diff_hunk": "@@ -586,6 +682,105 @@ void CTxMemPool::removeRecursive(const CTransaction &origTx, MemPoolRemovalReaso\n         RemoveStaged(setAllRemoves, false, reason);\n }\n \n+Cluster* CTxMemPool::AssignCluster()\n+{\n+    auto new_cluster = std::make_unique<Cluster>(m_next_cluster_id++, this);\n+    Cluster* ret = new_cluster.get(); // XXX No one is going to like this.\n+    m_cluster_map[new_cluster->m_id] = std::move(new_cluster);\n+    return ret;\n+}\n+\n+// When transactions are removed from a cluster, the cluster might get split\n+// into smaller clusters.\n+void CTxMemPool::RecalculateClusterAndMaybeSort(Cluster *cluster, bool sort)\n+{\n+    // TODO: if the common case involves no cluster splitting, can we short\n+    // circuit the work here somehow?\n+\n+    // Wipe cluster assignments.\n+    std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef> txs;\n+    for (auto& chunk : cluster->m_chunks) {\n+        for (auto& txentry: chunk.txs) {\n+            txentry.get().m_cluster = nullptr;\n+            txs.push_back(txentry);\n+        }\n+    }\n+    cluster->Clear();\n+\n+    // The first transaction gets to stay in the existing cluster.\n+    bool first = true;\n+    for (auto& txentry : txs) {\n+        if (txentry.get().m_cluster == nullptr) {\n+            if (first) {\n+                txentry.get().m_cluster = cluster;\n+                first = false;\n+            } else {\n+                txentry.get().m_cluster = AssignCluster();\n+            }\n+            txentry.get().m_cluster->AddTransaction(txentry.get(), false);\n+            // We need to label all transactions connected to this one as\n+            // being in the same cluster.\n+            {\n+                WITH_FRESH_EPOCH(m_epoch);\n+                auto children = txentry.get().GetMemPoolChildrenConst();\n+                std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef> work_queue;\n+                for (auto entry : children) {\n+                    work_queue.push_back(entry);\n+                    visited(entry.get());\n+                }\n+\n+                while (!work_queue.empty()) {",
      "path": "src/txmempool.cpp",
      "position": null,
      "original_position": 182,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "96df5acec30995dcbaf800daf1945b9acff6bfb6",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think here a counter should be introduced to avoid iterating on more than `DEFAULT_CLUSTER_LIMIT` on this `work_queue`. Its in `RemoveStaged` itself call in `Finalize`, I think you might have temporarily unbounded numbers with conflicting descendants transactions.",
      "created_at": "2024-03-08T02:27:24Z",
      "updated_at": "2024-03-08T03:55:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1517086414",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517086414"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 732,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517091357",
      "pull_request_review_id": 1923884910,
      "id": 1517091357,
      "node_id": "PRRC_kwDOABII585abPod",
      "diff_hunk": "@@ -1235,3 +1526,169 @@ std::vector<CTxMemPool::txiter> CTxMemPool::GatherClusters(const std::vector<uin\n     }\n     return clustered_txs;\n }\n+\n+void Cluster::AddTransaction(const CTxMemPoolEntry& entry, bool sort)\n+{\n+    m_chunks.emplace_back(entry.GetModifiedFee(), entry.GetTxSize());\n+    m_chunks.back().txs.emplace_back(entry);\n+    entry.m_cluster = this;\n+    ++m_tx_count;\n+    if (sort) Sort();\n+    return;\n+}\n+\n+void Cluster::RemoveTransaction(const CTxMemPoolEntry& entry)\n+{\n+    m_chunks[entry.m_loc.first].txs.erase(entry.m_loc.second);\n+\n+    // Chunk (or cluster) may now be empty, but this will get cleaned up\n+    // when the cluster is re-sorted (or when the cluster is deleted) Note:",
      "path": "src/txmempool.cpp",
      "position": null,
      "original_position": 408,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "96df5acec30995dcbaf800daf1945b9acff6bfb6",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think you will have computational threshold effect with whatever limits youre picking up for max cluster size and chunk ordering parameters. Namely, what is the minimal chunk modification that can provoke the maximum of re-ordering of all in-cluster chunks.",
      "created_at": "2024-03-08T02:34:53Z",
      "updated_at": "2024-03-08T03:55:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1517091357",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517091357"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1545,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517094848",
      "pull_request_review_id": 1923884910,
      "id": 1517094848,
      "node_id": "PRRC_kwDOABII585abQfA",
      "diff_hunk": "@@ -1235,3 +1526,169 @@ std::vector<CTxMemPool::txiter> CTxMemPool::GatherClusters(const std::vector<uin\n     }\n     return clustered_txs;\n }\n+\n+void Cluster::AddTransaction(const CTxMemPoolEntry& entry, bool sort)\n+{\n+    m_chunks.emplace_back(entry.GetModifiedFee(), entry.GetTxSize());\n+    m_chunks.back().txs.emplace_back(entry);\n+    entry.m_cluster = this;\n+    ++m_tx_count;\n+    if (sort) Sort();\n+    return;\n+}\n+\n+void Cluster::RemoveTransaction(const CTxMemPoolEntry& entry)\n+{\n+    m_chunks[entry.m_loc.first].txs.erase(entry.m_loc.second);\n+\n+    // Chunk (or cluster) may now be empty, but this will get cleaned up\n+    // when the cluster is re-sorted (or when the cluster is deleted) Note:\n+    // if we cleaned up empty chunks here, then this would break the\n+    // locations of other entries in the cluster. Since we would like to be\n+    // able to do multiple removals in a row and then clean up the sort, we\n+    // can't clean up empty chunks here.\n+    --m_tx_count;\n+    return;\n+}\n+\n+void Cluster::RechunkFromLinearization(std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef>& txs, bool reassign_locations)\n+{\n+    m_chunks.clear();\n+\n+    for (auto txentry : txs) {\n+        m_chunks.emplace_back(txentry.get().GetModifiedFee(), txentry.get().GetTxSize());\n+        m_chunks.back().txs.emplace_back(txentry);\n+        while (m_chunks.size() >= 2) {\n+            auto cur_iter = std::prev(m_chunks.end());\n+            auto prev_iter = std::prev(cur_iter);\n+            double feerate_prev = prev_iter->fee*cur_iter->size;\n+            double feerate_cur = cur_iter->fee*prev_iter->size;\n+            // We only combine chunks if the feerate would go up; if two\n+            // chunks have equal feerate, we prefer to keep the smaller\n+            // chunksize (which is generally better for both mining and\n+            // eviction).",
      "path": "src/txmempool.cpp",
      "position": null,
      "original_position": 432,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "96df5acec30995dcbaf800daf1945b9acff6bfb6",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think this is a broken assumption. Youre using virtual bytes (`GetTxSize()`), however an equivalent feerate cluster can have a smaller total witness unit as such a higher feerate w.r.t consensus rules (`MAX_BLOCK_WEIGHT`) and it should be selected in a mining block template.",
      "created_at": "2024-03-08T02:41:34Z",
      "updated_at": "2024-03-08T03:55:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1517094848",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517094848"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1569,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517104617",
      "pull_request_review_id": 1923884910,
      "id": 1517104617,
      "node_id": "PRRC_kwDOABII585abS3p",
      "diff_hunk": "@@ -1235,3 +1526,169 @@ std::vector<CTxMemPool::txiter> CTxMemPool::GatherClusters(const std::vector<uin\n     }\n     return clustered_txs;\n }\n+\n+void Cluster::AddTransaction(const CTxMemPoolEntry& entry, bool sort)\n+{\n+    m_chunks.emplace_back(entry.GetModifiedFee(), entry.GetTxSize());\n+    m_chunks.back().txs.emplace_back(entry);\n+    entry.m_cluster = this;\n+    ++m_tx_count;\n+    if (sort) Sort();\n+    return;\n+}\n+\n+void Cluster::RemoveTransaction(const CTxMemPoolEntry& entry)\n+{\n+    m_chunks[entry.m_loc.first].txs.erase(entry.m_loc.second);\n+\n+    // Chunk (or cluster) may now be empty, but this will get cleaned up\n+    // when the cluster is re-sorted (or when the cluster is deleted) Note:\n+    // if we cleaned up empty chunks here, then this would break the\n+    // locations of other entries in the cluster. Since we would like to be\n+    // able to do multiple removals in a row and then clean up the sort, we\n+    // can't clean up empty chunks here.\n+    --m_tx_count;\n+    return;\n+}\n+\n+void Cluster::RechunkFromLinearization(std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef>& txs, bool reassign_locations)\n+{\n+    m_chunks.clear();\n+\n+    for (auto txentry : txs) {\n+        m_chunks.emplace_back(txentry.get().GetModifiedFee(), txentry.get().GetTxSize());\n+        m_chunks.back().txs.emplace_back(txentry);\n+        while (m_chunks.size() >= 2) {\n+            auto cur_iter = std::prev(m_chunks.end());\n+            auto prev_iter = std::prev(cur_iter);\n+            double feerate_prev = prev_iter->fee*cur_iter->size;\n+            double feerate_cur = cur_iter->fee*prev_iter->size;\n+            // We only combine chunks if the feerate would go up; if two\n+            // chunks have equal feerate, we prefer to keep the smaller\n+            // chunksize (which is generally better for both mining and\n+            // eviction).\n+            if (feerate_cur > feerate_prev) {\n+                prev_iter->fee += cur_iter->fee;\n+                prev_iter->size += cur_iter->size;\n+                prev_iter->txs.splice(prev_iter->txs.end(), cur_iter->txs, cur_iter->txs.begin(), cur_iter->txs.end());\n+                m_chunks.erase(cur_iter);\n+            } else {\n+                break;\n+            }\n+        }\n+    }\n+\n+    if (reassign_locations) {\n+        // Update locations of all transactions\n+        for (size_t i=0; i<m_chunks.size(); ++i) {\n+            for (auto it = m_chunks[i].txs.begin(); it != m_chunks[i].txs.end(); ++it) {\n+                it->get().m_loc = {i, it};\n+            }\n+        }\n+    }\n+}\n+\n+// Topologically sort the cluster, and update memory usage.\n+void Cluster::Sort(bool reassign_locations)\n+{\n+    LOCK(m_mempool->cs);\n+    std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef> txs;\n+\n+    // Insert all transactions from the cluster into txs\n+    for (auto &chunk : m_chunks) {\n+        for (auto chunk_tx : chunk.txs) {\n+            txs.push_back(chunk_tx.get());\n+        }\n+    }\n+    // Sorting by ancestor count is equivalent to topological sort.\n+    std::sort(txs.begin(), txs.end(), [](const CTxMemPoolEntry::CTxMemPoolEntryRef& a, const CTxMemPoolEntry::CTxMemPoolEntryRef& b) {\n+        return a.get().GetCountWithAncestors() < b.get().GetCountWithAncestors();",
      "path": "src/txmempool.cpp",
      "position": null,
      "original_position": 468,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "96df5acec30995dcbaf800daf1945b9acff6bfb6",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Note topological sort is not defined. At the very least you can have `a` and `b` both being the first child of a single ancestor and still being the 2rd and 3rd child of a common ancestor. Strictly inferior here cannot be say to be equivalent.",
      "created_at": "2024-03-08T02:56:23Z",
      "updated_at": "2024-03-08T03:55:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1517104617",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517104617"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1605,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517111975",
      "pull_request_review_id": 1923884910,
      "id": 1517111975,
      "node_id": "PRRC_kwDOABII585abUqn",
      "diff_hunk": "@@ -247,34 +247,81 @@ static RPCHelpMan testmempoolaccept()\n     };\n }\n \n+static std::vector<RPCResult> ClusterDescription()\n+{\n+    return {\n+        RPCResult{RPCResult::Type::NUM, \"vsize\", \"virtual transaction size as defined in BIP 141. This is different from actual serialized size for witness transactions as witness data is discounted.\"},\n+        RPCResult{RPCResult::Type::NUM, \"txcount\", \"number of transactions (including this one)\"},\n+        RPCResult{RPCResult::Type::NUM, \"clusterid\", \"id of the cluster containing this tx\"},",
      "path": "src/rpc/mempool.cpp",
      "position": 9,
      "original_position": 9,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "ce414135924f2ab015e785b95114f1f998c45043",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "About the `clusterid` (`m_next_cluster_id`), I dont think its a good idea to use it as a tie-breaker in `CompareMiningScore` as its just a monotonic counter, its not information perfomative for a mining score. You could use weight at least or reception timestamp e.g oldest the tx-relay reception more well-propagated on the network, already in every miner mempool.",
      "created_at": "2024-03-08T03:11:15Z",
      "updated_at": "2024-03-08T03:55:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1517111975",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517111975"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 259,
      "original_line": 259,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517112700",
      "pull_request_review_id": 1923884910,
      "id": 1517112700,
      "node_id": "PRRC_kwDOABII585abU18",
      "diff_hunk": "@@ -370,6 +420,76 @@ UniValue MempoolToJSON(const CTxMemPool& pool, bool verbose, bool include_mempoo\n     }\n }\n \n+static RPCHelpMan getmempoolfeesize()\n+{\n+    return RPCHelpMan{\"getmempoolfeesize\",\n+        \"Returns fee/size data for the whole mempool.\",",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 126,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "ce414135924f2ab015e785b95114f1f998c45043",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Obviously you can add fee/weight units here. ",
      "created_at": "2024-03-08T03:12:43Z",
      "updated_at": "2024-03-08T03:55:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1517112700",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517112700"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 426,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517121744",
      "pull_request_review_id": 1923884910,
      "id": 1517121744,
      "node_id": "PRRC_kwDOABII585abXDQ",
      "diff_hunk": "@@ -0,0 +1,157 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_FEEFRAC_H\n+#define BITCOIN_UTIL_FEEFRAC_H\n+\n+#include <assert.h>\n+#include <stdint.h>\n+\n+/** Data structure storing a fee and size, ordered by increasing fee/size.\n+ *\n+ * The size of a FeeFrac cannot be zero unless the fee is also zero.\n+ *\n+ * FeeFracs have a total ordering, first by increasing feerate (ratio of fee over size), and then\n+ * by decreasing size. The empty FeeFrac (fee and size both 0) sorts last. So for example, the",
      "path": "src/util/feefrac.h",
      "position": null,
      "original_position": 16,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "bb1bc54a7c980fb220d32e16e9504d53a87dcee8",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This is not perfect as you could use weight units and even have to consider what is the minimal satisfying witness under given consensus rules for a given transaction, especially if you have multiple candidate for a spend given a `witnessScript`. You have already such types of transaction like second-stage LN transactions (either revocation path or preimage/timeout path).",
      "created_at": "2024-03-08T03:31:50Z",
      "updated_at": "2024-03-08T03:55:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1517121744",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517121744"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 19,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517127592",
      "pull_request_review_id": 1923884910,
      "id": 1517127592,
      "node_id": "PRRC_kwDOABII585abYeo",
      "diff_hunk": "@@ -0,0 +1,157 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_FEEFRAC_H\n+#define BITCOIN_UTIL_FEEFRAC_H\n+\n+#include <assert.h>\n+#include <stdint.h>\n+\n+/** Data structure storing a fee and size, ordered by increasing fee/size.\n+ *\n+ * The size of a FeeFrac cannot be zero unless the fee is also zero.\n+ *\n+ * FeeFracs have a total ordering, first by increasing feerate (ratio of fee over size), and then\n+ * by decreasing size. The empty FeeFrac (fee and size both 0) sorts last. So for example, the\n+ * following FeeFracs are in sorted order:\n+ *\n+ * - fee=0 size=1 (feerate 0)\n+ * - fee=1 size=2 (feerate 0.5)\n+ * - fee=2 size=3 (feerate 0.667...)\n+ * - fee=2 size=2 (feerate 1)\n+ * - fee=1 size=1 (feerate 1)\n+ * - fee=3 size=2 (feerate 1.5)\n+ * - fee=2 size=1 (feerate 2)\n+ * - fee=0 size=0 (undefined feerate)\n+ *\n+ * A FeeFrac is considered \"better\" if it sorts after another, by this ordering. All standard\n+ * comparison operators (==, !=, >, <, >=, <=) respect this ordering.\n+ *\n+ * The >> and << operators only compare feerate and treat equal feerate but different size as\n+ * equivalent. The empty FeeFrac is neither lower or higher in feerate than any other.\n+ *\n+ * These comparisons are only guaranteed to be correct when the product of the highest fee and\n+ * highest size does not exceed 2^64-1. If the fee is a number in sats, and size in bytes, then\n+ * this allows up to 46116.86 BTC at size 4M, and 1844674.4 BTC at size 100k).",
      "path": "src/util/feefrac.h",
      "position": null,
      "original_position": 36,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "bb1bc54a7c980fb220d32e16e9504d53a87dcee8",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think this should be `MAX_MONEY` as `ReplacementChecks()` in `PreChecks()` are done before `PolicyScriptChecks()` and `ConsensusScriptChecks()` so an adversary does not have to own the solution of the scriptpubkey to fake `46116.86` or `1844674.4` of value in your local mempool, exceeds 2^64-1 and mess up with linearization.",
      "created_at": "2024-03-08T03:44:35Z",
      "updated_at": "2024-03-08T03:55:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1517127592",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517127592"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 36,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1592480884",
      "pull_request_review_id": 2043188274,
      "id": 1592480884,
      "node_id": "PRRC_kwDOABII585e61R0",
      "diff_hunk": "@@ -0,0 +1,1352 @@\n+#include <kernel/txgraph.h>\n+#include <cluster_linearize.h>\n+#include <util/time.h>\n+#include <logging.h>\n+#include <reverse_iterator.h>\n+#include <util/strencodings.h>\n+\n+void TxGraphCluster::AddTransaction(const TxEntry& entry, bool sort)\n+{\n+    m_chunks.emplace_back(entry.GetModifiedFee(), entry.GetTxSize());\n+    m_chunks.back().txs.emplace_back(entry);\n+    //entry.m_cluster = this; XXX do we need this? it breaks the rbf logic.\n+    ++m_tx_count;\n+    m_tx_size += entry.GetTxSize();\n+    if (sort) Sort();\n+    return;\n+}\n+\n+void TxGraphCluster::RemoveTransaction(const TxEntry& entry)\n+{\n+    m_chunks[entry.m_loc.first].txs.erase(entry.m_loc.second);\n+\n+    // Chunk (or cluster) may now be empty, but this will get cleaned up\n+    // when the cluster is re-sorted (or when the cluster is deleted) Note:\n+    // if we cleaned up empty chunks here, then this would break the\n+    // locations of other entries in the cluster. Since we would like to be\n+    // able to do multiple removals in a row and then clean up the sort, we\n+    // can't clean up empty chunks here.\n+    --m_tx_count;\n+    m_tx_size -= entry.m_virtual_size;\n+    return;\n+}\n+\n+void TxGraphCluster::RechunkFromLinearization(std::vector<TxEntry::TxEntryRef>& txs, bool reassign_locations)\n+{\n+    m_chunks.clear();\n+    m_tx_size = 0;\n+\n+    for (auto txentry : txs) {\n+        m_chunks.emplace_back(txentry.get().GetModifiedFee(), txentry.get().GetTxSize());\n+        m_chunks.back().txs.emplace_back(txentry);\n+        while (m_chunks.size() >= 2) {\n+            auto cur_iter = std::prev(m_chunks.end());\n+            auto prev_iter = std::prev(cur_iter);\n+            // We only combine chunks if the feerate would go up; if two\n+            // chunks have equal feerate, we prefer to keep the smaller\n+            // chunksize (which is generally better for both mining and\n+            // eviction).\n+            if (prev_iter->feerate < cur_iter->feerate) {\n+                prev_iter->feerate += cur_iter->feerate;\n+                prev_iter->txs.splice(prev_iter->txs.end(), cur_iter->txs, cur_iter->txs.begin(), cur_iter->txs.end());\n+                m_chunks.erase(cur_iter);\n+            } else {\n+                break;\n+            }\n+        }\n+        m_tx_size += txentry.get().GetTxSize();\n+    }\n+\n+    if (reassign_locations) {\n+        AssignTransactions();\n+    }\n+}\n+\n+void TxGraphCluster::AssignTransactions()\n+{\n+    // Update locations of all transactions\n+    for (size_t i=0; i<m_chunks.size(); ++i) {\n+        for (auto it = m_chunks[i].txs.begin(); it != m_chunks[i].txs.end(); ++it) {\n+            it->get().m_cluster = this;\n+            it->get().m_loc = {i, it};\n+        }\n+    }\n+}\n+\n+TxEntry::TxEntryRef TxGraphCluster::GetLastTransaction()\n+{\n+    assert(m_tx_count > 0);\n+    for (auto chunkit = m_chunks.rbegin(); chunkit != m_chunks.rend(); ++chunkit) {\n+        if (!chunkit->txs.empty()) return chunkit->txs.back();\n+    }\n+    // Unreachable\n+    assert(false);\n+}\n+\n+bool TxGraphCluster::Check() const\n+{\n+    // First check that the metadata is correct.\n+    int64_t tx_count = 0;\n+    int64_t tx_size = 0;\n+    for (auto &chunk : m_chunks) {\n+        for (auto &tx : chunk.txs) {\n+            ++tx_count;\n+            tx_size += tx.get().GetTxSize();\n+        }\n+    }\n+    if (tx_count != m_tx_count) return false;\n+    if (tx_size != m_tx_size) return false;\n+\n+    // Check topology.\n+    std::set<TxEntry::TxEntryRef, TxEntry::CompareById> seen_elements;\n+    for (auto &chunk : m_chunks) {\n+        for (auto tx : chunk.txs) {\n+            for (auto parent : tx.get().GetTxEntryParents()) {\n+                if (seen_elements.count(parent) == 0) return false;\n+            }\n+            seen_elements.insert(tx);\n+            if (tx.get().m_cluster != this) return false;\n+            if (&m_chunks[tx.get().m_loc.first] != &chunk) return false;\n+            if (tx.get().m_loc.second->get().unique_id != tx.get().unique_id) return false;\n+        }\n+    }\n+    return true;\n+}\n+\n+bool TxGraphCluster::CheckTopo() const\n+{\n+    // Check topology.\n+    std::set<TxEntry::TxEntryRef, TxEntry::CompareById> seen_elements;\n+    for (auto &chunk : m_chunks) {\n+        for (auto tx : chunk.txs) {\n+            for (auto parent : tx.get().GetTxEntryParents()) {\n+                if (seen_elements.count(parent) == 0) return false;\n+            }\n+            seen_elements.insert(tx);\n+        }\n+    }\n+    return true;\n+}\n+\n+namespace {\n+\n+template <typename SetType>\n+std::vector<TxEntry::TxEntryRef> InvokeSort(size_t tx_count, const std::vector<TxGraphCluster::Chunk>& chunks)\n+{\n+    std::vector<TxEntry::TxEntryRef> txs;\n+    cluster_linearize::Cluster<SetType> cluster;\n+    const auto time_1{SteadyClock::now()};\n+\n+    std::vector<TxEntry::TxEntryRef> orig_txs;\n+    std::vector<std::pair<const TxEntry*, unsigned>> entry_to_index;\n+    cluster_linearize::LinearizationResult result;\n+\n+    cluster.reserve(tx_count);\n+    entry_to_index.reserve(tx_count);\n+    cluster.clear();\n+    for (auto &chunk : chunks) {\n+        for (auto tx : chunk.txs) {\n+            orig_txs.emplace_back(tx);\n+            cluster.emplace_back(FeeFrac(tx.get().GetModifiedFee(), tx.get().GetTxSize()), SetType{});\n+            entry_to_index.emplace_back(&(tx.get()), cluster.size() - 1);\n+        }\n+    }\n+    std::sort(entry_to_index.begin(), entry_to_index.end());\n+    for (size_t i=0; i<orig_txs.size(); ++i) {\n+        for (auto& parent : orig_txs[i].get().GetTxEntryParents()) {\n+            auto it = std::lower_bound(entry_to_index.begin(), entry_to_index.end(), &(parent.get()),\n+                    [&](const auto& a, const auto& b) { return std::less<const TxEntry*>()(a.first, b); });\n+            assert(it != entry_to_index.end());\n+            assert(it->first == &(parent.get()));\n+            cluster[i].second.Set(it->second);\n+        }\n+    }\n+    result = cluster_linearize::LinearizeCluster(cluster, 10, 0);\n+    if (tx_count > 10) {\n+        std::vector<unsigned int> orig_linearization;\n+        orig_linearization.reserve(tx_count);\n+        for (unsigned int i=0; i<cluster.size(); ++i) {\n+            orig_linearization.push_back(i);\n+        }\n+        result.linearization = cluster_linearize::MergeLinearizations(cluster, result.linearization, orig_linearization);\n+        cluster_linearize::PostLinearization(cluster, result.linearization);\n+        cluster_linearize::PostLinearization<SetType, true>(cluster, result.linearization);\n+    }\n+    txs.clear();\n+    for (auto index : result.linearization) {\n+        txs.push_back(orig_txs[index]);\n+    }\n+\n+    const auto time_2{SteadyClock::now()};\n+    if (tx_count >= 10) {\n+        double time_millis = Ticks<MillisecondsDouble>(time_2-time_1);\n+\n+        LogPrint(BCLog::BENCH, \"InvokeSort linearize cluster: %zu txs, %.4fms, %u iter, %.1fns/iter, %u comps, %.1fns/comp, encoding: %s\\n\",\n+                tx_count,\n+                time_millis,\n+                result.iterations,\n+                time_millis * 1000000.0 / (result.iterations > 0 ? result.iterations : result.iterations+1),\n+                result.comparisons,\n+                time_millis * 1000000.0 / (result.comparisons > 0 ? result.comparisons : result.comparisons+1),\n+                HexStr(cluster_linearize::DumpCluster(cluster)));\n+    }\n+    return txs;\n+}\n+\n+} // namespace\n+\n+void TxGraphCluster::Sort(bool reassign_locations)\n+{\n+    std::vector<TxEntry::TxEntryRef> txs;\n+    if (m_tx_count <= 32) {\n+        txs = InvokeSort<BitSet<32>>(m_tx_count, m_chunks);\n+    } else if (m_tx_count <= 64) {\n+        txs = InvokeSort<BitSet<64>>(m_tx_count, m_chunks);\n+    } else if (m_tx_count <= 128) {\n+        txs = InvokeSort<BitSet<128>>(m_tx_count, m_chunks);\n+    } else if (m_tx_count <= 192) {\n+        txs = InvokeSort<BitSet<192>>(m_tx_count, m_chunks);\n+    } else if (m_tx_count <= 256) {\n+        txs = InvokeSort<BitSet<256>>(m_tx_count, m_chunks);\n+    } else if (m_tx_count <= 320) {\n+        txs = InvokeSort<BitSet<320>>(m_tx_count, m_chunks);\n+    } else if (m_tx_count <= 384) {\n+        txs = InvokeSort<BitSet<384>>(m_tx_count, m_chunks);\n+    } else if (m_tx_count <= 1280) {\n+        txs = InvokeSort<BitSet<1280>>(m_tx_count, m_chunks);\n+    } else {\n+        // Only do the topological sort for big clusters\n+        for (auto &chunk : m_chunks) {\n+            for (auto chunk_tx : chunk.txs) {\n+                txs.emplace_back(chunk_tx.get());\n+            }\n+        }\n+        m_tx_graph->TopoSort(txs);\n+    }\n+    RechunkFromLinearization(txs, reassign_locations);\n+}\n+\n+void TxGraphCluster::Rechunk()\n+{\n+    std::vector<TxEntry::TxEntryRef> txs;\n+\n+    // Insert all transactions from the cluster into txs\n+    for (auto &chunk : m_chunks) {\n+        for (auto chunk_tx : chunk.txs) {\n+            txs.push_back(chunk_tx);\n+        }\n+    }\n+\n+    RechunkFromLinearization(txs, true);\n+}\n+\n+void TxGraphCluster::MergeCopy(std::vector<TxGraphCluster*>::const_iterator first, std::vector<TxGraphCluster*>::const_iterator last)\n+{\n+    if (first == last) return;\n+\n+    for (auto it=first; it != last; ++it) {\n+        for (auto &chunk : (*it)->m_chunks) {\n+            for (auto &tx: chunk.txs) {\n+                AddTransaction(tx, false);\n+            }\n+        }\n+    }\n+}\n+\n+// Merge the clusters from [first, last) into this cluster.\n+void TxGraphCluster::Merge(std::vector<TxGraphCluster*>::iterator first, std::vector<TxGraphCluster*>::iterator last, bool this_cluster_first)\n+{\n+    // Check to see if we have anything to do.\n+    if (first == last) return;\n+\n+    std::vector<Chunk> new_chunks;\n+    std::vector<TxGraphCluster::HeapEntry> heap_chunks;\n+\n+    int64_t total_txs = m_tx_count;\n+\n+    // Make a heap of all the best chunks.\n+    for (auto it = first; it != last; ++it) {\n+        if ((*it)->m_chunks.size() > 0) {\n+            heap_chunks.emplace_back((*it)->m_chunks.begin(), *it);\n+        }\n+        total_txs += (*it)->m_tx_count;\n+    }\n+\n+    // During a reorg, we want to merge clusters corresponding to descendants\n+    // so that they appear after the cluster with their parent. This allows us\n+    // to trim megaclusters down to our cluster size limit in a way that\n+    // respects topology but still preferences higher feerate chunks over lower\n+    // feerate chunks.\n+    if (this_cluster_first) {\n+        new_chunks = std::move(m_chunks);\n+        m_chunks.clear();\n+    } else if (m_tx_count > 0) {\n+        heap_chunks.emplace_back(m_chunks.begin(), this);\n+    }\n+    // Define comparison operator on our heap entries (using feerate of chunks).\n+    auto cmp = [](const TxGraphCluster::HeapEntry& a, const TxGraphCluster::HeapEntry& b) {\n+        return a.first->feerate < b.first->feerate;\n+    };\n+\n+    std::make_heap(heap_chunks.begin(), heap_chunks.end(), cmp);\n+\n+    while (!heap_chunks.empty()) {\n+        // Take the best chunk from the heap.\n+        auto best_chunk = heap_chunks.front();\n+        new_chunks.emplace_back(std::move(*(best_chunk.first)));\n+        // Remove the best chunk from the heap.\n+        std::pop_heap(heap_chunks.begin(), heap_chunks.end(), cmp);\n+        heap_chunks.pop_back();\n+        // If the cluster has more chunks, add the next best chunk to the heap.\n+        ++best_chunk.first;\n+        if (best_chunk.first != best_chunk.second->m_chunks.end()) {\n+            heap_chunks.emplace_back(best_chunk.first, best_chunk.second);\n+            std::push_heap(heap_chunks.begin(), heap_chunks.end(), cmp);\n+        }\n+    }\n+\n+    // At this point we've merged the clusters into new_chunks.\n+    m_chunks = std::move(new_chunks);\n+\n+    m_tx_count=0;\n+    m_tx_size=0;\n+\n+    for (size_t i=0; i<m_chunks.size(); ++i) {\n+        m_tx_count += m_chunks[i].txs.size();\n+        m_tx_size += m_chunks[i].feerate.size;\n+    }\n+\n+    // Update the cluster and location information for each transaction.\n+    AssignTransactions();\n+\n+    assert(m_tx_count == total_txs);\n+}\n+\n+void TxGraph::UpdateClusterIndex(TxGraphCluster* c)\n+{\n+    auto it = m_cluster_index.get<id>().find(c->m_id);\n+    if (it != m_cluster_index.get<id>().end()) {\n+        m_cluster_index.get<id>().erase(it);\n+    }\n+    m_cluster_index.insert(c);\n+}\n+\n+void TxGraph::EraseCluster(TxGraphCluster* c)\n+{\n+    LOCK(cs);\n+    auto it = m_cluster_index.get<id>().find(c->m_id);\n+    if (it != m_cluster_index.get<id>().end()) {\n+        m_cluster_index.get<id>().erase(it);\n+    }\n+    m_cluster_map.erase(c->m_id);\n+}\n+\n+void TxGraph::AddTx(TxEntry *new_tx, int32_t vsize, CAmount modified_fee, const std::vector<TxEntry::TxEntryRef>& parents)\n+{\n+    LOCK(cs);\n+    new_tx->m_virtual_size = vsize;\n+    new_tx->m_modified_fee = modified_fee;\n+    new_tx->GetTxEntryParents().clear();\n+    // Figure out which cluster this transaction belongs to.\n+    std::vector<TxGraphCluster*> clusters_to_merge;\n+    {\n+        WITH_FRESH_EPOCH(m_epoch);\n+        for (auto p : parents) {\n+            UpdateParent(*new_tx, p, true);\n+            UpdateChild(p, *new_tx, true);\n+            if (!visited(p.get().m_cluster)) {\n+                clusters_to_merge.push_back(p.get().m_cluster);\n+            }\n+        }\n+    }\n+\n+    // Merge all the clusters together.\n+    if (clusters_to_merge.size() == 0) {\n+        // No parents, make a new cluster.\n+        new_tx->m_cluster = AssignTxGraphCluster();\n+        new_tx->m_cluster->AddTransaction(*new_tx, true);\n+        cachedInnerUsage += new_tx->m_cluster->GetMemoryUsage();\n+        UpdateClusterIndex(new_tx->m_cluster);\n+    } else if (clusters_to_merge.size() == 1) {\n+        cachedInnerUsage -= clusters_to_merge[0]->GetMemoryUsage();\n+        // Only one parent cluster: add to it.\n+        new_tx->m_cluster = clusters_to_merge[0];\n+        clusters_to_merge[0]->AddTransaction(*new_tx, true);\n+        cachedInnerUsage += clusters_to_merge[0]->GetMemoryUsage();\n+        UpdateClusterIndex(new_tx->m_cluster);\n+    } else {\n+        cachedInnerUsage -= clusters_to_merge[0]->GetMemoryUsage();\n+        clusters_to_merge[0]->Merge(clusters_to_merge.begin()+1, clusters_to_merge.end(), false);\n+        // Add this transaction to the cluster.\n+        new_tx->m_cluster = clusters_to_merge[0];\n+        clusters_to_merge[0]->AddTransaction(*new_tx, true);\n+        UpdateClusterIndex(new_tx->m_cluster);\n+        // Need to delete the other clusters.\n+        for (auto it=clusters_to_merge.begin()+1; it != clusters_to_merge.end(); ++it) {\n+            cachedInnerUsage -= (*it)->GetMemoryUsage();\n+            EraseCluster(*it);\n+        }\n+        cachedInnerUsage += clusters_to_merge[0]->GetMemoryUsage();\n+    }\n+}\n+\n+void TxGraph::RemoveTx(TxEntry::TxEntryRef remove_tx)\n+{\n+    cachedInnerUsage -= memusage::DynamicUsage(remove_tx.get().GetTxEntryParents()) + memusage::DynamicUsage(remove_tx.get().GetTxEntryChildren());\n+    // Update the parent/child state\n+    for (const TxEntry::TxEntryRef& parent: remove_tx.get().GetTxEntryParents()) {\n+        parent.get().GetTxEntryChildren().erase(remove_tx);\n+        cachedInnerUsage -= memusage::IncrementalDynamicUsage(parent.get().GetTxEntryChildren());\n+    }\n+    for (const TxEntry::TxEntryRef& child: remove_tx.get().GetTxEntryChildren()) {\n+        child.get().GetTxEntryParents().erase(remove_tx);\n+        cachedInnerUsage -= memusage::IncrementalDynamicUsage(child.get().GetTxEntryParents());\n+    }\n+    // Update the cluster\n+    remove_tx.get().m_cluster->RemoveTransaction(remove_tx.get());\n+}\n+\n+\n+std::vector<TxEntry::TxEntryRef> TxGraph::GetDescendants(const std::vector<TxEntry::TxEntryRef>& txs) const\n+{\n+    std::vector<TxEntry::TxEntryRef> result{}, work_queue{};\n+\n+    LOCK(cs);\n+\n+    WITH_FRESH_EPOCH(m_epoch);\n+    for (auto tx : txs) {\n+        if (!visited(tx)) {\n+            work_queue.push_back(tx);\n+        }\n+    }\n+\n+    while (!work_queue.empty()) {\n+        auto it = work_queue.back();\n+        work_queue.pop_back();\n+        result.push_back(it);\n+        for (auto& child: it.get().GetTxEntryChildren()) {\n+            if (!visited(child.get())) {\n+                work_queue.push_back(child);\n+            }\n+        }\n+    }\n+    return result;\n+}\n+\n+std::vector<TxEntry::TxEntryRef> TxGraph::GetAncestors(const std::vector<TxEntry::TxEntryRef>& parents) const\n+{\n+    std::vector<TxEntry::TxEntryRef> result{}, work_queue{};\n+\n+    LOCK(cs);\n+\n+    WITH_FRESH_EPOCH(m_epoch);\n+    for (auto p : parents) {\n+        visited(p);\n+        work_queue.push_back(p);\n+    }\n+\n+    while (!work_queue.empty()) {\n+        auto it = work_queue.back();\n+        work_queue.pop_back();\n+        result.push_back(it);\n+        for (auto& parent: it.get().parents) {\n+            if (!visited(parent.get())) {\n+                work_queue.push_back(parent);\n+            }\n+        }\n+    }\n+    return result;\n+}\n+\n+std::vector<TxEntry::TxEntryRef> TxGraph::GatherAllClusterTransactions(const std::vector<TxEntry::TxEntryRef> &txs) const\n+{\n+    LOCK(cs);\n+\n+    WITH_FRESH_EPOCH(m_epoch);\n+    std::vector<TxEntry::TxEntryRef> result;\n+    for (auto tx : txs) {\n+        if (!visited(tx.get().m_cluster)) {\n+            for (auto &chunk : tx.get().m_cluster->m_chunks) {\n+                for (auto &txentry : chunk.txs) {\n+                    result.push_back(txentry);\n+                }\n+            }\n+        }\n+    }\n+    return result;\n+}\n+\n+TxGraphCluster* TxGraph::AssignTxGraphCluster()\n+{\n+    auto new_cluster = std::make_unique<TxGraphCluster>(m_next_cluster_id++, this);\n+    TxGraphCluster* ret = new_cluster.get(); // XXX No one is going to like this.\n+    m_cluster_map[new_cluster->m_id] = std::move(new_cluster);\n+    return ret;\n+}\n+\n+// When transactions are removed from a cluster, the cluster might get split\n+// into smaller clusters.\n+void TxGraph::RecalculateTxGraphClusterAndMaybeSort(TxGraphCluster *cluster, bool sort)\n+{\n+    // TODO: if the common case involves no cluster splitting, can we short\n+    // circuit the work here somehow?\n+\n+    // Wipe cluster assignments.\n+    std::vector<TxEntry::TxEntryRef> txs;\n+    for (auto& chunk : cluster->m_chunks) {\n+        for (auto& txentry: chunk.txs) {\n+            txentry.get().m_cluster = nullptr;\n+            txs.push_back(txentry);\n+        }\n+    }\n+    cluster->Clear();\n+\n+    // The first transaction gets to stay in the existing cluster.\n+    bool first = true;\n+    for (auto& txentry : txs) {\n+        if (txentry.get().m_cluster == nullptr) {",
      "path": "src/kernel/txgraph.cpp",
      "position": 508,
      "original_position": 507,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "c49e0444e5c474d5e1ac0af89e9bc27958f3ed31",
      "in_reply_to_id": null,
      "user": {
        "login": "Christewart",
        "id": 3514957,
        "node_id": "MDQ6VXNlcjM1MTQ5NTc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3514957?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Christewart",
        "html_url": "https://github.com/Christewart",
        "followers_url": "https://api.github.com/users/Christewart/followers",
        "following_url": "https://api.github.com/users/Christewart/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Christewart/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Christewart/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Christewart/subscriptions",
        "organizations_url": "https://api.github.com/users/Christewart/orgs",
        "repos_url": "https://api.github.com/users/Christewart/repos",
        "events_url": "https://api.github.com/users/Christewart/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Christewart/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Isn't this trivially true from this? https://github.com/bitcoin/bitcoin/blob/c49e0444e5c474d5e1ac0af89e9bc27958f3ed31/src/kernel/txgraph.cpp#L498",
      "created_at": "2024-05-07T13:25:53Z",
      "updated_at": "2024-05-07T13:27:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1592480884",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1592480884"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 508,
      "original_line": 508,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1592626258",
      "pull_request_review_id": 2043431230,
      "id": 1592626258,
      "node_id": "PRRC_kwDOABII585e7YxS",
      "diff_hunk": "@@ -547,6 +645,40 @@ static RPCHelpMan getmempooldescendants()\n     };\n }\n \n+static RPCHelpMan getmempoolcluster()\n+{\n+    return RPCHelpMan{\"getmempoolcluster\",\n+        \"\\nReturns mempool data for given cluster\\n\",\n+        {\n+            {\"id\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The cluster id (must be in mempool)\"},",
      "path": "src/rpc/mempool.cpp",
      "position": 261,
      "original_position": 261,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "c49e0444e5c474d5e1ac0af89e9bc27958f3ed31",
      "in_reply_to_id": null,
      "user": {
        "login": "Christewart",
        "id": 3514957,
        "node_id": "MDQ6VXNlcjM1MTQ5NTc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3514957?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Christewart",
        "html_url": "https://github.com/Christewart",
        "followers_url": "https://api.github.com/users/Christewart/followers",
        "following_url": "https://api.github.com/users/Christewart/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Christewart/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Christewart/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Christewart/subscriptions",
        "organizations_url": "https://api.github.com/users/Christewart/orgs",
        "repos_url": "https://api.github.com/users/Christewart/repos",
        "events_url": "https://api.github.com/users/Christewart/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Christewart/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "How are users of the RPC expected to obtain the set of `cluster_id`'s? \r\n\r\nIIUC, the way to do this currently is to query \r\n\r\n```\r\n./bin/bitcoin-cli getrawmempool true\r\n```\r\n\r\nand then aggregate the `cluster_id`'s yourself?",
      "created_at": "2024-05-07T14:50:23Z",
      "updated_at": "2024-05-07T15:00:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1592626258",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1592626258"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 656,
      "original_line": 656,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1594255018",
      "pull_request_review_id": 2046037783,
      "id": 1594255018,
      "node_id": "PRRC_kwDOABII585fBmaq",
      "diff_hunk": "@@ -547,6 +645,40 @@ static RPCHelpMan getmempooldescendants()\n     };\n }\n \n+static RPCHelpMan getmempoolcluster()\n+{\n+    return RPCHelpMan{\"getmempoolcluster\",\n+        \"\\nReturns mempool data for given cluster\\n\",\n+        {\n+            {\"id\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The cluster id (must be in mempool)\"},",
      "path": "src/rpc/mempool.cpp",
      "position": 261,
      "original_position": 261,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "c49e0444e5c474d5e1ac0af89e9bc27958f3ed31",
      "in_reply_to_id": 1592626258,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Sjors suggested here https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399137900 that I add a way to do it by transaction hash, which would be easy. Let me know if you have other suggestions...",
      "created_at": "2024-05-08T15:45:24Z",
      "updated_at": "2024-05-08T15:45:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1594255018",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1594255018"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 656,
      "original_line": 656,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1594262607",
      "pull_request_review_id": 2046049861,
      "id": 1594262607,
      "node_id": "PRRC_kwDOABII585fBoRP",
      "diff_hunk": "@@ -0,0 +1,1352 @@\n+#include <kernel/txgraph.h>\n+#include <cluster_linearize.h>\n+#include <util/time.h>\n+#include <logging.h>\n+#include <reverse_iterator.h>\n+#include <util/strencodings.h>\n+\n+void TxGraphCluster::AddTransaction(const TxEntry& entry, bool sort)\n+{\n+    m_chunks.emplace_back(entry.GetModifiedFee(), entry.GetTxSize());\n+    m_chunks.back().txs.emplace_back(entry);\n+    //entry.m_cluster = this; XXX do we need this? it breaks the rbf logic.\n+    ++m_tx_count;\n+    m_tx_size += entry.GetTxSize();\n+    if (sort) Sort();\n+    return;\n+}\n+\n+void TxGraphCluster::RemoveTransaction(const TxEntry& entry)\n+{\n+    m_chunks[entry.m_loc.first].txs.erase(entry.m_loc.second);\n+\n+    // Chunk (or cluster) may now be empty, but this will get cleaned up\n+    // when the cluster is re-sorted (or when the cluster is deleted) Note:\n+    // if we cleaned up empty chunks here, then this would break the\n+    // locations of other entries in the cluster. Since we would like to be\n+    // able to do multiple removals in a row and then clean up the sort, we\n+    // can't clean up empty chunks here.\n+    --m_tx_count;\n+    m_tx_size -= entry.m_virtual_size;\n+    return;\n+}\n+\n+void TxGraphCluster::RechunkFromLinearization(std::vector<TxEntry::TxEntryRef>& txs, bool reassign_locations)\n+{\n+    m_chunks.clear();\n+    m_tx_size = 0;\n+\n+    for (auto txentry : txs) {\n+        m_chunks.emplace_back(txentry.get().GetModifiedFee(), txentry.get().GetTxSize());\n+        m_chunks.back().txs.emplace_back(txentry);\n+        while (m_chunks.size() >= 2) {\n+            auto cur_iter = std::prev(m_chunks.end());\n+            auto prev_iter = std::prev(cur_iter);\n+            // We only combine chunks if the feerate would go up; if two\n+            // chunks have equal feerate, we prefer to keep the smaller\n+            // chunksize (which is generally better for both mining and\n+            // eviction).\n+            if (prev_iter->feerate < cur_iter->feerate) {\n+                prev_iter->feerate += cur_iter->feerate;\n+                prev_iter->txs.splice(prev_iter->txs.end(), cur_iter->txs, cur_iter->txs.begin(), cur_iter->txs.end());\n+                m_chunks.erase(cur_iter);\n+            } else {\n+                break;\n+            }\n+        }\n+        m_tx_size += txentry.get().GetTxSize();\n+    }\n+\n+    if (reassign_locations) {\n+        AssignTransactions();\n+    }\n+}\n+\n+void TxGraphCluster::AssignTransactions()\n+{\n+    // Update locations of all transactions\n+    for (size_t i=0; i<m_chunks.size(); ++i) {\n+        for (auto it = m_chunks[i].txs.begin(); it != m_chunks[i].txs.end(); ++it) {\n+            it->get().m_cluster = this;\n+            it->get().m_loc = {i, it};\n+        }\n+    }\n+}\n+\n+TxEntry::TxEntryRef TxGraphCluster::GetLastTransaction()\n+{\n+    assert(m_tx_count > 0);\n+    for (auto chunkit = m_chunks.rbegin(); chunkit != m_chunks.rend(); ++chunkit) {\n+        if (!chunkit->txs.empty()) return chunkit->txs.back();\n+    }\n+    // Unreachable\n+    assert(false);\n+}\n+\n+bool TxGraphCluster::Check() const\n+{\n+    // First check that the metadata is correct.\n+    int64_t tx_count = 0;\n+    int64_t tx_size = 0;\n+    for (auto &chunk : m_chunks) {\n+        for (auto &tx : chunk.txs) {\n+            ++tx_count;\n+            tx_size += tx.get().GetTxSize();\n+        }\n+    }\n+    if (tx_count != m_tx_count) return false;\n+    if (tx_size != m_tx_size) return false;\n+\n+    // Check topology.\n+    std::set<TxEntry::TxEntryRef, TxEntry::CompareById> seen_elements;\n+    for (auto &chunk : m_chunks) {\n+        for (auto tx : chunk.txs) {\n+            for (auto parent : tx.get().GetTxEntryParents()) {\n+                if (seen_elements.count(parent) == 0) return false;\n+            }\n+            seen_elements.insert(tx);\n+            if (tx.get().m_cluster != this) return false;\n+            if (&m_chunks[tx.get().m_loc.first] != &chunk) return false;\n+            if (tx.get().m_loc.second->get().unique_id != tx.get().unique_id) return false;\n+        }\n+    }\n+    return true;\n+}\n+\n+bool TxGraphCluster::CheckTopo() const\n+{\n+    // Check topology.\n+    std::set<TxEntry::TxEntryRef, TxEntry::CompareById> seen_elements;\n+    for (auto &chunk : m_chunks) {\n+        for (auto tx : chunk.txs) {\n+            for (auto parent : tx.get().GetTxEntryParents()) {\n+                if (seen_elements.count(parent) == 0) return false;\n+            }\n+            seen_elements.insert(tx);\n+        }\n+    }\n+    return true;\n+}\n+\n+namespace {\n+\n+template <typename SetType>\n+std::vector<TxEntry::TxEntryRef> InvokeSort(size_t tx_count, const std::vector<TxGraphCluster::Chunk>& chunks)\n+{\n+    std::vector<TxEntry::TxEntryRef> txs;\n+    cluster_linearize::Cluster<SetType> cluster;\n+    const auto time_1{SteadyClock::now()};\n+\n+    std::vector<TxEntry::TxEntryRef> orig_txs;\n+    std::vector<std::pair<const TxEntry*, unsigned>> entry_to_index;\n+    cluster_linearize::LinearizationResult result;\n+\n+    cluster.reserve(tx_count);\n+    entry_to_index.reserve(tx_count);\n+    cluster.clear();\n+    for (auto &chunk : chunks) {\n+        for (auto tx : chunk.txs) {\n+            orig_txs.emplace_back(tx);\n+            cluster.emplace_back(FeeFrac(tx.get().GetModifiedFee(), tx.get().GetTxSize()), SetType{});\n+            entry_to_index.emplace_back(&(tx.get()), cluster.size() - 1);\n+        }\n+    }\n+    std::sort(entry_to_index.begin(), entry_to_index.end());\n+    for (size_t i=0; i<orig_txs.size(); ++i) {\n+        for (auto& parent : orig_txs[i].get().GetTxEntryParents()) {\n+            auto it = std::lower_bound(entry_to_index.begin(), entry_to_index.end(), &(parent.get()),\n+                    [&](const auto& a, const auto& b) { return std::less<const TxEntry*>()(a.first, b); });\n+            assert(it != entry_to_index.end());\n+            assert(it->first == &(parent.get()));\n+            cluster[i].second.Set(it->second);\n+        }\n+    }\n+    result = cluster_linearize::LinearizeCluster(cluster, 10, 0);\n+    if (tx_count > 10) {\n+        std::vector<unsigned int> orig_linearization;\n+        orig_linearization.reserve(tx_count);\n+        for (unsigned int i=0; i<cluster.size(); ++i) {\n+            orig_linearization.push_back(i);\n+        }\n+        result.linearization = cluster_linearize::MergeLinearizations(cluster, result.linearization, orig_linearization);\n+        cluster_linearize::PostLinearization(cluster, result.linearization);\n+        cluster_linearize::PostLinearization<SetType, true>(cluster, result.linearization);\n+    }\n+    txs.clear();\n+    for (auto index : result.linearization) {\n+        txs.push_back(orig_txs[index]);\n+    }\n+\n+    const auto time_2{SteadyClock::now()};\n+    if (tx_count >= 10) {\n+        double time_millis = Ticks<MillisecondsDouble>(time_2-time_1);\n+\n+        LogPrint(BCLog::BENCH, \"InvokeSort linearize cluster: %zu txs, %.4fms, %u iter, %.1fns/iter, %u comps, %.1fns/comp, encoding: %s\\n\",\n+                tx_count,\n+                time_millis,\n+                result.iterations,\n+                time_millis * 1000000.0 / (result.iterations > 0 ? result.iterations : result.iterations+1),\n+                result.comparisons,\n+                time_millis * 1000000.0 / (result.comparisons > 0 ? result.comparisons : result.comparisons+1),\n+                HexStr(cluster_linearize::DumpCluster(cluster)));\n+    }\n+    return txs;\n+}\n+\n+} // namespace\n+\n+void TxGraphCluster::Sort(bool reassign_locations)\n+{\n+    std::vector<TxEntry::TxEntryRef> txs;\n+    if (m_tx_count <= 32) {\n+        txs = InvokeSort<BitSet<32>>(m_tx_count, m_chunks);\n+    } else if (m_tx_count <= 64) {\n+        txs = InvokeSort<BitSet<64>>(m_tx_count, m_chunks);\n+    } else if (m_tx_count <= 128) {\n+        txs = InvokeSort<BitSet<128>>(m_tx_count, m_chunks);\n+    } else if (m_tx_count <= 192) {\n+        txs = InvokeSort<BitSet<192>>(m_tx_count, m_chunks);\n+    } else if (m_tx_count <= 256) {\n+        txs = InvokeSort<BitSet<256>>(m_tx_count, m_chunks);\n+    } else if (m_tx_count <= 320) {\n+        txs = InvokeSort<BitSet<320>>(m_tx_count, m_chunks);\n+    } else if (m_tx_count <= 384) {\n+        txs = InvokeSort<BitSet<384>>(m_tx_count, m_chunks);\n+    } else if (m_tx_count <= 1280) {\n+        txs = InvokeSort<BitSet<1280>>(m_tx_count, m_chunks);\n+    } else {\n+        // Only do the topological sort for big clusters\n+        for (auto &chunk : m_chunks) {\n+            for (auto chunk_tx : chunk.txs) {\n+                txs.emplace_back(chunk_tx.get());\n+            }\n+        }\n+        m_tx_graph->TopoSort(txs);\n+    }\n+    RechunkFromLinearization(txs, reassign_locations);\n+}\n+\n+void TxGraphCluster::Rechunk()\n+{\n+    std::vector<TxEntry::TxEntryRef> txs;\n+\n+    // Insert all transactions from the cluster into txs\n+    for (auto &chunk : m_chunks) {\n+        for (auto chunk_tx : chunk.txs) {\n+            txs.push_back(chunk_tx);\n+        }\n+    }\n+\n+    RechunkFromLinearization(txs, true);\n+}\n+\n+void TxGraphCluster::MergeCopy(std::vector<TxGraphCluster*>::const_iterator first, std::vector<TxGraphCluster*>::const_iterator last)\n+{\n+    if (first == last) return;\n+\n+    for (auto it=first; it != last; ++it) {\n+        for (auto &chunk : (*it)->m_chunks) {\n+            for (auto &tx: chunk.txs) {\n+                AddTransaction(tx, false);\n+            }\n+        }\n+    }\n+}\n+\n+// Merge the clusters from [first, last) into this cluster.\n+void TxGraphCluster::Merge(std::vector<TxGraphCluster*>::iterator first, std::vector<TxGraphCluster*>::iterator last, bool this_cluster_first)\n+{\n+    // Check to see if we have anything to do.\n+    if (first == last) return;\n+\n+    std::vector<Chunk> new_chunks;\n+    std::vector<TxGraphCluster::HeapEntry> heap_chunks;\n+\n+    int64_t total_txs = m_tx_count;\n+\n+    // Make a heap of all the best chunks.\n+    for (auto it = first; it != last; ++it) {\n+        if ((*it)->m_chunks.size() > 0) {\n+            heap_chunks.emplace_back((*it)->m_chunks.begin(), *it);\n+        }\n+        total_txs += (*it)->m_tx_count;\n+    }\n+\n+    // During a reorg, we want to merge clusters corresponding to descendants\n+    // so that they appear after the cluster with their parent. This allows us\n+    // to trim megaclusters down to our cluster size limit in a way that\n+    // respects topology but still preferences higher feerate chunks over lower\n+    // feerate chunks.\n+    if (this_cluster_first) {\n+        new_chunks = std::move(m_chunks);\n+        m_chunks.clear();\n+    } else if (m_tx_count > 0) {\n+        heap_chunks.emplace_back(m_chunks.begin(), this);\n+    }\n+    // Define comparison operator on our heap entries (using feerate of chunks).\n+    auto cmp = [](const TxGraphCluster::HeapEntry& a, const TxGraphCluster::HeapEntry& b) {\n+        return a.first->feerate < b.first->feerate;\n+    };\n+\n+    std::make_heap(heap_chunks.begin(), heap_chunks.end(), cmp);\n+\n+    while (!heap_chunks.empty()) {\n+        // Take the best chunk from the heap.\n+        auto best_chunk = heap_chunks.front();\n+        new_chunks.emplace_back(std::move(*(best_chunk.first)));\n+        // Remove the best chunk from the heap.\n+        std::pop_heap(heap_chunks.begin(), heap_chunks.end(), cmp);\n+        heap_chunks.pop_back();\n+        // If the cluster has more chunks, add the next best chunk to the heap.\n+        ++best_chunk.first;\n+        if (best_chunk.first != best_chunk.second->m_chunks.end()) {\n+            heap_chunks.emplace_back(best_chunk.first, best_chunk.second);\n+            std::push_heap(heap_chunks.begin(), heap_chunks.end(), cmp);\n+        }\n+    }\n+\n+    // At this point we've merged the clusters into new_chunks.\n+    m_chunks = std::move(new_chunks);\n+\n+    m_tx_count=0;\n+    m_tx_size=0;\n+\n+    for (size_t i=0; i<m_chunks.size(); ++i) {\n+        m_tx_count += m_chunks[i].txs.size();\n+        m_tx_size += m_chunks[i].feerate.size;\n+    }\n+\n+    // Update the cluster and location information for each transaction.\n+    AssignTransactions();\n+\n+    assert(m_tx_count == total_txs);\n+}\n+\n+void TxGraph::UpdateClusterIndex(TxGraphCluster* c)\n+{\n+    auto it = m_cluster_index.get<id>().find(c->m_id);\n+    if (it != m_cluster_index.get<id>().end()) {\n+        m_cluster_index.get<id>().erase(it);\n+    }\n+    m_cluster_index.insert(c);\n+}\n+\n+void TxGraph::EraseCluster(TxGraphCluster* c)\n+{\n+    LOCK(cs);\n+    auto it = m_cluster_index.get<id>().find(c->m_id);\n+    if (it != m_cluster_index.get<id>().end()) {\n+        m_cluster_index.get<id>().erase(it);\n+    }\n+    m_cluster_map.erase(c->m_id);\n+}\n+\n+void TxGraph::AddTx(TxEntry *new_tx, int32_t vsize, CAmount modified_fee, const std::vector<TxEntry::TxEntryRef>& parents)\n+{\n+    LOCK(cs);\n+    new_tx->m_virtual_size = vsize;\n+    new_tx->m_modified_fee = modified_fee;\n+    new_tx->GetTxEntryParents().clear();\n+    // Figure out which cluster this transaction belongs to.\n+    std::vector<TxGraphCluster*> clusters_to_merge;\n+    {\n+        WITH_FRESH_EPOCH(m_epoch);\n+        for (auto p : parents) {\n+            UpdateParent(*new_tx, p, true);\n+            UpdateChild(p, *new_tx, true);\n+            if (!visited(p.get().m_cluster)) {\n+                clusters_to_merge.push_back(p.get().m_cluster);\n+            }\n+        }\n+    }\n+\n+    // Merge all the clusters together.\n+    if (clusters_to_merge.size() == 0) {\n+        // No parents, make a new cluster.\n+        new_tx->m_cluster = AssignTxGraphCluster();\n+        new_tx->m_cluster->AddTransaction(*new_tx, true);\n+        cachedInnerUsage += new_tx->m_cluster->GetMemoryUsage();\n+        UpdateClusterIndex(new_tx->m_cluster);\n+    } else if (clusters_to_merge.size() == 1) {\n+        cachedInnerUsage -= clusters_to_merge[0]->GetMemoryUsage();\n+        // Only one parent cluster: add to it.\n+        new_tx->m_cluster = clusters_to_merge[0];\n+        clusters_to_merge[0]->AddTransaction(*new_tx, true);\n+        cachedInnerUsage += clusters_to_merge[0]->GetMemoryUsage();\n+        UpdateClusterIndex(new_tx->m_cluster);\n+    } else {\n+        cachedInnerUsage -= clusters_to_merge[0]->GetMemoryUsage();\n+        clusters_to_merge[0]->Merge(clusters_to_merge.begin()+1, clusters_to_merge.end(), false);\n+        // Add this transaction to the cluster.\n+        new_tx->m_cluster = clusters_to_merge[0];\n+        clusters_to_merge[0]->AddTransaction(*new_tx, true);\n+        UpdateClusterIndex(new_tx->m_cluster);\n+        // Need to delete the other clusters.\n+        for (auto it=clusters_to_merge.begin()+1; it != clusters_to_merge.end(); ++it) {\n+            cachedInnerUsage -= (*it)->GetMemoryUsage();\n+            EraseCluster(*it);\n+        }\n+        cachedInnerUsage += clusters_to_merge[0]->GetMemoryUsage();\n+    }\n+}\n+\n+void TxGraph::RemoveTx(TxEntry::TxEntryRef remove_tx)\n+{\n+    cachedInnerUsage -= memusage::DynamicUsage(remove_tx.get().GetTxEntryParents()) + memusage::DynamicUsage(remove_tx.get().GetTxEntryChildren());\n+    // Update the parent/child state\n+    for (const TxEntry::TxEntryRef& parent: remove_tx.get().GetTxEntryParents()) {\n+        parent.get().GetTxEntryChildren().erase(remove_tx);\n+        cachedInnerUsage -= memusage::IncrementalDynamicUsage(parent.get().GetTxEntryChildren());\n+    }\n+    for (const TxEntry::TxEntryRef& child: remove_tx.get().GetTxEntryChildren()) {\n+        child.get().GetTxEntryParents().erase(remove_tx);\n+        cachedInnerUsage -= memusage::IncrementalDynamicUsage(child.get().GetTxEntryParents());\n+    }\n+    // Update the cluster\n+    remove_tx.get().m_cluster->RemoveTransaction(remove_tx.get());\n+}\n+\n+\n+std::vector<TxEntry::TxEntryRef> TxGraph::GetDescendants(const std::vector<TxEntry::TxEntryRef>& txs) const\n+{\n+    std::vector<TxEntry::TxEntryRef> result{}, work_queue{};\n+\n+    LOCK(cs);\n+\n+    WITH_FRESH_EPOCH(m_epoch);\n+    for (auto tx : txs) {\n+        if (!visited(tx)) {\n+            work_queue.push_back(tx);\n+        }\n+    }\n+\n+    while (!work_queue.empty()) {\n+        auto it = work_queue.back();\n+        work_queue.pop_back();\n+        result.push_back(it);\n+        for (auto& child: it.get().GetTxEntryChildren()) {\n+            if (!visited(child.get())) {\n+                work_queue.push_back(child);\n+            }\n+        }\n+    }\n+    return result;\n+}\n+\n+std::vector<TxEntry::TxEntryRef> TxGraph::GetAncestors(const std::vector<TxEntry::TxEntryRef>& parents) const\n+{\n+    std::vector<TxEntry::TxEntryRef> result{}, work_queue{};\n+\n+    LOCK(cs);\n+\n+    WITH_FRESH_EPOCH(m_epoch);\n+    for (auto p : parents) {\n+        visited(p);\n+        work_queue.push_back(p);\n+    }\n+\n+    while (!work_queue.empty()) {\n+        auto it = work_queue.back();\n+        work_queue.pop_back();\n+        result.push_back(it);\n+        for (auto& parent: it.get().parents) {\n+            if (!visited(parent.get())) {\n+                work_queue.push_back(parent);\n+            }\n+        }\n+    }\n+    return result;\n+}\n+\n+std::vector<TxEntry::TxEntryRef> TxGraph::GatherAllClusterTransactions(const std::vector<TxEntry::TxEntryRef> &txs) const\n+{\n+    LOCK(cs);\n+\n+    WITH_FRESH_EPOCH(m_epoch);\n+    std::vector<TxEntry::TxEntryRef> result;\n+    for (auto tx : txs) {\n+        if (!visited(tx.get().m_cluster)) {\n+            for (auto &chunk : tx.get().m_cluster->m_chunks) {\n+                for (auto &txentry : chunk.txs) {\n+                    result.push_back(txentry);\n+                }\n+            }\n+        }\n+    }\n+    return result;\n+}\n+\n+TxGraphCluster* TxGraph::AssignTxGraphCluster()\n+{\n+    auto new_cluster = std::make_unique<TxGraphCluster>(m_next_cluster_id++, this);\n+    TxGraphCluster* ret = new_cluster.get(); // XXX No one is going to like this.\n+    m_cluster_map[new_cluster->m_id] = std::move(new_cluster);\n+    return ret;\n+}\n+\n+// When transactions are removed from a cluster, the cluster might get split\n+// into smaller clusters.\n+void TxGraph::RecalculateTxGraphClusterAndMaybeSort(TxGraphCluster *cluster, bool sort)\n+{\n+    // TODO: if the common case involves no cluster splitting, can we short\n+    // circuit the work here somehow?\n+\n+    // Wipe cluster assignments.\n+    std::vector<TxEntry::TxEntryRef> txs;\n+    for (auto& chunk : cluster->m_chunks) {\n+        for (auto& txentry: chunk.txs) {\n+            txentry.get().m_cluster = nullptr;\n+            txs.push_back(txentry);\n+        }\n+    }\n+    cluster->Clear();\n+\n+    // The first transaction gets to stay in the existing cluster.\n+    bool first = true;\n+    for (auto& txentry : txs) {\n+        if (txentry.get().m_cluster == nullptr) {",
      "path": "src/kernel/txgraph.cpp",
      "position": 508,
      "original_position": 507,
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "original_commit_id": "c49e0444e5c474d5e1ac0af89e9bc27958f3ed31",
      "in_reply_to_id": 1592480884,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "See line 528 below: https://github.com/bitcoin/bitcoin/blob/c49e0444e5c474d5e1ac0af89e9bc27958f3ed31/src/kernel/txgraph.cpp#L528\r\n\r\nNote also that I expect this implementation of txgraph to be rewritten entirely, so the most relevant thing to review right now relating to this code is the header file, as the interface is the most important part (and the rest of the PR and the mempool code builds on top of that interface).\r\n",
      "created_at": "2024-05-08T15:50:59Z",
      "updated_at": "2024-05-08T15:52:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1594262607",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1594262607"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 508,
      "original_line": 508,
      "side": "RIGHT"
    }
  ]
}