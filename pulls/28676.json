{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676",
    "id": 1563273625,
    "node_id": "PR_kwDOABII585dLamZ",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/28676",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/28676.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/28676.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
    "number": 28676,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": false,
    "title": "Cluster mempool implementation",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "This is a draft implementation of the cluster mempool design described in #27677.  I'm opening this as a draft PR now to share the branch I'm working on with others, so that we can start to think about in-progress projects (like package relay, package validation, and package rbf) in the context of this design.  Also, I can use some help from others for parts of this work, including the interaction between the mempool and the wallet, and also reworking some of our existing test cases to fit a cluster-mempool world.\r\n\r\nNote that the design of this implementation is subject to change as I continue to iterate on the code (to make the code more hygienic and robust, in particular). At this point though I think the performance is pretty reasonable and I'm not currently aware of any bugs.  There are some microbenchmarks added here, and some improved fuzz tests; it would be great if others ran both of those on their own hardware as well and reported back on any findings.\r\n\r\nThis branch implements the following observable behavior changes:\r\n\r\n- Maintains a partitioning of the mempool into connected clusters\r\n- Each cluster is sorted (\"linearized\") either using an optimal sort, or an ancestor-feerate-based one, depending on the size of the cluster (thanks to @sipa for this logic)\r\n- Transaction selection for mining is updated to use the cluster linearizations\r\n- Mempool eviction is updated to use the cluster linearizations\r\n- The RBF rules are updated to drop the requirement that no new inputs are introduced, and to change the feerate requirement to instead check that the mining score of a replacement transaction exceed the mining score of the conflicted transactions\r\n- The CPFP carveout rule is eliminated (it doesn't make sense in a cluster-limited mempool)\r\n- The ancestor and descendant limits are no longer enforced.\r\n- New cluster count/cluster vsize limits are now enforced instead.\r\n\r\nSome less observable behavior changes:\r\n- The cached ancestor and descendant data are dropped from the mempool, along with the multi_index indices that were maintained to sort the mempool by ancestor and descendant feerates. For compatibility (eg with wallet behavior or RPCs exposing this), this information is now calculated dynamically instead.\r\n- The ancestor and descendant walking algorithms are now implemented using `epoch`s (resulting in a significant performance improvement, according to the benchmarks I've looked at)\r\n\r\nStill to do:\r\n\r\n- [x] More comparisons between this branch and master on historical data to compare validation speed (accepting loose transactions, processing RBF transactions, validating a block/postprocessing, updating the mempool for a reorg).\r\n- [x] More historical data analysis to try to evaluate the likely impact of setting the cluster size limits to varying values (to motivate what values we should ultimately pick). [DONE, see [this post](https://delvingbitcoin.org/t/research-into-the-effects-of-a-cluster-size-limited-mempool-in-2023/794/1)]\r\n- [ ] Updating wallet code to be cluster-aware (including mini_miner and coin selection)\r\n- [ ] Rework many of our functional tests to be cluster-aware\r\n- [ ] Figure out what package validation and package RBF rules should be in this design\r\n- [x] Rework the `partially_downloaded_block` fuzz target to not add duplicate transactions to the mempool (#29990).\r\n- [x] Update RBF logic to ensure that replacements always strictly improve the mempool.\r\n- [ ] Figure out how we want to document our RBF policy (preserve historical references to BIP 125 or previous Bitcoin Core behaviors vs clean slate documentation?)\r\n\r\nFor discussion/feedback:\r\n\r\n - How significant is it to be dropping the CPFP carveout rule?  Does that affect how we will ultimately want to stage new mempool deployment?\r\n - How well do the proposed RBF rules meet everyone's use cases?\r\n - What design improvements can we make to the cluster tracking implementation?\r\n - The ZMQ callbacks that occur when a block is found will happen in a slightly different order, because we now will fully remove all transactions occurring in a block from the mempool before removing any conflicts. Is this a problem?",
    "labels": [
      {
        "id": 164208572,
        "node_id": "MDU6TGFiZWwxNjQyMDg1NzI=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mempool",
        "name": "Mempool",
        "color": "fef2c0",
        "default": false
      }
    ],
    "created_at": "2023-10-18T18:59:37Z",
    "updated_at": "2025-10-14T18:33:17Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "37c9ad173fd4426bada98b7583b4ab67145a003f",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "sdaftuar:2023-10-cluster-mempool",
      "ref": "2023-10-cluster-mempool",
      "sha": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 28761781,
        "node_id": "MDEwOlJlcG9zaXRvcnkyODc2MTc4MQ==",
        "name": "bitcoin",
        "full_name": "sdaftuar/bitcoin",
        "owner": {
          "login": "sdaftuar",
          "id": 7463573,
          "node_id": "MDQ6VXNlcjc0NjM1NzM=",
          "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/sdaftuar",
          "html_url": "https://github.com/sdaftuar",
          "followers_url": "https://api.github.com/users/sdaftuar/followers",
          "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
          "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
          "repos_url": "https://api.github.com/users/sdaftuar/repos",
          "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/sdaftuar/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/sdaftuar/bitcoin",
        "archive_url": "https://api.github.com/repos/sdaftuar/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/sdaftuar/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/sdaftuar/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/sdaftuar/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/sdaftuar/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/sdaftuar/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/sdaftuar/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/sdaftuar/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/sdaftuar/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/sdaftuar/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/sdaftuar/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/sdaftuar/bitcoin/events",
        "forks_url": "https://api.github.com/repos/sdaftuar/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/sdaftuar/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/sdaftuar/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/sdaftuar/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/sdaftuar/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/sdaftuar/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/sdaftuar/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/sdaftuar/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/sdaftuar/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/sdaftuar/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/sdaftuar/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/sdaftuar/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/sdaftuar/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/sdaftuar/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/sdaftuar/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/sdaftuar/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:sdaftuar/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/sdaftuar/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/sdaftuar/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/sdaftuar/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/sdaftuar/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/sdaftuar/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/sdaftuar/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/sdaftuar/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/sdaftuar/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/sdaftuar/bitcoin/hooks",
        "svn_url": "https://github.com/sdaftuar/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 2,
        "stargazers_count": 4,
        "watchers_count": 4,
        "size": 304373,
        "default_branch": "master",
        "open_issues_count": 1,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-10-14T18:15:33Z",
        "created_at": "2015-01-04T02:52:13Z",
        "updated_at": "2024-02-09T22:47:48Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "9314113b295af0f4eab6397c5870115b647721d1",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 38027,
        "stargazers_count": 86163,
        "watchers_count": 86163,
        "size": 294869,
        "default_branch": "master",
        "open_issues_count": 832,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-10-14T17:18:55Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-10-14T17:41:36Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 1557,
    "deletions": 3171,
    "changed_files": 58,
    "commits": 69,
    "review_comments": 224,
    "comments": 37
  },
  "events": [
    {
      "event": "mentioned",
      "id": 10697854902,
      "node_id": "MEE_lADOABII5850QVJBzwAAAAJ9pE-2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10697854902",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-18T18:59:38Z"
    },
    {
      "event": "subscribed",
      "id": 10697854917,
      "node_id": "SE_lADOABII5850QVJBzwAAAAJ9pE_F",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10697854917",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-18T18:59:38Z"
    },
    {
      "event": "commented",
      "id": 1769143762,
      "node_id": "IC_kwDOABII585pcv3S",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1769143762",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-18T18:59:40Z",
      "updated_at": "2025-10-14T10:59:19Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/28676.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Approach ACK | [ismaelsadeeq](https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-3352926498) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#33616](https://github.com/bitcoin/bitcoin/pull/33616) (policy: don't CheckEphemeralSpends on reorg by instagibbs)\n* [#33421](https://github.com/bitcoin/bitcoin/pull/33421) (node: add `BlockTemplateCache` by ismaelsadeeq)\n* [#33335](https://github.com/bitcoin/bitcoin/pull/33335) (txgraph: randomize order of same-feerate distinct-cluster transactions by sipa)\n* [#33214](https://github.com/bitcoin/bitcoin/pull/33214) (rpc: require integer verbosity; remove boolean 'verbose' by fqlx)\n* [#33192](https://github.com/bitcoin/bitcoin/pull/33192) (refactor: unify container presence checks by l0rinc)\n* [#33191](https://github.com/bitcoin/bitcoin/pull/33191) (net: Provide block templates to peers on request by ajtowns)\n* [#33157](https://github.com/bitcoin/bitcoin/pull/33157) (cluster mempool: control/optimize TxGraph memory usage by sipa)\n* [#33062](https://github.com/bitcoin/bitcoin/pull/33062) (truc: optimize the in package relation calculation by HowHsu)\n* [#32587](https://github.com/bitcoin/bitcoin/pull/32587) (test: Fix reorg patterns in tests to use proper fork-based approach by yuvicc)\n* [#31974](https://github.com/bitcoin/bitcoin/pull/31974) (Drop testnet3 by Sjors)\n* [#31803](https://github.com/bitcoin/bitcoin/pull/31803) (fuzz: Extend mini_miner fuzz coverage to max block weight by fjahr)\n* [#31682](https://github.com/bitcoin/bitcoin/pull/31682) ([IBD] specialize CheckBlock's input & coinbase checks by l0rinc)\n* [#31382](https://github.com/bitcoin/bitcoin/pull/31382) (kernel: Flush in ChainstateManager destructor by TheCharlatan)\n* [#30277](https://github.com/bitcoin/bitcoin/pull/30277) ([DO NOT MERGE] Erlay: bandwidth-efficient transaction relay protocol (Full implementation) by sr-gi)\n* [#29641](https://github.com/bitcoin/bitcoin/pull/29641) (scripted-diff: Use LogInfo over LogPrintf [WIP, NOMERGE, DRAFT] by maflcko)\n* [#28690](https://github.com/bitcoin/bitcoin/pull/28690) (build: Introduce internal kernel library by TheCharlatan)\n* [#17783](https://github.com/bitcoin/bitcoin/pull/17783) (common: Disallow calling IsArgSet() on ALLOW_LIST options by ryanofsky)\n* [#17581](https://github.com/bitcoin/bitcoin/pull/17581) (refactor: Remove settings merge reverse precedence code by ryanofsky)\n* [#17580](https://github.com/bitcoin/bitcoin/pull/17580) (refactor: Add ALLOW_LIST flags and enforce usage in CheckArgFlags by ryanofsky)\n* [#17493](https://github.com/bitcoin/bitcoin/pull/17493) (util: Forbid ambiguous multiple assignments in config file by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-1769143762",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "labeled",
      "id": 10697976819,
      "node_id": "LE_lADOABII5850QVJBzwAAAAJ9pivz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10697976819",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-18T19:11:53Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10697997651,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAJ9pn1T",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10697997651",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "a254fba24815170a5c0a9eb6bcc94ed95ca245a1",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/a254fba24815170a5c0a9eb6bcc94ed95ca245a1",
      "created_at": "2023-10-18T19:14:03Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10715626094,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAJ-s3pu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10715626094",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "b4f69c3ccf17eb878319bfd5309ab9a2dac83c80",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/b4f69c3ccf17eb878319bfd5309ab9a2dac83c80",
      "created_at": "2023-10-19T18:28:20Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10717967266,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAJ-1zOi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10717967266",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "29f428f433f9f4587c42350a50a139cb7ddabdfe",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/29f428f433f9f4587c42350a50a139cb7ddabdfe",
      "created_at": "2023-10-19T23:46:18Z"
    },
    {
      "event": "labeled",
      "id": 10722430474,
      "node_id": "LE_lADOABII5850QVJBzwAAAAJ_G04K",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10722430474",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-20T09:57:25Z",
      "label": {
        "name": "Mempool",
        "color": "fef2c0"
      }
    },
    {
      "event": "reviewed",
      "id": 1685916441,
      "node_id": "PRR_kwDOABII585kfQsZ",
      "url": null,
      "actor": null,
      "commit_id": "7619c275dae3b2b0df8cd8071bc2250556350c49",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2023-10-24T18:23:18Z",
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1685916441",
      "submitted_at": "2023-10-24T18:23:18Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "labeled",
      "id": 10809901870,
      "node_id": "LE_lADOABII5850QVJBzwAAAAKEUgMu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10809901870",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-30T15:55:47Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 1809939629,
      "node_id": "IC_kwDOABII585r4Xyt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1809939629",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-14T10:29:27Z",
      "updated_at": "2023-11-14T14:23:52Z",
      "author_association": "MEMBER",
      "body": "It would be useful to add a `mempool_backwards_compatibility.py` test to illustrate how the new rules interact with older nodes. It could have two modern nodes and one v25 (or v26) node. Some of the tests you deleted in this branch could be moved there. E.g. the test could demonstrate how RBF rule 2 is not enforced when relaying to the new node, but it is when relaying to the v25 node.\r\n\r\nBenchmarks on a 2019 MacBook Pro (2,3 GHz 8-Core Intel Core i9), plugged in:\r\n\r\n```\r\n% src/bench/bench_bitcoin -filter=.*Mem.* -min-time=10000\r\n\r\n|      330,557,188.67 |                3.03 |    1.5% |     10.77 | `ComplexMemPool`\r\n|      451,529,273.50 |                2.21 |    2.8% |     10.01 | `MemPoolAddTransactions`\r\n|            2,847.13 |          351,231.06 |    2.7% |     10.93 | `MemPoolAncestorsDescendants`\r\n|           11,047.90 |           90,514.97 |    2.5% |     10.69 | `MemPoolMiningScoreCheck`\r\n|        4,328,796.04 |              231.01 |    1.1% |     10.99 | `MempoolCheck`\r\n|           36,268.80 |           27,571.91 |    2.9% |     11.17 | `MempoolEviction`\r\n|        9,123,684.25 |              109.60 |    1.4% |     10.74 | `RpcMempool`\r\n```\r\n\r\nUpdate: added bench for master@c2d4e40e454ba0c7c836a849b6d15db4850079f2:\r\n\r\n```\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|      302,677,055.25 |                3.30 |    3.5% |     10.76 | `ComplexMemPool`\r\n|      100,167,478.00 |                9.98 |    2.5% |     11.08 | `MempoolCheck`\r\n|           43,759.84 |           22,852.00 |    4.1% |     11.42 | `MempoolEviction`\r\n|       10,235,913.25 |               97.70 |    3.5% |     10.66 | `RpcMempool`\r\n```",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-1809939629",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "reviewed",
      "id": 1729366575,
      "node_id": "PRR_kwDOABII585nFAov",
      "url": null,
      "actor": null,
      "commit_id": "7fdcccd1338655328c28ff949d50442ace931a5e",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2023-11-14T10:29:46Z",
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1729366575",
      "submitted_at": "2023-11-14T10:29:46Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 1729419761,
      "node_id": "PRR_kwDOABII585nFNnx",
      "url": null,
      "actor": null,
      "commit_id": "7fdcccd1338655328c28ff949d50442ace931a5e",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2023-11-14T12:23:47Z",
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1729419761",
      "submitted_at": "2023-11-14T12:23:47Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 1729707068,
      "node_id": "PRR_kwDOABII585nGTw8",
      "url": null,
      "actor": null,
      "commit_id": "7fdcccd1338655328c28ff949d50442ace931a5e",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2023-11-14T14:27:23Z",
      "author_association": "MEMBER",
      "body": "Couple more comments / questions. To be continued...",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1729707068",
      "submitted_at": "2023-11-14T14:27:23Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 1739566572,
      "node_id": "PRR_kwDOABII585nr63s",
      "url": null,
      "actor": null,
      "commit_id": "7fdcccd1338655328c28ff949d50442ace931a5e",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2023-11-20T11:54:22Z",
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1739566572",
      "submitted_at": "2023-11-20T11:54:22Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 1739706549,
      "node_id": "PRR_kwDOABII585nsdC1",
      "url": null,
      "actor": null,
      "commit_id": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2023-11-20T12:32:16Z",
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1739706549",
      "submitted_at": "2023-11-20T12:32:16Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 1739853534,
      "node_id": "PRR_kwDOABII585ntA7e",
      "url": null,
      "actor": null,
      "commit_id": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2023-11-20T13:42:19Z",
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1739853534",
      "submitted_at": "2023-11-20T13:42:19Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 1739865937,
      "node_id": "PRR_kwDOABII585ntD9R",
      "url": null,
      "actor": null,
      "commit_id": "7fdcccd1338655328c28ff949d50442ace931a5e",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2023-11-20T13:48:39Z",
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1739865937",
      "submitted_at": "2023-11-20T13:48:39Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "commented",
      "id": 1819105431,
      "node_id": "IC_kwDOABII585sbViX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1819105431",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-20T13:53:12Z",
      "updated_at": "2023-11-20T13:53:12Z",
      "author_association": "MEMBER",
      "body": "@Sjors I believe most if not all of this PR will be rewritten, and split up into several components. The goal here is just to give an idea of the high-level interactions with other changes (wallet behavior, package validation/relay/RBF, ...). I don't think a detailed line-by-line code review at this stage is a good use of your time.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-1819105431",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "mentioned",
      "id": 11012203305,
      "node_id": "MEE_lADOABII5850QVJBzwAAAAKQYOMp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11012203305",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-20T13:53:13Z"
    },
    {
      "event": "subscribed",
      "id": 11012203324,
      "node_id": "SE_lADOABII5850QVJBzwAAAAKQYOM8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11012203324",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-20T13:53:13Z"
    },
    {
      "event": "reviewed",
      "id": 1739885361,
      "node_id": "PRR_kwDOABII585ntIsx",
      "url": null,
      "actor": null,
      "commit_id": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2023-11-20T13:58:48Z",
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1739885361",
      "submitted_at": "2023-11-20T13:58:48Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 1739889097,
      "node_id": "PRR_kwDOABII585ntJnJ",
      "url": null,
      "actor": null,
      "commit_id": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2023-11-20T14:00:41Z",
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1739889097",
      "submitted_at": "2023-11-20T14:00:41Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 1739900168,
      "node_id": "PRR_kwDOABII585ntMUI",
      "url": null,
      "actor": null,
      "commit_id": "bf467f8286425b692a1736ab6d417d0ba6074658",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2023-11-20T14:06:13Z",
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1739900168",
      "submitted_at": "2023-11-20T14:06:13Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 1739906712,
      "node_id": "PRR_kwDOABII585ntN6Y",
      "url": null,
      "actor": null,
      "commit_id": "bf467f8286425b692a1736ab6d417d0ba6074658",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2023-11-20T14:09:35Z",
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1739906712",
      "submitted_at": "2023-11-20T14:09:35Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 1739940128,
      "node_id": "PRR_kwDOABII585ntWEg",
      "url": null,
      "actor": null,
      "commit_id": "bf467f8286425b692a1736ab6d417d0ba6074658",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2023-11-20T14:24:02Z",
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1739940128",
      "submitted_at": "2023-11-20T14:24:02Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 1739947219,
      "node_id": "PRR_kwDOABII585ntXzT",
      "url": null,
      "actor": null,
      "commit_id": "bf467f8286425b692a1736ab6d417d0ba6074658",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2023-11-20T14:27:08Z",
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1739947219",
      "submitted_at": "2023-11-20T14:27:08Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "commented",
      "id": 1819230080,
      "node_id": "IC_kwDOABII585sbz-A",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1819230080",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-20T15:00:32Z",
      "updated_at": "2023-11-20T15:44:36Z",
      "author_association": "MEMBER",
      "body": "I was wondering if we can drop RBF rule 5 (in a followup), but I'm guessing not really. My initial thinking was the cluster limit could be used instead. But `CalculateMiningScoreOfReplacementTx` only checks that the _new_ cluster doesn't get too big.\r\n\r\nBut does the new cluster system make it less of a burden to have large numbers of transactions appear and disappear from the mempool?\r\n\r\n—\r\n\r\nI'm also trying to understand if dropping the [CPFP carveout](https://bitcoinops.org/en/topics/cpfp-carve-out/) is fine. The original scenario described on the [mailistlist](https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2018-November/016518.html):\r\n\r\n\r\n```\r\nTX_important\r\n  * output Alice <- child_a_1 <- child_a_2 <- … -< child_a_25\r\n                   (^ intentionally low fees so it doesn't confirm before timeout)\r\n  * output Bob: child_b_1\r\n                ^ high fee\r\n```\r\n  \r\nThe carveout rule allows Bob's `child_b_1`, despite Alice having used up the 25 ancestor limit for TX_important. And alice can't use the carveout to just add child_a_26, because child_26 has more than one unconfirmed ancestor.\r\n\r\nSo what happens in the cluster world?\r\n\r\nFor simplicity, let's set `-limitclustercount` to 26 (the default is 100 in this PR). Without the CPFP carveout, can Bob still insert `child_b_1`?\r\n\r\nMy understanding is that he can't, because `ClusterSizeChecks` will fail.\r\n\r\nInstead of failing, can we check if it's possible to evict the lowest value chunk? Though it introduces an implicit RBF-like mechanism… If it were possible, then `child_a_25` would be evicted from the cluster as long as it has a longer fee rate than `child_b_1`.\r\n\r\nAlice might make sure that the fee rates of `child_a_1` … `child_a_25` increase such that there's only one chunk. That just requires Bob to use a higher fee rate.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-1819230080",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "reviewed",
      "id": 1740177374,
      "node_id": "PRR_kwDOABII585nuP_e",
      "url": null,
      "actor": null,
      "commit_id": "7fdcccd1338655328c28ff949d50442ace931a5e",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2023-11-20T16:04:07Z",
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1740177374",
      "submitted_at": "2023-11-20T16:04:07Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "commented",
      "id": 1819490214,
      "node_id": "IC_kwDOABII585sczem",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1819490214",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-20T17:16:02Z",
      "updated_at": "2023-11-20T17:20:44Z",
      "author_association": "MEMBER",
      "body": "> I don't think a detailed line-by-line code review at this stage is a good use of your time.\r\n\r\nThat's not what I'm trying to do. I strategically / haphazardly picked a dozen lines to ask questions about to get a better understanding of the whole thing. Based on IRC chat today, I'll wait now for the upcoming update.\r\n\r\nRelevant IRC log: https://bitcoin-irc.chaincode.com/bitcoin-core-dev/2023-11-20#984780;",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-1819490214",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11173066958,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAKZ93jO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11173066958",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "58a60d695eb860180780c41ac57d8f38305841a5",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/58a60d695eb860180780c41ac57d8f38305841a5",
      "created_at": "2023-12-06T20:01:38Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11184375069,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAKapAUd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11184375069",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "35d18b71880052e5ca11d8f6e0fca45750b3da17",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/35d18b71880052e5ca11d8f6e0fca45750b3da17",
      "created_at": "2023-12-07T16:49:26Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11184482832,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAKapaoQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11184482832",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "72f240b8ebf80fd15e4dea20f7cc41099273d4bd",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/72f240b8ebf80fd15e4dea20f7cc41099273d4bd",
      "created_at": "2023-12-07T16:59:36Z"
    },
    {
      "event": "unlabeled",
      "id": 11184594196,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAAKap10U",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11184594196",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-07T17:10:39Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11198263397,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAKbd_Bl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11198263397",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "07edcd116985e7e63091a380685878f41665662d",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/07edcd116985e7e63091a380685878f41665662d",
      "created_at": "2023-12-08T22:44:25Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11201892660,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAKbr1E0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11201892660",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "4e00a94faa1616b962b5a98719155237a3bab9f5",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/4e00a94faa1616b962b5a98719155237a3bab9f5",
      "created_at": "2023-12-10T01:26:57Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11202916862,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAKbvvH-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11202916862",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "69f9ecde0570574f9a4db35fe3fb071ee4929a67",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/69f9ecde0570574f9a4db35fe3fb071ee4929a67",
      "created_at": "2023-12-10T13:45:56Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11202988562,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAKbwAoS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11202988562",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "544cd2d0823fb864c2e4d9704a51fd9743f4188c",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/544cd2d0823fb864c2e4d9704a51fd9743f4188c",
      "created_at": "2023-12-10T14:25:00Z"
    },
    {
      "event": "unlabeled",
      "id": 11203076413,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAAKbwWE9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11203076413",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-10T15:12:46Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 11279737369,
      "node_id": "LE_lADOABII5850QVJBzwAAAAKgUyIZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11279737369",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-18T17:38:37Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "referenced",
      "id": 11763923253,
      "node_id": "REFE_lADOABII5850QVJBzwAAAAK9Lzk1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11763923253",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "7143d4388407ab3d12005e55a02d5e8f334e4dc9",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7143d4388407ab3d12005e55a02d5e8f334e4dc9",
      "created_at": "2024-02-10T04:38:11Z"
    },
    {
      "event": "commented",
      "id": 1951640940,
      "node_id": "IC_kwDOABII5850U61s",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1951640940",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-19T03:45:20Z",
      "updated_at": "2024-02-19T03:45:20Z",
      "author_association": "NONE",
      "body": "do you have a simulation environment or script like you’ve done for #25717 to observe the computational complexity diff compared to today’s mempool against different chain of transaction performance payload ?\r\ninteresting what is the lowest performance linux host assumed for decentralization of the tx-relay network.\r\nassume always 24/7 internet and on a vpcu instance, not baremetal.",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-1951640940",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "commented",
      "id": 1952644105,
      "node_id": "IC_kwDOABII5850YvwJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1952644105",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-19T15:05:34Z",
      "updated_at": "2024-02-19T15:08:27Z",
      "author_association": "MEMBER",
      "body": "In the context of Stratum v2 #29432 I'm looking for a more efficient way to decide when to generate a new block template.\r\n\r\nThe current implementation looks at the mempool's `GetTransactionsUpdated()` every `-sv2interval` seconds. If there was any update, it calls `CreateNewBlock()` on `BlockAssembler`. It then checks if fees increased by at least `-sv2feedelta` since the last template and if so, pushes it to connected clients.\r\n\r\n`GetTransactionsUpdated()` changes all the time, especially with a big mempool, so not that useful of a filter. I'd like something like `GetFeeEstimateAtTop(size vbytes=4000000)`. Would it be easy to keep track of that (approximate) number every time something is added or removed from the mempool?\r\n\r\nIdeally I'd like to change the meaning of `-sv2interval` from \"check every n seconds and push update if needed\" to \"push better templates immediately, but wait least n seconds between them\".",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-1952644105",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "commented",
      "id": 1952653016,
      "node_id": "IC_kwDOABII5850Yx7Y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1952653016",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-19T15:10:36Z",
      "updated_at": "2024-02-19T15:10:36Z",
      "author_association": "MEMBER",
      "body": "> Would it be easy to keep track of that (approximate) number every time something is added or removed from the mempool?\r\n\r\nAfter clustermempool, yes. Today doing that inherently requires running the mining algorithm to figure out what transactions to put there.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-1952653016",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "commented",
      "id": 1952657689,
      "node_id": "IC_kwDOABII5850YzEZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1952657689",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-19T15:12:31Z",
      "updated_at": "2024-02-19T15:12:31Z",
      "author_association": "MEMBER",
      "body": "Indeed, I meant on top of this PR (or a later incarnation).",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-1952657689",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "commented",
      "id": 1959971463,
      "node_id": "IC_kwDOABII58500sqH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1959971463",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-22T17:56:07Z",
      "updated_at": "2024-02-22T17:56:07Z",
      "author_association": "NONE",
      "body": "> interesting what is the lowest performance linux host assumed for decentralization of the tx-relay network.\r\nassume always 24/7 internet and on a vpcu instance, not baremetal.\r\n\r\nRunning this branch mainet on a 2 vcpu instance, with the following performance characteristics:\r\n```\r\nprocessor       : 0\r\nvendor_id       : AuthenticAMD\r\ncpu family      : 25\r\nmodel           : 1\r\nmodel name      : AMD EPYC 7543 32-Core Processor\r\nstepping        : 1\r\nmicrocode       : 0xa0011d1\r\ncpu MHz         : 2794.750\r\ncache size      : 512 KB\r\n```\r\n\r\nIt would be very interesting to feed cluster-support testing node with all kinds of chain of transactions, and check substantial performance diff compared to non-cluster-support testing node. Check there is no substantial performance regression.",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-1959971463",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12042124799,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAALNxD3_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12042124799",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "cc70720c839ba2342541feb29e48d0e2db4d9e0a",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/cc70720c839ba2342541feb29e48d0e2db4d9e0a",
      "created_at": "2024-03-07T13:14:28Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12042232351,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAALNxeIf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12042232351",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "5ce8eff8e7c0d2f187ab39440b945d4a9d2f8259",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/5ce8eff8e7c0d2f187ab39440b945d4a9d2f8259",
      "created_at": "2024-03-07T13:23:01Z"
    },
    {
      "event": "unlabeled",
      "id": 12043647342,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAALN23lu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12043647342",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-07T15:02:18Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 1923884910,
      "node_id": "PRR_kwDOABII585yrCdu",
      "url": null,
      "actor": null,
      "commit_id": "5ce8eff8e7c0d2f187ab39440b945d4a9d2f8259",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2024-03-08T03:55:45Z",
      "author_association": "NONE",
      "body": "I’ll spend time reviewing current `CTxMemPool`’s code path w.r.t DoS resistance before to pursue review further. This is very unsure the introduction of `TxGraph` improves on this front as the design is focus on mining incentive-compatibility improvement first.",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-1923884910",
      "submitted_at": "2024-03-08T03:55:45Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "commented",
      "id": 1985000747,
      "node_id": "IC_kwDOABII5852ULUr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1985000747",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-08T04:01:40Z",
      "updated_at": "2024-03-08T04:01:40Z",
      "author_association": "NONE",
      "body": "> Running this branch mainet on a 2 vcpu instance, with the following performance characteristics:\r\n\r\nGot a disk space issue at block `501691` by syncing from genesis.\r\n\r\n```\r\n2024-02-23T10:53:41Z UpdateTip: new best=000000000000000000753b6b9821750d271e1730d7403a0658c507c88092bdf0 height=501691 version=0x20000000 log2_work=87.760876 tx=287312998 date='2017-12-30T07:48:59Z' progress=0.295839 cache=16.3MiB(151170txo)\r\n2024-02-23T10:53:41Z New outbound-full-relay v1 peer connected: version: 70016, blocks=831673, peer=196\r\n2024-02-23T10:53:47Z *** Disk space is too low!\r\n2024-02-23T10:53:47Z Error: Disk space is too low!\r\n```\r\n\r\nWas configured as a prune node with default pruning settings.\r\n```\r\n2024-02-22T17:49:33Z Prune configured to target 550 MiB on disk for block and undo files.\r\n```\r\n\r\nWith following `/proc/meminfo` dump\r\n\r\n```\r\nMemTotal:        4020688 kB\r\nMemFree:          359104 kB\r\nMemAvailable:    3650432 kB\r\nBuffers:           44424 kB\r\nCached:          3385624 kB\r\nSwapCached:            0 kB\r\nActive:          1312988 kB\r\nInactive:        2156904 kB\r\nActive(anon):        352 kB\r\nInactive(anon):    40004 kB\r\nActive(file):    1312636 kB\r\nInactive(file):  2116900 kB\r\n```",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-1985000747",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "labeled",
      "id": 12062076131,
      "node_id": "LE_lADOABII5850QVJBzwAAAALO9Kzj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12062076131",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-09T02:13:50Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 12346991211,
      "node_id": "LE_lADOABII5850QVJBzwAAAALf8CJr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12346991211",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-03T19:04:33Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2035375002,
      "node_id": "IC_kwDOABII5855UVua",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2035375002",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-03T19:04:34Z",
      "updated_at": "2024-04-03T19:04:34Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n\n🚧 At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/22392307037</sub>",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-2035375002",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12599446272,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAALu_EsA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12599446272",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "cae5e8de8454a23cc8e402cd7fd7bf403e21d14f",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/cae5e8de8454a23cc8e402cd7fd7bf403e21d14f",
      "created_at": "2024-04-25T00:08:47Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12617684642,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAALwEpai",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12617684642",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "4e6b827a1e1db97dd0e58e7432e9242001f62fa4",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/4e6b827a1e1db97dd0e58e7432e9242001f62fa4",
      "created_at": "2024-04-26T02:01:19Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12617696524,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAALwEsUM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12617696524",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "73c313a075e463bcd554e61da65c7dac2665724d",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/73c313a075e463bcd554e61da65c7dac2665724d",
      "created_at": "2024-04-26T02:03:18Z"
    },
    {
      "event": "unlabeled",
      "id": 12618205113,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAALwGoe5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12618205113",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-26T03:36:51Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12621170971,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAALwR8kb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12621170971",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "0176b890d5fc98a2551d1ae27e1593cea98fe4fb",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/0176b890d5fc98a2551d1ae27e1593cea98fe4fb",
      "created_at": "2024-04-26T09:32:17Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12623436677,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAALwaluF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12623436677",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "5398915a6c191ceb17485ef7ffe2dd81b1673135",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/5398915a6c191ceb17485ef7ffe2dd81b1673135",
      "created_at": "2024-04-26T12:48:31Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12623460443,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAALwarhb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12623460443",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "619c045255ff5c998451249ebd3e9122f0178201",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/619c045255ff5c998451249ebd3e9122f0178201",
      "created_at": "2024-04-26T12:50:33Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12623524380,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAALwa7Ic",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12623524380",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "109cd9b39bc09244d2be47bd3eacf3b2800f72db",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/109cd9b39bc09244d2be47bd3eacf3b2800f72db",
      "created_at": "2024-04-26T12:56:17Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12623748677,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAALwbx5F",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12623748677",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "490cb8502da01d598e59f26fc08f804cad1e47d8",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/490cb8502da01d598e59f26fc08f804cad1e47d8",
      "created_at": "2024-04-26T13:15:21Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12629428275,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAALwxcgz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12629428275",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "03f9fc90e2cd874f005e87d189af064ffb285dae",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/03f9fc90e2cd874f005e87d189af064ffb285dae",
      "created_at": "2024-04-27T00:34:35Z"
    },
    {
      "event": "reviewed",
      "id": 2026649349,
      "node_id": "PRR_kwDOABII5854zDcF",
      "url": null,
      "actor": null,
      "commit_id": "8ef26be6510f6aeadb98a08f353882cc19734c3d",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2024-04-27T13:23:12Z",
      "author_association": "NONE",
      "body": "",
      "user": {
        "login": "Dianagram009",
        "id": 129525650,
        "node_id": "U_kgDOB7hnkg",
        "avatar_url": "https://avatars.githubusercontent.com/u/129525650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Dianagram009",
        "html_url": "https://github.com/Dianagram009",
        "followers_url": "https://api.github.com/users/Dianagram009/followers",
        "following_url": "https://api.github.com/users/Dianagram009/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Dianagram009/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Dianagram009/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Dianagram009/subscriptions",
        "organizations_url": "https://api.github.com/users/Dianagram009/orgs",
        "repos_url": "https://api.github.com/users/Dianagram009/repos",
        "events_url": "https://api.github.com/users/Dianagram009/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Dianagram009/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-2026649349",
      "submitted_at": "2024-04-27T13:23:12Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12634548648,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAALxE-mo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12634548648",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "8e02c765b3d0f391c1007ef507f8f8db96471834",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/8e02c765b3d0f391c1007ef507f8f8db96471834",
      "created_at": "2024-04-28T11:39:43Z"
    },
    {
      "event": "unlabeled",
      "id": 12635814791,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAALxJzuH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12635814791",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-28T20:36:27Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 12655514371,
      "node_id": "LE_lADOABII5850QVJBzwAAAALyU9MD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12655514371",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-30T10:04:42Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 2043188274,
      "node_id": "PRR_kwDOABII5855yJQy",
      "url": null,
      "actor": null,
      "commit_id": "c49e0444e5c474d5e1ac0af89e9bc27958f3ed31",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2024-05-07T13:25:53Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "Christewart",
        "id": 3514957,
        "node_id": "MDQ6VXNlcjM1MTQ5NTc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3514957?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Christewart",
        "html_url": "https://github.com/Christewart",
        "followers_url": "https://api.github.com/users/Christewart/followers",
        "following_url": "https://api.github.com/users/Christewart/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Christewart/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Christewart/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Christewart/subscriptions",
        "organizations_url": "https://api.github.com/users/Christewart/orgs",
        "repos_url": "https://api.github.com/users/Christewart/repos",
        "events_url": "https://api.github.com/users/Christewart/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Christewart/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-2043188274",
      "submitted_at": "2024-05-07T13:25:53Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 2043431230,
      "node_id": "PRR_kwDOABII5855zEk-",
      "url": null,
      "actor": null,
      "commit_id": "c49e0444e5c474d5e1ac0af89e9bc27958f3ed31",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2024-05-07T14:50:23Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "Christewart",
        "id": 3514957,
        "node_id": "MDQ6VXNlcjM1MTQ5NTc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3514957?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Christewart",
        "html_url": "https://github.com/Christewart",
        "followers_url": "https://api.github.com/users/Christewart/followers",
        "following_url": "https://api.github.com/users/Christewart/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Christewart/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Christewart/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Christewart/subscriptions",
        "organizations_url": "https://api.github.com/users/Christewart/orgs",
        "repos_url": "https://api.github.com/users/Christewart/repos",
        "events_url": "https://api.github.com/users/Christewart/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Christewart/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-2043431230",
      "submitted_at": "2024-05-07T14:50:23Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12748778825,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAL34u1J",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12748778825",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "f3482ed6cc6fdcbdd74aa9c24df7c56d51533724",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/f3482ed6cc6fdcbdd74aa9c24df7c56d51533724",
      "created_at": "2024-05-08T20:07:22Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13054519874,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAMKHCpC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13054519874",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "4bcb241863d932d979545b4bac4d1acae211d045",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/4bcb241863d932d979545b4bac4d1acae211d045",
      "created_at": "2024-06-05T16:50:01Z"
    },
    {
      "event": "unlabeled",
      "id": 13054704734,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAAMKHvxe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13054704734",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-05T17:04:30Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13055037988,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAMKJBIk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13055037988",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "92e9e28973a14892d87bf6bc84ae9d3be21384a0",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/92e9e28973a14892d87bf6bc84ae9d3be21384a0",
      "created_at": "2024-06-05T17:31:30Z"
    },
    {
      "event": "labeled",
      "id": 13055038872,
      "node_id": "LE_lADOABII5850QVJBzwAAAAMKJBWY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13055038872",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-05T17:31:35Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13055160610,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAMKJfEi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13055160610",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "a4d046b63659490b79b4785a979f325fc2bc0432",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/a4d046b63659490b79b4785a979f325fc2bc0432",
      "created_at": "2024-06-05T17:42:16Z"
    },
    {
      "event": "unlabeled",
      "id": 13056431160,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAAMKOVQ4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13056431160",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-05T19:23:59Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13056495477,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAMKOk91",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13056495477",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "eab3c3bbc16df6977648dba1159404c5b80d5f71",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/eab3c3bbc16df6977648dba1159404c5b80d5f71",
      "created_at": "2024-06-05T19:29:29Z"
    },
    {
      "event": "labeled",
      "id": 13084591219,
      "node_id": "LE_lADOABII5850QVJBzwAAAAML5wRz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13084591219",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T19:06:30Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13102514952,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAMM-IMI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13102514952",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "5de8783312f47dd46775e5187f6755479aa835cf",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/5de8783312f47dd46775e5187f6755479aa835cf",
      "created_at": "2024-06-10T14:27:07Z"
    },
    {
      "event": "unsubscribed",
      "id": 13102541378,
      "node_id": "UE_lADOABII5850QVJBzwAAAAMM-OpC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13102541378",
      "actor": {
        "login": "benthecarman",
        "id": 15256660,
        "node_id": "MDQ6VXNlcjE1MjU2NjYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/15256660?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/benthecarman",
        "html_url": "https://github.com/benthecarman",
        "followers_url": "https://api.github.com/users/benthecarman/followers",
        "following_url": "https://api.github.com/users/benthecarman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/benthecarman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/benthecarman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/benthecarman/subscriptions",
        "organizations_url": "https://api.github.com/users/benthecarman/orgs",
        "repos_url": "https://api.github.com/users/benthecarman/repos",
        "events_url": "https://api.github.com/users/benthecarman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/benthecarman/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-10T14:28:48Z"
    },
    {
      "event": "subscribed",
      "id": 13102541969,
      "node_id": "SE_lADOABII5850QVJBzwAAAAMM-OyR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13102541969",
      "actor": {
        "login": "benthecarman",
        "id": 15256660,
        "node_id": "MDQ6VXNlcjE1MjU2NjYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/15256660?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/benthecarman",
        "html_url": "https://github.com/benthecarman",
        "followers_url": "https://api.github.com/users/benthecarman/followers",
        "following_url": "https://api.github.com/users/benthecarman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/benthecarman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/benthecarman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/benthecarman/subscriptions",
        "organizations_url": "https://api.github.com/users/benthecarman/orgs",
        "repos_url": "https://api.github.com/users/benthecarman/repos",
        "events_url": "https://api.github.com/users/benthecarman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/benthecarman/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-10T14:28:51Z"
    },
    {
      "event": "unsubscribed",
      "id": 13102542691,
      "node_id": "UE_lADOABII5850QVJBzwAAAAMM-O9j",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13102542691",
      "actor": {
        "login": "benthecarman",
        "id": 15256660,
        "node_id": "MDQ6VXNlcjE1MjU2NjYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/15256660?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/benthecarman",
        "html_url": "https://github.com/benthecarman",
        "followers_url": "https://api.github.com/users/benthecarman/followers",
        "following_url": "https://api.github.com/users/benthecarman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/benthecarman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/benthecarman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/benthecarman/subscriptions",
        "organizations_url": "https://api.github.com/users/benthecarman/orgs",
        "repos_url": "https://api.github.com/users/benthecarman/repos",
        "events_url": "https://api.github.com/users/benthecarman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/benthecarman/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-10T14:28:54Z"
    },
    {
      "event": "unlabeled",
      "id": 13103556163,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAAMNCGZD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13103556163",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-10T15:37:22Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 13108144980,
      "node_id": "LE_lADOABII5850QVJBzwAAAAMNTmtU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13108144980",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-10T22:21:45Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 13122801566,
      "node_id": "LE_lADOABII5850QVJBzwAAAAMOLg-e",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13122801566",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-11T21:07:00Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13135972112,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAMO9wcQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13135972112",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "e5a4b02fe018785d1a718b1bc6bb3bf44c80971d",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/e5a4b02fe018785d1a718b1bc6bb3bf44c80971d",
      "created_at": "2024-06-12T18:38:59Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13136108907,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAMO-R1r",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13136108907",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "0823c613eb04158cab2e8a6269d5357126b2ec99",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/0823c613eb04158cab2e8a6269d5357126b2ec99",
      "created_at": "2024-06-12T18:52:54Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13164380820,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAMQqIKU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13164380820",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "704f4c1e13c2e4945edacfdb5516e99f42b48853",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/704f4c1e13c2e4945edacfdb5516e99f42b48853",
      "created_at": "2024-06-14T18:30:39Z"
    },
    {
      "event": "unlabeled",
      "id": 13164402359,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAAMQqNa3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13164402359",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-14T18:33:16Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 13165258441,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAAMQtebJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13165258441",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-14T20:18:35Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 13192814508,
      "node_id": "LE_lADOABII5850QVJBzwAAAAMSWl-s",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13192814508",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-17T23:30:50Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13203079578,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAMS9wGa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13203079578",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "71e2187eacfbcaa4bc96b6179336d265e1771448",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/71e2187eacfbcaa4bc96b6179336d265e1771448",
      "created_at": "2024-06-18T15:32:45Z"
    },
    {
      "event": "unlabeled",
      "id": 13203727096,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAAMTAOL4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13203727096",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-18T16:23:46Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 13205955910,
      "node_id": "LE_lADOABII5850QVJBzwAAAAMTIuVG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13205955910",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-18T20:03:13Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2176868650,
      "node_id": "IC_kwDOABII586BwGEq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2176868650",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-18T20:03:14Z",
      "updated_at": "2024-06-18T20:03:14Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n\n🚧 At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/26377000968</sub>",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-2176868650",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "comment_deleted",
      "id": 13206111286,
      "node_id": "CDE_lADOABII5850QVJBzwAAAAMTJUQ2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13206111286",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-18T20:18:42Z"
    },
    {
      "event": "labeled",
      "id": 13216276888,
      "node_id": "LE_lADOABII5850QVJBzwAAAAMTwGGY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13216276888",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-19T13:07:38Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13301365807,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAMY0rwv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13301365807",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "8a0da0a6779fe2f50a5f2808940a1cb73939b031",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/8a0da0a6779fe2f50a5f2808940a1cb73939b031",
      "created_at": "2024-06-26T16:38:30Z"
    },
    {
      "event": "unlabeled",
      "id": 13302173468,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAAMY3w8c",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13302173468",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-26T17:48:04Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13332346854,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAMaq3fm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13332346854",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "e5ba9df5912a77729b60b31a56e228b0835486b4",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/e5ba9df5912a77729b60b31a56e228b0835486b4",
      "created_at": "2024-06-28T14:12:30Z"
    },
    {
      "event": "unlabeled",
      "id": 13333915655,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAAMaw2gH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13333915655",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-28T16:25:23Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13353026754,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAMb5wTC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13353026754",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "f54d6974a09a924695aab102c17f4f5e789a9136",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/f54d6974a09a924695aab102c17f4f5e789a9136",
      "created_at": "2024-07-01T15:12:44Z"
    },
    {
      "event": "labeled",
      "id": 13373113772,
      "node_id": "LE_lADOABII5850QVJBzwAAAAMdGYWs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13373113772",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-03T00:07:01Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13464925922,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAMiknbi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13464925922",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "ce3842927213cd52e40d358e9741cc7ad0fe5f93",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/ce3842927213cd52e40d358e9741cc7ad0fe5f93",
      "created_at": "2024-07-11T02:18:46Z"
    },
    {
      "event": "commented",
      "id": 2221954487,
      "node_id": "IC_kwDOABII586EcFW3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2221954487",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-11T03:38:06Z",
      "updated_at": "2024-07-11T03:38:06Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n\n🚧 At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/27300763520</sub>",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-2221954487",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "labeled",
      "id": 13465455604,
      "node_id": "LE_lADOABII5850QVJBzwAAAAMimov0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13465455604",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-11T03:38:06Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 13465594053,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAAMinKjF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13465594053",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-11T04:03:35Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13472787663,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAMjCmzP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13472787663",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "809370c8324dbcec707b9970f3c61a1e86391b42",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/809370c8324dbcec707b9970f3c61a1e86391b42",
      "created_at": "2024-07-11T14:30:35Z"
    },
    {
      "event": "unlabeled",
      "id": 13475166732,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAAMjLroM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13475166732",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-11T17:31:22Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 13504666151,
      "node_id": "LE_lADOABII5850QVJBzwAAAAMk8Non",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13504666151",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-15T12:18:18Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 2192522762,
      "node_id": "PRR_kwDOABII586Crz4K",
      "url": null,
      "actor": null,
      "commit_id": "809370c8324dbcec707b9970f3c61a1e86391b42",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2024-07-23T15:24:57Z",
      "author_association": "MEMBER",
      "body": "(after fixing the reported iterations done) Seeing a lot of linerarizations being done that are kind of odd looking repeats with same number of iterations?\r\n```\r\n2024-07-22T21:01:29.226080Z [bench] InvokeSort linearize cluster: 15 txs, 0.0184ms, 120 iter, 153.1ns/iter\r\n2024-07-22T21:01:29.226348Z [bench] InvokeSort linearize cluster: 15 txs, 0.0187ms, 120 iter, 155.7ns/iter\r\n2024-07-22T21:01:29.226633Z [bench] InvokeSort linearize cluster: 15 txs, 0.0180ms, 120 iter, 149.8ns/iter\r\n2024-07-22T21:01:29.226926Z [bench] InvokeSort linearize cluster: 15 txs, 0.0188ms, 120 iter, 156.8ns/iter\r\n```\r\nwhat's happening here?",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-2192522762",
      "submitted_at": "2024-07-23T15:24:57Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13661017157,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAMuQpRF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13661017157",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "7adc48b08242cfc6c3f0a92d7d3a933abc65de63",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/7adc48b08242cfc6c3f0a92d7d3a933abc65de63",
      "created_at": "2024-07-26T13:08:14Z"
    },
    {
      "event": "labeled",
      "id": 13662603974,
      "node_id": "LE_lADOABII5850QVJBzwAAAAMuWsrG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13662603974",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-26T15:06:01Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2252960912,
      "node_id": "IC_kwDOABII586GSXSQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2252960912",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-26T15:06:02Z",
      "updated_at": "2024-07-26T15:06:02Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n🚧 At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/27964484768</sub>\n\n<details><summary>Hints</summary>\n\nMake sure to run all tests locally, according to the documentation.\n\nThe failure may happen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-2252960912",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "unlabeled",
      "id": 13663093655,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAAMuYkOX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13663093655",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-26T15:48:01Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13666374857,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAMulFTJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13666374857",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "9d33c2539769cf5cd02cb9fdff986a533569ac0f",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/9d33c2539769cf5cd02cb9fdff986a533569ac0f",
      "created_at": "2024-07-26T21:53:38Z"
    },
    {
      "event": "unlabeled",
      "id": 13667002672,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAAMunekw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13667002672",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-27T00:41:58Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2256604232,
      "node_id": "IC_kwDOABII586GgQxI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2256604232",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-29T18:14:38Z",
      "updated_at": "2024-07-29T18:15:19Z",
      "author_association": "MEMBER",
      "body": "> (after fixing the reported iterations done) Seeing a lot of linerarizations being done that are kind of odd looking repeats with same number of iterations?\r\n> \r\n> ```\r\n> 2024-07-22T21:01:29.226080Z [bench] InvokeSort linearize cluster: 15 txs, 0.0184ms, 120 iter, 153.1ns/iter\r\n> 2024-07-22T21:01:29.226348Z [bench] InvokeSort linearize cluster: 15 txs, 0.0187ms, 120 iter, 155.7ns/iter\r\n> 2024-07-22T21:01:29.226633Z [bench] InvokeSort linearize cluster: 15 txs, 0.0180ms, 120 iter, 149.8ns/iter\r\n> 2024-07-22T21:01:29.226926Z [bench] InvokeSort linearize cluster: 15 txs, 0.0188ms, 120 iter, 156.8ns/iter\r\n> ```\r\n> \r\n> what's happening here?\r\n\r\nI observed some similar behavior on my node as well.  Without knowing exactly what was happening here: in the current draft of the PR, the number of iterations in an optimal sort is related to the number of topologically valid orderings of the cluster (since we look at all topologically valid subsets each time we try to find the best candidate), so if there are clusters with similar topologies, you might expect to see the same number of iterations needed.\r\n\r\nAdditionally, in the current draft, successful RBF candidates cause us to relinearize things twice: once to construct the feerate diagram, and once again when the new transaction is added to the mempool.  The intention is to eliminate the  linearizations upon acceptance to the mempool from taking place if they were already done as part of the RBF calculation (the design of the TxGraph was done with this in mind), but that is not yet implemented.  (In the example you pasted, I noticed there are 4 linearizations happening at the same millisecond, so I wonder if RBF may also be involved.)",
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-2256604232",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "referenced",
      "id": 13760545240,
      "node_id": "REFE_lADOABII5850QVJBzwAAAAM0MUHY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13760545240",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "bba01ba18d07f5bc7bf195319dc1229a88c4c220",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/bba01ba18d07f5bc7bf195319dc1229a88c4c220",
      "created_at": "2024-08-05T08:43:35Z"
    },
    {
      "event": "labeled",
      "id": 13761791532,
      "node_id": "LE_lADOABII5850QVJBzwAAAAM0REYs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13761791532",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-05T10:04:17Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14066144949,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAANGaFa1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14066144949",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "78c66672e7e907cc48d2da465003ab0aef8f48f4",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/78c66672e7e907cc48d2da465003ab0aef8f48f4",
      "created_at": "2024-08-29T16:18:52Z"
    },
    {
      "event": "unlabeled",
      "id": 14068056397,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAANGhYFN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14068056397",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-29T18:27:09Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14069211188,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAANGlyA0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14069211188",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "eee17def616deada5a7a22ab26d3edec3b14b071",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/eee17def616deada5a7a22ab26d3edec3b14b071",
      "created_at": "2024-08-29T19:39:24Z"
    },
    {
      "event": "labeled",
      "id": 14074766315,
      "node_id": "LE_lADOABII5850QVJBzwAAAANG6-Pr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14074766315",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-30T03:57:20Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 14107550038,
      "node_id": "LE_lADOABII5850QVJBzwAAAANI4CFW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14107550038",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-02T22:45:55Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14116133013,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAANJYxiV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14116133013",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "76b4f7ded7e4ba5364b8fe441b4f31ff1a37eafc",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/76b4f7ded7e4ba5364b8fe441b4f31ff1a37eafc",
      "created_at": "2024-09-03T14:17:08Z"
    },
    {
      "event": "unlabeled",
      "id": 14117220396,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAANJc7As",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14117220396",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-03T15:23:25Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 2277909745,
      "node_id": "PRR_kwDOABII586HxiTx",
      "url": null,
      "actor": null,
      "commit_id": "76b4f7ded7e4ba5364b8fe441b4f31ff1a37eafc",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2024-09-03T17:33:57Z",
      "author_association": "MEMBER",
      "body": "had a look at some tests that are disabled or have TODOs",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-2277909745",
      "submitted_at": "2024-09-03T17:33:57Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "unlabeled",
      "id": 14120861903,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAANJq0DP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14120861903",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-03T20:29:28Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14134831400,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAANKgGko",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14134831400",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "09145ccd3fdedd4c07b5119658c261139e35de7d",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/09145ccd3fdedd4c07b5119658c261139e35de7d",
      "created_at": "2024-09-04T17:20:53Z"
    },
    {
      "event": "labeled",
      "id": 14135565848,
      "node_id": "LE_lADOABII5850QVJBzwAAAANKi54Y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14135565848",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-04T18:29:40Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2329721390,
      "node_id": "IC_kwDOABII586K3Lou",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2329721390",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-04T18:29:41Z",
      "updated_at": "2024-09-04T18:29:41Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n🚧 At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/29684404375</sub>\n\n<details><summary>Hints</summary>\n\nMake sure to run all tests locally, according to the documentation.\n\nThe failure may happen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-2329721390",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14135725012,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAANKjgvU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14135725012",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "bae414364349d4d252f11414587796a9e7cb017f",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/bae414364349d4d252f11414587796a9e7cb017f",
      "created_at": "2024-09-04T18:45:06Z"
    },
    {
      "event": "labeled",
      "id": 14137862340,
      "node_id": "LE_lADOABII5850QVJBzwAAAANKrqjE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14137862340",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-04T21:39:58Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14138975986,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAANKv6by",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14138975986",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "521768f69a3f4e72a5f07290aa10c8160a215b5f",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/521768f69a3f4e72a5f07290aa10c8160a215b5f",
      "created_at": "2024-09-05T00:19:49Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14138981296,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAANKv7uw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14138981296",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "096499cdde9c053f6e25c8481bfb2137879ef158",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/096499cdde9c053f6e25c8481bfb2137879ef158",
      "created_at": "2024-09-05T00:20:43Z"
    },
    {
      "event": "unlabeled",
      "id": 14139487859,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAANKx3Zz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14139487859",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-05T01:47:49Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14150546590,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAANLcDSe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14150546590",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "ab35bca0972834a5ca2fc6220b8c6fa971815640",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/ab35bca0972834a5ca2fc6220b8c6fa971815640",
      "created_at": "2024-09-05T17:02:19Z"
    },
    {
      "event": "commented",
      "id": 2332274663,
      "node_id": "IC_kwDOABII586LA6_n",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2332274663",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-05T17:28:01Z",
      "updated_at": "2024-09-05T17:28:01Z",
      "author_association": "MEMBER",
      "body": "Thanks @glozow for the test improvements.  I've also made a change to an RBF limit that I think is worth mentioning.  Rather than limit the number of direct conflicts that a transaction can have, I've now implemented the limit to be on the number of distinct clusters that the conflicts of a transaction belong to.\r\n\r\nThe idea is still to create some bound on the amount of CPU we might spend linearizing clusters and doing feerate diagram checks when processing a single transaction.  Limiting the number of conflicting clusters (at 100 for now) should be sufficient to achieve that.  I want to point out that we might linearize more than 100 clusters as a result of a replacement (because removing conflicts might cause clusters to split), but since linearizing small clusters is generally much less work than linearizing big clusters, I don't think this distinction materially affects the way we understand the implied CPU bound.",
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-2332274663",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "mentioned",
      "id": 14150829120,
      "node_id": "MEE_lADOABII5850QVJBzwAAAANLdIRA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14150829120",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-05T17:28:02Z"
    },
    {
      "event": "subscribed",
      "id": 14150829133,
      "node_id": "SE_lADOABII5850QVJBzwAAAANLdIRN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14150829133",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-05T17:28:02Z"
    },
    {
      "event": "reviewed",
      "id": 2283792936,
      "node_id": "PRR_kwDOABII586IH-oo",
      "url": null,
      "actor": null,
      "commit_id": "ab35bca0972834a5ca2fc6220b8c6fa971815640",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2024-09-05T22:05:32Z",
      "author_association": "MEMBER",
      "body": "poked at the function tests a bit",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-2283792936",
      "submitted_at": "2024-09-05T22:05:32Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14279244743,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAANTG_vH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14279244743",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "81fbf36694b62f00587ab823d9603d767b0414bb",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/81fbf36694b62f00587ab823d9603d767b0414bb",
      "created_at": "2024-09-16T20:05:44Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14281531617,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAANTPuDh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14281531617",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "7b3603860f51358f547647a67cd926bacc921500",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/7b3603860f51358f547647a67cd926bacc921500",
      "created_at": "2024-09-16T21:47:07Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14292097451,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAANT4Bmr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14292097451",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "6b6fbca96f04d8bd148290f3190260592e7bcdb1",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/6b6fbca96f04d8bd148290f3190260592e7bcdb1",
      "created_at": "2024-09-17T14:09:49Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14293095086,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAANT71Ku",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14293095086",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "edf91dc609cd2d7375fb88eb85e107627bebeab5",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/edf91dc609cd2d7375fb88eb85e107627bebeab5",
      "created_at": "2024-09-17T15:12:10Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14294383544,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAANUAvu4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14294383544",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "975d5ef8ef254ed5300ff4099ebe33c27e123865",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/975d5ef8ef254ed5300ff4099ebe33c27e123865",
      "created_at": "2024-09-17T16:51:05Z"
    },
    {
      "event": "unlabeled",
      "id": 14297687842,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAANUNWci",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14297687842",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-17T21:16:50Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 14462397451,
      "node_id": "LE_lADOABII5850QVJBzwAAAANeBqwL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14462397451",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-30T21:11:51Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14488553764,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAANflckk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14488553764",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "326ea365ca06f833411e0a4738a232928aafcc4e",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/326ea365ca06f833411e0a4738a232928aafcc4e",
      "created_at": "2024-10-02T13:12:20Z"
    },
    {
      "event": "unlabeled",
      "id": 14490239354,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAANfr4F6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14490239354",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-02T14:57:11Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14496408745,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAANgDaSp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14496408745",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "f20f566da41d66dd6155a4096634738359e0dff6",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/f20f566da41d66dd6155a4096634738359e0dff6",
      "created_at": "2024-10-02T23:08:13Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14732140255,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAANuGp7f",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14732140255",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "103981c4086d688dbd9094b69057b3e1d326f9d2",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/103981c4086d688dbd9094b69057b3e1d326f9d2",
      "created_at": "2024-10-19T10:38:13Z"
    },
    {
      "event": "labeled",
      "id": 14732251007,
      "node_id": "LE_lADOABII5850QVJBzwAAAANuHE9_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14732251007",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-19T10:55:35Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2423759608,
      "node_id": "IC_kwDOABII586Qd6L4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2423759608",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-19T10:55:36Z",
      "updated_at": "2024-10-19T10:55:36Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n🚧 At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/31768588577</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-2423759608",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14736150666,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAANuV9CK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14736150666",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "578c7f7152ab387c4ea753ac13fc9d7794bcfa4b",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/578c7f7152ab387c4ea753ac13fc9d7794bcfa4b",
      "created_at": "2024-10-19T15:45:35Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14736958675,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAANuZCTT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14736958675",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "46a17b262b95a794175861cdea6f18963e63c548",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/46a17b262b95a794175861cdea6f18963e63c548",
      "created_at": "2024-10-19T17:33:56Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14742001572,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAANusRek",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14742001572",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "60c79f335ec8ff52ea2e53f8c8001b8fb80f5dd1",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/60c79f335ec8ff52ea2e53f8c8001b8fb80f5dd1",
      "created_at": "2024-10-20T00:28:19Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14752108047,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAANvS04P",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14752108047",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "5b688c1f7daa87d5b6e015edd71eb36674da3477",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/5b688c1f7daa87d5b6e015edd71eb36674da3477",
      "created_at": "2024-10-20T15:09:19Z"
    },
    {
      "event": "unlabeled",
      "id": 14753416138,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAANvX0PK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14753416138",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-20T16:40:57Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "subscribed",
      "id": 14758037821,
      "node_id": "SE_lADOABII5850QVJBzwAAAANvpck9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14758037821",
      "actor": {
        "login": "gsannikov",
        "id": 52405655,
        "node_id": "MDQ6VXNlcjUyNDA1NjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/52405655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gsannikov",
        "html_url": "https://github.com/gsannikov",
        "followers_url": "https://api.github.com/users/gsannikov/followers",
        "following_url": "https://api.github.com/users/gsannikov/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gsannikov/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gsannikov/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gsannikov/subscriptions",
        "organizations_url": "https://api.github.com/users/gsannikov/orgs",
        "repos_url": "https://api.github.com/users/gsannikov/repos",
        "events_url": "https://api.github.com/users/gsannikov/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gsannikov/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-21T05:37:12Z"
    },
    {
      "event": "unsubscribed",
      "id": 14758037963,
      "node_id": "UE_lADOABII5850QVJBzwAAAANvpcnL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14758037963",
      "actor": {
        "login": "gsannikov",
        "id": 52405655,
        "node_id": "MDQ6VXNlcjUyNDA1NjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/52405655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gsannikov",
        "html_url": "https://github.com/gsannikov",
        "followers_url": "https://api.github.com/users/gsannikov/followers",
        "following_url": "https://api.github.com/users/gsannikov/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gsannikov/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gsannikov/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gsannikov/subscriptions",
        "organizations_url": "https://api.github.com/users/gsannikov/orgs",
        "repos_url": "https://api.github.com/users/gsannikov/repos",
        "events_url": "https://api.github.com/users/gsannikov/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gsannikov/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-21T05:37:13Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14760855419,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAANv0Md7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14760855419",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "b7d4db11db4bfd7194cd8297e7d336618c8714cd",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/b7d4db11db4bfd7194cd8297e7d336618c8714cd",
      "created_at": "2024-10-21T09:09:53Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14764012503,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAANwAPPX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14764012503",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "2d55cb5c3b34492da174d92d23eaf93d6d47c03d",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/2d55cb5c3b34492da174d92d23eaf93d6d47c03d",
      "created_at": "2024-10-21T12:36:14Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14793653379,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAANxxTyD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14793653379",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "572f8270928e6e60492caffb7f033c10fa2484aa",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/572f8270928e6e60492caffb7f033c10fa2484aa",
      "created_at": "2024-10-22T22:08:17Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14872911072,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAN2fpzg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14872911072",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "930f9137d6571d9a5000a7ec27e7c380bea01d2b",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/930f9137d6571d9a5000a7ec27e7c380bea01d2b",
      "created_at": "2024-10-25T12:31:57Z"
    },
    {
      "event": "labeled",
      "id": 14905414405,
      "node_id": "LE_lADOABII5850QVJBzwAAAAN4bpMF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14905414405",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-26T15:04:29Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14914246887,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAN49Vjn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14914246887",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "9605ee63381d09e0381d5ba93fca9b7e6537df82",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/9605ee63381d09e0381d5ba93fca9b7e6537df82",
      "created_at": "2024-10-26T21:56:22Z"
    },
    {
      "event": "unlabeled",
      "id": 14916062594,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAAN5EQ2C",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14916062594",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-26T23:21:15Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 14916575196,
      "node_id": "LE_lADOABII5850QVJBzwAAAAN5GN_c",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14916575196",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-26T23:43:29Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14932721329,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAN6Dz6x",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14932721329",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "82f028b4985318d4a863bc483e16c283a9590e59",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/82f028b4985318d4a863bc483e16c283a9590e59",
      "created_at": "2024-10-27T21:42:04Z"
    },
    {
      "event": "unlabeled",
      "id": 14934329994,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAAN6J8qK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14934329994",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-27T23:16:36Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 14989240683,
      "node_id": "LE_lADOABII5850QVJBzwAAAAN9balr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14989240683",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-29T18:01:29Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15070338046,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAOCQxv-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15070338046",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "d774cbfabd971f958a8f197e64e9e3f16658761b",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/d774cbfabd971f958a8f197e64e9e3f16658761b",
      "created_at": "2024-11-01T15:00:53Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15290952916,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAOPaWzU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15290952916",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "8fa9fcbbc8091a5c55b6e5d4b834684262df8ac9",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/8fa9fcbbc8091a5c55b6e5d4b834684262df8ac9",
      "created_at": "2024-11-14T00:21:31Z"
    },
    {
      "event": "unlabeled",
      "id": 15291644756,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAAOPc_tU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15291644756",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-14T01:49:57Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 15305527625,
      "node_id": "LE_lADOABII5850QVJBzwAAAAOQR9FJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15305527625",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-14T23:34:20Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "referenced",
      "id": 15366736992,
      "node_id": "REFE_lADOABII5850QVJBzwAAAAOT7cxg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15366736992",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "f34fe0806a02ce68709acad3bf978216951ec17b",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f34fe0806a02ce68709acad3bf978216951ec17b",
      "created_at": "2024-11-20T12:49:11Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15367002888,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAOT8dsI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15367002888",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "f26dfef626d54d0332a06ca6e1c7fbddca42e581",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/f26dfef626d54d0332a06ca6e1c7fbddca42e581",
      "created_at": "2024-11-20T13:10:30Z"
    },
    {
      "event": "unlabeled",
      "id": 15368411243,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAAOUB1hr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15368411243",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-20T14:51:08Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 15558327842,
      "node_id": "LE_lADOABII5850QVJBzwAAAAOfWT4i",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15558327842",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-06T10:58:22Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16068329416,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAO9vz_I",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16068329416",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "be919d9438e1a5b47d2895c16a5a28fb4079a961",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/be919d9438e1a5b47d2895c16a5a28fb4079a961",
      "created_at": "2025-01-25T22:01:12Z"
    },
    {
      "event": "commented",
      "id": 2614113618,
      "node_id": "IC_kwDOABII586b0DVS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2614113618",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-25T22:03:10Z",
      "updated_at": "2025-01-25T22:04:00Z",
      "author_association": "MEMBER",
      "body": "Rebased on #31553 (old version is here: https://github.com/sdaftuar/bitcoin/tree/28676.1)",
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-2614113618",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "labeled",
      "id": 16068381146,
      "node_id": "LE_lADOABII5850QVJBzwAAAAO9wAna",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16068381146",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-25T22:39:03Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2614122003,
      "node_id": "IC_kwDOABII586b0FYT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2614122003",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-25T22:39:04Z",
      "updated_at": "2025-01-25T22:39:04Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n🚧 At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/36172122987</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-2614122003",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "unlabeled",
      "id": 16068452387,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAAO9wSAj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16068452387",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-25T23:33:28Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16070243359,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAO93HQf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16070243359",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "ce89b914c2ff513e0fd75aee7075793b43abbcca",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/ce89b914c2ff513e0fd75aee7075793b43abbcca",
      "created_at": "2025-01-26T14:41:31Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16071076467,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAO96Spz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16071076467",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "cfd604653ef11c724f25f26cd91e435039984203",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/cfd604653ef11c724f25f26cd91e435039984203",
      "created_at": "2025-01-26T21:07:12Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16130029824,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAPBbLkA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16130029824",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "682aab426e13d065a8c4a3e396e91e6ad4db0c35",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/682aab426e13d065a8c4a3e396e91e6ad4db0c35",
      "created_at": "2025-01-30T20:59:32Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16185719103,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAPEvnk_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16185719103",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "012d8f1f2b1afe5aafac917b993024dc6a700e91",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/012d8f1f2b1afe5aafac917b993024dc6a700e91",
      "created_at": "2025-02-04T21:56:52Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16185737020,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAPEvr88",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16185737020",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "a01313874714119e66d0c7893ca44953bfe49b9d",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/a01313874714119e66d0c7893ca44953bfe49b9d",
      "created_at": "2025-02-04T21:58:48Z"
    },
    {
      "event": "labeled",
      "id": 16276542339,
      "node_id": "LE_lADOABII5850QVJBzwAAAAPKKFOD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16276542339",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-12T08:02:35Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 2615536407,
      "node_id": "PRR_kwDOABII586b5esX",
      "url": null,
      "actor": null,
      "commit_id": "a01313874714119e66d0c7893ca44953bfe49b9d",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-02-13T16:06:53Z",
      "author_association": "MEMBER",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-2615536407",
      "submitted_at": "2025-02-13T16:06:53Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16994030096,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAP07FIQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16994030096",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "20e42a4a7423d7bc62326cdb6405bc6d5900953e",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/20e42a4a7423d7bc62326cdb6405bc6d5900953e",
      "created_at": "2025-03-26T14:26:40Z"
    },
    {
      "event": "referenced",
      "id": 17000519270,
      "node_id": "REFE_lADOABII5850QVJBzwAAAAP1T1Zm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17000519270",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "f1d129d96340503ec5f6b347c2fdf6a6901b1f7e",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f1d129d96340503ec5f6b347c2fdf6a6901b1f7e",
      "created_at": "2025-03-26T21:43:50Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17234568489,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAQDQqUp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17234568489",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "276ddafaa8c4701c05c4562a9e3634c7751fa1d1",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/276ddafaa8c4701c05c4562a9e3634c7751fa1d1",
      "created_at": "2025-04-12T14:03:51Z"
    },
    {
      "event": "unlabeled",
      "id": 17234643338,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAAQDQ8mK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17234643338",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-12T14:39:55Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17253436223,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAQEYos_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17253436223",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "a736ee437942b3e0d4d3dc46ef96d4f3f2f3e9e5",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/a736ee437942b3e0d4d3dc46ef96d4f3f2f3e9e5",
      "created_at": "2025-04-14T18:03:24Z"
    },
    {
      "event": "labeled",
      "id": 17307503779,
      "node_id": "LE_lADOABII5850QVJBzwAAAAQHm4yj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17307503779",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-17T14:47:20Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17873659586,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAQpWmbC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17873659586",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "3bfaedbd7d9d6e71e9df03fbbb51a33c6184cca6",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/3bfaedbd7d9d6e71e9df03fbbb51a33c6184cca6",
      "created_at": "2025-05-29T18:56:28Z"
    },
    {
      "event": "commented",
      "id": 3016809091,
      "node_id": "IC_kwDOABII586z0NqD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3016809091",
      "actor": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-29T15:53:16Z",
      "updated_at": "2025-06-29T15:53:16Z",
      "author_association": "MEMBER",
      "body": "I fuzzed this branch (https://github.com/bitcoin/bitcoin/pull/28676/commits/3bfaedbd7d9d6e71e9df03fbbb51a33c6184cca6) with [fuzzamoto](https://github.com/dergoegge/fuzzamoto) and it found an assertion crash in `CTxMemPool::check`.\r\n\r\n```\r\n2025-06-29T15:20:42Z (mocktime: 2031-04-03T07:09:03Z) [bench] - Disconnect block: 0.72ms\r\n2025-06-29T15:20:42Z (mocktime: 2031-04-03T07:09:03Z) [prune] basic block filter index prune lock moved back to 200\r\n2025-06-29T15:20:42Z (mocktime: 2031-04-03T07:09:03Z) UpdateTip: new best=458aa11fef72fd87496f231da978c98b9fe7f2bbd7d2bf5f612a24920b68ce7a height=200 version=0x00000005 log2_work=8.651052 tx=201 date='2031-04-03T07:09:11Z' progress=0.994065 cache=0.3MiB(202txo)\r\n2025-06-29T15:20:42Z (mocktime: 2031-04-03T07:09:03Z) [validation] Enqueuing BlockDisconnected: block hash=6358b07d187f72dbf7b893a6200dc3e4c5b4bce29574ed063a9ea4c87478ba2d block height=201\r\n2025-06-29T15:20:42Z (mocktime: 2031-04-03T07:09:03Z) [bench]   - Load block from disk: 0.04ms\r\n2025-06-29T15:20:42Z (mocktime: 2031-04-03T07:09:03Z) [validation] BlockDisconnected: block hash=6358b07d187f72dbf7b893a6200dc3e4c5b4bce29574ed063a9ea4c87478ba2d block height=201\r\n2025-06-29T15:20:42Z (mocktime: 2031-04-03T07:09:03Z) [bench]     - Sanity checks: 0.01ms [0.00s (0.00ms/blk)]\r\n2025-06-29T15:20:42Z (mocktime: 2031-04-03T07:09:03Z) [bench]     - Fork checks: 0.12ms [0.00s (0.02ms/blk)]\r\n2025-06-29T15:20:42Z (mocktime: 2031-04-03T07:09:03Z) [bench]       - Connect 2 transactions: 0.05ms (0.025ms/tx, 0.050ms/txin) [0.00s (0.02ms/blk)]\r\n2025-06-29T15:20:42Z (mocktime: 2031-04-03T07:09:03Z) Block validation error: bad-txns-inputs-missingorspent, CheckTxInputs: inputs missing/spent in transaction 296accd2d2f2891647fd9375c8b1ec613c5f29366bba8349c5b804c5c9641259\r\n2025-06-29T15:20:42Z (mocktime: 2031-04-03T07:09:03Z) [validation] BlockChecked: block hash=14f0e47137dbcfbb1e1d7f309bd71672de3cd58c6f495a31da7690ab04f26610 state=bad-txns-inputs-missingorspent, CheckTxInputs: inputs missing/spent in transaction 296accd2d2f2891647fd9375c8b1ec613c5f29366bba8349c5b804c5c9641259\r\n2025-06-29T15:20:42Z (mocktime: 2031-04-03T07:09:03Z) [net] Misbehaving: peer=6\r\n2025-06-29T15:20:42Z (mocktime: 2031-04-03T07:09:03Z) InvalidChainFound: invalid block=14f0e47137dbcfbb1e1d7f309bd71672de3cd58c6f495a31da7690ab04f26610  height=201  log2_work=8.658211  date=2031-04-03T07:09:03Z\r\n2025-06-29T15:20:42Z (mocktime: 2031-04-03T07:09:03Z) InvalidChainFound:  current best=458aa11fef72fd87496f231da978c98b9fe7f2bbd7d2bf5f612a24920b68ce7a  height=200  log2_work=8.651052  date=2031-04-03T07:09:11Z\r\n2025-06-29T15:20:42Z (mocktime: 2031-04-03T07:09:03Z) [error] ConnectTip: ConnectBlock 14f0e47137dbcfbb1e1d7f309bd71672de3cd58c6f495a31da7690ab04f26610 failed, bad-txns-inputs-missingorspent, CheckTxInputs: inputs missing/spent in transaction 296accd2d2f2891647fd9375c8b1ec613c5f29366bba8349c5b804c5c9641259\r\n2025-06-29T15:20:42Z (mocktime: 2031-04-03T07:09:03Z) InvalidChainFound: invalid block=0bdf4c163bfa947a0994f7250ea870b38312090b66db11b91b47b5e2e1cb944c  height=202  log2_work=8.665336  date=2031-04-03T07:09:03Z\r\n2025-06-29T15:20:42Z (mocktime: 2031-04-03T07:09:03Z) InvalidChainFound:  current best=458aa11fef72fd87496f231da978c98b9fe7f2bbd7d2bf5f612a24920b68ce7a  height=200  log2_work=8.651052  date=2031-04-03T07:09:11Z\r\n2025-06-29T15:20:42Z (mocktime: 2031-04-03T07:09:03Z) [validation] Enqueuing TransactionAddedToMempool: txid=c8e1f1327540cc3bd05956f1e65c93b5f0fca2ce40e09c4573d8e260984882f8 wtxid=025c564da6a096dff04d9d2cfb89e73073b41ac8bac8ade988c2493c0c277e2d\r\n2025-06-29T15:20:42Z (mocktime: 2031-04-03T07:09:03Z) [validation] Enqueuing TransactionAddedToMempool: txid=529525f93ecd129d28ba7acd9cb0bfc3338e8ab840489425f1e60417e947545d wtxid=6900dd2c8d16f0f1ffae597f756fc39ad13b5dd09f89bd00907e4aa4782b87de\r\n2025-06-29T15:20:42Z (mocktime: 2031-04-03T07:09:03Z) [validation] Enqueuing TransactionAddedToMempool: txid=3a7e142719cc5b9dd2a8af2da1badd895fb79955c03f2ed06721d80ffe99a4a1 wtxid=41f2ac217c7b310120d33dbe399c2bead8691aa1a6bf0841ea06c31c17c55e41\r\n2025-06-29T15:20:42Z (mocktime: 2031-04-03T07:09:03Z) [validation] Enqueuing TransactionAddedToMempool: txid=39c039e5f1ebbabce8009a49a25ad383f7ca486eb6b93d0c507fed4a0a68d4c0 wtxid=192ffd8478fa09b3325f195f13d7decab5a6ce73aee16b85e4398a3c59bd8a8e\r\n2025-06-29T15:20:42Z (mocktime: 2031-04-03T07:09:03Z) [validation] Enqueuing TransactionAddedToMempool: txid=b929dd12cb7a7340c0d764f4d71312ba5224c2faffa8025f1f627bd624c600b7 wtxid=cb2432df45a0bbd043c0a4147fcc0b7afafeff7c3669a789b40065da3e435628\r\n2025-06-29T15:20:42Z (mocktime: 2031-04-03T07:09:03Z) [validation] Enqueuing TransactionAddedToMempool: txid=db4aa556b03b710689c9a00c225229a3a4e2e9e296f014169b66949c6ba0c7e4 wtxid=e972c380b853a3cdd2c4554c6604748dd40ca155d70e54baf3dccf767d931322\r\n2025-06-29T15:20:42Z (mocktime: 2031-04-03T07:09:03Z) [validation] Enqueuing TransactionRemovedFromMempool: txid=4acde228f2a5efb36b4feb02bed7f3fa476355b481f6e9a63f62c0328fc07d9c wtxid=01287e9b280e0eec3c04694d46f7ed8ef2377f404e84d67b180f311b9b2f8b38 reason=reorg\r\n2025-06-29T15:20:42Z (mocktime: 2031-04-03T07:09:03Z) [mempool] Checking mempool with 18 transactions and 18 inputs\r\nbitcoind: txmempool.cpp:464: void CTxMemPool::check(const CCoinsViewCache &, int64_t) const: Assertion `mempoolDuplicate.HaveCoin(txin.prevout)' failed.\r\n```\r\n\r\nJudging by the logs, it seems to involve a reorg, so I'm not sure if the existing fuzz tests would also catch this but I also haven't tried.\r\n\r\nTo reproduce:\r\n\r\n```\r\ngit clone https://github.com/dergoegge/fuzzamoto.git\r\ncd fuzzamoto/\r\ncargo build --release --package fuzzamoto-scenarios --features reproduce\r\nFUZZAMOTO_INPUT=./cluster-crash-jun29.txt RUST_LOG=info ./target/release/scenario-ir <path to bitcoind>\r\n```\r\nThe input file: [cluster-crash-jun29.txt](https://github.com/user-attachments/files/20968556/cluster-crash-jun29.txt)\r\n\r\nLet me know if the steps above don't work for you or aren't helpful for debugging, I can also try to create a functional test...",
      "user": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-3016809091",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "commented",
      "id": 3018572194,
      "node_id": "IC_kwDOABII586z68Gi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3018572194",
      "actor": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-30T10:09:59Z",
      "updated_at": "2025-06-30T10:09:59Z",
      "author_association": "MEMBER",
      "body": "Functional test in this commit: https://github.com/dergoegge/bitcoin/commit/6329ce979f63b396aa036a1ad39798bb83fa4ade (change to `random.cpp` is necessary to make it deterministic, without it the test only hits the assert 1/5 times)\r\n\r\ncc @instagibbs",
      "user": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-3018572194",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "mentioned",
      "id": 18383582726,
      "node_id": "MEE_lADOABII5850QVJBzwAAAARHvzYG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18383582726",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-30T10:10:00Z"
    },
    {
      "event": "subscribed",
      "id": 18383582750,
      "node_id": "SE_lADOABII5850QVJBzwAAAARHvzYe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18383582750",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-30T10:10:00Z"
    },
    {
      "event": "commented",
      "id": 3019599266,
      "node_id": "IC_kwDOABII586z-22i",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3019599266",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-30T15:21:58Z",
      "updated_at": "2025-06-30T15:24:10Z",
      "author_association": "MEMBER",
      "body": "@dergoegge awesome coverage and functional test!\r\n\r\nSeems this is the issue, we are `visited`ing children erroneously disallowing their removal later when parent is `visited` for immaturity:\r\n```\r\ndiff --git a/src/txmempool.cpp b/src/txmempool.cpp\r\nindex 5c90bc43dd..3c278f6aad 100644\r\n--- a/src/txmempool.cpp\r\n+++ b/src/txmempool.cpp\r\n@@ -362,5 +362,5 @@ void CTxMemPool::removeForReorg(CChain& chain, std::function<bool(txiter)> check\r\n         WITH_FRESH_EPOCH(m_epoch);\r\n         for (indexed_transaction_set::const_iterator it = mapTx.begin(); it != mapTx.end(); it++) {\r\n-            if (!visited(it) && check_final_and_mature(it)) {\r\n+            if (check_final_and_mature(it) && !visited(it)) {\r\n                 txToRemove.emplace_back(it);\r\n                 auto descendants = m_txgraph->GetDescendants(*it);\r\n```",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-3019599266",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "mentioned",
      "id": 18389356911,
      "node_id": "MEE_lADOABII5850QVJBzwAAAARIF1Fv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18389356911",
      "actor": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-30T15:21:59Z"
    },
    {
      "event": "subscribed",
      "id": 18389356945,
      "node_id": "SE_lADOABII5850QVJBzwAAAARIF1GR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18389356945",
      "actor": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-30T15:21:59Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18573406096,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAARTD6-Q",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18573406096",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "393f90b10476794da0ab0969020521b3f1c3337b",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/393f90b10476794da0ab0969020521b3f1c3337b",
      "created_at": "2025-07-10T20:41:40Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18573574013,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAARTEj99",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18573574013",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "748642248bb23e4458a361193c095dba7b91be68",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/748642248bb23e4458a361193c095dba7b91be68",
      "created_at": "2025-07-10T20:52:10Z"
    },
    {
      "event": "unlabeled",
      "id": 18573992254,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAARTGKE-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18573992254",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-10T21:18:19Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3059151670,
      "node_id": "IC_kwDOABII5862VvM2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3059151670",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-10T21:23:25Z",
      "updated_at": "2025-07-10T21:23:25Z",
      "author_association": "MEMBER",
      "body": "Follow-up from a while back: let's just explicitly say which layer of txgraph we're querying: https://github.com/instagibbs/bitcoin/commit/bb48f6c4736c227bcee6c4dda8e95b0b0287cfef",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-3059151670",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18592517002,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAARUM0uK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18592517002",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "6a795027834b5fc35770f1bfe8021d63a3b7dd00",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/6a795027834b5fc35770f1bfe8021d63a3b7dd00",
      "created_at": "2025-07-11T19:04:00Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18600370498,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAARUqyFC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18600370498",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "2ab412514dd768ef9f9e35f9a31fd9a8788afe40",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/2ab412514dd768ef9f9e35f9a31fd9a8788afe40",
      "created_at": "2025-07-12T15:40:58Z"
    },
    {
      "event": "labeled",
      "id": 18731833098,
      "node_id": "LE_lADOABII5850QVJBzwAAAARcgRcK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18731833098",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-21T15:37:49Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18864215959,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAARkZReX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18864215959",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "c84f6b962101c37c8a089c21a7ed218d007d1674",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/c84f6b962101c37c8a089c21a7ed218d007d1674",
      "created_at": "2025-07-28T20:35:48Z"
    },
    {
      "event": "unlabeled",
      "id": 18865398794,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAARkdyQK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18865398794",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-28T22:32:09Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 18866899435,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAARkjgnr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18866899435",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-29T02:00:07Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 18873797544,
      "node_id": "LE_lADOABII5850QVJBzwAAAARk90uo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18873797544",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-29T09:01:38Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18877036179,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAARlKLaT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18877036179",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "e309fe5a033ddba5cc4f9147b07cf86aaa7e8264",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/e309fe5a033ddba5cc4f9147b07cf86aaa7e8264",
      "created_at": "2025-07-29T11:56:01Z"
    },
    {
      "event": "ready_for_review",
      "id": 18877038828,
      "node_id": "RFRE_lADOABII5850QVJBzwAAAARlKMDs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18877038828",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-29T11:56:11Z"
    },
    {
      "event": "commented",
      "id": 3132158578,
      "node_id": "IC_kwDOABII5866sPJy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3132158578",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-29T12:02:10Z",
      "updated_at": "2025-07-29T12:02:10Z",
      "author_association": "MEMBER",
      "body": "> I fuzzed this branch ([3bfaedb](https://github.com/bitcoin/bitcoin/commit/3bfaedbd7d9d6e71e9df03fbbb51a33c6184cca6)) with [fuzzamoto](https://github.com/dergoegge/fuzzamoto) and it found an assertion crash in `CTxMemPool::check`.\r\n\r\n@dergoegge @instagibbs Thank you both for detecting and pinpointing the bug! Should be fixed now in this branch.",
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-3132158578",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "mentioned",
      "id": 18877151344,
      "node_id": "MEE_lADOABII5850QVJBzwAAAARlKnhw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18877151344",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-29T12:02:11Z"
    },
    {
      "event": "subscribed",
      "id": 18877151377,
      "node_id": "SE_lADOABII5850QVJBzwAAAARlKniR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18877151377",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-29T12:02:11Z"
    },
    {
      "event": "mentioned",
      "id": 18877151396,
      "node_id": "MEE_lADOABII5850QVJBzwAAAARlKnik",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18877151396",
      "actor": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-29T12:02:11Z"
    },
    {
      "event": "subscribed",
      "id": 18877151410,
      "node_id": "SE_lADOABII5850QVJBzwAAAARlKniy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18877151410",
      "actor": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-29T12:02:11Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18877591592,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAARlMTAo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18877591592",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "fed1ef1f34fb95706d9b0431984c513111c6e83b",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/fed1ef1f34fb95706d9b0431984c513111c6e83b",
      "created_at": "2025-07-29T12:26:41Z"
    },
    {
      "event": "commented",
      "id": 3132351636,
      "node_id": "IC_kwDOABII5866s-SU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3132351636",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-29T12:43:46Z",
      "updated_at": "2025-07-29T12:43:46Z",
      "author_association": "MEMBER",
      "body": "> Follow-up from a while back: let's just explicitly say which layer of txgraph we're querying: [instagibbs@bb48f6c](https://github.com/instagibbs/bitcoin/commit/bb48f6c4736c227bcee6c4dda8e95b0b0287cfef)\r\n\r\n@instagibbs Done, should be fixed in my last push.",
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-3132351636",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "mentioned",
      "id": 18877950881,
      "node_id": "MEE_lADOABII5850QVJBzwAAAARlNquh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18877950881",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-29T12:43:47Z"
    },
    {
      "event": "subscribed",
      "id": 18877950928,
      "node_id": "SE_lADOABII5850QVJBzwAAAARlNqvQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18877950928",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-29T12:43:47Z"
    },
    {
      "event": "unlabeled",
      "id": 18879321681,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAARlS5ZR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18879321681",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-29T13:49:56Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 18879906770,
      "node_id": "LE_lADOABII5850QVJBzwAAAARlVIPS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18879906770",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-29T14:15:50Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3132745464,
      "node_id": "IC_kwDOABII5866ueb4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3132745464",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-29T14:15:53Z",
      "updated_at": "2025-07-29T14:15:53Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n🚧 At least one of the CI tasks failed.\n<sub>Task `multiprocess, i686, DEBUG`: https://github.com/bitcoin/bitcoin/runs/46942896430</sub>\n<sub>LLM reason (✨ experimental): The CI failure is caused by a compilation error in txmempool.cpp due to calling MakeTxGraph with only two arguments instead of the required three.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-3132745464",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18881793303,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAARlcU0X",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18881793303",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "19e08abdbd79a039870e64dd8e7ca595791357fb",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/19e08abdbd79a039870e64dd8e7ca595791357fb",
      "created_at": "2025-07-29T15:49:44Z"
    },
    {
      "event": "renamed",
      "id": 18884256946,
      "node_id": "RTE_lADOABII5850QVJBzwAAAARlluSy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18884256946",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-29T18:18:01Z",
      "rename": {
        "from": "[WIP] Cluster mempool implementation",
        "to": "Cluster mempool implementation"
      }
    },
    {
      "event": "unlabeled",
      "id": 18886178220,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAARltDWs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18886178220",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-29T20:18:38Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18886305836,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAARltigs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18886305836",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "4c4aecf7a2db80d5d20eb2ef0c94f43e53099872",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/4c4aecf7a2db80d5d20eb2ef0c94f43e53099872",
      "created_at": "2025-07-29T20:26:05Z"
    },
    {
      "event": "labeled",
      "id": 18905770918,
      "node_id": "LE_lADOABII5850QVJBzwAAAARm3yum",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18905770918",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-30T18:52:10Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18935681310,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAARop5Ee",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18935681310",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "6caa4d7f4572857d36f439e383b772dd1f83c782",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/6caa4d7f4572857d36f439e383b772dd1f83c782",
      "created_at": "2025-08-01T09:34:23Z"
    },
    {
      "event": "unlabeled",
      "id": 18936164792,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAARorvG4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18936164792",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-01T09:57:43Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 18938177199,
      "node_id": "LE_lADOABII5850QVJBzwAAAARozaav",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18938177199",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-01T11:48:47Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3144301651,
      "node_id": "IC_kwDOABII5867ajxT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3144301651",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-01T11:48:49Z",
      "updated_at": "2025-08-01T11:48:49Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n🚧 At least one of the CI tasks failed.\n<sub>Task `TSan, depends, no gui`: https://github.com/bitcoin/bitcoin/runs/47189136784</sub>\n<sub>LLM reason (✨ experimental): The CI failure was caused by the timeout of the bench_sanity_check test.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-3144301651",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "commented",
      "id": 3146639801,
      "node_id": "IC_kwDOABII5867jem5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3146639801",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-02T17:48:40Z",
      "updated_at": "2025-08-02T17:58:23Z",
      "author_association": "MEMBER",
      "body": "I'm unable to reproduce the ci failure when I run that job locally -- anyone have an idea?\r\n\r\nAh, I guess on my machine, these jobs are the slowest:\r\n\r\n```\r\n143/144 Test   #4: secp256k1_tests ......................   Passed  217.55 sec\r\n144/144 Test   #6: bench_sanity_check ...................   Passed  433.08 sec\r\n```\r\n\r\nIn the ci environment, we see this:\r\n\r\n```\r\n[17:30:48.523] 143/144 Test   #4: secp256k1_tests ......................   Passed  1134.59 sec\r\n[17:51:54.170] 144/144 Test   #6: bench_sanity_check ...................***Timeout 2400.23 sec\r\n```",
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-3146639801",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "commented",
      "id": 3158322672,
      "node_id": "IC_kwDOABII5868QC3w",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3158322672",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-06T08:45:55Z",
      "updated_at": "2025-08-06T08:45:55Z",
      "author_association": "MEMBER",
      "body": "> Ah, I guess on my machine, these jobs are the slowest:\r\n> \r\n> ```\r\n> 143/144 Test   #4: secp256k1_tests ......................   Passed  217.55 sec\r\n> 144/144 Test   #6: bench_sanity_check ...................   Passed  433.08 sec\r\n> ```\r\n> \r\n> In the ci environment, we see this:\r\n> \r\n> ```\r\n> [17:30:48.523] 143/144 Test   #4: secp256k1_tests ......................   Passed  1134.59 sec\r\n> [17:51:54.170] 144/144 Test   #6: bench_sanity_check ...................***Timeout 2400.23 sec\r\n> ```\r\n\r\nI'd say anything larger than 1 minute for a \"unit test\" is too long. However, all the bench sanity checks are run in a single process, so this is likely unrelated to this pull request. Discussion can be done in https://github.com/bitcoin/bitcoin/issues/32770.\r\n\r\nIn the meantime, the timeout can be ignored. If you want to temporarily raise it, you can use:\r\n\r\n```diff\r\n--- a/ci/test/00_setup_env.sh\r\n+++ b/ci/test/00_setup_env.sh\r\n-export TEST_RUNNER_TIMEOUT_FACTOR=${TEST_RUNNER_TIMEOUT_FACTOR:-40}\r\n+export TEST_RUNNER_TIMEOUT_FACTOR=${TEST_RUNNER_TIMEOUT_FACTOR:-80}\r\n```\r\n\r\nas a separate commit, so that it can be reverted in the future, once https://github.com/bitcoin/bitcoin/issues/32770 is fixed.",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-3158322672",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "subscribed",
      "id": 19039030061,
      "node_id": "SE_lADOABII5850QVJBzwAAAARu0Ist",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19039030061",
      "actor": {
        "login": "emc99",
        "id": 20481828,
        "node_id": "MDQ6VXNlcjIwNDgxODI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/20481828?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/emc99",
        "html_url": "https://github.com/emc99",
        "followers_url": "https://api.github.com/users/emc99/followers",
        "following_url": "https://api.github.com/users/emc99/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/emc99/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/emc99/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/emc99/subscriptions",
        "organizations_url": "https://api.github.com/users/emc99/orgs",
        "repos_url": "https://api.github.com/users/emc99/repos",
        "events_url": "https://api.github.com/users/emc99/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/emc99/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-07T16:05:45Z"
    },
    {
      "event": "labeled",
      "id": 19061391345,
      "node_id": "LE_lADOABII5850QVJBzwAAAARwJb_x",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19061391345",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-08T20:07:08Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19464516417,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAASILPNB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19464516417",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "0f9560d5aad35bdd5fdbedf12d79b51986c53633",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/0f9560d5aad35bdd5fdbedf12d79b51986c53633",
      "created_at": "2025-09-02T16:22:32Z"
    },
    {
      "event": "unlabeled",
      "id": 19465673768,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAASIPpwo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19465673768",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-02T17:30:23Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 19465892846,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAASIQfPu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19465892846",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-02T17:44:34Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19466089180,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAASIRPLc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19466089180",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "61f51546af33923c9e5dc9632ba5544aa853ae71",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/61f51546af33923c9e5dc9632ba5544aa853ae71",
      "created_at": "2025-09-02T17:56:43Z"
    },
    {
      "event": "reviewed",
      "id": 3177119367,
      "node_id": "PRR_kwDOABII5869Xv6H",
      "url": null,
      "actor": null,
      "commit_id": "61f51546af33923c9e5dc9632ba5544aa853ae71",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-09-02T18:00:36Z",
      "author_association": "MEMBER",
      "body": "Would it be a good idea to split this PR into a main PR with Cluster Implementation + Cleanups + Docs and Tests, then a followups PR with Optimizations and more cleanups? Goal is to get everything in v31, but this might help with reducing the size of the main PR and make it easier to punt cleanup-related comments to later.",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-3177119367",
      "submitted_at": "2025-09-02T18:00:36Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 3181193400,
      "node_id": "PRR_kwDOABII5869nSi4",
      "url": null,
      "actor": null,
      "commit_id": "61f51546af33923c9e5dc9632ba5544aa853ae71",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-09-03T17:42:56Z",
      "author_association": "MEMBER",
      "body": "In the \"Still to do\" section of the PR description, it seems like most can be checked off other than\r\n\r\n> Updating wallet code to be cluster-aware (including mini_miner and coin selection)\r\n> Rework many of our functional tests to be cluster-aware\r\n> Figure out what package validation and package RBF rules should be in this design",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-3181193400",
      "submitted_at": "2025-09-03T17:42:56Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 3194519714,
      "node_id": "PRR_kwDOABII586-aICi",
      "url": null,
      "actor": null,
      "commit_id": "61f51546af33923c9e5dc9632ba5544aa853ae71",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-09-07T19:33:58Z",
      "author_association": "MEMBER",
      "body": "Some comments already, mostly to get familiar with the overall flow of changes.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-3194519714",
      "submitted_at": "2025-09-07T19:33:58Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 3197152141,
      "node_id": "PRR_kwDOABII586-kKuN",
      "url": null,
      "actor": null,
      "commit_id": "61f51546af33923c9e5dc9632ba5544aa853ae71",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-09-08T21:20:36Z",
      "author_association": "MEMBER",
      "body": "few comments through \"initial implementation\"",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-3197152141",
      "submitted_at": "2025-09-08T21:20:36Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 3198241287,
      "node_id": "PRR_kwDOABII586-oUoH",
      "url": null,
      "actor": null,
      "commit_id": "34251141eca785578a0b2ca6d1c0932d34b2418d",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-09-08T21:26:13Z",
      "author_association": "MEMBER",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-3198241287",
      "submitted_at": "2025-09-08T21:26:13Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "commented",
      "id": 3268253082,
      "node_id": "IC_kwDOABII587CzZWa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3268253082",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-08T22:36:44Z",
      "updated_at": "2025-09-08T22:36:44Z",
      "author_association": "MEMBER",
      "body": "Should we make all the `main_only` arguments in TxGraph mandatory? Or even replace them with an enum like\n\n```c++\nenum class Level {\n    MAIN, //<! Always refers to level 0\n    STAGING, //<! Always refers to level 1 (fail if it doesn't exist)\n    TOP, //<! Refers to level 1 if it exists, 0 otherwise\n};\n```\n\n?",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-3268253082",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "subscribed",
      "id": 19576440138,
      "node_id": "SE_lADOABII5850QVJBzwAAAASO2MVK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19576440138",
      "actor": {
        "login": "nervana21",
        "id": 205626986,
        "node_id": "U_kgDODEGeag",
        "avatar_url": "https://avatars.githubusercontent.com/u/205626986?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/nervana21",
        "html_url": "https://github.com/nervana21",
        "followers_url": "https://api.github.com/users/nervana21/followers",
        "following_url": "https://api.github.com/users/nervana21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/nervana21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/nervana21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/nervana21/subscriptions",
        "organizations_url": "https://api.github.com/users/nervana21/orgs",
        "repos_url": "https://api.github.com/users/nervana21/repos",
        "events_url": "https://api.github.com/users/nervana21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/nervana21/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-09T00:08:24Z"
    },
    {
      "event": "reviewed",
      "id": 3206614875,
      "node_id": "PRR_kwDOABII586_IQ9b",
      "url": null,
      "actor": null,
      "commit_id": "61f51546af33923c9e5dc9632ba5544aa853ae71",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-09-10T15:05:37Z",
      "author_association": "MEMBER",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-3206614875",
      "submitted_at": "2025-09-10T15:05:37Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "referenced",
      "id": 19640496910,
      "node_id": "REFE_lADOABII5850QVJBzwAAAASSqjMO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19640496910",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "593d5fe37d7acb00ea38ba84dfda52d03a4ad06f",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/593d5fe37d7acb00ea38ba84dfda52d03a4ad06f",
      "created_at": "2025-09-11T15:21:35Z"
    },
    {
      "event": "reviewed",
      "id": 3217898607,
      "node_id": "PRR_kwDOABII586_zTxv",
      "url": null,
      "actor": null,
      "commit_id": "61f51546af33923c9e5dc9632ba5544aa853ae71",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-09-12T19:34:39Z",
      "author_association": "MEMBER",
      "body": "first pass review through 7683eeed07050fbcfa4f3b77d32303c177e2683e",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-3217898607",
      "submitted_at": "2025-09-12T19:34:39Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19679242378,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAASU-WiK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19679242378",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "c95a5d5590d28ae841d54b7108a4c4c046b647d9",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/c95a5d5590d28ae841d54b7108a4c4c046b647d9",
      "created_at": "2025-09-13T16:41:25Z"
    },
    {
      "event": "commented",
      "id": 3288622966,
      "node_id": "IC_kwDOABII587EBGd2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3288622966",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-13T16:48:10Z",
      "updated_at": "2025-09-13T16:48:10Z",
      "author_association": "MEMBER",
      "body": "Will need rebase after merge of #33354, and including the updated #33157 would be nice to get the reduced TxGraph memory usage savings.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-3288622966",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "commented",
      "id": 3289572395,
      "node_id": "IC_kwDOABII587EEuQr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3289572395",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-14T14:05:05Z",
      "updated_at": "2025-09-14T14:05:05Z",
      "author_association": "MEMBER",
      "body": "See https://github.com/sipa/bitcoin/commits/pr28676 for a branch with:\r\n* Rebase after #33354 merge.\r\n* Updated #33157 as base.\r\n* Addressed https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2328805583",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-3289572395",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "reviewed",
      "id": 3226272301,
      "node_id": "PRR_kwDOABII587ATQIt",
      "url": null,
      "actor": null,
      "commit_id": "c95a5d5590d28ae841d54b7108a4c4c046b647d9",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-09-15T21:05:16Z",
      "author_association": "MEMBER",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-3226272301",
      "submitted_at": "2025-09-15T21:05:16Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19734528699,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAASYRQK7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19734528699",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "7b3bca2f543f4e937da477f75acf78aa72da5470",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/7b3bca2f543f4e937da477f75acf78aa72da5470",
      "created_at": "2025-09-16T19:43:16Z"
    },
    {
      "event": "reviewed",
      "id": 3231501314,
      "node_id": "PRR_kwDOABII587AnMwC",
      "url": null,
      "actor": null,
      "commit_id": "52fe9997dfd029606cb17b471b82cabb53535961",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-09-16T19:56:06Z",
      "author_association": "MEMBER",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-3231501314",
      "submitted_at": "2025-09-16T19:56:06Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19735631450,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAASYVdZa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19735631450",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/57f929d743ae877e42c2b4cff502e1aade9452fd",
      "created_at": "2025-09-16T20:49:44Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19823306706,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAASdj6fS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19823306706",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "f7546023e0cb2758f94ca72a7a460b9ff2d18bb5",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/f7546023e0cb2758f94ca72a7a460b9ff2d18bb5",
      "created_at": "2025-09-21T17:45:22Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19834299268,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAASeN2OE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19834299268",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "00c02b42c6199a6c46573304761056082490c7d4",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/00c02b42c6199a6c46573304761056082490c7d4",
      "created_at": "2025-09-22T10:25:17Z"
    },
    {
      "event": "reviewed",
      "id": 3254129132,
      "node_id": "PRR_kwDOABII587B9hHs",
      "url": null,
      "actor": null,
      "commit_id": "00c02b42c6199a6c46573304761056082490c7d4",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-09-22T17:41:03Z",
      "author_association": "MEMBER",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-3254129132",
      "submitted_at": "2025-09-22T17:41:03Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "reviewed",
      "id": 3264040363,
      "node_id": "PRR_kwDOABII587CjU2r",
      "url": null,
      "actor": null,
      "commit_id": "00c02b42c6199a6c46573304761056082490c7d4",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-09-24T17:54:15Z",
      "author_association": "MEMBER",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-3264040363",
      "submitted_at": "2025-09-24T17:54:15Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
    },
    {
      "event": "labeled",
      "id": 19921298703,
      "node_id": "LE_lADOABII5850QVJBzwAAAASjZuUP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19921298703",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-25T14:13:01Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "unsubscribed",
      "id": 19921347835,
      "node_id": "UE_lADOABII5850QVJBzwAAAASjZ6T7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19921347835",
      "actor": {
        "login": "nervana21",
        "id": 205626986,
        "node_id": "U_kgDODEGeag",
        "avatar_url": "https://avatars.githubusercontent.com/u/205626986?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/nervana21",
        "html_url": "https://github.com/nervana21",
        "followers_url": "https://api.github.com/users/nervana21/followers",
        "following_url": "https://api.github.com/users/nervana21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/nervana21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/nervana21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/nervana21/subscriptions",
        "organizations_url": "https://api.github.com/users/nervana21/orgs",
        "repos_url": "https://api.github.com/users/nervana21/repos",
        "events_url": "https://api.github.com/users/nervana21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/nervana21/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-25T14:14:33Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19929176017,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAASj3xfR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19929176017",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "6013f4eb7c7d24e673f788311a271c7e1c7c7570",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/6013f4eb7c7d24e673f788311a271c7e1c7c7570",
      "created_at": "2025-09-25T20:54:02Z"
    },
    {
      "event": "unlabeled",
      "id": 19929192994,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAASj31oi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19929192994",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-25T20:55:16Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3352926498,
      "node_id": "IC_kwDOABII587H2Zki",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3352926498",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-30T16:18:17Z",
      "updated_at": "2025-09-30T16:21:18Z",
      "author_association": "MEMBER",
      "body": "Approach ACK \r\n\r\nI ran this branch for a while on mainnet and have not noticed any issue, importing of mempool saved before cluster succeeded in multiple runs.\r\n\r\n> Would it be a good idea to split this PR into a main PR with Cluster Implementation + Cleanups + Docs and Tests, then a followups PR with Optimizations and more cleanups? Goal is to get everything in v31, but this might help with reducing the size of the main PR and make it easier to punt cleanup-related comments to later.\r\n\r\nI've spent some time trying to understand the approach and changes in this PR, the changes in this PR can be categorized into\r\n\r\n**Main Changes**\r\n\r\n* Changes to CTxMemPoolEntry to be a derived class of txgraph::ref.\r\n* Changes to the mempool to be a wrapper around tx graph, making changeset create staging and commit or discard it depending on whether the mempool fee rate diagram is improved,  update the txgraph  for all addition, removals and accessing etc.\r\n* Updates to RBF to use the fee rate diagram.\r\n* Changes to validation ( replacement check is updated to fee rate diagram, carveouts are pruned, enforcing cluster size limits instead of ancestor or descendant size limits).\r\n* Addition of cluster size limits as a startup option.\r\n* Updating interfacess to use to check cluster limits instead of ancestor limt and updates to use new mempool methods.\r\n* Updating the blockassembler to use the new block builder for selection to block template\r\n* TRUC policy is updated use the new mempool interface.\r\n* Benchmarking changes.\r\n*  Unit Test changes\r\n*  RBF carveout tests deletion.\r\n*  Package one-more functional test is pruned.\r\n*  Package RBF updates to use cluster size as max conflicts.\r\n\r\n\r\n\r\n**RPC changes**\r\n* Mempool RPC: addition of cluster description, limits, and chunk data to mempool RPCs and a new the fee rate diagram RPC.\r\n\r\n**Unit Test Improvements**\r\n*lots of tests were touched because AddToMempool was changed to `TryAddToMempool`.\r\n\r\n\r\n**Functional tests**\r\n* Addition of mempool cluster tests for testing limits and accessors.\r\n\r\n\r\nThese changes can all be in separate PR's but not really necessary , I think it logically flow well and can be reviewed as a single PR as well.\r\n",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-3352926498",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "labeled",
      "id": 20059299153,
      "node_id": "LE_lADOABII5850QVJBzwAAAASroJ1R",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20059299153",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-02T12:59:23Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3362136518,
      "node_id": "IC_kwDOABII587IZiHG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3362136518",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-02T16:46:22Z",
      "updated_at": "2025-10-02T16:46:22Z",
      "author_association": "MEMBER",
      "body": "@sdaftuar and I ran a simulation, replaying most of 2023, and grabbing a `getblocktemplate` just before every real block, in a node with `-bytespersigop=0`. For each three numbers were computed:\r\n* (a) the fees gathered by the `getblocktemplate` template itself.\r\n* (b) the fees found using the same mempool, using a dynamic programming algorithm that finds the optimal template restricted to just cluster prefixes at chunk boundaries.\r\n* (c) a conservative overestimate, computed by eagerly filling the block with chunks until one does no longer fit, and then counting the remaining space at the feerate of that non-fitting chunk\r\n\r\nThe blue line below gives the histogram of the difference between (b) and (c), the green line gives the difference between (a) and (b), and purple is the difference between (a) and (c).\r\n\r\n<img width=\"1280\" height=\"800\" alt=\"image\" src=\"https://github.com/user-attachments/assets/00a7575c-bf28-48d1-81a0-c95fbd4297fa\" />\r\n",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-3362136518",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "mentioned",
      "id": 20064058880,
      "node_id": "MEE_lADOABII5850QVJBzwAAAASr6T4A",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20064058880",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-02T16:46:24Z"
    },
    {
      "event": "subscribed",
      "id": 20064058905,
      "node_id": "SE_lADOABII5850QVJBzwAAAASr6T4Z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20064058905",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-02T16:46:24Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20190913156,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAASzeOKE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20190913156",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "ed2b2404747b55bdc51414cd0f626485387151c0",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/ed2b2404747b55bdc51414cd0f626485387151c0",
      "created_at": "2025-10-09T17:51:45Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20192262690,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAASzjXoi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20192262690",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "989827e56e2e54d347f6cb43ea8c98153de91a0e",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/989827e56e2e54d347f6cb43ea8c98153de91a0e",
      "created_at": "2025-10-09T19:08:00Z"
    },
    {
      "event": "commented",
      "id": 3387174668,
      "node_id": "IC_kwDOABII587J5C8M",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3387174668",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-09T19:09:32Z",
      "updated_at": "2025-10-09T19:09:32Z",
      "author_association": "MEMBER",
      "body": "At @glozow's suggestion I've removed some optimization/cleanup commits from this PR and opened #33591 for non-blocking cleanups/followups.",
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-3387174668",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28676"
    },
    {
      "event": "mentioned",
      "id": 20192286524,
      "node_id": "MEE_lADOABII5850QVJBzwAAAASzjdc8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20192286524",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-09T19:09:33Z"
    },
    {
      "event": "subscribed",
      "id": 20192286541,
      "node_id": "SE_lADOABII5850QVJBzwAAAASzjddN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20192286541",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-09T19:09:34Z"
    },
    {
      "event": "unlabeled",
      "id": 20192593139,
      "node_id": "UNLE_lADOABII5850QVJBzwAAAASzkoTz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20192593139",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-09T19:29:36Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDUxNDMwNjgwZWNiNzIyZTFkNGVlNGEyNmRhYzU3MjQwNTBmNDFjOWU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/51430680ecb722e1d4ee4a26dac5724050f41c9e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/51430680ecb722e1d4ee4a26dac5724050f41c9e",
      "tree": {
        "sha": "e3a027557cc7b958155db80bd814f882e28f3912",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e3a027557cc7b958155db80bd814f882e28f3912"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9314113b295af0f4eab6397c5870115b647721d1",
          "sha": "9314113b295af0f4eab6397c5870115b647721d1",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/9314113b295af0f4eab6397c5870115b647721d1"
        }
      ],
      "message": "Allow moving an Epoch::Marker",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-01-09T15:28:57Z"
      },
      "sha": "51430680ecb722e1d4ee4a26dac5724050f41c9e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDZjNzNlNDc0NDgzN2E3ZGMxMzhhOTE3N2RmM2E0OGYzMGExYmE2YzE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6c73e4744837a7dc138a9177df3a48f30a1ba6c1",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/6c73e4744837a7dc138a9177df3a48f30a1ba6c1",
      "tree": {
        "sha": "c77806bebf1ee13b36a2665aa8ba148b874815e0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c77806bebf1ee13b36a2665aa8ba148b874815e0"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/51430680ecb722e1d4ee4a26dac5724050f41c9e",
          "sha": "51430680ecb722e1d4ee4a26dac5724050f41c9e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/51430680ecb722e1d4ee4a26dac5724050f41c9e"
        }
      ],
      "message": "mempool: Store iterators into mapTx in mapNextTx\n\nThis takes the same amount of space as CTransaction pointers, and saves a map\nlookup in many common uses.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-02-05T23:39:07Z"
      },
      "sha": "6c73e4744837a7dc138a9177df3a48f30a1ba6c1"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGNkMGJlYTIxOTdkOGUxY2E5N2FmNTU4NjMyN2MxYzgwZGJhMmUzNmE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cd0bea2197d8e1ca97af5586327c1c80dba2e36a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/cd0bea2197d8e1ca97af5586327c1c80dba2e36a",
      "tree": {
        "sha": "3652d89543bff03d8c0509c3531ea938521c23d1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3652d89543bff03d8c0509c3531ea938521c23d1"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6c73e4744837a7dc138a9177df3a48f30a1ba6c1",
          "sha": "6c73e4744837a7dc138a9177df3a48f30a1ba6c1",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/6c73e4744837a7dc138a9177df3a48f30a1ba6c1"
        }
      ],
      "message": "Allow moving CTxMemPoolEntry objects, disallow copying",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-01-09T15:30:12Z"
      },
      "sha": "cd0bea2197d8e1ca97af5586327c1c80dba2e36a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGM1NzA2ZWE0NjJhODFiYTMxOGExNDVkZTE4NjljNzhjNzdjNTczNDE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c5706ea462a81ba318a145de1869c78c77c57341",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c5706ea462a81ba318a145de1869c78c77c57341",
      "tree": {
        "sha": "e5553228e21c7ccce891257182c1ad16edf1a460",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e5553228e21c7ccce891257182c1ad16edf1a460"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cd0bea2197d8e1ca97af5586327c1c80dba2e36a",
          "sha": "cd0bea2197d8e1ca97af5586327c1c80dba2e36a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/cd0bea2197d8e1ca97af5586327c1c80dba2e36a"
        }
      ],
      "message": "Make CTxMemPoolEntry derive from TxGraph::Ref",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-01-09T15:36:34Z"
      },
      "sha": "c5706ea462a81ba318a145de1869c78c77c57341"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDkxZDliZmNjYTYyYmQ2YzE2ODQ3NmY2YWY0NDJiZDcwNDlmZjg3MmU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/91d9bfcca62bd6c168476f6af442bd7049ff872e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/91d9bfcca62bd6c168476f6af442bd7049ff872e",
      "tree": {
        "sha": "2eabcbb11e510ee80a4185c0d29f36f08594cd7b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2eabcbb11e510ee80a4185c0d29f36f08594cd7b"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c5706ea462a81ba318a145de1869c78c77c57341",
          "sha": "c5706ea462a81ba318a145de1869c78c77c57341",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c5706ea462a81ba318a145de1869c78c77c57341"
        }
      ],
      "message": "Create a txgraph inside CTxMemPool",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-01-09T16:04:14Z"
      },
      "sha": "91d9bfcca62bd6c168476f6af442bd7049ff872e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDgzYzg3NTNhYmY5YzJhZjc1Y2ZiYWNkNTQ4ODYwNTMzMmRhNTg4YTQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/83c8753abf9c2af75cfbacd5488605332da588a4",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/83c8753abf9c2af75cfbacd5488605332da588a4",
      "tree": {
        "sha": "d464c71c48aa5e5423534679d5eef98ccb8b4a1c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d464c71c48aa5e5423534679d5eef98ccb8b4a1c"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/91d9bfcca62bd6c168476f6af442bd7049ff872e",
          "sha": "91d9bfcca62bd6c168476f6af442bd7049ff872e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/91d9bfcca62bd6c168476f6af442bd7049ff872e"
        }
      ],
      "message": "Use named constant for acceptable iters",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-09-13T13:13:00Z"
      },
      "sha": "83c8753abf9c2af75cfbacd5488605332da588a4"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGYyZWZmMTdjNmM0ZmM5NDVmNmZkNzYxNTY0MjEyODAyMTA3YTFkN2Q",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f2eff17c6c4fc945f6fd761564212802107a1d7d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f2eff17c6c4fc945f6fd761564212802107a1d7d",
      "tree": {
        "sha": "e5c73c2a8fdbd843bf90a708c2456dacbd13bc31",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e5c73c2a8fdbd843bf90a708c2456dacbd13bc31"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/83c8753abf9c2af75cfbacd5488605332da588a4",
          "sha": "83c8753abf9c2af75cfbacd5488605332da588a4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/83c8753abf9c2af75cfbacd5488605332da588a4"
        }
      ],
      "message": "Add sigops adjusted weight calculator",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-01-30T18:16:21Z"
      },
      "sha": "f2eff17c6c4fc945f6fd761564212802107a1d7d"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDFkM2I1M2JjZjExYzIzYmRhZDMwMzFmNDNmY2YxZTMwNzUyMWQ2ODI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1d3b53bcf11c23bdad3031f43fcf1e307521d682",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/1d3b53bcf11c23bdad3031f43fcf1e307521d682",
      "tree": {
        "sha": "f63541890ad2a6db9950ebf96a4a050878edb7f9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f63541890ad2a6db9950ebf96a4a050878edb7f9"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f2eff17c6c4fc945f6fd761564212802107a1d7d",
          "sha": "f2eff17c6c4fc945f6fd761564212802107a1d7d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f2eff17c6c4fc945f6fd761564212802107a1d7d"
        }
      ],
      "message": "Add accessor for sigops-adjusted weight",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-02-04T19:54:20Z"
      },
      "sha": "1d3b53bcf11c23bdad3031f43fcf1e307521d682"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDhjNTlhYTU2Y2I4YjhhYzk3ODQ5MTZjMTIwOTVkNmJiZDdlOGVmODc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8c59aa56cb8b8ac9784916c12095d6bbd7e8ef87",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8c59aa56cb8b8ac9784916c12095d6bbd7e8ef87",
      "tree": {
        "sha": "9dc61ce8b052ca1652cfb6da181348a08376b31f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9dc61ce8b052ca1652cfb6da181348a08376b31f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1d3b53bcf11c23bdad3031f43fcf1e307521d682",
          "sha": "1d3b53bcf11c23bdad3031f43fcf1e307521d682",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/1d3b53bcf11c23bdad3031f43fcf1e307521d682"
        }
      ],
      "message": "Add transactions to txgraph, but without cluster dependencies\n\nEffectively this is treating all transactions in txgraph as being in a cluster\nof size 1.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-01-09T17:43:43Z"
      },
      "sha": "8c59aa56cb8b8ac9784916c12095d6bbd7e8ef87"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDI4MDFlODA1MjhhM2ExYzI5NDlhOGZkYTYzMzg4ODI2MTNhNjczZTU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2801e80528a3a1c2949a8fda6338882613a673e5",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2801e80528a3a1c2949a8fda6338882613a673e5",
      "tree": {
        "sha": "9d085b985995890696211c65cfba45d65c25e58f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9d085b985995890696211c65cfba45d65c25e58f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8c59aa56cb8b8ac9784916c12095d6bbd7e8ef87",
          "sha": "8c59aa56cb8b8ac9784916c12095d6bbd7e8ef87",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8c59aa56cb8b8ac9784916c12095d6bbd7e8ef87"
        }
      ],
      "message": "Add new (unused) limits for cluster size/count",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-21T10:17:40Z"
      },
      "sha": "2801e80528a3a1c2949a8fda6338882613a673e5"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDQyOWJkYmVjZmRlOTNjNTQzNzRmYjMwOThlMzU3ZTE4NTU2ZTdlMjE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/429bdbecfde93c54374fb3098e357e18556e7e21",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/429bdbecfde93c54374fb3098e357e18556e7e21",
      "tree": {
        "sha": "7c914e53a38535f52bc2211a669a70a93b51e8c4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7c914e53a38535f52bc2211a669a70a93b51e8c4"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2801e80528a3a1c2949a8fda6338882613a673e5",
          "sha": "2801e80528a3a1c2949a8fda6338882613a673e5",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2801e80528a3a1c2949a8fda6338882613a673e5"
        }
      ],
      "message": "test: update feature_rbf.py replacement test\n\nPreparatory commit to the rbf functional test, before changes are made to the\nrbf rules as part of cluster mempool.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-02-09T19:58:41Z"
      },
      "sha": "429bdbecfde93c54374fb3098e357e18556e7e21"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDhkNmM3ZTQ0MDFiZDkxOWM0YjM5MGJkNTQyOWNiZGRmOTI0MDE1NzU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8d6c7e4401bd919c4b390bd5429cbddf92401575",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8d6c7e4401bd919c4b390bd5429cbddf92401575",
      "tree": {
        "sha": "7c0cc6ffe09da095c73171ca2f0f5a4962a73f38",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7c0cc6ffe09da095c73171ca2f0f5a4962a73f38"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/429bdbecfde93c54374fb3098e357e18556e7e21",
          "sha": "429bdbecfde93c54374fb3098e357e18556e7e21",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/429bdbecfde93c54374fb3098e357e18556e7e21"
        }
      ],
      "message": "[test] rework/delete feature_rbf tests requiring large clusters",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "glozow",
        "email": "gloriajzhao@gmail.com",
        "date": "2025-09-03T17:09:47Z"
      },
      "sha": "8d6c7e4401bd919c4b390bd5429cbddf92401575"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDVhMzg4YzBkNTk1YjIzMThmZWE0YjFkY2U5NzdlMmQ1ZmYxYWJjNDg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5a388c0d595b2318fea4b1dce977e2d5ff1abc48",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/5a388c0d595b2318fea4b1dce977e2d5ff1abc48",
      "tree": {
        "sha": "ec90405fd2ab4a35cd5e745d9259d6944d523c05",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ec90405fd2ab4a35cd5e745d9259d6944d523c05"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8d6c7e4401bd919c4b390bd5429cbddf92401575",
          "sha": "8d6c7e4401bd919c4b390bd5429cbddf92401575",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8d6c7e4401bd919c4b390bd5429cbddf92401575"
        }
      ],
      "message": "Do not allow mempool clusters to exceed configured limits\n\nInclude an adjustment to mempool_tests.cpp due to the additional memory used by\ntxgraph.\n\nIncludes a temporary change to the mempool_ephemeral_dust.py functional test,\ndue to validation checks being reordered. This change will revert once the RBF\nrules are changed in a later commit.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-21T12:58:04Z"
      },
      "sha": "5a388c0d595b2318fea4b1dce977e2d5ff1abc48"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDExMDJhYzdmNzRhYzJmNDg3NjBiNDZiZTU4YzdkZWI3MGZhNzI3Y2Y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1102ac7f74ac2f48760b46be58c7deb70fa727cf",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/1102ac7f74ac2f48760b46be58c7deb70fa727cf",
      "tree": {
        "sha": "63b1856aab5fe356dc13db39ceccf33aaa406e12",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/63b1856aab5fe356dc13db39ceccf33aaa406e12"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5a388c0d595b2318fea4b1dce977e2d5ff1abc48",
          "sha": "5a388c0d595b2318fea4b1dce977e2d5ff1abc48",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/5a388c0d595b2318fea4b1dce977e2d5ff1abc48"
        }
      ],
      "message": "Check cluster limits when using -walletrejectlongchains",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-01-23T14:26:05Z"
      },
      "sha": "1102ac7f74ac2f48760b46be58c7deb70fa727cf"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDdhMTljOWIyMTllZmY1YmMyZDZlZDYxM2JiZTY5ZGJkM2U5ZWYxODc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7a19c9b219eff5bc2d6ed613bbe69dbd3e9ef187",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/7a19c9b219eff5bc2d6ed613bbe69dbd3e9ef187",
      "tree": {
        "sha": "d43249006194370dc5a4882853797397192748b4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d43249006194370dc5a4882853797397192748b4"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1102ac7f74ac2f48760b46be58c7deb70fa727cf",
          "sha": "1102ac7f74ac2f48760b46be58c7deb70fa727cf",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/1102ac7f74ac2f48760b46be58c7deb70fa727cf"
        }
      ],
      "message": "Rework miner_tests to not require large cluster limit",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-02-08T18:36:48Z"
      },
      "sha": "7a19c9b219eff5bc2d6ed613bbe69dbd3e9ef187"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDU1MDJlZWI0ZDBhZmJhOTcwN2M5ODE5YWIxMzkzYjJiYWVjNWU3Nzc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5502eeb4d0afba9707c9819ab1393b2baec5e777",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/5502eeb4d0afba9707c9819ab1393b2baec5e777",
      "tree": {
        "sha": "a5d3cd280df12f1656c874c6b77271e6760ffb6a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a5d3cd280df12f1656c874c6b77271e6760ffb6a"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7a19c9b219eff5bc2d6ed613bbe69dbd3e9ef187",
          "sha": "7a19c9b219eff5bc2d6ed613bbe69dbd3e9ef187",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/7a19c9b219eff5bc2d6ed613bbe69dbd3e9ef187"
        }
      ],
      "message": "Limit mempool size based on chunk feerate\n\nRather than evicting the transactions with the lowest descendant feerate,\ninstead evict transactions that have the lowest chunk feerate.\n\nOnce mining is implemented based on choosing transactions with highest chunk\nfeerate (see next commit), mining and eviction will be opposites, so that we\nwill evict the transactions that would be mined last.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-21T00:55:50Z"
      },
      "sha": "5502eeb4d0afba9707c9819ab1393b2baec5e777"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDI0ZDAwMzFiYzIxNTcwNWU2MmQ2ZWU2OTcxMmYyNWIyODg5ZWViMzc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/24d0031bc215705e62d6ee69712f25b2889eeb37",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/24d0031bc215705e62d6ee69712f25b2889eeb37",
      "tree": {
        "sha": "2d0825aa18086d558df1ac074dd310dca02e0cd1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2d0825aa18086d558df1ac074dd310dca02e0cd1"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5502eeb4d0afba9707c9819ab1393b2baec5e777",
          "sha": "5502eeb4d0afba9707c9819ab1393b2baec5e777",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/5502eeb4d0afba9707c9819ab1393b2baec5e777"
        }
      ],
      "message": "bench: rewrite ComplexMemPool to not create oversized clusters",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-09T14:35:55Z"
      },
      "sha": "24d0031bc215705e62d6ee69712f25b2889eeb37"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGFlMWFjNTQxMDM4M2U1N2VkMTY4Njc1ODBhNWZkMzU1YTQ2OTUzZGU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ae1ac5410383e57ed16867580a5fd355a46953de",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ae1ac5410383e57ed16867580a5fd355a46953de",
      "tree": {
        "sha": "3cb0d148f7a03e1b4b86f38840d5e03108e0434e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3cb0d148f7a03e1b4b86f38840d5e03108e0434e"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/24d0031bc215705e62d6ee69712f25b2889eeb37",
          "sha": "24d0031bc215705e62d6ee69712f25b2889eeb37",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/24d0031bc215705e62d6ee69712f25b2889eeb37"
        }
      ],
      "message": "Select transactions for blocks based on chunk feerate",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-21T01:16:36Z"
      },
      "sha": "ae1ac5410383e57ed16867580a5fd355a46953de"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDBmNzczOWU0YTFlOTMxNTA2NDM0OWYyNjRhMDc4ZjU3Njc1MzM4N2Q",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0f7739e4a1e9315064349f264a078f576753387d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/0f7739e4a1e9315064349f264a078f576753387d",
      "tree": {
        "sha": "dbb6a5354ce4afc580050b2fb7c9199093c3b76a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/dbb6a5354ce4afc580050b2fb7c9199093c3b76a"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ae1ac5410383e57ed16867580a5fd355a46953de",
          "sha": "ae1ac5410383e57ed16867580a5fd355a46953de",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ae1ac5410383e57ed16867580a5fd355a46953de"
        }
      ],
      "message": "test: rewrite PopulateMempool to not violate mempool policy (cluster size) limits",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-09T14:43:11Z"
      },
      "sha": "0f7739e4a1e9315064349f264a078f576753387d"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDU3NmQ3MWIzM2RkYTI0NGE3MjdjZWI1MjY4MDRlZTYzYmQ5YmVkMmI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/576d71b33dda244a727ceb526804ee63bd9bed2b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/576d71b33dda244a727ceb526804ee63bd9bed2b",
      "tree": {
        "sha": "14363dce8970f88682a9335236cf23064d756189",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/14363dce8970f88682a9335236cf23064d756189"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0f7739e4a1e9315064349f264a078f576753387d",
          "sha": "0f7739e4a1e9315064349f264a078f576753387d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0f7739e4a1e9315064349f264a078f576753387d"
        }
      ],
      "message": "policy: Remove CPFP carveout rule\n\nThe addition of a cluster size limit makes the CPFP carveout rule useless,\nbecause carveout cannot be used to bypass the cluster size limit. Remove this\npolicy rule and update tests to no longer rely on the behavior.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-03T14:54:30Z"
      },
      "sha": "576d71b33dda244a727ceb526804ee63bd9bed2b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDJhYWQ5ZjAxZTUxNGI3NzUzOGViNzgwMTM4YThlNTI0ODRlYWY1YTg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2aad9f01e514b77538eb780138a8e52484eaf5a8",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2aad9f01e514b77538eb780138a8e52484eaf5a8",
      "tree": {
        "sha": "6c1d832aa199a9b29da0129e11fcc8a1cb7bbf99",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6c1d832aa199a9b29da0129e11fcc8a1cb7bbf99"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/576d71b33dda244a727ceb526804ee63bd9bed2b",
          "sha": "576d71b33dda244a727ceb526804ee63bd9bed2b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/576d71b33dda244a727ceb526804ee63bd9bed2b"
        }
      ],
      "message": "Implement new RBF logic for cluster mempool\n\nWith a total ordering on mempool transactions, we are now able to calculate a\ntransaction's mining score at all times. Use this to improve the RBF logic:\n\n- we no longer enforce a \"no new unconfirmed parents\" rule\n\n- we now require that the mempool's feerate diagram must improve in order\n  to accept a replacement\n\n- the topology restrictions for conflicts in the package rbf setting have been\n  eliminated\n\nRevert the temporary change to mempool_ephemeral_dust.py that were previously\nmade due to RBF validation checks being reordered.\n\nCo-authored-by: Gregory Sanders <gsanders87@gmail.com>, glozow <gloriajzhao@gmail.com>",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-21T17:19:32Z"
      },
      "sha": "2aad9f01e514b77538eb780138a8e52484eaf5a8"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDhjZGQ3YmIxMWFkZWFlYjQ3MDljNjcwYmVmNGI1NzM2MmNmYmViY2I",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8cdd7bb11adeaeb4709c670bef4b57362cfbebcb",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8cdd7bb11adeaeb4709c670bef4b57362cfbebcb",
      "tree": {
        "sha": "6c1d832aa199a9b29da0129e11fcc8a1cb7bbf99",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6c1d832aa199a9b29da0129e11fcc8a1cb7bbf99"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2aad9f01e514b77538eb780138a8e52484eaf5a8",
          "sha": "2aad9f01e514b77538eb780138a8e52484eaf5a8",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2aad9f01e514b77538eb780138a8e52484eaf5a8"
        }
      ],
      "message": "==== END CLUSTER IMPLEMENTATION ====",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-17T15:36:11Z"
      },
      "sha": "8cdd7bb11adeaeb4709c670bef4b57362cfbebcb"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDU2ZTIwZmUyZGY3OTVlNWMxZWNkZjE0YjUxYzliYzk2NTQyZmNiNjQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/56e20fe2df795e5c1ecdf14b51c9bc96542fcb64",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/56e20fe2df795e5c1ecdf14b51c9bc96542fcb64",
      "tree": {
        "sha": "6c1d832aa199a9b29da0129e11fcc8a1cb7bbf99",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6c1d832aa199a9b29da0129e11fcc8a1cb7bbf99"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8cdd7bb11adeaeb4709c670bef4b57362cfbebcb",
          "sha": "8cdd7bb11adeaeb4709c670bef4b57362cfbebcb",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8cdd7bb11adeaeb4709c670bef4b57362cfbebcb"
        }
      ],
      "message": "==== BEGIN MEMPOOL CLEANUP ====",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-17T15:36:45Z"
      },
      "sha": "56e20fe2df795e5c1ecdf14b51c9bc96542fcb64"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDk3YjUyMTNkMTA2ODEwZDE5ZDhhMGE2MDc4M2Q0MmZhYzhiNzg0NmI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/97b5213d106810d19d8a0a60783d42fac8b7846b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/97b5213d106810d19d8a0a60783d42fac8b7846b",
      "tree": {
        "sha": "a27fbcf5536694f19e0e899dcfaf6471d3f72ac6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a27fbcf5536694f19e0e899dcfaf6471d3f72ac6"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/56e20fe2df795e5c1ecdf14b51c9bc96542fcb64",
          "sha": "56e20fe2df795e5c1ecdf14b51c9bc96542fcb64",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/56e20fe2df795e5c1ecdf14b51c9bc96542fcb64"
        }
      ],
      "message": "Remove the ancestor and descendant indices from the mempool",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-21T18:45:20Z"
      },
      "sha": "97b5213d106810d19d8a0a60783d42fac8b7846b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDk3ZmVhOTQxN2NjZWU4MjIzN2Y3ZmRmYTQ3YWU5YjY3YzRjNTc3NGE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/97fea9417ccee82237f7fdfa47ae9b67c4c5774a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/97fea9417ccee82237f7fdfa47ae9b67c4c5774a",
      "tree": {
        "sha": "b273e86850011260e52de953238eda7002f8d3ba",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b273e86850011260e52de953238eda7002f8d3ba"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/97b5213d106810d19d8a0a60783d42fac8b7846b",
          "sha": "97b5213d106810d19d8a0a60783d42fac8b7846b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/97b5213d106810d19d8a0a60783d42fac8b7846b"
        }
      ],
      "message": "Use cluster linearization for transaction relay sort order\n\nPreviously, transaction batches were first sorted by ancestor count and then\nfeerate, to ensure transactions are announced in a topologically valid order,\nwhile prioritizing higher feerate transactions. Ancestor count is a crude\ntopological sort criteria, so replace this with linearization order so that the\nhighest feerate transactions (as would be observed by the mining algorithm) are\nrelayed before lower feerate ones, in a topologically valid way.\n\nThis also fixes a test that only worked due to the ancestor-count-based sort\norder.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-27T18:47:42Z"
      },
      "sha": "97fea9417ccee82237f7fdfa47ae9b67c4c5774a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDE0YTU2OTg3Y2IyMjZmMzBiOGExOTRmN2I2Y2VkMGJkMmQyMjlkYzA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/14a56987cb226f30b8a194f7b6ced0bd2d229dc0",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/14a56987cb226f30b8a194f7b6ced0bd2d229dc0",
      "tree": {
        "sha": "952be877e8ed6214aa968a078018161d053f236c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/952be877e8ed6214aa968a078018161d053f236c"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/97fea9417ccee82237f7fdfa47ae9b67c4c5774a",
          "sha": "97fea9417ccee82237f7fdfa47ae9b67c4c5774a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/97fea9417ccee82237f7fdfa47ae9b67c4c5774a"
        }
      ],
      "message": "Remove CTxMemPool::GetSortedDepthAndScore\n\nThe mempool clusters and linearization permit sorting the mempool topologically\nwithout making use of ancestor counts (as long as the graph is not oversized).\n\nCo-authored-by: Pieter Wuille <pieter@wuille.net>",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-28T14:20:04Z"
      },
      "sha": "14a56987cb226f30b8a194f7b6ced0bd2d229dc0"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDgwYWMwZGMwYTVkNDhhMzI5NWQ3ZmI1OWYyNjJmNDI5YWY0N2M4MjE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/80ac0dc0a5d48a3295d7fb59f262f429af47c821",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/80ac0dc0a5d48a3295d7fb59f262f429af47c821",
      "tree": {
        "sha": "421eb6b91635d52c53970676c25be88f791e070e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/421eb6b91635d52c53970676c25be88f791e070e"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/14a56987cb226f30b8a194f7b6ced0bd2d229dc0",
          "sha": "14a56987cb226f30b8a194f7b6ced0bd2d229dc0",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/14a56987cb226f30b8a194f7b6ced0bd2d229dc0"
        }
      ],
      "message": "Reimplement GetTransactionAncestry() to not rely on cached data\n\nIn preparation for removing ancestor data from CTxMemPoolEntry, recalculate the\nancestor statistics on demand wherever needed.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-28T18:47:40Z"
      },
      "sha": "80ac0dc0a5d48a3295d7fb59f262f429af47c821"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDg3YWU0ZmU1YjM5NGNjY2RhNTQ5YTEwNjUxMDU3ZDljMTg0ZTMzODM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/87ae4fe5b394cccda549a10651057d9c184e3383",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/87ae4fe5b394cccda549a10651057d9c184e3383",
      "tree": {
        "sha": "31cfb1aa8d3b8e30045c0f2d535ba7041cf96df9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/31cfb1aa8d3b8e30045c0f2d535ba7041cf96df9"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/80ac0dc0a5d48a3295d7fb59f262f429af47c821",
          "sha": "80ac0dc0a5d48a3295d7fb59f262f429af47c821",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/80ac0dc0a5d48a3295d7fb59f262f429af47c821"
        }
      ],
      "message": "rpc: Calculate ancestor data from scratch for mempool rpc calls",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-28T19:07:05Z"
      },
      "sha": "87ae4fe5b394cccda549a10651057d9c184e3383"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGI1NzAxYmRmNjU2YTg4ZTkxYzI5MjFmNzFlZGQ0NTlmYmI4YTExMDM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b5701bdf656a88e91c2921f71edd459fbb8a1103",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b5701bdf656a88e91c2921f71edd459fbb8a1103",
      "tree": {
        "sha": "25582ac0e129141b46958a1ce58514e4b22ce901",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/25582ac0e129141b46958a1ce58514e4b22ce901"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/87ae4fe5b394cccda549a10651057d9c184e3383",
          "sha": "87ae4fe5b394cccda549a10651057d9c184e3383",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/87ae4fe5b394cccda549a10651057d9c184e3383"
        }
      ],
      "message": "Remove dependency on cached ancestor data in mini-miner",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-28T21:55:16Z"
      },
      "sha": "b5701bdf656a88e91c2921f71edd459fbb8a1103"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDhhNDE2ZmI4ZTNjYTA5MWM5OTZkOWI1ZDVjYTAyMTVkZWVmNzg5MWQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8a416fb8e3ca091c996d9b5d5ca0215deef7891d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8a416fb8e3ca091c996d9b5d5ca0215deef7891d",
      "tree": {
        "sha": "79874cce5d9b2821d01455fc788d31d53497ce7d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/79874cce5d9b2821d01455fc788d31d53497ce7d"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b5701bdf656a88e91c2921f71edd459fbb8a1103",
          "sha": "b5701bdf656a88e91c2921f71edd459fbb8a1103",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b5701bdf656a88e91c2921f71edd459fbb8a1103"
        }
      ],
      "message": "Stop enforcing ancestor size/count limits\n\nThe cluster limits should be sufficient.\n\nCo-Authored-By: Gregory Sanders <gsanders87@gmail.com>",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-09-28T21:59:15Z"
      },
      "sha": "8a416fb8e3ca091c996d9b5d5ca0215deef7891d"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGVhNThmNjRiNzZkNjJiMTQ3ODkxOTE5ZjdjODA2NjEzMmU2ZmY5OTc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ea58f64b76d62b147891919f7c8066132e6ff997",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ea58f64b76d62b147891919f7c8066132e6ff997",
      "tree": {
        "sha": "4cbace7c512b675b0d99f262f0c1b9c616a95bea",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4cbace7c512b675b0d99f262f0c1b9c616a95bea"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8a416fb8e3ca091c996d9b5d5ca0215deef7891d",
          "sha": "8a416fb8e3ca091c996d9b5d5ca0215deef7891d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8a416fb8e3ca091c996d9b5d5ca0215deef7891d"
        }
      ],
      "message": "Add test case for cluster size limits to TRUC logic",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2024-04-14T10:59:01Z"
      },
      "sha": "ea58f64b76d62b147891919f7c8066132e6ff997"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDU0ZmZjYjNhZDkyODIyMTQ3NzViMTQyYzY1NmZkZTIxNGZmZmVmNDU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/54ffcb3ad9282214775b142c656fde214fffef45",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/54ffcb3ad9282214775b142c656fde214fffef45",
      "tree": {
        "sha": "983ca03bbd8a1b67308464b02eccffe2a1236a0e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/983ca03bbd8a1b67308464b02eccffe2a1236a0e"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ea58f64b76d62b147891919f7c8066132e6ff997",
          "sha": "ea58f64b76d62b147891919f7c8066132e6ff997",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ea58f64b76d62b147891919f7c8066132e6ff997"
        }
      ],
      "message": "Use mempool/txgraph to determine if a tx has descendants\n\nRemove a reference to GetCountWithDescendants() in preparation for removing\nthis function and the associated cached state from the mempool.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-03T15:19:15Z"
      },
      "sha": "54ffcb3ad9282214775b142c656fde214fffef45"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDlmZTU0MmU5ZDVhNGYzOTRhM2QwZTdkMjQzNjdiZDE2NDFiNDlhMDI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9fe542e9d5a4f394a3d0e7d24367bd1641b49a02",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/9fe542e9d5a4f394a3d0e7d24367bd1641b49a02",
      "tree": {
        "sha": "2617020ba1dca81436089bc55d951961cd2034d5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2617020ba1dca81436089bc55d951961cd2034d5"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/54ffcb3ad9282214775b142c656fde214fffef45",
          "sha": "54ffcb3ad9282214775b142c656fde214fffef45",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/54ffcb3ad9282214775b142c656fde214fffef45"
        }
      ],
      "message": "Calculate descendant information for mempool RPC output on-the-fly\n\nThis is in preparation for removing the cached descendant state from the\nmempool.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-03T15:57:16Z"
      },
      "sha": "9fe542e9d5a4f394a3d0e7d24367bd1641b49a02"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDIwNTU0MDYzMzUzYWFmMGE0NTlkYjQ5MWQ1YWY3NWQ5ZmQ2ZWFhN2I",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/20554063353aaf0a459db491d5af75d9fd6eaa7b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/20554063353aaf0a459db491d5af75d9fd6eaa7b",
      "tree": {
        "sha": "0c3213ce27a738fb03c1eabcab4ddbc8c43ada2f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0c3213ce27a738fb03c1eabcab4ddbc8c43ada2f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9fe542e9d5a4f394a3d0e7d24367bd1641b49a02",
          "sha": "9fe542e9d5a4f394a3d0e7d24367bd1641b49a02",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/9fe542e9d5a4f394a3d0e7d24367bd1641b49a02"
        }
      ],
      "message": "test: remove rbf carveout test from mempool_limit.py",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-18T17:22:09Z"
      },
      "sha": "20554063353aaf0a459db491d5af75d9fd6eaa7b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGU4MGU5NWVjZTRiYjJhYzA0NTdlMjlmN2I1MGYwOWIwODJjYjI3ODE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e80e95ece4bb2ac0457e29f7b50f09b082cb2781",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e80e95ece4bb2ac0457e29f7b50f09b082cb2781",
      "tree": {
        "sha": "5ce7ce77e7a1e97dfa596754851d6f97ee2ccc5f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5ce7ce77e7a1e97dfa596754851d6f97ee2ccc5f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/20554063353aaf0a459db491d5af75d9fd6eaa7b",
          "sha": "20554063353aaf0a459db491d5af75d9fd6eaa7b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/20554063353aaf0a459db491d5af75d9fd6eaa7b"
        }
      ],
      "message": "Stop enforcing descendant size/count limits\n\nCluster size limits should be enough.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-03T17:56:22Z"
      },
      "sha": "e80e95ece4bb2ac0457e29f7b50f09b082cb2781"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDc1MDljMzIxYWVjM2Y1NTQwMDc2ZDcyODFkMWViMWViZThlZTk5MGM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7509c321aec3f5540076d7281d1eb1ebe8ee990c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/7509c321aec3f5540076d7281d1eb1ebe8ee990c",
      "tree": {
        "sha": "4b14ec047383881c5f076b055b0e052c43ebaa69",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4b14ec047383881c5f076b055b0e052c43ebaa69"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e80e95ece4bb2ac0457e29f7b50f09b082cb2781",
          "sha": "e80e95ece4bb2ac0457e29f7b50f09b082cb2781",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e80e95ece4bb2ac0457e29f7b50f09b082cb2781"
        }
      ],
      "message": "Eliminate RBF workaround for CPFP carveout transactions\n\nThe new cluster mempool RBF rules take into account clusters sizes exactly, so\nwith the removal of descendant count enforcement this idea is obsolete.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-06-12T18:50:47Z"
      },
      "sha": "7509c321aec3f5540076d7281d1eb1ebe8ee990c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGY1MjQ2YzlmMWRiOGVmNTU3N2RmMGY3ODMxZDU4ZGJlNTQwNGY1YWI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f5246c9f1db8ef5577df0f7831d58dbe5404f5ab",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f5246c9f1db8ef5577df0f7831d58dbe5404f5ab",
      "tree": {
        "sha": "caaaac7f9f0cd3f23c9cd33c2e038cc70fc9a903",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/caaaac7f9f0cd3f23c9cd33c2e038cc70fc9a903"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7509c321aec3f5540076d7281d1eb1ebe8ee990c",
          "sha": "7509c321aec3f5540076d7281d1eb1ebe8ee990c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/7509c321aec3f5540076d7281d1eb1ebe8ee990c"
        }
      ],
      "message": "wallet: Replace max descendantsize with clustersize\n\nWith the descendant size limits removed, replace the concept of \"max number of\ndescendants of any ancestor of a given tx\" with the cluster count of the cluster\nthat the transaction belongs to.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-03T19:00:00Z"
      },
      "sha": "f5246c9f1db8ef5577df0f7831d58dbe5404f5ab"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDg0NTU3NzNiZmExMzYyZWNlN2NhNGEyZmVlMzJhYjFmMTg4YTUxNTU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8455773bfa1362ece7ca4a2fee32ab1f188a5155",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8455773bfa1362ece7ca4a2fee32ab1f188a5155",
      "tree": {
        "sha": "88f2179a4f6f29851111ad6f60e9d2d6ef5a6216",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/88f2179a4f6f29851111ad6f60e9d2d6ef5a6216"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f5246c9f1db8ef5577df0f7831d58dbe5404f5ab",
          "sha": "f5246c9f1db8ef5577df0f7831d58dbe5404f5ab",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f5246c9f1db8ef5577df0f7831d58dbe5404f5ab"
        }
      ],
      "message": "mempool: Remove unused function CalculateDescendantMaximum",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-04T13:19:21Z"
      },
      "sha": "8455773bfa1362ece7ca4a2fee32ab1f188a5155"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDNjZjJiYjFkNjA3MGQ3NzExMjUyOGE4ODYxZDljMzA1ZmVjNGJlNjM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3cf2bb1d6070d77112528a8861d9c305fec4be63",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3cf2bb1d6070d77112528a8861d9c305fec4be63",
      "tree": {
        "sha": "ed6db8534ed43c4d0ca12de58166019539d9e606",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ed6db8534ed43c4d0ca12de58166019539d9e606"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8455773bfa1362ece7ca4a2fee32ab1f188a5155",
          "sha": "8455773bfa1362ece7ca4a2fee32ab1f188a5155",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8455773bfa1362ece7ca4a2fee32ab1f188a5155"
        }
      ],
      "message": "Eliminate use of cached ancestor data in miniminer_tests and truc_policy",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2024-04-14T17:49:03Z"
      },
      "sha": "3cf2bb1d6070d77112528a8861d9c305fec4be63"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDExMDc5YjllYzc1NmFkOTliZmM2OTBiYjQyYWI1ZjFhMTMxMDQ4N2U",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/11079b9ec756ad99bfc690bb42ab5f1a1310487e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/11079b9ec756ad99bfc690bb42ab5f1a1310487e",
      "tree": {
        "sha": "3aa26b420f0fae0bb47ba9b40a09fa3a30971ece",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3aa26b420f0fae0bb47ba9b40a09fa3a30971ece"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3cf2bb1d6070d77112528a8861d9c305fec4be63",
          "sha": "3cf2bb1d6070d77112528a8861d9c305fec4be63",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/3cf2bb1d6070d77112528a8861d9c305fec4be63"
        }
      ],
      "message": "mempool: eliminate accessors to mempool entry ancestor/descendant cached state",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-04T13:28:05Z"
      },
      "sha": "11079b9ec756ad99bfc690bb42ab5f1a1310487e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDllNDU0MzgyN2EwNjM4ODBkYzQ5ZmZmOWE4Y2MwZWU1NTBkNmFjZGU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9e4543827a063880dc49fff9a8cc0ee550d6acde",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/9e4543827a063880dc49fff9a8cc0ee550d6acde",
      "tree": {
        "sha": "2816af1cdb570ef9c39f3f7689acc3332fcb5fb6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2816af1cdb570ef9c39f3f7689acc3332fcb5fb6"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/11079b9ec756ad99bfc690bb42ab5f1a1310487e",
          "sha": "11079b9ec756ad99bfc690bb42ab5f1a1310487e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/11079b9ec756ad99bfc690bb42ab5f1a1310487e"
        }
      ],
      "message": "Remove unused members from CTxMemPoolEntry",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-04T13:48:04Z"
      },
      "sha": "9e4543827a063880dc49fff9a8cc0ee550d6acde"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDE4OWZmN2U5MTAwZDlhZTlkYmYxYjk1NDM3N2M4NDMwZGRiNGExNGE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/189ff7e9100d9ae9dbf1b954377c8430ddb4a14a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/189ff7e9100d9ae9dbf1b954377c8430ddb4a14a",
      "tree": {
        "sha": "8db34e686ec2ed4e37cafec4db9c7ac9f5b9e1dc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8db34e686ec2ed4e37cafec4db9c7ac9f5b9e1dc"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9e4543827a063880dc49fff9a8cc0ee550d6acde",
          "sha": "9e4543827a063880dc49fff9a8cc0ee550d6acde",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/9e4543827a063880dc49fff9a8cc0ee550d6acde"
        }
      ],
      "message": "Remove mempool logic designed to maintain ancestor/descendant state",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-04T14:47:14Z"
      },
      "sha": "189ff7e9100d9ae9dbf1b954377c8430ddb4a14a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQ0Y2IxNmZmZDVmNWIxYWM2YjNkNTY4OWVlYmEwNTM5ZDY5ZmZhOTA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d4cb16ffd5f5b1ac6b3d5689eeba0539d69ffa90",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d4cb16ffd5f5b1ac6b3d5689eeba0539d69ffa90",
      "tree": {
        "sha": "c8d4f28e7b6a7986c32e369a74bd9e50e8093229",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c8d4f28e7b6a7986c32e369a74bd9e50e8093229"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/189ff7e9100d9ae9dbf1b954377c8430ddb4a14a",
          "sha": "189ff7e9100d9ae9dbf1b954377c8430ddb4a14a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/189ff7e9100d9ae9dbf1b954377c8430ddb4a14a"
        }
      ],
      "message": "mempool: addUnchecked no longer needs ancestors",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-05T13:33:41Z"
      },
      "sha": "d4cb16ffd5f5b1ac6b3d5689eeba0539d69ffa90"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGE3NTM5NzUxOGY1Nzk0ZmQ3MDMzMmQyYjg0YTExN2M4ZjMzYTgwMWM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a75397518f5794fd70332d2b84a117c8f33a801c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a75397518f5794fd70332d2b84a117c8f33a801c",
      "tree": {
        "sha": "a1130935974435ab978a81abd4d8553aa4eb6e7d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a1130935974435ab978a81abd4d8553aa4eb6e7d"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d4cb16ffd5f5b1ac6b3d5689eeba0539d69ffa90",
          "sha": "d4cb16ffd5f5b1ac6b3d5689eeba0539d69ffa90",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d4cb16ffd5f5b1ac6b3d5689eeba0539d69ffa90"
        }
      ],
      "message": "Remove unused limits from CalculateMemPoolAncestors",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-15T01:15:06Z"
      },
      "sha": "a75397518f5794fd70332d2b84a117c8f33a801c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQ4OWM5ODliNTZmYjEzOTcwYzk4MTI2YzQwNDY2NjAyYTBmY2JiYWE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d89c989b56fb13970c98126c40466602a0fcbbaa",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d89c989b56fb13970c98126c40466602a0fcbbaa",
      "tree": {
        "sha": "761222e316f2cd68b6fdbb3384a9e225e3c4a9f8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/761222e316f2cd68b6fdbb3384a9e225e3c4a9f8"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a75397518f5794fd70332d2b84a117c8f33a801c",
          "sha": "a75397518f5794fd70332d2b84a117c8f33a801c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a75397518f5794fd70332d2b84a117c8f33a801c"
        }
      ],
      "message": "Make removeConflicts private",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-15T10:12:22Z"
      },
      "sha": "d89c989b56fb13970c98126c40466602a0fcbbaa"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDA1MGNhODA0NjYyNTZlN2M3NjVmZGUzYWY3OWNhNjM2NmJhN2U0OTM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/050ca80466256e7c765fde3af79ca6366ba7e493",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/050ca80466256e7c765fde3af79ca6366ba7e493",
      "tree": {
        "sha": "761222e316f2cd68b6fdbb3384a9e225e3c4a9f8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/761222e316f2cd68b6fdbb3384a9e225e3c4a9f8"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d89c989b56fb13970c98126c40466602a0fcbbaa",
          "sha": "d89c989b56fb13970c98126c40466602a0fcbbaa",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d89c989b56fb13970c98126c40466602a0fcbbaa"
        }
      ],
      "message": "==== END MEMPOOL CLEANUP ====",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-17T15:36:50Z"
      },
      "sha": "050ca80466256e7c765fde3af79ca6366ba7e493"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGM2YWQzNGMwNGQyMDc2N2Q3ZDZkZjdkM2EwOGFjYmViN2Y0Njc2Zjk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c6ad34c04d20767d7d6df7d3a08acbeb7f4676f9",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c6ad34c04d20767d7d6df7d3a08acbeb7f4676f9",
      "tree": {
        "sha": "761222e316f2cd68b6fdbb3384a9e225e3c4a9f8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/761222e316f2cd68b6fdbb3384a9e225e3c4a9f8"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/050ca80466256e7c765fde3af79ca6366ba7e493",
          "sha": "050ca80466256e7c765fde3af79ca6366ba7e493",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/050ca80466256e7c765fde3af79ca6366ba7e493"
        }
      ],
      "message": "==== BEGIN OPTIMIZATIONS ====",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-17T15:37:03Z"
      },
      "sha": "c6ad34c04d20767d7d6df7d3a08acbeb7f4676f9"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDU1MDJhMDZiODVkMGNlNTNlMjkxMWRjNjlmZjdkN2ZkMzI0N2VmMjU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5502a06b85d0ce53e2911dc69ff7d7fd3247ef25",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/5502a06b85d0ce53e2911dc69ff7d7fd3247ef25",
      "tree": {
        "sha": "06e4ed1111fa9b664c01025552b08c0ce37279ad",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/06e4ed1111fa9b664c01025552b08c0ce37279ad"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c6ad34c04d20767d7d6df7d3a08acbeb7f4676f9",
          "sha": "c6ad34c04d20767d7d6df7d3a08acbeb7f4676f9",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c6ad34c04d20767d7d6df7d3a08acbeb7f4676f9"
        }
      ],
      "message": "Simplify ancestor calculation functions\n\nNow that ancestor calculation never fails (due to ancestor/descendant limits\nbeing eliminated), we can eliminate the error handling from\nCalculateMemPoolAncestors.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-15T01:31:51Z"
      },
      "sha": "5502a06b85d0ce53e2911dc69ff7d7fd3247ef25"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGYzNTA5MTU2OWExNTA5NTYyZDY4YmE1ZWE3YTcwZWRmZDVkN2VhZTA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f35091569a1509562d68ba5ea7a70edfd5d7eae0",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f35091569a1509562d68ba5ea7a70edfd5d7eae0",
      "tree": {
        "sha": "812f7716f65d335ba6aa76778d99e45ae0f07a86",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/812f7716f65d335ba6aa76778d99e45ae0f07a86"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5502a06b85d0ce53e2911dc69ff7d7fd3247ef25",
          "sha": "5502a06b85d0ce53e2911dc69ff7d7fd3247ef25",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/5502a06b85d0ce53e2911dc69ff7d7fd3247ef25"
        }
      ],
      "message": "Use txgraph to calculate ancestors",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2024-04-14T22:21:34Z"
      },
      "sha": "f35091569a1509562d68ba5ea7a70edfd5d7eae0"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQ1NWY0ZWIyM2M3NjkzNGVlOWNjZWEyMzJiNzAxMWY4OTM3ZWFlNDg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d55f4eb23c76934ee9ccea232b7011f8937eae48",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d55f4eb23c76934ee9ccea232b7011f8937eae48",
      "tree": {
        "sha": "1a07fc1223a1a9e2bbc17c656c04239428945949",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1a07fc1223a1a9e2bbc17c656c04239428945949"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f35091569a1509562d68ba5ea7a70edfd5d7eae0",
          "sha": "f35091569a1509562d68ba5ea7a70edfd5d7eae0",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f35091569a1509562d68ba5ea7a70edfd5d7eae0"
        }
      ],
      "message": "Use txgraph to calculate descendants",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2024-04-14T23:28:25Z"
      },
      "sha": "d55f4eb23c76934ee9ccea232b7011f8937eae48"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGU0ODhjZGUxZjk3MTYzNDg2NWVhYjFkNjE4MjI1NDlmZDA5ODk0ZDQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e488cde1f971634865eab1d61822549fd09894d4",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e488cde1f971634865eab1d61822549fd09894d4",
      "tree": {
        "sha": "087db65913bba58983eb341d0eb8c6b8fcd647e3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/087db65913bba58983eb341d0eb8c6b8fcd647e3"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d55f4eb23c76934ee9ccea232b7011f8937eae48",
          "sha": "d55f4eb23c76934ee9ccea232b7011f8937eae48",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d55f4eb23c76934ee9ccea232b7011f8937eae48"
        }
      ],
      "message": "Rework truc_policy to use descendants, not children",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-01-23T20:49:00Z"
      },
      "sha": "e488cde1f971634865eab1d61822549fd09894d4"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQ4NTcyM2E3NzdjZDZhY2MyMmQ3NjkzMjNjYmExNWVkZjcxZjQ2ZWE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d85723a777cd6acc22d769323cba15edf71f46ea",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d85723a777cd6acc22d769323cba15edf71f46ea",
      "tree": {
        "sha": "2fc7aba42de1543f6aa1e3fea4ac896acfd47636",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2fc7aba42de1543f6aa1e3fea4ac896acfd47636"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e488cde1f971634865eab1d61822549fd09894d4",
          "sha": "e488cde1f971634865eab1d61822549fd09894d4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e488cde1f971634865eab1d61822549fd09894d4"
        }
      ],
      "message": "Make getting parents/children a function of the mempool, not a mempool entry",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2024-04-16T15:02:26Z"
      },
      "sha": "d85723a777cd6acc22d769323cba15edf71f46ea"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGIzYzZiNzg1MTk1NDg3MDNhMGFkZmMxM2ZkYzIwOTAwOTljZTMwMjg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b3c6b78519548703a0adfc13fdc2090099ce3028",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b3c6b78519548703a0adfc13fdc2090099ce3028",
      "tree": {
        "sha": "51f92de8c2892c88f7d7cfc7b00dd2cae9b56ef6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/51f92de8c2892c88f7d7cfc7b00dd2cae9b56ef6"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d85723a777cd6acc22d769323cba15edf71f46ea",
          "sha": "d85723a777cd6acc22d769323cba15edf71f46ea",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d85723a777cd6acc22d769323cba15edf71f46ea"
        }
      ],
      "message": "Eliminate CheckPackageLimits, which no longer does anything",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-01-25T16:30:50Z"
      },
      "sha": "b3c6b78519548703a0adfc13fdc2090099ce3028"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDUxN2M3MzQ2ODc4MzA3ZmUzNDA3NzY5MGNmYjQyNzk0NWY3Mjk3ZDg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/517c7346878307fe34077690cfb427945f7297d8",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/517c7346878307fe34077690cfb427945f7297d8",
      "tree": {
        "sha": "4d4b218fde9e4443e58cd2596aebb031e66d41a7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4d4b218fde9e4443e58cd2596aebb031e66d41a7"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b3c6b78519548703a0adfc13fdc2090099ce3028",
          "sha": "b3c6b78519548703a0adfc13fdc2090099ce3028",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b3c6b78519548703a0adfc13fdc2090099ce3028"
        }
      ],
      "message": "Fix miniminer_tests to work with cluster limits",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-02-08T18:38:19Z"
      },
      "sha": "517c7346878307fe34077690cfb427945f7297d8"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGNjNmQ1NWI4ZGU1M2U1ODFkNWM3ZDZhNTRhMTc5YmQwMzIzYWZmOTE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cc6d55b8de53e581d5c7d6a54a179bd0323aff91",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/cc6d55b8de53e581d5c7d6a54a179bd0323aff91",
      "tree": {
        "sha": "4e29bc704f1fcaaa17875c8eda280ccbbc17c3f8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4e29bc704f1fcaaa17875c8eda280ccbbc17c3f8"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/517c7346878307fe34077690cfb427945f7297d8",
          "sha": "517c7346878307fe34077690cfb427945f7297d8",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/517c7346878307fe34077690cfb427945f7297d8"
        }
      ],
      "message": "Rewrite GatherClusters to use the txgraph implementation",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2024-04-16T15:10:07Z"
      },
      "sha": "cc6d55b8de53e581d5c7d6a54a179bd0323aff91"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGJkYmU1MGUxMjBhZjkwNWY1OTY0ZGE5YTM3NjZlMDI5NTY0NTBjNjg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bdbe50e120af905f5964da9a3766e02956450c68",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/bdbe50e120af905f5964da9a3766e02956450c68",
      "tree": {
        "sha": "7f40d5293649faa376acf79244e8022c78271a7f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7f40d5293649faa376acf79244e8022c78271a7f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cc6d55b8de53e581d5c7d6a54a179bd0323aff91",
          "sha": "cc6d55b8de53e581d5c7d6a54a179bd0323aff91",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/cc6d55b8de53e581d5c7d6a54a179bd0323aff91"
        }
      ],
      "message": "Stop tracking parents/children outside of txgraph",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2024-04-16T16:13:42Z"
      },
      "sha": "bdbe50e120af905f5964da9a3766e02956450c68"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDRjNTJhMjE2NWYwZDkxYzFkYzQ5OGViOGYzZjI2MzczMTUwODczMDI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4c52a2165f0d91c1dc498eb8f3f2637315087302",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4c52a2165f0d91c1dc498eb8f3f2637315087302",
      "tree": {
        "sha": "7f40d5293649faa376acf79244e8022c78271a7f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7f40d5293649faa376acf79244e8022c78271a7f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bdbe50e120af905f5964da9a3766e02956450c68",
          "sha": "bdbe50e120af905f5964da9a3766e02956450c68",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/bdbe50e120af905f5964da9a3766e02956450c68"
        }
      ],
      "message": "==== END OPTIMIZATIONS ====",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-02-05T23:58:52Z"
      },
      "sha": "4c52a2165f0d91c1dc498eb8f3f2637315087302"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDIzM2I4ODZiNTk1ODBhZjAwMGMzZTllN2EzZDI5ZThlMmJmYjljZTU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/233b886b59580af000c3e9e7a3d29e8e2bfb9ce5",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/233b886b59580af000c3e9e7a3d29e8e2bfb9ce5",
      "tree": {
        "sha": "7f40d5293649faa376acf79244e8022c78271a7f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7f40d5293649faa376acf79244e8022c78271a7f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4c52a2165f0d91c1dc498eb8f3f2637315087302",
          "sha": "4c52a2165f0d91c1dc498eb8f3f2637315087302",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/4c52a2165f0d91c1dc498eb8f3f2637315087302"
        }
      ],
      "message": "==== BEGIN DOCS/TESTING ====",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-02-05T23:59:10Z"
      },
      "sha": "233b886b59580af000c3e9e7a3d29e8e2bfb9ce5"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGJlZmU1YzhiY2RkZjBkM2JkOTgzYmJkMzUyYjQxM2E2MjA2MWU0NzE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/befe5c8bcddf0d3bd983bbd352b413a62061e471",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/befe5c8bcddf0d3bd983bbd352b413a62061e471",
      "tree": {
        "sha": "45666461c6952387b6fc318d54524896a5ddfb91",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/45666461c6952387b6fc318d54524896a5ddfb91"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/233b886b59580af000c3e9e7a3d29e8e2bfb9ce5",
          "sha": "233b886b59580af000c3e9e7a3d29e8e2bfb9ce5",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/233b886b59580af000c3e9e7a3d29e8e2bfb9ce5"
        }
      ],
      "message": "Avoid violating mempool policy limits in tests\n\nChanges AddToMempool() helper to only apply changes if the mempool limits are\nrespected.\n\nFix package_rbf fuzz target to handle mempool policy violations",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-02-04T20:03:25Z"
      },
      "sha": "befe5c8bcddf0d3bd983bbd352b413a62061e471"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGRiYjZlMmJjOGQ0ZjExOGM3ZDFmYmU5NjAxMDFkNzI0ZDFmMDRkYmM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/dbb6e2bc8d4f118c7d1fbe960101d724d1f04dbc",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/dbb6e2bc8d4f118c7d1fbe960101d724d1f04dbc",
      "tree": {
        "sha": "a3e11e3aace181737cbab46f4249c8b6c20e4cda",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a3e11e3aace181737cbab46f4249c8b6c20e4cda"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/befe5c8bcddf0d3bd983bbd352b413a62061e471",
          "sha": "befe5c8bcddf0d3bd983bbd352b413a62061e471",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/befe5c8bcddf0d3bd983bbd352b413a62061e471"
        }
      ],
      "message": "bench: add more mempool benchmarks\n\nAdd benchmarks for:\n\n  - mempool update time when blocks are found\n  - adding a transaction\n  - performing the mempool's RBF calculation\n  - calculating mempool ancestors/descendants",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-10-11T15:34:16Z"
      },
      "sha": "dbb6e2bc8d4f118c7d1fbe960101d724d1f04dbc"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZiMjExZjgzNjhlMGRmMzFiYzY5NDhkN2FmODhhMzgxZTRiYjVkNmI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fb211f8368e0df31bc6948d7af88a381e4bb5d6b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fb211f8368e0df31bc6948d7af88a381e4bb5d6b",
      "tree": {
        "sha": "9b45cdaffcb84c6fa828c29078d3b0d7a364dcf0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9b45cdaffcb84c6fa828c29078d3b0d7a364dcf0"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/dbb6e2bc8d4f118c7d1fbe960101d724d1f04dbc",
          "sha": "dbb6e2bc8d4f118c7d1fbe960101d724d1f04dbc",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/dbb6e2bc8d4f118c7d1fbe960101d724d1f04dbc"
        }
      ],
      "message": "fuzz: try to add more code coverage for mempool fuzzing\n\nIncluding test coverage for mempool eviction and expiry",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2023-10-12T14:48:55Z"
      },
      "sha": "fb211f8368e0df31bc6948d7af88a381e4bb5d6b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDdmZmQ3Yzg2ZGQwNWQ4MWJhNzA4ZjIyM2VlNjY4MTgyNDRjYzQ4ZDc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7ffd7c86dd05d81ba708f223ee66818244cc48d7",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/7ffd7c86dd05d81ba708f223ee66818244cc48d7",
      "tree": {
        "sha": "ef7ad6acf915a37b8eb69d61c66bc8d82f5a6460",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ef7ad6acf915a37b8eb69d61c66bc8d82f5a6460"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fb211f8368e0df31bc6948d7af88a381e4bb5d6b",
          "sha": "fb211f8368e0df31bc6948d7af88a381e4bb5d6b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/fb211f8368e0df31bc6948d7af88a381e4bb5d6b"
        }
      ],
      "message": "Expose cluster information via rpc\n\nCo-authored-by: glozow <gloriajzhao@gmail.com>",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2023-04-19T21:12:04Z"
      },
      "sha": "7ffd7c86dd05d81ba708f223ee66818244cc48d7"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGFjMjBjNzllYjAxYmM3NTc0MzMyMmE1ZDc2NzA3MGNhZWE4NTM1OTI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ac20c79eb01bc75743322a5d767070caea853592",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ac20c79eb01bc75743322a5d767070caea853592",
      "tree": {
        "sha": "576b14897aa41010c6110277fc20d581853a7a28",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/576b14897aa41010c6110277fc20d581853a7a28"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7ffd7c86dd05d81ba708f223ee66818244cc48d7",
          "sha": "7ffd7c86dd05d81ba708f223ee66818244cc48d7",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/7ffd7c86dd05d81ba708f223ee66818244cc48d7"
        }
      ],
      "message": "doc: Update mempool_replacements.md to reflect feerate diagram checks",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-04-24T23:52:18Z"
      },
      "sha": "ac20c79eb01bc75743322a5d767070caea853592"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGFhMzBmMjZkYjNjZjI2OGY2ODI2MjNlZGM5YTQzODY4ZTAwNTdkMzk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/aa30f26db3cf268f682623edc9a43868e0057d39",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/aa30f26db3cf268f682623edc9a43868e0057d39",
      "tree": {
        "sha": "46439cdad1d5b3022e884b4d0faf0d20fbeab10a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/46439cdad1d5b3022e884b4d0faf0d20fbeab10a"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ac20c79eb01bc75743322a5d767070caea853592",
          "sha": "ac20c79eb01bc75743322a5d767070caea853592",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ac20c79eb01bc75743322a5d767070caea853592"
        }
      ],
      "message": "test: add functional test for new cluster mempool RPCs",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-04-27T13:31:59Z"
      },
      "sha": "aa30f26db3cf268f682623edc9a43868e0057d39"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGM4ODM2MGNkODJiNmJhNTliMzQ1ZDZkNTczYjc5MWU0OTY0OTMwZDI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c88360cd82b6ba59b345d6d573b791e4964930d2",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c88360cd82b6ba59b345d6d573b791e4964930d2",
      "tree": {
        "sha": "1e6bda9554d640d0de2b0ea7375be1facbbdadfc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1e6bda9554d640d0de2b0ea7375be1facbbdadfc"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/aa30f26db3cf268f682623edc9a43868e0057d39",
          "sha": "aa30f26db3cf268f682623edc9a43868e0057d39",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/aa30f26db3cf268f682623edc9a43868e0057d39"
        }
      ],
      "message": "fuzz: remove comparison between mini_miner block construction and miner\n\nThis is in preparation for eliminating the block template building happening in\nmini_miner, in favor of directly using the linearizations done in the mempool.",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2024-04-28T11:34:48Z"
      },
      "sha": "c88360cd82b6ba59b345d6d573b791e4964930d2"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGI4MGMwMzk3YTZhNTc3NjExMjVjYWJlOWNhYjg3YmM2Y2M1MTU0ZTk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b80c0397a6a57761125cabe9cab87bc6cc5154e9",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b80c0397a6a57761125cabe9cab87bc6cc5154e9",
      "tree": {
        "sha": "d151297f629125531d71ff0887e3e9a45f671b5c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d151297f629125531d71ff0887e3e9a45f671b5c"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c88360cd82b6ba59b345d6d573b791e4964930d2",
          "sha": "c88360cd82b6ba59b345d6d573b791e4964930d2",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c88360cd82b6ba59b345d6d573b791e4964930d2"
        }
      ],
      "message": "Invoke TxGraph::DoWork() at appropriate times",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-07-29T20:16:18Z"
      },
      "sha": "b80c0397a6a57761125cabe9cab87bc6cc5154e9"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDZiYjNlNGZmMDFlYTk5YTdjNTFkM2NlNTVkNThiMDliMzIxNjViOGU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6bb3e4ff01ea99a7c51d3ce55d58b09b32165b8e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/6bb3e4ff01ea99a7c51d3ce55d58b09b32165b8e",
      "tree": {
        "sha": "e781e1e4179a4cb0be6b03bd1ffcb374758cd5fc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e781e1e4179a4cb0be6b03bd1ffcb374758cd5fc"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b80c0397a6a57761125cabe9cab87bc6cc5154e9",
          "sha": "b80c0397a6a57761125cabe9cab87bc6cc5154e9",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b80c0397a6a57761125cabe9cab87bc6cc5154e9"
        }
      ],
      "message": "Update comments for CTxMemPool class",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-09-02T23:01:10Z"
      },
      "sha": "6bb3e4ff01ea99a7c51d3ce55d58b09b32165b8e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDkyODcyYTdmNDY2ZWEyYzYzZDE5MDhhMjM0YmJlNThlZTAyZDkzMWM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/92872a7f466ea2c63d1908a234bbe58ee02d931c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/92872a7f466ea2c63d1908a234bbe58ee02d931c",
      "tree": {
        "sha": "dded6702eb17c52b69fcafa8a992385a6577f175",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/dded6702eb17c52b69fcafa8a992385a6577f175"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6bb3e4ff01ea99a7c51d3ce55d58b09b32165b8e",
          "sha": "6bb3e4ff01ea99a7c51d3ce55d58b09b32165b8e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/6bb3e4ff01ea99a7c51d3ce55d58b09b32165b8e"
        }
      ],
      "message": "Add check that GetSortedScoreWithTopology() agrees with CompareMiningScoreWithTopology()\n\nWe use CompareMiningScoreWithTopology() for sorting transaction announcements\nduring tx relay, and we use GetSortedScoreWithTopology() in\nCTxMemPool::check().",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-09-17T17:26:45Z"
      },
      "sha": "92872a7f466ea2c63d1908a234bbe58ee02d931c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQzZjhiNjM4MGYxNjVlNDRmYTBhYTVlMmYyYjdiNzVhMjgwODdiMzg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "tree": {
        "sha": "31caabc2c5ef3ba5c89d1d8807dcfa85999f9ecb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/31caabc2c5ef3ba5c89d1d8807dcfa85999f9ecb"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/92872a7f466ea2c63d1908a234bbe58ee02d931c",
          "sha": "92872a7f466ea2c63d1908a234bbe58ee02d931c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/92872a7f466ea2c63d1908a234bbe58ee02d931c"
        }
      ],
      "message": "Rework RBF and TRUC validation\n\nCalculating mempool ancestors for a new transaction should not be done until\nafter cluster size limits have been enforced, to limit CPU DoS potential.\n\nAchieve this by reworking TRUC and RBF validation logic:\n\n- TRUC policy enforcement is now done using only mempool parents of\n  new transactions, not all mempool ancestors.\n- RBF replacement checks are performed earlier (which allows for checking\n  cluster size limits earlier, because cluster size checks cannot happen until\n  after all conflicts are staged for removal).\n- Verifying that a new transaction doesn't conflict with an ancestor now\n  happens later, in AcceptSingleTransaction() rather than in PreChecks(). This\n  means that the test is not performed at all in AcceptMultipleTransactions(),\n  but in package acceptance we already disallow RBF in situations where a\n  package transaction has in-mempool parents.\n\nAlso to ensure that all RBF validation logic is applied in both the single\ntransaction and multiple transaction cases, remove the optimization that skips\nthe PackageMempoolChecks() in the case of a single transaction being validated\nin AcceptMultipleTransactions().",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-10-14T18:03:42Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2025-09-21T16:52:05Z"
      },
      "sha": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20276325254,
      "node_id": "HRFPE_lADOABII5850QVJBzwAAAAS4kCuG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20276325254",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "commit_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits/d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "created_at": "2025-10-14T18:06:04Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1364398135",
      "pull_request_review_id": 1685916441,
      "id": 1364398135,
      "node_id": "PRRC_kwDOABII585RUxA3",
      "diff_hunk": "@@ -18,14 +18,7 @@ other consensus and policy rules, each of the following conditions are met:\n    Use the (`-mempoolfullrbf`) configuration option to allow transaction replacement without enforcement of the\n    opt-in signaling rule.\n \n-2. The replacement transaction only include an unconfirmed input if that input was included in\n-   one of the directly conflicting transactions. An unconfirmed input spends an output from a\n-   currently-unconfirmed transaction.\n-\n-   *Rationale*: When RBF was originally implemented, the mempool did not keep track of\n-   ancestor feerates yet. This rule was suggested as a temporary restriction.\n-\n-3. The replacement transaction pays an absolute fee of at least the sum paid by the original",
      "path": "doc/policy/mempool-replacements.md",
      "position": 12,
      "original_position": 11,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "b0f771bb559f38ea16a8f4d13110e2247ac080b9",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "might be easier to just \"strike out\" this rule and mark it deprecated instead of changing numbers since that's become engineer lingo",
      "created_at": "2023-10-18T19:11:00Z",
      "updated_at": "2023-10-24T18:23:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1364398135",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1364398135"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 22,
      "original_line": 22,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1365716769",
      "pull_request_review_id": 1685916441,
      "id": 1365716769,
      "node_id": "PRRC_kwDOABII585RZy8h",
      "diff_hunk": "@@ -684,6 +830,19 @@ UniValue MempoolInfoToJSON(const CTxMemPool& pool)\n     ret.pushKV(\"incrementalrelayfee\", ValueFromAmount(pool.m_incremental_relay_feerate.GetFeePerK()));\n     ret.pushKV(\"unbroadcastcount\", uint64_t{pool.GetUnbroadcastTxs().size()});\n     ret.pushKV(\"fullrbf\", pool.m_full_rbf);\n+    ret.pushKV(\"numberofclusters\", pool.m_cluster_map.size());\n+    int64_t max_cluster_count = 1;",
      "path": "src/rpc/mempool.cpp",
      "position": 1,
      "original_position": 283,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "3a42ba255a73e609ac37eee8288208fa43953779",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "shouldn't this be 0?",
      "created_at": "2023-10-19T15:13:12Z",
      "updated_at": "2023-10-24T18:23:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1365716769",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1365716769"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 844,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1365753481",
      "pull_request_review_id": 1685916441,
      "id": 1365753481,
      "node_id": "PRRC_kwDOABII585RZ76J",
      "diff_hunk": "@@ -60,57 +59,26 @@ std::optional<std::string> GetEntriesForConflicts(const CTransaction& tx,\n {\n     AssertLockHeld(pool.cs);\n     const uint256 txid = tx.GetHash();\n-    uint64_t nConflictingCount = 0;\n-    for (const auto& mi : iters_conflicting) {\n-        nConflictingCount += mi->GetCountWithDescendants();\n-        // Rule #5: don't consider replacing more than MAX_REPLACEMENT_CANDIDATES\n-        // entries from the mempool. This potentially overestimates the number of actual\n-        // descendants (i.e. if multiple conflicts share a descendant, it will be counted multiple\n-        // times), but we just want to be conservative to avoid doing too much work.\n-        if (nConflictingCount > MAX_REPLACEMENT_CANDIDATES) {\n-            return strprintf(\"rejecting replacement %s; too many potential replacements (%d > %d)\\n\",\n-                             txid.ToString(),\n-                             nConflictingCount,\n-                             MAX_REPLACEMENT_CANDIDATES);\n-        }\n-    }\n     // Calculate the set of all transactions that would have to be evicted.\n     for (CTxMemPool::txiter it : iters_conflicting) {\n-        pool.CalculateDescendants(it, all_conflicts);\n-    }\n-    return std::nullopt;\n-}\n-\n-std::optional<std::string> HasNoNewUnconfirmed(const CTransaction& tx,\n-                                               const CTxMemPool& pool,\n-                                               const CTxMemPool::setEntries& iters_conflicting)\n-{\n-    AssertLockHeld(pool.cs);\n-    std::set<uint256> parents_of_conflicts;\n-    for (const auto& mi : iters_conflicting) {\n-        for (const CTxIn& txin : mi->GetTx().vin) {\n-            parents_of_conflicts.insert(txin.prevout.hash);\n+        // Exit early if we're going to fail (see below)\n+        if (all_conflicts.size() > MAX_REPLACEMENT_CANDIDATES) {",
      "path": "src/policy/rbf.cpp",
      "position": 1,
      "original_position": 45,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "3a42ba255a73e609ac37eee8288208fa43953779",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Note: this is sticking with the same rule#5 instead of number of effected clusters. It would be more ideal if it were number of clusters to allow for better usage of adversarial-ish batched CPFPs",
      "created_at": "2023-10-19T15:40:30Z",
      "updated_at": "2023-10-24T18:23:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1365753481",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1365753481"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 65,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1366095113",
      "pull_request_review_id": 1685916441,
      "id": 1366095113,
      "node_id": "PRRC_kwDOABII585RbPUJ",
      "diff_hunk": "@@ -876,75 +880,8 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n \n     ws.m_iters_conflicting = m_pool.GetIterSet(ws.m_conflicts);\n \n-    // Note that these modifications are only applicable to single transaction scenarios;\n-    // carve-outs and package RBF are disabled for multi-transaction evaluations.\n-    CTxMemPool::Limits maybe_rbf_limits = m_pool.m_limits;\n-\n-    // Calculate in-mempool ancestors, up to a limit.\n-    if (ws.m_conflicts.size() == 1) {\n-        // In general, when we receive an RBF transaction with mempool conflicts, we want to know whether we\n-        // would meet the chain limits after the conflicts have been removed. However, there isn't a practical\n-        // way to do this short of calculating the ancestor and descendant sets with an overlay cache of\n-        // changed mempool entries. Due to both implementation and runtime complexity concerns, this isn't\n-        // very realistic, thus we only ensure a limited set of transactions are RBF'able despite mempool\n-        // conflicts here. Importantly, we need to ensure that some transactions which were accepted using\n-        // the below carve-out are able to be RBF'ed, without impacting the security the carve-out provides\n-        // for off-chain contract systems (see link in the comment below).\n-        //\n-        // Specifically, the subset of RBF transactions which we allow despite chain limits are those which\n-        // conflict directly with exactly one other transaction (but may evict children of said transaction),\n-        // and which are not adding any new mempool dependencies. Note that the \"no new mempool dependencies\"\n-        // check is accomplished later, so we don't bother doing anything about it here, but if our\n-        // policy changes, we may need to move that check to here instead of removing it wholesale.\n-        //\n-        // Such transactions are clearly not merging any existing packages, so we are only concerned with\n-        // ensuring that (a) no package is growing past the package size (not count) limits and (b) we are\n-        // not allowing something to effectively use the (below) carve-out spot when it shouldn't be allowed\n-        // to.\n-        //\n-        // To check these we first check if we meet the RBF criteria, above, and increment the descendant\n-        // limits by the direct conflict and its descendants (as these are recalculated in\n-        // CalculateMempoolAncestors by assuming the new transaction being added is a new descendant, with no\n-        // removals, of each parent's existing dependent set). The ancestor count limits are unmodified (as\n-        // the ancestor limits should be the same for both our new transaction and any conflicts).\n-        // We don't bother incrementing m_limit_descendants by the full removal count as that limit never comes\n-        // into force here (as we're only adding a single transaction).\n-        assert(ws.m_iters_conflicting.size() == 1);\n-        CTxMemPool::txiter conflict = *ws.m_iters_conflicting.begin();\n-\n-        maybe_rbf_limits.descendant_count += 1;\n-        maybe_rbf_limits.descendant_size_vbytes += conflict->GetSizeWithDescendants();\n-    }\n-\n-    auto ancestors{m_pool.CalculateMemPoolAncestors(*entry, maybe_rbf_limits)};\n-    if (!ancestors) {\n-        // If CalculateMemPoolAncestors fails second time, we want the original error string.\n-        // Contracting/payment channels CPFP carve-out:\n-        // If the new transaction is relatively small (up to 40k weight)\n-        // and has at most one ancestor (ie ancestor limit of 2, including\n-        // the new transaction), allow it if its parent has exactly the\n-        // descendant limit descendants.\n-        //\n-        // This allows protocols which rely on distrusting counterparties\n-        // being able to broadcast descendants of an unconfirmed transaction\n-        // to be secure by simply only having two immediately-spendable\n-        // outputs - one for each counterparty. For more info on the uses for\n-        // this, see https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2018-November/016518.html\n-        CTxMemPool::Limits cpfp_carve_out_limits{\n-            .ancestor_count = 2,\n-            .ancestor_size_vbytes = maybe_rbf_limits.ancestor_size_vbytes,\n-            .descendant_count = maybe_rbf_limits.descendant_count + 1,\n-            .descendant_size_vbytes = maybe_rbf_limits.descendant_size_vbytes + EXTRA_DESCENDANT_TX_SIZE_LIMIT,\n-        };\n-        const auto error_message{util::ErrorString(ancestors).original};\n-        if (ws.m_vsize > EXTRA_DESCENDANT_TX_SIZE_LIMIT) {\n-            return state.Invalid(TxValidationResult::TX_MEMPOOL_POLICY, \"too-long-mempool-chain\", error_message);\n-        }\n-        ancestors = m_pool.CalculateMemPoolAncestors(*entry, cpfp_carve_out_limits);\n-        if (!ancestors) return state.Invalid(TxValidationResult::TX_MEMPOOL_POLICY, \"too-long-mempool-chain\", error_message);\n-    }\n-\n-    ws.m_ancestors = *ancestors;\n+    // Calculate in-mempool ancestors",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 84,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "c5d3c42da466feca9192d0e389654ba55caec5a6",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "the check two conditionals above:\r\n\r\n```\r\nif (!bypass_limits && ws.m_modified_fees < m_pool.m_min_relay_feerate.GetFee(ws.m_vsize))\r\n```\r\n\r\nThis is still needed for the same reason as before: transaction that is above minrelay, but would be in a chunk below minrelay. We could immediately evict below minrelay chunks post-re-linearization f.e. which would allow 0-fee parents then relax this maybe.\r\n\r\n",
      "created_at": "2023-10-19T20:48:36Z",
      "updated_at": "2023-10-24T18:23:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1366095113",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1366095113"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 896,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1366105725",
      "pull_request_review_id": 1685916441,
      "id": 1366105725,
      "node_id": "PRRC_kwDOABII585RbR59",
      "diff_hunk": "@@ -83,26 +86,104 @@ static std::vector<CTransactionRef> CreateOrderedCoins(FastRandomContext& det_ra\n     return ordered_coins;\n }\n \n+static void MemPoolAddTransactions(benchmark::Bench& bench)\n+{\n+    FastRandomContext det_rand{true};\n+    int childTxs = 90;\n+    if (bench.complexityN() > 1) {\n+        childTxs = static_cast<int>(bench.complexityN());\n+    }\n+    const auto testing_setup = MakeNoLogFileContext<const TestingSetup>(ChainType::MAIN);\n+    CTxMemPool& pool = *testing_setup.get()->m_node.mempool;\n+\n+    std::vector<CTransactionRef> transactions;\n+    // Create 1000 clusters of 100 transactions each",
      "path": "src/bench/mempool_stress.cpp",
      "position": 53,
      "original_position": 54,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "c5d3c42da466feca9192d0e389654ba55caec5a6",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "numbers in comments are off\r\n\r\nshower thought: Should we/can we bound the number of clusters in addition to total memory in TrimToSize? I can't think of a good way to do that that doesn't complicate things quite a bit, and perhaps practical mempool sizes make this moot. Just something to consider in case I missed something obvious.",
      "created_at": "2023-10-19T21:01:05Z",
      "updated_at": "2023-10-24T18:23:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1366105725",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1366105725"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 107,
      "original_line": 107,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1367425942",
      "pull_request_review_id": 1685916441,
      "id": 1367425942,
      "node_id": "PRRC_kwDOABII585RgUOW",
      "diff_hunk": "@@ -1135,29 +1457,67 @@ void CTxMemPool::TrimToSize(size_t sizelimit, std::vector<COutPoint>* pvNoSpends\n \n     unsigned nTxnRemoved = 0;\n     CFeeRate maxFeeRateRemoved(0);\n+\n+    // Use a heap to determine which chunks to evict, but only make the heap if\n+    // we're actually above the size limit.\n+    std::vector<Cluster::HeapEntry> heap_chunks;\n+    std::set<Cluster*> clusters_with_evictions;\n     while (!mapTx.empty() && DynamicMemoryUsage() > sizelimit) {\n-        indexed_transaction_set::index<descendant_score>::type::iterator it = mapTx.get<descendant_score>().begin();\n+        if (heap_chunks.empty()) {\n+            for (const auto & [id, cluster] : m_cluster_map) {\n+                if (!cluster->m_chunks.empty()) {\n+                    heap_chunks.emplace_back(cluster->m_chunks.end()-1, cluster.get());\n+                }\n+            }\n+        }\n+\n+        // Define comparison operator on our heap entries (using feerate of chunks).\n+        auto cmp = [](const Cluster::HeapEntry& a, const Cluster::HeapEntry& b) {\n+            // TODO: branch on size of fee to do this as 32-bit calculation\n+            // instead? etc\n+            return a.first->fee*b.first->size > b.first->fee*a.first->size;\n+        };\n+\n+        std::make_heap(heap_chunks.begin(), heap_chunks.end(), cmp);",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 1421,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "26e831d5f2c7db15e7a50f910ddf4e1737d226da",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "You probably didn't mean to call make_heap in the loop for 3N work each time. fwiw I don't see any performance difference between `push_heap`ing all the elements on vs one `make_heap`.\r\n\r\nonce this is changed, add+trimming seems to be faster than in master regardless of topology tested",
      "created_at": "2023-10-20T19:39:27Z",
      "updated_at": "2023-10-24T18:23:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1367425942",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1367425942"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1481,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1367430770",
      "pull_request_review_id": 1685916441,
      "id": 1367430770,
      "node_id": "PRRC_kwDOABII585RgVZy",
      "diff_hunk": "@@ -210,183 +194,84 @@ bool BlockAssembler::TestPackage(uint64_t packageSize, int64_t packageSigOpsCost\n \n // Perform transaction-level checks before adding to block:\n // - transaction finality (locktime)\n-bool BlockAssembler::TestPackageTransactions(const CTxMemPool::setEntries& package) const\n+bool BlockAssembler::TestPackageTransactions(const std::list<CTxMemPoolEntry::CTxMemPoolEntryRef>& txs) const\n {\n-    for (CTxMemPool::txiter it : package) {\n-        if (!IsFinalTx(it->GetTx(), nHeight, m_lock_time_cutoff)) {\n+    for (auto tx : txs) {\n+        if (!IsFinalTx(tx.get().GetTx(), nHeight, m_lock_time_cutoff)) {\n             return false;\n         }\n     }\n     return true;\n }\n \n-void BlockAssembler::AddToBlock(CTxMemPool::txiter iter)\n+void BlockAssembler::AddToBlock(const CTxMemPoolEntry& entry)\n {\n-    pblocktemplate->block.vtx.emplace_back(iter->GetSharedTx());\n-    pblocktemplate->vTxFees.push_back(iter->GetFee());\n-    pblocktemplate->vTxSigOpsCost.push_back(iter->GetSigOpCost());\n-    nBlockWeight += iter->GetTxWeight();\n+    pblocktemplate->block.vtx.emplace_back(entry.GetSharedTx());\n+    pblocktemplate->vTxFees.push_back(entry.GetFee());\n+    pblocktemplate->vTxSigOpsCost.push_back(entry.GetSigOpCost());\n+    nBlockWeight += entry.GetTxWeight();\n     ++nBlockTx;\n-    nBlockSigOpsCost += iter->GetSigOpCost();\n-    nFees += iter->GetFee();\n-    inBlock.insert(iter);\n+    nBlockSigOpsCost += entry.GetSigOpCost();\n+    nFees += entry.GetFee();\n \n     bool fPrintPriority = gArgs.GetBoolArg(\"-printpriority\", DEFAULT_PRINTPRIORITY);\n     if (fPrintPriority) {\n         LogPrintf(\"fee rate %s txid %s\\n\",\n-                  CFeeRate(iter->GetModifiedFee(), iter->GetTxSize()).ToString(),\n-                  iter->GetTx().GetHash().ToString());\n+                  CFeeRate(entry.GetModifiedFee(), entry.GetTxSize()).ToString(),\n+                  entry.GetTx().GetHash().ToString());\n     }\n }\n \n-/** Add descendants of given transactions to mapModifiedTx with ancestor\n- * state updated assuming given transactions are inBlock. Returns number\n- * of updated descendants. */\n-static int UpdatePackagesForAdded(const CTxMemPool& mempool,\n-                                  const CTxMemPool::setEntries& alreadyAdded,\n-                                  indexed_modified_transaction_set& mapModifiedTx) EXCLUSIVE_LOCKS_REQUIRED(mempool.cs)\n+void BlockAssembler::addChunks(const CTxMemPool& mempool)\n {\n     AssertLockHeld(mempool.cs);\n-\n-    int nDescendantsUpdated = 0;\n-    for (CTxMemPool::txiter it : alreadyAdded) {\n-        CTxMemPool::setEntries descendants;\n-        mempool.CalculateDescendants(it, descendants);\n-        // Insert all descendants (not yet in block) into the modified set\n-        for (CTxMemPool::txiter desc : descendants) {\n-            if (alreadyAdded.count(desc)) {\n-                continue;\n-            }\n-            ++nDescendantsUpdated;\n-            modtxiter mit = mapModifiedTx.find(desc);\n-            if (mit == mapModifiedTx.end()) {\n-                CTxMemPoolModifiedEntry modEntry(desc);\n-                mit = mapModifiedTx.insert(modEntry).first;\n-            }\n-            mapModifiedTx.modify(mit, update_for_parent_inclusion(it));\n-        }\n-    }\n-    return nDescendantsUpdated;\n-}\n-\n-void BlockAssembler::SortForBlock(const CTxMemPool::setEntries& package, std::vector<CTxMemPool::txiter>& sortedEntries)\n-{\n-    // Sort package by ancestor count\n-    // If a transaction A depends on transaction B, then A's ancestor count\n-    // must be greater than B's.  So this is sufficient to validly order the\n-    // transactions for block inclusion.\n-    sortedEntries.clear();\n-    sortedEntries.insert(sortedEntries.begin(), package.begin(), package.end());\n-    std::sort(sortedEntries.begin(), sortedEntries.end(), CompareTxIterByAncestorCount());\n-}\n-\n-// This transaction selection algorithm orders the mempool based\n-// on feerate of a transaction including all unconfirmed ancestors.\n-// Since we don't remove transactions from the mempool as we select them\n-// for block inclusion, we need an alternate method of updating the feerate\n-// of a transaction with its not-yet-selected ancestors as we go.\n-// This is accomplished by walking the in-mempool descendants of selected\n-// transactions and storing a temporary modified state in mapModifiedTxs.\n-// Each time through the loop, we compare the best transaction in\n-// mapModifiedTxs with the next transaction in the mempool to decide what\n-// transaction package to work on next.\n-void BlockAssembler::addPackageTxs(const CTxMemPool& mempool, int& nPackagesSelected, int& nDescendantsUpdated)\n-{\n-    AssertLockHeld(mempool.cs);\n-\n-    // mapModifiedTx will store sorted packages after they are modified\n-    // because some of their txs are already in the block\n-    indexed_modified_transaction_set mapModifiedTx;\n-    // Keep track of entries that failed inclusion, to avoid duplicate work\n-    CTxMemPool::setEntries failedTx;\n-\n-    CTxMemPool::indexed_transaction_set::index<ancestor_score>::type::iterator mi = mempool.mapTx.get<ancestor_score>().begin();\n-    CTxMemPool::txiter iter;\n-\n     // Limit the number of attempts to add transactions to the block when it is\n     // close to full; this is just a simple heuristic to finish quickly if the\n     // mempool has a lot of entries.\n     const int64_t MAX_CONSECUTIVE_FAILURES = 1000;\n     int64_t nConsecutiveFailed = 0;\n \n-    while (mi != mempool.mapTx.get<ancestor_score>().end() || !mapModifiedTx.empty()) {\n-        // First try to find a new transaction in mapTx to evaluate.\n-        //\n-        // Skip entries in mapTx that are already in a block or are present\n-        // in mapModifiedTx (which implies that the mapTx ancestor state is\n-        // stale due to ancestor inclusion in the block)\n-        // Also skip transactions that we've already failed to add. This can happen if\n-        // we consider a transaction in mapModifiedTx and it fails: we can then\n-        // potentially consider it again while walking mapTx.  It's currently\n-        // guaranteed to fail again, but as a belt-and-suspenders check we put it in\n-        // failedTx and avoid re-evaluation, since the re-evaluation would be using\n-        // cached size/sigops/fee values that are not actually correct.\n-        /** Return true if given transaction from mapTx has already been evaluated,\n-         * or if the transaction's cached data in mapTx is incorrect. */\n-        if (mi != mempool.mapTx.get<ancestor_score>().end()) {\n-            auto it = mempool.mapTx.project<0>(mi);\n-            assert(it != mempool.mapTx.end());\n-            if (mapModifiedTx.count(it) || inBlock.count(it) || failedTx.count(it)) {\n-                ++mi;\n-                continue;\n-            }\n-        }\n-\n-        // Now that mi is not stale, determine which transaction to evaluate:\n-        // the next entry from mapTx, or the best from mapModifiedTx?\n-        bool fUsingModified = false;\n-\n-        modtxscoreiter modit = mapModifiedTx.get<ancestor_score>().begin();\n-        if (mi == mempool.mapTx.get<ancestor_score>().end()) {\n-            // We're out of entries in mapTx; use the entry from mapModifiedTx\n-            iter = modit->iter;\n-            fUsingModified = true;\n-        } else {\n-            // Try to compare the mapTx entry to the mapModifiedTx entry\n-            iter = mempool.mapTx.project<0>(mi);\n-            if (modit != mapModifiedTx.get<ancestor_score>().end() &&\n-                    CompareTxMemPoolEntryByAncestorFee()(*modit, CTxMemPoolModifiedEntry(iter))) {\n-                // The best entry in mapModifiedTx has higher score\n-                // than the one from mapTx.\n-                // Switch which transaction (package) to consider\n-                iter = modit->iter;\n-                fUsingModified = true;\n-            } else {\n-                // Either no entry in mapModifiedTx, or it's worse than mapTx.\n-                // Increment mi for the next loop iteration.\n-                ++mi;\n-            }\n-        }\n-\n-        // We skip mapTx entries that are inBlock, and mapModifiedTx shouldn't\n-        // contain anything that is inBlock.\n-        assert(!inBlock.count(iter));\n-\n-        uint64_t packageSize = iter->GetSizeWithAncestors();\n-        CAmount packageFees = iter->GetModFeesWithAncestors();\n-        int64_t packageSigOpsCost = iter->GetSigOpCostWithAncestors();\n-        if (fUsingModified) {\n-            packageSize = modit->nSizeWithAncestors;\n-            packageFees = modit->nModFeesWithAncestors;\n-            packageSigOpsCost = modit->nSigOpCostWithAncestors;\n+    std::vector<Cluster::HeapEntry> heap_chunks;\n+    // Initialize the heap with the best entry from each cluster\n+    for (const auto & [id, cluster] : mempool.m_cluster_map) {\n+        if (!cluster->m_chunks.empty()) {\n+            heap_chunks.emplace_back(cluster->m_chunks.begin(), cluster.get());\n         }\n-\n-        if (packageFees < m_options.blockMinFeeRate.GetFee(packageSize)) {\n-            // Everything else we might consider has a lower fee rate\n+    }\n+    // Define comparison operator on our heap entries (using feerate of chunks).\n+    auto cmp = [](const Cluster::HeapEntry& a, const Cluster::HeapEntry& b) {\n+        // TODO: branch on size of fee to do this as 32-bit calculation\n+        // instead? etc\n+        return a.first->fee*b.first->size < b.first->fee*a.first->size;\n+    };\n+    // TODO: replace the heap with a priority queue\n+    std::make_heap(heap_chunks.begin(), heap_chunks.end(), cmp);",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 244,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "26e831d5f2c7db15e7a50f910ddf4e1737d226da",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "don't ask why but I'm getting significant performance improvement(>10%) just `push_heap`ing everything from scratch, and similarly with priority_queue",
      "created_at": "2023-10-20T19:46:25Z",
      "updated_at": "2023-10-24T18:23:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1367430770",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1367430770"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 248,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1370716238",
      "pull_request_review_id": 1695722724,
      "id": 1370716238,
      "node_id": "PRRC_kwDOABII585Rs3hO",
      "diff_hunk": "@@ -83,26 +86,104 @@ static std::vector<CTransactionRef> CreateOrderedCoins(FastRandomContext& det_ra\n     return ordered_coins;\n }\n \n+static void MemPoolAddTransactions(benchmark::Bench& bench)\n+{\n+    FastRandomContext det_rand{true};\n+    int childTxs = 90;\n+    if (bench.complexityN() > 1) {\n+        childTxs = static_cast<int>(bench.complexityN());\n+    }\n+    const auto testing_setup = MakeNoLogFileContext<const TestingSetup>(ChainType::MAIN);\n+    CTxMemPool& pool = *testing_setup.get()->m_node.mempool;\n+\n+    std::vector<CTransactionRef> transactions;\n+    // Create 1000 clusters of 100 transactions each",
      "path": "src/bench/mempool_stress.cpp",
      "position": 53,
      "original_position": 54,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "c5d3c42da466feca9192d0e389654ba55caec5a6",
      "in_reply_to_id": 1366105725,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "The immediate downside to a cap on number of clusters is that singleton, high-feerate transactions would not be accepted.  And I don't think we need to -- the only places where having more clusters makes us slower is in eviction and mining, and for both of those use cases we could improve performance (if we need to) by maintaining the relevant heap data structures (or something equivalent) as chunks are modified, rather than all at once. \r\n\r\nFor now in this branch I've created these from scratch each time, but if it turns out that performance is meaningfully impacted when the mempool is busy, then I can optimize this further by just using a bit more memory.",
      "created_at": "2023-10-24T19:24:39Z",
      "updated_at": "2023-10-24T19:24:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1370716238",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1370716238"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 107,
      "original_line": 107,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371708009",
      "pull_request_review_id": 1697257034,
      "id": 1371708009,
      "node_id": "PRRC_kwDOABII585Rwppp",
      "diff_hunk": "@@ -60,57 +59,26 @@ std::optional<std::string> GetEntriesForConflicts(const CTransaction& tx,\n {\n     AssertLockHeld(pool.cs);\n     const uint256 txid = tx.GetHash();\n-    uint64_t nConflictingCount = 0;\n-    for (const auto& mi : iters_conflicting) {\n-        nConflictingCount += mi->GetCountWithDescendants();\n-        // Rule #5: don't consider replacing more than MAX_REPLACEMENT_CANDIDATES\n-        // entries from the mempool. This potentially overestimates the number of actual\n-        // descendants (i.e. if multiple conflicts share a descendant, it will be counted multiple\n-        // times), but we just want to be conservative to avoid doing too much work.\n-        if (nConflictingCount > MAX_REPLACEMENT_CANDIDATES) {\n-            return strprintf(\"rejecting replacement %s; too many potential replacements (%d > %d)\\n\",\n-                             txid.ToString(),\n-                             nConflictingCount,\n-                             MAX_REPLACEMENT_CANDIDATES);\n-        }\n-    }\n     // Calculate the set of all transactions that would have to be evicted.\n     for (CTxMemPool::txiter it : iters_conflicting) {\n-        pool.CalculateDescendants(it, all_conflicts);\n-    }\n-    return std::nullopt;\n-}\n-\n-std::optional<std::string> HasNoNewUnconfirmed(const CTransaction& tx,\n-                                               const CTxMemPool& pool,\n-                                               const CTxMemPool::setEntries& iters_conflicting)\n-{\n-    AssertLockHeld(pool.cs);\n-    std::set<uint256> parents_of_conflicts;\n-    for (const auto& mi : iters_conflicting) {\n-        for (const CTxIn& txin : mi->GetTx().vin) {\n-            parents_of_conflicts.insert(txin.prevout.hash);\n+        // Exit early if we're going to fail (see below)\n+        if (all_conflicts.size() > MAX_REPLACEMENT_CANDIDATES) {",
      "path": "src/policy/rbf.cpp",
      "position": 1,
      "original_position": 45,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "3a42ba255a73e609ac37eee8288208fa43953779",
      "in_reply_to_id": 1365753481,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "There is room to relax this rule some, so if this is important we can do so. I think the requirement is a bound on the number of clusters that would have to be re-sorted in order to accept the new transaction.  We can approximate that as the number of clusters that would be non-empty as a result of removing all the conflicting transactions from the mempool, and only process replacements for which that is below some target.  \r\n\r\nThat would be a more complex logic though, so before implementing it I wanted to have some sense of whether we need to.  Has the historical 100-transaction-conflict limit been problematic for use cases in the past?  Note also that in the new code, we are calculating the number of conflicts exactly (the old code used an approximation, which could be gamed by an adversary).",
      "created_at": "2023-10-25T12:48:09Z",
      "updated_at": "2023-10-25T12:48:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1371708009",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371708009"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 65,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371803601",
      "pull_request_review_id": 1697415470,
      "id": 1371803601,
      "node_id": "PRRC_kwDOABII585RxA_R",
      "diff_hunk": "@@ -60,57 +59,26 @@ std::optional<std::string> GetEntriesForConflicts(const CTransaction& tx,\n {\n     AssertLockHeld(pool.cs);\n     const uint256 txid = tx.GetHash();\n-    uint64_t nConflictingCount = 0;\n-    for (const auto& mi : iters_conflicting) {\n-        nConflictingCount += mi->GetCountWithDescendants();\n-        // Rule #5: don't consider replacing more than MAX_REPLACEMENT_CANDIDATES\n-        // entries from the mempool. This potentially overestimates the number of actual\n-        // descendants (i.e. if multiple conflicts share a descendant, it will be counted multiple\n-        // times), but we just want to be conservative to avoid doing too much work.\n-        if (nConflictingCount > MAX_REPLACEMENT_CANDIDATES) {\n-            return strprintf(\"rejecting replacement %s; too many potential replacements (%d > %d)\\n\",\n-                             txid.ToString(),\n-                             nConflictingCount,\n-                             MAX_REPLACEMENT_CANDIDATES);\n-        }\n-    }\n     // Calculate the set of all transactions that would have to be evicted.\n     for (CTxMemPool::txiter it : iters_conflicting) {\n-        pool.CalculateDescendants(it, all_conflicts);\n-    }\n-    return std::nullopt;\n-}\n-\n-std::optional<std::string> HasNoNewUnconfirmed(const CTransaction& tx,\n-                                               const CTxMemPool& pool,\n-                                               const CTxMemPool::setEntries& iters_conflicting)\n-{\n-    AssertLockHeld(pool.cs);\n-    std::set<uint256> parents_of_conflicts;\n-    for (const auto& mi : iters_conflicting) {\n-        for (const CTxIn& txin : mi->GetTx().vin) {\n-            parents_of_conflicts.insert(txin.prevout.hash);\n+        // Exit early if we're going to fail (see below)\n+        if (all_conflicts.size() > MAX_REPLACEMENT_CANDIDATES) {",
      "path": "src/policy/rbf.cpp",
      "position": 1,
      "original_position": 45,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "3a42ba255a73e609ac37eee8288208fa43953779",
      "in_reply_to_id": 1365753481,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "~~Ah! I wrote a huge response to this, then looked up our previous discussions, and realized I didn't actually read the code: https://github.com/bitcoin/bitcoin/issues/27677#issuecomment-1554708843~~\r\n\r\n~~IIUC now, this is only counting *direct* conflicts, and not the descendants that are booted.~~\r\n\r\n~~I think that's fine.~~\r\n\r\nActually no, the existing code comments were just misleading, looks like the issue still exists, see: https://github.com/bitcoin/bitcoin/issues/27677#issuecomment-1554708843",
      "created_at": "2023-10-25T13:52:53Z",
      "updated_at": "2023-10-25T13:59:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1371803601",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371803601"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 65,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371813655",
      "pull_request_review_id": 1697431678,
      "id": 1371813655,
      "node_id": "PRRC_kwDOABII585RxDcX",
      "diff_hunk": "@@ -60,57 +59,26 @@ std::optional<std::string> GetEntriesForConflicts(const CTransaction& tx,\n {\n     AssertLockHeld(pool.cs);\n     const uint256 txid = tx.GetHash();\n-    uint64_t nConflictingCount = 0;\n-    for (const auto& mi : iters_conflicting) {\n-        nConflictingCount += mi->GetCountWithDescendants();\n-        // Rule #5: don't consider replacing more than MAX_REPLACEMENT_CANDIDATES\n-        // entries from the mempool. This potentially overestimates the number of actual\n-        // descendants (i.e. if multiple conflicts share a descendant, it will be counted multiple\n-        // times), but we just want to be conservative to avoid doing too much work.\n-        if (nConflictingCount > MAX_REPLACEMENT_CANDIDATES) {\n-            return strprintf(\"rejecting replacement %s; too many potential replacements (%d > %d)\\n\",\n-                             txid.ToString(),\n-                             nConflictingCount,\n-                             MAX_REPLACEMENT_CANDIDATES);\n-        }\n-    }\n     // Calculate the set of all transactions that would have to be evicted.\n     for (CTxMemPool::txiter it : iters_conflicting) {\n-        pool.CalculateDescendants(it, all_conflicts);\n-    }\n-    return std::nullopt;\n-}\n-\n-std::optional<std::string> HasNoNewUnconfirmed(const CTransaction& tx,\n-                                               const CTxMemPool& pool,\n-                                               const CTxMemPool::setEntries& iters_conflicting)\n-{\n-    AssertLockHeld(pool.cs);\n-    std::set<uint256> parents_of_conflicts;\n-    for (const auto& mi : iters_conflicting) {\n-        for (const CTxIn& txin : mi->GetTx().vin) {\n-            parents_of_conflicts.insert(txin.prevout.hash);\n+        // Exit early if we're going to fail (see below)\n+        if (all_conflicts.size() > MAX_REPLACEMENT_CANDIDATES) {",
      "path": "src/policy/rbf.cpp",
      "position": 1,
      "original_position": 45,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "3a42ba255a73e609ac37eee8288208fa43953779",
      "in_reply_to_id": 1365753481,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Ah yes, in the new code I'm only counting direct conflicts right now, because every descendant of a direct conflict must be in the same cluster as that conflict.  So this is already a relaxation of the existing rule.",
      "created_at": "2023-10-25T13:59:21Z",
      "updated_at": "2023-10-25T13:59:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1371813655",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371813655"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 65,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371819952",
      "pull_request_review_id": 1697442366,
      "id": 1371819952,
      "node_id": "PRRC_kwDOABII585RxE-w",
      "diff_hunk": "@@ -60,57 +59,26 @@ std::optional<std::string> GetEntriesForConflicts(const CTransaction& tx,\n {\n     AssertLockHeld(pool.cs);\n     const uint256 txid = tx.GetHash();\n-    uint64_t nConflictingCount = 0;\n-    for (const auto& mi : iters_conflicting) {\n-        nConflictingCount += mi->GetCountWithDescendants();\n-        // Rule #5: don't consider replacing more than MAX_REPLACEMENT_CANDIDATES\n-        // entries from the mempool. This potentially overestimates the number of actual\n-        // descendants (i.e. if multiple conflicts share a descendant, it will be counted multiple\n-        // times), but we just want to be conservative to avoid doing too much work.\n-        if (nConflictingCount > MAX_REPLACEMENT_CANDIDATES) {\n-            return strprintf(\"rejecting replacement %s; too many potential replacements (%d > %d)\\n\",\n-                             txid.ToString(),\n-                             nConflictingCount,\n-                             MAX_REPLACEMENT_CANDIDATES);\n-        }\n-    }\n     // Calculate the set of all transactions that would have to be evicted.\n     for (CTxMemPool::txiter it : iters_conflicting) {\n-        pool.CalculateDescendants(it, all_conflicts);\n-    }\n-    return std::nullopt;\n-}\n-\n-std::optional<std::string> HasNoNewUnconfirmed(const CTransaction& tx,\n-                                               const CTxMemPool& pool,\n-                                               const CTxMemPool::setEntries& iters_conflicting)\n-{\n-    AssertLockHeld(pool.cs);\n-    std::set<uint256> parents_of_conflicts;\n-    for (const auto& mi : iters_conflicting) {\n-        for (const CTxIn& txin : mi->GetTx().vin) {\n-            parents_of_conflicts.insert(txin.prevout.hash);\n+        // Exit early if we're going to fail (see below)\n+        if (all_conflicts.size() > MAX_REPLACEMENT_CANDIDATES) {",
      "path": "src/policy/rbf.cpp",
      "position": 1,
      "original_position": 45,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "3a42ba255a73e609ac37eee8288208fa43953779",
      "in_reply_to_id": 1365753481,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> I think the requirement is a bound on the number of clusters that would have to be re-sorted in order to accept the new transaction.\r\n\r\nAs an alternative, we drop the replacement limit to like, 10 or something, and then *only* count the *direct* conflicts, not the direct conflicts and all the descendants?",
      "created_at": "2023-10-25T14:01:44Z",
      "updated_at": "2023-10-25T14:01:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1371819952",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371819952"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 65,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1392325037",
      "pull_request_review_id": 1729366575,
      "id": 1392325037,
      "node_id": "PRRC_kwDOABII585S_TGt",
      "diff_hunk": "@@ -118,5 +199,63 @@ static void MempoolCheck(benchmark::Bench& bench)\n     });\n }\n \n+static void MemPoolMiningScoreCheck(benchmark::Bench& bench)\n+{\n+    // Default test: each cluster is of size 20, and we'll try to RBF with a\n+    // transaction that merges 10 clusters, evicting 10 transactions from each.\n+\n+    FastRandomContext det_rand{true};\n+    int childTxs = 10;\n+    if (bench.complexityN() > 1) {\n+        childTxs = static_cast<int>(bench.complexityN());\n+    }\n+    const auto testing_setup = MakeNoLogFileContext<const TestingSetup>(ChainType::MAIN);\n+    CTxMemPool& pool = *testing_setup.get()->m_node.mempool;\n+\n+    LOCK2(cs_main, pool.cs);\n+\n+    std::vector<CTransactionRef> parent_txs_for_rbf;\n+    std::set<uint256> child_txs_to_conflict_with;\n+\n+    for (int i=0; i<10; i++) {\n+        std::vector<CTransactionRef> transactions = CreateCoinCluster(det_rand, childTxs, /*min_ancestors=*/1);\n+        parent_txs_for_rbf.push_back(transactions[0]);\n+        // Conflict with everything after the first 10 transactions\n+        for (size_t j=10; j<transactions.size(); ++j) {\n+            child_txs_to_conflict_with.insert(transactions[j]->GetHash());\n+        }\n+\n+        // Add all transactions to the mempool.\n+        for (auto& tx : transactions) {\n+            AddTx(tx, pool, det_rand);\n+        }\n+    }\n+\n+    // Construct a transaction that spends from each of the parent transactions\n+    // selected.\n+    CMutableTransaction tx = CMutableTransaction();\n+    tx.vin.resize(10);\n+    for (size_t i=0; i<parent_txs_for_rbf.size(); ++i) {\n+        tx.vin[i].prevout = COutPoint(parent_txs_for_rbf[i]->GetHash(), 0);\n+        tx.vin[i].scriptSig = CScript() << i;\n+    }\n+    tx.vout.resize(1);\n+    for (auto& out : tx.vout) {\n+        out.scriptPubKey = CScript() << CScriptNum(det_rand.randrange(19)+1) << OP_EQUAL;\n+        out.nValue = 10 * COIN;\n+    }\n+\n+    CTxMemPool::setEntries all_conflicts = pool.GetIterSet(child_txs_to_conflict_with);\n+    CTxMemPoolEntry entry(MakeTransactionRef(tx), det_rand.randrange(10000)+1000, 0, 1, 0, false, 4, LockPoints());\n+\n+    bench.run([&]() NO_THREAD_SAFETY_ANALYSIS {\n+        CTxMemPool::Limits limits(pool.m_limits);\n+        pool.CalculateMiningScoreOfReplacementTx(entry, det_rand.randrange(30000)+1000, all_conflicts, limits);\n+    });\n+}\n+\n+BENCHMARK(MemPoolAncestorsDescendants, benchmark::PriorityLevel::HIGH);\n+BENCHMARK(MemPoolAddTransactions, benchmark::PriorityLevel::HIGH);",
      "path": "src/bench/mempool_stress.cpp",
      "position": 213,
      "original_position": 210,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "dd6684ab665bc8ae76b76fdd2e578fc77d562a52",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "dd6684ab665bc8ae76b76fdd2e578fc77d562a52: While you're touching this, can you rename `MempoolCheck` to `MemPoolCheck`, `MempoolEviction` to `MemPoolEviction` and `ComplexMemPool` to `MempoolComplex`? That makes `-filter=MemPool.*` work\r\n\r\nAs a workaround, `-filter=.*Mem.*` does work.",
      "created_at": "2023-11-14T10:05:29Z",
      "updated_at": "2023-11-14T10:29:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1392325037",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1392325037"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 269,
      "original_line": 269,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1392364899",
      "pull_request_review_id": 1729419761,
      "id": 1392364899,
      "node_id": "PRRC_kwDOABII585S_c1j",
      "diff_hunk": "@@ -574,6 +574,8 @@ void SetupServerArgs(ArgsManager& argsman)\n     argsman.AddArg(\"-limitancestorsize=<n>\", strprintf(\"Do not accept transactions whose size with all in-mempool ancestors exceeds <n> kilobytes (default: %u)\", DEFAULT_ANCESTOR_SIZE_LIMIT_KVB), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n     argsman.AddArg(\"-limitdescendantcount=<n>\", strprintf(\"Do not accept transactions if any ancestor would have <n> or more in-mempool descendants (default: %u)\", DEFAULT_DESCENDANT_LIMIT), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n     argsman.AddArg(\"-limitdescendantsize=<n>\", strprintf(\"Do not accept transactions if any ancestor would have more than <n> kilobytes of in-mempool descendants (default: %u).\", DEFAULT_DESCENDANT_SIZE_LIMIT_KVB), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n+    argsman.AddArg(\"-limitclustercount=<n>\", strprintf(\"Do not accept transactions connected to <n> or more existing in-mempool transactions (default: %u)\", DEFAULT_CLUSTER_LIMIT), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);",
      "path": "src/init.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "7fdcccd1338655328c28ff949d50442ace931a5e",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I made an attempt at dropping `-limitdescendantsize` and friends: https://github.com/Sjors/bitcoin/commits/2022/11/cluster-mempool\r\n\r\nI (naively) replaced ancestor and descendent limits in coin selection with the new cluster limit. At least the tests pass *.\r\n\r\nWhen we drop these settings anyone who uses them will get an error when starting the node. That's probably a good thing, since they should read about this change.\r\n\r\n`* =` well, wallet_basic.py fails with:\r\n\r\n```\r\nInternal bug detected: Shared UTXOs among selection results\r\nwallet/coinselection.h:340 (InsertInputs)\r\n```",
      "created_at": "2023-11-14T10:34:19Z",
      "updated_at": "2023-11-14T12:30:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1392364899",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1392364899"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 644,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1392567718",
      "pull_request_review_id": 1729707068,
      "id": 1392567718,
      "node_id": "PRRC_kwDOABII585TAOWm",
      "diff_hunk": "@@ -1245,3 +1536,169 @@ std::vector<CTxMemPool::txiter> CTxMemPool::GatherClusters(const std::vector<uin\n     }\n     return clustered_txs;\n }\n+\n+void Cluster::AddTransaction(const CTxMemPoolEntry& entry, bool sort)\n+{\n+    m_chunks.emplace_back(entry.GetModifiedFee(), entry.GetTxSize());\n+    m_chunks.back().txs.emplace_back(entry);\n+    entry.m_cluster = this;\n+    ++m_tx_count;\n+    if (sort) Sort();\n+    return;\n+}\n+\n+void Cluster::RemoveTransaction(const CTxMemPoolEntry& entry)\n+{\n+    m_chunks[entry.m_loc.first].txs.erase(entry.m_loc.second);\n+\n+    // Chunk (or cluster) may now be empty, but this will get cleaned up",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 407,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "54f39ca8f101483f5f82707689ca49431d4091e5",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "54f39ca8f101483f5f82707689ca49431d4091e5: what if the deleted transaction makes it so there are now two clusters? This is also safe to ignore? ",
      "created_at": "2023-11-14T13:15:36Z",
      "updated_at": "2023-11-14T14:27:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1392567718",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1392567718"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1857,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1392640692",
      "pull_request_review_id": 1729707068,
      "id": 1392640692,
      "node_id": "PRRC_kwDOABII585TAgK0",
      "diff_hunk": "@@ -1245,3 +1536,169 @@ std::vector<CTxMemPool::txiter> CTxMemPool::GatherClusters(const std::vector<uin\n     }\n     return clustered_txs;\n }\n+\n+void Cluster::AddTransaction(const CTxMemPoolEntry& entry, bool sort)\n+{\n+    m_chunks.emplace_back(entry.GetModifiedFee(), entry.GetTxSize());\n+    m_chunks.back().txs.emplace_back(entry);\n+    entry.m_cluster = this;\n+    ++m_tx_count;\n+    if (sort) Sort();\n+    return;\n+}\n+\n+void Cluster::RemoveTransaction(const CTxMemPoolEntry& entry)\n+{\n+    m_chunks[entry.m_loc.first].txs.erase(entry.m_loc.second);\n+\n+    // Chunk (or cluster) may now be empty, but this will get cleaned up\n+    // when the cluster is re-sorted (or when the cluster is deleted) Note:\n+    // if we cleaned up empty chunks here, then this would break the\n+    // locations of other entries in the cluster. Since we would like to be\n+    // able to do multiple removals in a row and then clean up the sort, we\n+    // can't clean up empty chunks here.\n+    --m_tx_count;\n+    return;\n+}\n+\n+void Cluster::RechunkFromLinearization(std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef>& txs, bool reassign_locations)\n+{\n+    m_chunks.clear();\n+\n+    for (auto txentry : txs) {\n+        m_chunks.emplace_back(txentry.get().GetModifiedFee(), txentry.get().GetTxSize());\n+        m_chunks.back().txs.emplace_back(txentry);",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 423,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "54f39ca8f101483f5f82707689ca49431d4091e5",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "54f39ca8f101483f5f82707689ca49431d4091e5: So you're creating a chunk for each new transaction and then erasing it if the fee rate goes down. Why not the other way around? ",
      "created_at": "2023-11-14T14:09:48Z",
      "updated_at": "2023-11-14T14:27:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1392640692",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1392640692"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1875,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1392646700",
      "pull_request_review_id": 1729707068,
      "id": 1392646700,
      "node_id": "PRRC_kwDOABII585TAhos",
      "diff_hunk": "@@ -1245,3 +1536,169 @@ std::vector<CTxMemPool::txiter> CTxMemPool::GatherClusters(const std::vector<uin\n     }\n     return clustered_txs;\n }\n+\n+void Cluster::AddTransaction(const CTxMemPoolEntry& entry, bool sort)\n+{\n+    m_chunks.emplace_back(entry.GetModifiedFee(), entry.GetTxSize());\n+    m_chunks.back().txs.emplace_back(entry);\n+    entry.m_cluster = this;\n+    ++m_tx_count;\n+    if (sort) Sort();\n+    return;\n+}\n+\n+void Cluster::RemoveTransaction(const CTxMemPoolEntry& entry)\n+{\n+    m_chunks[entry.m_loc.first].txs.erase(entry.m_loc.second);\n+\n+    // Chunk (or cluster) may now be empty, but this will get cleaned up\n+    // when the cluster is re-sorted (or when the cluster is deleted) Note:\n+    // if we cleaned up empty chunks here, then this would break the\n+    // locations of other entries in the cluster. Since we would like to be\n+    // able to do multiple removals in a row and then clean up the sort, we\n+    // can't clean up empty chunks here.\n+    --m_tx_count;\n+    return;\n+}\n+\n+void Cluster::RechunkFromLinearization(std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef>& txs, bool reassign_locations)\n+{\n+    m_chunks.clear();\n+\n+    for (auto txentry : txs) {\n+        m_chunks.emplace_back(txentry.get().GetModifiedFee(), txentry.get().GetTxSize());\n+        m_chunks.back().txs.emplace_back(txentry);\n+        while (m_chunks.size() >= 2) {\n+            auto cur_iter = std::prev(m_chunks.end());\n+            auto prev_iter = std::prev(cur_iter);\n+            double feerate_prev = prev_iter->fee*cur_iter->size;",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 427,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "54f39ca8f101483f5f82707689ca49431d4091e5",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "54f39ca8f101483f5f82707689ca49431d4091e5: shouldn't this be `fee / size`? Or do you mean to use an inverse fee rate for performance (`inv_fee_rate`)?",
      "created_at": "2023-11-14T14:13:05Z",
      "updated_at": "2023-11-14T14:27:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1392646700",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1392646700"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1877,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399053865",
      "pull_request_review_id": 1739566572,
      "id": 1399053865,
      "node_id": "PRRC_kwDOABII585TY94p",
      "diff_hunk": "@@ -632,6 +634,22 @@ class CTxMemPool\n      */\n     void UpdateTransactionsFromBlock(const std::vector<uint256>& vHashesToUpdate) EXCLUSIVE_LOCKS_REQUIRED(cs, cs_main) LOCKS_EXCLUDED(m_epoch);\n \n+    /**\n+     * Calculate whether cluster size limits would be exceeded if a new tx were\n+     * added to the mempool (assuming no conflicts).",
      "path": "src/txmempool.h",
      "position": 1,
      "original_position": 15,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "065e18fff30a91c94c47d5c2fc65b13ddc38aa47",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "065e18fff30a91c94c47d5c2fc65b13ddc38aa47: do you plan to relax this assumption so that a transaction in (a) full cluster(s) can be replaced?\r\n\r\n_Update_: `AcceptSingleTransaction` skips `ClusterSizeChecks` if there's a replacement, in which case `ReplacementChecks` checks the new cluster size. So this is not an issue.",
      "created_at": "2023-11-20T11:22:37Z",
      "updated_at": "2023-11-20T14:32:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399053865",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399053865"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 427,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399137900",
      "pull_request_review_id": 1739706549,
      "id": 1399137900,
      "node_id": "PRRC_kwDOABII585TZSZs",
      "diff_hunk": "@@ -553,6 +660,39 @@ static RPCHelpMan getmempooldescendants()\n     };\n }\n \n+static RPCHelpMan getmempoolcluster()\n+{\n+    return RPCHelpMan{\"getmempoolcluster\",\n+        \"\\nReturns mempool data for given cluster\\n\",\n+        {\n+            {\"id\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The cluster id (must be in mempool)\"},",
      "path": "src/rpc/mempool.cpp",
      "position": 1,
      "original_position": 192,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1: it would be more practical to (also) have a lookup by transaction hash",
      "created_at": "2023-11-20T12:32:16Z",
      "updated_at": "2023-11-20T12:32:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399137900",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399137900"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 659,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399160874",
      "pull_request_review_id": 1739741540,
      "id": 1399160874,
      "node_id": "PRRC_kwDOABII585TZYAq",
      "diff_hunk": "@@ -1245,3 +1536,169 @@ std::vector<CTxMemPool::txiter> CTxMemPool::GatherClusters(const std::vector<uin\n     }\n     return clustered_txs;\n }\n+\n+void Cluster::AddTransaction(const CTxMemPoolEntry& entry, bool sort)\n+{\n+    m_chunks.emplace_back(entry.GetModifiedFee(), entry.GetTxSize());\n+    m_chunks.back().txs.emplace_back(entry);\n+    entry.m_cluster = this;\n+    ++m_tx_count;\n+    if (sort) Sort();\n+    return;\n+}\n+\n+void Cluster::RemoveTransaction(const CTxMemPoolEntry& entry)\n+{\n+    m_chunks[entry.m_loc.first].txs.erase(entry.m_loc.second);\n+\n+    // Chunk (or cluster) may now be empty, but this will get cleaned up\n+    // when the cluster is re-sorted (or when the cluster is deleted) Note:\n+    // if we cleaned up empty chunks here, then this would break the\n+    // locations of other entries in the cluster. Since we would like to be\n+    // able to do multiple removals in a row and then clean up the sort, we\n+    // can't clean up empty chunks here.\n+    --m_tx_count;\n+    return;\n+}\n+\n+void Cluster::RechunkFromLinearization(std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef>& txs, bool reassign_locations)\n+{\n+    m_chunks.clear();\n+\n+    for (auto txentry : txs) {\n+        m_chunks.emplace_back(txentry.get().GetModifiedFee(), txentry.get().GetTxSize());\n+        m_chunks.back().txs.emplace_back(txentry);\n+        while (m_chunks.size() >= 2) {\n+            auto cur_iter = std::prev(m_chunks.end());\n+            auto prev_iter = std::prev(cur_iter);\n+            double feerate_prev = prev_iter->fee*cur_iter->size;",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 427,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "54f39ca8f101483f5f82707689ca49431d4091e5",
      "in_reply_to_id": 1392646700,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "To check `a/b > c/d` you can instead check `a*d > c*b`, which avoids divisions (which are an order of magnitude slower than multiplication).",
      "created_at": "2023-11-20T12:53:42Z",
      "updated_at": "2023-11-20T12:53:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399160874",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399160874"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1877,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399161977",
      "pull_request_review_id": 1739743147,
      "id": 1399161977,
      "node_id": "PRRC_kwDOABII585TZYR5",
      "diff_hunk": "@@ -632,6 +634,22 @@ class CTxMemPool\n      */\n     void UpdateTransactionsFromBlock(const std::vector<uint256>& vHashesToUpdate) EXCLUSIVE_LOCKS_REQUIRED(cs, cs_main) LOCKS_EXCLUDED(m_epoch);\n \n+    /**\n+     * Calculate whether cluster size limits would be exceeded if a new tx were\n+     * added to the mempool (assuming no conflicts).",
      "path": "src/txmempool.h",
      "position": 1,
      "original_position": 15,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "065e18fff30a91c94c47d5c2fc65b13ddc38aa47",
      "in_reply_to_id": 1399053865,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I believe that's an idea we've toyed with (calling it \"sibling eviction\"), but so far it isn't clear how to align that with DoS prevention.",
      "created_at": "2023-11-20T12:54:40Z",
      "updated_at": "2023-11-20T12:54:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399161977",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399161977"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 427,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399223399",
      "pull_request_review_id": 1739853534,
      "id": 1399223399,
      "node_id": "PRRC_kwDOABII585TZnRn",
      "diff_hunk": "@@ -249,34 +249,81 @@ static RPCHelpMan testmempoolaccept()\n     };\n }\n \n+static std::vector<RPCResult> ClusterDescription()\n+{\n+    return {\n+        RPCResult{RPCResult::Type::NUM, \"vsize\", \"virtual transaction size as defined in BIP 141. This is different from actual serialized size for witness transactions as witness data is discounted.\"},\n+        RPCResult{RPCResult::Type::NUM, \"txcount\", \"number of transactions (including this one)\"},\n+        RPCResult{RPCResult::Type::NUM, \"clusterid\", \"id of the cluster containing this tx\"},\n+        RPCResult{RPCResult::Type::ARR, \"chunks\", \"the cluster's chunks\",\n+            {RPCResult{RPCResult::Type::OBJ, \"chunkentry\", \"\",\n+                {\n+                    RPCResult{RPCResult::Type::STR_AMOUNT, \"fee\", \"fee of this chunk\"},\n+                    RPCResult{RPCResult::Type::NUM, \"vsize\", \"virtual size of this chunk\"},\n+                    RPCResult{RPCResult::Type::NUM, \"feerate\", \"fee rate in \" + CURRENCY_UNIT + \"/kvB\"},\n+                    RPCResult{RPCResult::Type::ARR, \"txids\", \"txids in this chunk in sorted order\",\n+                        {RPCResult{RPCResult::Type::STR_HEX, \"transactionid\", \"the transaction id\"}}}\n+                }}\n+            }\n+        }\n+    };\n+}\n+\n static std::vector<RPCResult> MempoolEntryDescription()\n {\n     return {\n         RPCResult{RPCResult::Type::NUM, \"vsize\", \"virtual transaction size as defined in BIP 141. This is different from actual serialized size for witness transactions as witness data is discounted.\"},\n-        RPCResult{RPCResult::Type::NUM, \"weight\", \"transaction weight as defined in BIP 141.\"},\n-        RPCResult{RPCResult::Type::NUM_TIME, \"time\", \"local time transaction entered pool in seconds since 1 Jan 1970 GMT\"},\n-        RPCResult{RPCResult::Type::NUM, \"height\", \"block height when transaction entered pool\"},\n-        RPCResult{RPCResult::Type::NUM, \"descendantcount\", \"number of in-mempool descendant transactions (including this one)\"},\n-        RPCResult{RPCResult::Type::NUM, \"descendantsize\", \"virtual transaction size of in-mempool descendants (including this one)\"},\n-        RPCResult{RPCResult::Type::NUM, \"ancestorcount\", \"number of in-mempool ancestor transactions (including this one)\"},\n-        RPCResult{RPCResult::Type::NUM, \"ancestorsize\", \"virtual transaction size of in-mempool ancestors (including this one)\"},\n-        RPCResult{RPCResult::Type::STR_HEX, \"wtxid\", \"hash of serialized transaction, including witness data\"},\n-        RPCResult{RPCResult::Type::OBJ, \"fees\", \"\",\n-            {\n-                RPCResult{RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee, denominated in \" + CURRENCY_UNIT},\n-                RPCResult{RPCResult::Type::STR_AMOUNT, \"modified\", \"transaction fee with fee deltas used for mining priority, denominated in \" + CURRENCY_UNIT},\n-                RPCResult{RPCResult::Type::STR_AMOUNT, \"ancestor\", \"transaction fees of in-mempool ancestors (including this one) with fee deltas used for mining priority, denominated in \" + CURRENCY_UNIT},\n-                RPCResult{RPCResult::Type::STR_AMOUNT, \"descendant\", \"transaction fees of in-mempool descendants (including this one) with fee deltas used for mining priority, denominated in \" + CURRENCY_UNIT},\n-            }},\n-        RPCResult{RPCResult::Type::ARR, \"depends\", \"unconfirmed transactions used as inputs for this transaction\",\n-            {RPCResult{RPCResult::Type::STR_HEX, \"transactionid\", \"parent transaction id\"}}},\n-        RPCResult{RPCResult::Type::ARR, \"spentby\", \"unconfirmed transactions spending outputs from this transaction\",\n-            {RPCResult{RPCResult::Type::STR_HEX, \"transactionid\", \"child transaction id\"}}},\n-        RPCResult{RPCResult::Type::BOOL, \"bip125-replaceable\", \"Whether this transaction signals BIP125 replaceability or has an unconfirmed ancestor signaling BIP125 replaceability.\\n\"},\n-        RPCResult{RPCResult::Type::BOOL, \"unbroadcast\", \"Whether this transaction is currently unbroadcast (initial broadcast not yet acknowledged by any peers)\"},\n+            RPCResult{RPCResult::Type::NUM, \"weight\", \"transaction weight as defined in BIP 141.\"},\n+            RPCResult{RPCResult::Type::NUM_TIME, \"time\", \"local time transaction entered pool in seconds since 1 Jan 1970 GMT\"},\n+            RPCResult{RPCResult::Type::NUM, \"height\", \"block height when transaction entered pool\"},\n+            RPCResult{RPCResult::Type::NUM, \"descendantcount\", \"number of in-mempool descendant transactions (including this one)\"},\n+            RPCResult{RPCResult::Type::NUM, \"descendantsize\", \"virtual transaction size of in-mempool descendants (including this one)\"},\n+            RPCResult{RPCResult::Type::NUM, \"ancestorcount\", \"number of in-mempool ancestor transactions (including this one)\"},\n+            RPCResult{RPCResult::Type::NUM, \"ancestorsize\", \"virtual transaction size of in-mempool ancestors (including this one)\"},\n+            RPCResult{RPCResult::Type::NUM, \"chunksize\", \"virtual transaction size of this transaction's chunk\"},\n+            RPCResult{RPCResult::Type::NUM, \"clusterid\", \"id of the cluster containing this tx\"},\n+            RPCResult{RPCResult::Type::STR_HEX, \"wtxid\", \"hash of serialized transaction, including witness data\"},\n+            RPCResult{RPCResult::Type::OBJ, \"fees\", \"\",\n+                {\n+                    RPCResult{RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee, denominated in \" + CURRENCY_UNIT},\n+                    RPCResult{RPCResult::Type::STR_AMOUNT, \"modified\", \"transaction fee with fee deltas used for mining priority, denominated in \" + CURRENCY_UNIT},\n+                    RPCResult{RPCResult::Type::STR_AMOUNT, \"ancestor\", \"transaction fees of in-mempool ancestors (including this one) with fee deltas used for mining priority, denominated in \" + CURRENCY_UNIT},\n+                    RPCResult{RPCResult::Type::STR_AMOUNT, \"descendant\", \"transaction fees of in-mempool descendants (including this one) with fee deltas used for mining priority, denominated in \" + CURRENCY_UNIT},\n+                    RPCResult{RPCResult::Type::STR_AMOUNT, \"chunk\", \"transaction fees of chunk, denominated in \" + CURRENCY_UNIT},\n+                }},\n+            RPCResult{RPCResult::Type::ARR, \"depends\", \"unconfirmed transactions used as inputs for this transaction\",\n+                {RPCResult{RPCResult::Type::STR_HEX, \"transactionid\", \"parent transaction id\"}}},\n+            RPCResult{RPCResult::Type::ARR, \"spentby\", \"unconfirmed transactions spending outputs from this transaction\",\n+                {RPCResult{RPCResult::Type::STR_HEX, \"transactionid\", \"child transaction id\"}}},\n+            RPCResult{RPCResult::Type::BOOL, \"bip125-replaceable\", \"Whether this transaction signals BIP125 replaceability or has an unconfirmed ancestor signaling BIP125 replaceability.\\n\"},\n+            RPCResult{RPCResult::Type::BOOL, \"unbroadcast\", \"Whether this transaction is currently unbroadcast (initial broadcast not yet acknowledged by any peers)\"},\n     };\n }\n \n+static void clusterToJSON(const CTxMemPool& pool, UniValue& info, const Cluster& c) EXCLUSIVE_LOCKS_REQUIRED(pool.cs)\n+{\n+    AssertLockHeld(pool.cs);\n+    info.pushKV(\"vsize\", (int)c.m_tx_size);\n+    info.pushKV(\"txcount\", (int)c.m_tx_count);\n+    info.pushKV(\"clusterid\", (int)c.m_id);\n+    UniValue chunks(UniValue::VARR);\n+    for (auto &chunk : c.m_chunks) {",
      "path": "src/rpc/mempool.cpp",
      "position": 1,
      "original_position": 83,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1: can you order chunks by mining score?",
      "created_at": "2023-11-20T13:42:19Z",
      "updated_at": "2023-11-20T13:42:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399223399",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399223399"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 315,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399231122",
      "pull_request_review_id": 1739865937,
      "id": 1399231122,
      "node_id": "PRRC_kwDOABII585TZpKS",
      "diff_hunk": "@@ -764,48 +918,174 @@ void CTxMemPool::check(const CCoinsViewCache& active_coins_tip, int64_t spendhei\n         assert(&tx == it->second);\n     }\n \n+    // Check that clusters are sorted topologically and that the chunk metadata\n+    // matches the txs in the chunk.\n+    for (const auto & [id, cluster] : m_cluster_map) {\n+        assert(cluster->m_tx_count > 0); // no empty clusters\n+        CTxMemPoolEntry::Parents txs_so_far;\n+        for (size_t i=0; i<cluster->m_chunks.size(); ++i) {\n+            int64_t fee{0};\n+            int64_t size{0};\n+            assert(!cluster->m_chunks[i].txs.empty()); // no empty chunks\n+            for (auto it=cluster->m_chunks[i].txs.begin(); it != cluster->m_chunks[i].txs.end(); ++it) {\n+                fee += it->get().GetModifiedFee();\n+                size += it->get().GetTxSize();\n+                // Check that all parents are in txs_so_far\n+                for (const auto& parent : it->get().GetMemPoolParentsConst()) {\n+                    assert(txs_so_far.count(parent));\n+                }\n+                txs_so_far.insert(*it);\n+            }\n+            assert(fee == cluster->m_chunks[i].fee);\n+            assert(size == cluster->m_chunks[i].size);\n+        }\n+        innerUsage += cluster->GetMemoryUsage();\n+    }\n+\n+    // Check that each cluster is connected.\n+    for (const auto & [id, cluster] : m_cluster_map) {\n+        // Since we've checked the parents and children already, we'll use\n+        // those values here.\n+        // We'll check that if we walk to every transaction reachable from the\n+        // first one, that we get every tx in the cluster.\n+        auto first_tx = cluster->m_chunks.front().txs.front();\n+        std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef> work_queue;\n+        int reachable_txs = 1; // we'll count the transactions we reach.\n+\n+        WITH_FRESH_EPOCH(m_epoch);\n+        visited(first_tx.get());\n+        assert(first_tx.get().GetMemPoolParentsConst().size() == 0); // first tx can never have parents.\n+        for (auto child : first_tx.get().GetMemPoolChildrenConst()) {\n+            work_queue.push_back(child);\n+            visited(child.get());\n+            ++reachable_txs;\n+        }\n+        while (work_queue.size() > 0) {\n+            auto next_tx = work_queue.back();\n+            work_queue.pop_back();\n+            for (auto parent : next_tx.get().GetMemPoolParentsConst()) {\n+                if (!visited(parent.get())) {\n+                    ++reachable_txs;\n+                    work_queue.push_back(parent);\n+                }\n+            }\n+            for (auto child : next_tx.get().GetMemPoolChildrenConst()) {\n+                if (!visited(child.get())) {\n+                    ++reachable_txs;\n+                    work_queue.push_back(child);\n+                }\n+            }\n+        }\n+        assert(reachable_txs == cluster->m_tx_count);\n+    }\n+\n     assert(totalTxSize == checkTotal);\n     assert(m_total_fee == check_total_fee);\n     assert(innerUsage == cachedInnerUsage);\n }\n \n-bool CTxMemPool::CompareDepthAndScore(const uint256& hasha, const uint256& hashb, bool wtxid)\n+// Return true if a comes before b in mempool sort order\n+bool CTxMemPool::CompareMiningScore(txiter a, txiter b) const\n+{\n+    if (a == b) return false; // An element cannot be less than itself.\n+\n+    CAmount a_fee = a->m_cluster->m_chunks[a->m_loc.first].fee;\n+    int64_t a_size = a->m_cluster->m_chunks[a->m_loc.first].size;\n+    CAmount b_fee = b->m_cluster->m_chunks[b->m_loc.first].fee;\n+    int64_t b_size = b->m_cluster->m_chunks[b->m_loc.first].size;\n+\n+    int64_t a_score = a_fee * b_size;\n+    int64_t b_score = b_fee * a_size;",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 1113,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "7fdcccd1338655328c28ff949d50442ace931a5e",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "It would be good to explain the rationale for the miner score somewhere.\r\n\r\nWhy a * b and b * a?\r\n\r\nAnd why is not the fee rate `a_fee / a_size`? (inverse score?)",
      "created_at": "2023-11-20T13:48:38Z",
      "updated_at": "2023-11-20T13:51:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399231122",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399231122"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1157,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399244164",
      "pull_request_review_id": 1739885361,
      "id": 1399244164,
      "node_id": "PRRC_kwDOABII585TZsWE",
      "diff_hunk": "@@ -377,6 +427,63 @@ UniValue MempoolToJSON(const CTxMemPool& pool, bool verbose, bool include_mempoo\n     }\n }\n \n+static RPCHelpMan getmempoolfeesize()\n+{\n+    return RPCHelpMan{\"getmempoolfeesize\",\n+        \"Returns fee/size data for the whole mempool.\",\n+        {},\n+        {},\n+        RPCExamples{\n+            HelpExampleCli(\"getmempoolfeesize\", \"\")\n+            + HelpExampleRpc(\"getmempoolfeesize\", \"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+            LOCK(mempool.cs);\n+\n+            UniValue result(UniValue::VARR);\n+\n+            // TODO: refactor so that we're not just copying this from the miner.\n+            std::vector<Cluster::HeapEntry> heap_chunks;\n+            // Initialize the heap with the best entry from each cluster\n+            for (const auto & [id, cluster] : mempool.m_cluster_map) {\n+                if (!cluster->m_chunks.empty()) {\n+                    heap_chunks.emplace_back(cluster->m_chunks.begin(), cluster.get());\n+                }\n+            }\n+            // Define comparison operator on our heap entries (using feerate of chunks).\n+            auto cmp = [](const Cluster::HeapEntry& a, const Cluster::HeapEntry& b) {\n+                return a.first->fee*b.first->size < b.first->fee*a.first->size;\n+            };\n+            std::make_heap(heap_chunks.begin(), heap_chunks.end(), cmp);\n+\n+            CAmount accum_fee{0};\n+            int64_t accum_size{0};\n+            while (!heap_chunks.empty()) {\n+                auto best_chunk = heap_chunks.front();\n+                std::pop_heap(heap_chunks.begin(), heap_chunks.end(), cmp);\n+                heap_chunks.pop_back();\n+\n+                accum_size += best_chunk.first->size;\n+                accum_fee += best_chunk.first->fee;\n+\n+                UniValue o(UniValue::VOBJ);",
      "path": "src/rpc/mempool.cpp",
      "position": 148,
      "original_position": 164,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1: this should also list the cluster id, and maybe also the chunk number.\r\n\r\nCould also add an argument limit the total number of vbytes.\r\n\r\n`getmempoolfeesize` can be introduced in its own commit",
      "created_at": "2023-11-20T13:58:48Z",
      "updated_at": "2023-11-20T13:59:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399244164",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399244164"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 466,
      "original_line": 466,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399246551",
      "pull_request_review_id": 1739889097,
      "id": 1399246551,
      "node_id": "PRRC_kwDOABII585TZs7X",
      "diff_hunk": "@@ -377,6 +427,63 @@ UniValue MempoolToJSON(const CTxMemPool& pool, bool verbose, bool include_mempoo\n     }\n }\n \n+static RPCHelpMan getmempoolfeesize()\n+{\n+    return RPCHelpMan{\"getmempoolfeesize\",\n+        \"Returns fee/size data for the whole mempool.\",\n+        {},\n+        {},\n+        RPCExamples{\n+            HelpExampleCli(\"getmempoolfeesize\", \"\")\n+            + HelpExampleRpc(\"getmempoolfeesize\", \"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+            LOCK(mempool.cs);\n+\n+            UniValue result(UniValue::VARR);\n+\n+            // TODO: refactor so that we're not just copying this from the miner.\n+            std::vector<Cluster::HeapEntry> heap_chunks;\n+            // Initialize the heap with the best entry from each cluster\n+            for (const auto & [id, cluster] : mempool.m_cluster_map) {\n+                if (!cluster->m_chunks.empty()) {\n+                    heap_chunks.emplace_back(cluster->m_chunks.begin(), cluster.get());\n+                }\n+            }\n+            // Define comparison operator on our heap entries (using feerate of chunks).\n+            auto cmp = [](const Cluster::HeapEntry& a, const Cluster::HeapEntry& b) {\n+                return a.first->fee*b.first->size < b.first->fee*a.first->size;",
      "path": "src/rpc/mempool.cpp",
      "position": 1,
      "original_position": 150,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1 : Could this use `CompareMiningScore` or does it have a different goal?",
      "created_at": "2023-11-20T14:00:41Z",
      "updated_at": "2023-11-20T14:00:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399246551",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399246551"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 474,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399253500",
      "pull_request_review_id": 1739900168,
      "id": 1399253500,
      "node_id": "PRRC_kwDOABII585TZun8",
      "diff_hunk": "@@ -53,12 +46,10 @@ other consensus and policy rules, each of the following conditions are met:\n    significant portions of the node's mempool using replacements with multiple directly conflicting\n    transactions, each with large descendant sets.\n \n-6. The replacement transaction's feerate is greater than the feerates of all directly conflicting\n+5. The replacement transaction's mining score is greater than the mining score of all directly conflicting",
      "path": "doc/policy/mempool-replacements.md",
      "position": 1,
      "original_position": 39,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "bf467f8286425b692a1736ab6d417d0ba6074658",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "bf467f8286425b692a1736ab6d417d0ba6074658 Maybe make this rule 7. That seems a bit more clear than saying \"previously this rule referred to fee rate\"",
      "created_at": "2023-11-20T14:06:13Z",
      "updated_at": "2023-11-20T14:06:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399253500",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399253500"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 49,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399257380",
      "pull_request_review_id": 1739906712,
      "id": 1399257380,
      "node_id": "PRRC_kwDOABII585TZvkk",
      "diff_hunk": "@@ -18,14 +18,7 @@ other consensus and policy rules, each of the following conditions are met:\n    Use the (`-mempoolfullrbf`) configuration option to allow transaction replacement without enforcement of the\n    opt-in signaling rule.\n \n-2. The replacement transaction only include an unconfirmed input if that input was included in\n-   one of the directly conflicting transactions. An unconfirmed input spends an output from a\n-   currently-unconfirmed transaction.\n-\n-   *Rationale*: When RBF was originally implemented, the mempool did not keep track of\n-   ancestor feerates yet. This rule was suggested as a temporary restriction.\n-\n-3. The replacement transaction pays an absolute fee of at least the sum paid by the original\n+2. The replacement transaction pays an absolute fee of at least the sum paid by the original\n    transactions.\n \n    *Rationale*: Only requiring the replacement transaction to have a higher feerate could allow an",
      "path": "doc/policy/mempool-replacements.md",
      "position": 1,
      "original_position": 15,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "bf467f8286425b692a1736ab6d417d0ba6074658",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "bf467f8286425b692a1736ab6d417d0ba6074658: \"a higher feerate or (using clusters) mining score\"\r\n\r\nIs the \"Additionally\" reasoning still valid?",
      "created_at": "2023-11-20T14:09:35Z",
      "updated_at": "2023-11-20T14:10:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399257380",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399257380"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 20,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399277318",
      "pull_request_review_id": 1739940128,
      "id": 1399277318,
      "node_id": "PRRC_kwDOABII585TZ0cG",
      "diff_hunk": "@@ -53,12 +46,10 @@ other consensus and policy rules, each of the following conditions are met:\n    significant portions of the node's mempool using replacements with multiple directly conflicting\n    transactions, each with large descendant sets.\n \n-6. The replacement transaction's feerate is greater than the feerates of all directly conflicting\n+5. The replacement transaction's mining score is greater than the mining score of all directly conflicting\n    transactions.\n \n-   *Rationale*: This rule was originally intended to ensure that the replacement transaction is\n-   preferable for block-inclusion, compared to what would be removed from the mempool. This rule\n-   predates ancestor feerate-based transaction selection.\n+   *Rationale*: Ensure that the new transaction is more appealing to mine than those being evicted.\n \n This set of rules is similar but distinct from BIP125.\n ",
      "path": "doc/policy/mempool-replacements.md",
      "position": 41,
      "original_position": 48,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "bf467f8286425b692a1736ab6d417d0ba6074658",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "bf467f8286425b692a1736ab6d417d0ba6074658: history can be expanded:\r\n\r\n```md\r\n  * Cluster mempool introduced, dropping rule 2 and introducing rule 7.\r\n    As of **v27.0** ([PR 28676](https://github.com/bitcoin/bitcoin/pull/28676)).\r\n```",
      "created_at": "2023-11-20T14:24:01Z",
      "updated_at": "2023-11-20T14:24:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399277318",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399277318"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 46,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399281690",
      "pull_request_review_id": 1739947219,
      "id": 1399281690,
      "node_id": "PRRC_kwDOABII585TZ1ga",
      "diff_hunk": "@@ -139,11 +107,11 @@ std::optional<std::string> PaysMoreThanConflicts(const CTxMemPool::setEntries& i\n         // as that would lower the feerate of the next block. Requiring that the feerate always be\n         // increased is also an easy-to-reason about way to prevent DoS attacks via replacements.\n         //\n-        // We only consider the feerates of transactions being directly replaced, not their indirect\n-        // descendants. While that does mean high feerate children are ignored when deciding whether\n-        // or not to replace, we do require the replacement to pay more overall fees too, mitigating\n-        // most cases.\n-        CFeeRate original_feerate(mi->GetModifiedFee(), mi->GetTxSize());\n+        // We only need to consider the chunk feerates of transactions being\n+        // directly replaced, because descendant transactions which pay for the\n+        // parent will be reflected in the parent's chunk feerate.\n+        Cluster::Chunk &chunk = mi->m_cluster->m_chunks[mi->m_loc.first];\n+        CFeeRate original_feerate(chunk.fee, chunk.size);\n         if (replacement_feerate <= original_feerate) {\n             return strprintf(\"rejecting replacement %s; new feerate %s <= old feerate %s\",",
      "path": "src/policy/rbf.cpp",
      "position": 1,
      "original_position": 63,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "bf467f8286425b692a1736ab6d417d0ba6074658",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "bf467f8286425b692a1736ab6d417d0ba6074658: `; new chunk feerate %s <= old chunk feerate`",
      "created_at": "2023-11-20T14:27:08Z",
      "updated_at": "2023-11-20T14:27:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399281690",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399281690"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 116,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399422341",
      "pull_request_review_id": 1740177374,
      "id": 1399422341,
      "node_id": "PRRC_kwDOABII585TaX2F",
      "diff_hunk": "@@ -1245,3 +1648,251 @@ std::vector<CTxMemPool::txiter> CTxMemPool::GatherClusters(const std::vector<uin\n     }\n     return clustered_txs;\n }\n+\n+CTxMemPoolEntry::CTxMemPoolEntryRef Cluster::GetLastTransaction()\n+{\n+    assert(m_tx_count > 0);\n+    for (auto chunkit = m_chunks.rbegin(); chunkit != m_chunks.rend(); ++chunkit) {\n+        if (!chunkit->txs.empty()) return chunkit->txs.back();\n+    }\n+    // Unreachable\n+    assert(false);\n+}\n+\n+void Cluster::AddTransaction(const CTxMemPoolEntry& entry, bool sort)\n+{\n+    m_chunks.emplace_back(entry.GetModifiedFee(), entry.GetTxSize());\n+    m_chunks.back().txs.emplace_back(entry);\n+    entry.m_cluster = this;\n+    ++m_tx_count;\n+    m_tx_size += entry.GetTxSize();\n+    if (sort) Sort();\n+    return;\n+}\n+\n+void Cluster::RemoveTransaction(const CTxMemPoolEntry& entry)\n+{\n+    m_chunks[entry.m_loc.first].txs.erase(entry.m_loc.second);\n+\n+    // Chunk (or cluster) may now be empty, but this will get cleaned up\n+    // when the cluster is re-sorted (or when the cluster is deleted) Note:\n+    // if we cleaned up empty chunks here, then this would break the\n+    // locations of other entries in the cluster. Since we would like to be\n+    // able to do multiple removals in a row and then clean up the sort, we\n+    // can't clean up empty chunks here.\n+    --m_tx_count;\n+    m_tx_size -= entry.GetTxSize();\n+    return;\n+}\n+\n+void Cluster::RechunkFromLinearization(std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef>& txs, bool reassign_locations)\n+{\n+    m_chunks.clear();\n+    m_tx_size = 0;\n+\n+    for (auto txentry : txs) {\n+        m_chunks.emplace_back(txentry.get().GetModifiedFee(), txentry.get().GetTxSize());\n+        m_chunks.back().txs.emplace_back(txentry);\n+        while (m_chunks.size() >= 2) {\n+            auto cur_iter = std::prev(m_chunks.end());\n+            auto prev_iter = std::prev(cur_iter);\n+            double feerate_prev = prev_iter->fee*cur_iter->size;\n+            double feerate_cur = cur_iter->fee*prev_iter->size;\n+            // We only combine chunks if the feerate would go up; if two\n+            // chunks have equal feerate, we prefer to keep the smaller\n+            // chunksize (which is generally better for both mining and\n+            // eviction).\n+            if (feerate_cur > feerate_prev) {\n+                prev_iter->fee += cur_iter->fee;\n+                prev_iter->size += cur_iter->size;\n+                prev_iter->txs.splice(prev_iter->txs.end(), cur_iter->txs, cur_iter->txs.begin(), cur_iter->txs.end());\n+                m_chunks.erase(cur_iter);\n+            } else {\n+                break;\n+            }\n+        }\n+        m_tx_size += txentry.get().GetTxSize();\n+    }\n+\n+    if (reassign_locations) {\n+        // Update locations of all transactions\n+        for (size_t i=0; i<m_chunks.size(); ++i) {\n+            for (auto it = m_chunks[i].txs.begin(); it != m_chunks[i].txs.end(); ++it) {\n+                it->get().m_loc = {i, it};\n+            }\n+        }\n+    }\n+}\n+\n+namespace {\n+\n+template <typename SetType>\n+std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef> InvokeSort(size_t tx_count, const std::vector<Cluster::Chunk>& chunks)\n+{\n+    std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef> txs;",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 1667,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "7fdcccd1338655328c28ff949d50442ace931a5e",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Can you clarify what `txs`, `orig_txs` and `cluster` are for, and what the general strategy is here?",
      "created_at": "2023-11-20T16:04:07Z",
      "updated_at": "2023-11-20T16:04:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399422341",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399422341"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1910,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399521672",
      "pull_request_review_id": 1740335905,
      "id": 1399521672,
      "node_id": "PRRC_kwDOABII585TawGI",
      "diff_hunk": "@@ -1245,3 +1536,169 @@ std::vector<CTxMemPool::txiter> CTxMemPool::GatherClusters(const std::vector<uin\n     }\n     return clustered_txs;\n }\n+\n+void Cluster::AddTransaction(const CTxMemPoolEntry& entry, bool sort)\n+{\n+    m_chunks.emplace_back(entry.GetModifiedFee(), entry.GetTxSize());\n+    m_chunks.back().txs.emplace_back(entry);\n+    entry.m_cluster = this;\n+    ++m_tx_count;\n+    if (sort) Sort();\n+    return;\n+}\n+\n+void Cluster::RemoveTransaction(const CTxMemPoolEntry& entry)\n+{\n+    m_chunks[entry.m_loc.first].txs.erase(entry.m_loc.second);\n+\n+    // Chunk (or cluster) may now be empty, but this will get cleaned up\n+    // when the cluster is re-sorted (or when the cluster is deleted) Note:\n+    // if we cleaned up empty chunks here, then this would break the\n+    // locations of other entries in the cluster. Since we would like to be\n+    // able to do multiple removals in a row and then clean up the sort, we\n+    // can't clean up empty chunks here.\n+    --m_tx_count;\n+    return;\n+}\n+\n+void Cluster::RechunkFromLinearization(std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef>& txs, bool reassign_locations)\n+{\n+    m_chunks.clear();\n+\n+    for (auto txentry : txs) {\n+        m_chunks.emplace_back(txentry.get().GetModifiedFee(), txentry.get().GetTxSize());\n+        m_chunks.back().txs.emplace_back(txentry);\n+        while (m_chunks.size() >= 2) {\n+            auto cur_iter = std::prev(m_chunks.end());\n+            auto prev_iter = std::prev(cur_iter);\n+            double feerate_prev = prev_iter->fee*cur_iter->size;",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 427,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "54f39ca8f101483f5f82707689ca49431d4091e5",
      "in_reply_to_id": 1392646700,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "The math school memories are coming back :-)",
      "created_at": "2023-11-20T17:22:14Z",
      "updated_at": "2023-11-20T17:22:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399521672",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399521672"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1877,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1419287189",
      "pull_request_review_id": 1770623709,
      "id": 1419287189,
      "node_id": "PRRC_kwDOABII585UmJqV",
      "diff_hunk": "@@ -18,14 +18,7 @@ other consensus and policy rules, each of the following conditions are met:\n    Use the (`-mempoolfullrbf`) configuration option to allow transaction replacement without enforcement of the\n    opt-in signaling rule.\n \n-2. The replacement transaction only include an unconfirmed input if that input was included in\n-   one of the directly conflicting transactions. An unconfirmed input spends an output from a\n-   currently-unconfirmed transaction.\n-\n-   *Rationale*: When RBF was originally implemented, the mempool did not keep track of\n-   ancestor feerates yet. This rule was suggested as a temporary restriction.\n-\n-3. The replacement transaction pays an absolute fee of at least the sum paid by the original",
      "path": "doc/policy/mempool-replacements.md",
      "position": 12,
      "original_position": 11,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "b0f771bb559f38ea16a8f4d13110e2247ac080b9",
      "in_reply_to_id": 1364398135,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I'm not sure the best way to document things, but I added a to-do item to the OP so that we don't lose track of figuring out how we want the docs to look. (Will have to conform all the code comments as well.) ",
      "created_at": "2023-12-07T16:52:48Z",
      "updated_at": "2023-12-07T16:52:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1419287189",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1419287189"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 22,
      "original_line": 22,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1419291403",
      "pull_request_review_id": 1770628066,
      "id": 1419291403,
      "node_id": "PRRC_kwDOABII585UmKsL",
      "diff_hunk": "@@ -249,34 +249,81 @@ static RPCHelpMan testmempoolaccept()\n     };\n }\n \n+static std::vector<RPCResult> ClusterDescription()\n+{\n+    return {\n+        RPCResult{RPCResult::Type::NUM, \"vsize\", \"virtual transaction size as defined in BIP 141. This is different from actual serialized size for witness transactions as witness data is discounted.\"},\n+        RPCResult{RPCResult::Type::NUM, \"txcount\", \"number of transactions (including this one)\"},\n+        RPCResult{RPCResult::Type::NUM, \"clusterid\", \"id of the cluster containing this tx\"},\n+        RPCResult{RPCResult::Type::ARR, \"chunks\", \"the cluster's chunks\",\n+            {RPCResult{RPCResult::Type::OBJ, \"chunkentry\", \"\",\n+                {\n+                    RPCResult{RPCResult::Type::STR_AMOUNT, \"fee\", \"fee of this chunk\"},\n+                    RPCResult{RPCResult::Type::NUM, \"vsize\", \"virtual size of this chunk\"},\n+                    RPCResult{RPCResult::Type::NUM, \"feerate\", \"fee rate in \" + CURRENCY_UNIT + \"/kvB\"},\n+                    RPCResult{RPCResult::Type::ARR, \"txids\", \"txids in this chunk in sorted order\",\n+                        {RPCResult{RPCResult::Type::STR_HEX, \"transactionid\", \"the transaction id\"}}}\n+                }}\n+            }\n+        }\n+    };\n+}\n+\n static std::vector<RPCResult> MempoolEntryDescription()\n {\n     return {\n         RPCResult{RPCResult::Type::NUM, \"vsize\", \"virtual transaction size as defined in BIP 141. This is different from actual serialized size for witness transactions as witness data is discounted.\"},\n-        RPCResult{RPCResult::Type::NUM, \"weight\", \"transaction weight as defined in BIP 141.\"},\n-        RPCResult{RPCResult::Type::NUM_TIME, \"time\", \"local time transaction entered pool in seconds since 1 Jan 1970 GMT\"},\n-        RPCResult{RPCResult::Type::NUM, \"height\", \"block height when transaction entered pool\"},\n-        RPCResult{RPCResult::Type::NUM, \"descendantcount\", \"number of in-mempool descendant transactions (including this one)\"},\n-        RPCResult{RPCResult::Type::NUM, \"descendantsize\", \"virtual transaction size of in-mempool descendants (including this one)\"},\n-        RPCResult{RPCResult::Type::NUM, \"ancestorcount\", \"number of in-mempool ancestor transactions (including this one)\"},\n-        RPCResult{RPCResult::Type::NUM, \"ancestorsize\", \"virtual transaction size of in-mempool ancestors (including this one)\"},\n-        RPCResult{RPCResult::Type::STR_HEX, \"wtxid\", \"hash of serialized transaction, including witness data\"},\n-        RPCResult{RPCResult::Type::OBJ, \"fees\", \"\",\n-            {\n-                RPCResult{RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee, denominated in \" + CURRENCY_UNIT},\n-                RPCResult{RPCResult::Type::STR_AMOUNT, \"modified\", \"transaction fee with fee deltas used for mining priority, denominated in \" + CURRENCY_UNIT},\n-                RPCResult{RPCResult::Type::STR_AMOUNT, \"ancestor\", \"transaction fees of in-mempool ancestors (including this one) with fee deltas used for mining priority, denominated in \" + CURRENCY_UNIT},\n-                RPCResult{RPCResult::Type::STR_AMOUNT, \"descendant\", \"transaction fees of in-mempool descendants (including this one) with fee deltas used for mining priority, denominated in \" + CURRENCY_UNIT},\n-            }},\n-        RPCResult{RPCResult::Type::ARR, \"depends\", \"unconfirmed transactions used as inputs for this transaction\",\n-            {RPCResult{RPCResult::Type::STR_HEX, \"transactionid\", \"parent transaction id\"}}},\n-        RPCResult{RPCResult::Type::ARR, \"spentby\", \"unconfirmed transactions spending outputs from this transaction\",\n-            {RPCResult{RPCResult::Type::STR_HEX, \"transactionid\", \"child transaction id\"}}},\n-        RPCResult{RPCResult::Type::BOOL, \"bip125-replaceable\", \"Whether this transaction signals BIP125 replaceability or has an unconfirmed ancestor signaling BIP125 replaceability.\\n\"},\n-        RPCResult{RPCResult::Type::BOOL, \"unbroadcast\", \"Whether this transaction is currently unbroadcast (initial broadcast not yet acknowledged by any peers)\"},\n+            RPCResult{RPCResult::Type::NUM, \"weight\", \"transaction weight as defined in BIP 141.\"},\n+            RPCResult{RPCResult::Type::NUM_TIME, \"time\", \"local time transaction entered pool in seconds since 1 Jan 1970 GMT\"},\n+            RPCResult{RPCResult::Type::NUM, \"height\", \"block height when transaction entered pool\"},\n+            RPCResult{RPCResult::Type::NUM, \"descendantcount\", \"number of in-mempool descendant transactions (including this one)\"},\n+            RPCResult{RPCResult::Type::NUM, \"descendantsize\", \"virtual transaction size of in-mempool descendants (including this one)\"},\n+            RPCResult{RPCResult::Type::NUM, \"ancestorcount\", \"number of in-mempool ancestor transactions (including this one)\"},\n+            RPCResult{RPCResult::Type::NUM, \"ancestorsize\", \"virtual transaction size of in-mempool ancestors (including this one)\"},\n+            RPCResult{RPCResult::Type::NUM, \"chunksize\", \"virtual transaction size of this transaction's chunk\"},\n+            RPCResult{RPCResult::Type::NUM, \"clusterid\", \"id of the cluster containing this tx\"},\n+            RPCResult{RPCResult::Type::STR_HEX, \"wtxid\", \"hash of serialized transaction, including witness data\"},\n+            RPCResult{RPCResult::Type::OBJ, \"fees\", \"\",\n+                {\n+                    RPCResult{RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee, denominated in \" + CURRENCY_UNIT},\n+                    RPCResult{RPCResult::Type::STR_AMOUNT, \"modified\", \"transaction fee with fee deltas used for mining priority, denominated in \" + CURRENCY_UNIT},\n+                    RPCResult{RPCResult::Type::STR_AMOUNT, \"ancestor\", \"transaction fees of in-mempool ancestors (including this one) with fee deltas used for mining priority, denominated in \" + CURRENCY_UNIT},\n+                    RPCResult{RPCResult::Type::STR_AMOUNT, \"descendant\", \"transaction fees of in-mempool descendants (including this one) with fee deltas used for mining priority, denominated in \" + CURRENCY_UNIT},\n+                    RPCResult{RPCResult::Type::STR_AMOUNT, \"chunk\", \"transaction fees of chunk, denominated in \" + CURRENCY_UNIT},\n+                }},\n+            RPCResult{RPCResult::Type::ARR, \"depends\", \"unconfirmed transactions used as inputs for this transaction\",\n+                {RPCResult{RPCResult::Type::STR_HEX, \"transactionid\", \"parent transaction id\"}}},\n+            RPCResult{RPCResult::Type::ARR, \"spentby\", \"unconfirmed transactions spending outputs from this transaction\",\n+                {RPCResult{RPCResult::Type::STR_HEX, \"transactionid\", \"child transaction id\"}}},\n+            RPCResult{RPCResult::Type::BOOL, \"bip125-replaceable\", \"Whether this transaction signals BIP125 replaceability or has an unconfirmed ancestor signaling BIP125 replaceability.\\n\"},\n+            RPCResult{RPCResult::Type::BOOL, \"unbroadcast\", \"Whether this transaction is currently unbroadcast (initial broadcast not yet acknowledged by any peers)\"},\n     };\n }\n \n+static void clusterToJSON(const CTxMemPool& pool, UniValue& info, const Cluster& c) EXCLUSIVE_LOCKS_REQUIRED(pool.cs)\n+{\n+    AssertLockHeld(pool.cs);\n+    info.pushKV(\"vsize\", (int)c.m_tx_size);\n+    info.pushKV(\"txcount\", (int)c.m_tx_count);\n+    info.pushKV(\"clusterid\", (int)c.m_id);\n+    UniValue chunks(UniValue::VARR);\n+    for (auto &chunk : c.m_chunks) {",
      "path": "src/rpc/mempool.cpp",
      "position": 1,
      "original_position": 83,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "0b284b5fd29c06d46c1ec60ea7e1bcd07f36feb1",
      "in_reply_to_id": 1399223399,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Chunks for a given cluster are already sorted in descending feerate (ie mining score) order, is that what you're asking about or is there another issue I'm overlooking?",
      "created_at": "2023-12-07T16:55:18Z",
      "updated_at": "2023-12-07T16:55:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1419291403",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1419291403"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 315,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1419299493",
      "pull_request_review_id": 1770638034,
      "id": 1419299493,
      "node_id": "PRRC_kwDOABII585UmMql",
      "diff_hunk": "@@ -60,57 +59,26 @@ std::optional<std::string> GetEntriesForConflicts(const CTransaction& tx,\n {\n     AssertLockHeld(pool.cs);\n     const uint256 txid = tx.GetHash();\n-    uint64_t nConflictingCount = 0;\n-    for (const auto& mi : iters_conflicting) {\n-        nConflictingCount += mi->GetCountWithDescendants();\n-        // Rule #5: don't consider replacing more than MAX_REPLACEMENT_CANDIDATES\n-        // entries from the mempool. This potentially overestimates the number of actual\n-        // descendants (i.e. if multiple conflicts share a descendant, it will be counted multiple\n-        // times), but we just want to be conservative to avoid doing too much work.\n-        if (nConflictingCount > MAX_REPLACEMENT_CANDIDATES) {\n-            return strprintf(\"rejecting replacement %s; too many potential replacements (%d > %d)\\n\",\n-                             txid.ToString(),\n-                             nConflictingCount,\n-                             MAX_REPLACEMENT_CANDIDATES);\n-        }\n-    }\n     // Calculate the set of all transactions that would have to be evicted.\n     for (CTxMemPool::txiter it : iters_conflicting) {\n-        pool.CalculateDescendants(it, all_conflicts);\n-    }\n-    return std::nullopt;\n-}\n-\n-std::optional<std::string> HasNoNewUnconfirmed(const CTransaction& tx,\n-                                               const CTxMemPool& pool,\n-                                               const CTxMemPool::setEntries& iters_conflicting)\n-{\n-    AssertLockHeld(pool.cs);\n-    std::set<uint256> parents_of_conflicts;\n-    for (const auto& mi : iters_conflicting) {\n-        for (const CTxIn& txin : mi->GetTx().vin) {\n-            parents_of_conflicts.insert(txin.prevout.hash);\n+        // Exit early if we're going to fail (see below)\n+        if (all_conflicts.size() > MAX_REPLACEMENT_CANDIDATES) {",
      "path": "src/policy/rbf.cpp",
      "position": 1,
      "original_position": 45,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "3a42ba255a73e609ac37eee8288208fa43953779",
      "in_reply_to_id": 1365753481,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I believe I (finally) actually fixed this behavior to count the number of direct conflicts.  ",
      "created_at": "2023-12-07T17:00:39Z",
      "updated_at": "2023-12-07T17:00:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1419299493",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1419299493"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 65,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1419303051",
      "pull_request_review_id": 1770643203,
      "id": 1419303051,
      "node_id": "PRRC_kwDOABII585UmNiL",
      "diff_hunk": "@@ -1135,29 +1457,67 @@ void CTxMemPool::TrimToSize(size_t sizelimit, std::vector<COutPoint>* pvNoSpends\n \n     unsigned nTxnRemoved = 0;\n     CFeeRate maxFeeRateRemoved(0);\n+\n+    // Use a heap to determine which chunks to evict, but only make the heap if\n+    // we're actually above the size limit.\n+    std::vector<Cluster::HeapEntry> heap_chunks;\n+    std::set<Cluster*> clusters_with_evictions;\n     while (!mapTx.empty() && DynamicMemoryUsage() > sizelimit) {\n-        indexed_transaction_set::index<descendant_score>::type::iterator it = mapTx.get<descendant_score>().begin();\n+        if (heap_chunks.empty()) {\n+            for (const auto & [id, cluster] : m_cluster_map) {\n+                if (!cluster->m_chunks.empty()) {\n+                    heap_chunks.emplace_back(cluster->m_chunks.end()-1, cluster.get());\n+                }\n+            }\n+        }\n+\n+        // Define comparison operator on our heap entries (using feerate of chunks).\n+        auto cmp = [](const Cluster::HeapEntry& a, const Cluster::HeapEntry& b) {\n+            // TODO: branch on size of fee to do this as 32-bit calculation\n+            // instead? etc\n+            return a.first->fee*b.first->size > b.first->fee*a.first->size;\n+        };\n+\n+        std::make_heap(heap_chunks.begin(), heap_chunks.end(), cmp);",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 1421,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "26e831d5f2c7db15e7a50f910ddf4e1737d226da",
      "in_reply_to_id": 1367425942,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Should be fixed now.",
      "created_at": "2023-12-07T17:03:28Z",
      "updated_at": "2023-12-07T17:03:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1419303051",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1419303051"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1481,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1421668681",
      "pull_request_review_id": 1773954379,
      "id": 1421668681,
      "node_id": "PRRC_kwDOABII585UvPFJ",
      "diff_hunk": "@@ -1245,3 +1536,169 @@ std::vector<CTxMemPool::txiter> CTxMemPool::GatherClusters(const std::vector<uin\n     }\n     return clustered_txs;\n }\n+\n+void Cluster::AddTransaction(const CTxMemPoolEntry& entry, bool sort)\n+{\n+    m_chunks.emplace_back(entry.GetModifiedFee(), entry.GetTxSize());\n+    m_chunks.back().txs.emplace_back(entry);\n+    entry.m_cluster = this;\n+    ++m_tx_count;\n+    if (sort) Sort();\n+    return;\n+}\n+\n+void Cluster::RemoveTransaction(const CTxMemPoolEntry& entry)\n+{\n+    m_chunks[entry.m_loc.first].txs.erase(entry.m_loc.second);\n+\n+    // Chunk (or cluster) may now be empty, but this will get cleaned up",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 407,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "54f39ca8f101483f5f82707689ca49431d4091e5",
      "in_reply_to_id": 1392567718,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I wouldn't say it's safe to ignore, but the idea is that we often want to be able to batch deletions, and then clean things up in one pass.  So the call sites should all be dealing with this issue and ensuring that we always clean up at some point.\r\n\r\n(This is definitely an area where I expect that we'll be re-engineering all this logic and trying to come up with a better abstraction layer so that this is more robust and easier to think about!)",
      "created_at": "2023-12-10T01:33:24Z",
      "updated_at": "2023-12-10T01:33:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1421668681",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1421668681"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1857,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517064996",
      "pull_request_review_id": 1923884910,
      "id": 1517064996,
      "node_id": "PRRC_kwDOABII585abJMk",
      "diff_hunk": "@@ -764,6 +834,9 @@ class CTxMemPool\n      */\n     void UpdateForDescendants(txiter updateIt, cacheMap& cachedDescendants,\n                               const std::set<uint256>& setExclude, std::set<uint256>& descendants_to_remove) EXCLUSIVE_LOCKS_REQUIRED(cs);\n+    // During reorg we add transactions back to mempool, must reconnect\n+    // clusters with in-mempool descendants.\n+    void UpdateClusterForDescendants(txiter updateIt) EXCLUSIVE_LOCKS_REQUIRED(cs);",
      "path": "src/txmempool.h",
      "position": 1,
      "original_position": 97,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "96df5acec30995dcbaf800daf1945b9acff6bfb6",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I think the introduction of `Cluster` alters the worst-case computational during re-org, when we reconnect `disconnectpool` to the current mempool. Before the limit we were strictly bounded with `DEFAULT_ANCESTOR_LIMIT` / `DEFAULT_DESCENDANT_LIMIT`. Now we have a `DEFAULT_CLUST_LIMIT`, where the worst-case graph traversal algorithm might have to visit more element than at max 25.",
      "created_at": "2024-03-08T01:47:09Z",
      "updated_at": "2024-03-08T03:55:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1517064996",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517064996"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 839,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517074825",
      "pull_request_review_id": 1923884910,
      "id": 1517074825,
      "node_id": "PRRC_kwDOABII585abLmJ",
      "diff_hunk": "@@ -99,6 +99,41 @@ void CTxMemPool::UpdateForDescendants(txiter updateIt, cacheMap& cachedDescendan\n     mapTx.modify(updateIt, [=](CTxMemPoolEntry& e) { e.UpdateDescendantState(modifySize, modifyFee, modifyCount); });\n }\n \n+void CTxMemPool::UpdateClusterForDescendants(txiter updateIt)\n+{\n+    AssertLockHeld(cs);\n+    CTxMemPoolEntry::Children children = updateIt->GetMemPoolChildrenConst();\n+    std::vector<Cluster *> clusters_to_merge{updateIt->m_cluster};\n+    {\n+        WITH_FRESH_EPOCH(m_epoch);\n+        visited(updateIt->m_cluster);\n+        cachedInnerUsage -= updateIt->m_cluster->GetMemoryUsage();\n+        for (auto child : children) {\n+            if (!visited(child.get().m_cluster)) {\n+                clusters_to_merge.push_back(child.get().m_cluster);\n+                cachedInnerUsage -= child.get().m_cluster->GetMemoryUsage();\n+            }\n+        }\n+    }\n+    if (clusters_to_merge.size() > 1) {\n+        // Merge the other clusters into this one, but keep this cluster as\n+        // first so that it's topologically sound.\n+        clusters_to_merge[0]->Merge(clusters_to_merge.begin()+1, clusters_to_merge.end(), true);\n+        // TODO: limit the size of the cluster, in case it got too big.",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 24,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "96df5acec30995dcbaf800daf1945b9acff6bfb6",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I think this introduces a transaction censorship vector for time-sensitive second-layers. If you can re-org one block and construct a cluster such a a target descendant is not reconnected with other clusters, the non-cluster connected target descendant might have a stale feerate. This descendant could be pinnned in the bottom of the local mempool.",
      "created_at": "2024-03-08T02:05:16Z",
      "updated_at": "2024-03-08T03:55:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1517074825",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517074825"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 122,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517078978",
      "pull_request_review_id": 1923884910,
      "id": 1517078978,
      "node_id": "PRRC_kwDOABII585abMnC",
      "diff_hunk": "@@ -474,6 +531,42 @@ void CTxMemPool::addUnchecked(const CTxMemPoolEntry &entry, setEntries &setAnces\n     txns_randomized.emplace_back(newit->GetSharedTx());\n     newit->idx_randomized = txns_randomized.size() - 1;\n \n+    // Figure out which cluster this transaction belongs to.\n+    auto iterset = GetIterSet(setParentTransactions);\n+    std::vector<Cluster*> clusters_to_merge;\n+    {\n+        WITH_FRESH_EPOCH(m_epoch);\n+        for (auto parentit : iterset) {\n+            if (!visited(parentit->m_cluster)) {\n+                clusters_to_merge.push_back(parentit->m_cluster);\n+            }\n+        }\n+    }\n+\n+    // Merge all the clusters together.\n+    if (clusters_to_merge.size() == 0) {\n+        // No parents, make a new cluster.\n+        newit->m_cluster = AssignCluster();\n+        newit->m_cluster->AddTransaction(*newit, true);\n+        cachedInnerUsage += newit->m_cluster->GetMemoryUsage();\n+    } else if (clusters_to_merge.size() == 1) {\n+        cachedInnerUsage -= clusters_to_merge[0]->GetMemoryUsage();\n+        // Only one parent cluster: add to it.\n+        clusters_to_merge[0]->AddTransaction(*newit, true);\n+        cachedInnerUsage += clusters_to_merge[0]->GetMemoryUsage();\n+    } else {\n+        cachedInnerUsage -= clusters_to_merge[0]->GetMemoryUsage();\n+        clusters_to_merge[0]->Merge(clusters_to_merge.begin()+1, clusters_to_merge.end(), false);",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 107,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "96df5acec30995dcbaf800daf1945b9acff6bfb6",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This can bind max number of clusts's `Merge()`. `addUnchecked()` internal logic differs on tip commit.",
      "created_at": "2024-03-08T02:13:29Z",
      "updated_at": "2024-03-08T03:55:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1517078978",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517078978"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 559,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517086414",
      "pull_request_review_id": 1923884910,
      "id": 1517086414,
      "node_id": "PRRC_kwDOABII585abObO",
      "diff_hunk": "@@ -586,6 +682,105 @@ void CTxMemPool::removeRecursive(const CTransaction &origTx, MemPoolRemovalReaso\n         RemoveStaged(setAllRemoves, false, reason);\n }\n \n+Cluster* CTxMemPool::AssignCluster()\n+{\n+    auto new_cluster = std::make_unique<Cluster>(m_next_cluster_id++, this);\n+    Cluster* ret = new_cluster.get(); // XXX No one is going to like this.\n+    m_cluster_map[new_cluster->m_id] = std::move(new_cluster);\n+    return ret;\n+}\n+\n+// When transactions are removed from a cluster, the cluster might get split\n+// into smaller clusters.\n+void CTxMemPool::RecalculateClusterAndMaybeSort(Cluster *cluster, bool sort)\n+{\n+    // TODO: if the common case involves no cluster splitting, can we short\n+    // circuit the work here somehow?\n+\n+    // Wipe cluster assignments.\n+    std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef> txs;\n+    for (auto& chunk : cluster->m_chunks) {\n+        for (auto& txentry: chunk.txs) {\n+            txentry.get().m_cluster = nullptr;\n+            txs.push_back(txentry);\n+        }\n+    }\n+    cluster->Clear();\n+\n+    // The first transaction gets to stay in the existing cluster.\n+    bool first = true;\n+    for (auto& txentry : txs) {\n+        if (txentry.get().m_cluster == nullptr) {\n+            if (first) {\n+                txentry.get().m_cluster = cluster;\n+                first = false;\n+            } else {\n+                txentry.get().m_cluster = AssignCluster();\n+            }\n+            txentry.get().m_cluster->AddTransaction(txentry.get(), false);\n+            // We need to label all transactions connected to this one as\n+            // being in the same cluster.\n+            {\n+                WITH_FRESH_EPOCH(m_epoch);\n+                auto children = txentry.get().GetMemPoolChildrenConst();\n+                std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef> work_queue;\n+                for (auto entry : children) {\n+                    work_queue.push_back(entry);\n+                    visited(entry.get());\n+                }\n+\n+                while (!work_queue.empty()) {",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 182,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "96df5acec30995dcbaf800daf1945b9acff6bfb6",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I think here a counter should be introduced to avoid iterating on more than `DEFAULT_CLUSTER_LIMIT` on this `work_queue`. It’s in `RemoveStaged` itself call in `Finalize`, I think you might have temporarily unbounded numbers with conflicting descendants transactions.",
      "created_at": "2024-03-08T02:27:24Z",
      "updated_at": "2024-03-08T03:55:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1517086414",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517086414"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 732,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517091357",
      "pull_request_review_id": 1923884910,
      "id": 1517091357,
      "node_id": "PRRC_kwDOABII585abPod",
      "diff_hunk": "@@ -1235,3 +1526,169 @@ std::vector<CTxMemPool::txiter> CTxMemPool::GatherClusters(const std::vector<uin\n     }\n     return clustered_txs;\n }\n+\n+void Cluster::AddTransaction(const CTxMemPoolEntry& entry, bool sort)\n+{\n+    m_chunks.emplace_back(entry.GetModifiedFee(), entry.GetTxSize());\n+    m_chunks.back().txs.emplace_back(entry);\n+    entry.m_cluster = this;\n+    ++m_tx_count;\n+    if (sort) Sort();\n+    return;\n+}\n+\n+void Cluster::RemoveTransaction(const CTxMemPoolEntry& entry)\n+{\n+    m_chunks[entry.m_loc.first].txs.erase(entry.m_loc.second);\n+\n+    // Chunk (or cluster) may now be empty, but this will get cleaned up\n+    // when the cluster is re-sorted (or when the cluster is deleted) Note:",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 408,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "96df5acec30995dcbaf800daf1945b9acff6bfb6",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I think you will have computational threshold effect with whatever limits you’re picking up for max cluster size and chunk ordering parameters. Namely, what is the minimal chunk modification that can provoke the maximum of re-ordering of all in-cluster chunks.",
      "created_at": "2024-03-08T02:34:53Z",
      "updated_at": "2024-03-08T03:55:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1517091357",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517091357"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1545,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517094848",
      "pull_request_review_id": 1923884910,
      "id": 1517094848,
      "node_id": "PRRC_kwDOABII585abQfA",
      "diff_hunk": "@@ -1235,3 +1526,169 @@ std::vector<CTxMemPool::txiter> CTxMemPool::GatherClusters(const std::vector<uin\n     }\n     return clustered_txs;\n }\n+\n+void Cluster::AddTransaction(const CTxMemPoolEntry& entry, bool sort)\n+{\n+    m_chunks.emplace_back(entry.GetModifiedFee(), entry.GetTxSize());\n+    m_chunks.back().txs.emplace_back(entry);\n+    entry.m_cluster = this;\n+    ++m_tx_count;\n+    if (sort) Sort();\n+    return;\n+}\n+\n+void Cluster::RemoveTransaction(const CTxMemPoolEntry& entry)\n+{\n+    m_chunks[entry.m_loc.first].txs.erase(entry.m_loc.second);\n+\n+    // Chunk (or cluster) may now be empty, but this will get cleaned up\n+    // when the cluster is re-sorted (or when the cluster is deleted) Note:\n+    // if we cleaned up empty chunks here, then this would break the\n+    // locations of other entries in the cluster. Since we would like to be\n+    // able to do multiple removals in a row and then clean up the sort, we\n+    // can't clean up empty chunks here.\n+    --m_tx_count;\n+    return;\n+}\n+\n+void Cluster::RechunkFromLinearization(std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef>& txs, bool reassign_locations)\n+{\n+    m_chunks.clear();\n+\n+    for (auto txentry : txs) {\n+        m_chunks.emplace_back(txentry.get().GetModifiedFee(), txentry.get().GetTxSize());\n+        m_chunks.back().txs.emplace_back(txentry);\n+        while (m_chunks.size() >= 2) {\n+            auto cur_iter = std::prev(m_chunks.end());\n+            auto prev_iter = std::prev(cur_iter);\n+            double feerate_prev = prev_iter->fee*cur_iter->size;\n+            double feerate_cur = cur_iter->fee*prev_iter->size;\n+            // We only combine chunks if the feerate would go up; if two\n+            // chunks have equal feerate, we prefer to keep the smaller\n+            // chunksize (which is generally better for both mining and\n+            // eviction).",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 432,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "96df5acec30995dcbaf800daf1945b9acff6bfb6",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I think this is a broken assumption. You’re using virtual bytes (`GetTxSize()`), however an equivalent feerate cluster can have a smaller total witness unit as such a higher feerate w.r.t consensus rules (`MAX_BLOCK_WEIGHT`) and it should be selected in a mining block template.",
      "created_at": "2024-03-08T02:41:34Z",
      "updated_at": "2024-03-08T03:55:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1517094848",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517094848"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1569,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517104617",
      "pull_request_review_id": 1923884910,
      "id": 1517104617,
      "node_id": "PRRC_kwDOABII585abS3p",
      "diff_hunk": "@@ -1235,3 +1526,169 @@ std::vector<CTxMemPool::txiter> CTxMemPool::GatherClusters(const std::vector<uin\n     }\n     return clustered_txs;\n }\n+\n+void Cluster::AddTransaction(const CTxMemPoolEntry& entry, bool sort)\n+{\n+    m_chunks.emplace_back(entry.GetModifiedFee(), entry.GetTxSize());\n+    m_chunks.back().txs.emplace_back(entry);\n+    entry.m_cluster = this;\n+    ++m_tx_count;\n+    if (sort) Sort();\n+    return;\n+}\n+\n+void Cluster::RemoveTransaction(const CTxMemPoolEntry& entry)\n+{\n+    m_chunks[entry.m_loc.first].txs.erase(entry.m_loc.second);\n+\n+    // Chunk (or cluster) may now be empty, but this will get cleaned up\n+    // when the cluster is re-sorted (or when the cluster is deleted) Note:\n+    // if we cleaned up empty chunks here, then this would break the\n+    // locations of other entries in the cluster. Since we would like to be\n+    // able to do multiple removals in a row and then clean up the sort, we\n+    // can't clean up empty chunks here.\n+    --m_tx_count;\n+    return;\n+}\n+\n+void Cluster::RechunkFromLinearization(std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef>& txs, bool reassign_locations)\n+{\n+    m_chunks.clear();\n+\n+    for (auto txentry : txs) {\n+        m_chunks.emplace_back(txentry.get().GetModifiedFee(), txentry.get().GetTxSize());\n+        m_chunks.back().txs.emplace_back(txentry);\n+        while (m_chunks.size() >= 2) {\n+            auto cur_iter = std::prev(m_chunks.end());\n+            auto prev_iter = std::prev(cur_iter);\n+            double feerate_prev = prev_iter->fee*cur_iter->size;\n+            double feerate_cur = cur_iter->fee*prev_iter->size;\n+            // We only combine chunks if the feerate would go up; if two\n+            // chunks have equal feerate, we prefer to keep the smaller\n+            // chunksize (which is generally better for both mining and\n+            // eviction).\n+            if (feerate_cur > feerate_prev) {\n+                prev_iter->fee += cur_iter->fee;\n+                prev_iter->size += cur_iter->size;\n+                prev_iter->txs.splice(prev_iter->txs.end(), cur_iter->txs, cur_iter->txs.begin(), cur_iter->txs.end());\n+                m_chunks.erase(cur_iter);\n+            } else {\n+                break;\n+            }\n+        }\n+    }\n+\n+    if (reassign_locations) {\n+        // Update locations of all transactions\n+        for (size_t i=0; i<m_chunks.size(); ++i) {\n+            for (auto it = m_chunks[i].txs.begin(); it != m_chunks[i].txs.end(); ++it) {\n+                it->get().m_loc = {i, it};\n+            }\n+        }\n+    }\n+}\n+\n+// Topologically sort the cluster, and update memory usage.\n+void Cluster::Sort(bool reassign_locations)\n+{\n+    LOCK(m_mempool->cs);\n+    std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef> txs;\n+\n+    // Insert all transactions from the cluster into txs\n+    for (auto &chunk : m_chunks) {\n+        for (auto chunk_tx : chunk.txs) {\n+            txs.push_back(chunk_tx.get());\n+        }\n+    }\n+    // Sorting by ancestor count is equivalent to topological sort.\n+    std::sort(txs.begin(), txs.end(), [](const CTxMemPoolEntry::CTxMemPoolEntryRef& a, const CTxMemPoolEntry::CTxMemPoolEntryRef& b) {\n+        return a.get().GetCountWithAncestors() < b.get().GetCountWithAncestors();",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 468,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "96df5acec30995dcbaf800daf1945b9acff6bfb6",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Note topological sort is not defined. At the very least you can have `a` and `b` both being the first child of a single ancestor and still being the 2rd and 3rd child of a common ancestor. Strictly inferior here cannot be say to be equivalent.",
      "created_at": "2024-03-08T02:56:23Z",
      "updated_at": "2024-03-08T03:55:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1517104617",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517104617"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1605,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517111975",
      "pull_request_review_id": 1923884910,
      "id": 1517111975,
      "node_id": "PRRC_kwDOABII585abUqn",
      "diff_hunk": "@@ -247,34 +247,81 @@ static RPCHelpMan testmempoolaccept()\n     };\n }\n \n+static std::vector<RPCResult> ClusterDescription()\n+{\n+    return {\n+        RPCResult{RPCResult::Type::NUM, \"vsize\", \"virtual transaction size as defined in BIP 141. This is different from actual serialized size for witness transactions as witness data is discounted.\"},\n+        RPCResult{RPCResult::Type::NUM, \"txcount\", \"number of transactions (including this one)\"},\n+        RPCResult{RPCResult::Type::NUM, \"clusterid\", \"id of the cluster containing this tx\"},",
      "path": "src/rpc/mempool.cpp",
      "position": 1,
      "original_position": 9,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "ce414135924f2ab015e785b95114f1f998c45043",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "About the `clusterid` (`m_next_cluster_id`), I don’t think it’s a good idea to use it as a tie-breaker in `CompareMiningScore` as it’s just a monotonic counter, it’s not information perfomative for a mining score. You could use weight at least or reception timestamp e.g oldest the tx-relay reception more well-propagated on the network, already in every miner mempool.",
      "created_at": "2024-03-08T03:11:15Z",
      "updated_at": "2024-03-08T03:55:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1517111975",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517111975"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 262,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517112700",
      "pull_request_review_id": 1923884910,
      "id": 1517112700,
      "node_id": "PRRC_kwDOABII585abU18",
      "diff_hunk": "@@ -370,6 +420,76 @@ UniValue MempoolToJSON(const CTxMemPool& pool, bool verbose, bool include_mempoo\n     }\n }\n \n+static RPCHelpMan getmempoolfeesize()\n+{\n+    return RPCHelpMan{\"getmempoolfeesize\",\n+        \"Returns fee/size data for the whole mempool.\",",
      "path": "src/rpc/mempool.cpp",
      "position": 1,
      "original_position": 126,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "ce414135924f2ab015e785b95114f1f998c45043",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Obviously you can add fee/weight units here. ",
      "created_at": "2024-03-08T03:12:43Z",
      "updated_at": "2024-03-08T03:55:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1517112700",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517112700"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 426,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517121744",
      "pull_request_review_id": 1923884910,
      "id": 1517121744,
      "node_id": "PRRC_kwDOABII585abXDQ",
      "diff_hunk": "@@ -0,0 +1,157 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_FEEFRAC_H\n+#define BITCOIN_UTIL_FEEFRAC_H\n+\n+#include <assert.h>\n+#include <stdint.h>\n+\n+/** Data structure storing a fee and size, ordered by increasing fee/size.\n+ *\n+ * The size of a FeeFrac cannot be zero unless the fee is also zero.\n+ *\n+ * FeeFracs have a total ordering, first by increasing feerate (ratio of fee over size), and then\n+ * by decreasing size. The empty FeeFrac (fee and size both 0) sorts last. So for example, the",
      "path": "src/util/feefrac.h",
      "position": 1,
      "original_position": 16,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "bb1bc54a7c980fb220d32e16e9504d53a87dcee8",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This is not perfect as you could use weight units and even have to consider what is the minimal satisfying witness under given consensus rules for a given transaction, especially if you have multiple candidate for a spend given a `witnessScript`. You have already such types of transaction like second-stage LN transactions (either revocation path or preimage/timeout path).",
      "created_at": "2024-03-08T03:31:50Z",
      "updated_at": "2024-03-08T03:55:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1517121744",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517121744"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 20,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517127592",
      "pull_request_review_id": 1923884910,
      "id": 1517127592,
      "node_id": "PRRC_kwDOABII585abYeo",
      "diff_hunk": "@@ -0,0 +1,157 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_FEEFRAC_H\n+#define BITCOIN_UTIL_FEEFRAC_H\n+\n+#include <assert.h>\n+#include <stdint.h>\n+\n+/** Data structure storing a fee and size, ordered by increasing fee/size.\n+ *\n+ * The size of a FeeFrac cannot be zero unless the fee is also zero.\n+ *\n+ * FeeFracs have a total ordering, first by increasing feerate (ratio of fee over size), and then\n+ * by decreasing size. The empty FeeFrac (fee and size both 0) sorts last. So for example, the\n+ * following FeeFracs are in sorted order:\n+ *\n+ * - fee=0 size=1 (feerate 0)\n+ * - fee=1 size=2 (feerate 0.5)\n+ * - fee=2 size=3 (feerate 0.667...)\n+ * - fee=2 size=2 (feerate 1)\n+ * - fee=1 size=1 (feerate 1)\n+ * - fee=3 size=2 (feerate 1.5)\n+ * - fee=2 size=1 (feerate 2)\n+ * - fee=0 size=0 (undefined feerate)\n+ *\n+ * A FeeFrac is considered \"better\" if it sorts after another, by this ordering. All standard\n+ * comparison operators (==, !=, >, <, >=, <=) respect this ordering.\n+ *\n+ * The >> and << operators only compare feerate and treat equal feerate but different size as\n+ * equivalent. The empty FeeFrac is neither lower or higher in feerate than any other.\n+ *\n+ * These comparisons are only guaranteed to be correct when the product of the highest fee and\n+ * highest size does not exceed 2^64-1. If the fee is a number in sats, and size in bytes, then\n+ * this allows up to 46116.86 BTC at size 4M, and 1844674.4 BTC at size 100k).",
      "path": "src/util/feefrac.h",
      "position": 1,
      "original_position": 36,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "bb1bc54a7c980fb220d32e16e9504d53a87dcee8",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I think this should be `MAX_MONEY` as `ReplacementChecks()` in `PreChecks()` are done before `PolicyScriptChecks()` and `ConsensusScriptChecks()` so an adversary does not have to own the solution of the scriptpubkey to fake `46116.86` or `1844674.4` of value in your local mempool, exceeds 2^64-1 and mess up with linearization.",
      "created_at": "2024-03-08T03:44:35Z",
      "updated_at": "2024-03-08T03:55:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1517127592",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1517127592"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 36,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1592480884",
      "pull_request_review_id": 2043188274,
      "id": 1592480884,
      "node_id": "PRRC_kwDOABII585e61R0",
      "diff_hunk": "@@ -0,0 +1,1352 @@\n+#include <kernel/txgraph.h>\n+#include <cluster_linearize.h>\n+#include <util/time.h>\n+#include <logging.h>\n+#include <reverse_iterator.h>\n+#include <util/strencodings.h>\n+\n+void TxGraphCluster::AddTransaction(const TxEntry& entry, bool sort)\n+{\n+    m_chunks.emplace_back(entry.GetModifiedFee(), entry.GetTxSize());\n+    m_chunks.back().txs.emplace_back(entry);\n+    //entry.m_cluster = this; XXX do we need this? it breaks the rbf logic.\n+    ++m_tx_count;\n+    m_tx_size += entry.GetTxSize();\n+    if (sort) Sort();\n+    return;\n+}\n+\n+void TxGraphCluster::RemoveTransaction(const TxEntry& entry)\n+{\n+    m_chunks[entry.m_loc.first].txs.erase(entry.m_loc.second);\n+\n+    // Chunk (or cluster) may now be empty, but this will get cleaned up\n+    // when the cluster is re-sorted (or when the cluster is deleted) Note:\n+    // if we cleaned up empty chunks here, then this would break the\n+    // locations of other entries in the cluster. Since we would like to be\n+    // able to do multiple removals in a row and then clean up the sort, we\n+    // can't clean up empty chunks here.\n+    --m_tx_count;\n+    m_tx_size -= entry.m_virtual_size;\n+    return;\n+}\n+\n+void TxGraphCluster::RechunkFromLinearization(std::vector<TxEntry::TxEntryRef>& txs, bool reassign_locations)\n+{\n+    m_chunks.clear();\n+    m_tx_size = 0;\n+\n+    for (auto txentry : txs) {\n+        m_chunks.emplace_back(txentry.get().GetModifiedFee(), txentry.get().GetTxSize());\n+        m_chunks.back().txs.emplace_back(txentry);\n+        while (m_chunks.size() >= 2) {\n+            auto cur_iter = std::prev(m_chunks.end());\n+            auto prev_iter = std::prev(cur_iter);\n+            // We only combine chunks if the feerate would go up; if two\n+            // chunks have equal feerate, we prefer to keep the smaller\n+            // chunksize (which is generally better for both mining and\n+            // eviction).\n+            if (prev_iter->feerate < cur_iter->feerate) {\n+                prev_iter->feerate += cur_iter->feerate;\n+                prev_iter->txs.splice(prev_iter->txs.end(), cur_iter->txs, cur_iter->txs.begin(), cur_iter->txs.end());\n+                m_chunks.erase(cur_iter);\n+            } else {\n+                break;\n+            }\n+        }\n+        m_tx_size += txentry.get().GetTxSize();\n+    }\n+\n+    if (reassign_locations) {\n+        AssignTransactions();\n+    }\n+}\n+\n+void TxGraphCluster::AssignTransactions()\n+{\n+    // Update locations of all transactions\n+    for (size_t i=0; i<m_chunks.size(); ++i) {\n+        for (auto it = m_chunks[i].txs.begin(); it != m_chunks[i].txs.end(); ++it) {\n+            it->get().m_cluster = this;\n+            it->get().m_loc = {i, it};\n+        }\n+    }\n+}\n+\n+TxEntry::TxEntryRef TxGraphCluster::GetLastTransaction()\n+{\n+    assert(m_tx_count > 0);\n+    for (auto chunkit = m_chunks.rbegin(); chunkit != m_chunks.rend(); ++chunkit) {\n+        if (!chunkit->txs.empty()) return chunkit->txs.back();\n+    }\n+    // Unreachable\n+    assert(false);\n+}\n+\n+bool TxGraphCluster::Check() const\n+{\n+    // First check that the metadata is correct.\n+    int64_t tx_count = 0;\n+    int64_t tx_size = 0;\n+    for (auto &chunk : m_chunks) {\n+        for (auto &tx : chunk.txs) {\n+            ++tx_count;\n+            tx_size += tx.get().GetTxSize();\n+        }\n+    }\n+    if (tx_count != m_tx_count) return false;\n+    if (tx_size != m_tx_size) return false;\n+\n+    // Check topology.\n+    std::set<TxEntry::TxEntryRef, TxEntry::CompareById> seen_elements;\n+    for (auto &chunk : m_chunks) {\n+        for (auto tx : chunk.txs) {\n+            for (auto parent : tx.get().GetTxEntryParents()) {\n+                if (seen_elements.count(parent) == 0) return false;\n+            }\n+            seen_elements.insert(tx);\n+            if (tx.get().m_cluster != this) return false;\n+            if (&m_chunks[tx.get().m_loc.first] != &chunk) return false;\n+            if (tx.get().m_loc.second->get().unique_id != tx.get().unique_id) return false;\n+        }\n+    }\n+    return true;\n+}\n+\n+bool TxGraphCluster::CheckTopo() const\n+{\n+    // Check topology.\n+    std::set<TxEntry::TxEntryRef, TxEntry::CompareById> seen_elements;\n+    for (auto &chunk : m_chunks) {\n+        for (auto tx : chunk.txs) {\n+            for (auto parent : tx.get().GetTxEntryParents()) {\n+                if (seen_elements.count(parent) == 0) return false;\n+            }\n+            seen_elements.insert(tx);\n+        }\n+    }\n+    return true;\n+}\n+\n+namespace {\n+\n+template <typename SetType>\n+std::vector<TxEntry::TxEntryRef> InvokeSort(size_t tx_count, const std::vector<TxGraphCluster::Chunk>& chunks)\n+{\n+    std::vector<TxEntry::TxEntryRef> txs;\n+    cluster_linearize::Cluster<SetType> cluster;\n+    const auto time_1{SteadyClock::now()};\n+\n+    std::vector<TxEntry::TxEntryRef> orig_txs;\n+    std::vector<std::pair<const TxEntry*, unsigned>> entry_to_index;\n+    cluster_linearize::LinearizationResult result;\n+\n+    cluster.reserve(tx_count);\n+    entry_to_index.reserve(tx_count);\n+    cluster.clear();\n+    for (auto &chunk : chunks) {\n+        for (auto tx : chunk.txs) {\n+            orig_txs.emplace_back(tx);\n+            cluster.emplace_back(FeeFrac(tx.get().GetModifiedFee(), tx.get().GetTxSize()), SetType{});\n+            entry_to_index.emplace_back(&(tx.get()), cluster.size() - 1);\n+        }\n+    }\n+    std::sort(entry_to_index.begin(), entry_to_index.end());\n+    for (size_t i=0; i<orig_txs.size(); ++i) {\n+        for (auto& parent : orig_txs[i].get().GetTxEntryParents()) {\n+            auto it = std::lower_bound(entry_to_index.begin(), entry_to_index.end(), &(parent.get()),\n+                    [&](const auto& a, const auto& b) { return std::less<const TxEntry*>()(a.first, b); });\n+            assert(it != entry_to_index.end());\n+            assert(it->first == &(parent.get()));\n+            cluster[i].second.Set(it->second);\n+        }\n+    }\n+    result = cluster_linearize::LinearizeCluster(cluster, 10, 0);\n+    if (tx_count > 10) {\n+        std::vector<unsigned int> orig_linearization;\n+        orig_linearization.reserve(tx_count);\n+        for (unsigned int i=0; i<cluster.size(); ++i) {\n+            orig_linearization.push_back(i);\n+        }\n+        result.linearization = cluster_linearize::MergeLinearizations(cluster, result.linearization, orig_linearization);\n+        cluster_linearize::PostLinearization(cluster, result.linearization);\n+        cluster_linearize::PostLinearization<SetType, true>(cluster, result.linearization);\n+    }\n+    txs.clear();\n+    for (auto index : result.linearization) {\n+        txs.push_back(orig_txs[index]);\n+    }\n+\n+    const auto time_2{SteadyClock::now()};\n+    if (tx_count >= 10) {\n+        double time_millis = Ticks<MillisecondsDouble>(time_2-time_1);\n+\n+        LogPrint(BCLog::BENCH, \"InvokeSort linearize cluster: %zu txs, %.4fms, %u iter, %.1fns/iter, %u comps, %.1fns/comp, encoding: %s\\n\",\n+                tx_count,\n+                time_millis,\n+                result.iterations,\n+                time_millis * 1000000.0 / (result.iterations > 0 ? result.iterations : result.iterations+1),\n+                result.comparisons,\n+                time_millis * 1000000.0 / (result.comparisons > 0 ? result.comparisons : result.comparisons+1),\n+                HexStr(cluster_linearize::DumpCluster(cluster)));\n+    }\n+    return txs;\n+}\n+\n+} // namespace\n+\n+void TxGraphCluster::Sort(bool reassign_locations)\n+{\n+    std::vector<TxEntry::TxEntryRef> txs;\n+    if (m_tx_count <= 32) {\n+        txs = InvokeSort<BitSet<32>>(m_tx_count, m_chunks);\n+    } else if (m_tx_count <= 64) {\n+        txs = InvokeSort<BitSet<64>>(m_tx_count, m_chunks);\n+    } else if (m_tx_count <= 128) {\n+        txs = InvokeSort<BitSet<128>>(m_tx_count, m_chunks);\n+    } else if (m_tx_count <= 192) {\n+        txs = InvokeSort<BitSet<192>>(m_tx_count, m_chunks);\n+    } else if (m_tx_count <= 256) {\n+        txs = InvokeSort<BitSet<256>>(m_tx_count, m_chunks);\n+    } else if (m_tx_count <= 320) {\n+        txs = InvokeSort<BitSet<320>>(m_tx_count, m_chunks);\n+    } else if (m_tx_count <= 384) {\n+        txs = InvokeSort<BitSet<384>>(m_tx_count, m_chunks);\n+    } else if (m_tx_count <= 1280) {\n+        txs = InvokeSort<BitSet<1280>>(m_tx_count, m_chunks);\n+    } else {\n+        // Only do the topological sort for big clusters\n+        for (auto &chunk : m_chunks) {\n+            for (auto chunk_tx : chunk.txs) {\n+                txs.emplace_back(chunk_tx.get());\n+            }\n+        }\n+        m_tx_graph->TopoSort(txs);\n+    }\n+    RechunkFromLinearization(txs, reassign_locations);\n+}\n+\n+void TxGraphCluster::Rechunk()\n+{\n+    std::vector<TxEntry::TxEntryRef> txs;\n+\n+    // Insert all transactions from the cluster into txs\n+    for (auto &chunk : m_chunks) {\n+        for (auto chunk_tx : chunk.txs) {\n+            txs.push_back(chunk_tx);\n+        }\n+    }\n+\n+    RechunkFromLinearization(txs, true);\n+}\n+\n+void TxGraphCluster::MergeCopy(std::vector<TxGraphCluster*>::const_iterator first, std::vector<TxGraphCluster*>::const_iterator last)\n+{\n+    if (first == last) return;\n+\n+    for (auto it=first; it != last; ++it) {\n+        for (auto &chunk : (*it)->m_chunks) {\n+            for (auto &tx: chunk.txs) {\n+                AddTransaction(tx, false);\n+            }\n+        }\n+    }\n+}\n+\n+// Merge the clusters from [first, last) into this cluster.\n+void TxGraphCluster::Merge(std::vector<TxGraphCluster*>::iterator first, std::vector<TxGraphCluster*>::iterator last, bool this_cluster_first)\n+{\n+    // Check to see if we have anything to do.\n+    if (first == last) return;\n+\n+    std::vector<Chunk> new_chunks;\n+    std::vector<TxGraphCluster::HeapEntry> heap_chunks;\n+\n+    int64_t total_txs = m_tx_count;\n+\n+    // Make a heap of all the best chunks.\n+    for (auto it = first; it != last; ++it) {\n+        if ((*it)->m_chunks.size() > 0) {\n+            heap_chunks.emplace_back((*it)->m_chunks.begin(), *it);\n+        }\n+        total_txs += (*it)->m_tx_count;\n+    }\n+\n+    // During a reorg, we want to merge clusters corresponding to descendants\n+    // so that they appear after the cluster with their parent. This allows us\n+    // to trim megaclusters down to our cluster size limit in a way that\n+    // respects topology but still preferences higher feerate chunks over lower\n+    // feerate chunks.\n+    if (this_cluster_first) {\n+        new_chunks = std::move(m_chunks);\n+        m_chunks.clear();\n+    } else if (m_tx_count > 0) {\n+        heap_chunks.emplace_back(m_chunks.begin(), this);\n+    }\n+    // Define comparison operator on our heap entries (using feerate of chunks).\n+    auto cmp = [](const TxGraphCluster::HeapEntry& a, const TxGraphCluster::HeapEntry& b) {\n+        return a.first->feerate < b.first->feerate;\n+    };\n+\n+    std::make_heap(heap_chunks.begin(), heap_chunks.end(), cmp);\n+\n+    while (!heap_chunks.empty()) {\n+        // Take the best chunk from the heap.\n+        auto best_chunk = heap_chunks.front();\n+        new_chunks.emplace_back(std::move(*(best_chunk.first)));\n+        // Remove the best chunk from the heap.\n+        std::pop_heap(heap_chunks.begin(), heap_chunks.end(), cmp);\n+        heap_chunks.pop_back();\n+        // If the cluster has more chunks, add the next best chunk to the heap.\n+        ++best_chunk.first;\n+        if (best_chunk.first != best_chunk.second->m_chunks.end()) {\n+            heap_chunks.emplace_back(best_chunk.first, best_chunk.second);\n+            std::push_heap(heap_chunks.begin(), heap_chunks.end(), cmp);\n+        }\n+    }\n+\n+    // At this point we've merged the clusters into new_chunks.\n+    m_chunks = std::move(new_chunks);\n+\n+    m_tx_count=0;\n+    m_tx_size=0;\n+\n+    for (size_t i=0; i<m_chunks.size(); ++i) {\n+        m_tx_count += m_chunks[i].txs.size();\n+        m_tx_size += m_chunks[i].feerate.size;\n+    }\n+\n+    // Update the cluster and location information for each transaction.\n+    AssignTransactions();\n+\n+    assert(m_tx_count == total_txs);\n+}\n+\n+void TxGraph::UpdateClusterIndex(TxGraphCluster* c)\n+{\n+    auto it = m_cluster_index.get<id>().find(c->m_id);\n+    if (it != m_cluster_index.get<id>().end()) {\n+        m_cluster_index.get<id>().erase(it);\n+    }\n+    m_cluster_index.insert(c);\n+}\n+\n+void TxGraph::EraseCluster(TxGraphCluster* c)\n+{\n+    LOCK(cs);\n+    auto it = m_cluster_index.get<id>().find(c->m_id);\n+    if (it != m_cluster_index.get<id>().end()) {\n+        m_cluster_index.get<id>().erase(it);\n+    }\n+    m_cluster_map.erase(c->m_id);\n+}\n+\n+void TxGraph::AddTx(TxEntry *new_tx, int32_t vsize, CAmount modified_fee, const std::vector<TxEntry::TxEntryRef>& parents)\n+{\n+    LOCK(cs);\n+    new_tx->m_virtual_size = vsize;\n+    new_tx->m_modified_fee = modified_fee;\n+    new_tx->GetTxEntryParents().clear();\n+    // Figure out which cluster this transaction belongs to.\n+    std::vector<TxGraphCluster*> clusters_to_merge;\n+    {\n+        WITH_FRESH_EPOCH(m_epoch);\n+        for (auto p : parents) {\n+            UpdateParent(*new_tx, p, true);\n+            UpdateChild(p, *new_tx, true);\n+            if (!visited(p.get().m_cluster)) {\n+                clusters_to_merge.push_back(p.get().m_cluster);\n+            }\n+        }\n+    }\n+\n+    // Merge all the clusters together.\n+    if (clusters_to_merge.size() == 0) {\n+        // No parents, make a new cluster.\n+        new_tx->m_cluster = AssignTxGraphCluster();\n+        new_tx->m_cluster->AddTransaction(*new_tx, true);\n+        cachedInnerUsage += new_tx->m_cluster->GetMemoryUsage();\n+        UpdateClusterIndex(new_tx->m_cluster);\n+    } else if (clusters_to_merge.size() == 1) {\n+        cachedInnerUsage -= clusters_to_merge[0]->GetMemoryUsage();\n+        // Only one parent cluster: add to it.\n+        new_tx->m_cluster = clusters_to_merge[0];\n+        clusters_to_merge[0]->AddTransaction(*new_tx, true);\n+        cachedInnerUsage += clusters_to_merge[0]->GetMemoryUsage();\n+        UpdateClusterIndex(new_tx->m_cluster);\n+    } else {\n+        cachedInnerUsage -= clusters_to_merge[0]->GetMemoryUsage();\n+        clusters_to_merge[0]->Merge(clusters_to_merge.begin()+1, clusters_to_merge.end(), false);\n+        // Add this transaction to the cluster.\n+        new_tx->m_cluster = clusters_to_merge[0];\n+        clusters_to_merge[0]->AddTransaction(*new_tx, true);\n+        UpdateClusterIndex(new_tx->m_cluster);\n+        // Need to delete the other clusters.\n+        for (auto it=clusters_to_merge.begin()+1; it != clusters_to_merge.end(); ++it) {\n+            cachedInnerUsage -= (*it)->GetMemoryUsage();\n+            EraseCluster(*it);\n+        }\n+        cachedInnerUsage += clusters_to_merge[0]->GetMemoryUsage();\n+    }\n+}\n+\n+void TxGraph::RemoveTx(TxEntry::TxEntryRef remove_tx)\n+{\n+    cachedInnerUsage -= memusage::DynamicUsage(remove_tx.get().GetTxEntryParents()) + memusage::DynamicUsage(remove_tx.get().GetTxEntryChildren());\n+    // Update the parent/child state\n+    for (const TxEntry::TxEntryRef& parent: remove_tx.get().GetTxEntryParents()) {\n+        parent.get().GetTxEntryChildren().erase(remove_tx);\n+        cachedInnerUsage -= memusage::IncrementalDynamicUsage(parent.get().GetTxEntryChildren());\n+    }\n+    for (const TxEntry::TxEntryRef& child: remove_tx.get().GetTxEntryChildren()) {\n+        child.get().GetTxEntryParents().erase(remove_tx);\n+        cachedInnerUsage -= memusage::IncrementalDynamicUsage(child.get().GetTxEntryParents());\n+    }\n+    // Update the cluster\n+    remove_tx.get().m_cluster->RemoveTransaction(remove_tx.get());\n+}\n+\n+\n+std::vector<TxEntry::TxEntryRef> TxGraph::GetDescendants(const std::vector<TxEntry::TxEntryRef>& txs) const\n+{\n+    std::vector<TxEntry::TxEntryRef> result{}, work_queue{};\n+\n+    LOCK(cs);\n+\n+    WITH_FRESH_EPOCH(m_epoch);\n+    for (auto tx : txs) {\n+        if (!visited(tx)) {\n+            work_queue.push_back(tx);\n+        }\n+    }\n+\n+    while (!work_queue.empty()) {\n+        auto it = work_queue.back();\n+        work_queue.pop_back();\n+        result.push_back(it);\n+        for (auto& child: it.get().GetTxEntryChildren()) {\n+            if (!visited(child.get())) {\n+                work_queue.push_back(child);\n+            }\n+        }\n+    }\n+    return result;\n+}\n+\n+std::vector<TxEntry::TxEntryRef> TxGraph::GetAncestors(const std::vector<TxEntry::TxEntryRef>& parents) const\n+{\n+    std::vector<TxEntry::TxEntryRef> result{}, work_queue{};\n+\n+    LOCK(cs);\n+\n+    WITH_FRESH_EPOCH(m_epoch);\n+    for (auto p : parents) {\n+        visited(p);\n+        work_queue.push_back(p);\n+    }\n+\n+    while (!work_queue.empty()) {\n+        auto it = work_queue.back();\n+        work_queue.pop_back();\n+        result.push_back(it);\n+        for (auto& parent: it.get().parents) {\n+            if (!visited(parent.get())) {\n+                work_queue.push_back(parent);\n+            }\n+        }\n+    }\n+    return result;\n+}\n+\n+std::vector<TxEntry::TxEntryRef> TxGraph::GatherAllClusterTransactions(const std::vector<TxEntry::TxEntryRef> &txs) const\n+{\n+    LOCK(cs);\n+\n+    WITH_FRESH_EPOCH(m_epoch);\n+    std::vector<TxEntry::TxEntryRef> result;\n+    for (auto tx : txs) {\n+        if (!visited(tx.get().m_cluster)) {\n+            for (auto &chunk : tx.get().m_cluster->m_chunks) {\n+                for (auto &txentry : chunk.txs) {\n+                    result.push_back(txentry);\n+                }\n+            }\n+        }\n+    }\n+    return result;\n+}\n+\n+TxGraphCluster* TxGraph::AssignTxGraphCluster()\n+{\n+    auto new_cluster = std::make_unique<TxGraphCluster>(m_next_cluster_id++, this);\n+    TxGraphCluster* ret = new_cluster.get(); // XXX No one is going to like this.\n+    m_cluster_map[new_cluster->m_id] = std::move(new_cluster);\n+    return ret;\n+}\n+\n+// When transactions are removed from a cluster, the cluster might get split\n+// into smaller clusters.\n+void TxGraph::RecalculateTxGraphClusterAndMaybeSort(TxGraphCluster *cluster, bool sort)\n+{\n+    // TODO: if the common case involves no cluster splitting, can we short\n+    // circuit the work here somehow?\n+\n+    // Wipe cluster assignments.\n+    std::vector<TxEntry::TxEntryRef> txs;\n+    for (auto& chunk : cluster->m_chunks) {\n+        for (auto& txentry: chunk.txs) {\n+            txentry.get().m_cluster = nullptr;\n+            txs.push_back(txentry);\n+        }\n+    }\n+    cluster->Clear();\n+\n+    // The first transaction gets to stay in the existing cluster.\n+    bool first = true;\n+    for (auto& txentry : txs) {\n+        if (txentry.get().m_cluster == nullptr) {",
      "path": "src/kernel/txgraph.cpp",
      "position": 1,
      "original_position": 507,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "c49e0444e5c474d5e1ac0af89e9bc27958f3ed31",
      "in_reply_to_id": null,
      "user": {
        "login": "Christewart",
        "id": 3514957,
        "node_id": "MDQ6VXNlcjM1MTQ5NTc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3514957?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Christewart",
        "html_url": "https://github.com/Christewart",
        "followers_url": "https://api.github.com/users/Christewart/followers",
        "following_url": "https://api.github.com/users/Christewart/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Christewart/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Christewart/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Christewart/subscriptions",
        "organizations_url": "https://api.github.com/users/Christewart/orgs",
        "repos_url": "https://api.github.com/users/Christewart/repos",
        "events_url": "https://api.github.com/users/Christewart/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Christewart/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Isn't this trivially true from this? https://github.com/bitcoin/bitcoin/blob/c49e0444e5c474d5e1ac0af89e9bc27958f3ed31/src/kernel/txgraph.cpp#L498",
      "created_at": "2024-05-07T13:25:53Z",
      "updated_at": "2024-05-07T13:27:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1592480884",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1592480884"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 522,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1592626258",
      "pull_request_review_id": 2043431230,
      "id": 1592626258,
      "node_id": "PRRC_kwDOABII585e7YxS",
      "diff_hunk": "@@ -547,6 +645,40 @@ static RPCHelpMan getmempooldescendants()\n     };\n }\n \n+static RPCHelpMan getmempoolcluster()\n+{\n+    return RPCHelpMan{\"getmempoolcluster\",\n+        \"\\nReturns mempool data for given cluster\\n\",\n+        {\n+            {\"id\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The cluster id (must be in mempool)\"},",
      "path": "src/rpc/mempool.cpp",
      "position": 1,
      "original_position": 261,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "c49e0444e5c474d5e1ac0af89e9bc27958f3ed31",
      "in_reply_to_id": null,
      "user": {
        "login": "Christewart",
        "id": 3514957,
        "node_id": "MDQ6VXNlcjM1MTQ5NTc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3514957?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Christewart",
        "html_url": "https://github.com/Christewart",
        "followers_url": "https://api.github.com/users/Christewart/followers",
        "following_url": "https://api.github.com/users/Christewart/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Christewart/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Christewart/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Christewart/subscriptions",
        "organizations_url": "https://api.github.com/users/Christewart/orgs",
        "repos_url": "https://api.github.com/users/Christewart/repos",
        "events_url": "https://api.github.com/users/Christewart/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Christewart/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "How are users of the RPC expected to obtain the set of `cluster_id`'s? \r\n\r\nIIUC, the way to do this currently is to query \r\n\r\n```\r\n./bin/bitcoin-cli getrawmempool true\r\n```\r\n\r\nand then aggregate the `cluster_id`'s yourself?",
      "created_at": "2024-05-07T14:50:23Z",
      "updated_at": "2024-05-07T15:00:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1592626258",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1592626258"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 659,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1594255018",
      "pull_request_review_id": 2046037783,
      "id": 1594255018,
      "node_id": "PRRC_kwDOABII585fBmaq",
      "diff_hunk": "@@ -547,6 +645,40 @@ static RPCHelpMan getmempooldescendants()\n     };\n }\n \n+static RPCHelpMan getmempoolcluster()\n+{\n+    return RPCHelpMan{\"getmempoolcluster\",\n+        \"\\nReturns mempool data for given cluster\\n\",\n+        {\n+            {\"id\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The cluster id (must be in mempool)\"},",
      "path": "src/rpc/mempool.cpp",
      "position": 1,
      "original_position": 261,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "c49e0444e5c474d5e1ac0af89e9bc27958f3ed31",
      "in_reply_to_id": 1592626258,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Sjors suggested here https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1399137900 that I add a way to do it by transaction hash, which would be easy. Let me know if you have other suggestions...",
      "created_at": "2024-05-08T15:45:24Z",
      "updated_at": "2024-05-08T15:45:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1594255018",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1594255018"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 659,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1594262607",
      "pull_request_review_id": 2046049861,
      "id": 1594262607,
      "node_id": "PRRC_kwDOABII585fBoRP",
      "diff_hunk": "@@ -0,0 +1,1352 @@\n+#include <kernel/txgraph.h>\n+#include <cluster_linearize.h>\n+#include <util/time.h>\n+#include <logging.h>\n+#include <reverse_iterator.h>\n+#include <util/strencodings.h>\n+\n+void TxGraphCluster::AddTransaction(const TxEntry& entry, bool sort)\n+{\n+    m_chunks.emplace_back(entry.GetModifiedFee(), entry.GetTxSize());\n+    m_chunks.back().txs.emplace_back(entry);\n+    //entry.m_cluster = this; XXX do we need this? it breaks the rbf logic.\n+    ++m_tx_count;\n+    m_tx_size += entry.GetTxSize();\n+    if (sort) Sort();\n+    return;\n+}\n+\n+void TxGraphCluster::RemoveTransaction(const TxEntry& entry)\n+{\n+    m_chunks[entry.m_loc.first].txs.erase(entry.m_loc.second);\n+\n+    // Chunk (or cluster) may now be empty, but this will get cleaned up\n+    // when the cluster is re-sorted (or when the cluster is deleted) Note:\n+    // if we cleaned up empty chunks here, then this would break the\n+    // locations of other entries in the cluster. Since we would like to be\n+    // able to do multiple removals in a row and then clean up the sort, we\n+    // can't clean up empty chunks here.\n+    --m_tx_count;\n+    m_tx_size -= entry.m_virtual_size;\n+    return;\n+}\n+\n+void TxGraphCluster::RechunkFromLinearization(std::vector<TxEntry::TxEntryRef>& txs, bool reassign_locations)\n+{\n+    m_chunks.clear();\n+    m_tx_size = 0;\n+\n+    for (auto txentry : txs) {\n+        m_chunks.emplace_back(txentry.get().GetModifiedFee(), txentry.get().GetTxSize());\n+        m_chunks.back().txs.emplace_back(txentry);\n+        while (m_chunks.size() >= 2) {\n+            auto cur_iter = std::prev(m_chunks.end());\n+            auto prev_iter = std::prev(cur_iter);\n+            // We only combine chunks if the feerate would go up; if two\n+            // chunks have equal feerate, we prefer to keep the smaller\n+            // chunksize (which is generally better for both mining and\n+            // eviction).\n+            if (prev_iter->feerate < cur_iter->feerate) {\n+                prev_iter->feerate += cur_iter->feerate;\n+                prev_iter->txs.splice(prev_iter->txs.end(), cur_iter->txs, cur_iter->txs.begin(), cur_iter->txs.end());\n+                m_chunks.erase(cur_iter);\n+            } else {\n+                break;\n+            }\n+        }\n+        m_tx_size += txentry.get().GetTxSize();\n+    }\n+\n+    if (reassign_locations) {\n+        AssignTransactions();\n+    }\n+}\n+\n+void TxGraphCluster::AssignTransactions()\n+{\n+    // Update locations of all transactions\n+    for (size_t i=0; i<m_chunks.size(); ++i) {\n+        for (auto it = m_chunks[i].txs.begin(); it != m_chunks[i].txs.end(); ++it) {\n+            it->get().m_cluster = this;\n+            it->get().m_loc = {i, it};\n+        }\n+    }\n+}\n+\n+TxEntry::TxEntryRef TxGraphCluster::GetLastTransaction()\n+{\n+    assert(m_tx_count > 0);\n+    for (auto chunkit = m_chunks.rbegin(); chunkit != m_chunks.rend(); ++chunkit) {\n+        if (!chunkit->txs.empty()) return chunkit->txs.back();\n+    }\n+    // Unreachable\n+    assert(false);\n+}\n+\n+bool TxGraphCluster::Check() const\n+{\n+    // First check that the metadata is correct.\n+    int64_t tx_count = 0;\n+    int64_t tx_size = 0;\n+    for (auto &chunk : m_chunks) {\n+        for (auto &tx : chunk.txs) {\n+            ++tx_count;\n+            tx_size += tx.get().GetTxSize();\n+        }\n+    }\n+    if (tx_count != m_tx_count) return false;\n+    if (tx_size != m_tx_size) return false;\n+\n+    // Check topology.\n+    std::set<TxEntry::TxEntryRef, TxEntry::CompareById> seen_elements;\n+    for (auto &chunk : m_chunks) {\n+        for (auto tx : chunk.txs) {\n+            for (auto parent : tx.get().GetTxEntryParents()) {\n+                if (seen_elements.count(parent) == 0) return false;\n+            }\n+            seen_elements.insert(tx);\n+            if (tx.get().m_cluster != this) return false;\n+            if (&m_chunks[tx.get().m_loc.first] != &chunk) return false;\n+            if (tx.get().m_loc.second->get().unique_id != tx.get().unique_id) return false;\n+        }\n+    }\n+    return true;\n+}\n+\n+bool TxGraphCluster::CheckTopo() const\n+{\n+    // Check topology.\n+    std::set<TxEntry::TxEntryRef, TxEntry::CompareById> seen_elements;\n+    for (auto &chunk : m_chunks) {\n+        for (auto tx : chunk.txs) {\n+            for (auto parent : tx.get().GetTxEntryParents()) {\n+                if (seen_elements.count(parent) == 0) return false;\n+            }\n+            seen_elements.insert(tx);\n+        }\n+    }\n+    return true;\n+}\n+\n+namespace {\n+\n+template <typename SetType>\n+std::vector<TxEntry::TxEntryRef> InvokeSort(size_t tx_count, const std::vector<TxGraphCluster::Chunk>& chunks)\n+{\n+    std::vector<TxEntry::TxEntryRef> txs;\n+    cluster_linearize::Cluster<SetType> cluster;\n+    const auto time_1{SteadyClock::now()};\n+\n+    std::vector<TxEntry::TxEntryRef> orig_txs;\n+    std::vector<std::pair<const TxEntry*, unsigned>> entry_to_index;\n+    cluster_linearize::LinearizationResult result;\n+\n+    cluster.reserve(tx_count);\n+    entry_to_index.reserve(tx_count);\n+    cluster.clear();\n+    for (auto &chunk : chunks) {\n+        for (auto tx : chunk.txs) {\n+            orig_txs.emplace_back(tx);\n+            cluster.emplace_back(FeeFrac(tx.get().GetModifiedFee(), tx.get().GetTxSize()), SetType{});\n+            entry_to_index.emplace_back(&(tx.get()), cluster.size() - 1);\n+        }\n+    }\n+    std::sort(entry_to_index.begin(), entry_to_index.end());\n+    for (size_t i=0; i<orig_txs.size(); ++i) {\n+        for (auto& parent : orig_txs[i].get().GetTxEntryParents()) {\n+            auto it = std::lower_bound(entry_to_index.begin(), entry_to_index.end(), &(parent.get()),\n+                    [&](const auto& a, const auto& b) { return std::less<const TxEntry*>()(a.first, b); });\n+            assert(it != entry_to_index.end());\n+            assert(it->first == &(parent.get()));\n+            cluster[i].second.Set(it->second);\n+        }\n+    }\n+    result = cluster_linearize::LinearizeCluster(cluster, 10, 0);\n+    if (tx_count > 10) {\n+        std::vector<unsigned int> orig_linearization;\n+        orig_linearization.reserve(tx_count);\n+        for (unsigned int i=0; i<cluster.size(); ++i) {\n+            orig_linearization.push_back(i);\n+        }\n+        result.linearization = cluster_linearize::MergeLinearizations(cluster, result.linearization, orig_linearization);\n+        cluster_linearize::PostLinearization(cluster, result.linearization);\n+        cluster_linearize::PostLinearization<SetType, true>(cluster, result.linearization);\n+    }\n+    txs.clear();\n+    for (auto index : result.linearization) {\n+        txs.push_back(orig_txs[index]);\n+    }\n+\n+    const auto time_2{SteadyClock::now()};\n+    if (tx_count >= 10) {\n+        double time_millis = Ticks<MillisecondsDouble>(time_2-time_1);\n+\n+        LogPrint(BCLog::BENCH, \"InvokeSort linearize cluster: %zu txs, %.4fms, %u iter, %.1fns/iter, %u comps, %.1fns/comp, encoding: %s\\n\",\n+                tx_count,\n+                time_millis,\n+                result.iterations,\n+                time_millis * 1000000.0 / (result.iterations > 0 ? result.iterations : result.iterations+1),\n+                result.comparisons,\n+                time_millis * 1000000.0 / (result.comparisons > 0 ? result.comparisons : result.comparisons+1),\n+                HexStr(cluster_linearize::DumpCluster(cluster)));\n+    }\n+    return txs;\n+}\n+\n+} // namespace\n+\n+void TxGraphCluster::Sort(bool reassign_locations)\n+{\n+    std::vector<TxEntry::TxEntryRef> txs;\n+    if (m_tx_count <= 32) {\n+        txs = InvokeSort<BitSet<32>>(m_tx_count, m_chunks);\n+    } else if (m_tx_count <= 64) {\n+        txs = InvokeSort<BitSet<64>>(m_tx_count, m_chunks);\n+    } else if (m_tx_count <= 128) {\n+        txs = InvokeSort<BitSet<128>>(m_tx_count, m_chunks);\n+    } else if (m_tx_count <= 192) {\n+        txs = InvokeSort<BitSet<192>>(m_tx_count, m_chunks);\n+    } else if (m_tx_count <= 256) {\n+        txs = InvokeSort<BitSet<256>>(m_tx_count, m_chunks);\n+    } else if (m_tx_count <= 320) {\n+        txs = InvokeSort<BitSet<320>>(m_tx_count, m_chunks);\n+    } else if (m_tx_count <= 384) {\n+        txs = InvokeSort<BitSet<384>>(m_tx_count, m_chunks);\n+    } else if (m_tx_count <= 1280) {\n+        txs = InvokeSort<BitSet<1280>>(m_tx_count, m_chunks);\n+    } else {\n+        // Only do the topological sort for big clusters\n+        for (auto &chunk : m_chunks) {\n+            for (auto chunk_tx : chunk.txs) {\n+                txs.emplace_back(chunk_tx.get());\n+            }\n+        }\n+        m_tx_graph->TopoSort(txs);\n+    }\n+    RechunkFromLinearization(txs, reassign_locations);\n+}\n+\n+void TxGraphCluster::Rechunk()\n+{\n+    std::vector<TxEntry::TxEntryRef> txs;\n+\n+    // Insert all transactions from the cluster into txs\n+    for (auto &chunk : m_chunks) {\n+        for (auto chunk_tx : chunk.txs) {\n+            txs.push_back(chunk_tx);\n+        }\n+    }\n+\n+    RechunkFromLinearization(txs, true);\n+}\n+\n+void TxGraphCluster::MergeCopy(std::vector<TxGraphCluster*>::const_iterator first, std::vector<TxGraphCluster*>::const_iterator last)\n+{\n+    if (first == last) return;\n+\n+    for (auto it=first; it != last; ++it) {\n+        for (auto &chunk : (*it)->m_chunks) {\n+            for (auto &tx: chunk.txs) {\n+                AddTransaction(tx, false);\n+            }\n+        }\n+    }\n+}\n+\n+// Merge the clusters from [first, last) into this cluster.\n+void TxGraphCluster::Merge(std::vector<TxGraphCluster*>::iterator first, std::vector<TxGraphCluster*>::iterator last, bool this_cluster_first)\n+{\n+    // Check to see if we have anything to do.\n+    if (first == last) return;\n+\n+    std::vector<Chunk> new_chunks;\n+    std::vector<TxGraphCluster::HeapEntry> heap_chunks;\n+\n+    int64_t total_txs = m_tx_count;\n+\n+    // Make a heap of all the best chunks.\n+    for (auto it = first; it != last; ++it) {\n+        if ((*it)->m_chunks.size() > 0) {\n+            heap_chunks.emplace_back((*it)->m_chunks.begin(), *it);\n+        }\n+        total_txs += (*it)->m_tx_count;\n+    }\n+\n+    // During a reorg, we want to merge clusters corresponding to descendants\n+    // so that they appear after the cluster with their parent. This allows us\n+    // to trim megaclusters down to our cluster size limit in a way that\n+    // respects topology but still preferences higher feerate chunks over lower\n+    // feerate chunks.\n+    if (this_cluster_first) {\n+        new_chunks = std::move(m_chunks);\n+        m_chunks.clear();\n+    } else if (m_tx_count > 0) {\n+        heap_chunks.emplace_back(m_chunks.begin(), this);\n+    }\n+    // Define comparison operator on our heap entries (using feerate of chunks).\n+    auto cmp = [](const TxGraphCluster::HeapEntry& a, const TxGraphCluster::HeapEntry& b) {\n+        return a.first->feerate < b.first->feerate;\n+    };\n+\n+    std::make_heap(heap_chunks.begin(), heap_chunks.end(), cmp);\n+\n+    while (!heap_chunks.empty()) {\n+        // Take the best chunk from the heap.\n+        auto best_chunk = heap_chunks.front();\n+        new_chunks.emplace_back(std::move(*(best_chunk.first)));\n+        // Remove the best chunk from the heap.\n+        std::pop_heap(heap_chunks.begin(), heap_chunks.end(), cmp);\n+        heap_chunks.pop_back();\n+        // If the cluster has more chunks, add the next best chunk to the heap.\n+        ++best_chunk.first;\n+        if (best_chunk.first != best_chunk.second->m_chunks.end()) {\n+            heap_chunks.emplace_back(best_chunk.first, best_chunk.second);\n+            std::push_heap(heap_chunks.begin(), heap_chunks.end(), cmp);\n+        }\n+    }\n+\n+    // At this point we've merged the clusters into new_chunks.\n+    m_chunks = std::move(new_chunks);\n+\n+    m_tx_count=0;\n+    m_tx_size=0;\n+\n+    for (size_t i=0; i<m_chunks.size(); ++i) {\n+        m_tx_count += m_chunks[i].txs.size();\n+        m_tx_size += m_chunks[i].feerate.size;\n+    }\n+\n+    // Update the cluster and location information for each transaction.\n+    AssignTransactions();\n+\n+    assert(m_tx_count == total_txs);\n+}\n+\n+void TxGraph::UpdateClusterIndex(TxGraphCluster* c)\n+{\n+    auto it = m_cluster_index.get<id>().find(c->m_id);\n+    if (it != m_cluster_index.get<id>().end()) {\n+        m_cluster_index.get<id>().erase(it);\n+    }\n+    m_cluster_index.insert(c);\n+}\n+\n+void TxGraph::EraseCluster(TxGraphCluster* c)\n+{\n+    LOCK(cs);\n+    auto it = m_cluster_index.get<id>().find(c->m_id);\n+    if (it != m_cluster_index.get<id>().end()) {\n+        m_cluster_index.get<id>().erase(it);\n+    }\n+    m_cluster_map.erase(c->m_id);\n+}\n+\n+void TxGraph::AddTx(TxEntry *new_tx, int32_t vsize, CAmount modified_fee, const std::vector<TxEntry::TxEntryRef>& parents)\n+{\n+    LOCK(cs);\n+    new_tx->m_virtual_size = vsize;\n+    new_tx->m_modified_fee = modified_fee;\n+    new_tx->GetTxEntryParents().clear();\n+    // Figure out which cluster this transaction belongs to.\n+    std::vector<TxGraphCluster*> clusters_to_merge;\n+    {\n+        WITH_FRESH_EPOCH(m_epoch);\n+        for (auto p : parents) {\n+            UpdateParent(*new_tx, p, true);\n+            UpdateChild(p, *new_tx, true);\n+            if (!visited(p.get().m_cluster)) {\n+                clusters_to_merge.push_back(p.get().m_cluster);\n+            }\n+        }\n+    }\n+\n+    // Merge all the clusters together.\n+    if (clusters_to_merge.size() == 0) {\n+        // No parents, make a new cluster.\n+        new_tx->m_cluster = AssignTxGraphCluster();\n+        new_tx->m_cluster->AddTransaction(*new_tx, true);\n+        cachedInnerUsage += new_tx->m_cluster->GetMemoryUsage();\n+        UpdateClusterIndex(new_tx->m_cluster);\n+    } else if (clusters_to_merge.size() == 1) {\n+        cachedInnerUsage -= clusters_to_merge[0]->GetMemoryUsage();\n+        // Only one parent cluster: add to it.\n+        new_tx->m_cluster = clusters_to_merge[0];\n+        clusters_to_merge[0]->AddTransaction(*new_tx, true);\n+        cachedInnerUsage += clusters_to_merge[0]->GetMemoryUsage();\n+        UpdateClusterIndex(new_tx->m_cluster);\n+    } else {\n+        cachedInnerUsage -= clusters_to_merge[0]->GetMemoryUsage();\n+        clusters_to_merge[0]->Merge(clusters_to_merge.begin()+1, clusters_to_merge.end(), false);\n+        // Add this transaction to the cluster.\n+        new_tx->m_cluster = clusters_to_merge[0];\n+        clusters_to_merge[0]->AddTransaction(*new_tx, true);\n+        UpdateClusterIndex(new_tx->m_cluster);\n+        // Need to delete the other clusters.\n+        for (auto it=clusters_to_merge.begin()+1; it != clusters_to_merge.end(); ++it) {\n+            cachedInnerUsage -= (*it)->GetMemoryUsage();\n+            EraseCluster(*it);\n+        }\n+        cachedInnerUsage += clusters_to_merge[0]->GetMemoryUsage();\n+    }\n+}\n+\n+void TxGraph::RemoveTx(TxEntry::TxEntryRef remove_tx)\n+{\n+    cachedInnerUsage -= memusage::DynamicUsage(remove_tx.get().GetTxEntryParents()) + memusage::DynamicUsage(remove_tx.get().GetTxEntryChildren());\n+    // Update the parent/child state\n+    for (const TxEntry::TxEntryRef& parent: remove_tx.get().GetTxEntryParents()) {\n+        parent.get().GetTxEntryChildren().erase(remove_tx);\n+        cachedInnerUsage -= memusage::IncrementalDynamicUsage(parent.get().GetTxEntryChildren());\n+    }\n+    for (const TxEntry::TxEntryRef& child: remove_tx.get().GetTxEntryChildren()) {\n+        child.get().GetTxEntryParents().erase(remove_tx);\n+        cachedInnerUsage -= memusage::IncrementalDynamicUsage(child.get().GetTxEntryParents());\n+    }\n+    // Update the cluster\n+    remove_tx.get().m_cluster->RemoveTransaction(remove_tx.get());\n+}\n+\n+\n+std::vector<TxEntry::TxEntryRef> TxGraph::GetDescendants(const std::vector<TxEntry::TxEntryRef>& txs) const\n+{\n+    std::vector<TxEntry::TxEntryRef> result{}, work_queue{};\n+\n+    LOCK(cs);\n+\n+    WITH_FRESH_EPOCH(m_epoch);\n+    for (auto tx : txs) {\n+        if (!visited(tx)) {\n+            work_queue.push_back(tx);\n+        }\n+    }\n+\n+    while (!work_queue.empty()) {\n+        auto it = work_queue.back();\n+        work_queue.pop_back();\n+        result.push_back(it);\n+        for (auto& child: it.get().GetTxEntryChildren()) {\n+            if (!visited(child.get())) {\n+                work_queue.push_back(child);\n+            }\n+        }\n+    }\n+    return result;\n+}\n+\n+std::vector<TxEntry::TxEntryRef> TxGraph::GetAncestors(const std::vector<TxEntry::TxEntryRef>& parents) const\n+{\n+    std::vector<TxEntry::TxEntryRef> result{}, work_queue{};\n+\n+    LOCK(cs);\n+\n+    WITH_FRESH_EPOCH(m_epoch);\n+    for (auto p : parents) {\n+        visited(p);\n+        work_queue.push_back(p);\n+    }\n+\n+    while (!work_queue.empty()) {\n+        auto it = work_queue.back();\n+        work_queue.pop_back();\n+        result.push_back(it);\n+        for (auto& parent: it.get().parents) {\n+            if (!visited(parent.get())) {\n+                work_queue.push_back(parent);\n+            }\n+        }\n+    }\n+    return result;\n+}\n+\n+std::vector<TxEntry::TxEntryRef> TxGraph::GatherAllClusterTransactions(const std::vector<TxEntry::TxEntryRef> &txs) const\n+{\n+    LOCK(cs);\n+\n+    WITH_FRESH_EPOCH(m_epoch);\n+    std::vector<TxEntry::TxEntryRef> result;\n+    for (auto tx : txs) {\n+        if (!visited(tx.get().m_cluster)) {\n+            for (auto &chunk : tx.get().m_cluster->m_chunks) {\n+                for (auto &txentry : chunk.txs) {\n+                    result.push_back(txentry);\n+                }\n+            }\n+        }\n+    }\n+    return result;\n+}\n+\n+TxGraphCluster* TxGraph::AssignTxGraphCluster()\n+{\n+    auto new_cluster = std::make_unique<TxGraphCluster>(m_next_cluster_id++, this);\n+    TxGraphCluster* ret = new_cluster.get(); // XXX No one is going to like this.\n+    m_cluster_map[new_cluster->m_id] = std::move(new_cluster);\n+    return ret;\n+}\n+\n+// When transactions are removed from a cluster, the cluster might get split\n+// into smaller clusters.\n+void TxGraph::RecalculateTxGraphClusterAndMaybeSort(TxGraphCluster *cluster, bool sort)\n+{\n+    // TODO: if the common case involves no cluster splitting, can we short\n+    // circuit the work here somehow?\n+\n+    // Wipe cluster assignments.\n+    std::vector<TxEntry::TxEntryRef> txs;\n+    for (auto& chunk : cluster->m_chunks) {\n+        for (auto& txentry: chunk.txs) {\n+            txentry.get().m_cluster = nullptr;\n+            txs.push_back(txentry);\n+        }\n+    }\n+    cluster->Clear();\n+\n+    // The first transaction gets to stay in the existing cluster.\n+    bool first = true;\n+    for (auto& txentry : txs) {\n+        if (txentry.get().m_cluster == nullptr) {",
      "path": "src/kernel/txgraph.cpp",
      "position": 1,
      "original_position": 507,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "c49e0444e5c474d5e1ac0af89e9bc27958f3ed31",
      "in_reply_to_id": 1592480884,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "See line 528 below: https://github.com/bitcoin/bitcoin/blob/c49e0444e5c474d5e1ac0af89e9bc27958f3ed31/src/kernel/txgraph.cpp#L528\r\n\r\nNote also that I expect this implementation of txgraph to be rewritten entirely, so the most relevant thing to review right now relating to this code is the header file, as the interface is the most important part (and the rest of the PR and the mempool code builds on top of that interface).\r\n",
      "created_at": "2024-05-08T15:50:59Z",
      "updated_at": "2024-05-08T15:52:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1594262607",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1594262607"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 522,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1687121805",
      "pull_request_review_id": 2192522762,
      "id": 1687121805,
      "node_id": "PRRC_kwDOABII585kj2-N",
      "diff_hunk": "@@ -0,0 +1,1353 @@\n+#include <kernel/txgraph.h>\n+#include <cluster_linearize.h>\n+#include <util/time.h>\n+#include <logging.h>\n+#include <reverse_iterator.h>\n+#include <util/strencodings.h>\n+#include <util/bitset.h>\n+\n+const uint64_t MAX_ITERATIONS = 1000;\n+\n+void TxGraphCluster::AddTransaction(const TxEntry& entry, bool sort)\n+{\n+    m_chunks.emplace_back(entry.GetModifiedFee(), entry.GetTxSize());\n+    m_chunks.back().txs.emplace_back(entry);\n+    //entry.m_cluster = this; XXX do we need this? it breaks the rbf logic.\n+    ++m_tx_count;\n+    m_tx_size += entry.GetTxSize();\n+    if (sort) Sort();\n+    return;\n+}\n+\n+void TxGraphCluster::RemoveTransaction(const TxEntry& entry)\n+{\n+    m_chunks[entry.m_loc.first].txs.erase(entry.m_loc.second);\n+\n+    // Chunk (or cluster) may now be empty, but this will get cleaned up\n+    // when the cluster is re-sorted (or when the cluster is deleted) Note:\n+    // if we cleaned up empty chunks here, then this would break the\n+    // locations of other entries in the cluster. Since we would like to be\n+    // able to do multiple removals in a row and then clean up the sort, we\n+    // can't clean up empty chunks here.\n+    --m_tx_count;\n+    m_tx_size -= entry.m_virtual_size;\n+    return;\n+}\n+\n+void TxGraphCluster::RechunkFromLinearization(std::vector<TxEntry::TxEntryRef>& txs, bool reassign_locations)\n+{\n+    m_chunks.clear();\n+    m_tx_size = 0;\n+\n+    for (auto txentry : txs) {\n+        m_chunks.emplace_back(txentry.get().GetModifiedFee(), txentry.get().GetTxSize());\n+        m_chunks.back().txs.emplace_back(txentry);\n+        while (m_chunks.size() >= 2) {\n+            auto cur_iter = std::prev(m_chunks.end());\n+            auto prev_iter = std::prev(cur_iter);\n+            // We only combine chunks if the feerate would go up; if two\n+            // chunks have equal feerate, we prefer to keep the smaller\n+            // chunksize (which is generally better for both mining and\n+            // eviction).\n+            if (prev_iter->feerate < cur_iter->feerate) {\n+                prev_iter->feerate += cur_iter->feerate;\n+                prev_iter->txs.splice(prev_iter->txs.end(), cur_iter->txs, cur_iter->txs.begin(), cur_iter->txs.end());\n+                m_chunks.erase(cur_iter);\n+            } else {\n+                break;\n+            }\n+        }\n+        m_tx_size += txentry.get().GetTxSize();\n+    }\n+\n+    if (reassign_locations) {\n+        AssignTransactions();\n+    }\n+}\n+\n+void TxGraphCluster::AssignTransactions()\n+{\n+    // Update locations of all transactions\n+    for (size_t i=0; i<m_chunks.size(); ++i) {\n+        for (auto it = m_chunks[i].txs.begin(); it != m_chunks[i].txs.end(); ++it) {\n+            it->get().m_cluster = this;\n+            it->get().m_loc = {i, it};\n+        }\n+    }\n+}\n+\n+TxEntry::TxEntryRef TxGraphCluster::GetLastTransaction()\n+{\n+    assert(m_tx_count > 0);\n+    for (auto chunkit = m_chunks.rbegin(); chunkit != m_chunks.rend(); ++chunkit) {\n+        if (!chunkit->txs.empty()) return chunkit->txs.back();\n+    }\n+    // Unreachable\n+    assert(false);\n+}\n+\n+bool TxGraphCluster::Check() const\n+{\n+    // First check that the metadata is correct.\n+    int64_t tx_count = 0;\n+    int64_t tx_size = 0;\n+    for (auto &chunk : m_chunks) {\n+        for (auto &tx : chunk.txs) {\n+            ++tx_count;\n+            tx_size += tx.get().GetTxSize();\n+        }\n+    }\n+    if (tx_count != m_tx_count) return false;\n+    if (tx_size != m_tx_size) return false;\n+\n+    // Check topology.\n+    std::set<TxEntry::TxEntryRef, TxEntry::CompareById> seen_elements;\n+    for (auto &chunk : m_chunks) {\n+        for (auto tx : chunk.txs) {\n+            for (auto parent : tx.get().GetTxEntryParents()) {\n+                if (seen_elements.count(parent) == 0) return false;\n+            }\n+            seen_elements.insert(tx);\n+            if (tx.get().m_cluster != this) return false;\n+            if (&m_chunks[tx.get().m_loc.first] != &chunk) return false;\n+            if (tx.get().m_loc.second->get().unique_id != tx.get().unique_id) return false;\n+        }\n+    }\n+    return true;\n+}\n+\n+bool TxGraphCluster::CheckTopo() const\n+{\n+    // Check topology.\n+    std::set<TxEntry::TxEntryRef, TxEntry::CompareById> seen_elements;\n+    for (auto &chunk : m_chunks) {\n+        for (auto tx : chunk.txs) {\n+            for (auto parent : tx.get().GetTxEntryParents()) {\n+                if (seen_elements.count(parent) == 0) return false;\n+            }\n+            seen_elements.insert(tx);\n+        }\n+    }\n+    return true;\n+}\n+\n+namespace {\n+\n+template <typename SetType>\n+std::vector<TxEntry::TxEntryRef> InvokeSort(size_t tx_count, const std::vector<TxGraphCluster::Chunk>& chunks)\n+{\n+    std::vector<TxEntry::TxEntryRef> txs;\n+    cluster_linearize::Cluster<SetType> cluster;\n+    const auto time_1{SteadyClock::now()};\n+\n+    std::vector<TxEntry::TxEntryRef> orig_txs;\n+    std::vector<std::pair<const TxEntry*, unsigned>> entry_to_index;\n+\n+    cluster.reserve(tx_count);\n+    entry_to_index.reserve(tx_count);\n+    cluster.clear();\n+    for (auto &chunk : chunks) {\n+        for (auto tx : chunk.txs) {\n+            orig_txs.emplace_back(tx);\n+            cluster.emplace_back(FeeFrac(tx.get().GetModifiedFee(), tx.get().GetTxSize()), SetType{});\n+            entry_to_index.emplace_back(&(tx.get()), cluster.size() - 1);\n+        }\n+    }\n+    std::sort(entry_to_index.begin(), entry_to_index.end());\n+    for (size_t i=0; i<orig_txs.size(); ++i) {\n+        for (auto& parent : orig_txs[i].get().GetTxEntryParents()) {\n+            auto it = std::lower_bound(entry_to_index.begin(), entry_to_index.end(), &(parent.get()),\n+                    [&](const auto& a, const auto& b) { return std::less<const TxEntry*>()(a.first, b); });\n+            assert(it != entry_to_index.end());\n+            assert(it->first == &(parent.get()));\n+            cluster[i].second.Set(it->second);\n+        }\n+    }\n+    uint64_t iterations = MAX_ITERATIONS;\n+\n+    std::vector<unsigned int> orig_linearization;\n+    orig_linearization.reserve(tx_count);\n+    for (unsigned int i=0; i<cluster.size(); ++i) {\n+        orig_linearization.push_back(i);\n+    }\n+    cluster_linearize::DepGraph dep_graph(cluster);\n+    auto result = cluster_linearize::Linearize(dep_graph, iterations, 0, orig_linearization);",
      "path": "src/kernel/txgraph.cpp",
      "position": 1,
      "original_position": 174,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "7e97af364e9dbf48b06f49994a2840cc6c87e9a2",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "`iterations` is not modified here, so you're just reporting 0 iters used everywhere, and always PostLinearizing\r\n\r\nDo we want to change the `Linearize` signature to report iters left, which can infer optimal or not as well?",
      "created_at": "2024-07-22T20:44:58Z",
      "updated_at": "2024-07-23T15:24:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1687121805",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1687121805"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 174,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1693039465",
      "pull_request_review_id": 2201794771,
      "id": 1693039465,
      "node_id": "PRRC_kwDOABII585k6btp",
      "diff_hunk": "@@ -0,0 +1,1353 @@\n+#include <kernel/txgraph.h>\n+#include <cluster_linearize.h>\n+#include <util/time.h>\n+#include <logging.h>\n+#include <reverse_iterator.h>\n+#include <util/strencodings.h>\n+#include <util/bitset.h>\n+\n+const uint64_t MAX_ITERATIONS = 1000;\n+\n+void TxGraphCluster::AddTransaction(const TxEntry& entry, bool sort)\n+{\n+    m_chunks.emplace_back(entry.GetModifiedFee(), entry.GetTxSize());\n+    m_chunks.back().txs.emplace_back(entry);\n+    //entry.m_cluster = this; XXX do we need this? it breaks the rbf logic.\n+    ++m_tx_count;\n+    m_tx_size += entry.GetTxSize();\n+    if (sort) Sort();\n+    return;\n+}\n+\n+void TxGraphCluster::RemoveTransaction(const TxEntry& entry)\n+{\n+    m_chunks[entry.m_loc.first].txs.erase(entry.m_loc.second);\n+\n+    // Chunk (or cluster) may now be empty, but this will get cleaned up\n+    // when the cluster is re-sorted (or when the cluster is deleted) Note:\n+    // if we cleaned up empty chunks here, then this would break the\n+    // locations of other entries in the cluster. Since we would like to be\n+    // able to do multiple removals in a row and then clean up the sort, we\n+    // can't clean up empty chunks here.\n+    --m_tx_count;\n+    m_tx_size -= entry.m_virtual_size;\n+    return;\n+}\n+\n+void TxGraphCluster::RechunkFromLinearization(std::vector<TxEntry::TxEntryRef>& txs, bool reassign_locations)\n+{\n+    m_chunks.clear();\n+    m_tx_size = 0;\n+\n+    for (auto txentry : txs) {\n+        m_chunks.emplace_back(txentry.get().GetModifiedFee(), txentry.get().GetTxSize());\n+        m_chunks.back().txs.emplace_back(txentry);\n+        while (m_chunks.size() >= 2) {\n+            auto cur_iter = std::prev(m_chunks.end());\n+            auto prev_iter = std::prev(cur_iter);\n+            // We only combine chunks if the feerate would go up; if two\n+            // chunks have equal feerate, we prefer to keep the smaller\n+            // chunksize (which is generally better for both mining and\n+            // eviction).\n+            if (prev_iter->feerate < cur_iter->feerate) {\n+                prev_iter->feerate += cur_iter->feerate;\n+                prev_iter->txs.splice(prev_iter->txs.end(), cur_iter->txs, cur_iter->txs.begin(), cur_iter->txs.end());\n+                m_chunks.erase(cur_iter);\n+            } else {\n+                break;\n+            }\n+        }\n+        m_tx_size += txentry.get().GetTxSize();\n+    }\n+\n+    if (reassign_locations) {\n+        AssignTransactions();\n+    }\n+}\n+\n+void TxGraphCluster::AssignTransactions()\n+{\n+    // Update locations of all transactions\n+    for (size_t i=0; i<m_chunks.size(); ++i) {\n+        for (auto it = m_chunks[i].txs.begin(); it != m_chunks[i].txs.end(); ++it) {\n+            it->get().m_cluster = this;\n+            it->get().m_loc = {i, it};\n+        }\n+    }\n+}\n+\n+TxEntry::TxEntryRef TxGraphCluster::GetLastTransaction()\n+{\n+    assert(m_tx_count > 0);\n+    for (auto chunkit = m_chunks.rbegin(); chunkit != m_chunks.rend(); ++chunkit) {\n+        if (!chunkit->txs.empty()) return chunkit->txs.back();\n+    }\n+    // Unreachable\n+    assert(false);\n+}\n+\n+bool TxGraphCluster::Check() const\n+{\n+    // First check that the metadata is correct.\n+    int64_t tx_count = 0;\n+    int64_t tx_size = 0;\n+    for (auto &chunk : m_chunks) {\n+        for (auto &tx : chunk.txs) {\n+            ++tx_count;\n+            tx_size += tx.get().GetTxSize();\n+        }\n+    }\n+    if (tx_count != m_tx_count) return false;\n+    if (tx_size != m_tx_size) return false;\n+\n+    // Check topology.\n+    std::set<TxEntry::TxEntryRef, TxEntry::CompareById> seen_elements;\n+    for (auto &chunk : m_chunks) {\n+        for (auto tx : chunk.txs) {\n+            for (auto parent : tx.get().GetTxEntryParents()) {\n+                if (seen_elements.count(parent) == 0) return false;\n+            }\n+            seen_elements.insert(tx);\n+            if (tx.get().m_cluster != this) return false;\n+            if (&m_chunks[tx.get().m_loc.first] != &chunk) return false;\n+            if (tx.get().m_loc.second->get().unique_id != tx.get().unique_id) return false;\n+        }\n+    }\n+    return true;\n+}\n+\n+bool TxGraphCluster::CheckTopo() const\n+{\n+    // Check topology.\n+    std::set<TxEntry::TxEntryRef, TxEntry::CompareById> seen_elements;\n+    for (auto &chunk : m_chunks) {\n+        for (auto tx : chunk.txs) {\n+            for (auto parent : tx.get().GetTxEntryParents()) {\n+                if (seen_elements.count(parent) == 0) return false;\n+            }\n+            seen_elements.insert(tx);\n+        }\n+    }\n+    return true;\n+}\n+\n+namespace {\n+\n+template <typename SetType>\n+std::vector<TxEntry::TxEntryRef> InvokeSort(size_t tx_count, const std::vector<TxGraphCluster::Chunk>& chunks)\n+{\n+    std::vector<TxEntry::TxEntryRef> txs;\n+    cluster_linearize::Cluster<SetType> cluster;\n+    const auto time_1{SteadyClock::now()};\n+\n+    std::vector<TxEntry::TxEntryRef> orig_txs;\n+    std::vector<std::pair<const TxEntry*, unsigned>> entry_to_index;\n+\n+    cluster.reserve(tx_count);\n+    entry_to_index.reserve(tx_count);\n+    cluster.clear();\n+    for (auto &chunk : chunks) {\n+        for (auto tx : chunk.txs) {\n+            orig_txs.emplace_back(tx);\n+            cluster.emplace_back(FeeFrac(tx.get().GetModifiedFee(), tx.get().GetTxSize()), SetType{});\n+            entry_to_index.emplace_back(&(tx.get()), cluster.size() - 1);\n+        }\n+    }\n+    std::sort(entry_to_index.begin(), entry_to_index.end());\n+    for (size_t i=0; i<orig_txs.size(); ++i) {\n+        for (auto& parent : orig_txs[i].get().GetTxEntryParents()) {\n+            auto it = std::lower_bound(entry_to_index.begin(), entry_to_index.end(), &(parent.get()),\n+                    [&](const auto& a, const auto& b) { return std::less<const TxEntry*>()(a.first, b); });\n+            assert(it != entry_to_index.end());\n+            assert(it->first == &(parent.get()));\n+            cluster[i].second.Set(it->second);\n+        }\n+    }\n+    uint64_t iterations = MAX_ITERATIONS;\n+\n+    std::vector<unsigned int> orig_linearization;\n+    orig_linearization.reserve(tx_count);\n+    for (unsigned int i=0; i<cluster.size(); ++i) {\n+        orig_linearization.push_back(i);\n+    }\n+    cluster_linearize::DepGraph dep_graph(cluster);\n+    auto result = cluster_linearize::Linearize(dep_graph, iterations, 0, orig_linearization);",
      "path": "src/kernel/txgraph.cpp",
      "position": 1,
      "original_position": 174,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "7e97af364e9dbf48b06f49994a2840cc6c87e9a2",
      "in_reply_to_id": 1687121805,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Fixed this to use `result.second`, which indicates whether the linearization is optimal.\r\n\r\nAlso added a wip commit to track iterations done, so that the benchmark logging is more useful for now.",
      "created_at": "2024-07-26T13:09:30Z",
      "updated_at": "2024-07-26T13:09:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1693039465",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1693039465"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 174,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1742339252",
      "pull_request_review_id": 2277909745,
      "id": 1742339252,
      "node_id": "PRRC_kwDOABII585n2fy0",
      "diff_hunk": "@@ -109,6 +109,14 @@ def test_diamond(self):\n         raw_before[txid_c][\"fees\"][\"descendant\"] += fee_delta_c_1 + fee_delta_c_2\n         raw_before[txid_d][\"fees\"][\"ancestor\"] += fee_delta_b + fee_delta_c_1 + fee_delta_c_2\n         raw_after = self.nodes[0].getrawmempool(verbose=True)\n+        for txid in [txid_a, txid_b, txid_c, txid_d]:",
      "path": "test/functional/mining_prioritisetransaction.py",
      "position": 1,
      "original_position": 4,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "76b4f7ded7e4ba5364b8fe441b4f31ff1a37eafc",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "9047d620b81\r\nSuggestion for adding the deltas to chunk feerates instead of deleting the fields:\r\n```\r\ndiff --git a/test/functional/mining_prioritisetransaction.py b/test/functional/mining_prioritisetransaction.py\r\nindex a8183dc8e14..6c3e02b8862 100755\r\n--- a/test/functional/mining_prioritisetransaction.py\r\n+++ b/test/functional/mining_prioritisetransaction.py\r\n@@ -101,21 +101,19 @@ class PrioritiseTransactionTest(BitcoinTestFramework):\r\n         self.nodes[0].prioritisetransaction(txid=txid_c, fee_delta=int(fee_delta_c_1 * COIN))\r\n         self.nodes[0].prioritisetransaction(txid=txid_c, fee_delta=int(fee_delta_c_2 * COIN))\r\n         raw_before[txid_a][\"fees\"][\"descendant\"] += fee_delta_b + fee_delta_c_1 + fee_delta_c_2\r\n+        raw_before[txid_a][\"fees\"][\"chunk\"] += fee_delta_b + fee_delta_c_1 + fee_delta_c_2\r\n         raw_before[txid_b][\"fees\"][\"modified\"] += fee_delta_b\r\n         raw_before[txid_b][\"fees\"][\"ancestor\"] += fee_delta_b\r\n         raw_before[txid_b][\"fees\"][\"descendant\"] += fee_delta_b\r\n+        raw_before[txid_b][\"fees\"][\"chunk\"] += fee_delta_b + fee_delta_c_1 + fee_delta_c_2\r\n         raw_before[txid_c][\"fees\"][\"modified\"] += fee_delta_c_1 + fee_delta_c_2\r\n         raw_before[txid_c][\"fees\"][\"ancestor\"] += fee_delta_c_1 + fee_delta_c_2\r\n         raw_before[txid_c][\"fees\"][\"descendant\"] += fee_delta_c_1 + fee_delta_c_2\r\n+        raw_before[txid_c][\"fees\"][\"chunk\"] += fee_delta_b + fee_delta_c_1 + fee_delta_c_2\r\n         raw_before[txid_d][\"fees\"][\"ancestor\"] += fee_delta_b + fee_delta_c_1 + fee_delta_c_2\r\n         raw_after = self.nodes[0].getrawmempool(verbose=True)\r\n         for txid in [txid_a, txid_b, txid_c, txid_d]:\r\n-            del raw_before[txid][\"fees\"][\"chunk\"]\r\n-            del raw_before[txid][\"chunksize\"]\r\n             del raw_before[txid][\"clusterid\"]\r\n-        for txid in [txid_a, txid_b, txid_c, txid_d]:\r\n-            del raw_after[txid][\"fees\"][\"chunk\"]\r\n-            del raw_after[txid][\"chunksize\"]\r\n             del raw_after[txid][\"clusterid\"]\r\n         assert_equal(raw_before[txid_a], raw_after[txid_a])\r\n         assert_equal(raw_before, raw_after)\r\n@@ -137,8 +135,6 @@ class PrioritiseTransactionTest(BitcoinTestFramework):\r\n             self.nodes[0].sendrawtransaction(t)\r\n         raw_after = self.nodes[0].getrawmempool(verbose=True)\r\n         for txid in [txid_a, txid_b, txid_c, txid_d]:\r\n-            del raw_after[txid][\"fees\"][\"chunk\"]\r\n-            del raw_after[txid][\"chunksize\"]\r\n             del raw_after[txid][\"clusterid\"]\r\n         assert_equal(raw_before[txid_a], raw_after[txid_a])\r\n         assert_equal(raw_before, raw_after)\r\n```",
      "created_at": "2024-09-03T16:16:52Z",
      "updated_at": "2024-09-03T17:33:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1742339252",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1742339252"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 119,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1742343258",
      "pull_request_review_id": 2277909745,
      "id": 1742343258,
      "node_id": "PRRC_kwDOABII585n2gxa",
      "diff_hunk": "@@ -97,6 +97,9 @@ def run_test(self):\n         assert_equal(total_fee_old, sum(v['fees']['base'] for k, v in self.nodes[0].getrawmempool(verbose=True).items()))\n \n         last_entry = self.nodes[0].getmempoolentry(txid=last_txid)\n+        del last_entry[\"fees\"][\"chunk\"]\n+        del last_entry[\"clusterid\"]\n+        del last_entry[\"chunksize\"]",
      "path": "test/functional/mempool_persist.py",
      "position": 1,
      "original_position": 6,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "76b4f7ded7e4ba5364b8fe441b4f31ff1a37eafc",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "9047d620b81 Just deleting the clusterid is sufficient\r\n```suggestion\r\n        del last_entry[\"clusterid\"]\r\n```",
      "created_at": "2024-09-03T16:20:04Z",
      "updated_at": "2024-09-03T17:33:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1742343258",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1742343258"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": 100,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 102,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1742343699",
      "pull_request_review_id": 2277909745,
      "id": 1742343699,
      "node_id": "PRRC_kwDOABII585n2g4T",
      "diff_hunk": "@@ -131,7 +134,11 @@ def run_test(self):\n         assert_equal(fees['base'] + Decimal('0.00001000'), fees['modified'])\n \n         self.log.debug('Verify all fields are loaded correctly')\n-        assert_equal(last_entry, self.nodes[0].getmempoolentry(txid=last_txid))\n+        new_entry = self.nodes[0].getmempoolentry(txid=last_txid)\n+        del new_entry[\"fees\"][\"chunk\"]\n+        del new_entry[\"clusterid\"]\n+        del new_entry[\"chunksize\"]",
      "path": "test/functional/mempool_persist.py",
      "position": 1,
      "original_position": 18,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "76b4f7ded7e4ba5364b8fe441b4f31ff1a37eafc",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "9047d620b81 similarly\r\n```suggestion\r\n        del new_entry[\"clusterid\"]\r\n```",
      "created_at": "2024-09-03T16:20:25Z",
      "updated_at": "2024-09-03T17:33:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1742343699",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1742343699"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": 138,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 140,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1742345016",
      "pull_request_review_id": 2277909745,
      "id": 1742345016,
      "node_id": "PRRC_kwDOABII585n2hM4",
      "diff_hunk": "@@ -163,14 +163,17 @@ def create_bare_multisig_tx(utxo_to_spend=None):\n         assert_equal(parent_individual_testres[\"vsize\"], max_multisig_vsize)\n \n         # But together, it's exceeding limits in the *package* context. If sigops adjusted vsize wasn't being checked\n-        # here, it would get further in validation and give too-long-mempool-chain error instead.\n+        # here, it would get further in validation and give too-large-cluster error instead.\n         packet_test = self.nodes[0].testmempoolaccept([tx_parent.serialize().hex(), tx_child.serialize().hex()])\n-        expected_package_error = f\"package-mempool-limits, package size {2*max_multisig_vsize} exceeds ancestor size limit [limit: 101000]\"\n+        expected_package_error = f\"package-mempool-limits, exceeds cluster size limit [limit: 101000]\"\n         assert_equal([x[\"package-error\"] for x in packet_test], [expected_package_error] * 2)\n \n         # When we actually try to submit, the parent makes it into the mempool, but the child would exceed ancestor vsize limits\n         res = self.nodes[0].submitpackage([tx_parent.serialize().hex(), tx_child.serialize().hex()])\n-        assert \"too-long-mempool-chain\" in res[\"tx-results\"][tx_child.getwtxid()][\"error\"]\n+        assert \"too-large-cluster\" in res[\"tx-results\"][tx_child.getwtxid()][\"error\"]\n+        # When we actually try to submit, the parent makes it into the mempool, but the child would exceed cluster vsize limits\n+        #assert_raises_rpc_error(-26, \"too-large-cluster\", self.nodes[0].submitpackage, [tx_parent.serialize().hex(), tx_child.serialize().hex()])",
      "path": "test/functional/mempool_sigoplimit.py",
      "position": 1,
      "original_position": 16,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "76b4f7ded7e4ba5364b8fe441b4f31ff1a37eafc",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "line should be deleted",
      "created_at": "2024-09-03T16:21:27Z",
      "updated_at": "2024-09-03T17:33:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1742345016",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1742345016"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 175,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1742376309",
      "pull_request_review_id": 2277909745,
      "id": 1742376309,
      "node_id": "PRRC_kwDOABII585n2o11",
      "diff_hunk": "@@ -557,10 +545,11 @@ def test_truc_sibling_eviction(self):\n         # Override maxfeerate - it costs a lot to replace these 100 transactions.\n         assert node.testmempoolaccept([tx_v3_replacement_only[\"hex\"]], maxfeerate=0)[0][\"allowed\"]\n         # Adding another one exceeds the limit.\n-        utxos_for_conflict.append(tx_v3_parent[\"new_utxos\"][1])\n-        tx_v3_child_2_rule5 = self.wallet.create_self_transfer_multi(utxos_to_spend=utxos_for_conflict, fee_per_output=4000000, version=3)\n-        rule5_str = f\"too many potential replacements (including sibling eviction), rejecting replacement {tx_v3_child_2_rule5['txid']}; too many potential replacements (101 > 100)\"\n-        assert_raises_rpc_error(-26, rule5_str, node.sendrawtransaction, tx_v3_child_2_rule5[\"hex\"])\n+        # TODO: rewrite this test given the new RBF rules",
      "path": "test/functional/mempool_truc.py",
      "position": 1,
      "original_position": 75,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "76b4f7ded7e4ba5364b8fe441b4f31ff1a37eafc",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "d0576c134a5\r\nI don't think it's possible to adapt this test so that the tx has 100 direct conflicts, given that it needs to be within 1000vB (the only transactions allowed to have sibling eviction are TRUC children). Having 100 inputs makes it at least 3000-something vB. This would be the case for any new rule that requires 100 inputs.\r\n\r\nSo this test could just be deleted until we allow sibling eviction for transactions that don't have this size restriction.",
      "created_at": "2024-09-03T16:43:26Z",
      "updated_at": "2024-09-03T17:33:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1742376309",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1742376309"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 548,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1742419135",
      "pull_request_review_id": 2277909745,
      "id": 1742419135,
      "node_id": "PRRC_kwDOABII585n2zS_",
      "diff_hunk": "@@ -60,14 +61,12 @@ def run_test(self):\n         self.log.info(\"Running test spends of conflicting outputs...\")\n         self.test_spends_of_conflicting_outputs()\n \n-        self.log.info(\"Running test new unconfirmed inputs...\")\n-        self.test_new_unconfirmed_inputs()\n+        # TODO: rework too many replacements test to use direct conflicts only\n+        #self.log.info(\"Running test too many replacements...\")\n+        #self.test_too_many_replacements()\n \n-        self.log.info(\"Running test too many replacements...\")\n-        self.test_too_many_replacements()\n-\n-        self.log.info(\"Running test too many replacements using default mempool params...\")\n-        self.test_too_many_replacements_with_default_mempool_params()\n+        #self.log.info(\"Running test too many replacements using default mempool params...\")\n+        #self.test_too_many_replacements_with_default_mempool_params()",
      "path": "test/functional/feature_rbf.py",
      "position": 1,
      "original_position": 24,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "76b4f7ded7e4ba5364b8fe441b4f31ff1a37eafc",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "d0576c134a5\r\nI think we only need to adapt 1 of these 2 tests and it should be quite easy to do. Currently, `test_too_many_replacements` requires a high descendant limit because it's 1 parent with 100 children, but we can just add a `self.generate(node, 1)` in between and it can use node 1 (the default one). Then, we can just delete `test_too_many_replacements_with_default_mempool_params`\r\n\r\n```\r\ndiff --git a/test/functional/feature_rbf.py b/test/functional/feature_rbf.py\r\nindex f1de04008c4..57817380c50 100755\r\n--- a/test/functional/feature_rbf.py\r\n+++ b/test/functional/feature_rbf.py\r\n@@ -61,12 +61,8 @@ class ReplaceByFeeTest(BitcoinTestFramework):\r\n         self.log.info(\"Running test spends of conflicting outputs...\")\r\n         self.test_spends_of_conflicting_outputs()\r\n \r\n-        # TODO: rework too many replacements test to use direct conflicts only\r\n-        #self.log.info(\"Running test too many replacements...\")\r\n-        #self.test_too_many_replacements()\r\n-\r\n-        #self.log.info(\"Running test too many replacements using default mempool params...\")\r\n-        #self.test_too_many_replacements_with_default_mempool_params()\r\n+        self.log.info(\"Running test too many replacements...\")\r\n+        self.test_too_many_replacements()\r\n \r\n         self.log.info(\"Running test opt-in...\")\r\n         self.test_opt_in()\r\n@@ -331,17 +327,20 @@ class ReplaceByFeeTest(BitcoinTestFramework):\r\n         split_value = int((initial_nValue - fee) / (MAX_REPLACEMENT_LIMIT + 1))\r\n \r\n         splitting_tx_utxos = self.wallet.send_self_transfer_multi(\r\n-            from_node=self.nodes[0],\r\n+            from_node=self.nodes[1],\r\n             utxos_to_spend=[utxo],\r\n             sequence=0,\r\n             num_outputs=MAX_REPLACEMENT_LIMIT + 1,\r\n             amount_per_output=split_value,\r\n         )[\"new_utxos\"]\r\n \r\n+        # Let this tx confirm so that its children are not connected\r\n+        self.generate(self.nodes[1], 1)\r\n+\r\n         # Now spend each of those outputs individually\r\n         for utxo in splitting_tx_utxos:\r\n             self.wallet.send_self_transfer(\r\n-                from_node=self.nodes[0],\r\n+                from_node=self.nodes[1],\r\n                 utxo_to_spend=utxo,\r\n                 sequence=0,\r\n                 fee=Decimal(fee) / COIN,\r\n@@ -359,98 +358,13 @@ class ReplaceByFeeTest(BitcoinTestFramework):\r\n         double_tx_hex = double_tx.serialize().hex()\r\n \r\n         # This will raise an exception\r\n-        assert_raises_rpc_error(-26, \"too many potential replacements\", self.nodes[0].sendrawtransaction, double_tx_hex, 0)\r\n+        assert_raises_rpc_error(-26, \"too many potential replacements\", self.nodes[1].sendrawtransaction, double_tx_hex, 0)\r\n \r\n         # If we remove an input, it should pass\r\n         double_tx.vin.pop()\r\n         double_tx_hex = double_tx.serialize().hex()\r\n         self.nodes[0].sendrawtransaction(double_tx_hex, 0)\r\n \r\n-    def test_too_many_replacements_with_default_mempool_params(self):\r\n-        \"\"\"\r\n-        Test rule 5 (do not allow replacements that cause more than 100\r\n-        evictions) without having to rely on non-default mempool parameters.\r\n-\r\n-        In order to do this, create a number of \"root\" UTXOs, and then hang\r\n-        enough transactions off of each root UTXO to exceed the MAX_REPLACEMENT_LIMIT.\r\n-        Then create a conflicting RBF replacement transaction.\r\n-        \"\"\"\r\n-        # Clear mempools to avoid cross-node sync failure.\r\n-        for node in self.nodes:\r\n-            self.generate(node, 1)\r\n-        normal_node = self.nodes[1]\r\n-        wallet = MiniWallet(normal_node)\r\n-\r\n-        # This has to be chosen so that the total number of transactions can exceed\r\n-        # MAX_REPLACEMENT_LIMIT without having any one tx graph run into the descendant\r\n-        # limit; 10 works.\r\n-        num_tx_graphs = 10\r\n-\r\n-        # (Number of transactions per graph, rule 5 failure expected)\r\n-        cases = [\r\n-            # Test the base case of evicting fewer than MAX_REPLACEMENT_LIMIT\r\n-            # transactions.\r\n-            ((MAX_REPLACEMENT_LIMIT // num_tx_graphs) - 1, False),\r\n-\r\n-            # Test hitting the rule 5 eviction limit.\r\n-            (MAX_REPLACEMENT_LIMIT // num_tx_graphs, True),\r\n-        ]\r\n-\r\n-        for (txs_per_graph, failure_expected) in cases:\r\n-            self.log.debug(f\"txs_per_graph: {txs_per_graph}, failure: {failure_expected}\")\r\n-            # \"Root\" utxos of each txn graph that we will attempt to double-spend with\r\n-            # an RBF replacement.\r\n-            root_utxos = []\r\n-\r\n-            # For each root UTXO, create a package that contains the spend of that\r\n-            # UTXO and `txs_per_graph` children tx.\r\n-            for graph_num in range(num_tx_graphs):\r\n-                root_utxos.append(wallet.get_utxo())\r\n-\r\n-                optin_parent_tx = wallet.send_self_transfer_multi(\r\n-                    from_node=normal_node,\r\n-                    sequence=MAX_BIP125_RBF_SEQUENCE,\r\n-                    utxos_to_spend=[root_utxos[graph_num]],\r\n-                    num_outputs=txs_per_graph,\r\n-                )\r\n-                assert_equal(True, normal_node.getmempoolentry(optin_parent_tx['txid'])['bip125-replaceable'])\r\n-                new_utxos = optin_parent_tx['new_utxos']\r\n-\r\n-                for utxo in new_utxos:\r\n-                    # Create spends for each output from the \"root\" of this graph.\r\n-                    child_tx = wallet.send_self_transfer(\r\n-                        from_node=normal_node,\r\n-                        utxo_to_spend=utxo,\r\n-                    )\r\n-\r\n-                    assert normal_node.getmempoolentry(child_tx['txid'])\r\n-\r\n-            num_txs_invalidated = len(root_utxos) + (num_tx_graphs * txs_per_graph)\r\n-\r\n-            if failure_expected:\r\n-                assert num_txs_invalidated > MAX_REPLACEMENT_LIMIT\r\n-            else:\r\n-                assert num_txs_invalidated <= MAX_REPLACEMENT_LIMIT\r\n-\r\n-            # Now attempt to submit a tx that double-spends all the root tx inputs, which\r\n-            # would invalidate `num_txs_invalidated` transactions.\r\n-            tx_hex = wallet.create_self_transfer_multi(\r\n-                utxos_to_spend=root_utxos,\r\n-                fee_per_output=10_000_000,  # absurdly high feerate\r\n-            )[\"hex\"]\r\n-\r\n-            if failure_expected:\r\n-                assert_raises_rpc_error(\r\n-                    -26, \"too many potential replacements\", normal_node.sendrawtransaction, tx_hex, 0)\r\n-            else:\r\n-                txid = normal_node.sendrawtransaction(tx_hex, 0)\r\n-                assert normal_node.getmempoolentry(txid)\r\n-\r\n-        # Clear the mempool once finished, and rescan the other nodes' wallet\r\n-        # to account for the spends we've made on `normal_node`.\r\n-        self.generate(normal_node, 1)\r\n-        self.wallet.rescan_utxos()\r\n-\r\n     def test_opt_in(self):\r\n         \"\"\"Replacing should only work if orig tx opted in\"\"\"\r\n         tx0_outpoint = self.make_utxo(self.nodes[0], int(1.1 * COIN))\r\n```",
      "created_at": "2024-09-03T17:21:06Z",
      "updated_at": "2024-09-03T17:33:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1742419135",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1742419135"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": 64,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 69,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1745897934",
      "pull_request_review_id": 2283650112,
      "id": 1745897934,
      "node_id": "PRRC_kwDOABII585oEEnO",
      "diff_hunk": "@@ -109,6 +109,14 @@ def test_diamond(self):\n         raw_before[txid_c][\"fees\"][\"descendant\"] += fee_delta_c_1 + fee_delta_c_2\n         raw_before[txid_d][\"fees\"][\"ancestor\"] += fee_delta_b + fee_delta_c_1 + fee_delta_c_2\n         raw_after = self.nodes[0].getrawmempool(verbose=True)\n+        for txid in [txid_a, txid_b, txid_c, txid_d]:",
      "path": "test/functional/mining_prioritisetransaction.py",
      "position": 1,
      "original_position": 4,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "76b4f7ded7e4ba5364b8fe441b4f31ff1a37eafc",
      "in_reply_to_id": 1742339252,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Taken, thanks.",
      "created_at": "2024-09-05T17:09:42Z",
      "updated_at": "2024-09-05T17:09:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1745897934",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1745897934"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 119,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1745904431",
      "pull_request_review_id": 2283660352,
      "id": 1745904431,
      "node_id": "PRRC_kwDOABII585oEGMv",
      "diff_hunk": "@@ -60,57 +59,26 @@ std::optional<std::string> GetEntriesForConflicts(const CTransaction& tx,\n {\n     AssertLockHeld(pool.cs);\n     const uint256 txid = tx.GetHash();\n-    uint64_t nConflictingCount = 0;\n-    for (const auto& mi : iters_conflicting) {\n-        nConflictingCount += mi->GetCountWithDescendants();\n-        // Rule #5: don't consider replacing more than MAX_REPLACEMENT_CANDIDATES\n-        // entries from the mempool. This potentially overestimates the number of actual\n-        // descendants (i.e. if multiple conflicts share a descendant, it will be counted multiple\n-        // times), but we just want to be conservative to avoid doing too much work.\n-        if (nConflictingCount > MAX_REPLACEMENT_CANDIDATES) {\n-            return strprintf(\"rejecting replacement %s; too many potential replacements (%d > %d)\\n\",\n-                             txid.ToString(),\n-                             nConflictingCount,\n-                             MAX_REPLACEMENT_CANDIDATES);\n-        }\n-    }\n     // Calculate the set of all transactions that would have to be evicted.\n     for (CTxMemPool::txiter it : iters_conflicting) {\n-        pool.CalculateDescendants(it, all_conflicts);\n-    }\n-    return std::nullopt;\n-}\n-\n-std::optional<std::string> HasNoNewUnconfirmed(const CTransaction& tx,\n-                                               const CTxMemPool& pool,\n-                                               const CTxMemPool::setEntries& iters_conflicting)\n-{\n-    AssertLockHeld(pool.cs);\n-    std::set<uint256> parents_of_conflicts;\n-    for (const auto& mi : iters_conflicting) {\n-        for (const CTxIn& txin : mi->GetTx().vin) {\n-            parents_of_conflicts.insert(txin.prevout.hash);\n+        // Exit early if we're going to fail (see below)\n+        if (all_conflicts.size() > MAX_REPLACEMENT_CANDIDATES) {",
      "path": "src/policy/rbf.cpp",
      "position": 1,
      "original_position": 45,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "3a42ba255a73e609ac37eee8288208fa43953779",
      "in_reply_to_id": 1365753481,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Will comment elsewhere as well, but I just updated this limit to be a limit on the number of distinct clusters that are conflicted.",
      "created_at": "2024-09-05T17:15:11Z",
      "updated_at": "2024-09-05T17:15:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1745904431",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1745904431"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 65,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1745906461",
      "pull_request_review_id": 2283663692,
      "id": 1745906461,
      "node_id": "PRRC_kwDOABII585oEGsd",
      "diff_hunk": "@@ -97,6 +97,9 @@ def run_test(self):\n         assert_equal(total_fee_old, sum(v['fees']['base'] for k, v in self.nodes[0].getrawmempool(verbose=True).items()))\n \n         last_entry = self.nodes[0].getmempoolentry(txid=last_txid)\n+        del last_entry[\"fees\"][\"chunk\"]\n+        del last_entry[\"clusterid\"]\n+        del last_entry[\"chunksize\"]",
      "path": "test/functional/mempool_persist.py",
      "position": 1,
      "original_position": 6,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "76b4f7ded7e4ba5364b8fe441b4f31ff1a37eafc",
      "in_reply_to_id": 1742343258,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Taken",
      "created_at": "2024-09-05T17:17:04Z",
      "updated_at": "2024-09-05T17:17:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1745906461",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1745906461"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": 100,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 102,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1745907045",
      "pull_request_review_id": 2283664571,
      "id": 1745907045,
      "node_id": "PRRC_kwDOABII585oEG1l",
      "diff_hunk": "@@ -131,7 +134,11 @@ def run_test(self):\n         assert_equal(fees['base'] + Decimal('0.00001000'), fees['modified'])\n \n         self.log.debug('Verify all fields are loaded correctly')\n-        assert_equal(last_entry, self.nodes[0].getmempoolentry(txid=last_txid))\n+        new_entry = self.nodes[0].getmempoolentry(txid=last_txid)\n+        del new_entry[\"fees\"][\"chunk\"]\n+        del new_entry[\"clusterid\"]\n+        del new_entry[\"chunksize\"]",
      "path": "test/functional/mempool_persist.py",
      "position": 1,
      "original_position": 18,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "76b4f7ded7e4ba5364b8fe441b4f31ff1a37eafc",
      "in_reply_to_id": 1742343699,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Taken",
      "created_at": "2024-09-05T17:17:32Z",
      "updated_at": "2024-09-05T17:17:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1745907045",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1745907045"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": 138,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 140,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1745907713",
      "pull_request_review_id": 2283665699,
      "id": 1745907713,
      "node_id": "PRRC_kwDOABII585oEHAB",
      "diff_hunk": "@@ -163,14 +163,17 @@ def create_bare_multisig_tx(utxo_to_spend=None):\n         assert_equal(parent_individual_testres[\"vsize\"], max_multisig_vsize)\n \n         # But together, it's exceeding limits in the *package* context. If sigops adjusted vsize wasn't being checked\n-        # here, it would get further in validation and give too-long-mempool-chain error instead.\n+        # here, it would get further in validation and give too-large-cluster error instead.\n         packet_test = self.nodes[0].testmempoolaccept([tx_parent.serialize().hex(), tx_child.serialize().hex()])\n-        expected_package_error = f\"package-mempool-limits, package size {2*max_multisig_vsize} exceeds ancestor size limit [limit: 101000]\"\n+        expected_package_error = f\"package-mempool-limits, exceeds cluster size limit [limit: 101000]\"\n         assert_equal([x[\"package-error\"] for x in packet_test], [expected_package_error] * 2)\n \n         # When we actually try to submit, the parent makes it into the mempool, but the child would exceed ancestor vsize limits\n         res = self.nodes[0].submitpackage([tx_parent.serialize().hex(), tx_child.serialize().hex()])\n-        assert \"too-long-mempool-chain\" in res[\"tx-results\"][tx_child.getwtxid()][\"error\"]\n+        assert \"too-large-cluster\" in res[\"tx-results\"][tx_child.getwtxid()][\"error\"]\n+        # When we actually try to submit, the parent makes it into the mempool, but the child would exceed cluster vsize limits\n+        #assert_raises_rpc_error(-26, \"too-large-cluster\", self.nodes[0].submitpackage, [tx_parent.serialize().hex(), tx_child.serialize().hex()])",
      "path": "test/functional/mempool_sigoplimit.py",
      "position": 1,
      "original_position": 16,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "76b4f7ded7e4ba5364b8fe441b4f31ff1a37eafc",
      "in_reply_to_id": 1742345016,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Removed",
      "created_at": "2024-09-05T17:18:09Z",
      "updated_at": "2024-09-05T17:18:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1745907713",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1745907713"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 175,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1745908827",
      "pull_request_review_id": 2283667523,
      "id": 1745908827,
      "node_id": "PRRC_kwDOABII585oEHRb",
      "diff_hunk": "@@ -557,10 +545,11 @@ def test_truc_sibling_eviction(self):\n         # Override maxfeerate - it costs a lot to replace these 100 transactions.\n         assert node.testmempoolaccept([tx_v3_replacement_only[\"hex\"]], maxfeerate=0)[0][\"allowed\"]\n         # Adding another one exceeds the limit.\n-        utxos_for_conflict.append(tx_v3_parent[\"new_utxos\"][1])\n-        tx_v3_child_2_rule5 = self.wallet.create_self_transfer_multi(utxos_to_spend=utxos_for_conflict, fee_per_output=4000000, version=3)\n-        rule5_str = f\"too many potential replacements (including sibling eviction), rejecting replacement {tx_v3_child_2_rule5['txid']}; too many potential replacements (101 > 100)\"\n-        assert_raises_rpc_error(-26, rule5_str, node.sendrawtransaction, tx_v3_child_2_rule5[\"hex\"])\n+        # TODO: rewrite this test given the new RBF rules",
      "path": "test/functional/mempool_truc.py",
      "position": 1,
      "original_position": 75,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "76b4f7ded7e4ba5364b8fe441b4f31ff1a37eafc",
      "in_reply_to_id": 1742376309,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Deleted.",
      "created_at": "2024-09-05T17:19:07Z",
      "updated_at": "2024-09-05T17:19:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1745908827",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1745908827"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 548,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1745913307",
      "pull_request_review_id": 2283674966,
      "id": 1745913307,
      "node_id": "PRRC_kwDOABII585oEIXb",
      "diff_hunk": "@@ -60,14 +61,12 @@ def run_test(self):\n         self.log.info(\"Running test spends of conflicting outputs...\")\n         self.test_spends_of_conflicting_outputs()\n \n-        self.log.info(\"Running test new unconfirmed inputs...\")\n-        self.test_new_unconfirmed_inputs()\n+        # TODO: rework too many replacements test to use direct conflicts only\n+        #self.log.info(\"Running test too many replacements...\")\n+        #self.test_too_many_replacements()\n \n-        self.log.info(\"Running test too many replacements...\")\n-        self.test_too_many_replacements()\n-\n-        self.log.info(\"Running test too many replacements using default mempool params...\")\n-        self.test_too_many_replacements_with_default_mempool_params()\n+        #self.log.info(\"Running test too many replacements using default mempool params...\")\n+        #self.test_too_many_replacements_with_default_mempool_params()",
      "path": "test/functional/feature_rbf.py",
      "position": 1,
      "original_position": 24,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "76b4f7ded7e4ba5364b8fe441b4f31ff1a37eafc",
      "in_reply_to_id": 1742419135,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Thanks, took this.",
      "created_at": "2024-09-05T17:23:09Z",
      "updated_at": "2024-09-05T17:23:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1745913307",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1745913307"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": 64,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 69,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1745982880",
      "pull_request_review_id": 2283792936,
      "id": 1745982880,
      "node_id": "PRRC_kwDOABII585oEZWg",
      "diff_hunk": "@@ -30,6 +30,7 @@ def set_test_params(self):\n         self.extra_args = [\n             [\n                 \"-mempoolfullrbf=0\",\n+                \"-limitclustercount=200\",",
      "path": "test/functional/feature_rbf.py",
      "position": 1,
      "original_position": 4,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "ab35bca0972834a5ca2fc6220b8c6fa971815640",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nothing fails when I remove this",
      "created_at": "2024-09-05T18:23:43Z",
      "updated_at": "2024-09-05T22:05:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1745982880",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1745982880"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 33,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1745984816",
      "pull_request_review_id": 2283792936,
      "id": 1745984816,
      "node_id": "PRRC_kwDOABII585oEZ0w",
      "diff_hunk": "@@ -317,27 +315,6 @@ def test_spends_of_conflicting_outputs(self):\n         # This will raise an exception\n         assert_raises_rpc_error(-26, \"bad-txns-spends-conflicting-tx\", self.nodes[0].sendrawtransaction, tx2_hex, 0)\n \n-    def test_new_unconfirmed_inputs(self):",
      "path": "test/functional/feature_rbf.py",
      "position": 97,
      "original_position": 54,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "ab35bca0972834a5ca2fc6220b8c6fa971815640",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "do we have functional test coverage that it *is* allowed elsewhere? Just check that it doesn't fail rather than rip out?",
      "created_at": "2024-09-05T18:25:18Z",
      "updated_at": "2024-09-05T22:05:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1745984816",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1745984816"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 334,
      "original_line": 334,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1745994360",
      "pull_request_review_id": 2283792936,
      "id": 1745994360,
      "node_id": "PRRC_kwDOABII585oEcJ4",
      "diff_hunk": "@@ -276,7 +274,7 @@ def test_replacement_feeperkb(self):\n         )[\"hex\"]\n \n         # This will raise an exception due to insufficient fee\n-        assert_raises_rpc_error(-26, \"insufficient fee\", self.nodes[0].sendrawtransaction, tx1b_hex, 0)\n+        assert_raises_rpc_error(-26, \"does not improve feerate diagram\", self.nodes[0].sendrawtransaction, tx1b_hex, 0)",
      "path": "test/functional/feature_rbf.py",
      "position": 90,
      "original_position": 46,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "ab35bca0972834a5ca2fc6220b8c6fa971815640",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I wonder if we want to change this string to \"insufficient fee, does not improve feerate diagram\" to give a hint at what to do to user",
      "created_at": "2024-09-05T18:33:55Z",
      "updated_at": "2024-09-05T22:05:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1745994360",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1745994360"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 265,
      "original_line": 265,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1745997228",
      "pull_request_review_id": 2283792936,
      "id": 1745997228,
      "node_id": "PRRC_kwDOABII585oEc2s",
      "diff_hunk": "@@ -45,7 +45,7 @@ def test_rbf_carveout_disallowed(self):\n         # B: First transaction in package, RBFs A by itself under individual evaluation, which would give it +1 descendant limit\n         # C: Second transaction in package, spends B. If the +1 descendant limit persisted, would make it into mempool\n \n-        self.restart_node(0, extra_args=self.extra_args[0] + [\"-limitancestorcount=2\", \"-limitdescendantcount=1\"])\n+        self.restart_node(0, extra_args=self.extra_args[0] + [\"-limitclustercount=1\"])",
      "path": "test/functional/mempool_limit.py",
      "position": 1,
      "original_position": 5,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "ab35bca0972834a5ca2fc6220b8c6fa971815640",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I think `test_rbf_carveout_disallowed` is meaningless post-cluster mempool, we should be relying on other tests to ensure we never go above cluster count limit",
      "created_at": "2024-09-05T18:36:41Z",
      "updated_at": "2024-09-05T22:05:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1745997228",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1745997228"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 48,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1746041322",
      "pull_request_review_id": 2283792936,
      "id": 1746041322,
      "node_id": "PRRC_kwDOABII585oEnnq",
      "diff_hunk": "@@ -201,12 +198,12 @@ def test_package_rbf_additional_fees(self):\n \n     def test_package_rbf_max_conflicts(self):",
      "path": "test/functional/mempool_package_rbf.py",
      "position": 12,
      "original_position": 12,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "ab35bca0972834a5ca2fc6220b8c6fa971815640",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Here's a diff to clean up some of the test language and double-checking the right number of clusters\r\n```\r\ndiff --git a/test/functional/mempool_package_rbf.py b/test/functional/mempool_package_rbf.py\r\nindex f75b13a571..201f303525 100755\r\n--- a/test/functional/mempool_package_rbf.py\r\n+++ b/test/functional/mempool_package_rbf.py\r\n@@ -176,95 +176,103 @@ class PackageRBFTest(BitcoinTestFramework):\r\n         assert_equal(f\"package RBF failed: insufficient anti-DoS fees, rejecting replacement {failure_package_txns3[1].rehash()}, not enough additional fees to relay; {incremental_sats_short} < {incremental_sats_required}\", pkg_results3[\"package_msg\"])\r\n         self.assert_mempool_contents(expected=package_txns1)\r\n \r\n         success_package_hex3, success_package_txns3 = self.create_simple_package(coin, parent_fee=DEFAULT_FEE, child_fee=DEFAULT_CHILD_FEE + incremental_sats_required)\r\n         node.submitpackage(success_package_hex3)\r\n         self.assert_mempool_contents(expected=success_package_txns3)\r\n         self.generate(node, 1)\r\n \r\n         self.log.info(\"Check Package RBF must have strict cpfp structure\")\r\n         coin = self.coins.pop()\r\n         package_hex4, package_txns4 = self.create_simple_package(coin, parent_fee=DEFAULT_FEE, child_fee=DEFAULT_CHILD_FEE)\r\n         node.submitpackage(package_hex4)\r\n         self.assert_mempool_contents(expected=package_txns4)\r\n         package_hex5, _package_txns5 = self.create_simple_package(coin, parent_fee=DEFAULT_CHILD_FEE, child_fee=DEFAULT_CHILD_FEE)\r\n         pkg_results5 = node.submitpackage(package_hex5)\r\n         assert 'package RBF failed: package feerate is less than or equal to parent feerate' in pkg_results5[\"package_msg\"]\r\n         self.assert_mempool_contents(expected=package_txns4)\r\n \r\n         package_hex5_1, package_txns5_1 = self.create_simple_package(coin, parent_fee=DEFAULT_CHILD_FEE, child_fee=DEFAULT_CHILD_FEE + Decimal(\"0.00000001\"))\r\n         node.submitpackage(package_hex5_1)\r\n         self.assert_mempool_contents(expected=package_txns5_1)\r\n         self.generate(node, 1)\r\n \r\n     def test_package_rbf_max_conflicts(self):\r\n         node = self.nodes[0]\r\n-        self.log.info(\"Check Package RBF cannot replace more than MAX_REPLACEMENT_CANDIDATES direct conflicts\")\r\n+        self.log.info(\"Check Package RBF cannot conflict with  more than MAX_REPLACEMENT_CANDIDATES clusters\")\r\n         num_coins = 101\r\n         parent_coins = self.coins[:num_coins]\r\n         del self.coins[:num_coins]\r\n \r\n-        # Original transactions: 101 transactions with 1 descendants each -> 202 total transactions\r\n+        # Original transactions: 101 transactions with 1 descendants each -> 202 total transactions, 101 clusters\r\n         size_two_clusters = []\r\n         for coin in parent_coins:\r\n             size_two_clusters.append(self.wallet.send_self_transfer_chain(from_node=node, chain_length=2, utxo_to_spend=coin))\r\n         expected_txns = [txn[\"tx\"] for parent_child_txns in size_two_clusters for txn in parent_child_txns]\r\n         assert_equal(len(expected_txns), num_coins * 2)\r\n         self.assert_mempool_contents(expected=expected_txns)\r\n \r\n+        # 101 clusters\r\n+        clusters = set([])\r\n+        for txn in expected_txns:\r\n+            clusters.add(node.getmempoolentry(txn.rehash())[\"clusterid\"])\r\n+        assert_equal(len(clusters), num_coins)\r\n+        \r\n         # parent feeerate needs to be high enough for minrelay\r\n         # child feerate needs to be large enough to trigger package rbf with a very large parent and\r\n         # pay for all evicted fees. maxfeerate turned off for all submissions since child feerate\r\n         # is extremely high\r\n         parent_fee_per_conflict = 10000\r\n         child_feerate = 10000 * DEFAULT_FEE\r\n \r\n-        # Conflict against all transactions by double-spending each parent, causing 202 evictions\r\n+        # Conflict against all transactions by double-spending each parent, causing 101 cluster conflicts\r\n         package_parent = self.wallet.create_self_transfer_multi(utxos_to_spend=parent_coins, fee_per_output=parent_fee_per_conflict)\r\n         package_child = self.wallet.create_self_transfer(fee_rate=child_feerate, utxo_to_spend=package_parent[\"new_utxos\"][0])\r\n \r\n         pkg_results = node.submitpackage([package_parent[\"hex\"], package_child[\"hex\"]], maxfeerate=0)\r\n         print(pkg_results[\"package_msg\"])\r\n         assert_equal(f\"transaction failed\", pkg_results[\"package_msg\"])\r\n+        assert_equal(f\"too many potential replacements, rejecting replacement {package_parent['txid']}; too many conflicting clusters (101 > 100)\\n\", pkg_results[\"tx-results\"][package_parent[\"wtxid\"]][\"error\"])\r\n         self.assert_mempool_contents(expected=expected_txns)\r\n \r\n         # Make singleton tx to conflict with in next batch\r\n         singleton_coin = self.coins.pop()\r\n         singleton_tx = self.wallet.create_self_transfer(utxo_to_spend=singleton_coin)\r\n         node.sendrawtransaction(singleton_tx[\"hex\"])\r\n         expected_txns.append(singleton_tx[\"tx\"])\r\n \r\n-        # Double-spend same set minus last, and double-spend singleton. This is still too many direct conflicts.\r\n+        # Double-spend same set minus last, and double-spend singleton. This is still too many conflicted clusters.\r\n         # N.B. we can't RBF just a child tx in the clusters, as that would make resulting cluster of size 3.\r\n         double_spending_coins = parent_coins[:-1] + [singleton_coin]\r\n         package_parent = self.wallet.create_self_transfer_multi(utxos_to_spend=double_spending_coins, fee_per_output=parent_fee_per_conflict)\r\n         package_child = self.wallet.create_self_transfer(fee_rate=child_feerate, utxo_to_spend=package_parent[\"new_utxos\"][0])\r\n         pkg_results = node.submitpackage([package_parent[\"hex\"], package_child[\"hex\"]], maxfeerate=0)\r\n         assert_equal(f\"transaction failed\", pkg_results[\"package_msg\"])\r\n+        assert_equal(f\"too many potential replacements, rejecting replacement {package_parent['txid']}; too many conflicting clusters (101 > 100)\\n\", pkg_results[\"tx-results\"][package_parent[\"wtxid\"]][\"error\"])\r\n         self.assert_mempool_contents(expected=expected_txns)\r\n \r\n-        # Finally, evict MAX_REPLACEMENT_CANDIDATES direct conflicts\r\n+        # Finally, conflict with MAX_REPLACEMENT_CANDIDATES clusters\r\n         package_parent = self.wallet.create_self_transfer_multi(utxos_to_spend=parent_coins[:-1], fee_per_output=parent_fee_per_conflict)\r\n         package_child = self.wallet.create_self_transfer(fee_rate=child_feerate, utxo_to_spend=package_parent[\"new_utxos\"][0])\r\n         pkg_results = node.submitpackage([package_parent[\"hex\"], package_child[\"hex\"]], maxfeerate=0)\r\n         assert_equal(pkg_results[\"package_msg\"], \"success\")\r\n         self.assert_mempool_contents(expected=[singleton_tx[\"tx\"], size_two_clusters[-1][0][\"tx\"], size_two_clusters[-1][1][\"tx\"], package_parent[\"tx\"], package_child[\"tx\"]] )\r\n \r\n         self.generate(node, 1)\r\n \r\n     def test_too_numerous_ancestors(self):\r\n         self.log.info(\"Test that package RBF doesn't work with packages larger than 2 due to ancestors\")\r\n         node = self.nodes[0]\r\n         coin = self.coins.pop()\r\n \r\n         package_hex1, package_txns1 = self.create_simple_package(coin, DEFAULT_FEE, DEFAULT_CHILD_FEE)\r\n         node.submitpackage(package_hex1)\r\n         self.assert_mempool_contents(expected=package_txns1)\r\n \r\n         # Double-spends the original package\r\n         self.ctr += 1\r\n         parent_result1 = self.wallet.create_self_transfer(\r\n             fee=DEFAULT_FEE,\r\n             utxo_to_spend=coin,\r\n             sequence=MAX_BIP125_RBF_SEQUENCE - self.ctr,\r\n         )\r\n ```",
      "created_at": "2024-09-05T19:13:21Z",
      "updated_at": "2024-09-05T22:05:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1746041322",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1746041322"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 191,
      "original_line": 191,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1746092665",
      "pull_request_review_id": 2283792936,
      "id": 1746092665,
      "node_id": "PRRC_kwDOABII585oE0J5",
      "diff_hunk": "@@ -33,8 +29,8 @@ def set_test_params(self):\n             [\n             ],\n             [\n-                \"-limitancestorcount={}\".format(CUSTOM_ANCESTOR_LIMIT),\n                 \"-limitdescendantcount={}\".format(CUSTOM_DESCENDANT_LIMIT),\n+                \"-limitclustercount={}\".format(CUSTOM_DESCENDANT_LIMIT),",
      "path": "test/functional/mempool_packages.py",
      "position": 1,
      "original_position": 22,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "ab35bca0972834a5ca2fc6220b8c6fa971815640",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "this test is pretty ancient and tbh not sure worth holding around. But in case we want to hold onto it, modifications to make things more sensible in cluster mempool world\r\n\r\n```\r\ndiff --git a/test/functional/mempool_packages.py b/test/functional/mempool_packages.py\r\nindex f7fe381f43..9cf1aa01f5 100755\r\n--- a/test/functional/mempool_packages.py\r\n+++ b/test/functional/mempool_packages.py\r\n@@ -1,92 +1,91 @@\r\n #!/usr/bin/env python3\r\n # Copyright (c) 2014-2022 The Bitcoin Core developers\r\n # Distributed under the MIT software license, see the accompanying\r\n # file COPYING or http://www.opensource.org/licenses/mit-license.php.\r\n \"\"\"Test descendant package tracking code.\"\"\"\r\n \r\n from decimal import Decimal\r\n \r\n from test_framework.messages import (\r\n-    DEFAULT_ANCESTOR_LIMIT,\r\n-    DEFAULT_DESCENDANT_LIMIT,\r\n+    DEFAULT_CLUSTER_LIMIT,\r\n )\r\n from test_framework.p2p import P2PTxInvStore\r\n from test_framework.test_framework import BitcoinTestFramework\r\n from test_framework.util import (\r\n     assert_equal,\r\n )\r\n from test_framework.wallet import MiniWallet\r\n \r\n # custom limits for node1\r\n-CUSTOM_DESCENDANT_LIMIT = 10\r\n+CUSTOM_CLUSTER_LIMIT = 10\r\n+assert CUSTOM_CLUSTER_LIMIT < DEFAULT_CLUSTER_LIMIT\r\n \r\n class MempoolPackagesTest(BitcoinTestFramework):\r\n     def set_test_params(self):\r\n         self.num_nodes = 2\r\n         # whitelist peers to speed up tx relay / mempool sync\r\n         self.noban_tx_relay = True\r\n         self.extra_args = [\r\n             [\r\n             ],\r\n             [\r\n-                \"-limitdescendantcount={}\".format(CUSTOM_DESCENDANT_LIMIT),\r\n-                \"-limitclustercount={}\".format(CUSTOM_DESCENDANT_LIMIT),\r\n+                \"-limitclustercount={}\".format(CUSTOM_CLUSTER_LIMIT),\r\n             ],\r\n         ]\r\n \r\n     def run_test(self):\r\n         self.wallet = MiniWallet(self.nodes[0])\r\n         self.wallet.rescan_utxos()\r\n \r\n         peer_inv_store = self.nodes[0].add_p2p_connection(P2PTxInvStore()) # keep track of invs\r\n \r\n-        # DEFAULT_ANCESTOR_LIMIT transactions off a confirmed tx should be fine\r\n-        chain = self.wallet.create_self_transfer_chain(chain_length=DEFAULT_ANCESTOR_LIMIT)\r\n+        # DEFAULT_CLUSTER_LIMIT transactions off a confirmed tx should be fine for default node\r\n+        chain = self.wallet.create_self_transfer_chain(chain_length=DEFAULT_CLUSTER_LIMIT)\r\n         witness_chain = [t[\"wtxid\"] for t in chain]\r\n         ancestor_vsize = 0\r\n         ancestor_fees = Decimal(0)\r\n \r\n         for i, t in enumerate(chain):\r\n             ancestor_vsize += t[\"tx\"].get_vsize()\r\n             ancestor_fees += t[\"fee\"]\r\n             self.wallet.sendrawtransaction(from_node=self.nodes[0], tx_hex=t[\"hex\"])\r\n \r\n         # Wait until mempool transactions have passed initial broadcast (sent inv and received getdata)\r\n         # Otherwise, getrawmempool may be inconsistent with getmempoolentry if unbroadcast changes in between\r\n         peer_inv_store.wait_for_broadcast(witness_chain)\r\n \r\n-        # Check mempool has DEFAULT_ANCESTOR_LIMIT transactions in it, and descendant and ancestor\r\n+        # Check mempool has DEFAULT_CLUSTER_LIMIT transactions in it, and descendant and ancestor\r\n         # count and fees should look correct\r\n         mempool = self.nodes[0].getrawmempool(True)\r\n-        assert_equal(len(mempool), DEFAULT_ANCESTOR_LIMIT)\r\n+        assert_equal(len(mempool), DEFAULT_CLUSTER_LIMIT)\r\n         descendant_count = 1\r\n         descendant_fees = 0\r\n         descendant_vsize = 0\r\n \r\n         assert_equal(ancestor_vsize, sum([mempool[tx]['vsize'] for tx in mempool]))\r\n-        ancestor_count = DEFAULT_ANCESTOR_LIMIT\r\n+        ancestor_count = DEFAULT_CLUSTER_LIMIT\r\n         assert_equal(ancestor_fees, sum([mempool[tx]['fees']['base'] for tx in mempool]))\r\n \r\n         descendants = []\r\n         ancestors = [t[\"txid\"] for t in chain]\r\n         chain = [t[\"txid\"] for t in chain]\r\n         for x in reversed(chain):\r\n             # Check that getmempoolentry is consistent with getrawmempool\r\n             entry = self.nodes[0].getmempoolentry(x)\r\n             assert_equal(entry, mempool[x])\r\n \r\n             # Check that gettxspendingprevout is consistent with getrawmempool\r\n             witnesstx = self.nodes[0].getrawtransaction(txid=x, verbose=True)\r\n             for tx_in in witnesstx[\"vin\"]:\r\n                 spending_result = self.nodes[0].gettxspendingprevout([ {'txid' : tx_in[\"txid\"], 'vout' : tx_in[\"vout\"]} ])\r\n                 assert_equal(spending_result, [ {'txid' : tx_in[\"txid\"], 'vout' : tx_in[\"vout\"], 'spendingtxid' : x} ])\r\n \r\n             # Check that the descendant calculations are correct\r\n             assert_equal(entry['descendantcount'], descendant_count)\r\n             descendant_fees += entry['fees']['base']\r\n             assert_equal(entry['fees']['modified'], entry['fees']['base'])\r\n             assert_equal(entry['fees']['descendant'], descendant_fees)\r\n             descendant_vsize += entry['vsize']\r\n             assert_equal(entry['descendantsize'], descendant_vsize)\r\n             descendant_count += 1\r\n \r\n@@ -169,81 +168,81 @@ class MempoolPackagesTest(BitcoinTestFramework):\r\n         # Prioritise a transaction that has been mined, then add it back to the\r\n         # mempool by using invalidateblock.\r\n         self.nodes[0].prioritisetransaction(txid=chain[-1], fee_delta=2000)\r\n         self.nodes[0].invalidateblock(self.nodes[0].getbestblockhash())\r\n         # Keep node1's tip synced with node0\r\n         self.nodes[1].invalidateblock(self.nodes[1].getbestblockhash())\r\n \r\n         # Now check that the transaction is in the mempool, with the right modified fee\r\n         descendant_fees = 0\r\n         for x in reversed(chain):\r\n             entry = self.nodes[0].getmempoolentry(x)\r\n             descendant_fees += entry['fees']['base']\r\n             if (x == chain[-1]):\r\n                 assert_equal(entry['fees']['modified'], entry['fees']['base'] + Decimal(\"0.00002\"))\r\n             assert_equal(entry['fees']['descendant'], descendant_fees + Decimal(\"0.00002\"))\r\n \r\n         # Now test descendant chain limits\r\n         tx_children = []\r\n         # First create one parent tx with 10 children\r\n         tx_with_children = self.wallet.send_self_transfer_multi(from_node=self.nodes[0], num_outputs=10)\r\n         parent_transaction = tx_with_children[\"txid\"]\r\n         transaction_package = tx_with_children[\"new_utxos\"]\r\n \r\n         # Sign and send up to MAX_DESCENDANT transactions chained off the parent tx\r\n         chain = [] # save sent txs for the purpose of checking node1's mempool later (see below)\r\n-        for _ in range(DEFAULT_DESCENDANT_LIMIT - 1):\r\n+        for _ in range(DEFAULT_CLUSTER_LIMIT - 1):\r\n             utxo = transaction_package.pop(0)\r\n             new_tx = self.wallet.send_self_transfer_multi(from_node=self.nodes[0], num_outputs=10, utxos_to_spend=[utxo])\r\n             txid = new_tx[\"txid\"]\r\n             chain.append(txid)\r\n             if utxo['txid'] is parent_transaction:\r\n                 tx_children.append(txid)\r\n             transaction_package.extend(new_tx[\"new_utxos\"])\r\n \r\n         mempool = self.nodes[0].getrawmempool(True)\r\n-        assert_equal(mempool[parent_transaction]['descendantcount'], DEFAULT_DESCENDANT_LIMIT)\r\n+        assert_equal(mempool[parent_transaction]['descendantcount'], DEFAULT_CLUSTER_LIMIT)\r\n         assert_equal(sorted(mempool[parent_transaction]['spentby']), sorted(tx_children))\r\n \r\n         for child in tx_children:\r\n             assert_equal(mempool[child]['depends'], [parent_transaction])\r\n \r\n         # Check that node1's mempool is as expected, containing:\r\n         # - parent tx for descendant test\r\n         # - txs chained off parent tx (-> custom descendant limit)\r\n-        self.wait_until(lambda: len(self.nodes[1].getrawmempool()) == 2*CUSTOM_DESCENDANT_LIMIT, timeout=10)\r\n+        self.wait_until(lambda: len(self.nodes[1].getrawmempool()) == 2*CUSTOM_CLUSTER_LIMIT, timeout=10)\r\n         mempool0 = self.nodes[0].getrawmempool(False)\r\n         mempool1 = self.nodes[1].getrawmempool(False)\r\n         assert set(mempool1).issubset(set(mempool0))\r\n         assert parent_transaction in mempool1\r\n         for tx in chain:\r\n             if tx in mempool1:\r\n                 entry0 = self.nodes[0].getmempoolentry(tx)\r\n                 entry1 = self.nodes[1].getmempoolentry(tx)\r\n                 assert not entry0['unbroadcast']\r\n                 assert not entry1['unbroadcast']\r\n-                assert entry1[\"descendantcount\"] <= CUSTOM_DESCENDANT_LIMIT\r\n+                assert entry1[\"descendantcount\"] <= CUSTOM_CLUSTER_LIMIT\r\n                 assert_equal(entry1['fees']['base'], entry0['fees']['base'])\r\n                 assert_equal(entry1['vsize'], entry0['vsize'])\r\n                 assert_equal(entry1['depends'], entry0['depends'])\r\n \r\n         # Test reorg handling\r\n         # First, the basics:\r\n         self.generate(self.nodes[0], 1)\r\n         self.nodes[1].invalidateblock(self.nodes[0].getbestblockhash())\r\n         self.nodes[1].reconsiderblock(self.nodes[0].getbestblockhash())\r\n \r\n         # Now test the case where node1 has a transaction T in its mempool that\r\n         # depends on transactions A and B which are in a mined block, and the\r\n         # block containing A and B is disconnected, AND B is not accepted back\r\n         # into node1's mempool because its ancestor count is too high.\r\n \r\n         # Create 8 transactions, like so:\r\n         # Tx0 -> Tx1 (vout0)\r\n         #   \\--> Tx2 (vout1) -> Tx3 -> Tx4 -> Tx5 -> Tx6 -> Tx7\r\n         #\r\n         # Mine them in the next block, then generate a new tx8 that spends\r\n         # Tx1 and Tx7, and add to node1's mempool, then disconnect the\r\n         # last block.\r\n \r\n         # Create tx0 with 2 outputs\r\n         tx0 = self.wallet.send_self_transfer_multi(from_node=self.nodes[0], num_outputs=2)\r\n```",
      "created_at": "2024-09-05T20:00:12Z",
      "updated_at": "2024-09-05T22:05:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1746092665",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1746092665"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 33,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1746098370",
      "pull_request_review_id": 2283792936,
      "id": 1746098370,
      "node_id": "PRRC_kwDOABII585oE1jC",
      "diff_hunk": "@@ -131,7 +132,9 @@ def run_test(self):\n         assert_equal(fees['base'] + Decimal('0.00001000'), fees['modified'])\n \n         self.log.debug('Verify all fields are loaded correctly')\n-        assert_equal(last_entry, self.nodes[0].getmempoolentry(txid=last_txid))\n+        new_entry = self.nodes[0].getmempoolentry(txid=last_txid)\n+        del new_entry[\"clusterid\"]\n+        assert_equal(last_entry, new_entry)",
      "path": "test/functional/mempool_persist.py",
      "position": 1,
      "original_position": 15,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "ab35bca0972834a5ca2fc6220b8c6fa971815640",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "can obviously ignore this but instead of deleting keys in two spots, could just do:\r\n`assert_equal({**last_entry, \"clusterid\": None}, {**new_entry, \"clusterid\": None})`",
      "created_at": "2024-09-05T20:06:20Z",
      "updated_at": "2024-09-05T22:05:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1746098370",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1746098370"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 137,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1746201647",
      "pull_request_review_id": 2283792936,
      "id": 1746201647,
      "node_id": "PRRC_kwDOABII585oFOwv",
      "diff_hunk": "@@ -556,11 +544,6 @@ def test_truc_sibling_eviction(self):\n         tx_v3_replacement_only = self.wallet.create_self_transfer_multi(utxos_to_spend=utxos_for_conflict, fee_per_output=4000000)\n         # Override maxfeerate - it costs a lot to replace these 100 transactions.\n         assert node.testmempoolaccept([tx_v3_replacement_only[\"hex\"]], maxfeerate=0)[0][\"allowed\"]\n-        # Adding another one exceeds the limit.",
      "path": "test/functional/mempool_truc.py",
      "position": 76,
      "original_position": 71,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "ab35bca0972834a5ca2fc6220b8c6fa971815640",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "heh, if you try 99 cluster conflicts + sibling eviction, that implies the new transaction has a vsize cap of 1kvB since it's a child, and since it will be north of 5kvB it will be rejected. I don't think we can have sibling eviction count meaningfully towards exceeding max cluster conflicts. Worth the coverage anyways?\r\n\r\n```\r\ndiff --git a/test/functional/mempool_truc.py b/test/functional/mempool_truc.py\r\nindex e3fcc45059..4e8e5943fc 100755\r\n--- a/test/functional/mempool_truc.py\r\n+++ b/test/functional/mempool_truc.py\r\n@@ -480,92 +480,101 @@ class MempoolTRUC(BitcoinTestFramework):\r\n \r\n         child_1 = self.wallet.send_self_transfer(from_node=node, version=3, utxo_to_spend=ancestor_tx[\"new_utxos\"][0])\r\n         child_2 = self.wallet.send_self_transfer(from_node=node, version=3, utxo_to_spend=ancestor_tx[\"new_utxos\"][1])\r\n         self.check_mempool([child_1[\"txid\"], child_2[\"txid\"]])\r\n \r\n         self.generate(node, 1)\r\n         self.check_mempool([])\r\n \r\n         # Create a reorg, causing ancestor_tx to exceed the 1-child limit\r\n         node.invalidateblock(block)\r\n         self.check_mempool([ancestor_tx[\"txid\"], child_1[\"txid\"], child_2[\"txid\"]])\r\n         assert_equal(node.getmempoolentry(ancestor_tx[\"txid\"])[\"descendantcount\"], 3)\r\n \r\n         # Create a replacement of child_1. It does not conflict with child_2.\r\n         child_1_conflict = self.wallet.send_self_transfer(from_node=node, version=3, utxo_to_spend=ancestor_tx[\"new_utxos\"][0], fee_rate=Decimal(\"0.01\"))\r\n \r\n         # Ensure child_1 and child_1_conflict are different transactions\r\n         assert (child_1_conflict[\"txid\"] != child_1[\"txid\"])\r\n         self.check_mempool([ancestor_tx[\"txid\"], child_1_conflict[\"txid\"], child_2[\"txid\"]])\r\n         assert_equal(node.getmempoolentry(ancestor_tx[\"txid\"])[\"descendantcount\"], 3)\r\n \r\n     @cleanup(extra_args=None)\r\n     def test_truc_sibling_eviction(self):\r\n         self.log.info(\"Test sibling eviction for TRUC\")\r\n         node = self.nodes[0]\r\n+\r\n+        # Seed sufficient utxos for the test\r\n+        self.generate(node, 100)\r\n+        self.wallet.rescan_utxos()\r\n+\r\n         tx_v3_parent = self.wallet.send_self_transfer_multi(from_node=node, num_outputs=2, version=3)\r\n         # This is the sibling to replace\r\n         tx_v3_child_1 = self.wallet.send_self_transfer(\r\n             from_node=node, utxo_to_spend=tx_v3_parent[\"new_utxos\"][0], fee_rate=DEFAULT_FEE * 2, version=3\r\n         )\r\n         assert tx_v3_child_1[\"txid\"] in node.getrawmempool()\r\n \r\n         self.log.info(\"Test tx must be higher feerate than sibling to evict it\")\r\n         tx_v3_child_2_rule6 = self.wallet.create_self_transfer(\r\n             utxo_to_spend=tx_v3_parent[\"new_utxos\"][1], fee_rate=DEFAULT_FEE, version=3\r\n         )\r\n         rule6_str = f\"insufficient fee (including sibling eviction), rejecting replacement {tx_v3_child_2_rule6['txid']}\"\r\n         assert_raises_rpc_error(-26, rule6_str, node.sendrawtransaction, tx_v3_child_2_rule6[\"hex\"])\r\n         self.check_mempool([tx_v3_parent['txid'], tx_v3_child_1['txid']])\r\n \r\n         self.log.info(\"Test tx must meet absolute fee rules to evict sibling\")\r\n         tx_v3_child_2_rule4 = self.wallet.create_self_transfer(\r\n             utxo_to_spend=tx_v3_parent[\"new_utxos\"][1], fee_rate=2 * DEFAULT_FEE + Decimal(\"0.00000001\"), version=3\r\n         )\r\n         rule4_str = f\"insufficient fee (including sibling eviction), rejecting replacement {tx_v3_child_2_rule4['txid']}, not enough additional fees to relay\"\r\n         assert_raises_rpc_error(-26, rule4_str, node.sendrawtransaction, tx_v3_child_2_rule4[\"hex\"])\r\n         self.check_mempool([tx_v3_parent['txid'], tx_v3_child_1['txid']])\r\n \r\n-        self.log.info(\"Test tx cannot cause more than 100 evictions including RBF and sibling eviction\")\r\n-        # First add 4 groups of 25 transactions.\r\n+        self.log.info(\"Test tx cannot cause more than 100 cluster conflicts including both explicit conflicts and sibling eviction\")\r\n+\r\n+        # First make 100 clusters, so sibling eviction counts as 101st conflicted cluster\r\n         utxos_for_conflict = []\r\n         txids_v2_100 = []\r\n-        for _ in range(4):\r\n+        for _ in range(100):\r\n             confirmed_utxo = self.wallet.get_utxo(confirmed_only=True)\r\n             utxos_for_conflict.append(confirmed_utxo)\r\n-            # 25 is within descendant limits\r\n-            chain_length = int(MAX_REPLACEMENT_CANDIDATES / 4)\r\n-            chain = self.wallet.create_self_transfer_chain(chain_length=chain_length, utxo_to_spend=confirmed_utxo)\r\n-            for item in chain:\r\n-                txids_v2_100.append(item[\"txid\"])\r\n-                node.sendrawtransaction(item[\"hex\"])\r\n+            tx = self.wallet.create_self_transfer(utxo_to_spend=confirmed_utxo)\r\n+            txids_v2_100.append(tx[\"txid\"])\r\n+            node.sendrawtransaction(tx[\"hex\"])\r\n         self.check_mempool(txids_v2_100 + [tx_v3_parent[\"txid\"], tx_v3_child_1[\"txid\"]])\r\n \r\n         # Replacing 100 transactions is fine\r\n         tx_v3_replacement_only = self.wallet.create_self_transfer_multi(utxos_to_spend=utxos_for_conflict, fee_per_output=4000000)\r\n         # Override maxfeerate - it costs a lot to replace these 100 transactions.\r\n         assert node.testmempoolaccept([tx_v3_replacement_only[\"hex\"]], maxfeerate=0)[0][\"allowed\"]\r\n+\r\n+        # Adding the sibling eviction exceeds the child TRUC vsize limit which is reported, not max clusters conflicted which is checked later.\r\n+        utxos_for_conflict.append(tx_v3_parent[\"new_utxos\"][1])\r\n+        tx_v3_child_2_rule5 = self.wallet.create_self_transfer_multi(utxos_to_spend=utxos_for_conflict, fee_per_output=4000000, version=3)\r\n+        tx_v3_violation_str = f\"TRUC-violation, version=3 child tx {tx_v3_child_2_rule5['txid']} (wtxid={tx_v3_child_2_rule5['wtxid']}) is too big: {tx_v3_child_2_rule5['tx'].get_vsize()} > 1000 virtual bytes\"\r\n+        assert_raises_rpc_error(-26, tx_v3_violation_str, node.sendrawtransaction, tx_v3_child_2_rule5[\"hex\"])\r\n         self.check_mempool(txids_v2_100 + [tx_v3_parent[\"txid\"], tx_v3_child_1[\"txid\"]])\r\n \r\n         self.log.info(\"Test sibling eviction is successful if it meets all RBF rules\")\r\n         tx_v3_child_2 = self.wallet.create_self_transfer(\r\n             utxo_to_spend=tx_v3_parent[\"new_utxos\"][1], fee_rate=DEFAULT_FEE*10, version=3\r\n         )\r\n         node.sendrawtransaction(tx_v3_child_2[\"hex\"])\r\n         self.check_mempool(txids_v2_100 + [tx_v3_parent[\"txid\"], tx_v3_child_2[\"txid\"]])\r\n \r\n         self.log.info(\"Test that it's possible to do a sibling eviction and RBF at the same time\")\r\n         utxo_unrelated_conflict = self.wallet.get_utxo(confirmed_only=True)\r\n         tx_unrelated_replacee = self.wallet.send_self_transfer(from_node=node, utxo_to_spend=utxo_unrelated_conflict)\r\n         assert tx_unrelated_replacee[\"txid\"] in node.getrawmempool()\r\n \r\n         fee_to_beat = max(int(tx_v3_child_2[\"fee\"] * COIN), int(tx_unrelated_replacee[\"fee\"]*COIN))\r\n \r\n         tx_v3_child_3 = self.wallet.create_self_transfer_multi(\r\n             utxos_to_spend=[tx_v3_parent[\"new_utxos\"][0], utxo_unrelated_conflict], fee_per_output=fee_to_beat*4, version=3\r\n         )\r\n         node.sendrawtransaction(tx_v3_child_3[\"hex\"])\r\n         self.check_mempool(txids_v2_100 + [tx_v3_parent[\"txid\"], tx_v3_child_3[\"txid\"]])\r\n \r\n     @cleanup(extra_args=None)\r\n     def test_reorg_sibling_eviction_1p2c(self):\r\n         node = self.nodes[0]\r\n```",
      "created_at": "2024-09-05T21:58:43Z",
      "updated_at": "2024-09-05T22:05:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1746201647",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1746201647"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 547,
      "original_line": 547,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1746202560",
      "pull_request_review_id": 2283792936,
      "id": 1746202560,
      "node_id": "PRRC_kwDOABII585oFO_A",
      "diff_hunk": "@@ -18,7 +18,7 @@\n class MempoolUpdateFromBlockTest(BitcoinTestFramework):\n     def set_test_params(self):\n         self.num_nodes = 1\n-        self.extra_args = [['-limitdescendantsize=1000', '-limitancestorsize=1000', '-limitancestorcount=100']]\n+        self.extra_args = [['-limitdescendantsize=1000', '-limitancestorsize=1000', '-limitancestorcount=100', \"-limitclustersize=1000\"]]",
      "path": "test/functional/mempool_updatefromblock.py",
      "position": 1,
      "original_position": 5,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "ab35bca0972834a5ca2fc6220b8c6fa971815640",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "the rest of these args can be deleted and the test passes",
      "created_at": "2024-09-05T22:00:09Z",
      "updated_at": "2024-09-05T22:05:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1746202560",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1746202560"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 21,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1761997443",
      "pull_request_review_id": 2307894755,
      "id": 1761997443,
      "node_id": "PRRC_kwDOABII585pBfKD",
      "diff_hunk": "@@ -276,7 +274,7 @@ def test_replacement_feeperkb(self):\n         )[\"hex\"]\n \n         # This will raise an exception due to insufficient fee\n-        assert_raises_rpc_error(-26, \"insufficient fee\", self.nodes[0].sendrawtransaction, tx1b_hex, 0)\n+        assert_raises_rpc_error(-26, \"does not improve feerate diagram\", self.nodes[0].sendrawtransaction, tx1b_hex, 0)",
      "path": "test/functional/feature_rbf.py",
      "position": 90,
      "original_position": 46,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "ab35bca0972834a5ca2fc6220b8c6fa971815640",
      "in_reply_to_id": 1745994360,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "good point. i wonder if we should just drop the feerate diagram language altogether and leave it at \"insufficient fee\"?",
      "created_at": "2024-09-16T21:40:15Z",
      "updated_at": "2024-09-17T16:51:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1761997443",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1761997443"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 265,
      "original_line": 265,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1761997599",
      "pull_request_review_id": 2307894755,
      "id": 1761997599,
      "node_id": "PRRC_kwDOABII585pBfMf",
      "diff_hunk": "@@ -317,27 +315,6 @@ def test_spends_of_conflicting_outputs(self):\n         # This will raise an exception\n         assert_raises_rpc_error(-26, \"bad-txns-spends-conflicting-tx\", self.nodes[0].sendrawtransaction, tx2_hex, 0)\n \n-    def test_new_unconfirmed_inputs(self):",
      "path": "test/functional/feature_rbf.py",
      "position": 97,
      "original_position": 54,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "ab35bca0972834a5ca2fc6220b8c6fa971815640",
      "in_reply_to_id": 1745984816,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done.",
      "created_at": "2024-09-16T21:40:24Z",
      "updated_at": "2024-09-17T16:51:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1761997599",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1761997599"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 334,
      "original_line": 334,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1763330087",
      "pull_request_review_id": 2307894755,
      "id": 1763330087,
      "node_id": "PRRC_kwDOABII585pGkgn",
      "diff_hunk": "@@ -30,6 +30,7 @@ def set_test_params(self):\n         self.extra_args = [\n             [\n                 \"-mempoolfullrbf=0\",\n+                \"-limitclustercount=200\",",
      "path": "test/functional/feature_rbf.py",
      "position": 1,
      "original_position": 4,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "ab35bca0972834a5ca2fc6220b8c6fa971815640",
      "in_reply_to_id": 1745982880,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Removed (it was needed in an intermediate commit).",
      "created_at": "2024-09-17T14:13:52Z",
      "updated_at": "2024-09-17T16:51:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1763330087",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1763330087"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 33,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1763448694",
      "pull_request_review_id": 2307894755,
      "id": 1763448694,
      "node_id": "PRRC_kwDOABII585pHBd2",
      "diff_hunk": "@@ -45,7 +45,7 @@ def test_rbf_carveout_disallowed(self):\n         # B: First transaction in package, RBFs A by itself under individual evaluation, which would give it +1 descendant limit\n         # C: Second transaction in package, spends B. If the +1 descendant limit persisted, would make it into mempool\n \n-        self.restart_node(0, extra_args=self.extra_args[0] + [\"-limitancestorcount=2\", \"-limitdescendantcount=1\"])\n+        self.restart_node(0, extra_args=self.extra_args[0] + [\"-limitclustercount=1\"])",
      "path": "test/functional/mempool_limit.py",
      "position": 1,
      "original_position": 5,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "ab35bca0972834a5ca2fc6220b8c6fa971815640",
      "in_reply_to_id": 1745997228,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Dropped this test for now, and left a todo to add more tests to exercise different methods of mempool submission and ensure we never violate the cluster limits.",
      "created_at": "2024-09-17T15:24:10Z",
      "updated_at": "2024-09-17T16:51:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1763448694",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1763448694"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 48,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1763454509",
      "pull_request_review_id": 2307894755,
      "id": 1763454509,
      "node_id": "PRRC_kwDOABII585pHC4t",
      "diff_hunk": "@@ -201,12 +198,12 @@ def test_package_rbf_additional_fees(self):\n \n     def test_package_rbf_max_conflicts(self):",
      "path": "test/functional/mempool_package_rbf.py",
      "position": 12,
      "original_position": 12,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "ab35bca0972834a5ca2fc6220b8c6fa971815640",
      "in_reply_to_id": 1746041322,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Thanks! Taken.",
      "created_at": "2024-09-17T15:27:53Z",
      "updated_at": "2024-09-17T16:51:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1763454509",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1763454509"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 191,
      "original_line": 191,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1763532380",
      "pull_request_review_id": 2307894755,
      "id": 1763532380,
      "node_id": "PRRC_kwDOABII585pHV5c",
      "diff_hunk": "@@ -33,8 +29,8 @@ def set_test_params(self):\n             [\n             ],\n             [\n-                \"-limitancestorcount={}\".format(CUSTOM_ANCESTOR_LIMIT),\n                 \"-limitdescendantcount={}\".format(CUSTOM_DESCENDANT_LIMIT),\n+                \"-limitclustercount={}\".format(CUSTOM_DESCENDANT_LIMIT),",
      "path": "test/functional/mempool_packages.py",
      "position": 1,
      "original_position": 22,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "ab35bca0972834a5ca2fc6220b8c6fa971815640",
      "in_reply_to_id": 1746092665,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Thanks! Taken.",
      "created_at": "2024-09-17T16:20:37Z",
      "updated_at": "2024-09-17T16:51:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1763532380",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1763532380"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 33,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1763536059",
      "pull_request_review_id": 2307894755,
      "id": 1763536059,
      "node_id": "PRRC_kwDOABII585pHWy7",
      "diff_hunk": "@@ -131,7 +132,9 @@ def run_test(self):\n         assert_equal(fees['base'] + Decimal('0.00001000'), fees['modified'])\n \n         self.log.debug('Verify all fields are loaded correctly')\n-        assert_equal(last_entry, self.nodes[0].getmempoolentry(txid=last_txid))\n+        new_entry = self.nodes[0].getmempoolentry(txid=last_txid)\n+        del new_entry[\"clusterid\"]\n+        assert_equal(last_entry, new_entry)",
      "path": "test/functional/mempool_persist.py",
      "position": 1,
      "original_position": 15,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "ab35bca0972834a5ca2fc6220b8c6fa971815640",
      "in_reply_to_id": 1746098370,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Taken.",
      "created_at": "2024-09-17T16:23:34Z",
      "updated_at": "2024-09-17T16:51:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1763536059",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1763536059"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 137,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1763546504",
      "pull_request_review_id": 2307894755,
      "id": 1763546504,
      "node_id": "PRRC_kwDOABII585pHZWI",
      "diff_hunk": "@@ -556,11 +544,6 @@ def test_truc_sibling_eviction(self):\n         tx_v3_replacement_only = self.wallet.create_self_transfer_multi(utxos_to_spend=utxos_for_conflict, fee_per_output=4000000)\n         # Override maxfeerate - it costs a lot to replace these 100 transactions.\n         assert node.testmempoolaccept([tx_v3_replacement_only[\"hex\"]], maxfeerate=0)[0][\"allowed\"]\n-        # Adding another one exceeds the limit.",
      "path": "test/functional/mempool_truc.py",
      "position": 76,
      "original_position": 71,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "ab35bca0972834a5ca2fc6220b8c6fa971815640",
      "in_reply_to_id": 1746201647,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Ah, right.  Given that this falls back to the vsize limit being exercised, I think this isn't really worth including?  Will leave this for now.",
      "created_at": "2024-09-17T16:30:48Z",
      "updated_at": "2024-09-17T16:51:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1763546504",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1763546504"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 547,
      "original_line": 547,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1763554660",
      "pull_request_review_id": 2307894755,
      "id": 1763554660,
      "node_id": "PRRC_kwDOABII585pHbVk",
      "diff_hunk": "@@ -18,7 +18,7 @@\n class MempoolUpdateFromBlockTest(BitcoinTestFramework):\n     def set_test_params(self):\n         self.num_nodes = 1\n-        self.extra_args = [['-limitdescendantsize=1000', '-limitancestorsize=1000', '-limitancestorcount=100']]\n+        self.extra_args = [['-limitdescendantsize=1000', '-limitancestorsize=1000', '-limitancestorcount=100', \"-limitclustersize=1000\"]]",
      "path": "test/functional/mempool_updatefromblock.py",
      "position": 1,
      "original_position": 5,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "ab35bca0972834a5ca2fc6220b8c6fa971815640",
      "in_reply_to_id": 1746202560,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Thanks, removed.",
      "created_at": "2024-09-17T16:37:08Z",
      "updated_at": "2024-09-17T16:51:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1763554660",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1763554660"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 21,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1954800384",
      "pull_request_review_id": 2615536407,
      "id": 1954800384,
      "node_id": "PRRC_kwDOABII5850g-MA",
      "diff_hunk": "@@ -1073,21 +986,6 @@ bool MemPoolAccept::ReplacementChecks(Workspace& ws)\n     TxValidationState& state = ws.m_state;\n \n     CFeeRate newFeeRate(ws.m_modified_fees, ws.m_vsize);\n-    // Enforce Rule #6. The replacement transaction must have a higher feerate than its direct conflicts.\n-    // - The motivation for this check is to ensure that the replacement transaction is preferable for\n-    //   block-inclusion, compared to what would be removed from the mempool.\n-    // - This logic predates ancestor feerate-based transaction selection, which is why it doesn't\n-    //   consider feerates of descendants.\n-    // - Note: Ancestor feerate-based transaction selection has made this comparison insufficient to\n-    //   guarantee that this is incentive-compatible for miners, because it is possible for a\n-    //   descendant transaction of a direct conflict to pay a higher feerate than the transaction that\n-    //   might replace them, under these rules.\n-    if (const auto err_string{PaysMoreThanConflicts(ws.m_iters_conflicting, newFeeRate, hash)}) {\n-        // This fee-related failure is TX_RECONSIDERABLE because validating in a package may change\n-        // the result.\n-        return state.Invalid(TxValidationResult::TX_RECONSIDERABLE,\n-                             strprintf(\"insufficient fee%s\", ws.m_sibling_eviction ? \" (including sibling eviction)\" : \"\"), *err_string);\n-    }\n \n     CTxMemPool::setEntries all_conflicts;\n ",
      "path": "src/validation.cpp",
      "position": 230,
      "original_position": 198,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "a01313874714119e66d0c7893ca44953bfe49b9d",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Up to this point you have not applied dependencies, so the new transaction is being considered its own singleton cluster, which is in-congruent with the actual goal. If you apply dependencies via CheckMemPoolPolicyLimits, then the resulting cluster is porentially oversized and violates the requirements set forth in the TxGraph interface.\r\n\r\nsee:\r\n```\r\ndiff --git a/src/validation.cpp b/src/validation.cpp\r\nindex 61576851cd..affababd10 100644\r\n--- a/src/validation.cpp\r\n+++ b/src/validation.cpp\r\n@@ -987,10 +987,18 @@ bool MemPoolAccept::ReplacementChecks(Workspace& ws)\r\n \r\n     CFeeRate newFeeRate(ws.m_modified_fees, ws.m_vsize);\r\n \r\n     CTxMemPool::setEntries all_conflicts;\r\n \r\n+    // This triggers dependency addition, but if this returns false,\r\n+    // this means we're not allowed to call CountDistinctClusters\r\n+    // I think we have to stage removals first, then process deps\r\n+    // and only then call GetEntriesForConflicts\r\n+    // Note: Dependencies *still* haven't been processed either,\r\n+    // so each new tx is still considered its own cluster\r\n+    Assume(m_subpackage.m_changeset->CheckMemPoolPolicyLimits());\r\n+\r\n     // Calculate all conflicting entries and enforce Rule #5.\r\n     if (const auto err_string{GetEntriesForConflicts(tx, m_pool, ws.m_iters_conflicting, all_conflicts)}) {\r\n         return state.Invalid(TxValidationResult::TX_MEMPOOL_POLICY,\r\n                              strprintf(\"too many potential replacements%s\", ws.m_sibling_eviction ? \" (including sibling eviction)\" : \"\"), *err_string);\r\n     }\r\ndiff --git a/test/functional/mempool_cluster.py b/test/functional/mempool_cluster.py\r\nindex 3da8b477a2..ec7bd62e1a 100755\r\n--- a/test/functional/mempool_cluster.py\r\n+++ b/test/functional/mempool_cluster.py\r\n@@ -2,10 +2,12 @@\r\n # Copyright (c) 2024 The Bitcoin Core developers\r\n # Distributed under the MIT software license, see the accompanying\r\n # file COPYING or http://www.opensource.org/licenses/mit-license.php.\r\n \"\"\"Test cluster mempool accessors and limits\"\"\"\r\n \r\n+from decimal import Decimal\r\n+\r\n from test_framework.test_framework import BitcoinTestFramework\r\n from test_framework.wallet import (\r\n     MiniWallet,\r\n )\r\n from test_framework.util import (\r\n@@ -23,10 +25,11 @@ class MempoolClusterTest(BitcoinTestFramework):\r\n         self.wallet = MiniWallet(node)\r\n \r\n         node = self.nodes[0]\r\n         parent_tx = self.wallet.send_self_transfer(from_node=node)\r\n         utxo_to_spend = parent_tx[\"new_utxo\"]\r\n+        last_utxo_to_spend = utxo_to_spend\r\n         ancestors = [parent_tx[\"txid\"]]\r\n         while len(node.getrawmempool()) < MAX_CLUSTER_COUNT:\r\n             next_tx = self.wallet.send_self_transfer(from_node=node, utxo_to_spend=utxo_to_spend)\r\n             # Confirm that each transaction is in the same cluster as the first.\r\n             assert node.getmempoolcluster(next_tx['txid']) == node.getmempoolcluster(parent_tx['txid'])\r\n@@ -38,10 +41,11 @@ class MempoolClusterTest(BitcoinTestFramework):\r\n             # Confirm that each successive transaction is added as a descendant.\r\n             assert all([ next_tx[\"txid\"] in node.getmempooldescendants(x) for x in ancestors ])\r\n \r\n             # Update for next iteration\r\n             ancestors.append(next_tx[\"txid\"])\r\n+            last_utxo_to_spend = utxo_to_spend\r\n             utxo_to_spend = next_tx[\"new_utxo\"]\r\n \r\n         assert node.getmempoolcluster(parent_tx['txid'])['txcount'] == MAX_CLUSTER_COUNT\r\n         feeratediagram = node.getmempoolfeeratediagram()\r\n         last_val = [0, 0]\r\n@@ -52,10 +56,16 @@ class MempoolClusterTest(BitcoinTestFramework):\r\n \r\n         # Test that adding one more transaction to the cluster will fail.\r\n         bad_tx = self.wallet.create_self_transfer(utxo_to_spend=utxo_to_spend)\r\n         assert_raises_rpc_error(-26, \"too-large-cluster\", node.sendrawtransaction, bad_tx[\"hex\"])\r\n \r\n+        from pdb import set_trace\r\n+        set_trace()\r\n+        # Test that replacing the last tx with RBF works\r\n+        rbf = self.wallet.create_self_transfer(utxo_to_spend=last_utxo_to_spend, fee_rate=Decimal('0.006'))\r\n+        txid = node.sendrawtransaction(rbf[\"hex\"])\r\n+\r\n         # TODO: verify that the size limits are also enforced.\r\n         # TODO: add tests that exercise rbf, package submission, and package\r\n         # rbf and verify that cluster limits are enforced.\r\n \r\n if __name__ == '__main__':\r\n```",
      "created_at": "2025-02-13T16:06:53Z",
      "updated_at": "2025-02-13T16:06:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1954800384",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1954800384"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 996,
      "original_line": 996,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1954822133",
      "pull_request_review_id": 2615578303,
      "id": 1954822133,
      "node_id": "PRRC_kwDOABII5850hDf1",
      "diff_hunk": "@@ -1073,21 +986,6 @@ bool MemPoolAccept::ReplacementChecks(Workspace& ws)\n     TxValidationState& state = ws.m_state;\n \n     CFeeRate newFeeRate(ws.m_modified_fees, ws.m_vsize);\n-    // Enforce Rule #6. The replacement transaction must have a higher feerate than its direct conflicts.\n-    // - The motivation for this check is to ensure that the replacement transaction is preferable for\n-    //   block-inclusion, compared to what would be removed from the mempool.\n-    // - This logic predates ancestor feerate-based transaction selection, which is why it doesn't\n-    //   consider feerates of descendants.\n-    // - Note: Ancestor feerate-based transaction selection has made this comparison insufficient to\n-    //   guarantee that this is incentive-compatible for miners, because it is possible for a\n-    //   descendant transaction of a direct conflict to pay a higher feerate than the transaction that\n-    //   might replace them, under these rules.\n-    if (const auto err_string{PaysMoreThanConflicts(ws.m_iters_conflicting, newFeeRate, hash)}) {\n-        // This fee-related failure is TX_RECONSIDERABLE because validating in a package may change\n-        // the result.\n-        return state.Invalid(TxValidationResult::TX_RECONSIDERABLE,\n-                             strprintf(\"insufficient fee%s\", ws.m_sibling_eviction ? \" (including sibling eviction)\" : \"\"), *err_string);\n-    }\n \n     CTxMemPool::setEntries all_conflicts;\n ",
      "path": "src/validation.cpp",
      "position": 230,
      "original_position": 198,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "a01313874714119e66d0c7893ca44953bfe49b9d",
      "in_reply_to_id": 1954800384,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I think the mistake here is that in my call to `CountDistinctClusters()`, I should be setting `main_only` to true, and it looks like I omitted that so it'll call it on the staging graph instead.  The same issue may apply with the invocation of `GetDescendants()`; the intent is to just call it on the main graph.\r\n\r\nWould that resolve the concern you're bringing up, or is there something else I'm overlooking?\r\n",
      "created_at": "2025-02-13T16:20:03Z",
      "updated_at": "2025-02-13T16:20:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1954822133",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1954822133"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 996,
      "original_line": 996,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1954834091",
      "pull_request_review_id": 2615597377,
      "id": 1954834091,
      "node_id": "PRRC_kwDOABII5850hGar",
      "diff_hunk": "@@ -1073,21 +986,6 @@ bool MemPoolAccept::ReplacementChecks(Workspace& ws)\n     TxValidationState& state = ws.m_state;\n \n     CFeeRate newFeeRate(ws.m_modified_fees, ws.m_vsize);\n-    // Enforce Rule #6. The replacement transaction must have a higher feerate than its direct conflicts.\n-    // - The motivation for this check is to ensure that the replacement transaction is preferable for\n-    //   block-inclusion, compared to what would be removed from the mempool.\n-    // - This logic predates ancestor feerate-based transaction selection, which is why it doesn't\n-    //   consider feerates of descendants.\n-    // - Note: Ancestor feerate-based transaction selection has made this comparison insufficient to\n-    //   guarantee that this is incentive-compatible for miners, because it is possible for a\n-    //   descendant transaction of a direct conflict to pay a higher feerate than the transaction that\n-    //   might replace them, under these rules.\n-    if (const auto err_string{PaysMoreThanConflicts(ws.m_iters_conflicting, newFeeRate, hash)}) {\n-        // This fee-related failure is TX_RECONSIDERABLE because validating in a package may change\n-        // the result.\n-        return state.Invalid(TxValidationResult::TX_RECONSIDERABLE,\n-                             strprintf(\"insufficient fee%s\", ws.m_sibling_eviction ? \" (including sibling eviction)\" : \"\"), *err_string);\n-    }\n \n     CTxMemPool::setEntries all_conflicts;\n ",
      "path": "src/validation.cpp",
      "position": 230,
      "original_position": 198,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "a01313874714119e66d0c7893ca44953bfe49b9d",
      "in_reply_to_id": 1954800384,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": ">  I should be setting main_only to true,\r\n\r\nI think that works? Will think more on it from a UX/API perspective (it's Safe to do regardless)\r\n\r\nedit: difference being using main graph means \"affect up to 100 existing clusters\", which maybe is what we agreed to previously already? i.e. if your txn(package) has <= 100 inputs, it will pass this check\r\n\r\n> GetDescendants\r\n\r\nMissed that one!",
      "created_at": "2025-02-13T16:27:10Z",
      "updated_at": "2025-02-13T16:42:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r1954834091",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1954834091"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 996,
      "original_line": 996,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2316466962",
      "pull_request_review_id": 3177119367,
      "id": 2316466962,
      "node_id": "PRRC_kwDOABII586KEnsS",
      "diff_hunk": "@@ -16,6 +16,10 @@ namespace kernel {\n  * Most of the time, this struct should be referenced as CTxMemPool::Limits.\n  */\n struct MemPoolLimits {\n+    //! The maximum number of transactions in a cluster\n+    unsigned cluster_count{DEFAULT_CLUSTER_LIMIT};\n+    //! The maximum allowed size in virtual bytes of a cluster.\n+    int64_t cluster_size_vbytes{DEFAULT_CLUSTER_SIZE_LIMIT_KVB * 1'000};\n     //! The maximum allowed number of transactions in a package including the entry and its ancestors.",
      "path": "src/kernel/mempool_limits.h",
      "position": 8,
      "original_position": 8,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "6caa4d7f4572857d36f439e383b772dd1f83c782",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I think `{ancestor,descendant}_{count,size_vbytes}` can be cleaned up after 74f51262688e1f6a4af1664c13f6c895b1499a39 as well? Perhaps `Flatten()` in txmempool.cpp can do the sanity check against default cluster size instead. This can be done in a followup.",
      "created_at": "2025-09-02T15:37:42Z",
      "updated_at": "2025-09-02T18:00:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2316466962",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2316466962"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 23,
      "original_line": 23,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2316480489",
      "pull_request_review_id": 3177119367,
      "id": 2316480489,
      "node_id": "PRRC_kwDOABII586KEq_p",
      "diff_hunk": "",
      "path": "src/txmempool.h",
      "position": 1,
      "original_position": 1,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "6caa4d7f4572857d36f439e383b772dd1f83c782",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: the comment above the `class CTxMemPool` definition now needs an update. It still mentions the index by descendant feerate, the `m_parents` field in `CTxMemPoolEntry`, etc.",
      "created_at": "2025-09-02T15:42:14Z",
      "updated_at": "2025-09-02T18:00:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2316480489",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2316480489"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2316505098",
      "pull_request_review_id": 3177119367,
      "id": 2316505098,
      "node_id": "PRRC_kwDOABII586KExAK",
      "diff_hunk": "@@ -574,6 +574,8 @@ void SetupServerArgs(ArgsManager& argsman)\n     argsman.AddArg(\"-limitancestorsize=<n>\", strprintf(\"Do not accept transactions whose size with all in-mempool ancestors exceeds <n> kilobytes (default: %u)\", DEFAULT_ANCESTOR_SIZE_LIMIT_KVB), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n     argsman.AddArg(\"-limitdescendantcount=<n>\", strprintf(\"Do not accept transactions if any ancestor would have <n> or more in-mempool descendants (default: %u)\", DEFAULT_DESCENDANT_LIMIT), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n     argsman.AddArg(\"-limitdescendantsize=<n>\", strprintf(\"Do not accept transactions if any ancestor would have more than <n> kilobytes of in-mempool descendants (default: %u).\", DEFAULT_DESCENDANT_SIZE_LIMIT_KVB), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n+    argsman.AddArg(\"-limitclustercount=<n>\", strprintf(\"Do not accept transactions connected to <n> or more existing in-mempool transactions (default: %u)\", DEFAULT_CLUSTER_LIMIT), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);",
      "path": "src/init.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "7fdcccd1338655328c28ff949d50442ace931a5e",
      "in_reply_to_id": 1392364899,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I think we can do something similar to #32941 and just emit a warning (not error) for the first release, then remove it afterwards. We can't deprecate / continue supporting the options, but this is more user-friendly than dropping immediately.\r\n\r\n```\r\n        InitWarning(_(\"Option '-limitdescendantcount' is set but no longer has any effect (see release notes about cluster limits). Please remove it from your configuration.\"));\r\n```",
      "created_at": "2025-09-02T15:49:13Z",
      "updated_at": "2025-09-02T18:00:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2316505098",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2316505098"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 644,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2316792057",
      "pull_request_review_id": 3177119367,
      "id": 2316792057,
      "node_id": "PRRC_kwDOABII586KF3D5",
      "diff_hunk": "@@ -244,6 +243,8 @@ def branch(prevout, initial_value, max_txs, tree_width=5, fee=0.00001 * COIN, _t\n \n         # Try again, but with more total transactions than the \"max txs\n         # double-spent at once\" anti-DoS limit.\n+        # TODO: rework using direct conflict test\n+        '''",
      "path": "test/functional/feature_rbf.py",
      "position": 1,
      "original_position": 42,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "61f51546af33923c9e5dc9632ba5544aa853ae71",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Is this todo already covered by `test_too_many_replacements()`?",
      "created_at": "2025-09-02T17:58:16Z",
      "updated_at": "2025-09-02T18:00:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2316792057",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2316792057"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": 246,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 247,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2316855727",
      "pull_request_review_id": 3177682730,
      "id": 2316855727,
      "node_id": "PRRC_kwDOABII586KGGmv",
      "diff_hunk": "@@ -16,6 +16,10 @@ namespace kernel {\n  * Most of the time, this struct should be referenced as CTxMemPool::Limits.\n  */\n struct MemPoolLimits {\n+    //! The maximum number of transactions in a cluster\n+    unsigned cluster_count{DEFAULT_CLUSTER_LIMIT};\n+    //! The maximum allowed size in virtual bytes of a cluster.\n+    int64_t cluster_size_vbytes{DEFAULT_CLUSTER_SIZE_LIMIT_KVB * 1'000};\n     //! The maximum allowed number of transactions in a package including the entry and its ancestors.",
      "path": "src/kernel/mempool_limits.h",
      "position": 8,
      "original_position": 8,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "6caa4d7f4572857d36f439e383b772dd1f83c782",
      "in_reply_to_id": 2316466962,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I believe the ancestor and descendant count limits are still used by the wallet when using `-walletrejectlongchains`, which makes sense for at least a couple of releases after cluster mempool is released while there may still be a lot of nodes running with ancestor/descendant limits in place. So I think these variables should stay for now, perhaps I can add a comment mentioning all this so someone remembers to get rid of these later.",
      "created_at": "2025-09-02T18:31:13Z",
      "updated_at": "2025-09-02T18:31:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2316855727",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2316855727"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 23,
      "original_line": 23,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2319334033",
      "pull_request_review_id": 3181193400,
      "id": 2319334033,
      "node_id": "PRRC_kwDOABII586KPjqR",
      "diff_hunk": "@@ -641,6 +641,9 @@ void SetupServerArgs(ArgsManager& argsman, bool can_listen_ipc)\n     argsman.AddArg(\"-limitdescendantcount=<n>\", strprintf(\"Do not accept transactions if any ancestor would have <n> or more in-mempool descendants (default: %u)\", DEFAULT_DESCENDANT_LIMIT), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n     argsman.AddArg(\"-limitdescendantsize=<n>\", strprintf(\"Do not accept transactions if any ancestor would have more than <n> kilobytes of in-mempool descendants (default: %u).\", DEFAULT_DESCENDANT_SIZE_LIMIT_KVB), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n     argsman.AddArg(\"-test=<option>\", \"Pass a test-only option. Options include : \" + Join(TEST_OPTIONS_DOC, \", \") + \".\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n+    argsman.AddArg(\"-limitclustercount=<n>\", strprintf(\"Do not accept transactions connected to <n> or more existing in-mempool transactions (default: %u)\", DEFAULT_CLUSTER_LIMIT), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n+    argsman.AddArg(\"-limitclustersize=<n>\", strprintf(\"Do not accept transactions whose size with all in-mempool connected transactions exceeds <n> kilobytes (default: %u)\", DEFAULT_CLUSTER_SIZE_LIMIT_KVB), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n+    argsman.AddArg(\"-addrmantest\", \"Allows to test address relay on localhost\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);",
      "path": "src/init.cpp",
      "position": 1,
      "original_position": 6,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "e72b0b1a7eb31078c998d95b4cfffe9cd1f9113d",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "e72b0b1a7eb31078c998d95b4cfffe9cd1f9113d re-adds `-addrmantest` which was removed in #29007",
      "created_at": "2025-09-03T15:24:14Z",
      "updated_at": "2025-09-03T17:42:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2319334033",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2319334033"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 646,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2319357837",
      "pull_request_review_id": 3181193400,
      "id": 2319357837,
      "node_id": "PRRC_kwDOABII586KPpeN",
      "diff_hunk": "@@ -719,10 +719,13 @@ class ChainImpl : public Chain\n     util::Result<void> checkChainLimits(const CTransactionRef& tx) override\n     {\n         if (!m_node.mempool) return {};\n-        LockPoints lp;\n-        CTxMemPoolEntry entry(TxGraph::Ref(), tx, 0, 0, 0, 0, false, 0, lp);\n         LOCK(m_node.mempool->cs);\n-        return m_node.mempool->CheckPackageLimits({tx}, entry.GetTxSize());\n+        auto changeset = m_node.mempool->GetChangeSet();",
      "path": "src/node/interfaces.cpp",
      "position": 38,
      "original_position": 8,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "5bc5edf8743408979add1b15d23cc8ab7b948db1",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "5bc5edf8743408979add1b15d23cc8ab7b948db Checking limits using changeset is so nice. It could be helpful to add a comment that `changeset` is automatically destroyed at the end of this function and thus doesn't need to be handled/aborted.",
      "created_at": "2025-09-03T15:33:18Z",
      "updated_at": "2025-09-03T17:42:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2319357837",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2319357837"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 723,
      "original_line": 723,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2319395594",
      "pull_request_review_id": 3181193400,
      "id": 2319395594,
      "node_id": "PRRC_kwDOABII586KPysK",
      "diff_hunk": "@@ -5407,7 +5407,7 @@ class CompareInvMempoolOrder\n     {\n         /* As std::make_heap produces a max-heap, we want the entries with the\n          * fewest ancestors/highest fee to sort later. */\n-        return m_mempool->CompareDepthAndScore(*b, *a);\n+        return m_mempool->CompareMiningScoreWithTopology(*b, *a);",
      "path": "src/net_processing.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "f172ac5e6c37f446bc3c38419cf40f3adac3ddd8",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "For f172ac5e6c37f446bc3c38419cf40f3adac3ddd8 Use cluster linearization for transaction relay sort order \r\n\r\nIn addition to changing the inv order, should we also use the transaction's chunk feerate for fee filtering?",
      "created_at": "2025-09-03T15:47:11Z",
      "updated_at": "2025-09-03T17:42:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2319395594",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2319395594"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": 5429,
      "original_start_line": 5410,
      "start_side": "LEFT",
      "line": 5429,
      "original_line": 5429,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2319516863",
      "pull_request_review_id": 3181193400,
      "id": 2319516863,
      "node_id": "PRRC_kwDOABII586KQQS_",
      "diff_hunk": "@@ -620,29 +626,29 @@ BOOST_FIXTURE_TEST_CASE(calculate_cluster, TestChain100Setup)\n     // GatherClusters stops at 500 transactions.\n     const auto tx_501 = make_tx({COutPoint{lasttx->GetHash(), 0}}, /*num_outputs=*/1);\n     AddToMempool(pool, entry.Fee(CENT).FromTx(tx_501));\n-    const auto cluster_501 = pool.GatherClusters({tx_501->GetHash()});\n+    const auto cluster_501 = pool.GatherClusters(last_txs);\n     BOOST_CHECK_EQUAL(cluster_501.size(), 0);\n \n     /* Zig Zag cluster:\n-     * txp0     txp1     txp2    ...  txp48  txp49\n+     * txp0     txp1     txp2    ...  txp31  txp32\n      *    \\    /    \\   /   \\            \\   /\n-     *     txc0     txc1    txc2  ...    txc48\n+     *     txc0     txc1    txc2  ...    txc31",
      "path": "src/test/miniminer_tests.cpp",
      "position": 1,
      "original_position": 45,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "aa8eb8c3ab1130736b9890df9d7493d99bef8d14",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit in aa8eb8c3ab1 Fix miniminer_tests to work with cluster limits, I think it's txp0 to txp31 and txc0 to txc30?",
      "created_at": "2025-09-03T16:35:24Z",
      "updated_at": "2025-09-03T17:42:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2319516863",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2319516863"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": 627,
      "start_side": "LEFT",
      "line": null,
      "original_line": 635,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2319578206",
      "pull_request_review_id": 3181193400,
      "id": 2319578206,
      "node_id": "PRRC_kwDOABII586KQfRe",
      "diff_hunk": "@@ -641,6 +641,9 @@ void SetupServerArgs(ArgsManager& argsman, bool can_listen_ipc)\n     argsman.AddArg(\"-limitdescendantcount=<n>\", strprintf(\"Do not accept transactions if any ancestor would have <n> or more in-mempool descendants (default: %u)\", DEFAULT_DESCENDANT_LIMIT), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n     argsman.AddArg(\"-limitdescendantsize=<n>\", strprintf(\"Do not accept transactions if any ancestor would have more than <n> kilobytes of in-mempool descendants (default: %u).\", DEFAULT_DESCENDANT_SIZE_LIMIT_KVB), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n     argsman.AddArg(\"-test=<option>\", \"Pass a test-only option. Options include : \" + Join(TEST_OPTIONS_DOC, \", \") + \".\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n+    argsman.AddArg(\"-limitclustercount=<n>\", strprintf(\"Do not accept transactions connected to <n> or more existing in-mempool transactions (default: %u)\", DEFAULT_CLUSTER_LIMIT), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);",
      "path": "src/init.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "e72b0b1a7eb31078c998d95b4cfffe9cd1f9113d",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Perhaps also add `(maximum: %u), MAX_CLUSTER_COUNT_LIMIT`",
      "created_at": "2025-09-03T16:55:28Z",
      "updated_at": "2025-09-03T17:42:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2319578206",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2319578206"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 644,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2319721247",
      "pull_request_review_id": 3181193400,
      "id": 2319721247,
      "node_id": "PRRC_kwDOABII586KRCMf",
      "diff_hunk": "@@ -14,7 +14,7 @@\n #ifndef BITCOIN_TXGRAPH_H\n #define BITCOIN_TXGRAPH_H\n \n-static constexpr unsigned MAX_CLUSTER_COUNT_LIMIT{64};\n+static constexpr unsigned MAX_CLUSTER_COUNT_LIMIT{201};",
      "path": "src/txgraph.h",
      "position": 1,
      "original_position": 5,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "34251141eca785578a0b2ca6d1c0932d34b2418d",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "34251141eca785578a0b2ca6d1c0932d34b2418d Do not allow mempool clusters to exceed configured limits\r\n\r\nThis workaround (\"Temporarily increase the maximum permitted cluster count so that feature_rbf.py passes. \") didn't seem ideal to me. I shuffled around some of the changes so that feature_rbf is reworked before this commit: https://github.com/glozow/bitcoin/commits/2025-09-cluster-feature_rbf/\r\n\r\nIt just deletes one of the tests (also see https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2316792057, I think it's ok to delete rather than comment out with a todo) and adds the `generate` needed to make `too_many_replacements` work without a higher anc/desc limit.",
      "created_at": "2025-09-03T17:39:40Z",
      "updated_at": "2025-09-03T17:42:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2319721247",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2319721247"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": 17,
      "start_side": "LEFT",
      "line": null,
      "original_line": 17,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328760872",
      "pull_request_review_id": 3194519714,
      "id": 2328760872,
      "node_id": "PRRC_kwDOABII586KzhIo",
      "diff_hunk": "@@ -74,7 +74,7 @@ FUZZ_TARGET(policy_estimator, .init = initialize_policy_estimator)\n                         break;\n                     }\n                     const CTransaction tx{*mtx};\n-                    mempool_entries.emplace_back(CTxMemPoolEntry::ExplicitCopy, ConsumeTxMemPoolEntry(fuzzed_data_provider, tx, current_height));\n+                    mempool_entries.emplace_back(ConsumeTxMemPoolEntry(fuzzed_data_provider, tx, current_height));",
      "path": "src/test/fuzz/policy_estimator.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "457c7bd899c1118092e754f498817d09a94ad48b",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"Allow moving CTxMemPoolEntry objects, disallow copying\"\r\n\r\nThis is taking a redundant extra step: `emplace_back` allows constructing the `CTxMemPoolEntry` object directly in-place inside `mempool_entries`, but by invoking the constructor, it's constructed in the call site, and then moved in place:\r\n```c++\r\nmempool_entries.emplace_back(fuzzed_data_provider, tx, current_height);\r\n```\r\n\r\nWith this, there is (as of this commit) no need to support moving `CTxMemPoolEntry` anymore, though future intermediary commits seem to still need it.\r\n",
      "created_at": "2025-09-07T16:46:58Z",
      "updated_at": "2025-09-07T19:33:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2328760872",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328760872"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 77,
      "original_line": 77,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328763664",
      "pull_request_review_id": 3194519714,
      "id": 2328763664,
      "node_id": "PRRC_kwDOABII586Kzh0Q",
      "diff_hunk": "@@ -22,7 +22,7 @@\n static void AddTx(const CTransactionRef& tx, const CAmount& fee, CTxMemPool& pool) EXCLUSIVE_LOCKS_REQUIRED(cs_main, pool.cs)\n {\n     LockPoints lp;\n-    AddToMempool(pool, CTxMemPoolEntry(tx, fee, /*time=*/0, /*entry_height=*/1, /*entry_sequence=*/0, /*spends_coinbase=*/false, /*sigops_cost=*/4, lp));\n+    AddToMempool(pool, CTxMemPoolEntry(TxGraph::Ref(), tx, fee, /*time=*/0, /*entry_height=*/1, /*entry_sequence=*/0, /*spends_coinbase=*/false, /*sigops_cost=*/4, lp));",
      "path": "src/bench/blockencodings.cpp",
      "position": 1,
      "original_position": 5,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "f8d40726eb1eaee38752eaea5a16aa86bdde3967",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"Make CTxMemPoolEntry derive from TxGraph::Ref\"\r\n\r\nNit: you can invoke the default constructor using just `{}` instead of `TxGraph::Ref()`:\r\n```c++\r\nAddToMempool(pool, CTxMemPoolEntry({}, tx, fee, /*time=*/0, /*entry_height=*/1, /*entry_sequence=*/0, /*spends_coinbase=*/false, /*sigops_cost=*/4, lp));\r\n```\r\n\r\nhere, and throughout this commit.",
      "created_at": "2025-09-07T16:55:21Z",
      "updated_at": "2025-09-08T12:39:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2328763664",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328763664"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 25,
      "original_line": 25,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328765241",
      "pull_request_review_id": 3194519714,
      "id": 2328765241,
      "node_id": "PRRC_kwDOABII586KziM5",
      "diff_hunk": "@@ -413,6 +413,7 @@ static CTxMemPool::Options&& Flatten(CTxMemPool::Options&& opts, bilingual_str&\n CTxMemPool::CTxMemPool(Options opts, bilingual_str& error)\n     : m_opts{Flatten(std::move(opts), error)}\n {\n+    m_txgraph = MakeTxGraph(64, 101'000, 10'000);",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "ebbe4a13ce2850ab7d0bbdbf48bd2cc84d1d38e7",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \" Create a txgraph inside CTxMemPool\"\r\n\r\nIntroduce a named constant for these values? At least for the `10'000`, which survives into the final commit of this PR.",
      "created_at": "2025-09-07T17:00:04Z",
      "updated_at": "2025-09-07T19:33:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2328765241",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328765241"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 416,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328773469",
      "pull_request_review_id": 3194519714,
      "id": 2328773469,
      "node_id": "PRRC_kwDOABII586KzkNd",
      "diff_hunk": "@@ -1414,9 +1428,58 @@ void CTxMemPool::ChangeSet::StageRemoval(CTxMemPool::txiter it)\n void CTxMemPool::ChangeSet::Apply()\n {\n     LOCK(m_pool->cs);\n+    if (!m_dependencies_processed) {\n+        ProcessDependencies();\n+    }\n     m_pool->Apply(this);\n     m_to_add.clear();\n     m_to_remove.clear();\n     m_entry_vec.clear();\n     m_ancestors.clear();\n }\n+\n+std::vector<const TxGraph::Ref*> CTxMemPool::ChangeSet::CalculateParentsOf(const CTransactionRef& tx)\n+{\n+    std::vector<const TxGraph::Ref*> ret;\n+    std::set<Txid> inputs;\n+    for (const CTxIn &txin : tx->vin) {\n+        inputs.insert(txin.prevout.hash);\n+    }\n+    for (const auto &hash : inputs) {\n+        std::optional<txiter> piter = m_pool->GetIter(hash);\n+        if (piter) {\n+            ret.emplace_back(&(**piter));",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 73,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "34251141eca785578a0b2ca6d1c0932d34b2418d",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"Do not allow mempool clusters to exceed configured limits\"\r\n\r\nTiny optimization: instead of constructing and returning a `std::vector<const TxGraph::Ref*> ret` here, it's possible to invoke `m_pool->m_txgraph->AddDependency` directly.\r\n\r\nIf done, it's probably clearer to inline `CTxMemPool::ChangeSet::CalculateParentsOf` into `CTxMemPool::ChangeSet::ProcessDependencies` below.",
      "created_at": "2025-09-07T17:24:09Z",
      "updated_at": "2025-09-07T19:33:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2328773469",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328773469"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1451,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328774181",
      "pull_request_review_id": 3194519714,
      "id": 2328774181,
      "node_id": "PRRC_kwDOABII586KzkYl",
      "diff_hunk": "@@ -1414,9 +1428,58 @@ void CTxMemPool::ChangeSet::StageRemoval(CTxMemPool::txiter it)\n void CTxMemPool::ChangeSet::Apply()\n {\n     LOCK(m_pool->cs);\n+    if (!m_dependencies_processed) {\n+        ProcessDependencies();\n+    }\n     m_pool->Apply(this);\n     m_to_add.clear();\n     m_to_remove.clear();\n     m_entry_vec.clear();\n     m_ancestors.clear();\n }\n+\n+std::vector<const TxGraph::Ref*> CTxMemPool::ChangeSet::CalculateParentsOf(const CTransactionRef& tx)\n+{\n+    std::vector<const TxGraph::Ref*> ret;\n+    std::set<Txid> inputs;",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 66,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "34251141eca785578a0b2ca6d1c0932d34b2418d",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"Do not allow mempool clusters to exceed configured limits\"\r\n\r\nOptimization: instead of constructing an `std::set` of deduplicated input txids, I think it's more efficient to do the `GetIter`/`m_to_add.find` steps for all inputs. `TxGraphImpl` is likely more efficient at deduplicating `AddDependency` calls than the caller is using `std::set` here.",
      "created_at": "2025-09-07T17:26:13Z",
      "updated_at": "2025-09-07T19:33:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2328774181",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328774181"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1444,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328775797",
      "pull_request_review_id": 3194519714,
      "id": 2328775797,
      "node_id": "PRRC_kwDOABII586Kzkx1",
      "diff_hunk": "@@ -719,10 +719,13 @@ class ChainImpl : public Chain\n     util::Result<void> checkChainLimits(const CTransactionRef& tx) override\n     {\n         if (!m_node.mempool) return {};\n-        LockPoints lp;\n-        CTxMemPoolEntry entry(TxGraph::Ref(), tx, 0, 0, 0, 0, false, 0, lp);\n         LOCK(m_node.mempool->cs);\n-        return m_node.mempool->CheckPackageLimits({tx}, entry.GetTxSize());\n+        auto changeset = m_node.mempool->GetChangeSet();",
      "path": "src/node/interfaces.cpp",
      "position": 38,
      "original_position": 8,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "5bc5edf8743408979add1b15d23cc8ab7b948db1",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"Check cluster limits when using -walletrejectlongchains\" (though not introduced in this commit)\r\n\r\nUltranit: I think `CreateChangeSet` would be a slightly better name than `GetChangeSet`, as that may imply that there is just one ChangeSet and this is returning a reference to it or so.",
      "created_at": "2025-09-07T17:31:12Z",
      "updated_at": "2025-09-07T19:33:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2328775797",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328775797"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 723,
      "original_line": 723,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328784119",
      "pull_request_review_id": 3194519714,
      "id": 2328784119,
      "node_id": "PRRC_kwDOABII586Kzmz3",
      "diff_hunk": "@@ -1154,29 +1154,38 @@ void CTxMemPool::TrimToSize(size_t sizelimit, std::vector<COutPoint>* pvNoSpends\n \n     unsigned nTxnRemoved = 0;\n     CFeeRate maxFeeRateRemoved(0);\n+\n     while (!mapTx.empty() && DynamicMemoryUsage() > sizelimit) {\n-        indexed_transaction_set::index<descendant_score>::type::iterator it = mapTx.get<descendant_score>().begin();\n+        auto [worst_chunk, feeperweight] = m_txgraph->GetWorstMainChunk();",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 7,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "76a3b6286bf0c4c691077ce8d22babd5d04e9658",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"Limit mempool size based on chunk feerate\"\r\n\r\nThis structured binding will, if I understand it correctly, cause `worst_chunk` to be a **copy** of the vector returned in the `m_txgraph->GetWorstMainChunk()` invocation:\r\n```c++\r\nauto& [worst_chunk, feeperweight] = m_txgraph->GetWorstMainChunk();\r\n```\r\n\r\n(with `&` after `auto`) will avoid the copy.",
      "created_at": "2025-09-07T17:55:13Z",
      "updated_at": "2025-09-07T19:33:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2328784119",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328784119"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1159,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328788473",
      "pull_request_review_id": 3194519714,
      "id": 2328788473,
      "node_id": "PRRC_kwDOABII586Kzn35",
      "diff_hunk": "@@ -1154,29 +1154,38 @@ void CTxMemPool::TrimToSize(size_t sizelimit, std::vector<COutPoint>* pvNoSpends\n \n     unsigned nTxnRemoved = 0;\n     CFeeRate maxFeeRateRemoved(0);\n+\n     while (!mapTx.empty() && DynamicMemoryUsage() > sizelimit) {\n-        indexed_transaction_set::index<descendant_score>::type::iterator it = mapTx.get<descendant_score>().begin();\n+        auto [worst_chunk, feeperweight] = m_txgraph->GetWorstMainChunk();\n+        FeePerVSize feerate = ToFeePerVSize(feeperweight);\n+        CFeeRate removed{feerate.fee, feerate.size};\n \n         // We set the new mempool min fee to the feerate of the removed set, plus the\n         // \"minimum reasonable fee rate\" (ie some value under which we consider txn\n         // to have 0 fee). This way, we don't allow txn to enter mempool with feerate\n         // equal to txn which were removed with no block in between.\n-        CFeeRate removed(it->GetModFeesWithDescendants(), it->GetSizeWithDescendants());\n         removed += m_opts.incremental_relay_feerate;\n         trackPackageRemoved(removed);\n         maxFeeRateRemoved = std::max(maxFeeRateRemoved, removed);\n \n-        setEntries stage;\n-        CalculateDescendants(mapTx.project<0>(it), stage);\n-        nTxnRemoved += stage.size();\n+        nTxnRemoved += worst_chunk.size();\n \n         std::vector<CTransaction> txn;\n         if (pvNoSpendsRemaining) {\n-            txn.reserve(stage.size());\n-            for (txiter iter : stage)\n-                txn.push_back(iter->GetTx());\n+            txn.reserve(worst_chunk.size());\n+            for (auto ref : worst_chunk) {\n+                txn.emplace_back(dynamic_cast<const CTxMemPoolEntry&>(*ref).GetTx());",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 32,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "76a3b6286bf0c4c691077ce8d22babd5d04e9658",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"Limit mempool size based on chunk feerate\"\r\n\r\n`dynamic_cast` is pretty inefficient (it literally performs a string comparison on the type name to check whether the type is compatible!). I think you can use `static_cast` here, as you know the Ref will always be a `CTxMemPoolEntry`? Here and below.",
      "created_at": "2025-09-07T18:09:10Z",
      "updated_at": "2025-09-07T19:33:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2328788473",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328788473"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1177,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328794751",
      "pull_request_review_id": 3194519714,
      "id": 2328794751,
      "node_id": "PRRC_kwDOABII586KzpZ_",
      "diff_hunk": "@@ -219,224 +206,90 @@ bool BlockAssembler::TestPackage(uint64_t packageSize, int64_t packageSigOpsCost\n \n // Perform transaction-level checks before adding to block:\n // - transaction finality (locktime)\n-bool BlockAssembler::TestPackageTransactions(const CTxMemPool::setEntries& package) const\n+bool BlockAssembler::TestPackageTransactions(const std::vector<const CTxMemPoolEntry *>& txs) const\n {\n-    for (CTxMemPool::txiter it : package) {\n-        if (!IsFinalTx(it->GetTx(), nHeight, m_lock_time_cutoff)) {\n+    for (auto tx : txs) {\n+        if (!IsFinalTx(tx->GetTx(), nHeight, m_lock_time_cutoff)) {\n             return false;\n         }\n     }\n     return true;\n }\n \n-void BlockAssembler::AddToBlock(CTxMemPool::txiter iter)\n+void BlockAssembler::AddToBlock(const CTxMemPoolEntry& entry)\n {\n-    pblocktemplate->block.vtx.emplace_back(iter->GetSharedTx());\n-    pblocktemplate->vTxFees.push_back(iter->GetFee());\n-    pblocktemplate->vTxSigOpsCost.push_back(iter->GetSigOpCost());\n-    nBlockWeight += iter->GetTxWeight();\n+    pblocktemplate->block.vtx.emplace_back(entry.GetSharedTx());\n+    pblocktemplate->vTxFees.push_back(entry.GetFee());\n+    pblocktemplate->vTxSigOpsCost.push_back(entry.GetSigOpCost());\n+    nBlockWeight += entry.GetTxWeight();\n     ++nBlockTx;\n-    nBlockSigOpsCost += iter->GetSigOpCost();\n-    nFees += iter->GetFee();\n-    inBlock.insert(iter->GetSharedTx()->GetHash());\n+    nBlockSigOpsCost += entry.GetSigOpCost();\n+    nFees += entry.GetFee();\n \n     if (m_options.print_modified_fee) {\n         LogPrintf(\"fee rate %s txid %s\\n\",\n-                  CFeeRate(iter->GetModifiedFee(), iter->GetTxSize()).ToString(),\n-                  iter->GetTx().GetHash().ToString());\n-    }\n-}\n-\n-/** Add descendants of given transactions to mapModifiedTx with ancestor\n- * state updated assuming given transactions are inBlock. Returns number\n- * of updated descendants. */\n-static int UpdatePackagesForAdded(const CTxMemPool& mempool,\n-                                  const CTxMemPool::setEntries& alreadyAdded,\n-                                  indexed_modified_transaction_set& mapModifiedTx) EXCLUSIVE_LOCKS_REQUIRED(mempool.cs)\n-{\n-    AssertLockHeld(mempool.cs);\n-\n-    int nDescendantsUpdated = 0;\n-    for (CTxMemPool::txiter it : alreadyAdded) {\n-        CTxMemPool::setEntries descendants;\n-        mempool.CalculateDescendants(it, descendants);\n-        // Insert all descendants (not yet in block) into the modified set\n-        for (CTxMemPool::txiter desc : descendants) {\n-            if (alreadyAdded.count(desc)) {\n-                continue;\n-            }\n-            ++nDescendantsUpdated;\n-            modtxiter mit = mapModifiedTx.find(desc);\n-            if (mit == mapModifiedTx.end()) {\n-                CTxMemPoolModifiedEntry modEntry(desc);\n-                mit = mapModifiedTx.insert(modEntry).first;\n-            }\n-            mapModifiedTx.modify(mit, update_for_parent_inclusion(it));\n-        }\n+                  CFeeRate(entry.GetModifiedFee(), entry.GetTxSize()).ToString(),\n+                  entry.GetTx().GetHash().ToString());\n     }\n-    return nDescendantsUpdated;\n-}\n-\n-void BlockAssembler::SortForBlock(const CTxMemPool::setEntries& package, std::vector<CTxMemPool::txiter>& sortedEntries)\n-{\n-    // Sort package by ancestor count\n-    // If a transaction A depends on transaction B, then A's ancestor count\n-    // must be greater than B's.  So this is sufficient to validly order the\n-    // transactions for block inclusion.\n-    sortedEntries.clear();\n-    sortedEntries.insert(sortedEntries.begin(), package.begin(), package.end());\n-    std::sort(sortedEntries.begin(), sortedEntries.end(), CompareTxIterByAncestorCount());\n }\n \n-// This transaction selection algorithm orders the mempool based\n-// on feerate of a transaction including all unconfirmed ancestors.\n-// Since we don't remove transactions from the mempool as we select them\n-// for block inclusion, we need an alternate method of updating the feerate\n-// of a transaction with its not-yet-selected ancestors as we go.\n-// This is accomplished by walking the in-mempool descendants of selected\n-// transactions and storing a temporary modified state in mapModifiedTxs.\n-// Each time through the loop, we compare the best transaction in\n-// mapModifiedTxs with the next transaction in the mempool to decide what\n-// transaction package to work on next.\n-void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpdated)\n+void BlockAssembler::addChunks()\n {\n-    const auto& mempool{*Assert(m_mempool)};\n-    LOCK(mempool.cs);\n-\n-    // mapModifiedTx will store sorted packages after they are modified\n-    // because some of their txs are already in the block\n-    indexed_modified_transaction_set mapModifiedTx;\n-    // Keep track of entries that failed inclusion, to avoid duplicate work\n-    std::set<Txid> failedTx;\n-\n-    CTxMemPool::indexed_transaction_set::index<ancestor_score>::type::iterator mi = mempool.mapTx.get<ancestor_score>().begin();\n-    CTxMemPool::txiter iter;\n-\n     // Limit the number of attempts to add transactions to the block when it is\n     // close to full; this is just a simple heuristic to finish quickly if the\n     // mempool has a lot of entries.\n     const int64_t MAX_CONSECUTIVE_FAILURES = 1000;\n     constexpr int32_t BLOCK_FULL_ENOUGH_WEIGHT_DELTA = 4000;\n     int64_t nConsecutiveFailed = 0;\n \n-    while (mi != mempool.mapTx.get<ancestor_score>().end() || !mapModifiedTx.empty()) {\n-        // First try to find a new transaction in mapTx to evaluate.\n-        //\n-        // Skip entries in mapTx that are already in a block or are present\n-        // in mapModifiedTx (which implies that the mapTx ancestor state is\n-        // stale due to ancestor inclusion in the block)\n-        // Also skip transactions that we've already failed to add. This can happen if\n-        // we consider a transaction in mapModifiedTx and it fails: we can then\n-        // potentially consider it again while walking mapTx.  It's currently\n-        // guaranteed to fail again, but as a belt-and-suspenders check we put it in\n-        // failedTx and avoid re-evaluation, since the re-evaluation would be using\n-        // cached size/sigops/fee values that are not actually correct.\n-        /** Return true if given transaction from mapTx has already been evaluated,\n-         * or if the transaction's cached data in mapTx is incorrect. */\n-        if (mi != mempool.mapTx.get<ancestor_score>().end()) {\n-            auto it = mempool.mapTx.project<0>(mi);\n-            assert(it != mempool.mapTx.end());\n-            if (mapModifiedTx.count(it) || inBlock.count(it->GetSharedTx()->GetHash()) || failedTx.count(it->GetSharedTx()->GetHash())) {\n-                ++mi;\n-                continue;\n-            }\n-        }\n-\n-        // Now that mi is not stale, determine which transaction to evaluate:\n-        // the next entry from mapTx, or the best from mapModifiedTx?\n-        bool fUsingModified = false;\n-\n-        modtxscoreiter modit = mapModifiedTx.get<ancestor_score>().begin();\n-        if (mi == mempool.mapTx.get<ancestor_score>().end()) {\n-            // We're out of entries in mapTx; use the entry from mapModifiedTx\n-            iter = modit->iter;\n-            fUsingModified = true;\n-        } else {\n-            // Try to compare the mapTx entry to the mapModifiedTx entry\n-            iter = mempool.mapTx.project<0>(mi);\n-            if (modit != mapModifiedTx.get<ancestor_score>().end() &&\n-                    CompareTxMemPoolEntryByAncestorFee()(*modit, CTxMemPoolModifiedEntry(iter))) {\n-                // The best entry in mapModifiedTx has higher score\n-                // than the one from mapTx.\n-                // Switch which transaction (package) to consider\n-                iter = modit->iter;\n-                fUsingModified = true;\n-            } else {\n-                // Either no entry in mapModifiedTx, or it's worse than mapTx.\n-                // Increment mi for the next loop iteration.\n-                ++mi;\n-            }\n-        }\n+    std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef> selected_transactions;\n+    FeePerWeight chunk_feerate;\n \n-        // We skip mapTx entries that are inBlock, and mapModifiedTx shouldn't\n-        // contain anything that is inBlock.\n-        assert(!inBlock.count(iter->GetSharedTx()->GetHash()));\n-\n-        uint64_t packageSize = iter->GetSizeWithAncestors();\n-        CAmount packageFees = iter->GetModFeesWithAncestors();\n-        int64_t packageSigOpsCost = iter->GetSigOpCostWithAncestors();\n-        if (fUsingModified) {\n-            packageSize = modit->nSizeWithAncestors;\n-            packageFees = modit->nModFeesWithAncestors;\n-            packageSigOpsCost = modit->nSigOpCostWithAncestors;\n-        }\n+    chunk_feerate = m_mempool->GetBlockBuilderChunk(selected_transactions);\n+    FeePerVSize chunk_feerate_vsize = ToFeePerVSize(chunk_feerate);\n \n-        if (packageFees < m_options.blockMinFeeRate.GetFee(packageSize)) {\n-            // Everything else we might consider has a lower fee rate\n+    while (selected_transactions.size() > 0) {\n+        // Check to see if min fee rate is still respected.\n+        if (chunk_feerate.fee < m_options.blockMinFeeRate.GetFee(chunk_feerate_vsize.size)) {",
      "path": "src/node/miner.cpp",
      "position": 250,
      "original_position": 248,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "64de3bb675e2ff3b8f0bb1de3d7680cbb2263807",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"Select transactions for blocks based on chunk feerate\"\r\n\r\nSince `CFeeRate` now just encapsulates a `FeePerVSize`, it should be unnecessary to invoke `GetFee` (which involves an integer division), and instead it should be possible to compare `chunk_feerate_vsize` with `m_options.blockMinFeeRate.m_feefrac` directly, though I don't think there is an exposed way of doing so currently. Adding a `CFeeRate::GetFeePerVSize()` should be sufficient.",
      "created_at": "2025-09-07T18:26:13Z",
      "updated_at": "2025-09-07T19:33:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2328794751",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328794751"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 256,
      "original_line": 256,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328795859",
      "pull_request_review_id": 3194519714,
      "id": 2328795859,
      "node_id": "PRRC_kwDOABII586KzprT",
      "diff_hunk": "@@ -219,224 +206,90 @@ bool BlockAssembler::TestPackage(uint64_t packageSize, int64_t packageSigOpsCost\n \n // Perform transaction-level checks before adding to block:\n // - transaction finality (locktime)\n-bool BlockAssembler::TestPackageTransactions(const CTxMemPool::setEntries& package) const\n+bool BlockAssembler::TestPackageTransactions(const std::vector<const CTxMemPoolEntry *>& txs) const\n {\n-    for (CTxMemPool::txiter it : package) {\n-        if (!IsFinalTx(it->GetTx(), nHeight, m_lock_time_cutoff)) {\n+    for (auto tx : txs) {\n+        if (!IsFinalTx(tx->GetTx(), nHeight, m_lock_time_cutoff)) {\n             return false;\n         }\n     }\n     return true;\n }\n \n-void BlockAssembler::AddToBlock(CTxMemPool::txiter iter)\n+void BlockAssembler::AddToBlock(const CTxMemPoolEntry& entry)\n {\n-    pblocktemplate->block.vtx.emplace_back(iter->GetSharedTx());\n-    pblocktemplate->vTxFees.push_back(iter->GetFee());\n-    pblocktemplate->vTxSigOpsCost.push_back(iter->GetSigOpCost());\n-    nBlockWeight += iter->GetTxWeight();\n+    pblocktemplate->block.vtx.emplace_back(entry.GetSharedTx());\n+    pblocktemplate->vTxFees.push_back(entry.GetFee());\n+    pblocktemplate->vTxSigOpsCost.push_back(entry.GetSigOpCost());\n+    nBlockWeight += entry.GetTxWeight();\n     ++nBlockTx;\n-    nBlockSigOpsCost += iter->GetSigOpCost();\n-    nFees += iter->GetFee();\n-    inBlock.insert(iter->GetSharedTx()->GetHash());\n+    nBlockSigOpsCost += entry.GetSigOpCost();\n+    nFees += entry.GetFee();\n \n     if (m_options.print_modified_fee) {\n         LogPrintf(\"fee rate %s txid %s\\n\",\n-                  CFeeRate(iter->GetModifiedFee(), iter->GetTxSize()).ToString(),\n-                  iter->GetTx().GetHash().ToString());\n-    }\n-}\n-\n-/** Add descendants of given transactions to mapModifiedTx with ancestor\n- * state updated assuming given transactions are inBlock. Returns number\n- * of updated descendants. */\n-static int UpdatePackagesForAdded(const CTxMemPool& mempool,\n-                                  const CTxMemPool::setEntries& alreadyAdded,\n-                                  indexed_modified_transaction_set& mapModifiedTx) EXCLUSIVE_LOCKS_REQUIRED(mempool.cs)\n-{\n-    AssertLockHeld(mempool.cs);\n-\n-    int nDescendantsUpdated = 0;\n-    for (CTxMemPool::txiter it : alreadyAdded) {\n-        CTxMemPool::setEntries descendants;\n-        mempool.CalculateDescendants(it, descendants);\n-        // Insert all descendants (not yet in block) into the modified set\n-        for (CTxMemPool::txiter desc : descendants) {\n-            if (alreadyAdded.count(desc)) {\n-                continue;\n-            }\n-            ++nDescendantsUpdated;\n-            modtxiter mit = mapModifiedTx.find(desc);\n-            if (mit == mapModifiedTx.end()) {\n-                CTxMemPoolModifiedEntry modEntry(desc);\n-                mit = mapModifiedTx.insert(modEntry).first;\n-            }\n-            mapModifiedTx.modify(mit, update_for_parent_inclusion(it));\n-        }\n+                  CFeeRate(entry.GetModifiedFee(), entry.GetTxSize()).ToString(),\n+                  entry.GetTx().GetHash().ToString());\n     }\n-    return nDescendantsUpdated;\n-}\n-\n-void BlockAssembler::SortForBlock(const CTxMemPool::setEntries& package, std::vector<CTxMemPool::txiter>& sortedEntries)\n-{\n-    // Sort package by ancestor count\n-    // If a transaction A depends on transaction B, then A's ancestor count\n-    // must be greater than B's.  So this is sufficient to validly order the\n-    // transactions for block inclusion.\n-    sortedEntries.clear();\n-    sortedEntries.insert(sortedEntries.begin(), package.begin(), package.end());\n-    std::sort(sortedEntries.begin(), sortedEntries.end(), CompareTxIterByAncestorCount());\n }\n \n-// This transaction selection algorithm orders the mempool based\n-// on feerate of a transaction including all unconfirmed ancestors.\n-// Since we don't remove transactions from the mempool as we select them\n-// for block inclusion, we need an alternate method of updating the feerate\n-// of a transaction with its not-yet-selected ancestors as we go.\n-// This is accomplished by walking the in-mempool descendants of selected\n-// transactions and storing a temporary modified state in mapModifiedTxs.\n-// Each time through the loop, we compare the best transaction in\n-// mapModifiedTxs with the next transaction in the mempool to decide what\n-// transaction package to work on next.\n-void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpdated)\n+void BlockAssembler::addChunks()\n {\n-    const auto& mempool{*Assert(m_mempool)};\n-    LOCK(mempool.cs);\n-\n-    // mapModifiedTx will store sorted packages after they are modified\n-    // because some of their txs are already in the block\n-    indexed_modified_transaction_set mapModifiedTx;\n-    // Keep track of entries that failed inclusion, to avoid duplicate work\n-    std::set<Txid> failedTx;\n-\n-    CTxMemPool::indexed_transaction_set::index<ancestor_score>::type::iterator mi = mempool.mapTx.get<ancestor_score>().begin();\n-    CTxMemPool::txiter iter;\n-\n     // Limit the number of attempts to add transactions to the block when it is\n     // close to full; this is just a simple heuristic to finish quickly if the\n     // mempool has a lot of entries.\n     const int64_t MAX_CONSECUTIVE_FAILURES = 1000;\n     constexpr int32_t BLOCK_FULL_ENOUGH_WEIGHT_DELTA = 4000;\n     int64_t nConsecutiveFailed = 0;\n \n-    while (mi != mempool.mapTx.get<ancestor_score>().end() || !mapModifiedTx.empty()) {\n-        // First try to find a new transaction in mapTx to evaluate.\n-        //\n-        // Skip entries in mapTx that are already in a block or are present\n-        // in mapModifiedTx (which implies that the mapTx ancestor state is\n-        // stale due to ancestor inclusion in the block)\n-        // Also skip transactions that we've already failed to add. This can happen if\n-        // we consider a transaction in mapModifiedTx and it fails: we can then\n-        // potentially consider it again while walking mapTx.  It's currently\n-        // guaranteed to fail again, but as a belt-and-suspenders check we put it in\n-        // failedTx and avoid re-evaluation, since the re-evaluation would be using\n-        // cached size/sigops/fee values that are not actually correct.\n-        /** Return true if given transaction from mapTx has already been evaluated,\n-         * or if the transaction's cached data in mapTx is incorrect. */\n-        if (mi != mempool.mapTx.get<ancestor_score>().end()) {\n-            auto it = mempool.mapTx.project<0>(mi);\n-            assert(it != mempool.mapTx.end());\n-            if (mapModifiedTx.count(it) || inBlock.count(it->GetSharedTx()->GetHash()) || failedTx.count(it->GetSharedTx()->GetHash())) {\n-                ++mi;\n-                continue;\n-            }\n-        }\n-\n-        // Now that mi is not stale, determine which transaction to evaluate:\n-        // the next entry from mapTx, or the best from mapModifiedTx?\n-        bool fUsingModified = false;\n-\n-        modtxscoreiter modit = mapModifiedTx.get<ancestor_score>().begin();\n-        if (mi == mempool.mapTx.get<ancestor_score>().end()) {\n-            // We're out of entries in mapTx; use the entry from mapModifiedTx\n-            iter = modit->iter;\n-            fUsingModified = true;\n-        } else {\n-            // Try to compare the mapTx entry to the mapModifiedTx entry\n-            iter = mempool.mapTx.project<0>(mi);\n-            if (modit != mapModifiedTx.get<ancestor_score>().end() &&\n-                    CompareTxMemPoolEntryByAncestorFee()(*modit, CTxMemPoolModifiedEntry(iter))) {\n-                // The best entry in mapModifiedTx has higher score\n-                // than the one from mapTx.\n-                // Switch which transaction (package) to consider\n-                iter = modit->iter;\n-                fUsingModified = true;\n-            } else {\n-                // Either no entry in mapModifiedTx, or it's worse than mapTx.\n-                // Increment mi for the next loop iteration.\n-                ++mi;\n-            }\n-        }\n+    std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef> selected_transactions;\n+    FeePerWeight chunk_feerate;\n \n-        // We skip mapTx entries that are inBlock, and mapModifiedTx shouldn't\n-        // contain anything that is inBlock.\n-        assert(!inBlock.count(iter->GetSharedTx()->GetHash()));\n-\n-        uint64_t packageSize = iter->GetSizeWithAncestors();\n-        CAmount packageFees = iter->GetModFeesWithAncestors();\n-        int64_t packageSigOpsCost = iter->GetSigOpCostWithAncestors();\n-        if (fUsingModified) {\n-            packageSize = modit->nSizeWithAncestors;\n-            packageFees = modit->nModFeesWithAncestors;\n-            packageSigOpsCost = modit->nSigOpCostWithAncestors;\n-        }\n+    chunk_feerate = m_mempool->GetBlockBuilderChunk(selected_transactions);\n+    FeePerVSize chunk_feerate_vsize = ToFeePerVSize(chunk_feerate);\n \n-        if (packageFees < m_options.blockMinFeeRate.GetFee(packageSize)) {\n-            // Everything else we might consider has a lower fee rate\n+    while (selected_transactions.size() > 0) {\n+        // Check to see if min fee rate is still respected.\n+        if (chunk_feerate.fee < m_options.blockMinFeeRate.GetFee(chunk_feerate_vsize.size)) {\n+            // Everything else we might consider has a lower feerate\n             return;\n         }\n \n-        if (!TestPackage(packageSize, packageSigOpsCost)) {\n-            if (fUsingModified) {\n-                // Since we always look at the best entry in mapModifiedTx,\n-                // we must erase failed entries so that we can consider the\n-                // next best entry on the next loop iteration\n-                mapModifiedTx.get<ancestor_score>().erase(modit);\n-                failedTx.insert(iter->GetSharedTx()->GetHash());\n-            }\n+        int64_t package_sig_ops = 0;\n+        std::vector<const CTxMemPoolEntry*> mempool_txs;",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 262,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "64de3bb675e2ff3b8f0bb1de3d7680cbb2263807",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"Select transactions for blocks based on chunk feerate\"\r\n\r\nSmall optimization: move the definition of `mempool_txs` out of the `while` loop here, and just `.clear()` it here, to avoid an allocation per included chunk.",
      "created_at": "2025-09-07T18:29:24Z",
      "updated_at": "2025-09-07T19:33:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2328795859",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328795859"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 259,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328797770",
      "pull_request_review_id": 3194519714,
      "id": 2328797770,
      "node_id": "PRRC_kwDOABII586KzqJK",
      "diff_hunk": "@@ -219,224 +206,90 @@ bool BlockAssembler::TestPackage(uint64_t packageSize, int64_t packageSigOpsCost\n \n // Perform transaction-level checks before adding to block:\n // - transaction finality (locktime)\n-bool BlockAssembler::TestPackageTransactions(const CTxMemPool::setEntries& package) const\n+bool BlockAssembler::TestPackageTransactions(const std::vector<const CTxMemPoolEntry *>& txs) const\n {\n-    for (CTxMemPool::txiter it : package) {\n-        if (!IsFinalTx(it->GetTx(), nHeight, m_lock_time_cutoff)) {\n+    for (auto tx : txs) {\n+        if (!IsFinalTx(tx->GetTx(), nHeight, m_lock_time_cutoff)) {\n             return false;\n         }\n     }\n     return true;\n }\n \n-void BlockAssembler::AddToBlock(CTxMemPool::txiter iter)\n+void BlockAssembler::AddToBlock(const CTxMemPoolEntry& entry)\n {\n-    pblocktemplate->block.vtx.emplace_back(iter->GetSharedTx());\n-    pblocktemplate->vTxFees.push_back(iter->GetFee());\n-    pblocktemplate->vTxSigOpsCost.push_back(iter->GetSigOpCost());\n-    nBlockWeight += iter->GetTxWeight();\n+    pblocktemplate->block.vtx.emplace_back(entry.GetSharedTx());\n+    pblocktemplate->vTxFees.push_back(entry.GetFee());\n+    pblocktemplate->vTxSigOpsCost.push_back(entry.GetSigOpCost());\n+    nBlockWeight += entry.GetTxWeight();\n     ++nBlockTx;\n-    nBlockSigOpsCost += iter->GetSigOpCost();\n-    nFees += iter->GetFee();\n-    inBlock.insert(iter->GetSharedTx()->GetHash());\n+    nBlockSigOpsCost += entry.GetSigOpCost();\n+    nFees += entry.GetFee();\n \n     if (m_options.print_modified_fee) {\n         LogPrintf(\"fee rate %s txid %s\\n\",\n-                  CFeeRate(iter->GetModifiedFee(), iter->GetTxSize()).ToString(),\n-                  iter->GetTx().GetHash().ToString());\n-    }\n-}\n-\n-/** Add descendants of given transactions to mapModifiedTx with ancestor\n- * state updated assuming given transactions are inBlock. Returns number\n- * of updated descendants. */\n-static int UpdatePackagesForAdded(const CTxMemPool& mempool,\n-                                  const CTxMemPool::setEntries& alreadyAdded,\n-                                  indexed_modified_transaction_set& mapModifiedTx) EXCLUSIVE_LOCKS_REQUIRED(mempool.cs)\n-{\n-    AssertLockHeld(mempool.cs);\n-\n-    int nDescendantsUpdated = 0;\n-    for (CTxMemPool::txiter it : alreadyAdded) {\n-        CTxMemPool::setEntries descendants;\n-        mempool.CalculateDescendants(it, descendants);\n-        // Insert all descendants (not yet in block) into the modified set\n-        for (CTxMemPool::txiter desc : descendants) {\n-            if (alreadyAdded.count(desc)) {\n-                continue;\n-            }\n-            ++nDescendantsUpdated;\n-            modtxiter mit = mapModifiedTx.find(desc);\n-            if (mit == mapModifiedTx.end()) {\n-                CTxMemPoolModifiedEntry modEntry(desc);\n-                mit = mapModifiedTx.insert(modEntry).first;\n-            }\n-            mapModifiedTx.modify(mit, update_for_parent_inclusion(it));\n-        }\n+                  CFeeRate(entry.GetModifiedFee(), entry.GetTxSize()).ToString(),\n+                  entry.GetTx().GetHash().ToString());\n     }\n-    return nDescendantsUpdated;\n-}\n-\n-void BlockAssembler::SortForBlock(const CTxMemPool::setEntries& package, std::vector<CTxMemPool::txiter>& sortedEntries)\n-{\n-    // Sort package by ancestor count\n-    // If a transaction A depends on transaction B, then A's ancestor count\n-    // must be greater than B's.  So this is sufficient to validly order the\n-    // transactions for block inclusion.\n-    sortedEntries.clear();\n-    sortedEntries.insert(sortedEntries.begin(), package.begin(), package.end());\n-    std::sort(sortedEntries.begin(), sortedEntries.end(), CompareTxIterByAncestorCount());\n }\n \n-// This transaction selection algorithm orders the mempool based\n-// on feerate of a transaction including all unconfirmed ancestors.\n-// Since we don't remove transactions from the mempool as we select them\n-// for block inclusion, we need an alternate method of updating the feerate\n-// of a transaction with its not-yet-selected ancestors as we go.\n-// This is accomplished by walking the in-mempool descendants of selected\n-// transactions and storing a temporary modified state in mapModifiedTxs.\n-// Each time through the loop, we compare the best transaction in\n-// mapModifiedTxs with the next transaction in the mempool to decide what\n-// transaction package to work on next.\n-void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpdated)\n+void BlockAssembler::addChunks()\n {\n-    const auto& mempool{*Assert(m_mempool)};\n-    LOCK(mempool.cs);\n-\n-    // mapModifiedTx will store sorted packages after they are modified\n-    // because some of their txs are already in the block\n-    indexed_modified_transaction_set mapModifiedTx;\n-    // Keep track of entries that failed inclusion, to avoid duplicate work\n-    std::set<Txid> failedTx;\n-\n-    CTxMemPool::indexed_transaction_set::index<ancestor_score>::type::iterator mi = mempool.mapTx.get<ancestor_score>().begin();\n-    CTxMemPool::txiter iter;\n-\n     // Limit the number of attempts to add transactions to the block when it is\n     // close to full; this is just a simple heuristic to finish quickly if the\n     // mempool has a lot of entries.\n     const int64_t MAX_CONSECUTIVE_FAILURES = 1000;\n     constexpr int32_t BLOCK_FULL_ENOUGH_WEIGHT_DELTA = 4000;\n     int64_t nConsecutiveFailed = 0;\n \n-    while (mi != mempool.mapTx.get<ancestor_score>().end() || !mapModifiedTx.empty()) {\n-        // First try to find a new transaction in mapTx to evaluate.\n-        //\n-        // Skip entries in mapTx that are already in a block or are present\n-        // in mapModifiedTx (which implies that the mapTx ancestor state is\n-        // stale due to ancestor inclusion in the block)\n-        // Also skip transactions that we've already failed to add. This can happen if\n-        // we consider a transaction in mapModifiedTx and it fails: we can then\n-        // potentially consider it again while walking mapTx.  It's currently\n-        // guaranteed to fail again, but as a belt-and-suspenders check we put it in\n-        // failedTx and avoid re-evaluation, since the re-evaluation would be using\n-        // cached size/sigops/fee values that are not actually correct.\n-        /** Return true if given transaction from mapTx has already been evaluated,\n-         * or if the transaction's cached data in mapTx is incorrect. */\n-        if (mi != mempool.mapTx.get<ancestor_score>().end()) {\n-            auto it = mempool.mapTx.project<0>(mi);\n-            assert(it != mempool.mapTx.end());\n-            if (mapModifiedTx.count(it) || inBlock.count(it->GetSharedTx()->GetHash()) || failedTx.count(it->GetSharedTx()->GetHash())) {\n-                ++mi;\n-                continue;\n-            }\n-        }\n-\n-        // Now that mi is not stale, determine which transaction to evaluate:\n-        // the next entry from mapTx, or the best from mapModifiedTx?\n-        bool fUsingModified = false;\n-\n-        modtxscoreiter modit = mapModifiedTx.get<ancestor_score>().begin();\n-        if (mi == mempool.mapTx.get<ancestor_score>().end()) {\n-            // We're out of entries in mapTx; use the entry from mapModifiedTx\n-            iter = modit->iter;\n-            fUsingModified = true;\n-        } else {\n-            // Try to compare the mapTx entry to the mapModifiedTx entry\n-            iter = mempool.mapTx.project<0>(mi);\n-            if (modit != mapModifiedTx.get<ancestor_score>().end() &&\n-                    CompareTxMemPoolEntryByAncestorFee()(*modit, CTxMemPoolModifiedEntry(iter))) {\n-                // The best entry in mapModifiedTx has higher score\n-                // than the one from mapTx.\n-                // Switch which transaction (package) to consider\n-                iter = modit->iter;\n-                fUsingModified = true;\n-            } else {\n-                // Either no entry in mapModifiedTx, or it's worse than mapTx.\n-                // Increment mi for the next loop iteration.\n-                ++mi;\n-            }\n-        }\n+    std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef> selected_transactions;\n+    FeePerWeight chunk_feerate;\n \n-        // We skip mapTx entries that are inBlock, and mapModifiedTx shouldn't\n-        // contain anything that is inBlock.\n-        assert(!inBlock.count(iter->GetSharedTx()->GetHash()));\n-\n-        uint64_t packageSize = iter->GetSizeWithAncestors();\n-        CAmount packageFees = iter->GetModFeesWithAncestors();\n-        int64_t packageSigOpsCost = iter->GetSigOpCostWithAncestors();\n-        if (fUsingModified) {\n-            packageSize = modit->nSizeWithAncestors;\n-            packageFees = modit->nModFeesWithAncestors;\n-            packageSigOpsCost = modit->nSigOpCostWithAncestors;\n-        }\n+    chunk_feerate = m_mempool->GetBlockBuilderChunk(selected_transactions);\n+    FeePerVSize chunk_feerate_vsize = ToFeePerVSize(chunk_feerate);\n \n-        if (packageFees < m_options.blockMinFeeRate.GetFee(packageSize)) {\n-            // Everything else we might consider has a lower fee rate\n+    while (selected_transactions.size() > 0) {\n+        // Check to see if min fee rate is still respected.\n+        if (chunk_feerate.fee < m_options.blockMinFeeRate.GetFee(chunk_feerate_vsize.size)) {\n+            // Everything else we might consider has a lower feerate\n             return;\n         }\n \n-        if (!TestPackage(packageSize, packageSigOpsCost)) {\n-            if (fUsingModified) {\n-                // Since we always look at the best entry in mapModifiedTx,\n-                // we must erase failed entries so that we can consider the\n-                // next best entry on the next loop iteration\n-                mapModifiedTx.get<ancestor_score>().erase(modit);\n-                failedTx.insert(iter->GetSharedTx()->GetHash());\n-            }\n+        int64_t package_sig_ops = 0;\n+        std::vector<const CTxMemPoolEntry*> mempool_txs;\n+        for (const auto& tx : selected_transactions) {\n+            mempool_txs.emplace_back(&tx.get());\n+            package_sig_ops += tx.get().GetSigOpCost();\n+        }\n \n+        // Check to see if this chunk will fit.\n+        if (!TestPackage(chunk_feerate, package_sig_ops) || !TestPackageTransactions(mempool_txs)) {\n+            m_mempool->SkipBuilderChunk();\n+            // This chunk won't fit, so we let it be removed from the heap and\n+            // we'll try the next best.\n+            // TODO: try to break up this chunk into smaller chunks for",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 273,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "64de3bb675e2ff3b8f0bb1de3d7680cbb2263807",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"Select transactions for blocks based on chunk feerate\"\r\n\r\nI don't think this TODO belongs here, as it's functionality that could be added as an optimization to `TxGraphImpl` without `BlockAssembler` needing to be aware.",
      "created_at": "2025-09-07T18:35:28Z",
      "updated_at": "2025-09-07T19:33:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2328797770",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328797770"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 270,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328798560",
      "pull_request_review_id": 3194519714,
      "id": 2328798560,
      "node_id": "PRRC_kwDOABII586KzqVg",
      "diff_hunk": "@@ -106,9 +106,7 @@ void ApplyArgsManOptions(const ArgsManager& args, BlockAssembler::Options& optio\n \n void BlockAssembler::resetBlock()\n {\n-    inBlock.clear();\n-\n-    // Reserve space for fixed-size block header, txs count, and coinbase tx.\n+    // Reserve space for coinbase tx",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 7,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "64de3bb675e2ff3b8f0bb1de3d7680cbb2263807",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"Select transactions for blocks based on chunk feerate\"\r\n\r\nThis reverts a previously-added better comment.",
      "created_at": "2025-09-07T18:38:08Z",
      "updated_at": "2025-09-07T19:33:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2328798560",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328798560"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 109,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328801531",
      "pull_request_review_id": 3194519714,
      "id": 2328801531,
      "node_id": "PRRC_kwDOABII586KzrD7",
      "diff_hunk": "@@ -535,49 +535,63 @@ CMutableTransaction TestChain100Setup::CreateValidMempoolTransaction(CTransactio\n std::vector<CTransactionRef> TestChain100Setup::PopulateMempool(FastRandomContext& det_rand, size_t num_transactions, bool submit)\n {\n     std::vector<CTransactionRef> mempool_transactions;\n-    std::deque<std::pair<COutPoint, CAmount>> unspent_prevouts;\n+    std::deque<std::pair<COutPoint, CAmount>> unspent_prevouts, undo_info;\n     std::transform(m_coinbase_txns.begin(), m_coinbase_txns.end(), std::back_inserter(unspent_prevouts),\n         [](const auto& tx){ return std::make_pair(COutPoint(tx->GetHash(), 0), tx->vout[0].nValue); });\n     while (num_transactions > 0 && !unspent_prevouts.empty()) {\n-        // The number of inputs and outputs are random, between 1 and 24.\n+        // The number of inputs and outputs are random, between 1 and 10.",
      "path": "src/test/util/setup_common.cpp",
      "position": 1,
      "original_position": 10,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "7553b4af4ce3762492ec402e758d7361c87c5cd7",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"test: avoid adding transactions to the mempool that fail policy checks\"\r\n\r\nThis looks like it does not match the code below (which uses 1-5 inputs and 1-25 outputs?).",
      "created_at": "2025-09-07T18:48:06Z",
      "updated_at": "2025-09-07T19:33:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2328801531",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328801531"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 542,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328802761",
      "pull_request_review_id": 3194519714,
      "id": 2328802761,
      "node_id": "PRRC_kwDOABII586KzrXJ",
      "diff_hunk": "@@ -803,24 +803,20 @@ void CTxMemPool::check(const CCoinsViewCache& active_coins_tip, int64_t spendhei\n     assert(innerUsage == cachedInnerUsage);\n }\n \n-bool CTxMemPool::CompareDepthAndScore(const Wtxid& hasha, const Wtxid& hashb) const\n+bool CTxMemPool::CompareMiningScoreWithTopology(const Wtxid& hasha, const Wtxid& hashb) const\n {\n     /* Return `true` if hasha should be considered sooner than hashb. Namely when:\n      *   a is not in the mempool, but b is\n-     *   both are in the mempool and a has fewer ancestors than b\n-     *   both are in the mempool and a has a higher score than b\n+     *   both are in the mempool and a has a higher mining score than b\n+     *   both are in the mempool and a appears before b in the same cluster\n      */\n     LOCK(cs);\n     auto j{GetIter(hashb)};\n     if (!j.has_value()) return false;\n     auto i{GetIter(hasha)};\n     if (!i.has_value()) return true;\n-    uint64_t counta = i.value()->GetCountWithAncestors();\n-    uint64_t countb = j.value()->GetCountWithAncestors();\n-    if (counta == countb) {\n-        return CompareTxMemPoolEntryByScore()(*i.value(), *j.value());\n-    }\n-    return counta < countb;\n+\n+    return m_txgraph->CompareMainOrder(*i.value(), *j.value()) == std::strong_ordering::less ? true : false;",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 26,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "f172ac5e6c37f446bc3c38419cf40f3adac3ddd8",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"Use cluster linearization for transaction relay sort order\"\r\n\r\nMore idiomatic:\r\n```c++\r\nreturn m_txgraph->CompareMainOrder(*i.value(), *j.value()) < 0;\r\n```\r\n",
      "created_at": "2025-09-07T18:51:20Z",
      "updated_at": "2025-09-07T19:33:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2328802761",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328802761"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 819,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328804847",
      "pull_request_review_id": 3194519714,
      "id": 2328804847,
      "node_id": "PRRC_kwDOABII586Kzr3v",
      "diff_hunk": "@@ -803,24 +803,20 @@ void CTxMemPool::check(const CCoinsViewCache& active_coins_tip, int64_t spendhei\n     assert(innerUsage == cachedInnerUsage);\n }\n \n-bool CTxMemPool::CompareDepthAndScore(const Wtxid& hasha, const Wtxid& hashb) const\n+bool CTxMemPool::CompareMiningScoreWithTopology(const Wtxid& hasha, const Wtxid& hashb) const\n {\n     /* Return `true` if hasha should be considered sooner than hashb. Namely when:\n      *   a is not in the mempool, but b is\n-     *   both are in the mempool and a has fewer ancestors than b\n-     *   both are in the mempool and a has a higher score than b\n+     *   both are in the mempool and a has a higher mining score than b\n+     *   both are in the mempool and a appears before b in the same cluster\n      */\n     LOCK(cs);\n     auto j{GetIter(hashb)};\n     if (!j.has_value()) return false;\n     auto i{GetIter(hasha)};\n     if (!i.has_value()) return true;\n-    uint64_t counta = i.value()->GetCountWithAncestors();\n-    uint64_t countb = j.value()->GetCountWithAncestors();\n-    if (counta == countb) {\n-        return CompareTxMemPoolEntryByScore()(*i.value(), *j.value());\n-    }\n-    return counta < countb;\n+",
      "path": "src/txmempool.cpp",
      "position": 733,
      "original_position": 25,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "f172ac5e6c37f446bc3c38419cf40f3adac3ddd8",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"Use cluster linearization for transaction relay sort order\"\r\n\r\nRelying solely on `CompareMainOrder` for the purpose of determining inv send order may be a privacy leak, as it uses cluster sequence number as tie-breaker in case of cross-cluster equal-feerate comparisons, which may reveal information about mempool insertion order. Falling back to txid like the old code did would be better, though not currently possible using `CompareMainOrder`.\r\n\r\nIf not addressed before this gets merged, maybe worth adding a TODO for so it doesn't get forgotten?",
      "created_at": "2025-09-07T18:57:59Z",
      "updated_at": "2025-09-07T19:33:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2328804847",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328804847"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 515,
      "original_line": 515,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328805583",
      "pull_request_review_id": 3194519714,
      "id": 2328805583,
      "node_id": "PRRC_kwDOABII586KzsDP",
      "diff_hunk": "@@ -845,7 +827,10 @@ std::vector<CTxMemPool::indexed_transaction_set::const_iterator> CTxMemPool::Get\n     for (indexed_transaction_set::iterator mi = mapTx.begin(); mi != mapTx.end(); ++mi) {\n         iters.push_back(mi);\n     }\n-    std::sort(iters.begin(), iters.end(), DepthAndScoreComparator());\n+    std::sort(iters.begin(), iters.end(), [this](const CTxMemPool::indexed_transaction_set::const_iterator& a, const CTxMemPool::indexed_transaction_set::const_iterator& b) {\n+        LOCK(this->cs); // TODO: this is unnecessary, to quiet a compiler warning",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 65,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "7f44c6d9893df97bb413e01aa737028cbe52ce75",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"Remove CTxMemPool::GetSortedDepthAndScore\"\r\n\r\nGrabbing a lock for every comparison between two transactions sound excessive. Is there really no way around silencing this otherwise?",
      "created_at": "2025-09-07T19:00:42Z",
      "updated_at": "2025-09-07T19:33:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2328805583",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328805583"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 537,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328806555",
      "pull_request_review_id": 3194519714,
      "id": 2328806555,
      "node_id": "PRRC_kwDOABII586KzsSb",
      "diff_hunk": "@@ -7,8 +7,9 @@\n from decimal import Decimal\n \n from test_framework.messages import (\n-    DEFAULT_ANCESTOR_LIMIT,\n     DEFAULT_DESCENDANT_LIMIT,\n+    DEFAULT_DESCENDANT_LIMIT,",
      "path": "test/functional/mempool_packages.py",
      "position": 1,
      "original_position": 6,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "74f51262688e1f6a4af1664c13f6c895b1499a39",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"Stop enforcing ancestor size/count limits\"\r\n\r\nDuplicate?",
      "created_at": "2025-09-07T19:04:07Z",
      "updated_at": "2025-09-07T19:33:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2328806555",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328806555"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 11,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328810011",
      "pull_request_review_id": 3194519714,
      "id": 2328810011,
      "node_id": "PRRC_kwDOABII586KztIb",
      "diff_hunk": "@@ -953,11 +953,7 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n     ws.m_iters_conflicting = m_pool.GetIterSet(ws.m_conflicts);\n \n     // Calculate in-mempool ancestors, up to a limit.",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 3,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "6000fc8c3fcc0446b3665f7fccf102068919fa3c",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"Simplify ancestor calculation functions\"\r\n\r\nThe `up to a limit` sounds outdated now.",
      "created_at": "2025-09-07T19:16:06Z",
      "updated_at": "2025-09-07T19:33:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2328810011",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328810011"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 955,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328810624",
      "pull_request_review_id": 3194519714,
      "id": 2328810624,
      "node_id": "PRRC_kwDOABII586KztSA",
      "diff_hunk": "@@ -297,6 +297,7 @@ class CTxMemPool\n     std::vector<std::pair<Wtxid, txiter>> txns_randomized GUARDED_BY(cs); //!< All transactions in mapTx with their wtxids, in arbitrary order\n \n     typedef std::set<txiter, CompareIteratorByHash> setEntries;\n+    typedef std::vector<txiter> Entries;",
      "path": "src/txmempool.h",
      "position": 1,
      "original_position": 4,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "1f70699997666ffbaf98748b1df0ead6ffe87bf6",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"Use txgraph to calculate descendants\"\r\n\r\nThis `Entries` type seems to be unused.",
      "created_at": "2025-09-07T19:18:32Z",
      "updated_at": "2025-09-07T19:33:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2328810624",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328810624"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 300,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328813987",
      "pull_request_review_id": 3194519714,
      "id": 2328813987,
      "node_id": "PRRC_kwDOABII586KzuGj",
      "diff_hunk": "@@ -377,8 +377,8 @@ void CTxMemPool::removeConflicts(const CTransaction &tx)\n             const CTransaction &txConflict = it->second->GetTx();\n             if (Assume(txConflict.GetHash() != tx.GetHash()))\n             {\n+                removeRecursive(it->second, MemPoolRemovalReason::CONFLICT);",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "4087ae4e5262c3ee0a3ce633fb561779340d99c3",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"Simplify removeConflicts\"\r\n\r\nIs this line swap necessary? It doesn't look like much of a simplification.",
      "created_at": "2025-09-07T19:27:25Z",
      "updated_at": "2025-09-07T19:33:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2328813987",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328813987"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 380,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328815965",
      "pull_request_review_id": 3194519714,
      "id": 2328815965,
      "node_id": "PRRC_kwDOABII586Kzuld",
      "diff_hunk": "@@ -210,6 +210,7 @@ void CTxMemPool::Apply(ChangeSet* changeset)\n \n         addNewTransaction(it);\n     }\n+    m_txgraph->DoWork(10'000);",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "61f51546af33923c9e5dc9632ba5544aa853ae71",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"Invoke TxGraph::DoWork() at appropriate times\"\r\n\r\nI would expect the number here to be a multiple (100x?) of the number passed as `acceptable_iters` (as that configuration variable controls the number of iterations that's mandatory *per cluster*, while this is work that gets performed over all clusters. Presumably we're ok with spending more than 50 μs overall?\r\n\r\nAlso perhaps introduce a named constant for this.",
      "created_at": "2025-09-07T19:32:53Z",
      "updated_at": "2025-09-07T19:33:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2328815965",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328815965"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 213,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328896505",
      "pull_request_review_id": 3194656178,
      "id": 2328896505,
      "node_id": "PRRC_kwDOABII586K0CP5",
      "diff_hunk": "@@ -803,24 +803,20 @@ void CTxMemPool::check(const CCoinsViewCache& active_coins_tip, int64_t spendhei\n     assert(innerUsage == cachedInnerUsage);\n }\n \n-bool CTxMemPool::CompareDepthAndScore(const Wtxid& hasha, const Wtxid& hashb) const\n+bool CTxMemPool::CompareMiningScoreWithTopology(const Wtxid& hasha, const Wtxid& hashb) const\n {\n     /* Return `true` if hasha should be considered sooner than hashb. Namely when:\n      *   a is not in the mempool, but b is\n-     *   both are in the mempool and a has fewer ancestors than b\n-     *   both are in the mempool and a has a higher score than b\n+     *   both are in the mempool and a has a higher mining score than b\n+     *   both are in the mempool and a appears before b in the same cluster\n      */\n     LOCK(cs);\n     auto j{GetIter(hashb)};\n     if (!j.has_value()) return false;\n     auto i{GetIter(hasha)};\n     if (!i.has_value()) return true;\n-    uint64_t counta = i.value()->GetCountWithAncestors();\n-    uint64_t countb = j.value()->GetCountWithAncestors();\n-    if (counta == countb) {\n-        return CompareTxMemPoolEntryByScore()(*i.value(), *j.value());\n-    }\n-    return counta < countb;\n+",
      "path": "src/txmempool.cpp",
      "position": 733,
      "original_position": 25,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "f172ac5e6c37f446bc3c38419cf40f3adac3ddd8",
      "in_reply_to_id": 2328804847,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "See #33335.",
      "created_at": "2025-09-07T23:46:09Z",
      "updated_at": "2025-09-07T23:46:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2328896505",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2328896505"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 515,
      "original_line": 515,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2330691874",
      "pull_request_review_id": 3197152141,
      "id": 2330691874,
      "node_id": "PRRC_kwDOABII586K64ki",
      "diff_hunk": "@@ -413,7 +413,7 @@ class CTxMemPool\n     }\n \n public:\n-    indirectmap<COutPoint, const CTransaction*> mapNextTx GUARDED_BY(cs);\n+    indirectmap<COutPoint, txiter> mapNextTx GUARDED_BY(cs);",
      "path": "src/txmempool.h",
      "position": 316,
      "original_position": 5,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "56999a7085f21c8d462fd5afdfbb41dd93df423f",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "56999a7085f21c8d462fd5afdfbb41dd93df423f\r\n\r\nnow is a great time to document what this thing is",
      "created_at": "2025-09-08T16:00:15Z",
      "updated_at": "2025-09-08T21:20:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2330691874",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2330691874"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 302,
      "original_line": 302,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2330728423",
      "pull_request_review_id": 3197152141,
      "id": 2330728423,
      "node_id": "PRRC_kwDOABII586K7Bfn",
      "diff_hunk": "@@ -22,7 +22,7 @@\n static void AddTx(const CTransactionRef& tx, const CAmount& fee, CTxMemPool& pool) EXCLUSIVE_LOCKS_REQUIRED(cs_main, pool.cs)\n {\n     LockPoints lp;\n-    AddToMempool(pool, CTxMemPoolEntry(tx, fee, /*time=*/0, /*entry_height=*/1, /*entry_sequence=*/0, /*spends_coinbase=*/false, /*sigops_cost=*/4, lp));\n+    AddToMempool(pool, CTxMemPoolEntry(TxGraph::Ref(), tx, fee, /*time=*/0, /*entry_height=*/1, /*entry_sequence=*/0, /*spends_coinbase=*/false, /*sigops_cost=*/4, lp));",
      "path": "src/bench/blockencodings.cpp",
      "position": 1,
      "original_position": 5,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "f8d40726eb1eaee38752eaea5a16aa86bdde3967",
      "in_reply_to_id": 2328763664,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "if you do so, please annotate the arg",
      "created_at": "2025-09-08T16:14:09Z",
      "updated_at": "2025-09-08T21:20:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2330728423",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2330728423"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 25,
      "original_line": 25,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2330732155",
      "pull_request_review_id": 3197152141,
      "id": 2330732155,
      "node_id": "PRRC_kwDOABII586K7CZ7",
      "diff_hunk": "@@ -373,6 +373,11 @@ bool SpendsNonAnchorWitnessProg(const CTransaction& tx, const CCoinsViewCache& p\n     return false;\n }\n \n+int64_t GetSigOpsAdjustedWeight(int64_t nWeight, int64_t nSigOpCost, unsigned int bytes_per_sigop)",
      "path": "src/policy/policy.cpp",
      "position": 4,
      "original_position": 4,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "7ddce57e96aff26fb2a5abc1009e6baef24d5bab",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "7ddce57e96aff26fb2a5abc1009e6baef24d5bab\r\n\r\nlook for some trivial coverage of this, or directly use this in GetVirtualTransactionSize?",
      "created_at": "2025-09-08T16:15:41Z",
      "updated_at": "2025-09-08T21:20:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2330732155",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2330732155"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 376,
      "original_line": 376,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2330975716",
      "pull_request_review_id": 3197152141,
      "id": 2330975716,
      "node_id": "PRRC_kwDOABII586K793k",
      "diff_hunk": "@@ -14,7 +14,7 @@\n #ifndef BITCOIN_TXGRAPH_H\n #define BITCOIN_TXGRAPH_H\n \n-static constexpr unsigned MAX_CLUSTER_COUNT_LIMIT{64};\n+static constexpr unsigned MAX_CLUSTER_COUNT_LIMIT{201};",
      "path": "src/txgraph.h",
      "position": 1,
      "original_position": 5,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "34251141eca785578a0b2ca6d1c0932d34b2418d",
      "in_reply_to_id": 2319721247,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "https://github.com/glozow/bitcoin/commit/75529c01ff47997e17ba2eb8f0de8dfa0effbb72\r\n\r\nI believe this is the suggested change",
      "created_at": "2025-09-08T18:10:29Z",
      "updated_at": "2025-09-08T21:20:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2330975716",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2330975716"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": 17,
      "start_side": "LEFT",
      "line": null,
      "original_line": 17,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2331016065",
      "pull_request_review_id": 3197152141,
      "id": 2331016065,
      "node_id": "PRRC_kwDOABII586K8HuB",
      "diff_hunk": "@@ -510,6 +510,7 @@ class CTxMemPool\n      */\n     void UpdateTransactionsFromBlock(const std::vector<Txid>& vHashesToUpdate) EXCLUSIVE_LOCKS_REQUIRED(cs, cs_main) LOCKS_EXCLUDED(m_epoch);\n \n+public:",
      "path": "src/txmempool.h",
      "position": 1,
      "original_position": 4,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "34251141eca785578a0b2ca6d1c0932d34b2418d",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "34251141eca785578a0b2ca6d1c0932d34b2418d\r\n\r\nthis block is already public",
      "created_at": "2025-09-08T18:21:32Z",
      "updated_at": "2025-09-08T21:20:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2331016065",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2331016065"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 513,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2331041173",
      "pull_request_review_id": 3197152141,
      "id": 2331041173,
      "node_id": "PRRC_kwDOABII586K8N2V",
      "diff_hunk": "@@ -1414,9 +1428,58 @@ void CTxMemPool::ChangeSet::StageRemoval(CTxMemPool::txiter it)\n void CTxMemPool::ChangeSet::Apply()\n {\n     LOCK(m_pool->cs);\n+    if (!m_dependencies_processed) {\n+        ProcessDependencies();\n+    }\n     m_pool->Apply(this);\n     m_to_add.clear();\n     m_to_remove.clear();\n     m_entry_vec.clear();\n     m_ancestors.clear();\n }\n+\n+std::vector<const TxGraph::Ref*> CTxMemPool::ChangeSet::CalculateParentsOf(const CTransactionRef& tx)\n+{\n+    std::vector<const TxGraph::Ref*> ret;",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 65,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "34251141eca785578a0b2ca6d1c0932d34b2418d",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Can  `Assume(!m_dependencies_processed);`",
      "created_at": "2025-09-08T18:27:31Z",
      "updated_at": "2025-09-08T21:20:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2331041173",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2331041173"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1443,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2331064925",
      "pull_request_review_id": 3197152141,
      "id": 2331064925,
      "node_id": "PRRC_kwDOABII586K8Tpd",
      "diff_hunk": "@@ -1414,9 +1428,58 @@ void CTxMemPool::ChangeSet::StageRemoval(CTxMemPool::txiter it)\n void CTxMemPool::ChangeSet::Apply()\n {\n     LOCK(m_pool->cs);\n+    if (!m_dependencies_processed) {\n+        ProcessDependencies();\n+    }\n     m_pool->Apply(this);\n     m_to_add.clear();\n     m_to_remove.clear();\n     m_entry_vec.clear();\n     m_ancestors.clear();\n }\n+\n+std::vector<const TxGraph::Ref*> CTxMemPool::ChangeSet::CalculateParentsOf(const CTransactionRef& tx)\n+{\n+    std::vector<const TxGraph::Ref*> ret;\n+    std::set<Txid> inputs;\n+    for (const CTxIn &txin : tx->vin) {\n+        inputs.insert(txin.prevout.hash);\n+    }\n+    for (const auto &hash : inputs) {\n+        std::optional<txiter> piter = m_pool->GetIter(hash);\n+        if (piter) {\n+            ret.emplace_back(&(**piter));\n+        } else {\n+            // Check the change set for parents.\n+            auto it = m_to_add.find(hash);\n+            if (it != m_to_add.end()) {\n+                ret.emplace_back(&(*it));\n+            }\n+        }\n+    }\n+    return ret;\n+}\n+\n+void CTxMemPool::ChangeSet::ProcessDependencies()",
      "path": "src/txmempool.cpp",
      "position": 1202,
      "original_position": 85,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "34251141eca785578a0b2ca6d1c0932d34b2418d",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "34251141eca785578a0b2ca6d1c0932d34b2418d\r\n\r\nI didn't try implementing but have you considered simply processing dependencies as you go in PreChecks->StageAddition? Then we don't have to track whether we've applied deps.",
      "created_at": "2025-09-08T18:37:11Z",
      "updated_at": "2025-09-08T21:20:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2331064925",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2331064925"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 978,
      "original_line": 978,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2331073564",
      "pull_request_review_id": 3197152141,
      "id": 2331073564,
      "node_id": "PRRC_kwDOABII586K8Vwc",
      "diff_hunk": "@@ -719,10 +719,13 @@ class ChainImpl : public Chain\n     util::Result<void> checkChainLimits(const CTransactionRef& tx) override\n     {\n         if (!m_node.mempool) return {};\n-        LockPoints lp;\n-        CTxMemPoolEntry entry(TxGraph::Ref(), tx, 0, 0, 0, 0, false, 0, lp);\n         LOCK(m_node.mempool->cs);\n-        return m_node.mempool->CheckPackageLimits({tx}, entry.GetTxSize());\n+        auto changeset = m_node.mempool->GetChangeSet();",
      "path": "src/node/interfaces.cpp",
      "position": 38,
      "original_position": 8,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "5bc5edf8743408979add1b15d23cc8ab7b948db1",
      "in_reply_to_id": 2319357837,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "ack, wasn't 100% obvious due to `auto` here",
      "created_at": "2025-09-08T18:41:37Z",
      "updated_at": "2025-09-08T21:20:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2331073564",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2331073564"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 723,
      "original_line": 723,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2331258415",
      "pull_request_review_id": 3197152141,
      "id": 2331258415,
      "node_id": "PRRC_kwDOABII586K9C4v",
      "diff_hunk": "@@ -185,30 +184,18 @@ std::unique_ptr<CBlockTemplate> BlockAssembler::CreateNewBlock()\n     }\n     const auto time_2{SteadyClock::now()};\n \n-    LogDebug(BCLog::BENCH, \"CreateNewBlock() packages: %.2fms (%d packages, %d updated descendants), validity: %.2fms (total %.2fms)\\n\",\n-             Ticks<MillisecondsDouble>(time_1 - time_start), nPackagesSelected, nDescendantsUpdated,\n+    LogDebug(BCLog::BENCH, \"CreateNewBlock() chunks: %.2fms, validity: %.2fms (total %.2fms)\\n\",\n+             Ticks<MillisecondsDouble>(time_1 - time_start),\n              Ticks<MillisecondsDouble>(time_2 - time_1),\n              Ticks<MillisecondsDouble>(time_2 - time_start));\n \n     return std::move(pblocktemplate);\n }\n \n-void BlockAssembler::onlyUnconfirmed(CTxMemPool::setEntries& testSet)\n-{\n-    for (CTxMemPool::setEntries::iterator iit = testSet.begin(); iit != testSet.end(); ) {\n-        // Only test txs not already in the block\n-        if (inBlock.count((*iit)->GetSharedTx()->GetHash())) {\n-            testSet.erase(iit++);\n-        } else {\n-            iit++;\n-        }\n-    }\n-}\n-\n-bool BlockAssembler::TestPackage(uint64_t packageSize, int64_t packageSigOpsCost) const\n+bool BlockAssembler::TestPackage(FeePerWeight package_feerate, int64_t packageSigOpsCost) const\n {\n     // TODO: switch to weight-based accounting for packages instead of vsize-based accounting.",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 55,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "64de3bb675e2ff3b8f0bb1de3d7680cbb2263807",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "64de3bb675e2ff3b8f0bb1de3d7680cbb2263807\r\n\r\nthis TODO is addressed in this commit",
      "created_at": "2025-09-08T20:11:58Z",
      "updated_at": "2025-09-08T21:20:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2331258415",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2331258415"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 197,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2331288063",
      "pull_request_review_id": 3197152141,
      "id": 2331288063,
      "node_id": "PRRC_kwDOABII586K9KH_",
      "diff_hunk": "@@ -219,224 +206,90 @@ bool BlockAssembler::TestPackage(uint64_t packageSize, int64_t packageSigOpsCost\n \n // Perform transaction-level checks before adding to block:\n // - transaction finality (locktime)\n-bool BlockAssembler::TestPackageTransactions(const CTxMemPool::setEntries& package) const\n+bool BlockAssembler::TestPackageTransactions(const std::vector<const CTxMemPoolEntry *>& txs) const\n {\n-    for (CTxMemPool::txiter it : package) {\n-        if (!IsFinalTx(it->GetTx(), nHeight, m_lock_time_cutoff)) {\n+    for (auto tx : txs) {\n+        if (!IsFinalTx(tx->GetTx(), nHeight, m_lock_time_cutoff)) {\n             return false;\n         }\n     }\n     return true;\n }\n \n-void BlockAssembler::AddToBlock(CTxMemPool::txiter iter)\n+void BlockAssembler::AddToBlock(const CTxMemPoolEntry& entry)\n {\n-    pblocktemplate->block.vtx.emplace_back(iter->GetSharedTx());\n-    pblocktemplate->vTxFees.push_back(iter->GetFee());\n-    pblocktemplate->vTxSigOpsCost.push_back(iter->GetSigOpCost());\n-    nBlockWeight += iter->GetTxWeight();\n+    pblocktemplate->block.vtx.emplace_back(entry.GetSharedTx());\n+    pblocktemplate->vTxFees.push_back(entry.GetFee());\n+    pblocktemplate->vTxSigOpsCost.push_back(entry.GetSigOpCost());\n+    nBlockWeight += entry.GetTxWeight();\n     ++nBlockTx;\n-    nBlockSigOpsCost += iter->GetSigOpCost();\n-    nFees += iter->GetFee();\n-    inBlock.insert(iter->GetSharedTx()->GetHash());\n+    nBlockSigOpsCost += entry.GetSigOpCost();\n+    nFees += entry.GetFee();\n \n     if (m_options.print_modified_fee) {\n         LogPrintf(\"fee rate %s txid %s\\n\",\n-                  CFeeRate(iter->GetModifiedFee(), iter->GetTxSize()).ToString(),\n-                  iter->GetTx().GetHash().ToString());\n-    }\n-}\n-\n-/** Add descendants of given transactions to mapModifiedTx with ancestor\n- * state updated assuming given transactions are inBlock. Returns number\n- * of updated descendants. */\n-static int UpdatePackagesForAdded(const CTxMemPool& mempool,\n-                                  const CTxMemPool::setEntries& alreadyAdded,\n-                                  indexed_modified_transaction_set& mapModifiedTx) EXCLUSIVE_LOCKS_REQUIRED(mempool.cs)\n-{\n-    AssertLockHeld(mempool.cs);\n-\n-    int nDescendantsUpdated = 0;\n-    for (CTxMemPool::txiter it : alreadyAdded) {\n-        CTxMemPool::setEntries descendants;\n-        mempool.CalculateDescendants(it, descendants);\n-        // Insert all descendants (not yet in block) into the modified set\n-        for (CTxMemPool::txiter desc : descendants) {\n-            if (alreadyAdded.count(desc)) {\n-                continue;\n-            }\n-            ++nDescendantsUpdated;\n-            modtxiter mit = mapModifiedTx.find(desc);\n-            if (mit == mapModifiedTx.end()) {\n-                CTxMemPoolModifiedEntry modEntry(desc);\n-                mit = mapModifiedTx.insert(modEntry).first;\n-            }\n-            mapModifiedTx.modify(mit, update_for_parent_inclusion(it));\n-        }\n+                  CFeeRate(entry.GetModifiedFee(), entry.GetTxSize()).ToString(),\n+                  entry.GetTx().GetHash().ToString());\n     }\n-    return nDescendantsUpdated;\n-}\n-\n-void BlockAssembler::SortForBlock(const CTxMemPool::setEntries& package, std::vector<CTxMemPool::txiter>& sortedEntries)\n-{\n-    // Sort package by ancestor count\n-    // If a transaction A depends on transaction B, then A's ancestor count\n-    // must be greater than B's.  So this is sufficient to validly order the\n-    // transactions for block inclusion.\n-    sortedEntries.clear();\n-    sortedEntries.insert(sortedEntries.begin(), package.begin(), package.end());\n-    std::sort(sortedEntries.begin(), sortedEntries.end(), CompareTxIterByAncestorCount());\n }\n \n-// This transaction selection algorithm orders the mempool based\n-// on feerate of a transaction including all unconfirmed ancestors.\n-// Since we don't remove transactions from the mempool as we select them\n-// for block inclusion, we need an alternate method of updating the feerate\n-// of a transaction with its not-yet-selected ancestors as we go.\n-// This is accomplished by walking the in-mempool descendants of selected\n-// transactions and storing a temporary modified state in mapModifiedTxs.\n-// Each time through the loop, we compare the best transaction in\n-// mapModifiedTxs with the next transaction in the mempool to decide what\n-// transaction package to work on next.\n-void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpdated)\n+void BlockAssembler::addChunks()\n {\n-    const auto& mempool{*Assert(m_mempool)};\n-    LOCK(mempool.cs);\n-\n-    // mapModifiedTx will store sorted packages after they are modified\n-    // because some of their txs are already in the block\n-    indexed_modified_transaction_set mapModifiedTx;\n-    // Keep track of entries that failed inclusion, to avoid duplicate work\n-    std::set<Txid> failedTx;\n-\n-    CTxMemPool::indexed_transaction_set::index<ancestor_score>::type::iterator mi = mempool.mapTx.get<ancestor_score>().begin();\n-    CTxMemPool::txiter iter;\n-\n     // Limit the number of attempts to add transactions to the block when it is\n     // close to full; this is just a simple heuristic to finish quickly if the\n     // mempool has a lot of entries.\n     const int64_t MAX_CONSECUTIVE_FAILURES = 1000;\n     constexpr int32_t BLOCK_FULL_ENOUGH_WEIGHT_DELTA = 4000;\n     int64_t nConsecutiveFailed = 0;\n \n-    while (mi != mempool.mapTx.get<ancestor_score>().end() || !mapModifiedTx.empty()) {\n-        // First try to find a new transaction in mapTx to evaluate.\n-        //\n-        // Skip entries in mapTx that are already in a block or are present\n-        // in mapModifiedTx (which implies that the mapTx ancestor state is\n-        // stale due to ancestor inclusion in the block)\n-        // Also skip transactions that we've already failed to add. This can happen if\n-        // we consider a transaction in mapModifiedTx and it fails: we can then\n-        // potentially consider it again while walking mapTx.  It's currently\n-        // guaranteed to fail again, but as a belt-and-suspenders check we put it in\n-        // failedTx and avoid re-evaluation, since the re-evaluation would be using\n-        // cached size/sigops/fee values that are not actually correct.\n-        /** Return true if given transaction from mapTx has already been evaluated,\n-         * or if the transaction's cached data in mapTx is incorrect. */\n-        if (mi != mempool.mapTx.get<ancestor_score>().end()) {\n-            auto it = mempool.mapTx.project<0>(mi);\n-            assert(it != mempool.mapTx.end());\n-            if (mapModifiedTx.count(it) || inBlock.count(it->GetSharedTx()->GetHash()) || failedTx.count(it->GetSharedTx()->GetHash())) {\n-                ++mi;\n-                continue;\n-            }\n-        }\n-\n-        // Now that mi is not stale, determine which transaction to evaluate:\n-        // the next entry from mapTx, or the best from mapModifiedTx?\n-        bool fUsingModified = false;\n-\n-        modtxscoreiter modit = mapModifiedTx.get<ancestor_score>().begin();\n-        if (mi == mempool.mapTx.get<ancestor_score>().end()) {\n-            // We're out of entries in mapTx; use the entry from mapModifiedTx\n-            iter = modit->iter;\n-            fUsingModified = true;\n-        } else {\n-            // Try to compare the mapTx entry to the mapModifiedTx entry\n-            iter = mempool.mapTx.project<0>(mi);\n-            if (modit != mapModifiedTx.get<ancestor_score>().end() &&\n-                    CompareTxMemPoolEntryByAncestorFee()(*modit, CTxMemPoolModifiedEntry(iter))) {\n-                // The best entry in mapModifiedTx has higher score\n-                // than the one from mapTx.\n-                // Switch which transaction (package) to consider\n-                iter = modit->iter;\n-                fUsingModified = true;\n-            } else {\n-                // Either no entry in mapModifiedTx, or it's worse than mapTx.\n-                // Increment mi for the next loop iteration.\n-                ++mi;\n-            }\n-        }\n+    std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef> selected_transactions;\n+    FeePerWeight chunk_feerate;\n \n-        // We skip mapTx entries that are inBlock, and mapModifiedTx shouldn't\n-        // contain anything that is inBlock.\n-        assert(!inBlock.count(iter->GetSharedTx()->GetHash()));\n-\n-        uint64_t packageSize = iter->GetSizeWithAncestors();\n-        CAmount packageFees = iter->GetModFeesWithAncestors();\n-        int64_t packageSigOpsCost = iter->GetSigOpCostWithAncestors();\n-        if (fUsingModified) {\n-            packageSize = modit->nSizeWithAncestors;\n-            packageFees = modit->nModFeesWithAncestors;\n-            packageSigOpsCost = modit->nSigOpCostWithAncestors;\n-        }\n+    chunk_feerate = m_mempool->GetBlockBuilderChunk(selected_transactions);\n+    FeePerVSize chunk_feerate_vsize = ToFeePerVSize(chunk_feerate);\n \n-        if (packageFees < m_options.blockMinFeeRate.GetFee(packageSize)) {\n-            // Everything else we might consider has a lower fee rate\n+    while (selected_transactions.size() > 0) {\n+        // Check to see if min fee rate is still respected.\n+        if (chunk_feerate.fee < m_options.blockMinFeeRate.GetFee(chunk_feerate_vsize.size)) {\n+            // Everything else we might consider has a lower feerate\n             return;\n         }\n \n-        if (!TestPackage(packageSize, packageSigOpsCost)) {\n-            if (fUsingModified) {\n-                // Since we always look at the best entry in mapModifiedTx,\n-                // we must erase failed entries so that we can consider the\n-                // next best entry on the next loop iteration\n-                mapModifiedTx.get<ancestor_score>().erase(modit);\n-                failedTx.insert(iter->GetSharedTx()->GetHash());\n-            }\n+        int64_t package_sig_ops = 0;\n+        std::vector<const CTxMemPoolEntry*> mempool_txs;",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 262,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "64de3bb675e2ff3b8f0bb1de3d7680cbb2263807",
      "in_reply_to_id": 2328795859,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "micro-opt: we also know the max possible chunk tx count, so could reserve it once",
      "created_at": "2025-09-08T20:21:46Z",
      "updated_at": "2025-09-08T21:20:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2331288063",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2331288063"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 259,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2331300634",
      "pull_request_review_id": 3197152141,
      "id": 2331300634,
      "node_id": "PRRC_kwDOABII586K9NMa",
      "diff_hunk": "@@ -145,10 +143,11 @@ std::unique_ptr<CBlockTemplate> BlockAssembler::CreateNewBlock()\n     pblock->nTime = TicksSinceEpoch<std::chrono::seconds>(NodeClock::now());\n     m_lock_time_cutoff = pindexPrev->GetMedianTimePast();\n \n-    int nPackagesSelected = 0;\n-    int nDescendantsUpdated = 0;\n     if (m_mempool) {\n-        addPackageTxs(nPackagesSelected, nDescendantsUpdated);\n+        LOCK(m_mempool->cs);\n+        m_mempool->StartBlockBuilding();\n+        addChunks();",
      "path": "src/node/miner.cpp",
      "position": 19,
      "original_position": 21,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "64de3bb675e2ff3b8f0bb1de3d7680cbb2263807",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "64de3bb675e2ff3b8f0bb1de3d7680cbb2263807\r\n\r\ntake or leave suggestion: `addChunks` could take care of starting and stopping block building; block builder doesn't have to live outside of that function?",
      "created_at": "2025-09-08T20:26:40Z",
      "updated_at": "2025-09-08T21:20:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2331300634",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2331300634"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 149,
      "original_line": 149,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2331325786",
      "pull_request_review_id": 3197152141,
      "id": 2331325786,
      "node_id": "PRRC_kwDOABII586K9TVa",
      "diff_hunk": "@@ -916,6 +917,24 @@ class CTxMemPool\n     // callbacks).\n     void addNewTransaction(CTxMemPool::txiter it) EXCLUSIVE_LOCKS_REQUIRED(cs);\n     void addNewTransaction(CTxMemPool::txiter it, CTxMemPool::setEntries& setAncestors) EXCLUSIVE_LOCKS_REQUIRED(cs);\n+public:\n+    void StartBlockBuilding() const EXCLUSIVE_LOCKS_REQUIRED(cs) { assert(!m_builder); m_builder = m_txgraph->GetBlockBuilder(); }\n+    FeePerWeight GetBlockBuilderChunk(std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef>& entries) const EXCLUSIVE_LOCKS_REQUIRED(cs)\n+    {\n+        if (!m_builder) { return {}; }\n+\n+        auto res = m_builder->GetCurrentChunk();\n+        if (!res) { return {}; }\n+\n+        auto [chunk_entries, chunk_feerate] = *res;\n+        for (TxGraph::Ref* ref : chunk_entries) {\n+            entries.emplace_back(dynamic_cast<const CTxMemPoolEntry&>(*ref));",
      "path": "src/txmempool.h",
      "position": 1,
      "original_position": 23,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "64de3bb675e2ff3b8f0bb1de3d7680cbb2263807",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "64de3bb675e2ff3b8f0bb1de3d7680cbb2263807\r\n\r\ndo we need `dynamic_cast` here since we know the underlying type vs static_cast?",
      "created_at": "2025-09-08T20:39:00Z",
      "updated_at": "2025-09-08T21:20:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2331325786",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2331325786"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 931,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2331360670",
      "pull_request_review_id": 3197152141,
      "id": 2331360670,
      "node_id": "PRRC_kwDOABII586K9b2e",
      "diff_hunk": "@@ -20,7 +20,7 @@\n \n # custom limits for node1\n CUSTOM_ANCESTOR_LIMIT = 5\n-CUSTOM_DESCENDANT_LIMIT = 10\n+CUSTOM_DESCENDANT_LIMIT = 11",
      "path": "test/functional/mempool_packages.py",
      "position": 1,
      "original_position": 5,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "478ea2c3c7c7e766125e204cf60860e99c694613",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "was this test actually exploiting careveout rule?",
      "created_at": "2025-09-08T20:53:57Z",
      "updated_at": "2025-09-08T21:20:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2331360670",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2331360670"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 23,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2331366938",
      "pull_request_review_id": 3197152141,
      "id": 2331366938,
      "node_id": "PRRC_kwDOABII586K9dYa",
      "diff_hunk": "@@ -62,59 +62,27 @@ std::optional<std::string> GetEntriesForConflicts(const CTransaction& tx,\n                                                   CTxMemPool::setEntries& all_conflicts)\n {\n     AssertLockHeld(pool.cs);\n-    uint64_t nConflictingCount = 0;\n-    for (const auto& mi : iters_conflicting) {\n-        nConflictingCount += mi->GetCountWithDescendants();\n-        // Rule #5: don't consider replacing more than MAX_REPLACEMENT_CANDIDATES\n-        // entries from the mempool. This potentially overestimates the number of actual\n-        // descendants (i.e. if multiple conflicts share a descendant, it will be counted multiple\n-        // times), but we just want to be conservative to avoid doing too much work.\n-        if (nConflictingCount > MAX_REPLACEMENT_CANDIDATES) {\n-            return strprintf(\"rejecting replacement %s; too many potential replacements (%d > %d)\",\n-                             tx.GetHash().ToString(),\n-                             nConflictingCount,\n-                             MAX_REPLACEMENT_CANDIDATES);\n-        }\n+    // Rule #5: don't consider replacements that conflict directly with more\n+    // than MAX_REPLACEMENT_CANDIDATES distinct clusters. This implies a bound",
      "path": "src/policy/rbf.cpp",
      "position": 28,
      "original_position": 18,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "266500e01e996c6c08af31880545efb5568ded8b",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "266500e01e996c6c08af31880545efb5568ded8b\r\n\r\nMAX_REPLACEMENT_CANDIDATES documentation in rbf.h should get updated, including mentions at GetEntriesForConflicts",
      "created_at": "2025-09-08T20:57:14Z",
      "updated_at": "2025-09-08T21:20:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2331366938",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2331366938"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 65,
      "original_line": 65,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2331382799",
      "pull_request_review_id": 3197152141,
      "id": 2331382799,
      "node_id": "PRRC_kwDOABII586K9hQP",
      "diff_hunk": "@@ -1108,6 +1086,12 @@ bool MemPoolAccept::ReplacementChecks(Workspace& ws)\n     for (auto it : all_conflicts) {\n         m_subpackage.m_changeset->StageRemoval(it);\n     }\n+\n+    if (const auto err_string{ImprovesFeerateDiagram(*m_subpackage.m_changeset)}) {",
      "path": "src/validation.cpp",
      "position": 258,
      "original_position": 49,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "266500e01e996c6c08af31880545efb5568ded8b",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "266500e01e996c6c08af31880545efb5568ded8b\r\n\r\nif we're not checking the error type of this, I think we will retry this transaction again in a package even if the issue is cluster limits being exceeded?",
      "created_at": "2025-09-08T21:05:24Z",
      "updated_at": "2025-09-08T21:20:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2331382799",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2331382799"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1022,
      "original_line": 1022,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2331387778",
      "pull_request_review_id": 3197152141,
      "id": 2331387778,
      "node_id": "PRRC_kwDOABII586K9ieC",
      "diff_hunk": "@@ -511,6 +511,15 @@ class CTxMemPool\n      */\n     void UpdateTransactionsFromBlock(const std::vector<Txid>& vHashesToUpdate) EXCLUSIVE_LOCKS_REQUIRED(cs, cs_main) LOCKS_EXCLUDED(m_epoch);\n \n+    size_t GetUniqueClusterCount(const setEntries& iters_conflicting) const EXCLUSIVE_LOCKS_REQUIRED(cs) {\n+        std::vector<const TxGraph::Ref *> entries;\n+        entries.reserve(iters_conflicting.size());\n+        for (auto it : iters_conflicting) {\n+            entries.emplace_back(&*it);\n+        }\n+        return m_txgraph->CountDistinctClusters(entries);",
      "path": "src/txmempool.h",
      "position": 1,
      "original_position": 10,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "266500e01e996c6c08af31880545efb5568ded8b",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "266500e01e996c6c08af31880545efb5568ded8b\r\n\r\n`CountDistinctClusters` should be `main_only=true`, otherwise you may be calling it on an oversized graph (this again https://github.com/bitcoin/bitcoin/pull/28676/commits/266500e01e996c6c08af31880545efb5568ded8b#r1954800384 )",
      "created_at": "2025-09-08T21:08:05Z",
      "updated_at": "2025-09-08T21:20:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2331387778",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2331387778"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 520,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2331400983",
      "pull_request_review_id": 3197152141,
      "id": 2331400983,
      "node_id": "PRRC_kwDOABII586K9lsX",
      "diff_hunk": "@@ -62,59 +62,27 @@ std::optional<std::string> GetEntriesForConflicts(const CTransaction& tx,\n                                                   CTxMemPool::setEntries& all_conflicts)\n {\n     AssertLockHeld(pool.cs);\n-    uint64_t nConflictingCount = 0;\n-    for (const auto& mi : iters_conflicting) {\n-        nConflictingCount += mi->GetCountWithDescendants();\n-        // Rule #5: don't consider replacing more than MAX_REPLACEMENT_CANDIDATES\n-        // entries from the mempool. This potentially overestimates the number of actual\n-        // descendants (i.e. if multiple conflicts share a descendant, it will be counted multiple\n-        // times), but we just want to be conservative to avoid doing too much work.\n-        if (nConflictingCount > MAX_REPLACEMENT_CANDIDATES) {\n-            return strprintf(\"rejecting replacement %s; too many potential replacements (%d > %d)\",\n-                             tx.GetHash().ToString(),\n-                             nConflictingCount,\n-                             MAX_REPLACEMENT_CANDIDATES);\n-        }\n+    // Rule #5: don't consider replacements that conflict directly with more",
      "path": "src/policy/rbf.cpp",
      "position": 27,
      "original_position": 17,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "266500e01e996c6c08af31880545efb5568ded8b",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "266500e01e996c6c08af31880545efb5568ded8b\r\n\r\ncommit message can also note that package rbf can now evict any topology (CheckConflictTopology nuked)",
      "created_at": "2025-09-08T21:16:20Z",
      "updated_at": "2025-09-08T21:20:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2331400983",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2331400983"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 64,
      "original_line": 64,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2331417443",
      "pull_request_review_id": 3198241287,
      "id": 2331417443,
      "node_id": "PRRC_kwDOABII586K9ptj",
      "diff_hunk": "@@ -1414,9 +1428,58 @@ void CTxMemPool::ChangeSet::StageRemoval(CTxMemPool::txiter it)\n void CTxMemPool::ChangeSet::Apply()\n {\n     LOCK(m_pool->cs);\n+    if (!m_dependencies_processed) {\n+        ProcessDependencies();\n+    }\n     m_pool->Apply(this);\n     m_to_add.clear();\n     m_to_remove.clear();\n     m_entry_vec.clear();\n     m_ancestors.clear();\n }\n+\n+std::vector<const TxGraph::Ref*> CTxMemPool::ChangeSet::CalculateParentsOf(const CTransactionRef& tx)\n+{\n+    std::vector<const TxGraph::Ref*> ret;\n+    std::set<Txid> inputs;\n+    for (const CTxIn &txin : tx->vin) {\n+        inputs.insert(txin.prevout.hash);\n+    }\n+    for (const auto &hash : inputs) {\n+        std::optional<txiter> piter = m_pool->GetIter(hash);\n+        if (piter) {\n+            ret.emplace_back(&(**piter));\n+        } else {\n+            // Check the change set for parents.\n+            auto it = m_to_add.find(hash);\n+            if (it != m_to_add.end()) {\n+                ret.emplace_back(&(*it));\n+            }\n+        }\n+    }\n+    return ret;\n+}\n+\n+void CTxMemPool::ChangeSet::ProcessDependencies()\n+{\n+    LOCK(m_pool->cs);\n+    Assume(!m_dependencies_processed); // should only call this once.\n+    for (const auto& entryptr : m_entry_vec) {\n+        auto parents = CalculateParentsOf(entryptr->GetSharedTx());\n+        for (auto p : parents) {\n+            m_pool->m_txgraph->AddDependency(*p, *entryptr);\n+        }\n+    }\n+    m_dependencies_processed = true;\n+    return;\n+ }\n+\n+bool CTxMemPool::ChangeSet::CheckMemPoolPolicyLimits()\n+{\n+    LOCK(m_pool->cs);\n+    if (!m_dependencies_processed) {\n+        ProcessDependencies();\n+    }\n+\n+    return !m_pool->m_txgraph->IsOversized();",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 106,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "34251141eca785578a0b2ca6d1c0932d34b2418d",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "still prefer `main_only` to be explicitly called",
      "created_at": "2025-09-08T21:26:12Z",
      "updated_at": "2025-09-08T21:26:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2331417443",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2331417443"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1484,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2334636695",
      "pull_request_review_id": 3203088703,
      "id": 2334636695,
      "node_id": "PRRC_kwDOABII586LJ7qX",
      "diff_hunk": "@@ -511,6 +511,15 @@ class CTxMemPool\n      */\n     void UpdateTransactionsFromBlock(const std::vector<Txid>& vHashesToUpdate) EXCLUSIVE_LOCKS_REQUIRED(cs, cs_main) LOCKS_EXCLUDED(m_epoch);\n \n+    size_t GetUniqueClusterCount(const setEntries& iters_conflicting) const EXCLUSIVE_LOCKS_REQUIRED(cs) {\n+        std::vector<const TxGraph::Ref *> entries;\n+        entries.reserve(iters_conflicting.size());\n+        for (auto it : iters_conflicting) {\n+            entries.emplace_back(&*it);\n+        }\n+        return m_txgraph->CountDistinctClusters(entries);",
      "path": "src/txmempool.h",
      "position": 1,
      "original_position": 10,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "266500e01e996c6c08af31880545efb5568ded8b",
      "in_reply_to_id": 2331387778,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "See https://github.com/bitcoin/bitcoin/pull/33354.",
      "created_at": "2025-09-09T20:00:00Z",
      "updated_at": "2025-09-09T20:00:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2334636695",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2334636695"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 520,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2337076285",
      "pull_request_review_id": 3206614875,
      "id": 2337076285,
      "node_id": "PRRC_kwDOABII586LTPQ9",
      "diff_hunk": "@@ -1464,6 +1356,12 @@ MempoolAcceptResult MemPoolAccept::AcceptSingleTransaction(const CTransactionRef\n         return MempoolAcceptResult::Failure(ws.m_state);\n     }\n \n+    // Check if the transaction would exceed the cluster size limit.\n+    if (!m_subpackage.m_changeset->CheckMemPoolPolicyLimits()) {\n+        ws.m_state.Invalid(TxValidationResult::TX_MEMPOOL_POLICY, \"too-large-cluster\", \"\");\n+        return MempoolAcceptResult::Failure(ws.m_state);\n+    }\n+",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 263,
      "commit_id": "00c02b42c6199a6c46573304761056082490c7d4",
      "original_commit_id": "61f51546af33923c9e5dc9632ba5544aa853ae71",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This should be placed earlier, i.e. before `CheckEphemeralSpends`, to bound the number of mempool anestors before we start looking up whether they have dust to sweep.",
      "created_at": "2025-09-10T15:05:36Z",
      "updated_at": "2025-09-10T15:05:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2337076285",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2337076285"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": 1359,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 1370,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2337280911",
      "pull_request_review_id": 3206911406,
      "id": 2337280911,
      "node_id": "PRRC_kwDOABII586LUBOP",
      "diff_hunk": "@@ -953,11 +953,7 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n     ws.m_iters_conflicting = m_pool.GetIterSet(ws.m_conflicts);\n \n     // Calculate in-mempool ancestors, up to a limit.",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 3,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "6000fc8c3fcc0446b3665f7fccf102068919fa3c",
      "in_reply_to_id": 2328810011,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Is it problematic that there is no limit?",
      "created_at": "2025-09-10T16:25:01Z",
      "updated_at": "2025-09-10T16:25:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2337280911",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2337280911"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 955,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2337582862",
      "pull_request_review_id": 3207360719,
      "id": 2337582862,
      "node_id": "PRRC_kwDOABII586LVK8O",
      "diff_hunk": "@@ -1464,6 +1356,12 @@ MempoolAcceptResult MemPoolAccept::AcceptSingleTransaction(const CTransactionRef\n         return MempoolAcceptResult::Failure(ws.m_state);\n     }\n \n+    // Check if the transaction would exceed the cluster size limit.\n+    if (!m_subpackage.m_changeset->CheckMemPoolPolicyLimits()) {\n+        ws.m_state.Invalid(TxValidationResult::TX_MEMPOOL_POLICY, \"too-large-cluster\", \"\");\n+        return MempoolAcceptResult::Failure(ws.m_state);\n+    }\n+",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 263,
      "commit_id": "00c02b42c6199a6c46573304761056082490c7d4",
      "original_commit_id": "61f51546af33923c9e5dc9632ba5544aa853ae71",
      "in_reply_to_id": 2337076285,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "not just the number, but also size as a proxy for  number of parent outputs which are possibly scanned",
      "created_at": "2025-09-10T18:29:30Z",
      "updated_at": "2025-09-10T18:29:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2337582862",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2337582862"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": 1359,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 1370,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2344933415",
      "pull_request_review_id": 3217898607,
      "id": 2344933415,
      "node_id": "PRRC_kwDOABII586LxNgn",
      "diff_hunk": "@@ -1055,8 +1055,8 @@ void CCoinsViewMemPool::Reset()\n \n size_t CTxMemPool::DynamicMemoryUsage() const {\n     LOCK(cs);\n-    // Estimate the overhead of mapTx to be 15 pointers + an allocation, as no exact formula for boost::multi_index_contained is implemented.\n-    return memusage::MallocUsage(sizeof(CTxMemPoolEntry) + 15 * sizeof(void*)) * mapTx.size() + memusage::DynamicUsage(mapNextTx) + memusage::DynamicUsage(mapDeltas) + memusage::DynamicUsage(txns_randomized) + m_txgraph->GetMainMemoryUsage() + cachedInnerUsage;\n+    // Estimate the overhead of mapTx to be 9 pointers + an allocation, as no exact formula for boost::multi_index_contained is implemented.",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 6,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "7341a51a02adbac1246f72c6643ee0d878b6aa46",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "7341a51a02adbac1246f72c6643ee0d878b6aa46\r\n\r\nnit: could we add some napkin math how we're getting to 9 here",
      "created_at": "2025-09-12T17:03:00Z",
      "updated_at": "2025-09-12T19:34:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2344933415",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2344933415"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 733,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2345024271",
      "pull_request_review_id": 3217898607,
      "id": 2345024271,
      "node_id": "PRRC_kwDOABII586LxjsP",
      "diff_hunk": "@@ -803,24 +803,20 @@ void CTxMemPool::check(const CCoinsViewCache& active_coins_tip, int64_t spendhei\n     assert(innerUsage == cachedInnerUsage);\n }\n \n-bool CTxMemPool::CompareDepthAndScore(const Wtxid& hasha, const Wtxid& hashb) const\n+bool CTxMemPool::CompareMiningScoreWithTopology(const Wtxid& hasha, const Wtxid& hashb) const\n {\n     /* Return `true` if hasha should be considered sooner than hashb. Namely when:\n      *   a is not in the mempool, but b is\n-     *   both are in the mempool and a has fewer ancestors than b\n-     *   both are in the mempool and a has a higher score than b\n+     *   both are in the mempool and a has a higher mining score than b\n+     *   both are in the mempool and a appears before b in the same cluster\n      */\n     LOCK(cs);\n     auto j{GetIter(hashb)};\n     if (!j.has_value()) return false;\n     auto i{GetIter(hasha)};\n     if (!i.has_value()) return true;\n-    uint64_t counta = i.value()->GetCountWithAncestors();\n-    uint64_t countb = j.value()->GetCountWithAncestors();\n-    if (counta == countb) {\n-        return CompareTxMemPoolEntryByScore()(*i.value(), *j.value());\n-    }\n-    return counta < countb;\n+\n+    return m_txgraph->CompareMainOrder(*i.value(), *j.value()) == std::strong_ordering::less ? true : false;",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 26,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "f172ac5e6c37f446bc3c38419cf40f3adac3ddd8",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "7f44c6d9893df97bb413e01aa737028cbe52ce75\r\n\r\nI was unable to break any existing tests by messing with  this. Added a few lines to ::check which would at least catch asymmetry in orderings:\r\n\r\n```\r\ndiff --git a/src/txmempool.cpp b/src/txmempool.cpp\r\nindex f44113ed8b..64e8de251d 100644\r\n--- a/src/txmempool.cpp\r\n+++ b/src/txmempool.cpp\r\n@@ -442,4 +442,6 @@ void CTxMemPool::check(const CCoinsViewCache& active_coins_tip, int64_t spendhei\r\n     CCoinsViewCache mempoolDuplicate(const_cast<CCoinsViewCache*>(&active_coins_tip));\r\n \r\n+    std::optional<Wtxid> last_wtxid = std::nullopt;\r\n+\r\n     for (const auto& it : GetSortedScoreWithTopology()) {\r\n         checkTotal += it->GetTxSize();\r\n@@ -447,4 +449,9 @@ void CTxMemPool::check(const CCoinsViewCache& active_coins_tip, int64_t spendhei\r\n         innerUsage += it->DynamicMemoryUsage();\r\n         const CTransaction& tx = it->GetTx();\r\n+        if (last_wtxid) {\r\n+            // CompareMiningScoreWithTopology aggrees with GetSortedScoreWithTopology\r\n+            assert(CompareMiningScoreWithTopology(*last_wtxid, tx.GetWitnessHash()));\r\n+        }\r\n+        last_wtxid = tx.GetWitnessHash();\r\n         std::set<CTxMemPoolEntry::CTxMemPoolEntryRef, CompareIteratorByHash> setParentCheck;\r\n         std::set<CTxMemPoolEntry::CTxMemPoolEntryRef, CompareIteratorByHash> setParentsStored;\r\n```",
      "created_at": "2025-09-12T17:42:50Z",
      "updated_at": "2025-09-12T19:34:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2345024271",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2345024271"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 819,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2345084353",
      "pull_request_review_id": 3217898607,
      "id": 2345084353,
      "node_id": "PRRC_kwDOABII586LxyXB",
      "diff_hunk": "@@ -714,11 +714,12 @@ void CTxMemPool::check(const CCoinsViewCache& active_coins_tip, int64_t spendhei\n     uint64_t checkTotal = 0;\n     CAmount check_total_fee{0};\n     uint64_t innerUsage = 0;\n-    uint64_t prev_ancestor_count{0};\n+\n+    assert(!m_txgraph->IsOversized());",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 6,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "7f44c6d9893df97bb413e01aa737028cbe52ce75",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "7f44c6d9893df97bb413e01aa737028cbe52ce75\r\n\r\nThink you can delete `CompareTxMemPoolEntryByScore`\r\n\r\ncommit message is also a bit weird since it's replaced by something related",
      "created_at": "2025-09-12T18:15:13Z",
      "updated_at": "2025-09-12T19:34:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2345084353",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2345084353"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 439,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2345144877",
      "pull_request_review_id": 3217898607,
      "id": 2345144877,
      "node_id": "PRRC_kwDOABII586LyBIt",
      "diff_hunk": "@@ -222,14 +222,14 @@ std::optional<std::pair<std::string, CTransactionRef>> SingleTRUCChecks(const CT\n         const bool child_will_be_replaced = !children.empty() &&\n             std::any_of(children.cbegin(), children.cend(),\n                 [&direct_conflicts](const CTxMemPoolEntry& child){return direct_conflicts.count(child.GetTx().GetHash()) > 0;});\n-        if (parent_entry->GetCountWithDescendants() + 1 > TRUC_DESCENDANT_LIMIT && !child_will_be_replaced) {\n+        if (pool.GetNumDescendants(parent_entry) + 1 > TRUC_DESCENDANT_LIMIT && !child_will_be_replaced) {\n             // Allow sibling eviction for TRUC transaction: if another child already exists, even if\n             // we don't conflict inputs with it, consider evicting it under RBF rules. We rely on TRUC rules\n             // only permitting 1 descendant, as otherwise we would need to have logic for deciding\n             // which descendant to evict. Skip if this isn't true, e.g. if the transaction has\n             // multiple children or the sibling also has descendants due to a reorg.\n-            const bool consider_sibling_eviction{parent_entry->GetCountWithDescendants() == 2 &&\n-                children.begin()->get().GetCountWithAncestors() == 2};\n+            const bool consider_sibling_eviction{pool.GetNumDescendants(parent_entry) == 2 &&\n+                pool.GetNumDescendants(children.begin()->get()) == 1};",
      "path": "src/policy/truc_policy.cpp",
      "position": 1,
      "original_position": 41,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "5de7f1378a3146368975c10511dfec086d522ff4",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "5de7f1378a3146368975c10511dfec086d522ff4\r\n\r\nThis needs to be checking number of ancestors of the (only) child to make sure it doesn't have multiple in-mempool parents. Here it's re-checking the same logic as the line above?\r\n\r\nThis logic seems to persist to the end of the PR.\r\n\r\nI think this could only happen in a reorg, resulting in something like a 2p1c TRUC sibling. Looks like we only test for 1p2c et al.\r\n\r\nUsing txgraph I feel like we can make these checks extremely compact anyways, maybe consider doing that instead? e.g., `GetCluster` returns a cluster of size two, make sure first tx is the parent of new tx, etc.",
      "created_at": "2025-09-12T18:46:04Z",
      "updated_at": "2025-09-12T19:34:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2345144877",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2345144877"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 232,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2345163699",
      "pull_request_review_id": 3217898607,
      "id": 2345163699,
      "node_id": "PRRC_kwDOABII586LyFuz",
      "diff_hunk": "@@ -215,6 +215,15 @@ def test_nondefault_package_limits(self):\n         assert_equal(node.getmempoolentry(tx_v3_parent_large1[\"txid\"])[\"descendantcount\"], 1)\n         self.generate(node, 1)\n \n+        self.log.info(\"Test that a decreased limitclustersize also applies to v3 parent\")\n+        self.restart_node(0, extra_args=[\"-limitclustersize=10\", \"-acceptnonstdtxn=1\"])\n+        tx_v3_parent_large2 = self.wallet.send_self_transfer(from_node=node, target_vsize=9900, version=3)\n+        tx_v3_child_large2 = self.wallet.create_self_transfer(utxo_to_spend=tx_v3_parent_large2[\"new_utxo\"], version=3)",
      "path": "test/functional/mempool_truc.py",
      "position": 1,
      "original_position": 7,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "20d6bcb2e7f2c3016280321ef31421ca4039b017",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "20d6bcb2e7f2c3016280321ef31421ca4039b017\r\n\r\nnit: child isn't large",
      "created_at": "2025-09-12T18:54:35Z",
      "updated_at": "2025-09-12T19:34:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2345163699",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2345163699"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 221,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2345196854",
      "pull_request_review_id": 3217898607,
      "id": 2345196854,
      "node_id": "PRRC_kwDOABII586LyN02",
      "diff_hunk": "@@ -606,8 +596,8 @@ class MemPoolAccept\n     /**\n      * Submission of a subpackage.\n      * If subpackage size == 1, calls AcceptSingleTransaction() with adjusted ATMPArgs to avoid\n-     * package policy restrictions like no CPFP carve out (PackageMempoolChecks)\n-     * and creates a PackageMempoolAcceptResult wrapping the result.\n+     * package policy restrictions like disabled sibling eviction and",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 75,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "cbcfdf4cb0ef05773bf430ebf6beafc59c1c7bc6",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "cbcfdf4cb0ef05773bf430ebf6beafc59c1c7bc6\r\n\r\ngrammar: you're not `avoid`ing disabling sibling eviction here",
      "created_at": "2025-09-12T19:09:20Z",
      "updated_at": "2025-09-12T19:34:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2345196854",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2345196854"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 599,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346506939",
      "pull_request_review_id": 3220507581,
      "id": 2346506939,
      "node_id": "PRRC_kwDOABII586L3Nq7",
      "diff_hunk": "@@ -5407,7 +5407,7 @@ class CompareInvMempoolOrder\n     {\n         /* As std::make_heap produces a max-heap, we want the entries with the\n          * fewest ancestors/highest fee to sort later. */\n-        return m_mempool->CompareDepthAndScore(*b, *a);\n+        return m_mempool->CompareMiningScoreWithTopology(*b, *a);",
      "path": "src/net_processing.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "f172ac5e6c37f446bc3c38419cf40f3adac3ddd8",
      "in_reply_to_id": 2319395594,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I think this type of p2p change is something we should discuss separately, outside of this PR, because it's not clear to me that there's a simple way to make a strict improvement in relay behavior.  And the interpretation of what the `feefilter` message means/should mean is something we should document and coordinate across implementations as well.",
      "created_at": "2025-09-13T12:12:05Z",
      "updated_at": "2025-09-13T12:12:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346506939",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346506939"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": 5429,
      "original_start_line": 5410,
      "start_side": "LEFT",
      "line": 5429,
      "original_line": 5429,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346522367",
      "pull_request_review_id": 3220553817,
      "id": 2346522367,
      "node_id": "PRRC_kwDOABII586L3Rb_",
      "diff_hunk": "@@ -22,7 +22,7 @@\n static void AddTx(const CTransactionRef& tx, const CAmount& fee, CTxMemPool& pool) EXCLUSIVE_LOCKS_REQUIRED(cs_main, pool.cs)\n {\n     LockPoints lp;\n-    AddToMempool(pool, CTxMemPoolEntry(tx, fee, /*time=*/0, /*entry_height=*/1, /*entry_sequence=*/0, /*spends_coinbase=*/false, /*sigops_cost=*/4, lp));\n+    AddToMempool(pool, CTxMemPoolEntry(TxGraph::Ref(), tx, fee, /*time=*/0, /*entry_height=*/1, /*entry_sequence=*/0, /*spends_coinbase=*/false, /*sigops_cost=*/4, lp));",
      "path": "src/bench/blockencodings.cpp",
      "position": 1,
      "original_position": 5,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "f8d40726eb1eaee38752eaea5a16aa86bdde3967",
      "in_reply_to_id": 2328763664,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "@instagibbs @sipa I think switching from `TxGraph::Ref()` to something like `/* ref = */ {}` is not worth the change, as the existing code seems just as good from a self-documentation standpoint.  Will plan to leave as-is unless there's some benefit from invoking `{}` that I'm missing?",
      "created_at": "2025-09-13T12:22:20Z",
      "updated_at": "2025-09-13T12:22:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346522367",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346522367"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 25,
      "original_line": 25,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346524631",
      "pull_request_review_id": 3220558888,
      "id": 2346524631,
      "node_id": "PRRC_kwDOABII586L3R_X",
      "diff_hunk": "@@ -22,7 +22,7 @@\n static void AddTx(const CTransactionRef& tx, const CAmount& fee, CTxMemPool& pool) EXCLUSIVE_LOCKS_REQUIRED(cs_main, pool.cs)\n {\n     LockPoints lp;\n-    AddToMempool(pool, CTxMemPoolEntry(tx, fee, /*time=*/0, /*entry_height=*/1, /*entry_sequence=*/0, /*spends_coinbase=*/false, /*sigops_cost=*/4, lp));\n+    AddToMempool(pool, CTxMemPoolEntry(TxGraph::Ref(), tx, fee, /*time=*/0, /*entry_height=*/1, /*entry_sequence=*/0, /*spends_coinbase=*/false, /*sigops_cost=*/4, lp));",
      "path": "src/bench/blockencodings.cpp",
      "position": 1,
      "original_position": 5,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "f8d40726eb1eaee38752eaea5a16aa86bdde3967",
      "in_reply_to_id": 2328763664,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "It was just a nit, in case you weren't aware that it was possible to do this more succinctly. Agreed that it's more self-documenting as is.",
      "created_at": "2025-09-13T12:24:31Z",
      "updated_at": "2025-09-13T12:24:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346524631",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346524631"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 25,
      "original_line": 25,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346526733",
      "pull_request_review_id": 3220562679,
      "id": 2346526733,
      "node_id": "PRRC_kwDOABII586L3SgN",
      "diff_hunk": "@@ -74,7 +74,7 @@ FUZZ_TARGET(policy_estimator, .init = initialize_policy_estimator)\n                         break;\n                     }\n                     const CTransaction tx{*mtx};\n-                    mempool_entries.emplace_back(CTxMemPoolEntry::ExplicitCopy, ConsumeTxMemPoolEntry(fuzzed_data_provider, tx, current_height));\n+                    mempool_entries.emplace_back(ConsumeTxMemPoolEntry(fuzzed_data_provider, tx, current_height));",
      "path": "src/test/fuzz/policy_estimator.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "457c7bd899c1118092e754f498817d09a94ad48b",
      "in_reply_to_id": 2328760872,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Sorry, ignore this. I misread `ConsumeTxMemPoolEntry` as being the constructor, rather than a separate function.",
      "created_at": "2025-09-13T12:26:37Z",
      "updated_at": "2025-09-13T12:26:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346526733",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346526733"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 77,
      "original_line": 77,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346533797",
      "pull_request_review_id": 3220576904,
      "id": 2346533797,
      "node_id": "PRRC_kwDOABII586L3UOl",
      "diff_hunk": "@@ -953,11 +953,7 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n     ws.m_iters_conflicting = m_pool.GetIterSet(ws.m_conflicts);\n \n     // Calculate in-mempool ancestors, up to a limit.",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 3,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "6000fc8c3fcc0446b3665f7fccf102068919fa3c",
      "in_reply_to_id": 2328810011,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I don't think it is; TxGraph should be pretty efficient at gathering all ancestors (and clusters are limited anyway, so the number can't exceed the cluster count limit).",
      "created_at": "2025-09-13T12:30:53Z",
      "updated_at": "2025-09-13T12:33:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346533797",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346533797"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 955,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346795265",
      "pull_request_review_id": 3221006656,
      "id": 2346795265,
      "node_id": "PRRC_kwDOABII586L4UEB",
      "diff_hunk": "@@ -1414,9 +1428,58 @@ void CTxMemPool::ChangeSet::StageRemoval(CTxMemPool::txiter it)\n void CTxMemPool::ChangeSet::Apply()\n {\n     LOCK(m_pool->cs);\n+    if (!m_dependencies_processed) {\n+        ProcessDependencies();\n+    }\n     m_pool->Apply(this);\n     m_to_add.clear();\n     m_to_remove.clear();\n     m_entry_vec.clear();\n     m_ancestors.clear();\n }\n+\n+std::vector<const TxGraph::Ref*> CTxMemPool::ChangeSet::CalculateParentsOf(const CTransactionRef& tx)\n+{\n+    std::vector<const TxGraph::Ref*> ret;\n+    std::set<Txid> inputs;\n+    for (const CTxIn &txin : tx->vin) {\n+        inputs.insert(txin.prevout.hash);\n+    }\n+    for (const auto &hash : inputs) {\n+        std::optional<txiter> piter = m_pool->GetIter(hash);\n+        if (piter) {\n+            ret.emplace_back(&(**piter));\n+        } else {\n+            // Check the change set for parents.\n+            auto it = m_to_add.find(hash);\n+            if (it != m_to_add.end()) {\n+                ret.emplace_back(&(*it));\n+            }\n+        }\n+    }\n+    return ret;\n+}\n+\n+void CTxMemPool::ChangeSet::ProcessDependencies()",
      "path": "src/txmempool.cpp",
      "position": 1202,
      "original_position": 85,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "34251141eca785578a0b2ca6d1c0932d34b2418d",
      "in_reply_to_id": 2331064925,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I didn't want to impose an ordering requirement on transactions being added to staging, which means that every time we add a new transaction, we'd have to loop over all the other transactions to see if any of them depend on the new one.  So we get a complexity improvement (quadratic vs linear) by doing it in one pass at the end.",
      "created_at": "2025-09-13T15:33:19Z",
      "updated_at": "2025-09-13T15:33:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346795265",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346795265"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 978,
      "original_line": 978,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346822062",
      "pull_request_review_id": 3221087186,
      "id": 2346822062,
      "node_id": "PRRC_kwDOABII586L4amu",
      "diff_hunk": "@@ -1154,29 +1154,38 @@ void CTxMemPool::TrimToSize(size_t sizelimit, std::vector<COutPoint>* pvNoSpends\n \n     unsigned nTxnRemoved = 0;\n     CFeeRate maxFeeRateRemoved(0);\n+\n     while (!mapTx.empty() && DynamicMemoryUsage() > sizelimit) {\n-        indexed_transaction_set::index<descendant_score>::type::iterator it = mapTx.get<descendant_score>().begin();\n+        auto [worst_chunk, feeperweight] = m_txgraph->GetWorstMainChunk();",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 7,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "76a3b6286bf0c4c691077ce8d22babd5d04e9658",
      "in_reply_to_id": 2328784119,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I'm wrong about this: https://godbolt.org/z/zKq3fMrEc\r\n\r\nMarking resolved.",
      "created_at": "2025-09-13T16:28:07Z",
      "updated_at": "2025-09-13T16:28:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346822062",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346822062"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1159,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346825428",
      "pull_request_review_id": 3221094941,
      "id": 2346825428,
      "node_id": "PRRC_kwDOABII586L4bbU",
      "diff_hunk": "@@ -1108,6 +1086,12 @@ bool MemPoolAccept::ReplacementChecks(Workspace& ws)\n     for (auto it : all_conflicts) {\n         m_subpackage.m_changeset->StageRemoval(it);\n     }\n+\n+    if (const auto err_string{ImprovesFeerateDiagram(*m_subpackage.m_changeset)}) {",
      "path": "src/validation.cpp",
      "position": 258,
      "original_position": 49,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "266500e01e996c6c08af31880545efb5568ded8b",
      "in_reply_to_id": 2331382799,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Is it possible that we might have failure in the individual setting with a cluster size limit being exceeded, which then is not the case in a package setting, if some additional package transaction conflicts with transactions in the cluster being added to?",
      "created_at": "2025-09-13T16:33:50Z",
      "updated_at": "2025-09-13T16:33:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346825428",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346825428"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1022,
      "original_line": 1022,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346830449",
      "pull_request_review_id": 3221109860,
      "id": 2346830449,
      "node_id": "PRRC_kwDOABII586L4cpx",
      "diff_hunk": "",
      "path": "src/txmempool.h",
      "position": 1,
      "original_position": 1,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "6caa4d7f4572857d36f439e383b772dd1f83c782",
      "in_reply_to_id": 2316480489,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Reworked this a bit -- please let me know if this looks better now or if additional comments would be helpful.",
      "created_at": "2025-09-13T16:41:27Z",
      "updated_at": "2025-09-13T16:41:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346830449",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346830449"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346830740",
      "pull_request_review_id": 3221110573,
      "id": 2346830740,
      "node_id": "PRRC_kwDOABII586L4cuU",
      "diff_hunk": "@@ -244,6 +243,8 @@ def branch(prevout, initial_value, max_txs, tree_width=5, fee=0.00001 * COIN, _t\n \n         # Try again, but with more total transactions than the \"max txs\n         # double-spent at once\" anti-DoS limit.\n+        # TODO: rework using direct conflict test\n+        '''",
      "path": "test/functional/feature_rbf.py",
      "position": 1,
      "original_position": 42,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "61f51546af33923c9e5dc9632ba5544aa853ae71",
      "in_reply_to_id": 2316792057,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Yes, I think so -- I've deleted this comment, as well as the already-commented-out test that is no longer relevant.",
      "created_at": "2025-09-13T16:42:00Z",
      "updated_at": "2025-09-13T16:42:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346830740",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346830740"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": 246,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 247,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346830781",
      "pull_request_review_id": 3221110764,
      "id": 2346830781,
      "node_id": "PRRC_kwDOABII586L4cu9",
      "diff_hunk": "@@ -641,6 +641,9 @@ void SetupServerArgs(ArgsManager& argsman, bool can_listen_ipc)\n     argsman.AddArg(\"-limitdescendantcount=<n>\", strprintf(\"Do not accept transactions if any ancestor would have <n> or more in-mempool descendants (default: %u)\", DEFAULT_DESCENDANT_LIMIT), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n     argsman.AddArg(\"-limitdescendantsize=<n>\", strprintf(\"Do not accept transactions if any ancestor would have more than <n> kilobytes of in-mempool descendants (default: %u).\", DEFAULT_DESCENDANT_SIZE_LIMIT_KVB), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n     argsman.AddArg(\"-test=<option>\", \"Pass a test-only option. Options include : \" + Join(TEST_OPTIONS_DOC, \", \") + \".\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n+    argsman.AddArg(\"-limitclustercount=<n>\", strprintf(\"Do not accept transactions connected to <n> or more existing in-mempool transactions (default: %u)\", DEFAULT_CLUSTER_LIMIT), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n+    argsman.AddArg(\"-limitclustersize=<n>\", strprintf(\"Do not accept transactions whose size with all in-mempool connected transactions exceeds <n> kilobytes (default: %u)\", DEFAULT_CLUSTER_SIZE_LIMIT_KVB), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n+    argsman.AddArg(\"-addrmantest\", \"Allows to test address relay on localhost\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);",
      "path": "src/init.cpp",
      "position": 1,
      "original_position": 6,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "e72b0b1a7eb31078c998d95b4cfffe9cd1f9113d",
      "in_reply_to_id": 2319334033,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Thanks! Guessing this was a rebase error; fixed.",
      "created_at": "2025-09-13T16:42:10Z",
      "updated_at": "2025-09-13T16:42:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346830781",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346830781"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 646,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346830834",
      "pull_request_review_id": 3221111256,
      "id": 2346830834,
      "node_id": "PRRC_kwDOABII586L4cvy",
      "diff_hunk": "@@ -719,10 +719,13 @@ class ChainImpl : public Chain\n     util::Result<void> checkChainLimits(const CTransactionRef& tx) override\n     {\n         if (!m_node.mempool) return {};\n-        LockPoints lp;\n-        CTxMemPoolEntry entry(TxGraph::Ref(), tx, 0, 0, 0, 0, false, 0, lp);\n         LOCK(m_node.mempool->cs);\n-        return m_node.mempool->CheckPackageLimits({tx}, entry.GetTxSize());\n+        auto changeset = m_node.mempool->GetChangeSet();",
      "path": "src/node/interfaces.cpp",
      "position": 38,
      "original_position": 8,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "5bc5edf8743408979add1b15d23cc8ab7b948db1",
      "in_reply_to_id": 2319357837,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done.",
      "created_at": "2025-09-13T16:42:17Z",
      "updated_at": "2025-09-13T16:42:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346830834",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346830834"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 723,
      "original_line": 723,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346830927",
      "pull_request_review_id": 3221111437,
      "id": 2346830927,
      "node_id": "PRRC_kwDOABII586L4cxP",
      "diff_hunk": "@@ -620,29 +626,29 @@ BOOST_FIXTURE_TEST_CASE(calculate_cluster, TestChain100Setup)\n     // GatherClusters stops at 500 transactions.\n     const auto tx_501 = make_tx({COutPoint{lasttx->GetHash(), 0}}, /*num_outputs=*/1);\n     AddToMempool(pool, entry.Fee(CENT).FromTx(tx_501));\n-    const auto cluster_501 = pool.GatherClusters({tx_501->GetHash()});\n+    const auto cluster_501 = pool.GatherClusters(last_txs);\n     BOOST_CHECK_EQUAL(cluster_501.size(), 0);\n \n     /* Zig Zag cluster:\n-     * txp0     txp1     txp2    ...  txp48  txp49\n+     * txp0     txp1     txp2    ...  txp31  txp32\n      *    \\    /    \\   /   \\            \\   /\n-     *     txc0     txc1    txc2  ...    txc48\n+     *     txc0     txc1    txc2  ...    txc31",
      "path": "src/test/miniminer_tests.cpp",
      "position": 1,
      "original_position": 45,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "aa8eb8c3ab1130736b9890df9d7493d99bef8d14",
      "in_reply_to_id": 2319516863,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Fixed, thanks.",
      "created_at": "2025-09-13T16:42:29Z",
      "updated_at": "2025-09-13T16:42:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346830927",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346830927"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": 627,
      "start_side": "LEFT",
      "line": null,
      "original_line": 635,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346830947",
      "pull_request_review_id": 3221111506,
      "id": 2346830947,
      "node_id": "PRRC_kwDOABII586L4cxj",
      "diff_hunk": "@@ -641,6 +641,9 @@ void SetupServerArgs(ArgsManager& argsman, bool can_listen_ipc)\n     argsman.AddArg(\"-limitdescendantcount=<n>\", strprintf(\"Do not accept transactions if any ancestor would have <n> or more in-mempool descendants (default: %u)\", DEFAULT_DESCENDANT_LIMIT), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n     argsman.AddArg(\"-limitdescendantsize=<n>\", strprintf(\"Do not accept transactions if any ancestor would have more than <n> kilobytes of in-mempool descendants (default: %u).\", DEFAULT_DESCENDANT_SIZE_LIMIT_KVB), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n     argsman.AddArg(\"-test=<option>\", \"Pass a test-only option. Options include : \" + Join(TEST_OPTIONS_DOC, \", \") + \".\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n+    argsman.AddArg(\"-limitclustercount=<n>\", strprintf(\"Do not accept transactions connected to <n> or more existing in-mempool transactions (default: %u)\", DEFAULT_CLUSTER_LIMIT), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);",
      "path": "src/init.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "e72b0b1a7eb31078c998d95b4cfffe9cd1f9113d",
      "in_reply_to_id": 2319578206,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done.",
      "created_at": "2025-09-13T16:42:33Z",
      "updated_at": "2025-09-13T16:42:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346830947",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346830947"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 644,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346831052",
      "pull_request_review_id": 3221112056,
      "id": 2346831052,
      "node_id": "PRRC_kwDOABII586L4czM",
      "diff_hunk": "@@ -14,7 +14,7 @@\n #ifndef BITCOIN_TXGRAPH_H\n #define BITCOIN_TXGRAPH_H\n \n-static constexpr unsigned MAX_CLUSTER_COUNT_LIMIT{64};\n+static constexpr unsigned MAX_CLUSTER_COUNT_LIMIT{201};",
      "path": "src/txgraph.h",
      "position": 1,
      "original_position": 5,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "34251141eca785578a0b2ca6d1c0932d34b2418d",
      "in_reply_to_id": 2319721247,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Thank you!  In the process of looking at this again, I noticed that the `mempool_tests` unit test is failing in some intermediate commits here as well.  Will go back over that as well.",
      "created_at": "2025-09-13T16:42:43Z",
      "updated_at": "2025-09-13T16:42:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346831052",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346831052"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": 17,
      "start_side": "LEFT",
      "line": null,
      "original_line": 17,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346831222",
      "pull_request_review_id": 3221112735,
      "id": 2346831222,
      "node_id": "PRRC_kwDOABII586L4c12",
      "diff_hunk": "@@ -413,6 +413,7 @@ static CTxMemPool::Options&& Flatten(CTxMemPool::Options&& opts, bilingual_str&\n CTxMemPool::CTxMemPool(Options opts, bilingual_str& error)\n     : m_opts{Flatten(std::move(opts), error)}\n {\n+    m_txgraph = MakeTxGraph(64, 101'000, 10'000);",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "ebbe4a13ce2850ab7d0bbdbf48bd2cc84d1d38e7",
      "in_reply_to_id": 2328765241,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done.",
      "created_at": "2025-09-13T16:43:01Z",
      "updated_at": "2025-09-13T16:43:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346831222",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346831222"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 416,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346831407",
      "pull_request_review_id": 3221113667,
      "id": 2346831407,
      "node_id": "PRRC_kwDOABII586L4c4v",
      "diff_hunk": "@@ -1414,9 +1428,58 @@ void CTxMemPool::ChangeSet::StageRemoval(CTxMemPool::txiter it)\n void CTxMemPool::ChangeSet::Apply()\n {\n     LOCK(m_pool->cs);\n+    if (!m_dependencies_processed) {\n+        ProcessDependencies();\n+    }\n     m_pool->Apply(this);\n     m_to_add.clear();\n     m_to_remove.clear();\n     m_entry_vec.clear();\n     m_ancestors.clear();\n }\n+\n+std::vector<const TxGraph::Ref*> CTxMemPool::ChangeSet::CalculateParentsOf(const CTransactionRef& tx)\n+{\n+    std::vector<const TxGraph::Ref*> ret;\n+    std::set<Txid> inputs;\n+    for (const CTxIn &txin : tx->vin) {\n+        inputs.insert(txin.prevout.hash);\n+    }\n+    for (const auto &hash : inputs) {\n+        std::optional<txiter> piter = m_pool->GetIter(hash);\n+        if (piter) {\n+            ret.emplace_back(&(**piter));",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 73,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "34251141eca785578a0b2ca6d1c0932d34b2418d",
      "in_reply_to_id": 2328773469,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Sounds good, I added a commit that does this, if it looks right I'll squash into place.",
      "created_at": "2025-09-13T16:43:28Z",
      "updated_at": "2025-09-13T16:43:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346831407",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346831407"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1451,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346831450",
      "pull_request_review_id": 3221113789,
      "id": 2346831450,
      "node_id": "PRRC_kwDOABII586L4c5a",
      "diff_hunk": "@@ -1414,9 +1428,58 @@ void CTxMemPool::ChangeSet::StageRemoval(CTxMemPool::txiter it)\n void CTxMemPool::ChangeSet::Apply()\n {\n     LOCK(m_pool->cs);\n+    if (!m_dependencies_processed) {\n+        ProcessDependencies();\n+    }\n     m_pool->Apply(this);\n     m_to_add.clear();\n     m_to_remove.clear();\n     m_entry_vec.clear();\n     m_ancestors.clear();\n }\n+\n+std::vector<const TxGraph::Ref*> CTxMemPool::ChangeSet::CalculateParentsOf(const CTransactionRef& tx)\n+{\n+    std::vector<const TxGraph::Ref*> ret;\n+    std::set<Txid> inputs;",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 66,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "34251141eca785578a0b2ca6d1c0932d34b2418d",
      "in_reply_to_id": 2328774181,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Addressed with the inlining of `CalculateParentsOf()`.",
      "created_at": "2025-09-13T16:43:33Z",
      "updated_at": "2025-09-13T16:43:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346831450",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346831450"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1444,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346831547",
      "pull_request_review_id": 3221114285,
      "id": 2346831547,
      "node_id": "PRRC_kwDOABII586L4c67",
      "diff_hunk": "@@ -1154,29 +1154,38 @@ void CTxMemPool::TrimToSize(size_t sizelimit, std::vector<COutPoint>* pvNoSpends\n \n     unsigned nTxnRemoved = 0;\n     CFeeRate maxFeeRateRemoved(0);\n+\n     while (!mapTx.empty() && DynamicMemoryUsage() > sizelimit) {\n-        indexed_transaction_set::index<descendant_score>::type::iterator it = mapTx.get<descendant_score>().begin();\n+        auto [worst_chunk, feeperweight] = m_txgraph->GetWorstMainChunk();",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 7,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "76a3b6286bf0c4c691077ce8d22babd5d04e9658",
      "in_reply_to_id": 2328784119,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This seems to work if I do:\r\n\r\n```c++\r\nconst auto& [worst_chunk, feeperweight] = m_txgraph->GetWorstMainChunk();\r\n```\r\n\r\nFixed now.\r\n",
      "created_at": "2025-09-13T16:43:43Z",
      "updated_at": "2025-09-13T16:43:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346831547",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346831547"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1159,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346831633",
      "pull_request_review_id": 3221114440,
      "id": 2346831633,
      "node_id": "PRRC_kwDOABII586L4c8R",
      "diff_hunk": "@@ -1154,29 +1154,38 @@ void CTxMemPool::TrimToSize(size_t sizelimit, std::vector<COutPoint>* pvNoSpends\n \n     unsigned nTxnRemoved = 0;\n     CFeeRate maxFeeRateRemoved(0);\n+\n     while (!mapTx.empty() && DynamicMemoryUsage() > sizelimit) {\n-        indexed_transaction_set::index<descendant_score>::type::iterator it = mapTx.get<descendant_score>().begin();\n+        auto [worst_chunk, feeperweight] = m_txgraph->GetWorstMainChunk();\n+        FeePerVSize feerate = ToFeePerVSize(feeperweight);\n+        CFeeRate removed{feerate.fee, feerate.size};\n \n         // We set the new mempool min fee to the feerate of the removed set, plus the\n         // \"minimum reasonable fee rate\" (ie some value under which we consider txn\n         // to have 0 fee). This way, we don't allow txn to enter mempool with feerate\n         // equal to txn which were removed with no block in between.\n-        CFeeRate removed(it->GetModFeesWithDescendants(), it->GetSizeWithDescendants());\n         removed += m_opts.incremental_relay_feerate;\n         trackPackageRemoved(removed);\n         maxFeeRateRemoved = std::max(maxFeeRateRemoved, removed);\n \n-        setEntries stage;\n-        CalculateDescendants(mapTx.project<0>(it), stage);\n-        nTxnRemoved += stage.size();\n+        nTxnRemoved += worst_chunk.size();\n \n         std::vector<CTransaction> txn;\n         if (pvNoSpendsRemaining) {\n-            txn.reserve(stage.size());\n-            for (txiter iter : stage)\n-                txn.push_back(iter->GetTx());\n+            txn.reserve(worst_chunk.size());\n+            for (auto ref : worst_chunk) {\n+                txn.emplace_back(dynamic_cast<const CTxMemPoolEntry&>(*ref).GetTx());",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 32,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "76a3b6286bf0c4c691077ce8d22babd5d04e9658",
      "in_reply_to_id": 2328788473,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Thanks, fixed.",
      "created_at": "2025-09-13T16:43:50Z",
      "updated_at": "2025-09-13T16:43:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346831633",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346831633"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1177,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346831692",
      "pull_request_review_id": 3221114584,
      "id": 2346831692,
      "node_id": "PRRC_kwDOABII586L4c9M",
      "diff_hunk": "@@ -219,224 +206,90 @@ bool BlockAssembler::TestPackage(uint64_t packageSize, int64_t packageSigOpsCost\n \n // Perform transaction-level checks before adding to block:\n // - transaction finality (locktime)\n-bool BlockAssembler::TestPackageTransactions(const CTxMemPool::setEntries& package) const\n+bool BlockAssembler::TestPackageTransactions(const std::vector<const CTxMemPoolEntry *>& txs) const\n {\n-    for (CTxMemPool::txiter it : package) {\n-        if (!IsFinalTx(it->GetTx(), nHeight, m_lock_time_cutoff)) {\n+    for (auto tx : txs) {\n+        if (!IsFinalTx(tx->GetTx(), nHeight, m_lock_time_cutoff)) {\n             return false;\n         }\n     }\n     return true;\n }\n \n-void BlockAssembler::AddToBlock(CTxMemPool::txiter iter)\n+void BlockAssembler::AddToBlock(const CTxMemPoolEntry& entry)\n {\n-    pblocktemplate->block.vtx.emplace_back(iter->GetSharedTx());\n-    pblocktemplate->vTxFees.push_back(iter->GetFee());\n-    pblocktemplate->vTxSigOpsCost.push_back(iter->GetSigOpCost());\n-    nBlockWeight += iter->GetTxWeight();\n+    pblocktemplate->block.vtx.emplace_back(entry.GetSharedTx());\n+    pblocktemplate->vTxFees.push_back(entry.GetFee());\n+    pblocktemplate->vTxSigOpsCost.push_back(entry.GetSigOpCost());\n+    nBlockWeight += entry.GetTxWeight();\n     ++nBlockTx;\n-    nBlockSigOpsCost += iter->GetSigOpCost();\n-    nFees += iter->GetFee();\n-    inBlock.insert(iter->GetSharedTx()->GetHash());\n+    nBlockSigOpsCost += entry.GetSigOpCost();\n+    nFees += entry.GetFee();\n \n     if (m_options.print_modified_fee) {\n         LogPrintf(\"fee rate %s txid %s\\n\",\n-                  CFeeRate(iter->GetModifiedFee(), iter->GetTxSize()).ToString(),\n-                  iter->GetTx().GetHash().ToString());\n-    }\n-}\n-\n-/** Add descendants of given transactions to mapModifiedTx with ancestor\n- * state updated assuming given transactions are inBlock. Returns number\n- * of updated descendants. */\n-static int UpdatePackagesForAdded(const CTxMemPool& mempool,\n-                                  const CTxMemPool::setEntries& alreadyAdded,\n-                                  indexed_modified_transaction_set& mapModifiedTx) EXCLUSIVE_LOCKS_REQUIRED(mempool.cs)\n-{\n-    AssertLockHeld(mempool.cs);\n-\n-    int nDescendantsUpdated = 0;\n-    for (CTxMemPool::txiter it : alreadyAdded) {\n-        CTxMemPool::setEntries descendants;\n-        mempool.CalculateDescendants(it, descendants);\n-        // Insert all descendants (not yet in block) into the modified set\n-        for (CTxMemPool::txiter desc : descendants) {\n-            if (alreadyAdded.count(desc)) {\n-                continue;\n-            }\n-            ++nDescendantsUpdated;\n-            modtxiter mit = mapModifiedTx.find(desc);\n-            if (mit == mapModifiedTx.end()) {\n-                CTxMemPoolModifiedEntry modEntry(desc);\n-                mit = mapModifiedTx.insert(modEntry).first;\n-            }\n-            mapModifiedTx.modify(mit, update_for_parent_inclusion(it));\n-        }\n+                  CFeeRate(entry.GetModifiedFee(), entry.GetTxSize()).ToString(),\n+                  entry.GetTx().GetHash().ToString());\n     }\n-    return nDescendantsUpdated;\n-}\n-\n-void BlockAssembler::SortForBlock(const CTxMemPool::setEntries& package, std::vector<CTxMemPool::txiter>& sortedEntries)\n-{\n-    // Sort package by ancestor count\n-    // If a transaction A depends on transaction B, then A's ancestor count\n-    // must be greater than B's.  So this is sufficient to validly order the\n-    // transactions for block inclusion.\n-    sortedEntries.clear();\n-    sortedEntries.insert(sortedEntries.begin(), package.begin(), package.end());\n-    std::sort(sortedEntries.begin(), sortedEntries.end(), CompareTxIterByAncestorCount());\n }\n \n-// This transaction selection algorithm orders the mempool based\n-// on feerate of a transaction including all unconfirmed ancestors.\n-// Since we don't remove transactions from the mempool as we select them\n-// for block inclusion, we need an alternate method of updating the feerate\n-// of a transaction with its not-yet-selected ancestors as we go.\n-// This is accomplished by walking the in-mempool descendants of selected\n-// transactions and storing a temporary modified state in mapModifiedTxs.\n-// Each time through the loop, we compare the best transaction in\n-// mapModifiedTxs with the next transaction in the mempool to decide what\n-// transaction package to work on next.\n-void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpdated)\n+void BlockAssembler::addChunks()\n {\n-    const auto& mempool{*Assert(m_mempool)};\n-    LOCK(mempool.cs);\n-\n-    // mapModifiedTx will store sorted packages after they are modified\n-    // because some of their txs are already in the block\n-    indexed_modified_transaction_set mapModifiedTx;\n-    // Keep track of entries that failed inclusion, to avoid duplicate work\n-    std::set<Txid> failedTx;\n-\n-    CTxMemPool::indexed_transaction_set::index<ancestor_score>::type::iterator mi = mempool.mapTx.get<ancestor_score>().begin();\n-    CTxMemPool::txiter iter;\n-\n     // Limit the number of attempts to add transactions to the block when it is\n     // close to full; this is just a simple heuristic to finish quickly if the\n     // mempool has a lot of entries.\n     const int64_t MAX_CONSECUTIVE_FAILURES = 1000;\n     constexpr int32_t BLOCK_FULL_ENOUGH_WEIGHT_DELTA = 4000;\n     int64_t nConsecutiveFailed = 0;\n \n-    while (mi != mempool.mapTx.get<ancestor_score>().end() || !mapModifiedTx.empty()) {\n-        // First try to find a new transaction in mapTx to evaluate.\n-        //\n-        // Skip entries in mapTx that are already in a block or are present\n-        // in mapModifiedTx (which implies that the mapTx ancestor state is\n-        // stale due to ancestor inclusion in the block)\n-        // Also skip transactions that we've already failed to add. This can happen if\n-        // we consider a transaction in mapModifiedTx and it fails: we can then\n-        // potentially consider it again while walking mapTx.  It's currently\n-        // guaranteed to fail again, but as a belt-and-suspenders check we put it in\n-        // failedTx and avoid re-evaluation, since the re-evaluation would be using\n-        // cached size/sigops/fee values that are not actually correct.\n-        /** Return true if given transaction from mapTx has already been evaluated,\n-         * or if the transaction's cached data in mapTx is incorrect. */\n-        if (mi != mempool.mapTx.get<ancestor_score>().end()) {\n-            auto it = mempool.mapTx.project<0>(mi);\n-            assert(it != mempool.mapTx.end());\n-            if (mapModifiedTx.count(it) || inBlock.count(it->GetSharedTx()->GetHash()) || failedTx.count(it->GetSharedTx()->GetHash())) {\n-                ++mi;\n-                continue;\n-            }\n-        }\n-\n-        // Now that mi is not stale, determine which transaction to evaluate:\n-        // the next entry from mapTx, or the best from mapModifiedTx?\n-        bool fUsingModified = false;\n-\n-        modtxscoreiter modit = mapModifiedTx.get<ancestor_score>().begin();\n-        if (mi == mempool.mapTx.get<ancestor_score>().end()) {\n-            // We're out of entries in mapTx; use the entry from mapModifiedTx\n-            iter = modit->iter;\n-            fUsingModified = true;\n-        } else {\n-            // Try to compare the mapTx entry to the mapModifiedTx entry\n-            iter = mempool.mapTx.project<0>(mi);\n-            if (modit != mapModifiedTx.get<ancestor_score>().end() &&\n-                    CompareTxMemPoolEntryByAncestorFee()(*modit, CTxMemPoolModifiedEntry(iter))) {\n-                // The best entry in mapModifiedTx has higher score\n-                // than the one from mapTx.\n-                // Switch which transaction (package) to consider\n-                iter = modit->iter;\n-                fUsingModified = true;\n-            } else {\n-                // Either no entry in mapModifiedTx, or it's worse than mapTx.\n-                // Increment mi for the next loop iteration.\n-                ++mi;\n-            }\n-        }\n+    std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef> selected_transactions;\n+    FeePerWeight chunk_feerate;\n \n-        // We skip mapTx entries that are inBlock, and mapModifiedTx shouldn't\n-        // contain anything that is inBlock.\n-        assert(!inBlock.count(iter->GetSharedTx()->GetHash()));\n-\n-        uint64_t packageSize = iter->GetSizeWithAncestors();\n-        CAmount packageFees = iter->GetModFeesWithAncestors();\n-        int64_t packageSigOpsCost = iter->GetSigOpCostWithAncestors();\n-        if (fUsingModified) {\n-            packageSize = modit->nSizeWithAncestors;\n-            packageFees = modit->nModFeesWithAncestors;\n-            packageSigOpsCost = modit->nSigOpCostWithAncestors;\n-        }\n+    chunk_feerate = m_mempool->GetBlockBuilderChunk(selected_transactions);\n+    FeePerVSize chunk_feerate_vsize = ToFeePerVSize(chunk_feerate);\n \n-        if (packageFees < m_options.blockMinFeeRate.GetFee(packageSize)) {\n-            // Everything else we might consider has a lower fee rate\n+    while (selected_transactions.size() > 0) {\n+        // Check to see if min fee rate is still respected.\n+        if (chunk_feerate.fee < m_options.blockMinFeeRate.GetFee(chunk_feerate_vsize.size)) {\n+            // Everything else we might consider has a lower feerate\n             return;\n         }\n \n-        if (!TestPackage(packageSize, packageSigOpsCost)) {\n-            if (fUsingModified) {\n-                // Since we always look at the best entry in mapModifiedTx,\n-                // we must erase failed entries so that we can consider the\n-                // next best entry on the next loop iteration\n-                mapModifiedTx.get<ancestor_score>().erase(modit);\n-                failedTx.insert(iter->GetSharedTx()->GetHash());\n-            }\n+        int64_t package_sig_ops = 0;\n+        std::vector<const CTxMemPoolEntry*> mempool_txs;",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 262,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "64de3bb675e2ff3b8f0bb1de3d7680cbb2263807",
      "in_reply_to_id": 2328795859,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done, and I renamed this variable to `chunk_txs` for clarity.",
      "created_at": "2025-09-13T16:43:56Z",
      "updated_at": "2025-09-13T16:43:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346831692",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346831692"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 259,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346831790",
      "pull_request_review_id": 3221114771,
      "id": 2346831790,
      "node_id": "PRRC_kwDOABII586L4c-u",
      "diff_hunk": "@@ -219,224 +206,90 @@ bool BlockAssembler::TestPackage(uint64_t packageSize, int64_t packageSigOpsCost\n \n // Perform transaction-level checks before adding to block:\n // - transaction finality (locktime)\n-bool BlockAssembler::TestPackageTransactions(const CTxMemPool::setEntries& package) const\n+bool BlockAssembler::TestPackageTransactions(const std::vector<const CTxMemPoolEntry *>& txs) const\n {\n-    for (CTxMemPool::txiter it : package) {\n-        if (!IsFinalTx(it->GetTx(), nHeight, m_lock_time_cutoff)) {\n+    for (auto tx : txs) {\n+        if (!IsFinalTx(tx->GetTx(), nHeight, m_lock_time_cutoff)) {\n             return false;\n         }\n     }\n     return true;\n }\n \n-void BlockAssembler::AddToBlock(CTxMemPool::txiter iter)\n+void BlockAssembler::AddToBlock(const CTxMemPoolEntry& entry)\n {\n-    pblocktemplate->block.vtx.emplace_back(iter->GetSharedTx());\n-    pblocktemplate->vTxFees.push_back(iter->GetFee());\n-    pblocktemplate->vTxSigOpsCost.push_back(iter->GetSigOpCost());\n-    nBlockWeight += iter->GetTxWeight();\n+    pblocktemplate->block.vtx.emplace_back(entry.GetSharedTx());\n+    pblocktemplate->vTxFees.push_back(entry.GetFee());\n+    pblocktemplate->vTxSigOpsCost.push_back(entry.GetSigOpCost());\n+    nBlockWeight += entry.GetTxWeight();\n     ++nBlockTx;\n-    nBlockSigOpsCost += iter->GetSigOpCost();\n-    nFees += iter->GetFee();\n-    inBlock.insert(iter->GetSharedTx()->GetHash());\n+    nBlockSigOpsCost += entry.GetSigOpCost();\n+    nFees += entry.GetFee();\n \n     if (m_options.print_modified_fee) {\n         LogPrintf(\"fee rate %s txid %s\\n\",\n-                  CFeeRate(iter->GetModifiedFee(), iter->GetTxSize()).ToString(),\n-                  iter->GetTx().GetHash().ToString());\n-    }\n-}\n-\n-/** Add descendants of given transactions to mapModifiedTx with ancestor\n- * state updated assuming given transactions are inBlock. Returns number\n- * of updated descendants. */\n-static int UpdatePackagesForAdded(const CTxMemPool& mempool,\n-                                  const CTxMemPool::setEntries& alreadyAdded,\n-                                  indexed_modified_transaction_set& mapModifiedTx) EXCLUSIVE_LOCKS_REQUIRED(mempool.cs)\n-{\n-    AssertLockHeld(mempool.cs);\n-\n-    int nDescendantsUpdated = 0;\n-    for (CTxMemPool::txiter it : alreadyAdded) {\n-        CTxMemPool::setEntries descendants;\n-        mempool.CalculateDescendants(it, descendants);\n-        // Insert all descendants (not yet in block) into the modified set\n-        for (CTxMemPool::txiter desc : descendants) {\n-            if (alreadyAdded.count(desc)) {\n-                continue;\n-            }\n-            ++nDescendantsUpdated;\n-            modtxiter mit = mapModifiedTx.find(desc);\n-            if (mit == mapModifiedTx.end()) {\n-                CTxMemPoolModifiedEntry modEntry(desc);\n-                mit = mapModifiedTx.insert(modEntry).first;\n-            }\n-            mapModifiedTx.modify(mit, update_for_parent_inclusion(it));\n-        }\n+                  CFeeRate(entry.GetModifiedFee(), entry.GetTxSize()).ToString(),\n+                  entry.GetTx().GetHash().ToString());\n     }\n-    return nDescendantsUpdated;\n-}\n-\n-void BlockAssembler::SortForBlock(const CTxMemPool::setEntries& package, std::vector<CTxMemPool::txiter>& sortedEntries)\n-{\n-    // Sort package by ancestor count\n-    // If a transaction A depends on transaction B, then A's ancestor count\n-    // must be greater than B's.  So this is sufficient to validly order the\n-    // transactions for block inclusion.\n-    sortedEntries.clear();\n-    sortedEntries.insert(sortedEntries.begin(), package.begin(), package.end());\n-    std::sort(sortedEntries.begin(), sortedEntries.end(), CompareTxIterByAncestorCount());\n }\n \n-// This transaction selection algorithm orders the mempool based\n-// on feerate of a transaction including all unconfirmed ancestors.\n-// Since we don't remove transactions from the mempool as we select them\n-// for block inclusion, we need an alternate method of updating the feerate\n-// of a transaction with its not-yet-selected ancestors as we go.\n-// This is accomplished by walking the in-mempool descendants of selected\n-// transactions and storing a temporary modified state in mapModifiedTxs.\n-// Each time through the loop, we compare the best transaction in\n-// mapModifiedTxs with the next transaction in the mempool to decide what\n-// transaction package to work on next.\n-void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpdated)\n+void BlockAssembler::addChunks()\n {\n-    const auto& mempool{*Assert(m_mempool)};\n-    LOCK(mempool.cs);\n-\n-    // mapModifiedTx will store sorted packages after they are modified\n-    // because some of their txs are already in the block\n-    indexed_modified_transaction_set mapModifiedTx;\n-    // Keep track of entries that failed inclusion, to avoid duplicate work\n-    std::set<Txid> failedTx;\n-\n-    CTxMemPool::indexed_transaction_set::index<ancestor_score>::type::iterator mi = mempool.mapTx.get<ancestor_score>().begin();\n-    CTxMemPool::txiter iter;\n-\n     // Limit the number of attempts to add transactions to the block when it is\n     // close to full; this is just a simple heuristic to finish quickly if the\n     // mempool has a lot of entries.\n     const int64_t MAX_CONSECUTIVE_FAILURES = 1000;\n     constexpr int32_t BLOCK_FULL_ENOUGH_WEIGHT_DELTA = 4000;\n     int64_t nConsecutiveFailed = 0;\n \n-    while (mi != mempool.mapTx.get<ancestor_score>().end() || !mapModifiedTx.empty()) {\n-        // First try to find a new transaction in mapTx to evaluate.\n-        //\n-        // Skip entries in mapTx that are already in a block or are present\n-        // in mapModifiedTx (which implies that the mapTx ancestor state is\n-        // stale due to ancestor inclusion in the block)\n-        // Also skip transactions that we've already failed to add. This can happen if\n-        // we consider a transaction in mapModifiedTx and it fails: we can then\n-        // potentially consider it again while walking mapTx.  It's currently\n-        // guaranteed to fail again, but as a belt-and-suspenders check we put it in\n-        // failedTx and avoid re-evaluation, since the re-evaluation would be using\n-        // cached size/sigops/fee values that are not actually correct.\n-        /** Return true if given transaction from mapTx has already been evaluated,\n-         * or if the transaction's cached data in mapTx is incorrect. */\n-        if (mi != mempool.mapTx.get<ancestor_score>().end()) {\n-            auto it = mempool.mapTx.project<0>(mi);\n-            assert(it != mempool.mapTx.end());\n-            if (mapModifiedTx.count(it) || inBlock.count(it->GetSharedTx()->GetHash()) || failedTx.count(it->GetSharedTx()->GetHash())) {\n-                ++mi;\n-                continue;\n-            }\n-        }\n-\n-        // Now that mi is not stale, determine which transaction to evaluate:\n-        // the next entry from mapTx, or the best from mapModifiedTx?\n-        bool fUsingModified = false;\n-\n-        modtxscoreiter modit = mapModifiedTx.get<ancestor_score>().begin();\n-        if (mi == mempool.mapTx.get<ancestor_score>().end()) {\n-            // We're out of entries in mapTx; use the entry from mapModifiedTx\n-            iter = modit->iter;\n-            fUsingModified = true;\n-        } else {\n-            // Try to compare the mapTx entry to the mapModifiedTx entry\n-            iter = mempool.mapTx.project<0>(mi);\n-            if (modit != mapModifiedTx.get<ancestor_score>().end() &&\n-                    CompareTxMemPoolEntryByAncestorFee()(*modit, CTxMemPoolModifiedEntry(iter))) {\n-                // The best entry in mapModifiedTx has higher score\n-                // than the one from mapTx.\n-                // Switch which transaction (package) to consider\n-                iter = modit->iter;\n-                fUsingModified = true;\n-            } else {\n-                // Either no entry in mapModifiedTx, or it's worse than mapTx.\n-                // Increment mi for the next loop iteration.\n-                ++mi;\n-            }\n-        }\n+    std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef> selected_transactions;\n+    FeePerWeight chunk_feerate;\n \n-        // We skip mapTx entries that are inBlock, and mapModifiedTx shouldn't\n-        // contain anything that is inBlock.\n-        assert(!inBlock.count(iter->GetSharedTx()->GetHash()));\n-\n-        uint64_t packageSize = iter->GetSizeWithAncestors();\n-        CAmount packageFees = iter->GetModFeesWithAncestors();\n-        int64_t packageSigOpsCost = iter->GetSigOpCostWithAncestors();\n-        if (fUsingModified) {\n-            packageSize = modit->nSizeWithAncestors;\n-            packageFees = modit->nModFeesWithAncestors;\n-            packageSigOpsCost = modit->nSigOpCostWithAncestors;\n-        }\n+    chunk_feerate = m_mempool->GetBlockBuilderChunk(selected_transactions);\n+    FeePerVSize chunk_feerate_vsize = ToFeePerVSize(chunk_feerate);\n \n-        if (packageFees < m_options.blockMinFeeRate.GetFee(packageSize)) {\n-            // Everything else we might consider has a lower fee rate\n+    while (selected_transactions.size() > 0) {\n+        // Check to see if min fee rate is still respected.\n+        if (chunk_feerate.fee < m_options.blockMinFeeRate.GetFee(chunk_feerate_vsize.size)) {\n+            // Everything else we might consider has a lower feerate\n             return;\n         }\n \n-        if (!TestPackage(packageSize, packageSigOpsCost)) {\n-            if (fUsingModified) {\n-                // Since we always look at the best entry in mapModifiedTx,\n-                // we must erase failed entries so that we can consider the\n-                // next best entry on the next loop iteration\n-                mapModifiedTx.get<ancestor_score>().erase(modit);\n-                failedTx.insert(iter->GetSharedTx()->GetHash());\n-            }\n+        int64_t package_sig_ops = 0;\n+        std::vector<const CTxMemPoolEntry*> mempool_txs;\n+        for (const auto& tx : selected_transactions) {\n+            mempool_txs.emplace_back(&tx.get());\n+            package_sig_ops += tx.get().GetSigOpCost();\n+        }\n \n+        // Check to see if this chunk will fit.\n+        if (!TestPackage(chunk_feerate, package_sig_ops) || !TestPackageTransactions(mempool_txs)) {\n+            m_mempool->SkipBuilderChunk();\n+            // This chunk won't fit, so we let it be removed from the heap and\n+            // we'll try the next best.\n+            // TODO: try to break up this chunk into smaller chunks for",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 273,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "64de3bb675e2ff3b8f0bb1de3d7680cbb2263807",
      "in_reply_to_id": 2328797770,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Removed.",
      "created_at": "2025-09-13T16:44:02Z",
      "updated_at": "2025-09-13T16:44:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346831790",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346831790"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 270,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346831841",
      "pull_request_review_id": 3221114855,
      "id": 2346831841,
      "node_id": "PRRC_kwDOABII586L4c_h",
      "diff_hunk": "@@ -106,9 +106,7 @@ void ApplyArgsManOptions(const ArgsManager& args, BlockAssembler::Options& optio\n \n void BlockAssembler::resetBlock()\n {\n-    inBlock.clear();\n-\n-    // Reserve space for fixed-size block header, txs count, and coinbase tx.\n+    // Reserve space for coinbase tx",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 7,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "64de3bb675e2ff3b8f0bb1de3d7680cbb2263807",
      "in_reply_to_id": 2328798560,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Oops, reverted my change.",
      "created_at": "2025-09-13T16:44:06Z",
      "updated_at": "2025-09-13T16:44:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346831841",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346831841"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 109,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346831889",
      "pull_request_review_id": 3221114986,
      "id": 2346831889,
      "node_id": "PRRC_kwDOABII586L4dAR",
      "diff_hunk": "@@ -535,49 +535,63 @@ CMutableTransaction TestChain100Setup::CreateValidMempoolTransaction(CTransactio\n std::vector<CTransactionRef> TestChain100Setup::PopulateMempool(FastRandomContext& det_rand, size_t num_transactions, bool submit)\n {\n     std::vector<CTransactionRef> mempool_transactions;\n-    std::deque<std::pair<COutPoint, CAmount>> unspent_prevouts;\n+    std::deque<std::pair<COutPoint, CAmount>> unspent_prevouts, undo_info;\n     std::transform(m_coinbase_txns.begin(), m_coinbase_txns.end(), std::back_inserter(unspent_prevouts),\n         [](const auto& tx){ return std::make_pair(COutPoint(tx->GetHash(), 0), tx->vout[0].nValue); });\n     while (num_transactions > 0 && !unspent_prevouts.empty()) {\n-        // The number of inputs and outputs are random, between 1 and 24.\n+        // The number of inputs and outputs are random, between 1 and 10.",
      "path": "src/test/util/setup_common.cpp",
      "position": 1,
      "original_position": 10,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "7553b4af4ce3762492ec402e758d7361c87c5cd7",
      "in_reply_to_id": 2328801531,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Thanks, fixed the comment.",
      "created_at": "2025-09-13T16:44:11Z",
      "updated_at": "2025-09-13T16:44:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346831889",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346831889"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 542,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346831920",
      "pull_request_review_id": 3221115063,
      "id": 2346831920,
      "node_id": "PRRC_kwDOABII586L4dAw",
      "diff_hunk": "@@ -803,24 +803,20 @@ void CTxMemPool::check(const CCoinsViewCache& active_coins_tip, int64_t spendhei\n     assert(innerUsage == cachedInnerUsage);\n }\n \n-bool CTxMemPool::CompareDepthAndScore(const Wtxid& hasha, const Wtxid& hashb) const\n+bool CTxMemPool::CompareMiningScoreWithTopology(const Wtxid& hasha, const Wtxid& hashb) const\n {\n     /* Return `true` if hasha should be considered sooner than hashb. Namely when:\n      *   a is not in the mempool, but b is\n-     *   both are in the mempool and a has fewer ancestors than b\n-     *   both are in the mempool and a has a higher score than b\n+     *   both are in the mempool and a has a higher mining score than b\n+     *   both are in the mempool and a appears before b in the same cluster\n      */\n     LOCK(cs);\n     auto j{GetIter(hashb)};\n     if (!j.has_value()) return false;\n     auto i{GetIter(hasha)};\n     if (!i.has_value()) return true;\n-    uint64_t counta = i.value()->GetCountWithAncestors();\n-    uint64_t countb = j.value()->GetCountWithAncestors();\n-    if (counta == countb) {\n-        return CompareTxMemPoolEntryByScore()(*i.value(), *j.value());\n-    }\n-    return counta < countb;\n+\n+    return m_txgraph->CompareMainOrder(*i.value(), *j.value()) == std::strong_ordering::less ? true : false;",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 26,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "f172ac5e6c37f446bc3c38419cf40f3adac3ddd8",
      "in_reply_to_id": 2328802761,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Ah, that is much better, thanks.",
      "created_at": "2025-09-13T16:44:15Z",
      "updated_at": "2025-09-13T16:44:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346831920",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346831920"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 819,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346831966",
      "pull_request_review_id": 3221115270,
      "id": 2346831966,
      "node_id": "PRRC_kwDOABII586L4dBe",
      "diff_hunk": "@@ -7,8 +7,9 @@\n from decimal import Decimal\n \n from test_framework.messages import (\n-    DEFAULT_ANCESTOR_LIMIT,\n     DEFAULT_DESCENDANT_LIMIT,\n+    DEFAULT_DESCENDANT_LIMIT,",
      "path": "test/functional/mempool_packages.py",
      "position": 1,
      "original_position": 6,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "74f51262688e1f6a4af1664c13f6c895b1499a39",
      "in_reply_to_id": 2328806555,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Oops, eliminated now.",
      "created_at": "2025-09-13T16:44:25Z",
      "updated_at": "2025-09-13T16:44:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346831966",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346831966"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 11,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346831990",
      "pull_request_review_id": 3221115358,
      "id": 2346831990,
      "node_id": "PRRC_kwDOABII586L4dB2",
      "diff_hunk": "@@ -953,11 +953,7 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n     ws.m_iters_conflicting = m_pool.GetIterSet(ws.m_conflicts);\n \n     // Calculate in-mempool ancestors, up to a limit.",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 3,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "6000fc8c3fcc0446b3665f7fccf102068919fa3c",
      "in_reply_to_id": 2328810011,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Eliminated the comment.",
      "created_at": "2025-09-13T16:44:30Z",
      "updated_at": "2025-09-13T16:44:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346831990",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346831990"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 955,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346832046",
      "pull_request_review_id": 3221115526,
      "id": 2346832046,
      "node_id": "PRRC_kwDOABII586L4dCu",
      "diff_hunk": "@@ -297,6 +297,7 @@ class CTxMemPool\n     std::vector<std::pair<Wtxid, txiter>> txns_randomized GUARDED_BY(cs); //!< All transactions in mapTx with their wtxids, in arbitrary order\n \n     typedef std::set<txiter, CompareIteratorByHash> setEntries;\n+    typedef std::vector<txiter> Entries;",
      "path": "src/txmempool.h",
      "position": 1,
      "original_position": 4,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "1f70699997666ffbaf98748b1df0ead6ffe87bf6",
      "in_reply_to_id": 2328810624,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Looks like this was leftover from some earlier efforts I had to replace `setEntries` with a vector of `txiter`s instead, but I've lost track of where I was at with that.  Eliminated this new `Entries` type for now.",
      "created_at": "2025-09-13T16:44:34Z",
      "updated_at": "2025-09-13T16:44:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346832046",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346832046"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 300,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346832310",
      "pull_request_review_id": 3221116044,
      "id": 2346832310,
      "node_id": "PRRC_kwDOABII586L4dG2",
      "diff_hunk": "@@ -377,8 +377,8 @@ void CTxMemPool::removeConflicts(const CTransaction &tx)\n             const CTransaction &txConflict = it->second->GetTx();\n             if (Assume(txConflict.GetHash() != tx.GetHash()))\n             {\n+                removeRecursive(it->second, MemPoolRemovalReason::CONFLICT);",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "4087ae4e5262c3ee0a3ce633fb561779340d99c3",
      "in_reply_to_id": 2328813987,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Looks like a rebase issue (I think there may have been an earlier version of the code where there was a bigger change, and this accidental line reordering was what was left over).  Eliminated this commit.",
      "created_at": "2025-09-13T16:44:54Z",
      "updated_at": "2025-09-13T16:44:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346832310",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346832310"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 380,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346832329",
      "pull_request_review_id": 3221116148,
      "id": 2346832329,
      "node_id": "PRRC_kwDOABII586L4dHJ",
      "diff_hunk": "@@ -210,6 +210,7 @@ void CTxMemPool::Apply(ChangeSet* changeset)\n \n         addNewTransaction(it);\n     }\n+    m_txgraph->DoWork(10'000);",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "61f51546af33923c9e5dc9632ba5544aa853ae71",
      "in_reply_to_id": 2328815965,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Thanks, good point!  Making this 100x for now.",
      "created_at": "2025-09-13T16:44:59Z",
      "updated_at": "2025-09-13T16:45:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346832329",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346832329"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 213,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346832356",
      "pull_request_review_id": 3221116380,
      "id": 2346832356,
      "node_id": "PRRC_kwDOABII586L4dHk",
      "diff_hunk": "@@ -413,7 +413,7 @@ class CTxMemPool\n     }\n \n public:\n-    indirectmap<COutPoint, const CTransaction*> mapNextTx GUARDED_BY(cs);\n+    indirectmap<COutPoint, txiter> mapNextTx GUARDED_BY(cs);",
      "path": "src/txmempool.h",
      "position": 316,
      "original_position": 5,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "56999a7085f21c8d462fd5afdfbb41dd93df423f",
      "in_reply_to_id": 2330691874,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I added a later commit to the CTxMemPool class as a whole that adds some documentation for this variable; do you think that is sufficient or would it be helpful to add more?",
      "created_at": "2025-09-13T16:45:05Z",
      "updated_at": "2025-09-13T16:45:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346832356",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346832356"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 302,
      "original_line": 302,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346832438",
      "pull_request_review_id": 3221116609,
      "id": 2346832438,
      "node_id": "PRRC_kwDOABII586L4dI2",
      "diff_hunk": "@@ -510,6 +510,7 @@ class CTxMemPool\n      */\n     void UpdateTransactionsFromBlock(const std::vector<Txid>& vHashesToUpdate) EXCLUSIVE_LOCKS_REQUIRED(cs, cs_main) LOCKS_EXCLUDED(m_epoch);\n \n+public:",
      "path": "src/txmempool.h",
      "position": 1,
      "original_position": 4,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "34251141eca785578a0b2ca6d1c0932d34b2418d",
      "in_reply_to_id": 2331016065,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Thanks, fixed.",
      "created_at": "2025-09-13T16:45:15Z",
      "updated_at": "2025-09-13T16:45:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346832438",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346832438"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 513,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346832459",
      "pull_request_review_id": 3221116701,
      "id": 2346832459,
      "node_id": "PRRC_kwDOABII586L4dJL",
      "diff_hunk": "@@ -1414,9 +1428,58 @@ void CTxMemPool::ChangeSet::StageRemoval(CTxMemPool::txiter it)\n void CTxMemPool::ChangeSet::Apply()\n {\n     LOCK(m_pool->cs);\n+    if (!m_dependencies_processed) {\n+        ProcessDependencies();\n+    }\n     m_pool->Apply(this);\n     m_to_add.clear();\n     m_to_remove.clear();\n     m_entry_vec.clear();\n     m_ancestors.clear();\n }\n+\n+std::vector<const TxGraph::Ref*> CTxMemPool::ChangeSet::CalculateParentsOf(const CTransactionRef& tx)\n+{\n+    std::vector<const TxGraph::Ref*> ret;",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 65,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "34251141eca785578a0b2ca6d1c0932d34b2418d",
      "in_reply_to_id": 2331041173,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This function is gone now.",
      "created_at": "2025-09-13T16:45:19Z",
      "updated_at": "2025-09-13T16:45:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346832459",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346832459"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1443,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346832531",
      "pull_request_review_id": 3221116956,
      "id": 2346832531,
      "node_id": "PRRC_kwDOABII586L4dKT",
      "diff_hunk": "@@ -185,30 +184,18 @@ std::unique_ptr<CBlockTemplate> BlockAssembler::CreateNewBlock()\n     }\n     const auto time_2{SteadyClock::now()};\n \n-    LogDebug(BCLog::BENCH, \"CreateNewBlock() packages: %.2fms (%d packages, %d updated descendants), validity: %.2fms (total %.2fms)\\n\",\n-             Ticks<MillisecondsDouble>(time_1 - time_start), nPackagesSelected, nDescendantsUpdated,\n+    LogDebug(BCLog::BENCH, \"CreateNewBlock() chunks: %.2fms, validity: %.2fms (total %.2fms)\\n\",\n+             Ticks<MillisecondsDouble>(time_1 - time_start),\n              Ticks<MillisecondsDouble>(time_2 - time_1),\n              Ticks<MillisecondsDouble>(time_2 - time_start));\n \n     return std::move(pblocktemplate);\n }\n \n-void BlockAssembler::onlyUnconfirmed(CTxMemPool::setEntries& testSet)\n-{\n-    for (CTxMemPool::setEntries::iterator iit = testSet.begin(); iit != testSet.end(); ) {\n-        // Only test txs not already in the block\n-        if (inBlock.count((*iit)->GetSharedTx()->GetHash())) {\n-            testSet.erase(iit++);\n-        } else {\n-            iit++;\n-        }\n-    }\n-}\n-\n-bool BlockAssembler::TestPackage(uint64_t packageSize, int64_t packageSigOpsCost) const\n+bool BlockAssembler::TestPackage(FeePerWeight package_feerate, int64_t packageSigOpsCost) const\n {\n     // TODO: switch to weight-based accounting for packages instead of vsize-based accounting.",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 55,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "64de3bb675e2ff3b8f0bb1de3d7680cbb2263807",
      "in_reply_to_id": 2331258415,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Thanks, eliminated.",
      "created_at": "2025-09-13T16:45:31Z",
      "updated_at": "2025-09-13T16:45:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346832531",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346832531"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 197,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346832556",
      "pull_request_review_id": 3221117077,
      "id": 2346832556,
      "node_id": "PRRC_kwDOABII586L4dKs",
      "diff_hunk": "@@ -916,6 +917,24 @@ class CTxMemPool\n     // callbacks).\n     void addNewTransaction(CTxMemPool::txiter it) EXCLUSIVE_LOCKS_REQUIRED(cs);\n     void addNewTransaction(CTxMemPool::txiter it, CTxMemPool::setEntries& setAncestors) EXCLUSIVE_LOCKS_REQUIRED(cs);\n+public:\n+    void StartBlockBuilding() const EXCLUSIVE_LOCKS_REQUIRED(cs) { assert(!m_builder); m_builder = m_txgraph->GetBlockBuilder(); }\n+    FeePerWeight GetBlockBuilderChunk(std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef>& entries) const EXCLUSIVE_LOCKS_REQUIRED(cs)\n+    {\n+        if (!m_builder) { return {}; }\n+\n+        auto res = m_builder->GetCurrentChunk();\n+        if (!res) { return {}; }\n+\n+        auto [chunk_entries, chunk_feerate] = *res;\n+        for (TxGraph::Ref* ref : chunk_entries) {\n+            entries.emplace_back(dynamic_cast<const CTxMemPoolEntry&>(*ref));",
      "path": "src/txmempool.h",
      "position": 1,
      "original_position": 23,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "64de3bb675e2ff3b8f0bb1de3d7680cbb2263807",
      "in_reply_to_id": 2331325786,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Fixed.",
      "created_at": "2025-09-13T16:45:38Z",
      "updated_at": "2025-09-13T16:45:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346832556",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346832556"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 931,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346832576",
      "pull_request_review_id": 3221117128,
      "id": 2346832576,
      "node_id": "PRRC_kwDOABII586L4dLA",
      "diff_hunk": "@@ -62,59 +62,27 @@ std::optional<std::string> GetEntriesForConflicts(const CTransaction& tx,\n                                                   CTxMemPool::setEntries& all_conflicts)\n {\n     AssertLockHeld(pool.cs);\n-    uint64_t nConflictingCount = 0;\n-    for (const auto& mi : iters_conflicting) {\n-        nConflictingCount += mi->GetCountWithDescendants();\n-        // Rule #5: don't consider replacing more than MAX_REPLACEMENT_CANDIDATES\n-        // entries from the mempool. This potentially overestimates the number of actual\n-        // descendants (i.e. if multiple conflicts share a descendant, it will be counted multiple\n-        // times), but we just want to be conservative to avoid doing too much work.\n-        if (nConflictingCount > MAX_REPLACEMENT_CANDIDATES) {\n-            return strprintf(\"rejecting replacement %s; too many potential replacements (%d > %d)\",\n-                             tx.GetHash().ToString(),\n-                             nConflictingCount,\n-                             MAX_REPLACEMENT_CANDIDATES);\n-        }\n+    // Rule #5: don't consider replacements that conflict directly with more\n+    // than MAX_REPLACEMENT_CANDIDATES distinct clusters. This implies a bound",
      "path": "src/policy/rbf.cpp",
      "position": 28,
      "original_position": 18,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "266500e01e996c6c08af31880545efb5568ded8b",
      "in_reply_to_id": 2331366938,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Made some improvements, please let me know how it looks now.",
      "created_at": "2025-09-13T16:45:43Z",
      "updated_at": "2025-09-13T16:45:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346832576",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346832576"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 65,
      "original_line": 65,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346832591",
      "pull_request_review_id": 3221117245,
      "id": 2346832591,
      "node_id": "PRRC_kwDOABII586L4dLP",
      "diff_hunk": "@@ -511,6 +511,15 @@ class CTxMemPool\n      */\n     void UpdateTransactionsFromBlock(const std::vector<Txid>& vHashesToUpdate) EXCLUSIVE_LOCKS_REQUIRED(cs, cs_main) LOCKS_EXCLUDED(m_epoch);\n \n+    size_t GetUniqueClusterCount(const setEntries& iters_conflicting) const EXCLUSIVE_LOCKS_REQUIRED(cs) {\n+        std::vector<const TxGraph::Ref *> entries;\n+        entries.reserve(iters_conflicting.size());\n+        for (auto it : iters_conflicting) {\n+            entries.emplace_back(&*it);\n+        }\n+        return m_txgraph->CountDistinctClusters(entries);",
      "path": "src/txmempool.h",
      "position": 1,
      "original_position": 10,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "266500e01e996c6c08af31880545efb5568ded8b",
      "in_reply_to_id": 2331387778,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Thanks, fixed.",
      "created_at": "2025-09-13T16:45:50Z",
      "updated_at": "2025-09-13T16:45:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346832591",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346832591"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 520,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346832613",
      "pull_request_review_id": 3221117340,
      "id": 2346832613,
      "node_id": "PRRC_kwDOABII586L4dLl",
      "diff_hunk": "@@ -62,59 +62,27 @@ std::optional<std::string> GetEntriesForConflicts(const CTransaction& tx,\n                                                   CTxMemPool::setEntries& all_conflicts)\n {\n     AssertLockHeld(pool.cs);\n-    uint64_t nConflictingCount = 0;\n-    for (const auto& mi : iters_conflicting) {\n-        nConflictingCount += mi->GetCountWithDescendants();\n-        // Rule #5: don't consider replacing more than MAX_REPLACEMENT_CANDIDATES\n-        // entries from the mempool. This potentially overestimates the number of actual\n-        // descendants (i.e. if multiple conflicts share a descendant, it will be counted multiple\n-        // times), but we just want to be conservative to avoid doing too much work.\n-        if (nConflictingCount > MAX_REPLACEMENT_CANDIDATES) {\n-            return strprintf(\"rejecting replacement %s; too many potential replacements (%d > %d)\",\n-                             tx.GetHash().ToString(),\n-                             nConflictingCount,\n-                             MAX_REPLACEMENT_CANDIDATES);\n-        }\n+    // Rule #5: don't consider replacements that conflict directly with more",
      "path": "src/policy/rbf.cpp",
      "position": 27,
      "original_position": 17,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "266500e01e996c6c08af31880545efb5568ded8b",
      "in_reply_to_id": 2331400983,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done!",
      "created_at": "2025-09-13T16:45:55Z",
      "updated_at": "2025-09-13T16:45:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346832613",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346832613"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 64,
      "original_line": 64,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346832621",
      "pull_request_review_id": 3221117399,
      "id": 2346832621,
      "node_id": "PRRC_kwDOABII586L4dLt",
      "diff_hunk": "@@ -1414,9 +1428,58 @@ void CTxMemPool::ChangeSet::StageRemoval(CTxMemPool::txiter it)\n void CTxMemPool::ChangeSet::Apply()\n {\n     LOCK(m_pool->cs);\n+    if (!m_dependencies_processed) {\n+        ProcessDependencies();\n+    }\n     m_pool->Apply(this);\n     m_to_add.clear();\n     m_to_remove.clear();\n     m_entry_vec.clear();\n     m_ancestors.clear();\n }\n+\n+std::vector<const TxGraph::Ref*> CTxMemPool::ChangeSet::CalculateParentsOf(const CTransactionRef& tx)\n+{\n+    std::vector<const TxGraph::Ref*> ret;\n+    std::set<Txid> inputs;\n+    for (const CTxIn &txin : tx->vin) {\n+        inputs.insert(txin.prevout.hash);\n+    }\n+    for (const auto &hash : inputs) {\n+        std::optional<txiter> piter = m_pool->GetIter(hash);\n+        if (piter) {\n+            ret.emplace_back(&(**piter));\n+        } else {\n+            // Check the change set for parents.\n+            auto it = m_to_add.find(hash);\n+            if (it != m_to_add.end()) {\n+                ret.emplace_back(&(*it));\n+            }\n+        }\n+    }\n+    return ret;\n+}\n+\n+void CTxMemPool::ChangeSet::ProcessDependencies()\n+{\n+    LOCK(m_pool->cs);\n+    Assume(!m_dependencies_processed); // should only call this once.\n+    for (const auto& entryptr : m_entry_vec) {\n+        auto parents = CalculateParentsOf(entryptr->GetSharedTx());\n+        for (auto p : parents) {\n+            m_pool->m_txgraph->AddDependency(*p, *entryptr);\n+        }\n+    }\n+    m_dependencies_processed = true;\n+    return;\n+ }\n+\n+bool CTxMemPool::ChangeSet::CheckMemPoolPolicyLimits()\n+{\n+    LOCK(m_pool->cs);\n+    if (!m_dependencies_processed) {\n+        ProcessDependencies();\n+    }\n+\n+    return !m_pool->m_txgraph->IsOversized();",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 106,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "34251141eca785578a0b2ca6d1c0932d34b2418d",
      "in_reply_to_id": 2331417443,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Thanks, fixed.",
      "created_at": "2025-09-13T16:45:58Z",
      "updated_at": "2025-09-13T16:45:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2346832621",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2346832621"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1484,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2347345010",
      "pull_request_review_id": 3222099679,
      "id": 2347345010,
      "node_id": "PRRC_kwDOABII586L6aRy",
      "diff_hunk": "@@ -845,7 +827,10 @@ std::vector<CTxMemPool::indexed_transaction_set::const_iterator> CTxMemPool::Get\n     for (indexed_transaction_set::iterator mi = mapTx.begin(); mi != mapTx.end(); ++mi) {\n         iters.push_back(mi);\n     }\n-    std::sort(iters.begin(), iters.end(), DepthAndScoreComparator());\n+    std::sort(iters.begin(), iters.end(), [this](const CTxMemPool::indexed_transaction_set::const_iterator& a, const CTxMemPool::indexed_transaction_set::const_iterator& b) {\n+        LOCK(this->cs); // TODO: this is unnecessary, to quiet a compiler warning",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 65,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "7f44c6d9893df97bb413e01aa737028cbe52ce75",
      "in_reply_to_id": 2328805583,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This works (also made a few other simplifications):\r\n\r\n```c++\r\nstd::sort(iters.begin(), iters.end(), [this](const auto& a, const auto& b) EXCLUSIVE_LOCKS_REQUIRED(cs) noexcept {\r\n    return m_txgraph->CompareMainOrder(*a, *b) < 0;\r\n});\r\n```\r\n",
      "created_at": "2025-09-14T13:57:46Z",
      "updated_at": "2025-09-14T13:59:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2347345010",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2347345010"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 537,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2350088607",
      "pull_request_review_id": 3226272301,
      "id": 2350088607,
      "node_id": "PRRC_kwDOABII586ME4Gf",
      "diff_hunk": "@@ -450,14 +439,10 @@ class CTxMemPool\n      * (these are all calculated including the tx itself)",
      "path": "src/txmempool.h",
      "position": 1,
      "original_position": 19,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "6502d30e4d8a684b93bf631424fac06aa62bb272",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "6502d30e4d8a684b93bf631424fac06aa62bb272\r\n\r\n> these are all calculated including the tx itself\r\n\r\nDon't think this was correct before or after",
      "created_at": "2025-09-15T20:42:53Z",
      "updated_at": "2025-09-15T21:05:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2350088607",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2350088607"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 441,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2350095778",
      "pull_request_review_id": 3226272301,
      "id": 2350095778,
      "node_id": "PRRC_kwDOABII586ME52i",
      "diff_hunk": "@@ -323,33 +323,12 @@ void CTxMemPool::removeUnchecked(txiter it, MemPoolRemovalReason reason)\n     nTransactionsUpdated++;\n }\n \n-// Calculates descendants of entry that are not already in setDescendants, and adds to\n-// setDescendants. Assumes entryit is already a tx in the mempool and CTxMemPoolEntry::m_children\n-// is correct for tx and all descendants.\n-// Also assumes that if an entry is in setDescendants already, then all\n-// in-mempool descendants of it are already in setDescendants as well, so that we\n-// can save time by not iterating over those entries.\n+// Calculates descendants of given entry and adds to setDescendants.\n void CTxMemPool::CalculateDescendants(txiter entryit, setEntries& setDescendants) const\n {\n-    setEntries stage;\n-    if (setDescendants.count(entryit) == 0) {\n-        stage.insert(entryit);\n-    }\n-    // Traverse down the children of entry, only adding children that are not\n-    // accounted for in setDescendants already (because those children have either\n-    // already been walked, or will be walked in this iteration).\n-    while (!stage.empty()) {\n-        txiter it = *stage.begin();\n-        setDescendants.insert(it);\n-        stage.erase(it);\n-\n-        const CTxMemPoolEntry::Children& children = it->GetMemPoolChildrenConst();\n-        for (const CTxMemPoolEntry& child : children) {\n-            txiter childiter = mapTx.iterator_to(child);\n-            if (!setDescendants.count(childiter)) {\n-                stage.insert(childiter);\n-            }\n-        }\n+    auto descendants = m_txgraph->GetDescendants(*entryit, /*main_only=*/true);",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 32,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "b526fd4a3ae637ffc0c13353e1f55d690209fff7",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "b526fd4a3ae637ffc0c13353e1f55d690209fff7\r\n\r\navoid the temporary variable by inlining it in the for loop directly?",
      "created_at": "2025-09-15T20:46:44Z",
      "updated_at": "2025-09-15T21:05:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2350095778",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2350095778"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 329,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2350119542",
      "pull_request_review_id": 3226272301,
      "id": 2350119542,
      "node_id": "PRRC_kwDOABII586ME_p2",
      "diff_hunk": "@@ -957,28 +957,24 @@ void CTxMemPool::SetLoadTried(bool load_tried)\n std::vector<CTxMemPool::txiter> CTxMemPool::GatherClusters(const std::vector<Txid>& txids) const\n {\n     AssertLockHeld(cs);\n-    std::vector<txiter> clustered_txs{GetIterVec(txids)};\n-    // Use epoch: visiting an entry means we have added it to the clustered_txs vector. It does not\n-    // necessarily mean the entry has been processed.\n-    WITH_FRESH_EPOCH(m_epoch);\n-    for (const auto& it : clustered_txs) {\n-        visited(it);\n-    }\n-    // i = index of where the list of entries to process starts\n-    for (size_t i{0}; i < clustered_txs.size(); ++i) {\n-        // DoS protection: if there are 500 or more entries to process, just quit.\n-        if (clustered_txs.size() > 500) return {};\n-        const txiter& tx_iter = clustered_txs.at(i);\n-        for (const auto& entries : {tx_iter->GetMemPoolParentsConst(), tx_iter->GetMemPoolChildrenConst()}) {\n-            for (const CTxMemPoolEntry& entry : entries) {\n-                const auto entry_it = mapTx.iterator_to(entry);\n-                if (!visited(entry_it)) {\n-                    clustered_txs.push_back(entry_it);\n+\n+    std::vector<CTxMemPool::txiter> ret;\n+    std::set<const CTxMemPoolEntry*> unique_cluster_representatives;\n+    for (auto txid : txids) {\n+        auto it = mapTx.find(txid);\n+        if (it != mapTx.end()) {\n+            auto cluster = m_txgraph->GetCluster(*it, true);\n+            if (unique_cluster_representatives.insert(static_cast<const CTxMemPoolEntry*>(&(**cluster.begin()))).second) {\n+                for (auto tx : cluster) {\n+                    ret.emplace_back(mapTx.iterator_to(static_cast<const CTxMemPoolEntry&>(*tx)));\n                 }\n             }\n         }\n     }\n-    return clustered_txs;\n+    if (ret.size() > 500) {",
      "path": "src/txmempool.cpp",
      "position": 1056,
      "original_position": 36,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "65eaf2738ac88d3f6e7418734c8eebe1f40609ec",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "65eaf2738ac88d3f6e7418734c8eebe1f40609ec\r\n\r\nThis check should be in the loop if it's meant to be a CPU DoS protection",
      "created_at": "2025-09-15T20:58:56Z",
      "updated_at": "2025-09-15T21:05:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2350119542",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2350119542"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 918,
      "original_line": 918,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2353518252",
      "pull_request_review_id": 3231501314,
      "id": 2353518252,
      "node_id": "PRRC_kwDOABII586MR9as",
      "diff_hunk": "@@ -952,12 +952,7 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n \n     ws.m_iters_conflicting = m_pool.GetIterSet(ws.m_conflicts);\n \n-    // Calculate in-mempool ancestors, up to a limit.\n-    if (auto ancestors{m_subpackage.m_changeset->CalculateMemPoolAncestors(ws.m_tx_handle)}) {\n-        ws.m_ancestors = std::move(*ancestors);\n-    } else {\n-        return state.Invalid(TxValidationResult::TX_MEMPOOL_POLICY, \"too-long-mempool-chain\", util::ErrorString(ancestors).original);\n-    }\n+    ws.m_ancestors = m_subpackage.m_changeset->CalculateMemPoolAncestors(ws.m_tx_handle);",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 10,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "52fe9997dfd029606cb17b471b82cabb53535961",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "6000fc8c3fcc0446b3665f7fccf102068919fa3c\r\n\r\nDidn't nail down exactly when this would become a concern, but do note that this call can trigger `tx.vin.size()` number staged parents and `GetAncestors` calls based on those parents.\r\n\r\nThink this is potentially a huge number of clusters with each up to 64 transactions at a time.",
      "created_at": "2025-09-16T19:56:05Z",
      "updated_at": "2025-09-16T19:56:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2353518252",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2353518252"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 955,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2353702784",
      "pull_request_review_id": 3231768178,
      "id": 2353702784,
      "node_id": "PRRC_kwDOABII586MSqeA",
      "diff_hunk": "@@ -14,7 +14,7 @@\n #ifndef BITCOIN_TXGRAPH_H\n #define BITCOIN_TXGRAPH_H\n \n-static constexpr unsigned MAX_CLUSTER_COUNT_LIMIT{64};\n+static constexpr unsigned MAX_CLUSTER_COUNT_LIMIT{201};",
      "path": "src/txgraph.h",
      "position": 1,
      "original_position": 5,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "34251141eca785578a0b2ca6d1c0932d34b2418d",
      "in_reply_to_id": 2319721247,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "After reviewing the mempool eviction unit test that was failing in an intermediate commit, I ended up reworking the test altogether, so this should be better now.",
      "created_at": "2025-09-16T21:29:52Z",
      "updated_at": "2025-09-16T21:29:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2353702784",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2353702784"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": 17,
      "start_side": "LEFT",
      "line": null,
      "original_line": 17,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2353704384",
      "pull_request_review_id": 3231770127,
      "id": 2353704384,
      "node_id": "PRRC_kwDOABII586MSq3A",
      "diff_hunk": "@@ -845,7 +827,10 @@ std::vector<CTxMemPool::indexed_transaction_set::const_iterator> CTxMemPool::Get\n     for (indexed_transaction_set::iterator mi = mapTx.begin(); mi != mapTx.end(); ++mi) {\n         iters.push_back(mi);\n     }\n-    std::sort(iters.begin(), iters.end(), DepthAndScoreComparator());\n+    std::sort(iters.begin(), iters.end(), [this](const CTxMemPool::indexed_transaction_set::const_iterator& a, const CTxMemPool::indexed_transaction_set::const_iterator& b) {\n+        LOCK(this->cs); // TODO: this is unnecessary, to quiet a compiler warning",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 65,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "7f44c6d9893df97bb413e01aa737028cbe52ce75",
      "in_reply_to_id": 2328805583,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Took this patch, thanks.",
      "created_at": "2025-09-16T21:30:49Z",
      "updated_at": "2025-09-16T21:30:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2353704384",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2353704384"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 537,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2356170332",
      "pull_request_review_id": 3235420597,
      "id": 2356170332,
      "node_id": "PRRC_kwDOABII586McE5c",
      "diff_hunk": "@@ -1464,6 +1356,12 @@ MempoolAcceptResult MemPoolAccept::AcceptSingleTransaction(const CTransactionRef\n         return MempoolAcceptResult::Failure(ws.m_state);\n     }\n \n+    // Check if the transaction would exceed the cluster size limit.\n+    if (!m_subpackage.m_changeset->CheckMemPoolPolicyLimits()) {\n+        ws.m_state.Invalid(TxValidationResult::TX_MEMPOOL_POLICY, \"too-large-cluster\", \"\");\n+        return MempoolAcceptResult::Failure(ws.m_state);\n+    }\n+",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 263,
      "commit_id": "00c02b42c6199a6c46573304761056082490c7d4",
      "original_commit_id": "61f51546af33923c9e5dc9632ba5544aa853ae71",
      "in_reply_to_id": 2337076285,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Hmm, so there is a sort-of dependency between this invocation of `CheckMemPoolPolicyLimits()` and `ReplacementChecks()` -- the cluster size limit check won't be correct if we invoke it before we've added potential conflicts for removal to the changeset as well.  However, if there are conflicts for removal, then cluster size limits are checked within `ReplacementChecks()` anyway, so there's not really an issue, except that this slightly confusing and perhaps this relationship could be overlooked in the future if the behavior of `ReplacementChecks()` were modified.\r\n\r\nI think what I'll do is just move the ephemeral spends check down below this block of code.  Let me know if you think of any issues with that.",
      "created_at": "2025-09-17T17:03:44Z",
      "updated_at": "2025-09-17T17:03:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2356170332",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2356170332"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": 1359,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 1370,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2356226958",
      "pull_request_review_id": 3235500444,
      "id": 2356226958,
      "node_id": "PRRC_kwDOABII586McSuO",
      "diff_hunk": "@@ -803,24 +803,20 @@ void CTxMemPool::check(const CCoinsViewCache& active_coins_tip, int64_t spendhei\n     assert(innerUsage == cachedInnerUsage);\n }\n \n-bool CTxMemPool::CompareDepthAndScore(const Wtxid& hasha, const Wtxid& hashb) const\n+bool CTxMemPool::CompareMiningScoreWithTopology(const Wtxid& hasha, const Wtxid& hashb) const\n {\n     /* Return `true` if hasha should be considered sooner than hashb. Namely when:\n      *   a is not in the mempool, but b is\n-     *   both are in the mempool and a has fewer ancestors than b\n-     *   both are in the mempool and a has a higher score than b\n+     *   both are in the mempool and a has a higher mining score than b\n+     *   both are in the mempool and a appears before b in the same cluster\n      */\n     LOCK(cs);\n     auto j{GetIter(hashb)};\n     if (!j.has_value()) return false;\n     auto i{GetIter(hasha)};\n     if (!i.has_value()) return true;\n-    uint64_t counta = i.value()->GetCountWithAncestors();\n-    uint64_t countb = j.value()->GetCountWithAncestors();\n-    if (counta == countb) {\n-        return CompareTxMemPoolEntryByScore()(*i.value(), *j.value());\n-    }\n-    return counta < countb;\n+\n+    return m_txgraph->CompareMainOrder(*i.value(), *j.value()) == std::strong_ordering::less ? true : false;",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 26,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "f172ac5e6c37f446bc3c38419cf40f3adac3ddd8",
      "in_reply_to_id": 2345024271,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Thanks, I'm taking this change.",
      "created_at": "2025-09-17T17:25:38Z",
      "updated_at": "2025-09-17T17:25:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2356226958",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2356226958"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 819,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2359339020",
      "pull_request_review_id": 3239786701,
      "id": 2359339020,
      "node_id": "PRRC_kwDOABII586MoKgM",
      "diff_hunk": "@@ -222,14 +222,14 @@ std::optional<std::pair<std::string, CTransactionRef>> SingleTRUCChecks(const CT\n         const bool child_will_be_replaced = !children.empty() &&\n             std::any_of(children.cbegin(), children.cend(),\n                 [&direct_conflicts](const CTxMemPoolEntry& child){return direct_conflicts.count(child.GetTx().GetHash()) > 0;});\n-        if (parent_entry->GetCountWithDescendants() + 1 > TRUC_DESCENDANT_LIMIT && !child_will_be_replaced) {\n+        if (pool.GetNumDescendants(parent_entry) + 1 > TRUC_DESCENDANT_LIMIT && !child_will_be_replaced) {\n             // Allow sibling eviction for TRUC transaction: if another child already exists, even if\n             // we don't conflict inputs with it, consider evicting it under RBF rules. We rely on TRUC rules\n             // only permitting 1 descendant, as otherwise we would need to have logic for deciding\n             // which descendant to evict. Skip if this isn't true, e.g. if the transaction has\n             // multiple children or the sibling also has descendants due to a reorg.\n-            const bool consider_sibling_eviction{parent_entry->GetCountWithDescendants() == 2 &&\n-                children.begin()->get().GetCountWithAncestors() == 2};\n+            const bool consider_sibling_eviction{pool.GetNumDescendants(parent_entry) == 2 &&\n+                pool.GetNumDescendants(children.begin()->get()) == 1};",
      "path": "src/policy/truc_policy.cpp",
      "position": 1,
      "original_position": 41,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "5de7f1378a3146368975c10511dfec086d522ff4",
      "in_reply_to_id": 2345144877,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Looks like this was me just flubbing with the conversion of `GetCountWithAncestors()` to `GetNumDescendants()` instead of `GetNumAncestors()`?  I'll just make that switch for now, rather than try to re-write this code using `GetCluster()`, which I'd rather save for a future PR at this point.\r\n\r\nI also don't want to introduce a behavior change here, but as an aside I was surprised that no test failed with this mistake, and when looking at the original PR to refresh my memory I found this comment that I had made (hah!): https://github.com/bitcoin/bitcoin/pull/29306#discussion_r1504990413.",
      "created_at": "2025-09-18T13:33:29Z",
      "updated_at": "2025-09-18T13:33:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2359339020",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2359339020"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 232,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2359350996",
      "pull_request_review_id": 3239801309,
      "id": 2359350996,
      "node_id": "PRRC_kwDOABII586MoNbU",
      "diff_hunk": "@@ -222,14 +222,14 @@ std::optional<std::pair<std::string, CTransactionRef>> SingleTRUCChecks(const CT\n         const bool child_will_be_replaced = !children.empty() &&\n             std::any_of(children.cbegin(), children.cend(),\n                 [&direct_conflicts](const CTxMemPoolEntry& child){return direct_conflicts.count(child.GetTx().GetHash()) > 0;});\n-        if (parent_entry->GetCountWithDescendants() + 1 > TRUC_DESCENDANT_LIMIT && !child_will_be_replaced) {\n+        if (pool.GetNumDescendants(parent_entry) + 1 > TRUC_DESCENDANT_LIMIT && !child_will_be_replaced) {\n             // Allow sibling eviction for TRUC transaction: if another child already exists, even if\n             // we don't conflict inputs with it, consider evicting it under RBF rules. We rely on TRUC rules\n             // only permitting 1 descendant, as otherwise we would need to have logic for deciding\n             // which descendant to evict. Skip if this isn't true, e.g. if the transaction has\n             // multiple children or the sibling also has descendants due to a reorg.\n-            const bool consider_sibling_eviction{parent_entry->GetCountWithDescendants() == 2 &&\n-                children.begin()->get().GetCountWithAncestors() == 2};\n+            const bool consider_sibling_eviction{pool.GetNumDescendants(parent_entry) == 2 &&\n+                pool.GetNumDescendants(children.begin()->get()) == 1};",
      "path": "src/policy/truc_policy.cpp",
      "position": 1,
      "original_position": 41,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "5de7f1378a3146368975c10511dfec086d522ff4",
      "in_reply_to_id": 2345144877,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "didnt you nuke GetNumAncestors?",
      "created_at": "2025-09-18T13:35:48Z",
      "updated_at": "2025-09-18T13:35:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2359350996",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2359350996"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 232,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2359615241",
      "pull_request_review_id": 3240130406,
      "id": 2359615241,
      "node_id": "PRRC_kwDOABII586MpN8J",
      "diff_hunk": "@@ -606,8 +596,8 @@ class MemPoolAccept\n     /**\n      * Submission of a subpackage.\n      * If subpackage size == 1, calls AcceptSingleTransaction() with adjusted ATMPArgs to avoid\n-     * package policy restrictions like no CPFP carve out (PackageMempoolChecks)\n-     * and creates a PackageMempoolAcceptResult wrapping the result.\n+     * package policy restrictions like disabled sibling eviction and",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 75,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "cbcfdf4cb0ef05773bf430ebf6beafc59c1c7bc6",
      "in_reply_to_id": 2345196854,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Happy to clear this comment up to get rid of double-negatives, but just to make sure I've got this right:\r\n *  AcceptSubPackage() will, in the case of single transaction acceptance, enable sibling eviction, right?\r\n *  And in package validation, sibling eviction is disabled?",
      "created_at": "2025-09-18T14:30:10Z",
      "updated_at": "2025-09-18T14:30:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2359615241",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2359615241"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 599,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2359689084",
      "pull_request_review_id": 3240231801,
      "id": 2359689084,
      "node_id": "PRRC_kwDOABII586Mpf98",
      "diff_hunk": "@@ -606,8 +596,8 @@ class MemPoolAccept\n     /**\n      * Submission of a subpackage.\n      * If subpackage size == 1, calls AcceptSingleTransaction() with adjusted ATMPArgs to avoid\n-     * package policy restrictions like no CPFP carve out (PackageMempoolChecks)\n-     * and creates a PackageMempoolAcceptResult wrapping the result.\n+     * package policy restrictions like disabled sibling eviction and",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 75,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "cbcfdf4cb0ef05773bf430ebf6beafc59c1c7bc6",
      "in_reply_to_id": 2345196854,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "correct",
      "created_at": "2025-09-18T14:46:15Z",
      "updated_at": "2025-09-18T14:46:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2359689084",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2359689084"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 599,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2359723768",
      "pull_request_review_id": 3240273613,
      "id": 2359723768,
      "node_id": "PRRC_kwDOABII586Mpob4",
      "diff_hunk": "@@ -450,14 +439,10 @@ class CTxMemPool\n      * (these are all calculated including the tx itself)",
      "path": "src/txmempool.h",
      "position": 1,
      "original_position": 19,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "6502d30e4d8a684b93bf631424fac06aa62bb272",
      "in_reply_to_id": 2350088607,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Yeah the limits that were previously enforced by earlier versions of this function would be calculated including the tx itself, but not the ancestor set.  Thanks for catching.",
      "created_at": "2025-09-18T14:53:53Z",
      "updated_at": "2025-09-18T14:53:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2359723768",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2359723768"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 441,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2359774840",
      "pull_request_review_id": 3240340969,
      "id": 2359774840,
      "node_id": "PRRC_kwDOABII586Mp054",
      "diff_hunk": "@@ -957,28 +957,24 @@ void CTxMemPool::SetLoadTried(bool load_tried)\n std::vector<CTxMemPool::txiter> CTxMemPool::GatherClusters(const std::vector<Txid>& txids) const\n {\n     AssertLockHeld(cs);\n-    std::vector<txiter> clustered_txs{GetIterVec(txids)};\n-    // Use epoch: visiting an entry means we have added it to the clustered_txs vector. It does not\n-    // necessarily mean the entry has been processed.\n-    WITH_FRESH_EPOCH(m_epoch);\n-    for (const auto& it : clustered_txs) {\n-        visited(it);\n-    }\n-    // i = index of where the list of entries to process starts\n-    for (size_t i{0}; i < clustered_txs.size(); ++i) {\n-        // DoS protection: if there are 500 or more entries to process, just quit.\n-        if (clustered_txs.size() > 500) return {};\n-        const txiter& tx_iter = clustered_txs.at(i);\n-        for (const auto& entries : {tx_iter->GetMemPoolParentsConst(), tx_iter->GetMemPoolChildrenConst()}) {\n-            for (const CTxMemPoolEntry& entry : entries) {\n-                const auto entry_it = mapTx.iterator_to(entry);\n-                if (!visited(entry_it)) {\n-                    clustered_txs.push_back(entry_it);\n+\n+    std::vector<CTxMemPool::txiter> ret;\n+    std::set<const CTxMemPoolEntry*> unique_cluster_representatives;\n+    for (auto txid : txids) {\n+        auto it = mapTx.find(txid);\n+        if (it != mapTx.end()) {\n+            auto cluster = m_txgraph->GetCluster(*it, true);\n+            if (unique_cluster_representatives.insert(static_cast<const CTxMemPoolEntry*>(&(**cluster.begin()))).second) {\n+                for (auto tx : cluster) {\n+                    ret.emplace_back(mapTx.iterator_to(static_cast<const CTxMemPoolEntry&>(*tx)));\n                 }\n             }\n         }\n     }\n-    return clustered_txs;\n+    if (ret.size() > 500) {",
      "path": "src/txmempool.cpp",
      "position": 1056,
      "original_position": 36,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "65eaf2738ac88d3f6e7418734c8eebe1f40609ec",
      "in_reply_to_id": 2350119542,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I don't think we need the cpu protection now that we're using txgraph to do things (versus all the pointer chasing that would happen before), and only left the 500 size limit to preserve existing behavior.  But I can move this back into the for-loop if people have concerns.  \r\n\r\nI believe that after cluster mempool, mini miner can be reworked to eliminate this function altogether.  With the disclaimer that I haven't thought about it in a while, I put together a branch demonstrating this a while back: https://github.com/bitcoin/bitcoin/commit/d24f02699ec4af215a4ffae3a2ae2457f71bf93f",
      "created_at": "2025-09-18T15:04:48Z",
      "updated_at": "2025-09-18T15:04:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2359774840",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2359774840"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 918,
      "original_line": 918,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2365588805",
      "pull_request_review_id": 3248993426,
      "id": 2365588805,
      "node_id": "PRRC_kwDOABII586NAAVF",
      "diff_hunk": "@@ -952,12 +952,7 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n \n     ws.m_iters_conflicting = m_pool.GetIterSet(ws.m_conflicts);\n \n-    // Calculate in-mempool ancestors, up to a limit.\n-    if (auto ancestors{m_subpackage.m_changeset->CalculateMemPoolAncestors(ws.m_tx_handle)}) {\n-        ws.m_ancestors = std::move(*ancestors);\n-    } else {\n-        return state.Invalid(TxValidationResult::TX_MEMPOOL_POLICY, \"too-long-mempool-chain\", util::ErrorString(ancestors).original);\n-    }\n+    ws.m_ancestors = m_subpackage.m_changeset->CalculateMemPoolAncestors(ws.m_tx_handle);",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 10,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "52fe9997dfd029606cb17b471b82cabb53535961",
      "in_reply_to_id": 2353518252,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Good catch -- I'm working on a solution to this, possibly involving a more extensive rewrite of the TRUC checks (to not need parents/ancestors explicitly calculated) and the RBF checks (to not require ancestors to be calculated before we verify that the cluster size limits are respected). ",
      "created_at": "2025-09-20T11:18:01Z",
      "updated_at": "2025-09-20T11:18:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2365588805",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2365588805"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 955,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2367465700",
      "pull_request_review_id": 3251677624,
      "id": 2367465700,
      "node_id": "PRRC_kwDOABII586NHKjk",
      "diff_hunk": "@@ -222,14 +222,14 @@ std::optional<std::pair<std::string, CTransactionRef>> SingleTRUCChecks(const CT\n         const bool child_will_be_replaced = !children.empty() &&\n             std::any_of(children.cbegin(), children.cend(),\n                 [&direct_conflicts](const CTxMemPoolEntry& child){return direct_conflicts.count(child.GetTx().GetHash()) > 0;});\n-        if (parent_entry->GetCountWithDescendants() + 1 > TRUC_DESCENDANT_LIMIT && !child_will_be_replaced) {\n+        if (pool.GetNumDescendants(parent_entry) + 1 > TRUC_DESCENDANT_LIMIT && !child_will_be_replaced) {\n             // Allow sibling eviction for TRUC transaction: if another child already exists, even if\n             // we don't conflict inputs with it, consider evicting it under RBF rules. We rely on TRUC rules\n             // only permitting 1 descendant, as otherwise we would need to have logic for deciding\n             // which descendant to evict. Skip if this isn't true, e.g. if the transaction has\n             // multiple children or the sibling also has descendants due to a reorg.\n-            const bool consider_sibling_eviction{parent_entry->GetCountWithDescendants() == 2 &&\n-                children.begin()->get().GetCountWithAncestors() == 2};\n+            const bool consider_sibling_eviction{pool.GetNumDescendants(parent_entry) == 2 &&\n+                pool.GetNumDescendants(children.begin()->get()) == 1};",
      "path": "src/policy/truc_policy.cpp",
      "position": 1,
      "original_position": 41,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "5de7f1378a3146368975c10511dfec086d522ff4",
      "in_reply_to_id": 2345144877,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Brought it back in 4ead575b252becbfa18ad28a7bfa7fbf3de7129d",
      "created_at": "2025-09-22T10:19:23Z",
      "updated_at": "2025-09-22T10:19:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2367465700",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2367465700"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 232,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2367502150",
      "pull_request_review_id": 3251725322,
      "id": 2367502150,
      "node_id": "PRRC_kwDOABII586NHTdG",
      "diff_hunk": "@@ -1414,9 +1428,58 @@ void CTxMemPool::ChangeSet::StageRemoval(CTxMemPool::txiter it)\n void CTxMemPool::ChangeSet::Apply()\n {\n     LOCK(m_pool->cs);\n+    if (!m_dependencies_processed) {\n+        ProcessDependencies();\n+    }\n     m_pool->Apply(this);\n     m_to_add.clear();\n     m_to_remove.clear();\n     m_entry_vec.clear();\n     m_ancestors.clear();\n }\n+\n+std::vector<const TxGraph::Ref*> CTxMemPool::ChangeSet::CalculateParentsOf(const CTransactionRef& tx)\n+{\n+    std::vector<const TxGraph::Ref*> ret;\n+    std::set<Txid> inputs;\n+    for (const CTxIn &txin : tx->vin) {\n+        inputs.insert(txin.prevout.hash);\n+    }\n+    for (const auto &hash : inputs) {\n+        std::optional<txiter> piter = m_pool->GetIter(hash);\n+        if (piter) {\n+            ret.emplace_back(&(**piter));",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 73,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "34251141eca785578a0b2ca6d1c0932d34b2418d",
      "in_reply_to_id": 2328773469,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Squashed this commit.",
      "created_at": "2025-09-22T10:25:54Z",
      "updated_at": "2025-09-22T10:25:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2367502150",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2367502150"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1451,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2367523246",
      "pull_request_review_id": 3251755639,
      "id": 2367523246,
      "node_id": "PRRC_kwDOABII586NHYmu",
      "diff_hunk": "@@ -373,6 +373,11 @@ bool SpendsNonAnchorWitnessProg(const CTransaction& tx, const CCoinsViewCache& p\n     return false;\n }\n \n+int64_t GetSigOpsAdjustedWeight(int64_t nWeight, int64_t nSigOpCost, unsigned int bytes_per_sigop)",
      "path": "src/policy/policy.cpp",
      "position": 4,
      "original_position": 4,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "7ddce57e96aff26fb2a5abc1009e6baef24d5bab",
      "in_reply_to_id": 2330732155,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Did the latter, thanks.",
      "created_at": "2025-09-22T10:30:33Z",
      "updated_at": "2025-09-22T10:30:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2367523246",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2367523246"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 376,
      "original_line": 376,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2367557960",
      "pull_request_review_id": 3251801768,
      "id": 2367557960,
      "node_id": "PRRC_kwDOABII586NHhFI",
      "diff_hunk": "@@ -803,24 +803,20 @@ void CTxMemPool::check(const CCoinsViewCache& active_coins_tip, int64_t spendhei\n     assert(innerUsage == cachedInnerUsage);\n }\n \n-bool CTxMemPool::CompareDepthAndScore(const Wtxid& hasha, const Wtxid& hashb) const\n+bool CTxMemPool::CompareMiningScoreWithTopology(const Wtxid& hasha, const Wtxid& hashb) const\n {\n     /* Return `true` if hasha should be considered sooner than hashb. Namely when:\n      *   a is not in the mempool, but b is\n-     *   both are in the mempool and a has fewer ancestors than b\n-     *   both are in the mempool and a has a higher score than b\n+     *   both are in the mempool and a has a higher mining score than b\n+     *   both are in the mempool and a appears before b in the same cluster\n      */\n     LOCK(cs);\n     auto j{GetIter(hashb)};\n     if (!j.has_value()) return false;\n     auto i{GetIter(hasha)};\n     if (!i.has_value()) return true;\n-    uint64_t counta = i.value()->GetCountWithAncestors();\n-    uint64_t countb = j.value()->GetCountWithAncestors();\n-    if (counta == countb) {\n-        return CompareTxMemPoolEntryByScore()(*i.value(), *j.value());\n-    }\n-    return counta < countb;\n+\n+    return m_txgraph->CompareMainOrder(*i.value(), *j.value()) == std::strong_ordering::less ? true : false;",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 26,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "f172ac5e6c37f446bc3c38419cf40f3adac3ddd8",
      "in_reply_to_id": 2345024271,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done in 7cebfec8a6197a260e8c21f4637fad5d60163cfa",
      "created_at": "2025-09-22T10:36:51Z",
      "updated_at": "2025-09-22T10:36:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2367557960",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2367557960"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 819,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2367560636",
      "pull_request_review_id": 3251804898,
      "id": 2367560636,
      "node_id": "PRRC_kwDOABII586NHhu8",
      "diff_hunk": "@@ -215,6 +215,15 @@ def test_nondefault_package_limits(self):\n         assert_equal(node.getmempoolentry(tx_v3_parent_large1[\"txid\"])[\"descendantcount\"], 1)\n         self.generate(node, 1)\n \n+        self.log.info(\"Test that a decreased limitclustersize also applies to v3 parent\")\n+        self.restart_node(0, extra_args=[\"-limitclustersize=10\", \"-acceptnonstdtxn=1\"])\n+        tx_v3_parent_large2 = self.wallet.send_self_transfer(from_node=node, target_vsize=9900, version=3)\n+        tx_v3_child_large2 = self.wallet.create_self_transfer(utxo_to_spend=tx_v3_parent_large2[\"new_utxo\"], version=3)",
      "path": "test/functional/mempool_truc.py",
      "position": 1,
      "original_position": 7,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "20d6bcb2e7f2c3016280321ef31421ca4039b017",
      "in_reply_to_id": 2345163699,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Fixed -- well actually I looked at the test again and tried to improve it, because what I had done there before didn't make a lot of sense to me!  Please let me know how this looks now.",
      "created_at": "2025-09-22T10:37:26Z",
      "updated_at": "2025-09-22T10:38:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2367560636",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2367560636"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 221,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2367572401",
      "pull_request_review_id": 3251820310,
      "id": 2367572401,
      "node_id": "PRRC_kwDOABII586NHkmx",
      "diff_hunk": "@@ -606,8 +596,8 @@ class MemPoolAccept\n     /**\n      * Submission of a subpackage.\n      * If subpackage size == 1, calls AcceptSingleTransaction() with adjusted ATMPArgs to avoid\n-     * package policy restrictions like no CPFP carve out (PackageMempoolChecks)\n-     * and creates a PackageMempoolAcceptResult wrapping the result.\n+     * package policy restrictions like disabled sibling eviction and",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 75,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "cbcfdf4cb0ef05773bf430ebf6beafc59c1c7bc6",
      "in_reply_to_id": 2345196854,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Should be better now",
      "created_at": "2025-09-22T10:39:41Z",
      "updated_at": "2025-09-22T10:39:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2367572401",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2367572401"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 599,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2367581993",
      "pull_request_review_id": 3251831844,
      "id": 2367581993,
      "node_id": "PRRC_kwDOABII586NHm8p",
      "diff_hunk": "@@ -450,14 +439,10 @@ class CTxMemPool\n      * (these are all calculated including the tx itself)",
      "path": "src/txmempool.h",
      "position": 1,
      "original_position": 19,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "6502d30e4d8a684b93bf631424fac06aa62bb272",
      "in_reply_to_id": 2350088607,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Fixed now.",
      "created_at": "2025-09-22T10:41:23Z",
      "updated_at": "2025-09-22T10:41:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2367581993",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2367581993"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 441,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2367587173",
      "pull_request_review_id": 3251837426,
      "id": 2367587173,
      "node_id": "PRRC_kwDOABII586NHoNl",
      "diff_hunk": "@@ -323,33 +323,12 @@ void CTxMemPool::removeUnchecked(txiter it, MemPoolRemovalReason reason)\n     nTransactionsUpdated++;\n }\n \n-// Calculates descendants of entry that are not already in setDescendants, and adds to\n-// setDescendants. Assumes entryit is already a tx in the mempool and CTxMemPoolEntry::m_children\n-// is correct for tx and all descendants.\n-// Also assumes that if an entry is in setDescendants already, then all\n-// in-mempool descendants of it are already in setDescendants as well, so that we\n-// can save time by not iterating over those entries.\n+// Calculates descendants of given entry and adds to setDescendants.\n void CTxMemPool::CalculateDescendants(txiter entryit, setEntries& setDescendants) const\n {\n-    setEntries stage;\n-    if (setDescendants.count(entryit) == 0) {\n-        stage.insert(entryit);\n-    }\n-    // Traverse down the children of entry, only adding children that are not\n-    // accounted for in setDescendants already (because those children have either\n-    // already been walked, or will be walked in this iteration).\n-    while (!stage.empty()) {\n-        txiter it = *stage.begin();\n-        setDescendants.insert(it);\n-        stage.erase(it);\n-\n-        const CTxMemPoolEntry::Children& children = it->GetMemPoolChildrenConst();\n-        for (const CTxMemPoolEntry& child : children) {\n-            txiter childiter = mapTx.iterator_to(child);\n-            if (!setDescendants.count(childiter)) {\n-                stage.insert(childiter);\n-            }\n-        }\n+    auto descendants = m_txgraph->GetDescendants(*entryit, /*main_only=*/true);",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 32,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "b526fd4a3ae637ffc0c13353e1f55d690209fff7",
      "in_reply_to_id": 2350095778,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done.",
      "created_at": "2025-09-22T10:42:18Z",
      "updated_at": "2025-09-22T10:42:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2367587173",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2367587173"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 329,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2367627572",
      "pull_request_review_id": 3251881638,
      "id": 2367627572,
      "node_id": "PRRC_kwDOABII586NHyE0",
      "diff_hunk": "@@ -952,12 +952,7 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n \n     ws.m_iters_conflicting = m_pool.GetIterSet(ws.m_conflicts);\n \n-    // Calculate in-mempool ancestors, up to a limit.\n-    if (auto ancestors{m_subpackage.m_changeset->CalculateMemPoolAncestors(ws.m_tx_handle)}) {\n-        ws.m_ancestors = std::move(*ancestors);\n-    } else {\n-        return state.Invalid(TxValidationResult::TX_MEMPOOL_POLICY, \"too-long-mempool-chain\", util::ErrorString(ancestors).original);\n-    }\n+    ws.m_ancestors = m_subpackage.m_changeset->CalculateMemPoolAncestors(ws.m_tx_handle);",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 10,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "52fe9997dfd029606cb17b471b82cabb53535961",
      "in_reply_to_id": 2353518252,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I added a commit to the end of this PR that should fix this issue.  As I was working on this, I was thinking about your comment above about reworking the TRUC checks to just grab the clusters it needs directly from txgraph.  The issue with that in the way our code works right now is that we can't fully realize our staging clusters until we've added all the transactions, applied dependencies, and staged all the RBF removals.\r\n\r\nIf we went ahead and imposed a topology requirement on transaction packages so that we know they're staged for addition in a topologically valid order, then we could do a bit better by applying dependencies as we go, so that we could try to look at staging clusters as we go as well.  However I think that is also confusing (in the same way that our existing validation logic is a bit confusing), compared with if we were able to stage all additions and removals up front, and then work on the resulting staging clusters.  Doing that would require a bigger overhaul of the logic in validation.cpp, which I didn't want to tackle just yet.  \r\n\r\nBut if anyone sees a clean way to do things that is better than what I'm proposing so far, please let me know.",
      "created_at": "2025-09-22T10:50:03Z",
      "updated_at": "2025-09-22T10:50:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2367627572",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2367627572"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 955,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2369478308",
      "pull_request_review_id": 3254129132,
      "id": 2369478308,
      "node_id": "PRRC_kwDOABII586NO16k",
      "diff_hunk": "@@ -1340,14 +1362,6 @@ MempoolAcceptResult MemPoolAccept::AcceptSingleTransaction(const CTransactionRef\n         return MempoolAcceptResult::Failure(ws.m_state);\n     }\n \n-    if (m_subpackage.m_rbf && !ReplacementChecks(ws)) {\n-        if (ws.m_state.GetResult() == TxValidationResult::TX_RECONSIDERABLE) {\n-            // Failed for incentives-based fee reasons. Provide the effective feerate and which tx was included.\n-            return MempoolAcceptResult::FeeFailure(ws.m_state, CFeeRate(ws.m_modified_fees, ws.m_vsize), single_wtxid);\n-        }\n-        return MempoolAcceptResult::Failure(ws.m_state);\n-    }\n-\n     // Check if the transaction would exceed the cluster size limit.\n     if (!m_subpackage.m_changeset->CheckMemPoolPolicyLimits()) {",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 122,
      "commit_id": "00c02b42c6199a6c46573304761056082490c7d4",
      "original_commit_id": "00c02b42c6199a6c46573304761056082490c7d4",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "as of \"Rework RBF and TRUC validation\" this check is now redundant I believe",
      "created_at": "2025-09-22T17:09:58Z",
      "updated_at": "2025-09-22T17:41:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2369478308",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2369478308"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1366,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2369521026",
      "pull_request_review_id": 3254129132,
      "id": 2369521026,
      "node_id": "PRRC_kwDOABII586NPAWC",
      "diff_hunk": "@@ -1331,6 +1322,37 @@ MempoolAcceptResult MemPoolAccept::AcceptSingleTransaction(const CTransactionRef\n         return MempoolAcceptResult::Failure(ws.m_state);\n     }\n \n+    if (m_subpackage.m_rbf && !ReplacementChecks(ws)) {\n+        if (ws.m_state.GetResult() == TxValidationResult::TX_RECONSIDERABLE) {\n+            // Failed for incentives-based fee reasons. Provide the effective feerate and which tx was included.\n+            return MempoolAcceptResult::FeeFailure(ws.m_state, CFeeRate(ws.m_modified_fees, ws.m_vsize), single_wtxid);\n+        }\n+        return MempoolAcceptResult::Failure(ws.m_state);\n+    }\n+\n+    // Check if the transaction would exceed the cluster size limit.\n+    if (!m_subpackage.m_changeset->CheckMemPoolPolicyLimits()) {\n+        ws.m_state.Invalid(TxValidationResult::TX_MEMPOOL_POLICY, \"too-large-cluster\", \"\");\n+        return MempoolAcceptResult::Failure(ws.m_state);\n+    }\n+",
      "path": "src/validation.cpp",
      "position": 330,
      "original_position": 88,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "00c02b42c6199a6c46573304761056082490c7d4",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "00c02b42c6199a6c46573304761056082490c7d4\r\n\r\nWhile we're here: Suggestion to make it more clear as to the roles of the various TRUC checks and that everything works once dependencies are attached.\r\n\r\n```Suggestion\r\n    // Either sibling eviction was needed, or package based check should always pass for single tx given SingleTRUCChecks already passed\r\n    Assume(ws.m_sibling_eviction || !PackageTRUCChecks(m_pool, ws.m_ptx, ws.m_vsize, {ws.m_ptx}, ws.m_parents));\r\n```",
      "created_at": "2025-09-22T17:21:07Z",
      "updated_at": "2025-09-22T17:41:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2369521026",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2369521026"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1337,
      "original_line": 1337,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2369593431",
      "pull_request_review_id": 3254129132,
      "id": 2369593431,
      "node_id": "PRRC_kwDOABII586NPSBX",
      "diff_hunk": "@@ -952,12 +952,7 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n \n     ws.m_iters_conflicting = m_pool.GetIterSet(ws.m_conflicts);\n \n-    // Calculate in-mempool ancestors, up to a limit.\n-    if (auto ancestors{m_subpackage.m_changeset->CalculateMemPoolAncestors(ws.m_tx_handle)}) {\n-        ws.m_ancestors = std::move(*ancestors);\n-    } else {\n-        return state.Invalid(TxValidationResult::TX_MEMPOOL_POLICY, \"too-long-mempool-chain\", util::ErrorString(ancestors).original);\n-    }\n+    ws.m_ancestors = m_subpackage.m_changeset->CalculateMemPoolAncestors(ws.m_tx_handle);",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 10,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "52fe9997dfd029606cb17b471b82cabb53535961",
      "in_reply_to_id": 2353518252,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "re:TRUC checks I agree after some thought that txgraph-based checking is too difficult to do, at least for now. I can foresee some weird complications and I'm unsure I could even describe which series of steps would be correct vs our more bespoke approach currently which sidesteps it.\r\n\r\nRe-arrangement of checks seems correct, will take a fresh look at the approach soon.\r\n\r\nrelated: Documentation for `PreChecks` needs to be updated as it does not check package(cluster) limits any longer aside from TRUC checks.\r\n\r\n",
      "created_at": "2025-09-22T17:40:55Z",
      "updated_at": "2025-09-22T17:42:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2369593431",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2369593431"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 955,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2376540950",
      "pull_request_review_id": 3263960340,
      "id": 2376540950,
      "node_id": "PRRC_kwDOABII586NpyMW",
      "diff_hunk": "@@ -1331,6 +1322,37 @@ MempoolAcceptResult MemPoolAccept::AcceptSingleTransaction(const CTransactionRef\n         return MempoolAcceptResult::Failure(ws.m_state);\n     }\n \n+    if (m_subpackage.m_rbf && !ReplacementChecks(ws)) {\n+        if (ws.m_state.GetResult() == TxValidationResult::TX_RECONSIDERABLE) {\n+            // Failed for incentives-based fee reasons. Provide the effective feerate and which tx was included.\n+            return MempoolAcceptResult::FeeFailure(ws.m_state, CFeeRate(ws.m_modified_fees, ws.m_vsize), single_wtxid);\n+        }\n+        return MempoolAcceptResult::Failure(ws.m_state);\n+    }\n+\n+    // Check if the transaction would exceed the cluster size limit.\n+    if (!m_subpackage.m_changeset->CheckMemPoolPolicyLimits()) {\n+        ws.m_state.Invalid(TxValidationResult::TX_MEMPOOL_POLICY, \"too-large-cluster\", \"\");\n+        return MempoolAcceptResult::Failure(ws.m_state);\n+    }\n+",
      "path": "src/validation.cpp",
      "position": 330,
      "original_position": 88,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "00c02b42c6199a6c46573304761056082490c7d4",
      "in_reply_to_id": 2369521026,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This fails `test_unspent_ephemeral` for me when applied on 00c02b42c61",
      "created_at": "2025-09-24T17:35:10Z",
      "updated_at": "2025-09-24T17:35:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2376540950",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2376540950"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1337,
      "original_line": 1337,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2376581403",
      "pull_request_review_id": 3264013035,
      "id": 2376581403,
      "node_id": "PRRC_kwDOABII586Np8Eb",
      "diff_hunk": "@@ -1331,6 +1322,37 @@ MempoolAcceptResult MemPoolAccept::AcceptSingleTransaction(const CTransactionRef\n         return MempoolAcceptResult::Failure(ws.m_state);\n     }\n \n+    if (m_subpackage.m_rbf && !ReplacementChecks(ws)) {\n+        if (ws.m_state.GetResult() == TxValidationResult::TX_RECONSIDERABLE) {\n+            // Failed for incentives-based fee reasons. Provide the effective feerate and which tx was included.\n+            return MempoolAcceptResult::FeeFailure(ws.m_state, CFeeRate(ws.m_modified_fees, ws.m_vsize), single_wtxid);\n+        }\n+        return MempoolAcceptResult::Failure(ws.m_state);\n+    }\n+\n+    // Check if the transaction would exceed the cluster size limit.\n+    if (!m_subpackage.m_changeset->CheckMemPoolPolicyLimits()) {\n+        ws.m_state.Invalid(TxValidationResult::TX_MEMPOOL_POLICY, \"too-large-cluster\", \"\");\n+        return MempoolAcceptResult::Failure(ws.m_state);\n+    }\n+",
      "path": "src/validation.cpp",
      "position": 330,
      "original_position": 88,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "00c02b42c6199a6c46573304761056082490c7d4",
      "in_reply_to_id": 2369521026,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "ah right, it will fail with in-mempool sibling because package version will simply fail when it encounters a \"parent already has child in mempool\" condition it's not meant for RBF cases",
      "created_at": "2025-09-24T17:48:33Z",
      "updated_at": "2025-09-24T17:48:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2376581403",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2376581403"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1337,
      "original_line": 1337,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2376602411",
      "pull_request_review_id": 3264040363,
      "id": 2376602411,
      "node_id": "PRRC_kwDOABII586NqBMr",
      "diff_hunk": "@@ -1440,6 +1322,37 @@ MempoolAcceptResult MemPoolAccept::AcceptSingleTransaction(const CTransactionRef\n         return MempoolAcceptResult::Failure(ws.m_state);\n     }\n \n+    if (m_subpackage.m_rbf && !ReplacementChecks(ws)) {\n+        if (ws.m_state.GetResult() == TxValidationResult::TX_RECONSIDERABLE) {\n+            // Failed for incentives-based fee reasons. Provide the effective feerate and which tx was included.\n+            return MempoolAcceptResult::FeeFailure(ws.m_state, CFeeRate(ws.m_modified_fees, ws.m_vsize), single_wtxid);\n+        }\n+        return MempoolAcceptResult::Failure(ws.m_state);\n+    }\n+\n+    // Check if the transaction would exceed the cluster size limit.\n+    if (!m_subpackage.m_changeset->CheckMemPoolPolicyLimits()) {",
      "path": "src/validation.cpp",
      "position": 326,
      "original_position": 325,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "00c02b42c6199a6c46573304761056082490c7d4",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Noting that this check is redundant with `ReplacementChecks`, since `CalculateChunksForRBF` also calls it before calculating the feerate diagram. I think checking twice is fine, but that one has a slightly different error message that should be unified imo. See this test:\r\n\r\n```\r\ndiff --git a/test/functional/mempool_cluster.py b/test/functional/mempool_cluster.py\r\nindex 3da8b477a2f..8bcc9b2fe65 100755\r\n--- a/test/functional/mempool_cluster.py\r\n+++ b/test/functional/mempool_cluster.py\r\n@@ -4,6 +4,11 @@\r\n # file COPYING or http://www.opensource.org/licenses/mit-license.php.\r\n \"\"\"Test cluster mempool accessors and limits\"\"\"\r\n \r\n+from decimal import Decimal\r\n+\r\n+from test_framework.messages import (\r\n+    COIN,\r\n+)\r\n from test_framework.test_framework import BitcoinTestFramework\r\n from test_framework.wallet import (\r\n     MiniWallet,\r\n@@ -22,6 +27,7 @@ class MempoolClusterTest(BitcoinTestFramework):\r\n         node = self.nodes[0]\r\n         self.wallet = MiniWallet(node)\r\n \r\n+        self.log.info(\"Test that cluster count limit is enforced\")\r\n         node = self.nodes[0]\r\n         parent_tx = self.wallet.send_self_transfer(from_node=node)\r\n         utxo_to_spend = parent_tx[\"new_utxo\"]\r\n@@ -54,6 +60,19 @@ class MempoolClusterTest(BitcoinTestFramework):\r\n         bad_tx = self.wallet.create_self_transfer(utxo_to_spend=utxo_to_spend)\r\n         assert_raises_rpc_error(-26, \"too-large-cluster\", node.sendrawtransaction, bad_tx[\"hex\"])\r\n \r\n+        self.log.info(\"Test that cluster count limit is enforced during replacement\")\r\n+        utxo_to_double_spend = self.wallet.get_utxo(confirmed_only=True)\r\n+        fee = Decimal(\"0.000001\")\r\n+        tx_to_replace = self.wallet.create_self_transfer(utxo_to_spend=utxo_to_double_spend, fee=fee)\r\n+        node.sendrawtransaction(tx_to_replace[\"hex\"])\r\n+\r\n+        bad_tx_also_replacement = self.wallet.create_self_transfer_multi(\r\n+            utxos_to_spend=[utxo_to_spend, utxo_to_double_spend],\r\n+            fee_per_output=int(fee * COIN * 5),\r\n+        )\r\n+        # Actually, the error is replacement-failed, cluster size limit exceeded (from CalculateChunksForRBF)\r\n+        assert_raises_rpc_error(-26, \"too-large-cluster\", node.sendrawtransaction, bad_tx_also_replacement[\"hex\"])\r\n+\r\n         # TODO: verify that the size limits are also enforced.\r\n         # TODO: add tests that exercise rbf, package submission, and package\r\n         # rbf and verify that cluster limits are enforced.\r\n\r\n```",
      "created_at": "2025-09-24T17:54:15Z",
      "updated_at": "2025-09-24T17:54:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2376602411",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2376602411"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1333,
      "original_line": 1333,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2376795377",
      "pull_request_review_id": 3264305239,
      "id": 2376795377,
      "node_id": "PRRC_kwDOABII586NqwTx",
      "diff_hunk": "@@ -1440,6 +1322,37 @@ MempoolAcceptResult MemPoolAccept::AcceptSingleTransaction(const CTransactionRef\n         return MempoolAcceptResult::Failure(ws.m_state);\n     }\n \n+    if (m_subpackage.m_rbf && !ReplacementChecks(ws)) {\n+        if (ws.m_state.GetResult() == TxValidationResult::TX_RECONSIDERABLE) {\n+            // Failed for incentives-based fee reasons. Provide the effective feerate and which tx was included.\n+            return MempoolAcceptResult::FeeFailure(ws.m_state, CFeeRate(ws.m_modified_fees, ws.m_vsize), single_wtxid);\n+        }\n+        return MempoolAcceptResult::Failure(ws.m_state);\n+    }\n+\n+    // Check if the transaction would exceed the cluster size limit.\n+    if (!m_subpackage.m_changeset->CheckMemPoolPolicyLimits()) {",
      "path": "src/validation.cpp",
      "position": 326,
      "original_position": 325,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "00c02b42c6199a6c46573304761056082490c7d4",
      "in_reply_to_id": 2376602411,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "pendantic: it's redundant *when an RBF is encountered*, but not otherwise and the result is cached so pretty cheap to throw around",
      "created_at": "2025-09-24T19:09:25Z",
      "updated_at": "2025-09-24T19:09:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2376795377",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2376795377"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1333,
      "original_line": 1333,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2418251935",
      "pull_request_review_id": 3321013908,
      "id": 2418251935,
      "node_id": "PRRC_kwDOABII586QI5if",
      "diff_hunk": "@@ -16,6 +16,10 @@ namespace kernel {\n  * Most of the time, this struct should be referenced as CTxMemPool::Limits.\n  */\n struct MemPoolLimits {\n+    //! The maximum number of transactions in a cluster\n+    unsigned cluster_count{DEFAULT_CLUSTER_LIMIT};\n+    //! The maximum allowed size in virtual bytes of a cluster.\n+    int64_t cluster_size_vbytes{DEFAULT_CLUSTER_SIZE_LIMIT_KVB * 1'000};\n     //! The maximum allowed number of transactions in a package including the entry and its ancestors.",
      "path": "src/kernel/mempool_limits.h",
      "position": 8,
      "original_position": 8,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "6caa4d7f4572857d36f439e383b772dd1f83c782",
      "in_reply_to_id": 2316466962,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I took a stab at eliminating `-limitancestorsize` and `-limitdescendantsize`, emitting a warning if those command line options are used, and eliminating all usages of DEFAULT_ANCESTOR_SIZE and DEFAULT_DESCENDANT_SIZE in #33591.",
      "created_at": "2025-10-10T00:42:30Z",
      "updated_at": "2025-10-10T00:42:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2418251935",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2418251935"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 23,
      "original_line": 23,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2419042265",
      "pull_request_review_id": 3322152886,
      "id": 2419042265,
      "node_id": "PRRC_kwDOABII586QL6fZ",
      "diff_hunk": "@@ -219,224 +206,90 @@ bool BlockAssembler::TestPackage(uint64_t packageSize, int64_t packageSigOpsCost\n \n // Perform transaction-level checks before adding to block:\n // - transaction finality (locktime)\n-bool BlockAssembler::TestPackageTransactions(const CTxMemPool::setEntries& package) const\n+bool BlockAssembler::TestPackageTransactions(const std::vector<const CTxMemPoolEntry *>& txs) const\n {\n-    for (CTxMemPool::txiter it : package) {\n-        if (!IsFinalTx(it->GetTx(), nHeight, m_lock_time_cutoff)) {\n+    for (auto tx : txs) {\n+        if (!IsFinalTx(tx->GetTx(), nHeight, m_lock_time_cutoff)) {\n             return false;\n         }\n     }\n     return true;\n }\n \n-void BlockAssembler::AddToBlock(CTxMemPool::txiter iter)\n+void BlockAssembler::AddToBlock(const CTxMemPoolEntry& entry)\n {\n-    pblocktemplate->block.vtx.emplace_back(iter->GetSharedTx());\n-    pblocktemplate->vTxFees.push_back(iter->GetFee());\n-    pblocktemplate->vTxSigOpsCost.push_back(iter->GetSigOpCost());\n-    nBlockWeight += iter->GetTxWeight();\n+    pblocktemplate->block.vtx.emplace_back(entry.GetSharedTx());\n+    pblocktemplate->vTxFees.push_back(entry.GetFee());\n+    pblocktemplate->vTxSigOpsCost.push_back(entry.GetSigOpCost());\n+    nBlockWeight += entry.GetTxWeight();\n     ++nBlockTx;\n-    nBlockSigOpsCost += iter->GetSigOpCost();\n-    nFees += iter->GetFee();\n-    inBlock.insert(iter->GetSharedTx()->GetHash());\n+    nBlockSigOpsCost += entry.GetSigOpCost();\n+    nFees += entry.GetFee();\n \n     if (m_options.print_modified_fee) {\n         LogPrintf(\"fee rate %s txid %s\\n\",\n-                  CFeeRate(iter->GetModifiedFee(), iter->GetTxSize()).ToString(),\n-                  iter->GetTx().GetHash().ToString());\n-    }\n-}\n-\n-/** Add descendants of given transactions to mapModifiedTx with ancestor\n- * state updated assuming given transactions are inBlock. Returns number\n- * of updated descendants. */\n-static int UpdatePackagesForAdded(const CTxMemPool& mempool,\n-                                  const CTxMemPool::setEntries& alreadyAdded,\n-                                  indexed_modified_transaction_set& mapModifiedTx) EXCLUSIVE_LOCKS_REQUIRED(mempool.cs)\n-{\n-    AssertLockHeld(mempool.cs);\n-\n-    int nDescendantsUpdated = 0;\n-    for (CTxMemPool::txiter it : alreadyAdded) {\n-        CTxMemPool::setEntries descendants;\n-        mempool.CalculateDescendants(it, descendants);\n-        // Insert all descendants (not yet in block) into the modified set\n-        for (CTxMemPool::txiter desc : descendants) {\n-            if (alreadyAdded.count(desc)) {\n-                continue;\n-            }\n-            ++nDescendantsUpdated;\n-            modtxiter mit = mapModifiedTx.find(desc);\n-            if (mit == mapModifiedTx.end()) {\n-                CTxMemPoolModifiedEntry modEntry(desc);\n-                mit = mapModifiedTx.insert(modEntry).first;\n-            }\n-            mapModifiedTx.modify(mit, update_for_parent_inclusion(it));\n-        }\n+                  CFeeRate(entry.GetModifiedFee(), entry.GetTxSize()).ToString(),\n+                  entry.GetTx().GetHash().ToString());\n     }\n-    return nDescendantsUpdated;\n-}\n-\n-void BlockAssembler::SortForBlock(const CTxMemPool::setEntries& package, std::vector<CTxMemPool::txiter>& sortedEntries)\n-{\n-    // Sort package by ancestor count\n-    // If a transaction A depends on transaction B, then A's ancestor count\n-    // must be greater than B's.  So this is sufficient to validly order the\n-    // transactions for block inclusion.\n-    sortedEntries.clear();\n-    sortedEntries.insert(sortedEntries.begin(), package.begin(), package.end());\n-    std::sort(sortedEntries.begin(), sortedEntries.end(), CompareTxIterByAncestorCount());\n }\n \n-// This transaction selection algorithm orders the mempool based\n-// on feerate of a transaction including all unconfirmed ancestors.\n-// Since we don't remove transactions from the mempool as we select them\n-// for block inclusion, we need an alternate method of updating the feerate\n-// of a transaction with its not-yet-selected ancestors as we go.\n-// This is accomplished by walking the in-mempool descendants of selected\n-// transactions and storing a temporary modified state in mapModifiedTxs.\n-// Each time through the loop, we compare the best transaction in\n-// mapModifiedTxs with the next transaction in the mempool to decide what\n-// transaction package to work on next.\n-void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpdated)\n+void BlockAssembler::addChunks()\n {\n-    const auto& mempool{*Assert(m_mempool)};\n-    LOCK(mempool.cs);\n-\n-    // mapModifiedTx will store sorted packages after they are modified\n-    // because some of their txs are already in the block\n-    indexed_modified_transaction_set mapModifiedTx;\n-    // Keep track of entries that failed inclusion, to avoid duplicate work\n-    std::set<Txid> failedTx;\n-\n-    CTxMemPool::indexed_transaction_set::index<ancestor_score>::type::iterator mi = mempool.mapTx.get<ancestor_score>().begin();\n-    CTxMemPool::txiter iter;\n-\n     // Limit the number of attempts to add transactions to the block when it is\n     // close to full; this is just a simple heuristic to finish quickly if the\n     // mempool has a lot of entries.\n     const int64_t MAX_CONSECUTIVE_FAILURES = 1000;\n     constexpr int32_t BLOCK_FULL_ENOUGH_WEIGHT_DELTA = 4000;\n     int64_t nConsecutiveFailed = 0;\n \n-    while (mi != mempool.mapTx.get<ancestor_score>().end() || !mapModifiedTx.empty()) {\n-        // First try to find a new transaction in mapTx to evaluate.\n-        //\n-        // Skip entries in mapTx that are already in a block or are present\n-        // in mapModifiedTx (which implies that the mapTx ancestor state is\n-        // stale due to ancestor inclusion in the block)\n-        // Also skip transactions that we've already failed to add. This can happen if\n-        // we consider a transaction in mapModifiedTx and it fails: we can then\n-        // potentially consider it again while walking mapTx.  It's currently\n-        // guaranteed to fail again, but as a belt-and-suspenders check we put it in\n-        // failedTx and avoid re-evaluation, since the re-evaluation would be using\n-        // cached size/sigops/fee values that are not actually correct.\n-        /** Return true if given transaction from mapTx has already been evaluated,\n-         * or if the transaction's cached data in mapTx is incorrect. */\n-        if (mi != mempool.mapTx.get<ancestor_score>().end()) {\n-            auto it = mempool.mapTx.project<0>(mi);\n-            assert(it != mempool.mapTx.end());\n-            if (mapModifiedTx.count(it) || inBlock.count(it->GetSharedTx()->GetHash()) || failedTx.count(it->GetSharedTx()->GetHash())) {\n-                ++mi;\n-                continue;\n-            }\n-        }\n-\n-        // Now that mi is not stale, determine which transaction to evaluate:\n-        // the next entry from mapTx, or the best from mapModifiedTx?\n-        bool fUsingModified = false;\n-\n-        modtxscoreiter modit = mapModifiedTx.get<ancestor_score>().begin();\n-        if (mi == mempool.mapTx.get<ancestor_score>().end()) {\n-            // We're out of entries in mapTx; use the entry from mapModifiedTx\n-            iter = modit->iter;\n-            fUsingModified = true;\n-        } else {\n-            // Try to compare the mapTx entry to the mapModifiedTx entry\n-            iter = mempool.mapTx.project<0>(mi);\n-            if (modit != mapModifiedTx.get<ancestor_score>().end() &&\n-                    CompareTxMemPoolEntryByAncestorFee()(*modit, CTxMemPoolModifiedEntry(iter))) {\n-                // The best entry in mapModifiedTx has higher score\n-                // than the one from mapTx.\n-                // Switch which transaction (package) to consider\n-                iter = modit->iter;\n-                fUsingModified = true;\n-            } else {\n-                // Either no entry in mapModifiedTx, or it's worse than mapTx.\n-                // Increment mi for the next loop iteration.\n-                ++mi;\n-            }\n-        }\n+    std::vector<CTxMemPoolEntry::CTxMemPoolEntryRef> selected_transactions;\n+    FeePerWeight chunk_feerate;\n \n-        // We skip mapTx entries that are inBlock, and mapModifiedTx shouldn't\n-        // contain anything that is inBlock.\n-        assert(!inBlock.count(iter->GetSharedTx()->GetHash()));\n-\n-        uint64_t packageSize = iter->GetSizeWithAncestors();\n-        CAmount packageFees = iter->GetModFeesWithAncestors();\n-        int64_t packageSigOpsCost = iter->GetSigOpCostWithAncestors();\n-        if (fUsingModified) {\n-            packageSize = modit->nSizeWithAncestors;\n-            packageFees = modit->nModFeesWithAncestors;\n-            packageSigOpsCost = modit->nSigOpCostWithAncestors;\n-        }\n+    chunk_feerate = m_mempool->GetBlockBuilderChunk(selected_transactions);\n+    FeePerVSize chunk_feerate_vsize = ToFeePerVSize(chunk_feerate);\n \n-        if (packageFees < m_options.blockMinFeeRate.GetFee(packageSize)) {\n-            // Everything else we might consider has a lower fee rate\n+    while (selected_transactions.size() > 0) {\n+        // Check to see if min fee rate is still respected.\n+        if (chunk_feerate.fee < m_options.blockMinFeeRate.GetFee(chunk_feerate_vsize.size)) {",
      "path": "src/node/miner.cpp",
      "position": 250,
      "original_position": 248,
      "commit_id": "d3f8b6380f165e44fa0aa5e2f2b7b75a28087b38",
      "original_commit_id": "64de3bb675e2ff3b8f0bb1de3d7680cbb2263807",
      "in_reply_to_id": 2328794751,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done in #33591 ",
      "created_at": "2025-10-10T09:17:31Z",
      "updated_at": "2025-10-10T09:17:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2419042265",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2419042265"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 256,
      "original_line": 256,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2430088556",
      "pull_request_review_id": 3336961242,
      "id": 2430088556,
      "node_id": "PRRC_kwDOABII586Q2DVs",
      "diff_hunk": "@@ -20,7 +20,7 @@\n \n # custom limits for node1\n CUSTOM_ANCESTOR_LIMIT = 5\n-CUSTOM_DESCENDANT_LIMIT = 10\n+CUSTOM_DESCENDANT_LIMIT = 11",
      "path": "test/functional/mempool_packages.py",
      "position": 1,
      "original_position": 5,
      "commit_id": "57f929d743ae877e42c2b4cff502e1aade9452fd",
      "original_commit_id": "478ea2c3c7c7e766125e204cf60860e99c694613",
      "in_reply_to_id": 2331360670,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Yes I think so!",
      "created_at": "2025-10-14T18:33:17Z",
      "updated_at": "2025-10-14T18:33:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2430088556",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2430088556"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28676"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 23,
      "side": "RIGHT"
    }
  ]
}