{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713",
    "id": 2293116283,
    "node_id": "PR_kwDOABII586Iri17",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/31713",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/31713.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/31713.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31713",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31713/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
    "number": 31713,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "miniscript refactor: Remove unique_ptr-indirection",
    "user": {
      "login": "hodlinator",
      "id": 172445034,
      "node_id": "U_kgDOCkdNag",
      "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hodlinator",
      "html_url": "https://github.com/hodlinator",
      "followers_url": "https://api.github.com/users/hodlinator/followers",
      "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
      "organizations_url": "https://api.github.com/users/hodlinator/orgs",
      "repos_url": "https://api.github.com/users/hodlinator/repos",
      "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/hodlinator/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "body": "Removes one level of unnecessary indirection, which was a change that originally [aided in finding one issue](https://github.com/bitcoin/bitcoin/pull/30866#pullrequestreview-2434704657) in #30866. Simplifies the code one step further than 09a1875ad8cddeb17c19af34b8282d37fed0937e belonging to aforementioned PR.\r\n\r\nAlso adds test which verifies resistance to stack overflow when it comes to `~Node()` and `Node::Clone()`.\r\n\r\nNo observed difference when running benchmarks: ExpandDescriptor/WalletIsMineDescriptors/WalletIsMineMigratedDescriptors/WalletLoadingDescriptors.\r\n\r\nFollowup to #30866.",
    "labels": [
      {
        "id": 241832923,
        "node_id": "MDU6TGFiZWwyNDE4MzI5MjM=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Utils/log/libs",
        "name": "Utils/log/libs",
        "description": "",
        "color": "5319e7",
        "default": false
      }
    ],
    "created_at": "2025-01-22T21:16:33Z",
    "updated_at": "2026-01-28T12:14:29Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "c62428b4e78be4337004e0504d23bebe56bbc225",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "hodlinator:2024/11/miniscript_ownership",
      "ref": "2024/11/miniscript_ownership",
      "sha": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 813856282,
        "node_id": "R_kgDOMIJ2Gg",
        "name": "bitcoin",
        "full_name": "hodlinator/bitcoin",
        "owner": {
          "login": "hodlinator",
          "id": 172445034,
          "node_id": "U_kgDOCkdNag",
          "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/hodlinator",
          "html_url": "https://github.com/hodlinator",
          "followers_url": "https://api.github.com/users/hodlinator/followers",
          "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
          "organizations_url": "https://api.github.com/users/hodlinator/orgs",
          "repos_url": "https://api.github.com/users/hodlinator/repos",
          "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/hodlinator/received_events",
          "type": "User",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/hodlinator/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/hodlinator/bitcoin",
        "archive_url": "https://api.github.com/repos/hodlinator/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/hodlinator/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/hodlinator/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/hodlinator/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/hodlinator/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/hodlinator/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/hodlinator/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/hodlinator/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/hodlinator/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/hodlinator/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/hodlinator/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/hodlinator/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/hodlinator/bitcoin/events",
        "forks_url": "https://api.github.com/repos/hodlinator/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/hodlinator/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/hodlinator/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/hodlinator/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/hodlinator/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/hodlinator/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/hodlinator/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/hodlinator/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/hodlinator/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/hodlinator/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/hodlinator/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/hodlinator/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/hodlinator/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/hodlinator/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/hodlinator/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/hodlinator/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:hodlinator/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/hodlinator/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/hodlinator/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/hodlinator/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/hodlinator/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/hodlinator/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/hodlinator/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/hodlinator/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/hodlinator/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/hodlinator/bitcoin/hooks",
        "svn_url": "https://github.com/hodlinator/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 3,
        "watchers_count": 3,
        "size": 259483,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-01-28T10:19:07Z",
        "created_at": "2024-06-11T22:00:51Z",
        "updated_at": "2025-09-09T13:03:15Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "f7e88e298aed5fc31ffd0cef31e2ce9c45a0afde",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 38812,
        "stargazers_count": 87801,
        "watchers_count": 87801,
        "size": 302410,
        "default_branch": "master",
        "open_issues_count": 750,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-01-28T12:44:07Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2026-01-28T12:54:28Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 388,
    "deletions": 336,
    "changed_files": 4,
    "commits": 7,
    "review_comments": 85,
    "comments": 28
  },
  "events": [
    {
      "event": "commented",
      "id": 2608287853,
      "node_id": "IC_kwDOABII586bd1Bt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2608287853",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-22T21:16:36Z",
      "updated_at": "2026-01-24T17:29:51Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31713.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [darosior](https://github.com/bitcoin/bitcoin/pull/31713#pullrequestreview-3698889100), [l0rinc](https://github.com/bitcoin/bitcoin/pull/31713#pullrequestreview-3699540080) |\n| Stale ACK | [sipa](https://github.com/bitcoin/bitcoin/pull/31713#pullrequestreview-3553094316) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#34141](https://github.com/bitcoin/bitcoin/pull/34141) (miniscript: Use Func and Expr when parsing keys, hashes, and locktimes by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (âœ¨ experimental)\n\n\n\nPossible places where named args for integral literals may be used (e.g. `func(x, /*named_arg=*/0)` in C++, and `func(x, named_arg=0)` in Python):\n\n- to_parse.emplace_back(ParseContext::WRAPPED_EXPR, -1, -1) in src/script/miniscript.h\n- to_parse.emplace_back(ParseContext::OR_I, -1, -1) in src/script/miniscript.h\n\n\n\n<sup>2026-01-20</sup>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#issuecomment-2608287853",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31713"
    },
    {
      "event": "commented",
      "id": 2608294425,
      "node_id": "IC_kwDOABII586bd2oZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2608294425",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-22T21:20:48Z",
      "updated_at": "2025-01-22T21:20:48Z",
      "author_association": "CONTRIBUTOR",
      "body": "CC @achow101 @darosior @brunoerg from parent PR to gauge their interest.\r\n\r\nIt's unfortunate that this PR touches many lines, so if there's little support for the refactoring I'm fine with closing, or letting it linger for a while (I understand this is super-low priority). At least it helped find the issue mentioned at the top of the summary.",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#issuecomment-2608294425",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31713"
    },
    {
      "event": "mentioned",
      "id": 16035009155,
      "node_id": "MEE_lADOABII586nNm3HzwAAAAO7wtKD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16035009155",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-22T21:20:50Z"
    },
    {
      "event": "subscribed",
      "id": 16035009171,
      "node_id": "SE_lADOABII586nNm3HzwAAAAO7wtKT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16035009171",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-22T21:20:50Z"
    },
    {
      "event": "mentioned",
      "id": 16035009182,
      "node_id": "MEE_lADOABII586nNm3HzwAAAAO7wtKe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16035009182",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-22T21:20:50Z"
    },
    {
      "event": "subscribed",
      "id": 16035009192,
      "node_id": "SE_lADOABII586nNm3HzwAAAAO7wtKo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16035009192",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-22T21:20:50Z"
    },
    {
      "event": "mentioned",
      "id": 16035009200,
      "node_id": "MEE_lADOABII586nNm3HzwAAAAO7wtKw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16035009200",
      "actor": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-22T21:20:50Z"
    },
    {
      "event": "subscribed",
      "id": 16035009209,
      "node_id": "SE_lADOABII586nNm3HzwAAAAO7wtK5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16035009209",
      "actor": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-22T21:20:50Z"
    },
    {
      "event": "commented",
      "id": 2608626291,
      "node_id": "IC_kwDOABII586bfHpz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2608626291",
      "actor": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-23T01:04:21Z",
      "updated_at": "2025-01-23T01:04:21Z",
      "author_association": "MEMBER",
      "body": "CI failure looks unrelated. Could you `s/script/miniscript/` in the PR title to make it clear to reviewer this does not touch consensus critical stuff?\r\n\r\n> It's unfortunate that this PR touches many lines\r\n\r\nIt's also not a part of the codebase where i expect much churn, so it probably lowers the bar for doing something like this.",
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#issuecomment-2608626291",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31713"
    },
    {
      "event": "renamed",
      "id": 16039669648,
      "node_id": "RTE_lADOABII586nNm3HzwAAAAO8Ce-Q",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16039669648",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-23T07:51:26Z",
      "rename": {
        "from": "script refactor: Remove superfluous unique_ptr-indirection (#30866 follow-up)",
        "to": "miniscript refactor: Remove unique_ptr-indirection (#30866 follow-up)"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16039673329,
      "node_id": "HRFPE_lADOABII586nNm3HzwAAAAO8Cf3x",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16039673329",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "58e9c7ca89654abdae2e37fe848ed8afc1e250e1",
      "commit_url": "https://api.github.com/repos/hodlinator/bitcoin/commits/58e9c7ca89654abdae2e37fe848ed8afc1e250e1",
      "created_at": "2025-01-23T07:51:49Z"
    },
    {
      "event": "commented",
      "id": 2609159353,
      "node_id": "IC_kwDOABII586bhJy5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2609159353",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-23T08:33:39Z",
      "updated_at": "2025-01-23T08:33:39Z",
      "author_association": "MEMBER",
      "body": "> CI failure looks unrelated.\r\n\r\nI can't seem to find it. It would be good to always report or at least leave a comment with the log to any CI failure. Otherwise, it will remain unfixed and will just happen on another pull later on.",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#issuecomment-2609159353",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31713"
    },
    {
      "event": "commented",
      "id": 2609212276,
      "node_id": "IC_kwDOABII586bhWt0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2609212276",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-23T08:59:26Z",
      "updated_at": "2025-01-23T08:59:26Z",
      "author_association": "CONTRIBUTOR",
      "body": "> leave a comment with the log to any CI failure\r\n\r\nI think they meant the [p2p_1p1c_network](https://github.com/bitcoin/bitcoin/pull/31701) failure at https://github.com/bitcoin/bitcoin/actions/runs/12917231673/job/36023158007?pr=31713",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#issuecomment-2609212276",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31713"
    },
    {
      "event": "commented",
      "id": 2609224746,
      "node_id": "IC_kwDOABII586bhZwq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2609224746",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-23T09:05:00Z",
      "updated_at": "2025-01-23T09:05:00Z",
      "author_association": "CONTRIBUTOR",
      "body": "> I think they meant the [p2p_1p1c_network](https://github.com/bitcoin/bitcoin/pull/31701) failure at https://github.com/bitcoin/bitcoin/actions/runs/12917231673/job/36023158007?pr=31713\r\n\r\nYes, that's the one, thanks for finding it @l0rinc!\r\n\r\n> Could you `s/script/miniscript/` in the PR title to make it clear to reviewer this does not touch consensus critical stuff?\r\n\r\nUpdated PR title and commit message titles.",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#issuecomment-2609224746",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31713"
    },
    {
      "event": "mentioned",
      "id": 16040540006,
      "node_id": "MEE_lADOABII586nNm3HzwAAAAO8Fzdm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16040540006",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-23T09:05:02Z"
    },
    {
      "event": "subscribed",
      "id": 16040540027,
      "node_id": "SE_lADOABII586nNm3HzwAAAAO8Fzd7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16040540027",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-23T09:05:02Z"
    },
    {
      "event": "commented",
      "id": 2610139786,
      "node_id": "IC_kwDOABII586bk5KK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2610139786",
      "actor": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-23T15:36:59Z",
      "updated_at": "2025-01-23T15:36:59Z",
      "author_association": "MEMBER",
      "body": "From a quick skim, this looks fine to me. I wonder if @sipa has any objection to not using pointers here.\r\n\r\nLet me see if we can get the conflicts in first and then do this when nothing else is conflicting anymore.",
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#issuecomment-2610139786",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31713"
    },
    {
      "event": "mentioned",
      "id": 16045871500,
      "node_id": "MEE_lADOABII586nNm3HzwAAAAO8aJGM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16045871500",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-23T15:37:01Z"
    },
    {
      "event": "subscribed",
      "id": 16045871545,
      "node_id": "SE_lADOABII586nNm3HzwAAAAO8aJG5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16045871545",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-23T15:37:01Z"
    },
    {
      "event": "commented",
      "id": 2610443273,
      "node_id": "IC_kwDOABII586bmDQJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2610443273",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-23T17:07:38Z",
      "updated_at": "2025-01-23T17:07:38Z",
      "author_association": "MEMBER",
      "body": "Very rough-skim Concept ACK.\n\nThis will make the code diverge further from the c++ miniscript policy compiler code, but that's a bullet we already took with the shared_ptr to unique_ptr change, and it doesn't seem there is development happening on that anyway.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#issuecomment-2610443273",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31713"
    },
    {
      "event": "reviewed",
      "id": 2648300910,
      "node_id": "PRR_kwDOABII586d2d1u",
      "url": null,
      "actor": null,
      "commit_id": "58e9c7ca89654abdae2e37fe848ed8afc1e250e1",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-02-27T16:02:40Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "purpleKarrot",
        "id": 185240,
        "node_id": "MDQ6VXNlcjE4NTI0MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/185240?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/purpleKarrot",
        "html_url": "https://github.com/purpleKarrot",
        "followers_url": "https://api.github.com/users/purpleKarrot/followers",
        "following_url": "https://api.github.com/users/purpleKarrot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/purpleKarrot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/purpleKarrot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/purpleKarrot/subscriptions",
        "organizations_url": "https://api.github.com/users/purpleKarrot/orgs",
        "repos_url": "https://api.github.com/users/purpleKarrot/repos",
        "events_url": "https://api.github.com/users/purpleKarrot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/purpleKarrot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#pullrequestreview-2648300910",
      "submitted_at": "2025-02-27T16:02:40Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
    },
    {
      "event": "labeled",
      "id": 16559063851,
      "node_id": "LE_lADOABII586nNm3HzwAAAAPa_0Mr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16559063851",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-04T13:45:41Z",
      "label": {
        "name": "Utils/log/libs",
        "color": "5319e7"
      }
    },
    {
      "event": "labeled",
      "id": 16899648665,
      "node_id": "LE_lADOABII586nNm3HzwAAAAPvTCyZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16899648665",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-20T10:12:46Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16912236117,
      "node_id": "HRFPE_lADOABII586nNm3HzwAAAAPwDD5V",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16912236117",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "9ee3f45e6b0480e8295bd7294048836c828d47c8",
      "commit_url": "https://api.github.com/repos/hodlinator/bitcoin/commits/9ee3f45e6b0480e8295bd7294048836c828d47c8",
      "created_at": "2025-03-20T14:40:52Z"
    },
    {
      "event": "unlabeled",
      "id": 16914601016,
      "node_id": "UNLE_lADOABII586nNm3HzwAAAAPwMFQ4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16914601016",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-20T16:50:22Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 17211605226,
      "node_id": "LE_lADOABII586nNm3HzwAAAAQB5EDq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17211605226",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-10T18:37:43Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17233850242,
      "node_id": "HRFPE_lADOABII586nNm3HzwAAAAQDN6-C",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17233850242",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "11bae1d37511ee904a0a0176d76d60ddc61fdf48",
      "commit_url": "https://api.github.com/repos/hodlinator/bitcoin/commits/11bae1d37511ee904a0a0176d76d60ddc61fdf48",
      "created_at": "2025-04-12T08:00:45Z"
    },
    {
      "event": "unlabeled",
      "id": 17233910380,
      "node_id": "UNLE_lADOABII586nNm3HzwAAAAQDOJps",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17233910380",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-12T08:26:10Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 17463783010,
      "node_id": "LE_lADOABII586nNm3HzwAAAAQQ7C5i",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17463783010",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-29T23:03:12Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17469163844,
      "node_id": "HRFPE_lADOABII586nNm3HzwAAAAQRPklE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17469163844",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "10eed3ffab97714b870d7467ae4310d2e71fcc1e",
      "commit_url": "https://api.github.com/repos/hodlinator/bitcoin/commits/10eed3ffab97714b870d7467ae4310d2e71fcc1e",
      "created_at": "2025-04-30T08:59:04Z"
    },
    {
      "event": "unlabeled",
      "id": 17469943697,
      "node_id": "UNLE_lADOABII586nNm3HzwAAAAQRSi-R",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17469943697",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-30T09:48:58Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 17470576806,
      "node_id": "LE_lADOABII586nNm3HzwAAAAQRU9im",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17470576806",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-30T10:33:30Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2841541200,
      "node_id": "IC_kwDOABII586pXnpQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2841541200",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-30T10:33:32Z",
      "updated_at": "2025-04-30T10:33:32Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Task `tidy`: https://github.com/bitcoin/bitcoin/runs/41407555382</sub>\n<sub>LLM reason (âœ¨ experimental): The CI failure is caused by clang-tidy reporting errors related to functions being within a recursive call chain, indicating static analysis issues rather than build or test errors.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#issuecomment-2841541200",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31713"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17471939457,
      "node_id": "HRFPE_lADOABII586nNm3HzwAAAAQRaKOB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17471939457",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "d9d034ae1ccbdeecad5108b066a195a14ebb08ac",
      "commit_url": "https://api.github.com/repos/hodlinator/bitcoin/commits/d9d034ae1ccbdeecad5108b066a195a14ebb08ac",
      "created_at": "2025-04-30T12:17:38Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17472418631,
      "node_id": "HRFPE_lADOABII586nNm3HzwAAAAQRb_NH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17472418631",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "6df05ec2c2f0e013ee770c6c065540b04c90de8f",
      "commit_url": "https://api.github.com/repos/hodlinator/bitcoin/commits/6df05ec2c2f0e013ee770c6c065540b04c90de8f",
      "created_at": "2025-04-30T12:49:50Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17473975979,
      "node_id": "HRFPE_lADOABII586nNm3HzwAAAAQRh7ar",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17473975979",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "575059aef54d5929568c852aa5d9096ec23a25e8",
      "commit_url": "https://api.github.com/repos/hodlinator/bitcoin/commits/575059aef54d5929568c852aa5d9096ec23a25e8",
      "created_at": "2025-04-30T14:19:18Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17474121050,
      "node_id": "HRFPE_lADOABII586nNm3HzwAAAAQRie1a",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17474121050",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "2d54e51f54664540ac82844baacc3905116eb1bb",
      "commit_url": "https://api.github.com/repos/hodlinator/bitcoin/commits/2d54e51f54664540ac82844baacc3905116eb1bb",
      "created_at": "2025-04-30T14:26:58Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17478012766,
      "node_id": "HRFPE_lADOABII586nNm3HzwAAAAQRxU9e",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17478012766",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "97476a3adfba957e4bffa91d0d47d461725b9214",
      "commit_url": "https://api.github.com/repos/hodlinator/bitcoin/commits/97476a3adfba957e4bffa91d0d47d461725b9214",
      "created_at": "2025-04-30T18:15:14Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17478809105,
      "node_id": "HRFPE_lADOABII586nNm3HzwAAAAQR0XYR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17478809105",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "c85588dd47b0743896e4ed48cd1e59205473f451",
      "commit_url": "https://api.github.com/repos/hodlinator/bitcoin/commits/c85588dd47b0743896e4ed48cd1e59205473f451",
      "created_at": "2025-04-30T19:11:45Z"
    },
    {
      "event": "commented",
      "id": 2854028630,
      "node_id": "IC_kwDOABII586qHQVW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2854028630",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-06T10:16:17Z",
      "updated_at": "2025-05-06T10:16:17Z",
      "author_association": "MEMBER",
      "body": "If there is a clang-tidy bug, it could make sense to minimize the reproducer and report/fix it upstream",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#issuecomment-2854028630",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31713"
    },
    {
      "event": "commented",
      "id": 2854049412,
      "node_id": "IC_kwDOABII586qHVaE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2854049412",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-06T10:23:56Z",
      "updated_at": "2025-05-07T13:36:15Z",
      "author_association": "CONTRIBUTOR",
      "body": "> If there is a clang-tidy bug, it could make sense to minimize the reproducer and report/fix it upstream\r\n\r\n~Currently trying to just recreate the CI failure locally on NixOS instead of spamming subscribers of the PR (a bit involved due to clang-tidy depending on generated LLVM headers).~\r\nI keep getting nerd-sniped into trying a more NixOS-native approach. Was able to iterate through `env -i HOME=\"$HOME\" PATH=\"$PATH\" USER=\"$USER\" bash -c 'MAKEJOBS=\"-j$(nproc)\" FILE_ENV=\"./ci/test/00_setup_env_native_tidy.sh\" ./ci/test_run_all.sh'`.\r\n\r\nhttps://reviews.llvm.org/D72362 which added the recursion check does mention not supporting destructors.\r\n\r\nEdit: Using `NOLINTBEGIN/-END` rather than `NOLINTNEXTLINE` did the job. So it was just invalid use of clang-tidy, not a bug.",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#issuecomment-2854049412",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31713"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17552658124,
      "node_id": "HRFPE_lADOABII586nNm3HzwAAAAQWOE7M",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17552658124",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "33df8e9103fb01b75257b3fe9c25d5d4584ea1ed",
      "commit_url": "https://api.github.com/repos/hodlinator/bitcoin/commits/33df8e9103fb01b75257b3fe9c25d5d4584ea1ed",
      "created_at": "2025-05-07T09:24:50Z"
    },
    {
      "event": "unlabeled",
      "id": 17553965473,
      "node_id": "UNLE_lADOABII586nNm3HzwAAAAQWTEGh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17553965473",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-07T10:51:35Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 2821653749,
      "node_id": "PRR_kwDOABII586oLwT1",
      "url": null,
      "actor": null,
      "commit_id": "33df8e9103fb01b75257b3fe9c25d5d4584ea1ed",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-05-07T12:58:32Z",
      "author_association": "MEMBER",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#pullrequestreview-2821653749",
      "submitted_at": "2025-05-07T12:58:32Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17558417267,
      "node_id": "HRFPE_lADOABII586nNm3HzwAAAAQWkC9z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17558417267",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "8ccda63b6a4fbfe32dfd4e28300bfae98b808966",
      "commit_url": "https://api.github.com/repos/hodlinator/bitcoin/commits/8ccda63b6a4fbfe32dfd4e28300bfae98b808966",
      "created_at": "2025-05-07T15:07:15Z"
    },
    {
      "event": "reviewed",
      "id": 2938988094,
      "node_id": "PRR_kwDOABII586vLWY-",
      "url": null,
      "actor": null,
      "commit_id": "8ccda63b6a4fbfe32dfd4e28300bfae98b808966",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-06-18T12:22:13Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#pullrequestreview-2938988094",
      "submitted_at": "2025-06-18T12:22:13Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18217820917,
      "node_id": "HRFPE_lADOABII586nNm3HzwAAAAQ93eL1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18217820917",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "5e4573adda107e6bfad6ba1afb417fdb4fdc81ed",
      "commit_url": "https://api.github.com/repos/hodlinator/bitcoin/commits/5e4573adda107e6bfad6ba1afb417fdb4fdc81ed",
      "created_at": "2025-06-18T20:42:20Z"
    },
    {
      "event": "reviewed",
      "id": 2948159254,
      "node_id": "PRR_kwDOABII586vuVcW",
      "url": null,
      "actor": null,
      "commit_id": "5e4573adda107e6bfad6ba1afb417fdb4fdc81ed",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-06-23T15:36:29Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK, makes sense to improve locality by removing needless indirection!\r\n\r\nMy main concerns are:\r\n* the last commit contains too many changes of different types;\r\n* we may not have proper coverage for all corner cases (duplicate keys, `case Fragment::WRAP_J`, stack-safety for destructor and clone)\r\n* the introduced mutability lowers security\r\n* needless `emplace_back` changes\r\n* unused params (not introduced here, but may be a mistake anyway)",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#pullrequestreview-2948159254",
      "submitted_at": "2025-06-23T15:36:29Z",
      "state": "CHANGES_REQUESTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18301060462,
      "node_id": "HRFPE_lADOABII586nNm3HzwAAAARC1AVu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18301060462",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "78db9e119136154bd733c95fc6379c780703234a",
      "commit_url": "https://api.github.com/repos/hodlinator/bitcoin/commits/78db9e119136154bd733c95fc6379c780703234a",
      "created_at": "2025-06-24T19:16:50Z"
    },
    {
      "event": "reviewed",
      "id": 2952377149,
      "node_id": "PRR_kwDOABII586v-bM9",
      "url": null,
      "actor": null,
      "commit_id": "78db9e119136154bd733c95fc6379c780703234a",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-06-24T19:23:41Z",
      "author_association": "CONTRIBUTOR",
      "body": "New push in response to all concerns from https://github.com/bitcoin/bitcoin/pull/31713#pullrequestreview-2948159254",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#pullrequestreview-2952377149",
      "submitted_at": "2025-06-24T19:23:40Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18301881285,
      "node_id": "HRFPE_lADOABII586nNm3HzwAAAARC4IvF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18301881285",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "f22f4f75e252e4f2171af34e4f92f3e6a396f227",
      "commit_url": "https://api.github.com/repos/hodlinator/bitcoin/commits/f22f4f75e252e4f2171af34e4f92f3e6a396f227",
      "created_at": "2025-06-24T20:14:05Z"
    },
    {
      "event": "labeled",
      "id": 18301883769,
      "node_id": "LE_lADOABII586nNm3HzwAAAARC4JV5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18301883769",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-24T20:14:18Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3001739445,
      "node_id": "IC_kwDOABII586y6ui1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3001739445",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-24T20:14:19Z",
      "updated_at": "2025-06-24T20:14:19Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Task `tidy`: https://github.com/bitcoin/bitcoin/runs/44712881670</sub>\n<sub>LLM reason (âœ¨ experimental): Clang-tidy reported errors related to recursive function calls in vector.h, causing the CI failure.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#issuecomment-3001739445",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31713"
    },
    {
      "event": "reviewed",
      "id": 2955202681,
      "node_id": "PRR_kwDOABII586wJNB5",
      "url": null,
      "actor": null,
      "commit_id": "f22f4f75e252e4f2171af34e4f92f3e6a396f227",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-06-24T20:19:15Z",
      "author_association": "CONTRIBUTOR",
      "body": "Pushed clang-tidy fix for <https://cirrus-ci.com/task/6094677570486272?logs=ci#L2068>:\r\n```\r\n[15:19:19.395] [ 29/669][11.0s] clang-tidy-20 -p=/ci_container_base/ci/scratch/build-x86_64-pc-linux-gnu -quiet -load=/tidy-build/libbitcoin-tidy.so /ci_container_base/src/test/fuzz/miniscript.cpp\r\n[15:19:19.395] /ci_container_base/src/util/vector.h:23:49: error: function 'Vector<std::vector<miniscript::Node<(anonymous namespace)::ScriptParserContext::Key>>>' is within a recursive call chain [misc-no-recursion,-warnings-as-errors]\r\n[15:19:19.395]    23 | inline std::vector<std::common_type_t<Args...>> Vector(Args&&... args)\r\n[15:19:19.395]       |                                                 ^\r\n[15:19:19.395] /ci_container_base/src/util/vector.h:23:49: error: function 'Vector<std::vector<miniscript::Node<CPubKey>>>' is within a recursive call chain [misc-no-recursion,-warnings-as-errors]\r\n[15:19:19.395] 1059 warnings generated.\r\n```\r\n\r\nFix: https://github.com/bitcoin/bitcoin/compare/106d6937372ce62ccebf5d2c019381a337681826..00ce8ef316646221c7a2d21734694bf27cae71df",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#pullrequestreview-2955202681",
      "submitted_at": "2025-06-24T20:19:15Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
    },
    {
      "event": "unlabeled",
      "id": 18303357789,
      "node_id": "UNLE_lADOABII586nNm3HzwAAAARC9xNd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18303357789",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-24T22:03:15Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 2956921144,
      "node_id": "PRR_kwDOABII586wPwk4",
      "url": null,
      "actor": null,
      "commit_id": "f22f4f75e252e4f2171af34e4f92f3e6a396f227",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-06-25T07:53:24Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK f22f4f75e252e4f2171af34e4f92f3e6a396f227\r\n\r\nSomeone else with more experience should also review it, I have only lightly tested it locally.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#pullrequestreview-2956921144",
      "submitted_at": "2025-06-25T07:53:24Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
    },
    {
      "event": "review_requested",
      "id": 18310836906,
      "node_id": "RRE_lADOABII586nNm3HzwAAAARDaTKq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18310836906",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-25T07:53:28Z",
      "requested_reviewer": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18316644089,
      "node_id": "HRFPE_lADOABII586nNm3HzwAAAARDwc75",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18316644089",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "e1bb8e02314eb0a47c80a27207a55d4910525280",
      "commit_url": "https://api.github.com/repos/hodlinator/bitcoin/commits/e1bb8e02314eb0a47c80a27207a55d4910525280",
      "created_at": "2025-06-25T13:17:39Z"
    },
    {
      "event": "labeled",
      "id": 18318121775,
      "node_id": "LE_lADOABII586nNm3HzwAAAARD2Fsv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18318121775",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-25T14:28:34Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3005006108,
      "node_id": "IC_kwDOABII586zHMEc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3005006108",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-25T14:28:36Z",
      "updated_at": "2025-06-25T14:28:36Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Task `ARM, unit tests, no functional tests`: https://github.com/bitcoin/bitcoin/runs/44768522506</sub>\n<sub>LLM reason (âœ¨ experimental): The CI failure is caused by a compilation error due to a change in the meaning of â€˜Fragmentâ€™ caused by a conflicting declaration in miniscript.h.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#issuecomment-3005006108",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31713"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18322362903,
      "node_id": "HRFPE_lADOABII586nNm3HzwAAAAREGRIX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18322362903",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "9adf381d810f11b997ea036da6e2ce7dbad74cf6",
      "commit_url": "https://api.github.com/repos/hodlinator/bitcoin/commits/9adf381d810f11b997ea036da6e2ce7dbad74cf6",
      "created_at": "2025-06-25T18:43:09Z"
    },
    {
      "event": "unlabeled",
      "id": 18324200102,
      "node_id": "UNLE_lADOABII586nNm3HzwAAAARENRqm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18324200102",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-25T20:53:29Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3013338371,
      "node_id": "IC_kwDOABII586zm-UD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3013338371",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-27T14:48:27Z",
      "updated_at": "2025-06-27T14:48:27Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review re-ACK 9adf381d810f11b997ea036da6e2ce7dbad74cf6\r\n\r\nSomeone else with more experience should also review it, I have only lightly tested it locally.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#issuecomment-3013338371",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31713"
    },
    {
      "event": "labeled",
      "id": 18433150294,
      "node_id": "LE_lADOABII586nNm3HzwAAAARKs41W",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18433150294",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-02T14:13:01Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18439508464,
      "node_id": "HRFPE_lADOABII586nNm3HzwAAAARLFJHw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18439508464",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "commit_url": "https://api.github.com/repos/hodlinator/bitcoin/commits/6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "created_at": "2025-07-02T20:48:24Z"
    },
    {
      "event": "unlabeled",
      "id": 18439526857,
      "node_id": "UNLE_lADOABII586nNm3HzwAAAARLFNnJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18439526857",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-02T20:50:09Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3153431055,
      "node_id": "IC_kwDOABII58679YoP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3153431055",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-05T05:53:44Z",
      "updated_at": "2025-08-05T05:53:44Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review reACK 6bf4f4a87889b0679c744b0a171c98a9386fe8c0\r\n\r\nRebased without other changes since last ACK",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#issuecomment-3153431055",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31713"
    },
    {
      "event": "reviewed",
      "id": 3119400659,
      "node_id": "PRR_kwDOABII58657kbT",
      "url": null,
      "actor": null,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-08-14T07:44:20Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "purpleKarrot",
        "id": 185240,
        "node_id": "MDQ6VXNlcjE4NTI0MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/185240?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/purpleKarrot",
        "html_url": "https://github.com/purpleKarrot",
        "followers_url": "https://api.github.com/users/purpleKarrot/followers",
        "following_url": "https://api.github.com/users/purpleKarrot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/purpleKarrot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/purpleKarrot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/purpleKarrot/subscriptions",
        "organizations_url": "https://api.github.com/users/purpleKarrot/orgs",
        "repos_url": "https://api.github.com/users/purpleKarrot/repos",
        "events_url": "https://api.github.com/users/purpleKarrot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/purpleKarrot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#pullrequestreview-3119400659",
      "submitted_at": "2025-08-14T07:44:20Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
    },
    {
      "event": "reviewed",
      "id": 3412258624,
      "node_id": "PRR_kwDOABII587LYu9A",
      "url": null,
      "actor": null,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-03T18:06:16Z",
      "author_association": "MEMBER",
      "body": "ACK 6bf4f4a87889b0679c744b0a171c98a9386fe8c0\r\n\r\nJust one test-only comment.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#pullrequestreview-3412258624",
      "submitted_at": "2025-11-03T18:06:16Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20684349179,
      "node_id": "HRFPE_lADOABII586nNm3HzwAAAATQ4h77",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20684349179",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "a1df8547ca0711d99f05d1b31bc758a8068ba512",
      "commit_url": "https://api.github.com/repos/hodlinator/bitcoin/commits/a1df8547ca0711d99f05d1b31bc758a8068ba512",
      "created_at": "2025-11-03T20:28:30Z"
    },
    {
      "event": "commented",
      "id": 3486709813,
      "node_id": "IC_kwDOABII587P0vg1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3486709813",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-04T15:53:17Z",
      "updated_at": "2025-11-04T15:53:17Z",
      "author_association": "CONTRIBUTOR",
      "body": "reACK a1df8547ca0711d99f05d1b31bc758a8068ba512\r\n\r\nIt's quite a heavy refactor, I did my best to review all the changes. Someone else should also review it to be sure.\r\nThe latest https://corecheck.dev/bitcoin/bitcoin/pulls/31713 Sonar warnings seem like false positives.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#issuecomment-3486709813",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31713"
    },
    {
      "event": "review_requested",
      "id": 20706627545,
      "node_id": "RRE_lADOABII586nNm3HzwAAAATSNg_Z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20706627545",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-04T15:53:22Z",
      "requested_reviewer": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "commented",
      "id": 3490078075,
      "node_id": "IC_kwDOABII587QBl17",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3490078075",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-05T09:14:09Z",
      "updated_at": "2025-11-05T12:03:09Z",
      "author_association": "CONTRIBUTOR",
      "body": "> The latest https://corecheck.dev/bitcoin/bitcoin/pulls/31713 Sonar warnings seem like false positives.\r\n\r\nTook a closer look at https://sonarcloud.io/project/issues?issueStatuses=OPEN%2CCONFIRMED&branch=31713-a1df8547ca0711d99f05d1b31bc758a8068ba512&id=aureleoules_bitcoin&open=AZpLftZOTlsoQg18lt0A\r\n\r\n`miniscript::Node` on master and in the PR violates the \"Rule of Zero\" (https://sonarcloud.io/organizations/aureleoules/rules?open=cpp%3AS3624&rule_key=cpp%3AS3624&tab=why) where if one has a custom destructor, one *probably* needs a custom move assignment operator etc (Edit: later realized that const fields on master probably disable implicitly generated move assignment, but would probably still allow move-ctor). I realized maybe the move assignment operator specifically might lead to stack blow-out since the `std::vector` move constructor will destroy it's elements (https://en.cppreference.com/w/cpp/container/vector/operator=.html) before adopting the new ones. But as our `Node::subs` vector has the element type `Node` whose destructor protects against blowing up the stack, we are safe.\r\n\r\nIf I touch again I might add:\r\n```diff\r\n--- a/src/test/miniscript_tests.cpp\r\n+++ b/src/test/miniscript_tests.cpp\r\n@@ -727,7 +727,7 @@ BOOST_AUTO_TEST_CASE(fixed_tests)\r\n     g_testdata.reset();\r\n }\r\n \r\n-// Confirm that ~Node() and Node::Clone() are stack-safe.\r\n+// Confirm that ~Node(), Node::Clone() and operator=(Node&&) are stack-safe.\r\n BOOST_AUTO_TEST_CASE(node_deep_destruct)\r\n {\r\n     using miniscript::internal::NoDupCheck;\r\n@@ -744,6 +744,8 @@ BOOST_AUTO_TEST_CASE(node_deep_destruct)\r\n \r\n     auto clone{root.Clone()};\r\n     BOOST_CHECK_EQUAL(clone.ScriptSize(), root.ScriptSize());\r\n+\r\n+    clone = std::move(root);\r\n }\r\n \r\n BOOST_AUTO_TEST_SUITE_END()\r\n```\r\n\r\n([Godbolt exploration of lifetimes](https://godbolt.org/#z:OYLghAFBqd5QCxAYwPYBMCmBRdBLAF1QCcAaPECAMzwBtMA7AQwFtMQByARg9KtQYEAysib0QXACx8BBAKoBnTAAUAHpwAMvAFYTStJg1DIApACYAQuYukl9ZATwDKjdAGFUtAK4sGIAMwAHKSuADJ4DJgAcj4ARpjEIGZmpAAOqAqETgwe3r4BwemZjgLhkTEs8YnJtpj2JQxCBEzEBLk%2BfkG19dlNLQRl0XEJSSkKza3t%2BV3j/YMVVaMAlLaoXsTI7BwA9NsA1AAqAJ6pmHtHa8R7aFh7CAmYpHske7SoTOh7hnuYqqyp9AAdCYNABBEHgsz%2BCLIby3Ez%2BNzIcboWh4WII7AQ8zQhiwrzwxHIgj4VCY7FQmFws4ItxeRxoghHclgiEETAsAFMdl7WlM07MNiHFmg2FMBQKPYANUwplZAHYrGC9irDgAqH68/wAET2DC8tFoqQIxARStBqr2EQIeq1uo0ZuxYNSXliaOQIAhlplyAgSzteywVCYBoIjuVqoAfj6/V7VSZFXHLSrUsRrVQIOYzDHzABWdD%2BvOpQNEU25twMLNPBhPAgIPAKJbhi3JlVYejsky5qy53WYZuWhPapPS2XmABsz1OxG5JAR2ogPonE%2BedYS/oYqF%2Bm2NI4T5tbKfpCkzyR9exYqAAbpgALTizLABhsQR7eLACJZpv%2BA%2BH9uYTtuy7PsB0PGkdVXe5iEBfsfxHS0GADVA12gys4IjVtkKgmCA31Q1jVNdCW0wlDAUQ%2Bc9gdIjDz2F0CBPLNz0vG97wlPAnxfG1XC/UDW2IAD1kQtU6wbXjeXlYdWQwvYr1QPBPn4zIAC9MAga09SbaT93g1V/0AnsQOow8RIUW9MXIiC0N/VtwN1SIAHdhW7StezEodsQk5sITFCU9iiDB%2BwVazR1MRF/KwTE9gUV0FC851XXdT1pPC1TC0VWi00EDMsxS3kzFzYsHDnctKxqPYTO/CxxMk4i/ICtTXwYNKqtTdNTzMFLT3zQt8sK0suwrKs9VretGzNKKYsBRS8BUiAmvG9zpMjTrmoytqcoCvKCpLYrBrKiqFs85L6pS5czHHDct1UHcbQooMQ1oMMjJVU7zqnBJZ0IhdXvHCdLu3TBjQDe7Qy8zyiIhdSWCYCJYyCkdcqYCAzEqhHNtiCB/FR6SmADFEQBAZjVNibHarohjknQAR%2B2SUnLX4ghBL2bAAA0AEkDgAfSEOQ3DcbAhCEMGao4FZaE4XNeD8DgtFIVBODcaxrCiy5Njy/weFIAhNFFlYAGsQFzSRAVzMxJC4QINAATnHeUoUCccrf0ThJClnW5c4XgFBADQtZ1lY4FgJBfllekSHISgWmABRlEMOohAQVB7OlzW0E5OhuWyWPIloBOk%2Bl2W09SOgRmALhTdIIuS%2BIKJWC2Xgq/oYgAHl6Tz5P3ZD5BQWIaPPZCVRZSafBpd4fhBBEMR2CkGRBEUFR1BlnQ9AMIwUCVyx9HRb3IBWVBjWyb2OC91Xp9sEkImz%2BPE477heHsmdUk4HgxYlt2l49jhsEH5Aw6uVQHa3nHJIPYwBkDID2OXQEZg9gQEVpYawTxcCEBeDiLgSxeDayXksFY9wPgjD9KQA2khcyAkkPKXMgQuBWw0P4Mw8pxxcA1s7DgrtSAsAkBoX2BdeDy2PrYH2ftsGvw4GYd%2Bss%2BGYP9isG8xBMjOEkEAA%3D)).",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#issuecomment-3490078075",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31713"
    },
    {
      "event": "labeled",
      "id": 21028272897,
      "node_id": "LE_lADOABII586nNm3HzwAAAATlYfsB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21028272897",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-18T23:05:13Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21035891499,
      "node_id": "HRFPE_lADOABII586nNm3HzwAAAATl1jsr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21035891499",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "c6ac239124b3e66f2d5ff52edc6ff422926abead",
      "commit_url": "https://api.github.com/repos/hodlinator/bitcoin/commits/c6ac239124b3e66f2d5ff52edc6ff422926abead",
      "created_at": "2025-11-19T08:09:40Z"
    },
    {
      "event": "commented",
      "id": 3551348815,
      "node_id": "IC_kwDOABII587TrUhP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3551348815",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-19T08:13:04Z",
      "updated_at": "2025-11-19T08:13:04Z",
      "author_association": "CONTRIBUTOR",
      "body": "Latest push rebased to resolve conflict with #31734. + Added explicit test coverage of `operator=(Node&&)` (https://github.com/bitcoin/bitcoin/pull/31713#issuecomment-3490078075).",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#issuecomment-3551348815",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31713"
    },
    {
      "event": "unlabeled",
      "id": 21038906108,
      "node_id": "UNLE_lADOABII586nNm3HzwAAAATmBDr8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21038906108",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-19T10:21:10Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3552171802,
      "node_id": "IC_kwDOABII587Tudca",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3552171802",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-19T11:24:52Z",
      "updated_at": "2025-11-19T11:24:52Z",
      "author_association": "CONTRIBUTOR",
      "body": "Redid the rebase locally, besides an import collision the following was added:\r\n```patch\r\ndiff --git a/src/test/miniscript_tests.cpp b/src/test/miniscript_tests.cpp\r\n--- a/src/test/miniscript_tests.cpp\t(revision 31196b79cabb6e4519e8a27165e1be75c5044403)\r\n+++ b/src/test/miniscript_tests.cpp\t(date 1763547689484)\r\n@@ -727,7 +727,7 @@\r\n     g_testdata.reset();\r\n }\r\n \r\n-// Confirm that ~Node() and Node::Clone() are stack-safe.\r\n+// Confirm that ~Node(), Node::Clone() and operator=(Node&&) are stack-safe.\r\n BOOST_AUTO_TEST_CASE(node_deep_destruct)\r\n {\r\n     using miniscript::internal::NoDupCheck;\r\n@@ -744,6 +744,8 @@\r\n \r\n     auto clone{root.Clone()};\r\n     BOOST_CHECK_EQUAL(clone.ScriptSize(), root.ScriptSize());\r\n+\r\n+    clone = std::move(root);\r\n }\r\n \r\n BOOST_AUTO_TEST_SUITE_END()\r\n\r\n```\r\n\r\nCode coverage indicates both move method are tested now:\r\nhttps://github.com/bitcoin/bitcoin/blob/c6ac239124b3e66f2d5ff52edc6ff422926abead/src/script/miniscript.h#L1716-L1717\r\n\r\nreACK c6ac239124b3e66f2d5ff52edc6ff422926abead",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#issuecomment-3552171802",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31713"
    },
    {
      "event": "reviewed",
      "id": 3482053695,
      "node_id": "PRR_kwDOABII587Pi-w_",
      "url": null,
      "actor": null,
      "commit_id": "c6ac239124b3e66f2d5ff52edc6ff422926abead",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-19T11:25:31Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#pullrequestreview-3482053695",
      "submitted_at": "2025-11-19T11:25:31Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21099731841,
      "node_id": "HRFPE_lADOABII586nNm3HzwAAAATppFuB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21099731841",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "d782bffc5461f7361ae410963466ae1577ef63df",
      "commit_url": "https://api.github.com/repos/hodlinator/bitcoin/commits/d782bffc5461f7361ae410963466ae1577ef63df",
      "created_at": "2025-11-21T15:33:28Z"
    },
    {
      "event": "commented",
      "id": 3563782644,
      "node_id": "IC_kwDOABII587UawH0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3563782644",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-21T16:30:01Z",
      "updated_at": "2025-11-21T16:30:34Z",
      "author_association": "CONTRIBUTOR",
      "body": "reACK d782bffc5461f7361ae410963466ae1577ef63df\r\n\r\nThe only [difference](https://github.com/bitcoin/bitcoin/compare/c6ac239124b3e66f2d5ff52edc6ff422926abead..d782bffc5461f7361ae410963466ae1577ef63df) since last ACK was [to omit collecting empty leaves in the destructor](https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2541499665)\r\n",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#issuecomment-3563782644",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31713"
    },
    {
      "event": "renamed",
      "id": 21355743825,
      "node_id": "RTE_lADOABII586nNm3HzwAAAAT45spR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21355743825",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-04T10:42:31Z",
      "rename": {
        "from": "miniscript refactor: Remove unique_ptr-indirection (#30866 follow-up)",
        "to": "miniscript refactor: Remove unique_ptr-indirection"
      }
    },
    {
      "event": "reviewed",
      "id": 3553094316,
      "node_id": "PRR_kwDOABII587Tx-qs",
      "url": null,
      "actor": null,
      "commit_id": "d782bffc5461f7361ae410963466ae1577ef63df",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-08T17:01:17Z",
      "author_association": "MEMBER",
      "body": "reACK d782bffc5461f7361ae410963466ae1577ef63df",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#pullrequestreview-3553094316",
      "submitted_at": "2025-12-08T17:01:17Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
    },
    {
      "event": "commented",
      "id": 3631683466,
      "node_id": "IC_kwDOABII587YdxeK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3631683466",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-09T11:13:40Z",
      "updated_at": "2025-12-09T11:13:40Z",
      "author_association": "MEMBER",
      "body": "@darosior conceptual / final look?",
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#issuecomment-3631683466",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31713"
    },
    {
      "event": "mentioned",
      "id": 21450688954,
      "node_id": "MEE_lADOABII586nNm3HzwAAAAT-j4m6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21450688954",
      "actor": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-09T11:13:42Z"
    },
    {
      "event": "subscribed",
      "id": 21450689008,
      "node_id": "SE_lADOABII586nNm3HzwAAAAT-j4nw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21450689008",
      "actor": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-09T11:13:42Z"
    },
    {
      "event": "commented",
      "id": 3632681757,
      "node_id": "IC_kwDOABII587YhlMd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3632681757",
      "actor": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-09T14:53:05Z",
      "updated_at": "2025-12-09T14:53:05Z",
      "author_association": "MEMBER",
      "body": "Looks good conceptually. I may get to it later but it's not a priority for me so i don't want to be a blocker.",
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#issuecomment-3632681757",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31713"
    },
    {
      "event": "labeled",
      "id": 21628500121,
      "node_id": "LE_lADOABII586nNm3HzwAAAAUJKLiZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21628500121",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-17T21:58:07Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3670582500,
      "node_id": "IC_kwDOABII587ayKTk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3670582500",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-18T14:30:22Z",
      "updated_at": "2025-12-18T14:30:22Z",
      "author_association": "CONTRIBUTOR",
      "body": "Sorry for the conflict - happy to re-review after the rebase. Tried it locally, seems trivial.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#issuecomment-3670582500",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31713"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21646883882,
      "node_id": "HRFPE_lADOABII586nNm3HzwAAAAUKQTwq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21646883882",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "7909f9f7d6d780f0cf2a1e94267b71157122b0f5",
      "commit_url": "https://api.github.com/repos/hodlinator/bitcoin/commits/7909f9f7d6d780f0cf2a1e94267b71157122b0f5",
      "created_at": "2025-12-18T15:36:30Z"
    },
    {
      "event": "commented",
      "id": 3670894292,
      "node_id": "IC_kwDOABII587azWbU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3670894292",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-18T15:38:36Z",
      "updated_at": "2025-12-18T15:38:36Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased to solve trivial conflict with #33192.",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#issuecomment-3670894292",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31713"
    },
    {
      "event": "commented",
      "id": 3671068636,
      "node_id": "IC_kwDOABII587a0A_c",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3671068636",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-18T16:20:21Z",
      "updated_at": "2025-12-18T16:20:21Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased locally, soft reset against re-rebased PR HEAD is empty.\r\n\r\nACK 7909f9f7d6d780f0cf2a1e94267b71157122b0f5",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#issuecomment-3671068636",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31713"
    },
    {
      "event": "review_requested",
      "id": 21647893104,
      "node_id": "RRE_lADOABII586nNm3HzwAAAAUKUKJw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21647893104",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-18T16:20:25Z",
      "requested_reviewer": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "unlabeled",
      "id": 21649362834,
      "node_id": "UNLE_lADOABII586nNm3HzwAAAAUKZw-S",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21649362834",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-18T17:28:33Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 21833375286,
      "node_id": "LE_lADOABII586nNm3HzwAAAAUVXt42",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21833375286",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-03T00:28:09Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21835800898,
      "node_id": "HRFPE_lADOABII586nNm3HzwAAAAUVg-FC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21835800898",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "bdc8802f792fd4b6f1085a235f797b0f9e11e36e",
      "commit_url": "https://api.github.com/repos/hodlinator/bitcoin/commits/bdc8802f792fd4b6f1085a235f797b0f9e11e36e",
      "created_at": "2026-01-03T12:09:09Z"
    },
    {
      "event": "unlabeled",
      "id": 21836059502,
      "node_id": "UNLE_lADOABII586nNm3HzwAAAAUVh9Nu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21836059502",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-03T13:26:41Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3707076834,
      "node_id": "IC_kwDOABII587c9YDi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3707076834",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-03T14:05:48Z",
      "updated_at": "2026-01-03T14:05:48Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased to resolve conflict with #33135.",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#issuecomment-3707076834",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31713"
    },
    {
      "event": "commented",
      "id": 3707343854,
      "node_id": "IC_kwDOABII587c-ZPu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3707343854",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-03T20:44:37Z",
      "updated_at": "2026-01-03T20:44:37Z",
      "author_association": "CONTRIBUTOR",
      "body": "Re-rebased and soft reset the results and the small remaining diff seem good to me.\r\n<details>\r\n<summary>Details</summary>\r\n\r\n```patch\r\ndiff --git a/src/script/descriptor.cpp b/src/script/descriptor.cpp\r\nindex df21f6cdb9..dedc35afc8 100644\r\n--- a/src/script/descriptor.cpp\r\n+++ b/src/script/descriptor.cpp\r\n@@ -1552,9 +1552,9 @@ public:\r\n         : DescriptorImpl(std::move(providers), \"?\"), m_node(std::move(node))\r\n     {\r\n         // Traverse miniscript tree for unsafe use of older()\r\n-        miniscript::ForEachNode(*m_node, [&](const miniscript::Node<uint32_t>& node) {\r\n-            if (node.fragment == miniscript::Fragment::OLDER) {\r\n-                const uint32_t raw = node.k;\r\n+        miniscript::ForEachNode(m_node, [&](const miniscript::Node<uint32_t>& node) {\r\n+            if (node.Fragment() == miniscript::Fragment::OLDER) {\r\n+                const uint32_t raw = node.K();\r\n                 const uint32_t value_part = raw & ~CTxIn::SEQUENCE_LOCKTIME_TYPE_FLAG;\r\n                 if (value_part > CTxIn::SEQUENCE_LOCKTIME_MASK) {\r\n                     const bool is_time_based = (raw & CTxIn::SEQUENCE_LOCKTIME_TYPE_FLAG) != 0;\r\ndiff --git a/src/script/miniscript.h b/src/script/miniscript.h\r\nindex 9d5ebcfd87..bd3a16f404 100644\r\n--- a/src/script/miniscript.h\r\n+++ b/src/script/miniscript.h\r\n@@ -191,11 +191,6 @@ inline consteval Type operator\"\"_mst(const char* c, size_t l)\r\n using Opcode = std::pair<opcodetype, std::vector<unsigned char>>;\r\n \r\n template<typename Key> class Node;\r\n-template<typename Key> using NodeRef = Node<Key>; // <- TODO: Remove in next commit.\r\n-\r\n-//! Construct a miniscript node (TODO: remove in next commit).\r\n-template<typename Key, typename... Args>\r\n-Node<Key> MakeNodeRef(Args&&... args) { return Node<Key>(std::forward<Args>(args)...); }\r\n \r\n //! Unordered traversal of a miniscript node tree.\r\n template <typename Key, std::invocable<const Node<Key>&> Fn>\r\n@@ -206,8 +201,8 @@ void ForEachNode(const Node<Key>& root, Fn&& fn)\r\n         const Node<Key>& node = stack.back();\r\n         std::invoke(fn, node);\r\n         stack.pop_back();\r\n-        for (const auto& sub : node.subs) {\r\n-            stack.emplace_back(*sub);\r\n+        for (const auto& sub : node.Subs()) {\r\n+            stack.emplace_back(sub);\r\n         }\r\n     }\r\n }\r\n```\r\n</details>\r\n\r\nAlso verified with `git range-diff -w -U0 master 7909f9f bdc8802` to be sure.\r\nSomeone with more expertise in this area should also check it.\r\n\r\ncode review ACK bdc8802f792fd4b6f1085a235f797b0f9e11e36e",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#issuecomment-3707343854",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31713"
    },
    {
      "event": "labeled",
      "id": 22171797867,
      "node_id": "LE_lADOABII586nNm3HzwAAAAUpislr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22171797867",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-20T20:45:37Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDIyZTQxMTUzMTJiOTI5NTAyNTc0YmEzNjgxZWUyYzNiM2ZkMTRkOTY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/22e4115312b929502574ba3681ee2c3b3fd14d96",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/22e4115312b929502574ba3681ee2c3b3fd14d96",
      "tree": {
        "sha": "bc9b0d7a3f1cd2bdf49110d7e5208d01a58001da",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/bc9b0d7a3f1cd2bdf49110d7e5208d01a58001da"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree bc9b0d7a3f1cd2bdf49110d7e5208d01a58001da\nparent f7e88e298aed5fc31ffd0cef31e2ce9c45a0afde\nauthor Hodlinator <172445034+hodlinator@users.noreply.github.com> 1737577164 +0100\ncommitter Hodlinator <172445034+hodlinator@users.noreply.github.com> 1768944903 +0100\n\ndoc(miniscript): Remove mention of shared pointers\n\nCorrect destructor implementation comment to no longer refer to shared pointers and also move it into the function body, in symmetry with Clone() right below.\n\nLeftover from #30866.\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAg39Hzirivn9mM3G8qwAOGOKsmHT\ny2f/O2iDRQI8UxEyoAAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQGlBBC5FuW7w5rFuHaV0J1nOLyT4OjrNUDrHTfeA6NEO4DazsQWkPxp2V8C5/PapYX\nBz5Sj23AVvIsF4oIE8XgA=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f7e88e298aed5fc31ffd0cef31e2ce9c45a0afde",
          "sha": "f7e88e298aed5fc31ffd0cef31e2ce9c45a0afde",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f7e88e298aed5fc31ffd0cef31e2ce9c45a0afde"
        }
      ],
      "message": "doc(miniscript): Remove mention of shared pointers\n\nCorrect destructor implementation comment to no longer refer to shared pointers and also move it into the function body, in symmetry with Clone() right below.\n\nLeftover from #30866.",
      "committer": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2026-01-20T21:35:03Z"
      },
      "author": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2025-01-22T20:19:24Z"
      },
      "sha": "22e4115312b929502574ba3681ee2c3b3fd14d96"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGM2Zjc5OGIyMjI0N2JjMDkyZTcyZWVkOWU5ZjY5YTBjYmFjYTUxMzQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c6f798b22247bc092e72eed9e9f69a0cbaca5134",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c6f798b22247bc092e72eed9e9f69a0cbaca5134",
      "tree": {
        "sha": "8bd11d762c00cc148f3322ffa4168af040367411",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8bd11d762c00cc148f3322ffa4168af040367411"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 8bd11d762c00cc148f3322ffa4168af040367411\nparent 22e4115312b929502574ba3681ee2c3b3fd14d96\nauthor Hodlinator <172445034+hodlinator@users.noreply.github.com> 1767441960 +0100\ncommitter Hodlinator <172445034+hodlinator@users.noreply.github.com> 1768944903 +0100\n\nrefactor(miniscript): Make fields non-const & private\n\nMakes a lot of fields in miniscript.h non-const in order to allow move-operations 2 commits later.\n\nAlso fixes adjacent comment typos.\n\nCo-authored-by: LÅ‘rinc <pap.lorinc@gmail.com>\nCo-authored-by: MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz>\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAg39Hzirivn9mM3G8qwAOGOKsmHT\ny2f/O2iDRQI8UxEyoAAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQMUnWc/z71y+dV7ITaahd+84wLP+33m/6WM631FMnt5+Q1nxbpYapORf4f4se+lj/O\nWj/ujcQh8O/UgrUvZn6wI=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/22e4115312b929502574ba3681ee2c3b3fd14d96",
          "sha": "22e4115312b929502574ba3681ee2c3b3fd14d96",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/22e4115312b929502574ba3681ee2c3b3fd14d96"
        }
      ],
      "message": "refactor(miniscript): Make fields non-const & private\n\nMakes a lot of fields in miniscript.h non-const in order to allow move-operations 2 commits later.\n\nAlso fixes adjacent comment typos.\n\nCo-authored-by: LÅ‘rinc <pap.lorinc@gmail.com>\nCo-authored-by: MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz>",
      "committer": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2026-01-20T21:35:03Z"
      },
      "author": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2026-01-03T12:06:00Z"
      },
      "sha": "c6f798b22247bc092e72eed9e9f69a0cbaca5134"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGU1NWIyM2MxNzBlYjFhODBhNzFlMmRlOGI0OGNmOGEwYWViZGE4NDM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e55b23c170eb1a80a71e2de8b48cf8a0aebda843",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e55b23c170eb1a80a71e2de8b48cf8a0aebda843",
      "tree": {
        "sha": "c2c16639285de1b1092d80148875fba37e853b5d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c2c16639285de1b1092d80148875fba37e853b5d"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree c2c16639285de1b1092d80148875fba37e853b5d\nparent c6f798b22247bc092e72eed9e9f69a0cbaca5134\nauthor Hodlinator <172445034+hodlinator@users.noreply.github.com> 1750751212 +0200\ncommitter Hodlinator <172445034+hodlinator@users.noreply.github.com> 1768944903 +0100\n\nrefactor(miniscript): Remove Node::subs mutability\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAg39Hzirivn9mM3G8qwAOGOKsmHT\ny2f/O2iDRQI8UxEyoAAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQHteHimO6gkQNqTcQE3aBSJ+pnSiCko4A/pjP7fRYxWgBVBzqxFA2ct4eJmF5+Y0Cs\nZCABJGzaZRtHdgJWW1fAg=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c6f798b22247bc092e72eed9e9f69a0cbaca5134",
          "sha": "c6f798b22247bc092e72eed9e9f69a0cbaca5134",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c6f798b22247bc092e72eed9e9f69a0cbaca5134"
        }
      ],
      "message": "refactor(miniscript): Remove Node::subs mutability",
      "committer": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2026-01-20T21:35:03Z"
      },
      "author": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2025-06-24T07:46:52Z"
      },
      "sha": "e55b23c170eb1a80a71e2de8b48cf8a0aebda843"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDE1ZmIzNGRlNDFjYjA2OWUyYmFkOTNhNjQ3MjJiZGIzMmZmMDA2OTA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/15fb34de41cb069e2bad93a64722bdb32ff00690",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/15fb34de41cb069e2bad93a64722bdb32ff00690",
      "tree": {
        "sha": "775a4b2a2acb8c98d7e1ab1b39c543350e0db58d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/775a4b2a2acb8c98d7e1ab1b39c543350e0db58d"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 775a4b2a2acb8c98d7e1ab1b39c543350e0db58d\nparent e55b23c170eb1a80a71e2de8b48cf8a0aebda843\nauthor Hodlinator <172445034+hodlinator@users.noreply.github.com> 1750875559 +0200\ncommitter Hodlinator <172445034+hodlinator@users.noreply.github.com> 1768945285 +0100\n\nrefactor(miniscript): Remove superfluous unique_ptr-indirection\n\nFunctional parity is achieved through making Node move-able.\n\nUnfortunately ~Node() now needs to have the recursion linter disabled, as it is unable to figure out that recursion stops 1 level down. The former smart pointers must have been circumventing the linter somehow.\n\nNodeRef & MakeNodeRef() are deleted in the following commit (broken out to facilitate review).\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAg39Hzirivn9mM3G8qwAOGOKsmHT\ny2f/O2iDRQI8UxEyoAAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQP13VGBVgqlTvfWH6sHmwRxfuk6HLNMoCe1apEGsRbiJL99uD5X6cSdT+8emyckWOP\n7CraAwdz08vWkUzlAjVww=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e55b23c170eb1a80a71e2de8b48cf8a0aebda843",
          "sha": "e55b23c170eb1a80a71e2de8b48cf8a0aebda843",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e55b23c170eb1a80a71e2de8b48cf8a0aebda843"
        }
      ],
      "message": "refactor(miniscript): Remove superfluous unique_ptr-indirection\n\nFunctional parity is achieved through making Node move-able.\n\nUnfortunately ~Node() now needs to have the recursion linter disabled, as it is unable to figure out that recursion stops 1 level down. The former smart pointers must have been circumventing the linter somehow.\n\nNodeRef & MakeNodeRef() are deleted in the following commit (broken out to facilitate review).",
      "committer": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2026-01-20T21:41:25Z"
      },
      "author": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2025-06-25T18:19:19Z"
      },
      "sha": "15fb34de41cb069e2bad93a64722bdb32ff00690"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDUwY2FiODU3MGU4Zjc1NTNhOTRlNzUwZjY2YWQ5MjI4YTcyOGU3MmU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/50cab8570e8f7553a94e750f66ad9228a728e72e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/50cab8570e8f7553a94e750f66ad9228a728e72e",
      "tree": {
        "sha": "74da6a10e49c46e94eccae8fca291a6d55fbb48a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/74da6a10e49c46e94eccae8fca291a6d55fbb48a"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 74da6a10e49c46e94eccae8fca291a6d55fbb48a\nparent 15fb34de41cb069e2bad93a64722bdb32ff00690\nauthor Hodlinator <172445034+hodlinator@users.noreply.github.com> 1750791912 +0200\ncommitter Hodlinator <172445034+hodlinator@users.noreply.github.com> 1768945285 +0100\n\nrefactor(miniscript): Remove NodeRef & MakeNodeRef()\n\n(Also removes parameter to TestSatisfy() which existed unused from the start in 22c5b00345063bdeb8b6d3da8b5692d18f92bfb7).\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAg39Hzirivn9mM3G8qwAOGOKsmHT\ny2f/O2iDRQI8UxEyoAAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQHYPVbbvUEYb782XtXWRFsDi2WH/6gNJF0rKpyw3QI/cIfpg27NfUDTdxkTGVsVE3e\nUjk4x9u4RsAsFrdyK17Qs=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/15fb34de41cb069e2bad93a64722bdb32ff00690",
          "sha": "15fb34de41cb069e2bad93a64722bdb32ff00690",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/15fb34de41cb069e2bad93a64722bdb32ff00690"
        }
      ],
      "message": "refactor(miniscript): Remove NodeRef & MakeNodeRef()\n\n(Also removes parameter to TestSatisfy() which existed unused from the start in 22c5b00345063bdeb8b6d3da8b5692d18f92bfb7).",
      "committer": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2026-01-20T21:41:25Z"
      },
      "author": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2025-06-24T19:05:12Z"
      },
      "sha": "50cab8570e8f7553a94e750f66ad9228a728e72e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDE5OGJiYWVlNDk1OTExOWE2M2I0MDM4Y2QwZGJiNTE5ZjRkYWY2ZjA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/198bbaee4959119a63b4038cd0dbb519f4daf6f0",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/198bbaee4959119a63b4038cd0dbb519f4daf6f0",
      "tree": {
        "sha": "c9c0c41ef0692f5dfa7335e3d9bab6be381c50c3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c9c0c41ef0692f5dfa7335e3d9bab6be381c50c3"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree c9c0c41ef0692f5dfa7335e3d9bab6be381c50c3\nparent 50cab8570e8f7553a94e750f66ad9228a728e72e\nauthor Hodlinator <172445034+hodlinator@users.noreply.github.com> 1763738662 +0100\ncommitter Hodlinator <172445034+hodlinator@users.noreply.github.com> 1768945285 +0100\n\nrefactor(miniscript): Destroy nodes one full subs-vector at a time\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAg39Hzirivn9mM3G8qwAOGOKsmHT\ny2f/O2iDRQI8UxEyoAAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQDsScF2GsTHqvXhU4pK2BSYUb/XMIkc3sjyCiXsXpRZDciwwcWP8NindkzwTEUfatR\noJWwbgLv/CMuy+s3VN0g4=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/50cab8570e8f7553a94e750f66ad9228a728e72e",
          "sha": "50cab8570e8f7553a94e750f66ad9228a728e72e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/50cab8570e8f7553a94e750f66ad9228a728e72e"
        }
      ],
      "message": "refactor(miniscript): Destroy nodes one full subs-vector at a time",
      "committer": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2026-01-20T21:41:25Z"
      },
      "author": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2025-11-21T15:24:22Z"
      },
      "sha": "198bbaee4959119a63b4038cd0dbb519f4daf6f0"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDk2NGM0NGNkY2Q2YmU1ZjM5YWVkMWFlZGE5YzMwNTgwM2ViM2IyNWY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "tree": {
        "sha": "db08782ac32867722bf4254ef1ac55e75aa11386",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/db08782ac32867722bf4254ef1ac55e75aa11386"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree db08782ac32867722bf4254ef1ac55e75aa11386\nparent 198bbaee4959119a63b4038cd0dbb519f4daf6f0\nauthor Hodlinator <172445034+hodlinator@users.noreply.github.com> 1750853834 +0200\ncommitter Hodlinator <172445034+hodlinator@users.noreply.github.com> 1768945285 +0100\n\ntest(miniscript): Prove avoidance of stack overflow\n\nCan be tested through emptying the function body of ~Node() or replacing Clone() implementation with naive version:\n```C++\nNode<Key> Clone() const\n{\n    std::vector<Node> new_subs;\n    new_subs.reserve(subs.size());\n    for (const Node& child : subs) {\n        new_subs.push_back(child.Clone());\n    }\n    return Node{internal::NoDupCheck{}, m_script_ctx, fragment, std::move(new_subs), keys, data, k};\n}\n```\n\nCo-authored-by: LÅ‘rinc <pap.lorinc@gmail.com>\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAg39Hzirivn9mM3G8qwAOGOKsmHT\ny2f/O2iDRQI8UxEyoAAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQNT92/CKMXVJitX4ICiJK0jx5GYK7gFs5EkTAojihAxy2+iSyXWGw24BNpFivdoUrv\noDubwzS3j80eHDiwJ+CgQ=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/198bbaee4959119a63b4038cd0dbb519f4daf6f0",
          "sha": "198bbaee4959119a63b4038cd0dbb519f4daf6f0",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/198bbaee4959119a63b4038cd0dbb519f4daf6f0"
        }
      ],
      "message": "test(miniscript): Prove avoidance of stack overflow\n\nCan be tested through emptying the function body of ~Node() or replacing Clone() implementation with naive version:\n```C++\nNode<Key> Clone() const\n{\n    std::vector<Node> new_subs;\n    new_subs.reserve(subs.size());\n    for (const Node& child : subs) {\n        new_subs.push_back(child.Clone());\n    }\n    return Node{internal::NoDupCheck{}, m_script_ctx, fragment, std::move(new_subs), keys, data, k};\n}\n```\n\nCo-authored-by: LÅ‘rinc <pap.lorinc@gmail.com>",
      "committer": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2026-01-20T21:41:25Z"
      },
      "author": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2025-06-25T12:17:14Z"
      },
      "sha": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22172959380,
      "node_id": "HRFPE_lADOABII586nNm3HzwAAAAUpnIKU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22172959380",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "commit_url": "https://api.github.com/repos/hodlinator/bitcoin/commits/964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "created_at": "2026-01-20T21:45:13Z"
    },
    {
      "event": "commented",
      "id": 3775098045,
      "node_id": "IC_kwDOABII587hA2y9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3775098045",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-20T21:47:12Z",
      "updated_at": "2026-01-20T21:47:12Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased to resolve conflicts with 9e5e9824f11b1b0f9e2a4e28124edbb1616af519 (#32471).",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#issuecomment-3775098045",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31713"
    },
    {
      "event": "unlabeled",
      "id": 22174231844,
      "node_id": "UNLE_lADOABII586nNm3HzwAAAAUpr-0k",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22174231844",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-20T22:56:59Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 3698304875,
      "node_id": "PRR_kwDOABII587cb6dr",
      "url": null,
      "actor": null,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-23T17:13:34Z",
      "author_association": "MEMBER",
      "body": "Code looks good to me, but i'm not sure about the last two commits. They seem fine code-wise, but unrelated to this PR and i'd like to better understand their purpose.",
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#pullrequestreview-3698304875",
      "submitted_at": "2026-01-23T17:13:34Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
    },
    {
      "event": "reviewed",
      "id": 3698889100,
      "node_id": "PRR_kwDOABII587ceJGM",
      "url": null,
      "actor": null,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-23T18:06:20Z",
      "author_association": "MEMBER",
      "body": "Code review ACK 964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#pullrequestreview-3698889100",
      "submitted_at": "2026-01-23T18:06:12Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
    },
    {
      "event": "review_requested",
      "id": 22249500641,
      "node_id": "RRE_lADOABII586nNm3HzwAAAAUuLG_h",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22249500641",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-23T18:06:26Z",
      "requested_reviewer": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 3699540080,
      "node_id": "PRR_kwDOABII587cgoBw",
      "url": null,
      "actor": null,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-23T20:49:12Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK 964c44cdcd6be5f39aed1aeda9c305803eb3b25f\nRedid the rebase locally, no diff against latest push. Quickly went over the changes again, LGTM.\nIf you decide to push something else here or in a followup based on the reviews, I don't mind reacking.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#pullrequestreview-3699540080",
      "submitted_at": "2026-01-23T20:49:12Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1973892213",
      "pull_request_review_id": 2648300910,
      "id": 1973892213,
      "node_id": "PRRC_kwDOABII5851pzR1",
      "diff_hunk": "@@ -1301,31 +1301,31 @@ class StringMaker {\n class MiniscriptDescriptor final : public DescriptorImpl\n {\n private:\n-    miniscript::NodeRef<uint32_t> m_node;\n+    const miniscript::Node<uint32_t> m_node;",
      "path": "src/script/descriptor.cpp",
      "position": 1,
      "original_position": 5,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "original_commit_id": "58e9c7ca89654abdae2e37fe848ed8afc1e250e1",
      "in_reply_to_id": null,
      "user": {
        "login": "purpleKarrot",
        "id": 185240,
        "node_id": "MDQ6VXNlcjE4NTI0MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/185240?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/purpleKarrot",
        "html_url": "https://github.com/purpleKarrot",
        "followers_url": "https://api.github.com/users/purpleKarrot/followers",
        "following_url": "https://api.github.com/users/purpleKarrot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/purpleKarrot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/purpleKarrot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/purpleKarrot/subscriptions",
        "organizations_url": "https://api.github.com/users/purpleKarrot/orgs",
        "repos_url": "https://api.github.com/users/purpleKarrot/repos",
        "events_url": "https://api.github.com/users/purpleKarrot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/purpleKarrot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Data members should not be `const`. See https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#Rc-constref",
      "created_at": "2025-02-27T16:02:40Z",
      "updated_at": "2025-02-27T16:02:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r1973892213",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1973892213"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1304,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1976441195",
      "pull_request_review_id": 2652501941,
      "id": 1976441195,
      "node_id": "PRRC_kwDOABII5851zhlr",
      "diff_hunk": "@@ -1301,31 +1301,31 @@ class StringMaker {\n class MiniscriptDescriptor final : public DescriptorImpl\n {\n private:\n-    miniscript::NodeRef<uint32_t> m_node;\n+    const miniscript::Node<uint32_t> m_node;",
      "path": "src/script/descriptor.cpp",
      "position": 1,
      "original_position": 5,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "original_commit_id": "58e9c7ca89654abdae2e37fe848ed8afc1e250e1",
      "in_reply_to_id": 1973892213,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thanks for having a look! `const` fields are the bane of making types movable, as in c7f1829b4bb3a579c65a99a62b42f64de946c0da of this very PR, so good to have another argument in that direction.\r\n\r\nStill think there's some value in marking fields as `const` to collapse down the mental model of the code when moving is not necessary. Wish we had \"const except on move\".\r\n\r\nBut I've proven my point that it *can* now be made `const`. I'll remove it on the next push.",
      "created_at": "2025-03-01T15:51:38Z",
      "updated_at": "2025-03-01T15:51:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r1976441195",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1976441195"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1304,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2005807278",
      "pull_request_review_id": 2703025510,
      "id": 2005807278,
      "node_id": "PRRC_kwDOABII5853jjCu",
      "diff_hunk": "@@ -1301,31 +1301,31 @@ class StringMaker {\n class MiniscriptDescriptor final : public DescriptorImpl\n {\n private:\n-    miniscript::NodeRef<uint32_t> m_node;\n+    const miniscript::Node<uint32_t> m_node;",
      "path": "src/script/descriptor.cpp",
      "position": 1,
      "original_position": 5,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "original_commit_id": "58e9c7ca89654abdae2e37fe848ed8afc1e250e1",
      "in_reply_to_id": 1973892213,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Adjusted in latest push, which is otherwise just a rebase.",
      "created_at": "2025-03-20T14:41:41Z",
      "updated_at": "2025-03-20T14:41:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2005807278",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2005807278"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1304,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2077573425",
      "pull_request_review_id": 2821653749,
      "id": 2077573425,
      "node_id": "PRRC_kwDOABII58571UEx",
      "diff_hunk": "@@ -421,11 +414,11 @@ struct Ops {\n  */\n struct SatInfo {\n     //! Whether a canonical satisfaction/dissatisfaction is possible at all.\n-    const bool valid;\n+    bool valid;\n     //! How much higher the stack size at start of execution can be compared to at the end.\n-    const int32_t netdiff;\n+    int32_t netdiff;\n     //! Mow much higher the stack size can be during execution compared to at the end.",
      "path": "src/script/miniscript.h",
      "position": 1,
      "original_position": 34,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "original_commit_id": "33df8e9103fb01b75257b3fe9c25d5d4584ea1ed",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "unrelated, but it looks like there are typos:\r\n\r\nMow much -> How much [Typo in \"Mow much\"]\r\n\r\nRIPEMD10 -> RIPEMD160 [Incorrect algorithm name]",
      "created_at": "2025-05-07T12:58:32Z",
      "updated_at": "2025-05-07T12:58:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2077573425",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2077573425"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 420,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2077869573",
      "pull_request_review_id": 2822176381,
      "id": 2077869573,
      "node_id": "PRRC_kwDOABII58572cYF",
      "diff_hunk": "@@ -421,11 +414,11 @@ struct Ops {\n  */\n struct SatInfo {\n     //! Whether a canonical satisfaction/dissatisfaction is possible at all.\n-    const bool valid;\n+    bool valid;\n     //! How much higher the stack size at start of execution can be compared to at the end.\n-    const int32_t netdiff;\n+    int32_t netdiff;\n     //! Mow much higher the stack size can be during execution compared to at the end.",
      "path": "src/script/miniscript.h",
      "position": 1,
      "original_position": 34,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "original_commit_id": "33df8e9103fb01b75257b3fe9c25d5d4584ea1ed",
      "in_reply_to_id": 2077573425,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Taken in latest push.",
      "created_at": "2025-05-07T15:07:41Z",
      "updated_at": "2025-05-07T15:07:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2077869573",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2077869573"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 420,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2154461184",
      "pull_request_review_id": 2938988094,
      "id": 2154461184,
      "node_id": "PRRC_kwDOABII586AangA",
      "diff_hunk": "@@ -311,11 +311,6 @@ const struct KeyComparator {\n // A dummy scriptsig to pass to VerifyScript (we always use Segwit v0).\n const CScript DUMMY_SCRIPTSIG;\n \n-//! Construct a miniscript node as a shared_ptr.",
      "path": "src/test/fuzz/miniscript.cpp",
      "position": 17,
      "original_position": 17,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "8ccda63b6a4fbfe32dfd4e28300bfae98b808966",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "@maflcko, the LLM linter is showing issues for the code before my changes, and also changing casing by itself which causes it to detect it as an error:\r\n\r\n> Possible typos and grammar issues:\r\n> \r\n>     * Mow much higher -> How much higher [Typo in comment]\r\n> \r\n>     * Constructed.emplace_back -> constructed.emplace_back [Typo in variable name]\r\n> \r\n>     * //! Construct a miniscript node as a shared_ptr. -> This comment is inaccurate given the code changes, as Node is no longer represented by a shared_ptr. [Inaccurate comment]",
      "created_at": "2025-06-18T12:22:13Z",
      "updated_at": "2025-06-18T12:22:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2154461184",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2154461184"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 319,
      "original_line": 319,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2154470579",
      "pull_request_review_id": 2939002337,
      "id": 2154470579,
      "node_id": "PRRC_kwDOABII586Aapyz",
      "diff_hunk": "@@ -311,11 +311,6 @@ const struct KeyComparator {\n // A dummy scriptsig to pass to VerifyScript (we always use Segwit v0).\n const CScript DUMMY_SCRIPTSIG;\n \n-//! Construct a miniscript node as a shared_ptr.",
      "path": "src/test/fuzz/miniscript.cpp",
      "position": 17,
      "original_position": 17,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "8ccda63b6a4fbfe32dfd4e28300bfae98b808966",
      "in_reply_to_id": 2154461184,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thx, this was fixed in https://github.com/maflcko/DrahtBot/commit/30bb2f0baa4e920211cfa35f5be72aed013253a1 last month. You can ignore it, or rebase, if you want it to re-run.",
      "created_at": "2025-06-18T12:26:43Z",
      "updated_at": "2025-06-18T12:26:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2154470579",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2154470579"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 319,
      "original_line": 319,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2155505262",
      "pull_request_review_id": 2940670872,
      "id": 2155505262,
      "node_id": "PRRC_kwDOABII586AemZu",
      "diff_hunk": "@@ -311,11 +311,6 @@ const struct KeyComparator {\n // A dummy scriptsig to pass to VerifyScript (we always use Segwit v0).\n const CScript DUMMY_SCRIPTSIG;\n \n-//! Construct a miniscript node as a shared_ptr.",
      "path": "src/test/fuzz/miniscript.cpp",
      "position": 17,
      "original_position": 17,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "8ccda63b6a4fbfe32dfd4e28300bfae98b808966",
      "in_reply_to_id": 2154461184,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Rebased, thanks!",
      "created_at": "2025-06-18T21:03:31Z",
      "updated_at": "2025-06-18T21:03:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2155505262",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2155505262"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 319,
      "original_line": 319,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2160319454",
      "pull_request_review_id": 2948159254,
      "id": 2160319454,
      "node_id": "PRRC_kwDOABII586Aw9ve",
      "diff_hunk": "@@ -515,9 +515,11 @@ struct Node {\n     //! The Script context for this node. Either P2WSH or Tapscript.\n     const MiniscriptContext m_script_ctx;\n \n-    /* Destroy the shared pointers iteratively to avoid a stack-overflow due to recursive calls",
      "path": "src/script/miniscript.h",
      "position": 129,
      "original_position": 4,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "db2ede082836fe27ddae62e6e6e6803aa92ee45b",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The comment is a #30866 leftover, right? we might want to mention it in the commit message for context (i.e. independently of the PR's description)",
      "created_at": "2025-06-22T12:12:48Z",
      "updated_at": "2025-06-23T15:36:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2160319454",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2160319454"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 535,
      "original_line": 535,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2160320908",
      "pull_request_review_id": 2948159254,
      "id": 2160320908,
      "node_id": "PRRC_kwDOABII586Aw-GM",
      "diff_hunk": "@@ -515,9 +515,11 @@ struct Node {\n     //! The Script context for this node. Either P2WSH or Tapscript.\n     const MiniscriptContext m_script_ctx;\n \n-    /* Destroy the shared pointers iteratively to avoid a stack-overflow due to recursive calls\n-     * to the subs' destructors. */\n-    ~Node() {\n+    ~Node()\n+    {\n+        // Destroy the subexpressions iteratively after moving out their\n+        // subexpressions to avoid a stack-overflow due to recursive calls to\n+        // the subs' destructors.",
      "path": "src/script/miniscript.h",
      "position": 147,
      "original_position": 11,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "db2ede082836fe27ddae62e6e6e6803aa92ee45b",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "so this basically flattens out the tree structure to make sure the destructor's call stack has at most 1 indirection? Would `TreeEval` complicate this too much?\r\n \r\nDo we have a test that makes sure this doesn't cause a stack-overflow?\r\nMaybe we could cover these changed lines with something that exercises the clone and destructor, e.g.:\r\n```C++\r\n// Confirm that `Node`â€™s destructor and Clone() are stack-safe\r\nBOOST_AUTO_TEST_CASE(node_deep_destruct)\r\n{\r\n    using miniscript::internal::NoDupCheck;\r\n    using miniscript::Fragment;\r\n    using NodeU32 = miniscript::Node<uint32_t>;\r\n\r\n    constexpr auto ctx{miniscript::MiniscriptContext::P2WSH};\r\n\r\n    NodeU32 root{NoDupCheck{}, ctx, Fragment::JUST_1};\r\n    for (uint32_t i{0}; i < 100'000; ++i) {\r\n        root = NodeU32{NoDupCheck{}, ctx, Fragment::WRAP_S, Vector(std::move(root))};\r\n    }\r\n\r\n    for(auto clone{root.Clone()}; !clone.subs.empty(); ) {\r\n        BOOST_CHECK_EQUAL(clone.subs.size(), root.subs.size());\r\n        clone = std::move(clone.subs[0]);\r\n        root = std::move(root.subs[0]);\r\n    }\r\n}\r\n```\r\n\r\nwhich would fail for:\r\n```C++\r\n~Node()\r\n{\r\n}\r\n```\r\n\r\nor\r\n```C++\r\nNode<Key> Clone() const\r\n{\r\n    std::vector<Node> new_subs;\r\n    new_subs.reserve(subs.size());\r\n    for (const Node& child : subs) {\r\n        new_subs.push_back(child.Clone());\r\n    }\r\n\r\n    return Node{internal::NoDupCheck{}, m_script_ctx, fragment, std::move(new_subs), keys, data, k};\r\n}\r\n```",
      "created_at": "2025-06-22T12:17:27Z",
      "updated_at": "2026-01-23T22:13:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2160320908",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2160320908"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 554,
      "original_line": 554,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2160322647",
      "pull_request_review_id": 2948159254,
      "id": 2160322647,
      "node_id": "PRRC_kwDOABII586Aw-hX",
      "diff_hunk": "@@ -515,9 +515,11 @@ struct Node {\n     //! The Script context for this node. Either P2WSH or Tapscript.\n     const MiniscriptContext m_script_ctx;\n \n-    /* Destroy the shared pointers iteratively to avoid a stack-overflow due to recursive calls\n-     * to the subs' destructors. */\n-    ~Node() {\n+    ~Node()\n+    {\n+        // Destroy the subexpressions iteratively after moving out their\n+        // subexpressions to avoid a stack-overflow due to recursive calls to\n+        // the subs' destructors.\n         while (!subs.empty()) {\n             auto node = std::move(subs.back());\n             subs.pop_back();",
      "path": "src/script/miniscript.h",
      "position": 1,
      "original_position": 14,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "original_commit_id": "db2ede082836fe27ddae62e6e6e6803aa92ee45b",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Given that this can cause stack overflow, I assume the levels aren't trivial, which makes me wonder if we can [Bulk move all `node->subs` over](https://en.cppreference.com/w/cpp/iterator/make_move_iterator.html) (in a reverse order though) and clear it at the end instead of popping one-by-one.",
      "created_at": "2025-06-22T12:23:35Z",
      "updated_at": "2025-06-23T15:36:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2160322647",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2160322647"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 525,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2160335156",
      "pull_request_review_id": 2948159254,
      "id": 2160335156,
      "node_id": "PRRC_kwDOABII586AxBk0",
      "diff_hunk": "@@ -503,17 +503,17 @@ struct NoDupCheck {};\n template<typename Key>\n struct Node {\n     //! What node type this node is.\n-    const Fragment fragment;\n+    Fragment fragment;\n     //! The k parameter (time for OLDER/AFTER, threshold for THRESH(_M))\n-    const uint32_t k = 0;\n+    uint32_t k = 0;\n     //! The keys used by this expression (only for PK_K/PK_H/MULTI)\n-    const std::vector<Key> keys;\n-    //! The data bytes in this expression (only for HASH160/HASH256/SHA256/RIPEMD10).\n-    const std::vector<unsigned char> data;\n+    std::vector<Key> keys;\n+    //! The data bytes in this expression (only for HASH160/HASH256/SHA256/RIPEMD160).\n+    std::vector<unsigned char> data;\n     //! Subexpressions (for WRAP_*/AND_*/OR_*/ANDOR/THRESH)\n     mutable std::vector<NodeRef<Key>> subs;",
      "path": "src/script/miniscript.h",
      "position": 1,
      "original_position": 53,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "original_commit_id": "c04b7b490e0c63942000472ea9f918df326c5b00",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Could we remove the `mutable` in commit c04b7b490e0c63942000472ea9f918df326c5b00 for consistency?",
      "created_at": "2025-06-22T12:44:40Z",
      "updated_at": "2025-06-23T15:36:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2160335156",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2160335156"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 514,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2160336607",
      "pull_request_review_id": 2948159254,
      "id": 2160336607,
      "node_id": "PRRC_kwDOABII586AxB7f",
      "diff_hunk": "@@ -650,13 +650,13 @@ BOOST_AUTO_TEST_CASE(fixed_tests)\n     // A Script with a non minimal push is invalid\n     constexpr auto nonminpush{\"0000210232780000feff00ffffffffffff21ff005f00ae21ae00000000060602060406564c2102320000060900fe00005f00ae21ae00100000060606060606000000000000000000000000000000000000000000000000000000000000000000\"_hex_u8};\n     const CScript nonminpush_script(nonminpush.begin(), nonminpush.end());\n-    BOOST_CHECK(miniscript::FromScript(nonminpush_script, wsh_converter) == nullptr);\n-    BOOST_CHECK(miniscript::FromScript(nonminpush_script, tap_converter) == nullptr);\n+    BOOST_CHECK(miniscript::FromScript(nonminpush_script, wsh_converter) == std::nullopt);",
      "path": "src/test/miniscript_tests.cpp",
      "position": 166,
      "original_position": 148,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "5e4573adda107e6bfad6ba1afb417fdb4fdc81ed",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "We could even simplify these to:\r\n```suggestion\r\n    BOOST_CHECK(!miniscript::FromScript(nonminpush_script, wsh_converter));\r\n```\r\n(given that `*_EQUALS` wouldn't easily work)",
      "created_at": "2025-06-22T12:49:58Z",
      "updated_at": "2025-06-23T15:36:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2160336607",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2160336607"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 653,
      "original_line": 653,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2160336850",
      "pull_request_review_id": 2948159254,
      "id": 2160336850,
      "node_id": "PRRC_kwDOABII586AxB_S",
      "diff_hunk": "@@ -188,13 +188,6 @@ inline consteval Type operator\"\"_mst(const char* c, size_t l)\n \n using Opcode = std::pair<opcodetype, std::vector<unsigned char>>;\n \n-template<typename Key> struct Node;\n-template<typename Key> using NodeRef = std::unique_ptr<const Node<Key>>;\n-\n-//! Construct a miniscript node as a unique_ptr.\n-template<typename Key, typename... Args>",
      "path": "src/script/miniscript.h",
      "position": 8,
      "original_position": 8,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "5e4573adda107e6bfad6ba1afb417fdb4fdc81ed",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "commit 5e4573adda107e6bfad6ba1afb417fdb4fdc81ed is too big (especially compared to the rest), could we do it in smaller scripted diffs instead?",
      "created_at": "2025-06-22T12:50:43Z",
      "updated_at": "2025-06-23T15:36:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2160336850",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2160336850"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 197,
      "original_line": 197,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2160337340",
      "pull_request_review_id": 2948159254,
      "id": 2160337340,
      "node_id": "PRRC_kwDOABII586AxCG8",
      "diff_hunk": "@@ -523,25 +518,27 @@ struct Node {\n         while (!subs.empty()) {\n             auto node = std::move(subs.back());\n             subs.pop_back();\n-            while (!node->subs.empty()) {\n-                subs.push_back(std::move(node->subs.back()));\n-                node->subs.pop_back();\n+            while (!node.subs.empty()) {\n+                subs.emplace_back(std::move(node.subs.back()));",
      "path": "src/script/miniscript.h",
      "position": 1,
      "original_position": 36,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "original_commit_id": "5e4573adda107e6bfad6ba1afb417fdb4fdc81ed",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "maybe we could do the `push_back` -> `emplace_back` changes in a separate commit.\r\nI'm not sure all of them make sense - does `emplace_back` have any advantage when [the objects are already built](https://medium.com/@its.me.siddh/modern-c-series-vector-push-back-or-emplace-back-e3a482ab4dcd)?\r\n\r\n<details>\r\n<summary>Details</summary>\r\n\r\n```patch\r\ndiff --git a/src/script/miniscript.h b/src/script/miniscript.h\r\nindex f99c9a8036..be1913b785 100644\r\n--- a/src/script/miniscript.h\r\n+++ b/src/script/miniscript.h\r\n@@ -519,7 +519,7 @@ struct Node {\r\n             auto node = std::move(subs.back());\r\n             subs.pop_back();\r\n             while (!node.subs.empty()) {\r\n-                subs.emplace_back(std::move(node.subs.back()));\r\n+                subs.push_back(std::move(node.subs.back()));\r\n                 node.subs.pop_back();\r\n             }\r\n         }\r\n@@ -534,7 +534,7 @@ struct Node {\r\n             for (auto& child : children) {\r\n                 // It's fine to move from children as they are new nodes having\r\n                 // been produced by calling this function one level down.\r\n-                new_subs.emplace_back(std::move(child));\r\n+                new_subs.push_back(std::move(child));\r\n             }\r\n             return Node{internal::NoDupCheck{}, node.m_script_ctx, node.fragment, std::move(new_subs), node.keys, node.data, node.k};\r\n         };\r\ndiff --git a/src/test/fuzz/miniscript.cpp b/src/test/fuzz/miniscript.cpp\r\nindex c9904583e5..743226c33f 100644\r\n--- a/src/test/fuzz/miniscript.cpp\r\n+++ b/src/test/fuzz/miniscript.cpp\r\n@@ -994,7 +994,7 @@ std::optional<Node> GenNode(MsCtx script_ctx, F ConsumeNode, Type root_type, boo\r\n                 return {};\r\n             }\r\n             // Move it to the stack.\r\n-            stack.emplace_back(std::move(*node));\r\n+            stack.push_back(std::move(*node));\r\n             todo.pop_back();\r\n         }\r\n     }\r\n```\r\n\r\n</details>",
      "created_at": "2025-06-22T12:52:16Z",
      "updated_at": "2025-06-23T15:36:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2160337340",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2160337340"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 522,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2160337661",
      "pull_request_review_id": 2948159254,
      "id": 2160337661,
      "node_id": "PRRC_kwDOABII586AxCL9",
      "diff_hunk": "@@ -1660,36 +1657,40 @@ struct Node {\n     bool operator==(const Node<Key>& arg) const { return Compare(*this, arg) == 0; }\n \n     // Constructors with various argument combinations, which bypass the duplicate key check.\n-    Node(internal::NoDupCheck, MiniscriptContext script_ctx, Fragment nt, std::vector<NodeRef<Key>> sub, std::vector<unsigned char> arg, uint32_t val = 0)\n+    Node(internal::NoDupCheck, MiniscriptContext script_ctx, Fragment nt, std::vector<Node<Key>> sub, std::vector<unsigned char> arg, uint32_t val = 0)\n         : fragment(nt), k(val), data(std::move(arg)), subs(std::move(sub)), m_script_ctx{script_ctx}, ops(CalcOps()), ss(CalcStackSize()), ws(CalcWitnessSize()), typ(CalcType()), scriptlen(CalcScriptLen()) {}\n     Node(internal::NoDupCheck, MiniscriptContext script_ctx, Fragment nt, std::vector<unsigned char> arg, uint32_t val = 0)\n         : fragment(nt), k(val), data(std::move(arg)), m_script_ctx{script_ctx}, ops(CalcOps()), ss(CalcStackSize()), ws(CalcWitnessSize()), typ(CalcType()), scriptlen(CalcScriptLen()) {}\n-    Node(internal::NoDupCheck, MiniscriptContext script_ctx, Fragment nt, std::vector<NodeRef<Key>> sub, std::vector<Key> key, uint32_t val = 0)\n+    Node(internal::NoDupCheck, MiniscriptContext script_ctx, Fragment nt, std::vector<Node<Key>> sub, std::vector<Key> key, uint32_t val = 0)\n         : fragment(nt), k(val), keys(std::move(key)), m_script_ctx{script_ctx}, subs(std::move(sub)), ops(CalcOps()), ss(CalcStackSize()), ws(CalcWitnessSize()), typ(CalcType()), scriptlen(CalcScriptLen()) {}\n     Node(internal::NoDupCheck, MiniscriptContext script_ctx, Fragment nt, std::vector<Key> key, uint32_t val = 0)\n         : fragment(nt), k(val), keys(std::move(key)), m_script_ctx{script_ctx}, ops(CalcOps()), ss(CalcStackSize()), ws(CalcWitnessSize()), typ(CalcType()), scriptlen(CalcScriptLen()) {}\n-    Node(internal::NoDupCheck, MiniscriptContext script_ctx, Fragment nt, std::vector<NodeRef<Key>> sub, uint32_t val = 0)\n+    Node(internal::NoDupCheck, MiniscriptContext script_ctx, Fragment nt, std::vector<Node<Key>> sub, uint32_t val = 0)\n         : fragment(nt), k(val), subs(std::move(sub)), m_script_ctx{script_ctx}, ops(CalcOps()), ss(CalcStackSize()), ws(CalcWitnessSize()), typ(CalcType()), scriptlen(CalcScriptLen()) {}\n     Node(internal::NoDupCheck, MiniscriptContext script_ctx, Fragment nt, uint32_t val = 0)\n         : fragment(nt), k(val), m_script_ctx{script_ctx}, ops(CalcOps()), ss(CalcStackSize()), ws(CalcWitnessSize()), typ(CalcType()), scriptlen(CalcScriptLen()) {}\n \n     // Constructors with various argument combinations, which do perform the duplicate key check.\n-    template <typename Ctx> Node(const Ctx& ctx, Fragment nt, std::vector<NodeRef<Key>> sub, std::vector<unsigned char> arg, uint32_t val = 0)\n+    template <typename Ctx> Node(const Ctx& ctx, Fragment nt, std::vector<Node<Key>> sub, std::vector<unsigned char> arg, uint32_t val = 0)\n         : Node(internal::NoDupCheck{}, ctx.MsContext(), nt, std::move(sub), std::move(arg), val) { DuplicateKeyCheck(ctx); }\n     template <typename Ctx> Node(const Ctx& ctx, Fragment nt, std::vector<unsigned char> arg, uint32_t val = 0)\n         : Node(internal::NoDupCheck{}, ctx.MsContext(), nt, std::move(arg), val) { DuplicateKeyCheck(ctx);}\n-    template <typename Ctx> Node(const Ctx& ctx, Fragment nt, std::vector<NodeRef<Key>> sub, std::vector<Key> key, uint32_t val = 0)\n+    template <typename Ctx> Node(const Ctx& ctx, Fragment nt, std::vector<Node<Key>> sub, std::vector<Key> key, uint32_t val = 0)\n         : Node(internal::NoDupCheck{}, ctx.MsContext(), nt, std::move(sub), std::move(key), val) { DuplicateKeyCheck(ctx); }\n     template <typename Ctx> Node(const Ctx& ctx, Fragment nt, std::vector<Key> key, uint32_t val = 0)\n         : Node(internal::NoDupCheck{}, ctx.MsContext(), nt, std::move(key), val) { DuplicateKeyCheck(ctx); }\n-    template <typename Ctx> Node(const Ctx& ctx, Fragment nt, std::vector<NodeRef<Key>> sub, uint32_t val = 0)\n+    template <typename Ctx> Node(const Ctx& ctx, Fragment nt, std::vector<Node<Key>> sub, uint32_t val = 0)\n         : Node(internal::NoDupCheck{}, ctx.MsContext(), nt, std::move(sub), val) { DuplicateKeyCheck(ctx); }\n     template <typename Ctx> Node(const Ctx& ctx, Fragment nt, uint32_t val = 0)\n         : Node(internal::NoDupCheck{}, ctx.MsContext(), nt, val) { DuplicateKeyCheck(ctx); }\n \n     // Delete copy constructor and assignment operator, use Clone() instead\n     Node(const Node&) = delete;\n     Node& operator=(const Node&) = delete;\n+\n+    // subs is movable, circumventing recursion, so these are permitted.\n+    Node(Node&&) = default;\n+    Node& operator=(Node&&) = default;",
      "path": "src/script/miniscript.h",
      "position": 1,
      "original_position": 478,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "original_commit_id": "5e4573adda107e6bfad6ba1afb417fdb4fdc81ed",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Are these implicitly already `noexcept`? In other such cases we've made them explicit.",
      "created_at": "2025-06-22T12:53:33Z",
      "updated_at": "2025-06-23T15:36:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2160337661",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2160337661"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": 1692,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 1693,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2160344023",
      "pull_request_review_id": 2948159254,
      "id": 2160344023,
      "node_id": "PRRC_kwDOABII586AxDvX",
      "diff_hunk": "@@ -503,17 +503,17 @@ struct NoDupCheck {};\n template<typename Key>\n struct Node {\n     //! What node type this node is.\n-    const Fragment fragment;\n+    Fragment fragment;",
      "path": "src/script/miniscript.h",
      "position": 1,
      "original_position": 41,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "original_commit_id": "c04b7b490e0c63942000472ea9f918df326c5b00",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I don't mind removing the `const` from the privates in `Node`, but I'm not a fan of making the publics mutable...\r\nIt seems to me we could make them private if we move [`FindChallenges`](https://github.com/bitcoin/bitcoin/blob/5e4573adda107e6bfad6ba1afb417fdb4fdc81ed/src/test/miniscript_tests.cpp#L299-L324) over.\r\n\r\n<details>\r\n<summary>or add getters to the fields</summary>\r\n\r\n```patch\r\ndiff --git a/src/script/miniscript.h b/src/script/miniscript.h\r\nindex f99c9a8036..181a6614cf 100644\r\n--- a/src/script/miniscript.h\r\n+++ b/src/script/miniscript.h\r\n@@ -495,19 +495,6 @@ struct NoDupCheck {};\r\n //! A node in a miniscript expression.\r\n template<typename Key>\r\n struct Node {\r\n-    //! What node type this node is.\r\n-    Fragment fragment;\r\n-    //! The k parameter (time for OLDER/AFTER, threshold for THRESH(_M))\r\n-    uint32_t k = 0;\r\n-    //! The keys used by this expression (only for PK_K/PK_H/MULTI)\r\n-    std::vector<Key> keys;\r\n-    //! The data bytes in this expression (only for HASH160/HASH256/SHA256/RIPEMD160).\r\n-    std::vector<unsigned char> data;\r\n-    //! Subexpressions (for WRAP_*/AND_*/OR_*/ANDOR/THRESH)\r\n-    std::vector<Node> subs;\r\n-    //! The Script context for this node. Either P2WSH or Tapscript.\r\n-    MiniscriptContext m_script_ctx;\r\n-\r\n     // Permit 1 level deep recursion since we own instances of our own type.\r\n     // NOLINTBEGIN(misc-no-recursion)\r\n     ~Node()\r\n@@ -541,7 +528,26 @@ struct Node {\r\n         return TreeEval<Node>(upfn);\r\n     }\r\n \r\n+    Fragment GetFragment() const noexcept { return fragment; }\r\n+    uint32_t GetK() const noexcept { return k; }\r\n+    std::span<const Key> GetKeys() const noexcept { return keys; }\r\n+    std::span<const unsigned char> GetData() const noexcept { return data; }\r\n+    std::span<const Node> GetSubs() const noexcept { return subs; }\r\n+\r\n private:\r\n+    //! What node type this node is.\r\n+    Fragment fragment;\r\n+    //! The k parameter (time for OLDER/AFTER, threshold for THRESH(_M))\r\n+    uint32_t k = 0;\r\n+    //! The keys used by this expression (only for PK_K/PK_H/MULTI)\r\n+    std::vector<Key> keys;\r\n+    //! The data bytes in this expression (only for HASH160/HASH256/SHA256/RIPEMD160).\r\n+    std::vector<unsigned char> data;\r\n+    //! Subexpressions (for WRAP_*/AND_*/OR_*/ANDOR/THRESH)\r\n+    std::vector<Node> subs;\r\n+    //! The Script context for this node. Either P2WSH or Tapscript.\r\n+    MiniscriptContext m_script_ctx;\r\n+\r\n     //! Cached ops counts.\r\n     internal::Ops ops;\r\n     //! Cached stack size bounds.\r\ndiff --git a/src/test/miniscript_tests.cpp b/src/test/miniscript_tests.cpp\r\nindex cee88373c4..8a5a54b0bf 100644\r\n--- a/src/test/miniscript_tests.cpp\r\n+++ b/src/test/miniscript_tests.cpp\r\n@@ -121,7 +121,7 @@ enum class ChallengeType {\r\n  * For hashes it's just the first 4 bytes of the hash. For pubkeys, it's the last 4 bytes.\r\n  */\r\n uint32_t ChallengeNumber(const CPubKey& pubkey) { return ReadLE32(pubkey.data() + 29); }\r\n-uint32_t ChallengeNumber(const std::vector<unsigned char>& hash) { return ReadLE32(hash.data()); }\r\n+uint32_t ChallengeNumber(std::span<const unsigned char> hash) { return ReadLE32(hash.data()); }\r\n \r\n //! A Challenge is a combination of type of leaf condition and its challenge number.\r\n typedef std::pair<ChallengeType, uint32_t> Challenge;\r\n@@ -304,19 +304,19 @@ std::set<Challenge> FindChallenges(const Node& root)\r\n         const auto* ref{stack.back()};\r\n         stack.pop_back();\r\n \r\n-        for (const auto& key : ref->keys) {\r\n+        for (const auto& key : ref->GetKeys()) {\r\n             chal.emplace(ChallengeType::PK, ChallengeNumber(key));\r\n         }\r\n-        switch (ref->fragment) {\r\n-        case Fragment::OLDER: chal.emplace(ChallengeType::OLDER, ref->k); break;\r\n-        case Fragment::AFTER: chal.emplace(ChallengeType::AFTER, ref->k); break;\r\n-        case Fragment::SHA256: chal.emplace(ChallengeType::SHA256, ChallengeNumber(ref->data)); break;\r\n-        case Fragment::RIPEMD160: chal.emplace(ChallengeType::RIPEMD160, ChallengeNumber(ref->data)); break;\r\n-        case Fragment::HASH256: chal.emplace(ChallengeType::HASH256, ChallengeNumber(ref->data)); break;\r\n-        case Fragment::HASH160: chal.emplace(ChallengeType::HASH160, ChallengeNumber(ref->data)); break;\r\n+        switch (ref->GetFragment()) {\r\n+        case Fragment::OLDER: chal.emplace(ChallengeType::OLDER, ref->GetK()); break;\r\n+        case Fragment::AFTER: chal.emplace(ChallengeType::AFTER, ref->GetK()); break;\r\n+        case Fragment::SHA256: chal.emplace(ChallengeType::SHA256, ChallengeNumber(ref->GetData())); break;\r\n+        case Fragment::RIPEMD160: chal.emplace(ChallengeType::RIPEMD160, ChallengeNumber(ref->GetData())); break;\r\n+        case Fragment::HASH256: chal.emplace(ChallengeType::HASH256, ChallengeNumber(ref->GetData())); break;\r\n+        case Fragment::HASH160: chal.emplace(ChallengeType::HASH160, ChallengeNumber(ref->GetData())); break;\r\n         default: break;\r\n         }\r\n-        for (const auto& sub : ref->subs) {\r\n+        for (const auto& sub : ref->GetSubs()) {\r\n             stack.push_back(&sub);\r\n         }\r\n     }\r\n```\r\n\r\n</details>",
      "created_at": "2025-06-22T13:16:11Z",
      "updated_at": "2025-06-23T15:36:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2160344023",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2160344023"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 516,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2161634475",
      "pull_request_review_id": 2948159254,
      "id": 2161634475,
      "node_id": "PRRC_kwDOABII586A1-yr",
      "diff_hunk": "@@ -503,56 +496,62 @@ struct NoDupCheck {};\n template<typename Key>\n struct Node {\n     //! What node type this node is.\n-    const Fragment fragment;\n+    Fragment fragment;\n     //! The k parameter (time for OLDER/AFTER, threshold for THRESH(_M))\n-    const uint32_t k = 0;\n+    uint32_t k = 0;\n     //! The keys used by this expression (only for PK_K/PK_H/MULTI)\n-    const std::vector<Key> keys;\n-    //! The data bytes in this expression (only for HASH160/HASH256/SHA256/RIPEMD10).\n-    const std::vector<unsigned char> data;\n+    std::vector<Key> keys;\n+    //! The data bytes in this expression (only for HASH160/HASH256/SHA256/RIPEMD160).\n+    std::vector<unsigned char> data;\n     //! Subexpressions (for WRAP_*/AND_*/OR_*/ANDOR/THRESH)\n-    mutable std::vector<NodeRef<Key>> subs;\n+    std::vector<Node> subs;\n     //! The Script context for this node. Either P2WSH or Tapscript.\n-    const MiniscriptContext m_script_ctx;\n+    MiniscriptContext m_script_ctx;\n \n-    /* Destroy the shared pointers iteratively to avoid a stack-overflow due to recursive calls\n-     * to the subs' destructors. */\n-    ~Node() {\n+    // Permit 1 level deep recursion since we own instances of our own type.\n+    // NOLINTBEGIN(misc-no-recursion)\n+    ~Node()\n+    {\n+        // Destroy the subexpressions iteratively after moving out their\n+        // subexpressions to avoid a stack-overflow due to recursive calls to\n+        // the subs' destructors.\n         while (!subs.empty()) {\n             auto node = std::move(subs.back());\n             subs.pop_back();\n-            while (!node->subs.empty()) {\n-                subs.push_back(std::move(node->subs.back()));\n-                node->subs.pop_back();\n+            while (!node.subs.empty()) {\n+                subs.emplace_back(std::move(node.subs.back()));\n+                node.subs.pop_back();\n             }\n         }\n     }\n+    // NOLINTEND(misc-no-recursion)\n \n-    NodeRef<Key> Clone() const\n+    Node<Key> Clone() const\n     {\n         // Use TreeEval() to avoid a stack-overflow due to recursion\n-        auto upfn = [](const Node& node, std::span<NodeRef<Key>> children) {\n-            std::vector<NodeRef<Key>> new_subs;\n-            for (auto child = children.begin(); child != children.end(); ++child) {\n-                new_subs.emplace_back(std::move(*child));\n+        auto upfn = [](const Node& node, std::span<Node> children) {\n+            std::vector<Node> new_subs;\n+            for (auto& child : children) {\n+                // It's fine to move from children as they are new nodes having\n+                // been produced by calling this function one level down.\n+                new_subs.emplace_back(std::move(child));\n             }\n-            // std::make_unique (and therefore MakeNodeRef) doesn't work on private constructors\n-            return std::unique_ptr<Node>{new Node{internal::NoDupCheck{}, node.m_script_ctx, node.fragment, std::move(new_subs), node.keys, node.data, node.k}};\n+            return Node{internal::NoDupCheck{}, node.m_script_ctx, node.fragment, std::move(new_subs), node.keys, node.data, node.k};\n         };\n-        return TreeEval<NodeRef<Key>>(upfn);\n+        return TreeEval<Node>(upfn);\n     }\n \n private:\n     //! Cached ops counts.\n-    const internal::Ops ops;\n+    internal::Ops ops;\n     //! Cached stack size bounds.\n-    const internal::StackSize ss;\n+    internal::StackSize ss;\n     //! Cached witness size bounds.\n-    const internal::WitnessSize ws;\n+    internal::WitnessSize ws;\n     //! Cached expression type (computed by CalcType and fed through SanitizeType).\n-    const Type typ;\n+    Type typ;\n     //! Cached script length (computed by CalcScriptLen).\n-    const size_t scriptlen;\n+    size_t scriptlen;\n     //! Whether a public key appears more than once in this node. This value is initialized\n     //! by all constructors except the NoDupCheck ones. The NoDupCheck ones skip the\n     //! computation, requiring it to be done manually by invoking DuplicateKeyCheck().",
      "path": "src/script/miniscript.h",
      "position": 208,
      "original_position": 138,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "5e4573adda107e6bfad6ba1afb417fdb4fdc81ed",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I wish we could remove the `mutable` from `std::optional<bool> has_duplicate_keys` as well since `auto upfn = [&ctx](const Node& node` promises more than it can deliver - but it seems we would need to touch a lot of declarations - I'll let you decide if there's anything to do here.\r\n\r\nIf nothing else, we should at least cover it with tests: https://maflcko.github.io/b-c-cov/total.coverage/src/script/miniscript.h.gcov.html#L1464",
      "created_at": "2025-06-23T13:25:25Z",
      "updated_at": "2025-06-23T15:36:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2161634475",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2161634475"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 601,
      "original_line": 601,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2161695989",
      "pull_request_review_id": 2948159254,
      "id": 2161695989,
      "node_id": "PRRC_kwDOABII586A2Nz1",
      "diff_hunk": "@@ -346,9 +345,10 @@ void SatisfactionToWitness(miniscript::MiniscriptContext ctx, CScriptWitness& wi\n \n struct MiniScriptTest : BasicTestingSetup {\n /** Run random satisfaction tests. */\n-void TestSatisfy(const KeyConverter& converter, const std::string& testcase, const NodeRef& node) {\n-    auto script = node->ToScript(converter);\n-    const auto challenges{FindChallenges(node.get())}; // Find all challenges in the generated miniscript.\n+void TestSatisfy(const KeyConverter& converter, const std::string& testcase, const Node& node)",
      "path": "src/test/miniscript_tests.cpp",
      "position": 1,
      "original_position": 35,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "original_commit_id": "5e4573adda107e6bfad6ba1afb417fdb4fdc81ed",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Is `testcase` here for debugging purposes only? Seems unused...",
      "created_at": "2025-06-23T13:53:05Z",
      "updated_at": "2025-06-23T15:36:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2161695989",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2161695989"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 348,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2161874319",
      "pull_request_review_id": 2948159254,
      "id": 2161874319,
      "node_id": "PRRC_kwDOABII586A25WP",
      "diff_hunk": "@@ -349,8 +342,8 @@ struct InputResult {\n //! Class whose objects represent the maximum of a list of integers.\n template<typename I>\n struct MaxInt {\n-    const bool valid;\n-    const I value;\n+    bool valid;\n+    I value;",
      "path": "src/script/miniscript.h",
      "position": 37,
      "original_position": 21,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "5e4573adda107e6bfad6ba1afb417fdb4fdc81ed",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "can we make these private or friend now that they're exposed?",
      "created_at": "2025-06-23T15:14:33Z",
      "updated_at": "2025-06-23T15:36:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2161874319",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2161874319"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": 365,
      "original_start_line": 345,
      "start_side": "RIGHT",
      "line": 366,
      "original_line": 366,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2161874482",
      "pull_request_review_id": 2948159254,
      "id": 2161874482,
      "node_id": "PRRC_kwDOABII586A25Yy",
      "diff_hunk": "@@ -421,11 +414,11 @@ struct Ops {\n  */\n struct SatInfo {\n     //! Whether a canonical satisfaction/dissatisfaction is possible at all.\n-    const bool valid;\n+    bool valid;",
      "path": "src/script/miniscript.h",
      "position": 58,
      "original_position": 30,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "5e4573adda107e6bfad6ba1afb417fdb4fdc81ed",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "same",
      "created_at": "2025-06-23T15:14:39Z",
      "updated_at": "2025-06-23T15:36:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2161874482",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2161874482"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 442,
      "original_line": 442,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2161887437",
      "pull_request_review_id": 2948159254,
      "id": 2161887437,
      "node_id": "PRRC_kwDOABII586A28jN",
      "diff_hunk": "@@ -2048,40 +2051,40 @@ inline NodeRef<Key> Parse(std::span<const char> in, const Ctx& ctx)\n             break;\n         }\n         case ParseContext::ALT: {\n-            constructed.back() = MakeNodeRef<Key>(internal::NoDupCheck{}, ctx.MsContext(), Fragment::WRAP_A, Vector(std::move(constructed.back())));\n+            constructed.back() = Node{internal::NoDupCheck{}, ctx.MsContext(), Fragment::WRAP_A, Vector(std::move(constructed.back()))};\n             break;\n         }\n         case ParseContext::SWAP: {\n-            constructed.back() = MakeNodeRef<Key>(internal::NoDupCheck{}, ctx.MsContext(), Fragment::WRAP_S, Vector(std::move(constructed.back())));\n+            constructed.back() = Node{internal::NoDupCheck{}, ctx.MsContext(), Fragment::WRAP_S, Vector(std::move(constructed.back()))};\n             break;\n         }\n         case ParseContext::CHECK: {\n-            constructed.back() = MakeNodeRef<Key>(internal::NoDupCheck{}, ctx.MsContext(), Fragment::WRAP_C, Vector(std::move(constructed.back())));\n+            constructed.back() = Node{internal::NoDupCheck{}, ctx.MsContext(), Fragment::WRAP_C, Vector(std::move(constructed.back()))};\n             break;\n         }\n         case ParseContext::DUP_IF: {\n-            constructed.back() = MakeNodeRef<Key>(internal::NoDupCheck{}, ctx.MsContext(), Fragment::WRAP_D, Vector(std::move(constructed.back())));\n+            constructed.back() = Node{internal::NoDupCheck{}, ctx.MsContext(), Fragment::WRAP_D, Vector(std::move(constructed.back()))};\n             break;\n         }\n         case ParseContext::NON_ZERO: {\n-            constructed.back() = MakeNodeRef<Key>(internal::NoDupCheck{}, ctx.MsContext(), Fragment::WRAP_J, Vector(std::move(constructed.back())));\n+            constructed.back() = Node{internal::NoDupCheck{}, ctx.MsContext(), Fragment::WRAP_J, Vector(std::move(constructed.back()))};\n             break;\n         }\n         case ParseContext::ZERO_NOTEQUAL: {\n-            constructed.back() = MakeNodeRef<Key>(internal::NoDupCheck{}, ctx.MsContext(), Fragment::WRAP_N, Vector(std::move(constructed.back())));\n+            constructed.back() = Node{internal::NoDupCheck{}, ctx.MsContext(), Fragment::WRAP_N, Vector(std::move(constructed.back()))};\n             break;\n         }\n         case ParseContext::VERIFY: {\n-            script_size += (constructed.back()->GetType() << \"x\"_mst);\n-            constructed.back() = MakeNodeRef<Key>(internal::NoDupCheck{}, ctx.MsContext(), Fragment::WRAP_V, Vector(std::move(constructed.back())));\n+            script_size += (constructed.back().GetType() << \"x\"_mst);\n+            constructed.back() = Node{internal::NoDupCheck{}, ctx.MsContext(), Fragment::WRAP_V, Vector(std::move(constructed.back()))};\n             break;\n         }\n         case ParseContext::WRAP_U: {\n-            constructed.back() = MakeNodeRef<Key>(internal::NoDupCheck{}, ctx.MsContext(), Fragment::OR_I, Vector(std::move(constructed.back()), MakeNodeRef<Key>(internal::NoDupCheck{}, ctx.MsContext(), Fragment::JUST_0)));\n+            constructed.back() = Node{internal::NoDupCheck{}, ctx.MsContext(), Fragment::OR_I, Vector(std::move(constructed.back()), Node<Key>(internal::NoDupCheck{}, ctx.MsContext(), Fragment::JUST_0))};\n             break;\n         }\n         case ParseContext::WRAP_T: {\n-            constructed.back() = MakeNodeRef<Key>(internal::NoDupCheck{}, ctx.MsContext(), Fragment::AND_V, Vector(std::move(constructed.back()), MakeNodeRef<Key>(internal::NoDupCheck{}, ctx.MsContext(), Fragment::JUST_1)));\n+            constructed.back() = Node{internal::NoDupCheck{}, ctx.MsContext(), Fragment::AND_V, Vector(std::move(constructed.back()), Node<Key>(internal::NoDupCheck{}, ctx.MsContext(), Fragment::JUST_1))};",
      "path": "src/script/miniscript.h",
      "position": 1,
      "original_position": 752,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "original_commit_id": "5e4573adda107e6bfad6ba1afb417fdb4fdc81ed",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "ðŸ‘ for using the alias - but as mentioned before, there are too many changes in this commit, could you do these in smaller, more focused commits instead?",
      "created_at": "2025-06-23T15:20:52Z",
      "updated_at": "2025-06-23T15:36:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2161887437",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2161887437"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2087,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2161891082",
      "pull_request_review_id": 2948159254,
      "id": 2161891082,
      "node_id": "PRRC_kwDOABII586A29cK",
      "diff_hunk": "@@ -961,24 +956,24 @@ NodeRef GenNode(MsCtx script_ctx, F ConsumeNode, Type root_type, bool strict_val\n         } else {\n             // The back of todo has fragment and number of children decided, and\n             // those children have been constructed at the back of stack. Pop\n-            // that entry off todo, and use it to construct a new NodeRef on\n+            // that entry off todo, and use it to construct a new Node on\n             // stack.\n             NodeInfo& info = *todo.back().second;\n             // Gather children from the back of stack.\n-            std::vector<NodeRef> sub;\n+            std::vector<Node> sub;\n             sub.reserve(info.subtypes.size());\n             for (size_t i = 0; i < info.subtypes.size(); ++i) {\n                 sub.push_back(std::move(*(stack.end() - info.subtypes.size() + i)));\n             }\n             stack.erase(stack.end() - info.subtypes.size(), stack.end());\n-            // Construct new NodeRef.\n-            NodeRef node;\n+            // Construct new Node.",
      "path": "src/test/fuzz/miniscript.cpp",
      "position": 67,
      "original_position": 62,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "5e4573adda107e6bfad6ba1afb417fdb4fdc81ed",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "comment is redundant",
      "created_at": "2025-06-23T15:22:36Z",
      "updated_at": "2025-06-23T15:36:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2161891082",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2161891082"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 971,
      "original_line": 971,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2161892692",
      "pull_request_review_id": 2948159254,
      "id": 2161892692,
      "node_id": "PRRC_kwDOABII586A291U",
      "diff_hunk": "@@ -961,24 +956,24 @@ NodeRef GenNode(MsCtx script_ctx, F ConsumeNode, Type root_type, bool strict_val\n         } else {\n             // The back of todo has fragment and number of children decided, and\n             // those children have been constructed at the back of stack. Pop\n-            // that entry off todo, and use it to construct a new NodeRef on\n+            // that entry off todo, and use it to construct a new Node on\n             // stack.\n             NodeInfo& info = *todo.back().second;\n             // Gather children from the back of stack.\n-            std::vector<NodeRef> sub;\n+            std::vector<Node> sub;\n             sub.reserve(info.subtypes.size());\n             for (size_t i = 0; i < info.subtypes.size(); ++i) {\n                 sub.push_back(std::move(*(stack.end() - info.subtypes.size() + i)));\n             }\n             stack.erase(stack.end() - info.subtypes.size(), stack.end());\n-            // Construct new NodeRef.\n-            NodeRef node;\n+            // Construct new Node.\n+            std::optional<Node> node;\n             if (info.keys.empty()) {\n-                node = MakeNodeRef(script_ctx, info.fragment, std::move(sub), std::move(info.hash), info.k);\n+                node = Node{miniscript::internal::NoDupCheck{}, script_ctx, info.fragment, std::move(sub), std::move(info.hash), info.k};",
      "path": "src/test/fuzz/miniscript.cpp",
      "position": 1,
      "original_position": 66,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "original_commit_id": "5e4573adda107e6bfad6ba1afb417fdb4fdc81ed",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I would inline this in a separate commit, it's non-trivial",
      "created_at": "2025-06-23T15:23:22Z",
      "updated_at": "2025-06-23T15:36:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2161892692",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2161892692"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 972,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2163090187",
      "pull_request_review_id": 2952377149,
      "id": 2163090187,
      "node_id": "PRRC_kwDOABII586A7iML",
      "diff_hunk": "@@ -515,9 +515,11 @@ struct Node {\n     //! The Script context for this node. Either P2WSH or Tapscript.\n     const MiniscriptContext m_script_ctx;\n \n-    /* Destroy the shared pointers iteratively to avoid a stack-overflow due to recursive calls",
      "path": "src/script/miniscript.h",
      "position": 129,
      "original_position": 4,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "db2ede082836fe27ddae62e6e6e6803aa92ee45b",
      "in_reply_to_id": 2160319454,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Added to reference in commit message.",
      "created_at": "2025-06-24T06:43:47Z",
      "updated_at": "2025-06-24T19:23:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2163090187",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2163090187"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 535,
      "original_line": 535,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2163180665",
      "pull_request_review_id": 2952377149,
      "id": 2163180665,
      "node_id": "PRRC_kwDOABII586A74R5",
      "diff_hunk": "@@ -650,13 +650,13 @@ BOOST_AUTO_TEST_CASE(fixed_tests)\n     // A Script with a non minimal push is invalid\n     constexpr auto nonminpush{\"0000210232780000feff00ffffffffffff21ff005f00ae21ae00000000060602060406564c2102320000060900fe00005f00ae21ae00100000060606060606000000000000000000000000000000000000000000000000000000000000000000\"_hex_u8};\n     const CScript nonminpush_script(nonminpush.begin(), nonminpush.end());\n-    BOOST_CHECK(miniscript::FromScript(nonminpush_script, wsh_converter) == nullptr);\n-    BOOST_CHECK(miniscript::FromScript(nonminpush_script, tap_converter) == nullptr);\n+    BOOST_CHECK(miniscript::FromScript(nonminpush_script, wsh_converter) == std::nullopt);",
      "path": "src/test/miniscript_tests.cpp",
      "position": 166,
      "original_position": 148,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "5e4573adda107e6bfad6ba1afb417fdb4fdc81ed",
      "in_reply_to_id": 2160336607,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Was doing that in earlier pushes of the PR but changed back to `!= nullopt` since it disambiguates pointer/optional cases and is closer to master.",
      "created_at": "2025-06-24T07:34:35Z",
      "updated_at": "2025-06-24T19:23:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2163180665",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2163180665"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 653,
      "original_line": 653,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2163825798",
      "pull_request_review_id": 2952377149,
      "id": 2163825798,
      "node_id": "PRRC_kwDOABII586A-VyG",
      "diff_hunk": "@@ -515,9 +515,11 @@ struct Node {\n     //! The Script context for this node. Either P2WSH or Tapscript.\n     const MiniscriptContext m_script_ctx;\n \n-    /* Destroy the shared pointers iteratively to avoid a stack-overflow due to recursive calls\n-     * to the subs' destructors. */\n-    ~Node() {\n+    ~Node()\n+    {\n+        // Destroy the subexpressions iteratively after moving out their\n+        // subexpressions to avoid a stack-overflow due to recursive calls to\n+        // the subs' destructors.",
      "path": "src/script/miniscript.h",
      "position": 147,
      "original_position": 11,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "db2ede082836fe27ddae62e6e6e6803aa92ee45b",
      "in_reply_to_id": 2160320908,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thanks for the test! Added as the last commit (~78db9e119136154bd733c95fc6379c780703234a~ f22f4f75e252e4f2171af34e4f92f3e6a396f227). Had to increase the depth from `100'000` to `1000'000` for it to cause stack overflow. Could simplify `Clone()`ing.\r\n\r\n> so this basically flattens out the tree structure to make sure the desctructor's call stack has at most 1 indirection? Would `TreeEval` complicate this too much?\r\n\r\nI've brought back an earlier version of the destructor I had that destroys entire `vector<Node>`s at once in a separate commit (~106d6937372ce62ccebf5d2c019381a337681826~ 00ce8ef316646221c7a2d21734694bf27cae71df). If that doesn't satisfy I'm happy to see a `TreeEval`-version.",
      "created_at": "2025-06-24T12:17:20Z",
      "updated_at": "2025-06-24T20:21:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2163825798",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2163825798"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 554,
      "original_line": 554,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2163833758",
      "pull_request_review_id": 2952377149,
      "id": 2163833758,
      "node_id": "PRRC_kwDOABII586A-Xue",
      "diff_hunk": "@@ -515,9 +515,11 @@ struct Node {\n     //! The Script context for this node. Either P2WSH or Tapscript.\n     const MiniscriptContext m_script_ctx;\n \n-    /* Destroy the shared pointers iteratively to avoid a stack-overflow due to recursive calls\n-     * to the subs' destructors. */\n-    ~Node() {\n+    ~Node()\n+    {\n+        // Destroy the subexpressions iteratively after moving out their\n+        // subexpressions to avoid a stack-overflow due to recursive calls to\n+        // the subs' destructors.\n         while (!subs.empty()) {\n             auto node = std::move(subs.back());\n             subs.pop_back();",
      "path": "src/script/miniscript.h",
      "position": 1,
      "original_position": 14,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "original_commit_id": "db2ede082836fe27ddae62e6e6e6803aa92ee45b",
      "in_reply_to_id": 2160322647,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I prefer moving whole `vector`s. See reply to https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2160320908.",
      "created_at": "2025-06-24T12:19:28Z",
      "updated_at": "2025-06-24T19:23:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2163833758",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2163833758"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 525,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2163836697",
      "pull_request_review_id": 2952377149,
      "id": 2163836697,
      "node_id": "PRRC_kwDOABII586A-YcZ",
      "diff_hunk": "@@ -503,17 +503,17 @@ struct NoDupCheck {};\n template<typename Key>\n struct Node {\n     //! What node type this node is.\n-    const Fragment fragment;\n+    Fragment fragment;\n     //! The k parameter (time for OLDER/AFTER, threshold for THRESH(_M))\n-    const uint32_t k = 0;\n+    uint32_t k = 0;\n     //! The keys used by this expression (only for PK_K/PK_H/MULTI)\n-    const std::vector<Key> keys;\n-    //! The data bytes in this expression (only for HASH160/HASH256/SHA256/RIPEMD10).\n-    const std::vector<unsigned char> data;\n+    std::vector<Key> keys;\n+    //! The data bytes in this expression (only for HASH160/HASH256/SHA256/RIPEMD160).\n+    std::vector<unsigned char> data;\n     //! Subexpressions (for WRAP_*/AND_*/OR_*/ANDOR/THRESH)\n     mutable std::vector<NodeRef<Key>> subs;",
      "path": "src/script/miniscript.h",
      "position": 1,
      "original_position": 53,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "original_commit_id": "c04b7b490e0c63942000472ea9f918df326c5b00",
      "in_reply_to_id": 2160335156,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "It got a bit complicated since `NodeRef` is internally `const` (`std::unique_ptr<const Node<Key>>`). Did it as a separate commit for now: effcf701474eacd85a24da4d1707120fc756aa91.",
      "created_at": "2025-06-24T12:20:28Z",
      "updated_at": "2025-06-24T19:27:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2163836697",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2163836697"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 514,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2163872886",
      "pull_request_review_id": 2952377149,
      "id": 2163872886,
      "node_id": "PRRC_kwDOABII586A-hR2",
      "diff_hunk": "@@ -1660,36 +1657,40 @@ struct Node {\n     bool operator==(const Node<Key>& arg) const { return Compare(*this, arg) == 0; }\n \n     // Constructors with various argument combinations, which bypass the duplicate key check.\n-    Node(internal::NoDupCheck, MiniscriptContext script_ctx, Fragment nt, std::vector<NodeRef<Key>> sub, std::vector<unsigned char> arg, uint32_t val = 0)\n+    Node(internal::NoDupCheck, MiniscriptContext script_ctx, Fragment nt, std::vector<Node<Key>> sub, std::vector<unsigned char> arg, uint32_t val = 0)\n         : fragment(nt), k(val), data(std::move(arg)), subs(std::move(sub)), m_script_ctx{script_ctx}, ops(CalcOps()), ss(CalcStackSize()), ws(CalcWitnessSize()), typ(CalcType()), scriptlen(CalcScriptLen()) {}\n     Node(internal::NoDupCheck, MiniscriptContext script_ctx, Fragment nt, std::vector<unsigned char> arg, uint32_t val = 0)\n         : fragment(nt), k(val), data(std::move(arg)), m_script_ctx{script_ctx}, ops(CalcOps()), ss(CalcStackSize()), ws(CalcWitnessSize()), typ(CalcType()), scriptlen(CalcScriptLen()) {}\n-    Node(internal::NoDupCheck, MiniscriptContext script_ctx, Fragment nt, std::vector<NodeRef<Key>> sub, std::vector<Key> key, uint32_t val = 0)\n+    Node(internal::NoDupCheck, MiniscriptContext script_ctx, Fragment nt, std::vector<Node<Key>> sub, std::vector<Key> key, uint32_t val = 0)\n         : fragment(nt), k(val), keys(std::move(key)), m_script_ctx{script_ctx}, subs(std::move(sub)), ops(CalcOps()), ss(CalcStackSize()), ws(CalcWitnessSize()), typ(CalcType()), scriptlen(CalcScriptLen()) {}\n     Node(internal::NoDupCheck, MiniscriptContext script_ctx, Fragment nt, std::vector<Key> key, uint32_t val = 0)\n         : fragment(nt), k(val), keys(std::move(key)), m_script_ctx{script_ctx}, ops(CalcOps()), ss(CalcStackSize()), ws(CalcWitnessSize()), typ(CalcType()), scriptlen(CalcScriptLen()) {}\n-    Node(internal::NoDupCheck, MiniscriptContext script_ctx, Fragment nt, std::vector<NodeRef<Key>> sub, uint32_t val = 0)\n+    Node(internal::NoDupCheck, MiniscriptContext script_ctx, Fragment nt, std::vector<Node<Key>> sub, uint32_t val = 0)\n         : fragment(nt), k(val), subs(std::move(sub)), m_script_ctx{script_ctx}, ops(CalcOps()), ss(CalcStackSize()), ws(CalcWitnessSize()), typ(CalcType()), scriptlen(CalcScriptLen()) {}\n     Node(internal::NoDupCheck, MiniscriptContext script_ctx, Fragment nt, uint32_t val = 0)\n         : fragment(nt), k(val), m_script_ctx{script_ctx}, ops(CalcOps()), ss(CalcStackSize()), ws(CalcWitnessSize()), typ(CalcType()), scriptlen(CalcScriptLen()) {}\n \n     // Constructors with various argument combinations, which do perform the duplicate key check.\n-    template <typename Ctx> Node(const Ctx& ctx, Fragment nt, std::vector<NodeRef<Key>> sub, std::vector<unsigned char> arg, uint32_t val = 0)\n+    template <typename Ctx> Node(const Ctx& ctx, Fragment nt, std::vector<Node<Key>> sub, std::vector<unsigned char> arg, uint32_t val = 0)\n         : Node(internal::NoDupCheck{}, ctx.MsContext(), nt, std::move(sub), std::move(arg), val) { DuplicateKeyCheck(ctx); }\n     template <typename Ctx> Node(const Ctx& ctx, Fragment nt, std::vector<unsigned char> arg, uint32_t val = 0)\n         : Node(internal::NoDupCheck{}, ctx.MsContext(), nt, std::move(arg), val) { DuplicateKeyCheck(ctx);}\n-    template <typename Ctx> Node(const Ctx& ctx, Fragment nt, std::vector<NodeRef<Key>> sub, std::vector<Key> key, uint32_t val = 0)\n+    template <typename Ctx> Node(const Ctx& ctx, Fragment nt, std::vector<Node<Key>> sub, std::vector<Key> key, uint32_t val = 0)\n         : Node(internal::NoDupCheck{}, ctx.MsContext(), nt, std::move(sub), std::move(key), val) { DuplicateKeyCheck(ctx); }\n     template <typename Ctx> Node(const Ctx& ctx, Fragment nt, std::vector<Key> key, uint32_t val = 0)\n         : Node(internal::NoDupCheck{}, ctx.MsContext(), nt, std::move(key), val) { DuplicateKeyCheck(ctx); }\n-    template <typename Ctx> Node(const Ctx& ctx, Fragment nt, std::vector<NodeRef<Key>> sub, uint32_t val = 0)\n+    template <typename Ctx> Node(const Ctx& ctx, Fragment nt, std::vector<Node<Key>> sub, uint32_t val = 0)\n         : Node(internal::NoDupCheck{}, ctx.MsContext(), nt, std::move(sub), val) { DuplicateKeyCheck(ctx); }\n     template <typename Ctx> Node(const Ctx& ctx, Fragment nt, uint32_t val = 0)\n         : Node(internal::NoDupCheck{}, ctx.MsContext(), nt, val) { DuplicateKeyCheck(ctx); }\n \n     // Delete copy constructor and assignment operator, use Clone() instead\n     Node(const Node&) = delete;\n     Node& operator=(const Node&) = delete;\n+\n+    // subs is movable, circumventing recursion, so these are permitted.\n+    Node(Node&&) = default;\n+    Node& operator=(Node&&) = default;",
      "path": "src/script/miniscript.h",
      "position": 1,
      "original_position": 478,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "original_commit_id": "5e4573adda107e6bfad6ba1afb417fdb4fdc81ed",
      "in_reply_to_id": 2160337661,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Probably not implicit, added for good measure.",
      "created_at": "2025-06-24T12:35:16Z",
      "updated_at": "2025-06-24T19:23:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2163872886",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2163872886"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": 1692,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 1693,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2163882445",
      "pull_request_review_id": 2952377149,
      "id": 2163882445,
      "node_id": "PRRC_kwDOABII586A-jnN",
      "diff_hunk": "@@ -503,56 +496,62 @@ struct NoDupCheck {};\n template<typename Key>\n struct Node {\n     //! What node type this node is.\n-    const Fragment fragment;\n+    Fragment fragment;\n     //! The k parameter (time for OLDER/AFTER, threshold for THRESH(_M))\n-    const uint32_t k = 0;\n+    uint32_t k = 0;\n     //! The keys used by this expression (only for PK_K/PK_H/MULTI)\n-    const std::vector<Key> keys;\n-    //! The data bytes in this expression (only for HASH160/HASH256/SHA256/RIPEMD10).\n-    const std::vector<unsigned char> data;\n+    std::vector<Key> keys;\n+    //! The data bytes in this expression (only for HASH160/HASH256/SHA256/RIPEMD160).\n+    std::vector<unsigned char> data;\n     //! Subexpressions (for WRAP_*/AND_*/OR_*/ANDOR/THRESH)\n-    mutable std::vector<NodeRef<Key>> subs;\n+    std::vector<Node> subs;\n     //! The Script context for this node. Either P2WSH or Tapscript.\n-    const MiniscriptContext m_script_ctx;\n+    MiniscriptContext m_script_ctx;\n \n-    /* Destroy the shared pointers iteratively to avoid a stack-overflow due to recursive calls\n-     * to the subs' destructors. */\n-    ~Node() {\n+    // Permit 1 level deep recursion since we own instances of our own type.\n+    // NOLINTBEGIN(misc-no-recursion)\n+    ~Node()\n+    {\n+        // Destroy the subexpressions iteratively after moving out their\n+        // subexpressions to avoid a stack-overflow due to recursive calls to\n+        // the subs' destructors.\n         while (!subs.empty()) {\n             auto node = std::move(subs.back());\n             subs.pop_back();\n-            while (!node->subs.empty()) {\n-                subs.push_back(std::move(node->subs.back()));\n-                node->subs.pop_back();\n+            while (!node.subs.empty()) {\n+                subs.emplace_back(std::move(node.subs.back()));\n+                node.subs.pop_back();\n             }\n         }\n     }\n+    // NOLINTEND(misc-no-recursion)\n \n-    NodeRef<Key> Clone() const\n+    Node<Key> Clone() const\n     {\n         // Use TreeEval() to avoid a stack-overflow due to recursion\n-        auto upfn = [](const Node& node, std::span<NodeRef<Key>> children) {\n-            std::vector<NodeRef<Key>> new_subs;\n-            for (auto child = children.begin(); child != children.end(); ++child) {\n-                new_subs.emplace_back(std::move(*child));\n+        auto upfn = [](const Node& node, std::span<Node> children) {\n+            std::vector<Node> new_subs;\n+            for (auto& child : children) {\n+                // It's fine to move from children as they are new nodes having\n+                // been produced by calling this function one level down.\n+                new_subs.emplace_back(std::move(child));\n             }\n-            // std::make_unique (and therefore MakeNodeRef) doesn't work on private constructors\n-            return std::unique_ptr<Node>{new Node{internal::NoDupCheck{}, node.m_script_ctx, node.fragment, std::move(new_subs), node.keys, node.data, node.k}};\n+            return Node{internal::NoDupCheck{}, node.m_script_ctx, node.fragment, std::move(new_subs), node.keys, node.data, node.k};\n         };\n-        return TreeEval<NodeRef<Key>>(upfn);\n+        return TreeEval<Node>(upfn);\n     }\n \n private:\n     //! Cached ops counts.\n-    const internal::Ops ops;\n+    internal::Ops ops;\n     //! Cached stack size bounds.\n-    const internal::StackSize ss;\n+    internal::StackSize ss;\n     //! Cached witness size bounds.\n-    const internal::WitnessSize ws;\n+    internal::WitnessSize ws;\n     //! Cached expression type (computed by CalcType and fed through SanitizeType).\n-    const Type typ;\n+    Type typ;\n     //! Cached script length (computed by CalcScriptLen).\n-    const size_t scriptlen;\n+    size_t scriptlen;\n     //! Whether a public key appears more than once in this node. This value is initialized\n     //! by all constructors except the NoDupCheck ones. The NoDupCheck ones skip the\n     //! computation, requiring it to be done manually by invoking DuplicateKeyCheck().",
      "path": "src/script/miniscript.h",
      "position": 208,
      "original_position": 138,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "5e4573adda107e6bfad6ba1afb417fdb4fdc81ed",
      "in_reply_to_id": 2161634475,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Good find, but would rather leave that for another PR. This one has ballooned enough IMO just from wanting to remove `unique_ptr`.",
      "created_at": "2025-06-24T12:40:03Z",
      "updated_at": "2025-06-24T19:23:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2163882445",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2163882445"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 601,
      "original_line": 601,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2163883968",
      "pull_request_review_id": 2952377149,
      "id": 2163883968,
      "node_id": "PRRC_kwDOABII586A-j_A",
      "diff_hunk": "@@ -346,9 +345,10 @@ void SatisfactionToWitness(miniscript::MiniscriptContext ctx, CScriptWitness& wi\n \n struct MiniScriptTest : BasicTestingSetup {\n /** Run random satisfaction tests. */\n-void TestSatisfy(const KeyConverter& converter, const std::string& testcase, const NodeRef& node) {\n-    auto script = node->ToScript(converter);\n-    const auto challenges{FindChallenges(node.get())}; // Find all challenges in the generated miniscript.\n+void TestSatisfy(const KeyConverter& converter, const std::string& testcase, const Node& node)",
      "path": "src/test/miniscript_tests.cpp",
      "position": 1,
      "original_position": 35,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "original_commit_id": "5e4573adda107e6bfad6ba1afb417fdb4fdc81ed",
      "in_reply_to_id": 2161695989,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "It was added as a parameter when the function was introduced in 22c5b00345063bdeb8b6d3da8b5692d18f92bfb7 but I couldn't find any commit where we started using it. Removed.",
      "created_at": "2025-06-24T12:40:40Z",
      "updated_at": "2025-06-24T19:23:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2163883968",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2163883968"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 348,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2163902346",
      "pull_request_review_id": 2952377149,
      "id": 2163902346,
      "node_id": "PRRC_kwDOABII586A-oeK",
      "diff_hunk": "@@ -503,17 +503,17 @@ struct NoDupCheck {};\n template<typename Key>\n struct Node {\n     //! What node type this node is.\n-    const Fragment fragment;\n+    Fragment fragment;",
      "path": "src/script/miniscript.h",
      "position": 1,
      "original_position": 41,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "original_commit_id": "c04b7b490e0c63942000472ea9f918df326c5b00",
      "in_reply_to_id": 2160344023,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Variant of this done as part of: a41db39bf87303d8a8173db56d0020c491239d38.",
      "created_at": "2025-06-24T12:46:26Z",
      "updated_at": "2025-06-24T19:28:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2163902346",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2163902346"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 516,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2163905772",
      "pull_request_review_id": 2952377149,
      "id": 2163905772,
      "node_id": "PRRC_kwDOABII586A-pTs",
      "diff_hunk": "@@ -349,8 +342,8 @@ struct InputResult {\n //! Class whose objects represent the maximum of a list of integers.\n template<typename I>\n struct MaxInt {\n-    const bool valid;\n-    const I value;\n+    bool valid;\n+    I value;",
      "path": "src/script/miniscript.h",
      "position": 37,
      "original_position": 21,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "5e4573adda107e6bfad6ba1afb417fdb4fdc81ed",
      "in_reply_to_id": 2161874319,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "See response to https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2160344023.",
      "created_at": "2025-06-24T12:47:05Z",
      "updated_at": "2025-06-24T19:23:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2163905772",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2163905772"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": 365,
      "original_start_line": 345,
      "start_side": "RIGHT",
      "line": 366,
      "original_line": 366,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2163906894",
      "pull_request_review_id": 2952377149,
      "id": 2163906894,
      "node_id": "PRRC_kwDOABII586A-plO",
      "diff_hunk": "@@ -421,11 +414,11 @@ struct Ops {\n  */\n struct SatInfo {\n     //! Whether a canonical satisfaction/dissatisfaction is possible at all.\n-    const bool valid;\n+    bool valid;",
      "path": "src/script/miniscript.h",
      "position": 58,
      "original_position": 30,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "5e4573adda107e6bfad6ba1afb417fdb4fdc81ed",
      "in_reply_to_id": 2161874482,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "See response to https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2160344023.",
      "created_at": "2025-06-24T12:47:22Z",
      "updated_at": "2025-06-24T19:23:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2163906894",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2163906894"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 442,
      "original_line": 442,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2163967956",
      "pull_request_review_id": 2952377149,
      "id": 2163967956,
      "node_id": "PRRC_kwDOABII586A-4fU",
      "diff_hunk": "@@ -2048,40 +2051,40 @@ inline NodeRef<Key> Parse(std::span<const char> in, const Ctx& ctx)\n             break;\n         }\n         case ParseContext::ALT: {\n-            constructed.back() = MakeNodeRef<Key>(internal::NoDupCheck{}, ctx.MsContext(), Fragment::WRAP_A, Vector(std::move(constructed.back())));\n+            constructed.back() = Node{internal::NoDupCheck{}, ctx.MsContext(), Fragment::WRAP_A, Vector(std::move(constructed.back()))};\n             break;\n         }\n         case ParseContext::SWAP: {\n-            constructed.back() = MakeNodeRef<Key>(internal::NoDupCheck{}, ctx.MsContext(), Fragment::WRAP_S, Vector(std::move(constructed.back())));\n+            constructed.back() = Node{internal::NoDupCheck{}, ctx.MsContext(), Fragment::WRAP_S, Vector(std::move(constructed.back()))};\n             break;\n         }\n         case ParseContext::CHECK: {\n-            constructed.back() = MakeNodeRef<Key>(internal::NoDupCheck{}, ctx.MsContext(), Fragment::WRAP_C, Vector(std::move(constructed.back())));\n+            constructed.back() = Node{internal::NoDupCheck{}, ctx.MsContext(), Fragment::WRAP_C, Vector(std::move(constructed.back()))};\n             break;\n         }\n         case ParseContext::DUP_IF: {\n-            constructed.back() = MakeNodeRef<Key>(internal::NoDupCheck{}, ctx.MsContext(), Fragment::WRAP_D, Vector(std::move(constructed.back())));\n+            constructed.back() = Node{internal::NoDupCheck{}, ctx.MsContext(), Fragment::WRAP_D, Vector(std::move(constructed.back()))};\n             break;\n         }\n         case ParseContext::NON_ZERO: {\n-            constructed.back() = MakeNodeRef<Key>(internal::NoDupCheck{}, ctx.MsContext(), Fragment::WRAP_J, Vector(std::move(constructed.back())));\n+            constructed.back() = Node{internal::NoDupCheck{}, ctx.MsContext(), Fragment::WRAP_J, Vector(std::move(constructed.back()))};\n             break;\n         }\n         case ParseContext::ZERO_NOTEQUAL: {\n-            constructed.back() = MakeNodeRef<Key>(internal::NoDupCheck{}, ctx.MsContext(), Fragment::WRAP_N, Vector(std::move(constructed.back())));\n+            constructed.back() = Node{internal::NoDupCheck{}, ctx.MsContext(), Fragment::WRAP_N, Vector(std::move(constructed.back()))};\n             break;\n         }\n         case ParseContext::VERIFY: {\n-            script_size += (constructed.back()->GetType() << \"x\"_mst);\n-            constructed.back() = MakeNodeRef<Key>(internal::NoDupCheck{}, ctx.MsContext(), Fragment::WRAP_V, Vector(std::move(constructed.back())));\n+            script_size += (constructed.back().GetType() << \"x\"_mst);\n+            constructed.back() = Node{internal::NoDupCheck{}, ctx.MsContext(), Fragment::WRAP_V, Vector(std::move(constructed.back()))};\n             break;\n         }\n         case ParseContext::WRAP_U: {\n-            constructed.back() = MakeNodeRef<Key>(internal::NoDupCheck{}, ctx.MsContext(), Fragment::OR_I, Vector(std::move(constructed.back()), MakeNodeRef<Key>(internal::NoDupCheck{}, ctx.MsContext(), Fragment::JUST_0)));\n+            constructed.back() = Node{internal::NoDupCheck{}, ctx.MsContext(), Fragment::OR_I, Vector(std::move(constructed.back()), Node<Key>(internal::NoDupCheck{}, ctx.MsContext(), Fragment::JUST_0))};\n             break;\n         }\n         case ParseContext::WRAP_T: {\n-            constructed.back() = MakeNodeRef<Key>(internal::NoDupCheck{}, ctx.MsContext(), Fragment::AND_V, Vector(std::move(constructed.back()), MakeNodeRef<Key>(internal::NoDupCheck{}, ctx.MsContext(), Fragment::JUST_1)));\n+            constructed.back() = Node{internal::NoDupCheck{}, ctx.MsContext(), Fragment::AND_V, Vector(std::move(constructed.back()), Node<Key>(internal::NoDupCheck{}, ctx.MsContext(), Fragment::JUST_1))};",
      "path": "src/script/miniscript.h",
      "position": 1,
      "original_position": 752,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "original_commit_id": "5e4573adda107e6bfad6ba1afb417fdb4fdc81ed",
      "in_reply_to_id": 2161887437,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Broke out removal of `NodeRef` & `MakeNodeRef()` into its own commit: c4d30115f5cefe3945ac8b69c021a551eb2b6a72.",
      "created_at": "2025-06-24T13:11:19Z",
      "updated_at": "2025-06-24T19:29:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2163967956",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2163967956"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2087,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2163971650",
      "pull_request_review_id": 2952377149,
      "id": 2163971650,
      "node_id": "PRRC_kwDOABII586A-5ZC",
      "diff_hunk": "@@ -961,24 +956,24 @@ NodeRef GenNode(MsCtx script_ctx, F ConsumeNode, Type root_type, bool strict_val\n         } else {\n             // The back of todo has fragment and number of children decided, and\n             // those children have been constructed at the back of stack. Pop\n-            // that entry off todo, and use it to construct a new NodeRef on\n+            // that entry off todo, and use it to construct a new Node on\n             // stack.\n             NodeInfo& info = *todo.back().second;\n             // Gather children from the back of stack.\n-            std::vector<NodeRef> sub;\n+            std::vector<Node> sub;\n             sub.reserve(info.subtypes.size());\n             for (size_t i = 0; i < info.subtypes.size(); ++i) {\n                 sub.push_back(std::move(*(stack.end() - info.subtypes.size() + i)));\n             }\n             stack.erase(stack.end() - info.subtypes.size(), stack.end());\n-            // Construct new NodeRef.\n-            NodeRef node;\n+            // Construct new Node.",
      "path": "src/test/fuzz/miniscript.cpp",
      "position": 67,
      "original_position": 62,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "5e4573adda107e6bfad6ba1afb417fdb4fdc81ed",
      "in_reply_to_id": 2161891082,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The comments around this code seem to be introducing different phases of the code. I'd rather not rip one out and leave the other ones there, so not touching for now.",
      "created_at": "2025-06-24T13:13:03Z",
      "updated_at": "2025-06-24T19:23:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2163971650",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2163971650"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 971,
      "original_line": 971,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2163972682",
      "pull_request_review_id": 2952377149,
      "id": 2163972682,
      "node_id": "PRRC_kwDOABII586A-5pK",
      "diff_hunk": "@@ -961,24 +956,24 @@ NodeRef GenNode(MsCtx script_ctx, F ConsumeNode, Type root_type, bool strict_val\n         } else {\n             // The back of todo has fragment and number of children decided, and\n             // those children have been constructed at the back of stack. Pop\n-            // that entry off todo, and use it to construct a new NodeRef on\n+            // that entry off todo, and use it to construct a new Node on\n             // stack.\n             NodeInfo& info = *todo.back().second;\n             // Gather children from the back of stack.\n-            std::vector<NodeRef> sub;\n+            std::vector<Node> sub;\n             sub.reserve(info.subtypes.size());\n             for (size_t i = 0; i < info.subtypes.size(); ++i) {\n                 sub.push_back(std::move(*(stack.end() - info.subtypes.size() + i)));\n             }\n             stack.erase(stack.end() - info.subtypes.size(), stack.end());\n-            // Construct new NodeRef.\n-            NodeRef node;\n+            // Construct new Node.\n+            std::optional<Node> node;\n             if (info.keys.empty()) {\n-                node = MakeNodeRef(script_ctx, info.fragment, std::move(sub), std::move(info.hash), info.k);\n+                node = Node{miniscript::internal::NoDupCheck{}, script_ctx, info.fragment, std::move(sub), std::move(info.hash), info.k};",
      "path": "src/test/fuzz/miniscript.cpp",
      "position": 1,
      "original_position": 66,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "original_commit_id": "5e4573adda107e6bfad6ba1afb417fdb4fdc81ed",
      "in_reply_to_id": 2161892692,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done, see reply to https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2161887437.",
      "created_at": "2025-06-24T13:13:32Z",
      "updated_at": "2025-06-24T19:23:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2163972682",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2163972682"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 972,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2163987318",
      "pull_request_review_id": 2952377149,
      "id": 2163987318,
      "node_id": "PRRC_kwDOABII586A-9N2",
      "diff_hunk": "@@ -188,13 +188,6 @@ inline consteval Type operator\"\"_mst(const char* c, size_t l)\n \n using Opcode = std::pair<opcodetype, std::vector<unsigned char>>;\n \n-template<typename Key> struct Node;\n-template<typename Key> using NodeRef = std::unique_ptr<const Node<Key>>;\n-\n-//! Construct a miniscript node as a unique_ptr.\n-template<typename Key, typename... Args>",
      "path": "src/script/miniscript.h",
      "position": 8,
      "original_position": 8,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "5e4573adda107e6bfad6ba1afb417fdb4fdc81ed",
      "in_reply_to_id": 2160336850,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Broke out removal of `NodeRef` & `MakeNodeRef()`  as mentioned in other comment.\r\n\r\nLet me know if you still see potential in for a non-contrived scripted diff.",
      "created_at": "2025-06-24T13:19:41Z",
      "updated_at": "2025-06-24T19:23:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2163987318",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2163987318"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 197,
      "original_line": 197,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2164001056",
      "pull_request_review_id": 2952377149,
      "id": 2164001056,
      "node_id": "PRRC_kwDOABII586A_Akg",
      "diff_hunk": "@@ -523,25 +518,27 @@ struct Node {\n         while (!subs.empty()) {\n             auto node = std::move(subs.back());\n             subs.pop_back();\n-            while (!node->subs.empty()) {\n-                subs.push_back(std::move(node->subs.back()));\n-                node->subs.pop_back();\n+            while (!node.subs.empty()) {\n+                subs.emplace_back(std::move(node.subs.back()));",
      "path": "src/script/miniscript.h",
      "position": 1,
      "original_position": 36,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "original_commit_id": "5e4573adda107e6bfad6ba1afb417fdb4fdc81ed",
      "in_reply_to_id": 2160337340,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Agree I went overboard in those 3 cases, :+1: reverted.",
      "created_at": "2025-06-24T13:23:59Z",
      "updated_at": "2025-06-24T19:23:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2164001056",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2164001056"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 522,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2165966175",
      "pull_request_review_id": 2956921144,
      "id": 2165966175,
      "node_id": "PRRC_kwDOABII586BGgVf",
      "diff_hunk": "@@ -727,4 +727,21 @@ BOOST_AUTO_TEST_CASE(fixed_tests)\n     g_testdata.reset();\n }\n \n+// Confirm that ~Node() and Node::Clone() are stack-safe.\n+BOOST_AUTO_TEST_CASE(node_deep_destruct)\n+{\n+    using miniscript::internal::NoDupCheck;\n+    using miniscript::Fragment;\n+    using NodeU32 = miniscript::Node<uint32_t>;\n+\n+    constexpr auto ctx{miniscript::MiniscriptContext::P2WSH};\n+\n+    NodeU32 root{NoDupCheck{}, ctx, Fragment::JUST_1};\n+    for (uint32_t i{0}; i < 1000'000; ++i) {\n+        root = NodeU32{NoDupCheck{}, ctx, Fragment::WRAP_S, Vector(std::move(root))};\n+    }\n+\n+    root.Clone();",
      "path": "src/test/miniscript_tests.cpp",
      "position": 1,
      "original_position": 196,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "original_commit_id": "f22f4f75e252e4f2171af34e4f92f3e6a396f227",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "+1 for the example in the commit message (if you touch again consider reducing the indentation)\r\nwe could even lightly validate the clone here by comparing the two depths for good measure",
      "created_at": "2025-06-25T07:09:12Z",
      "updated_at": "2025-06-25T07:53:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2165966175",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2165966175"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 744,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2165968443",
      "pull_request_review_id": 2956921144,
      "id": 2165968443,
      "node_id": "PRRC_kwDOABII586BGg47",
      "diff_hunk": "@@ -727,4 +727,21 @@ BOOST_AUTO_TEST_CASE(fixed_tests)\n     g_testdata.reset();\n }\n \n+// Confirm that ~Node() and Node::Clone() are stack-safe.\n+BOOST_AUTO_TEST_CASE(node_deep_destruct)\n+{\n+    using miniscript::internal::NoDupCheck;\n+    using miniscript::Fragment;\n+    using NodeU32 = miniscript::Node<uint32_t>;\n+\n+    constexpr auto ctx{miniscript::MiniscriptContext::P2WSH};\n+\n+    NodeU32 root{NoDupCheck{}, ctx, Fragment::JUST_1};\n+    for (uint32_t i{0}; i < 1000'000; ++i) {",
      "path": "src/test/miniscript_tests.cpp",
      "position": 1,
      "original_position": 192,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "original_commit_id": "f22f4f75e252e4f2171af34e4f92f3e6a396f227",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "```suggestion\r\n    for (uint32_t i{0}; i < 1'000'000; ++i) {\r\n```\r\n(locally `100'000` is enough for me to reproduce the failure with incorrect destructor and clone - this test may be too heavy otherwise)",
      "created_at": "2025-06-25T07:10:17Z",
      "updated_at": "2025-06-25T07:53:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2165968443",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2165968443"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 740,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2165970378",
      "pull_request_review_id": 2956921144,
      "id": 2165970378,
      "node_id": "PRRC_kwDOABII586BGhXK",
      "diff_hunk": "@@ -1166,28 +1161,28 @@ void TestNode(const MsCtx script_ctx, const NodeRef& node, FuzzedDataProvider& p\n         return sig_ptr != nullptr && sig_ptr->second;\n     };\n     bool satisfiable = node->IsSatisfiable([&](const Node& node) -> bool {\n-        switch (node.fragment) {\n+        switch (node.GetFragment()) {\n         case Fragment::PK_K:\n         case Fragment::PK_H:\n-            return is_key_satisfiable(node.keys[0]);\n+            return is_key_satisfiable(node.GetKeys()[0]);\n         case Fragment::MULTI:\n         case Fragment::MULTI_A: {\n-            size_t sats = std::count_if(node.keys.begin(), node.keys.end(), [&](const auto& key) {\n+            size_t sats = std::ranges::count_if(node.GetKeys(), [&](const auto& key) {\n                 return size_t(is_key_satisfiable(key));\n             });\n-            return sats >= node.k;\n+            return sats >= node.GetK();\n         }\n         case Fragment::OLDER:\n         case Fragment::AFTER:\n-            return node.k & 1;\n+            return node.GetK() & 1;",
      "path": "src/test/fuzz/miniscript.cpp",
      "position": 1,
      "original_position": 135,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "original_commit_id": "f22f4f75e252e4f2171af34e4f92f3e6a396f227",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "when do you use a `Get` prefix and when just a capitalized field name?",
      "created_at": "2025-06-25T07:11:23Z",
      "updated_at": "2025-06-25T07:53:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2165970378",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2165970378"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1177,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2165970650",
      "pull_request_review_id": 2956921144,
      "id": 2165970650,
      "node_id": "PRRC_kwDOABII586BGhba",
      "diff_hunk": "@@ -1166,28 +1161,28 @@ void TestNode(const MsCtx script_ctx, const NodeRef& node, FuzzedDataProvider& p\n         return sig_ptr != nullptr && sig_ptr->second;\n     };\n     bool satisfiable = node->IsSatisfiable([&](const Node& node) -> bool {\n-        switch (node.fragment) {\n+        switch (node.GetFragment()) {\n         case Fragment::PK_K:\n         case Fragment::PK_H:\n-            return is_key_satisfiable(node.keys[0]);\n+            return is_key_satisfiable(node.GetKeys()[0]);\n         case Fragment::MULTI:\n         case Fragment::MULTI_A: {\n-            size_t sats = std::count_if(node.keys.begin(), node.keys.end(), [&](const auto& key) {\n+            size_t sats = std::ranges::count_if(node.GetKeys(), [&](const auto& key) {",
      "path": "src/test/fuzz/miniscript.cpp",
      "position": 1,
      "original_position": 126,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "original_commit_id": "f22f4f75e252e4f2171af34e4f92f3e6a396f227",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "ðŸ‘ ",
      "created_at": "2025-06-25T07:11:30Z",
      "updated_at": "2025-06-25T07:53:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2165970650",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2165970650"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1170,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2165978531",
      "pull_request_review_id": 2956921144,
      "id": 2165978531,
      "node_id": "PRRC_kwDOABII586BGjWj",
      "diff_hunk": "@@ -515,9 +515,11 @@ struct Node {\n     //! The Script context for this node. Either P2WSH or Tapscript.\n     const MiniscriptContext m_script_ctx;\n \n-    /* Destroy the shared pointers iteratively to avoid a stack-overflow due to recursive calls\n-     * to the subs' destructors. */\n-    ~Node() {\n+    ~Node()\n+    {\n+        // Destroy the subexpressions iteratively after moving out their\n+        // subexpressions to avoid a stack-overflow due to recursive calls to\n+        // the subs' destructors.",
      "path": "src/script/miniscript.h",
      "position": 147,
      "original_position": 11,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "db2ede082836fe27ddae62e6e6e6803aa92ee45b",
      "in_reply_to_id": 2160320908,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Nice, I like the new one a lot more (moving the whole subs vector instead of one-by-one)!\r\nOne small nit: I think I'd prefer the flattening metaphor rather than the stripping one",
      "created_at": "2025-06-25T07:15:24Z",
      "updated_at": "2025-06-25T07:53:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2165978531",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2165978531"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 554,
      "original_line": 554,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2165984170",
      "pull_request_review_id": 2956921144,
      "id": 2165984170,
      "node_id": "PRRC_kwDOABII586BGkuq",
      "diff_hunk": "@@ -479,11 +483,16 @@ struct SatInfo {\n     static constexpr SatInfo OP_VERIFY() noexcept { return {1, 1}; }\n };\n \n-struct StackSize {\n-    const SatInfo sat, dsat;\n+class StackSize\n+{\n+    SatInfo sat, dsat;\n \n+public:\n     constexpr StackSize(SatInfo in_sat, SatInfo in_dsat) noexcept : sat(in_sat), dsat(in_dsat) {};\n     constexpr StackSize(SatInfo in_both) noexcept : sat(in_both), dsat(in_both) {};\n+\n+    const SatInfo& Sat() const { return sat; }",
      "path": "src/script/miniscript.h",
      "position": 96,
      "original_position": 85,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "f22f4f75e252e4f2171af34e4f92f3e6a396f227",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: unless there's a good reason, I'd unify the `Get`/`Is` prefixes (I actually prefer without anything here) and consider `noexcept` for these as well",
      "created_at": "2025-06-25T07:18:04Z",
      "updated_at": "2025-06-25T07:53:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2165984170",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2165984170"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 513,
      "original_line": 513,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2165989320",
      "pull_request_review_id": 2956921144,
      "id": 2165989320,
      "node_id": "PRRC_kwDOABII586BGl_I",
      "diff_hunk": "@@ -347,14 +347,19 @@ struct InputResult {\n };\n \n //! Class whose objects represent the maximum of a list of integers.\n-template<typename I>\n-struct MaxInt {\n-    const bool valid;\n-    const I value;\n+template <typename I>\n+class MaxInt\n+{\n+    bool valid;\n+    I value;\n \n+public:\n     MaxInt() : valid(false), value(0) {}\n     MaxInt(I val) : valid(true), value(val) {}\n \n+    bool IsValid() const { return valid; }",
      "path": "src/script/miniscript.h",
      "position": 1,
      "original_position": 27,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "original_commit_id": "a41db39bf87303d8a8173db56d0020c491239d38",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: I'm repeating myself a bit, but not sure why some getters have prefixes",
      "created_at": "2025-06-25T07:21:00Z",
      "updated_at": "2025-06-25T07:53:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2165989320",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2165989320"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 360,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2165991247",
      "pull_request_review_id": 2956921144,
      "id": 2165991247,
      "node_id": "PRRC_kwDOABII586BGmdP",
      "diff_hunk": "@@ -544,17 +562,23 @@ struct Node {\n         return TreeEval<NodeRef<Key>>(upfn);\n     }\n \n+    Fragment GetFragment() const { return fragment; }\n+    uint32_t GetK() const { return k; }\n+    const std::vector<Key>& GetKeys() const { return keys; }",
      "path": "src/script/miniscript.h",
      "position": 1,
      "original_position": 123,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "original_commit_id": "a41db39bf87303d8a8173db56d0020c491239d38",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "do we need to return vectors here? Seems overly specific, I think spans should also suffice here",
      "created_at": "2025-06-25T07:22:03Z",
      "updated_at": "2025-06-25T07:53:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2165991247",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2165991247"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 567,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2165997765",
      "pull_request_review_id": 2956921144,
      "id": 2165997765,
      "node_id": "PRRC_kwDOABII586BGoDF",
      "diff_hunk": "@@ -189,11 +189,11 @@ inline consteval Type operator\"\"_mst(const char* c, size_t l)\n using Opcode = std::pair<opcodetype, std::vector<unsigned char>>;\n \n template<typename Key> class Node;\n-template<typename Key> using NodeRef = std::unique_ptr<Node<Key>>;\n+template<typename Key> using NodeRef = Node<Key>; // <- removed in next commit",
      "path": "src/script/miniscript.h",
      "position": 1,
      "original_position": 5,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "original_commit_id": "1784cfaa13851e6c1b3241ec688cd7c8bfaf1a66",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "ðŸ‘ - if you touch again, consider adding a `TODO` prefix to make sure we get a warning from the linters or the IDE if we accidentally leave them there",
      "created_at": "2025-06-25T07:25:33Z",
      "updated_at": "2025-06-25T07:53:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2165997765",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2165997765"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 192,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2166003533",
      "pull_request_review_id": 2956921144,
      "id": 2166003533,
      "node_id": "PRRC_kwDOABII586BGpdN",
      "diff_hunk": "@@ -851,12 +852,12 @@ std::optional<NodeInfo> ConsumeNodeSmart(MsCtx script_ctx, FuzzedDataProvider& p\n  * Generate a Miniscript node based on the fuzzer's input.\n  *\n  * - ConsumeNode is a function object taking a Type, and returning an std::optional<NodeInfo>.\n- * - root_type is the required type properties of the constructed NodeRef.\n+ * - root_type is the required type properties of the constructed Node.\n  * - strict_valid sets whether ConsumeNode is expected to guarantee a NodeInfo that results in\n- *   a NodeRef whose Type() matches the type fed to ConsumeNode.\n+ *   a Node whose Type() matches the type fed to ConsumeNode.",
      "path": "src/test/fuzz/miniscript.cpp",
      "position": 33,
      "original_position": 16,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "1784cfaa13851e6c1b3241ec688cd7c8bfaf1a66",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Nit: would this be more accurate?\r\n```suggestion\r\n *   an std::optional<Node> whose Type() matches the type fed to ConsumeNode.\r\n```",
      "created_at": "2025-06-25T07:28:30Z",
      "updated_at": "2025-06-25T07:53:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2166003533",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2166003533"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 852,
      "original_line": 852,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2166006384",
      "pull_request_review_id": 2956921144,
      "id": 2166006384,
      "node_id": "PRRC_kwDOABII586BGqJw",
      "diff_hunk": "@@ -961,24 +956,24 @@ NodeRef GenNode(MsCtx script_ctx, F ConsumeNode, Type root_type, bool strict_val\n         } else {\n             // The back of todo has fragment and number of children decided, and\n             // those children have been constructed at the back of stack. Pop\n-            // that entry off todo, and use it to construct a new NodeRef on\n+            // that entry off todo, and use it to construct a new Node on\n             // stack.\n             NodeInfo& info = *todo.back().second;\n             // Gather children from the back of stack.\n-            std::vector<NodeRef> sub;\n+            std::vector<Node> sub;\n             sub.reserve(info.subtypes.size());\n             for (size_t i = 0; i < info.subtypes.size(); ++i) {\n                 sub.push_back(std::move(*(stack.end() - info.subtypes.size() + i)));\n             }\n             stack.erase(stack.end() - info.subtypes.size(), stack.end());\n-            // Construct new NodeRef.\n-            NodeRef node;\n+            // Construct new Node.",
      "path": "src/test/fuzz/miniscript.cpp",
      "position": 67,
      "original_position": 62,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "5e4573adda107e6bfad6ba1afb417fdb4fdc81ed",
      "in_reply_to_id": 2161891082,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Hmm, this isn't even an optional, since it always receives a value, right?\r\nWe could use an IIFE instead:\r\n```C++\r\nNode node{[&] {\r\n    if (info.keys.empty()) {\r\n        return {miniscript::internal::NoDupCheck{}, script_ctx, info.fragment, std::move(sub), std::move(info.hash), info.k};\r\n    }\r\n    assert(sub.empty());\r\n    assert(info.hash.empty());\r\n    return {miniscript::internal::NoDupCheck{}, script_ctx, info.fragment, std::move(info.keys), info.k};\r\n}()};\r\n```",
      "created_at": "2025-06-25T07:30:01Z",
      "updated_at": "2025-06-25T07:53:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2166006384",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2166006384"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 971,
      "original_line": 971,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2166635000",
      "pull_request_review_id": 2958021720,
      "id": 2166635000,
      "node_id": "PRRC_kwDOABII586BJDn4",
      "diff_hunk": "@@ -727,4 +727,21 @@ BOOST_AUTO_TEST_CASE(fixed_tests)\n     g_testdata.reset();\n }\n \n+// Confirm that ~Node() and Node::Clone() are stack-safe.\n+BOOST_AUTO_TEST_CASE(node_deep_destruct)\n+{\n+    using miniscript::internal::NoDupCheck;\n+    using miniscript::Fragment;\n+    using NodeU32 = miniscript::Node<uint32_t>;\n+\n+    constexpr auto ctx{miniscript::MiniscriptContext::P2WSH};\n+\n+    NodeU32 root{NoDupCheck{}, ctx, Fragment::JUST_1};\n+    for (uint32_t i{0}; i < 1000'000; ++i) {",
      "path": "src/test/miniscript_tests.cpp",
      "position": 1,
      "original_position": 192,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "original_commit_id": "f22f4f75e252e4f2171af34e4f92f3e6a396f227",
      "in_reply_to_id": 2165968443,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "`100'000` isn't sufficient for my configuration with an empty destructor. But `200'000` was for both, decreased.",
      "created_at": "2025-06-25T12:47:44Z",
      "updated_at": "2025-06-25T12:47:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2166635000",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2166635000"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 740,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2166642150",
      "pull_request_review_id": 2958032905,
      "id": 2166642150,
      "node_id": "PRRC_kwDOABII586BJFXm",
      "diff_hunk": "@@ -727,4 +727,21 @@ BOOST_AUTO_TEST_CASE(fixed_tests)\n     g_testdata.reset();\n }\n \n+// Confirm that ~Node() and Node::Clone() are stack-safe.\n+BOOST_AUTO_TEST_CASE(node_deep_destruct)\n+{\n+    using miniscript::internal::NoDupCheck;\n+    using miniscript::Fragment;\n+    using NodeU32 = miniscript::Node<uint32_t>;\n+\n+    constexpr auto ctx{miniscript::MiniscriptContext::P2WSH};\n+\n+    NodeU32 root{NoDupCheck{}, ctx, Fragment::JUST_1};\n+    for (uint32_t i{0}; i < 1000'000; ++i) {\n+        root = NodeU32{NoDupCheck{}, ctx, Fragment::WRAP_S, Vector(std::move(root))};\n+    }\n+\n+    root.Clone();",
      "path": "src/test/miniscript_tests.cpp",
      "position": 1,
      "original_position": 196,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "original_commit_id": "f22f4f75e252e4f2171af34e4f92f3e6a396f227",
      "in_reply_to_id": 2165966175,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "* Reduced indentation in commit message.\r\n* Added validation of the `ScriptSize()` to the test which is a value that depends on child nodes.",
      "created_at": "2025-06-25T12:51:15Z",
      "updated_at": "2025-06-25T13:17:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2166642150",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2166642150"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 744,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2166647841",
      "pull_request_review_id": 2958032905,
      "id": 2166647841,
      "node_id": "PRRC_kwDOABII586BJGwh",
      "diff_hunk": "@@ -189,11 +189,11 @@ inline consteval Type operator\"\"_mst(const char* c, size_t l)\n using Opcode = std::pair<opcodetype, std::vector<unsigned char>>;\n \n template<typename Key> class Node;\n-template<typename Key> using NodeRef = std::unique_ptr<Node<Key>>;\n+template<typename Key> using NodeRef = Node<Key>; // <- removed in next commit",
      "path": "src/script/miniscript.h",
      "position": 1,
      "original_position": 5,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "original_commit_id": "1784cfaa13851e6c1b3241ec688cd7c8bfaf1a66",
      "in_reply_to_id": 2165997765,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done.",
      "created_at": "2025-06-25T12:54:02Z",
      "updated_at": "2025-06-25T13:17:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2166647841",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2166647841"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 192,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2166650264",
      "pull_request_review_id": 2958032905,
      "id": 2166650264,
      "node_id": "PRRC_kwDOABII586BJHWY",
      "diff_hunk": "@@ -544,17 +562,23 @@ struct Node {\n         return TreeEval<NodeRef<Key>>(upfn);\n     }\n \n+    Fragment GetFragment() const { return fragment; }\n+    uint32_t GetK() const { return k; }\n+    const std::vector<Key>& GetKeys() const { return keys; }",
      "path": "src/script/miniscript.h",
      "position": 1,
      "original_position": 123,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "original_commit_id": "a41db39bf87303d8a8173db56d0020c491239d38",
      "in_reply_to_id": 2165991247,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I prefer leaving up to the client of the interface to choose which type they want to switch to.",
      "created_at": "2025-06-25T12:55:11Z",
      "updated_at": "2025-06-25T13:17:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2166650264",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2166650264"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 567,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2166653825",
      "pull_request_review_id": 2958032905,
      "id": 2166653825,
      "node_id": "PRRC_kwDOABII586BJIOB",
      "diff_hunk": "@@ -479,11 +483,16 @@ struct SatInfo {\n     static constexpr SatInfo OP_VERIFY() noexcept { return {1, 1}; }\n };\n \n-struct StackSize {\n-    const SatInfo sat, dsat;\n+class StackSize\n+{\n+    SatInfo sat, dsat;\n \n+public:\n     constexpr StackSize(SatInfo in_sat, SatInfo in_dsat) noexcept : sat(in_sat), dsat(in_dsat) {};\n     constexpr StackSize(SatInfo in_both) noexcept : sat(in_both), dsat(in_both) {};\n+\n+    const SatInfo& Sat() const { return sat; }",
      "path": "src/script/miniscript.h",
      "position": 96,
      "original_position": 85,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "f22f4f75e252e4f2171af34e4f92f3e6a396f227",
      "in_reply_to_id": 2165984170,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Regarding naming of accessors: There is some precedent in `Node::IsValid()`. But I also prefer it without prefixes - updated.\r\n\r\nRegarding `noexcept`: The compiler should be able to infer `noexcept` by itself for simple accessors, so would rather avoid that noise.",
      "created_at": "2025-06-25T12:56:54Z",
      "updated_at": "2025-06-25T13:17:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2166653825",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2166653825"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 513,
      "original_line": 513,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2166695337",
      "pull_request_review_id": 2958032905,
      "id": 2166695337,
      "node_id": "PRRC_kwDOABII586BJSWp",
      "diff_hunk": "@@ -851,12 +852,12 @@ std::optional<NodeInfo> ConsumeNodeSmart(MsCtx script_ctx, FuzzedDataProvider& p\n  * Generate a Miniscript node based on the fuzzer's input.\n  *\n  * - ConsumeNode is a function object taking a Type, and returning an std::optional<NodeInfo>.\n- * - root_type is the required type properties of the constructed NodeRef.\n+ * - root_type is the required type properties of the constructed Node.\n  * - strict_valid sets whether ConsumeNode is expected to guarantee a NodeInfo that results in\n- *   a NodeRef whose Type() matches the type fed to ConsumeNode.\n+ *   a Node whose Type() matches the type fed to ConsumeNode.",
      "path": "src/test/fuzz/miniscript.cpp",
      "position": 33,
      "original_position": 16,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "1784cfaa13851e6c1b3241ec688cd7c8bfaf1a66",
      "in_reply_to_id": 2166003533,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Think it's better as is, documenting the properties of the Node inside the optional.",
      "created_at": "2025-06-25T13:16:36Z",
      "updated_at": "2025-06-25T13:17:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2166695337",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2166695337"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 852,
      "original_line": 852,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2172530750",
      "pull_request_review_id": 2967376830,
      "id": 2172530750,
      "node_id": "PRRC_kwDOABII586BfjA-",
      "diff_hunk": "@@ -515,9 +515,11 @@ struct Node {\n     //! The Script context for this node. Either P2WSH or Tapscript.\n     const MiniscriptContext m_script_ctx;\n \n-    /* Destroy the shared pointers iteratively to avoid a stack-overflow due to recursive calls\n-     * to the subs' destructors. */\n-    ~Node() {\n+    ~Node()\n+    {\n+        // Destroy the subexpressions iteratively after moving out their\n+        // subexpressions to avoid a stack-overflow due to recursive calls to\n+        // the subs' destructors.",
      "path": "src/script/miniscript.h",
      "position": 147,
      "original_position": 11,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "db2ede082836fe27ddae62e6e6e6803aa92ee45b",
      "in_reply_to_id": 2160320908,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "(Forgot to mention but I changed from `to_be_stripped` + `stripping` to `queue` + `flattening`).\r\nhttps://github.com/bitcoin/bitcoin/blob/2bb86e371c21ca996cf8c1fbc80bc9b39f3d1dec/src/script/miniscript.h#L536-L544",
      "created_at": "2025-06-27T17:33:09Z",
      "updated_at": "2025-06-27T17:33:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2172530750",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2172530750"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 554,
      "original_line": 554,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2172893233",
      "pull_request_review_id": 2968007854,
      "id": 2172893233,
      "node_id": "PRRC_kwDOABII586Bg7gx",
      "diff_hunk": "@@ -515,9 +515,11 @@ struct Node {\n     //! The Script context for this node. Either P2WSH or Tapscript.\n     const MiniscriptContext m_script_ctx;\n \n-    /* Destroy the shared pointers iteratively to avoid a stack-overflow due to recursive calls\n-     * to the subs' destructors. */\n-    ~Node() {\n+    ~Node()\n+    {\n+        // Destroy the subexpressions iteratively after moving out their\n+        // subexpressions to avoid a stack-overflow due to recursive calls to\n+        // the subs' destructors.",
      "path": "src/script/miniscript.h",
      "position": 147,
      "original_position": 11,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "db2ede082836fe27ddae62e6e6e6803aa92ee45b",
      "in_reply_to_id": 2160320908,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "... and you also changed to do/while since there's always at least one value in the queue ðŸ‘ ",
      "created_at": "2025-06-27T21:25:49Z",
      "updated_at": "2025-06-27T21:25:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2172893233",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2172893233"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 554,
      "original_line": 554,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2275765239",
      "pull_request_review_id": 3119400659,
      "id": 2275765239,
      "node_id": "PRRC_kwDOABII586HpWv3",
      "diff_hunk": "@@ -1296,31 +1296,31 @@ class StringMaker {\n class MiniscriptDescriptor final : public DescriptorImpl\n {\n private:\n-    miniscript::NodeRef<uint32_t> m_node;\n+    miniscript::Node<uint32_t> m_node;\n \n protected:\n     std::vector<CScript> MakeScripts(const std::vector<CPubKey>& keys, std::span<const CScript> scripts,\n                                      FlatSigningProvider& provider) const override\n     {\n-        const auto script_ctx{m_node->GetMsCtx()};\n+        const auto script_ctx{m_node.GetMsCtx()};\n         for (const auto& key : keys) {\n             if (miniscript::IsTapscript(script_ctx)) {\n                 provider.pubkeys.emplace(Hash160(XOnlyPubKey{key}), key);\n             } else {\n                 provider.pubkeys.emplace(key.GetID(), key);\n             }\n         }\n-        return Vector(m_node->ToScript(ScriptMaker(keys, script_ctx)));\n+        return Vector(m_node.ToScript(ScriptMaker(keys, script_ctx)));\n     }\n \n public:\n-    MiniscriptDescriptor(std::vector<std::unique_ptr<PubkeyProvider>> providers, miniscript::NodeRef<uint32_t> node)\n+    MiniscriptDescriptor(std::vector<std::unique_ptr<PubkeyProvider>> providers, miniscript::Node<uint32_t>&& node)",
      "path": "src/script/descriptor.cpp",
      "position": 26,
      "original_position": 26,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "in_reply_to_id": null,
      "user": {
        "login": "purpleKarrot",
        "id": 185240,
        "node_id": "MDQ6VXNlcjE4NTI0MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/185240?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/purpleKarrot",
        "html_url": "https://github.com/purpleKarrot",
        "followers_url": "https://api.github.com/users/purpleKarrot/followers",
        "following_url": "https://api.github.com/users/purpleKarrot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/purpleKarrot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/purpleKarrot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/purpleKarrot/subscriptions",
        "organizations_url": "https://api.github.com/users/purpleKarrot/orgs",
        "repos_url": "https://api.github.com/users/purpleKarrot/repos",
        "events_url": "https://api.github.com/users/purpleKarrot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/purpleKarrot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "`&&` should really only be used for move constructors, move assignment operators, and forwarding references. Normal sink arguments should be passed by value.",
      "created_at": "2025-08-14T07:44:19Z",
      "updated_at": "2025-08-14T07:44:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2275765239",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2275765239"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1605,
      "original_line": 1605,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2275775255",
      "pull_request_review_id": 3119413766,
      "id": 2275775255,
      "node_id": "PRRC_kwDOABII586HpZMX",
      "diff_hunk": "@@ -1296,31 +1296,31 @@ class StringMaker {\n class MiniscriptDescriptor final : public DescriptorImpl\n {\n private:\n-    miniscript::NodeRef<uint32_t> m_node;\n+    miniscript::Node<uint32_t> m_node;\n \n protected:\n     std::vector<CScript> MakeScripts(const std::vector<CPubKey>& keys, std::span<const CScript> scripts,\n                                      FlatSigningProvider& provider) const override\n     {\n-        const auto script_ctx{m_node->GetMsCtx()};\n+        const auto script_ctx{m_node.GetMsCtx()};\n         for (const auto& key : keys) {\n             if (miniscript::IsTapscript(script_ctx)) {\n                 provider.pubkeys.emplace(Hash160(XOnlyPubKey{key}), key);\n             } else {\n                 provider.pubkeys.emplace(key.GetID(), key);\n             }\n         }\n-        return Vector(m_node->ToScript(ScriptMaker(keys, script_ctx)));\n+        return Vector(m_node.ToScript(ScriptMaker(keys, script_ctx)));\n     }\n \n public:\n-    MiniscriptDescriptor(std::vector<std::unique_ptr<PubkeyProvider>> providers, miniscript::NodeRef<uint32_t> node)\n+    MiniscriptDescriptor(std::vector<std::unique_ptr<PubkeyProvider>> providers, miniscript::Node<uint32_t>&& node)",
      "path": "src/script/descriptor.cpp",
      "position": 26,
      "original_position": 26,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "in_reply_to_id": 2275765239,
      "user": {
        "login": "purpleKarrot",
        "id": 185240,
        "node_id": "MDQ6VXNlcjE4NTI0MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/185240?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/purpleKarrot",
        "html_url": "https://github.com/purpleKarrot",
        "followers_url": "https://api.github.com/users/purpleKarrot/followers",
        "following_url": "https://api.github.com/users/purpleKarrot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/purpleKarrot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/purpleKarrot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/purpleKarrot/subscriptions",
        "organizations_url": "https://api.github.com/users/purpleKarrot/orgs",
        "repos_url": "https://api.github.com/users/purpleKarrot/repos",
        "events_url": "https://api.github.com/users/purpleKarrot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/purpleKarrot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The core guidelines seem to disagree with me: https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#Rf-consume",
      "created_at": "2025-08-14T07:48:33Z",
      "updated_at": "2025-08-14T07:48:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2275775255",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2275775255"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1605,
      "original_line": 1605,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2277520443",
      "pull_request_review_id": 3121847200,
      "id": 2277520443,
      "node_id": "PRRC_kwDOABII586HwDQ7",
      "diff_hunk": "@@ -1296,31 +1296,31 @@ class StringMaker {\n class MiniscriptDescriptor final : public DescriptorImpl\n {\n private:\n-    miniscript::NodeRef<uint32_t> m_node;\n+    miniscript::Node<uint32_t> m_node;\n \n protected:\n     std::vector<CScript> MakeScripts(const std::vector<CPubKey>& keys, std::span<const CScript> scripts,\n                                      FlatSigningProvider& provider) const override\n     {\n-        const auto script_ctx{m_node->GetMsCtx()};\n+        const auto script_ctx{m_node.GetMsCtx()};\n         for (const auto& key : keys) {\n             if (miniscript::IsTapscript(script_ctx)) {\n                 provider.pubkeys.emplace(Hash160(XOnlyPubKey{key}), key);\n             } else {\n                 provider.pubkeys.emplace(key.GetID(), key);\n             }\n         }\n-        return Vector(m_node->ToScript(ScriptMaker(keys, script_ctx)));\n+        return Vector(m_node.ToScript(ScriptMaker(keys, script_ctx)));\n     }\n \n public:\n-    MiniscriptDescriptor(std::vector<std::unique_ptr<PubkeyProvider>> providers, miniscript::NodeRef<uint32_t> node)\n+    MiniscriptDescriptor(std::vector<std::unique_ptr<PubkeyProvider>> providers, miniscript::Node<uint32_t>&& node)",
      "path": "src/script/descriptor.cpp",
      "position": 26,
      "original_position": 26,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "in_reply_to_id": 2275765239,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Could technically safely remove `&&` as the `miniscript::Node` copy-ctor and assignment operator by l-value are currently deleted:\r\nhttps://github.com/bitcoin/bitcoin/blob/6bf4f4a87889b0679c744b0a171c98a9386fe8c0/src/script/miniscript.h#L1711-L1713\r\nBut I'm paranoid enough to think that could change again, so feels more robust to keep `&&`. Thanks for arguing both sides!",
      "created_at": "2025-08-14T19:17:49Z",
      "updated_at": "2025-08-14T19:17:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2277520443",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2277520443"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1605,
      "original_line": 1605,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2487390409",
      "pull_request_review_id": 3412258624,
      "id": 2487390409,
      "node_id": "PRRC_kwDOABII586UQpDJ",
      "diff_hunk": "@@ -1027,7 +1029,7 @@ void SatisfactionToWitness(MsCtx ctx, CScriptWitness& witness, const CScript& sc\n }\n \n /** Perform various applicable tests on a miniscript Node. */\n-void TestNode(const MsCtx script_ctx, const NodeRef& node, FuzzedDataProvider& provider)\n+void TestNode(const MsCtx script_ctx, const std::optional<Node> node, FuzzedDataProvider& provider)",
      "path": "src/test/fuzz/miniscript.cpp",
      "position": 1,
      "original_position": 82,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "original_commit_id": "d85e120e664cebacecaf9d958ca56999f091154f",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"refactor(miniscript): Remove superfluous unique_ptr-indirection\"\r\n\r\nShould this be `const std::optional<Node>& node` (by reference)?",
      "created_at": "2025-11-03T17:58:27Z",
      "updated_at": "2025-11-03T18:06:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2487390409",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2487390409"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1032,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2487912864",
      "pull_request_review_id": 3413010442,
      "id": 2487912864,
      "node_id": "PRRC_kwDOABII586USomg",
      "diff_hunk": "@@ -1027,7 +1029,7 @@ void SatisfactionToWitness(MsCtx ctx, CScriptWitness& witness, const CScript& sc\n }\n \n /** Perform various applicable tests on a miniscript Node. */\n-void TestNode(const MsCtx script_ctx, const NodeRef& node, FuzzedDataProvider& provider)\n+void TestNode(const MsCtx script_ctx, const std::optional<Node> node, FuzzedDataProvider& provider)",
      "path": "src/test/fuzz/miniscript.cpp",
      "position": 1,
      "original_position": 82,
      "commit_id": "6bf4f4a87889b0679c744b0a171c98a9386fe8c0",
      "original_commit_id": "d85e120e664cebacecaf9d958ca56999f091154f",
      "in_reply_to_id": 2487390409,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Move-constructed `std::optional` (which I think would happen here) should be negligible, but agree const ref is more optimal.\r\n\r\nTaken in latest push (together with minor correction to another commit's message).",
      "created_at": "2025-11-03T21:32:43Z",
      "updated_at": "2025-11-03T21:32:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2487912864",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2487912864"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1032,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2541499665",
      "pull_request_review_id": 3482053695,
      "id": 2541499665,
      "node_id": "PRRC_kwDOABII586XfDUR",
      "diff_hunk": "@@ -500,59 +509,74 @@ struct NoDupCheck {};\n } // namespace internal\n \n //! A node in a miniscript expression.\n-template<typename Key>\n-struct Node {\n+template <typename Key>\n+class Node\n+{\n     //! What node type this node is.\n-    const Fragment fragment;\n+    enum Fragment fragment;\n     //! The k parameter (time for OLDER/AFTER, threshold for THRESH(_M))\n-    const uint32_t k = 0;\n+    uint32_t k = 0;\n     //! The keys used by this expression (only for PK_K/PK_H/MULTI)\n-    const std::vector<Key> keys;\n-    //! The data bytes in this expression (only for HASH160/HASH256/SHA256/RIPEMD10).\n-    const std::vector<unsigned char> data;\n+    std::vector<Key> keys;\n+    //! The data bytes in this expression (only for HASH160/HASH256/SHA256/RIPEMD160).\n+    std::vector<unsigned char> data;\n     //! Subexpressions (for WRAP_*/AND_*/OR_*/ANDOR/THRESH)\n-    mutable std::vector<NodeRef<Key>> subs;\n+    std::vector<Node> subs;\n     //! The Script context for this node. Either P2WSH or Tapscript.\n-    const MiniscriptContext m_script_ctx;\n-\n-    /* Destroy the shared pointers iteratively to avoid a stack-overflow due to recursive calls\n-     * to the subs' destructors. */\n-    ~Node() {\n-        while (!subs.empty()) {\n-            auto node = std::move(subs.back());\n-            subs.pop_back();\n-            while (!node->subs.empty()) {\n-                subs.push_back(std::move(node->subs.back()));\n-                node->subs.pop_back();\n+    MiniscriptContext m_script_ctx;\n+\n+public:\n+    // Permit 1 level deep recursion since we own instances of our own type.\n+    // NOLINTBEGIN(misc-no-recursion)\n+    ~Node()\n+    {\n+        // Destroy the subexpressions iteratively after moving out their\n+        // subexpressions to avoid a stack-overflow due to recursive calls to\n+        // the subs' destructors.\n+        std::vector<std::vector<Node>> queue;\n+        queue.push_back(std::move(subs));\n+        do {\n+            auto flattening{std::move(queue.back())};\n+            queue.pop_back();\n+            for (auto& i : flattening) {\n+                queue.push_back(std::move(i.subs));",
      "path": "src/script/miniscript.h",
      "position": 1,
      "original_position": 143,
      "commit_id": "c6ac239124b3e66f2d5ff52edc6ff422926abead",
      "original_commit_id": "c6ac239124b3e66f2d5ff52edc6ff422926abead",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit, if you touch again, we could simply omit leaves with no subs\r\n\r\n```suggestion\r\n                if (i.subs.size()) queue.push_back(std::move(i.subs));\r\n```",
      "created_at": "2025-11-19T10:54:30Z",
      "updated_at": "2025-11-19T11:41:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2541499665",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2541499665"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 542,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2550158500",
      "pull_request_review_id": 3493283536,
      "id": 2550158500,
      "node_id": "PRRC_kwDOABII586YAFSk",
      "diff_hunk": "@@ -500,59 +509,74 @@ struct NoDupCheck {};\n } // namespace internal\n \n //! A node in a miniscript expression.\n-template<typename Key>\n-struct Node {\n+template <typename Key>\n+class Node\n+{\n     //! What node type this node is.\n-    const Fragment fragment;\n+    enum Fragment fragment;\n     //! The k parameter (time for OLDER/AFTER, threshold for THRESH(_M))\n-    const uint32_t k = 0;\n+    uint32_t k = 0;\n     //! The keys used by this expression (only for PK_K/PK_H/MULTI)\n-    const std::vector<Key> keys;\n-    //! The data bytes in this expression (only for HASH160/HASH256/SHA256/RIPEMD10).\n-    const std::vector<unsigned char> data;\n+    std::vector<Key> keys;\n+    //! The data bytes in this expression (only for HASH160/HASH256/SHA256/RIPEMD160).\n+    std::vector<unsigned char> data;\n     //! Subexpressions (for WRAP_*/AND_*/OR_*/ANDOR/THRESH)\n-    mutable std::vector<NodeRef<Key>> subs;\n+    std::vector<Node> subs;\n     //! The Script context for this node. Either P2WSH or Tapscript.\n-    const MiniscriptContext m_script_ctx;\n-\n-    /* Destroy the shared pointers iteratively to avoid a stack-overflow due to recursive calls\n-     * to the subs' destructors. */\n-    ~Node() {\n-        while (!subs.empty()) {\n-            auto node = std::move(subs.back());\n-            subs.pop_back();\n-            while (!node->subs.empty()) {\n-                subs.push_back(std::move(node->subs.back()));\n-                node->subs.pop_back();\n+    MiniscriptContext m_script_ctx;\n+\n+public:\n+    // Permit 1 level deep recursion since we own instances of our own type.\n+    // NOLINTBEGIN(misc-no-recursion)\n+    ~Node()\n+    {\n+        // Destroy the subexpressions iteratively after moving out their\n+        // subexpressions to avoid a stack-overflow due to recursive calls to\n+        // the subs' destructors.\n+        std::vector<std::vector<Node>> queue;\n+        queue.push_back(std::move(subs));\n+        do {\n+            auto flattening{std::move(queue.back())};\n+            queue.pop_back();\n+            for (auto& i : flattening) {\n+                queue.push_back(std::move(i.subs));",
      "path": "src/script/miniscript.h",
      "position": 1,
      "original_position": 143,
      "commit_id": "c6ac239124b3e66f2d5ff52edc6ff422926abead",
      "original_commit_id": "c6ac239124b3e66f2d5ff52edc6ff422926abead",
      "in_reply_to_id": 2541499665,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Agree that would be slightly more optimal, avoiding some needless pushes/pops. Taken in latest push + changed `auto& i` to `Node& n` for clarity.",
      "created_at": "2025-11-21T15:35:17Z",
      "updated_at": "2025-11-21T15:35:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2550158500",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2550158500"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 542,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2721844220",
      "pull_request_review_id": 3698304875,
      "id": 2721844220,
      "node_id": "PRRC_kwDOABII586iPAv8",
      "diff_hunk": "@@ -552,14 +552,15 @@ class Node\n         // Destroy the subexpressions iteratively after moving out their\n         // subexpressions to avoid a stack-overflow due to recursive calls to\n         // the subs' destructors.\n-        while (!subs.empty()) {\n-            auto node = std::move(subs.back());\n-            subs.pop_back();\n-            while (!node.subs.empty()) {\n-                subs.push_back(std::move(node.subs.back()));\n-                node.subs.pop_back();\n+        std::vector<std::vector<Node>> queue;\n+        queue.push_back(std::move(subs));\n+        do {\n+            auto flattening{std::move(queue.back())};\n+            queue.pop_back();\n+            for (Node& n : flattening) {\n+                if (!n.subs.empty()) queue.push_back(std::move(n.subs));\n             }\n-        }\n+        } while (!queue.empty());",
      "path": "src/script/miniscript.h",
      "position": 19,
      "original_position": 19,
      "commit_id": "198bbaee4959119a63b4038cd0dbb519f4daf6f0",
      "original_commit_id": "198bbaee4959119a63b4038cd0dbb519f4daf6f0",
      "in_reply_to_id": null,
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Why this refactoring? How is this related to this PR?",
      "created_at": "2026-01-23T16:04:52Z",
      "updated_at": "2026-01-23T17:13:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2721844220",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2721844220"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": 555,
      "original_start_line": 555,
      "start_side": "RIGHT",
      "line": 563,
      "original_line": 563,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2721880965",
      "pull_request_review_id": 3698304875,
      "id": 2721880965,
      "node_id": "PRRC_kwDOABII586iPJuF",
      "diff_hunk": "@@ -515,9 +515,11 @@ struct Node {\n     //! The Script context for this node. Either P2WSH or Tapscript.\n     const MiniscriptContext m_script_ctx;\n \n-    /* Destroy the shared pointers iteratively to avoid a stack-overflow due to recursive calls\n-     * to the subs' destructors. */\n-    ~Node() {\n+    ~Node()\n+    {\n+        // Destroy the subexpressions iteratively after moving out their\n+        // subexpressions to avoid a stack-overflow due to recursive calls to\n+        // the subs' destructors.",
      "path": "src/script/miniscript.h",
      "position": 147,
      "original_position": 11,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "db2ede082836fe27ddae62e6e6e6803aa92ee45b",
      "in_reply_to_id": 2160320908,
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> Would `TreeEval` complicate this too much?\r\n\r\n`TreeEval` is only for read-only evaluations over the AST, it cannot modify the nodes.",
      "created_at": "2026-01-23T16:13:55Z",
      "updated_at": "2026-01-23T17:13:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2721880965",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2721880965"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 554,
      "original_line": 554,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2722044598",
      "pull_request_review_id": 3698304875,
      "id": 2722044598,
      "node_id": "PRRC_kwDOABII586iPxq2",
      "diff_hunk": "@@ -727,4 +727,25 @@ BOOST_AUTO_TEST_CASE(fixed_tests)\n     g_testdata.reset();\n }\n \n+// Confirm that ~Node(), Node::Clone() and operator=(Node&&) are stack-safe.\n+BOOST_AUTO_TEST_CASE(node_deep_destruct)\n+{\n+    using miniscript::internal::NoDupCheck;\n+    using miniscript::Fragment;\n+    using NodeU32 = miniscript::Node<uint32_t>;\n+\n+    constexpr auto ctx{miniscript::MiniscriptContext::P2WSH};\n+\n+    NodeU32 root{NoDupCheck{}, ctx, Fragment::JUST_1};\n+    for (uint32_t i{0}; i < 200'000; ++i) {\n+        root = NodeU32{NoDupCheck{}, ctx, Fragment::WRAP_S, Vector(std::move(root))};",
      "path": "src/test/miniscript_tests.cpp",
      "position": 15,
      "original_position": 15,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "in_reply_to_id": null,
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "So this is really just a test template for reviewers so they can manually tweak the depth locally and make sure a particular change does not re-introduce the stack overflow issue? Or are we sure the current hardcoded depth would always trigger a test failure on CI?\n\nIf it does not, i am not sure it's worth including this test, or at least this would need to be documented that this is just a template that needs to be modified to meaningfully test anything. Otherwise the next person may just assume that if the test pass they didn't break anything (which seems far from unreasonable).",
      "created_at": "2026-01-23T16:50:09Z",
      "updated_at": "2026-01-23T17:13:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2722044598",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2722044598"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 741,
      "original_line": 741,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2722062298",
      "pull_request_review_id": 3698304875,
      "id": 2722062298,
      "node_id": "PRRC_kwDOABII586iP1_a",
      "diff_hunk": "@@ -727,4 +727,25 @@ BOOST_AUTO_TEST_CASE(fixed_tests)\n     g_testdata.reset();\n }\n \n+// Confirm that ~Node(), Node::Clone() and operator=(Node&&) are stack-safe.\n+BOOST_AUTO_TEST_CASE(node_deep_destruct)\n+{\n+    using miniscript::internal::NoDupCheck;\n+    using miniscript::Fragment;\n+    using NodeU32 = miniscript::Node<uint32_t>;\n+\n+    constexpr auto ctx{miniscript::MiniscriptContext::P2WSH};\n+\n+    NodeU32 root{NoDupCheck{}, ctx, Fragment::JUST_1};\n+    for (uint32_t i{0}; i < 200'000; ++i) {\n+        root = NodeU32{NoDupCheck{}, ctx, Fragment::WRAP_S, Vector(std::move(root))};\n+    }\n+    BOOST_CHECK_EQUAL(root.ScriptSize(), 200'001);",
      "path": "src/test/miniscript_tests.cpp",
      "position": 17,
      "original_position": 17,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "in_reply_to_id": null,
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Why check the Script size? How is this relevant to this check, or more relevant than basic sanity checks such as `IsValid()` instead (which also performs a Script size check)?",
      "created_at": "2026-01-23T16:53:23Z",
      "updated_at": "2026-01-23T17:13:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2722062298",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2722062298"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 743,
      "original_line": 743,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2722065194",
      "pull_request_review_id": 3698304875,
      "id": 2722065194,
      "node_id": "PRRC_kwDOABII586iP2sq",
      "diff_hunk": "@@ -727,4 +727,25 @@ BOOST_AUTO_TEST_CASE(fixed_tests)\n     g_testdata.reset();\n }\n \n+// Confirm that ~Node(), Node::Clone() and operator=(Node&&) are stack-safe.\n+BOOST_AUTO_TEST_CASE(node_deep_destruct)\n+{\n+    using miniscript::internal::NoDupCheck;\n+    using miniscript::Fragment;\n+    using NodeU32 = miniscript::Node<uint32_t>;\n+\n+    constexpr auto ctx{miniscript::MiniscriptContext::P2WSH};\n+\n+    NodeU32 root{NoDupCheck{}, ctx, Fragment::JUST_1};\n+    for (uint32_t i{0}; i < 200'000; ++i) {\n+        root = NodeU32{NoDupCheck{}, ctx, Fragment::WRAP_S, Vector(std::move(root))};\n+    }\n+    BOOST_CHECK_EQUAL(root.ScriptSize(), 200'001);\n+\n+    auto clone{root.Clone()};\n+    BOOST_CHECK_EQUAL(clone.ScriptSize(), root.ScriptSize());",
      "path": "src/test/miniscript_tests.cpp",
      "position": 20,
      "original_position": 20,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "in_reply_to_id": null,
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Maybe compare them completely instead of just comparing their Script size?",
      "created_at": "2026-01-23T16:53:56Z",
      "updated_at": "2026-01-23T17:13:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2722065194",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2722065194"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 746,
      "original_line": 746,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2722121348",
      "pull_request_review_id": 3698304875,
      "id": 2722121348,
      "node_id": "PRRC_kwDOABII586iQEaE",
      "diff_hunk": "@@ -727,4 +727,25 @@ BOOST_AUTO_TEST_CASE(fixed_tests)\n     g_testdata.reset();\n }\n \n+// Confirm that ~Node(), Node::Clone() and operator=(Node&&) are stack-safe.\n+BOOST_AUTO_TEST_CASE(node_deep_destruct)\n+{\n+    using miniscript::internal::NoDupCheck;\n+    using miniscript::Fragment;\n+    using NodeU32 = miniscript::Node<uint32_t>;\n+\n+    constexpr auto ctx{miniscript::MiniscriptContext::P2WSH};\n+\n+    NodeU32 root{NoDupCheck{}, ctx, Fragment::JUST_1};\n+    for (uint32_t i{0}; i < 200'000; ++i) {\n+        root = NodeU32{NoDupCheck{}, ctx, Fragment::WRAP_S, Vector(std::move(root))};",
      "path": "src/test/miniscript_tests.cpp",
      "position": 15,
      "original_position": 15,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "in_reply_to_id": null,
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This is an invalid Miniscript. You can create a valid one with this hardcoded depth by using `WRAP_N` in place of `WRAP_S` and a `TAPSCRIPT` context rather than a `P2WSH` one.\n\nIt doesn't really matter for this test though, and any meaningful depth that would make the test actually fail (something like `1'000'000`?) would result in the Miniscript being invalid due to its size.",
      "created_at": "2026-01-23T17:09:51Z",
      "updated_at": "2026-01-23T17:13:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2722121348",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2722121348"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": 739,
      "original_start_line": 739,
      "start_side": "RIGHT",
      "line": 741,
      "original_line": 741,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2722141479",
      "pull_request_review_id": 3698679409,
      "id": 2722141479,
      "node_id": "PRRC_kwDOABII586iQJUn",
      "diff_hunk": "@@ -727,4 +727,25 @@ BOOST_AUTO_TEST_CASE(fixed_tests)\n     g_testdata.reset();\n }\n \n+// Confirm that ~Node(), Node::Clone() and operator=(Node&&) are stack-safe.\n+BOOST_AUTO_TEST_CASE(node_deep_destruct)\n+{\n+    using miniscript::internal::NoDupCheck;\n+    using miniscript::Fragment;\n+    using NodeU32 = miniscript::Node<uint32_t>;\n+\n+    constexpr auto ctx{miniscript::MiniscriptContext::P2WSH};\n+\n+    NodeU32 root{NoDupCheck{}, ctx, Fragment::JUST_1};\n+    for (uint32_t i{0}; i < 200'000; ++i) {\n+        root = NodeU32{NoDupCheck{}, ctx, Fragment::WRAP_S, Vector(std::move(root))};",
      "path": "src/test/miniscript_tests.cpp",
      "position": 15,
      "original_position": 15,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "in_reply_to_id": 2722044598,
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> Or are we sure the current hardcoded depth would always trigger a test failure on CI?\r\n\r\nSeems like it would for all the jobs that set `ulimit -s 512`.",
      "created_at": "2026-01-23T17:16:37Z",
      "updated_at": "2026-01-23T17:16:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2722141479",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2722141479"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 741,
      "original_line": 741,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2722771821",
      "pull_request_review_id": 3699540080,
      "id": 2722771821,
      "node_id": "PRRC_kwDOABII586iSjNt",
      "diff_hunk": "@@ -580,16 +606,17 @@ struct Node {\n     // Constructor which takes all of the data that a Node could possibly contain.\n     // This is kept private as no valid fragment has all of these arguments.\n     // Only used by Clone()\n-    Node(internal::NoDupCheck, MiniscriptContext script_ctx, Fragment nt, std::vector<NodeRef<Key>> sub, std::vector<Key> key, std::vector<unsigned char> arg, uint32_t val)\n+    Node(internal::NoDupCheck, MiniscriptContext script_ctx, enum Fragment nt, std::vector<Node> sub, std::vector<Key> key, std::vector<unsigned char> arg, uint32_t val)\n         : fragment(nt), k(val), keys(key), data(std::move(arg)), subs(std::move(sub)), m_script_ctx{script_ctx}, ops(CalcOps()), ss(CalcStackSize()), ws(CalcWitnessSize()), typ(CalcType()), scriptlen(CalcScriptLen()) {}",
      "path": "src/script/miniscript.h",
      "position": 215,
      "original_position": 215,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: if you touch again, consider moving the key vector:\n\n```suggestion\n        : fragment(nt), k(val), keys(std::move(key)), data(std::move(arg)), subs(std::move(sub)), m_script_ctx{script_ctx}, ops(CalcOps()), ss(CalcStackSize()), ws(CalcWitnessSize()), typ(CalcType()), scriptlen(CalcScriptLen()) {}\n```",
      "created_at": "2026-01-23T20:41:26Z",
      "updated_at": "2026-01-23T20:49:12Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2722771821",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2722771821"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 610,
      "original_line": 610,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2722932391",
      "pull_request_review_id": 3699697231,
      "id": 2722932391,
      "node_id": "PRRC_kwDOABII586iTKan",
      "diff_hunk": "@@ -552,14 +552,15 @@ class Node\n         // Destroy the subexpressions iteratively after moving out their\n         // subexpressions to avoid a stack-overflow due to recursive calls to\n         // the subs' destructors.\n-        while (!subs.empty()) {\n-            auto node = std::move(subs.back());\n-            subs.pop_back();\n-            while (!node.subs.empty()) {\n-                subs.push_back(std::move(node.subs.back()));\n-                node.subs.pop_back();\n+        std::vector<std::vector<Node>> queue;\n+        queue.push_back(std::move(subs));\n+        do {\n+            auto flattening{std::move(queue.back())};\n+            queue.pop_back();\n+            for (Node& n : flattening) {\n+                if (!n.subs.empty()) queue.push_back(std::move(n.subs));\n             }\n-        }\n+        } while (!queue.empty());",
      "path": "src/script/miniscript.h",
      "position": 19,
      "original_position": 19,
      "commit_id": "198bbaee4959119a63b4038cd0dbb519f4daf6f0",
      "original_commit_id": "198bbaee4959119a63b4038cd0dbb519f4daf6f0",
      "in_reply_to_id": 2721844220,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thread requested refactoring of the destructor https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2160320908\r\n\r\nThe code on master has `mutable std::vector<NodeRef<Key>> Node::subs`, that means moving each element of the `vector` is just moving a `unique_ptr` to another. With the change to use raw `std::vector<Node> Node::subs`, we would be moving from one `Node`-instance to another, which should be more work than updating a pointer. Therefore it should be more efficient to move whole vectors (meaning the underlying array of `Node`s remains in the same place in memory).\r\n\r\nAgree the commit message should be amended with this motivation if I re-touch.",
      "created_at": "2026-01-23T21:39:16Z",
      "updated_at": "2026-01-23T22:09:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2722932391",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2722932391"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": 555,
      "original_start_line": 555,
      "start_side": "RIGHT",
      "line": 563,
      "original_line": 563,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2722980974",
      "pull_request_review_id": 3699697231,
      "id": 2722980974,
      "node_id": "PRRC_kwDOABII586iTWRu",
      "diff_hunk": "@@ -727,4 +727,25 @@ BOOST_AUTO_TEST_CASE(fixed_tests)\n     g_testdata.reset();\n }\n \n+// Confirm that ~Node(), Node::Clone() and operator=(Node&&) are stack-safe.\n+BOOST_AUTO_TEST_CASE(node_deep_destruct)\n+{\n+    using miniscript::internal::NoDupCheck;\n+    using miniscript::Fragment;\n+    using NodeU32 = miniscript::Node<uint32_t>;\n+\n+    constexpr auto ctx{miniscript::MiniscriptContext::P2WSH};\n+\n+    NodeU32 root{NoDupCheck{}, ctx, Fragment::JUST_1};\n+    for (uint32_t i{0}; i < 200'000; ++i) {\n+        root = NodeU32{NoDupCheck{}, ctx, Fragment::WRAP_S, Vector(std::move(root))};",
      "path": "src/test/miniscript_tests.cpp",
      "position": 15,
      "original_position": 15,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "in_reply_to_id": 2722044598,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I'm fairly sure I tweaked the iteration count to reliably cause stack overflow on my machine with a naive implementation of `~Node`/`Clone()`, but still not take \"too much time\" to run. If we accidentally introduce stack-overflow issues, this test should help.\r\n\r\nIf you mean to say `200'000` is not sufficient to break the test on your machine if you switch to naive implementations of `~Node`/`Clone()`, I'm open to bump the numbers.\r\n\r\nWe could implement a function for querying remaining stack space (with Posix+Windows variants) and use `alloca()` to grab the majority and only leave a fixed small amount to more reliably hit stack overflow in case of bad `~Node()`/`Clone()` implementations. That way we could probably shrink the `200'000` number and keep it fairly future-proof at the cost of the extra code complexity. What do you think?",
      "created_at": "2026-01-23T21:55:19Z",
      "updated_at": "2026-01-23T22:09:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2722980974",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2722980974"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 741,
      "original_line": 741,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2722987945",
      "pull_request_review_id": 3699697231,
      "id": 2722987945,
      "node_id": "PRRC_kwDOABII586iTX-p",
      "diff_hunk": "@@ -727,4 +727,25 @@ BOOST_AUTO_TEST_CASE(fixed_tests)\n     g_testdata.reset();\n }\n \n+// Confirm that ~Node(), Node::Clone() and operator=(Node&&) are stack-safe.\n+BOOST_AUTO_TEST_CASE(node_deep_destruct)\n+{\n+    using miniscript::internal::NoDupCheck;\n+    using miniscript::Fragment;\n+    using NodeU32 = miniscript::Node<uint32_t>;\n+\n+    constexpr auto ctx{miniscript::MiniscriptContext::P2WSH};\n+\n+    NodeU32 root{NoDupCheck{}, ctx, Fragment::JUST_1};\n+    for (uint32_t i{0}; i < 200'000; ++i) {\n+        root = NodeU32{NoDupCheck{}, ctx, Fragment::WRAP_S, Vector(std::move(root))};\n+    }\n+    BOOST_CHECK_EQUAL(root.ScriptSize(), 200'001);",
      "path": "src/test/miniscript_tests.cpp",
      "position": 17,
      "original_position": 17,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "in_reply_to_id": 2722062298,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "It proves to someone less used to the primitives that the earlier code has indeed created a large node cluster.",
      "created_at": "2026-01-23T21:57:37Z",
      "updated_at": "2026-01-23T22:09:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2722987945",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2722987945"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 743,
      "original_line": 743,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2723002122",
      "pull_request_review_id": 3699697231,
      "id": 2723002122,
      "node_id": "PRRC_kwDOABII586iTbcK",
      "diff_hunk": "@@ -727,4 +727,25 @@ BOOST_AUTO_TEST_CASE(fixed_tests)\n     g_testdata.reset();\n }\n \n+// Confirm that ~Node(), Node::Clone() and operator=(Node&&) are stack-safe.\n+BOOST_AUTO_TEST_CASE(node_deep_destruct)\n+{\n+    using miniscript::internal::NoDupCheck;\n+    using miniscript::Fragment;\n+    using NodeU32 = miniscript::Node<uint32_t>;\n+\n+    constexpr auto ctx{miniscript::MiniscriptContext::P2WSH};\n+\n+    NodeU32 root{NoDupCheck{}, ctx, Fragment::JUST_1};\n+    for (uint32_t i{0}; i < 200'000; ++i) {\n+        root = NodeU32{NoDupCheck{}, ctx, Fragment::WRAP_S, Vector(std::move(root))};\n+    }\n+    BOOST_CHECK_EQUAL(root.ScriptSize(), 200'001);\n+\n+    auto clone{root.Clone()};\n+    BOOST_CHECK_EQUAL(clone.ScriptSize(), root.ScriptSize());",
      "path": "src/test/miniscript_tests.cpp",
      "position": 20,
      "original_position": 20,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "in_reply_to_id": 2722065194,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Comparing the `Node::scriptlen` members is what is most essential, I'm just roughly verifying that `Clone()` has performed its essential work for the purposes of this test, not verifying details of `Clone()` itself as the focus.",
      "created_at": "2026-01-23T22:02:13Z",
      "updated_at": "2026-01-23T22:09:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2723002122",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2723002122"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 746,
      "original_line": 746,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2723011519",
      "pull_request_review_id": 3699697231,
      "id": 2723011519,
      "node_id": "PRRC_kwDOABII586iTdu_",
      "diff_hunk": "@@ -727,4 +727,25 @@ BOOST_AUTO_TEST_CASE(fixed_tests)\n     g_testdata.reset();\n }\n \n+// Confirm that ~Node(), Node::Clone() and operator=(Node&&) are stack-safe.\n+BOOST_AUTO_TEST_CASE(node_deep_destruct)\n+{\n+    using miniscript::internal::NoDupCheck;\n+    using miniscript::Fragment;\n+    using NodeU32 = miniscript::Node<uint32_t>;\n+\n+    constexpr auto ctx{miniscript::MiniscriptContext::P2WSH};\n+\n+    NodeU32 root{NoDupCheck{}, ctx, Fragment::JUST_1};\n+    for (uint32_t i{0}; i < 200'000; ++i) {\n+        root = NodeU32{NoDupCheck{}, ctx, Fragment::WRAP_S, Vector(std::move(root))};",
      "path": "src/test/miniscript_tests.cpp",
      "position": 15,
      "original_position": 15,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "in_reply_to_id": 2722121348,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thanks for pointing out the invalidity! Will make it valid if I re-touch.\r\n\r\nSee my other comment regarding the depth.",
      "created_at": "2026-01-23T22:06:18Z",
      "updated_at": "2026-01-23T22:09:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2723011519",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2723011519"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": 739,
      "original_start_line": 739,
      "start_side": "RIGHT",
      "line": 741,
      "original_line": 741,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2733647837",
      "pull_request_review_id": 3713245090,
      "id": 2733647837,
      "node_id": "PRRC_kwDOABII586i8Cfd",
      "diff_hunk": "@@ -727,4 +727,25 @@ BOOST_AUTO_TEST_CASE(fixed_tests)\n     g_testdata.reset();\n }\n \n+// Confirm that ~Node(), Node::Clone() and operator=(Node&&) are stack-safe.\n+BOOST_AUTO_TEST_CASE(node_deep_destruct)\n+{\n+    using miniscript::internal::NoDupCheck;\n+    using miniscript::Fragment;\n+    using NodeU32 = miniscript::Node<uint32_t>;\n+\n+    constexpr auto ctx{miniscript::MiniscriptContext::P2WSH};\n+\n+    NodeU32 root{NoDupCheck{}, ctx, Fragment::JUST_1};\n+    for (uint32_t i{0}; i < 200'000; ++i) {\n+        root = NodeU32{NoDupCheck{}, ctx, Fragment::WRAP_S, Vector(std::move(root))};",
      "path": "src/test/miniscript_tests.cpp",
      "position": 15,
      "original_position": 15,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "in_reply_to_id": 2722044598,
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> If you mean to say `200'000` is not sufficient to break the test on your machine if you switch to naive implementations of `~Node`/`Clone()`, I'm open to bump the numbers.\r\n\r\nI'm not sure how useful that would be. The threshold seems to vary on different systems, and is already high enough for the test to fail ci.\r\n\r\nFrom testing on two different machines locally, running the test with no custom `Node` destructor will reliably fail with `ulimit -s 5016` on one and `ulimit -s 6269` on the other. With no custom `ulimit` the test will only break past a depth of ~265k on one of the machines and past a depth of ~325k on the other.\r\n\r\nI also think it's unnecessary to introduce more complexity here and it would be better to just document this test is only meant to reliably fail on CI, and it passing locally is not a guarantee that the author of a change did not introduce a bug there (unless they ran it under a low `ulimit` like CI does).",
      "created_at": "2026-01-27T20:10:08Z",
      "updated_at": "2026-01-27T20:10:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2733647837",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2733647837"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 741,
      "original_line": 741,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2733657665",
      "pull_request_review_id": 3713257849,
      "id": 2733657665,
      "node_id": "PRRC_kwDOABII586i8E5B",
      "diff_hunk": "@@ -727,4 +727,25 @@ BOOST_AUTO_TEST_CASE(fixed_tests)\n     g_testdata.reset();\n }\n \n+// Confirm that ~Node(), Node::Clone() and operator=(Node&&) are stack-safe.\n+BOOST_AUTO_TEST_CASE(node_deep_destruct)\n+{\n+    using miniscript::internal::NoDupCheck;\n+    using miniscript::Fragment;\n+    using NodeU32 = miniscript::Node<uint32_t>;\n+\n+    constexpr auto ctx{miniscript::MiniscriptContext::P2WSH};\n+\n+    NodeU32 root{NoDupCheck{}, ctx, Fragment::JUST_1};\n+    for (uint32_t i{0}; i < 200'000; ++i) {\n+        root = NodeU32{NoDupCheck{}, ctx, Fragment::WRAP_S, Vector(std::move(root))};\n+    }\n+    BOOST_CHECK_EQUAL(root.ScriptSize(), 200'001);",
      "path": "src/test/miniscript_tests.cpp",
      "position": 17,
      "original_position": 17,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "in_reply_to_id": 2722062298,
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The depth of the AST of a Miniscript is unrelated to the size of the corresponding Bitcoin script. I think this check is misleading to the reader.",
      "created_at": "2026-01-27T20:13:06Z",
      "updated_at": "2026-01-27T20:13:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2733657665",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2733657665"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 743,
      "original_line": 743,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2733664314",
      "pull_request_review_id": 3713265840,
      "id": 2733664314,
      "node_id": "PRRC_kwDOABII586i8Gg6",
      "diff_hunk": "@@ -727,4 +727,25 @@ BOOST_AUTO_TEST_CASE(fixed_tests)\n     g_testdata.reset();\n }\n \n+// Confirm that ~Node(), Node::Clone() and operator=(Node&&) are stack-safe.\n+BOOST_AUTO_TEST_CASE(node_deep_destruct)\n+{\n+    using miniscript::internal::NoDupCheck;\n+    using miniscript::Fragment;\n+    using NodeU32 = miniscript::Node<uint32_t>;\n+\n+    constexpr auto ctx{miniscript::MiniscriptContext::P2WSH};\n+\n+    NodeU32 root{NoDupCheck{}, ctx, Fragment::JUST_1};\n+    for (uint32_t i{0}; i < 200'000; ++i) {\n+        root = NodeU32{NoDupCheck{}, ctx, Fragment::WRAP_S, Vector(std::move(root))};\n+    }\n+    BOOST_CHECK_EQUAL(root.ScriptSize(), 200'001);\n+\n+    auto clone{root.Clone()};\n+    BOOST_CHECK_EQUAL(clone.ScriptSize(), root.ScriptSize());",
      "path": "src/test/miniscript_tests.cpp",
      "position": 20,
      "original_position": 20,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "in_reply_to_id": 2722065194,
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Why is that the most essential?",
      "created_at": "2026-01-27T20:15:02Z",
      "updated_at": "2026-01-27T20:15:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2733664314",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2733664314"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 746,
      "original_line": 746,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2736355030",
      "pull_request_review_id": 3716385228,
      "id": 2736355030,
      "node_id": "PRRC_kwDOABII586jGXbW",
      "diff_hunk": "@@ -727,4 +727,25 @@ BOOST_AUTO_TEST_CASE(fixed_tests)\n     g_testdata.reset();\n }\n \n+// Confirm that ~Node(), Node::Clone() and operator=(Node&&) are stack-safe.\n+BOOST_AUTO_TEST_CASE(node_deep_destruct)\n+{\n+    using miniscript::internal::NoDupCheck;\n+    using miniscript::Fragment;\n+    using NodeU32 = miniscript::Node<uint32_t>;\n+\n+    constexpr auto ctx{miniscript::MiniscriptContext::P2WSH};\n+\n+    NodeU32 root{NoDupCheck{}, ctx, Fragment::JUST_1};\n+    for (uint32_t i{0}; i < 200'000; ++i) {\n+        root = NodeU32{NoDupCheck{}, ctx, Fragment::WRAP_S, Vector(std::move(root))};",
      "path": "src/test/miniscript_tests.cpp",
      "position": 15,
      "original_position": 15,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "in_reply_to_id": 2722044598,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "How about using POSIX threads to create a thread with a minimal stack size (~4096 bytes)?\r\n```C++\r\n#ifndef WIN32\r\n// Confirm that ~Node(), Node::Clone() and operator=(Node&&) are stack-safe.\r\nBOOST_AUTO_TEST_CASE(node_deep_destruct)\r\n{\r\n    using miniscript::internal::NoDupCheck;\r\n    using miniscript::Fragment;\r\n    using NodeU32 = miniscript::Node<uint32_t>;\r\n\r\n    // Use pthreads which enables us to specify a small stack-size\r\n    pthread_attr_t attr;\r\n    pthread_attr_init(&attr);\r\n    // Set the stack size\r\n    BOOST_REQUIRE_EQUAL(pthread_attr_setstacksize(&attr, PTHREAD_STACK_MIN), EXIT_SUCCESS);\r\n\r\n    pthread_t thread;\r\n    BOOST_REQUIRE_EQUAL(pthread_create(&thread, &attr, [] (void*) -> void* {\r\n        constexpr auto ctx{miniscript::MiniscriptContext::TAPSCRIPT};\r\n\r\n        NodeU32 root{NoDupCheck{}, ctx, Fragment::JUST_1};\r\n        for (uint32_t i{0}; i < PTHREAD_STACK_MIN + 1; ++i) {\r\n            root = NodeU32{NoDupCheck{}, ctx, Fragment::WRAP_N, Vector(std::move(root))};\r\n        }\r\n        BOOST_CHECK(root.IsValid());\r\n        BOOST_CHECK_EQUAL(root.GetStaticOps(), PTHREAD_STACK_MIN + 1);\r\n\r\n        auto clone{root.Clone()};\r\n        BOOST_CHECK_EQUAL(clone.GetStaticOps(), root.GetStaticOps());\r\n\r\n        clone = std::move(root);\r\n        return nullptr;\r\n    }, nullptr), EXIT_SUCCESS);\r\n\r\n    // Join the thread to ensure it completes\r\n    pthread_join(thread, nullptr);\r\n\r\n    // Destroy the attribute object\r\n    pthread_attr_destroy(&attr);\r\n}\r\n#endif\r\n```",
      "created_at": "2026-01-28T12:11:25Z",
      "updated_at": "2026-01-28T12:18:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2736355030",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2736355030"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 741,
      "original_line": 741,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2736363362",
      "pull_request_review_id": 3716395084,
      "id": 2736363362,
      "node_id": "PRRC_kwDOABII586jGZdi",
      "diff_hunk": "@@ -727,4 +727,25 @@ BOOST_AUTO_TEST_CASE(fixed_tests)\n     g_testdata.reset();\n }\n \n+// Confirm that ~Node(), Node::Clone() and operator=(Node&&) are stack-safe.\n+BOOST_AUTO_TEST_CASE(node_deep_destruct)\n+{\n+    using miniscript::internal::NoDupCheck;\n+    using miniscript::Fragment;\n+    using NodeU32 = miniscript::Node<uint32_t>;\n+\n+    constexpr auto ctx{miniscript::MiniscriptContext::P2WSH};\n+\n+    NodeU32 root{NoDupCheck{}, ctx, Fragment::JUST_1};\n+    for (uint32_t i{0}; i < 200'000; ++i) {\n+        root = NodeU32{NoDupCheck{}, ctx, Fragment::WRAP_S, Vector(std::move(root))};\n+    }\n+    BOOST_CHECK_EQUAL(root.ScriptSize(), 200'001);",
      "path": "src/test/miniscript_tests.cpp",
      "position": 17,
      "original_position": 17,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "in_reply_to_id": 2722062298,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Aren't they pretty related if there's a bunch of `WRAP_S`/`WRAP_N`?\r\nWould `GetStaticOps()` be any better?",
      "created_at": "2026-01-28T12:13:48Z",
      "updated_at": "2026-01-28T12:17:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2736363362",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2736363362"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 743,
      "original_line": 743,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2736365643",
      "pull_request_review_id": 3716397576,
      "id": 2736365643,
      "node_id": "PRRC_kwDOABII586jGaBL",
      "diff_hunk": "@@ -727,4 +727,25 @@ BOOST_AUTO_TEST_CASE(fixed_tests)\n     g_testdata.reset();\n }\n \n+// Confirm that ~Node(), Node::Clone() and operator=(Node&&) are stack-safe.\n+BOOST_AUTO_TEST_CASE(node_deep_destruct)\n+{\n+    using miniscript::internal::NoDupCheck;\n+    using miniscript::Fragment;\n+    using NodeU32 = miniscript::Node<uint32_t>;\n+\n+    constexpr auto ctx{miniscript::MiniscriptContext::P2WSH};\n+\n+    NodeU32 root{NoDupCheck{}, ctx, Fragment::JUST_1};\n+    for (uint32_t i{0}; i < 200'000; ++i) {\n+        root = NodeU32{NoDupCheck{}, ctx, Fragment::WRAP_S, Vector(std::move(root))};",
      "path": "src/test/miniscript_tests.cpp",
      "position": 15,
      "original_position": 15,
      "commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "original_commit_id": "964c44cdcd6be5f39aed1aeda9c305803eb3b25f",
      "in_reply_to_id": 2722044598,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I don't mind re-reviewing if this is a blocker for anyone, otherwise I suggest we decouple it from all the heavy refactors here and push in a follow-up.",
      "created_at": "2026-01-28T12:14:29Z",
      "updated_at": "2026-01-28T12:14:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2736365643",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2736365643"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31713"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 741,
      "original_line": 741,
      "side": "RIGHT"
    }
  ]
}