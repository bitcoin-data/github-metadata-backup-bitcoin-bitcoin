{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
    "id": 1791849883,
    "node_id": "PR_kwDOABII585qzXWb",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/29735",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/29735.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/29735.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29735",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29735/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/4fe7d150eb3c85a6597d8fc910fe1490358197ad",
    "number": 29735,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "AcceptMultipleTransactions: Fix workspace not being set as client_maxfeerate failure",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Bug causes an `Assume()` failure due to the expectation that the individual result should be invalid when done over `submitpackage` via rpc.\r\n\r\nBug introduced by https://github.com/bitcoin/bitcoin/pull/28950 , and I discovered it rebasing https://github.com/bitcoin/bitcoin/pull/28984 since it's easier to hit in that test scenario.\r\n\r\nTests in place were only checking `AcceptSingleTransaction`-level checks due to package evaluation only triggering when minfee is too high for the parent transaction.\r\n\r\nAdded test along with fix, moving the fill_mempool utility into a common area for re-use.",
    "labels": [
      {
        "id": 118379652,
        "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
        "name": "Validation",
        "color": "6060aa",
        "default": false
      }
    ],
    "created_at": "2024-03-26T14:41:47Z",
    "updated_at": "2024-04-08T13:18:11Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "ef0d5ed6d7eebcce26a4783eaabd486a422db3c8",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "instagibbs:2024-03-fix-multitx-maxfee",
      "ref": "2024-03-fix-multitx-maxfee",
      "sha": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 13910191,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMzkxMDE5MQ==",
        "name": "bitcoin",
        "full_name": "instagibbs/bitcoin",
        "owner": {
          "login": "instagibbs",
          "id": 5767891,
          "node_id": "MDQ6VXNlcjU3Njc4OTE=",
          "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/instagibbs",
          "html_url": "https://github.com/instagibbs",
          "followers_url": "https://api.github.com/users/instagibbs/followers",
          "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
          "organizations_url": "https://api.github.com/users/instagibbs/orgs",
          "repos_url": "https://api.github.com/users/instagibbs/repos",
          "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/instagibbs/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/instagibbs/bitcoin",
        "description": "Bitcoin integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/instagibbs/bitcoin",
        "archive_url": "https://api.github.com/repos/instagibbs/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/instagibbs/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/instagibbs/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/instagibbs/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/instagibbs/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/instagibbs/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/instagibbs/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/instagibbs/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/instagibbs/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/instagibbs/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/instagibbs/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/instagibbs/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/instagibbs/bitcoin/events",
        "forks_url": "https://api.github.com/repos/instagibbs/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/instagibbs/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/instagibbs/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/instagibbs/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/instagibbs/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/instagibbs/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/instagibbs/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/instagibbs/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/instagibbs/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/instagibbs/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/instagibbs/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/instagibbs/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/instagibbs/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/instagibbs/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/instagibbs/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/instagibbs/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:instagibbs/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/instagibbs/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/instagibbs/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/instagibbs/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/instagibbs/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/instagibbs/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/instagibbs/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/instagibbs/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/instagibbs/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/instagibbs/bitcoin/hooks",
        "svn_url": "https://github.com/instagibbs/bitcoin",
        "homepage": "http://www.bitcoin.org",
        "language": "C++",
        "forks_count": 1,
        "stargazers_count": 2,
        "watchers_count": 2,
        "size": 233336,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-04-08T13:16:26Z",
        "created_at": "2013-10-27T20:56:53Z",
        "updated_at": "2022-12-28T23:57:23Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "f0794cbd405636a7f528a60f2873050b865cf7e8",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35019,
        "stargazers_count": 75303,
        "watchers_count": 75303,
        "size": 254492,
        "default_branch": "master",
        "open_issues_count": 725,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-04-08T13:16:29Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2024-04-08T13:58:42Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 119,
    "deletions": 60,
    "changed_files": 5,
    "commits": 6,
    "review_comments": 45,
    "comments": 2
  },
  "events": [
    {
      "event": "commented",
      "id": 2020621274,
      "node_id": "IC_kwDOABII5854cDva",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2020621274",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-26T14:41:50Z",
      "updated_at": "2024-04-08T13:14:58Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/29735).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [ismaelsadeeq](https://github.com/bitcoin/bitcoin/pull/29735#pullrequestreview-1986192988) |\n| Stale ACK | [glozow](https://github.com/bitcoin/bitcoin/pull/29735#pullrequestreview-1979232550), [murchandamus](https://github.com/bitcoin/bitcoin/pull/29735#pullrequestreview-1986238385) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#29700](https://github.com/bitcoin/bitcoin/pull/29700) (kernel, refactor: return error status on all fatal errors by ryanofsky)\n* [#28970](https://github.com/bitcoin/bitcoin/pull/28970) (p2p: opportunistically accept 1-parent-1-child packages by glozow)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#issuecomment-2020621274",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29735"
    },
    {
      "event": "labeled",
      "id": 12251721492,
      "node_id": "LE_lADOABII586Dol9QzwAAAALaQm8U",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12251721492",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-26T14:55:00Z",
      "label": {
        "name": "Validation",
        "color": "6060aa"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-26T15:06:04Z",
      "updated_at": "2024-03-26T15:06:04Z",
      "source": {
        "issue": {
          "id": 2021654832,
          "node_id": "PR_kwDOABII585g8KkU",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28984",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28984/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28984/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28984/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28984",
          "number": 28984,
          "state": "open",
          "state_reason": null,
          "title": "Cluster size 2 package rbf",
          "body": "Allows any 2 transaction package with no in-mempool ancestors to do package RBF when directly conflicting with other mempool clusters of size two or less.\r\n\r\n\r\nProposed validation steps:\r\n1) If the transaction package is of size 1, legacy rbf rules apply.\r\n2) Otherwise the transaction package consists of a (parent, child) pair with no other in-mempool ancestors (or descendants, obviously), so it is also going to create a cluster of size 2). If larger, fail.\r\n3) The package rbf may not evict more than 100 transactions from the mempool(bip125 rule 5)\r\n4) The package's child tx has greater feerate than the parent tx (otherwise the parent should have RBF'd on its own at step 0)\r\n5) Every directly conflicted mempool transaction is connected to at most 1 other in-mempool transaction (ie the cluster size of the conflict is at most 2).\r\n6) Diagram check: We ensure that the replacement is strictly superior at all points, improving the mempool (which includes bip125 rule 3)\r\n7) The total fee of the package, minus the total fee of what is being evicted, is at least the minrelayfee * size of the package (equivalent to bip125 rule 3 and 4)\r\n\r\nPost-cluster mempool this will likely be expanded to general package rbf, but this is what we can safely support today.\r\n",
          "user": {
            "login": "instagibbs",
            "id": 5767891,
            "node_id": "MDQ6VXNlcjU3Njc4OTE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/instagibbs",
            "html_url": "https://github.com/instagibbs",
            "followers_url": "https://api.github.com/users/instagibbs/followers",
            "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
            "organizations_url": "https://api.github.com/users/instagibbs/orgs",
            "repos_url": "https://api.github.com/users/instagibbs/repos",
            "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/instagibbs/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 82428251,
              "node_id": "MDU6TGFiZWw4MjQyODI1MQ==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/TX%20fees%20and%20policy",
              "name": "TX fees and policy",
              "color": "5319e7",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 15,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28984",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28984",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28984.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28984.patch"
          },
          "created_at": "2023-12-01T22:12:06Z",
          "updated_at": "2024-03-28T01:18:28Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 1960672199,
      "node_id": "PRR_kwDOABII58503XvH",
      "url": null,
      "actor": null,
      "commit_id": "5ae4dce79d304457bb419512e2a478cf6dd08b43",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept ACK, verified that on master the test fails since the individual result wasn't populated and is \"Valid\"",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#pullrequestreview-1960672199",
      "submitted_at": "2024-03-27T11:08:36Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12265255015,
      "node_id": "HRFPE_lADOABII586Dol9QzwAAAALbEPBn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12265255015",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-27T12:55:39Z"
    },
    {
      "event": "commented",
      "id": 2022777293,
      "node_id": "IC_kwDOABII5854kSHN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2022777293",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-27T13:31:09Z",
      "updated_at": "2024-03-27T13:34:45Z",
      "author_association": "MEMBER",
      "body": "Added some fuzz coverage which would have likely caught this\r\n\r\nedit: yep, 3 minutes: `LC1hZGRuCS0Ab2VtZHL1iQHY2NjY2Am//wAAAAD/AACAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAA//8AAABB44MP3NL5/4zzEoz/dpB2dg==`",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#issuecomment-2022777293",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29735"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-27T20:57:06Z",
      "updated_at": "2024-03-27T20:57:06Z",
      "source": {
        "issue": {
          "id": 2201362078,
          "node_id": "PR_kwDOABII585qbY-z",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29700",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29700/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29700/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29700/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/29700",
          "number": 29700,
          "state": "open",
          "state_reason": null,
          "title": "kernel, refactor: return error status on all fatal errors",
          "body": "Return util::Result objects from all functions that can trigger fatal errors.\r\n\r\nThere are many validation functions that handle failures by calling `AbortNode` and triggering shutdowns, without returning error information to their callers. This makes error handling in libbitcoinkernel application code difficult, because the only way to handle these errors is to register for [notification callbacks](https://github.com/bitcoin/bitcoin/blob/master/src/kernel/notifications_interface.h). Improve this by making all functions that trigger fatal errors return util::Result objects with the error information.\r\n\r\nThis PR is a pure refactoring that returns extra result information from functions without changing their behavior. It's a possible alternative to and subset of #29642, which adds similar return information but also makes behavior changes and exposes a FatalError type.\r\n\r\n---\r\n\r\n**This is based on #25665.** The non-base commits are:\r\n\r\n- [`fa31903c7eeb` refactor, kernel: Add FlushStatus / FlushResult types](https://github.com/bitcoin/bitcoin/pull/29700/commits/fa31903c7eeb25d2aafd2d611901abb1a94dc022)\r\n- [`9cec4d377c52` refactor: Add InfoType field to util::Result](https://github.com/bitcoin/bitcoin/pull/29700/commits/9cec4d377c527ca4ebb3b1db410dc519ab6c7179)\r\n- [`56f3306d3efa` refactor, blockstorage: Return FlushResult from flush methods](https://github.com/bitcoin/bitcoin/pull/29700/commits/56f3306d3efa3380ab8e9c7d5e9c89a7d8795616)\r\n- [`d5da19a3e1e6` refactor, blockstorage: Return fatal errors from block writes](https://github.com/bitcoin/bitcoin/pull/29700/commits/d5da19a3e1e6860a09f5f769b82dac609be762f6)\r\n- [`fb9385f9017b` refactor, blockstorage: Return fatal error from LoadBlockIndex](https://github.com/bitcoin/bitcoin/pull/29700/commits/fb9385f9017b5bf688cbfdf4c07d511a7674db14)\r\n- [`396b26eebd25` refactor, validation: Return fatal errors from FlushStateToDisk](https://github.com/bitcoin/bitcoin/pull/29700/commits/396b26eebd259faacfb54056a65541a717e6742c)\r\n- [`b40dbb105125` refactor, validation: Return fatal errors from mempool accept functions](https://github.com/bitcoin/bitcoin/pull/29700/commits/b40dbb105125a33845426b105cf0f90315c77192)\r\n- [`3f7cd8f8a2b5` refactor, validation: Return fatal errors from assumeutxo snapshot functions](https://github.com/bitcoin/bitcoin/pull/29700/commits/3f7cd8f8a2b5f9070f9d5249a2228275dd55ba39)\r\n- [`adc544116468` refactor, validation: Return fatal errors from block connect functions](https://github.com/bitcoin/bitcoin/pull/29700/commits/adc5441164688df60b2f558779ceb7c7f104af8b)\r\n- [`a4d8ebb939bc` refactor, validation: Return fatal errors from activate best chain functions](https://github.com/bitcoin/bitcoin/pull/29700/commits/a4d8ebb939bc39d0ee131f2baec7dc6d61a38292)\r\n- [`94da23b87daf` refactor, validation: Return fatal errors from new block functions](https://github.com/bitcoin/bitcoin/pull/29700/commits/94da23b87dafc794aca206371666930ee494f2d9)\r\n- [`417851b9bd20` refactor, blockstorage: Return fatal error from ImportBlocks](https://github.com/bitcoin/bitcoin/pull/29700/commits/417851b9bd205a04a8cd068988d64431b6b5ac21)\r\n- [`edc9fd110cc4` refactor, validation: Return more errors from VerifyDB](https://github.com/bitcoin/bitcoin/pull/29700/commits/edc9fd110cc4786bc87a01662ea39ce599f1a070)\r\n",
          "user": {
            "login": "ryanofsky",
            "id": 7133040,
            "node_id": "MDQ6VXNlcjcxMzMwNDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ryanofsky",
            "html_url": "https://github.com/ryanofsky",
            "followers_url": "https://api.github.com/users/ryanofsky/followers",
            "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
            "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
            "repos_url": "https://api.github.com/users/ryanofsky/repos",
            "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 2,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29700",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/29700",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/29700.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/29700.patch"
          },
          "created_at": "2024-03-21T23:11:56Z",
          "updated_at": "2024-04-08T03:09:22Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-27T21:45:02Z",
      "updated_at": "2024-03-27T21:45:02Z",
      "source": {
        "issue": {
          "id": 2182725746,
          "node_id": "PR_kwDOABII585pcBG3",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29642",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29642/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29642/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29642/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/29642",
          "number": 29642,
          "state": "open",
          "state_reason": null,
          "title": "kernel: Handle fatal errors through return values",
          "body": "Based on #25665.\r\n\r\nCurrently functions issuing fatal errors call the `fatalError` notification method to issue a shutdown procedure. This makes it hard for higher level functions to figure out if an error deeper in the call stack occurred. For users of the kernel it might also be difficult to assert which function call issued a fatal error if they are being run concurrently. If the kernel would eventually be used by external users, getting fatal error information through a callback instead of function return values would also be cumbersome and limiting. Unit, bench, and fuzz tests currently don't have a way to effectively test against fatal errors.\r\n\r\nThis patch set is an attempt to make fatal error handling in the kernel code more transparent. Fatal errors are now passed up the call stack through `util::Result<T, FatalError>` failure values. A previous attempt at this by theuni always immediately returned failure values if a function call returned a failure. However, this is not always desirable (see discussion [here](https://github.com/bitcoin/bitcoin/pull/27866#discussion_r1256378064)). Sometimes, further operations can still be completed even if a fatal error was issued. The solution to this is that these \"ignored\" errors are still moved through `util::Result`'s error string values with its `.MoveMessages` method, even while a failure value in the result is not present.\r\n\r\nNext to some smaller behavior changes, the most significant change is that the issuing of a shutdown procedure is delayed until a potential fatal error is handled as opposed to immediately when it is first encountered. Another effect is that potential fatal errors are now asserted in the bench, fuzz and unit tests. Some of the currently not immediately returned fatal errors need some further scrutiny. These are marked with a `TODO (fatal error)` comment and could be tackled in a later PR.\r\n\r\nTo validate this approach a new clang-tidy check is introduced. It implements the following checks:\r\n\r\n1. If a function calls another function with a `util::Result<T, FatalCondition>` return type, its return type has to be `util::Result<T, FatalCondition>` too, or it has to handle the value returned by the function with one of `CheckFatal`, `HandleFatalError`,\r\n`UnwrapFatalError`, or `CheckFatalFailure`.\r\n2. In functions returning a `util::Result<T, FatalCondition>` a call to a function returning a `util::Result<T, FatalCondition>` needs to propagate the value by either:\r\n   - Returning it immediately\r\n   - Assigning it immediately to an existing result with `.MoveMessages()` or `.Set()`\r\n   - Eventually passing it as an argument to a `.MoveMessages()`\r\n\r\n---\r\n\r\nThis PR is part of the [libbitcoinkernel project](https://github.com/bitcoin/bitcoin/issues/27587) and is a step towards stage 2, creating a more refined kernel API.",
          "user": {
            "login": "TheCharlatan",
            "id": 8421793,
            "node_id": "MDQ6VXNlcjg0MjE3OTM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/TheCharlatan",
            "html_url": "https://github.com/TheCharlatan",
            "followers_url": "https://api.github.com/users/TheCharlatan/followers",
            "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
            "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
            "repos_url": "https://api.github.com/users/TheCharlatan/repos",
            "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 118379652,
              "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
              "name": "Validation",
              "color": "6060aa",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 9,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29642",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/29642",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/29642.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/29642.patch"
          },
          "created_at": "2024-03-12T21:34:45Z",
          "updated_at": "2024-03-28T11:56:13Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-28T17:38:15Z",
      "updated_at": "2024-03-28T17:38:15Z",
      "source": {
        "issue": {
          "id": 2016966837,
          "node_id": "PR_kwDOABII585gsIyD",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28970",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28970/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28970/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28970/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28970",
          "number": 28970,
          "state": "open",
          "state_reason": null,
          "title": "p2p: opportunistically accept 1-parent-1-child packages",
          "body": "This enables 1p1c packages to propagate in the \"happy case\" (i.e. not reliable if adversaries are actively attacking) and contains a lot of package relay-related code. See https://github.com/bitcoin/bitcoin/issues/27463 for overall package relay tracking.\r\n\r\nRationale: This is \"non-robust 1-parent-1-child package relay\" which is immediatley useful.\r\n- Relaying 1-parent-1-child CPFP when mempool min feerate is high would be a subset of all package relay use cases, but a pretty significant improvement over what we have today, where such transactions don't propagate at all. [1]\r\n- Today, a miner can run this with a normal/small maxmempool to get revenue from CPFP'd transactions without losing out on the ones with parents below mempool minimum feerate.\r\n- The majority of this code is useful for building package relay that is more robust and more general than 1p1c e.g. #27742.\r\n\r\n\r\nThe first 2 commits are followups from #29619:\r\n- https://github.com/bitcoin/bitcoin/pull/29619#discussion_r1523094034\r\n- https://github.com/bitcoin/bitcoin/pull/29619#discussion_r1519819257\r\n\r\nQ: What makes this short of a more full package relay feature?\r\n\r\n(1) it only supports packages in which 1 of the parents needs to be CPFP'd by the child. That includes 1-parent-1-child packages and situations in which the other parents already pay for themselves (and are thus in mempool already when the package is submitted). More general package relay is a future improvement that requires more engineering in mempool and validation - see #27463.\r\n\r\n(2) We rely on having kept the child in orphanage, and don't make any attempt to protect it while we wait to receive the parent. If we are experiencing a lot of orphanage churn (e.g. an adversary is purposefully sending us a lot of transactions with missing inputs), we will fail to submit packages. This limitation has been around for 12+ years, see #27742 which adds a token bucket scheme for protecting package-related orphans at a limited rate per peer.\r\n\r\n(3) Our orphan-handling logic is somewhat opportunistic; we don't make much effort to resolve an orphan beyond asking the child's sender for the parents. This means we may miss packages if the first sender fails to give us the parent (intentionally or unintentionally). To make this more robust, we need receiver-side logic to retry orphan resolution with multiple peers. This is also an existing problem which has a proposed solution in #28031.\r\n\r\n[1]: see this writeup and its links https://github.com/bitcoin/bips/blob/02ec218c7857ef60914e9a3d383b68caf987f70b/bip-0331.mediawiki#propagate-high-feerate-transactions",
          "user": {
            "login": "glozow",
            "id": 25183001,
            "node_id": "MDQ6VXNlcjI1MTgzMDAx",
            "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/glozow",
            "html_url": "https://github.com/glozow",
            "followers_url": "https://api.github.com/users/glozow/followers",
            "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
            "organizations_url": "https://api.github.com/users/glozow/orgs",
            "repos_url": "https://api.github.com/users/glozow/repos",
            "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/glozow/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            },
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 19,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28970",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28970",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28970.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28970.patch"
          },
          "created_at": "2023-11-29T16:25:29Z",
          "updated_at": "2024-04-06T00:29:33Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 1966413998,
      "node_id": "PRR_kwDOABII5851NRiu",
      "url": null,
      "actor": null,
      "commit_id": "b057d2be0107179146ced00442ffac90230081d0",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Sorry for the nits, still need to run the fuzzer but otherwise lgtm",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#pullrequestreview-1966413998",
      "submitted_at": "2024-04-03T18:43:15Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12353903357,
      "node_id": "HRFPE_lADOABII586Dol9QzwAAAALgWZr9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12353903357",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-04T08:24:11Z"
    },
    {
      "event": "reviewed",
      "id": 1979232550,
      "node_id": "PRR_kwDOABII5851-LEm",
      "url": null,
      "actor": null,
      "commit_id": "14c86ba721e1a208c88ada133ba9e90e24724ea4",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "ACK 14c86ba721e1a208c88ada133ba9e90e24724ea4\r\n\r\nVerified the fuzz test catches this problem, seems to run fine with the changes. Thanks for accepting the suggestions.",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#pullrequestreview-1979232550",
      "submitted_at": "2024-04-04T08:58:45Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
    },
    {
      "event": "labeled",
      "id": 12354801143,
      "node_id": "LE_lADOABII586Dol9QzwAAAALgZ033",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12354801143",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-04T09:19:33Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-04T09:32:06Z",
      "updated_at": "2024-04-04T09:32:06Z",
      "source": {
        "issue": {
          "id": 1668056618,
          "node_id": "I_kwDOABII585jbIYq",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27463",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27463/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27463/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27463/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/27463",
          "number": 27463,
          "state": "open",
          "state_reason": null,
          "title": "Package Relay Project Tracking",
          "body": "This issue will be edited frequently to reflect the current status of the project.\r\n\r\n### What is ready for review now?\r\n:point_down: :point_down: :point_down: :point_down: :point_down: :point_down: :point_down:\r\n#28970\r\n#29496\r\n#29735\r\n:point_up: :point_up: :point_up: :point_up: :point_up: :point_up: :point_up: \r\n\r\n### Why does the roadmap look like this?\r\n:point_right: #29319 :point_left: \r\n\r\n### Tasks and PRs\r\n**(1) multi-parent-1-child package validation**\r\n\r\nWhat we get: the ability to validate multiple transactions, including CPFP of transactions below the mempool minimum feerate. An RPC to submit things locally.\r\n\r\n<details><summary>See PRs</summary>\r\n\r\n- Enable validation of multiple transactions in MemPoolAccept\r\n  - [x] Dependency: #21062\r\n  - [x] Dependency: #23381\r\n  - [x] Main feature 1/2: #20833\r\n  - [x] Main feature 2/2: #21800\r\n  - [x] Followup: #22084\r\n- Enable package CPFP\r\n  - [x] Main feature 1/2: #22674\r\n  - [x] Followup: #24310\r\n  - [x] Followup: #23804\r\n  - [x] Main feature 2/2: #24152\r\n  - [x] short term bug fix: avoid the risk of below-minrelaytxfee transactions hanging around forever in the mempool  #26933\r\n- RPC access\r\n  - [x] #24836\r\n  - [x] #26646\r\n  - [x] #27609\r\n  - [x] #28848\r\n  - [x] #28950\r\n  - [x] Followup: #29722\r\n  - [ ] Followup: #29735 \r\n- Fuzzing and bug fixes\r\n  - [x] #28450\r\n  - [x] #28764\r\n  - [x] #28825 \r\n  - [x] Bug fix: #28251\r\n  - [x] Bug fix: #28471\r\n  - [x] Bug fix: #28472\r\n</details>\r\n\r\n**(2a) Topologically Restricted Until Confirmation (v3) transaction policy**\r\n\r\nWhat we get: an opt-in policy for anti-pinning in single transaction or 1-parent-1-child package scenarios. Also, package CPFP of 0-fee parent and package RBF for restricted topologies prior to cluster mempool.\r\n- Topologically Restricted Until Confirmation (v3) transaction policy\r\n  - [x] Main feature: #28948\r\n  - [x] Followup: #29424\r\n  - [x] Sibling Eviction: #29306\r\n  - [ ] Enable v3 on mainnet: #29496\r\n\r\n**(2b) Package RBF for cluster size 2**\r\n- Enable Package RBF for 1-parent-1-child situations\r\n   - [x] Dependency: #22796 \r\n   - [x] Dependency: #22675 \r\n   - [x] Dependency: #22855\r\n   - [x] Dependency: #29242\r\n   - [x] Followup: #29724\r\n   - [ ] Main feature: #28984\r\n\r\n**(3) 1-parent-1-child package relay**\r\n\r\nWhat we get: package relay of 1-parent-1-child packages.\r\nProtocols like LN can use this to create 0-fee presigned transactions with a single, 0-value anchor output; 0-fee commitment transactions can replace each other using the fees of the child attached to the anchor.\r\nThis should provide an adequate replacement for CPFP carve out, which is helpful for the next step (see #29319).\r\n\r\n- Opportunistically submit 1-parent-1-child packages\r\n  - [x] Dependency: #28785\r\n  - [ ] WIP #28970\r\n- Try multiple peers for orphan resolution, make orphanage more robust\r\n  - [x] Dependency: #28785\r\n  - [x] Dependency: #28199\r\n  - [x] Dependency: #28364\r\n  - [ ] Main feature: #28031 \r\n  - [ ] WIP: token bucket orphanage protection\r\n\r\n**(4) cluster mempool**\r\n\r\nWhat we get: the ability to quickly assess the incentive compatibility of transactions, safer eviction, more incentive-compatible and pinning-free RBF rules.\r\n\r\n- [ ] Cluster Mempool #27677\r\n  - [ ] #28676\r\n\r\n\r\n**(5) more general package relay**\r\n\r\nGoals: propagate incentive-compatible packages that are more compelx than 1p1c, safely evaluate replacements within packages, handle orphans better.\r\n\r\n- WIP: Package RBF with less restrictive topologies\r\n- WIP: Package validation of less restrictive topologies\r\n- Ephemeral Anchors\r\n  - #29001\r\n  - bitcoin/bips/pull/1524\r\n- [ ] use BIP 331 ancestor package relay for orphan-handling\r\n  - [ ] bitcoin/bips/pull/1382\r\n  - [ ] #27742 \r\n- [ ] Some sender-initiated package relay protocol using chunks (?)\r\n\r\n<details><summary>See also:</summary>\r\n\r\nSuperseded/Deferred Work\r\n- Sub-package evaluation with ancestor packages\r\n- [x] #28758\r\n  - [x] #28808\r\n  - #26711 \r\n  - #28813\r\n- #27018\r\n- #25038\r\n- #26403\r\n\r\nPrehistory\r\n- [x] #16400 \r\n- #16401 \r\n- #14895 \r\n- #19621 \r\n- https://gist.github.com/sdaftuar/8756699bfcad4d3806ba9f3396d4e66a\r\n</details>",
          "user": {
            "login": "glozow",
            "id": 25183001,
            "node_id": "MDQ6VXNlcjI1MTgzMDAx",
            "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/glozow",
            "html_url": "https://github.com/glozow",
            "followers_url": "https://api.github.com/users/glozow/followers",
            "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
            "organizations_url": "https://api.github.com/users/glozow/orgs",
            "repos_url": "https://api.github.com/users/glozow/repos",
            "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/glozow/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 64583,
              "node_id": "MDU6TGFiZWw2NDU4Mw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature",
              "name": "Feature",
              "color": "7cf575",
              "default": false
            },
            {
              "id": 64584,
              "node_id": "MDU6TGFiZWw2NDU4NA==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Brainstorming",
              "name": "Brainstorming",
              "color": "ebd775",
              "default": false
            },
            {
              "id": 82428251,
              "node_id": "MDU6TGFiZWw4MjQyODI1MQ==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/TX%20fees%20and%20policy",
              "name": "TX fees and policy",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 15,
          "created_at": "2023-04-14T11:14:50Z",
          "updated_at": "2024-04-08T12:44:55Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "subscribed",
      "id": 12358919442,
      "node_id": "SE_lADOABII586Dol9QzwAAAALgpiUS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12358919442",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-04T14:02:55Z"
    },
    {
      "event": "reviewed",
      "id": 1980784495,
      "node_id": "PRR_kwDOABII5852EF9v",
      "url": null,
      "actor": null,
      "commit_id": "14c86ba721e1a208c88ada133ba9e90e24724ea4",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK 14c86ba721e1a208c88ada133ba9e90e24724ea4 with nits.",
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#pullrequestreview-1980784495",
      "submitted_at": "2024-04-04T18:47:20Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
    },
    {
      "event": "unlabeled",
      "id": 12365484207,
      "node_id": "UNLE_lADOABII586Dol9QzwAAAALhClCv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12365484207",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-04T22:29:43Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12368484262,
      "node_id": "HRFPE_lADOABII586Dol9QzwAAAALhOBem",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12368484262",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-05T06:20:59Z"
    },
    {
      "event": "reviewed",
      "id": 1983320959,
      "node_id": "PRR_kwDOABII5852NxN_",
      "url": null,
      "actor": null,
      "commit_id": "1d79aabed4f2031c3001c5497afc9df8da4e0b20",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#pullrequestreview-1983320959",
      "submitted_at": "2024-04-05T14:25:22Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12381291291,
      "node_id": "HRFPE_lADOABII586Dol9QzwAAAALh-4Mb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12381291291",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-06T09:53:10Z"
    },
    {
      "event": "reviewed",
      "id": 1986238385,
      "node_id": "PRR_kwDOABII5852Y5ex",
      "url": null,
      "actor": null,
      "commit_id": "052c67d4beb72d3fdf31fa5e584ea2fa12e6f69c",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK 052c67d4beb72d3fdf31fa5e584ea2fa12e6f69c\r\n\r\nPlease feel free to ignore nits",
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#pullrequestreview-1986238385",
      "submitted_at": "2024-04-08T12:23:35Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
    },
    {
      "event": "review_requested",
      "id": 12391974704,
      "node_id": "RRE_lADOABII586Dol9QzwAAAALinocw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12391974704",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-08T12:23:38Z",
      "requested_reviewer": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "reviewed",
      "id": 1986192988,
      "node_id": "PRR_kwDOABII5852YuZc",
      "url": null,
      "actor": null,
      "commit_id": "052c67d4beb72d3fdf31fa5e584ea2fa12e6f69c",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept ACK\r\n\r\n\r\nI will run the new fuzz test with and without 72425bd699dd33d57794b3339f6266c4c9df443d",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#pullrequestreview-1986192988",
      "submitted_at": "2024-04-08T12:27:21Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDczYjY4YmQ4YjRmOTQ0N2UzMDA5MWM3ZjhjM2RjOTFhMDg2YmQ5M2I",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/73b68bd8b4f9447e30091c7f8c3dc91a086bd93b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/73b68bd8b4f9447e30091c7f8c3dc91a086bd93b",
      "tree": {
        "sha": "7baa10cd2cdfe90c8cca93d57bf18a61fbbf05f7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7baa10cd2cdfe90c8cca93d57bf18a61fbbf05f7"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/19b968f743ca666032371ab2424feaffd0c6043e",
          "sha": "19b968f743ca666032371ab2424feaffd0c6043e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/19b968f743ca666032371ab2424feaffd0c6043e"
        }
      ],
      "message": "fill_mempool: remove subtest-specific comment",
      "committer": {
        "name": "Greg Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2024-04-08T13:05:07Z"
      },
      "author": {
        "name": "Greg Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2024-04-08T13:05:07Z"
      },
      "sha": "73b68bd8b4f9447e30091c7f8c3dc91a086bd93b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDQ4MTk2YjJlOGY1MmFhYTExMjZkNzllMGY2YzI5MWQxOWY0Y2FmZDI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/48196b2e8f52aaa1126d79e0f6c291d19f4cafd2",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/48196b2e8f52aaa1126d79e0f6c291d19f4cafd2",
      "tree": {
        "sha": "0505f128a096951a79a563cfd9bbf52b5b1b1502",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0505f128a096951a79a563cfd9bbf52b5b1b1502"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/73b68bd8b4f9447e30091c7f8c3dc91a086bd93b",
          "sha": "73b68bd8b4f9447e30091c7f8c3dc91a086bd93b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/73b68bd8b4f9447e30091c7f8c3dc91a086bd93b"
        }
      ],
      "message": "Move fill_mempool to util function",
      "committer": {
        "name": "Greg Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2024-04-08T13:07:38Z"
      },
      "author": {
        "name": "Greg Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2024-04-08T13:07:38Z"
      },
      "sha": "48196b2e8f52aaa1126d79e0f6c291d19f4cafd2"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQ3MmU5N2VlMjZiNDkyNmUzOTU4OWM4ZWM1YmRjZTYwNGQwNzBjNjM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d72e97ee26b4926e39589c8ec5bdce604d070c63",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d72e97ee26b4926e39589c8ec5bdce604d070c63",
      "tree": {
        "sha": "ad6f1816894abba1ce28b4e0d628ceebad22df82",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ad6f1816894abba1ce28b4e0d628ceebad22df82"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/48196b2e8f52aaa1126d79e0f6c291d19f4cafd2",
          "sha": "48196b2e8f52aaa1126d79e0f6c291d19f4cafd2",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/48196b2e8f52aaa1126d79e0f6c291d19f4cafd2"
        }
      ],
      "message": "fill_mempool: assert minfee==minrelay",
      "committer": {
        "name": "Greg Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2024-04-08T13:10:16Z"
      },
      "author": {
        "name": "Greg Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2024-04-08T13:10:16Z"
      },
      "sha": "d72e97ee26b4926e39589c8ec5bdce604d070c63"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDJlOTIwOWI4MTJjZDM3ZGUyYTM2N2IyZDE1ZDE2N2FmZTc5ZDFlODc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2e9209b812cd37de2a367b2d15d167afe79d1e87",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2e9209b812cd37de2a367b2d15d167afe79d1e87",
      "tree": {
        "sha": "0cc6415af1f4204bcd578285f3f23ca49040e865",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0cc6415af1f4204bcd578285f3f23ca49040e865"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d72e97ee26b4926e39589c8ec5bdce604d070c63",
          "sha": "d72e97ee26b4926e39589c8ec5bdce604d070c63",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d72e97ee26b4926e39589c8ec5bdce604d070c63"
        }
      ],
      "message": "test: expand docstring to fill_mempool",
      "committer": {
        "name": "Greg Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2024-04-08T13:11:41Z"
      },
      "author": {
        "name": "Greg Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2024-04-05T06:11:26Z"
      },
      "sha": "2e9209b812cd37de2a367b2d15d167afe79d1e87"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12392847081,
      "node_id": "HRFPE_lADOABII586Dol9QzwAAAALiq9bp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12392847081",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-08T13:14:55Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGYyODMzOGI4MmJlOTgyMDM4MGVmMjE3OTA1YWU5YzE2NzE2NGYxODE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f28338b82be9820380ef217905ae9c167164f181",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f28338b82be9820380ef217905ae9c167164f181",
      "tree": {
        "sha": "132bf198287d6661e0bda2db8f8fafbc8d04191f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/132bf198287d6661e0bda2db8f8fafbc8d04191f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2e9209b812cd37de2a367b2d15d167afe79d1e87",
          "sha": "2e9209b812cd37de2a367b2d15d167afe79d1e87",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2e9209b812cd37de2a367b2d15d167afe79d1e87"
        }
      ],
      "message": "AcceptMultipleTransactions: Fix workspace client_maxfeerate\n\nIf we do not set the Failure for the workspace when\nthere is a client_maxfeerate related error, we hit\nan Assume() to the contrary. Properly set it.",
      "committer": {
        "name": "Greg Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2024-04-08T13:15:42Z"
      },
      "author": {
        "name": "Greg Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2024-03-26T14:35:44Z"
      },
      "sha": "f28338b82be9820380ef217905ae9c167164f181"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDRmZTdkMTUwZWIzYzg1YTY1OTdkOGZjOTEwZmUxNDkwMzU4MTk3YWQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "tree": {
        "sha": "bff41071e6d4c57806caefd564bcb9d1bdd96821",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/bff41071e6d4c57806caefd564bcb9d1bdd96821"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f28338b82be9820380ef217905ae9c167164f181",
          "sha": "f28338b82be9820380ef217905ae9c167164f181",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f28338b82be9820380ef217905ae9c167164f181"
        }
      ],
      "message": "fuzz: Add coverage for client_maxfeerate",
      "committer": {
        "name": "Greg Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2024-04-08T13:16:23Z"
      },
      "author": {
        "name": "Greg Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2024-03-27T13:30:05Z"
      },
      "sha": "4fe7d150eb3c85a6597d8fc910fe1490358197ad"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12392870950,
      "node_id": "HRFPE_lADOABII586Dol9QzwAAAALirDQm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12392870950",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-08T13:16:28Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1539410139",
      "pull_request_review_id": 1960672199,
      "id": 1539410139,
      "node_id": "PRRC_kwDOABII585bwYjb",
      "diff_hunk": "@@ -496,6 +496,48 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_in\"], num_in)\n     assert_equal(info[\"connections_out\"], num_out)\n \n+# Allows simpler testing of scenarios with minfee != minrelay\n+def fill_mempool(test_framework, node, miniwallet):\n+        \"\"\"Fill mempool until eviction.\"\"\"",
      "path": "test/functional/test_framework/util.py",
      "position": null,
      "original_position": 6,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "aaa5125f1c65724b89d464be7f6d962afa0171a1",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "is there an extra indent for this whole block? Also, might want to add some other things to this comment like\r\n- `-maxmempool` needs to be very small (i.e. 5) for this to work\r\n- if there are multiple nodes, note this doesn't run `sync_mempools`\r\n- assumes that `-minrelaytxfee` is 1sat/vB",
      "created_at": "2024-03-26T14:51:14Z",
      "updated_at": "2024-03-27T11:08:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1539410139",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1539410139"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 504,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1540871530",
      "pull_request_review_id": 1960672199,
      "id": 1540871530,
      "node_id": "PRRC_kwDOABII585b19Vq",
      "diff_hunk": "@@ -496,6 +496,48 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_in\"], num_in)\n     assert_equal(info[\"connections_out\"], num_out)\n \n+# Allows simpler testing of scenarios with minfee != minrelay\n+def fill_mempool(test_framework, node, miniwallet):",
      "path": "test/functional/test_framework/util.py",
      "position": 4,
      "original_position": 5,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "aaa5125f1c65724b89d464be7f6d962afa0171a1",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": " IIUC util is for more low-level stuff, but don't have better ideas other than throwing it on test_framework.py. Maybe @maflcko or @theStack would have an opinion on where we should put this?",
      "created_at": "2024-03-27T10:48:51Z",
      "updated_at": "2024-03-27T11:08:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1540871530",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1540871530"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 499,
      "original_line": 499,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1540889727",
      "pull_request_review_id": 1960672199,
      "id": 1540889727,
      "node_id": "PRRC_kwDOABII585b2Bx_",
      "diff_hunk": "@@ -369,23 +375,58 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        fill_mempool(self, node, self.wallet)\n+        while node.getrawmempool() != []:\n+            self.generate(node, 1)\n+\n+        minrelay = node.getmempoolinfo()[\"minrelaytxfee\"]\n+        parent = self.wallet.create_self_transfer(\n+            fee_rate=minrelay,\n+        )\n+\n+        child = self.wallet.create_self_transfer(\n+            fee_rate=DEFAULT_FEE,\n+            utxo_to_spend=parent[\"new_utxo\"],\n+        )\n+\n+        pkg_result = node.submitpackage([parent[\"hex\"], child[\"hex\"]], maxfeerate=DEFAULT_FEE - Decimal(\"0.00000001\"))\n+\n+        # Package-wide error reported for package evaluation rejection\n+        assert_equal(pkg_result[\"package_msg\"], \"max feerate exceeded\")\n+        assert \"mempool min fee not met\" in pkg_result[\"tx-results\"][parent[\"wtxid\"]][\"error\"]\n+        assert_equal(pkg_result[\"tx-results\"][child[\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n+        assert_equal(node.getrawmempool(), [])\n+\n+        # Reset minfee\n+        self.restart_node(0)\n+\n         self.log.info(\"Submitpackage maxburnamount arg testing\")\n-        tx = tx_from_hex(chain_hex[1])\n+        chained_txns_burn = self.wallet.create_self_transfer_chain(chain_length=2)\n+        chained_burn_hex = [t[\"hex\"] for t in chained_txns_burn]\n+\n+        tx = tx_from_hex(chained_burn_hex[1])\n         tx.vout[-1].scriptPubKey = b'a' * 10001 # scriptPubKey bigger than 10k IsUnspendable\n-        chain_hex = [chain_hex[0], tx.serialize().hex()]\n+        chained_burn_hex = [chained_burn_hex[0], tx.serialize().hex()]\n         # burn test is run before any package evaluation; nothing makes it in and we get broader exception\n-        assert_raises_rpc_error(-25, \"Unspendable output exceeds maximum configured by user\", node.submitpackage, chain_hex, 0, chained_txns[1][\"new_utxo\"][\"value\"] - Decimal(\"0.00000001\"))\n+        assert_raises_rpc_error(-25, \"Unspendable output exceeds maximum configured by user\", node.submitpackage, chained_burn_hex, 0, chained_txns_burn[1][\"new_utxo\"][\"value\"] - Decimal(\"0.00000001\"))\n         assert_equal(node.getrawmempool(), [])\n \n+        minrate_btc_kvb_burn = min([chained_txn_burn[\"fee\"] / chained_txn_burn[\"tx\"].get_vsize() * 1000 for chained_txn_burn in chained_txns_burn])\n+\n         # Relax the restrictions for both and send it; parent gets through as own subpackage\n-        pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb, maxburnamount=chained_txns[1][\"new_utxo\"][\"value\"])\n-        assert \"error\" not in pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]]\n+        pkg_result = node.submitpackage(chained_burn_hex, maxfeerate=minrate_btc_kvb_burn, maxburnamount=chained_txns_burn[1][\"new_utxo\"][\"value\"])\n+        assert \"error\" not in pkg_result[\"tx-results\"][chained_txns_burn[0][\"wtxid\"]]\n         assert_equal(pkg_result[\"tx-results\"][tx.getwtxid()][\"error\"], \"scriptpubkey\")\n-        assert_equal(node.getrawmempool(), [chained_txns[0][\"txid\"]])\n+        assert_equal(node.getrawmempool(), [chained_txns_burn[0][\"txid\"]])",
      "path": "test/functional/rpc_packages.py",
      "position": 99,
      "original_position": 81,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "5ae4dce79d304457bb419512e2a478cf6dd08b43",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "unrelated renames?",
      "created_at": "2024-03-27T11:00:56Z",
      "updated_at": "2024-03-27T11:08:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1540889727",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1540889727"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": 377,
      "original_start_line": 377,
      "start_side": "LEFT",
      "line": 436,
      "original_line": 436,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1540891352",
      "pull_request_review_id": 1960672199,
      "id": 1540891352,
      "node_id": "PRRC_kwDOABII585b2CLY",
      "diff_hunk": "@@ -1366,6 +1366,8 @@ PackageMempoolAcceptResult MemPoolAccept::AcceptMultipleTransactions(const std::\n         // Individual modified feerate exceeded caller-defined max; abort\n         // N.B. this doesn't take into account CPFPs. Chunk-aware validation may be more robust.\n         if (args.m_client_maxfeerate && CFeeRate(ws.m_modified_fees, ws.m_vsize) > args.m_client_maxfeerate.value()) {\n+            // Need to set failure here both individually and at package level\n+            ws.m_state.Invalid(TxValidationResult::TX_MEMPOOL_POLICY, \"max feerate exceeded\", \"\");\n             package_state.Invalid(PackageValidationResult::PCKG_TX, \"max feerate exceeded\");",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 6,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "5ae4dce79d304457bb419512e2a478cf6dd08b43",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Should this be \"transaction failed\" since it's an individual error?",
      "created_at": "2024-03-27T11:02:12Z",
      "updated_at": "2024-03-27T11:08:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1540891352",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1540891352"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1371,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1541042929",
      "pull_request_review_id": 1963219672,
      "id": 1541042929,
      "node_id": "PRRC_kwDOABII585b2nLx",
      "diff_hunk": "@@ -496,6 +496,48 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_in\"], num_in)\n     assert_equal(info[\"connections_out\"], num_out)\n \n+# Allows simpler testing of scenarios with minfee != minrelay\n+def fill_mempool(test_framework, node, miniwallet):",
      "path": "test/functional/test_framework/util.py",
      "position": 4,
      "original_position": 5,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "aaa5125f1c65724b89d464be7f6d962afa0171a1",
      "in_reply_to_id": 1540871530,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "it has `mine_large_block` et al which seem quite similar imo. I'll move it if there's something obviously better?",
      "created_at": "2024-03-27T12:46:58Z",
      "updated_at": "2024-03-27T12:46:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1541042929",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1541042929"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 499,
      "original_line": 499,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1541046523",
      "pull_request_review_id": 1963225671,
      "id": 1541046523,
      "node_id": "PRRC_kwDOABII585b2oD7",
      "diff_hunk": "@@ -369,23 +375,58 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        fill_mempool(self, node, self.wallet)\n+        while node.getrawmempool() != []:\n+            self.generate(node, 1)\n+\n+        minrelay = node.getmempoolinfo()[\"minrelaytxfee\"]\n+        parent = self.wallet.create_self_transfer(\n+            fee_rate=minrelay,\n+        )\n+\n+        child = self.wallet.create_self_transfer(\n+            fee_rate=DEFAULT_FEE,\n+            utxo_to_spend=parent[\"new_utxo\"],\n+        )\n+\n+        pkg_result = node.submitpackage([parent[\"hex\"], child[\"hex\"]], maxfeerate=DEFAULT_FEE - Decimal(\"0.00000001\"))\n+\n+        # Package-wide error reported for package evaluation rejection\n+        assert_equal(pkg_result[\"package_msg\"], \"max feerate exceeded\")\n+        assert \"mempool min fee not met\" in pkg_result[\"tx-results\"][parent[\"wtxid\"]][\"error\"]\n+        assert_equal(pkg_result[\"tx-results\"][child[\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n+        assert_equal(node.getrawmempool(), [])\n+\n+        # Reset minfee\n+        self.restart_node(0)\n+\n         self.log.info(\"Submitpackage maxburnamount arg testing\")\n-        tx = tx_from_hex(chain_hex[1])\n+        chained_txns_burn = self.wallet.create_self_transfer_chain(chain_length=2)\n+        chained_burn_hex = [t[\"hex\"] for t in chained_txns_burn]\n+\n+        tx = tx_from_hex(chained_burn_hex[1])\n         tx.vout[-1].scriptPubKey = b'a' * 10001 # scriptPubKey bigger than 10k IsUnspendable\n-        chain_hex = [chain_hex[0], tx.serialize().hex()]\n+        chained_burn_hex = [chained_burn_hex[0], tx.serialize().hex()]\n         # burn test is run before any package evaluation; nothing makes it in and we get broader exception\n-        assert_raises_rpc_error(-25, \"Unspendable output exceeds maximum configured by user\", node.submitpackage, chain_hex, 0, chained_txns[1][\"new_utxo\"][\"value\"] - Decimal(\"0.00000001\"))\n+        assert_raises_rpc_error(-25, \"Unspendable output exceeds maximum configured by user\", node.submitpackage, chained_burn_hex, 0, chained_txns_burn[1][\"new_utxo\"][\"value\"] - Decimal(\"0.00000001\"))\n         assert_equal(node.getrawmempool(), [])\n \n+        minrate_btc_kvb_burn = min([chained_txn_burn[\"fee\"] / chained_txn_burn[\"tx\"].get_vsize() * 1000 for chained_txn_burn in chained_txns_burn])\n+\n         # Relax the restrictions for both and send it; parent gets through as own subpackage\n-        pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb, maxburnamount=chained_txns[1][\"new_utxo\"][\"value\"])\n-        assert \"error\" not in pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]]\n+        pkg_result = node.submitpackage(chained_burn_hex, maxfeerate=minrate_btc_kvb_burn, maxburnamount=chained_txns_burn[1][\"new_utxo\"][\"value\"])\n+        assert \"error\" not in pkg_result[\"tx-results\"][chained_txns_burn[0][\"wtxid\"]]\n         assert_equal(pkg_result[\"tx-results\"][tx.getwtxid()][\"error\"], \"scriptpubkey\")\n-        assert_equal(node.getrawmempool(), [chained_txns[0][\"txid\"]])\n+        assert_equal(node.getrawmempool(), [chained_txns_burn[0][\"txid\"]])",
      "path": "test/functional/rpc_packages.py",
      "position": 99,
      "original_position": 81,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "5ae4dce79d304457bb419512e2a478cf6dd08b43",
      "in_reply_to_id": 1540889727,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "was confusing to me to re-use the names for two distinct transaction chains (yeah I wrote the original test, so what?)",
      "created_at": "2024-03-27T12:49:37Z",
      "updated_at": "2024-03-27T12:49:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1541046523",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1541046523"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": 377,
      "original_start_line": 377,
      "start_side": "LEFT",
      "line": 436,
      "original_line": 436,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1541058199",
      "pull_request_review_id": 1963243559,
      "id": 1541058199,
      "node_id": "PRRC_kwDOABII585b2q6X",
      "diff_hunk": "@@ -1366,6 +1366,8 @@ PackageMempoolAcceptResult MemPoolAccept::AcceptMultipleTransactions(const std::\n         // Individual modified feerate exceeded caller-defined max; abort\n         // N.B. this doesn't take into account CPFPs. Chunk-aware validation may be more robust.\n         if (args.m_client_maxfeerate && CFeeRate(ws.m_modified_fees, ws.m_vsize) > args.m_client_maxfeerate.value()) {\n+            // Need to set failure here both individually and at package level\n+            ws.m_state.Invalid(TxValidationResult::TX_MEMPOOL_POLICY, \"max feerate exceeded\", \"\");\n             package_state.Invalid(PackageValidationResult::PCKG_TX, \"max feerate exceeded\");",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 6,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "5ae4dce79d304457bb419512e2a478cf6dd08b43",
      "in_reply_to_id": 1540891352,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "changed",
      "created_at": "2024-03-27T12:55:57Z",
      "updated_at": "2024-03-27T12:55:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1541058199",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1541058199"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1371,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1541058370",
      "pull_request_review_id": 1963243860,
      "id": 1541058370,
      "node_id": "PRRC_kwDOABII585b2q9C",
      "diff_hunk": "@@ -496,6 +496,48 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_in\"], num_in)\n     assert_equal(info[\"connections_out\"], num_out)\n \n+# Allows simpler testing of scenarios with minfee != minrelay\n+def fill_mempool(test_framework, node, miniwallet):\n+        \"\"\"Fill mempool until eviction.\"\"\"",
      "path": "test/functional/test_framework/util.py",
      "position": null,
      "original_position": 6,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "aaa5125f1c65724b89d464be7f6d962afa0171a1",
      "in_reply_to_id": 1539410139,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "added some comments",
      "created_at": "2024-03-27T12:56:06Z",
      "updated_at": "2024-03-27T12:56:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1541058370",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1541058370"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 504,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1541603526",
      "pull_request_review_id": 1964119772,
      "id": 1541603526,
      "node_id": "PRRC_kwDOABII585b4wDG",
      "diff_hunk": "@@ -496,6 +496,48 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_in\"], num_in)\n     assert_equal(info[\"connections_out\"], num_out)\n \n+# Allows simpler testing of scenarios with minfee != minrelay\n+def fill_mempool(test_framework, node, miniwallet):",
      "path": "test/functional/test_framework/util.py",
      "position": 4,
      "original_position": 5,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "aaa5125f1c65724b89d464be7f6d962afa0171a1",
      "in_reply_to_id": 1540871530,
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> IIUC util is for more low-level stuff, but don't have better ideas other than throwing it on test_framework.py. Maybe @maflcko or @theStack would have an opinion on where we should put this?\r\n\r\nNo strong opinion or better idea from my side either, util.py seems fine IMHO.\r\n",
      "created_at": "2024-03-27T18:01:34Z",
      "updated_at": "2024-03-27T18:01:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1541603526",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1541603526"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 499,
      "original_line": 499,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1543093597",
      "pull_request_review_id": 1966413998,
      "id": 1543093597,
      "node_id": "PRRC_kwDOABII585b-b1d",
      "diff_hunk": "@@ -496,6 +496,48 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_in\"], num_in)\n     assert_equal(info[\"connections_out\"], num_out)\n \n+# Allows simpler testing of scenarios with minfee != minrelay\n+def fill_mempool(test_framework, node, miniwallet):\n+        \"\"\"Fill mempool until eviction.\"\"\"",
      "path": "test/functional/test_framework/util.py",
      "position": null,
      "original_position": 6,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "aaa5125f1c65724b89d464be7f6d962afa0171a1",
      "in_reply_to_id": 1539410139,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I meant to add docs in the docstring comment :sweat_smile: \r\nalso:\r\n- requires `-datacarriersize=100000`\r\n- I think you mean \"It will *not* ensure mempools become synced\" ?",
      "created_at": "2024-03-28T14:37:23Z",
      "updated_at": "2024-04-03T18:43:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1543093597",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1543093597"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 504,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1550066137",
      "pull_request_review_id": 1966413998,
      "id": 1550066137,
      "node_id": "PRRC_kwDOABII585cZCHZ",
      "diff_hunk": "@@ -31,6 +32,11 @@ def set_test_params(self):\n         self.setup_clean_chain = True\n         # whitelist peers to speed up tx relay / mempool sync\n         self.noban_tx_relay = True\n+        # Needed for fill_mempool\n+        self.extra_args = [[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ]]",
      "path": "test/functional/rpc_packages.py",
      "position": null,
      "original_position": 16,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "4f8407cefa6ddb47b166b2c360d03778c0357a00",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit 4f8407cefa6ddb47b166b2c360d03778c0357a00: would prefer to do a restart in the subtest, to minimize the amount of tests that we do on a nondefault settings",
      "created_at": "2024-04-03T16:25:02Z",
      "updated_at": "2024-04-03T18:43:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1550066137",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1550066137"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": 35,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 39,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1551177145",
      "pull_request_review_id": 1979111251,
      "id": 1551177145,
      "node_id": "PRRC_kwDOABII585cdRW5",
      "diff_hunk": "@@ -31,6 +32,11 @@ def set_test_params(self):\n         self.setup_clean_chain = True\n         # whitelist peers to speed up tx relay / mempool sync\n         self.noban_tx_relay = True\n+        # Needed for fill_mempool\n+        self.extra_args = [[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ]]",
      "path": "test/functional/rpc_packages.py",
      "position": null,
      "original_position": 16,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "4f8407cefa6ddb47b166b2c360d03778c0357a00",
      "in_reply_to_id": 1550066137,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done",
      "created_at": "2024-04-04T08:26:13Z",
      "updated_at": "2024-04-04T08:26:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1551177145",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1551177145"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": 35,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 39,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1551177864",
      "pull_request_review_id": 1979112009,
      "id": 1551177864,
      "node_id": "PRRC_kwDOABII585cdRiI",
      "diff_hunk": "@@ -496,6 +496,48 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_in\"], num_in)\n     assert_equal(info[\"connections_out\"], num_out)\n \n+# Allows simpler testing of scenarios with minfee != minrelay\n+def fill_mempool(test_framework, node, miniwallet):\n+        \"\"\"Fill mempool until eviction.\"\"\"",
      "path": "test/functional/test_framework/util.py",
      "position": null,
      "original_position": 6,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "aaa5125f1c65724b89d464be7f6d962afa0171a1",
      "in_reply_to_id": 1539410139,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "oops yeah, done",
      "created_at": "2024-04-04T08:26:22Z",
      "updated_at": "2024-04-04T08:26:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1551177864",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1551177864"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 504,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552198747",
      "pull_request_review_id": 1980784495,
      "id": 1552198747,
      "node_id": "PRRC_kwDOABII585chKxb",
      "diff_hunk": "@@ -496,6 +496,58 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_in\"], num_in)\n     assert_equal(info[\"connections_out\"], num_out)\n \n+# Assumes -maxmempool=5(or similarly small).\n+# It will ensure mempools become synced as it is based on a single node\n+# and assumes -minrelaytxfee is 1sat/vB.\n+def fill_mempool(test_framework, node, miniwallet):\n+        \"\"\"Fill mempool until eviction.\n+\n+        Allows for simpler testing of scenarios with minfee != minrelay\n+        Requires -datacarriersize=100000 and\n+        -maxmempool=5(or similarly small).\n+        It will not ensure mempools become synced as it\n+        is based on a single node and assumes -minrelaytxfee\n+        is 1 sat/vbyte.\n+        \"\"\"\n+        test_framework.log.info(\"Fill the mempool until eviction is triggered and the mempoolminfee rises\")\n+        txouts = gen_return_txouts()\n+        relayfee = node.getnetworkinfo()['relayfee']\n+\n+        tx_batch_size = 1\n+        num_of_batches = 75\n+        # Generate UTXOs to flood the mempool\n+        # 1 to create a tx initially that will be evicted from the mempool later\n+        # 75 transactions each with a fee rate higher than the previous one\n+        # And 1 more to verify that this tx does not get added to the mempool with a fee rate less than the mempoolminfee\n+        # And 2 more for the package cpfp test\n+        test_framework.generate(miniwallet, 1 + (num_of_batches * tx_batch_size))\n+\n+        # Mine 99 blocks so that the UTXOs are allowed to be spent\n+        test_framework.generate(node, 99)",
      "path": "test/functional/test_framework/util.py",
      "position": null,
      "original_position": 31,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "cc770e4b36e6f04cbd588ad3e7a19f122c21d38d",
      "in_reply_to_id": null,
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In \"Move fill_mempool to util function\" (cc770e4b36e6f04cbd588ad3e7a19f122c21d38d):\r\n\r\nNit: If a commit is described as a move, I would expect no changes in the code beyond whatâ€™s necessary to update the callsites. While these changes are minor and obviously do not entail a functional change, I would have expected the updated commentary and refactor to be a separate commitâ€”Iâ€™m wondering whether my understanding of the modus operandi is correct.",
      "created_at": "2024-04-04T18:08:35Z",
      "updated_at": "2024-04-04T18:47:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1552198747",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552198747"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 523,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552208469",
      "pull_request_review_id": 1980784495,
      "id": 1552208469,
      "node_id": "PRRC_kwDOABII585chNJV",
      "diff_hunk": "@@ -369,23 +370,65 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        # Needed for fill_mempool\n+        self.restart_node(0, extra_args=[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ])",
      "path": "test/functional/rpc_packages.py",
      "position": null,
      "original_position": 25,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "271599af6d84c871154dc16c7abcadbe5ac08163",
      "in_reply_to_id": null,
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In \"AcceptMultipleTransactions: Fix workspace not being set as client_maxâ€¦\r\n\r\nâ€¦feerate failure\" (271599af6d84c871154dc16c7abcadbe5ac08163): \r\n\r\nIf these node parameters generally are needed for `fill_mempool` to work, would it perhaps make sense to move them to the `fill_mempool` function?\r\n\r\nAlternatively, the comment should perhaps be \"Lower mempool limit to make it easier to `fill_mempool`\"",
      "created_at": "2024-04-04T18:17:08Z",
      "updated_at": "2024-04-04T18:47:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1552208469",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552208469"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": 382,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 387,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552232875",
      "pull_request_review_id": 1980784495,
      "id": 1552232875,
      "node_id": "PRRC_kwDOABII585chTGr",
      "diff_hunk": "@@ -369,23 +370,65 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        # Needed for fill_mempool\n+        self.restart_node(0, extra_args=[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ])\n+\n+        fill_mempool(self, node, self.wallet)\n+        while node.getrawmempool() != []:\n+            self.generate(node, 1)\n+\n+        minrelay = node.getmempoolinfo()[\"minrelaytxfee\"]\n+        parent = self.wallet.create_self_transfer(\n+            fee_rate=minrelay,\n+        )\n+\n+        child = self.wallet.create_self_transfer(\n+            fee_rate=DEFAULT_FEE,\n+            utxo_to_spend=parent[\"new_utxo\"],\n+        )\n+\n+        pkg_result = node.submitpackage([parent[\"hex\"], child[\"hex\"]], maxfeerate=DEFAULT_FEE - Decimal(\"0.00000001\"))\n+\n+        # Child is connected even though parent is invalid and still reports fee exceeded\n+        # this implies sub-package evaluation of both entries together.\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n+        assert \"mempool min fee not met\" in pkg_result[\"tx-results\"][parent[\"wtxid\"]][\"error\"]",
      "path": "test/functional/rpc_packages.py",
      "position": 63,
      "original_position": 46,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "271599af6d84c871154dc16c7abcadbe5ac08163",
      "in_reply_to_id": null,
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In \"AcceptMultipleTransactions: Fix workspace not being set as client_maxâ€¦\r\n\r\nâ€¦feerate failure\" (https://github.com/bitcoin/bitcoin/commit/271599af6d84c871154dc16c7abcadbe5ac08163):\r\n\r\nPet-peeve nit: I suspect that the issues here is rather that the mempool min _feerate_ is not met?\r\n\r\n```suggestion\r\n        assert \"mempool min feerate not met\" in pkg_result[\"tx-results\"][parent[\"wtxid\"]][\"error\"]\r\n```",
      "created_at": "2024-04-04T18:34:19Z",
      "updated_at": "2024-04-04T18:47:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1552232875",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552232875"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 406,
      "original_line": 406,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552235727",
      "pull_request_review_id": 1980784495,
      "id": 1552235727,
      "node_id": "PRRC_kwDOABII585chTzP",
      "diff_hunk": "@@ -369,23 +370,65 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        # Needed for fill_mempool\n+        self.restart_node(0, extra_args=[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ])\n+\n+        fill_mempool(self, node, self.wallet)\n+        while node.getrawmempool() != []:\n+            self.generate(node, 1)\n+\n+        minrelay = node.getmempoolinfo()[\"minrelaytxfee\"]\n+        parent = self.wallet.create_self_transfer(\n+            fee_rate=minrelay,\n+        )\n+\n+        child = self.wallet.create_self_transfer(\n+            fee_rate=DEFAULT_FEE,\n+            utxo_to_spend=parent[\"new_utxo\"],\n+        )\n+\n+        pkg_result = node.submitpackage([parent[\"hex\"], child[\"hex\"]], maxfeerate=DEFAULT_FEE - Decimal(\"0.00000001\"))\n+\n+        # Child is connected even though parent is invalid and still reports fee exceeded\n+        # this implies sub-package evaluation of both entries together.\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n+        assert \"mempool min fee not met\" in pkg_result[\"tx-results\"][parent[\"wtxid\"]][\"error\"]\n+        assert_equal(pkg_result[\"tx-results\"][child[\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n+        assert_equal(node.getrawmempool(), [])\n+\n+        # Reset minfee",
      "path": "test/functional/rpc_packages.py",
      "position": null,
      "original_position": 50,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "271599af6d84c871154dc16c7abcadbe5ac08163",
      "in_reply_to_id": null,
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In \"AcceptMultipleTransactions: Fix workspace not being set as client_maxâ€¦\r\n\r\nâ€¦feerate failure\" (https://github.com/bitcoin/bitcoin/commit/271599af6d84c871154dc16c7abcadbe5ac08163):\r\n\r\nDid you perhaps mean:\r\n\r\n```suggestion\r\n        # Reset maxmempool and datacarriersize, and empty mempool to reset dynamic mempool minimum feerate\r\n```\r\n?",
      "created_at": "2024-04-04T18:36:40Z",
      "updated_at": "2024-04-04T18:51:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1552235727",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552235727"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 411,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552244211",
      "pull_request_review_id": 1980784495,
      "id": 1552244211,
      "node_id": "PRRC_kwDOABII585chV3z",
      "diff_hunk": "@@ -369,23 +370,65 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        # Needed for fill_mempool\n+        self.restart_node(0, extra_args=[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ])\n+\n+        fill_mempool(self, node, self.wallet)\n+        while node.getrawmempool() != []:\n+            self.generate(node, 1)\n+\n+        minrelay = node.getmempoolinfo()[\"minrelaytxfee\"]\n+        parent = self.wallet.create_self_transfer(\n+            fee_rate=minrelay,\n+        )\n+\n+        child = self.wallet.create_self_transfer(\n+            fee_rate=DEFAULT_FEE,\n+            utxo_to_spend=parent[\"new_utxo\"],\n+        )\n+\n+        pkg_result = node.submitpackage([parent[\"hex\"], child[\"hex\"]], maxfeerate=DEFAULT_FEE - Decimal(\"0.00000001\"))\n+\n+        # Child is connected even though parent is invalid and still reports fee exceeded\n+        # this implies sub-package evaluation of both entries together.\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n+        assert \"mempool min fee not met\" in pkg_result[\"tx-results\"][parent[\"wtxid\"]][\"error\"]\n+        assert_equal(pkg_result[\"tx-results\"][child[\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n+        assert_equal(node.getrawmempool(), [])\n+\n+        # Reset minfee\n+        self.restart_node(0)\n+",
      "path": "test/functional/rpc_packages.py",
      "position": 70,
      "original_position": 52,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "271599af6d84c871154dc16c7abcadbe5ac08163",
      "in_reply_to_id": null,
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In \"AcceptMultipleTransactions: Fix workspace not being set as client_maxâ€¦\r\n\r\nâ€¦feerate failure\" (https://github.com/bitcoin/bitcoin/commit/271599af6d84c871154dc16c7abcadbe5ac08163):\r\nAt this point, it might be better to split the `maxfeerate` and the `maxburnamount` tests.",
      "created_at": "2024-04-04T18:44:38Z",
      "updated_at": "2024-04-04T18:47:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1552244211",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552244211"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 413,
      "original_line": 413,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552969962",
      "pull_request_review_id": 1982003885,
      "id": 1552969962,
      "node_id": "PRRC_kwDOABII585ckHDq",
      "diff_hunk": "@@ -369,23 +370,65 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        # Needed for fill_mempool\n+        self.restart_node(0, extra_args=[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ])\n+\n+        fill_mempool(self, node, self.wallet)\n+        while node.getrawmempool() != []:\n+            self.generate(node, 1)\n+\n+        minrelay = node.getmempoolinfo()[\"minrelaytxfee\"]\n+        parent = self.wallet.create_self_transfer(\n+            fee_rate=minrelay,\n+        )\n+\n+        child = self.wallet.create_self_transfer(\n+            fee_rate=DEFAULT_FEE,\n+            utxo_to_spend=parent[\"new_utxo\"],\n+        )\n+\n+        pkg_result = node.submitpackage([parent[\"hex\"], child[\"hex\"]], maxfeerate=DEFAULT_FEE - Decimal(\"0.00000001\"))\n+\n+        # Child is connected even though parent is invalid and still reports fee exceeded\n+        # this implies sub-package evaluation of both entries together.\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n+        assert \"mempool min fee not met\" in pkg_result[\"tx-results\"][parent[\"wtxid\"]][\"error\"]",
      "path": "test/functional/rpc_packages.py",
      "position": 63,
      "original_position": 46,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "271599af6d84c871154dc16c7abcadbe5ac08163",
      "in_reply_to_id": 1552232875,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "that's the error string as it's reported unfortunately!",
      "created_at": "2024-04-05T06:00:18Z",
      "updated_at": "2024-04-05T06:00:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1552969962",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552969962"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 406,
      "original_line": 406,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552985927",
      "pull_request_review_id": 1982030238,
      "id": 1552985927,
      "node_id": "PRRC_kwDOABII585ckK9H",
      "diff_hunk": "@@ -369,23 +370,65 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        # Needed for fill_mempool\n+        self.restart_node(0, extra_args=[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ])\n+\n+        fill_mempool(self, node, self.wallet)\n+        while node.getrawmempool() != []:\n+            self.generate(node, 1)\n+\n+        minrelay = node.getmempoolinfo()[\"minrelaytxfee\"]\n+        parent = self.wallet.create_self_transfer(\n+            fee_rate=minrelay,\n+        )\n+\n+        child = self.wallet.create_self_transfer(\n+            fee_rate=DEFAULT_FEE,\n+            utxo_to_spend=parent[\"new_utxo\"],\n+        )\n+\n+        pkg_result = node.submitpackage([parent[\"hex\"], child[\"hex\"]], maxfeerate=DEFAULT_FEE - Decimal(\"0.00000001\"))\n+\n+        # Child is connected even though parent is invalid and still reports fee exceeded\n+        # this implies sub-package evaluation of both entries together.\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n+        assert \"mempool min fee not met\" in pkg_result[\"tx-results\"][parent[\"wtxid\"]][\"error\"]\n+        assert_equal(pkg_result[\"tx-results\"][child[\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n+        assert_equal(node.getrawmempool(), [])\n+\n+        # Reset minfee\n+        self.restart_node(0)\n+",
      "path": "test/functional/rpc_packages.py",
      "position": 70,
      "original_position": 52,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "271599af6d84c871154dc16c7abcadbe5ac08163",
      "in_reply_to_id": 1552244211,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done",
      "created_at": "2024-04-05T06:20:57Z",
      "updated_at": "2024-04-05T06:20:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1552985927",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552985927"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 413,
      "original_line": 413,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552985990",
      "pull_request_review_id": 1982030318,
      "id": 1552985990,
      "node_id": "PRRC_kwDOABII585ckK-G",
      "diff_hunk": "@@ -369,23 +370,65 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        # Needed for fill_mempool\n+        self.restart_node(0, extra_args=[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ])\n+\n+        fill_mempool(self, node, self.wallet)\n+        while node.getrawmempool() != []:\n+            self.generate(node, 1)\n+\n+        minrelay = node.getmempoolinfo()[\"minrelaytxfee\"]\n+        parent = self.wallet.create_self_transfer(\n+            fee_rate=minrelay,\n+        )\n+\n+        child = self.wallet.create_self_transfer(\n+            fee_rate=DEFAULT_FEE,\n+            utxo_to_spend=parent[\"new_utxo\"],\n+        )\n+\n+        pkg_result = node.submitpackage([parent[\"hex\"], child[\"hex\"]], maxfeerate=DEFAULT_FEE - Decimal(\"0.00000001\"))\n+\n+        # Child is connected even though parent is invalid and still reports fee exceeded\n+        # this implies sub-package evaluation of both entries together.\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n+        assert \"mempool min fee not met\" in pkg_result[\"tx-results\"][parent[\"wtxid\"]][\"error\"]\n+        assert_equal(pkg_result[\"tx-results\"][child[\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n+        assert_equal(node.getrawmempool(), [])\n+\n+        # Reset minfee",
      "path": "test/functional/rpc_packages.py",
      "position": null,
      "original_position": 50,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "271599af6d84c871154dc16c7abcadbe5ac08163",
      "in_reply_to_id": 1552235727,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "no but this is even better, taken",
      "created_at": "2024-04-05T06:21:02Z",
      "updated_at": "2024-04-05T06:21:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1552985990",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552985990"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 411,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552986070",
      "pull_request_review_id": 1982030470,
      "id": 1552986070,
      "node_id": "PRRC_kwDOABII585ckK_W",
      "diff_hunk": "@@ -369,23 +370,65 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        # Needed for fill_mempool\n+        self.restart_node(0, extra_args=[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ])",
      "path": "test/functional/rpc_packages.py",
      "position": null,
      "original_position": 25,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "271599af6d84c871154dc16c7abcadbe5ac08163",
      "in_reply_to_id": 1552208469,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I don't want to blow away extra_args the caller may want, so took the comment suggestion for now",
      "created_at": "2024-04-05T06:21:07Z",
      "updated_at": "2024-04-05T06:21:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1552986070",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552986070"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": 382,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 387,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552986113",
      "pull_request_review_id": 1982030548,
      "id": 1552986113,
      "node_id": "PRRC_kwDOABII585ckLAB",
      "diff_hunk": "@@ -496,6 +496,58 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_in\"], num_in)\n     assert_equal(info[\"connections_out\"], num_out)\n \n+# Assumes -maxmempool=5(or similarly small).\n+# It will ensure mempools become synced as it is based on a single node\n+# and assumes -minrelaytxfee is 1sat/vB.\n+def fill_mempool(test_framework, node, miniwallet):\n+        \"\"\"Fill mempool until eviction.\n+\n+        Allows for simpler testing of scenarios with minfee != minrelay\n+        Requires -datacarriersize=100000 and\n+        -maxmempool=5(or similarly small).\n+        It will not ensure mempools become synced as it\n+        is based on a single node and assumes -minrelaytxfee\n+        is 1 sat/vbyte.\n+        \"\"\"\n+        test_framework.log.info(\"Fill the mempool until eviction is triggered and the mempoolminfee rises\")\n+        txouts = gen_return_txouts()\n+        relayfee = node.getnetworkinfo()['relayfee']\n+\n+        tx_batch_size = 1\n+        num_of_batches = 75\n+        # Generate UTXOs to flood the mempool\n+        # 1 to create a tx initially that will be evicted from the mempool later\n+        # 75 transactions each with a fee rate higher than the previous one\n+        # And 1 more to verify that this tx does not get added to the mempool with a fee rate less than the mempoolminfee\n+        # And 2 more for the package cpfp test\n+        test_framework.generate(miniwallet, 1 + (num_of_batches * tx_batch_size))\n+\n+        # Mine 99 blocks so that the UTXOs are allowed to be spent\n+        test_framework.generate(node, 99)",
      "path": "test/functional/test_framework/util.py",
      "position": null,
      "original_position": 31,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "cc770e4b36e6f04cbd588ad3e7a19f122c21d38d",
      "in_reply_to_id": 1552198747,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "split out the moving and docstring changes, should be minimal now?",
      "created_at": "2024-04-05T06:21:10Z",
      "updated_at": "2024-04-05T06:21:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1552986113",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552986113"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 523,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553735891",
      "pull_request_review_id": 1983320959,
      "id": 1553735891,
      "node_id": "PRRC_kwDOABII585cnCDT",
      "diff_hunk": "@@ -497,7 +497,15 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_out\"], num_out)\n \n def fill_mempool(test_framework, node, miniwallet):\n-        \"\"\"Fill mempool until eviction.\"\"\"\n+        \"\"\"Fill mempool until eviction.\n+\n+        Allows for simpler testing of scenarios with minfee != minrelay\n+        Requires -datacarriersize=100000 and\n+        -maxmempool=5(or similarly small).",
      "path": "test/functional/test_framework/util.py",
      "position": null,
      "original_position": 9,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "ac0cfcaeef1eb8c7bc333b91a9a5c448e720255b",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "\"or similarly small\" doesn't really make sense to me. AFAICT this makes just enough transactions to go past the 5MB mempool.",
      "created_at": "2024-04-05T14:14:16Z",
      "updated_at": "2024-04-05T14:25:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1553735891",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553735891"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 504,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553736451",
      "pull_request_review_id": 1983320959,
      "id": 1553736451,
      "node_id": "PRRC_kwDOABII585cnCMD",
      "diff_hunk": "@@ -497,7 +497,15 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_out\"], num_out)\n \n def fill_mempool(test_framework, node, miniwallet):\n-        \"\"\"Fill mempool until eviction.\"\"\"\n+        \"\"\"Fill mempool until eviction.\n+\n+        Allows for simpler testing of scenarios with minfee != minrelay",
      "path": "test/functional/test_framework/util.py",
      "position": null,
      "original_position": 7,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "ac0cfcaeef1eb8c7bc333b91a9a5c448e720255b",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit\r\n```suggestion\r\n        Allows for simpler testing of scenarios with minfee > minrelay\r\n```",
      "created_at": "2024-04-05T14:14:43Z",
      "updated_at": "2024-04-05T14:25:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1553736451",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553736451"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 502,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553744185",
      "pull_request_review_id": 1983320959,
      "id": 1553744185,
      "node_id": "PRRC_kwDOABII585cnEE5",
      "diff_hunk": "@@ -411,6 +412,12 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         # Reset maxmempool and datacarriersize, and empty mempool to reset dynamic mempool minimum feerate\n         self.restart_node(0)\n \n+    def test_maxburn_submitpackage(self):\n+        node = self.nodes[0]\n+        # clear mempool\n+        deterministic_address = node.get_deterministic_priv_key().address\n+        self.generatetoaddress(node, 1, deterministic_address)",
      "path": "test/functional/rpc_packages.py",
      "position": null,
      "original_position": 27,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "1d79aabed4f2031c3001c5497afc9df8da4e0b20",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Mempool is already empty?",
      "created_at": "2024-04-05T14:19:55Z",
      "updated_at": "2024-04-05T14:25:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1553744185",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553744185"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": 417,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 419,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553746827",
      "pull_request_review_id": 1983320959,
      "id": 1553746827,
      "node_id": "PRRC_kwDOABII585cnEuL",
      "diff_hunk": "@@ -369,23 +370,65 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        # Lower mempool limit to make it easier to fill_mempool\n+        self.restart_node(0, extra_args=[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ])\n+\n+        fill_mempool(self, node, self.wallet)\n+        while node.getrawmempool() != []:\n+            self.generate(node, 1)",
      "path": "test/functional/rpc_packages.py",
      "position": null,
      "original_position": 29,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "2b346ba9759ff35eb16440d594369e4494cef26e",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Note that this can change the mempool min fee",
      "created_at": "2024-04-05T14:21:45Z",
      "updated_at": "2024-04-05T14:25:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1553746827",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553746827"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": 389,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 390,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553749001",
      "pull_request_review_id": 1983320959,
      "id": 1553749001,
      "node_id": "PRRC_kwDOABII585cnFQJ",
      "diff_hunk": "@@ -369,23 +370,65 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        # Lower mempool limit to make it easier to fill_mempool\n+        self.restart_node(0, extra_args=[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ])\n+\n+        fill_mempool(self, node, self.wallet)\n+        while node.getrawmempool() != []:\n+            self.generate(node, 1)\n+\n+        minrelay = node.getmempoolinfo()[\"minrelaytxfee\"]\n+        parent = self.wallet.create_self_transfer(\n+            fee_rate=minrelay,\n+        )\n+\n+        child = self.wallet.create_self_transfer(\n+            fee_rate=DEFAULT_FEE,\n+            utxo_to_spend=parent[\"new_utxo\"],\n+        )\n+\n+        pkg_result = node.submitpackage([parent[\"hex\"], child[\"hex\"]], maxfeerate=DEFAULT_FEE - Decimal(\"0.00000001\"))\n+\n+        # Child is connected even though parent is invalid and still reports fee exceeded\n+        # this implies sub-package evaluation of both entries together.\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n+        assert \"mempool min fee not met\" in pkg_result[\"tx-results\"][parent[\"wtxid\"]][\"error\"]\n+        assert_equal(pkg_result[\"tx-results\"][child[\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n+        assert_equal(node.getrawmempool(), [])\n+\n+        # Reset maxmempool and datacarriersize, and empty mempool to reset dynamic mempool minimum feerate",
      "path": "test/functional/rpc_packages.py",
      "position": null,
      "original_position": 50,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "2b346ba9759ff35eb16440d594369e4494cef26e",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Mempool is already empty\r\n```suggestion\r\n        # Reset maxmempool, datacarriersize, and dynamic mempool minimum feerate\r\n```",
      "created_at": "2024-04-05T14:23:12Z",
      "updated_at": "2024-04-05T14:25:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1553749001",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553749001"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 411,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553766100",
      "pull_request_review_id": 1983373536,
      "id": 1553766100,
      "node_id": "PRRC_kwDOABII585cnJbU",
      "diff_hunk": "@@ -369,23 +370,65 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        # Lower mempool limit to make it easier to fill_mempool\n+        self.restart_node(0, extra_args=[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ])\n+\n+        fill_mempool(self, node, self.wallet)\n+        while node.getrawmempool() != []:\n+            self.generate(node, 1)",
      "path": "test/functional/rpc_packages.py",
      "position": null,
      "original_position": 29,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "2b346ba9759ff35eb16440d594369e4494cef26e",
      "in_reply_to_id": 1553746827,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "mm yeah let me make this a bit more bullet proof",
      "created_at": "2024-04-05T14:34:08Z",
      "updated_at": "2024-04-05T14:34:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1553766100",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553766100"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": 389,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 390,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553777536",
      "pull_request_review_id": 1983391770,
      "id": 1553777536,
      "node_id": "PRRC_kwDOABII585cnMOA",
      "diff_hunk": "@@ -369,23 +370,65 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        # Lower mempool limit to make it easier to fill_mempool\n+        self.restart_node(0, extra_args=[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ])\n+\n+        fill_mempool(self, node, self.wallet)\n+        while node.getrawmempool() != []:\n+            self.generate(node, 1)",
      "path": "test/functional/rpc_packages.py",
      "position": null,
      "original_position": 29,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "2b346ba9759ff35eb16440d594369e4494cef26e",
      "in_reply_to_id": 1553746827,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Well I don't think you need get rid of the transactions here - you just want to make sure they get cleared by the end of the test right?",
      "created_at": "2024-04-05T14:41:55Z",
      "updated_at": "2024-04-05T14:41:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1553777536",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553777536"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": 389,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 390,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1554559178",
      "pull_request_review_id": 1984472663,
      "id": 1554559178,
      "node_id": "PRRC_kwDOABII585cqLDK",
      "diff_hunk": "@@ -497,7 +497,15 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_out\"], num_out)\n \n def fill_mempool(test_framework, node, miniwallet):\n-        \"\"\"Fill mempool until eviction.\"\"\"\n+        \"\"\"Fill mempool until eviction.\n+\n+        Allows for simpler testing of scenarios with minfee != minrelay\n+        Requires -datacarriersize=100000 and\n+        -maxmempool=5(or similarly small).",
      "path": "test/functional/test_framework/util.py",
      "position": null,
      "original_position": 9,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "ac0cfcaeef1eb8c7bc333b91a9a5c448e720255b",
      "in_reply_to_id": 1553735891,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "removed the parenthesis ",
      "created_at": "2024-04-06T09:53:18Z",
      "updated_at": "2024-04-06T09:53:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1554559178",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1554559178"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 504,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1554559185",
      "pull_request_review_id": 1984472673,
      "id": 1554559185,
      "node_id": "PRRC_kwDOABII585cqLDR",
      "diff_hunk": "@@ -497,7 +497,15 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_out\"], num_out)\n \n def fill_mempool(test_framework, node, miniwallet):\n-        \"\"\"Fill mempool until eviction.\"\"\"\n+        \"\"\"Fill mempool until eviction.\n+\n+        Allows for simpler testing of scenarios with minfee != minrelay",
      "path": "test/functional/test_framework/util.py",
      "position": null,
      "original_position": 7,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "ac0cfcaeef1eb8c7bc333b91a9a5c448e720255b",
      "in_reply_to_id": 1553736451,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "taken",
      "created_at": "2024-04-06T09:53:24Z",
      "updated_at": "2024-04-06T09:53:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1554559185",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1554559185"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 502,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1554559188",
      "pull_request_review_id": 1984472677,
      "id": 1554559188,
      "node_id": "PRRC_kwDOABII585cqLDU",
      "diff_hunk": "@@ -411,6 +412,12 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         # Reset maxmempool and datacarriersize, and empty mempool to reset dynamic mempool minimum feerate\n         self.restart_node(0)\n \n+    def test_maxburn_submitpackage(self):\n+        node = self.nodes[0]\n+        # clear mempool\n+        deterministic_address = node.get_deterministic_priv_key().address\n+        self.generatetoaddress(node, 1, deterministic_address)",
      "path": "test/functional/rpc_packages.py",
      "position": null,
      "original_position": 27,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "1d79aabed4f2031c3001c5497afc9df8da4e0b20",
      "in_reply_to_id": 1553744185,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "replaced with an assert",
      "created_at": "2024-04-06T09:53:27Z",
      "updated_at": "2024-04-06T09:53:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1554559188",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1554559188"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": 417,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 419,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1554559201",
      "pull_request_review_id": 1984472694,
      "id": 1554559201,
      "node_id": "PRRC_kwDOABII585cqLDh",
      "diff_hunk": "@@ -369,23 +370,65 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        # Lower mempool limit to make it easier to fill_mempool\n+        self.restart_node(0, extra_args=[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ])\n+\n+        fill_mempool(self, node, self.wallet)\n+        while node.getrawmempool() != []:\n+            self.generate(node, 1)",
      "path": "test/functional/rpc_packages.py",
      "position": null,
      "original_position": 29,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "2b346ba9759ff35eb16440d594369e4494cef26e",
      "in_reply_to_id": 1553746827,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "felt like I had a reason for this, but apparently not. At end of test I empty mempool on node restart, so removed",
      "created_at": "2024-04-06T09:53:37Z",
      "updated_at": "2024-04-06T09:53:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1554559201",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1554559201"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": 389,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 390,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1554559207",
      "pull_request_review_id": 1984472699,
      "id": 1554559207,
      "node_id": "PRRC_kwDOABII585cqLDn",
      "diff_hunk": "@@ -369,23 +370,65 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        # Lower mempool limit to make it easier to fill_mempool\n+        self.restart_node(0, extra_args=[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ])\n+\n+        fill_mempool(self, node, self.wallet)\n+        while node.getrawmempool() != []:\n+            self.generate(node, 1)\n+\n+        minrelay = node.getmempoolinfo()[\"minrelaytxfee\"]\n+        parent = self.wallet.create_self_transfer(\n+            fee_rate=minrelay,\n+        )\n+\n+        child = self.wallet.create_self_transfer(\n+            fee_rate=DEFAULT_FEE,\n+            utxo_to_spend=parent[\"new_utxo\"],\n+        )\n+\n+        pkg_result = node.submitpackage([parent[\"hex\"], child[\"hex\"]], maxfeerate=DEFAULT_FEE - Decimal(\"0.00000001\"))\n+\n+        # Child is connected even though parent is invalid and still reports fee exceeded\n+        # this implies sub-package evaluation of both entries together.\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n+        assert \"mempool min fee not met\" in pkg_result[\"tx-results\"][parent[\"wtxid\"]][\"error\"]\n+        assert_equal(pkg_result[\"tx-results\"][child[\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n+        assert_equal(node.getrawmempool(), [])\n+\n+        # Reset maxmempool and datacarriersize, and empty mempool to reset dynamic mempool minimum feerate",
      "path": "test/functional/rpc_packages.py",
      "position": null,
      "original_position": 50,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "2b346ba9759ff35eb16440d594369e4494cef26e",
      "in_reply_to_id": 1553749001,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "changed where it's non-empty, so added `persistmempool=0` and left a new comment",
      "created_at": "2024-04-06T09:53:42Z",
      "updated_at": "2024-04-06T09:53:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1554559207",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1554559207"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 411,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555694194",
      "pull_request_review_id": 1986192988,
      "id": 1555694194,
      "node_id": "PRRC_kwDOABII585cugJy",
      "diff_hunk": "@@ -497,7 +497,15 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_out\"], num_out)\n \n def fill_mempool(test_framework, node, miniwallet):\n-        \"\"\"Fill mempool until eviction.\"\"\"\n+        \"\"\"Fill mempool until eviction.\n+\n+        Allows for simpler testing of scenarios with floating minfee > minrelay",
      "path": "test/functional/test_framework/util.py",
      "position": null,
      "original_position": 7,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "a466686c6e97d47e3f4718eed0f781acb88da7fa",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In a466686c6e97d47e3f4718eed0f781acb88da7fa \"test: expand docstring to fill_mempool\"\r\n\r\nnit: \r\n```suggestion\r\n        Allows for simpler testing of scenarios with floating mempoolminfee > minrelayfee\r\n```",
      "created_at": "2024-04-08T11:54:10Z",
      "updated_at": "2024-04-08T12:27:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1555694194",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555694194"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 502,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555720689",
      "pull_request_review_id": 1986238385,
      "id": 1555720689,
      "node_id": "PRRC_kwDOABII585cumnx",
      "diff_hunk": "@@ -496,6 +496,58 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_in\"], num_in)\n     assert_equal(info[\"connections_out\"], num_out)\n \n+# Assumes -maxmempool=5(or similarly small).\n+# It will ensure mempools become synced as it is based on a single node\n+# and assumes -minrelaytxfee is 1sat/vB.\n+def fill_mempool(test_framework, node, miniwallet):\n+        \"\"\"Fill mempool until eviction.\n+\n+        Allows for simpler testing of scenarios with minfee != minrelay\n+        Requires -datacarriersize=100000 and\n+        -maxmempool=5(or similarly small).\n+        It will not ensure mempools become synced as it\n+        is based on a single node and assumes -minrelaytxfee\n+        is 1 sat/vbyte.\n+        \"\"\"\n+        test_framework.log.info(\"Fill the mempool until eviction is triggered and the mempoolminfee rises\")\n+        txouts = gen_return_txouts()\n+        relayfee = node.getnetworkinfo()['relayfee']\n+\n+        tx_batch_size = 1\n+        num_of_batches = 75\n+        # Generate UTXOs to flood the mempool\n+        # 1 to create a tx initially that will be evicted from the mempool later\n+        # 75 transactions each with a fee rate higher than the previous one\n+        # And 1 more to verify that this tx does not get added to the mempool with a fee rate less than the mempoolminfee\n+        # And 2 more for the package cpfp test\n+        test_framework.generate(miniwallet, 1 + (num_of_batches * tx_batch_size))\n+\n+        # Mine 99 blocks so that the UTXOs are allowed to be spent\n+        test_framework.generate(node, 99)",
      "path": "test/functional/test_framework/util.py",
      "position": null,
      "original_position": 31,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "cc770e4b36e6f04cbd588ad3e7a19f122c21d38d",
      "in_reply_to_id": 1552198747,
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Nit: I donâ€™t feel strongly about it, but the change that made me notice that there were code changes in the move originally was that  `COINBASE_MATURITY - 1` had gotten replaced with a `99` magic number.",
      "created_at": "2024-04-08T12:16:23Z",
      "updated_at": "2024-04-08T12:23:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1555720689",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555720689"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 523,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555723093",
      "pull_request_review_id": 1986192988,
      "id": 1555723093,
      "node_id": "PRRC_kwDOABII585cunNV",
      "diff_hunk": "@@ -496,6 +496,47 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_in\"], num_in)\n     assert_equal(info[\"connections_out\"], num_out)\n \n+def fill_mempool(test_framework, node, miniwallet):\n+        \"\"\"Fill mempool until eviction.\"\"\"\n+        test_framework.log.info(\"Fill the mempool until eviction is triggered and the mempoolminfee rises\")\n+        txouts = gen_return_txouts()\n+        relayfee = node.getnetworkinfo()['relayfee']\n+\n+        tx_batch_size = 1\n+        num_of_batches = 75\n+        # Generate UTXOs to flood the mempool\n+        # 1 to create a tx initially that will be evicted from the mempool later\n+        # 75 transactions each with a fee rate higher than the previous one\n+        # And 1 more to verify that this tx does not get added to the mempool with a fee rate less than the mempoolminfee\n+        # And 2 more for the package cpfp test",
      "path": "test/functional/test_framework/util.py",
      "position": null,
      "original_position": 16,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "c93f790cad1558dcf0b8fb5fd0cf3a276368d656",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In  c93f790cad1558dcf0b8fb5fd0cf3a276368d656 \" Move fill_mempool to util function\"\r\n\r\nThere should be a commit that will first pull out these two lines from this scope to \r\nhttps://github.com/bitcoin/bitcoin/blob/f0794cbd405636a7f528a60f2873050b865cf7e8/test/functional/mempool_limit.py#L231\r\n\r\nMoving `fill_mempool` to `test_framework/util.py` makes it clear that the comments do not belong to this scope.",
      "created_at": "2024-04-08T12:18:14Z",
      "updated_at": "2024-04-08T12:27:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1555723093",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555723093"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": 510,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 511,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555727656",
      "pull_request_review_id": 1986238385,
      "id": 1555727656,
      "node_id": "PRRC_kwDOABII585cuoUo",
      "diff_hunk": "@@ -1366,7 +1366,9 @@ PackageMempoolAcceptResult MemPoolAccept::AcceptMultipleTransactions(const std::\n         // Individual modified feerate exceeded caller-defined max; abort\n         // N.B. this doesn't take into account CPFPs. Chunk-aware validation may be more robust.",
      "path": "src/validation.cpp",
      "position": 2,
      "original_position": 2,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "72425bd699dd33d57794b3339f6266c4c9df443d",
      "in_reply_to_id": null,
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Nit: Subject line in commit message should not exceed 50 characters, and definitely not be more than 72: https://cbea.ms/git-commit/#limit-50",
      "created_at": "2024-04-08T12:20:47Z",
      "updated_at": "2024-04-08T12:23:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1555727656",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555727656"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1367,
      "original_line": 1367,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555729721",
      "pull_request_review_id": 1986192988,
      "id": 1555729721,
      "node_id": "PRRC_kwDOABII585cuo05",
      "diff_hunk": "@@ -497,7 +497,15 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_out\"], num_out)\n \n def fill_mempool(test_framework, node, miniwallet):\n-        \"\"\"Fill mempool until eviction.\"\"\"\n+        \"\"\"Fill mempool until eviction.\n+\n+        Allows for simpler testing of scenarios with floating minfee > minrelay\n+        Requires -datacarriersize=100000 and\n+        -maxmempool=5.\n+        It will not ensure mempools become synced as it\n+        is based on a single node and assumes -minrelaytxfee\n+        is 1 sat/vbyte.",
      "path": "test/functional/test_framework/util.py",
      "position": 12,
      "original_position": 12,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "a466686c6e97d47e3f4718eed0f781acb88da7fa",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Maybe assert for this at the beginning of the `fill_mempool`\r\n```python\r\n     assert_equal(node.getnetworkinfo()['relayfee'], Decimal('0.00001000'))\r\n```",
      "created_at": "2024-04-08T12:22:05Z",
      "updated_at": "2024-04-08T12:27:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1555729721",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555729721"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": 505,
      "original_start_line": 505,
      "start_side": "RIGHT",
      "line": 507,
      "original_line": 507,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555830543",
      "pull_request_review_id": 1986426954,
      "id": 1555830543,
      "node_id": "PRRC_kwDOABII585cvBcP",
      "diff_hunk": "@@ -1366,7 +1366,9 @@ PackageMempoolAcceptResult MemPoolAccept::AcceptMultipleTransactions(const std::\n         // Individual modified feerate exceeded caller-defined max; abort\n         // N.B. this doesn't take into account CPFPs. Chunk-aware validation may be more robust.",
      "path": "src/validation.cpp",
      "position": 2,
      "original_position": 2,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "72425bd699dd33d57794b3339f6266c4c9df443d",
      "in_reply_to_id": 1555727656,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Made it shorter :)",
      "created_at": "2024-04-08T13:16:38Z",
      "updated_at": "2024-04-08T13:16:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1555830543",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555830543"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1367,
      "original_line": 1367,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555831622",
      "pull_request_review_id": 1986428796,
      "id": 1555831622,
      "node_id": "PRRC_kwDOABII585cvBtG",
      "diff_hunk": "@@ -496,6 +496,58 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_in\"], num_in)\n     assert_equal(info[\"connections_out\"], num_out)\n \n+# Assumes -maxmempool=5(or similarly small).\n+# It will ensure mempools become synced as it is based on a single node\n+# and assumes -minrelaytxfee is 1sat/vB.\n+def fill_mempool(test_framework, node, miniwallet):\n+        \"\"\"Fill mempool until eviction.\n+\n+        Allows for simpler testing of scenarios with minfee != minrelay\n+        Requires -datacarriersize=100000 and\n+        -maxmempool=5(or similarly small).\n+        It will not ensure mempools become synced as it\n+        is based on a single node and assumes -minrelaytxfee\n+        is 1 sat/vbyte.\n+        \"\"\"\n+        test_framework.log.info(\"Fill the mempool until eviction is triggered and the mempoolminfee rises\")\n+        txouts = gen_return_txouts()\n+        relayfee = node.getnetworkinfo()['relayfee']\n+\n+        tx_batch_size = 1\n+        num_of_batches = 75\n+        # Generate UTXOs to flood the mempool\n+        # 1 to create a tx initially that will be evicted from the mempool later\n+        # 75 transactions each with a fee rate higher than the previous one\n+        # And 1 more to verify that this tx does not get added to the mempool with a fee rate less than the mempoolminfee\n+        # And 2 more for the package cpfp test\n+        test_framework.generate(miniwallet, 1 + (num_of_batches * tx_batch_size))\n+\n+        # Mine 99 blocks so that the UTXOs are allowed to be spent\n+        test_framework.generate(node, 99)",
      "path": "test/functional/test_framework/util.py",
      "position": null,
      "original_position": 31,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "cc770e4b36e6f04cbd588ad3e7a19f122c21d38d",
      "in_reply_to_id": 1552198747,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "bit of an annoying circular reference issue(blocktools requiring utils) so for now at least make it grep-able what the magic value should be(and more greppable)",
      "created_at": "2024-04-08T13:17:25Z",
      "updated_at": "2024-04-08T13:17:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1555831622",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555831622"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 523,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555832375",
      "pull_request_review_id": 1986430699,
      "id": 1555832375,
      "node_id": "PRRC_kwDOABII585cvB43",
      "diff_hunk": "@@ -497,7 +497,15 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_out\"], num_out)\n \n def fill_mempool(test_framework, node, miniwallet):\n-        \"\"\"Fill mempool until eviction.\"\"\"\n+        \"\"\"Fill mempool until eviction.\n+\n+        Allows for simpler testing of scenarios with floating minfee > minrelay",
      "path": "test/functional/test_framework/util.py",
      "position": null,
      "original_position": 7,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "a466686c6e97d47e3f4718eed0f781acb88da7fa",
      "in_reply_to_id": 1555694194,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done",
      "created_at": "2024-04-08T13:17:56Z",
      "updated_at": "2024-04-08T13:17:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1555832375",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555832375"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 502,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555832564",
      "pull_request_review_id": 1986431067,
      "id": 1555832564,
      "node_id": "PRRC_kwDOABII585cvB70",
      "diff_hunk": "@@ -496,6 +496,47 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_in\"], num_in)\n     assert_equal(info[\"connections_out\"], num_out)\n \n+def fill_mempool(test_framework, node, miniwallet):\n+        \"\"\"Fill mempool until eviction.\"\"\"\n+        test_framework.log.info(\"Fill the mempool until eviction is triggered and the mempoolminfee rises\")\n+        txouts = gen_return_txouts()\n+        relayfee = node.getnetworkinfo()['relayfee']\n+\n+        tx_batch_size = 1\n+        num_of_batches = 75\n+        # Generate UTXOs to flood the mempool\n+        # 1 to create a tx initially that will be evicted from the mempool later\n+        # 75 transactions each with a fee rate higher than the previous one\n+        # And 1 more to verify that this tx does not get added to the mempool with a fee rate less than the mempoolminfee\n+        # And 2 more for the package cpfp test",
      "path": "test/functional/test_framework/util.py",
      "position": null,
      "original_position": 16,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "c93f790cad1558dcf0b8fb5fd0cf3a276368d656",
      "in_reply_to_id": 1555723093,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done, I think",
      "created_at": "2024-04-08T13:18:04Z",
      "updated_at": "2024-04-08T13:18:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1555832564",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555832564"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": null,
      "original_start_line": 510,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 511,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555832735",
      "pull_request_review_id": 1986431353,
      "id": 1555832735,
      "node_id": "PRRC_kwDOABII585cvB-f",
      "diff_hunk": "@@ -497,7 +497,15 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_out\"], num_out)\n \n def fill_mempool(test_framework, node, miniwallet):\n-        \"\"\"Fill mempool until eviction.\"\"\"\n+        \"\"\"Fill mempool until eviction.\n+\n+        Allows for simpler testing of scenarios with floating minfee > minrelay\n+        Requires -datacarriersize=100000 and\n+        -maxmempool=5.\n+        It will not ensure mempools become synced as it\n+        is based on a single node and assumes -minrelaytxfee\n+        is 1 sat/vbyte.",
      "path": "test/functional/test_framework/util.py",
      "position": 12,
      "original_position": 12,
      "commit_id": "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "original_commit_id": "a466686c6e97d47e3f4718eed0f781acb88da7fa",
      "in_reply_to_id": 1555729721,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done",
      "created_at": "2024-04-08T13:18:11Z",
      "updated_at": "2024-04-08T13:18:12Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1555832735",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555832735"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
        }
      },
      "start_line": 505,
      "original_start_line": 505,
      "start_side": "RIGHT",
      "line": 507,
      "original_line": 507,
      "side": "RIGHT"
    }
  ]
}