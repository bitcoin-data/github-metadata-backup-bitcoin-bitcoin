{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26534",
    "id": 1128882621,
    "node_id": "PR_kwDOABII585DSWG9",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/26534",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/26534.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/26534.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26534",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26534/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26534/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26534/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/e663ee9b448c2aad7449666b07d7fb87ea492d31",
    "number": 26534,
    "state": "closed",
    "locked": false,
    "maintainer_can_modify": false,
    "title": "Fix macOS failing to flush blockfiles to disk for certain external drives",
    "user": {
      "login": "john-moffett",
      "id": 116917595,
      "node_id": "U_kgDOBvgFWw",
      "avatar_url": "https://avatars.githubusercontent.com/u/116917595?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/john-moffett",
      "html_url": "https://github.com/john-moffett",
      "followers_url": "https://api.github.com/users/john-moffett/followers",
      "following_url": "https://api.github.com/users/john-moffett/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/john-moffett/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/john-moffett/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/john-moffett/subscriptions",
      "organizations_url": "https://api.github.com/users/john-moffett/orgs",
      "repos_url": "https://api.github.com/users/john-moffett/repos",
      "events_url": "https://api.github.com/users/john-moffett/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/john-moffett/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This PR attempts to close (or at least help) #26455 (and closed duplicates #26400 #26530).\r\n\r\n### Context\r\n\r\nmacOS's `fsync` only flushes writes to the drive, but doesn't ask the drive to *immediately* commit the data to permanent storage (ie - physically write it) ([manpage](https://developer.apple.com/library/archive/documentation/System/Conceptual/ManPages_iPhoneOS/man2/fsync.2.html)). The data will eventually be physically written, but there are no guarantees when it will happen -- it could be several seconds or more. For a stronger 'immediate-write' guarantee, they offer an `F_FULLFSYNC` option to `fcntl` ([manpage](https://developer.apple.com/library/archive/documentation/System/Conceptual/ManPages_iPhoneOS/man2/fcntl.2.html#//apple_ref/doc/man/2/fcntl:~:text=current%20file%20offset.-,F_FULLFSYNC,-Does%20the%20same)) to accomplish that. This `fsync`-on-macOS behavior has caused [historical problems](https://github.com/bitcoin/bitcoin/issues/2770#issuecomment-22686426) in this project for macOS builds, so, since then, the `F_FULLSYNC` approach has been used for writing (see #3000).\r\n\r\nHowever, certain external drives or filesystems do not support `fcntl` with `F_FULLFSYNC` option. (And some that *do* supposedly support the option do not actually do it.) These drives/filesystems will typically report `errno` `ENOTSUP` or `ENOTTY`, which is what was reported in the referenced issues. [However, there is no reliable way to determine lack of support](https://github.com/google/leveldb/commit/296de8d5b8e4e57bd1e46c981114dfbe58a8c4fa), so **relying on specific error codes is insufficient**.\r\n\r\nThis bug seems to only be affecting macOS 13 (Ventura) systems, but in theory, any macOS version could be affected.\r\n\r\n### What other projects have done\r\n\r\nOther projects, including [LevelDB](https://github.com/google/leveldb/commit/296de8d5b8e4e57bd1e46c981114dfbe58a8c4fa), [SQLite](https://sqlite.org/src/file?name=src/os_unix.c&ci=5c669f5f399fe899#:~:text=If%20the%20FULLFSYNC%20failed%2C%20fall%20back%20to%20attempting%20an%20fsync()), and [MariaDB](https://github.com/MariaDB/server/commit/746fd9fdacc52ccc297db7703ea9288b67138167) have experienced similar issues, and have taken the strategy of falling back on the (less reliable) `fsync` when `F_FULLFSYNC` isn't supported. (See helpful [Twitter thread](https://twitter.com/TigerBeetleDB/status/1422855270716293123).) Some (SQLite, MariaDB, LevelDB) fall back to `fsync` on *any* error, and others only fall back on specific errors (BerkeleyDB 4.8 [falls back only on `ENOTSUP`](https://github.com/observerdev/db-4.8.30/blob/3c75267f11336acb1be06bed419e8056cc689d09/os/os_fsync.c#L81-L88), which is why this PR may not fully fix #26455, as the wallet is getting the error `ENOTTY`.)\r\n\r\n### This PR\r\n\r\nI propose to follow that general strategy and fall back on `fsync` if `F_FULLFSYNC` fails for any reason, while preserving both error codes for debugging. \r\n\r\n(I think we should also print the error strings using `SysErrorString` rather than print the raw platform-dependent error codes, but I wanted to keep this PR as atomic as possible and save those changes (4 or 5 lines in addition to these) for another PR (which I'd be happy to submit -- or modify this PR to include).)",
    "labels": [],
    "created_at": "2022-11-19T17:10:54Z",
    "updated_at": "2022-11-29T23:56:59Z",
    "closed_at": "2022-11-29T23:56:59Z",
    "mergeable_state": "unknown",
    "merge_commit_sha": "f4ba393e82d5e12e2fb0056d102c663ada16cbcf",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "head": {
      "label": "john-moffett:2022_11_macOS_fcntl_F_FULLFSYNC_failure",
      "ref": "2022_11_macOS_fcntl_F_FULLFSYNC_failure",
      "sha": "e663ee9b448c2aad7449666b07d7fb87ea492d31",
      "user": {
        "login": "john-moffett",
        "id": 116917595,
        "node_id": "U_kgDOBvgFWw",
        "avatar_url": "https://avatars.githubusercontent.com/u/116917595?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/john-moffett",
        "html_url": "https://github.com/john-moffett",
        "followers_url": "https://api.github.com/users/john-moffett/followers",
        "following_url": "https://api.github.com/users/john-moffett/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/john-moffett/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/john-moffett/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/john-moffett/subscriptions",
        "organizations_url": "https://api.github.com/users/john-moffett/orgs",
        "repos_url": "https://api.github.com/users/john-moffett/repos",
        "events_url": "https://api.github.com/users/john-moffett/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/john-moffett/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 559004828,
        "node_id": "R_kgDOIVG8nA",
        "name": "bitcoin",
        "full_name": "john-moffett/bitcoin",
        "owner": {
          "login": "john-moffett",
          "id": 116917595,
          "node_id": "U_kgDOBvgFWw",
          "avatar_url": "https://avatars.githubusercontent.com/u/116917595?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/john-moffett",
          "html_url": "https://github.com/john-moffett",
          "followers_url": "https://api.github.com/users/john-moffett/followers",
          "following_url": "https://api.github.com/users/john-moffett/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/john-moffett/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/john-moffett/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/john-moffett/subscriptions",
          "organizations_url": "https://api.github.com/users/john-moffett/orgs",
          "repos_url": "https://api.github.com/users/john-moffett/repos",
          "events_url": "https://api.github.com/users/john-moffett/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/john-moffett/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/john-moffett/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/john-moffett/bitcoin",
        "archive_url": "https://api.github.com/repos/john-moffett/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/john-moffett/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/john-moffett/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/john-moffett/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/john-moffett/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/john-moffett/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/john-moffett/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/john-moffett/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/john-moffett/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/john-moffett/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/john-moffett/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/john-moffett/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/john-moffett/bitcoin/events",
        "forks_url": "https://api.github.com/repos/john-moffett/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/john-moffett/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/john-moffett/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/john-moffett/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/john-moffett/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/john-moffett/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/john-moffett/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/john-moffett/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/john-moffett/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/john-moffett/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/john-moffett/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/john-moffett/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/john-moffett/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/john-moffett/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/john-moffett/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/john-moffett/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:john-moffett/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/john-moffett/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/john-moffett/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/john-moffett/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/john-moffett/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/john-moffett/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/john-moffett/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/john-moffett/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/john-moffett/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/john-moffett/bitcoin/hooks",
        "svn_url": "https://github.com/john-moffett/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 0,
        "watchers_count": 0,
        "size": 194607,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-30T13:52:04Z",
        "created_at": "2022-10-28T19:57:36Z",
        "updated_at": "2022-10-31T12:32:30Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "d0b1f613c2a20b2de2878be2de19f827347dcc24",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35476,
        "stargazers_count": 70608,
        "watchers_count": 70608,
        "size": 236222,
        "default_branch": "master",
        "open_issues_count": 673,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-08-03T00:03:27Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-08-02T18:21:18Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26534"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 9,
    "deletions": 2,
    "changed_files": 1,
    "commits": 1,
    "review_comments": 1,
    "comments": 12
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGU2NjNlZTliNDQ4YzJhYWQ3NDQ5NjY2YjA3ZDdmYjg3ZWE0OTJkMzE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e663ee9b448c2aad7449666b07d7fb87ea492d31",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e663ee9b448c2aad7449666b07d7fb87ea492d31",
      "tree": {
        "sha": "385be09fb39831ede9f9465b46299ef99def55a1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/385be09fb39831ede9f9465b46299ef99def55a1"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/aeb395dcdbfe2b1a6c77ff218939a18afde3add9",
          "sha": "aeb395dcdbfe2b1a6c77ff218939a18afde3add9",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/aeb395dcdbfe2b1a6c77ff218939a18afde3add9"
        }
      ],
      "message": "Fix macOS failing to flush blockfiles to disk\n\nCertain external drives or filesystems do not support fcntl\nwith F_FULLFSYNC option. Rather than fail, try regular fsync\ninstead. Other projects take this approach including LevelDB\nand SQLite.",
      "committer": {
        "name": "John Moffett",
        "email": "john.moff@gmail.com",
        "date": "2022-11-19T16:35:12Z"
      },
      "author": {
        "name": "John Moffett",
        "email": "john.moff@gmail.com",
        "date": "2022-11-18T19:10:29Z"
      },
      "sha": "e663ee9b448c2aad7449666b07d7fb87ea492d31"
    },
    {
      "event": "commented",
      "id": 1320926924,
      "node_id": "IC_kwDOABII585Ou77M",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1320926924",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-19T17:10:56Z",
      "updated_at": "2022-11-28T14:21:01Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [jamesob](https://github.com/bitcoin/bitcoin/pull/26534#pullrequestreview-1195898625) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26534#issuecomment-1320926924",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26534"
    },
    {
      "event": "reviewed",
      "id": 1187124691,
      "node_id": "PRR_kwDOABII585GwhXT",
      "url": null,
      "actor": null,
      "commit_id": "e663ee9b448c2aad7449666b07d7fb87ea492d31",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Since fsync doesn't do the whole job, it shouldn't silence the error/return-false when F_FULLFSYNC fails.\r\n\r\nAnd if, as you say, some drives claim to have done it while they actually haven't, should we perhaps consider falling back to fsync even if F_FULLFSYNC succeeds? (Or maybe F_FULLFSYNC always at least does the equivalent of fsync? In which case I ask: does it do so even if F_FULLFSYNC returns an error?)",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26534#pullrequestreview-1187124691",
      "submitted_at": "2022-11-19T21:41:43Z",
      "state": "CHANGES_REQUESTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26534"
    },
    {
      "event": "commented",
      "id": 1320980132,
      "node_id": "IC_kwDOABII585OvI6k",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1320980132",
      "actor": {
        "login": "john-moffett",
        "id": 116917595,
        "node_id": "U_kgDOBvgFWw",
        "avatar_url": "https://avatars.githubusercontent.com/u/116917595?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/john-moffett",
        "html_url": "https://github.com/john-moffett",
        "followers_url": "https://api.github.com/users/john-moffett/followers",
        "following_url": "https://api.github.com/users/john-moffett/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/john-moffett/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/john-moffett/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/john-moffett/subscriptions",
        "organizations_url": "https://api.github.com/users/john-moffett/orgs",
        "repos_url": "https://api.github.com/users/john-moffett/repos",
        "events_url": "https://api.github.com/users/john-moffett/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/john-moffett/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-19T22:09:48Z",
      "updated_at": "2022-11-19T22:09:48Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Since fsync doesn't do the whole job, it shouldn't silence the error/return-false when F_FULLFSYNC fails.\r\n\r\nSorry, I was unclear. (I'll edit my comment.) `fsync` does eventually physically write to disk on macOS, but it just does it on its own time. It's more vulnerable to corruption / data loss if, for example, the machine or drive loses power. The `F_FULLFSYNC` option is better just because it actually physically writes *immediately* after it flushes to disk. Prior to #3000, the macOS version just used `fsync`. This PR goes back to using `fsync` if the (better) `F_FULLFSYNC` isn't available. \r\n\r\n> And if, as you say, some drives claim to have done it while they actually haven't, should we perhaps consider falling back to fsync even if F_FULLFSYNC succeeds?\r\n\r\nSome drives claim to write immediately with the `fcntl F_FULLFSYNC` call, but in reality only do the equivalent of macOS's version of `fsync` -- that is, they just flush to disk, return ASAP, and let the disk actually physically write whenever it wants, rather than blocking until the physical write is complete.\r\n\r\n> Or maybe F_FULLFSYNC always at least does the equivalent of fsync?\r\n\r\nI think that's what happens for the drives that 'lie', which is what I just talked about. However, I don't think any actual flushes or physical writes happen if `F_FULLFYNC` returns an error.",
      "user": {
        "login": "john-moffett",
        "id": 116917595,
        "node_id": "U_kgDOBvgFWw",
        "avatar_url": "https://avatars.githubusercontent.com/u/116917595?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/john-moffett",
        "html_url": "https://github.com/john-moffett",
        "followers_url": "https://api.github.com/users/john-moffett/followers",
        "following_url": "https://api.github.com/users/john-moffett/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/john-moffett/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/john-moffett/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/john-moffett/subscriptions",
        "organizations_url": "https://api.github.com/users/john-moffett/orgs",
        "repos_url": "https://api.github.com/users/john-moffett/repos",
        "events_url": "https://api.github.com/users/john-moffett/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/john-moffett/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26534#issuecomment-1320980132",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26534"
    },
    {
      "event": "reviewed",
      "id": 1195898625,
      "node_id": "PRR_kwDOABII585HR_cB",
      "url": null,
      "actor": null,
      "commit_id": "e663ee9b448c2aad7449666b07d7fb87ea492d31",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "ACK e663ee9b448c2aad7449666b07d7fb87ea492d31 ([`jamesob/ackr/26534.1.john-moffett.fix_macos_failing_to_flu`](https://github.com/jamesob/bitcoin/tree/ackr/26534.1.john-moffett.fix_macos_failing_to_flu))\r\n\r\nThanks for the great PR and welcome to the project! \r\n\r\nThe patch is compact and well-described. Conceptually it's pretty simple: in a\r\nnutshell this just calls `fsync()` should we fail the more specific `fcntl()`\r\ncall. There is good precedent for this approach; bitcoin [already relies on this\r\nstrategy](https://github.com/jamesob/bitcoin/blob/e663ee9b448c2aad7449666b07d7fb87ea492d31/src/leveldb/util/env_posix.cc#L381-L394) in our vendored leveldb code.\r\n\r\nI've built and reveiewed the change locally.\r\n\r\n<details><summary>Show signature data</summary>\r\n<p>\r\n\r\n```\r\n-----BEGIN PGP SIGNED MESSAGE-----\r\nHash: SHA512\r\n\r\nACK e663ee9b448c2aad7449666b07d7fb87ea492d31 ([`jamesob/ackr/26534.1.john-moffett.fix_macos_failing_to_flu`](https://github.com/jamesob/bitcoin/tree/ackr/26534.1.john-moffett.fix_macos_failing_to_flu))\r\n\r\nThanks for the great PR and welcome to the project! \r\n\r\nThe patch is compact and well-described. Conceptually it's pretty simple: in a\r\nnutshell this just calls `fsync()` should we fail the more specific `fcntl()`\r\ncall. There is good precedent for this approach; bitcoin [already relies on this\r\nstrategy](https://github.com/jamesob/bitcoin/blob/e663ee9b448c2aad7449666b07d7fb87ea492d31/src/leveldb/util/env_posix.cc#L381-L394)\r\nin our vendored leveldb code.\r\n\r\nI've built and reveiewed the change locally.\r\n-----BEGIN PGP SIGNATURE-----\r\n\r\niQIzBAEBCgAdFiEEGNRVI1NPYuZCSIrGepNdrbLETwUFAmOEw90ACgkQepNdrbLE\r\nTwUNBQ//QTTTV7TKsRbXSjXw1efU7jP/srJHtJoDNfTj8ZV4vbqfkrERGITi+Aud\r\nDAi5RhdU9PyO5hX5Z19bDuGoGxg3CHFNE6gKH2NXwdxsO7E1yJ44N+QQlvId9cJB\r\n+52xm+rXQeP4/aHHwmo6JuFmQCJC6Hsri7SYNbtJJWSU+qg+HSjAemtj4HKemZk3\r\nvupd4uPThcsrtHjen6ksW5EofXOikATl86BCYA/X0HC4mG7vQSbR5co1S0bVc2y7\r\n2RxVOeAe0TI8HvBKiOzCT2fBRVmF/OL1vE3Uks4X8ObZLv3D3eLF7Lz2Kmu57n18\r\nsRKgE/o0PtlxwaTW4Sz19WtN3D3lOVE3lx1W/+vRi3RNHTSf4PqtvxZO02S1Kq9I\r\nIhhhekQIvrDsOrgaydyyTjTgxT3CRYiZI7uDTEu8xPqSo6GTNG9WpFC2olOWGLna\r\n1vlOA/edBeZ0WCagEHGtouxnicvKUYzVK56uIpbJA2pnbnbnyempaEBs592LBxh+\r\nO/WJPsTqPGVZa0YhaMYk2TCVBA+XBAQsdkRYlkHLZw8OJsa5E+6k1TVZ1aXAFGOm\r\nBJ1AI6LOgMeeR9qZrdjHoroR9xFyC4kS4h+/BmKUSM6mhLaYoOoNaenCOlXK7RGV\r\nTcVocuW1tJrC4bgiC0ParDeFas5s0SsaUMrJJV5I+788QLcco4A=\r\n=JarI\r\n-----END PGP SIGNATURE-----\r\n\r\n```\r\n\r\n</p></details>\r\n\r\n<details><summary>Show platform data</summary>\r\n<p>\r\n\r\n```\r\nTested on Linux-6.0.2-arch1-1-x86_64-with-glibc2.36\r\n\r\nConfigured with ./configure --without-bdb 'CXXFLAGS=-fPIE -pipe -O2 -g -Wthread-safety-analysis -Wall -Werror=sign-compare ' --disable-gui-tests --disable-fuzz-binary --enable-wallet --enable-debug --with-daemon --enable-natpmp-default CXX=/usr/bin/clang++ CC=/usr/bin/clang PYTHONPATH= --disable-shared --with-pic --enable-benchmark=no --enable-module-recovery --enable-module-schnorrsig --disable-shared --with-pic --enable-benchmark=no --enable-module-recovery --enable-module-schnorrsig --no-create --no-recursion\r\n\r\nCompiled with /usr/bin/ccache /usr/bin/clang++ -std=c++17 -mavx -mavx2 -mpclmul -fPIE -pipe -O2 -g -Wthread-safety-analysis -Wall -Werror=sign-compare  -O0 -g3 -ftrapv -fdebug-prefix-map=$(abs_top_srcdir)=.  -Wstack-protector -fstack-protector-all -fcf-protection=full -fstack-clash-protection -msse4.1 -msse4.2 -msse4 -msha  i\r\n\r\nCompiler version: clang version 14.0.6\r\n```\r\n\r\n</p></details>\r\n\r\n",
      "user": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26534#pullrequestreview-1195898625",
      "submitted_at": "2022-11-28T14:20:58Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26534"
    },
    {
      "event": "commented",
      "id": 1329198754,
      "node_id": "IC_kwDOABII585POfai",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1329198754",
      "actor": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-28T14:22:37Z",
      "updated_at": "2022-11-28T14:22:37Z",
      "author_association": "MEMBER",
      "body": "Also, the single failing CI job just needs a kick but apparently I don't have perms to rerun it from the Cirrus CI page.",
      "user": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26534#issuecomment-1329198754",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26534"
    },
    {
      "event": "commented",
      "id": 1329209790,
      "node_id": "IC_kwDOABII585POiG-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1329209790",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-28T14:29:39Z",
      "updated_at": "2022-11-28T14:29:39Z",
      "author_association": "MEMBER",
      "body": "> Also, the single failing CI job just needs a kick but apparently I don't have perms to rerun it from the Cirrus CI page.\r\n\r\nKicked.",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26534#issuecomment-1329209790",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26534"
    },
    {
      "event": "commented",
      "id": 1329830881,
      "node_id": "IC_kwDOABII585PQ5vh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1329830881",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-28T22:20:13Z",
      "updated_at": "2022-11-28T22:20:13Z",
      "author_association": "MEMBER",
      "body": ">fsync does eventually physically write to disk on macOS, but it just does it on its own time. It's more vulnerable to corruption / data loss if, for example, the machine or drive loses power.\r\n\r\nAll writes are by default \"on their own time\". The _entire purpose_ of fsync is to force it to be immediate and block on that, so that after the call returns, there is no risk of corruption / data loss from something as simple as a power failure.\r\n\r\nSo if that isn't happening, this function has failed, and should return an error. (If we don't care, it should be ignored or otherwise handled the same for all failure cases, not just some.)",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26534#issuecomment-1329830881",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26534"
    },
    {
      "event": "commented",
      "id": 1329909961,
      "node_id": "IC_kwDOABII585PRNDJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1329909961",
      "actor": {
        "login": "john-moffett",
        "id": 116917595,
        "node_id": "U_kgDOBvgFWw",
        "avatar_url": "https://avatars.githubusercontent.com/u/116917595?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/john-moffett",
        "html_url": "https://github.com/john-moffett",
        "followers_url": "https://api.github.com/users/john-moffett/followers",
        "following_url": "https://api.github.com/users/john-moffett/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/john-moffett/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/john-moffett/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/john-moffett/subscriptions",
        "organizations_url": "https://api.github.com/users/john-moffett/orgs",
        "repos_url": "https://api.github.com/users/john-moffett/repos",
        "events_url": "https://api.github.com/users/john-moffett/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/john-moffett/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-29T00:14:51Z",
      "updated_at": "2022-11-29T00:14:51Z",
      "author_association": "CONTRIBUTOR",
      "body": "@jamesob , thank you for your kind words and the time you took to review.\r\n\r\n@luke-jr Thanks for the comment, Luke. I believe I understand your point -- that`FileCommit` exists to assure that the data is actually physically written by the time the function returns, so we shouldn't let macOS get away with breaking that contract just because the hardware doesn't support it. It's better to simply fail (or, alternatively, allow other systems to get away with the same behavior). \r\n\r\nMy thinking was that doing macOS's poor `fsync` was better than leaving the hardware unsupported. To be fair, it does do *something* in this case -- it flushes the buffer to the drive. However, it doesn't provide the [full guarantee implied by the comments](https://github.com/bitcoin/bitcoin/blob/d415b7261c05dafbc3e65eea72d270b2bed0958b/src/util/system.h#L57-L58). My assumption was that it was more of a 'best-effort' situation.\r\n\r\nI'll obviously defer to your judgment in situations like these, so I'm happy to close this if my understanding of your comment was correct.",
      "user": {
        "login": "john-moffett",
        "id": 116917595,
        "node_id": "U_kgDOBvgFWw",
        "avatar_url": "https://avatars.githubusercontent.com/u/116917595?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/john-moffett",
        "html_url": "https://github.com/john-moffett",
        "followers_url": "https://api.github.com/users/john-moffett/followers",
        "following_url": "https://api.github.com/users/john-moffett/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/john-moffett/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/john-moffett/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/john-moffett/subscriptions",
        "organizations_url": "https://api.github.com/users/john-moffett/orgs",
        "repos_url": "https://api.github.com/users/john-moffett/repos",
        "events_url": "https://api.github.com/users/john-moffett/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/john-moffett/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26534#issuecomment-1329909961",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26534"
    },
    {
      "event": "mentioned",
      "id": 7907836230,
      "node_id": "MEE_lADOABII585W0bFFzwAAAAHXWAFG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7907836230",
      "actor": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-29T00:14:51Z"
    },
    {
      "event": "subscribed",
      "id": 7907836236,
      "node_id": "SE_lADOABII585W0bFFzwAAAAHXWAFM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7907836236",
      "actor": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-29T00:14:51Z"
    },
    {
      "event": "mentioned",
      "id": 7907836250,
      "node_id": "MEE_lADOABII585W0bFFzwAAAAHXWAFa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7907836250",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-29T00:14:51Z"
    },
    {
      "event": "subscribed",
      "id": 7907836257,
      "node_id": "SE_lADOABII585W0bFFzwAAAAHXWAFh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7907836257",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-29T00:14:52Z"
    },
    {
      "event": "commented",
      "id": 1329930077,
      "node_id": "IC_kwDOABII585PRR9d",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1329930077",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-29T00:45:04Z",
      "updated_at": "2022-11-29T00:45:04Z",
      "author_association": "MEMBER",
      "body": "I agree we should do _something_. If FULLFSYNC fails, calling fsync is reasonable.\r\n\r\nIf we are unable to flush, ideally we should inform the user (perhaps make it a GUI-visible warning?), and let them choose another storage device.\r\n\r\nOTOH, for block files, we can always reprocess the block again if needed, so that might actually be a better solution if we can't flush properly.",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26534#issuecomment-1329930077",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26534"
    },
    {
      "event": "commented",
      "id": 1330036929,
      "node_id": "IC_kwDOABII585PRsDB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1330036929",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-29T03:48:23Z",
      "updated_at": "2022-11-29T03:48:23Z",
      "author_association": "MEMBER",
      "body": "Looking at this again, it seems fflush failure indicates the write actually failed, and in that case we should terminate the program entirely.\r\n\r\nIf any of the others fail, I think we should post a warning to the user (maybe just before/during IBD?) and continue.\r\n\r\nAnd in the meantime (out of scope here IMO), we shouldn't be flushing block files at all. It's an expensive operation, and usually unnecessary. Instead, we should just ensure we can recover cleanly from missing or corrupt recent block data.",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26534#issuecomment-1330036929",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26534"
    },
    {
      "event": "commented",
      "id": 1330039472,
      "node_id": "IC_kwDOABII585PRsqw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1330039472",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-29T03:54:25Z",
      "updated_at": "2022-11-29T03:54:51Z",
      "author_association": "MEMBER",
      "body": "@luke-jr We flush the block files whenever there is a write to the block index, because the block index contains references (file numbers, byte offsets) to the blk*.dat files. So if somehow a write to the block index does make it, but a write to the block data does not, we may have a corruption. Similarly, we flush the block index before flushing the chainstate, because the chainstate contains references to the block index.\n\nIn that sense, we really don't primarily use flushing for finality, but for ordering operations on disk. I suspect that even on systems where a flush doesn't actually cause the write to hit disk, it'll still order operations (writes before will make it before writes after do).",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26534#issuecomment-1330039472",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26534"
    },
    {
      "event": "mentioned",
      "id": 7908677759,
      "node_id": "MEE_lADOABII585W0bFFzwAAAAHXZNh_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7908677759",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-29T03:54:25Z"
    },
    {
      "event": "subscribed",
      "id": 7908677763,
      "node_id": "SE_lADOABII585W0bFFzwAAAAHXZNiD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7908677763",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-29T03:54:25Z"
    },
    {
      "event": "commented",
      "id": 1330112715,
      "node_id": "IC_kwDOABII585PR-jL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1330112715",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-29T05:49:36Z",
      "updated_at": "2022-11-29T05:49:36Z",
      "author_association": "MEMBER",
      "body": "With regard to my last (out of scope) comment, I am thinking more for performance reasons. There's no reason we can't detect the missing block data when we verify blocks at startup, and handle it gracefully.",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26534#issuecomment-1330112715",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26534"
    },
    {
      "event": "reviewed",
      "id": 1197322920,
      "node_id": "PRR_kwDOABII585HXbKo",
      "url": null,
      "actor": null,
      "commit_id": "e663ee9b448c2aad7449666b07d7fb87ea492d31",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "> This bug seems to only be affecting macOS 13 (Ventura) systems, but in theory, any macOS version could be affected.\r\n\r\nDo we know what has changed in macOS Ventura to make this start occuring? You say this could affect other versions, but given things only started breaking again with the release of Ventura (and users claim things worked perfectly with previous major versions, i.e: https://github.com/bitcoin/bitcoin/issues/26400#issuecomment-1294887460), clearly something has changed. It would be good to understand what that is.\r\n\r\nI've had a look through the XNU sources for Ventura (https://github.com/apple-oss-distributions/xnu/tree/xnu-8792.41.9) and the previous version (Monterey): https://github.com/apple-oss-distributions/xnu/tree/xnu-8020.140.41, and the functions pointed too by https://github.com/google/leveldb/commit/296de8d5b8e4e57bd1e46c981114dfbe58a8c4fa, and didn't see anything obvious.",
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26534#pullrequestreview-1197322920",
      "submitted_at": "2022-11-29T11:17:12Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26534"
    },
    {
      "event": "commented",
      "id": 1331409133,
      "node_id": "IC_kwDOABII585PW7Dt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1331409133",
      "actor": {
        "login": "gawlk",
        "id": 32246972,
        "node_id": "MDQ6VXNlcjMyMjQ2OTcy",
        "avatar_url": "https://avatars.githubusercontent.com/u/32246972?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gawlk",
        "html_url": "https://github.com/gawlk",
        "followers_url": "https://api.github.com/users/gawlk/followers",
        "following_url": "https://api.github.com/users/gawlk/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gawlk/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gawlk/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gawlk/subscriptions",
        "organizations_url": "https://api.github.com/users/gawlk/orgs",
        "repos_url": "https://api.github.com/users/gawlk/repos",
        "events_url": "https://api.github.com/users/gawlk/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gawlk/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-29T22:38:03Z",
      "updated_at": "2022-11-29T22:40:10Z",
      "author_association": "NONE",
      "body": "Hi y'all,\r\n\r\nI've been having this issue on 2 m1 Macs with MacOS 13 but it seem to work on the latest MacOS 13.1 Beta !\r\n\r\nOn both previous Macs, it crashed after a couple minutes but on the latest on it's been running for a while now and still going. So it might actually be a non issue.\r\n\r\nFor information the hard drive used for all 3 attempts is the same 1TB T7 Shield from Samsung.\r\n\r\nHere's a screenshot:\r\n\r\n<img width=\"1440\" alt=\"image\" src=\"https://user-images.githubusercontent.com/32246972/204663634-e16e0af3-394d-4fad-b1a8-f5bd00bdcf36.png\">",
      "user": {
        "login": "gawlk",
        "id": 32246972,
        "node_id": "MDQ6VXNlcjMyMjQ2OTcy",
        "avatar_url": "https://avatars.githubusercontent.com/u/32246972?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gawlk",
        "html_url": "https://github.com/gawlk",
        "followers_url": "https://api.github.com/users/gawlk/followers",
        "following_url": "https://api.github.com/users/gawlk/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gawlk/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gawlk/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gawlk/subscriptions",
        "organizations_url": "https://api.github.com/users/gawlk/orgs",
        "repos_url": "https://api.github.com/users/gawlk/repos",
        "events_url": "https://api.github.com/users/gawlk/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gawlk/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26534#issuecomment-1331409133",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26534"
    },
    {
      "event": "commented",
      "id": 1331470901,
      "node_id": "IC_kwDOABII585PXKI1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1331470901",
      "actor": {
        "login": "john-moffett",
        "id": 116917595,
        "node_id": "U_kgDOBvgFWw",
        "avatar_url": "https://avatars.githubusercontent.com/u/116917595?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/john-moffett",
        "html_url": "https://github.com/john-moffett",
        "followers_url": "https://api.github.com/users/john-moffett/followers",
        "following_url": "https://api.github.com/users/john-moffett/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/john-moffett/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/john-moffett/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/john-moffett/subscriptions",
        "organizations_url": "https://api.github.com/users/john-moffett/orgs",
        "repos_url": "https://api.github.com/users/john-moffett/repos",
        "events_url": "https://api.github.com/users/john-moffett/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/john-moffett/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-29T23:56:59Z",
      "updated_at": "2022-11-29T23:56:59Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks, @gawlk !\r\n\r\nI suppose this is, indeed, a transient OS bug. I'm also running 13.1 and have tried seven different non-Apple external drives with various filesystems and have yet to trigger the issue.\r\n\r\n@fanquake , I had a look at the XNU sources, too, and likewise couldn't find anything, though some code around an [`ENOTTY` emission](https://github.com/apple-oss-distributions/xnu/blob/5c2921b07a2480ab43ec66f5b9e41cb872bc554f/bsd/vfs/kpi_vfs.c#L3934) changed recently:\r\n\r\n<img width=\"1060\" alt=\"image\" src=\"https://user-images.githubusercontent.com/116917595/204674173-cf3b2b6d-d70f-4099-aff2-13e365b1c7f1.png\">\r\n\r\nI can't fathom why that would affect us in this case, though, so it may remain a mystery.\r\n\r\nRegardless, I think it's best to shelve this. Thanks for the comments!",
      "user": {
        "login": "john-moffett",
        "id": 116917595,
        "node_id": "U_kgDOBvgFWw",
        "avatar_url": "https://avatars.githubusercontent.com/u/116917595?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/john-moffett",
        "html_url": "https://github.com/john-moffett",
        "followers_url": "https://api.github.com/users/john-moffett/followers",
        "following_url": "https://api.github.com/users/john-moffett/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/john-moffett/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/john-moffett/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/john-moffett/subscriptions",
        "organizations_url": "https://api.github.com/users/john-moffett/orgs",
        "repos_url": "https://api.github.com/users/john-moffett/repos",
        "events_url": "https://api.github.com/users/john-moffett/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/john-moffett/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26534#issuecomment-1331470901",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26534"
    },
    {
      "event": "closed",
      "id": 7917422577,
      "node_id": "CE_lADOABII585W0bFFzwAAAAHX6kfx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7917422577",
      "actor": {
        "login": "john-moffett",
        "id": 116917595,
        "node_id": "U_kgDOBvgFWw",
        "avatar_url": "https://avatars.githubusercontent.com/u/116917595?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/john-moffett",
        "html_url": "https://github.com/john-moffett",
        "followers_url": "https://api.github.com/users/john-moffett/followers",
        "following_url": "https://api.github.com/users/john-moffett/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/john-moffett/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/john-moffett/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/john-moffett/subscriptions",
        "organizations_url": "https://api.github.com/users/john-moffett/orgs",
        "repos_url": "https://api.github.com/users/john-moffett/repos",
        "events_url": "https://api.github.com/users/john-moffett/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/john-moffett/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-29T23:56:59Z"
    },
    {
      "event": "mentioned",
      "id": 7917422602,
      "node_id": "MEE_lADOABII585W0bFFzwAAAAHX6kgK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7917422602",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-29T23:56:59Z"
    },
    {
      "event": "subscribed",
      "id": 7917422609,
      "node_id": "SE_lADOABII585W0bFFzwAAAAHX6kgR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7917422609",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-29T23:56:59Z"
    },
    {
      "event": "mentioned",
      "id": 7917422615,
      "node_id": "MEE_lADOABII585W0bFFzwAAAAHX6kgX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7917422615",
      "actor": {
        "login": "gawlk",
        "id": 32246972,
        "node_id": "MDQ6VXNlcjMyMjQ2OTcy",
        "avatar_url": "https://avatars.githubusercontent.com/u/32246972?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gawlk",
        "html_url": "https://github.com/gawlk",
        "followers_url": "https://api.github.com/users/gawlk/followers",
        "following_url": "https://api.github.com/users/gawlk/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gawlk/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gawlk/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gawlk/subscriptions",
        "organizations_url": "https://api.github.com/users/gawlk/orgs",
        "repos_url": "https://api.github.com/users/gawlk/repos",
        "events_url": "https://api.github.com/users/gawlk/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gawlk/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-29T23:56:59Z"
    },
    {
      "event": "subscribed",
      "id": 7917422617,
      "node_id": "SE_lADOABII585W0bFFzwAAAAHX6kgZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7917422617",
      "actor": {
        "login": "gawlk",
        "id": 32246972,
        "node_id": "MDQ6VXNlcjMyMjQ2OTcy",
        "avatar_url": "https://avatars.githubusercontent.com/u/32246972?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gawlk",
        "html_url": "https://github.com/gawlk",
        "followers_url": "https://api.github.com/users/gawlk/followers",
        "following_url": "https://api.github.com/users/gawlk/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gawlk/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gawlk/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gawlk/subscriptions",
        "organizations_url": "https://api.github.com/users/gawlk/orgs",
        "repos_url": "https://api.github.com/users/gawlk/repos",
        "events_url": "https://api.github.com/users/gawlk/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gawlk/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-29T23:56:59Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-30T09:57:32Z",
      "updated_at": "2022-11-30T09:57:32Z",
      "source": {
        "issue": {
          "id": 1436654238,
          "node_id": "I_kwDOABII585VoZqe",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26455",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26455/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26455/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26455/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/26455",
          "number": 26455,
          "state": "closed",
          "state_reason": "completed",
          "title": "Flushing block file to disk failed when using external drive on macOS Ventura",
          "body": "I kept getting an error regarding Flushing Block to disk. I've tried to use bitcoin core V0.23 and it doesn't help; although V0.22 was better at loading the backup file, but I couldn't send any of my bitcoin out. I can't seem to load the wallet or the backup file properly. Not a coder and hoping someone can help. I don't think it's an issue with the hard drive. Any suggestion? I'm on MacOSx Ventura 13.0. \r\n\r\n\r\n\r\nDebug.log file:\r\n\r\n2022-11-04T20:34:28Z Using wallet /Volumes/Extreme SSD/bruceltd wallet.dat\r\n2022-11-04T20:34:28Z BerkeleyEnvironment::Open: LogDir=/Volumes/Extreme SSD/database ErrorFile=/Volumes/Extreme SSD/db.log\r\n.\r\n.\r\n.\r\n2022-11-04T20:58:16Z FileCommit: fcntl F_FULLFSYNC failed: 25\r\n2022-11-04T20:58:16Z ERROR: SerializeFileDB: Failed to flush file /Volumes/Extreme SSD/peers.176f\r\n\r\ndb.log file:\r\nfsync: Inappropriate ioctl for device\r\nPANIC: Inappropriate ioctl for device\r\ntxn_checkpoint: failed to flush the buffer cache: DB_RUNRECOVERY: Fatal error, run database recovery\r\n\r\n\r\n",
          "user": {
            "login": "aureliusltd",
            "id": 117485255,
            "node_id": "U_kgDOBwCuxw",
            "avatar_url": "https://avatars.githubusercontent.com/u/117485255?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/aureliusltd",
            "html_url": "https://github.com/aureliusltd",
            "followers_url": "https://api.github.com/users/aureliusltd/followers",
            "following_url": "https://api.github.com/users/aureliusltd/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/aureliusltd/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/aureliusltd/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/aureliusltd/subscriptions",
            "organizations_url": "https://api.github.com/users/aureliusltd/orgs",
            "repos_url": "https://api.github.com/users/aureliusltd/repos",
            "events_url": "https://api.github.com/users/aureliusltd/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/aureliusltd/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 234879,
              "node_id": "MDU6TGFiZWwyMzQ4Nzk=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/macOS",
              "name": "macOS",
              "description": "",
              "color": "660000",
              "default": false
            },
            {
              "id": 97470796,
              "node_id": "MDU6TGFiZWw5NzQ3MDc5Ng==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/UTXO%20Db%20and%20Indexes",
              "name": "UTXO Db and Indexes",
              "color": "fbca04",
              "default": false
            },
            {
              "id": 323697996,
              "node_id": "MDU6TGFiZWwzMjM2OTc5OTY=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Data%20corruption",
              "name": "Data corruption",
              "color": "f7c6c7",
              "default": false
            },
            {
              "id": 477890092,
              "node_id": "MDU6TGFiZWw0Nzc4OTAwOTI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Questions%20and%20Help",
              "name": "Questions and Help",
              "color": "006688",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "NONE",
          "locked": false,
          "comments": 12,
          "closed_at": "2022-11-30T09:59:39Z",
          "created_at": "2022-11-04T21:14:06Z",
          "updated_at": "2022-12-07T09:10:30Z"
        },
        "type": "issue"
      }
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1034596326",
      "pull_request_review_id": 1197322920,
      "id": 1034596326,
      "node_id": "PRRC_kwDOABII5849qq_m",
      "diff_hunk": "@@ -1186,8 +1186,15 @@ bool FileCommit(FILE *file)\n     }\n #elif defined(MAC_OSX) && defined(F_FULLFSYNC)\n     if (fcntl(fileno(file), F_FULLFSYNC, 0) == -1) { // Manpage says \"value other than -1\" is returned on success\n-        LogPrintf(\"%s: fcntl F_FULLFSYNC failed: %d\\n\", __func__, errno);\n-        return false;\n+        // Certain filesystems may not support F_FULLFSYNC and fail with various error codes.",
      "path": "src/util/system.cpp",
      "position": 6,
      "original_position": 6,
      "commit_id": "e663ee9b448c2aad7449666b07d7fb87ea492d31",
      "original_commit_id": "e663ee9b448c2aad7449666b07d7fb87ea492d31",
      "in_reply_to_id": null,
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Can we be more specific here? non-Apple file systems?",
      "created_at": "2022-11-29T10:52:43Z",
      "updated_at": "2022-11-29T11:17:12Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26534#discussion_r1034596326",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1034596326"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26534"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1189,
      "original_line": 1189,
      "side": "RIGHT"
    }
  ]
}