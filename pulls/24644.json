{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24644",
    "id": 886529497,
    "node_id": "PR_kwDOABII5840113Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/24644",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/24644.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/24644.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24644",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24644/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24644/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24644/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/ab5af9ca7293239ffc24ea7e23159b8184543f94",
    "number": 24644,
    "state": "closed",
    "locked": true,
    "maintainer_can_modify": false,
    "title": "wallet: add tracepoints and algorithm information to coin selection",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Tracepoints can be useful for coin selection as they would allow us to observe what is being selected, selection parameters, and calculation results. So this PR adds 4 new tracepoints:\r\n\r\n1. After `SelectCoins` returns in order to observe the `SelectionResult`\r\n2. After the first `CreateTransactionInternal` to observe the created transaction\r\n3. Prior to the second `CreateTransactionInternal` to notify that the optimistic avoid partial spends selection is occurring\r\n4. After the second `CreateTransactionInternal` to observe the created transaction and inform which solution is being used.\r\n\r\nThis PR also adds an algorithm enum to `SelectionResult` so that the first tracepoint will be able to report which algorithm was used to produce that result.\r\n\r\nThe primary use case for these tracepoints is in running coin selection simulations. The script I use to run these simulations use these tracepoints in order to gather data on the algorithm used and the calculated waste.",
    "labels": [
      {
        "id": 149424,
        "node_id": "MDU6TGFiZWwxNDk0MjQ=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
        "name": "Wallet",
        "color": "08a781",
        "default": false
      }
    ],
    "created_at": "2022-03-22T21:28:03Z",
    "updated_at": "2023-04-30T09:59:30Z",
    "closed_at": "2022-04-26T18:16:54Z",
    "mergeable_state": "unknown",
    "merged_at": "2022-04-26T18:16:54Z",
    "merge_commit_sha": "260ede1d998b7d3af0b5026c38612ffdf55473c2",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "requested_teams": [],
    "head": {
      "label": "achow101:tracepoints-coin-selection",
      "ref": "tracepoints-coin-selection",
      "sha": "ab5af9ca7293239ffc24ea7e23159b8184543f94",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 45006379,
        "node_id": "MDEwOlJlcG9zaXRvcnk0NTAwNjM3OQ==",
        "name": "bitcoin",
        "full_name": "achow101/bitcoin",
        "owner": {
          "login": "achow101",
          "id": 3782274,
          "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
          "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/achow101",
          "html_url": "https://github.com/achow101",
          "followers_url": "https://api.github.com/users/achow101/followers",
          "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
          "organizations_url": "https://api.github.com/users/achow101/orgs",
          "repos_url": "https://api.github.com/users/achow101/repos",
          "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/achow101/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/achow101/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/achow101/bitcoin",
        "archive_url": "https://api.github.com/repos/achow101/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/achow101/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/achow101/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/achow101/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/achow101/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/achow101/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/achow101/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/achow101/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/achow101/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/achow101/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/achow101/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/achow101/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/achow101/bitcoin/events",
        "forks_url": "https://api.github.com/repos/achow101/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/achow101/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/achow101/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/achow101/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/achow101/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/achow101/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/achow101/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/achow101/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/achow101/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/achow101/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/achow101/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/achow101/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/achow101/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/achow101/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/achow101/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/achow101/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:achow101/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/achow101/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/achow101/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/achow101/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/achow101/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/achow101/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/achow101/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/achow101/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/achow101/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/achow101/bitcoin/hooks",
        "svn_url": "https://github.com/achow101/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 9,
        "stargazers_count": 35,
        "watchers_count": 35,
        "size": 243677,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-08-02T20:20:33Z",
        "created_at": "2015-10-27T00:20:28Z",
        "updated_at": "2023-07-28T14:25:30Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "2513499348fa955d0e4b0970b08ba9e715e6316e",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35476,
        "stargazers_count": 70608,
        "watchers_count": 70608,
        "size": 236222,
        "default_branch": "master",
        "open_issues_count": 672,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-08-02T23:10:54Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-08-02T18:21:18Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24644"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 297,
    "deletions": 10,
    "changed_files": 7,
    "commits": 5,
    "review_comments": 23,
    "comments": 16
  },
  "events": [
    {
      "event": "labeled",
      "id": 6286993302,
      "node_id": "LE_lADOABII585GLJcVzwAAAAF2u-eW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6286993302",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-22T21:42:52Z",
      "label": {
        "name": "Wallet",
        "color": "08a781"
      }
    },
    {
      "event": "commented",
      "id": 1075674350,
      "node_id": "IC_kwDOABII585AHXzu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1075674350",
      "actor": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-22T21:44:49Z",
      "updated_at": "2022-03-22T21:44:49Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK",
      "user": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#issuecomment-1075674350",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24644"
    },
    {
      "event": "commented",
      "id": 1076090888,
      "node_id": "IC_kwDOABII585AI9gI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1076090888",
      "actor": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-23T08:39:50Z",
      "updated_at": "2022-03-23T08:42:31Z",
      "author_association": "CONTRIBUTOR",
      "body": "Huge Concept ACK!\r\n\r\nLooking at existing tracing contexts, it seems `wallet` context would be better level of granularity. Also `doc/tracing.md` needs to be updated to mention new context.\r\n\r\nCould you also add an example to `contrib/tracing` about how to use the new tracing points?",
      "user": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#issuecomment-1076090888",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24644"
    },
    {
      "event": "reviewed",
      "id": 918428306,
      "node_id": "PRR_kwDOABII5842vhqS",
      "url": null,
      "actor": null,
      "commit_id": "4fed26af961a87a976d537e496f38b72e1a6c5e8",
      "commit_url": null,
      "created_at": null,
      "author_association": "NONE",
      "body": "",
      "user": {
        "login": "vincenzopalazzo",
        "id": 17150045,
        "node_id": "MDQ6VXNlcjE3MTUwMDQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/17150045?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vincenzopalazzo",
        "html_url": "https://github.com/vincenzopalazzo",
        "followers_url": "https://api.github.com/users/vincenzopalazzo/followers",
        "following_url": "https://api.github.com/users/vincenzopalazzo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vincenzopalazzo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vincenzopalazzo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vincenzopalazzo/subscriptions",
        "organizations_url": "https://api.github.com/users/vincenzopalazzo/orgs",
        "repos_url": "https://api.github.com/users/vincenzopalazzo/repos",
        "events_url": "https://api.github.com/users/vincenzopalazzo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vincenzopalazzo/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#pullrequestreview-918428306",
      "submitted_at": "2022-03-23T09:09:53Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24644"
    },
    {
      "event": "commented",
      "id": 1076162532,
      "node_id": "IC_kwDOABII585AJO_k",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1076162532",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-23T09:47:43Z",
      "updated_at": "2022-03-23T09:47:43Z",
      "author_association": "MEMBER",
      "body": "cc @0xB10C ",
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#issuecomment-1076162532",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24644"
    },
    {
      "event": "mentioned",
      "id": 6290147601,
      "node_id": "MEE_lADOABII585GLJcVzwAAAAF27AkR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6290147601",
      "actor": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-23T09:47:44Z"
    },
    {
      "event": "subscribed",
      "id": 6290147608,
      "node_id": "SE_lADOABII585GLJcVzwAAAAF27AkY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6290147608",
      "actor": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-23T09:47:44Z"
    },
    {
      "event": "commented",
      "id": 1076181553,
      "node_id": "IC_kwDOABII585AJTox",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1076181553",
      "actor": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-23T10:07:33Z",
      "updated_at": "2022-03-23T10:07:33Z",
      "author_association": "CONTRIBUTOR",
      "body": "Cool, Concept ACK! Will review.\r\n\r\nWe might want to start adding tracepoint interface tests (see https://github.com/bitcoin/bitcoin/pull/24358) in the same PR when adding new tracepoints. This makes review a lot easier and provides an usage example.",
      "user": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#issuecomment-1076181553",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24644"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6293465010,
      "node_id": "HRFPE_lADOABII585GLJcVzwAAAAF3Hqey",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6293465010",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-23T17:18:30Z"
    },
    {
      "event": "reviewed",
      "id": 920203513,
      "node_id": "PRR_kwDOABII58422TD5",
      "url": null,
      "actor": null,
      "commit_id": "64338c1a1f4dadb371919042f6be4399ec16b8ec",
      "commit_url": null,
      "created_at": null,
      "author_association": "NONE",
      "body": "ACK https://github.com/bitcoin/bitcoin/commit/64338c1a1f4dadb371919042f6be4399ec16b8ec",
      "user": {
        "login": "vincenzopalazzo",
        "id": 17150045,
        "node_id": "MDQ6VXNlcjE3MTUwMDQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/17150045?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vincenzopalazzo",
        "html_url": "https://github.com/vincenzopalazzo",
        "followers_url": "https://api.github.com/users/vincenzopalazzo/followers",
        "following_url": "https://api.github.com/users/vincenzopalazzo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vincenzopalazzo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vincenzopalazzo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vincenzopalazzo/subscriptions",
        "organizations_url": "https://api.github.com/users/vincenzopalazzo/orgs",
        "repos_url": "https://api.github.com/users/vincenzopalazzo/repos",
        "events_url": "https://api.github.com/users/vincenzopalazzo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vincenzopalazzo/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#pullrequestreview-920203513",
      "submitted_at": "2022-03-24T12:40:45Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24644"
    },
    {
      "event": "commented",
      "id": 1077797641,
      "node_id": "IC_kwDOABII585APeMJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1077797641",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-24T16:13:03Z",
      "updated_at": "2022-04-21T20:08:48Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#24935](https://github.com/bitcoin/bitcoin/pull/24935) (mempool: Add usdt event tracepoints and eBPF logging tool. by russeree)\n* [#24897](https://github.com/bitcoin/bitcoin/pull/24897) ([Draft / POC] Silent Payments by w0xlt)\n* [#24845](https://github.com/bitcoin/bitcoin/pull/24845) (wallet: createTransaction, return proper error description for  \"too-long-mempool-chain\" + introduce generic Result classes by furszy)\n* [#24752](https://github.com/bitcoin/bitcoin/pull/24752) (wallet: increase BnB upper limit by S3RK)\n* [#20640](https://github.com/bitcoin/bitcoin/pull/20640) (wallet, refactor: return out-params of CreateTransaction() as optional struct by theStack)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#issuecomment-1077797641",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24644"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-24T21:59:54Z",
      "updated_at": "2022-03-24T21:59:54Z",
      "source": {
        "issue": {
          "id": 1161522348,
          "node_id": "PR_kwDOABII5840DBcG",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24494",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24494/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24494/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24494/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/24494",
          "number": 24494,
          "state": "closed",
          "state_reason": null,
          "title": "wallet: generate random change target for each tx for better privacy",
          "body": "Closes #24458 - Knapsack always chooses 1 million sats as its change target, making it easier to fingerprint transactions created by the Core wallet. Instead of using a fixed value, choose one randomly each time (within a range).\r\n\r\n`GenerateChangeTarget` works as follows:\r\n- If the payment value > 25ksat, it is randomly chosen between 50ksat and min(2 * payment_value, 1milsat)\r\n- If the payment_value <= 25ksat, the value is just 50ksat.\r\n\r\nThe SRD target is 50ksat, not randomized, since the selection does not aim for a specific target anyway.\r\n\r\n(Note the random change target was mistakenly not used yet in this PR, see #25825).",
          "user": {
            "login": "glozow",
            "id": 25183001,
            "node_id": "MDQ6VXNlcjI1MTgzMDAx",
            "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/glozow",
            "html_url": "https://github.com/glozow",
            "followers_url": "https://api.github.com/users/glozow/followers",
            "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
            "organizations_url": "https://api.github.com/users/glozow/orgs",
            "repos_url": "https://api.github.com/users/glozow/repos",
            "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/glozow/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            },
            {
              "id": 249581124,
              "node_id": "MDU6TGFiZWwyNDk1ODExMjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Privacy",
              "name": "Privacy",
              "color": "5319e7",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 19,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24494",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/24494",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/24494.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/24494.patch"
          },
          "closed_at": "2022-03-25T21:04:06Z",
          "created_at": "2022-03-07T14:52:12Z",
          "updated_at": "2022-08-12T09:43:31Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "labeled",
      "id": 6303101204,
      "node_id": "LE_lADOABII585GLJcVzwAAAAF3sbEU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6303101204",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-24T22:16:31Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-25T03:25:27Z",
      "updated_at": "2022-03-25T03:25:27Z",
      "source": {
        "issue": {
          "id": 1106307710,
          "node_id": "PR_kwDOABII584xLCyY",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24091",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24091/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24091/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24091/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/24091",
          "number": 24091,
          "state": "closed",
          "state_reason": null,
          "title": "wallet: Consolidate CInputCoin and COutput",
          "body": "While working on coin selection code, it occurred to me that `CInputCoin` is really a subset of `COutput` and the conversion of a `COutput` to a `CInputCoin` does not appear to be all that useful. So this PR adds fields that are present in `CInputCoin` to `COutput` and replaces the usage of `CInputCoin` with `COutput`.\r\n\r\n`COutput` is also moved to coinselection.h. As part of this move, the usage of `CWalletTx` is removed from `COutput`. It is instead replaced by storing a `COutPoint` and the `CTxOut` rather than the entire `CWalletTx` as coin selection does not really need the full `CWalletTx`. The `CWalletTx` was only used for figuring out whether the transaction containing the output was from the current wallet, and for the transaction's time. These are now parameters to `COutput`'s constructor.",
          "user": {
            "login": "achow101",
            "id": 3782274,
            "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/achow101",
            "html_url": "https://github.com/achow101",
            "followers_url": "https://api.github.com/users/achow101/followers",
            "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
            "organizations_url": "https://api.github.com/users/achow101/orgs",
            "repos_url": "https://api.github.com/users/achow101/repos",
            "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/achow101/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            },
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": true,
          "comments": 6,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24091",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/24091",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/24091.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/24091.patch"
          },
          "closed_at": "2022-03-24T20:47:10Z",
          "created_at": "2022-01-17T22:30:14Z",
          "updated_at": "2023-06-09T10:05:40Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6309203634,
      "node_id": "HRFPE_lADOABII585GLJcVzwAAAAF4Ds6y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6309203634",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-25T18:27:35Z"
    },
    {
      "event": "unlabeled",
      "id": 6309562144,
      "node_id": "UNLE_lADOABII585GLJcVzwAAAAF4FEcg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6309562144",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-25T19:21:33Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 6310128965,
      "node_id": "LE_lADOABII585GLJcVzwAAAAF4HO1F",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6310128965",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-25T21:27:27Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6310627065,
      "node_id": "HRFPE_lADOABII585GLJcVzwAAAAF4JIb5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6310627065",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-26T00:16:25Z"
    },
    {
      "event": "commented",
      "id": 1079533303,
      "node_id": "IC_kwDOABII585AWF73",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1079533303",
      "actor": {
        "login": "jb55",
        "id": 45598,
        "node_id": "MDQ6VXNlcjQ1NTk4",
        "avatar_url": "https://avatars.githubusercontent.com/u/45598?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jb55",
        "html_url": "https://github.com/jb55",
        "followers_url": "https://api.github.com/users/jb55/followers",
        "following_url": "https://api.github.com/users/jb55/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jb55/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jb55/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jb55/subscriptions",
        "organizations_url": "https://api.github.com/users/jb55/orgs",
        "repos_url": "https://api.github.com/users/jb55/repos",
        "events_url": "https://api.github.com/users/jb55/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jb55/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-26T00:29:16Z",
      "updated_at": "2022-03-26T00:29:16Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK",
      "user": {
        "login": "jb55",
        "id": 45598,
        "node_id": "MDQ6VXNlcjQ1NTk4",
        "avatar_url": "https://avatars.githubusercontent.com/u/45598?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jb55",
        "html_url": "https://github.com/jb55",
        "followers_url": "https://api.github.com/users/jb55/followers",
        "following_url": "https://api.github.com/users/jb55/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jb55/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jb55/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jb55/subscriptions",
        "organizations_url": "https://api.github.com/users/jb55/orgs",
        "repos_url": "https://api.github.com/users/jb55/repos",
        "events_url": "https://api.github.com/users/jb55/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jb55/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#issuecomment-1079533303",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24644"
    },
    {
      "event": "unlabeled",
      "id": 6310845310,
      "node_id": "UNLE_lADOABII585GLJcVzwAAAAF4J9t-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6310845310",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-26T01:38:10Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6337423803,
      "node_id": "HRFPE_lADOABII585GLJcVzwAAAAF5vWm7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6337423803",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-30T18:34:12Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-02T21:46:39Z",
      "updated_at": "2022-04-02T21:46:39Z",
      "source": {
        "issue": {
          "id": 764895200,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NTM4NzUyMjQ5",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20640",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20640/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20640/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20640/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/20640",
          "number": 20640,
          "state": "closed",
          "state_reason": null,
          "title": "wallet, refactor: return out-params of CreateTransaction() as optional struct",
          "body": "The method `CWallet::CreateTransaction` currently returns several values in the form of out-parameters:\r\n* the actual newly created transaction (`CTransactionRef& tx`)\r\n* its required fee (`CAmount& nFeeRate`)\r\n* the position of the change output (`int& nChangePosInOut`) -- as the name suggests, this is both an in- and out-param\r\n\r\nBy returning these values in an optional structure (which returns no value a.k.a. `std::nullopt` if an error occured), the interfaces is shorter, cleaner (requested change position is now in-param and can be passed by value) and callers don't have to create dummy variables for results that they are not interested in. \r\n\r\nNote that the names of the replaced out-variables were kept in `CreateTransactionInternal` to keep the diff minimal. Also, the fee calculation data (`FeeCalculation& fee_calc_out`) would be another candidate to put into the structure, but `FeeCalculation` is currently an opaque data type in the wallet interface and I think it should stay that way.\r\n\r\nAs a potential follow-up, I think it would make sense to also do the same refactoring for `CWallet::FundTransaction`, which has a very similar parameter structure.\r\n\r\nSuggested by laanwj in https://github.com/bitcoin/bitcoin/pull/20588#issuecomment-739838428.",
          "user": {
            "login": "theStack",
            "id": 91535,
            "node_id": "MDQ6VXNlcjkxNTM1",
            "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/theStack",
            "html_url": "https://github.com/theStack",
            "followers_url": "https://api.github.com/users/theStack/followers",
            "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
            "organizations_url": "https://api.github.com/users/theStack/orgs",
            "repos_url": "https://api.github.com/users/theStack/repos",
            "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/theStack/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            },
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "comments": 17,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20640",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/20640",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/20640.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/20640.patch"
          },
          "closed_at": "2022-05-17T10:05:17Z",
          "created_at": "2020-12-13T04:03:13Z",
          "updated_at": "2023-05-17T10:02:10Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1087505741,
      "node_id": "IC_kwDOABII585A0gVN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1087505741",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-04T12:41:45Z",
      "updated_at": "2022-04-04T12:41:45Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#issuecomment-1087505741",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24644"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-05T00:56:03Z",
      "updated_at": "2022-04-05T00:56:03Z",
      "source": {
        "issue": {
          "id": 1191401836,
          "node_id": "PR_kwDOABII5841kOKw",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24752",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24752/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24752/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24752/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/24752",
          "number": 24752,
          "state": "closed",
          "state_reason": null,
          "title": "wallet: increase BnB upper limit",
          "body": "Successor of #23367\r\n\r\nIncreasing upper bound helps to find more changeless solutions.\r\nThis improves coin selection in the cases introduced in #24580.",
          "user": {
            "login": "S3RK",
            "id": 1466284,
            "node_id": "MDQ6VXNlcjE0NjYyODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/S3RK",
            "html_url": "https://github.com/S3RK",
            "followers_url": "https://api.github.com/users/S3RK/followers",
            "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
            "organizations_url": "https://api.github.com/users/S3RK/orgs",
            "repos_url": "https://api.github.com/users/S3RK/repos",
            "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/S3RK/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "comments": 5,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/24752",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/24752.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/24752.patch"
          },
          "closed_at": "2022-06-22T06:54:47Z",
          "created_at": "2022-04-04T07:58:11Z",
          "updated_at": "2023-06-22T10:07:44Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1098894676,
      "node_id": "IC_kwDOABII585Bf81U",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1098894676",
      "actor": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-14T09:05:21Z",
      "updated_at": "2022-04-14T09:05:21Z",
      "author_association": "CONTRIBUTOR",
      "body": "fwiw: I think to move this forward at least documentation in [doc/tracing.md#tracepoint-documentation](https://github.com/bitcoin/bitcoin/blob/master/doc/tracing.md#tracepoint-documentation) and interface tests similar to #24358 are needed.\r\n\r\nI'm not too familiar with coin selection and don't know what e.g. the `coin_selection:aps_create_tx_internal` tracepoint traces. This makes reviewing cumbersome for me.",
      "user": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#issuecomment-1098894676",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24644"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-14T11:32:41Z",
      "updated_at": "2022-04-14T11:32:41Z",
      "source": {
        "issue": {
          "id": 1203525439,
          "node_id": "PR_kwDOABII5842MDDS",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24845",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24845/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24845/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24845/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/24845",
          "number": 24845,
          "state": "closed",
          "state_reason": null,
          "title": "wallet: return error msg for  \"too-long-mempool-chain\"",
          "body": "Fixes #23144.\r\n\r\nWe currently return a general \"Insufficient funds\" from Coin\r\nSelection when we actually skipped unconfirmed UTXOs that\r\nsurpassed the mempool ancestors limit.\r\n\r\nThis PR make the error clearer by returning:\r\n\"Unconfirmed UTXOs are available, but spending them creates\r\na chain of transactions that will be rejected by the mempool\"\r\n\r\nAlso, added an early return from Coin Selection if the sum of\r\nthe discarded coins decreases the available balance below the\r\ntarget amount.",
          "user": {
            "login": "furszy",
            "id": 5377650,
            "node_id": "MDQ6VXNlcjUzNzc2NTA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/furszy",
            "html_url": "https://github.com/furszy",
            "followers_url": "https://api.github.com/users/furszy/followers",
            "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
            "organizations_url": "https://api.github.com/users/furszy/orgs",
            "repos_url": "https://api.github.com/users/furszy/repos",
            "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/furszy/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            }
          ],
          "assignee": {
            "login": "glozow",
            "id": 25183001,
            "node_id": "MDQ6VXNlcjI1MTgzMDAx",
            "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/glozow",
            "html_url": "https://github.com/glozow",
            "followers_url": "https://api.github.com/users/glozow/followers",
            "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
            "organizations_url": "https://api.github.com/users/glozow/orgs",
            "repos_url": "https://api.github.com/users/glozow/repos",
            "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/glozow/received_events",
            "type": "User",
            "site_admin": false
          },
          "assignees": [
            {
              "login": "glozow",
              "id": 25183001,
              "node_id": "MDQ6VXNlcjI1MTgzMDAx",
              "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/glozow",
              "html_url": "https://github.com/glozow",
              "followers_url": "https://api.github.com/users/glozow/followers",
              "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
              "organizations_url": "https://api.github.com/users/glozow/orgs",
              "repos_url": "https://api.github.com/users/glozow/repos",
              "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/glozow/received_events",
              "type": "User",
              "site_admin": false
            }
          ],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 14,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24845",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/24845",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/24845.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/24845.patch"
          },
          "closed_at": "2023-03-23T15:54:35Z",
          "created_at": "2022-04-13T16:25:15Z",
          "updated_at": "2023-05-27T01:51:56Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDkxMmYxZWQxODExNjFiMDM2NTc3NmNkNDkwYjYzMTM3YWFhZDcwOGE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/912f1ed181161b0365776cd490b63137aaad708a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/912f1ed181161b0365776cd490b63137aaad708a",
      "tree": {
        "sha": "40a554a56263010294a661a6f75159e811b94300",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/40a554a56263010294a661a6f75159e811b94300"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b69fd5eaa99f84b62a49d7c7f48d8cee1227592a",
          "sha": "b69fd5eaa99f84b62a49d7c7f48d8cee1227592a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b69fd5eaa99f84b62a49d7c7f48d8cee1227592a"
        }
      ],
      "message": "wallet: track which coin selection algorithm produced a SelectionResult",
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2022-04-14T16:40:36Z"
      },
      "author": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2022-03-21T18:19:10Z"
      },
      "sha": "912f1ed181161b0365776cd490b63137aaad708a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDE1YjU4MzgzZDAwMjljNGFlN2I0ODdlMDNjZDQ1MWUxNTgwZWI5MWQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/15b58383d0029c4ae7b487e03cd451e1580eb91d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/15b58383d0029c4ae7b487e03cd451e1580eb91d",
      "tree": {
        "sha": "bcfefde78bc32a9034b5b476d6efc6e8100ab04c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/bcfefde78bc32a9034b5b476d6efc6e8100ab04c"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/912f1ed181161b0365776cd490b63137aaad708a",
          "sha": "912f1ed181161b0365776cd490b63137aaad708a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/912f1ed181161b0365776cd490b63137aaad708a"
        }
      ],
      "message": "wallet: compute waste for SelectionResults of preset inputs\n\nWhen we use only manually specified inputs, we should still calculate\nthe waste so that if anything later on calls GetWaste (in order to log\nit), there won't be an error.",
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2022-04-14T16:40:36Z"
      },
      "author": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2022-03-23T17:17:07Z"
      },
      "sha": "15b58383d0029c4ae7b487e03cd451e1580eb91d"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDhlM2YzOWU0ZmEyZDhjNjNiYzY5N2M5ZWJkMzAzOTY1ZmNjY2VhNTU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8e3f39e4fa2d8c63bc697c9ebd303965fcccea55",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8e3f39e4fa2d8c63bc697c9ebd303965fcccea55",
      "tree": {
        "sha": "fc5204d2444e414dc7e3389af23910804c15068b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/fc5204d2444e414dc7e3389af23910804c15068b"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/15b58383d0029c4ae7b487e03cd451e1580eb91d",
          "sha": "15b58383d0029c4ae7b487e03cd451e1580eb91d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/15b58383d0029c4ae7b487e03cd451e1580eb91d"
        }
      ],
      "message": "wallet: Add some tracepoints for coin selection",
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2022-04-14T17:41:36Z"
      },
      "author": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2022-03-21T18:33:29Z"
      },
      "sha": "8e3f39e4fa2d8c63bc697c9ebd303965fcccea55"
    },
    {
      "event": "commented",
      "id": 1099517472,
      "node_id": "IC_kwDOABII585BiU4g",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1099517472",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-14T18:38:02Z",
      "updated_at": "2022-04-14T18:38:02Z",
      "author_association": "MEMBER",
      "body": "I've added docs and a test.",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#issuecomment-1099517472",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24644"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6436555669,
      "node_id": "HRFPE_lADOABII585GLJcVzwAAAAF_pguV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6436555669",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-14T18:38:26Z"
    },
    {
      "event": "commented",
      "id": 1099532283,
      "node_id": "IC_kwDOABII585BiYf7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1099532283",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-14T18:59:07Z",
      "updated_at": "2022-04-14T18:59:07Z",
      "author_association": "MEMBER",
      "body": "Concept ACK, thanks for adding tracepoints. I'll try to have a more detailed look at this soon.",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#issuecomment-1099532283",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24644"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-17T04:48:51Z",
      "updated_at": "2022-04-17T04:48:51Z",
      "source": {
        "issue": {
          "id": 1206247497,
          "node_id": "PR_kwDOABII5842Uktn",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24897/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24897/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24897/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/24897",
          "number": 24897,
          "state": "closed",
          "state_reason": null,
          "title": "[Draft / POC] Silent Payments",
          "body": "This PR proposes an early version of [Silent Payment](https://gist.github.com/RubenSomsen/c43b79517e7cb701ebf77eec6dbb46b8) (author:@RubenSomsen).\r\nIn this scheme, the recipient generates a public address, but the sender tweaks the address and the recipient detects the payment by verifying all transactions on the blockchain. An example use case would be private donations.\r\n\r\nThe purpose of this PR is not a final version, but to start the discussion and get benchmarks based on a real implementation.\r\n\r\nThis version is built on top of [#994](https://github.com/bitcoin-core/secp256k1/pull/994) (bitcoin-core/secp256k1) for x-only ECDH support and #23480 (bitcoin/bitcoin) for `rawtr()`. Each new silent transaction detected is stored in wallet as a `rawtr()` descriptor. \r\n\r\nIn this implementation, the sender can tweak the recipient address by passing the `silent_payment` option to send RPC. The transaction output will be different from the address entered.\r\n\r\nFor example `./src/bitcoin-cli -regtest -named send outputs=\"[{\\\"bcrt1pwlh5xuyrpgfunwyww8cfu78yfs2yqyevl7yturavahh5kgxwdd2q5hzgfu\\\": 1.1}]\" fee_rate=1 options=\"{ \\\"silent_payment\\\": true}\"`.\r\n\r\nwill generate `vout` with completely unrelated outputs:\r\n\r\n```\r\n\"vout\": [\r\n    {\r\n      \"value\": 1.10000000,\r\n      \"n\": 0,\r\n      \"scriptPubKey\": {\r\n        \"desc\": \"rawtr(65b19890c5ca40edb816d26f5f48cd9f3ed51121613b1c2405adc1a6dbbc824a)#8myx9tcu\",\r\n        \"address\": \"bcrt1pvkce3yx9efqwmwqk6fh47jxdnuld2yfpvya3cfq94hq6dkausf9qrfjkgz\",\r\n\r\n      }\r\n    },\r\n    {\r\n      \"value\": 2.02499835,\r\n      \"n\": 1,\r\n      \"scriptPubKey\": {\r\n        \"desc\": \"rawtr(c45cb3d500bbf8f0c8841e8e011b008781d826c16ee348edb822c0f97419bc4d)#26hcce63\",\r\n        \"address\": \"bcrt1pc3wt84gqh0u0pjyyr68qzxcqs7qasfkpdm353mdcytq0jaqeh3xsuvlykg\",\r\n      }\r\n    }\r\n  ]\r\n```\r\n\r\nAny wallet, as long as it has access to private keys, can send silent payments. Thus, this excludes watch-only wallets or wallets with external signers .\r\n\r\nBut the recipient's wallet needs a new flag called `SILENT_PAYMENT`. This flag allows an additional scan that verifies that the wallet keys match the silent payment scheme. When it detects a silent payment that belongs to the wallet, it is stored in a `rawtr()` descriptor.\r\n\r\n`./src/bitcoin-cli -regtest -named createwallet wallet_name=\"recipient\" silent_payment=true`\r\n\r\nTherefore, scanning each address for each transaction is potentially prohibitive overhead, so the node can be initialized with `keypool=1` or a descriptor with range [0,1] can be imported into a blank wallet. Until there is more benchmark data, it is the safest option. The proposal recommends one static address.\r\n\r\nI've been running some silent payments on signet using wallets with default keypool and default range, I haven't noticed any relevant performance drops on the signet node.\r\nApparently this implementation is working as expected but I can't guarantee that the scheme is implemented correctly or safely, so I'm opening this PR for reviews, modifications and improvements.\r\n\r\nThere is a new functional test (`test/functional/wallet_silentpayment.py`) that can help to better understand the implementation.",
          "user": {
            "login": "w0xlt",
            "id": 94266259,
            "node_id": "U_kgDOBZ5jkw",
            "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/w0xlt",
            "html_url": "https://github.com/w0xlt",
            "followers_url": "https://api.github.com/users/w0xlt/followers",
            "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
            "organizations_url": "https://api.github.com/users/w0xlt/orgs",
            "repos_url": "https://api.github.com/users/w0xlt/repos",
            "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/w0xlt/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            },
            {
              "id": 61889416,
              "node_id": "MDU6TGFiZWw2MTg4OTQxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Build%20system",
              "name": "Build system",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            },
            {
              "id": 159815356,
              "node_id": "MDU6TGFiZWwxNTk4MTUzNTY=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Upstream",
              "name": "Upstream",
              "color": "bfd4f2",
              "default": false
            },
            {
              "id": 241832923,
              "node_id": "MDU6TGFiZWwyNDE4MzI5MjM=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Utils/log/libs",
              "name": "Utils/log/libs",
              "description": "",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            },
            {
              "id": 1482182044,
              "node_id": "MDU6TGFiZWwxNDgyMTgyMDQ0",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Descriptors",
              "name": "Descriptors",
              "description": "",
              "color": "e9f76c",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 86,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/24897",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/24897.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/24897.patch"
          },
          "closed_at": "2023-06-05T13:18:14Z",
          "created_at": "2022-04-17T00:37:23Z",
          "updated_at": "2023-06-27T11:03:39Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1104985129,
      "node_id": "IC_kwDOABII585B3Lwp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1104985129",
      "actor": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-21T09:55:02Z",
      "updated_at": "2022-04-21T16:28:11Z",
      "author_association": "CONTRIBUTOR",
      "body": "The tracepoint part looks good. Left a few comments.\r\n\r\nI also wrote a quick and dirty bpftrace script to test the documentation. In case that's helpful to anyone:\r\n\r\n<details>\r\n<summary>\r\nbpftrace script\r\n</summary>\r\n\r\n``` bpftrace\r\n#!/usr/bin/env bpftrace\r\n\r\nBEGIN\r\n{\r\n  printf(\"Logging coin selection\\n\")\r\n}\r\n\r\nusdt:./src/bitcoind:coin_selection:selected_coins\r\n{\r\n  $name = str(arg0);\r\n  $algo = str(arg1);\r\n  $target = (int64) arg2;\r\n  $waste = (int64) arg3;\r\n  $inputsum = (int64) arg4;\r\n  printf(\"selected_coins: wallet=%s, algo=%s, target=%ld, waste=%ld, inputsum=%ld\\n\", $name, $algo, $target, $waste, $inputsum);\r\n}\r\n\r\nusdt:./src/bitcoind:coin_selection:normal_create_tx_internal\r\n{\r\n  $name = str(arg0);\r\n  $success = arg1;\r\n  $fee = (int64) arg2;\r\n  $change_pos = (int32) arg3;\r\n  printf(\"normal_create_tx_internal: wallet=%s, success=%d, fee=%d, change_pos=%d\\n\", $name, $success, $fee, $change_pos);\r\n}\r\n\r\nusdt:./src/bitcoind:coin_selection:attempting_aps_create_tx\r\n{\r\n  $name = str(arg0);\r\n  printf(\"attempting_aps_create_tx: wallet=%s\\n\", $name);\r\n}\r\n\r\nusdt:./src/bitcoind:coin_selection:aps_create_tx_internal\r\n{\r\n  $name = str(arg0);\r\n  $use_aps = arg1;\r\n  $success = arg2;\r\n  $fee = (int64) arg3;\r\n  $change_pos = (int32) arg4;\r\n  printf(\"aps_create_tx_internal: wallet=%s, use_aps=%d, success=%d, fee=%ld, change_pos=%d\\n\", $name, $use_aps, $success, $fee, $change_pos);\r\n}\r\n```\r\n</details>\r\n\r\nRunning e.g. the `wallet_taproot.py` functional test logs negative values for some fields (`target`, `inputsum`) where I didn't expect them. I'm not sure what's up with that. \r\n\r\n```\r\nselected_coins: wallet=rpc_online, algo=bnb, target=-1436883448, waste=118372, inputsum=-1436883448\r\naps_create_tx_internal: wallet=rpc_online, use_aps=1, success=1, fee=131993, change_pos=-1\r\nselected_coins: wallet=psbt_online, algo=bnb, target=-2146144343, waste=95374, inputsum=-2146144343\r\nnormal_create_tx_internal: wallet=psbt_online, success=1, fee=107994, change_pos=-1\r\nattempting_aps_create_tx: wallet=psbt_online\r\nselected_coins: wallet=psbt_online, algo=bnb, target=-2146144343, waste=95374, inputsum=-2146144343\r\naps_create_tx_internal: wallet=psbt_online, use_aps=1, success=1, fee=107994, change_pos=-1\r\n```",
      "user": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#issuecomment-1104985129",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24644"
    },
    {
      "event": "reviewed",
      "id": 948286342,
      "node_id": "PRR_kwDOABII5844hbOG",
      "url": null,
      "actor": null,
      "commit_id": "421c9319767ab1fa75833a53151984633aa666e7",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "",
      "user": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#pullrequestreview-948286342",
      "submitted_at": "2022-04-21T09:55:38Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24644"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-21T12:10:33Z",
      "updated_at": "2022-04-21T12:10:33Z",
      "source": {
        "issue": {
          "id": 1210825131,
          "node_id": "PR_kwDOABII5842jGnr",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24935",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24935/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24935/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24935/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/24935",
          "number": 24935,
          "state": "closed",
          "state_reason": null,
          "title": "mempool: Add usdt event tracepoints and eBPF logging tool.",
          "body": "### **Added usdt tracepoints to mempool additions and eviction functions**\r\nUsing the bitcoin usdt tracepoints api, two mempool event tracepoints were added to `txmempool.cpp`. These tracepoints are active upon tx additions and evictions to the mempool. This is useful for logging the mempool contents for analysis. Better fee estimation models and custom TXID lookup scripts are some of the first uses that come to mind, \r\n\r\nThe included bpftrace script logs all mempool additions and removals in a .csv format that can be viewed in realtime or piped to a file for analysis. \r\n\r\n**NOTES** [Ref.](https://github.com/bitcoin/bitcoin/blob/master/doc/tracing.md)\r\n - code included follows the USDT guidelines (no parsing or serialization) so near 0 effect on core performance. \r\n - bpftace script `log_mempool_activity.bt` is included and generates a .csv log output of all additions and evictions within the mempool along with the reason, size, time, txid, fee, and value of the TX\r\n - Documentation has been updated to reflect the new `mempool` context\r\n - Tracepoint API is very reliable in testing, _Logged mempool TXs for over 24 hours and the csv output was parsed with 0 errors._\r\n - No env vars change needed to run bpftrace script\r\n \r\n**IMPOVEMENTS** [Ref,](https://github.com/bitcoin/bitcoin/tree/master/contrib/tracing#log_utxosbt)\r\n- The included bpftrace script improves on all existing examples by using a single `printf` call. This enables the script to log 100s of mempool evictions without dropping events and destroying the output. This means that unlike the current `log_utxos.bt` whos output is corrupted while using bpftrace default parameters. The include bpftrace script uses a variety of methods to improve performance and can be ran successfully with default bpftrace environment variables. \r\n",
          "user": {
            "login": "russeree",
            "id": 3104223,
            "node_id": "MDQ6VXNlcjMxMDQyMjM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3104223?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/russeree",
            "html_url": "https://github.com/russeree",
            "followers_url": "https://api.github.com/users/russeree/followers",
            "following_url": "https://api.github.com/users/russeree/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/russeree/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/russeree/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/russeree/subscriptions",
            "organizations_url": "https://api.github.com/users/russeree/orgs",
            "repos_url": "https://api.github.com/users/russeree/repos",
            "events_url": "https://api.github.com/users/russeree/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/russeree/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 164208572,
              "node_id": "MDU6TGFiZWwxNjQyMDg1NzI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mempool",
              "name": "Mempool",
              "color": "fef2c0",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 4,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24935",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/24935",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/24935.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/24935.patch"
          },
          "closed_at": "2022-08-12T21:25:40Z",
          "created_at": "2022-04-21T10:22:03Z",
          "updated_at": "2022-08-12T22:12:36Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGNhMDJiNjhlOGE3MTQ3ZjgwY2JlODRiMDc0MjkwOGIwYjBmYWEwNGQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ca02b68e8a7147f80cbe84b0742908b0b0faa04d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ca02b68e8a7147f80cbe84b0742908b0b0faa04d",
      "tree": {
        "sha": "fce181ff6930d5a4e68c420a89752f64e0d72411",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/fce181ff6930d5a4e68c420a89752f64e0d72411"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8e3f39e4fa2d8c63bc697c9ebd303965fcccea55",
          "sha": "8e3f39e4fa2d8c63bc697c9ebd303965fcccea55",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8e3f39e4fa2d8c63bc697c9ebd303965fcccea55"
        }
      ],
      "message": "doc: document coin selection tracepoints",
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2022-04-21T15:11:02Z"
      },
      "author": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2022-04-14T16:53:17Z"
      },
      "sha": "ca02b68e8a7147f80cbe84b0742908b0b0faa04d"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGFiNWFmOWNhNzI5MzIzOWZmYzI0ZWE3ZTIzMTU5YjgxODQ1NDNmOTQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ab5af9ca7293239ffc24ea7e23159b8184543f94",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ab5af9ca7293239ffc24ea7e23159b8184543f94",
      "tree": {
        "sha": "b20bfaef2ee3fc398d2cce44cf67ad4884c4c240",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b20bfaef2ee3fc398d2cce44cf67ad4884c4c240"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ca02b68e8a7147f80cbe84b0742908b0b0faa04d",
          "sha": "ca02b68e8a7147f80cbe84b0742908b0b0faa04d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ca02b68e8a7147f80cbe84b0742908b0b0faa04d"
        }
      ],
      "message": "test: Add test for coinselection tracepoints",
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2022-04-21T15:17:00Z"
      },
      "author": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2022-04-14T17:41:18Z"
      },
      "sha": "ab5af9ca7293239ffc24ea7e23159b8184543f94"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6471982083,
      "node_id": "HRFPE_lADOABII585GLJcVzwAAAAGBwpwD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6471982083",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-21T15:17:15Z"
    },
    {
      "event": "commented",
      "id": 1105410940,
      "node_id": "IC_kwDOABII585B4zt8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1105410940",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-21T15:56:36Z",
      "updated_at": "2022-04-21T15:56:36Z",
      "author_association": "MEMBER",
      "body": "> Running e.g. the `wallet_taproot.py` functional test logs negative values for some fields (`target`, `inputsum`) where I didn't expect them. I'm not sure what's up with that.\r\n\r\nYour script uses `%d` instead of `%ld`. `%d` is for 32-bit ints, whereas `%ld` is for 64 bit.",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#issuecomment-1105410940",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24644"
    },
    {
      "event": "commented",
      "id": 1105434230,
      "node_id": "IC_kwDOABII585B45Z2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1105434230",
      "actor": {
        "login": "jb55",
        "id": 45598,
        "node_id": "MDQ6VXNlcjQ1NTk4",
        "avatar_url": "https://avatars.githubusercontent.com/u/45598?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jb55",
        "html_url": "https://github.com/jb55",
        "followers_url": "https://api.github.com/users/jb55/followers",
        "following_url": "https://api.github.com/users/jb55/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jb55/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jb55/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jb55/subscriptions",
        "organizations_url": "https://api.github.com/users/jb55/orgs",
        "repos_url": "https://api.github.com/users/jb55/repos",
        "events_url": "https://api.github.com/users/jb55/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jb55/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-21T16:18:35Z",
      "updated_at": "2022-04-21T16:18:35Z",
      "author_association": "CONTRIBUTOR",
      "body": "crACK ab5af9ca7293239ffc24ea7e23159b8184543f94\n",
      "user": {
        "login": "jb55",
        "id": 45598,
        "node_id": "MDQ6VXNlcjQ1NTk4",
        "avatar_url": "https://avatars.githubusercontent.com/u/45598?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jb55",
        "html_url": "https://github.com/jb55",
        "followers_url": "https://api.github.com/users/jb55/followers",
        "following_url": "https://api.github.com/users/jb55/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jb55/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jb55/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jb55/subscriptions",
        "organizations_url": "https://api.github.com/users/jb55/orgs",
        "repos_url": "https://api.github.com/users/jb55/repos",
        "events_url": "https://api.github.com/users/jb55/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jb55/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#issuecomment-1105434230",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24644"
    },
    {
      "event": "reviewed",
      "id": 948904882,
      "node_id": "PRR_kwDOABII5844jyOy",
      "url": null,
      "actor": null,
      "commit_id": "ab5af9ca7293239ffc24ea7e23159b8184543f94",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK ab5af9ca7293239ffc24ea7e23159b8184543f94. Code reviewed, ran the `interface_usdt_coinselection.py` test, and tested with the above bpftrace script (updated `%d` -> `%ld` where necessary, ty achow101).",
      "user": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#pullrequestreview-948904882",
      "submitted_at": "2022-04-21T16:34:22Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24644"
    },
    {
      "event": "reviewed",
      "id": 953267748,
      "node_id": "PRR_kwDOABII58440bYk",
      "url": null,
      "actor": null,
      "commit_id": "ab5af9ca7293239ffc24ea7e23159b8184543f94",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "crACK https://github.com/bitcoin/bitcoin/pull/24644/commits/ab5af9ca7293239ffc24ea7e23159b8184543f94\r\n\r\nlooks good! just had one nit about commit structure. also compiled and ran the functional test without any issues",
      "user": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#pullrequestreview-953267748",
      "submitted_at": "2022-04-26T12:11:51Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24644"
    },
    {
      "event": "review_requested",
      "id": 6500090584,
      "node_id": "RRE_lADOABII585GLJcVzwAAAAGDb4LY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6500090584",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-26T15:53:06Z",
      "requested_reviewer": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "commented",
      "id": 1110093808,
      "node_id": "IC_kwDOABII585CKq_w",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1110093808",
      "actor": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-26T18:00:53Z",
      "updated_at": "2022-04-26T18:00:53Z",
      "author_association": "CONTRIBUTOR",
      "body": "tACK https://github.com/bitcoin/bitcoin/commit/ab5af9ca7293239ffc24ea7e23159b8184543f94\r\n\r\nwasn't paying attention earlier and it was actually skipping the USDT functional tests, not running them :facepalm: . \r\n\r\nI got tracepoints working by running `sudo apt install systemtap-sdt-dev` (per [doc/build-unix.md](../tree/master/doc/build-unix.md)) and building `bcc` from source (https://github.com/iovisor/bcc/blob/master/INSTALL.md#ubuntu---source)\r\n\r\neverything works as expected. i also noticed `test/functional/wallet_send.py` is failing in the CI, but i the test locally with no issues and then re-ran the whole test suite, so perhaps just a transient failure due to a timeout?",
      "user": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#issuecomment-1110093808",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24644"
    },
    {
      "event": "merged",
      "id": 6501037682,
      "node_id": "ME_lADOABII585GLJcVzwAAAAGDffZy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6501037682",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "260ede1d998b7d3af0b5026c38612ffdf55473c2",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/260ede1d998b7d3af0b5026c38612ffdf55473c2",
      "created_at": "2022-04-26T18:16:54Z"
    },
    {
      "event": "closed",
      "id": 6501037694,
      "node_id": "CE_lADOABII585GLJcVzwAAAAGDffZ-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6501037694",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-26T18:16:54Z"
    },
    {
      "event": "reviewed",
      "id": 955492634,
      "node_id": "PRR_kwDOABII584486ka",
      "url": null,
      "actor": null,
      "commit_id": "ab5af9ca7293239ffc24ea7e23159b8184543f94",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "post-merged tACK https://github.com/bitcoin/bitcoin/pull/24644/commits/ab5af9ca7293239ffc24ea7e23159b8184543f94\r\nFunctional test ran successfully on Ubuntu 21.10 and bcc (master version).",
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#pullrequestreview-955492634",
      "submitted_at": "2022-04-27T20:20:44Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24644"
    },
    {
      "event": "commented",
      "id": 1111974325,
      "node_id": "IC_kwDOABII585CR2G1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1111974325",
      "actor": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-28T09:31:54Z",
      "updated_at": "2022-04-28T09:31:54Z",
      "author_association": "CONTRIBUTOR",
      "body": "ref: https://github.com/bitcoin/bitcoin/pull/25003 tracing: fix coin_selection:aps_create_tx_internal calling logic",
      "user": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#issuecomment-1111974325",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24644"
    },
    {
      "event": "subscribed",
      "id": 6525975098,
      "node_id": "SE_lADOABII585GLJcVzwAAAAGE-no6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6525975098",
      "actor": {
        "login": "edmont87",
        "id": 64522351,
        "node_id": "MDQ6VXNlcjY0NTIyMzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/64522351?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/edmont87",
        "html_url": "https://github.com/edmont87",
        "followers_url": "https://api.github.com/users/edmont87/followers",
        "following_url": "https://api.github.com/users/edmont87/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/edmont87/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/edmont87/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/edmont87/subscriptions",
        "organizations_url": "https://api.github.com/users/edmont87/orgs",
        "repos_url": "https://api.github.com/users/edmont87/repos",
        "events_url": "https://api.github.com/users/edmont87/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/edmont87/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-29T19:58:39Z"
    },
    {
      "event": "commented",
      "id": 1113949161,
      "node_id": "IC_kwDOABII585CZYPp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1113949161",
      "actor": {
        "login": "russeree",
        "id": 3104223,
        "node_id": "MDQ6VXNlcjMxMDQyMjM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3104223?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/russeree",
        "html_url": "https://github.com/russeree",
        "followers_url": "https://api.github.com/users/russeree/followers",
        "following_url": "https://api.github.com/users/russeree/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/russeree/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/russeree/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/russeree/subscriptions",
        "organizations_url": "https://api.github.com/users/russeree/orgs",
        "repos_url": "https://api.github.com/users/russeree/repos",
        "events_url": "https://api.github.com/users/russeree/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/russeree/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-30T08:32:55Z",
      "updated_at": "2022-04-30T08:32:55Z",
      "author_association": "CONTRIBUTOR",
      "body": "Tests will fail on RHEL linux when default yum dist. of bcc is used. To remedy bcc needs to be build from bcc git master. \r\n\r\nError output\r\nhttps://gist.github.com/russeree/39a3f13aababe44ba8bac52224626d0b\r\n\r\nAfter building and running the current master of bcc https://gist.github.com/russeree/888c52a85e9bcd69c758ff0bc91f3d13\r\n\r\nThis issue only presents on RHEL (Fedora, Centos, Redhat) Ubuntu seemed to not be affected by this using apt installed versions of bcc. \r\n\r\n",
      "user": {
        "login": "russeree",
        "id": 3104223,
        "node_id": "MDQ6VXNlcjMxMDQyMjM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3104223?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/russeree",
        "html_url": "https://github.com/russeree",
        "followers_url": "https://api.github.com/users/russeree/followers",
        "following_url": "https://api.github.com/users/russeree/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/russeree/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/russeree/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/russeree/subscriptions",
        "organizations_url": "https://api.github.com/users/russeree/orgs",
        "repos_url": "https://api.github.com/users/russeree/repos",
        "events_url": "https://api.github.com/users/russeree/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/russeree/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#issuecomment-1113949161",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24644"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-10T20:36:44Z",
      "updated_at": "2022-05-10T20:36:44Z",
      "source": {
        "issue": {
          "id": 1217464291,
          "node_id": "PR_kwDOABII58424Xp6",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25003",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25003/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25003/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25003/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/25003",
          "number": 25003,
          "state": "closed",
          "state_reason": null,
          "title": "tracing: fix `coin_selection:aps_create_tx_internal` calling logic",
          "body": "According to the documentation, the tracepoint `coin_selection:aps_create_tx_internal` \"Is called when the second `CreateTransactionInternal` with Avoid Partial Spends enabled completes.\"\r\n\r\nCurrently it is only called if the second call to `CreateTransactionInternal` succeeds, i.e. the third parameter is always `true` and we don't get notified in the case that it fails. This PR fixes this by moving the tracepoint call and the `use_aps` boolean variable outside the if body.\r\n",
          "user": {
            "login": "theStack",
            "id": 91535,
            "node_id": "MDQ6VXNlcjkxNTM1",
            "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/theStack",
            "html_url": "https://github.com/theStack",
            "followers_url": "https://api.github.com/users/theStack/followers",
            "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
            "organizations_url": "https://api.github.com/users/theStack/orgs",
            "repos_url": "https://api.github.com/users/theStack/repos",
            "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/theStack/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "comments": 14,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25003",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/25003",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/25003.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/25003.patch"
          },
          "closed_at": "2022-05-26T17:50:16Z",
          "created_at": "2022-04-27T14:44:25Z",
          "updated_at": "2023-05-26T10:03:47Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "locked",
      "id": 9132008675,
      "node_id": "LOE_lADOABII585GLJcVzwAAAAIgT2Tj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9132008675",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-30T09:59:30Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/833021087",
      "pull_request_review_id": 918428306,
      "id": 833021087,
      "node_id": "PRRC_kwDOABII584xpuSf",
      "diff_hunk": "@@ -200,21 +200,32 @@ struct OutputGroup\n  */\n [[nodiscard]] CAmount GetSelectionWaste(const std::set<CInputCoin>& inputs, CAmount change_cost, CAmount target, bool use_effective_value = true);\n \n+enum SelectionAlgorithm : uint8_t\n+{\n+    BNB = 0,\n+    KNAPSACK = 1,\n+    SRD = 2,\n+    MANUAL = 3,\n+};\n+",
      "path": "src/wallet/coinselection.h",
      "position": null,
      "original_position": 11,
      "commit_id": "ab5af9ca7293239ffc24ea7e23159b8184543f94",
      "original_commit_id": "4fed26af961a87a976d537e496f38b72e1a6c5e8",
      "in_reply_to_id": null,
      "user": {
        "login": "vincenzopalazzo",
        "id": 17150045,
        "node_id": "MDQ6VXNlcjE3MTUwMDQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/17150045?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vincenzopalazzo",
        "html_url": "https://github.com/vincenzopalazzo",
        "followers_url": "https://api.github.com/users/vincenzopalazzo/followers",
        "following_url": "https://api.github.com/users/vincenzopalazzo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vincenzopalazzo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vincenzopalazzo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vincenzopalazzo/subscriptions",
        "organizations_url": "https://api.github.com/users/vincenzopalazzo/orgs",
        "repos_url": "https://api.github.com/users/vincenzopalazzo/repos",
        "events_url": "https://api.github.com/users/vincenzopalazzo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vincenzopalazzo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "There is any motivation to use the plain `enum` here and not the `enum class`?\r\n\r\nMaybe I'm missing some things but usually, the enum class is preferred in C++.",
      "created_at": "2022-03-23T09:09:49Z",
      "updated_at": "2022-03-23T09:09:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#discussion_r833021087",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/833021087"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24644"
        }
      },
      "start_line": null,
      "original_start_line": 203,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 249,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/833528856",
      "pull_request_review_id": 919154983,
      "id": 833528856,
      "node_id": "PRRC_kwDOABII584xrqQY",
      "diff_hunk": "@@ -200,21 +200,32 @@ struct OutputGroup\n  */\n [[nodiscard]] CAmount GetSelectionWaste(const std::set<CInputCoin>& inputs, CAmount change_cost, CAmount target, bool use_effective_value = true);\n \n+enum SelectionAlgorithm : uint8_t\n+{\n+    BNB = 0,\n+    KNAPSACK = 1,\n+    SRD = 2,\n+    MANUAL = 3,\n+};\n+",
      "path": "src/wallet/coinselection.h",
      "position": null,
      "original_position": 11,
      "commit_id": "ab5af9ca7293239ffc24ea7e23159b8184543f94",
      "original_commit_id": "4fed26af961a87a976d537e496f38b72e1a6c5e8",
      "in_reply_to_id": 833021087,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2022-03-23T17:18:16Z",
      "updated_at": "2022-03-23T17:18:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#discussion_r833528856",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/833528856"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24644"
        }
      },
      "start_line": null,
      "original_start_line": 203,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 249,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854949055",
      "pull_request_review_id": 948286342,
      "id": 854949055,
      "node_id": "PRRC_kwDOABII584y9Xy_",
      "diff_hunk": "@@ -168,6 +168,58 @@ Arguments passed:\n 4. Value of the coin as `int64`\n 5. If the coin is a coinbase as `bool`\n \n+### Context `coin_selection`\n+\n+#### Tracepoint `coin_selection:selected_coins`\n+\n+Is called when `SelectCoins` completes.\n+\n+Arguments passed:\n+1. Wallet name as `pointer to C-style string`\n+2. Coin selection algorithm name as `pointer to C-style string`\n+3. Selection target value as `int64`\n+4. Calculated waste metric of the solution as `int64`\n+5. Total value of the selected inputs as `int64`\n+\n+#### Tracepoint `coin_selection:normal_create_tx_internal`\n+\n+Is called when the first `CreateTransactionInternal` completes.\n+\n+Arguments passed:\n+1. Wallet name as `pointer to C-style string`\n+2. Whether `CreateTransactionInternal` succeeded as `bool`\n+3. The expected transaction fee as an `int64`\n+4. The position of the change output as an `int32`\n+\n+#### Tracepoint `coin_selection:attempting_aps_create_tx`\n+\n+Is called when `CreateTransactionInternal` is called the second time for the optimistic\n+Avoid Partial Spends selection attempt. This is used to determine whether the next\n+tracepoints called are for the Avoid Partial Spends solution, or a different transaction.\n+\n+Arguments passed:\n+1. Wallet name as `pointer to C-style string`\n+\n+#### Tracepoint `coin_selection:aps_create_tx_internal`\n+\n+Is called when the second `CreateTransactionInternal` with Avoid Partial Spends enabled completes.\n+\n+Arguments passed:\n+1. Wallet name as `pointer to C-style string`\n+2. Whether the Avoid Partial Spends solution will be used as `bool`\n+3. Whether `CreateTransactionInternal` succeeded as` bool`\n+4. The expected transaction fee as an `int64`\n+5. The position of the change output as an `int32`\n+\n+#### Tracepoint `coin_selection:attempting_aps_create_tx`\n+\n+Is called when `CreateTransactionInternal` is called the second time for the optimistic\n+Avoid Partial Spends selection attempt. This is used to determine whether the next\n+tracepoints called are for the Avoid Partial Spends solution, or a different transaction.\n+\n+Arguments passed:\n+1. Wallet name as `pointer to C-style string`",
      "path": "doc/tracing.md",
      "position": null,
      "original_position": 54,
      "commit_id": "ab5af9ca7293239ffc24ea7e23159b8184543f94",
      "original_commit_id": "e1aff5c2db24425a007e32da2de8cba3593d10ad",
      "in_reply_to_id": null,
      "user": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "duplicate docs for `coin_selection:attempting_aps_create_tx`",
      "created_at": "2022-04-21T08:57:04Z",
      "updated_at": "2022-04-21T09:55:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#discussion_r854949055",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854949055"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24644"
        }
      },
      "start_line": null,
      "original_start_line": 214,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 221,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854956480",
      "pull_request_review_id": 948286342,
      "id": 854956480,
      "node_id": "PRRC_kwDOABII584y9ZnA",
      "diff_hunk": "@@ -0,0 +1,210 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"  Tests the coin_selection:* tracepoint API interface.\n+     See https://github.com/bitcoin/bitcoin/blob/master/doc/tracing.md#context-coin_selection\n+\"\"\"\n+\n+import ctypes\n+from io import BytesIO",
      "path": "test/functional/interface_usdt_coinselection.py",
      "position": null,
      "original_position": 11,
      "commit_id": "ab5af9ca7293239ffc24ea7e23159b8184543f94",
      "original_commit_id": "421c9319767ab1fa75833a53151984633aa666e7",
      "in_reply_to_id": null,
      "user": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "CI linter complains:\r\n```\r\ntest/functional/interface_usdt_coinselection.py:10:1: F401 'ctypes' imported but unused\r\ntest/functional/interface_usdt_coinselection.py:11:1: F401 'io.BytesIO' imported but unused\r\n```",
      "created_at": "2022-04-21T09:04:47Z",
      "updated_at": "2022-04-21T09:55:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#discussion_r854956480",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854956480"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24644"
        }
      },
      "start_line": null,
      "original_start_line": 10,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 11,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854966780",
      "pull_request_review_id": 948286342,
      "id": 854966780,
      "node_id": "PRRC_kwDOABII584y9cH8",
      "diff_hunk": "@@ -0,0 +1,210 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"  Tests the coin_selection:* tracepoint API interface.\n+     See https://github.com/bitcoin/bitcoin/blob/master/doc/tracing.md#context-coin_selection\n+\"\"\"\n+\n+import ctypes\n+from io import BytesIO\n+# Test will be skipped if we don't have bcc installed\n+try:\n+    from bcc import BPF, USDT # type: ignore[import]\n+except ImportError:\n+    pass\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_greater_than,\n+    assert_raises_rpc_error,\n+)\n+\n+coinselection_tracepoints_program = \"\"\"\n+#include <uapi/linux/ptrace.h>\n+\n+#define WALLET_NAME_LENGTH 16\n+#define ALGO_NAME_LENGTH 16\n+\n+struct event_data\n+{\n+    u8 type;\n+    char wallet_name[WALLET_NAME_LENGTH];\n+\n+    // selected coins event\n+    char algo[ALGO_NAME_LENGTH];\n+    s64 target;\n+    s64 waste;\n+    s64 selected_value;\n+\n+    // create tx event\n+    u8 success;\n+    s64 fee;\n+    s32 change_pos;\n+\n+    // aps create tx event\n+    u8 use_aps;\n+};\n+\n+BPF_QUEUE(coin_selection_events, struct event_data, 1024);\n+\n+int trace_selected_coins(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 1;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    bpf_usdt_readarg_p(2, ctx, &data.algo, ALGO_NAME_LENGTH);\n+    bpf_usdt_readarg(3, ctx, &data.target);\n+    bpf_usdt_readarg(4, ctx, &data.waste);\n+    bpf_usdt_readarg(5, ctx, &data.selected_value);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\n+int trace_normal_create_tx(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 2;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    bpf_usdt_readarg(2, ctx, &data.success);\n+    bpf_usdt_readarg(3, ctx, &data.fee);\n+    bpf_usdt_readarg(4, ctx, &data.change_pos);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\n+int trace_attempt_aps(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 3;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\n+int trace_aps_create_tx(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 4;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    bpf_usdt_readarg(2, ctx, &data.use_aps);\n+    bpf_usdt_readarg(3, ctx, &data.success);\n+    bpf_usdt_readarg(4, ctx, &data.fee);\n+    bpf_usdt_readarg(5, ctx, &data.change_pos);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\"\"\"\n+\n+\n+class CoinSelectionTracepointTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_platform_not_linux()\n+        self.skip_if_no_bitcoind_tracepoints()\n+        self.skip_if_no_python_bcc()\n+        self.skip_if_no_bpf_permissions()\n+        self.skip_if_no_wallet()\n+\n+    def get_tracepoints(self, expected_types):\n+        events = []\n+        try:\n+            for i in range(0, 6):\n+                event = self.bpf[\"coin_selection_events\"].pop()\n+                assert_equal(event.wallet_name.decode(), self.default_wallet_name)\n+                assert_equal(event.type, expected_types[i])\n+                events.append(event)\n+            else:\n+                # If the loop exits successfully instead of throwing a KeyError, then we have had\n+                # more events than expected. There should be no more than 5 events.\n+                assert False\n+        except KeyError:\n+            assert_equal(len(events), len(expected_types))\n+            return events",
      "path": "test/functional/interface_usdt_coinselection.py",
      "position": null,
      "original_position": 127,
      "commit_id": "ab5af9ca7293239ffc24ea7e23159b8184543f94",
      "original_commit_id": "421c9319767ab1fa75833a53151984633aa666e7",
      "in_reply_to_id": null,
      "user": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I found this to be unclear, probably because I was unfamiliar with Python's `for/else`. If I understand correctly, you want to check that exactly `len(expected_types)` tracepoints were triggered? \r\n\r\n```suggestion\r\n        try:\r\n            for i in range(0, len(expected_types) + 1):\r\n                event = self.bpf[\"coin_selection_events\"].pop()\r\n                assert_equal(event.wallet_name.decode(), self.default_wallet_name)\r\n                assert_equal(event.type, expected_types[i])\r\n                events.append(event)\r\n            else:\r\n                # If the loop exits successfully instead of throwing a KeyError, then we have had\r\n                # more events than expected. There should be no more than `len(expected_types)` events.\r\n                assert False\r\n        except KeyError:\r\n            assert_equal(len(events), len(expected_types))\r\n            return events\r\n```",
      "created_at": "2022-04-21T09:15:39Z",
      "updated_at": "2022-04-21T09:55:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#discussion_r854966780",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854966780"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24644"
        }
      },
      "start_line": null,
      "original_start_line": 115,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 125,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854970298",
      "pull_request_review_id": 948286342,
      "id": 854970298,
      "node_id": "PRRC_kwDOABII584y9c-6",
      "diff_hunk": "@@ -0,0 +1,210 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"  Tests the coin_selection:* tracepoint API interface.\n+     See https://github.com/bitcoin/bitcoin/blob/master/doc/tracing.md#context-coin_selection\n+\"\"\"\n+\n+import ctypes\n+from io import BytesIO\n+# Test will be skipped if we don't have bcc installed\n+try:\n+    from bcc import BPF, USDT # type: ignore[import]\n+except ImportError:\n+    pass\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_greater_than,\n+    assert_raises_rpc_error,\n+)\n+\n+coinselection_tracepoints_program = \"\"\"\n+#include <uapi/linux/ptrace.h>\n+\n+#define WALLET_NAME_LENGTH 16\n+#define ALGO_NAME_LENGTH 16\n+\n+struct event_data\n+{\n+    u8 type;\n+    char wallet_name[WALLET_NAME_LENGTH];\n+\n+    // selected coins event\n+    char algo[ALGO_NAME_LENGTH];\n+    s64 target;\n+    s64 waste;\n+    s64 selected_value;\n+\n+    // create tx event\n+    u8 success;",
      "path": "test/functional/interface_usdt_coinselection.py",
      "position": null,
      "original_position": 42,
      "commit_id": "ab5af9ca7293239ffc24ea7e23159b8184543f94",
      "original_commit_id": "421c9319767ab1fa75833a53151984633aa666e7",
      "in_reply_to_id": null,
      "user": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n    bool success;\r\n```",
      "created_at": "2022-04-21T09:19:13Z",
      "updated_at": "2022-04-21T09:55:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#discussion_r854970298",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854970298"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24644"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 42,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854970461",
      "pull_request_review_id": 948286342,
      "id": 854970461,
      "node_id": "PRRC_kwDOABII584y9dBd",
      "diff_hunk": "@@ -0,0 +1,210 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"  Tests the coin_selection:* tracepoint API interface.\n+     See https://github.com/bitcoin/bitcoin/blob/master/doc/tracing.md#context-coin_selection\n+\"\"\"\n+\n+import ctypes\n+from io import BytesIO\n+# Test will be skipped if we don't have bcc installed\n+try:\n+    from bcc import BPF, USDT # type: ignore[import]\n+except ImportError:\n+    pass\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_greater_than,\n+    assert_raises_rpc_error,\n+)\n+\n+coinselection_tracepoints_program = \"\"\"\n+#include <uapi/linux/ptrace.h>\n+\n+#define WALLET_NAME_LENGTH 16\n+#define ALGO_NAME_LENGTH 16\n+\n+struct event_data\n+{\n+    u8 type;\n+    char wallet_name[WALLET_NAME_LENGTH];\n+\n+    // selected coins event\n+    char algo[ALGO_NAME_LENGTH];\n+    s64 target;\n+    s64 waste;\n+    s64 selected_value;\n+\n+    // create tx event\n+    u8 success;\n+    s64 fee;\n+    s32 change_pos;\n+\n+    // aps create tx event\n+    u8 use_aps;",
      "path": "test/functional/interface_usdt_coinselection.py",
      "position": null,
      "original_position": 47,
      "commit_id": "ab5af9ca7293239ffc24ea7e23159b8184543f94",
      "original_commit_id": "421c9319767ab1fa75833a53151984633aa666e7",
      "in_reply_to_id": null,
      "user": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n    bool use_aps;\r\n```",
      "created_at": "2022-04-21T09:19:24Z",
      "updated_at": "2022-04-21T09:55:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#discussion_r854970461",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854970461"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24644"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 47,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854971486",
      "pull_request_review_id": 948286342,
      "id": 854971486,
      "node_id": "PRRC_kwDOABII584y9dRe",
      "diff_hunk": "@@ -0,0 +1,210 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"  Tests the coin_selection:* tracepoint API interface.\n+     See https://github.com/bitcoin/bitcoin/blob/master/doc/tracing.md#context-coin_selection\n+\"\"\"\n+\n+import ctypes\n+from io import BytesIO\n+# Test will be skipped if we don't have bcc installed\n+try:\n+    from bcc import BPF, USDT # type: ignore[import]\n+except ImportError:\n+    pass\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_greater_than,\n+    assert_raises_rpc_error,\n+)\n+\n+coinselection_tracepoints_program = \"\"\"\n+#include <uapi/linux/ptrace.h>\n+\n+#define WALLET_NAME_LENGTH 16\n+#define ALGO_NAME_LENGTH 16\n+\n+struct event_data\n+{\n+    u8 type;\n+    char wallet_name[WALLET_NAME_LENGTH];\n+\n+    // selected coins event\n+    char algo[ALGO_NAME_LENGTH];\n+    s64 target;\n+    s64 waste;\n+    s64 selected_value;\n+\n+    // create tx event\n+    u8 success;\n+    s64 fee;\n+    s32 change_pos;\n+\n+    // aps create tx event\n+    u8 use_aps;\n+};\n+\n+BPF_QUEUE(coin_selection_events, struct event_data, 1024);\n+\n+int trace_selected_coins(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 1;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    bpf_usdt_readarg_p(2, ctx, &data.algo, ALGO_NAME_LENGTH);\n+    bpf_usdt_readarg(3, ctx, &data.target);\n+    bpf_usdt_readarg(4, ctx, &data.waste);\n+    bpf_usdt_readarg(5, ctx, &data.selected_value);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\n+int trace_normal_create_tx(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 2;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    bpf_usdt_readarg(2, ctx, &data.success);\n+    bpf_usdt_readarg(3, ctx, &data.fee);\n+    bpf_usdt_readarg(4, ctx, &data.change_pos);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\n+int trace_attempt_aps(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 3;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\n+int trace_aps_create_tx(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 4;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    bpf_usdt_readarg(2, ctx, &data.use_aps);\n+    bpf_usdt_readarg(3, ctx, &data.success);\n+    bpf_usdt_readarg(4, ctx, &data.fee);\n+    bpf_usdt_readarg(5, ctx, &data.change_pos);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\"\"\"\n+\n+\n+class CoinSelectionTracepointTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_platform_not_linux()\n+        self.skip_if_no_bitcoind_tracepoints()\n+        self.skip_if_no_python_bcc()\n+        self.skip_if_no_bpf_permissions()\n+        self.skip_if_no_wallet()\n+\n+    def get_tracepoints(self, expected_types):\n+        events = []\n+        try:\n+            for i in range(0, 6):\n+                event = self.bpf[\"coin_selection_events\"].pop()\n+                assert_equal(event.wallet_name.decode(), self.default_wallet_name)\n+                assert_equal(event.type, expected_types[i])\n+                events.append(event)\n+            else:\n+                # If the loop exits successfully instead of throwing a KeyError, then we have had\n+                # more events than expected. There should be no more than 5 events.\n+                assert False\n+        except KeyError:\n+            assert_equal(len(events), len(expected_types))\n+            return events\n+\n+\n+    def determine_selection_from_usdt(self, events):\n+        success = None\n+        use_aps = None\n+        algo = None\n+        waste = None\n+        change_pos = None\n+\n+        is_aps = False\n+        sc_events = []\n+        for event in events:\n+            if event.type == 1:\n+                if not is_aps:\n+                    algo = event.algo.decode()\n+                    waste = event.waste\n+                sc_events.append(event)\n+            elif event.type == 2:\n+                success = event.success == 1",
      "path": "test/functional/interface_usdt_coinselection.py",
      "position": null,
      "original_position": 146,
      "commit_id": "ab5af9ca7293239ffc24ea7e23159b8184543f94",
      "original_commit_id": "421c9319767ab1fa75833a53151984633aa666e7",
      "in_reply_to_id": null,
      "user": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "with event.success being a `bool` rather than a `u8`\r\n```suggestion\r\n                success = event.success\r\n```",
      "created_at": "2022-04-21T09:20:27Z",
      "updated_at": "2022-04-21T09:55:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#discussion_r854971486",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854971486"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24644"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 146,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854972103",
      "pull_request_review_id": 948286342,
      "id": 854972103,
      "node_id": "PRRC_kwDOABII584y9dbH",
      "diff_hunk": "@@ -0,0 +1,210 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"  Tests the coin_selection:* tracepoint API interface.\n+     See https://github.com/bitcoin/bitcoin/blob/master/doc/tracing.md#context-coin_selection\n+\"\"\"\n+\n+import ctypes\n+from io import BytesIO\n+# Test will be skipped if we don't have bcc installed\n+try:\n+    from bcc import BPF, USDT # type: ignore[import]\n+except ImportError:\n+    pass\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_greater_than,\n+    assert_raises_rpc_error,\n+)\n+\n+coinselection_tracepoints_program = \"\"\"\n+#include <uapi/linux/ptrace.h>\n+\n+#define WALLET_NAME_LENGTH 16\n+#define ALGO_NAME_LENGTH 16\n+\n+struct event_data\n+{\n+    u8 type;\n+    char wallet_name[WALLET_NAME_LENGTH];\n+\n+    // selected coins event\n+    char algo[ALGO_NAME_LENGTH];\n+    s64 target;\n+    s64 waste;\n+    s64 selected_value;\n+\n+    // create tx event\n+    u8 success;\n+    s64 fee;\n+    s32 change_pos;\n+\n+    // aps create tx event\n+    u8 use_aps;\n+};\n+\n+BPF_QUEUE(coin_selection_events, struct event_data, 1024);\n+\n+int trace_selected_coins(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 1;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    bpf_usdt_readarg_p(2, ctx, &data.algo, ALGO_NAME_LENGTH);\n+    bpf_usdt_readarg(3, ctx, &data.target);\n+    bpf_usdt_readarg(4, ctx, &data.waste);\n+    bpf_usdt_readarg(5, ctx, &data.selected_value);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\n+int trace_normal_create_tx(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 2;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    bpf_usdt_readarg(2, ctx, &data.success);\n+    bpf_usdt_readarg(3, ctx, &data.fee);\n+    bpf_usdt_readarg(4, ctx, &data.change_pos);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\n+int trace_attempt_aps(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 3;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\n+int trace_aps_create_tx(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 4;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    bpf_usdt_readarg(2, ctx, &data.use_aps);\n+    bpf_usdt_readarg(3, ctx, &data.success);\n+    bpf_usdt_readarg(4, ctx, &data.fee);\n+    bpf_usdt_readarg(5, ctx, &data.change_pos);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\"\"\"\n+\n+\n+class CoinSelectionTracepointTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_platform_not_linux()\n+        self.skip_if_no_bitcoind_tracepoints()\n+        self.skip_if_no_python_bcc()\n+        self.skip_if_no_bpf_permissions()\n+        self.skip_if_no_wallet()\n+\n+    def get_tracepoints(self, expected_types):\n+        events = []\n+        try:\n+            for i in range(0, 6):\n+                event = self.bpf[\"coin_selection_events\"].pop()\n+                assert_equal(event.wallet_name.decode(), self.default_wallet_name)\n+                assert_equal(event.type, expected_types[i])\n+                events.append(event)\n+            else:\n+                # If the loop exits successfully instead of throwing a KeyError, then we have had\n+                # more events than expected. There should be no more than 5 events.\n+                assert False\n+        except KeyError:\n+            assert_equal(len(events), len(expected_types))\n+            return events\n+\n+\n+    def determine_selection_from_usdt(self, events):\n+        success = None\n+        use_aps = None\n+        algo = None\n+        waste = None\n+        change_pos = None\n+\n+        is_aps = False\n+        sc_events = []\n+        for event in events:\n+            if event.type == 1:\n+                if not is_aps:\n+                    algo = event.algo.decode()\n+                    waste = event.waste\n+                sc_events.append(event)\n+            elif event.type == 2:\n+                success = event.success == 1\n+                if not is_aps:\n+                    change_pos = event.change_pos\n+            elif event.type == 3:\n+                is_aps = True\n+            elif event.type == 4:\n+                assert is_aps\n+                if event.use_aps == 1:",
      "path": "test/functional/interface_usdt_coinselection.py",
      "position": null,
      "original_position": 153,
      "commit_id": "ab5af9ca7293239ffc24ea7e23159b8184543f94",
      "original_commit_id": "421c9319767ab1fa75833a53151984633aa666e7",
      "in_reply_to_id": null,
      "user": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "with event.use_aps being a `bool` rather than a `u8`\r\n\r\n```suggestion\r\n                if event.use_aps:\r\n```",
      "created_at": "2022-04-21T09:21:07Z",
      "updated_at": "2022-04-21T09:55:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#discussion_r854972103",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854972103"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24644"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 153,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854977517",
      "pull_request_review_id": 948286342,
      "id": 854977517,
      "node_id": "PRRC_kwDOABII584y9evt",
      "diff_hunk": "@@ -0,0 +1,210 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"  Tests the coin_selection:* tracepoint API interface.\n+     See https://github.com/bitcoin/bitcoin/blob/master/doc/tracing.md#context-coin_selection\n+\"\"\"\n+\n+import ctypes\n+from io import BytesIO\n+# Test will be skipped if we don't have bcc installed\n+try:\n+    from bcc import BPF, USDT # type: ignore[import]\n+except ImportError:\n+    pass\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_greater_than,\n+    assert_raises_rpc_error,\n+)\n+\n+coinselection_tracepoints_program = \"\"\"\n+#include <uapi/linux/ptrace.h>\n+\n+#define WALLET_NAME_LENGTH 16\n+#define ALGO_NAME_LENGTH 16\n+\n+struct event_data\n+{\n+    u8 type;\n+    char wallet_name[WALLET_NAME_LENGTH];\n+\n+    // selected coins event\n+    char algo[ALGO_NAME_LENGTH];\n+    s64 target;\n+    s64 waste;\n+    s64 selected_value;\n+\n+    // create tx event\n+    u8 success;\n+    s64 fee;\n+    s32 change_pos;\n+\n+    // aps create tx event\n+    u8 use_aps;\n+};\n+\n+BPF_QUEUE(coin_selection_events, struct event_data, 1024);\n+\n+int trace_selected_coins(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 1;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    bpf_usdt_readarg_p(2, ctx, &data.algo, ALGO_NAME_LENGTH);\n+    bpf_usdt_readarg(3, ctx, &data.target);\n+    bpf_usdt_readarg(4, ctx, &data.waste);\n+    bpf_usdt_readarg(5, ctx, &data.selected_value);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\n+int trace_normal_create_tx(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 2;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    bpf_usdt_readarg(2, ctx, &data.success);\n+    bpf_usdt_readarg(3, ctx, &data.fee);\n+    bpf_usdt_readarg(4, ctx, &data.change_pos);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\n+int trace_attempt_aps(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 3;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\n+int trace_aps_create_tx(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 4;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    bpf_usdt_readarg(2, ctx, &data.use_aps);\n+    bpf_usdt_readarg(3, ctx, &data.success);\n+    bpf_usdt_readarg(4, ctx, &data.fee);\n+    bpf_usdt_readarg(5, ctx, &data.change_pos);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\"\"\"\n+\n+\n+class CoinSelectionTracepointTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_platform_not_linux()\n+        self.skip_if_no_bitcoind_tracepoints()\n+        self.skip_if_no_python_bcc()\n+        self.skip_if_no_bpf_permissions()\n+        self.skip_if_no_wallet()\n+\n+    def get_tracepoints(self, expected_types):\n+        events = []\n+        try:\n+            for i in range(0, 6):\n+                event = self.bpf[\"coin_selection_events\"].pop()\n+                assert_equal(event.wallet_name.decode(), self.default_wallet_name)\n+                assert_equal(event.type, expected_types[i])\n+                events.append(event)\n+            else:\n+                # If the loop exits successfully instead of throwing a KeyError, then we have had\n+                # more events than expected. There should be no more than 5 events.\n+                assert False\n+        except KeyError:\n+            assert_equal(len(events), len(expected_types))\n+            return events\n+\n+\n+    def determine_selection_from_usdt(self, events):\n+        success = None\n+        use_aps = None\n+        algo = None\n+        waste = None\n+        change_pos = None\n+\n+        is_aps = False\n+        sc_events = []\n+        for event in events:\n+            if event.type == 1:\n+                if not is_aps:\n+                    algo = event.algo.decode()\n+                    waste = event.waste\n+                sc_events.append(event)\n+            elif event.type == 2:\n+                success = event.success == 1\n+                if not is_aps:\n+                    change_pos = event.change_pos\n+            elif event.type == 3:\n+                is_aps = True\n+            elif event.type == 4:\n+                assert is_aps\n+                if event.use_aps == 1:\n+                    use_aps = True\n+                    assert_equal(len(sc_events), 2)\n+                    algo = sc_events[1].algo.decode()\n+                    waste = sc_events[1].waste\n+                    change_pos = event.change_pos\n+        return success, use_aps, algo, waste, change_pos\n+\n+    def run_test(self):\n+        self.log.info(\"hook into the coin_selection tracepoints\")\n+        ctx = USDT(pid=self.nodes[0].process.pid)\n+        ctx.enable_probe(probe=\"coin_selection:selected_coins\", fn_name=\"trace_selected_coins\")\n+        ctx.enable_probe(probe=\"coin_selection:normal_create_tx_internal\", fn_name=\"trace_normal_create_tx\")\n+        ctx.enable_probe(probe=\"coin_selection:attempting_aps_create_tx\", fn_name=\"trace_attempt_aps\")\n+        ctx.enable_probe(probe=\"coin_selection:aps_create_tx_internal\", fn_name=\"trace_aps_create_tx\")\n+        self.bpf = BPF(text=coinselection_tracepoints_program, usdt_contexts=[ctx], debug=0)\n+\n+        self.log.info(\"Prepare wallets\")\n+        self.generate(self.nodes[0], 101)\n+        wallet = self.nodes[0].get_wallet_rpc(self.default_wallet_name)\n+\n+        self.log.info(\"Sending a transaction should result in all tracepoints\")\n+        # We should have 5 tracepoints in the order:\n+        # 1. selected_coins (type 1)\n+        # 2. normal_create_tx_internal (type 2)\n+        # 3. attempting_aps_create_tx (type 3)\n+        # 4. selected_coins (type 1)\n+        # 5. aps_create_tx_internal (type 4)\n+        wallet.sendtoaddress(wallet.getnewaddress(), 10)\n+        events = self.get_tracepoints([1, 2, 3, 1, 4])\n+        success, use_aps, algo, waste, change_pos = self.determine_selection_from_usdt(events)\n+        assert_equal(success, True)\n+        assert_greater_than(change_pos, -1)",
      "path": "test/functional/interface_usdt_coinselection.py",
      "position": 183,
      "original_position": 185,
      "commit_id": "ab5af9ca7293239ffc24ea7e23159b8184543f94",
      "original_commit_id": "421c9319767ab1fa75833a53151984633aa666e7",
      "in_reply_to_id": null,
      "user": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "does it make sense to check `use_aps`, `algo`, and `waste` here too?",
      "created_at": "2022-04-21T09:26:50Z",
      "updated_at": "2022-04-21T09:55:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#discussion_r854977517",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854977517"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24644"
        }
      },
      "start_line": 182,
      "original_start_line": 184,
      "start_side": "RIGHT",
      "line": 183,
      "original_line": 183,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854979774",
      "pull_request_review_id": 948286342,
      "id": 854979774,
      "node_id": "PRRC_kwDOABII584y9fS-",
      "diff_hunk": "@@ -0,0 +1,210 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"  Tests the coin_selection:* tracepoint API interface.\n+     See https://github.com/bitcoin/bitcoin/blob/master/doc/tracing.md#context-coin_selection\n+\"\"\"\n+\n+import ctypes\n+from io import BytesIO\n+# Test will be skipped if we don't have bcc installed\n+try:\n+    from bcc import BPF, USDT # type: ignore[import]\n+except ImportError:\n+    pass\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_greater_than,\n+    assert_raises_rpc_error,\n+)\n+\n+coinselection_tracepoints_program = \"\"\"\n+#include <uapi/linux/ptrace.h>\n+\n+#define WALLET_NAME_LENGTH 16\n+#define ALGO_NAME_LENGTH 16\n+\n+struct event_data\n+{\n+    u8 type;\n+    char wallet_name[WALLET_NAME_LENGTH];\n+\n+    // selected coins event\n+    char algo[ALGO_NAME_LENGTH];\n+    s64 target;\n+    s64 waste;\n+    s64 selected_value;\n+\n+    // create tx event\n+    u8 success;\n+    s64 fee;\n+    s32 change_pos;\n+\n+    // aps create tx event\n+    u8 use_aps;\n+};\n+\n+BPF_QUEUE(coin_selection_events, struct event_data, 1024);\n+\n+int trace_selected_coins(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 1;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    bpf_usdt_readarg_p(2, ctx, &data.algo, ALGO_NAME_LENGTH);\n+    bpf_usdt_readarg(3, ctx, &data.target);\n+    bpf_usdt_readarg(4, ctx, &data.waste);\n+    bpf_usdt_readarg(5, ctx, &data.selected_value);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\n+int trace_normal_create_tx(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 2;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    bpf_usdt_readarg(2, ctx, &data.success);\n+    bpf_usdt_readarg(3, ctx, &data.fee);\n+    bpf_usdt_readarg(4, ctx, &data.change_pos);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\n+int trace_attempt_aps(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 3;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\n+int trace_aps_create_tx(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 4;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    bpf_usdt_readarg(2, ctx, &data.use_aps);\n+    bpf_usdt_readarg(3, ctx, &data.success);\n+    bpf_usdt_readarg(4, ctx, &data.fee);\n+    bpf_usdt_readarg(5, ctx, &data.change_pos);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\"\"\"\n+\n+\n+class CoinSelectionTracepointTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_platform_not_linux()\n+        self.skip_if_no_bitcoind_tracepoints()\n+        self.skip_if_no_python_bcc()\n+        self.skip_if_no_bpf_permissions()\n+        self.skip_if_no_wallet()\n+\n+    def get_tracepoints(self, expected_types):\n+        events = []\n+        try:\n+            for i in range(0, 6):\n+                event = self.bpf[\"coin_selection_events\"].pop()\n+                assert_equal(event.wallet_name.decode(), self.default_wallet_name)\n+                assert_equal(event.type, expected_types[i])\n+                events.append(event)\n+            else:\n+                # If the loop exits successfully instead of throwing a KeyError, then we have had\n+                # more events than expected. There should be no more than 5 events.\n+                assert False\n+        except KeyError:\n+            assert_equal(len(events), len(expected_types))\n+            return events\n+\n+\n+    def determine_selection_from_usdt(self, events):\n+        success = None\n+        use_aps = None\n+        algo = None\n+        waste = None\n+        change_pos = None\n+\n+        is_aps = False\n+        sc_events = []\n+        for event in events:\n+            if event.type == 1:\n+                if not is_aps:\n+                    algo = event.algo.decode()\n+                    waste = event.waste\n+                sc_events.append(event)\n+            elif event.type == 2:\n+                success = event.success == 1\n+                if not is_aps:\n+                    change_pos = event.change_pos\n+            elif event.type == 3:\n+                is_aps = True\n+            elif event.type == 4:\n+                assert is_aps\n+                if event.use_aps == 1:\n+                    use_aps = True\n+                    assert_equal(len(sc_events), 2)\n+                    algo = sc_events[1].algo.decode()\n+                    waste = sc_events[1].waste\n+                    change_pos = event.change_pos\n+        return success, use_aps, algo, waste, change_pos\n+\n+    def run_test(self):\n+        self.log.info(\"hook into the coin_selection tracepoints\")\n+        ctx = USDT(pid=self.nodes[0].process.pid)\n+        ctx.enable_probe(probe=\"coin_selection:selected_coins\", fn_name=\"trace_selected_coins\")\n+        ctx.enable_probe(probe=\"coin_selection:normal_create_tx_internal\", fn_name=\"trace_normal_create_tx\")\n+        ctx.enable_probe(probe=\"coin_selection:attempting_aps_create_tx\", fn_name=\"trace_attempt_aps\")\n+        ctx.enable_probe(probe=\"coin_selection:aps_create_tx_internal\", fn_name=\"trace_aps_create_tx\")\n+        self.bpf = BPF(text=coinselection_tracepoints_program, usdt_contexts=[ctx], debug=0)\n+\n+        self.log.info(\"Prepare wallets\")\n+        self.generate(self.nodes[0], 101)\n+        wallet = self.nodes[0].get_wallet_rpc(self.default_wallet_name)\n+\n+        self.log.info(\"Sending a transaction should result in all tracepoints\")\n+        # We should have 5 tracepoints in the order:\n+        # 1. selected_coins (type 1)\n+        # 2. normal_create_tx_internal (type 2)\n+        # 3. attempting_aps_create_tx (type 3)\n+        # 4. selected_coins (type 1)\n+        # 5. aps_create_tx_internal (type 4)\n+        wallet.sendtoaddress(wallet.getnewaddress(), 10)\n+        events = self.get_tracepoints([1, 2, 3, 1, 4])\n+        success, use_aps, algo, waste, change_pos = self.determine_selection_from_usdt(events)\n+        assert_equal(success, True)\n+        assert_greater_than(change_pos, -1)\n+\n+        self.log.info(\"Failing to fund results in 1 tracepoint\")\n+        # We should have 1 tracepoints in the order\n+        # 1. normal_create_tx_internal (type 2)\n+        assert_raises_rpc_error(-6, \"Insufficient funds\", wallet.sendtoaddress, wallet.getnewaddress(), 102 * 50)\n+        events = self.get_tracepoints([2])\n+        success, use_aps, algo, waste, change_pos = self.determine_selection_from_usdt(events)\n+        assert_equal(success, False)\n+\n+        self.log.info(\"Explicitly enabling APS results in 2 tracepoints\")\n+        # We should have 2 tracepoints in the order\n+        # 1. selected_coins (type 1)\n+        # 2. normal_create_tx_internal (type 2)\n+        wallet.setwalletflag(\"avoid_reuse\")\n+        wallet.sendtoaddress(address=wallet.getnewaddress(), amount=10, avoid_reuse=True)\n+        events = self.get_tracepoints([1, 2])\n+        success, use_aps, algo, waste, change_pos = self.determine_selection_from_usdt(events)\n+        assert_equal(success, True)\n+        assert_equal(use_aps, None)",
      "path": "test/functional/interface_usdt_coinselection.py",
      "position": 202,
      "original_position": 204,
      "commit_id": "ab5af9ca7293239ffc24ea7e23159b8184543f94",
      "original_commit_id": "421c9319767ab1fa75833a53151984633aa666e7",
      "in_reply_to_id": null,
      "user": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "does it make sense to check `algo`, `change_pos`, and `waste` here too?",
      "created_at": "2022-04-21T09:29:04Z",
      "updated_at": "2022-04-21T09:55:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#discussion_r854979774",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854979774"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24644"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 202,
      "original_line": 202,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/855303905",
      "pull_request_review_id": 948794767,
      "id": 855303905,
      "node_id": "PRRC_kwDOABII584y-ubh",
      "diff_hunk": "@@ -168,6 +168,58 @@ Arguments passed:\n 4. Value of the coin as `int64`\n 5. If the coin is a coinbase as `bool`\n \n+### Context `coin_selection`\n+\n+#### Tracepoint `coin_selection:selected_coins`\n+\n+Is called when `SelectCoins` completes.\n+\n+Arguments passed:\n+1. Wallet name as `pointer to C-style string`\n+2. Coin selection algorithm name as `pointer to C-style string`\n+3. Selection target value as `int64`\n+4. Calculated waste metric of the solution as `int64`\n+5. Total value of the selected inputs as `int64`\n+\n+#### Tracepoint `coin_selection:normal_create_tx_internal`\n+\n+Is called when the first `CreateTransactionInternal` completes.\n+\n+Arguments passed:\n+1. Wallet name as `pointer to C-style string`\n+2. Whether `CreateTransactionInternal` succeeded as `bool`\n+3. The expected transaction fee as an `int64`\n+4. The position of the change output as an `int32`\n+\n+#### Tracepoint `coin_selection:attempting_aps_create_tx`\n+\n+Is called when `CreateTransactionInternal` is called the second time for the optimistic\n+Avoid Partial Spends selection attempt. This is used to determine whether the next\n+tracepoints called are for the Avoid Partial Spends solution, or a different transaction.\n+\n+Arguments passed:\n+1. Wallet name as `pointer to C-style string`\n+\n+#### Tracepoint `coin_selection:aps_create_tx_internal`\n+\n+Is called when the second `CreateTransactionInternal` with Avoid Partial Spends enabled completes.\n+\n+Arguments passed:\n+1. Wallet name as `pointer to C-style string`\n+2. Whether the Avoid Partial Spends solution will be used as `bool`\n+3. Whether `CreateTransactionInternal` succeeded as` bool`\n+4. The expected transaction fee as an `int64`\n+5. The position of the change output as an `int32`\n+\n+#### Tracepoint `coin_selection:attempting_aps_create_tx`\n+\n+Is called when `CreateTransactionInternal` is called the second time for the optimistic\n+Avoid Partial Spends selection attempt. This is used to determine whether the next\n+tracepoints called are for the Avoid Partial Spends solution, or a different transaction.\n+\n+Arguments passed:\n+1. Wallet name as `pointer to C-style string`",
      "path": "doc/tracing.md",
      "position": null,
      "original_position": 54,
      "commit_id": "ab5af9ca7293239ffc24ea7e23159b8184543f94",
      "original_commit_id": "e1aff5c2db24425a007e32da2de8cba3593d10ad",
      "in_reply_to_id": 854949055,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Oops, removed.",
      "created_at": "2022-04-21T15:17:40Z",
      "updated_at": "2022-04-21T15:17:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#discussion_r855303905",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/855303905"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24644"
        }
      },
      "start_line": null,
      "original_start_line": 214,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 221,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/855304016",
      "pull_request_review_id": 948794960,
      "id": 855304016,
      "node_id": "PRRC_kwDOABII584y-udQ",
      "diff_hunk": "@@ -0,0 +1,210 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"  Tests the coin_selection:* tracepoint API interface.\n+     See https://github.com/bitcoin/bitcoin/blob/master/doc/tracing.md#context-coin_selection\n+\"\"\"\n+\n+import ctypes\n+from io import BytesIO",
      "path": "test/functional/interface_usdt_coinselection.py",
      "position": null,
      "original_position": 11,
      "commit_id": "ab5af9ca7293239ffc24ea7e23159b8184543f94",
      "original_commit_id": "421c9319767ab1fa75833a53151984633aa666e7",
      "in_reply_to_id": 854956480,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Removed",
      "created_at": "2022-04-21T15:17:47Z",
      "updated_at": "2022-04-21T15:17:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#discussion_r855304016",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/855304016"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24644"
        }
      },
      "start_line": null,
      "original_start_line": 10,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 11,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/855304278",
      "pull_request_review_id": 948795391,
      "id": 855304278,
      "node_id": "PRRC_kwDOABII584y-uhW",
      "diff_hunk": "@@ -0,0 +1,210 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"  Tests the coin_selection:* tracepoint API interface.\n+     See https://github.com/bitcoin/bitcoin/blob/master/doc/tracing.md#context-coin_selection\n+\"\"\"\n+\n+import ctypes\n+from io import BytesIO\n+# Test will be skipped if we don't have bcc installed\n+try:\n+    from bcc import BPF, USDT # type: ignore[import]\n+except ImportError:\n+    pass\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_greater_than,\n+    assert_raises_rpc_error,\n+)\n+\n+coinselection_tracepoints_program = \"\"\"\n+#include <uapi/linux/ptrace.h>\n+\n+#define WALLET_NAME_LENGTH 16\n+#define ALGO_NAME_LENGTH 16\n+\n+struct event_data\n+{\n+    u8 type;\n+    char wallet_name[WALLET_NAME_LENGTH];\n+\n+    // selected coins event\n+    char algo[ALGO_NAME_LENGTH];\n+    s64 target;\n+    s64 waste;\n+    s64 selected_value;\n+\n+    // create tx event\n+    u8 success;\n+    s64 fee;\n+    s32 change_pos;\n+\n+    // aps create tx event\n+    u8 use_aps;\n+};\n+\n+BPF_QUEUE(coin_selection_events, struct event_data, 1024);\n+\n+int trace_selected_coins(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 1;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    bpf_usdt_readarg_p(2, ctx, &data.algo, ALGO_NAME_LENGTH);\n+    bpf_usdt_readarg(3, ctx, &data.target);\n+    bpf_usdt_readarg(4, ctx, &data.waste);\n+    bpf_usdt_readarg(5, ctx, &data.selected_value);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\n+int trace_normal_create_tx(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 2;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    bpf_usdt_readarg(2, ctx, &data.success);\n+    bpf_usdt_readarg(3, ctx, &data.fee);\n+    bpf_usdt_readarg(4, ctx, &data.change_pos);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\n+int trace_attempt_aps(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 3;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\n+int trace_aps_create_tx(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 4;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    bpf_usdt_readarg(2, ctx, &data.use_aps);\n+    bpf_usdt_readarg(3, ctx, &data.success);\n+    bpf_usdt_readarg(4, ctx, &data.fee);\n+    bpf_usdt_readarg(5, ctx, &data.change_pos);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\"\"\"\n+\n+\n+class CoinSelectionTracepointTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_platform_not_linux()\n+        self.skip_if_no_bitcoind_tracepoints()\n+        self.skip_if_no_python_bcc()\n+        self.skip_if_no_bpf_permissions()\n+        self.skip_if_no_wallet()\n+\n+    def get_tracepoints(self, expected_types):\n+        events = []\n+        try:\n+            for i in range(0, 6):\n+                event = self.bpf[\"coin_selection_events\"].pop()\n+                assert_equal(event.wallet_name.decode(), self.default_wallet_name)\n+                assert_equal(event.type, expected_types[i])\n+                events.append(event)\n+            else:\n+                # If the loop exits successfully instead of throwing a KeyError, then we have had\n+                # more events than expected. There should be no more than 5 events.\n+                assert False\n+        except KeyError:\n+            assert_equal(len(events), len(expected_types))\n+            return events",
      "path": "test/functional/interface_usdt_coinselection.py",
      "position": null,
      "original_position": 127,
      "commit_id": "ab5af9ca7293239ffc24ea7e23159b8184543f94",
      "original_commit_id": "421c9319767ab1fa75833a53151984633aa666e7",
      "in_reply_to_id": 854966780,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2022-04-21T15:18:02Z",
      "updated_at": "2022-04-21T15:18:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#discussion_r855304278",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/855304278"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24644"
        }
      },
      "start_line": null,
      "original_start_line": 115,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 125,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/855304371",
      "pull_request_review_id": 948795534,
      "id": 855304371,
      "node_id": "PRRC_kwDOABII584y-uiz",
      "diff_hunk": "@@ -0,0 +1,210 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"  Tests the coin_selection:* tracepoint API interface.\n+     See https://github.com/bitcoin/bitcoin/blob/master/doc/tracing.md#context-coin_selection\n+\"\"\"\n+\n+import ctypes\n+from io import BytesIO\n+# Test will be skipped if we don't have bcc installed\n+try:\n+    from bcc import BPF, USDT # type: ignore[import]\n+except ImportError:\n+    pass\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_greater_than,\n+    assert_raises_rpc_error,\n+)\n+\n+coinselection_tracepoints_program = \"\"\"\n+#include <uapi/linux/ptrace.h>\n+\n+#define WALLET_NAME_LENGTH 16\n+#define ALGO_NAME_LENGTH 16\n+\n+struct event_data\n+{\n+    u8 type;\n+    char wallet_name[WALLET_NAME_LENGTH];\n+\n+    // selected coins event\n+    char algo[ALGO_NAME_LENGTH];\n+    s64 target;\n+    s64 waste;\n+    s64 selected_value;\n+\n+    // create tx event\n+    u8 success;\n+    s64 fee;\n+    s32 change_pos;\n+\n+    // aps create tx event\n+    u8 use_aps;",
      "path": "test/functional/interface_usdt_coinselection.py",
      "position": null,
      "original_position": 47,
      "commit_id": "ab5af9ca7293239ffc24ea7e23159b8184543f94",
      "original_commit_id": "421c9319767ab1fa75833a53151984633aa666e7",
      "in_reply_to_id": 854970461,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2022-04-21T15:18:08Z",
      "updated_at": "2022-04-21T15:18:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#discussion_r855304371",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/855304371"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24644"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 47,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/855304594",
      "pull_request_review_id": 948795823,
      "id": 855304594,
      "node_id": "PRRC_kwDOABII584y-umS",
      "diff_hunk": "@@ -0,0 +1,210 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"  Tests the coin_selection:* tracepoint API interface.\n+     See https://github.com/bitcoin/bitcoin/blob/master/doc/tracing.md#context-coin_selection\n+\"\"\"\n+\n+import ctypes\n+from io import BytesIO\n+# Test will be skipped if we don't have bcc installed\n+try:\n+    from bcc import BPF, USDT # type: ignore[import]\n+except ImportError:\n+    pass\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_greater_than,\n+    assert_raises_rpc_error,\n+)\n+\n+coinselection_tracepoints_program = \"\"\"\n+#include <uapi/linux/ptrace.h>\n+\n+#define WALLET_NAME_LENGTH 16\n+#define ALGO_NAME_LENGTH 16\n+\n+struct event_data\n+{\n+    u8 type;\n+    char wallet_name[WALLET_NAME_LENGTH];\n+\n+    // selected coins event\n+    char algo[ALGO_NAME_LENGTH];\n+    s64 target;\n+    s64 waste;\n+    s64 selected_value;\n+\n+    // create tx event\n+    u8 success;",
      "path": "test/functional/interface_usdt_coinselection.py",
      "position": null,
      "original_position": 42,
      "commit_id": "ab5af9ca7293239ffc24ea7e23159b8184543f94",
      "original_commit_id": "421c9319767ab1fa75833a53151984633aa666e7",
      "in_reply_to_id": 854970298,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2022-04-21T15:18:19Z",
      "updated_at": "2022-04-21T15:18:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#discussion_r855304594",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/855304594"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24644"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 42,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/855304665",
      "pull_request_review_id": 948795930,
      "id": 855304665,
      "node_id": "PRRC_kwDOABII584y-unZ",
      "diff_hunk": "@@ -0,0 +1,210 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"  Tests the coin_selection:* tracepoint API interface.\n+     See https://github.com/bitcoin/bitcoin/blob/master/doc/tracing.md#context-coin_selection\n+\"\"\"\n+\n+import ctypes\n+from io import BytesIO\n+# Test will be skipped if we don't have bcc installed\n+try:\n+    from bcc import BPF, USDT # type: ignore[import]\n+except ImportError:\n+    pass\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_greater_than,\n+    assert_raises_rpc_error,\n+)\n+\n+coinselection_tracepoints_program = \"\"\"\n+#include <uapi/linux/ptrace.h>\n+\n+#define WALLET_NAME_LENGTH 16\n+#define ALGO_NAME_LENGTH 16\n+\n+struct event_data\n+{\n+    u8 type;\n+    char wallet_name[WALLET_NAME_LENGTH];\n+\n+    // selected coins event\n+    char algo[ALGO_NAME_LENGTH];\n+    s64 target;\n+    s64 waste;\n+    s64 selected_value;\n+\n+    // create tx event\n+    u8 success;\n+    s64 fee;\n+    s32 change_pos;\n+\n+    // aps create tx event\n+    u8 use_aps;\n+};\n+\n+BPF_QUEUE(coin_selection_events, struct event_data, 1024);\n+\n+int trace_selected_coins(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 1;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    bpf_usdt_readarg_p(2, ctx, &data.algo, ALGO_NAME_LENGTH);\n+    bpf_usdt_readarg(3, ctx, &data.target);\n+    bpf_usdt_readarg(4, ctx, &data.waste);\n+    bpf_usdt_readarg(5, ctx, &data.selected_value);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\n+int trace_normal_create_tx(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 2;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    bpf_usdt_readarg(2, ctx, &data.success);\n+    bpf_usdt_readarg(3, ctx, &data.fee);\n+    bpf_usdt_readarg(4, ctx, &data.change_pos);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\n+int trace_attempt_aps(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 3;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\n+int trace_aps_create_tx(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 4;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    bpf_usdt_readarg(2, ctx, &data.use_aps);\n+    bpf_usdt_readarg(3, ctx, &data.success);\n+    bpf_usdt_readarg(4, ctx, &data.fee);\n+    bpf_usdt_readarg(5, ctx, &data.change_pos);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\"\"\"\n+\n+\n+class CoinSelectionTracepointTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_platform_not_linux()\n+        self.skip_if_no_bitcoind_tracepoints()\n+        self.skip_if_no_python_bcc()\n+        self.skip_if_no_bpf_permissions()\n+        self.skip_if_no_wallet()\n+\n+    def get_tracepoints(self, expected_types):\n+        events = []\n+        try:\n+            for i in range(0, 6):\n+                event = self.bpf[\"coin_selection_events\"].pop()\n+                assert_equal(event.wallet_name.decode(), self.default_wallet_name)\n+                assert_equal(event.type, expected_types[i])\n+                events.append(event)\n+            else:\n+                # If the loop exits successfully instead of throwing a KeyError, then we have had\n+                # more events than expected. There should be no more than 5 events.\n+                assert False\n+        except KeyError:\n+            assert_equal(len(events), len(expected_types))\n+            return events\n+\n+\n+    def determine_selection_from_usdt(self, events):\n+        success = None\n+        use_aps = None\n+        algo = None\n+        waste = None\n+        change_pos = None\n+\n+        is_aps = False\n+        sc_events = []\n+        for event in events:\n+            if event.type == 1:\n+                if not is_aps:\n+                    algo = event.algo.decode()\n+                    waste = event.waste\n+                sc_events.append(event)\n+            elif event.type == 2:\n+                success = event.success == 1",
      "path": "test/functional/interface_usdt_coinselection.py",
      "position": null,
      "original_position": 146,
      "commit_id": "ab5af9ca7293239ffc24ea7e23159b8184543f94",
      "original_commit_id": "421c9319767ab1fa75833a53151984633aa666e7",
      "in_reply_to_id": 854971486,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2022-04-21T15:18:23Z",
      "updated_at": "2022-04-21T15:18:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#discussion_r855304665",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/855304665"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24644"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 146,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/855304749",
      "pull_request_review_id": 948796064,
      "id": 855304749,
      "node_id": "PRRC_kwDOABII584y-uot",
      "diff_hunk": "@@ -0,0 +1,210 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"  Tests the coin_selection:* tracepoint API interface.\n+     See https://github.com/bitcoin/bitcoin/blob/master/doc/tracing.md#context-coin_selection\n+\"\"\"\n+\n+import ctypes\n+from io import BytesIO\n+# Test will be skipped if we don't have bcc installed\n+try:\n+    from bcc import BPF, USDT # type: ignore[import]\n+except ImportError:\n+    pass\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_greater_than,\n+    assert_raises_rpc_error,\n+)\n+\n+coinselection_tracepoints_program = \"\"\"\n+#include <uapi/linux/ptrace.h>\n+\n+#define WALLET_NAME_LENGTH 16\n+#define ALGO_NAME_LENGTH 16\n+\n+struct event_data\n+{\n+    u8 type;\n+    char wallet_name[WALLET_NAME_LENGTH];\n+\n+    // selected coins event\n+    char algo[ALGO_NAME_LENGTH];\n+    s64 target;\n+    s64 waste;\n+    s64 selected_value;\n+\n+    // create tx event\n+    u8 success;\n+    s64 fee;\n+    s32 change_pos;\n+\n+    // aps create tx event\n+    u8 use_aps;\n+};\n+\n+BPF_QUEUE(coin_selection_events, struct event_data, 1024);\n+\n+int trace_selected_coins(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 1;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    bpf_usdt_readarg_p(2, ctx, &data.algo, ALGO_NAME_LENGTH);\n+    bpf_usdt_readarg(3, ctx, &data.target);\n+    bpf_usdt_readarg(4, ctx, &data.waste);\n+    bpf_usdt_readarg(5, ctx, &data.selected_value);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\n+int trace_normal_create_tx(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 2;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    bpf_usdt_readarg(2, ctx, &data.success);\n+    bpf_usdt_readarg(3, ctx, &data.fee);\n+    bpf_usdt_readarg(4, ctx, &data.change_pos);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\n+int trace_attempt_aps(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 3;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\n+int trace_aps_create_tx(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 4;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    bpf_usdt_readarg(2, ctx, &data.use_aps);\n+    bpf_usdt_readarg(3, ctx, &data.success);\n+    bpf_usdt_readarg(4, ctx, &data.fee);\n+    bpf_usdt_readarg(5, ctx, &data.change_pos);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\"\"\"\n+\n+\n+class CoinSelectionTracepointTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_platform_not_linux()\n+        self.skip_if_no_bitcoind_tracepoints()\n+        self.skip_if_no_python_bcc()\n+        self.skip_if_no_bpf_permissions()\n+        self.skip_if_no_wallet()\n+\n+    def get_tracepoints(self, expected_types):\n+        events = []\n+        try:\n+            for i in range(0, 6):\n+                event = self.bpf[\"coin_selection_events\"].pop()\n+                assert_equal(event.wallet_name.decode(), self.default_wallet_name)\n+                assert_equal(event.type, expected_types[i])\n+                events.append(event)\n+            else:\n+                # If the loop exits successfully instead of throwing a KeyError, then we have had\n+                # more events than expected. There should be no more than 5 events.\n+                assert False\n+        except KeyError:\n+            assert_equal(len(events), len(expected_types))\n+            return events\n+\n+\n+    def determine_selection_from_usdt(self, events):\n+        success = None\n+        use_aps = None\n+        algo = None\n+        waste = None\n+        change_pos = None\n+\n+        is_aps = False\n+        sc_events = []\n+        for event in events:\n+            if event.type == 1:\n+                if not is_aps:\n+                    algo = event.algo.decode()\n+                    waste = event.waste\n+                sc_events.append(event)\n+            elif event.type == 2:\n+                success = event.success == 1\n+                if not is_aps:\n+                    change_pos = event.change_pos\n+            elif event.type == 3:\n+                is_aps = True\n+            elif event.type == 4:\n+                assert is_aps\n+                if event.use_aps == 1:",
      "path": "test/functional/interface_usdt_coinselection.py",
      "position": null,
      "original_position": 153,
      "commit_id": "ab5af9ca7293239ffc24ea7e23159b8184543f94",
      "original_commit_id": "421c9319767ab1fa75833a53151984633aa666e7",
      "in_reply_to_id": 854972103,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2022-04-21T15:18:27Z",
      "updated_at": "2022-04-21T15:18:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#discussion_r855304749",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/855304749"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24644"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 153,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/855305458",
      "pull_request_review_id": 948797123,
      "id": 855305458,
      "node_id": "PRRC_kwDOABII584y-uzy",
      "diff_hunk": "@@ -0,0 +1,210 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"  Tests the coin_selection:* tracepoint API interface.\n+     See https://github.com/bitcoin/bitcoin/blob/master/doc/tracing.md#context-coin_selection\n+\"\"\"\n+\n+import ctypes\n+from io import BytesIO\n+# Test will be skipped if we don't have bcc installed\n+try:\n+    from bcc import BPF, USDT # type: ignore[import]\n+except ImportError:\n+    pass\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_greater_than,\n+    assert_raises_rpc_error,\n+)\n+\n+coinselection_tracepoints_program = \"\"\"\n+#include <uapi/linux/ptrace.h>\n+\n+#define WALLET_NAME_LENGTH 16\n+#define ALGO_NAME_LENGTH 16\n+\n+struct event_data\n+{\n+    u8 type;\n+    char wallet_name[WALLET_NAME_LENGTH];\n+\n+    // selected coins event\n+    char algo[ALGO_NAME_LENGTH];\n+    s64 target;\n+    s64 waste;\n+    s64 selected_value;\n+\n+    // create tx event\n+    u8 success;\n+    s64 fee;\n+    s32 change_pos;\n+\n+    // aps create tx event\n+    u8 use_aps;\n+};\n+\n+BPF_QUEUE(coin_selection_events, struct event_data, 1024);\n+\n+int trace_selected_coins(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 1;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    bpf_usdt_readarg_p(2, ctx, &data.algo, ALGO_NAME_LENGTH);\n+    bpf_usdt_readarg(3, ctx, &data.target);\n+    bpf_usdt_readarg(4, ctx, &data.waste);\n+    bpf_usdt_readarg(5, ctx, &data.selected_value);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\n+int trace_normal_create_tx(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 2;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    bpf_usdt_readarg(2, ctx, &data.success);\n+    bpf_usdt_readarg(3, ctx, &data.fee);\n+    bpf_usdt_readarg(4, ctx, &data.change_pos);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\n+int trace_attempt_aps(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 3;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\n+int trace_aps_create_tx(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 4;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    bpf_usdt_readarg(2, ctx, &data.use_aps);\n+    bpf_usdt_readarg(3, ctx, &data.success);\n+    bpf_usdt_readarg(4, ctx, &data.fee);\n+    bpf_usdt_readarg(5, ctx, &data.change_pos);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\"\"\"\n+\n+\n+class CoinSelectionTracepointTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_platform_not_linux()\n+        self.skip_if_no_bitcoind_tracepoints()\n+        self.skip_if_no_python_bcc()\n+        self.skip_if_no_bpf_permissions()\n+        self.skip_if_no_wallet()\n+\n+    def get_tracepoints(self, expected_types):\n+        events = []\n+        try:\n+            for i in range(0, 6):\n+                event = self.bpf[\"coin_selection_events\"].pop()\n+                assert_equal(event.wallet_name.decode(), self.default_wallet_name)\n+                assert_equal(event.type, expected_types[i])\n+                events.append(event)\n+            else:\n+                # If the loop exits successfully instead of throwing a KeyError, then we have had\n+                # more events than expected. There should be no more than 5 events.\n+                assert False\n+        except KeyError:\n+            assert_equal(len(events), len(expected_types))\n+            return events\n+\n+\n+    def determine_selection_from_usdt(self, events):\n+        success = None\n+        use_aps = None\n+        algo = None\n+        waste = None\n+        change_pos = None\n+\n+        is_aps = False\n+        sc_events = []\n+        for event in events:\n+            if event.type == 1:\n+                if not is_aps:\n+                    algo = event.algo.decode()\n+                    waste = event.waste\n+                sc_events.append(event)\n+            elif event.type == 2:\n+                success = event.success == 1\n+                if not is_aps:\n+                    change_pos = event.change_pos\n+            elif event.type == 3:\n+                is_aps = True\n+            elif event.type == 4:\n+                assert is_aps\n+                if event.use_aps == 1:\n+                    use_aps = True\n+                    assert_equal(len(sc_events), 2)\n+                    algo = sc_events[1].algo.decode()\n+                    waste = sc_events[1].waste\n+                    change_pos = event.change_pos\n+        return success, use_aps, algo, waste, change_pos\n+\n+    def run_test(self):\n+        self.log.info(\"hook into the coin_selection tracepoints\")\n+        ctx = USDT(pid=self.nodes[0].process.pid)\n+        ctx.enable_probe(probe=\"coin_selection:selected_coins\", fn_name=\"trace_selected_coins\")\n+        ctx.enable_probe(probe=\"coin_selection:normal_create_tx_internal\", fn_name=\"trace_normal_create_tx\")\n+        ctx.enable_probe(probe=\"coin_selection:attempting_aps_create_tx\", fn_name=\"trace_attempt_aps\")\n+        ctx.enable_probe(probe=\"coin_selection:aps_create_tx_internal\", fn_name=\"trace_aps_create_tx\")\n+        self.bpf = BPF(text=coinselection_tracepoints_program, usdt_contexts=[ctx], debug=0)\n+\n+        self.log.info(\"Prepare wallets\")\n+        self.generate(self.nodes[0], 101)\n+        wallet = self.nodes[0].get_wallet_rpc(self.default_wallet_name)\n+\n+        self.log.info(\"Sending a transaction should result in all tracepoints\")\n+        # We should have 5 tracepoints in the order:\n+        # 1. selected_coins (type 1)\n+        # 2. normal_create_tx_internal (type 2)\n+        # 3. attempting_aps_create_tx (type 3)\n+        # 4. selected_coins (type 1)\n+        # 5. aps_create_tx_internal (type 4)\n+        wallet.sendtoaddress(wallet.getnewaddress(), 10)\n+        events = self.get_tracepoints([1, 2, 3, 1, 4])\n+        success, use_aps, algo, waste, change_pos = self.determine_selection_from_usdt(events)\n+        assert_equal(success, True)\n+        assert_greater_than(change_pos, -1)",
      "path": "test/functional/interface_usdt_coinselection.py",
      "position": 183,
      "original_position": 185,
      "commit_id": "ab5af9ca7293239ffc24ea7e23159b8184543f94",
      "original_commit_id": "421c9319767ab1fa75833a53151984633aa666e7",
      "in_reply_to_id": 854977517,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "No, this test doesn't make any assumptions about what coin selection algorithm was used.",
      "created_at": "2022-04-21T15:19:10Z",
      "updated_at": "2022-04-21T15:19:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#discussion_r855305458",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/855305458"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24644"
        }
      },
      "start_line": 182,
      "original_start_line": 184,
      "start_side": "RIGHT",
      "line": 183,
      "original_line": 183,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/855305489",
      "pull_request_review_id": 948797185,
      "id": 855305489,
      "node_id": "PRRC_kwDOABII584y-u0R",
      "diff_hunk": "@@ -0,0 +1,210 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"  Tests the coin_selection:* tracepoint API interface.\n+     See https://github.com/bitcoin/bitcoin/blob/master/doc/tracing.md#context-coin_selection\n+\"\"\"\n+\n+import ctypes\n+from io import BytesIO\n+# Test will be skipped if we don't have bcc installed\n+try:\n+    from bcc import BPF, USDT # type: ignore[import]\n+except ImportError:\n+    pass\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_greater_than,\n+    assert_raises_rpc_error,\n+)\n+\n+coinselection_tracepoints_program = \"\"\"\n+#include <uapi/linux/ptrace.h>\n+\n+#define WALLET_NAME_LENGTH 16\n+#define ALGO_NAME_LENGTH 16\n+\n+struct event_data\n+{\n+    u8 type;\n+    char wallet_name[WALLET_NAME_LENGTH];\n+\n+    // selected coins event\n+    char algo[ALGO_NAME_LENGTH];\n+    s64 target;\n+    s64 waste;\n+    s64 selected_value;\n+\n+    // create tx event\n+    u8 success;\n+    s64 fee;\n+    s32 change_pos;\n+\n+    // aps create tx event\n+    u8 use_aps;\n+};\n+\n+BPF_QUEUE(coin_selection_events, struct event_data, 1024);\n+\n+int trace_selected_coins(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 1;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    bpf_usdt_readarg_p(2, ctx, &data.algo, ALGO_NAME_LENGTH);\n+    bpf_usdt_readarg(3, ctx, &data.target);\n+    bpf_usdt_readarg(4, ctx, &data.waste);\n+    bpf_usdt_readarg(5, ctx, &data.selected_value);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\n+int trace_normal_create_tx(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 2;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    bpf_usdt_readarg(2, ctx, &data.success);\n+    bpf_usdt_readarg(3, ctx, &data.fee);\n+    bpf_usdt_readarg(4, ctx, &data.change_pos);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\n+int trace_attempt_aps(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 3;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\n+int trace_aps_create_tx(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 4;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    bpf_usdt_readarg(2, ctx, &data.use_aps);\n+    bpf_usdt_readarg(3, ctx, &data.success);\n+    bpf_usdt_readarg(4, ctx, &data.fee);\n+    bpf_usdt_readarg(5, ctx, &data.change_pos);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\"\"\"\n+\n+\n+class CoinSelectionTracepointTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_platform_not_linux()\n+        self.skip_if_no_bitcoind_tracepoints()\n+        self.skip_if_no_python_bcc()\n+        self.skip_if_no_bpf_permissions()\n+        self.skip_if_no_wallet()\n+\n+    def get_tracepoints(self, expected_types):\n+        events = []\n+        try:\n+            for i in range(0, 6):\n+                event = self.bpf[\"coin_selection_events\"].pop()\n+                assert_equal(event.wallet_name.decode(), self.default_wallet_name)\n+                assert_equal(event.type, expected_types[i])\n+                events.append(event)\n+            else:\n+                # If the loop exits successfully instead of throwing a KeyError, then we have had\n+                # more events than expected. There should be no more than 5 events.\n+                assert False\n+        except KeyError:\n+            assert_equal(len(events), len(expected_types))\n+            return events\n+\n+\n+    def determine_selection_from_usdt(self, events):\n+        success = None\n+        use_aps = None\n+        algo = None\n+        waste = None\n+        change_pos = None\n+\n+        is_aps = False\n+        sc_events = []\n+        for event in events:\n+            if event.type == 1:\n+                if not is_aps:\n+                    algo = event.algo.decode()\n+                    waste = event.waste\n+                sc_events.append(event)\n+            elif event.type == 2:\n+                success = event.success == 1\n+                if not is_aps:\n+                    change_pos = event.change_pos\n+            elif event.type == 3:\n+                is_aps = True\n+            elif event.type == 4:\n+                assert is_aps\n+                if event.use_aps == 1:\n+                    use_aps = True\n+                    assert_equal(len(sc_events), 2)\n+                    algo = sc_events[1].algo.decode()\n+                    waste = sc_events[1].waste\n+                    change_pos = event.change_pos\n+        return success, use_aps, algo, waste, change_pos\n+\n+    def run_test(self):\n+        self.log.info(\"hook into the coin_selection tracepoints\")\n+        ctx = USDT(pid=self.nodes[0].process.pid)\n+        ctx.enable_probe(probe=\"coin_selection:selected_coins\", fn_name=\"trace_selected_coins\")\n+        ctx.enable_probe(probe=\"coin_selection:normal_create_tx_internal\", fn_name=\"trace_normal_create_tx\")\n+        ctx.enable_probe(probe=\"coin_selection:attempting_aps_create_tx\", fn_name=\"trace_attempt_aps\")\n+        ctx.enable_probe(probe=\"coin_selection:aps_create_tx_internal\", fn_name=\"trace_aps_create_tx\")\n+        self.bpf = BPF(text=coinselection_tracepoints_program, usdt_contexts=[ctx], debug=0)\n+\n+        self.log.info(\"Prepare wallets\")\n+        self.generate(self.nodes[0], 101)\n+        wallet = self.nodes[0].get_wallet_rpc(self.default_wallet_name)\n+\n+        self.log.info(\"Sending a transaction should result in all tracepoints\")\n+        # We should have 5 tracepoints in the order:\n+        # 1. selected_coins (type 1)\n+        # 2. normal_create_tx_internal (type 2)\n+        # 3. attempting_aps_create_tx (type 3)\n+        # 4. selected_coins (type 1)\n+        # 5. aps_create_tx_internal (type 4)\n+        wallet.sendtoaddress(wallet.getnewaddress(), 10)\n+        events = self.get_tracepoints([1, 2, 3, 1, 4])\n+        success, use_aps, algo, waste, change_pos = self.determine_selection_from_usdt(events)\n+        assert_equal(success, True)\n+        assert_greater_than(change_pos, -1)\n+\n+        self.log.info(\"Failing to fund results in 1 tracepoint\")\n+        # We should have 1 tracepoints in the order\n+        # 1. normal_create_tx_internal (type 2)\n+        assert_raises_rpc_error(-6, \"Insufficient funds\", wallet.sendtoaddress, wallet.getnewaddress(), 102 * 50)\n+        events = self.get_tracepoints([2])\n+        success, use_aps, algo, waste, change_pos = self.determine_selection_from_usdt(events)\n+        assert_equal(success, False)\n+\n+        self.log.info(\"Explicitly enabling APS results in 2 tracepoints\")\n+        # We should have 2 tracepoints in the order\n+        # 1. selected_coins (type 1)\n+        # 2. normal_create_tx_internal (type 2)\n+        wallet.setwalletflag(\"avoid_reuse\")\n+        wallet.sendtoaddress(address=wallet.getnewaddress(), amount=10, avoid_reuse=True)\n+        events = self.get_tracepoints([1, 2])\n+        success, use_aps, algo, waste, change_pos = self.determine_selection_from_usdt(events)\n+        assert_equal(success, True)\n+        assert_equal(use_aps, None)",
      "path": "test/functional/interface_usdt_coinselection.py",
      "position": 202,
      "original_position": 204,
      "commit_id": "ab5af9ca7293239ffc24ea7e23159b8184543f94",
      "original_commit_id": "421c9319767ab1fa75833a53151984633aa666e7",
      "in_reply_to_id": 854979774,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "No, this test doesn't make any assumptions about what coin selection algorithm was used.",
      "created_at": "2022-04-21T15:19:12Z",
      "updated_at": "2022-04-21T15:19:12Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#discussion_r855305489",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/855305489"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24644"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 202,
      "original_line": 202,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856610862",
      "pull_request_review_id": 950638342,
      "id": 856610862,
      "node_id": "PRRC_kwDOABII584zDtgu",
      "diff_hunk": "@@ -0,0 +1,210 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"  Tests the coin_selection:* tracepoint API interface.\n+     See https://github.com/bitcoin/bitcoin/blob/master/doc/tracing.md#context-coin_selection\n+\"\"\"\n+\n+import ctypes\n+from io import BytesIO\n+# Test will be skipped if we don't have bcc installed\n+try:\n+    from bcc import BPF, USDT # type: ignore[import]\n+except ImportError:\n+    pass\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_greater_than,\n+    assert_raises_rpc_error,\n+)\n+\n+coinselection_tracepoints_program = \"\"\"\n+#include <uapi/linux/ptrace.h>\n+\n+#define WALLET_NAME_LENGTH 16\n+#define ALGO_NAME_LENGTH 16\n+\n+struct event_data\n+{\n+    u8 type;\n+    char wallet_name[WALLET_NAME_LENGTH];\n+\n+    // selected coins event\n+    char algo[ALGO_NAME_LENGTH];\n+    s64 target;\n+    s64 waste;\n+    s64 selected_value;\n+\n+    // create tx event\n+    u8 success;\n+    s64 fee;\n+    s32 change_pos;\n+\n+    // aps create tx event\n+    u8 use_aps;\n+};\n+\n+BPF_QUEUE(coin_selection_events, struct event_data, 1024);\n+\n+int trace_selected_coins(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 1;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    bpf_usdt_readarg_p(2, ctx, &data.algo, ALGO_NAME_LENGTH);\n+    bpf_usdt_readarg(3, ctx, &data.target);\n+    bpf_usdt_readarg(4, ctx, &data.waste);\n+    bpf_usdt_readarg(5, ctx, &data.selected_value);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\n+int trace_normal_create_tx(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 2;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    bpf_usdt_readarg(2, ctx, &data.success);\n+    bpf_usdt_readarg(3, ctx, &data.fee);\n+    bpf_usdt_readarg(4, ctx, &data.change_pos);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\n+int trace_attempt_aps(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 3;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\n+int trace_aps_create_tx(struct pt_regs *ctx) {\n+    struct event_data data;\n+    __builtin_memset(&data, 0, sizeof(data));\n+    data.type = 4;\n+    bpf_usdt_readarg_p(1, ctx, &data.wallet_name, WALLET_NAME_LENGTH);\n+    bpf_usdt_readarg(2, ctx, &data.use_aps);\n+    bpf_usdt_readarg(3, ctx, &data.success);\n+    bpf_usdt_readarg(4, ctx, &data.fee);\n+    bpf_usdt_readarg(5, ctx, &data.change_pos);\n+    coin_selection_events.push(&data, 0);\n+    return 0;\n+}\n+\"\"\"\n+\n+\n+class CoinSelectionTracepointTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_platform_not_linux()\n+        self.skip_if_no_bitcoind_tracepoints()\n+        self.skip_if_no_python_bcc()\n+        self.skip_if_no_bpf_permissions()\n+        self.skip_if_no_wallet()\n+\n+    def get_tracepoints(self, expected_types):\n+        events = []\n+        try:\n+            for i in range(0, 6):\n+                event = self.bpf[\"coin_selection_events\"].pop()\n+                assert_equal(event.wallet_name.decode(), self.default_wallet_name)\n+                assert_equal(event.type, expected_types[i])\n+                events.append(event)\n+            else:\n+                # If the loop exits successfully instead of throwing a KeyError, then we have had\n+                # more events than expected. There should be no more than 5 events.\n+                assert False\n+        except KeyError:\n+            assert_equal(len(events), len(expected_types))\n+            return events\n+\n+\n+    def determine_selection_from_usdt(self, events):\n+        success = None\n+        use_aps = None\n+        algo = None\n+        waste = None\n+        change_pos = None\n+\n+        is_aps = False\n+        sc_events = []\n+        for event in events:\n+            if event.type == 1:\n+                if not is_aps:\n+                    algo = event.algo.decode()\n+                    waste = event.waste\n+                sc_events.append(event)\n+            elif event.type == 2:\n+                success = event.success == 1\n+                if not is_aps:\n+                    change_pos = event.change_pos\n+            elif event.type == 3:\n+                is_aps = True\n+            elif event.type == 4:\n+                assert is_aps\n+                if event.use_aps == 1:\n+                    use_aps = True\n+                    assert_equal(len(sc_events), 2)\n+                    algo = sc_events[1].algo.decode()\n+                    waste = sc_events[1].waste\n+                    change_pos = event.change_pos\n+        return success, use_aps, algo, waste, change_pos\n+\n+    def run_test(self):\n+        self.log.info(\"hook into the coin_selection tracepoints\")\n+        ctx = USDT(pid=self.nodes[0].process.pid)\n+        ctx.enable_probe(probe=\"coin_selection:selected_coins\", fn_name=\"trace_selected_coins\")\n+        ctx.enable_probe(probe=\"coin_selection:normal_create_tx_internal\", fn_name=\"trace_normal_create_tx\")\n+        ctx.enable_probe(probe=\"coin_selection:attempting_aps_create_tx\", fn_name=\"trace_attempt_aps\")\n+        ctx.enable_probe(probe=\"coin_selection:aps_create_tx_internal\", fn_name=\"trace_aps_create_tx\")\n+        self.bpf = BPF(text=coinselection_tracepoints_program, usdt_contexts=[ctx], debug=0)\n+\n+        self.log.info(\"Prepare wallets\")\n+        self.generate(self.nodes[0], 101)\n+        wallet = self.nodes[0].get_wallet_rpc(self.default_wallet_name)\n+\n+        self.log.info(\"Sending a transaction should result in all tracepoints\")\n+        # We should have 5 tracepoints in the order:\n+        # 1. selected_coins (type 1)\n+        # 2. normal_create_tx_internal (type 2)\n+        # 3. attempting_aps_create_tx (type 3)\n+        # 4. selected_coins (type 1)\n+        # 5. aps_create_tx_internal (type 4)\n+        wallet.sendtoaddress(wallet.getnewaddress(), 10)\n+        events = self.get_tracepoints([1, 2, 3, 1, 4])\n+        success, use_aps, algo, waste, change_pos = self.determine_selection_from_usdt(events)\n+        assert_equal(success, True)\n+        assert_greater_than(change_pos, -1)",
      "path": "test/functional/interface_usdt_coinselection.py",
      "position": 183,
      "original_position": 185,
      "commit_id": "ab5af9ca7293239ffc24ea7e23159b8184543f94",
      "original_commit_id": "421c9319767ab1fa75833a53151984633aa666e7",
      "in_reply_to_id": 854977517,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "As a sanity check that it's not malformed, you could `assert algo in [\"bnb\", \"srd\", \"knapsack\", \"manual\"]`",
      "created_at": "2022-04-22T22:17:52Z",
      "updated_at": "2022-04-22T22:26:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#discussion_r856610862",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856610862"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24644"
        }
      },
      "start_line": 182,
      "original_start_line": 184,
      "start_side": "RIGHT",
      "line": 183,
      "original_line": 183,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858636253",
      "pull_request_review_id": 953267748,
      "id": 858636253,
      "node_id": "PRRC_kwDOABII584zLb_d",
      "diff_hunk": "@@ -254,16 +254,17 @@ struct SelectionResult\n private:\n     /** Set of inputs selected by the algorithm to use in the transaction */\n     std::set<COutput> m_selected_inputs;\n-    /** The target the algorithm selected for. Note that this may not be equal to the recipient amount as it can include non-input fees */\n-    const CAmount m_target;\n     /** Whether the input values for calculations should be the effective value (true) or normal value (false) */\n     bool m_use_effective{false};\n     /** The computed waste */\n     std::optional<CAmount> m_waste;\n-    /** The algorithm used to produce this result */\n-    SelectionAlgorithm m_algo;",
      "path": "src/wallet/coinselection.h",
      "position": 11,
      "original_position": 11,
      "commit_id": "ab5af9ca7293239ffc24ea7e23159b8184543f94",
      "original_commit_id": "8e3f39e4fa2d8c63bc697c9ebd303965fcccea55",
      "in_reply_to_id": null,
      "user": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "why is `m_algo` added as private and then moved here to public? wouldn't it be better to move `m_target` to public and add `m_algo` in the first commit?",
      "created_at": "2022-04-26T12:10:28Z",
      "updated_at": "2022-04-26T12:13:12Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#discussion_r858636253",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858636253"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24644"
        }
      },
      "start_line": null,
      "original_start_line": 257,
      "start_side": "LEFT",
      "line": null,
      "original_line": 264,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858756378",
      "pull_request_review_id": 953443021,
      "id": 858756378,
      "node_id": "PRRC_kwDOABII584zL5Ua",
      "diff_hunk": "@@ -254,16 +254,17 @@ struct SelectionResult\n private:\n     /** Set of inputs selected by the algorithm to use in the transaction */\n     std::set<COutput> m_selected_inputs;\n-    /** The target the algorithm selected for. Note that this may not be equal to the recipient amount as it can include non-input fees */\n-    const CAmount m_target;\n     /** Whether the input values for calculations should be the effective value (true) or normal value (false) */\n     bool m_use_effective{false};\n     /** The computed waste */\n     std::optional<CAmount> m_waste;\n-    /** The algorithm used to produce this result */\n-    SelectionAlgorithm m_algo;",
      "path": "src/wallet/coinselection.h",
      "position": 11,
      "original_position": 11,
      "commit_id": "ab5af9ca7293239ffc24ea7e23159b8184543f94",
      "original_commit_id": "8e3f39e4fa2d8c63bc697c9ebd303965fcccea55",
      "in_reply_to_id": 858636253,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Indeed, I forgot to squash those separately when implementing this. Will move if I have to re-touch.",
      "created_at": "2022-04-26T14:04:22Z",
      "updated_at": "2022-04-26T14:04:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24644#discussion_r858756378",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858756378"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24644"
        }
      },
      "start_line": null,
      "original_start_line": 257,
      "start_side": "LEFT",
      "line": null,
      "original_line": 264,
      "side": "LEFT"
    }
  ]
}