{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24097",
    "id": 825721641,
    "node_id": "PR_kwDOABII584xN4Mp",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/24097",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/24097.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/24097.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24097",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24097/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24097/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24097/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/37d150d8c5ffcb2bddcd99951a739e97571194c7",
    "number": 24097,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "Replace RecursiveMutex m_cs_banned with Mutex, and rename it",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This PR is an alternative to bitcoin/bitcoin#24092. Last two commit have been cherry-picked from the latter.",
    "labels": [
      {
        "id": 135961,
        "node_id": "MDU6TGFiZWwxMzU5NjE=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
        "name": "Refactoring",
        "color": "E6F6D6",
        "default": false
      }
    ],
    "created_at": "2022-01-18T17:30:24Z",
    "updated_at": "2023-09-20T16:27:00Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "21c1455b0d8c9ac1c79a72892be6c243d5397caa",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "hebasto:220118-banman",
      "ref": "220118-banman",
      "sha": "37d150d8c5ffcb2bddcd99951a739e97571194c7",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 143212778,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNDMyMTI3Nzg=",
        "name": "bitcoin",
        "full_name": "hebasto/bitcoin",
        "owner": {
          "login": "hebasto",
          "id": 32963518,
          "node_id": "MDQ6VXNlcjMyOTYzNTE4",
          "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/hebasto",
          "html_url": "https://github.com/hebasto",
          "followers_url": "https://api.github.com/users/hebasto/followers",
          "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
          "organizations_url": "https://api.github.com/users/hebasto/orgs",
          "repos_url": "https://api.github.com/users/hebasto/repos",
          "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/hebasto/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/hebasto/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/hebasto/bitcoin",
        "archive_url": "https://api.github.com/repos/hebasto/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/hebasto/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/hebasto/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/hebasto/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/hebasto/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/hebasto/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/hebasto/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/hebasto/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/hebasto/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/hebasto/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/hebasto/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/hebasto/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/hebasto/bitcoin/events",
        "forks_url": "https://api.github.com/repos/hebasto/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/hebasto/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/hebasto/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/hebasto/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/hebasto/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/hebasto/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/hebasto/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/hebasto/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/hebasto/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/hebasto/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/hebasto/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/hebasto/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/hebasto/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/hebasto/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/hebasto/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/hebasto/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:hebasto/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/hebasto/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/hebasto/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/hebasto/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/hebasto/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/hebasto/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/hebasto/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/hebasto/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/hebasto/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/hebasto/bitcoin/hooks",
        "svn_url": "https://github.com/hebasto/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 4,
        "stargazers_count": 14,
        "watchers_count": 14,
        "size": 255897,
        "default_branch": "master",
        "open_issues_count": 2,
        "is_template": false,
        "topics": [
          "bitcoin-core"
        ],
        "has_issues": true,
        "has_projects": false,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-09-20T11:44:41Z",
        "created_at": "2018-08-01T21:59:57Z",
        "updated_at": "2023-08-25T08:31:18Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "29d540b7ada890dd588c4825d40c27c5e6f20061",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35714,
        "stargazers_count": 71425,
        "watchers_count": 71425,
        "size": 240039,
        "default_branch": "master",
        "open_issues_count": 674,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-09-20T16:57:50Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-09-20T16:56:43Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24097"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 32,
    "deletions": 46,
    "changed_files": 2,
    "commits": 5,
    "review_comments": 24,
    "comments": 8
  },
  "events": [
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-18T17:31:56Z",
      "updated_at": "2022-01-18T17:31:56Z",
      "source": {
        "issue": {
          "id": 1106562854,
          "node_id": "PR_kwDOABII584xL2sm",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24092",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24092/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24092/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24092/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/24092",
          "number": 24092,
          "state": "closed",
          "state_reason": null,
          "title": "refactor: replace RecursiveMutex `m_cs_banned` with Mutex (and rename)",
          "body": "This PR is related to #19303 and gets rid of the RecursiveMutex `m_cs_banned`.\r\n\r\nThe last commit prevents double lock for `m_banned_mutex` by changing `BanMan::GetBanned()` to lock it only after `BanMan::SweepBanned()` releases it.",
          "user": {
            "login": "w0xlt",
            "id": 94266259,
            "node_id": "U_kgDOBZ5jkw",
            "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/w0xlt",
            "html_url": "https://github.com/w0xlt",
            "followers_url": "https://api.github.com/users/w0xlt/followers",
            "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
            "organizations_url": "https://api.github.com/users/w0xlt/orgs",
            "repos_url": "https://api.github.com/users/w0xlt/repos",
            "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/w0xlt/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "comments": 9,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24092",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/24092",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/24092.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/24092.patch"
          },
          "closed_at": "2022-01-18T21:30:23Z",
          "created_at": "2022-01-18T07:27:54Z",
          "updated_at": "2023-01-18T10:08:22Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "convert_to_draft",
      "id": 5912280279,
      "node_id": "CTDE_lADOABII585B_jgDzwAAAAFgZjzX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5912280279",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-18T17:36:19Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 5912378136,
      "node_id": "HRFPE_lADOABII585B_jgDzwAAAAFgZ7sY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5912378136",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-18T17:53:14Z"
    },
    {
      "event": "commented",
      "id": 1015670524,
      "node_id": "IC_kwDOABII5848ieb8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1015670524",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-18T17:58:20Z",
      "updated_at": "2023-01-10T03:16:08Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#issuecomment-1015670524",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24097"
    },
    {
      "event": "ready_for_review",
      "id": 5912447950,
      "node_id": "RFRE_lADOABII585B_jgDzwAAAAFgaMvO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5912447950",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-18T18:05:30Z"
    },
    {
      "event": "reviewed",
      "id": 856053222,
      "node_id": "PRR_kwDOABII584zBlXm",
      "url": null,
      "actor": null,
      "commit_id": "39e101f4a257240f098432d6fa77b322924c0109",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "tACK 39e101f\r\n\r\nIn addition to the refactoring, this PR:\r\n\r\n. Adds lock acquisition in `BanMan::DumpBanlist` before calling `SweepBanned()`.\r\n\r\n. Replaces `BanMan::SetBannedSetDirty() ` with `WITH_LOCK(m_cs_banned, m_is_dirty = false);` (write operation) or simply `m_is_dirty` (non-blocking read operation).\r\n\r\n. `SweepBanned()` no longer locks the mutex, just checks that it is held. This function is now called with `WITH_LOCK(m_banned_mutex, SweepBanned());`.\r\n\r\n. `BanMan::DumpBanlist` called `BanMan::SweepBanned()` twice (directly and via `BanMan::GetBanned`). Now it gets rid of  `BanMan::GetBanned` and handles `banmap_t banmap`  within the lock scope.",
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#pullrequestreview-856053222",
      "submitted_at": "2022-01-18T22:39:27Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24097"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-19T01:22:17Z",
      "updated_at": "2022-01-19T01:22:17Z",
      "source": {
        "issue": {
          "id": 687612123,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NDc1MDA4MTgw",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19825",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19825/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19825/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19825/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/19825",
          "number": 19825,
          "state": "closed",
          "state_reason": null,
          "title": "rpc: simpler setban and new ban manipulation commands",
          "body": "Initially motivated by: https://github.com/bitcoin/bitcoin/pull/19219/files#r442410269\r\n\r\n### Objectives:\r\n1. Consolidate `BanMan` functions\r\n2. Throw fewer RPC errors. If user intent is accomplished, the command is successful even if no change was made.\r\n\r\n### Changes:\r\n- Remove `BanMan::Ban(CNetAddr&)` and use `BanMan::Ban(CSubNet&)` instead (ips are subnets of one)\r\n  - RPC change: `setban subnet/ip add` now allows adding a ban entry for an ip in an already banned subnet. No error will be thrown so long as the user intent is accomplished.\r\n- Remove `BanMan::Unban(CNetAddr&)` and use `BanMan::Unban(CSubNet&)` instead (ips are subnets of one)\r\n  - RPC change: Unbanning a non-banned subnet will no longer raise an rpc error as user intent is accomplished.\r\n- Remove unused `BanMan::IsBanned(CSubNet&)`\r\n- RPC change: Add `setban ip removeall` to remove all ban entries that include an IP address\r\n- RPC change: Add `listbanned ip` to return all ban entries that include an IP address",
          "user": {
            "login": "dhruv",
            "id": 856960,
            "node_id": "MDQ6VXNlcjg1Njk2MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/856960?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dhruv",
            "html_url": "https://github.com/dhruv",
            "followers_url": "https://api.github.com/users/dhruv/followers",
            "following_url": "https://api.github.com/users/dhruv/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/dhruv/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/dhruv/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/dhruv/subscriptions",
            "organizations_url": "https://api.github.com/users/dhruv/orgs",
            "repos_url": "https://api.github.com/users/dhruv/repos",
            "events_url": "https://api.github.com/users/dhruv/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/dhruv/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            },
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 32,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19825",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/19825",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/19825.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/19825.patch"
          },
          "closed_at": "2023-04-09T03:22:45Z",
          "created_at": "2020-08-27T23:50:01Z",
          "updated_at": "2023-04-09T03:22:45Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-19T07:42:32Z",
      "updated_at": "2022-01-19T07:42:32Z",
      "source": {
        "issue": {
          "id": 640455898,
          "node_id": "MDU6SXNzdWU2NDA0NTU4OTg=",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19303",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19303/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19303/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19303/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/19303",
          "number": 19303,
          "state": "open",
          "state_reason": null,
          "title": "Replace all of the RecursiveMutex instances with the Mutex ones",
          "body": "**UPD 2023-04-18**. See a shortlist [here](https://github.com/bitcoin/bitcoin/issues/19303#issuecomment-1513337566).\r\n\r\n---\r\n\r\nThis is a tracking issue for the long-term goal to replace all of the `RecursiveMutex` instances with the `Mutex` ones throughout the code base.\r\n\r\nAnthony Williams (_C++ Concurrency in Action_, 2019, 3.3.3 Recursive locking):\r\n> Most of the time, if you think you want a recursive mutex, you probably need to change your design instead.\r\n\r\nAnthony Towns, https://github.com/bitcoin/bitcoin/issues/19303#issuecomment-646956780:\r\n> ... the actual goal is \"make locking logic easier to follow\" rather than \"remove RecurviseMutex\"\r\n\r\nShould be noted, to insure that mutex locking policy has not been changed by accident in non-trivial cases, all of the related code branches must be covered by appropriate lock assertions: `AssertLockHeld()` or `AssertLockNotHeld()`.\r\n\r\nAlso Clang Thread Safety Analysis annotations with [Negative Capabilities](https://clang.llvm.org/docs/ThreadSafetyAnalysis.html#negative) are very useful (see #19249) but are not a panacea, of course :)\r\n\r\n---\r\n\r\n- [x] `RecursiveMutex cs_Shutdown` (#19180)\r\n- [x] `RecursiveMutex cs_nTimeOffset` (#19189)\r\n- [x] `RecursiveMutex cs_proxyInfos` (#19190)\r\n- ~`RecursiveMutex csPathCached` (#19213)~\r\n- [x] `RecursiveMutex cs_warnings` (#19220)\r\n- [x] `RecursiveMutex CAddrMan::cs` (#19238)\r\n- [ ] `RecursiveMutex BanMan::m_cs_banned` (#24092, #24097)\r\n- [x] `RecursiveMutex cs_mapLocalHost` (#24099)\r\n- [x] `RecursiveMutex CConnman::cs_totalBytesRecv` (#22829)\r\n- [x] `RecursiveMutex CConnman::cs_totalBytesSent` (#24157)\r\n- [x] `RecursiveMutex CConnman::m_addr_fetches_mutex` (#22829)\r\n- [x] `RecursiveMutex CConnman::cs_vAddedNodes` (#22829)\r\n- [ ] `RecursiveMutex CConnman::m_nodes_mutex`\r\n- [x] `RecursiveMutex CNode::cs_vSend` (#19915)\r\n- [x] `RecursiveMutex CNode::cs_hSocket` (#19915)\r\n- [x] `RecursiveMutex CNode::cs_vRecv` (#19915)\r\n- ~`RecursiveMutex CNode::cs_vProcessMsg` (#24122)~\r\n- ~`RecursiveMutex CNode::cs_sendProcessing` (#25597)~\r\n- [x] `RecursiveMutex CNode::cs_SubVer` (#24079)\r\n- [x] `RecursiveMutex CNode::cs_inventory` (#19347)\r\n- [x] `RecursiveMutex CNode::cs_addrName` (removed in #22782)\r\n- [x] `RecursiveMutex CNode::cs_addrLocal` #24108\r\n- [ ] `RecursiveMutex Peer::TxRelay::m_bloom_filter_mutex`\r\n- [ ] `RecursiveMutex Peer::TxRelay::m_tx_inventory_mutex` (#24125)\r\n- [x] `RecursiveMutex CNode::TxRelay::cs_feeFilter` (#18819)\r\n- ~`RecursiveMutex g_cs_orphans`~\r\n- [x] `RecursiveMutex g_cs_recent_confirmed_transactions` (#19378)\r\n- [x] `RecursiveMutex cs_most_recent_block` (#24062)\r\n- [x] `RecursiveMutex CBlockPolicyEstimator::m_cs_fee_estimator` (#22014)\r\n- [x] `RecursiveMutex cs_rpcWarmup` (#19399)\r\n- [x] `RecursiveMutex SingleThreadedSchedulerClient::m_cs_callbacks_pending` (#24069)\r\n- [ ] `RecursiveMutex BlockManager::cs_LastBlockFile`\r\n- [ ] `RecursiveMutex FillableSigningProvider::cs_KeyStore`\r\n- [ ] `RecursiveMutex ArgsManager::cs_args`\r\n- [x] `RecursiveMutex CChainState::cs_nBlockSequenceId` (#22824)\r\n- [x] `RecursiveMutex CChainState::m_cs_chainstate` (#24103)\r\n- [ ] `RecursiveMutex cs_db`\r\n- [ ] `RecursiveMutex DescriptorScriptPubKeyMan::cs_desc_man`\r\n- [x] `RecursiveMutex cs_wallets` (#19101)\r\n- [ ] `RecursiveMutex CWallet::cs_wallet` (#19773,  #19833)\r\n\r\nand\r\n\r\n- `RecursiveMutex CTxMemPool::cs` (#19306, ~#19647~, #19652, #19854, #19872, #19901, #19909, #19917)\r\n- `RecursiveMutex cs_main`\r\n",
          "user": {
            "login": "hebasto",
            "id": 32963518,
            "node_id": "MDQ6VXNlcjMyOTYzNTE4",
            "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hebasto",
            "html_url": "https://github.com/hebasto",
            "followers_url": "https://api.github.com/users/hebasto/followers",
            "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
            "organizations_url": "https://api.github.com/users/hebasto/orgs",
            "repos_url": "https://api.github.com/users/hebasto/repos",
            "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/hebasto/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 64584,
              "node_id": "MDU6TGFiZWw2NDU4NA==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Brainstorming",
              "name": "Brainstorming",
              "color": "ebd775",
              "default": false
            },
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 16,
          "created_at": "2020-06-17T13:45:18Z",
          "updated_at": "2023-05-17T08:08:36Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 856476904,
      "node_id": "PRR_kwDOABII584zDMzo",
      "url": null,
      "actor": null,
      "commit_id": "39e101f4a257240f098432d6fa77b322924c0109",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code Review ACK 39e101f4a257240f098432d6fa77b322924c0109\r\n\r\nI prefer that the **SweepBanned** function, instead of locking `m_cs_banned` by itself, now asserts it being locked by its caller function. This prevents any need for double locking, and hence `m_cs_banned` could be safely converted from **RecursiveMutex** to **Mutex**.\r\n\r\nThe renaming of `m_cs_banned` to `m_banned_mutex` is an improvement, and I agree with it.\r\n\r\nThe conversion of `m_banned_mutex` from **RecursiveMutex** to **Mutex** is very cleanly implemented and is clutter-free.\r\n",
      "user": {
        "login": "shaavan",
        "id": 85434418,
        "node_id": "MDQ6VXNlcjg1NDM0NDE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/85434418?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/shaavan",
        "html_url": "https://github.com/shaavan",
        "followers_url": "https://api.github.com/users/shaavan/followers",
        "following_url": "https://api.github.com/users/shaavan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/shaavan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/shaavan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/shaavan/subscriptions",
        "organizations_url": "https://api.github.com/users/shaavan/orgs",
        "repos_url": "https://api.github.com/users/shaavan/repos",
        "events_url": "https://api.github.com/users/shaavan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/shaavan/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#pullrequestreview-856476904",
      "submitted_at": "2022-01-19T08:55:08Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24097"
    },
    {
      "event": "reviewed",
      "id": 860704979,
      "node_id": "PRR_kwDOABII584zTVDT",
      "url": null,
      "actor": null,
      "commit_id": "39e101f4a257240f098432d6fa77b322924c0109",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Code review ACK 39e101f4a257240f098432d6fa77b322924c0109.\r\n\r\nThere is a behavior change where `m_client_interface->BannedListChanged()` is now called with the lock held. The only place that connects to that signal is in `ClientModel` where `updateBanlist` is called asynchronously, so I'd say this change is deadlock-free.",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#pullrequestreview-860704979",
      "submitted_at": "2022-01-24T09:49:53Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24097"
    },
    {
      "event": "commented",
      "id": 1019920271,
      "node_id": "IC_kwDOABII5848yr-P",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019920271",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-24T10:01:47Z",
      "updated_at": "2022-01-24T10:01:47Z",
      "author_association": "MEMBER",
      "body": "@promag \r\n> There is a behavior change where `m_client_interface->BannedListChanged()` is now called with the lock held.\r\n\r\nThe same behavior is on the master branch: https://github.com/bitcoin/bitcoin/blob/d0bf9bb6a539f151ec92725d20a2b6c22cb095a5/src/banman.cpp#L160-L166\r\nisn't it?",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#issuecomment-1019920271",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24097"
    },
    {
      "event": "mentioned",
      "id": 5941091598,
      "node_id": "MEE_lADOABII585B_jgDzwAAAAFiHd0O",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5941091598",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-24T10:01:47Z"
    },
    {
      "event": "subscribed",
      "id": 5941091610,
      "node_id": "SE_lADOABII585B_jgDzwAAAAFiHd0a",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5941091610",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-24T10:01:47Z"
    },
    {
      "event": "commented",
      "id": 1019926528,
      "node_id": "IC_kwDOABII5848ytgA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019926528",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-24T10:08:14Z",
      "updated_at": "2022-01-24T10:08:14Z",
      "author_association": "MEMBER",
      "body": "@hebasto right! Only checked that from `DumpBanlist` the lock isn't held, but from `GetBanned` it is. So this change makes it consistent  ",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#issuecomment-1019926528",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24097"
    },
    {
      "event": "mentioned",
      "id": 5941136859,
      "node_id": "MEE_lADOABII585B_jgDzwAAAAFiHo3b",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5941136859",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-24T10:08:14Z"
    },
    {
      "event": "subscribed",
      "id": 5941136865,
      "node_id": "SE_lADOABII585B_jgDzwAAAAFiHo3h",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5941136865",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-24T10:08:14Z"
    },
    {
      "event": "reviewed",
      "id": 862644975,
      "node_id": "PRR_kwDOABII584zaurv",
      "url": null,
      "actor": null,
      "commit_id": "39e101f4a257240f098432d6fa77b322924c0109",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#pullrequestreview-862644975",
      "submitted_at": "2022-01-25T17:43:42Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24097"
    },
    {
      "event": "labeled",
      "id": 5951716248,
      "node_id": "LE_lADOABII585B_jgDzwAAAAFiv_uY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5951716248",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-25T17:44:15Z",
      "label": {
        "name": "Refactoring",
        "color": "E6F6D6"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-26T15:32:35Z",
      "updated_at": "2022-01-26T15:32:35Z",
      "source": {
        "issue": {
          "id": 1115156153,
          "node_id": "PR_kwDOABII584xn5Q9",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24168",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24168/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24168/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24168/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/24168",
          "number": 24168,
          "state": "closed",
          "state_reason": null,
          "title": "Fix some race conditions in `BanMan::DumpBanlist()`",
          "body": "This PR split from bitcoin/bitcoin#24097 with some additions. This makes the following switch from `RecursiveMutex` to `Mutex` a pure refactoring.\r\n\r\nSee details in commit messages.",
          "user": {
            "login": "hebasto",
            "id": 32963518,
            "node_id": "MDQ6VXNlcjMyOTYzNTE4",
            "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hebasto",
            "html_url": "https://github.com/hebasto",
            "followers_url": "https://api.github.com/users/hebasto/followers",
            "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
            "organizations_url": "https://api.github.com/users/hebasto/orgs",
            "repos_url": "https://api.github.com/users/hebasto/repos",
            "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/hebasto/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": true,
          "comments": 4,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24168",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/24168",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/24168.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/24168.patch"
          },
          "closed_at": "2022-01-31T07:57:11Z",
          "created_at": "2022-01-26T15:32:35Z",
          "updated_at": "2023-01-31T10:10:32Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1022317164,
      "node_id": "IC_kwDOABII584871Js",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1022317164",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-26T15:35:38Z",
      "updated_at": "2022-01-26T15:36:37Z",
      "author_association": "MEMBER",
      "body": "@MarcoFalke \r\n> Strictly speaking, fixing the logical race is a bugfix, so it might be better to do it first to allow easier cherry-picking to older commits. Would you mind going with the fix first?\r\n\r\nI split bugfixes into #24168.\r\n\r\n---\r\n\r\nFellow reviewers, please review #24168 first.\r\n\r\nConverting this to a draft for now.",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#issuecomment-1022317164",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24097"
    },
    {
      "event": "mentioned",
      "id": 5957568771,
      "node_id": "MEE_lADOABII585B_jgDzwAAAAFjGUkD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5957568771",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-26T15:35:38Z"
    },
    {
      "event": "subscribed",
      "id": 5957568781,
      "node_id": "SE_lADOABII585B_jgDzwAAAAFjGUkN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5957568781",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-26T15:35:38Z"
    },
    {
      "event": "convert_to_draft",
      "id": 5957570184,
      "node_id": "CTDE_lADOABII585B_jgDzwAAAAFjGU6I",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5957570184",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-26T15:35:48Z"
    },
    {
      "event": "referenced",
      "id": 5978708193,
      "node_id": "REFE_lADOABII585B_jgDzwAAAAFkW9jh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5978708193",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "eacc0e87f8a69e57fab0e5880416e3897a24922a",
      "commit_url": "https://api.github.com/repos/bitcoin-core/gui/commits/eacc0e87f8a69e57fab0e5880416e3897a24922a",
      "created_at": "2022-01-31T07:57:03Z"
    },
    {
      "event": "labeled",
      "id": 5978757192,
      "node_id": "LE_lADOABII585B_jgDzwAAAAFkXJhI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5978757192",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-31T08:06:49Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 5980053227,
      "node_id": "HRFPE_lADOABII585B_jgDzwAAAAFkcF7r",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5980053227",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-31T11:29:55Z"
    },
    {
      "event": "ready_for_review",
      "id": 5980056634,
      "node_id": "RFRE_lADOABII585B_jgDzwAAAAFkcGw6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5980056634",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-31T11:30:30Z"
    },
    {
      "event": "commented",
      "id": 1025645338,
      "node_id": "IC_kwDOABII5849Ihsa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1025645338",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-31T11:33:38Z",
      "updated_at": "2022-01-31T11:33:38Z",
      "author_association": "MEMBER",
      "body": "Rebased 39e101f4a257240f098432d6fa77b322924c0109 -> 0ad0288dcb462e4156ba8f619eebe2fa321ce7af ([pr24097.02](https://github.com/hebasto/bitcoin/commits/pr24097.02) -> [pr24097.03](https://github.com/hebasto/bitcoin/commits/pr24097.03)) on top of the merged #24168.",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#issuecomment-1025645338",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24097"
    },
    {
      "event": "unlabeled",
      "id": 5980349468,
      "node_id": "UNLE_lADOABII585B_jgDzwAAAAFkdOQc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5980349468",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-31T12:22:17Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 868975569,
      "node_id": "PRR_kwDOABII584zy4PR",
      "url": null,
      "actor": null,
      "commit_id": "0ad0288dcb462e4156ba8f619eebe2fa321ce7af",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK\r\n\r\nI had a nit suggestion and a doubt that I would like to discuss.",
      "user": {
        "login": "shaavan",
        "id": 85434418,
        "node_id": "MDQ6VXNlcjg1NDM0NDE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/85434418?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/shaavan",
        "html_url": "https://github.com/shaavan",
        "followers_url": "https://api.github.com/users/shaavan/followers",
        "following_url": "https://api.github.com/users/shaavan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/shaavan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/shaavan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/shaavan/subscriptions",
        "organizations_url": "https://api.github.com/users/shaavan/orgs",
        "repos_url": "https://api.github.com/users/shaavan/repos",
        "events_url": "https://api.github.com/users/shaavan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/shaavan/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#pullrequestreview-868975569",
      "submitted_at": "2022-02-01T11:10:23Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24097"
    },
    {
      "event": "referenced",
      "id": 5991249671,
      "node_id": "REFE_lADOABII585B_jgDzwAAAAFlGzcH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5991249671",
      "actor": {
        "login": "sidhujag",
        "id": 6238042,
        "node_id": "MDQ6VXNlcjYyMzgwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6238042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sidhujag",
        "html_url": "https://github.com/sidhujag",
        "followers_url": "https://api.github.com/users/sidhujag/followers",
        "following_url": "https://api.github.com/users/sidhujag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sidhujag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sidhujag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sidhujag/subscriptions",
        "organizations_url": "https://api.github.com/users/sidhujag/orgs",
        "repos_url": "https://api.github.com/users/sidhujag/repos",
        "events_url": "https://api.github.com/users/sidhujag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sidhujag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "b7b7bf20e3f9e8b95d47ef4c4d2bb902ffbd8f65",
      "commit_url": "https://api.github.com/repos/syscoin/syscoin/commits/b7b7bf20e3f9e8b95d47ef4c4d2bb902ffbd8f65",
      "created_at": "2022-02-01T21:08:28Z"
    },
    {
      "event": "convert_to_draft",
      "id": 6619140586,
      "node_id": "CTDE_lADOABII585B_jgDzwAAAAGKiBHq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6619140586",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-16T20:20:12Z"
    },
    {
      "event": "commented",
      "id": 1128097657,
      "node_id": "IC_kwDOABII585DPWd5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1128097657",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-16T20:20:46Z",
      "updated_at": "2022-05-16T20:20:46Z",
      "author_association": "MEMBER",
      "body": "Converted to draft for now. Please review #25149 first.",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#issuecomment-1128097657",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24097"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-18T05:35:33Z",
      "updated_at": "2022-05-18T05:35:33Z",
      "source": {
        "issue": {
          "id": 1237670622,
          "node_id": "PR_kwDOABII58436A5j",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25149",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25149/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25149/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25149/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/25149",
          "number": 25149,
          "state": "closed",
          "state_reason": null,
          "title": "refactor: Add thread safety annotation to `BanMan::SweepBanned()`",
          "body": "This PR adds a proper thread safety annotation to `BanMan::SweepBanned()`.\r\n\r\nAlso a simple refactoring applied.",
          "user": {
            "login": "hebasto",
            "id": 32963518,
            "node_id": "MDQ6VXNlcjMyOTYzNTE4",
            "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hebasto",
            "html_url": "https://github.com/hebasto",
            "followers_url": "https://api.github.com/users/hebasto/followers",
            "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
            "organizations_url": "https://api.github.com/users/hebasto/orgs",
            "repos_url": "https://api.github.com/users/hebasto/repos",
            "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/hebasto/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": true,
          "comments": 9,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25149",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/25149",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/25149.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/25149.patch"
          },
          "closed_at": "2022-05-24T07:17:00Z",
          "created_at": "2022-05-16T20:19:56Z",
          "updated_at": "2023-05-24T10:03:25Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "labeled",
      "id": 6666446434,
      "node_id": "LE_lADOABII585B_jgDzwAAAAGNWeZi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6666446434",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-24T07:21:12Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQ4OGMwZDg0NDBjZjY0MGVmNGYyYzdhNDBiOGI4YjMxYmZkMzhmMjM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d88c0d8440cf640ef4f2c7a40b8b8b31bfd38f23",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d88c0d8440cf640ef4f2c7a40b8b8b31bfd38f23",
      "tree": {
        "sha": "069b1a026081440d6bda07f819d586ff684551f3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/069b1a026081440d6bda07f819d586ff684551f3"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 069b1a026081440d6bda07f819d586ff684551f3\nparent aa5cd3cc6d47e8c372cbdc5b05dab717fed828c8\nauthor Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1642525325 +0200\ncommitter Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1653377600 +0200\n\nrefactor: Get rid of `BanMan::BannedSetIsDirty()`\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE0dvyxLlvLev0wWZUQQEIES5+qB8FAmKMikAACgkQQQEIES5+\nqB9k2RAAt6Z2FrKiTtci0sfA0EIm+f7GpNFilL+asiOez7tHPeYg5XinXHvhFXqG\nVLzKFjAS09S8VnuhuJprAMwYKhcKY6b4huuDrHFKAc+BVfgyI7BgEDgT41mNCFPk\nlXiaUgTKvCLtjYQly5Mgyj8LFhkejBqhj74mNtW8nRMkSvJJsockoy5bhVC2KZCR\nzJKJ5riUZxQxepYbwPzR2C4uDXW+abeBNUfB+gBoeu9Q9h0rjQ24fCminKURP2He\nPSdYcGjPAN3OZkb+RWg0D1RJdms5jm+0ssgR1KfQm1Qa0KbITj1s7o6Pvxh7I+aI\nUW/wxw9HxuVEdnpvpq2oLrefr9aBW+qKHHnB9kYMXspY1wQQv18YdcMbGsFAoo4O\ngPUIF4wmkmO5A5Ar88Yk2Ek0h6tHG+PhcgIECU5jUbO6Ak3OCqDD29KmaPSnWAIT\ntM470ZzMl0srsqxHRx4VbSLJkGcD7x+r3m+k7IrnZhkr8YHNL0TSWuZBcLrt6TEx\n2A2UnTb6l9cPqOUOwCIJhwzjmDfc1li6CRhqeS/KVj5NA+EyJ583vBmyi9yWd3rA\nx9njW/HX/xjnsaLDo79dMT5izmSzFfHiM1dfjOAl0L6mUa7h8A2Lj01U1eR6cr3b\nlXN/XyB/83YJevLylQWvP/8iMt0/CUxS/Ce3/ojIYAR9HeZJjBE=\n=bndU\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/aa5cd3cc6d47e8c372cbdc5b05dab717fed828c8",
          "sha": "aa5cd3cc6d47e8c372cbdc5b05dab717fed828c8",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/aa5cd3cc6d47e8c372cbdc5b05dab717fed828c8"
        }
      ],
      "message": "refactor: Get rid of `BanMan::BannedSetIsDirty()`",
      "committer": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2022-05-24T07:33:20Z"
      },
      "author": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2022-01-18T17:02:05Z"
      },
      "sha": "d88c0d8440cf640ef4f2c7a40b8b8b31bfd38f23"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDQ2NzA5YzVmMjdiZjZjYmM4ZWJhMTI5OGIwNGJkMDc5ZGEyY2RkZWQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/46709c5f27bf6cbc8eba1298b04bd079da2cdded",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/46709c5f27bf6cbc8eba1298b04bd079da2cdded",
      "tree": {
        "sha": "59972ae55acb43e58b706536d15a2dc9fd761310",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/59972ae55acb43e58b706536d15a2dc9fd761310"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 59972ae55acb43e58b706536d15a2dc9fd761310\nparent d88c0d8440cf640ef4f2c7a40b8b8b31bfd38f23\nauthor Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1642526282 +0200\ncommitter Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1653377645 +0200\n\nrefactor: Get rid of `BanMan::SetBannedSetDirty()`\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE0dvyxLlvLev0wWZUQQEIES5+qB8FAmKMim0ACgkQQQEIES5+\nqB+gkQ//eo7lBUUZMo4WWhd4JNCX637zGOQJvd56jOn/D8nZMUNl8/sGPnXwfHUk\n+18nwbjoI6IXgcWf/dW8ViWQDKw5e+nzKA5CZ17hRTuB7WVsSAVUP/yezFCBKN3z\ngk9JDYD58253o4TCHz0yO0g7taS3/CEjZzH0tPKfRmMEzwEDu2zV9DgjwZ+aVawe\n0yznx28buIH7Wtgd+HRzruZlnAZI5fTPLHmwcFK2lqSAadNPoN4vM5308GTPzVaI\n11jrgP2q6AHYq6PTP4Zq/fQ6JDVW+plyalCpxslIQdz0O6/d1ewEE/+PnC2z8rul\n/nrPHTjqIJrMBqurgWDRXbX8VQVI//Zi09N7EqqRkKsJKZ2Qw2ptoy/nTktpxZYs\nAEe3+XNLZS1rvv+6INcMaCxNelm5HowyFciTvrDdLw2ogYJJ6euWOFkv9+5X02ah\nwZwcNkvL91Prcr7pH700Zzs2GebuM2jGziFOdODUpaaEcAonreqjpU/8MGoyCwly\nQrckI3LNebKFpQ/kQfbn4+hHkL/TQGPMBll6nEKZBDVATaXOiDREjMR8YPNzySyG\nkEOHbtoMqCWdtCgCoeMRr9Hw020nX8Ag+ZOgbwZSJfsB2FGLfd8Of9Xo7l46dgZF\nkUko8+OiJAElHV1VROBW6QF0IbVEpC9PJYW2BWydH2Fuc20ejfA=\n=mK1e\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d88c0d8440cf640ef4f2c7a40b8b8b31bfd38f23",
          "sha": "d88c0d8440cf640ef4f2c7a40b8b8b31bfd38f23",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d88c0d8440cf640ef4f2c7a40b8b8b31bfd38f23"
        }
      ],
      "message": "refactor: Get rid of `BanMan::SetBannedSetDirty()`",
      "committer": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2022-05-24T07:34:05Z"
      },
      "author": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2022-01-18T17:18:02Z"
      },
      "sha": "46709c5f27bf6cbc8eba1298b04bd079da2cdded"
    },
    {
      "event": "ready_for_review",
      "id": 6666565555,
      "node_id": "RFRE_lADOABII585B_jgDzwAAAAGNW7ez",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6666565555",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-24T07:38:51Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDc4NGMzMTZmOWNiNjY0Yzk1NzdjYmZlZDE4NzNiYWU1NzNlZmQxYjQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/784c316f9cb664c9577cbfed1873bae573efd1b4",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/784c316f9cb664c9577cbfed1873bae573efd1b4",
      "tree": {
        "sha": "2770e3e5e665c6112c4abc0c1eaa153657423cb3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2770e3e5e665c6112c4abc0c1eaa153657423cb3"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 2770e3e5e665c6112c4abc0c1eaa153657423cb3\nparent 46709c5f27bf6cbc8eba1298b04bd079da2cdded\nauthor w0xlt <94266259+w0xlt@users.noreply.github.com> 1642487197 -0300\ncommitter Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1653378861 +0200\n\nscripted-diff: rename m_cs_banned -> m_banned_mutex\n\n-BEGIN VERIFY SCRIPT-\ns() { sed -i 's/m_cs_banned/m_banned_mutex/g' $1; }\ns src/banman.cpp\ns src/banman.h\n-END VERIFY SCRIPT-\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE0dvyxLlvLev0wWZUQQEIES5+qB8FAmKMjy0ACgkQQQEIES5+\nqB/sfxAAsu0g6dwCFER69qJPhPMlZFkBJm8TAYK/JCYfL30opHehER0GRNtxPTD0\nsQMd4Zv1RsUETEAFpPQZobUR3q6DSuF3tCtPRn1qWuXbNB2RV2UvDfDl/E4Wxw4P\nsZWtRoMpLVmrfd3OF2KgFhCxfdmtQHls9/9zLXxXpLCVCcsODejEFcp7qs/k4Y1N\nF59LXPcMBaL5QS16oYfbQPTMpQOJG/DSQmEDBZbZJVC/v6gnV9GdknKFZO6ZfDEZ\nXQAlT6ncvWzI131mx1XW5hE3B8x37SgUVaqIKLPuzH3YhVUFAUGV9lCA8DN+2oLN\nebCYwe3/2EvgUwnogmQDPFxNpsK+woJD5G1ApNp+7p9HUWwUPEjWBCZNu/sHHg+z\nAnOL5q7va1RjS0+u05TW5zOK3PmfYoM3OFvLrSmXuTzfi0Tmsi25bJie8Bq11JrS\nBX4mq4/UCUFgssSFMjMfLhy4veZrDYc0lLcmOuqy2fO+4osjmce+99bzwlqQLzrN\n6FZsHEfTxPo2Sfcr5Z4Ph0lcc4iZRyrNBFbHD1h3Q1M3oJknfoKghbeHOpEkfZIt\nydH0S4cNgGrqsl223EjB5MgP62L3lcSkVBsNQtksetHSw4A4bqbUEQa7IeJcww/K\n39nRkTCpHFEoTmucc+eCxghgj3Ckplhzo2fAJdJ8Uee1uCwlUoQ=\n=RbZs\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/46709c5f27bf6cbc8eba1298b04bd079da2cdded",
          "sha": "46709c5f27bf6cbc8eba1298b04bd079da2cdded",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/46709c5f27bf6cbc8eba1298b04bd079da2cdded"
        }
      ],
      "message": "scripted-diff: rename m_cs_banned -> m_banned_mutex\n\n-BEGIN VERIFY SCRIPT-\ns() { sed -i 's/m_cs_banned/m_banned_mutex/g' $1; }\ns src/banman.cpp\ns src/banman.h\n-END VERIFY SCRIPT-",
      "committer": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2022-05-24T07:54:21Z"
      },
      "author": {
        "name": "w0xlt",
        "email": "94266259+w0xlt@users.noreply.github.com",
        "date": "2022-01-18T06:26:37Z"
      },
      "sha": "784c316f9cb664c9577cbfed1873bae573efd1b4"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDBmYjI5MDg3MDgwYTRlNjBkN2M3MDlmZjVlZGYxNGU4MzBlZjNhNjk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0fb29087080a4e60d7c709ff5edf14e830ef3a69",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/0fb29087080a4e60d7c709ff5edf14e830ef3a69",
      "tree": {
        "sha": "45be6f7de44db8d3dc45e5f9e47a8f150faa7bf7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/45be6f7de44db8d3dc45e5f9e47a8f150faa7bf7"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 45be6f7de44db8d3dc45e5f9e47a8f150faa7bf7\nparent 784c316f9cb664c9577cbfed1873bae573efd1b4\nauthor w0xlt <94266259+w0xlt@users.noreply.github.com> 1642487354 -0300\ncommitter Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1653378868 +0200\n\nrefactor: replace RecursiveMutex m_banned_mutex with Mutex\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE0dvyxLlvLev0wWZUQQEIES5+qB8FAmKMjzQACgkQQQEIES5+\nqB/GbRAArDjQfI1M3DeW+2oinOHEyJc+4GxS0ZgKaf/N8ZebC1Jx12fM0SjwkBCm\nSThuZjLQqw6GPVnSmB0Em2+EMroYNnMdqbyQh7qjuKhdnatOvUhl3CM9wZPploee\nDjsP/9CyZmNjtDTy7888uEYKJN6teX5he48XWJtUctLX7pe08xJdGHaLWS30M2mI\nR0E0dCDjJaNE3/Yr6IWyeLRHB7epYEbiooeJh1H1YN3vm8/PwriQnvyLFEpOzZal\ndOth/XCuL0DY9mFvvIv5689un9RaF/HrJrO2jhLjxPnl1GvH76+tLiUaUeiZwenM\nBf2MkYDT55t9QVYieWKUUMQNYkjfS/gILNAlHY6jhcqcghxgAn6/jV8NDwD0ArGm\nMbRuG924n9758YyGYrbRv8DDOB0PABkK8u8tPT3pSWKJDyzpHjC/Ri5q8FMyG0+R\nuaua2Pb25D8N8kQzw0qcgyIMZiK8+kjRSkWaU8Eg/xCoY6OXOroeNW0jdPwAUCKJ\njLmNYm/vQzra4wi5PhurqS2PUm0gcaLpiqchVdYKurOgZdJWAcgHFqOcf770+L9S\n8InDe+oVadbAqN0W6IOLy2hJJGz3lIcZFs/xOsWUlr0RcNLiNYNGBuSRy5wZ/isG\nEaps/+lY+JnOVQHbDtzlMhpK4EILZeBp63mllPXlVI7l2FjhtCg=\n=i5rH\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/784c316f9cb664c9577cbfed1873bae573efd1b4",
          "sha": "784c316f9cb664c9577cbfed1873bae573efd1b4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/784c316f9cb664c9577cbfed1873bae573efd1b4"
        }
      ],
      "message": "refactor: replace RecursiveMutex m_banned_mutex with Mutex",
      "committer": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2022-05-24T07:54:28Z"
      },
      "author": {
        "name": "w0xlt",
        "email": "94266259+w0xlt@users.noreply.github.com",
        "date": "2022-01-18T06:29:14Z"
      },
      "sha": "0fb29087080a4e60d7c709ff5edf14e830ef3a69"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDM3ZDE1MGQ4YzVmZmNiMmJkZGNkOTk5NTFhNzM5ZTk3NTcxMTk0Yzc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/37d150d8c5ffcb2bddcd99951a739e97571194c7",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/37d150d8c5ffcb2bddcd99951a739e97571194c7",
      "tree": {
        "sha": "6bc4ee0c8c66443e2fbe894a1b275873a28025ef",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6bc4ee0c8c66443e2fbe894a1b275873a28025ef"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 6bc4ee0c8c66443e2fbe894a1b275873a28025ef\nparent 0fb29087080a4e60d7c709ff5edf14e830ef3a69\nauthor Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1653380850 +0200\ncommitter Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1653380850 +0200\n\nrefactor: Add more negative `!m_banned_mutex` thread safety annotations\n\nCould be verified with\n$ ./configure CC=clang CXX=clang++ CXXFLAGS='-Wthread-safety -Wthread-safety-negative'\n$ make clean\n$ make 2>&1 | grep m_banned_mutex\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE0dvyxLlvLev0wWZUQQEIES5+qB8FAmKMlvIACgkQQQEIES5+\nqB/ZjA/6Az8BDCCVP/0S4HFyzMcpHgsFfMPjKPjDJ63uLQb978zVwg8yNtn5FodW\n2tKYZnoW7SSdRhV97Lz6vuYBRN3UK3/H2j3OQz4i3KOPopl9paUPUuTTLtjJIrP7\nnjO/R0Mihgwr9g+/LELcMAdsEuJdejS/QEweDnerW48TCVqN33pEvaZaRzXmRASE\nJuXwajgkRlal/1B6acb679IVKrU66UADGxyKO1Xf2VSJ4qBrEty4f1NDsL2ZTUPa\nNZAUb3J8tIPnPwG5JOYDBuToZsiOR0FgrBg6Xit9c9Nmu+c+GNMvXhGGFoPYVh1F\n1tQef97yftOAOTXAquKNBPalzzZxFOucK9t7N4p9zJPBIOWX9VunobImLjPEM21C\n2A2MoSEvZT2AmGVex9a8qNNV7QtbbLHIEvmgB0VO4t89JBZ8ZPJ16mZTfQXKNRCN\nwBZWcTwejNo/PrMf7qwA5E1C9I2qXBvlXd4cdnUJCZ7N2JGoBYS9jR1idD726mqW\nur0bvffCHeDkeYSl4VpTEy6p87/K9ieOy9aOntWzaLSefIULQ8DRZ5nBnXb5blT9\nv+4cwO6SKZAmSfuefHVrnug0iIrYbI+rjWVeCWzMcMtOjMW+ul5H4KtBlXm4vQpK\nam7p5hNZwZmxVmRQobvSxQGoLw0C10/kZ92I84NHrrVEPL5ocpA=\n=jE0O\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0fb29087080a4e60d7c709ff5edf14e830ef3a69",
          "sha": "0fb29087080a4e60d7c709ff5edf14e830ef3a69",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0fb29087080a4e60d7c709ff5edf14e830ef3a69"
        }
      ],
      "message": "refactor: Add more negative `!m_banned_mutex` thread safety annotations\n\nCould be verified with\n$ ./configure CC=clang CXX=clang++ CXXFLAGS='-Wthread-safety -Wthread-safety-negative'\n$ make clean\n$ make 2>&1 | grep m_banned_mutex",
      "committer": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2022-05-24T08:27:30Z"
      },
      "author": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2022-05-24T08:27:30Z"
      },
      "sha": "37d150d8c5ffcb2bddcd99951a739e97571194c7"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6666931620,
      "node_id": "HRFPE_lADOABII585B_jgDzwAAAAGNYU2k",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6666931620",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-24T08:28:35Z"
    },
    {
      "event": "commented",
      "id": 1135570833,
      "node_id": "IC_kwDOABII585Dr2-R",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1135570833",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-24T08:31:33Z",
      "updated_at": "2022-05-24T08:31:33Z",
      "author_association": "MEMBER",
      "body": "> Converted to draft for now. Please review #25149 first.\r\n\r\nRebased on top of the merged #25149.\r\n\r\ncc @w0xlt @theStack @ajtowns ",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#issuecomment-1135570833",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24097"
    },
    {
      "event": "mentioned",
      "id": 6666957160,
      "node_id": "MEE_lADOABII585B_jgDzwAAAAGNYbFo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6666957160",
      "actor": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-24T08:31:33Z"
    },
    {
      "event": "subscribed",
      "id": 6666957163,
      "node_id": "SE_lADOABII585B_jgDzwAAAAGNYbFr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6666957163",
      "actor": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-24T08:31:33Z"
    },
    {
      "event": "mentioned",
      "id": 6666957173,
      "node_id": "MEE_lADOABII585B_jgDzwAAAAGNYbF1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6666957173",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-24T08:31:34Z"
    },
    {
      "event": "subscribed",
      "id": 6666957177,
      "node_id": "SE_lADOABII585B_jgDzwAAAAGNYbF5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6666957177",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-24T08:31:34Z"
    },
    {
      "event": "mentioned",
      "id": 6666957194,
      "node_id": "MEE_lADOABII585B_jgDzwAAAAGNYbGK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6666957194",
      "actor": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-24T08:31:34Z"
    },
    {
      "event": "subscribed",
      "id": 6666957205,
      "node_id": "SE_lADOABII585B_jgDzwAAAAGNYbGV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6666957205",
      "actor": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-24T08:31:34Z"
    },
    {
      "event": "unlabeled",
      "id": 6667415555,
      "node_id": "UNLE_lADOABII585B_jgDzwAAAAGNaLAD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6667415555",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-24T09:30:05Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 1136026284,
      "node_id": "IC_kwDOABII585DtmKs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1136026284",
      "actor": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-24T14:46:46Z",
      "updated_at": "2022-05-24T14:46:46Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK",
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#issuecomment-1136026284",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24097"
    },
    {
      "event": "reviewed",
      "id": 1079002932,
      "node_id": "PRR_kwDOABII585AUEc0",
      "url": null,
      "actor": null,
      "commit_id": "37d150d8c5ffcb2bddcd99951a739e97571194c7",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code-review ACK 37d150d8c5ffcb2bddcd99951a739e97571194c7",
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#pullrequestreview-1079002932",
      "submitted_at": "2022-08-19T15:29:52Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24097"
    },
    {
      "event": "review_requested",
      "id": 9093594345,
      "node_id": "RRE_lADOABII585B_jgDzwAAAAIeBTzp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9093594345",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-25T15:08:06Z",
      "requested_reviewer": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "labeled",
      "id": 9386741529,
      "node_id": "LE_lADOABII585B_jgDzwAAAAIvfk8Z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9386741529",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-31T08:05:47Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 9390041502,
      "node_id": "UNLE_lADOABII585B_jgDzwAAAAIvsKme",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9390041502",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-31T12:49:57Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "review_requested",
      "id": 10425439271,
      "node_id": "RRE_lADOABII585B_jgDzwAAAAJtZ5Qn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10425439271",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-20T16:26:54Z",
      "requested_reviewer": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "review_requested",
      "id": 10425440604,
      "node_id": "RRE_lADOABII585B_jgDzwAAAAJtZ5lc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10425440604",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-20T16:27:00Z",
      "requested_reviewer": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      }
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/791965974",
      "pull_request_review_id": 862644975,
      "id": 791965974,
      "node_id": "PRRC_kwDOABII584vNHEW",
      "diff_hunk": "@@ -39,9 +39,11 @@ BanMan::~BanMan()\n \n void BanMan::DumpBanlist()\n {\n-    SweepBanned(); // clean unused entries (if bantime has expired)\n-\n-    if (!BannedSetIsDirty()) return;\n+    {\n+        LOCK(m_cs_banned);",
      "path": "src/banman.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "37d150d8c5ffcb2bddcd99951a739e97571194c7",
      "original_commit_id": "3dae951930d43caca5cdecf971d3967f996e8a11",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "first commit: if there are any races possible, shouldn't this lock be held for the whole duration of the function?",
      "created_at": "2022-01-25T17:38:36Z",
      "updated_at": "2022-01-25T17:43:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#discussion_r791965974",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/791965974"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24097"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 43,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792453069",
      "pull_request_review_id": 863294731,
      "id": 792453069,
      "node_id": "PRRC_kwDOABII584vO9_N",
      "diff_hunk": "@@ -39,9 +39,11 @@ BanMan::~BanMan()\n \n void BanMan::DumpBanlist()\n {\n-    SweepBanned(); // clean unused entries (if bantime has expired)\n-\n-    if (!BannedSetIsDirty()) return;\n+    {\n+        LOCK(m_cs_banned);",
      "path": "src/banman.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "37d150d8c5ffcb2bddcd99951a739e97571194c7",
      "original_commit_id": "3dae951930d43caca5cdecf971d3967f996e8a11",
      "in_reply_to_id": 791965974,
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes. But another dedicated mutex should be used for that. No need to hold the `m_banned_mutex` during disk operations: `m_ban_db.Write(banmap)` and `LogPrint(BCLog::NET, ...)`.\r\n\r\nDo you prefer to add it into this PR?",
      "created_at": "2022-01-26T09:33:13Z",
      "updated_at": "2022-01-26T09:33:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#discussion_r792453069",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792453069"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24097"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 43,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792455563",
      "pull_request_review_id": 863298129,
      "id": 792455563,
      "node_id": "PRRC_kwDOABII584vO-mL",
      "diff_hunk": "@@ -39,9 +39,11 @@ BanMan::~BanMan()\n \n void BanMan::DumpBanlist()\n {\n-    SweepBanned(); // clean unused entries (if bantime has expired)\n-\n-    if (!BannedSetIsDirty()) return;\n+    {\n+        LOCK(m_cs_banned);",
      "path": "src/banman.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "37d150d8c5ffcb2bddcd99951a739e97571194c7",
      "original_commit_id": "3dae951930d43caca5cdecf971d3967f996e8a11",
      "in_reply_to_id": 791965974,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Is it that common to modify (write) the banmap to disk that this requires a separate mutex?",
      "created_at": "2022-01-26T09:36:15Z",
      "updated_at": "2022-01-26T09:36:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#discussion_r792455563",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792455563"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24097"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 43,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792462920",
      "pull_request_review_id": 863307928,
      "id": 792462920,
      "node_id": "PRRC_kwDOABII584vPAZI",
      "diff_hunk": "@@ -39,9 +39,11 @@ BanMan::~BanMan()\n \n void BanMan::DumpBanlist()\n {\n-    SweepBanned(); // clean unused entries (if bantime has expired)\n-\n-    if (!BannedSetIsDirty()) return;\n+    {\n+        LOCK(m_cs_banned);",
      "path": "src/banman.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "37d150d8c5ffcb2bddcd99951a739e97571194c7",
      "original_commit_id": "3dae951930d43caca5cdecf971d3967f996e8a11",
      "in_reply_to_id": 791965974,
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> Is it that common to modify (write) the banmap to disk that this requires a separate mutex?\r\n\r\nI'm not sure if I understand your Q correctly. But if you mean that `m_ban_db.Write(banmap)` modifies `m_banned`, it is not the case because a local copy `banmap` is used.\r\n\r\nAnd isn't it a suboptimal design when callers of `BanMan` public functions are waiting for a relatively and unpredictably long I/O operation?\r\n\r\n\r\n\r\n",
      "created_at": "2022-01-26T09:45:13Z",
      "updated_at": "2022-01-26T09:45:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#discussion_r792462920",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792462920"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24097"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 43,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792466174",
      "pull_request_review_id": 863312112,
      "id": 792466174,
      "node_id": "PRRC_kwDOABII584vPBL-",
      "diff_hunk": "@@ -39,9 +39,11 @@ BanMan::~BanMan()\n \n void BanMan::DumpBanlist()\n {\n-    SweepBanned(); // clean unused entries (if bantime has expired)\n-\n-    if (!BannedSetIsDirty()) return;\n+    {\n+        LOCK(m_cs_banned);",
      "path": "src/banman.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "37d150d8c5ffcb2bddcd99951a739e97571194c7",
      "original_commit_id": "3dae951930d43caca5cdecf971d3967f996e8a11",
      "in_reply_to_id": 791965974,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Setting the dirty flag to false can only be done after the map has been written, so I don't see how a second mutex can solve this",
      "created_at": "2022-01-26T09:48:56Z",
      "updated_at": "2022-01-26T09:48:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#discussion_r792466174",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792466174"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24097"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 43,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792509931",
      "pull_request_review_id": 863370225,
      "id": 792509931,
      "node_id": "PRRC_kwDOABII584vPL3r",
      "diff_hunk": "@@ -39,9 +39,11 @@ BanMan::~BanMan()\n \n void BanMan::DumpBanlist()\n {\n-    SweepBanned(); // clean unused entries (if bantime has expired)\n-\n-    if (!BannedSetIsDirty()) return;\n+    {\n+        LOCK(m_cs_banned);",
      "path": "src/banman.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "37d150d8c5ffcb2bddcd99951a739e97571194c7",
      "original_commit_id": "3dae951930d43caca5cdecf971d3967f996e8a11",
      "in_reply_to_id": 791965974,
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "#### Case A -- current implementation (both master and this PR)\r\n\r\nNothing prevents from `m_ban_db.Write(banmap)` being called concurrently from different threads.\r\n\r\n#### Case B -- `BanMan::DumpBanlist()` acquires `m_cs_banned`/`m_banned_mutex` for the whole its duration\r\n\r\nPerformance degradation is possible. E.g., caller of `BanMan::IsDiscouraged()` must wait for `BanMan::DumpBanlist()` finished in another thread.\r\n\r\n#### Case C -- `BanMan::DumpBanlist()` acquires a dedicated `m_dump_mutex` for the whole its duration\r\n\r\nNo concurrent `m_ban_db.Write(banmap)` calls. No performance degradation.\r\n\r\n---\r\n> Setting the dirty flag to false can only be done after the map has been written\r\n\r\nHow about the following patch:\r\n```diff\r\n--- a/src/banman.cpp\r\n+++ b/src/banman.cpp\r\n@@ -45,11 +45,12 @@ void BanMan::DumpBanlist()\r\n         SweepBanned();\r\n         if (!m_is_dirty) return;\r\n         banmap = m_banned;\r\n+        m_is_dirty = false;\r\n     }\r\n \r\n     int64_t n_start = GetTimeMillis();\r\n-    if (m_ban_db.Write(banmap)) {\r\n-        WITH_LOCK(m_banned_mutex, m_is_dirty = false);\r\n+    if (!m_ban_db.Write(banmap)) {\r\n+        WITH_LOCK(m_banned_mutex, m_is_dirty = true);\r\n     }\r\n \r\n     LogPrint(BCLog::NET, \"Flushed %d banned node addresses/subnets to disk  %dms\\n\", banmap.size(),\r\n```\r\n?",
      "created_at": "2022-01-26T10:41:58Z",
      "updated_at": "2022-01-26T10:42:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#discussion_r792509931",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792509931"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24097"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 43,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792527555",
      "pull_request_review_id": 863393608,
      "id": 792527555,
      "node_id": "PRRC_kwDOABII584vPQLD",
      "diff_hunk": "@@ -39,9 +39,11 @@ BanMan::~BanMan()\n \n void BanMan::DumpBanlist()\n {\n-    SweepBanned(); // clean unused entries (if bantime has expired)\n-\n-    if (!BannedSetIsDirty()) return;\n+    {\n+        LOCK(m_cs_banned);",
      "path": "src/banman.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "37d150d8c5ffcb2bddcd99951a739e97571194c7",
      "original_commit_id": "3dae951930d43caca5cdecf971d3967f996e8a11",
      "in_reply_to_id": 791965974,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> How about the following patch:\r\n\r\nCan you explain the patch?",
      "created_at": "2022-01-26T11:04:51Z",
      "updated_at": "2022-01-26T11:04:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#discussion_r792527555",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792527555"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24097"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 43,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792538026",
      "pull_request_review_id": 863407526,
      "id": 792538026,
      "node_id": "PRRC_kwDOABII584vPSuq",
      "diff_hunk": "@@ -39,9 +39,11 @@ BanMan::~BanMan()\n \n void BanMan::DumpBanlist()\n {\n-    SweepBanned(); // clean unused entries (if bantime has expired)\n-\n-    if (!BannedSetIsDirty()) return;\n+    {\n+        LOCK(m_cs_banned);",
      "path": "src/banman.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "37d150d8c5ffcb2bddcd99951a739e97571194c7",
      "original_commit_id": "3dae951930d43caca5cdecf971d3967f996e8a11",
      "in_reply_to_id": 791965974,
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Currently, when thread A performs `m_ban_db.Write(banmap)` thread B can set `m_is_dirty = true` which will be overwritten by thread A just after successful finish of `m_ban_db.Write(banmap)` call. This causes inconsistency between the actual `m_banned` state and the `m_is_dirty` flag.\r\n\r\nWith the suggested patch it is guaranteed that every time we access `m_is_dirty` its value is consistent with the actual `m_banned` state.",
      "created_at": "2022-01-26T11:19:33Z",
      "updated_at": "2022-01-26T11:20:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#discussion_r792538026",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792538026"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24097"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 43,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792558377",
      "pull_request_review_id": 863434589,
      "id": 792558377,
      "node_id": "PRRC_kwDOABII584vPXsp",
      "diff_hunk": "@@ -39,9 +39,11 @@ BanMan::~BanMan()\n \n void BanMan::DumpBanlist()\n {\n-    SweepBanned(); // clean unused entries (if bantime has expired)\n-\n-    if (!BannedSetIsDirty()) return;\n+    {\n+        LOCK(m_cs_banned);",
      "path": "src/banman.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "37d150d8c5ffcb2bddcd99951a739e97571194c7",
      "original_commit_id": "3dae951930d43caca5cdecf971d3967f996e8a11",
      "in_reply_to_id": 791965974,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "But what is the point of the dirty flag when it will effectively be always true?",
      "created_at": "2022-01-26T11:48:50Z",
      "updated_at": "2022-01-26T11:48:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#discussion_r792558377",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792558377"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24097"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 43,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792565210",
      "pull_request_review_id": 863443885,
      "id": 792565210,
      "node_id": "PRRC_kwDOABII584vPZXa",
      "diff_hunk": "@@ -39,9 +39,11 @@ BanMan::~BanMan()\n \n void BanMan::DumpBanlist()\n {\n-    SweepBanned(); // clean unused entries (if bantime has expired)\n-\n-    if (!BannedSetIsDirty()) return;\n+    {\n+        LOCK(m_cs_banned);",
      "path": "src/banman.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "37d150d8c5ffcb2bddcd99951a739e97571194c7",
      "original_commit_id": "3dae951930d43caca5cdecf971d3967f996e8a11",
      "in_reply_to_id": 791965974,
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It's being set to `false` in `BanMan::DumpBanlist()`, it stays `false` when `m_ban_db.Write(banmap))` is successful. And it stays `false` if other member functions do no change `m_banned`.\r\n\r\nIt allows to skip `m_ban_db.Write(banmap))` for unchanged `m_banned`.",
      "created_at": "2022-01-26T11:58:54Z",
      "updated_at": "2022-01-26T11:59:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#discussion_r792565210",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792565210"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24097"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 43,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792583397",
      "pull_request_review_id": 863467671,
      "id": 792583397,
      "node_id": "PRRC_kwDOABII584vPdzl",
      "diff_hunk": "@@ -39,9 +39,11 @@ BanMan::~BanMan()\n \n void BanMan::DumpBanlist()\n {\n-    SweepBanned(); // clean unused entries (if bantime has expired)\n-\n-    if (!BannedSetIsDirty()) return;\n+    {\n+        LOCK(m_cs_banned);",
      "path": "src/banman.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "37d150d8c5ffcb2bddcd99951a739e97571194c7",
      "original_commit_id": "3dae951930d43caca5cdecf971d3967f996e8a11",
      "in_reply_to_id": 791965974,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "So you are suggesting this patch combined with a dedicated dump mutex?",
      "created_at": "2022-01-26T12:22:58Z",
      "updated_at": "2022-01-26T12:22:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#discussion_r792583397",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792583397"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24097"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 43,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792586271",
      "pull_request_review_id": 863471491,
      "id": 792586271,
      "node_id": "PRRC_kwDOABII584vPegf",
      "diff_hunk": "@@ -39,9 +39,11 @@ BanMan::~BanMan()\n \n void BanMan::DumpBanlist()\n {\n-    SweepBanned(); // clean unused entries (if bantime has expired)\n-\n-    if (!BannedSetIsDirty()) return;\n+    {\n+        LOCK(m_cs_banned);",
      "path": "src/banman.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "37d150d8c5ffcb2bddcd99951a739e97571194c7",
      "original_commit_id": "3dae951930d43caca5cdecf971d3967f996e8a11",
      "in_reply_to_id": 791965974,
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes, but in another PR to keep this one focused on the transition form `RecursiveMutex` to `Mutex`.",
      "created_at": "2022-01-26T12:26:58Z",
      "updated_at": "2022-01-26T12:26:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#discussion_r792586271",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792586271"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24097"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 43,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792588660",
      "pull_request_review_id": 863474745,
      "id": 792588660,
      "node_id": "PRRC_kwDOABII584vPfF0",
      "diff_hunk": "@@ -39,9 +39,11 @@ BanMan::~BanMan()\n \n void BanMan::DumpBanlist()\n {\n-    SweepBanned(); // clean unused entries (if bantime has expired)\n-\n-    if (!BannedSetIsDirty()) return;\n+    {\n+        LOCK(m_cs_banned);",
      "path": "src/banman.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "37d150d8c5ffcb2bddcd99951a739e97571194c7",
      "original_commit_id": "3dae951930d43caca5cdecf971d3967f996e8a11",
      "in_reply_to_id": 791965974,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Strictly speaking, fixing the logical race is a bugfix, so it might be better to do it first to allow easier cherry-picking to older commits. Would you mind going with the fix first?",
      "created_at": "2022-01-26T12:30:25Z",
      "updated_at": "2022-01-26T12:30:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#discussion_r792588660",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792588660"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24097"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 43,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792589529",
      "pull_request_review_id": 863475825,
      "id": 792589529,
      "node_id": "PRRC_kwDOABII584vPfTZ",
      "diff_hunk": "@@ -39,9 +39,11 @@ BanMan::~BanMan()\n \n void BanMan::DumpBanlist()\n {\n-    SweepBanned(); // clean unused entries (if bantime has expired)\n-\n-    if (!BannedSetIsDirty()) return;\n+    {\n+        LOCK(m_cs_banned);",
      "path": "src/banman.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "37d150d8c5ffcb2bddcd99951a739e97571194c7",
      "original_commit_id": "3dae951930d43caca5cdecf971d3967f996e8a11",
      "in_reply_to_id": 791965974,
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Sure!",
      "created_at": "2022-01-26T12:31:33Z",
      "updated_at": "2022-01-26T12:31:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#discussion_r792589529",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792589529"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24097"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 43,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792590223",
      "pull_request_review_id": 863476719,
      "id": 792590223,
      "node_id": "PRRC_kwDOABII584vPfeP",
      "diff_hunk": "@@ -39,9 +39,11 @@ BanMan::~BanMan()\n \n void BanMan::DumpBanlist()\n {\n-    SweepBanned(); // clean unused entries (if bantime has expired)\n-\n-    if (!BannedSetIsDirty()) return;\n+    {\n+        LOCK(m_cs_banned);",
      "path": "src/banman.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "37d150d8c5ffcb2bddcd99951a739e97571194c7",
      "original_commit_id": "3dae951930d43caca5cdecf971d3967f996e8a11",
      "in_reply_to_id": 791965974,
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> Is it that common to modify (write) the banmap to disk that this requires a separate mutex?\r\n\r\nPlease check out  `DumpMempool` implementation.",
      "created_at": "2022-01-26T12:32:27Z",
      "updated_at": "2022-01-26T12:32:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#discussion_r792590223",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792590223"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24097"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 43,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795583642",
      "pull_request_review_id": 867724044,
      "id": 795583642,
      "node_id": "PRRC_kwDOABII584va6Sa",
      "diff_hunk": "@@ -39,9 +39,11 @@ BanMan::~BanMan()\n \n void BanMan::DumpBanlist()\n {\n-    SweepBanned(); // clean unused entries (if bantime has expired)\n-\n-    if (!BannedSetIsDirty()) return;\n+    {\n+        LOCK(m_cs_banned);",
      "path": "src/banman.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "37d150d8c5ffcb2bddcd99951a739e97571194c7",
      "original_commit_id": "3dae951930d43caca5cdecf971d3967f996e8a11",
      "in_reply_to_id": 791965974,
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> Would you mind going with the fix first?\r\n\r\nDone in #24168.",
      "created_at": "2022-01-31T11:34:33Z",
      "updated_at": "2022-01-31T11:34:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#discussion_r795583642",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795583642"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24097"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 43,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/796487670",
      "pull_request_review_id": 868975569,
      "id": 796487670,
      "node_id": "PRRC_kwDOABII584veW_2",
      "diff_hunk": "@@ -45,16 +45,17 @@ void BanMan::DumpBanlist()\n \n     banmap_t banmap;\n     {\n-        LOCK(m_cs_banned);\n+        LOCK(m_banned_mutex);\n         SweepBanned();\n-        if (!BannedSetIsDirty()) return;\n+        if (!m_is_dirty) return;\n         banmap = m_banned;\n-        SetBannedSetDirty(false);\n+        m_is_dirty = false;\n     }\n \n     int64_t n_start = GetTimeMillis();\n     if (!m_ban_db.Write(banmap)) {\n-        SetBannedSetDirty(true);\n+        LOCK(m_banned_mutex);\n+        m_is_dirty = true;",
      "path": "src/banman.cpp",
      "position": 27,
      "original_position": 27,
      "commit_id": "37d150d8c5ffcb2bddcd99951a739e97571194c7",
      "original_commit_id": "0ad0288dcb462e4156ba8f619eebe2fa321ce7af",
      "in_reply_to_id": null,
      "user": {
        "login": "shaavan",
        "id": 85434418,
        "node_id": "MDQ6VXNlcjg1NDM0NDE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/85434418?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/shaavan",
        "html_url": "https://github.com/shaavan",
        "followers_url": "https://api.github.com/users/shaavan/followers",
        "following_url": "https://api.github.com/users/shaavan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/shaavan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/shaavan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/shaavan/subscriptions",
        "organizations_url": "https://api.github.com/users/shaavan/orgs",
        "repos_url": "https://api.github.com/users/shaavan/repos",
        "events_url": "https://api.github.com/users/shaavan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/shaavan/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "**Doubt:** Why did you prefer this way of writing code over using `WITH_LOCK`, which you discussed with @MarcoFalke in the earlier comment.\r\n\r\n```diff\r\n--- a/src/banman.cpp\r\n+++ b/src/banman.cpp\r\n@@ -45,11 +45,12 @@ void BanMan::DumpBanlist()\r\n         SweepBanned();\r\n         if (!m_is_dirty) return;\r\n         banmap = m_banned;\r\n+        m_is_dirty = false;\r\n     }\r\n \r\n     int64_t n_start = GetTimeMillis();\r\n-    if (m_ban_db.Write(banmap)) {\r\n-        WITH_LOCK(m_banned_mutex, m_is_dirty = false);\r\n+    if (!m_ban_db.Write(banmap)) {\r\n+        WITH_LOCK(m_banned_mutex, m_is_dirty = true);\r\n     }\r\n \r\n     LogPrint(BCLog::NET, \"Flushed %d banned node addresses/subnets to disk  %dms\\n\", banmap.size(),\r\n```",
      "created_at": "2022-02-01T11:09:06Z",
      "updated_at": "2022-02-01T11:10:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#discussion_r796487670",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/796487670"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24097"
        }
      },
      "start_line": 63,
      "original_start_line": 57,
      "start_side": "RIGHT",
      "line": 64,
      "original_line": 64,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/796487778",
      "pull_request_review_id": 868975569,
      "id": 796487778,
      "node_id": "PRRC_kwDOABII584veXBi",
      "diff_hunk": "@@ -165,18 +166,19 @@ bool BanMan::Unban(const CSubNet& sub_net)\n \n void BanMan::GetBanned(banmap_t& banmap)\n {\n-    LOCK(m_cs_banned);\n+    LOCK(m_banned_mutex);\n     // Sweep the banlist so expired bans are not returned\n     SweepBanned();\n     banmap = m_banned; //create a thread safe copy\n }\n \n void BanMan::SweepBanned()\n {\n+    AssertLockHeld(m_banned_mutex);\n+",
      "path": "src/banman.cpp",
      "position": 108,
      "original_position": 107,
      "commit_id": "37d150d8c5ffcb2bddcd99951a739e97571194c7",
      "original_commit_id": "0ad0288dcb462e4156ba8f619eebe2fa321ce7af",
      "in_reply_to_id": null,
      "user": {
        "login": "shaavan",
        "id": 85434418,
        "node_id": "MDQ6VXNlcjg1NDM0NDE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/85434418?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/shaavan",
        "html_url": "https://github.com/shaavan",
        "followers_url": "https://api.github.com/users/shaavan/followers",
        "following_url": "https://api.github.com/users/shaavan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/shaavan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/shaavan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/shaavan/subscriptions",
        "organizations_url": "https://api.github.com/users/shaavan/orgs",
        "repos_url": "https://api.github.com/users/shaavan/repos",
        "events_url": "https://api.github.com/users/shaavan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/shaavan/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: This extra line can be removed.\r\n\r\n```suggestion\r\n```",
      "created_at": "2022-02-01T11:09:14Z",
      "updated_at": "2022-02-01T11:10:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#discussion_r796487778",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/796487778"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24097"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 184,
      "original_line": 184,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/797534609",
      "pull_request_review_id": 870440406,
      "id": 797534609,
      "node_id": "PRRC_kwDOABII584viWmR",
      "diff_hunk": "@@ -45,16 +45,17 @@ void BanMan::DumpBanlist()\n \n     banmap_t banmap;\n     {\n-        LOCK(m_cs_banned);\n+        LOCK(m_banned_mutex);\n         SweepBanned();\n-        if (!BannedSetIsDirty()) return;\n+        if (!m_is_dirty) return;\n         banmap = m_banned;\n-        SetBannedSetDirty(false);\n+        m_is_dirty = false;\n     }\n \n     int64_t n_start = GetTimeMillis();\n     if (!m_ban_db.Write(banmap)) {\n-        SetBannedSetDirty(true);\n+        LOCK(m_banned_mutex);\n+        m_is_dirty = true;",
      "path": "src/banman.cpp",
      "position": 27,
      "original_position": 27,
      "commit_id": "37d150d8c5ffcb2bddcd99951a739e97571194c7",
      "original_commit_id": "0ad0288dcb462e4156ba8f619eebe2fa321ce7af",
      "in_reply_to_id": 796487670,
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "With `m_is_dirty = false;` a few lines above I think it's more readable, no?",
      "created_at": "2022-02-02T12:00:25Z",
      "updated_at": "2022-02-02T12:00:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#discussion_r797534609",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/797534609"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24097"
        }
      },
      "start_line": 63,
      "original_start_line": 57,
      "start_side": "RIGHT",
      "line": 64,
      "original_line": 64,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/797536676",
      "pull_request_review_id": 870443338,
      "id": 797536676,
      "node_id": "PRRC_kwDOABII584viXGk",
      "diff_hunk": "@@ -165,18 +166,19 @@ bool BanMan::Unban(const CSubNet& sub_net)\n \n void BanMan::GetBanned(banmap_t& banmap)\n {\n-    LOCK(m_cs_banned);\n+    LOCK(m_banned_mutex);\n     // Sweep the banlist so expired bans are not returned\n     SweepBanned();\n     banmap = m_banned; //create a thread safe copy\n }\n \n void BanMan::SweepBanned()\n {\n+    AssertLockHeld(m_banned_mutex);\n+",
      "path": "src/banman.cpp",
      "position": 108,
      "original_position": 107,
      "commit_id": "37d150d8c5ffcb2bddcd99951a739e97571194c7",
      "original_commit_id": "0ad0288dcb462e4156ba8f619eebe2fa321ce7af",
      "in_reply_to_id": 796487778,
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Of course, it's only a personal opinion, but for me it is not an \"extra\" line. It is a line which separates assertions from the function logic that helps to make the presence of assertions clearer.",
      "created_at": "2022-02-02T12:03:19Z",
      "updated_at": "2022-02-02T12:03:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#discussion_r797536676",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/797536676"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24097"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 184,
      "original_line": 184,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/798363081",
      "pull_request_review_id": 871561123,
      "id": 798363081,
      "node_id": "PRRC_kwDOABII584vlg3J",
      "diff_hunk": "@@ -45,16 +45,17 @@ void BanMan::DumpBanlist()\n \n     banmap_t banmap;\n     {\n-        LOCK(m_cs_banned);\n+        LOCK(m_banned_mutex);\n         SweepBanned();\n-        if (!BannedSetIsDirty()) return;\n+        if (!m_is_dirty) return;\n         banmap = m_banned;\n-        SetBannedSetDirty(false);\n+        m_is_dirty = false;\n     }\n \n     int64_t n_start = GetTimeMillis();\n     if (!m_ban_db.Write(banmap)) {\n-        SetBannedSetDirty(true);\n+        LOCK(m_banned_mutex);\n+        m_is_dirty = true;",
      "path": "src/banman.cpp",
      "position": 27,
      "original_position": 27,
      "commit_id": "37d150d8c5ffcb2bddcd99951a739e97571194c7",
      "original_commit_id": "0ad0288dcb462e4156ba8f619eebe2fa321ce7af",
      "in_reply_to_id": 796487670,
      "user": {
        "login": "shaavan",
        "id": 85434418,
        "node_id": "MDQ6VXNlcjg1NDM0NDE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/85434418?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/shaavan",
        "html_url": "https://github.com/shaavan",
        "followers_url": "https://api.github.com/users/shaavan/followers",
        "following_url": "https://api.github.com/users/shaavan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/shaavan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/shaavan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/shaavan/subscriptions",
        "organizations_url": "https://api.github.com/users/shaavan/orgs",
        "repos_url": "https://api.github.com/users/shaavan/repos",
        "events_url": "https://api.github.com/users/shaavan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/shaavan/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Makes sense. So it was an aesthetic choice, which increases code readability, and both of these don't have any functional difference. Am I correct in my analysis?",
      "created_at": "2022-02-03T09:20:09Z",
      "updated_at": "2022-02-03T09:20:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#discussion_r798363081",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/798363081"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24097"
        }
      },
      "start_line": 63,
      "original_start_line": 57,
      "start_side": "RIGHT",
      "line": 64,
      "original_line": 64,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/798364056",
      "pull_request_review_id": 871562530,
      "id": 798364056,
      "node_id": "PRRC_kwDOABII584vlhGY",
      "diff_hunk": "@@ -45,16 +45,17 @@ void BanMan::DumpBanlist()\n \n     banmap_t banmap;\n     {\n-        LOCK(m_cs_banned);\n+        LOCK(m_banned_mutex);\n         SweepBanned();\n-        if (!BannedSetIsDirty()) return;\n+        if (!m_is_dirty) return;\n         banmap = m_banned;\n-        SetBannedSetDirty(false);\n+        m_is_dirty = false;\n     }\n \n     int64_t n_start = GetTimeMillis();\n     if (!m_ban_db.Write(banmap)) {\n-        SetBannedSetDirty(true);\n+        LOCK(m_banned_mutex);\n+        m_is_dirty = true;",
      "path": "src/banman.cpp",
      "position": 27,
      "original_position": 27,
      "commit_id": "37d150d8c5ffcb2bddcd99951a739e97571194c7",
      "original_commit_id": "0ad0288dcb462e4156ba8f619eebe2fa321ce7af",
      "in_reply_to_id": 796487670,
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes, you are. See https://github.com/bitcoin/bitcoin/blob/c194293883fbb656779102309b2cb3e60889feff/src/sync.h#L270",
      "created_at": "2022-02-03T09:21:18Z",
      "updated_at": "2022-02-03T09:23:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#discussion_r798364056",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/798364056"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24097"
        }
      },
      "start_line": 63,
      "original_start_line": 57,
      "start_side": "RIGHT",
      "line": 64,
      "original_line": 64,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/798366360",
      "pull_request_review_id": 871565759,
      "id": 798366360,
      "node_id": "PRRC_kwDOABII584vlhqY",
      "diff_hunk": "@@ -165,18 +166,19 @@ bool BanMan::Unban(const CSubNet& sub_net)\n \n void BanMan::GetBanned(banmap_t& banmap)\n {\n-    LOCK(m_cs_banned);\n+    LOCK(m_banned_mutex);\n     // Sweep the banlist so expired bans are not returned\n     SweepBanned();\n     banmap = m_banned; //create a thread safe copy\n }\n \n void BanMan::SweepBanned()\n {\n+    AssertLockHeld(m_banned_mutex);\n+",
      "path": "src/banman.cpp",
      "position": 108,
      "original_position": 107,
      "commit_id": "37d150d8c5ffcb2bddcd99951a739e97571194c7",
      "original_commit_id": "0ad0288dcb462e4156ba8f619eebe2fa321ce7af",
      "in_reply_to_id": 796487778,
      "user": {
        "login": "shaavan",
        "id": 85434418,
        "node_id": "MDQ6VXNlcjg1NDM0NDE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/85434418?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/shaavan",
        "html_url": "https://github.com/shaavan",
        "followers_url": "https://api.github.com/users/shaavan/followers",
        "following_url": "https://api.github.com/users/shaavan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/shaavan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/shaavan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/shaavan/subscriptions",
        "organizations_url": "https://api.github.com/users/shaavan/orgs",
        "repos_url": "https://api.github.com/users/shaavan/repos",
        "events_url": "https://api.github.com/users/shaavan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/shaavan/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I agree with you. However, I think it is better to follow a code uniformity. And some places have a line between, and some don't. This breaks the code uniformity. But these are just my 2 cents, and I am okay with whatever you think would be the optimal choice in this matter.",
      "created_at": "2022-02-03T09:23:58Z",
      "updated_at": "2022-02-03T09:23:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#discussion_r798366360",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/798366360"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24097"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 184,
      "original_line": 184,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/798413519",
      "pull_request_review_id": 871631100,
      "id": 798413519,
      "node_id": "PRRC_kwDOABII584vltLP",
      "diff_hunk": "@@ -45,16 +45,17 @@ void BanMan::DumpBanlist()\n \n     banmap_t banmap;\n     {\n-        LOCK(m_cs_banned);\n+        LOCK(m_banned_mutex);\n         SweepBanned();\n-        if (!BannedSetIsDirty()) return;\n+        if (!m_is_dirty) return;\n         banmap = m_banned;\n-        SetBannedSetDirty(false);\n+        m_is_dirty = false;\n     }\n \n     int64_t n_start = GetTimeMillis();\n     if (!m_ban_db.Write(banmap)) {\n-        SetBannedSetDirty(true);\n+        LOCK(m_banned_mutex);\n+        m_is_dirty = true;",
      "path": "src/banman.cpp",
      "position": 27,
      "original_position": 27,
      "commit_id": "37d150d8c5ffcb2bddcd99951a739e97571194c7",
      "original_commit_id": "0ad0288dcb462e4156ba8f619eebe2fa321ce7af",
      "in_reply_to_id": 796487670,
      "user": {
        "login": "shaavan",
        "id": 85434418,
        "node_id": "MDQ6VXNlcjg1NDM0NDE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/85434418?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/shaavan",
        "html_url": "https://github.com/shaavan",
        "followers_url": "https://api.github.com/users/shaavan/followers",
        "following_url": "https://api.github.com/users/shaavan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/shaavan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/shaavan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/shaavan/subscriptions",
        "organizations_url": "https://api.github.com/users/shaavan/orgs",
        "repos_url": "https://api.github.com/users/shaavan/repos",
        "events_url": "https://api.github.com/users/shaavan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/shaavan/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Got it. Thanks, @hebasto!",
      "created_at": "2022-02-03T10:18:56Z",
      "updated_at": "2022-02-03T10:18:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24097#discussion_r798413519",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/798413519"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24097"
        }
      },
      "start_line": 63,
      "original_start_line": 57,
      "start_side": "RIGHT",
      "line": 64,
      "original_line": 64,
      "side": "RIGHT"
    }
  ]
}