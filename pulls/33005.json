{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005",
    "id": 2674833737,
    "node_id": "PR_kwDOABII586fbrlJ",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/33005",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/33005.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/33005.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33005",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33005/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
    "number": 33005,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": false,
    "title": "refactor: GenTxid type safety followups",
    "user": {
      "login": "marcofleon",
      "id": 95179662,
      "node_id": "U_kgDOBaxTjg",
      "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/marcofleon",
      "html_url": "https://github.com/marcofleon",
      "followers_url": "https://api.github.com/users/marcofleon/followers",
      "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
      "organizations_url": "https://api.github.com/users/marcofleon/orgs",
      "repos_url": "https://api.github.com/users/marcofleon/repos",
      "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/marcofleon/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "This is a followup to https://github.com/bitcoin/bitcoin/pull/32631.\r\n\r\nAddresses:\r\nhttps://github.com/bitcoin/bitcoin/pull/32631#discussion_r2200291621\r\nhttps://github.com/bitcoin/bitcoin/pull/32631#discussion_r2199951996\r\nhttps://github.com/bitcoin/bitcoin/pull/32631#discussion_r2201874252\r\nhttps://github.com/bitcoin/bitcoin/pull/32631#discussion_r2201918072\r\nhttps://github.com/bitcoin/bitcoin/pull/32631#issuecomment-3063383775",
    "labels": [
      {
        "id": 135961,
        "node_id": "MDU6TGFiZWwxMzU5NjE=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
        "name": "Refactoring",
        "color": "E6F6D6",
        "default": false
      }
    ],
    "milestone": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/72",
      "html_url": "https://github.com/bitcoin/bitcoin/milestone/72",
      "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/72/labels",
      "id": 12172984,
      "node_id": "MI_kwDOABII584Aub64",
      "number": 72,
      "state": "open",
      "title": "30.0",
      "description": "",
      "creator": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "open_issues": 10,
      "closed_issues": 39,
      "created_at": "2025-01-15T19:21:36Z",
      "updated_at": "2025-07-26T09:21:03Z"
    },
    "created_at": "2025-07-17T18:50:14Z",
    "updated_at": "2025-07-30T10:54:26Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "1ccabc368959486b85a64d068fd9e71422bf8817",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      {
        "login": "janb84",
        "id": 608446,
        "node_id": "MDQ6VXNlcjYwODQ0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/608446?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/janb84",
        "html_url": "https://github.com/janb84",
        "followers_url": "https://api.github.com/users/janb84/followers",
        "following_url": "https://api.github.com/users/janb84/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/janb84/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/janb84/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/janb84/subscriptions",
        "organizations_url": "https://api.github.com/users/janb84/orgs",
        "repos_url": "https://api.github.com/users/janb84/repos",
        "events_url": "https://api.github.com/users/janb84/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/janb84/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "marcofleon:2025/07/gentxid-followups",
      "ref": "2025/07/gentxid-followups",
      "sha": "94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "user": {
        "login": "marcofleon",
        "id": 95179662,
        "node_id": "U_kgDOBaxTjg",
        "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/marcofleon",
        "html_url": "https://github.com/marcofleon",
        "followers_url": "https://api.github.com/users/marcofleon/followers",
        "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
        "organizations_url": "https://api.github.com/users/marcofleon/orgs",
        "repos_url": "https://api.github.com/users/marcofleon/repos",
        "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/marcofleon/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 593603618,
        "node_id": "R_kgDOI2GsIg",
        "name": "bitcoin",
        "full_name": "marcofleon/bitcoin",
        "owner": {
          "login": "marcofleon",
          "id": 95179662,
          "node_id": "U_kgDOBaxTjg",
          "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/marcofleon",
          "html_url": "https://github.com/marcofleon",
          "followers_url": "https://api.github.com/users/marcofleon/followers",
          "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
          "organizations_url": "https://api.github.com/users/marcofleon/orgs",
          "repos_url": "https://api.github.com/users/marcofleon/repos",
          "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/marcofleon/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/marcofleon/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/marcofleon/bitcoin",
        "archive_url": "https://api.github.com/repos/marcofleon/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/marcofleon/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/marcofleon/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/marcofleon/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/marcofleon/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/marcofleon/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/marcofleon/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/marcofleon/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/marcofleon/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/marcofleon/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/marcofleon/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/marcofleon/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/marcofleon/bitcoin/events",
        "forks_url": "https://api.github.com/repos/marcofleon/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/marcofleon/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/marcofleon/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/marcofleon/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/marcofleon/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/marcofleon/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/marcofleon/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/marcofleon/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/marcofleon/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/marcofleon/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/marcofleon/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/marcofleon/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/marcofleon/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/marcofleon/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/marcofleon/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/marcofleon/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:marcofleon/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/marcofleon/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/marcofleon/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/marcofleon/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/marcofleon/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/marcofleon/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/marcofleon/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/marcofleon/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/marcofleon/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/marcofleon/bitcoin/hooks",
        "svn_url": "https://github.com/marcofleon/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 0,
        "watchers_count": 0,
        "size": 247385,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-07-29T14:33:06Z",
        "created_at": "2023-01-26T12:28:27Z",
        "updated_at": "2025-07-29T10:23:03Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "2a97ff466d320cb388f9487a4a3c71068c07a234",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 37585,
        "stargazers_count": 84802,
        "watchers_count": 84802,
        "size": 289698,
        "default_branch": "master",
        "open_issues_count": 754,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-07-29T18:40:31Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-07-30T09:48:44Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 46,
    "deletions": 43,
    "changed_files": 6,
    "commits": 3,
    "review_comments": 27,
    "comments": 6
  },
  "events": [
    {
      "event": "labeled",
      "id": 18685989036,
      "node_id": "LE_lADOABII587BJxIKzwAAAARZxZCs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18685989036",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-17T18:50:18Z",
      "label": {
        "name": "Refactoring",
        "color": "E6F6D6"
      }
    },
    {
      "event": "commented",
      "id": 3085087615,
      "node_id": "IC_kwDOABII58634rN_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3085087615",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-17T18:50:19Z",
      "updated_at": "2025-07-30T04:56:21Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33005.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [glozow](https://github.com/bitcoin/bitcoin/pull/33005#issuecomment-3128795026), [stickies-v](https://github.com/bitcoin/bitcoin/pull/33005#pullrequestreview-3067511438) |\n| Approach ACK | [ajtowns](https://github.com/bitcoin/bitcoin/pull/33005#pullrequestreview-3037443575) |\n| Stale ACK | [hodlinator](https://github.com/bitcoin/bitcoin/pull/33005#pullrequestreview-3035484779), [janb84](https://github.com/bitcoin/bitcoin/pull/33005#pullrequestreview-3055150696) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#33029](https://github.com/bitcoin/bitcoin/pull/33029) (net: make m_mempool optional in PeerManager by naiyoma)\n* [#30277](https://github.com/bitcoin/bitcoin/pull/30277) ([DO NOT MERGE] Erlay: bandwidth-efficient transaction relay protocol (Full implementation) by sr-gi)\n* [#30116](https://github.com/bitcoin/bitcoin/pull/30116) (p2p: Fill reconciliation sets (Erlay) attempt 2 by sr-gi)\n* [#28676](https://github.com/bitcoin/bitcoin/pull/28676) (Cluster mempool implementation by sdaftuar)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#issuecomment-3085087615",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33005"
    },
    {
      "event": "commented",
      "id": 3085123179,
      "node_id": "IC_kwDOABII58634z5r",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3085123179",
      "actor": {
        "login": "marcofleon",
        "id": 95179662,
        "node_id": "U_kgDOBaxTjg",
        "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/marcofleon",
        "html_url": "https://github.com/marcofleon",
        "followers_url": "https://api.github.com/users/marcofleon/followers",
        "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
        "organizations_url": "https://api.github.com/users/marcofleon/orgs",
        "repos_url": "https://api.github.com/users/marcofleon/repos",
        "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/marcofleon/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-17T19:01:46Z",
      "updated_at": "2025-07-17T19:01:46Z",
      "author_association": "CONTRIBUTOR",
      "body": "@JeremyRubin in your [comment](https://github.com/bitcoin/bitcoin/pull/32631#issuecomment-3063383775) you mentioned that there are multiple data structures that should be switched to homogeneous. I was only able to spot `m_tx_inventory_to_send` as one that should be changed. Are there others that I'm missing?\r\n\r\nIf it is only the one, then I'm not sure about making such a generic container. Might be better to just keep it specific to Txid/Wtxid or have a class for `m_tx_inventory_to_send` only.\r\n",
      "user": {
        "login": "marcofleon",
        "id": 95179662,
        "node_id": "U_kgDOBaxTjg",
        "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/marcofleon",
        "html_url": "https://github.com/marcofleon",
        "followers_url": "https://api.github.com/users/marcofleon/followers",
        "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
        "organizations_url": "https://api.github.com/users/marcofleon/orgs",
        "repos_url": "https://api.github.com/users/marcofleon/repos",
        "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/marcofleon/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#issuecomment-3085123179",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33005"
    },
    {
      "event": "mentioned",
      "id": 18686158540,
      "node_id": "MEE_lADOABII587BJxIKzwAAAARZyCbM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18686158540",
      "actor": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-17T19:01:48Z"
    },
    {
      "event": "subscribed",
      "id": 18686158558,
      "node_id": "SE_lADOABII587BJxIKzwAAAARZyCbe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18686158558",
      "actor": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-17T19:01:48Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18686730373,
      "node_id": "HRFPE_lADOABII587BJxIKzwAAAARZ0OCF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18686730373",
      "actor": {
        "login": "marcofleon",
        "id": 95179662,
        "node_id": "U_kgDOBaxTjg",
        "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/marcofleon",
        "html_url": "https://github.com/marcofleon",
        "followers_url": "https://api.github.com/users/marcofleon/followers",
        "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
        "organizations_url": "https://api.github.com/users/marcofleon/orgs",
        "repos_url": "https://api.github.com/users/marcofleon/repos",
        "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/marcofleon/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "67837bb426049918004fe48525db71b515940e6f",
      "commit_url": "https://api.github.com/repos/marcofleon/bitcoin/commits/67837bb426049918004fe48525db71b515940e6f",
      "created_at": "2025-07-17T19:38:12Z"
    },
    {
      "event": "labeled",
      "id": 18686733981,
      "node_id": "LE_lADOABII587BJxIKzwAAAARZ0O6d",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18686733981",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-17T19:38:23Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3085255408,
      "node_id": "IC_kwDOABII58635ULw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3085255408",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-17T19:38:25Z",
      "updated_at": "2025-07-17T19:38:25Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/runs/46205797248</sub>\n<sub>LLM reason (âœ¨ experimental): The CI failure is caused by a missing include guard in src/util/variantset.h, as reported by the lint check.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#issuecomment-3085255408",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33005"
    },
    {
      "event": "commented",
      "id": 3085647936,
      "node_id": "IC_kwDOABII586360BA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3085647936",
      "actor": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-17T21:58:38Z",
      "updated_at": "2025-07-17T21:58:38Z",
      "author_association": "CONTRIBUTOR",
      "body": "i'll check if there are others but this looks cleaner",
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#issuecomment-3085647936",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33005"
    },
    {
      "event": "reviewed",
      "id": 3033553036,
      "node_id": "PRR_kwDOABII58600FiM",
      "url": null,
      "actor": null,
      "commit_id": "67837bb426049918004fe48525db71b515940e6f",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#pullrequestreview-3033553036",
      "submitted_at": "2025-07-18T13:27:36Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18701117353,
      "node_id": "HRFPE_lADOABII587BJxIKzwAAAARarGep",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18701117353",
      "actor": {
        "login": "marcofleon",
        "id": 95179662,
        "node_id": "U_kgDOBaxTjg",
        "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/marcofleon",
        "html_url": "https://github.com/marcofleon",
        "followers_url": "https://api.github.com/users/marcofleon/followers",
        "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
        "organizations_url": "https://api.github.com/users/marcofleon/orgs",
        "repos_url": "https://api.github.com/users/marcofleon/repos",
        "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/marcofleon/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "62985cc68aeb1bf7ab1ec6dbea6115442ebe8b04",
      "commit_url": "https://api.github.com/repos/marcofleon/bitcoin/commits/62985cc68aeb1bf7ab1ec6dbea6115442ebe8b04",
      "created_at": "2025-07-18T13:47:06Z"
    },
    {
      "event": "unlabeled",
      "id": 18703097407,
      "node_id": "UNLE_lADOABII587BJxIKzwAAAARayp4_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18703097407",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-18T15:35:35Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18707146193,
      "node_id": "HRFPE_lADOABII587BJxIKzwAAAARbCGXR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18707146193",
      "actor": {
        "login": "marcofleon",
        "id": 95179662,
        "node_id": "U_kgDOBaxTjg",
        "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/marcofleon",
        "html_url": "https://github.com/marcofleon",
        "followers_url": "https://api.github.com/users/marcofleon/followers",
        "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
        "organizations_url": "https://api.github.com/users/marcofleon/orgs",
        "repos_url": "https://api.github.com/users/marcofleon/repos",
        "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/marcofleon/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "e991cac062ca644f3c4ac5c5144eb0daf445fd09",
      "commit_url": "https://api.github.com/repos/marcofleon/bitcoin/commits/e991cac062ca644f3c4ac5c5144eb0daf445fd09",
      "created_at": "2025-07-18T20:43:14Z"
    },
    {
      "event": "milestoned",
      "id": 18711467865,
      "node_id": "MIE_lADOABII587BJxIKzwAAAARbSldZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18711467865",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-19T13:15:32Z",
      "milestone": {
        "title": "30.0"
      }
    },
    {
      "event": "reviewed",
      "id": 3035484779,
      "node_id": "PRR_kwDOABII58607dJr",
      "url": null,
      "actor": null,
      "commit_id": "e991cac062ca644f3c4ac5c5144eb0daf445fd09",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "crACK e991cac062ca644f3c4ac5c5144eb0daf445fd09\r\n\r\nThanks for doing the follow-up!\r\nThe major change is that `Peer::TxRelay::m_tx_inventory_to_send` now uses `Wtxid` instead of `GenTxid` while the `Peer::TxRelay::m_tx_inventory_known_filter` bloom filter still uses either `Wtxid` or `Txid` consistently depending on the type of peer.\r\n\r\nOnly one style-nit in case you re-touch.",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#pullrequestreview-3035484779",
      "submitted_at": "2025-07-19T19:08:20Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
    },
    {
      "event": "reviewed",
      "id": 3037443575,
      "node_id": "PRR_kwDOABII5861C7X3",
      "url": null,
      "actor": null,
      "commit_id": "e991cac062ca644f3c4ac5c5144eb0daf445fd09",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Approach ACK",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#pullrequestreview-3037443575",
      "submitted_at": "2025-07-21T10:49:41Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQ1ODg1NzVlZDFlNmI2M2E2YmNmZjNmODkxOTk1NmQxODgxYzlkOGQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d588575ed1e6b63a6bcff3f8919956d1881c9d8d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d588575ed1e6b63a6bcff3f8919956d1881c9d8d",
      "tree": {
        "sha": "e83978ee658bf08b1c614ae10c3491be9145e4d4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e83978ee658bf08b1c614ae10c3491be9145e4d4"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/184159e4f30c6846cd0324ee07b59e7f8121a5ea",
          "sha": "184159e4f30c6846cd0324ee07b59e7f8121a5ea",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/184159e4f30c6846cd0324ee07b59e7f8121a5ea"
        }
      ],
      "message": "refactor: miscellaneous GenTxid followups\n\nAddresses a few comments from #32631:\nhttps://github.com/bitcoin/bitcoin/pull/32631#discussion_r2199951996\nhttps://github.com/bitcoin/bitcoin/pull/32631#discussion_r2201874252\nhttps://github.com/bitcoin/bitcoin/pull/32631#discussion_r2201918072",
      "committer": {
        "name": "marcofleon",
        "email": "marleo23@proton.me",
        "date": "2025-07-23T14:01:18Z"
      },
      "author": {
        "name": "marcofleon",
        "email": "marleo23@proton.me",
        "date": "2025-07-15T15:20:32Z"
      },
      "sha": "d588575ed1e6b63a6bcff3f8919956d1881c9d8d"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGE5ODE5YjBlOWQzYzc0OTcwYTk0Y2I2NzRmZThmZDc3MWU2MGY2ZGY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a9819b0e9d3c74970a94cb674fe8fd771e60f6df",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a9819b0e9d3c74970a94cb674fe8fd771e60f6df",
      "tree": {
        "sha": "fc4bca03f7871cb08b177e5ab97425c596d73b6c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/fc4bca03f7871cb08b177e5ab97425c596d73b6c"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d588575ed1e6b63a6bcff3f8919956d1881c9d8d",
          "sha": "d588575ed1e6b63a6bcff3f8919956d1881c9d8d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d588575ed1e6b63a6bcff3f8919956d1881c9d8d"
        }
      ],
      "message": "refactor: Change `FindTxForGetData` to take GenTxid instead of CInv\n\nAddresses\nhttps://github.com/bitcoin/bitcoin/pull/32631#discussion_r2200291621\nfrom #32631",
      "committer": {
        "name": "marcofleon",
        "email": "marleo23@proton.me",
        "date": "2025-07-23T14:01:43Z"
      },
      "author": {
        "name": "marcofleon",
        "email": "marleo23@proton.me",
        "date": "2025-07-15T15:59:46Z"
      },
      "sha": "a9819b0e9d3c74970a94cb674fe8fd771e60f6df"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18775532969,
      "node_id": "HRFPE_lADOABII587BJxIKzwAAAARfG-Wp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18775532969",
      "actor": {
        "login": "marcofleon",
        "id": 95179662,
        "node_id": "U_kgDOBaxTjg",
        "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/marcofleon",
        "html_url": "https://github.com/marcofleon",
        "followers_url": "https://api.github.com/users/marcofleon/followers",
        "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
        "organizations_url": "https://api.github.com/users/marcofleon/orgs",
        "repos_url": "https://api.github.com/users/marcofleon/repos",
        "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/marcofleon/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "057898a6bb6c7cb5b98c9b6e8f219373a5b12c81",
      "commit_url": "https://api.github.com/repos/marcofleon/bitcoin/commits/057898a6bb6c7cb5b98c9b6e8f219373a5b12c81",
      "created_at": "2025-07-23T14:11:50Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18775785301,
      "node_id": "HRFPE_lADOABII587BJxIKzwAAAARfH79V",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18775785301",
      "actor": {
        "login": "marcofleon",
        "id": 95179662,
        "node_id": "U_kgDOBaxTjg",
        "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/marcofleon",
        "html_url": "https://github.com/marcofleon",
        "followers_url": "https://api.github.com/users/marcofleon/followers",
        "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
        "organizations_url": "https://api.github.com/users/marcofleon/orgs",
        "repos_url": "https://api.github.com/users/marcofleon/repos",
        "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/marcofleon/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "8e19a4375e1db6e59cdcb38e0cc3e1dab79e88ec",
      "commit_url": "https://api.github.com/repos/marcofleon/bitcoin/commits/8e19a4375e1db6e59cdcb38e0cc3e1dab79e88ec",
      "created_at": "2025-07-23T14:24:09Z"
    },
    {
      "event": "reviewed",
      "id": 3053089449,
      "node_id": "PRR_kwDOABII5861-nKp",
      "url": null,
      "actor": null,
      "commit_id": "8e19a4375e1db6e59cdcb38e0cc3e1dab79e88ec",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#pullrequestreview-3053089449",
      "submitted_at": "2025-07-24T20:02:22Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
    },
    {
      "event": "reviewed",
      "id": 3055150696,
      "node_id": "PRR_kwDOABII5862GeZo",
      "url": null,
      "actor": null,
      "commit_id": "8e19a4375e1db6e59cdcb38e0cc3e1dab79e88ec",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "concept ACK 8e19a4375e1db6e59cdcb38e0cc3e1dab79e88ec\r\n\r\nThis PR is a followup of #32631 which addresses some of the NITS / comments that were placed in that PR. Additionally the PR simplifies `m_tx_inventory_to_send` a bit to make it `std::set<Wtxid>` based in stead of `std::set<GenTxid>` imho a good change. \r\n\r\n- code reviewed âœ…\r\n- build and tested âœ…",
      "user": {
        "login": "janb84",
        "id": 608446,
        "node_id": "MDQ6VXNlcjYwODQ0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/608446?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/janb84",
        "html_url": "https://github.com/janb84",
        "followers_url": "https://api.github.com/users/janb84/followers",
        "following_url": "https://api.github.com/users/janb84/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/janb84/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/janb84/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/janb84/subscriptions",
        "organizations_url": "https://api.github.com/users/janb84/orgs",
        "repos_url": "https://api.github.com/users/janb84/repos",
        "events_url": "https://api.github.com/users/janb84/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/janb84/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#pullrequestreview-3055150696",
      "submitted_at": "2025-07-25T12:05:00Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
    },
    {
      "event": "review_requested",
      "id": 18813440123,
      "node_id": "RRE_lADOABII587BJxIKzwAAAARhXlB7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18813440123",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-25T12:05:04Z",
      "requested_reviewer": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "review_requested",
      "id": 18813440358,
      "node_id": "RRE_lADOABII587BJxIKzwAAAARhXlFm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18813440358",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-25T12:05:05Z",
      "requested_reviewer": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 3062716127,
      "node_id": "PRR_kwDOABII5862jVbf",
      "url": null,
      "actor": null,
      "commit_id": "8e19a4375e1db6e59cdcb38e0cc3e1dab79e88ec",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#pullrequestreview-3062716127",
      "submitted_at": "2025-07-28T13:30:32Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDk0YjM5Y2U3MzgzMWFjYzRjOTRjN2YwZDEzNDdkNTk5MWIyN2VmMGI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "tree": {
        "sha": "141f4b9123d958eca9672eb82c9dcfd62e8048e6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/141f4b9123d958eca9672eb82c9dcfd62e8048e6"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a9819b0e9d3c74970a94cb674fe8fd771e60f6df",
          "sha": "a9819b0e9d3c74970a94cb674fe8fd771e60f6df",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a9819b0e9d3c74970a94cb674fe8fd771e60f6df"
        }
      ],
      "message": "refactor: Change `m_tx_inventory_to_send` from `std::set<GenTxid>` to `std::set<Wtxid>`\n\nSimplifies `m_tx_inventory_to_send` a bit by making it a set of Wtxids.\nWtxid relay is prevalent throughout the network, so the complexity of\ndealing with a GenTxid in this data structure isn't necessary.\n\nFor peers that aren't wtxid relay, the txid is now retrieved from our\nmempool entry when the inv is constructed.",
      "committer": {
        "name": "marcofleon",
        "email": "marleo23@proton.me",
        "date": "2025-07-28T17:19:04Z"
      },
      "author": {
        "name": "marcofleon",
        "email": "marleo23@proton.me",
        "date": "2025-07-18T20:11:21Z"
      },
      "sha": "94b39ce73831acc4c94c7f0d1347d5991b27ef0b"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18861165505,
      "node_id": "HRFPE_lADOABII587BJxIKzwAAAARkNovB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18861165505",
      "actor": {
        "login": "marcofleon",
        "id": 95179662,
        "node_id": "U_kgDOBaxTjg",
        "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/marcofleon",
        "html_url": "https://github.com/marcofleon",
        "followers_url": "https://api.github.com/users/marcofleon/followers",
        "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
        "organizations_url": "https://api.github.com/users/marcofleon/orgs",
        "repos_url": "https://api.github.com/users/marcofleon/repos",
        "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/marcofleon/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "commit_url": "https://api.github.com/repos/marcofleon/bitcoin/commits/94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "created_at": "2025-07-28T17:21:08Z"
    },
    {
      "event": "commented",
      "id": 3128251488,
      "node_id": "IC_kwDOABII5866dVRg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3128251488",
      "actor": {
        "login": "marcofleon",
        "id": 95179662,
        "node_id": "U_kgDOBaxTjg",
        "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/marcofleon",
        "html_url": "https://github.com/marcofleon",
        "followers_url": "https://api.github.com/users/marcofleon/followers",
        "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
        "organizations_url": "https://api.github.com/users/marcofleon/orgs",
        "repos_url": "https://api.github.com/users/marcofleon/repos",
        "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/marcofleon/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-28T17:24:51Z",
      "updated_at": "2025-07-28T17:24:51Z",
      "author_association": "CONTRIBUTOR",
      "body": "Most recent push updates the `m_tx_inventory_to_send` comment and adds a clarifying comment as to why we create the inv before checking `m_tx_inventory_known_filter`.\r\n\r\nI'm still considering https://github.com/bitcoin/bitcoin/pull/33005#discussion_r2236858410.",
      "user": {
        "login": "marcofleon",
        "id": 95179662,
        "node_id": "U_kgDOBaxTjg",
        "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/marcofleon",
        "html_url": "https://github.com/marcofleon",
        "followers_url": "https://api.github.com/users/marcofleon/followers",
        "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
        "organizations_url": "https://api.github.com/users/marcofleon/orgs",
        "repos_url": "https://api.github.com/users/marcofleon/repos",
        "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/marcofleon/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#issuecomment-3128251488",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33005"
    },
    {
      "event": "commented",
      "id": 3128795026,
      "node_id": "IC_kwDOABII5866fZ-S",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3128795026",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-28T19:15:32Z",
      "updated_at": "2025-07-28T19:15:32Z",
      "author_association": "MEMBER",
      "body": "ACK 94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#issuecomment-3128795026",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33005"
    },
    {
      "event": "review_requested",
      "id": 18863095194,
      "node_id": "RRE_lADOABII587BJxIKzwAAAARkU_2a",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18863095194",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-28T19:15:37Z",
      "requested_reviewer": {
        "login": "janb84",
        "id": 608446,
        "node_id": "MDQ6VXNlcjYwODQ0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/608446?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/janb84",
        "html_url": "https://github.com/janb84",
        "followers_url": "https://api.github.com/users/janb84/followers",
        "following_url": "https://api.github.com/users/janb84/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/janb84/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/janb84/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/janb84/subscriptions",
        "organizations_url": "https://api.github.com/users/janb84/orgs",
        "repos_url": "https://api.github.com/users/janb84/repos",
        "events_url": "https://api.github.com/users/janb84/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/janb84/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 3067511438,
      "node_id": "PRR_kwDOABII58621oKO",
      "url": null,
      "actor": null,
      "commit_id": "94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK 94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#pullrequestreview-3067511438",
      "submitted_at": "2025-07-29T17:27:37Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2216047704",
      "pull_request_review_id": 3033553036,
      "id": 2216047704,
      "node_id": "PRRC_kwDOABII586EFjRY",
      "diff_hunk": "@@ -302,7 +303,7 @@ struct Peer {\n          *  non-wtxid-relay peers, wtxid for wtxid-relay peers). We use the\n          *  mempool to sort transactions in dependency order before relay, so\n          *  this does not have to be sorted. */\n-        std::set<GenTxid> m_tx_inventory_to_send GUARDED_BY(m_tx_inventory_mutex);\n+        VariantSet<Txid, Wtxid> m_tx_inventory_to_send GUARDED_BY(m_tx_inventory_mutex);",
      "path": "src/net_processing.cpp",
      "position": null,
      "original_position": 13,
      "commit_id": "94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "original_commit_id": "67837bb426049918004fe48525db71b515940e6f",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "67837bb426049918004fe48525db71b515940e6f seems like an unnecessarily complex approach - looks like we are introducing `VariantSet` solely for this purpose? We can just keep a set of `Wtxid`s and, if the peer does not support wtxidrelay, grab the txid from `info.tx` (which we have to look up anyway) to construct the inv message. It's also going to be Wtxids pretty much 100% of the time.",
      "created_at": "2025-07-18T13:27:36Z",
      "updated_at": "2025-07-18T13:29:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#discussion_r2216047704",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2216047704"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 306,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2216903066",
      "pull_request_review_id": 3034804228,
      "id": 2216903066,
      "node_id": "PRRC_kwDOABII586EI0Ga",
      "diff_hunk": "@@ -302,7 +303,7 @@ struct Peer {\n          *  non-wtxid-relay peers, wtxid for wtxid-relay peers). We use the\n          *  mempool to sort transactions in dependency order before relay, so\n          *  this does not have to be sorted. */\n-        std::set<GenTxid> m_tx_inventory_to_send GUARDED_BY(m_tx_inventory_mutex);\n+        VariantSet<Txid, Wtxid> m_tx_inventory_to_send GUARDED_BY(m_tx_inventory_mutex);",
      "path": "src/net_processing.cpp",
      "position": null,
      "original_position": 13,
      "commit_id": "94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "original_commit_id": "67837bb426049918004fe48525db71b515940e6f",
      "in_reply_to_id": 2216047704,
      "user": {
        "login": "marcofleon",
        "id": 95179662,
        "node_id": "U_kgDOBaxTjg",
        "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/marcofleon",
        "html_url": "https://github.com/marcofleon",
        "followers_url": "https://api.github.com/users/marcofleon/followers",
        "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
        "organizations_url": "https://api.github.com/users/marcofleon/orgs",
        "repos_url": "https://api.github.com/users/marcofleon/repos",
        "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/marcofleon/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done. Thanks for the suggestion, this is quite a bit simpler. Let me know if there's something that can be improved/fixed.",
      "created_at": "2025-07-18T20:49:56Z",
      "updated_at": "2025-07-18T20:49:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#discussion_r2216903066",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2216903066"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 306,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2217409016",
      "pull_request_review_id": 3035484779,
      "id": 2217409016,
      "node_id": "PRRC_kwDOABII586EKvn4",
      "diff_hunk": "@@ -5756,13 +5756,13 @@ bool PeerManagerImpl::SendMessages(CNode* pto)\n                     LOCK(tx_relay->m_bloom_filter_mutex);\n \n                     for (const auto& txinfo : vtxinfo) {\n+                        const auto& txid{txinfo.tx->GetHash()};\n+                        const auto& wtxid{txinfo.tx->GetWitnessHash()};\n                         CInv inv{\n                             peer->m_wtxid_relay ? MSG_WTX : MSG_TX,\n-                            peer->m_wtxid_relay ?\n-                                txinfo.tx->GetWitnessHash().ToUint256() :\n-                                txinfo.tx->GetHash().ToUint256(),\n+                            peer->m_wtxid_relay ? wtxid.ToUint256() : txid.ToUint256(),\n                         };",
      "path": "src/net_processing.cpp",
      "position": null,
      "original_position": 94,
      "commit_id": "94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "original_commit_id": "e991cac062ca644f3c4ac5c5144eb0daf445fd09",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: Could be made more consistent with:\r\nhttps://github.com/bitcoin/bitcoin/blob/e991cac062ca644f3c4ac5c5144eb0daf445fd09/src/net_processing.cpp#L5815-L5817\r\n\r\n<details><summary>(Personally I prefer 1 branch and curly-braces).</summary>\r\n\r\n```diff\r\ndiff --git a/src/net_processing.cpp b/src/net_processing.cpp\r\nindex ebb3db39a5..f38dc4b90d 100644\r\n--- a/src/net_processing.cpp\r\n+++ b/src/net_processing.cpp\r\n@@ -5758,10 +5758,9 @@ bool PeerManagerImpl::SendMessages(CNode* pto)\r\n                     for (const auto& txinfo : vtxinfo) {\r\n                         const auto& txid{txinfo.tx->GetHash()};\r\n                         const auto& wtxid{txinfo.tx->GetWitnessHash()};\r\n-                        CInv inv{\r\n-                            peer->m_wtxid_relay ? MSG_WTX : MSG_TX,\r\n-                            peer->m_wtxid_relay ? wtxid.ToUint256() : txid.ToUint256(),\r\n-                        };\r\n+                        CInv inv = peer->m_wtxid_relay ?\r\n+                                       CInv{MSG_WTX, wtxid.ToUint256()} :\r\n+                                       CInv{MSG_TX, txid.ToUint256()};\r\n                         tx_relay->m_tx_inventory_to_send.erase(wtxid);\r\n \r\n                         // Don't send transactions that peers will not put into their mempool\r\n@@ -5813,8 +5812,8 @@ bool PeerManagerImpl::SendMessages(CNode* pto)\r\n                             continue;\r\n                         }\r\n                         const auto inv = peer->m_wtxid_relay ?\r\n-                                             CInv(MSG_WTX, wtxid.ToUint256()) :\r\n-                                             CInv(MSG_TX, txinfo.tx->GetHash());\r\n+                                             CInv{MSG_WTX, wtxid.ToUint256()} :\r\n+                                             CInv{MSG_TX, txinfo.tx->GetHash()};\r\n                         // Check if not in the filter already\r\n                         if (tx_relay->m_tx_inventory_known_filter.contains(inv.hash)) {\r\n                             continue;\r\n```\r\n</details>",
      "created_at": "2025-07-19T18:30:26Z",
      "updated_at": "2025-07-19T19:08:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#discussion_r2217409016",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2217409016"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
        }
      },
      "start_line": null,
      "original_start_line": 5761,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 5764,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2218771665",
      "pull_request_review_id": 3037443575,
      "id": 2218771665,
      "node_id": "PRRC_kwDOABII586EP8TR",
      "diff_hunk": "@@ -98,7 +98,7 @@ class GenTxid : public std::variant<Txid, Wtxid>\n \n     friend auto operator<=>(const GenTxid& a, const GenTxid& b)\n     {\n-        return std::tuple(a.IsWtxid(), a.ToUint256()) <=> std::tuple(b.IsWtxid(), b.ToUint256());\n+        return std::tuple<bool, const uint256&>(a.IsWtxid(), a.ToUint256()) <=> std::tuple<bool, const uint256&>(b.IsWtxid(), b.ToUint256());",
      "path": "src/util/transaction_identifier.h",
      "position": 6,
      "original_position": 5,
      "commit_id": "94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "original_commit_id": "e662bca72a30e6a7f174de28f3b1e5c9d7018776",
      "in_reply_to_id": null,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Maybe add a comment to call attention to the `const&`and the reason for it?",
      "created_at": "2025-07-21T10:26:32Z",
      "updated_at": "2025-07-21T10:49:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#discussion_r2218771665",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2218771665"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 102,
      "original_line": 102,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2218799503",
      "pull_request_review_id": 3037443575,
      "id": 2218799503,
      "node_id": "PRRC_kwDOABII586EQDGP",
      "diff_hunk": "@@ -2391,15 +2392,10 @@ void PeerManagerImpl::ProcessGetBlockData(CNode& pfrom, Peer& peer, const CInv&\n     }\n }\n \n-CTransactionRef PeerManagerImpl::FindTxForGetData(const Peer::TxRelay& tx_relay, const CInv& inv)\n+template <TxidOrWtxid T>\n+CTransactionRef PeerManagerImpl::FindTxForGetData(const Peer::TxRelay& tx_relay, const T& id)\n {\n-    auto gtxid{ToGenTxid(inv)};\n-    // If a tx was in the mempool prior to the last INV for this peer, permit the request.\n-    auto txinfo{std::visit(\n-        [&](const auto& id) EXCLUSIVE_LOCKS_REQUIRED(NetEventsInterface::g_msgproc_mutex) {\n-            return m_mempool.info_for_relay(id, tx_relay.m_last_inv_sequence);\n-        },\n-        gtxid)};\n+    auto txinfo{m_mempool.info_for_relay(id, tx_relay.m_last_inv_sequence)};",
      "path": "src/net_processing.cpp",
      "position": null,
      "original_position": 25,
      "commit_id": "94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "original_commit_id": "bc56473f43c6bec3068eeac58c67d5b894202709",
      "in_reply_to_id": null,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Passing in the `GenTxid` and keeping the `visit` inside the function (rather than an `if` outside it along with templatizing) seems nicer?",
      "created_at": "2025-07-21T10:40:16Z",
      "updated_at": "2025-07-21T10:49:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#discussion_r2218799503",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2218799503"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2398,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2219264339",
      "pull_request_review_id": 3038186152,
      "id": 2219264339,
      "node_id": "PRRC_kwDOABII586ER0lT",
      "diff_hunk": "@@ -2391,15 +2392,10 @@ void PeerManagerImpl::ProcessGetBlockData(CNode& pfrom, Peer& peer, const CInv&\n     }\n }\n \n-CTransactionRef PeerManagerImpl::FindTxForGetData(const Peer::TxRelay& tx_relay, const CInv& inv)\n+template <TxidOrWtxid T>\n+CTransactionRef PeerManagerImpl::FindTxForGetData(const Peer::TxRelay& tx_relay, const T& id)\n {\n-    auto gtxid{ToGenTxid(inv)};\n-    // If a tx was in the mempool prior to the last INV for this peer, permit the request.\n-    auto txinfo{std::visit(\n-        [&](const auto& id) EXCLUSIVE_LOCKS_REQUIRED(NetEventsInterface::g_msgproc_mutex) {\n-            return m_mempool.info_for_relay(id, tx_relay.m_last_inv_sequence);\n-        },\n-        gtxid)};\n+    auto txinfo{m_mempool.info_for_relay(id, tx_relay.m_last_inv_sequence)};",
      "path": "src/net_processing.cpp",
      "position": null,
      "original_position": 25,
      "commit_id": "94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "original_commit_id": "bc56473f43c6bec3068eeac58c67d5b894202709",
      "in_reply_to_id": 2218799503,
      "user": {
        "login": "marcofleon",
        "id": 95179662,
        "node_id": "U_kgDOBaxTjg",
        "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/marcofleon",
        "html_url": "https://github.com/marcofleon",
        "followers_url": "https://api.github.com/users/marcofleon/followers",
        "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
        "organizations_url": "https://api.github.com/users/marcofleon/orgs",
        "repos_url": "https://api.github.com/users/marcofleon/repos",
        "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/marcofleon/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Fair, it does feel cleaner using GenTxid and avoiding the branch in `ProcessGetData`. I chose to templatize in response to this [comment](https://github.com/bitcoin/bitcoin/pull/32631#pullrequestreview-2877628308) from the original PR. The templating takes care of everything at compile-time, which is nice. But `m_most_recent_block_txs` holds GenTxids, so in the templated version we're creating a temporary GenTxid anyway for that map lookup vs creating a GenTxid once upfront.\r\n\r\nI think it's largely a stylistic choice and don't have a strong preference either way. @stickies-v @dergoegge if you have anything to add, feel free.\r\n\r\nedit: Of course, if there's something I'm missing as to why one approach is clearly better, let me know",
      "created_at": "2025-07-21T13:46:03Z",
      "updated_at": "2025-07-21T14:26:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#discussion_r2219264339",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2219264339"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2398,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2221958115",
      "pull_request_review_id": 3042189255,
      "id": 2221958115,
      "node_id": "PRRC_kwDOABII586EcGPj",
      "diff_hunk": "@@ -2391,15 +2392,10 @@ void PeerManagerImpl::ProcessGetBlockData(CNode& pfrom, Peer& peer, const CInv&\n     }\n }\n \n-CTransactionRef PeerManagerImpl::FindTxForGetData(const Peer::TxRelay& tx_relay, const CInv& inv)\n+template <TxidOrWtxid T>\n+CTransactionRef PeerManagerImpl::FindTxForGetData(const Peer::TxRelay& tx_relay, const T& id)\n {\n-    auto gtxid{ToGenTxid(inv)};\n-    // If a tx was in the mempool prior to the last INV for this peer, permit the request.\n-    auto txinfo{std::visit(\n-        [&](const auto& id) EXCLUSIVE_LOCKS_REQUIRED(NetEventsInterface::g_msgproc_mutex) {\n-            return m_mempool.info_for_relay(id, tx_relay.m_last_inv_sequence);\n-        },\n-        gtxid)};\n+    auto txinfo{m_mempool.info_for_relay(id, tx_relay.m_last_inv_sequence)};",
      "path": "src/net_processing.cpp",
      "position": null,
      "original_position": 25,
      "commit_id": "94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "original_commit_id": "bc56473f43c6bec3068eeac58c67d5b894202709",
      "in_reply_to_id": 2218799503,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "less relevant here, but below you are removing the assert on the `CInv&`. Seems fine to at least restore this as an Assume?",
      "created_at": "2025-07-22T09:56:57Z",
      "updated_at": "2025-07-22T09:56:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#discussion_r2221958115",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2221958115"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2398,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2224346894",
      "pull_request_review_id": 3045600082,
      "id": 2224346894,
      "node_id": "PRRC_kwDOABII586ElNcO",
      "diff_hunk": "@@ -2391,15 +2392,10 @@ void PeerManagerImpl::ProcessGetBlockData(CNode& pfrom, Peer& peer, const CInv&\n     }\n }\n \n-CTransactionRef PeerManagerImpl::FindTxForGetData(const Peer::TxRelay& tx_relay, const CInv& inv)\n+template <TxidOrWtxid T>\n+CTransactionRef PeerManagerImpl::FindTxForGetData(const Peer::TxRelay& tx_relay, const T& id)\n {\n-    auto gtxid{ToGenTxid(inv)};\n-    // If a tx was in the mempool prior to the last INV for this peer, permit the request.\n-    auto txinfo{std::visit(\n-        [&](const auto& id) EXCLUSIVE_LOCKS_REQUIRED(NetEventsInterface::g_msgproc_mutex) {\n-            return m_mempool.info_for_relay(id, tx_relay.m_last_inv_sequence);\n-        },\n-        gtxid)};\n+    auto txinfo{m_mempool.info_for_relay(id, tx_relay.m_last_inv_sequence)};",
      "path": "src/net_processing.cpp",
      "position": null,
      "original_position": 25,
      "commit_id": "94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "original_commit_id": "bc56473f43c6bec3068eeac58c67d5b894202709",
      "in_reply_to_id": 2218799503,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "You might consider:\r\n\r\n```diff\r\n\r\ndiff --git a/src/net_processing.cpp b/src/net_processing.cpp\r\nindex 10fbae5e7ed..42102973c31 100644\r\n--- a/src/net_processing.cpp\r\n+++ b/src/net_processing.cpp\r\n@@ -947,7 +947,7 @@ private:\r\n     std::atomic<std::chrono::seconds> m_last_tip_update{0s};\r\n\r\n     /** Determine whether or not a peer can request a transaction, and return it (or nullptr if not found or not allowed). */\r\n-    CTransactionRef FindTxForGetData(const Peer::TxRelay& tx_relay, const CInv& inv)\r\n+    CTransactionRef FindTxForGetData(const Peer::TxRelay& tx_relay, const GenTxid& gtxid)\r\n         EXCLUSIVE_LOCKS_REQUIRED(!m_most_recent_block_mutex, NetEventsInterface::g_msgproc_mutex);\r\n\r\n     void ProcessGetData(CNode& pfrom, Peer& peer, const std::atomic<bool>& interruptMsgProc)\r\n@@ -2391,15 +2391,10 @@ void PeerManagerImpl::ProcessGetBlockData(CNode& pfrom, Peer& peer, const CInv&\r\n     }\r\n }\r\n\r\n-CTransactionRef PeerManagerImpl::FindTxForGetData(const Peer::TxRelay& tx_relay, const CInv& inv)\r\n+CTransactionRef PeerManagerImpl::FindTxForGetData(const Peer::TxRelay& tx_relay, const GenTxid& gtxid)\r\n {\r\n-    auto gtxid{ToGenTxid(inv)};\r\n     // If a tx was in the mempool prior to the last INV for this peer, permit the request.\r\n-    auto txinfo{std::visit(\r\n-        [&](const auto& id) EXCLUSIVE_LOCKS_REQUIRED(NetEventsInterface::g_msgproc_mutex) {\r\n-            return m_mempool.info_for_relay(id, tx_relay.m_last_inv_sequence);\r\n-        },\r\n-        gtxid)};\r\n+    auto txinfo = m_mempool.info_for_relay(gtxid, tx_relay.m_last_inv_sequence);\r\n     if (txinfo.tx) {\r\n         return std::move(txinfo.tx);\r\n     }\r\n@@ -2442,7 +2437,7 @@ void PeerManagerImpl::ProcessGetData(CNode& pfrom, Peer& peer, const std::atomic\r\n             continue;\r\n         }\r\n\r\n-        if (auto tx{FindTxForGetData(*tx_relay, inv)}) {\r\n+        if (auto tx{FindTxForGetData(*tx_relay, ToGenTxid(inv))}) {\r\n             // WTX and WITNESS_TX imply we serialize with witness\r\n             const auto maybe_with_witness = (inv.IsMsgTx() ? TX_NO_WITNESS : TX_WITH_WITNESS);\r\n             MakeAndPushMessage(pfrom, NetMsgType::TX, maybe_with_witness(*tx));\r\ndiff --git a/src/txmempool.h b/src/txmempool.h\r\nindex 687c474f8e0..31e168bc277 100644\r\n--- a/src/txmempool.h\r\n+++ b/src/txmempool.h\r\n@@ -652,12 +652,13 @@ public:\r\n     }\r\n\r\n     /** Returns info for a transaction if its entry_sequence < last_sequence */\r\n-    template <TxidOrWtxid T>\r\n-    TxMempoolInfo info_for_relay(const T& id, uint64_t last_sequence) const\r\n+    TxMempoolInfo info_for_relay(const GenTxid& gtxid, uint64_t last_sequence) const\r\n     {\r\n-        LOCK(cs);\r\n-        auto i{GetIter(id)};\r\n-        return (i.has_value() && i.value()->GetSequence() < last_sequence) ? GetInfo(*i) : TxMempoolInfo{};\r\n+        return std::visit([&](const auto& id) {\r\n+            LOCK(cs);\r\n+            auto i{GetIter(id)};\r\n+            return (i.has_value() && i.value()->GetSequence() < last_sequence) ? GetInfo(*i) : TxMempoolInfo{};\r\n+        }, gtxid);\r\n     }\r\n\r\n     std::vector<CTxMemPoolEntryRef> entryAll() const EXCLUSIVE_LOCKS_REQUIRED(cs);\r\n```",
      "created_at": "2025-07-23T04:56:34Z",
      "updated_at": "2025-07-23T04:56:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#discussion_r2224346894",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2224346894"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2398,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2224354639",
      "pull_request_review_id": 3045610777,
      "id": 2224354639,
      "node_id": "PRRC_kwDOABII586ElPVP",
      "diff_hunk": "@@ -2391,15 +2392,10 @@ void PeerManagerImpl::ProcessGetBlockData(CNode& pfrom, Peer& peer, const CInv&\n     }\n }\n \n-CTransactionRef PeerManagerImpl::FindTxForGetData(const Peer::TxRelay& tx_relay, const CInv& inv)\n+template <TxidOrWtxid T>\n+CTransactionRef PeerManagerImpl::FindTxForGetData(const Peer::TxRelay& tx_relay, const T& id)\n {\n-    auto gtxid{ToGenTxid(inv)};\n-    // If a tx was in the mempool prior to the last INV for this peer, permit the request.\n-    auto txinfo{std::visit(\n-        [&](const auto& id) EXCLUSIVE_LOCKS_REQUIRED(NetEventsInterface::g_msgproc_mutex) {\n-            return m_mempool.info_for_relay(id, tx_relay.m_last_inv_sequence);\n-        },\n-        gtxid)};\n+    auto txinfo{m_mempool.info_for_relay(id, tx_relay.m_last_inv_sequence)};",
      "path": "src/net_processing.cpp",
      "position": null,
      "original_position": 25,
      "commit_id": "94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "original_commit_id": "bc56473f43c6bec3068eeac58c67d5b894202709",
      "in_reply_to_id": 2218799503,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Or adding `GetIter(GenTxid)` could work too:\r\n\r\n```c++\r\n     std::optional<txiter> GetIter(const GenTxid& gtxid) const EXCLUSIVE_LOCKS_REQUIRED(cs)\r\n     {\r\n         return std::visit([&](const auto& id) EXCLUSIVE_LOCKS_REQUIRED(cs) {\r\n             return GetIter(id);\r\n         }, gtxid);\r\n     }\r\n\r\n     /** Returns info for a transaction if its entry_sequence < last_sequence */\r\n     TxMempoolInfo info_for_relay(const GenTxid& gtxid, uint64_t last_sequence) const\r\n     {\r\n         LOCK(cs);\r\n         auto i{GetIter(gtxid)};\r\n         return (i.has_value() && i.value()->GetSequence() < last_sequence) ? GetInfo(*i) : TxMempoolInfo{};\r\n     }\r\n```",
      "created_at": "2025-07-23T05:03:41Z",
      "updated_at": "2025-07-23T05:05:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#discussion_r2224354639",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2224354639"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2398,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2225759355",
      "pull_request_review_id": 3047669173,
      "id": 2225759355,
      "node_id": "PRRC_kwDOABII586EqmR7",
      "diff_hunk": "@@ -2391,15 +2392,10 @@ void PeerManagerImpl::ProcessGetBlockData(CNode& pfrom, Peer& peer, const CInv&\n     }\n }\n \n-CTransactionRef PeerManagerImpl::FindTxForGetData(const Peer::TxRelay& tx_relay, const CInv& inv)\n+template <TxidOrWtxid T>\n+CTransactionRef PeerManagerImpl::FindTxForGetData(const Peer::TxRelay& tx_relay, const T& id)\n {\n-    auto gtxid{ToGenTxid(inv)};\n-    // If a tx was in the mempool prior to the last INV for this peer, permit the request.\n-    auto txinfo{std::visit(\n-        [&](const auto& id) EXCLUSIVE_LOCKS_REQUIRED(NetEventsInterface::g_msgproc_mutex) {\n-            return m_mempool.info_for_relay(id, tx_relay.m_last_inv_sequence);\n-        },\n-        gtxid)};\n+    auto txinfo{m_mempool.info_for_relay(id, tx_relay.m_last_inv_sequence)};",
      "path": "src/net_processing.cpp",
      "position": null,
      "original_position": 25,
      "commit_id": "94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "original_commit_id": "bc56473f43c6bec3068eeac58c67d5b894202709",
      "in_reply_to_id": 2218799503,
      "user": {
        "login": "marcofleon",
        "id": 95179662,
        "node_id": "U_kgDOBaxTjg",
        "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/marcofleon",
        "html_url": "https://github.com/marcofleon",
        "followers_url": "https://api.github.com/users/marcofleon/followers",
        "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
        "organizations_url": "https://api.github.com/users/marcofleon/orgs",
        "repos_url": "https://api.github.com/users/marcofleon/repos",
        "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/marcofleon/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I opted for passing in a GenTxid to `FindTxForGetData` and doing the visit there over the templated version for a couple of reasons:\r\n\r\n1. It feels slightly cleaner to me.\r\n2. We need a GenTxid anyway for `m_most_recent_block_txs`.\r\n3. It avoids repeating the branching logic that is already present in `ToGenTxid`.\r\n\r\nIâ€™m keeping the functions in `txmempool` Txid/Wtxid, as after this PR there wonâ€™t be any GenTxids at all in the current mempool code, which is nice.\r\n\r\n> below you are removing the assert on the `CInv&`. Seems fine to at least restore this as an Assume?\r\n\r\nThis approach takes care of this as well.",
      "created_at": "2025-07-23T14:17:38Z",
      "updated_at": "2025-07-23T14:25:12Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#discussion_r2225759355",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2225759355"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2398,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2225760575",
      "pull_request_review_id": 3047670895,
      "id": 2225760575,
      "node_id": "PRRC_kwDOABII586Eqmk_",
      "diff_hunk": "@@ -98,7 +98,7 @@ class GenTxid : public std::variant<Txid, Wtxid>\n \n     friend auto operator<=>(const GenTxid& a, const GenTxid& b)\n     {\n-        return std::tuple(a.IsWtxid(), a.ToUint256()) <=> std::tuple(b.IsWtxid(), b.ToUint256());\n+        return std::tuple<bool, const uint256&>(a.IsWtxid(), a.ToUint256()) <=> std::tuple<bool, const uint256&>(b.IsWtxid(), b.ToUint256());",
      "path": "src/util/transaction_identifier.h",
      "position": 6,
      "original_position": 5,
      "commit_id": "94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "original_commit_id": "e662bca72a30e6a7f174de28f3b1e5c9d7018776",
      "in_reply_to_id": 2218771665,
      "user": {
        "login": "marcofleon",
        "id": 95179662,
        "node_id": "U_kgDOBaxTjg",
        "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/marcofleon",
        "html_url": "https://github.com/marcofleon",
        "followers_url": "https://api.github.com/users/marcofleon/followers",
        "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
        "organizations_url": "https://api.github.com/users/marcofleon/orgs",
        "repos_url": "https://api.github.com/users/marcofleon/repos",
        "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/marcofleon/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Added.",
      "created_at": "2025-07-23T14:18:04Z",
      "updated_at": "2025-07-23T14:18:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#discussion_r2225760575",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2225760575"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 102,
      "original_line": 102,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2225761745",
      "pull_request_review_id": 3047672547,
      "id": 2225761745,
      "node_id": "PRRC_kwDOABII586Eqm3R",
      "diff_hunk": "@@ -5756,13 +5756,13 @@ bool PeerManagerImpl::SendMessages(CNode* pto)\n                     LOCK(tx_relay->m_bloom_filter_mutex);\n \n                     for (const auto& txinfo : vtxinfo) {\n+                        const auto& txid{txinfo.tx->GetHash()};\n+                        const auto& wtxid{txinfo.tx->GetWitnessHash()};\n                         CInv inv{\n                             peer->m_wtxid_relay ? MSG_WTX : MSG_TX,\n-                            peer->m_wtxid_relay ?\n-                                txinfo.tx->GetWitnessHash().ToUint256() :\n-                                txinfo.tx->GetHash().ToUint256(),\n+                            peer->m_wtxid_relay ? wtxid.ToUint256() : txid.ToUint256(),\n                         };",
      "path": "src/net_processing.cpp",
      "position": null,
      "original_position": 94,
      "commit_id": "94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "original_commit_id": "e991cac062ca644f3c4ac5c5144eb0daf445fd09",
      "in_reply_to_id": 2217409016,
      "user": {
        "login": "marcofleon",
        "id": 95179662,
        "node_id": "U_kgDOBaxTjg",
        "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/marcofleon",
        "html_url": "https://github.com/marcofleon",
        "followers_url": "https://api.github.com/users/marcofleon/followers",
        "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
        "organizations_url": "https://api.github.com/users/marcofleon/orgs",
        "repos_url": "https://api.github.com/users/marcofleon/repos",
        "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/marcofleon/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Fixed.",
      "created_at": "2025-07-23T14:18:30Z",
      "updated_at": "2025-07-23T14:18:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#discussion_r2225761745",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2225761745"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
        }
      },
      "start_line": null,
      "original_start_line": 5761,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 5764,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2229453544",
      "pull_request_review_id": 3053089449,
      "id": 2229453544,
      "node_id": "PRRC_kwDOABII586E4sLo",
      "diff_hunk": "@@ -302,7 +302,7 @@ struct Peer {\n          *  non-wtxid-relay peers, wtxid for wtxid-relay peers). We use the\n          *  mempool to sort transactions in dependency order before relay, so\n          *  this does not have to be sorted. */\n-        std::set<GenTxid> m_tx_inventory_to_send GUARDED_BY(m_tx_inventory_mutex);\n+        std::set<Wtxid> m_tx_inventory_to_send GUARDED_BY(m_tx_inventory_mutex);",
      "path": "src/net_processing.cpp",
      "position": 13,
      "original_position": 5,
      "commit_id": "94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "original_commit_id": "8e19a4375e1db6e59cdcb38e0cc3e1dab79e88ec",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Comment above this declaration needs to be changed",
      "created_at": "2025-07-24T19:57:08Z",
      "updated_at": "2025-07-24T20:02:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#discussion_r2229453544",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2229453544"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 305,
      "original_line": 305,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2229461893",
      "pull_request_review_id": 3053089449,
      "id": 2229461893,
      "node_id": "PRRC_kwDOABII586E4uOF",
      "diff_hunk": "@@ -2166,9 +2166,9 @@ void PeerManagerImpl::RelayTransaction(const Txid& txid, const Wtxid& wtxid)\n         // in the announcement.\n         if (tx_relay->m_next_inv_send_time == 0s) continue;\n \n-        const auto gtxid{peer.m_wtxid_relay ? GenTxid{wtxid} : GenTxid{txid}};\n-        if (!tx_relay->m_tx_inventory_known_filter.contains(gtxid.ToUint256())) {\n-            tx_relay->m_tx_inventory_to_send.insert(gtxid);\n+        const uint256& hash{peer.m_wtxid_relay ? wtxid.ToUint256() : txid.ToUint256()};\n+        if (!tx_relay->m_tx_inventory_known_filter.contains(hash)) {",
      "path": "src/net_processing.cpp",
      "position": 34,
      "original_position": 17,
      "commit_id": "94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "original_commit_id": "8e19a4375e1db6e59cdcb38e0cc3e1dab79e88ec",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Hm, is there a reason why `m_tx_inventory_known_filter` should contain sometimes-txids instead of wtxids?",
      "created_at": "2025-07-24T20:01:12Z",
      "updated_at": "2025-07-24T20:02:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#discussion_r2229461893",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2229461893"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 2170,
      "original_line": 2170,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2236368139",
      "pull_request_review_id": 3062608197,
      "id": 2236368139,
      "node_id": "PRRC_kwDOABII586FTEUL",
      "diff_hunk": "@@ -2166,9 +2166,9 @@ void PeerManagerImpl::RelayTransaction(const Txid& txid, const Wtxid& wtxid)\n         // in the announcement.\n         if (tx_relay->m_next_inv_send_time == 0s) continue;\n \n-        const auto gtxid{peer.m_wtxid_relay ? GenTxid{wtxid} : GenTxid{txid}};\n-        if (!tx_relay->m_tx_inventory_known_filter.contains(gtxid.ToUint256())) {\n-            tx_relay->m_tx_inventory_to_send.insert(gtxid);\n+        const uint256& hash{peer.m_wtxid_relay ? wtxid.ToUint256() : txid.ToUint256()};\n+        if (!tx_relay->m_tx_inventory_known_filter.contains(hash)) {",
      "path": "src/net_processing.cpp",
      "position": 34,
      "original_position": 17,
      "commit_id": "94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "original_commit_id": "8e19a4375e1db6e59cdcb38e0cc3e1dab79e88ec",
      "in_reply_to_id": 2229461893,
      "user": {
        "login": "marcofleon",
        "id": 95179662,
        "node_id": "U_kgDOBaxTjg",
        "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/marcofleon",
        "html_url": "https://github.com/marcofleon",
        "followers_url": "https://api.github.com/users/marcofleon/followers",
        "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
        "organizations_url": "https://api.github.com/users/marcofleon/orgs",
        "repos_url": "https://api.github.com/users/marcofleon/repos",
        "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/marcofleon/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I'm seeing a couple of potential reasons. First, when we receive an announcement from a non-wtxid-relay peer, we put that inv's hash (a txid) into the known inventory. And then second, when we receive an orphan we add the parent txids that we don't already have into that peer's known inventory.",
      "created_at": "2025-07-28T13:03:40Z",
      "updated_at": "2025-07-28T13:03:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#discussion_r2236368139",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2236368139"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 2170,
      "original_line": 2170,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2236460557",
      "pull_request_review_id": 3062716127,
      "id": 2236460557,
      "node_id": "PRRC_kwDOABII586FTa4N",
      "diff_hunk": "@@ -5802,22 +5800,23 @@ bool PeerManagerImpl::SendMessages(CNode* pto)\n                     while (!vInvTx.empty() && nRelayedTransactions < broadcast_max) {\n                         // Fetch the top element from the heap\n                         std::pop_heap(vInvTx.begin(), vInvTx.end(), compareInvMempoolOrder);\n-                        std::set<GenTxid>::iterator it = vInvTx.back();\n+                        std::set<Wtxid>::iterator it = vInvTx.back();\n                         vInvTx.pop_back();\n-                        GenTxid hash = *it;\n-                        Assume(peer->m_wtxid_relay == hash.IsWtxid());\n-                        CInv inv(peer->m_wtxid_relay ? MSG_WTX : MSG_TX, hash.ToUint256());\n+                        auto wtxid = *it;\n                         // Remove it from the to-be-sent set\n                         tx_relay->m_tx_inventory_to_send.erase(it);\n-                        // Check if not in the filter already\n-                        if (tx_relay->m_tx_inventory_known_filter.contains(hash.ToUint256())) {\n-                            continue;\n-                        }\n                         // Not in the mempool anymore? don't bother sending it.\n-                        auto txinfo{std::visit([&](const auto& id) { return m_mempool.info(id); }, hash)};\n+                        auto txinfo = m_mempool.info(wtxid);\n                         if (!txinfo.tx) {\n                             continue;\n                         }\n+                        const auto inv = peer->m_wtxid_relay ?\n+                                             CInv{MSG_WTX, wtxid.ToUint256()} :\n+                                             CInv{MSG_TX, txinfo.tx->GetHash().ToUint256()};",
      "path": "src/net_processing.cpp",
      "position": 135,
      "original_position": 124,
      "commit_id": "94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "original_commit_id": "8e19a4375e1db6e59cdcb38e0cc3e1dab79e88ec",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Might be worth a comment because non-obvious: `m_tx_inventory_known_filter` hashes are based on the wtxidrelay-ness of the peer, so it's important that we compare the hash from `inv` and not the wtxid that was in `m_tx_inventory_to_send`.",
      "created_at": "2025-07-28T13:25:14Z",
      "updated_at": "2025-07-28T13:30:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#discussion_r2236460557",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2236460557"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
        }
      },
      "start_line": 5816,
      "original_start_line": 5813,
      "start_side": "RIGHT",
      "line": 5818,
      "original_line": 5818,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2236464694",
      "pull_request_review_id": 3062716127,
      "id": 2236464694,
      "node_id": "PRRC_kwDOABII586FTb42",
      "diff_hunk": "@@ -2166,9 +2166,9 @@ void PeerManagerImpl::RelayTransaction(const Txid& txid, const Wtxid& wtxid)\n         // in the announcement.\n         if (tx_relay->m_next_inv_send_time == 0s) continue;\n \n-        const auto gtxid{peer.m_wtxid_relay ? GenTxid{wtxid} : GenTxid{txid}};\n-        if (!tx_relay->m_tx_inventory_known_filter.contains(gtxid.ToUint256())) {\n-            tx_relay->m_tx_inventory_to_send.insert(gtxid);\n+        const uint256& hash{peer.m_wtxid_relay ? wtxid.ToUint256() : txid.ToUint256()};\n+        if (!tx_relay->m_tx_inventory_known_filter.contains(hash)) {",
      "path": "src/net_processing.cpp",
      "position": 34,
      "original_position": 17,
      "commit_id": "94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "original_commit_id": "8e19a4375e1db6e59cdcb38e0cc3e1dab79e88ec",
      "in_reply_to_id": 2229461893,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "You're right. Might think about this some more but would be out of scope here anyway. Resolving!",
      "created_at": "2025-07-28T13:26:06Z",
      "updated_at": "2025-07-28T13:30:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#discussion_r2236464694",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2236464694"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 2170,
      "original_line": 2170,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2236858410",
      "pull_request_review_id": 3063243339,
      "id": 2236858410,
      "node_id": "PRRC_kwDOABII586FU8Aq",
      "diff_hunk": "@@ -2391,15 +2392,10 @@ void PeerManagerImpl::ProcessGetBlockData(CNode& pfrom, Peer& peer, const CInv&\n     }\n }\n \n-CTransactionRef PeerManagerImpl::FindTxForGetData(const Peer::TxRelay& tx_relay, const CInv& inv)\n+template <TxidOrWtxid T>\n+CTransactionRef PeerManagerImpl::FindTxForGetData(const Peer::TxRelay& tx_relay, const T& id)\n {\n-    auto gtxid{ToGenTxid(inv)};\n-    // If a tx was in the mempool prior to the last INV for this peer, permit the request.\n-    auto txinfo{std::visit(\n-        [&](const auto& id) EXCLUSIVE_LOCKS_REQUIRED(NetEventsInterface::g_msgproc_mutex) {\n-            return m_mempool.info_for_relay(id, tx_relay.m_last_inv_sequence);\n-        },\n-        gtxid)};\n+    auto txinfo{m_mempool.info_for_relay(id, tx_relay.m_last_inv_sequence)};",
      "path": "src/net_processing.cpp",
      "position": null,
      "original_position": 25,
      "commit_id": "94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "original_commit_id": "bc56473f43c6bec3068eeac58c67d5b894202709",
      "in_reply_to_id": 2218799503,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Sounds fine.\r\n\r\nAnother option would be to move `info_for_relay` from txmempool.h into net_processing.cpp:\r\n\r\n```c++\r\n/** Returns info for a transaction if its entry_sequence < last_sequence */\r\nstatic TxMempoolInfo info_for_relay(const CTxMemPool& mempool, const GenTxid& gtxid, uint64_t last_sequence)\r\n{\r\n    return std::visit([&](const auto& id) {\r\n        LOCK(mempool.cs);\r\n        auto i{mempool.GetIter(id)};\r\n        return (i.has_value() && i.value()->GetSequence() < last_sequence) ? mempool.GetInfo(*i) : TxMempoolInfo{};\r\n    }, gtxid);\r\n}\r\n\r\n// FindTxForGetData:\r\n    auto txinfo = info_for_relay(m_mempool, gtxid, tx_relay.m_last_inv_sequence);\r\n```\r\n\r\nThat removes p2p-specific code from the mempool (and kernel), keeps the mempool with specific Txid/Wtxid things, and simplifies the locking logic a little. Requires exposing `CTxMemPool::GetInfo()` as `public`, though that doesn't seem terrible afaics.",
      "created_at": "2025-07-28T15:02:24Z",
      "updated_at": "2025-07-28T15:02:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#discussion_r2236858410",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2236858410"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2398,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2237359282",
      "pull_request_review_id": 3063901620,
      "id": 2237359282,
      "node_id": "PRRC_kwDOABII586FW2Sy",
      "diff_hunk": "@@ -2391,15 +2392,10 @@ void PeerManagerImpl::ProcessGetBlockData(CNode& pfrom, Peer& peer, const CInv&\n     }\n }\n \n-CTransactionRef PeerManagerImpl::FindTxForGetData(const Peer::TxRelay& tx_relay, const CInv& inv)\n+template <TxidOrWtxid T>\n+CTransactionRef PeerManagerImpl::FindTxForGetData(const Peer::TxRelay& tx_relay, const T& id)\n {\n-    auto gtxid{ToGenTxid(inv)};\n-    // If a tx was in the mempool prior to the last INV for this peer, permit the request.\n-    auto txinfo{std::visit(\n-        [&](const auto& id) EXCLUSIVE_LOCKS_REQUIRED(NetEventsInterface::g_msgproc_mutex) {\n-            return m_mempool.info_for_relay(id, tx_relay.m_last_inv_sequence);\n-        },\n-        gtxid)};\n+    auto txinfo{m_mempool.info_for_relay(id, tx_relay.m_last_inv_sequence)};",
      "path": "src/net_processing.cpp",
      "position": null,
      "original_position": 25,
      "commit_id": "94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "original_commit_id": "bc56473f43c6bec3068eeac58c67d5b894202709",
      "in_reply_to_id": 2218799503,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Sorry, need to read up on this thread properly in the next few days, but quickly wanted to add: moving `info_for_relay` to `net_processing.cpp` absolutely makes sense to me, that logic should not be in mempool interface. However, leaking mempool internals into p2p (through `mempool.GetIter(id)`) I really don't like.",
      "created_at": "2025-07-28T17:23:30Z",
      "updated_at": "2025-07-28T17:23:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#discussion_r2237359282",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2237359282"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2398,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2237365239",
      "pull_request_review_id": 3063908747,
      "id": 2237365239,
      "node_id": "PRRC_kwDOABII586FW3v3",
      "diff_hunk": "@@ -5802,22 +5800,23 @@ bool PeerManagerImpl::SendMessages(CNode* pto)\n                     while (!vInvTx.empty() && nRelayedTransactions < broadcast_max) {\n                         // Fetch the top element from the heap\n                         std::pop_heap(vInvTx.begin(), vInvTx.end(), compareInvMempoolOrder);\n-                        std::set<GenTxid>::iterator it = vInvTx.back();\n+                        std::set<Wtxid>::iterator it = vInvTx.back();\n                         vInvTx.pop_back();\n-                        GenTxid hash = *it;\n-                        Assume(peer->m_wtxid_relay == hash.IsWtxid());\n-                        CInv inv(peer->m_wtxid_relay ? MSG_WTX : MSG_TX, hash.ToUint256());\n+                        auto wtxid = *it;\n                         // Remove it from the to-be-sent set\n                         tx_relay->m_tx_inventory_to_send.erase(it);\n-                        // Check if not in the filter already\n-                        if (tx_relay->m_tx_inventory_known_filter.contains(hash.ToUint256())) {\n-                            continue;\n-                        }\n                         // Not in the mempool anymore? don't bother sending it.\n-                        auto txinfo{std::visit([&](const auto& id) { return m_mempool.info(id); }, hash)};\n+                        auto txinfo = m_mempool.info(wtxid);\n                         if (!txinfo.tx) {\n                             continue;\n                         }\n+                        const auto inv = peer->m_wtxid_relay ?\n+                                             CInv{MSG_WTX, wtxid.ToUint256()} :\n+                                             CInv{MSG_TX, txinfo.tx->GetHash().ToUint256()};",
      "path": "src/net_processing.cpp",
      "position": 135,
      "original_position": 124,
      "commit_id": "94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "original_commit_id": "8e19a4375e1db6e59cdcb38e0cc3e1dab79e88ec",
      "in_reply_to_id": 2236460557,
      "user": {
        "login": "marcofleon",
        "id": 95179662,
        "node_id": "U_kgDOBaxTjg",
        "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/marcofleon",
        "html_url": "https://github.com/marcofleon",
        "followers_url": "https://api.github.com/users/marcofleon/followers",
        "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
        "organizations_url": "https://api.github.com/users/marcofleon/orgs",
        "repos_url": "https://api.github.com/users/marcofleon/repos",
        "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/marcofleon/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done.",
      "created_at": "2025-07-28T17:25:11Z",
      "updated_at": "2025-07-28T17:25:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#discussion_r2237365239",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2237365239"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
        }
      },
      "start_line": 5816,
      "original_start_line": 5813,
      "start_side": "RIGHT",
      "line": 5818,
      "original_line": 5818,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2237365568",
      "pull_request_review_id": 3063909124,
      "id": 2237365568,
      "node_id": "PRRC_kwDOABII586FW31A",
      "diff_hunk": "@@ -302,7 +302,7 @@ struct Peer {\n          *  non-wtxid-relay peers, wtxid for wtxid-relay peers). We use the\n          *  mempool to sort transactions in dependency order before relay, so\n          *  this does not have to be sorted. */\n-        std::set<GenTxid> m_tx_inventory_to_send GUARDED_BY(m_tx_inventory_mutex);\n+        std::set<Wtxid> m_tx_inventory_to_send GUARDED_BY(m_tx_inventory_mutex);",
      "path": "src/net_processing.cpp",
      "position": 13,
      "original_position": 5,
      "commit_id": "94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "original_commit_id": "8e19a4375e1db6e59cdcb38e0cc3e1dab79e88ec",
      "in_reply_to_id": 2229453544,
      "user": {
        "login": "marcofleon",
        "id": 95179662,
        "node_id": "U_kgDOBaxTjg",
        "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/marcofleon",
        "html_url": "https://github.com/marcofleon",
        "followers_url": "https://api.github.com/users/marcofleon/followers",
        "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
        "organizations_url": "https://api.github.com/users/marcofleon/orgs",
        "repos_url": "https://api.github.com/users/marcofleon/repos",
        "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/marcofleon/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Good looks, fixed.",
      "created_at": "2025-07-28T17:25:18Z",
      "updated_at": "2025-07-28T17:25:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#discussion_r2237365568",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2237365568"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 305,
      "original_line": 305,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2238379741",
      "pull_request_review_id": 3065264314,
      "id": 2238379741,
      "node_id": "PRRC_kwDOABII586Favbd",
      "diff_hunk": "@@ -2391,15 +2392,10 @@ void PeerManagerImpl::ProcessGetBlockData(CNode& pfrom, Peer& peer, const CInv&\n     }\n }\n \n-CTransactionRef PeerManagerImpl::FindTxForGetData(const Peer::TxRelay& tx_relay, const CInv& inv)\n+template <TxidOrWtxid T>\n+CTransactionRef PeerManagerImpl::FindTxForGetData(const Peer::TxRelay& tx_relay, const T& id)\n {\n-    auto gtxid{ToGenTxid(inv)};\n-    // If a tx was in the mempool prior to the last INV for this peer, permit the request.\n-    auto txinfo{std::visit(\n-        [&](const auto& id) EXCLUSIVE_LOCKS_REQUIRED(NetEventsInterface::g_msgproc_mutex) {\n-            return m_mempool.info_for_relay(id, tx_relay.m_last_inv_sequence);\n-        },\n-        gtxid)};\n+    auto txinfo{m_mempool.info_for_relay(id, tx_relay.m_last_inv_sequence)};",
      "path": "src/net_processing.cpp",
      "position": null,
      "original_position": 25,
      "commit_id": "94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "original_commit_id": "bc56473f43c6bec3068eeac58c67d5b894202709",
      "in_reply_to_id": 2218799503,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "`GetIter` is already exposed, it's used in validation.cpp for looking up txs. This would also expose `GetInfo` which converts an iterator into a index-neutral summary of info about the tx.",
      "created_at": "2025-07-29T04:03:06Z",
      "updated_at": "2025-07-29T04:03:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#discussion_r2238379741",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2238379741"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2398,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2239805692",
      "pull_request_review_id": 3067511438,
      "id": 2239805692,
      "node_id": "PRRC_kwDOABII586FgLj8",
      "diff_hunk": "@@ -5756,13 +5755,12 @@ bool PeerManagerImpl::SendMessages(CNode* pto)\n                     LOCK(tx_relay->m_bloom_filter_mutex);\n \n                     for (const auto& txinfo : vtxinfo) {\n-                        CInv inv{\n-                            peer->m_wtxid_relay ? MSG_WTX : MSG_TX,\n-                            peer->m_wtxid_relay ?\n-                                txinfo.tx->GetWitnessHash().ToUint256() :\n-                                txinfo.tx->GetHash().ToUint256(),\n-                        };\n-                        tx_relay->m_tx_inventory_to_send.erase(ToGenTxid(inv));\n+                        const Txid& txid{txinfo.tx->GetHash()};\n+                        const Wtxid& wtxid{txinfo.tx->GetWitnessHash()};\n+                        const auto inv = peer->m_wtxid_relay ?\n+                                             CInv{MSG_WTX, wtxid.ToUint256()} :\n+                                             CInv{MSG_TX, txid.ToUint256()};",
      "path": "src/net_processing.cpp",
      "position": 90,
      "original_position": 90,
      "commit_id": "94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "original_commit_id": "94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: `txid` declaration not really helpful imo\r\n```suggestion\r\n                        const Wtxid& wtxid{txinfo.tx->GetWitnessHash()};\r\n                        const auto inv = peer->m_wtxid_relay ?\r\n                                             CInv{MSG_WTX, wtxid.ToUint256()} :\r\n                                             CInv{MSG_TX, txinfo.tx->GetHash().ToUint256()};\r\n```",
      "created_at": "2025-07-29T13:16:16Z",
      "updated_at": "2025-07-29T17:27:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#discussion_r2239805692",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2239805692"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
        }
      },
      "start_line": 5758,
      "original_start_line": 5758,
      "start_side": "RIGHT",
      "line": 5762,
      "original_line": 5762,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2240034170",
      "pull_request_review_id": 3067511438,
      "id": 2240034170,
      "node_id": "PRRC_kwDOABII586FhDV6",
      "diff_hunk": "@@ -5783,9 +5781,9 @@ bool PeerManagerImpl::SendMessages(CNode* pto)\n                 // Determine transactions to relay\n                 if (fSendTrickle) {\n                     // Produce a vector with all candidates for sending\n-                    std::vector<std::set<GenTxid>::iterator> vInvTx;\n+                    std::vector<std::set<Wtxid>::iterator> vInvTx;",
      "path": "src/net_processing.cpp",
      "position": 100,
      "original_position": 100,
      "commit_id": "94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "original_commit_id": "94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: this is touching a lot more code than you are, but modernizing this bit of code would make it more readable:\r\n\r\n<details>\r\n<summary>git diff on 94b39ce738</summary>\r\n\r\n```diff\r\ndiff --git a/src/net_processing.cpp b/src/net_processing.cpp\r\nindex 165f6e822f..a9dafb7160 100644\r\n--- a/src/net_processing.cpp\r\n+++ b/src/net_processing.cpp\r\n@@ -5780,28 +5780,23 @@ bool PeerManagerImpl::SendMessages(CNode* pto)\r\n \r\n                 // Determine transactions to relay\r\n                 if (fSendTrickle) {\r\n-                    // Produce a vector with all candidates for sending\r\n-                    std::vector<std::set<Wtxid>::iterator> vInvTx;\r\n-                    vInvTx.reserve(tx_relay->m_tx_inventory_to_send.size());\r\n-                    for (std::set<Wtxid>::iterator it = tx_relay->m_tx_inventory_to_send.begin(); it != tx_relay->m_tx_inventory_to_send.end(); it++) {\r\n-                        vInvTx.push_back(it);\r\n-                    }\r\n                     const CFeeRate filterrate{tx_relay->m_fee_filter_received.load()};\r\n                     // Topologically and fee-rate sort the inventory we send for privacy and priority reasons.\r\n-                    // A heap is used so that not all items need sorting if only a few are being sent.\r\n                     CompareInvMempoolOrder compareInvMempoolOrder(&m_mempool);\r\n-                    std::make_heap(vInvTx.begin(), vInvTx.end(), compareInvMempoolOrder);\r\n+                    auto tx_inv_iters{std::views::iota(tx_relay->m_tx_inventory_to_send.begin(),\r\n+                                                       tx_relay->m_tx_inventory_to_send.end())};\r\n+                    // A priority queue is used so that not all items need sorting if only a few are being sent.\r\n+                    std::priority_queue tx_inv_to_send{tx_inv_iters.begin(), tx_inv_iters.end(),\r\n+                                                       compareInvMempoolOrder};\r\n                     // No reason to drain out at many times the network's capacity,\r\n                     // especially since we have many peers and some will draw much shorter delays.\r\n                     unsigned int nRelayedTransactions = 0;\r\n                     LOCK(tx_relay->m_bloom_filter_mutex);\r\n                     size_t broadcast_max{INVENTORY_BROADCAST_TARGET + (tx_relay->m_tx_inventory_to_send.size()/1000)*5};\r\n                     broadcast_max = std::min<size_t>(INVENTORY_BROADCAST_MAX, broadcast_max);\r\n-                    while (!vInvTx.empty() && nRelayedTransactions < broadcast_max) {\r\n-                        // Fetch the top element from the heap\r\n-                        std::pop_heap(vInvTx.begin(), vInvTx.end(), compareInvMempoolOrder);\r\n-                        std::set<Wtxid>::iterator it = vInvTx.back();\r\n-                        vInvTx.pop_back();\r\n+                    while (!tx_inv_to_send.empty() && nRelayedTransactions < broadcast_max) {\r\n+                        std::set<Wtxid>::iterator it = tx_inv_to_send.top();\r\n+                        tx_inv_to_send.pop();\r\n                         auto wtxid = *it;\r\n                         // Remove it from the to-be-sent set\r\n                         tx_relay->m_tx_inventory_to_send.erase(it);\r\n\r\n```\r\n</details>\r\n",
      "created_at": "2025-07-29T14:23:26Z",
      "updated_at": "2025-07-29T17:27:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#discussion_r2240034170",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2240034170"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 5784,
      "original_line": 5784,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2240139278",
      "pull_request_review_id": 3067511438,
      "id": 2240139278,
      "node_id": "PRRC_kwDOABII586FhdAO",
      "diff_hunk": "@@ -2391,15 +2391,14 @@ void PeerManagerImpl::ProcessGetBlockData(CNode& pfrom, Peer& peer, const CInv&\n     }\n }\n \n-CTransactionRef PeerManagerImpl::FindTxForGetData(const Peer::TxRelay& tx_relay, const CInv& inv)\n+CTransactionRef PeerManagerImpl::FindTxForGetData(const Peer::TxRelay& tx_relay, const GenTxid& gtxid)\n {\n-    auto gtxid{ToGenTxid(inv)};\n-    // If a tx was in the mempool prior to the last INV for this peer, permit the request.\n     auto txinfo{std::visit(\n         [&](const auto& id) EXCLUSIVE_LOCKS_REQUIRED(NetEventsInterface::g_msgproc_mutex) {\n             return m_mempool.info_for_relay(id, tx_relay.m_last_inv_sequence);\n         },\n         gtxid)};\n+",
      "path": "src/net_processing.cpp",
      "position": 53,
      "original_position": 53,
      "commit_id": "94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "original_commit_id": "94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "ghost nit",
      "created_at": "2025-07-29T14:57:20Z",
      "updated_at": "2025-07-29T17:27:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#discussion_r2240139278",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2240139278"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 2401,
      "original_line": 2401,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2240488569",
      "pull_request_review_id": 3067511438,
      "id": 2240488569,
      "node_id": "PRRC_kwDOABII586FiyR5",
      "diff_hunk": "@@ -2391,15 +2392,10 @@ void PeerManagerImpl::ProcessGetBlockData(CNode& pfrom, Peer& peer, const CInv&\n     }\n }\n \n-CTransactionRef PeerManagerImpl::FindTxForGetData(const Peer::TxRelay& tx_relay, const CInv& inv)\n+template <TxidOrWtxid T>\n+CTransactionRef PeerManagerImpl::FindTxForGetData(const Peer::TxRelay& tx_relay, const T& id)\n {\n-    auto gtxid{ToGenTxid(inv)};\n-    // If a tx was in the mempool prior to the last INV for this peer, permit the request.\n-    auto txinfo{std::visit(\n-        [&](const auto& id) EXCLUSIVE_LOCKS_REQUIRED(NetEventsInterface::g_msgproc_mutex) {\n-            return m_mempool.info_for_relay(id, tx_relay.m_last_inv_sequence);\n-        },\n-        gtxid)};\n+    auto txinfo{m_mempool.info_for_relay(id, tx_relay.m_last_inv_sequence)};",
      "path": "src/net_processing.cpp",
      "position": null,
      "original_position": 25,
      "commit_id": "94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "original_commit_id": "bc56473f43c6bec3068eeac58c67d5b894202709",
      "in_reply_to_id": 2218799503,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "tl;dr - I think the current implementation a9819b0e9d3c74970a94cb674fe8fd771e60f6df (i.e. ajtown's suggestion in https://github.com/bitcoin/bitcoin/pull/33005#discussion_r2218799503) is pragmatically the best way forward.\r\n\r\n---\r\n\r\n> `GetIter` is already exposed\r\n\r\nI think \"still\" is more appropriate than \"already\", see e.g. work done in #28391. Non-mempool code using `mapTx` iterators imo remains an anti-pattern and we should strive to reduce, not increase it.\r\n\r\n> That removes p2p-specific code from the mempool (and kernel)\r\n\r\nLooking at the code in more detail, I actually think the only thing p2p-specific about the function is the name. E.g. the function still makes sense if we turn it into a `TxMempoolInfo info(const T& id, uint64_t last_sequence) const` overload. Besides the sequence number, it doesn't use any p2p symbols or logic, so I think keeping as-is makes sense for now.\r\n\r\nThe true p2p-specific code in the mempool appears to be the existence of sequence numbers, but getting rid of that seems like a much bigger code change than is warranted for this follow-up PR.",
      "created_at": "2025-07-29T17:18:54Z",
      "updated_at": "2025-07-29T17:45:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#discussion_r2240488569",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2240488569"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2398,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2242260982",
      "pull_request_review_id": 3070891068,
      "id": 2242260982,
      "node_id": "PRRC_kwDOABII586Fpi_2",
      "diff_hunk": "@@ -2391,15 +2392,10 @@ void PeerManagerImpl::ProcessGetBlockData(CNode& pfrom, Peer& peer, const CInv&\n     }\n }\n \n-CTransactionRef PeerManagerImpl::FindTxForGetData(const Peer::TxRelay& tx_relay, const CInv& inv)\n+template <TxidOrWtxid T>\n+CTransactionRef PeerManagerImpl::FindTxForGetData(const Peer::TxRelay& tx_relay, const T& id)\n {\n-    auto gtxid{ToGenTxid(inv)};\n-    // If a tx was in the mempool prior to the last INV for this peer, permit the request.\n-    auto txinfo{std::visit(\n-        [&](const auto& id) EXCLUSIVE_LOCKS_REQUIRED(NetEventsInterface::g_msgproc_mutex) {\n-            return m_mempool.info_for_relay(id, tx_relay.m_last_inv_sequence);\n-        },\n-        gtxid)};\n+    auto txinfo{m_mempool.info_for_relay(id, tx_relay.m_last_inv_sequence)};",
      "path": "src/net_processing.cpp",
      "position": null,
      "original_position": 25,
      "commit_id": "94b39ce73831acc4c94c7f0d1347d5991b27ef0b",
      "original_commit_id": "bc56473f43c6bec3068eeac58c67d5b894202709",
      "in_reply_to_id": 2218799503,
      "user": {
        "login": "marcofleon",
        "id": 95179662,
        "node_id": "U_kgDOBaxTjg",
        "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/marcofleon",
        "html_url": "https://github.com/marcofleon",
        "followers_url": "https://api.github.com/users/marcofleon/followers",
        "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
        "organizations_url": "https://api.github.com/users/marcofleon/orgs",
        "repos_url": "https://api.github.com/users/marcofleon/repos",
        "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/marcofleon/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I'll leave as is. Maybe another PR could find a cleaner way to separate relay logic from mempool if we wanted.",
      "created_at": "2025-07-30T10:54:26Z",
      "updated_at": "2025-07-30T10:57:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33005#discussion_r2242260982",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2242260982"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2398,
      "side": "RIGHT"
    }
  ]
}