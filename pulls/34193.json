{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34193",
    "id": 3142897675,
    "node_id": "PR_kwDOABII5867VNAL",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/34193",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/34193.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/34193.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34193",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34193/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34193/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34193/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/ac13657de4b584bbe88fd824f5f4f53da137c882",
    "number": 34193,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "wallet: make migration more robust against failures",
    "user": {
      "login": "furszy",
      "id": 5377650,
      "node_id": "MDQ6VXNlcjUzNzc2NTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/furszy",
      "html_url": "https://github.com/furszy",
      "followers_url": "https://api.github.com/users/furszy/followers",
      "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
      "organizations_url": "https://api.github.com/users/furszy/orgs",
      "repos_url": "https://api.github.com/users/furszy/repos",
      "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/furszy/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "body": "This is just me finding a few more edge cases after #34156 and #34176\r\n\r\nThe goal of the PR is to handle failures in a controlled way. Just so the process can automatically restore the original wallet without requiring user manual intervention.\r\n\r\nThe covered cases are:\r\n\r\n1. During `DoMigration()`: There are methods that can throw exceptions and abruptly abort the process. \r\nInstead of crashing, we now will catch and return the error gracefully. This lets the process restore the original wallet automatically.\r\n\r\n2. Trying to migrate a wallet in a read-only directory used to throw a filesystem exception and skip cleanup.\r\n Now the process will fails gracefully with a clear error msg, and automatically restore the original wallet.\r\n\r\n3. A failure during `MigrateToSQLite` used to require user manual intervention. \r\nNow the original wallet db will remain untouched, and only be updated once the sqlite db creation fully succeeds.",
    "labels": [
      {
        "id": 149424,
        "node_id": "MDU6TGFiZWwxNDk0MjQ=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
        "name": "Wallet",
        "color": "08a781",
        "default": false
      },
      {
        "id": 5334691551,
        "node_id": "LA_kwDOABII588AAAABPfju3w",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
        "name": "CI failed",
        "description": "",
        "color": "cccccc",
        "default": false
      }
    ],
    "created_at": "2026-01-02T20:59:40Z",
    "updated_at": "2026-01-04T00:30:59Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "51b9ffebacc77cb1db33a784ef71d29265d608db",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "furszy:2026_wallet_safer_MigrateToSQLite",
      "ref": "2026_wallet_safer_MigrateToSQLite",
      "sha": "ac13657de4b584bbe88fd824f5f4f53da137c882",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 143624913,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNDM2MjQ5MTM=",
        "name": "bitcoin-core",
        "full_name": "furszy/bitcoin-core",
        "owner": {
          "login": "furszy",
          "id": 5377650,
          "node_id": "MDQ6VXNlcjUzNzc2NTA=",
          "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/furszy",
          "html_url": "https://github.com/furszy",
          "followers_url": "https://api.github.com/users/furszy/followers",
          "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
          "organizations_url": "https://api.github.com/users/furszy/orgs",
          "repos_url": "https://api.github.com/users/furszy/repos",
          "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/furszy/received_events",
          "type": "User",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/furszy/bitcoin-core",
        "description": "Bitcoin-Core",
        "fork": true,
        "url": "https://api.github.com/repos/furszy/bitcoin-core",
        "archive_url": "https://api.github.com/repos/furszy/bitcoin-core/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/furszy/bitcoin-core/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/furszy/bitcoin-core/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/furszy/bitcoin-core/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/furszy/bitcoin-core/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/furszy/bitcoin-core/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/furszy/bitcoin-core/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/furszy/bitcoin-core/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/furszy/bitcoin-core/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/furszy/bitcoin-core/contributors",
        "deployments_url": "https://api.github.com/repos/furszy/bitcoin-core/deployments",
        "downloads_url": "https://api.github.com/repos/furszy/bitcoin-core/downloads",
        "events_url": "https://api.github.com/repos/furszy/bitcoin-core/events",
        "forks_url": "https://api.github.com/repos/furszy/bitcoin-core/forks",
        "git_commits_url": "https://api.github.com/repos/furszy/bitcoin-core/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/furszy/bitcoin-core/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/furszy/bitcoin-core/git/tags%7B/sha%7D",
        "git_url": "git://github.com/furszy/bitcoin-core.git",
        "issue_comment_url": "https://api.github.com/repos/furszy/bitcoin-core/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/furszy/bitcoin-core/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/furszy/bitcoin-core/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/furszy/bitcoin-core/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/furszy/bitcoin-core/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/furszy/bitcoin-core/languages",
        "merges_url": "https://api.github.com/repos/furszy/bitcoin-core/merges",
        "milestones_url": "https://api.github.com/repos/furszy/bitcoin-core/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/furszy/bitcoin-core/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/furszy/bitcoin-core/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/furszy/bitcoin-core/releases%7B/id%7D",
        "ssh_url": "git@github.com:furszy/bitcoin-core.git",
        "stargazers_url": "https://api.github.com/repos/furszy/bitcoin-core/stargazers",
        "statuses_url": "https://api.github.com/repos/furszy/bitcoin-core/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/furszy/bitcoin-core/subscribers",
        "subscription_url": "https://api.github.com/repos/furszy/bitcoin-core/subscription",
        "tags_url": "https://api.github.com/repos/furszy/bitcoin-core/tags",
        "teams_url": "https://api.github.com/repos/furszy/bitcoin-core/teams",
        "trees_url": "https://api.github.com/repos/furszy/bitcoin-core/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/furszy/bitcoin-core.git",
        "hooks_url": "https://api.github.com/repos/furszy/bitcoin-core/hooks",
        "svn_url": "https://github.com/furszy/bitcoin-core",
        "homepage": "",
        "language": "C++",
        "forks_count": 3,
        "stargazers_count": 6,
        "watchers_count": 6,
        "size": 444508,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-01-04T00:30:25Z",
        "created_at": "2018-08-05T15:28:43Z",
        "updated_at": "2025-12-30T19:21:17Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "ab233255d444ccf6ffe4a45cb02bfc3e5fb71bdb",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 38573,
        "stargazers_count": 87505,
        "watchers_count": 87505,
        "size": 301125,
        "default_branch": "master",
        "open_issues_count": 739,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-01-03T00:49:36Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2026-01-04T00:57:22Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34193"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 141,
    "deletions": 78,
    "changed_files": 4,
    "commits": 5,
    "review_comments": 0,
    "comments": 1
  },
  "events": [
    {
      "event": "labeled",
      "id": 21831912400,
      "node_id": "LE_lADOABII587hJCcHzwAAAAUVSIvQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21831912400",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-02T20:59:43Z",
      "label": {
        "name": "Wallet",
        "color": "08a781"
      }
    },
    {
      "event": "commented",
      "id": 3706217619,
      "node_id": "IC_kwDOABII587c6GST",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3706217619",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-02T20:59:48Z",
      "updated_at": "2026-01-04T00:30:59Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34193.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#34176](https://github.com/bitcoin/bitcoin/pull/34176) (wallet: improve error msg when db directory is not writable by furszy)\n* [#34156](https://github.com/bitcoin/bitcoin/pull/34156) (wallet: fix unnamed legacy wallet migration failure by furszy)\n* [#32636](https://github.com/bitcoin/bitcoin/pull/32636) (Split `CWallet::Create()` into `CreateNew` and `LoadExisting` by davidgumberg)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (✨ experimental)\n\n\n\nPossible places where named args for integral literals may be used (e.g. `func(x, /*named_arg=*/0)` in C++, and `func(x, named_arg=0)` in Python):\n\n- Parse(desc_str, keys, parse_err, /* require_checksum */ true) in src/wallet/wallet.cpp\n- WalletDescriptor w_desc(std::move(descs.at(0)), creation_time, 0, 0, 0) in src/wallet/wallet.cpp\n- out_wallet->AddWalletDescriptor(w_desc, keys, \"\", false) in src/wallet/wallet.cpp\n\n\n\n<sup>2026-01-04</sup>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34193#issuecomment-3706217619",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34193"
    },
    {
      "event": "closed",
      "id": 21831913862,
      "node_id": "CE_lADOABII587hJCcHzwAAAAUVSJGG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21831913862",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-02T20:59:55Z"
    },
    {
      "event": "renamed",
      "id": 21832153926,
      "node_id": "RTE_lADOABII587hJCcHzwAAAAUVTDtG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21832153926",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-02T21:28:46Z",
      "rename": {
        "from": "wallet: make migration more robust",
        "to": "wallet: make migration more robust against failures"
      }
    },
    {
      "event": "reopened",
      "id": 21832727085,
      "node_id": "REE_lADOABII587hJCcHzwAAAAUVVPot",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21832727085",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-02T22:49:36Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21832730808,
      "node_id": "HRFPE_lADOABII587hJCcHzwAAAAUVVQi4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21832730808",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "3e59872437d0c7a94d6b4d9c6874c8beb4a82f01",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/3e59872437d0c7a94d6b4d9c6874c8beb4a82f01",
      "created_at": "2026-01-02T22:50:16Z"
    },
    {
      "event": "labeled",
      "id": 21832735037,
      "node_id": "LE_lADOABII587hJCcHzwAAAAUVVRk9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21832735037",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-02T22:50:59Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDY4NTA1NDE3YTJjZDllMjc5OTRlNGYxZDk3ZmU1Mjc2MDNhYWIwODI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/68505417a2cd9e27994e4f1d97fe527603aab082",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/68505417a2cd9e27994e4f1d97fe527603aab082",
      "tree": {
        "sha": "a9eaca85252c07aececa421867ce12da6a842d0e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a9eaca85252c07aececa421867ce12da6a842d0e"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree a9eaca85252c07aececa421867ce12da6a842d0e\nparent ab233255d444ccf6ffe4a45cb02bfc3e5fb71bdb\nauthor furszy <matiasfurszyfer@protonmail.com> 1767308265 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1767486499 -0500\n\nwallet: migration, unify watchonly and solvables wallets creation\n\nNo need to repeat the exact same code twice.\nThis will let us introduce new safety checks and improve error\nhandling for both wallets without the risk of forgetting to\nupdate one of them.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmlZtCMACgkQXdI8zGhq\npiPoww/9FHB6RfucTzLOR7VV0MslURSxgMTSzYuwwRxl9FrofOWdNFU8IgnXbIsr\n3nn5M6Dyq2eWnVzFkdohdcl7WI8PVxuxaOlri8mhaxn1GhOokbEyhfcWka18z57z\nTH5mgCKnCze1X82URJVQ7iIHzF1G9eIXq1nWzOMxZyiptQl7xQ+nJvMWMSwZjgxA\nP8vDtBKNH1qqNYVVmSGxQwfxbJr10vKoASgK0n7MLhpKlonfodrkPRCu75EFeq0G\nK1oBBYlg5YDuaB+Q0Ee61+LFoY1OTtP9VaCnDMbYG2UgzX512as7zK/UuvIkI0QM\nqxUd2haxh5adUFG/wIUZc45sIIqSfRNJhkvllZKsfTwIzHbuu/78OaRf5uuOPmQL\nhEeBCthFtkFU1ikwLhtO5+8iAZjAZGwXM0fXc5ft+3thSePbPe1HAieNPD6Q3yMF\nJY+sKTc9hQ0LjM5vJPFwJkxwLZHZJI5vlt/2NF4lsI4Eqkv2hsQIa/nbOu92jlKn\nL2TsMpoCFnhbfxr61PMV3YkuWvujppZ0Pqy34OFMz9NCPYsjGGI9FYq9xuIQfoHb\nJ9O7cHLa4uzrUMhjQAunSmctkZzLKq9dbk+FHT6fTcqa2++2iwWW25Q4TR7zYhRj\nsO/P0CZDExFpBLgg79ymgEPXhDE1xe07vx7b5mcjuibKLuIcboE=\n=6JiP\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ab233255d444ccf6ffe4a45cb02bfc3e5fb71bdb",
          "sha": "ab233255d444ccf6ffe4a45cb02bfc3e5fb71bdb",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ab233255d444ccf6ffe4a45cb02bfc3e5fb71bdb"
        }
      ],
      "message": "wallet: migration, unify watchonly and solvables wallets creation\n\nNo need to repeat the exact same code twice.\nThis will let us introduce new safety checks and improve error\nhandling for both wallets without the risk of forgetting to\nupdate one of them.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-01-04T00:28:19Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-01-01T22:57:45Z"
      },
      "sha": "68505417a2cd9e27994e4f1d97fe527603aab082"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGY3NmVkMzI3NzQ0MGMyM2M3MGM3OTI0OTY3NmQ4ZjdhODY0ZDczZTc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f76ed3277440c23c70c79249676d8f7a864d73e7",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f76ed3277440c23c70c79249676d8f7a864d73e7",
      "tree": {
        "sha": "9876140371546ab00c64e1ca5c9caa15b0be8e39",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9876140371546ab00c64e1ca5c9caa15b0be8e39"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 9876140371546ab00c64e1ca5c9caa15b0be8e39\nparent 68505417a2cd9e27994e4f1d97fe527603aab082\nauthor furszy <matiasfurszyfer@protonmail.com> 1767309538 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1767486499 -0500\n\nwallet: migration, handle exceptions during wallet creation\n\nExceptions can be thrown internally by 'MakeWalletDatabase',\n'CWallet::Create' and 'AddWalletDescriptor'. Instead of\nabruptly interrupting the process, catch them and return\nerror gracefully.\n\nThis ensures migration can be cleaned up and the original\nwallet is restored from the backup if something goes wrong.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmlZtCMACgkQXdI8zGhq\npiOVTQ//ZSYs/8YQY1kgEBd6xOEbyd4JPnPBhw7Rql6aa4J4v+ln5q72A1DjTHvV\nFtas8fNi1ugZX0HBp+tsdnKXMPs75YGB7nrWCUSJ0iRNmd2Tjmlm3r81fc+Jq18o\n6IHwHgw/mv1MPVme4ZdTPimso7qqGe+ch47cNPaZDQIPhWbD6suU2GtJDeUmhpt2\nNvW9O+M38nDaxZxNTDJWvO4lgXXN5nJJjJTF7WwcoGaLP1pCuN5HQr808P1t21Fg\n0wqlP+0ZlVPjXDu6+dZAsZUsYBEmg1xcy2GyKCUJJjyZW3woJBYGaAumURveQY+s\nbxTiZIGBV60pySNiJ3IOiP3OcJ0nW+hHTai0Cur9s4K9rtfYn9mvhGrOU+O1X/x7\nXD/Ry9rUkjS4BeTw3NOmLRJypqCN5AJoLpZRjLFzmORp54s33pNi/wMB0tw3zcfj\n4EhUHQUg9jOgqFENH06ckj0EyrEMOSrcfdDS1PZc2pJPsOdOjZuIjnWJHg6BqfGq\n0jxk1BLZAzyJPT8a53PTy1y7KZiMDyM/2Ahx1SaHcKmmLuAj5C/W8xwNaKX+GCAL\ngxMilNnZNn2+0eaxT7cegkP2pmhTlCP/Gor9Ga4iWG5fRNNE9b5FNcD6/2JQkV7B\noSf4XQrS6DoOQowurTd84VvTNwlRcTOuKw9VbnhZr0hR4XMNfmc=\n=XyJ5\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/68505417a2cd9e27994e4f1d97fe527603aab082",
          "sha": "68505417a2cd9e27994e4f1d97fe527603aab082",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/68505417a2cd9e27994e4f1d97fe527603aab082"
        }
      ],
      "message": "wallet: migration, handle exceptions during wallet creation\n\nExceptions can be thrown internally by 'MakeWalletDatabase',\n'CWallet::Create' and 'AddWalletDescriptor'. Instead of\nabruptly interrupting the process, catch them and return\nerror gracefully.\n\nThis ensures migration can be cleaned up and the original\nwallet is restored from the backup if something goes wrong.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-01-04T00:28:19Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-01-01T23:18:58Z"
      },
      "sha": "f76ed3277440c23c70c79249676d8f7a864d73e7"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDgyYTdiMmM1NTA2MjQzNDBmNGZkZmRjYTE2MTI3NjdhMGZhZWMyNGQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/82a7b2c550624340f4fdfdca1612767a0faec24d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/82a7b2c550624340f4fdfdca1612767a0faec24d",
      "tree": {
        "sha": "a09bbef26bffec39dd36b65f25b68fb1ebded3ab",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a09bbef26bffec39dd36b65f25b68fb1ebded3ab"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree a09bbef26bffec39dd36b65f25b68fb1ebded3ab\nparent f76ed3277440c23c70c79249676d8f7a864d73e7\nauthor furszy <matiasfurszyfer@protonmail.com> 1767036204 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1767486499 -0500\n\nwallet: fail migration gracefully on non-writable wallets\n\nCurrently, attempting a wallet migration when the database\ndirectory or file is not writable results in a filesystem\nexception that abruptly aborts the process, skipping the\npost-failure cleanup logic and returning a not particularly\nhelpful error message.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmlZtCMACgkQXdI8zGhq\npiOWrA/+P3zcZi8FFJEQcszfb30sD7yYj0A2G5pOtFS+FO3CoBZFkL9boWliy2El\nvzrVnktOZ6vKIgzs/9Ppyw3WKYUmQegf6VhfEUT5znrzvi85FbhKDcBSPTcMcJxw\nIOl2jy1KRyvNAhtd1aOwYVCEZgY1EPpzX58xBiIJl8fB4BHBCg5BL6vUUcLf8p6V\nSz5XXDT6mAhbsqWPC/i0ANzYPtvq7+yDhBBF7BiiNhJD6lz98j16QajWKVfaigd/\n+YpMugRQ3ptJAMBN2ulKVb+uc0upECW8R/lwHr80unWhIfFWKjnWi4WcG21cxmNY\nrLUuCiPCgXkzuwdksTHmEuZQtuAObQomzaD4ov8vK/Rgyq7EIWiclHCGe5aBlPuJ\n3N8eOoG4Kr5Klj/qtx9TWr5/QAdMg6VSPajvQPJ5XFfVcHN5q2+apRAOCU1MVKJS\nXDaW64BWLb04s7gac9NfviWIB6DKPybGhq4ziIUL6AafaOEeDvi/O4LpsFYxI4qC\nTKXDNLX/8FoWYvla9OcFzNeYeV31GuFNwAloQoZ5aOxIYqsDEaXk55NYB/AZVkUA\nKULRgFQ2VAjxgvrusAu4txzvmOGjelRm+sOgFuOILsfvnYxx/zeT0+vahVj0ZJS9\nb0OpvSkCFm/TVZyjX+qGm+SGLv1T72hmR5oVUvzCe1yN2E+zulg=\n=IkkY\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f76ed3277440c23c70c79249676d8f7a864d73e7",
          "sha": "f76ed3277440c23c70c79249676d8f7a864d73e7",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f76ed3277440c23c70c79249676d8f7a864d73e7"
        }
      ],
      "message": "wallet: fail migration gracefully on non-writable wallets\n\nCurrently, attempting a wallet migration when the database\ndirectory or file is not writable results in a filesystem\nexception that abruptly aborts the process, skipping the\npost-failure cleanup logic and returning a not particularly\nhelpful error message.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-01-04T00:28:19Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2025-12-29T19:23:24Z"
      },
      "sha": "82a7b2c550624340f4fdfdca1612767a0faec24d"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDY0OGI3MjUyZjg0YTViMDQ0ZGEzMGI0ZGQwZWU0NWZhNGRhYjdiMzA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/648b7252f84a5b044da30b4dd0ee45fa4dab7b30",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/648b7252f84a5b044da30b4dd0ee45fa4dab7b30",
      "tree": {
        "sha": "de21c7f5aa98c9a0eaef366f45ee1ed52501e4ab",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/de21c7f5aa98c9a0eaef366f45ee1ed52501e4ab"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree de21c7f5aa98c9a0eaef366f45ee1ed52501e4ab\nparent 82a7b2c550624340f4fdfdca1612767a0faec24d\nauthor furszy <matiasfurszyfer@protonmail.com> 1767124756 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1767486500 -0500\n\ntest: add coverage for migrating a non-writable wallet\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmlZtCQACgkQXdI8zGhq\npiOaVxAAjCF7nsxRqKABYGQfwOYLb1ePT5Ook+KWZdHPzv5yfZR/pTSYAgs/xkUy\n1dmHWY2bmTBs2BroxiB/8TAZgyW9mEFIQHWVuoPAKRE8pOHDdM5PWaqOrrZ8vrLd\nsVKnn8gsN6nWRw+GmgQGhgZpPFUmKQKeCghEvpqigSe/LMrvZzX6hDF2Pl08WYCo\nHL6ZY/2XQF5iz3uc41Qn/+NzJoInnqiNMRd8c2Nj2tZ/0w7SdjuYyqEnGFhpxlnf\nXo8L8ep6+CbiquhDykpMkj+5dz2/uqgA7fYEcgUrsjZ/bHXGUkGkY7TowpESScRa\nl2q2YaKWyylj78RC9jqZXxCerz0dRz7GqjU9EP7pOiBc3OkQl3k0DEo3+3okFrhx\nSY8ZmKjTIIcfUdWU+9EcrE6rpf7wMX1EaYm1Q7M43gy0XGa3QRPDNU0EVyBQcaZM\nCmrQ8VO+UH2pv6FSNWwvGipZNMPWvjgRzJ2Zax7SADqwwrTxB+L+VXgRPbGnyZei\n4fnstN0hB3yNbe7AIf67O5nATRbs8OecECvoSom3Tcov0jW+KmOoIp+mrdlc8oKn\ntS6YfBEhuA4Yv/QdzIicyp8sZw2jtABh2wqKrodHYnrZObClaCMb8Yxpsq72p+PO\n3ieXP/b9mTNM3cMHdolzLQN/PQCnqoWPatEEGnbzM9gs2v1tWtg=\n=boX/\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/82a7b2c550624340f4fdfdca1612767a0faec24d",
          "sha": "82a7b2c550624340f4fdfdca1612767a0faec24d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/82a7b2c550624340f4fdfdca1612767a0faec24d"
        }
      ],
      "message": "test: add coverage for migrating a non-writable wallet",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-01-04T00:28:20Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2025-12-30T19:59:16Z"
      },
      "sha": "648b7252f84a5b044da30b4dd0ee45fa4dab7b30"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGFjMTM2NTdkZTRiNTg0YmJlODhmZDgyNGY1ZjRmNTNkYTEzN2M4ODI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ac13657de4b584bbe88fd824f5f4f53da137c882",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ac13657de4b584bbe88fd824f5f4f53da137c882",
      "tree": {
        "sha": "d1343aea505f03070d0d51b18df632e0828dcd87",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d1343aea505f03070d0d51b18df632e0828dcd87"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree d1343aea505f03070d0d51b18df632e0828dcd87\nparent 648b7252f84a5b044da30b4dd0ee45fa4dab7b30\nauthor furszy <matiasfurszyfer@protonmail.com> 1767142047 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1767486500 -0500\n\nwallet: migration, make sqlite creation robust against failures\n\nCurrently, MigrateToSQLite loads all BDB records into memory,\nthen deletes the original database just to create the sqlite\ndb in the same place, and finally writes all cached records\nto it.\n\nThis is not really the best because it removes the original db\nbefore making sure the sqlite one is fully built. If creation\nfails, the wallet ends up partly in sqlite format with legacy\nrecords, and the user has to restore from a backup manually.\n\nThis fixes all that by creating the sqlite db in a temporary\ndirectory first. Then, the original BDB files are removed only\nonce the sqlite db is fully constructed, and the new db is\nmoved into the original location.\n\nThe result is that no user manual intervention is needed if\nMigrateToSQLite fails as the original db stays untouched.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmlZtCQACgkQXdI8zGhq\npiN/PxAAwN1dbiwZgL+Y/fxLqDwUx4TmCYuTROiN3vUkOsKKmyjJkGLeVXtj0YrO\n0TjP4TAhskCm6/G+8OL2lnmHUTUGuiPhNWXt1p/84shqzgrxu5CxU6zF2+M2tSld\nz/DUotZIm5Z4U7f8kZ1g5Xc1YY8b+8F2XPlWejAcd0KTml32OpFu3YSr+GvymbW0\nWd4GnMdbfA/sx6eFY0aaHE+QNixowKtETPB6s4wA2whV/+OqHXOWhIKfxUJ0DkUT\nLtdNZhY94dlq6hcYeNf+pfbo7TDUUYgLUJwjpUT2sIJdY9mtUiMh9JHAgAnFevES\nJTjou1BR73U4+B2Pbu4HMn0+YRyxfG3j3YIaJHbp8SMIagC4OVPfC59yXGdyXEmj\nmmLk58SKu1YPYkfg06uGQFQHIDEwuBcBSKDLR9SnxELDNS0rGs8yeRsrjQi2tBlE\nt4mLOG3L7xl1/Of5gpbbMc5zPRL72BojQk2iar1/mKaAcgu4WBTxf8p19w7hnT9Q\n4B2Q2d3ahvLbjg5DnEmbRYd7lt+1zQoRzMY3AR4zbWQkqAdfb/06xtO6QJKrzE37\nxOhv9Q8oV+b7tKuZlEO1S4nzbbJxWCKnxuW6w/Aiq89rp4Lt53nr07bKsXy5AOUm\nDHH+6Xf16SbdozifQAsp7N3SKZEp98kqvXq2r9E81u07xdZif3g=\n=8avF\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/648b7252f84a5b044da30b4dd0ee45fa4dab7b30",
          "sha": "648b7252f84a5b044da30b4dd0ee45fa4dab7b30",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/648b7252f84a5b044da30b4dd0ee45fa4dab7b30"
        }
      ],
      "message": "wallet: migration, make sqlite creation robust against failures\n\nCurrently, MigrateToSQLite loads all BDB records into memory,\nthen deletes the original database just to create the sqlite\ndb in the same place, and finally writes all cached records\nto it.\n\nThis is not really the best because it removes the original db\nbefore making sure the sqlite one is fully built. If creation\nfails, the wallet ends up partly in sqlite format with legacy\nrecords, and the user has to restore from a backup manually.\n\nThis fixes all that by creating the sqlite db in a temporary\ndirectory first. Then, the original BDB files are removed only\nonce the sqlite db is fully constructed, and the new db is\nmoved into the original location.\n\nThe result is that no user manual intervention is needed if\nMigrateToSQLite fails as the original db stays untouched.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-01-04T00:28:20Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2025-12-31T00:47:27Z"
      },
      "sha": "ac13657de4b584bbe88fd824f5f4f53da137c882"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21838680234,
      "node_id": "HRFPE_lADOABII587hJCcHzwAAAAUVr9Cq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21838680234",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "ac13657de4b584bbe88fd824f5f4f53da137c882",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/ac13657de4b584bbe88fd824f5f4f53da137c882",
      "created_at": "2026-01-04T00:30:25Z"
    }
  ],
  "comments": []
}