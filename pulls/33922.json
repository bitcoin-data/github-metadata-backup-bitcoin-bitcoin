{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33922",
    "id": 3034182041,
    "node_id": "PR_kwDOABII58602fGZ",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/33922",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/33922.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/33922.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33922",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33922/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33922/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33922/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/71795a21e6ec854f2f450ce04cc6ff9e108a2c89",
    "number": 33922,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "mining: add getMemoryLoad() and track template non-mempool memory footprint",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "body": "Implements a way to track the memory footprint of all non-mempool transactions that are still being referenced by block templates, see discussion in  #33899. It does not impose a limit.\r\n\r\nIPC clients can query this footprint (total, across all clients) using the `getMemoryLoad()` IPC method. Its client-side usage is demonstrated here:\r\n- https://github.com/stratum-mining/sv2-tp/pull/63\r\n\r\nAdditionally, the functional test in `interface_ipc.py` is expanded to demonstrate how template memory management works: templates are not released until the client drops references to them, or calls the template destroy method, or disconnects. The destroy method is called automatically by clients using [libmultiprocess](https://github.com/bitcoin-core/libmultiprocess), as [sv2-tp](https://github.com/stratum-mining/sv2-tp) does. In the Python tests it also happens when references are destroyed or go out of scope.\r\n\r\nThe PR starts with preparation refactor commits:\r\n\r\n1. Tweaks `interface_ipc.py` so `destroy()` calls happen in an order that's useful to later demonstrate memory management\r\n2. Change `std::unique_ptr<BlockTemplate> block_template` from a `static` defined in `rpc/mining.cpp` to `NodeContext`. This prevents a crash when we switch to a non-trivial destructor later (which uses `m_node`).\r\n\r\nThen the main commits:\r\n\r\n3. Add `template_tx_refs` to `NodeContext` to track how many templates contain any given transaction. This map is updated by the `BlockTemplate` constructor and destructor.\r\n4. Add `GetTemplateMemoryUsage()` which loops over this map and sums up the memory footprint for transactions outside the mempool\r\n5. Expose this information to IPC clients via `getMemoryLoad()` and add test coverage\r\n",
    "labels": [
      {
        "id": 118378960,
        "node_id": "MDU6TGFiZWwxMTgzNzg5NjA=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mining",
        "name": "Mining",
        "color": "c7def8",
        "default": false
      }
    ],
    "created_at": "2025-11-21T15:34:14Z",
    "updated_at": "2025-12-31T06:13:43Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "df62ad0debf63d9e32ef4c169a4b3e88f2732c50",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "Sjors:2025/11/ipc-memusage",
      "ref": "2025/11/ipc-memusage",
      "sha": "71795a21e6ec854f2f450ce04cc6ff9e108a2c89",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 92390696,
        "node_id": "MDEwOlJlcG9zaXRvcnk5MjM5MDY5Ng==",
        "name": "bitcoin",
        "full_name": "Sjors/bitcoin",
        "owner": {
          "login": "Sjors",
          "id": 10217,
          "node_id": "MDQ6VXNlcjEwMjE3",
          "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/Sjors",
          "html_url": "https://github.com/Sjors",
          "followers_url": "https://api.github.com/users/Sjors/followers",
          "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
          "organizations_url": "https://api.github.com/users/Sjors/orgs",
          "repos_url": "https://api.github.com/users/Sjors/repos",
          "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/Sjors/received_events",
          "type": "User",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/Sjors/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/Sjors/bitcoin",
        "archive_url": "https://api.github.com/repos/Sjors/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/Sjors/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/Sjors/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/Sjors/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/Sjors/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/Sjors/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/Sjors/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/Sjors/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/Sjors/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/Sjors/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/Sjors/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/Sjors/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/Sjors/bitcoin/events",
        "forks_url": "https://api.github.com/repos/Sjors/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/Sjors/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/Sjors/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/Sjors/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/Sjors/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/Sjors/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/Sjors/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/Sjors/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/Sjors/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/Sjors/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/Sjors/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/Sjors/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/Sjors/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/Sjors/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/Sjors/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/Sjors/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:Sjors/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/Sjors/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/Sjors/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/Sjors/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/Sjors/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/Sjors/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/Sjors/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/Sjors/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/Sjors/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/Sjors/bitcoin/hooks",
        "svn_url": "https://github.com/Sjors/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 11,
        "stargazers_count": 15,
        "watchers_count": 15,
        "size": 284107,
        "default_branch": "master",
        "open_issues_count": 4,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": false,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-12-31T06:59:24Z",
        "created_at": "2017-05-25T10:05:54Z",
        "updated_at": "2025-11-17T14:54:55Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "516ae5ede44a8a6abc59e90f9d89913e254524f4",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 38701,
        "stargazers_count": 87459,
        "watchers_count": 87459,
        "size": 301056,
        "default_branch": "master",
        "open_issues_count": 743,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-12-30T23:52:00Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-12-31T06:47:03Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33922"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 129,
    "deletions": 5,
    "changed_files": 9,
    "commits": 5,
    "review_comments": 9,
    "comments": 13
  },
  "events": [
    {
      "event": "labeled",
      "id": 21099751277,
      "node_id": "LE_lADOABII587Zr0H9zwAAAATppKdt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21099751277",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-21T15:34:17Z",
      "label": {
        "name": "Mining",
        "color": "c7def8"
      }
    },
    {
      "event": "commented",
      "id": 3563532901,
      "node_id": "IC_kwDOABII587UZzJl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3563532901",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-21T15:34:21Z",
      "updated_at": "2025-12-31T06:13:43Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33922.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [ismaelsadeeq](https://github.com/bitcoin/bitcoin/pull/33922#pullrequestreview-3493499544), [ryanofsky](https://github.com/bitcoin/bitcoin/pull/33922#issuecomment-3608940825) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#34075](https://github.com/bitcoin/bitcoin/pull/34075) (fees: Introduce Mempool Based Fee Estimation to reduce overestimation by ismaelsadeeq)\n* [#33965](https://github.com/bitcoin/bitcoin/pull/33965) (mining: fix -blockreservedweight shadows IPC option by Sjors)\n* [#33936](https://github.com/bitcoin/bitcoin/pull/33936) (mining: pass missing context to createNewBlock() and checkBlock() by Sjors)\n* [#33819](https://github.com/bitcoin/bitcoin/pull/33819) (mining: getCoinbase() returns struct instead of raw tx by Sjors)\n* [#33795](https://github.com/bitcoin/bitcoin/pull/33795) (test: Ignore error message give from python because of PYTHON_GIL by kevkevinpal)\n* [#33421](https://github.com/bitcoin/bitcoin/pull/33421) (node: add  `BlockTemplateCache` by ismaelsadeeq)\n* [#32420](https://github.com/bitcoin/bitcoin/pull/32420) (miner: drop dummy extraNonce in coinbase scriptSig for templates requested via IPC by Sjors)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33922#issuecomment-3563532901",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33922"
    },
    {
      "event": "commented",
      "id": 3563543871,
      "node_id": "IC_kwDOABII587UZ10_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3563543871",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-21T15:36:54Z",
      "updated_at": "2025-11-21T15:36:54Z",
      "author_association": "MEMBER",
      "body": "I haven't benchmarked this yet on mainnet, so I'm not sure if checking every (unique) transaction for mempool presence is unacceptably expensive.\r\n\r\nIf people prefer, I could also add a way for the `getblocktemplate` RPC to opt-out of the memory bookkeeping, since it holds on to one template max and no longer than a minute.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33922#issuecomment-3563543871",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33922"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21100414194,
      "node_id": "HRFPE_lADOABII587Zr0H9zwAAAATprsTy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21100414194",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "f22413f31f32b6985b0090d10ab5d62ba91595cb",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/f22413f31f32b6985b0090d10ab5d62ba91595cb",
      "created_at": "2025-11-21T16:04:54Z"
    },
    {
      "event": "labeled",
      "id": 21100427068,
      "node_id": "LE_lADOABII587Zr0H9zwAAAATprvc8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21100427068",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-21T16:05:30Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3563687525,
      "node_id": "IC_kwDOABII587UaY5l",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3563687525",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-21T16:05:43Z",
      "updated_at": "2025-11-21T16:05:43Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Task `tidy`: https://github.com/bitcoin/bitcoin/actions/runs/19575422916/job/56059300316</sub>\n<sub>LLM reason (âœ¨ experimental): clang-tidy flagged fatal errors (loop variable copied for range-based for causing a warnings-as-errors failure) in interfaces.cpp, breaking the CI run.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33922#issuecomment-3563687525",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33922"
    },
    {
      "event": "reviewed",
      "id": 3493477661,
      "node_id": "PRR_kwDOABII587QOj0d",
      "url": null,
      "actor": null,
      "commit_id": "f22413f31f32b6985b0090d10ab5d62ba91595cb",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-21T16:17:32Z",
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33922#pullrequestreview-3493477661",
      "submitted_at": "2025-11-21T16:17:32Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33922"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21100762921,
      "node_id": "HRFPE_lADOABII587Zr0H9zwAAAATptBcp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21100762921",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "3b77529f74b76ea52c1b7b4ac4edacb0947ff202",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/3b77529f74b76ea52c1b7b4ac4edacb0947ff202",
      "created_at": "2025-11-21T16:22:21Z"
    },
    {
      "event": "reviewed",
      "id": 3493499544,
      "node_id": "PRR_kwDOABII587QOpKY",
      "url": null,
      "actor": null,
      "commit_id": "3b77529f74b76ea52c1b7b4ac4edacb0947ff202",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-21T16:23:32Z",
      "author_association": "MEMBER",
      "body": "Concept ACK\r\n\r\nI think it would be better if we have internal memory management for the mining interface IPC, since we hold on to the block templates.\r\n\r\nI would suggest the following approach:\r\n\r\n- Add memory budget for the mining interface.\r\n- Introduce a tracking list of recently built block templates and total memory usage.\r\n- Add templates to the list and increment the memory usage after every `createnewblock` or `waitnext` return.\r\n- Whenever the memory budget is exhausted, we should release templates in FIFO order.\r\n\r\nI think since we create a new template after a time interval elapses even if fees increase and that interval is usually enough for the client to receive and distribute the template to miners, this mechanism should be safe as the miners have long switch to most recent template when the budget elapsed because of the time interval being used in between returns of waitnext.\r\n\r\nMining interface clients should also handle their own memory internally.\r\n\r\nCurrently, I donâ€™t see much use for the exposed `getMemoryLoad` method. In my opinion, we should not rely on the IPC client to manage our memory.\r\n\r\n\r\n",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33922#pullrequestreview-3493499544",
      "submitted_at": "2025-11-21T16:22:59Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33922"
    },
    {
      "event": "commented",
      "id": 3563799563,
      "node_id": "IC_kwDOABII587Ua0QL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3563799563",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-21T16:34:13Z",
      "updated_at": "2025-11-21T16:34:52Z",
      "author_association": "MEMBER",
      "body": "> In my opinion, we should not rely on the IPC client to manage our memory.\r\n\r\n> Whenever the memory budget is exhausted, we should release templates in FIFO order\r\n\r\nIt seems counter intuitive, but from a memory management perspective IPC clients are treated no different than our own code. And if we started FIFO deleting templates that are used by our own code, we'd crash.\r\n\r\nSo I think FIFO deletion should be a last resort (not implemented here).\r\n\r\nThere's another reason why we should give clients an opportunity to gracefully release templates in whatever order they prefer. Maybe there's 100 downstream ASIC's, one of which is very slow at loading templates, so it's only given a new template when the tip changes, not when there's a fee change. In that scenario you have a specific template that the client wants to \"defend\" at all cost.\r\n\r\nIn practice I'm hoping none of this matters and we can pick and recommend defaults that make it unlikely to get close to a memory limit, other than during some weird token launch. \r\n\r\n",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33922#issuecomment-3563799563",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33922"
    },
    {
      "event": "unlabeled",
      "id": 21101871840,
      "node_id": "UNLE_lADOABII587Zr0H9zwAAAATpxQLg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21101871840",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-21T17:20:39Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3564018931,
      "node_id": "IC_kwDOABII587Ubpzz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3564018931",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-21T17:38:04Z",
      "updated_at": "2025-11-21T17:40:00Z",
      "author_association": "MEMBER",
      "body": "> It seems counter intuitive, but from a memory management perspective IPC clients are treated no different than our own code. And if we started FIFO deleting templates that are used by our own code, we'd crash.\r\n\r\nIMHO I think we should separate that, and treat clients differently from our own code, because they are different codebases and separate applications with their own memory.\r\n\r\n> Maybe there are 100 downstream ASICs, one of which is very slow at loading templates, so itâ€™s only given a new template when the tip changes, not when thereâ€™s a fee change. In that scenario you have a specific template that the client wants to â€œdefendâ€ at all costs.\r\n\r\nI see your point but I donâ€™t think thatâ€™s a realistic scenario, and I think we shouldnâ€™t design software to be one-size-fits-all.\r\nIf you want to use only single block templates, then use `createnewblock` and create a new block template and mine that continuously until the chain tip changes or you mine a block.\r\n\r\n`waitNext` returning indicates that we assume your miners are switching from the block they are currently mining to the new one they receive.\r\nDepending on the budget (which I assume is large), many templates would need to be returned before we exhaust it.\r\n\r\nDelegating template eviction responsibility to the client can put us in a situation where they handle it poorly and cause us to OOM (but I guess your argument is that we rather take that chance than being in a situation where we make miners potentially lose on rewards).\r\nHowever I think if there is a clean separation of concerns between the Bitcoin Core node and its clients and clear interface definition and expectations that should not happen, and I believe the mining interface should not differ in that respect.\r\nOtherwise, if we do want a one-size-fits-all solution capable of handling the scenario you described, we should rethink the design entirely and revert to an approach where we do not retain block templates.\r\n",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33922#issuecomment-3564018931",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33922"
    },
    {
      "event": "commented",
      "id": 3570105870,
      "node_id": "IC_kwDOABII587Uy34O",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3570105870",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-24T10:49:07Z",
      "updated_at": "2025-11-24T11:00:34Z",
      "author_association": "MEMBER",
      "body": "> Delegating template eviction responsibility to the client can put us in a situation where they handle it poorly and cause us to OOM\r\n\r\nNote that it's _already_ the clients responsibility, that's inherent to how multiprocess works.\r\n\r\nIn the scenario where they handle it poorly, we can use FIFO deletion. All `getMemoryLoad()` does is give clients an opportunity to handle it better. If they're fine with FIFO, then they never have to call this method.\r\n\r\n> treat clients differently from our own code\r\n\r\nWe currently don't track whether any given `CBlockTemplate` is owned by an IPC client or by our internal code. Once we introduce FIFO deletion all call sites will have to check if it's been deleted since, or we need to exempt them from the memory accounting.\r\n\r\n> an approach where we do not retain block templates.\r\n\r\nAfaik that means revalidating the block from scratch, removing one advantage the `submitBlock()` approach has over the `submitblock` RPC (I haven't benchmarked this though).",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33922#issuecomment-3570105870",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33922"
    },
    {
      "event": "commented",
      "id": 3571793549,
      "node_id": "IC_kwDOABII587U5T6N",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3571793549",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-24T16:56:34Z",
      "updated_at": "2025-11-25T09:43:50Z",
      "author_association": "MEMBER",
      "body": "I tracked the non-mempool transaction memory footprint for half a day on mainnet, using fairly aggressive template update criteria (minimum fee delta 1 sat and no more than once per second). So far the footprint is minuscule, but of course this depends on the mempool weather:\r\n\r\n<img width=\"3167\" height=\"1141\" alt=\"getmemoryload-scatter\" src=\"https://github.com/user-attachments/assets/30a7b90a-5070-40b2-84d7-55922750c8b8\" />\r\n\r\nThe memory spike after each new block is because `sv2-tp` holds on to templates from previous blocks for 10 seconds. Those ~3 MB spikes may look impressive, but keep in mind that the default mempool is 300 MB.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33922#issuecomment-3571793549",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33922"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21168098538,
      "node_id": "HRFPE_lADOABII587Zr0H9zwAAAATtt4zq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21168098538",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "24592b737fb80f07276a88fbcf8eaf0ee64c7e49",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/24592b737fb80f07276a88fbcf8eaf0ee64c7e49",
      "created_at": "2025-11-25T15:47:05Z"
    },
    {
      "event": "commented",
      "id": 3576359913,
      "node_id": "IC_kwDOABII587VKuvp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3576359913",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-25T15:56:12Z",
      "updated_at": "2025-11-25T16:00:43Z",
      "author_association": "MEMBER",
      "body": "I restructured the implementation and commits a bit.\r\n\r\n\r\nThe `TxTemplateMap` now lives on the `NodeContext` rather than `MinerImpl` (interface). This reflects the fact that we want to track the global memory footprint instead of per client. It's a lightweight member `template_tx_refs` which should be easy to fold into a block template manager later.\r\n\r\nIt's also [less code churn](https://github.com/bitcoin/bitcoin/compare/3b77529f74b76ea52c1b7b4ac4edacb0947ff202..24592b737fb80f07276a88fbcf8eaf0ee64c7e49#diff-0ef8ae12c6e9ef2accc78537f42612b3267e8a7c45dc7e9eb998f797e79f2e95) because I don't have to touch the `BlockTemplateImpl` constructor.\r\n\r\nIt also made it easier to move `GetTemplateMemoryUsage` from `interface.cpp` to `miner.cpp`, where it's more reusable.\r\n\r\nThis in turn let me split out a separate commit that introduces the actual `getMemoryLoad()` interface method. So even if we decide against including that method, the rest of the PR should be useful. However I do think it's worth keeping, it's already been a helpful debugging and monitoring tool.\r\n\r\nI added some comments to point out that we don't hold a `mempool.cs` lock during the calculation because we don't need an accurate result (mempool drift) and we don't want to bog down transaction relay with a potentially long lock (1-3ms in my testing so far).\r\n\r\n",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33922#issuecomment-3576359913",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33922"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21170129893,
      "node_id": "HRFPE_lADOABII587Zr0H9zwAAAATt1ovl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21170129893",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "03dcfaeb5892fa877eaae0fe6d6942943b7d9b95",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/03dcfaeb5892fa877eaae0fe6d6942943b7d9b95",
      "created_at": "2025-11-25T17:21:57Z"
    },
    {
      "event": "commented",
      "id": 3576715015,
      "node_id": "IC_kwDOABII587VMFcH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3576715015",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-25T17:22:05Z",
      "updated_at": "2025-11-25T19:05:14Z",
      "author_association": "MEMBER",
      "body": "`mining_getblocktemplate_longpoll.py` triggered a `stack-use-after-return`, due to `block_template` being `static` (to allow template reuse between RPC calls). I added a commit d752dccaa56b663001d1bb29ab8b9a50628602a9 to move this longpoll template to the node context. This seems more appropriate anyway since `BlockTemplate` has a `m_node` member, so it shouldn't be able to outlive the node.\r\n\r\nOne caveat is that `gbt_template` has to be cleared before `template_tx_refs`, so I swapped them and added a comment (cde248a6613b6e37f7f7e35c1aabeb75347ffe95 -> 9c667c362a1639b48113a3657882b751f475082c.\r\n\r\n---\r\n\r\nExpanded the PR description.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33922#issuecomment-3576715015",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33922"
    },
    {
      "event": "labeled",
      "id": 21170138580,
      "node_id": "LE_lADOABII587Zr0H9zwAAAATt1q3U",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21170138580",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-25T17:22:27Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21171078260,
      "node_id": "HRFPE_lADOABII587Zr0H9zwAAAATt5QR0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21171078260",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "ac1e97a59279b2407e5f64bd684170587bae88dc",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/ac1e97a59279b2407e5f64bd684170587bae88dc",
      "created_at": "2025-11-25T18:13:13Z"
    },
    {
      "event": "unlabeled",
      "id": 21174858806,
      "node_id": "UNLE_lADOABII587Zr0H9zwAAAATuHrQ2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21174858806",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-25T21:47:49Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 3530078094,
      "node_id": "PRR_kwDOABII587SaLeO",
      "url": null,
      "actor": null,
      "commit_id": "ac1e97a59279b2407e5f64bd684170587bae88dc",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-02T13:17:51Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33922#pullrequestreview-3530078094",
      "submitted_at": "2025-12-02T13:17:51Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33922"
    },
    {
      "event": "commented",
      "id": 3605610816,
      "node_id": "IC_kwDOABII587W6UFA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3605610816",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-03T08:19:54Z",
      "updated_at": "2025-12-03T08:19:54Z",
      "author_association": "MEMBER",
      "body": "Here's a slightly more realistic plot from last night on a well connected node running on an Intel i5-8400:\r\n\r\n<img width=\"3842\" height=\"1369\" alt=\"getmemoryload-scatter\" src=\"https://github.com/user-attachments/assets/f1ae2d88-73fa-4d2c-bd5f-bce5a168eeee\" />\r\n\r\nIt's connected to DMND pool, declaring custom templates and getting them approved, but not actually mining. Due to their rate limiting I set `-sv2interval=20`, so if fees go up, it waits at least 20 seconds before generating a new template. It does not wait when the tip changes.\r\n\r\nThe machine also runs a lightning node and BTCPay so the moment block comes in the system is quite busy.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33922#issuecomment-3605610816",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33922"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21327632824,
      "node_id": "HRFPE_lADOABII587Zr0H9zwAAAAT3Odm4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21327632824",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "e8f8f7f677bcde0179526be3ed9a657c44998b93",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/e8f8f7f677bcde0179526be3ed9a657c44998b93",
      "created_at": "2025-12-03T09:36:11Z"
    },
    {
      "event": "commented",
      "id": 3608940825,
      "node_id": "IC_kwDOABII587XHBEZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3608940825",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-03T21:36:31Z",
      "updated_at": "2025-12-03T21:36:31Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK e8f8f7f677bcde0179526be3ed9a657c44998b93. All the changes here seem good and mostly straightforward. The `getMemoryLoad()` function seems useful by itself and the underlying tracking would seem to provide almost everything needed to limit memory used by block templates.\r\n\r\nI am a little concerned about the idea of proactively deleting block templates in FIFO order on behalf of clients, since it seems like this could increase complexity server-side, and client-side if clients have to deal with templates disappearing without being notified. Just not returning new templates after a certain amount of memory has been used would like a simpler approach.\r\n\r\nre: https://github.com/bitcoin/bitcoin/pull/33922#issue-3652141565\r\n\r\n> Additionally, the functional test in `interface_ipc.py` is expanded to demonstrate how template memory management works: templates are not released until the client disconnects or calls the `destroy()` method.\r\n\r\nWould be good if this said templates are also released if the python references are destroyed or go out of scope. (This stood out because I tested this yesterday in https://github.com/bitcoin/bitcoin/issues/33940#issuecomment-3604081211.)",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33922#issuecomment-3608940825",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33922"
    },
    {
      "event": "commented",
      "id": 3611468373,
      "node_id": "IC_kwDOABII587XQqJV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3611468373",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-04T10:46:46Z",
      "updated_at": "2025-12-04T10:46:46Z",
      "author_association": "MEMBER",
      "body": "> Just not returning new templates after a certain amount of memory has been used would like a simpler approach.\r\n\r\nIt is, but refusing to make new templates doesn't stop the footprint of existing templates from growing. The worst case extra memory footprint for _existing_ templates is the full size of the mempool.\r\n\r\nThis is rather unlikely though, it would only happen if between two blocks the entire mempool was gradually RBF'd in such a way that each transaction was at the top of the mempool briefly, and thus made it into a template.\r\n\r\n> Would be good if this said templates are also released\r\n\r\nAdded a sentence to the PR description.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33922#issuecomment-3611468373",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33922"
    },
    {
      "event": "reviewed",
      "id": 3541246611,
      "node_id": "PRR_kwDOABII587TEyKT",
      "url": null,
      "actor": null,
      "commit_id": "e8f8f7f677bcde0179526be3ed9a657c44998b93",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-04T18:23:00Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review e8f8f7f677bcde0179526be3ed9a657c44998b93. This looks good except for a thread safety issue I think you can address by adding a mutex.\n\nre: https://github.com/bitcoin/bitcoin/pull/33922#issuecomment-3611468373\n\n> > Would be good if this said templates are also released\n> \n> Added a sentence to the PR description.\n\nSorry, I should have made a more specific suggestion. The problem is is that this sentence is not accurate: \"templates are not released until the client disconnects or calls the destroy() method.\" Templates will be released if the client drops references to them, even if it never disconnects or calls destroy. I would just change it to \"templates are not released until the client drops references to them, or calls the template destroy method, or disconnects\"",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33922#pullrequestreview-3541246611",
      "submitted_at": "2025-12-04T18:23:00Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33922"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21382269238,
      "node_id": "HRFPE_lADOABII587Zr0H9zwAAAAT6e4k2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21382269238",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "e75406dccc39b1f5d988994083e7fd959fa2a49a",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/e75406dccc39b1f5d988994083e7fd959fa2a49a",
      "created_at": "2025-12-05T11:09:09Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21382356486,
      "node_id": "HRFPE_lADOABII587Zr0H9zwAAAAT6fN4G",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21382356486",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "9a03d3837f2532619f8249e4a062453b333c0692",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/9a03d3837f2532619f8249e4a062453b333c0692",
      "created_at": "2025-12-05T11:13:53Z"
    },
    {
      "event": "labeled",
      "id": 21382367542,
      "node_id": "LE_lADOABII587Zr0H9zwAAAAT6fQk2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21382367542",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-05T11:14:26Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21382438954,
      "node_id": "HRFPE_lADOABII587Zr0H9zwAAAAT6fiAq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21382438954",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "7f4249b0d0a126cfaddba48bc1bd4966c14fbd0d",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/7f4249b0d0a126cfaddba48bc1bd4966c14fbd0d",
      "created_at": "2025-12-05T11:18:27Z"
    },
    {
      "event": "unlabeled",
      "id": 21383975379,
      "node_id": "UNLE_lADOABII587Zr0H9zwAAAAT6lZHT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21383975379",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-05T12:44:18Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 21595670317,
      "node_id": "LE_lADOABII587Zr0H9zwAAAAUHM8ct",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21595670317",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-16T15:27:29Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDllMmZkZGIyYWI1NGRkZGViNTIyMjU0YmZhOTUxZTk4NmEwYTljNTA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9e2fddb2ab54dddeb522254bfa951e986a0a9c50",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/9e2fddb2ab54dddeb522254bfa951e986a0a9c50",
      "tree": {
        "sha": "70d3e3ad78e3a08f457b7e0da32dbff971516b13",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/70d3e3ad78e3a08f457b7e0da32dbff971516b13"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 70d3e3ad78e3a08f457b7e0da32dbff971516b13\nparent 516ae5ede44a8a6abc59e90f9d89913e254524f4\nauthor Sjors Provoost <sjors@sprovoost.nl> 1764091003 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1766137919 +0800\n\nrpc: move static block_template to node context\n\nThe getblocktemplate RPC uses a static BlockTemplate, which goes out\nof scope only after the node completed its shutdown sequence.\n\nThis becomes a problem when a later commit implements a destructor\nthat uses m_node.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmlFID8ACgkQV/+b28ww\nEAkUOxAAq8EL45WMQht0VVmpZm+4pScHlhoZziOvyd7FS1GWINcjHyyLBt0jAHic\nB36yFDA/Zlh4xdzWNgdeX/OF3IAPWKFH3vYgVMaURUxX9hHwwjtl3fPNxCEq4NPk\nCWRgfBbPlWWlTFyuFneqdGZtHbpkXLd6v6NCoCYy5EqaJQ4utjUPsMuSqH/HB1yI\nfnlPCQ/fV95T7DvUiieQy6Z2Xc1TfYWquyMI6fqfqNfwF62BZE6mfx5mW+qQ9buq\ntX7gfR7V519vmDAVNgzHWH/EVWD81QR9xTGM+yAWsQmtAZOgYq5yx8+2U9EWO+cl\nzEMMobacuFEaxq/KicEtl08SzG0SolX9mxDxhj73GyPFKc8KkduTVAnVUz8T3hjX\nohj7og/dZ9t++TBR3tAZmLJhBOWlRqkP9ENOAMOj/41a6GPs6hTXm4RMtaf1fDia\nvCBW5FseSyRqC1OjrRjJXDhl2OGbKyNYxWNc+/plrk3p0ollMxJ2FLLY6CLoDkPZ\n/De/YvekzxpZSfahuyYOckUThFOPy3TJVGV1gKYRX8LQSQmcsuUdmO17R35v17J7\noEwkRmau9iHoaGNajbdoA3EPCoPOHsp2X6hej+W7Hy/4uiH1vqLwZIhp5SoDG58h\nDr88WMpvswIhm7+vZetWDgzavOywWW2DNBOMJGkPmPglIqkaMvk=\n=sFMX\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/516ae5ede44a8a6abc59e90f9d89913e254524f4",
          "sha": "516ae5ede44a8a6abc59e90f9d89913e254524f4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/516ae5ede44a8a6abc59e90f9d89913e254524f4"
        }
      ],
      "message": "rpc: move static block_template to node context\n\nThe getblocktemplate RPC uses a static BlockTemplate, which goes out\nof scope only after the node completed its shutdown sequence.\n\nThis becomes a problem when a later commit implements a destructor\nthat uses m_node.",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2025-12-19T09:51:59Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2025-11-25T17:16:43Z"
      },
      "sha": "9e2fddb2ab54dddeb522254bfa951e986a0a9c50"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGY1MDgyNTVhMWEyYWMxMGVhNjJkZmY3ZGQyYjNlNWFhODAzNWVmOWU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f508255a1a2ac10ea62dff7dd2b3e5aa8035ef9e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f508255a1a2ac10ea62dff7dd2b3e5aa8035ef9e",
      "tree": {
        "sha": "0c748ae6154fd31c130c5aebac062cdc51dfee02",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0c748ae6154fd31c130c5aebac062cdc51dfee02"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 0c748ae6154fd31c130c5aebac062cdc51dfee02\nparent 9e2fddb2ab54dddeb522254bfa951e986a0a9c50\nauthor Sjors Provoost <sjors@sprovoost.nl> 1763737947 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1766137919 +0800\n\nmining: track non-mempool memory usage\n\nIPC clients can hold on to block templates indefinately, which has the\nsame impact as when the node holds a shared pointer to the\nCBlockTemplate. Because each template in turn tracks CTransactionRefs,\ntransactions that are removed from the mempool will have not have\ntheir memory cleared.\n\nThis commit adds bookkeeping to the block template constructor and\ndestructor that will let us track the resulting memory footprint.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmlFID8ACgkQV/+b28ww\nEAmdiA/7BRAKvojbkLOw/St9nSKkf4MYkBr+94GGTh/zAUMK3X3ooBupAJN4UPbo\n+ORv+KvOHQYB97dGxVRBY9FjftZgkvCyEQqANnpo07BhUNUXY155wfU++LyemYpe\nAwWz421zDZSFAnCLAuU1EVtJ6VuWMFup1WRDLlzWe1zIKqy7xhIaJHsZaKLzshZu\n8zfYNzuvstncSILUjWFjfhZMy+1W95DvjnGnyHU6yxZDG5WB4sdaXOU7i5PkSi+T\ngOVAtQmTQr3ZRtkJszf9V+BI6nELpOgV1v3H8gEi00Ai/VSN1InZNX4o9OzsK2NU\nxAF+cC+3uAIMtDQKguUZUsyiG73ORioQ9aHze0lcU6pGwhBgJpSHJjrcEP7cez27\nzFE1JLY31PDMv6pwL5LqsKCj1NmN73wBSOZeev45C2h/UwPdZPeeiJIUIsYAGvlu\n47SE5MC1sGN8kDUwBBCW3OLy87Ko5j184AcXODjN4H8eL7ypVFVXsyODL6YLd5je\nqVrCYc7zyzKB6nH0rOkHDIlRPF8zFgtl+ldVlPvBMPWc1LR9jfWt02i/CQAIgabg\nWu9DcaUSTcXimuWgrvPGMTM08MSpvnyjvbElCBzQ76NQ0wn73wV36txtcHvFda5d\nTYM+X/r+iOhh5DFwi40QmsAIKg0C0oxe5Is02XbOoNQbI5hDMH0=\n=dLNU\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9e2fddb2ab54dddeb522254bfa951e986a0a9c50",
          "sha": "9e2fddb2ab54dddeb522254bfa951e986a0a9c50",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/9e2fddb2ab54dddeb522254bfa951e986a0a9c50"
        }
      ],
      "message": "mining: track non-mempool memory usage\n\nIPC clients can hold on to block templates indefinately, which has the\nsame impact as when the node holds a shared pointer to the\nCBlockTemplate. Because each template in turn tracks CTransactionRefs,\ntransactions that are removed from the mempool will have not have\ntheir memory cleared.\n\nThis commit adds bookkeeping to the block template constructor and\ndestructor that will let us track the resulting memory footprint.",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2025-12-19T09:51:59Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2025-11-21T15:12:27Z"
      },
      "sha": "f508255a1a2ac10ea62dff7dd2b3e5aa8035ef9e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDJhOWI4MzA5YWJhN2RmMjE5NzU0MTU1ZmEzYzY4NjBiNTk3MzgzM2M",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2a9b8309aba7df219754155fa3c6860b5973833c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2a9b8309aba7df219754155fa3c6860b5973833c",
      "tree": {
        "sha": "f86d649b7da2f568322ac4d5558817b9d25ec23c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f86d649b7da2f568322ac4d5558817b9d25ec23c"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree f86d649b7da2f568322ac4d5558817b9d25ec23c\nparent f508255a1a2ac10ea62dff7dd2b3e5aa8035ef9e\nauthor Sjors Provoost <sjors@sprovoost.nl> 1764084376 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1766137919 +0800\n\nmining: add GetTemplateMemoryUsage()\n\nCalculate the non-mempool memory footprint for template transaction\nreferences.\n\nAdd bench logging to collect data on whether caching or simplified\nheuristics are needed, such as not checking for mempool presence.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmlFID8ACgkQV/+b28ww\nEAk9SA/9HQt853wR5DgSFUHxKHiqEfKR6RT9gTSnRjytPGyeDRPFidILTPCMATIq\nqQUxvWlL7v83AtwuIQGSqErnx50j34NcZMGfx4i2QbgPC9g5/ur1QDC1NZMTL2mm\n2kxpx841uRJuZ9UBT8hsvZa6lU2k7YUkOgfSNlSmw/Dzm5ZEpg8VTq0y/YxAGSrC\nPJzchSnEWs2+Wh6Ym/5sbkn2OBfIRxbyxOG3GueLifHu4LtCo5zQPMRU126RaWrB\nIyDNuVuPU4KzLM3GkJTEeq9EtMYOuVuFWNib80HFtvabT5au7OtxXyEblJmXq1zT\nG/5oPAjojTPVXAj5dDpxZ1Xe0WoaqLIfKE4vcfItxcaDUOUv/7DaxbRDngC+6Flf\nVn1HBaHDJcmdr1Qss0cXjm7Qqj1/SEIcdGU6TpUmhfYOwt2aPAd4/MCKQ+wo9Kzy\nYbCrbTRLgmalx9bc/Xwwk9+6meEMcHTD8P5FhFgrdnVzSYHyXVYlR4OvHk0XXCBg\nj2Dj81wuPiZ0UeMQAZPzhwvvcjP4qGg8usjZD2+zD/EK3VfaEg8X8OzRFt64+xe9\nsZit/A7sXfOoLOF7uMt1VPthY2hzwNvAcdqqvLVe7yopVDN3FCTqyTUf0MOT7Jef\nQw7jKTthwyW1XcdGq1xT8aLW3Nd8YRCUXZs+ebydLtJ2O+kyu2g=\n=zdTb\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f508255a1a2ac10ea62dff7dd2b3e5aa8035ef9e",
          "sha": "f508255a1a2ac10ea62dff7dd2b3e5aa8035ef9e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f508255a1a2ac10ea62dff7dd2b3e5aa8035ef9e"
        }
      ],
      "message": "mining: add GetTemplateMemoryUsage()\n\nCalculate the non-mempool memory footprint for template transaction\nreferences.\n\nAdd bench logging to collect data on whether caching or simplified\nheuristics are needed, such as not checking for mempool presence.",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2025-12-19T09:51:59Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2025-11-25T15:26:16Z"
      },
      "sha": "2a9b8309aba7df219754155fa3c6860b5973833c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGM1MjFjOWMwOWI5YzZjMDBlYmUzMTE2NmRjM2Q1YjA2MTgwMDc1OTA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c521c9c09b9c6c00ebe31166dc3d5b0618007590",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c521c9c09b9c6c00ebe31166dc3d5b0618007590",
      "tree": {
        "sha": "c016b9f7a91b53551799cdfa31d3d8eb9d5c65bd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c016b9f7a91b53551799cdfa31d3d8eb9d5c65bd"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree c016b9f7a91b53551799cdfa31d3d8eb9d5c65bd\nparent 2a9b8309aba7df219754155fa3c6860b5973833c\nauthor Sjors Provoost <sjors@sprovoost.nl> 1766189868 -0600\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1766139468 +0800\n\nipc: add getMemoryLoad()\n\nAllow IPC clients to inspect the amount of memory consumed by\nnon-mempool transactions in blocks.\n\nReturns a MemoryLoad struct which can later be expand to e.g.\ninclude a limit.\n\nExpand the interface_ipc.py test to demonstrate the behavior and\nto illustrate how clients can call destroy() to reduce memory\npressure.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmlFJk0ACgkQV/+b28ww\nEAkmthAArJjeLy+VqnnZDKrXuNylvqazvOnHlISuPzU9qYe+4/2k3HS66ypcSbKi\nVBzxCmp8ghktKT+ewmo6dSXZQI2Sw0GYhzuQ1EtvjWMhJOTREX0P3x7h8sMdfxHT\nq0GPtF8CdlntFJvsaaDm/AZklhFpZkUgVBV1ynI+/rIPH7y0WjZ4oDaecFMbA6tt\nF295+xQQ5FPAkGRmSNS+9dxrLF2PRhBjC40CSKGq9WT99bcUjrEjvwch0dJxXT6Y\n+252NHGplXnP20AmyWTVAaMl1jegg9ZosZEcE/K7Sltny80eEH96OnWeY+/VpjeV\nR5IGtchBc3SKcvkAA4ZBvzKRsA1NPHGSbUPl9lLdCev9BsARdO++lXBJxvgMRW9+\nBPVxa5fmAq4fFhVLibOdJdCAlS0LwmT9XNWpnwKUezL4IPB8gwsQ2fl/CLgnYsL4\noPfhUjQGX83KxDza/UalQMRKacufWFZsqfM3HLJL7yFmPk0GJAJUt9PhOghK8eCN\ngpH0pzK/JGN6XToP/N6f/DV4jMr2Bah6FCIWUidbpTRkyrF8eY8QXmxV/W6i4XIo\nX70RD1S2WgOZo8BgJeSR3R6N+5YrNqmViUAZU9kmPJ93Q1wqN0Ku8Rw2RWDia4Tv\nB9mVhyDg9JmsfJoDtD3VxJcdpZtx9Gmb/3E2AnISgUOKSB34E6U=\n=8ZZS\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2a9b8309aba7df219754155fa3c6860b5973833c",
          "sha": "2a9b8309aba7df219754155fa3c6860b5973833c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2a9b8309aba7df219754155fa3c6860b5973833c"
        }
      ],
      "message": "ipc: add getMemoryLoad()\n\nAllow IPC clients to inspect the amount of memory consumed by\nnon-mempool transactions in blocks.\n\nReturns a MemoryLoad struct which can later be expand to e.g.\ninclude a limit.\n\nExpand the interface_ipc.py test to demonstrate the behavior and\nto illustrate how clients can call destroy() to reduce memory\npressure.",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2025-12-19T10:17:48Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2025-12-20T00:17:48Z"
      },
      "sha": "c521c9c09b9c6c00ebe31166dc3d5b0618007590"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDcxNzk1YTIxZTZlYzg1NGYyZjQ1MGNlMDRjYzZmZjllMTA4YTJjODk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/71795a21e6ec854f2f450ce04cc6ff9e108a2c89",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/71795a21e6ec854f2f450ce04cc6ff9e108a2c89",
      "tree": {
        "sha": "90f963be5c98942190a25233bd323af622f2a679",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/90f963be5c98942190a25233bd323af622f2a679"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 90f963be5c98942190a25233bd323af622f2a679\nparent c521c9c09b9c6c00ebe31166dc3d5b0618007590\nauthor Sjors Provoost <sjors@sprovoost.nl> 1766190239 -0600\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1766139839 +0800\n\ntest: cover feeThreshold = MAX_MONEY\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmlFJ8MACgkQV/+b28ww\nEAnLjw/9F3sXMDtPRLfmkxWwk92ZAvH3IAbAu90oqkDgDAgbVRalWUVjvSRHnk1o\no1dm/qn9eeFjO0c5zdzBPYsDijItfUVR8BfDsqM6hMbe+bZL34xobRaHFkDqZHku\nV1FgZ//2cOh2Is5lt47lFNuIAiS/YEhCgTrr6wuc2sHJsvJ2uNcptZExZJWMoJ9J\nKogCKJ6iZkUSHgC+Mr3S67WMkdIIJKj9hblgzdboFG+qVEeojgWI6qBVcD1DBLrI\nGhbyBOptBZbPFrGK3+0aDbBFcEWceDqITBKz/zwL6CU2Db65VYwk7l0RrGFr32mR\n8lP2S6n3bLpNh9BAlrJLofgy0f+YWcyS9QfwmXZwIP9EKxEAtrlCRxpe8oPX6UGX\nfU0cSPF/4EWotSWzieCeDrEkCfw93cA36kR47s2kyOePV4bN5JX4VXpljHtVbs63\n9hh3DWM4W79GpKl9JC05aPzLyMh1YME1pOBCzne1U9QVq/U8sONio6B62g20qRXA\nTC3FcB87p2OPvvqrwdNz4ps9noVAabU0j7K0iCWLjpUtvNWyg7RziyjgOhN2W2E8\nV+Fd20Uh50Ivll6VV5r68bYCVCiTDK9qmBUmEiKAoKb9XguaSROKI953xUEXUzWc\nCRraRg917BRrD2BLz9OEpmtziD0DyhQtaaBQy9wJlaBgRvYpeR8=\n=yn0y\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c521c9c09b9c6c00ebe31166dc3d5b0618007590",
          "sha": "c521c9c09b9c6c00ebe31166dc3d5b0618007590",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c521c9c09b9c6c00ebe31166dc3d5b0618007590"
        }
      ],
      "message": "test: cover feeThreshold = MAX_MONEY",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2025-12-19T10:23:59Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2025-12-20T00:23:59Z"
      },
      "sha": "71795a21e6ec854f2f450ce04cc6ff9e108a2c89"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21667510285,
      "node_id": "HRFPE_lADOABII587Zr0H9zwAAAAULe_gN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21667510285",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "71795a21e6ec854f2f450ce04cc6ff9e108a2c89",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/71795a21e6ec854f2f450ce04cc6ff9e108a2c89",
      "created_at": "2025-12-19T10:24:15Z"
    },
    {
      "event": "commented",
      "id": 3674495132,
      "node_id": "IC_kwDOABII587bBFic",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3674495132",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-19T10:25:37Z",
      "updated_at": "2025-12-19T10:25:37Z",
      "author_association": "MEMBER",
      "body": "Rebased after #34003. Dropped c548d6f0e8ecc0da6e29256c7085d48d10e10216 _test: destroy templates more carefully_. That commit also added coverage for `feeThreshold == MAX_MONEY`, so I moved that into a new commit - not really related to this PR though.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33922#issuecomment-3674495132",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33922"
    },
    {
      "event": "unlabeled",
      "id": 21669763948,
      "node_id": "UNLE_lADOABII587Zr0H9zwAAAAULnlts",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21669763948",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-19T12:23:42Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2550291196",
      "pull_request_review_id": 3493477661,
      "id": 2550291196,
      "node_id": "PRRC_kwDOABII586YAlr8",
      "diff_hunk": "@@ -857,16 +861,40 @@ class ChainImpl : public Chain\n     NodeContext& m_node;\n };\n \n+typedef std::map<CTransactionRef, size_t> TxTemplateMap;\n class BlockTemplateImpl : public BlockTemplate\n {\n public:\n-    explicit BlockTemplateImpl(BlockAssembler::Options assemble_options,\n-                               std::unique_ptr<CBlockTemplate> block_template,\n-                               NodeContext& node) : m_assemble_options(std::move(assemble_options)),\n-                                                    m_block_template(std::move(block_template)),\n-                                                    m_node(node)\n+    explicit BlockTemplateImpl(\n+        BlockAssembler::Options assemble_options,\n+        std::unique_ptr<CBlockTemplate> block_template,\n+        NodeContext& node,\n+        std::shared_ptr<TxTemplateMap> tx_template_refs) : m_assemble_options(std::move(assemble_options)),\n+                                                          m_block_template(std::move(block_template)),\n+                                                          m_node(node),\n+                                                          m_tx_template_refs(std::move(tx_template_refs))\n+\n     {\n         assert(m_block_template);\n+\n+        TxTemplateMap& tx_refs{*Assert(m_tx_template_refs)};\n+        // Don't track the dummy coinbase, because it can be modified in-place\n+        // by submitSolution()",
      "path": "src/node/interfaces.cpp",
      "position": 22,
      "original_position": 53,
      "commit_id": "71795a21e6ec854f2f450ce04cc6ff9e108a2c89",
      "original_commit_id": "f22413f31f32b6985b0090d10ab5d62ba91595cb",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "b9306b79b8f5667a2679236af8792bb1c36db817: in addition, we might be wiping the dummy coinbase from the template later: https://github.com/Sjors/bitcoin/pull/106",
      "created_at": "2025-11-21T16:17:32Z",
      "updated_at": "2025-11-21T16:17:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33922#discussion_r2550291196",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2550291196"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33922"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 871,
      "original_line": 871,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2581145624",
      "pull_request_review_id": 3530078094,
      "id": 2581145624,
      "node_id": "PRRC_kwDOABII586Z2SgY",
      "diff_hunk": "@@ -866,7 +868,22 @@ class BlockTemplateImpl : public BlockTemplate\n                                                     m_block_template(std::move(block_template)),\n                                                     m_node(node)\n     {\n-        assert(m_block_template);\n+        // Don't track the dummy coinbase, because it can be modified in-place\n+        // by submitSolution()\n+        for (const CTransactionRef& tx : Assert(m_block_template)->block.vtx | std::views::drop(1)) {\n+            m_node.template_tx_refs[tx]++;\n+        }\n+    }\n+\n+    ~BlockTemplateImpl()\n+    {\n+        for (const CTransactionRef& tx : m_block_template->block.vtx | std::views::drop(1)) {\n+            auto ref_count{m_node.template_tx_refs.find(tx)};\n+            if (!Assume(ref_count != m_node.template_tx_refs.end())) break;\n+            if (--ref_count->second == 0) {",
      "path": "src/node/interfaces.cpp",
      "position": 35,
      "original_position": 33,
      "commit_id": "71795a21e6ec854f2f450ce04cc6ff9e108a2c89",
      "original_commit_id": "ac1e97a59279b2407e5f64bd684170587bae88dc",
      "in_reply_to_id": null,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Just ran a mutation testing for this PR and this is the only unkilled mutant - feel free to ignore if it doesn't make sense to address:\r\n\r\n```diff\r\ndiff --git a/src/node/interfaces.cpp b/src/node/interfaces.cpp\r\nindex f734296b24..13ddbb672f 100644\r\n--- a/src/node/interfaces.cpp\r\n+++ b/src/node/interfaces.cpp\r\n@@ -880,7 +880,7 @@ public:\r\n         for (const CTransactionRef& tx : m_block_template->block.vtx | std::views::drop(1)) {\r\n             auto ref_count{m_node.template_tx_refs.find(tx)};\r\n             if (!Assume(ref_count != m_node.template_tx_refs.end())) break;\r\n-            if (--ref_count->second == 0) {\r\n+            if (1==1) {\r\n                 m_node.template_tx_refs.erase(ref_count);\r\n             }\r\n         }\r\n```",
      "created_at": "2025-12-02T13:17:51Z",
      "updated_at": "2025-12-02T13:17:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33922#discussion_r2581145624",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2581145624"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33922"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 884,
      "original_line": 884,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2584340016",
      "pull_request_review_id": 3534080431,
      "id": 2584340016,
      "node_id": "PRRC_kwDOABII586aCeYw",
      "diff_hunk": "@@ -866,7 +868,22 @@ class BlockTemplateImpl : public BlockTemplate\n                                                     m_block_template(std::move(block_template)),\n                                                     m_node(node)\n     {\n-        assert(m_block_template);\n+        // Don't track the dummy coinbase, because it can be modified in-place\n+        // by submitSolution()\n+        for (const CTransactionRef& tx : Assert(m_block_template)->block.vtx | std::views::drop(1)) {\n+            m_node.template_tx_refs[tx]++;\n+        }\n+    }\n+\n+    ~BlockTemplateImpl()\n+    {\n+        for (const CTransactionRef& tx : m_block_template->block.vtx | std::views::drop(1)) {\n+            auto ref_count{m_node.template_tx_refs.find(tx)};\n+            if (!Assume(ref_count != m_node.template_tx_refs.end())) break;\n+            if (--ref_count->second == 0) {",
      "path": "src/node/interfaces.cpp",
      "position": 35,
      "original_position": 33,
      "commit_id": "71795a21e6ec854f2f450ce04cc6ff9e108a2c89",
      "original_commit_id": "ac1e97a59279b2407e5f64bd684170587bae88dc",
      "in_reply_to_id": 2581145624,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "@brunoerg that's useful. So far `interface_ipc.py` never had a transaction appear in multiple templates, so the destructor would always remove the last reference.\r\n\r\nI adjusted the test so that it does. Now your mutation causes a crash during this test.",
      "created_at": "2025-12-03T09:36:17Z",
      "updated_at": "2025-12-03T09:37:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33922#discussion_r2584340016",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2584340016"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33922"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 884,
      "original_line": 884,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2587699846",
      "pull_request_review_id": 3538289928,
      "id": 2587699846,
      "node_id": "PRRC_kwDOABII586aPSqG",
      "diff_hunk": "@@ -866,7 +868,22 @@ class BlockTemplateImpl : public BlockTemplate\n                                                     m_block_template(std::move(block_template)),\n                                                     m_node(node)\n     {\n-        assert(m_block_template);\n+        // Don't track the dummy coinbase, because it can be modified in-place\n+        // by submitSolution()\n+        for (const CTransactionRef& tx : Assert(m_block_template)->block.vtx | std::views::drop(1)) {\n+            m_node.template_tx_refs[tx]++;\n+        }\n+    }\n+\n+    ~BlockTemplateImpl()\n+    {\n+        for (const CTransactionRef& tx : m_block_template->block.vtx | std::views::drop(1)) {\n+            auto ref_count{m_node.template_tx_refs.find(tx)};\n+            if (!Assume(ref_count != m_node.template_tx_refs.end())) break;\n+            if (--ref_count->second == 0) {",
      "path": "src/node/interfaces.cpp",
      "position": 35,
      "original_position": 33,
      "commit_id": "71795a21e6ec854f2f450ce04cc6ff9e108a2c89",
      "original_commit_id": "ac1e97a59279b2407e5f64bd684170587bae88dc",
      "in_reply_to_id": 2581145624,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Nice, thank you! ",
      "created_at": "2025-12-04T06:06:14Z",
      "updated_at": "2025-12-04T06:06:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33922#discussion_r2587699846",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2587699846"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33922"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 884,
      "original_line": 884,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2589990820",
      "pull_request_review_id": 3541246611,
      "id": 2589990820,
      "node_id": "PRRC_kwDOABII586aYB-k",
      "diff_hunk": "@@ -858,7 +858,7 @@ static RPCHelpMan getblocktemplate()\n     // Update block\n     static CBlockIndex* pindexPrev;\n     static int64_t time_start;\n-    static std::unique_ptr<BlockTemplate> block_template;\n+    std::unique_ptr<BlockTemplate>& block_template{node.gbt_template};",
      "path": "src/rpc/mining.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "71795a21e6ec854f2f450ce04cc6ff9e108a2c89",
      "original_commit_id": "a5eee29fd7d177f57c78da9773cb656a129de839",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"rpc: move static block_template to node context\" (a5eee29fd7d177f57c78da9773cb656a129de839)\r\n\r\nI think it would actually be nice to move all these static variables to a struct or class like @ismaelsadeeq's  BlockTemplateCache from #33421. But this could be a followup, and doesn't need to complicate this PR.",
      "created_at": "2025-12-04T17:37:39Z",
      "updated_at": "2025-12-04T18:23:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33922#discussion_r2589990820",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2589990820"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33922"
        }
      },
      "start_line": 859,
      "original_start_line": 859,
      "start_side": "LEFT",
      "line": 861,
      "original_line": 861,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2590041765",
      "pull_request_review_id": 3541246611,
      "id": 2590041765,
      "node_id": "PRRC_kwDOABII586aYOal",
      "diff_hunk": "@@ -67,7 +69,11 @@ struct NodeContext {\n     std::unique_ptr<AddrMan> addrman;\n     std::unique_ptr<CConnman> connman;\n     std::unique_ptr<CTxMemPool> mempool;\n-    //! Cache latest getblocktemplate result for BIP 22 long polling\n+    //! Track how many templates (which we hold on to on behalf of connected IPC\n+    //! clients) are referencing each transaction.\n+    TxTemplateMap template_tx_refs;",
      "path": "src/node/context.h",
      "position": 1,
      "original_position": 16,
      "commit_id": "e8f8f7f677bcde0179526be3ed9a657c44998b93",
      "original_commit_id": "7c4d03d7b23417612fbca2f22e5bb1a198c9e5a2",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: track non-mempool memory usage\" (7c4d03d7b23417612fbca2f22e5bb1a198c9e5a2)\r\n\r\nThis map can updated from multiple threads, so it needs a mutex to be used safely. I think I'd suggest combining `template_tx_refs` and `gbt_template` variables and a mutex into single struct called something like `BlockTemplateState` and adding a `unique_ptr` to that struct as a member here. The struct could be replaced with a cache class in #33421.",
      "created_at": "2025-12-04T17:55:02Z",
      "updated_at": "2025-12-04T18:23:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33922#discussion_r2590041765",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2590041765"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33922"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 74,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2590089590",
      "pull_request_review_id": 3541246611,
      "id": 2590089590,
      "node_id": "PRRC_kwDOABII586aYaF2",
      "diff_hunk": "@@ -190,23 +197,28 @@ async def async_routine():\n             miniwallet.send_self_transfer(fee_rate=10, from_node=self.nodes[0])\n             template4 = await waitnext\n             block3 = await self.parse_and_deserialize_block(template4, ctx)\n-            assert_equal(len(block3.vtx), 2)\n+            assert_equal(len(block3.vtx), 3)\n             self.log.debug(\"Wait again, this should return the same template, since the fee threshold is zero\")\n             waitoptions.feeThreshold = 0\n             template5 = await template4.result.waitNext(ctx, waitoptions)\n             block4 = await self.parse_and_deserialize_block(template5, ctx)\n-            assert_equal(len(block4.vtx), 2)\n+            assert_equal(len(block4.vtx), 3)\n             waitoptions.feeThreshold = 1\n             self.log.debug(\"Wait for another, get one after increase in fees in the mempool\")\n             waitnext = template5.result.waitNext(ctx, waitoptions)\n             miniwallet.send_self_transfer(fee_rate=10, from_node=self.nodes[0])\n             template6 = await waitnext\n             block4 = await self.parse_and_deserialize_block(template6, ctx)\n-            assert_equal(len(block4.vtx), 3)\n+            assert_equal(len(block4.vtx), 4)\n             self.log.debug(\"Wait for another, but time out, since the fee threshold is set now\")\n             template7 = await template6.result.waitNext(ctx, waitoptions)\n             assert_equal(template7.to_dict(), {})\n \n+            self.log.debug(\"Memory load should be zero because there was no mempool churn\")\n+            with self.nodes[0].assert_debug_log([\"Calculate template transaction reference memory footprint\"]):",
      "path": "test/functional/interface_ipc.py",
      "position": 1,
      "original_position": 59,
      "commit_id": "7f4249b0d0a126cfaddba48bc1bd4966c14fbd0d",
      "original_commit_id": "e8f8f7f677bcde0179526be3ed9a657c44998b93",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"ipc: add getMemoryLoad()\" (e8f8f7f677bcde0179526be3ed9a657c44998b93)\r\n\r\nSeems ok to assert this log message is logged, but I'm wondering if there was a particular reason for doing this. Was the idea to pair the LOG_TIME_MILLIS_WITH_CATEGORY and assert_debug_log calls together?",
      "created_at": "2025-12-04T18:11:07Z",
      "updated_at": "2025-12-04T18:23:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33922#discussion_r2590089590",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2590089590"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33922"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 218,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2591987168",
      "pull_request_review_id": 3543823791,
      "id": 2591987168,
      "node_id": "PRRC_kwDOABII586afpXg",
      "diff_hunk": "@@ -190,23 +197,28 @@ async def async_routine():\n             miniwallet.send_self_transfer(fee_rate=10, from_node=self.nodes[0])\n             template4 = await waitnext\n             block3 = await self.parse_and_deserialize_block(template4, ctx)\n-            assert_equal(len(block3.vtx), 2)\n+            assert_equal(len(block3.vtx), 3)\n             self.log.debug(\"Wait again, this should return the same template, since the fee threshold is zero\")\n             waitoptions.feeThreshold = 0\n             template5 = await template4.result.waitNext(ctx, waitoptions)\n             block4 = await self.parse_and_deserialize_block(template5, ctx)\n-            assert_equal(len(block4.vtx), 2)\n+            assert_equal(len(block4.vtx), 3)\n             waitoptions.feeThreshold = 1\n             self.log.debug(\"Wait for another, get one after increase in fees in the mempool\")\n             waitnext = template5.result.waitNext(ctx, waitoptions)\n             miniwallet.send_self_transfer(fee_rate=10, from_node=self.nodes[0])\n             template6 = await waitnext\n             block4 = await self.parse_and_deserialize_block(template6, ctx)\n-            assert_equal(len(block4.vtx), 3)\n+            assert_equal(len(block4.vtx), 4)\n             self.log.debug(\"Wait for another, but time out, since the fee threshold is set now\")\n             template7 = await template6.result.waitNext(ctx, waitoptions)\n             assert_equal(template7.to_dict(), {})\n \n+            self.log.debug(\"Memory load should be zero because there was no mempool churn\")\n+            with self.nodes[0].assert_debug_log([\"Calculate template transaction reference memory footprint\"]):",
      "path": "test/functional/interface_ipc.py",
      "position": 1,
      "original_position": 59,
      "commit_id": "7f4249b0d0a126cfaddba48bc1bd4966c14fbd0d",
      "original_commit_id": "e8f8f7f677bcde0179526be3ed9a657c44998b93",
      "in_reply_to_id": 2590089590,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This just checks that bench logging happens.",
      "created_at": "2025-12-05T09:26:08Z",
      "updated_at": "2025-12-05T09:26:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33922#discussion_r2591987168",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2591987168"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33922"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 218,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2592303231",
      "pull_request_review_id": 3544251123,
      "id": 2592303231,
      "node_id": "PRRC_kwDOABII586ag2h_",
      "diff_hunk": "@@ -67,7 +69,11 @@ struct NodeContext {\n     std::unique_ptr<AddrMan> addrman;\n     std::unique_ptr<CConnman> connman;\n     std::unique_ptr<CTxMemPool> mempool;\n-    //! Cache latest getblocktemplate result for BIP 22 long polling\n+    //! Track how many templates (which we hold on to on behalf of connected IPC\n+    //! clients) are referencing each transaction.\n+    TxTemplateMap template_tx_refs;",
      "path": "src/node/context.h",
      "position": 1,
      "original_position": 16,
      "commit_id": "e8f8f7f677bcde0179526be3ed9a657c44998b93",
      "original_commit_id": "7c4d03d7b23417612fbca2f22e5bb1a198c9e5a2",
      "in_reply_to_id": 2590041765,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "To limit the scope of this PR, I only added the mutex, but called it `template_state_mutex` in anticipation.",
      "created_at": "2025-12-05T11:09:14Z",
      "updated_at": "2025-12-05T11:09:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33922#discussion_r2592303231",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2592303231"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33922"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 74,
      "side": "RIGHT"
    }
  ]
}